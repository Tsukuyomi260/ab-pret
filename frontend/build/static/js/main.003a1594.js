/*! For license information please see main.003a1594.js.LICENSE.txt */
(()=>{var e={579:(e,t,s)=>{"use strict";e.exports=s(1153)},917:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});const r=(0,s(3797).A)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]])},1153:(e,t,s)=>{"use strict";var r=s(5043),n=Symbol.for("react.element"),a=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,s){var r,a={},c=null,d=null;for(r in void 0!==s&&(c=""+s),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)i.call(t,r)&&!l.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:n,type:e,key:c,ref:d,props:a,_owner:o.current}}t.Fragment=a,t.jsx=c,t.jsxs=c},1210:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(s(8829)),a=r(s(5736));class i{constructor(e){let{headers:t={},schema:s,fetch:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.url=e,this.headers=new Headers(t),this.schemaName=s,this.fetch=r}from(e){const t=new URL("".concat(this.url,"/").concat(e));return new n.default(t,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new i(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{head:s=!1,get:r=!1,count:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var i;let o;const l=new URL("".concat(this.url,"/rpc/").concat(e));let c;s||r?(o=s?"HEAD":"GET",Object.entries(t).filter(e=>{let[t,s]=e;return void 0!==s}).map(e=>{let[t,s]=e;return[t,Array.isArray(s)?"{".concat(s.join(","),"}"):"".concat(s)]}).forEach(e=>{let[t,s]=e;l.searchParams.append(t,s)})):(o="POST",c=t);const d=new Headers(this.headers);return n&&d.set("Prefer","count=".concat(n)),new a.default({method:o,url:l,headers:d,schema:this.schemaName,body:c,fetch:null!==(i=this.fetch)&&void 0!==i?i:fetch})}}t.default=i},1387:(e,t,s)=>{"use strict";function r(){return r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e},r.apply(this,arguments)}var n;s.d(t,{AO:()=>u,Gh:()=>O,HS:()=>D,Oi:()=>o,Rr:()=>h,pX:()=>U,pb:()=>P,rc:()=>n,tH:()=>F,ue:()=>f,yD:()=>R,zR:()=>i}),function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(n||(n={}));const a="popstate";function i(e){return void 0===e&&(e={}),m(function(e,t){let{pathname:s,search:r,hash:n}=e.location;return d("",{pathname:s,search:r,hash:n},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"===typeof t?t:u(t)},null,e)}function o(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function l(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(s){}}}function c(e,t){return{usr:e.state,key:e.key,idx:t}}function d(e,t,s,n){return void 0===s&&(s=null),r({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?h(t):t,{state:s,key:t&&t.key||n||Math.random().toString(36).substr(2,8)})}function u(e){let{pathname:t="/",search:s="",hash:r=""}=e;return s&&"?"!==s&&(t+="?"===s.charAt(0)?s:"?"+s),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function h(e){let t={};if(e){let s=e.indexOf("#");s>=0&&(t.hash=e.substr(s),e=e.substr(0,s));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function m(e,t,s,i){void 0===i&&(i={});let{window:l=document.defaultView,v5Compat:h=!1}=i,m=l.history,p=n.Pop,f=null,x=g();function g(){return(m.state||{idx:null}).idx}function v(){p=n.Pop;let e=g(),t=null==e?null:e-x;x=e,f&&f({action:p,location:b.location,delta:t})}function y(e){let t="null"!==l.location.origin?l.location.origin:l.location.href,s="string"===typeof e?e:u(e);return s=s.replace(/ $/,"%20"),o(t,"No window.location.(origin|href) available to create URL for href: "+s),new URL(s,t)}null==x&&(x=0,m.replaceState(r({},m.state,{idx:x}),""));let b={get action(){return p},get location(){return e(l,m)},listen(e){if(f)throw new Error("A history only accepts one active listener");return l.addEventListener(a,v),f=e,()=>{l.removeEventListener(a,v),f=null}},createHref:e=>t(l,e),createURL:y,encodeLocation(e){let t=y(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){p=n.Push;let r=d(b.location,e,t);s&&s(r,e),x=g()+1;let a=c(r,x),i=b.createHref(r);try{m.pushState(a,"",i)}catch(o){if(o instanceof DOMException&&"DataCloneError"===o.name)throw o;l.location.assign(i)}h&&f&&f({action:p,location:b.location,delta:1})},replace:function(e,t){p=n.Replace;let r=d(b.location,e,t);s&&s(r,e),x=g();let a=c(r,x),i=b.createHref(r);m.replaceState(a,"",i),h&&f&&f({action:p,location:b.location,delta:0})},go:e=>m.go(e)};return b}var p;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(p||(p={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function f(e,t,s){return void 0===s&&(s="/"),x(e,t,s,!1)}function x(e,t,s,r){let n=P(("string"===typeof t?h(t):t).pathname||"/",s);if(null==n)return null;let a=g(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let s=e.length===t.length&&e.slice(0,-1).every((e,s)=>e===t[s]);return s?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(a);let i=null;for(let o=0;null==i&&o<a.length;++o){let e=C(n);i=_(a[o],e,r)}return i}function g(e,t,s,r){void 0===t&&(t=[]),void 0===s&&(s=[]),void 0===r&&(r="");let n=(e,n,a)=>{let i={relativePath:void 0===a?e.path||"":a,caseSensitive:!0===e.caseSensitive,childrenIndex:n,route:e};i.relativePath.startsWith("/")&&(o(i.relativePath.startsWith(r),'Absolute route path "'+i.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),i.relativePath=i.relativePath.slice(r.length));let l=D([r,i.relativePath]),c=s.concat(i);e.children&&e.children.length>0&&(o(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+l+'".'),g(e.children,t,c,l)),(null!=e.path||e.index)&&t.push({path:l,score:A(l,e.index),routesMeta:c})};return e.forEach((e,t)=>{var s;if(""!==e.path&&null!=(s=e.path)&&s.includes("?"))for(let r of v(e.path))n(e,t,r);else n(e,t)}),t}function v(e){let t=e.split("/");if(0===t.length)return[];let[s,...r]=t,n=s.endsWith("?"),a=s.replace(/\?$/,"");if(0===r.length)return n?[a,""]:[a];let i=v(r.join("/")),o=[];return o.push(...i.map(e=>""===e?a:[a,e].join("/"))),n&&o.push(...i),o.map(t=>e.startsWith("/")&&""===t?"/":t)}const y=/^:[\w-]+$/,b=3,j=2,w=1,N=10,S=-2,k=e=>"*"===e;function A(e,t){let s=e.split("/"),r=s.length;return s.some(k)&&(r+=S),t&&(r+=j),s.filter(e=>!k(e)).reduce((e,t)=>e+(y.test(t)?b:""===t?w:N),r)}function _(e,t,s){void 0===s&&(s=!1);let{routesMeta:r}=e,n={},a="/",i=[];for(let o=0;o<r.length;++o){let e=r[o],l=o===r.length-1,c="/"===a?t:t.slice(a.length)||"/",d=E({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),u=e.route;if(!d&&l&&s&&!r[r.length-1].route.index&&(d=E({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!d)return null;Object.assign(n,d.params),i.push({params:n,pathname:D([a,d.pathname]),pathnameBase:L(D([a,d.pathnameBase])),route:u}),"/"!==d.pathnameBase&&(a=D([a,d.pathnameBase]))}return i}function E(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[s,r]=function(e,t,s){void 0===t&&(t=!1);void 0===s&&(s=!0);l("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],n="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,s)=>(r.push({paramName:t,isOptional:null!=s}),s?"/?([^\\/]+)?":"/([^\\/]+)"));e.endsWith("*")?(r.push({paramName:"*"}),n+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?n+="\\/*$":""!==e&&"/"!==e&&(n+="(?:(?=\\/|$))");let a=new RegExp(n,t?void 0:"i");return[a,r]}(e.path,e.caseSensitive,e.end),n=t.match(s);if(!n)return null;let a=n[0],i=a.replace(/(.)\/+$/,"$1"),o=n.slice(1);return{params:r.reduce((e,t,s)=>{let{paramName:r,isOptional:n}=t;if("*"===r){let e=o[s]||"";i=a.slice(0,a.length-e.length).replace(/(.)\/+$/,"$1")}const l=o[s];return e[r]=n&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{}),pathname:a,pathnameBase:i,pattern:e}}function C(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return l(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function P(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let s=t.endsWith("/")?t.length-1:t.length,r=e.charAt(s);return r&&"/"!==r?null:e.slice(s)||"/"}function T(e,t,s,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+s+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function I(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function R(e,t){let s=I(e);return t?s.map((e,t)=>t===s.length-1?e.pathname:e.pathnameBase):s.map(e=>e.pathnameBase)}function O(e,t,s,n){let a;void 0===n&&(n=!1),"string"===typeof e?a=h(e):(a=r({},e),o(!a.pathname||!a.pathname.includes("?"),T("?","pathname","search",a)),o(!a.pathname||!a.pathname.includes("#"),T("#","pathname","hash",a)),o(!a.search||!a.search.includes("#"),T("#","search","hash",a)));let i,l=""===e||""===a.pathname,c=l?"/":a.pathname;if(null==c)i=s;else{let e=t.length-1;if(!n&&c.startsWith("..")){let t=c.split("/");for(;".."===t[0];)t.shift(),e-=1;a.pathname=t.join("/")}i=e>=0?t[e]:"/"}let d=function(e,t){void 0===t&&(t="/");let{pathname:s,search:r="",hash:n=""}="string"===typeof e?h(e):e,a=s?s.startsWith("/")?s:function(e,t){let s=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?s.length>1&&s.pop():"."!==e&&s.push(e)}),s.length>1?s.join("/"):"/"}(s,t):t;return{pathname:a,search:z(r),hash:M(n)}}(a,i),u=c&&"/"!==c&&c.endsWith("/"),m=(l||"."===c)&&s.endsWith("/");return d.pathname.endsWith("/")||!u&&!m||(d.pathname+="/"),d}const D=e=>e.join("/").replace(/\/\/+/g,"/"),L=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),z=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",M=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";class F extends Error{}function U(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const B=["post","put","patch","delete"],V=(new Set(B),["get",...B]);new Set(V),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred")},2285:e=>{var t,s,r=e.exports={};function n(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function i(e){if(t===setTimeout)return setTimeout(e,0);if((t===n||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(s){try{return t.call(null,e,0)}catch(s){return t.call(this,e,0)}}}!function(){try{t="function"===typeof setTimeout?setTimeout:n}catch(e){t=n}try{s="function"===typeof clearTimeout?clearTimeout:a}catch(e){s=a}}();var o,l=[],c=!1,d=-1;function u(){c&&o&&(c=!1,o.length?l=o.concat(l):d=-1,l.length&&h())}function h(){if(!c){var e=i(u);c=!0;for(var t=l.length;t;){for(o=l,l=[];++d<t;)o&&o[d].run();d=-1,t=l.length}o=null,c=!1,function(e){if(s===clearTimeout)return clearTimeout(e);if((s===a||!s)&&clearTimeout)return s=clearTimeout,clearTimeout(e);try{return s(e)}catch(t){try{return s.call(null,e)}catch(t){return s.call(this,e)}}}(e)}}function m(e,t){this.fun=e,this.array=t}function p(){}r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var s=1;s<arguments.length;s++)t[s-1]=arguments[s];l.push(new m(e,t)),1!==l.length||c||i(h)},m.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=p,r.addListener=p,r.once=p,r.off=p,r.removeListener=p,r.removeAllListeners=p,r.emit=p,r.prependListener=p,r.prependOnceListener=p,r.listeners=function(e){return[]},r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},2555:(e,t,s)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function n(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var n=s.call(e,t||"default");if("object"!=r(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}function a(e,t,s){return(t=n(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function i(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,r)}return s}function o(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?i(Object(s),!0).forEach(function(t){a(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):i(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}s.d(t,{A:()=>o})},2611:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});class s extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}}t.default=s},2730:(e,t,s)=>{"use strict";var r=s(5043),n=s(8853);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,s=1;s<arguments.length;s++)t+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(o[e]=t,e=0;e<t.length;e++)i.add(t[e])}var d=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),u=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},p={};function f(e,t,s,r,n,a,i){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=n,this.mustUseProperty=s,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=i}var x={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){x[e]=new f(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];x[t]=new f(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){x[e]=new f(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){x[e]=new f(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){x[e]=new f(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){x[e]=new f(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){x[e]=new f(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){x[e]=new f(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){x[e]=new f(e,5,!1,e.toLowerCase(),null,!1,!1)});var g=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function y(e,t,s,r){var n=x.hasOwnProperty(t)?x[t]:null;(null!==n?0!==n.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,s,r){if(null===t||"undefined"===typeof t||function(e,t,s,r){if(null!==s&&0===s.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==s?!s.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,s,r))return!0;if(r)return!1;if(null!==s)switch(s.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,s,n,r)&&(s=null),r||null===n?function(e){return!!u.call(p,e)||!u.call(m,e)&&(h.test(e)?p[e]=!0:(m[e]=!0,!1))}(t)&&(null===s?e.removeAttribute(t):e.setAttribute(t,""+s)):n.mustUseProperty?e[n.propertyName]=null===s?3!==n.type&&"":s:(t=n.attributeName,r=n.attributeNamespace,null===s?e.removeAttribute(t):(s=3===(n=n.type)||4===n&&!0===s?"":""+s,r?e.setAttributeNS(r,t,s):e.setAttribute(t,s))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(g,v);x[t]=new f(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(g,v);x[t]=new f(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(g,v);x[t]=new f(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){x[e]=new f(e,1,!1,e.toLowerCase(),null,!1,!1)}),x.xlinkHref=new f("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){x[e]=new f(e,1,!1,e.toLowerCase(),null,!0,!0)});var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,j=Symbol.for("react.element"),w=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),A=Symbol.for("react.provider"),_=Symbol.for("react.context"),E=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),T=Symbol.for("react.memo"),I=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var R=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function D(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var L,z=Object.assign;function M(e){if(void 0===L)try{throw Error()}catch(s){var t=s.stack.trim().match(/\n( *(at )?)/);L=t&&t[1]||""}return"\n"+L+e}var F=!1;function U(e,t){if(!e||F)return"";F=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var n=c.stack.split("\n"),a=r.stack.split("\n"),i=n.length-1,o=a.length-1;1<=i&&0<=o&&n[i]!==a[o];)o--;for(;1<=i&&0<=o;i--,o--)if(n[i]!==a[o]){if(1!==i||1!==o)do{if(i--,0>--o||n[i]!==a[o]){var l="\n"+n[i].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=i&&0<=o);break}}}finally{F=!1,Error.prepareStackTrace=s}return(e=e?e.displayName||e.name:"")?M(e):""}function B(e){switch(e.tag){case 5:return M(e.type);case 16:return M("Lazy");case 13:return M("Suspense");case 19:return M("SuspenseList");case 0:case 2:case 15:return e=U(e.type,!1);case 11:return e=U(e.type.render,!1);case 1:return e=U(e.type,!0);default:return""}}function V(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case N:return"Fragment";case w:return"Portal";case k:return"Profiler";case S:return"StrictMode";case C:return"Suspense";case P:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case _:return(e.displayName||"Context")+".Consumer";case A:return(e._context.displayName||"Context")+".Provider";case E:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case T:return null!==(t=e.displayName||null)?t:V(e.type)||"Memo";case I:t=e._payload,e=e._init;try{return V(e(t))}catch(s){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return V(t);case 8:return t===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function W(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function G(e){e._valueTracker||(e._valueTracker=function(e){var t=W(e)?"checked":"value",s=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof s&&"function"===typeof s.get&&"function"===typeof s.set){var n=s.get,a=s.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return n.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:s.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function K(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var s=t.getValue(),r="";return e&&(r=W(e)?e.checked?"true":"false":e.value),(e=r)!==s&&(t.setValue(e),!0)}function Z(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Q(e,t){var s=t.checked;return z({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=s?s:e._wrapperState.initialChecked})}function J(e,t){var s=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;s=H(null!=t.value?t.value:s),e._wrapperState={initialChecked:r,initialValue:s,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Y(e,t){null!=(t=t.checked)&&y(e,"checked",t,!1)}function $(e,t){Y(e,t);var s=H(t.value),r=t.type;if(null!=s)"number"===r?(0===s&&""===e.value||e.value!=s)&&(e.value=""+s):e.value!==""+s&&(e.value=""+s);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,s):t.hasOwnProperty("defaultValue")&&ee(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function X(e,t,s){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,s||t===e.value||(e.value=t),e.defaultValue=t}""!==(s=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==s&&(e.name=s)}function ee(e,t,s){"number"===t&&Z(e.ownerDocument)===e||(null==s?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+s&&(e.defaultValue=""+s))}var te=Array.isArray;function se(e,t,s,r){if(e=e.options,t){t={};for(var n=0;n<s.length;n++)t["$"+s[n]]=!0;for(s=0;s<e.length;s++)n=t.hasOwnProperty("$"+e[s].value),e[s].selected!==n&&(e[s].selected=n),n&&r&&(e[s].defaultSelected=!0)}else{for(s=""+H(s),t=null,n=0;n<e.length;n++){if(e[n].value===s)return e[n].selected=!0,void(r&&(e[n].defaultSelected=!0));null!==t||e[n].disabled||(t=e[n])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return z({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ne(e,t){var s=t.value;if(null==s){if(s=t.children,t=t.defaultValue,null!=s){if(null!=t)throw Error(a(92));if(te(s)){if(1<s.length)throw Error(a(93));s=s[0]}t=s}null==t&&(t=""),s=t}e._wrapperState={initialValue:H(s)}}function ae(e,t){var s=H(t.value),r=H(t.defaultValue);null!=s&&((s=""+s)!==e.value&&(e.value=s),null==t.defaultValue&&e.defaultValue!==s&&(e.defaultValue=s)),null!=r&&(e.defaultValue=""+r)}function ie(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,de,ue=(de=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,s,r){MSApp.execUnsafeLocalFunction(function(){return de(e,t)})}:de);function he(e,t){if(t){var s=e.firstChild;if(s&&s===e.lastChild&&3===s.nodeType)return void(s.nodeValue=t)}e.textContent=t}var me={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function fe(e,t,s){return null==t||"boolean"===typeof t||""===t?"":s||"number"!==typeof t||0===t||me.hasOwnProperty(e)&&me[e]?(""+t).trim():t+"px"}function xe(e,t){for(var s in e=e.style,t)if(t.hasOwnProperty(s)){var r=0===s.indexOf("--"),n=fe(s,t[s],r);"float"===s&&(s="cssFloat"),r?e.setProperty(s,n):e[s]=n}}Object.keys(me).forEach(function(e){pe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),me[t]=me[e]})});var ge=z({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(ge[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ye(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function je(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var we=null,Ne=null,Se=null;function ke(e){if(e=yn(e)){if("function"!==typeof we)throw Error(a(280));var t=e.stateNode;t&&(t=jn(t),we(e.stateNode,e.type,t))}}function Ae(e){Ne?Se?Se.push(e):Se=[e]:Ne=e}function _e(){if(Ne){var e=Ne,t=Se;if(Se=Ne=null,ke(e),t)for(e=0;e<t.length;e++)ke(t[e])}}function Ee(e,t){return e(t)}function Ce(){}var Pe=!1;function Te(e,t,s){if(Pe)return e(t,s);Pe=!0;try{return Ee(e,t,s)}finally{Pe=!1,(null!==Ne||null!==Se)&&(Ce(),_e())}}function Ie(e,t){var s=e.stateNode;if(null===s)return null;var r=jn(s);if(null===r)return null;s=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(s&&"function"!==typeof s)throw Error(a(231,t,typeof s));return s}var Re=!1;if(d)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){Re=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(de){Re=!1}function De(e,t,s,r,n,a,i,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(s,c)}catch(d){this.onError(d)}}var Le=!1,ze=null,Me=!1,Fe=null,Ue={onError:function(e){Le=!0,ze=e}};function Be(e,t,s,r,n,a,i,o,l){Le=!1,ze=null,De.apply(Ue,arguments)}function Ve(e){var t=e,s=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(s=t.return),e=t.return}while(e)}return 3===t.tag?s:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function He(e){if(Ve(e)!==e)throw Error(a(188))}function We(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ve(e)))throw Error(a(188));return t!==e?null:e}for(var s=e,r=t;;){var n=s.return;if(null===n)break;var i=n.alternate;if(null===i){if(null!==(r=n.return)){s=r;continue}break}if(n.child===i.child){for(i=n.child;i;){if(i===s)return He(n),e;if(i===r)return He(n),t;i=i.sibling}throw Error(a(188))}if(s.return!==r.return)s=n,r=i;else{for(var o=!1,l=n.child;l;){if(l===s){o=!0,s=n,r=i;break}if(l===r){o=!0,r=n,s=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===s){o=!0,s=i,r=n;break}if(l===r){o=!0,r=i,s=n;break}l=l.sibling}if(!o)throw Error(a(189))}}if(s.alternate!==r)throw Error(a(190))}if(3!==s.tag)throw Error(a(188));return s.stateNode.current===s?e:t}(e))?Ge(e):null}function Ge(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ge(e);if(null!==t)return t;e=e.sibling}return null}var Ke=n.unstable_scheduleCallback,Ze=n.unstable_cancelCallback,Qe=n.unstable_shouldYield,Je=n.unstable_requestPaint,Ye=n.unstable_now,$e=n.unstable_getCurrentPriorityLevel,Xe=n.unstable_ImmediatePriority,et=n.unstable_UserBlockingPriority,tt=n.unstable_NormalPriority,st=n.unstable_LowPriority,rt=n.unstable_IdlePriority,nt=null,at=null;var it=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ot(e)/lt|0)|0},ot=Math.log,lt=Math.LN2;var ct=64,dt=4194304;function ut(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var s=e.pendingLanes;if(0===s)return 0;var r=0,n=e.suspendedLanes,a=e.pingedLanes,i=268435455&s;if(0!==i){var o=i&~n;0!==o?r=ut(o):0!==(a&=i)&&(r=ut(a))}else 0!==(i=s&~n)?r=ut(i):0!==a&&(r=ut(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&n)&&((n=r&-r)>=(a=t&-t)||16===n&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&s),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)n=1<<(s=31-it(t)),r|=e[s],t&=~n;return r}function mt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function ft(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function xt(e){for(var t=[],s=0;31>s;s++)t.push(e);return t}function gt(e,t,s){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-it(t)]=s}function vt(e,t){var s=e.entangledLanes|=t;for(e=e.entanglements;s;){var r=31-it(s),n=1<<r;n&t|e[r]&t&&(e[r]|=t),s&=~n}}var yt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var jt,wt,Nt,St,kt,At=!1,_t=[],Et=null,Ct=null,Pt=null,Tt=new Map,It=new Map,Rt=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Dt(e,t){switch(e){case"focusin":case"focusout":Et=null;break;case"dragenter":case"dragleave":Ct=null;break;case"mouseover":case"mouseout":Pt=null;break;case"pointerover":case"pointerout":Tt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":It.delete(t.pointerId)}}function Lt(e,t,s,r,n,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:s,eventSystemFlags:r,nativeEvent:a,targetContainers:[n]},null!==t&&(null!==(t=yn(t))&&wt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==n&&-1===t.indexOf(n)&&t.push(n),e)}function zt(e){var t=vn(e.target);if(null!==t){var s=Ve(t);if(null!==s)if(13===(t=s.tag)){if(null!==(t=qe(s)))return e.blockedOn=t,void kt(e.priority,function(){Nt(s)})}else if(3===t&&s.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===s.tag?s.stateNode.containerInfo:null)}e.blockedOn=null}function Mt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var s=Qt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==s)return null!==(t=yn(s))&&wt(t),e.blockedOn=s,!1;var r=new(s=e.nativeEvent).constructor(s.type,s);be=r,s.target.dispatchEvent(r),be=null,t.shift()}return!0}function Ft(e,t,s){Mt(e)&&s.delete(t)}function Ut(){At=!1,null!==Et&&Mt(Et)&&(Et=null),null!==Ct&&Mt(Ct)&&(Ct=null),null!==Pt&&Mt(Pt)&&(Pt=null),Tt.forEach(Ft),It.forEach(Ft)}function Bt(e,t){e.blockedOn===t&&(e.blockedOn=null,At||(At=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,Ut)))}function Vt(e){function t(t){return Bt(t,e)}if(0<_t.length){Bt(_t[0],e);for(var s=1;s<_t.length;s++){var r=_t[s];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Et&&Bt(Et,e),null!==Ct&&Bt(Ct,e),null!==Pt&&Bt(Pt,e),Tt.forEach(t),It.forEach(t),s=0;s<Rt.length;s++)(r=Rt[s]).blockedOn===e&&(r.blockedOn=null);for(;0<Rt.length&&null===(s=Rt[0]).blockedOn;)zt(s),null===s.blockedOn&&Rt.shift()}var qt=b.ReactCurrentBatchConfig,Ht=!0;function Wt(e,t,s,r){var n=yt,a=qt.transition;qt.transition=null;try{yt=1,Kt(e,t,s,r)}finally{yt=n,qt.transition=a}}function Gt(e,t,s,r){var n=yt,a=qt.transition;qt.transition=null;try{yt=4,Kt(e,t,s,r)}finally{yt=n,qt.transition=a}}function Kt(e,t,s,r){if(Ht){var n=Qt(e,t,s,r);if(null===n)qr(e,t,r,Zt,s),Dt(e,r);else if(function(e,t,s,r,n){switch(t){case"focusin":return Et=Lt(Et,e,t,s,r,n),!0;case"dragenter":return Ct=Lt(Ct,e,t,s,r,n),!0;case"mouseover":return Pt=Lt(Pt,e,t,s,r,n),!0;case"pointerover":var a=n.pointerId;return Tt.set(a,Lt(Tt.get(a)||null,e,t,s,r,n)),!0;case"gotpointercapture":return a=n.pointerId,It.set(a,Lt(It.get(a)||null,e,t,s,r,n)),!0}return!1}(n,e,t,s,r))r.stopPropagation();else if(Dt(e,r),4&t&&-1<Ot.indexOf(e)){for(;null!==n;){var a=yn(n);if(null!==a&&jt(a),null===(a=Qt(e,t,s,r))&&qr(e,t,r,Zt,s),a===n)break;n=a}null!==n&&r.stopPropagation()}else qr(e,t,r,null,s)}}var Zt=null;function Qt(e,t,s,r){if(Zt=null,null!==(e=vn(e=je(r))))if(null===(t=Ve(e)))e=null;else if(13===(s=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===s){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Zt=e,null}function Jt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($e()){case Xe:return 1;case et:return 4;case tt:case st:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Yt=null,$t=null,Xt=null;function es(){if(Xt)return Xt;var e,t,s=$t,r=s.length,n="value"in Yt?Yt.value:Yt.textContent,a=n.length;for(e=0;e<r&&s[e]===n[e];e++);var i=r-e;for(t=1;t<=i&&s[r-t]===n[a-t];t++);return Xt=n.slice(e,1<t?1-t:void 0)}function ts(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function ss(){return!0}function rs(){return!1}function ns(e){function t(t,s,r,n,a){for(var i in this._reactName=t,this._targetInst=r,this.type=s,this.nativeEvent=n,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(i)&&(t=e[i],this[i]=t?t(n):n[i]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?ss:rs,this.isPropagationStopped=rs,this}return z(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=ss)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=ss)},persist:function(){},isPersistent:ss}),t}var as,is,os,ls={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cs=ns(ls),ds=z({},ls,{view:0,detail:0}),us=ns(ds),hs=z({},ds,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ss,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==os&&(os&&"mousemove"===e.type?(as=e.screenX-os.screenX,is=e.screenY-os.screenY):is=as=0,os=e),as)},movementY:function(e){return"movementY"in e?e.movementY:is}}),ms=ns(hs),ps=ns(z({},hs,{dataTransfer:0})),fs=ns(z({},ds,{relatedTarget:0})),xs=ns(z({},ls,{animationName:0,elapsedTime:0,pseudoElement:0})),gs=z({},ls,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),vs=ns(gs),ys=ns(z({},ls,{data:0})),bs={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},js={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ws={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ns(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=ws[e])&&!!t[e]}function Ss(){return Ns}var ks=z({},ds,{key:function(e){if(e.key){var t=bs[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=ts(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?js[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ss,charCode:function(e){return"keypress"===e.type?ts(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?ts(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),As=ns(ks),_s=ns(z({},hs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Es=ns(z({},ds,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ss})),Cs=ns(z({},ls,{propertyName:0,elapsedTime:0,pseudoElement:0})),Ps=z({},hs,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ts=ns(Ps),Is=[9,13,27,32],Rs=d&&"CompositionEvent"in window,Os=null;d&&"documentMode"in document&&(Os=document.documentMode);var Ds=d&&"TextEvent"in window&&!Os,Ls=d&&(!Rs||Os&&8<Os&&11>=Os),zs=String.fromCharCode(32),Ms=!1;function Fs(e,t){switch(e){case"keyup":return-1!==Is.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Us(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Bs=!1;var Vs={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qs(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Vs[e.type]:"textarea"===t}function Hs(e,t,s,r){Ae(r),0<(t=Wr(t,"onChange")).length&&(s=new cs("onChange","change",null,s,r),e.push({event:s,listeners:t}))}var Ws=null,Gs=null;function Ks(e){zr(e,0)}function Zs(e){if(K(bn(e)))return e}function Qs(e,t){if("change"===e)return t}var Js=!1;if(d){var Ys;if(d){var $s="oninput"in document;if(!$s){var Xs=document.createElement("div");Xs.setAttribute("oninput","return;"),$s="function"===typeof Xs.oninput}Ys=$s}else Ys=!1;Js=Ys&&(!document.documentMode||9<document.documentMode)}function er(){Ws&&(Ws.detachEvent("onpropertychange",tr),Gs=Ws=null)}function tr(e){if("value"===e.propertyName&&Zs(Gs)){var t=[];Hs(t,Gs,e,je(e)),Te(Ks,t)}}function sr(e,t,s){"focusin"===e?(er(),Gs=s,(Ws=t).attachEvent("onpropertychange",tr)):"focusout"===e&&er()}function rr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Zs(Gs)}function nr(e,t){if("click"===e)return Zs(t)}function ar(e,t){if("input"===e||"change"===e)return Zs(t)}var ir="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function or(e,t){if(ir(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var s=Object.keys(e),r=Object.keys(t);if(s.length!==r.length)return!1;for(r=0;r<s.length;r++){var n=s[r];if(!u.call(t,n)||!ir(e[n],t[n]))return!1}return!0}function lr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function cr(e,t){var s,r=lr(e);for(e=0;r;){if(3===r.nodeType){if(s=e+r.textContent.length,e<=t&&s>=t)return{node:r,offset:t-e};e=s}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=lr(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function ur(){for(var e=window,t=Z();t instanceof e.HTMLIFrameElement;){try{var s="string"===typeof t.contentWindow.location.href}catch(r){s=!1}if(!s)break;t=Z((e=t.contentWindow).document)}return t}function hr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function mr(e){var t=ur(),s=e.focusedElem,r=e.selectionRange;if(t!==s&&s&&s.ownerDocument&&dr(s.ownerDocument.documentElement,s)){if(null!==r&&hr(s))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in s)s.selectionStart=t,s.selectionEnd=Math.min(e,s.value.length);else if((e=(t=s.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var n=s.textContent.length,a=Math.min(r.start,n);r=void 0===r.end?a:Math.min(r.end,n),!e.extend&&a>r&&(n=r,r=a,a=n),n=cr(s,a);var i=cr(s,r);n&&i&&(1!==e.rangeCount||e.anchorNode!==n.node||e.anchorOffset!==n.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&((t=t.createRange()).setStart(n.node,n.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}for(t=[],e=s;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof s.focus&&s.focus(),s=0;s<t.length;s++)(e=t[s]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var pr=d&&"documentMode"in document&&11>=document.documentMode,fr=null,xr=null,gr=null,vr=!1;function yr(e,t,s){var r=s.window===s?s.document:9===s.nodeType?s:s.ownerDocument;vr||null==fr||fr!==Z(r)||("selectionStart"in(r=fr)&&hr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},gr&&or(gr,r)||(gr=r,0<(r=Wr(xr,"onSelect")).length&&(t=new cs("onSelect","select",null,t,s),e.push({event:t,listeners:r}),t.target=fr)))}function br(e,t){var s={};return s[e.toLowerCase()]=t.toLowerCase(),s["Webkit"+e]="webkit"+t,s["Moz"+e]="moz"+t,s}var jr={animationend:br("Animation","AnimationEnd"),animationiteration:br("Animation","AnimationIteration"),animationstart:br("Animation","AnimationStart"),transitionend:br("Transition","TransitionEnd")},wr={},Nr={};function Sr(e){if(wr[e])return wr[e];if(!jr[e])return e;var t,s=jr[e];for(t in s)if(s.hasOwnProperty(t)&&t in Nr)return wr[e]=s[t];return e}d&&(Nr=document.createElement("div").style,"AnimationEvent"in window||(delete jr.animationend.animation,delete jr.animationiteration.animation,delete jr.animationstart.animation),"TransitionEvent"in window||delete jr.transitionend.transition);var kr=Sr("animationend"),Ar=Sr("animationiteration"),_r=Sr("animationstart"),Er=Sr("transitionend"),Cr=new Map,Pr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Tr(e,t){Cr.set(e,t),l(t,[e])}for(var Ir=0;Ir<Pr.length;Ir++){var Rr=Pr[Ir];Tr(Rr.toLowerCase(),"on"+(Rr[0].toUpperCase()+Rr.slice(1)))}Tr(kr,"onAnimationEnd"),Tr(Ar,"onAnimationIteration"),Tr(_r,"onAnimationStart"),Tr("dblclick","onDoubleClick"),Tr("focusin","onFocus"),Tr("focusout","onBlur"),Tr(Er,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Or="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Dr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Or));function Lr(e,t,s){var r=e.type||"unknown-event";e.currentTarget=s,function(e,t,s,r,n,i,o,l,c){if(Be.apply(this,arguments),Le){if(!Le)throw Error(a(198));var d=ze;Le=!1,ze=null,Me||(Me=!0,Fe=d)}}(r,t,void 0,e),e.currentTarget=null}function zr(e,t){t=0!==(4&t);for(var s=0;s<e.length;s++){var r=e[s],n=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var i=r.length-1;0<=i;i--){var o=r[i],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==a&&n.isPropagationStopped())break e;Lr(n,o,c),a=l}else for(i=0;i<r.length;i++){if(l=(o=r[i]).instance,c=o.currentTarget,o=o.listener,l!==a&&n.isPropagationStopped())break e;Lr(n,o,c),a=l}}}if(Me)throw e=Fe,Me=!1,Fe=null,e}function Mr(e,t){var s=t[fn];void 0===s&&(s=t[fn]=new Set);var r=e+"__bubble";s.has(r)||(Vr(t,e,2,!1),s.add(r))}function Fr(e,t,s){var r=0;t&&(r|=4),Vr(s,e,r,t)}var Ur="_reactListening"+Math.random().toString(36).slice(2);function Br(e){if(!e[Ur]){e[Ur]=!0,i.forEach(function(t){"selectionchange"!==t&&(Dr.has(t)||Fr(t,!1,e),Fr(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Ur]||(t[Ur]=!0,Fr("selectionchange",!1,t))}}function Vr(e,t,s,r){switch(Jt(t)){case 1:var n=Wt;break;case 4:n=Gt;break;default:n=Kt}s=n.bind(null,t,s,e),n=void 0,!Re||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(n=!0),r?void 0!==n?e.addEventListener(t,s,{capture:!0,passive:n}):e.addEventListener(t,s,!0):void 0!==n?e.addEventListener(t,s,{passive:n}):e.addEventListener(t,s,!1)}function qr(e,t,s,r,n){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var i=r.tag;if(3===i||4===i){var o=r.stateNode.containerInfo;if(o===n||8===o.nodeType&&o.parentNode===n)break;if(4===i)for(i=r.return;null!==i;){var l=i.tag;if((3===l||4===l)&&((l=i.stateNode.containerInfo)===n||8===l.nodeType&&l.parentNode===n))return;i=i.return}for(;null!==o;){if(null===(i=vn(o)))return;if(5===(l=i.tag)||6===l){r=a=i;continue e}o=o.parentNode}}r=r.return}Te(function(){var r=a,n=je(s),i=[];e:{var o=Cr.get(e);if(void 0!==o){var l=cs,c=e;switch(e){case"keypress":if(0===ts(s))break e;case"keydown":case"keyup":l=As;break;case"focusin":c="focus",l=fs;break;case"focusout":c="blur",l=fs;break;case"beforeblur":case"afterblur":l=fs;break;case"click":if(2===s.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=ms;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=ps;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Es;break;case kr:case Ar:case _r:l=xs;break;case Er:l=Cs;break;case"scroll":l=us;break;case"wheel":l=Ts;break;case"copy":case"cut":case"paste":l=vs;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=_s}var d=0!==(4&t),u=!d&&"scroll"===e,h=d?null!==o?o+"Capture":null:o;d=[];for(var m,p=r;null!==p;){var f=(m=p).stateNode;if(5===m.tag&&null!==f&&(m=f,null!==h&&(null!=(f=Ie(p,h))&&d.push(Hr(p,f,m)))),u)break;p=p.return}0<d.length&&(o=new l(o,c,null,s,n),i.push({event:o,listeners:d}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||s===be||!(c=s.relatedTarget||s.fromElement)||!vn(c)&&!c[pn])&&(l||o)&&(o=n.window===n?n:(o=n.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=r,null!==(c=(c=s.relatedTarget||s.toElement)?vn(c):null)&&(c!==(u=Ve(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(d=ms,f="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(d=_s,f="onPointerLeave",h="onPointerEnter",p="pointer"),u=null==l?o:bn(l),m=null==c?o:bn(c),(o=new d(f,p+"leave",l,s,n)).target=u,o.relatedTarget=m,f=null,vn(n)===r&&((d=new d(h,p+"enter",c,s,n)).target=m,d.relatedTarget=u,f=d),u=f,l&&c)e:{for(h=c,p=0,m=d=l;m;m=Gr(m))p++;for(m=0,f=h;f;f=Gr(f))m++;for(;0<p-m;)d=Gr(d),p--;for(;0<m-p;)h=Gr(h),m--;for(;p--;){if(d===h||null!==h&&d===h.alternate)break e;d=Gr(d),h=Gr(h)}d=null}else d=null;null!==l&&Kr(i,o,l,d,!1),null!==c&&null!==u&&Kr(i,u,c,d,!0)}if("select"===(l=(o=r?bn(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var x=Qs;else if(qs(o))if(Js)x=ar;else{x=rr;var g=sr}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(x=nr);switch(x&&(x=x(e,r))?Hs(i,x,s,n):(g&&g(e,o,r),"focusout"===e&&(g=o._wrapperState)&&g.controlled&&"number"===o.type&&ee(o,"number",o.value)),g=r?bn(r):window,e){case"focusin":(qs(g)||"true"===g.contentEditable)&&(fr=g,xr=r,gr=null);break;case"focusout":gr=xr=fr=null;break;case"mousedown":vr=!0;break;case"contextmenu":case"mouseup":case"dragend":vr=!1,yr(i,s,n);break;case"selectionchange":if(pr)break;case"keydown":case"keyup":yr(i,s,n)}var v;if(Rs)e:{switch(e){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else Bs?Fs(e,s)&&(y="onCompositionEnd"):"keydown"===e&&229===s.keyCode&&(y="onCompositionStart");y&&(Ls&&"ko"!==s.locale&&(Bs||"onCompositionStart"!==y?"onCompositionEnd"===y&&Bs&&(v=es()):($t="value"in(Yt=n)?Yt.value:Yt.textContent,Bs=!0)),0<(g=Wr(r,y)).length&&(y=new ys(y,e,null,s,n),i.push({event:y,listeners:g}),v?y.data=v:null!==(v=Us(s))&&(y.data=v))),(v=Ds?function(e,t){switch(e){case"compositionend":return Us(t);case"keypress":return 32!==t.which?null:(Ms=!0,zs);case"textInput":return(e=t.data)===zs&&Ms?null:e;default:return null}}(e,s):function(e,t){if(Bs)return"compositionend"===e||!Rs&&Fs(e,t)?(e=es(),Xt=$t=Yt=null,Bs=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ls&&"ko"!==t.locale?null:t.data}}(e,s))&&(0<(r=Wr(r,"onBeforeInput")).length&&(n=new ys("onBeforeInput","beforeinput",null,s,n),i.push({event:n,listeners:r}),n.data=v))}zr(i,t)})}function Hr(e,t,s){return{instance:e,listener:t,currentTarget:s}}function Wr(e,t){for(var s=t+"Capture",r=[];null!==e;){var n=e,a=n.stateNode;5===n.tag&&null!==a&&(n=a,null!=(a=Ie(e,s))&&r.unshift(Hr(e,a,n)),null!=(a=Ie(e,t))&&r.push(Hr(e,a,n))),e=e.return}return r}function Gr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Kr(e,t,s,r,n){for(var a=t._reactName,i=[];null!==s&&s!==r;){var o=s,l=o.alternate,c=o.stateNode;if(null!==l&&l===r)break;5===o.tag&&null!==c&&(o=c,n?null!=(l=Ie(s,a))&&i.unshift(Hr(s,l,o)):n||null!=(l=Ie(s,a))&&i.push(Hr(s,l,o))),s=s.return}0!==i.length&&e.push({event:t,listeners:i})}var Zr=/\r\n?/g,Qr=/\u0000|\uFFFD/g;function Jr(e){return("string"===typeof e?e:""+e).replace(Zr,"\n").replace(Qr,"")}function Yr(e,t,s){if(t=Jr(t),Jr(e)!==t&&s)throw Error(a(425))}function $r(){}var Xr=null,en=null;function tn(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var sn="function"===typeof setTimeout?setTimeout:void 0,rn="function"===typeof clearTimeout?clearTimeout:void 0,nn="function"===typeof Promise?Promise:void 0,an="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof nn?function(e){return nn.resolve(null).then(e).catch(on)}:sn;function on(e){setTimeout(function(){throw e})}function ln(e,t){var s=t,r=0;do{var n=s.nextSibling;if(e.removeChild(s),n&&8===n.nodeType)if("/$"===(s=n.data)){if(0===r)return e.removeChild(n),void Vt(t);r--}else"$"!==s&&"$?"!==s&&"$!"!==s||r++;s=n}while(s);Vt(t)}function cn(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function dn(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var s=e.data;if("$"===s||"$!"===s||"$?"===s){if(0===t)return e;t--}else"/$"===s&&t++}e=e.previousSibling}return null}var un=Math.random().toString(36).slice(2),hn="__reactFiber$"+un,mn="__reactProps$"+un,pn="__reactContainer$"+un,fn="__reactEvents$"+un,xn="__reactListeners$"+un,gn="__reactHandles$"+un;function vn(e){var t=e[hn];if(t)return t;for(var s=e.parentNode;s;){if(t=s[pn]||s[hn]){if(s=t.alternate,null!==t.child||null!==s&&null!==s.child)for(e=dn(e);null!==e;){if(s=e[hn])return s;e=dn(e)}return t}s=(e=s).parentNode}return null}function yn(e){return!(e=e[hn]||e[pn])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bn(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function jn(e){return e[mn]||null}var wn=[],Nn=-1;function Sn(e){return{current:e}}function kn(e){0>Nn||(e.current=wn[Nn],wn[Nn]=null,Nn--)}function An(e,t){Nn++,wn[Nn]=e.current,e.current=t}var _n={},En=Sn(_n),Cn=Sn(!1),Pn=_n;function Tn(e,t){var s=e.type.contextTypes;if(!s)return _n;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var n,a={};for(n in s)a[n]=t[n];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function In(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Rn(){kn(Cn),kn(En)}function On(e,t,s){if(En.current!==_n)throw Error(a(168));An(En,t),An(Cn,s)}function Dn(e,t,s){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return s;for(var n in r=r.getChildContext())if(!(n in t))throw Error(a(108,q(e)||"Unknown",n));return z({},s,r)}function Ln(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||_n,Pn=En.current,An(En,e),An(Cn,Cn.current),!0}function zn(e,t,s){var r=e.stateNode;if(!r)throw Error(a(169));s?(e=Dn(e,t,Pn),r.__reactInternalMemoizedMergedChildContext=e,kn(Cn),kn(En),An(En,e)):kn(Cn),An(Cn,s)}var Mn=null,Fn=!1,Un=!1;function Bn(e){null===Mn?Mn=[e]:Mn.push(e)}function Vn(){if(!Un&&null!==Mn){Un=!0;var e=0,t=yt;try{var s=Mn;for(yt=1;e<s.length;e++){var r=s[e];do{r=r(!0)}while(null!==r)}Mn=null,Fn=!1}catch(n){throw null!==Mn&&(Mn=Mn.slice(e+1)),Ke(Xe,Vn),n}finally{yt=t,Un=!1}}return null}var qn=[],Hn=0,Wn=null,Gn=0,Kn=[],Zn=0,Qn=null,Jn=1,Yn="";function $n(e,t){qn[Hn++]=Gn,qn[Hn++]=Wn,Wn=e,Gn=t}function Xn(e,t,s){Kn[Zn++]=Jn,Kn[Zn++]=Yn,Kn[Zn++]=Qn,Qn=e;var r=Jn;e=Yn;var n=32-it(r)-1;r&=~(1<<n),s+=1;var a=32-it(t)+n;if(30<a){var i=n-n%5;a=(r&(1<<i)-1).toString(32),r>>=i,n-=i,Jn=1<<32-it(t)+n|s<<n|r,Yn=a+e}else Jn=1<<a|s<<n|r,Yn=e}function ea(e){null!==e.return&&($n(e,1),Xn(e,1,0))}function ta(e){for(;e===Wn;)Wn=qn[--Hn],qn[Hn]=null,Gn=qn[--Hn],qn[Hn]=null;for(;e===Qn;)Qn=Kn[--Zn],Kn[Zn]=null,Yn=Kn[--Zn],Kn[Zn]=null,Jn=Kn[--Zn],Kn[Zn]=null}var sa=null,ra=null,na=!1,aa=null;function ia(e,t){var s=Tc(5,null,null,0);s.elementType="DELETED",s.stateNode=t,s.return=e,null===(t=e.deletions)?(e.deletions=[s],e.flags|=16):t.push(s)}function oa(e,t){switch(e.tag){case 5:var s=e.type;return null!==(t=1!==t.nodeType||s.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,sa=e,ra=cn(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,sa=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(s=null!==Qn?{id:Jn,overflow:Yn}:null,e.memoizedState={dehydrated:t,treeContext:s,retryLane:1073741824},(s=Tc(18,null,null,0)).stateNode=t,s.return=e,e.child=s,sa=e,ra=null,!0);default:return!1}}function la(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ca(e){if(na){var t=ra;if(t){var s=t;if(!oa(e,t)){if(la(e))throw Error(a(418));t=cn(s.nextSibling);var r=sa;t&&oa(e,t)?ia(r,s):(e.flags=-4097&e.flags|2,na=!1,sa=e)}}else{if(la(e))throw Error(a(418));e.flags=-4097&e.flags|2,na=!1,sa=e}}}function da(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;sa=e}function ua(e){if(e!==sa)return!1;if(!na)return da(e),na=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!tn(e.type,e.memoizedProps)),t&&(t=ra)){if(la(e))throw ha(),Error(a(418));for(;t;)ia(e,t),t=cn(t.nextSibling)}if(da(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var s=e.data;if("/$"===s){if(0===t){ra=cn(e.nextSibling);break e}t--}else"$"!==s&&"$!"!==s&&"$?"!==s||t++}e=e.nextSibling}ra=null}}else ra=sa?cn(e.stateNode.nextSibling):null;return!0}function ha(){for(var e=ra;e;)e=cn(e.nextSibling)}function ma(){ra=sa=null,na=!1}function pa(e){null===aa?aa=[e]:aa.push(e)}var fa=b.ReactCurrentBatchConfig;function xa(e,t,s){if(null!==(e=s.ref)&&"function"!==typeof e&&"object"!==typeof e){if(s._owner){if(s=s._owner){if(1!==s.tag)throw Error(a(309));var r=s.stateNode}if(!r)throw Error(a(147,e));var n=r,i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=n.refs;null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!==typeof e)throw Error(a(284));if(!s._owner)throw Error(a(290,e))}return e}function ga(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function va(e){return(0,e._init)(e._payload)}function ya(e){function t(t,s){if(e){var r=t.deletions;null===r?(t.deletions=[s],t.flags|=16):r.push(s)}}function s(s,r){if(!e)return null;for(;null!==r;)t(s,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function n(e,t){return(e=Rc(e,t)).index=0,e.sibling=null,e}function i(t,s,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<s?(t.flags|=2,s):r:(t.flags|=2,s):(t.flags|=1048576,s)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,s,r){return null===t||6!==t.tag?((t=zc(s,e.mode,r)).return=e,t):((t=n(t,s)).return=e,t)}function c(e,t,s,r){var a=s.type;return a===N?u(e,t,s.props.children,r,s.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===I&&va(a)===t.type)?((r=n(t,s.props)).ref=xa(e,t,s),r.return=e,r):((r=Oc(s.type,s.key,s.props,null,e.mode,r)).ref=xa(e,t,s),r.return=e,r)}function d(e,t,s,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==s.containerInfo||t.stateNode.implementation!==s.implementation?((t=Mc(s,e.mode,r)).return=e,t):((t=n(t,s.children||[])).return=e,t)}function u(e,t,s,r,a){return null===t||7!==t.tag?((t=Dc(s,e.mode,r,a)).return=e,t):((t=n(t,s)).return=e,t)}function h(e,t,s){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=zc(""+t,e.mode,s)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case j:return(s=Oc(t.type,t.key,t.props,null,e.mode,s)).ref=xa(e,null,t),s.return=e,s;case w:return(t=Mc(t,e.mode,s)).return=e,t;case I:return h(e,(0,t._init)(t._payload),s)}if(te(t)||D(t))return(t=Dc(t,e.mode,s,null)).return=e,t;ga(e,t)}return null}function m(e,t,s,r){var n=null!==t?t.key:null;if("string"===typeof s&&""!==s||"number"===typeof s)return null!==n?null:l(e,t,""+s,r);if("object"===typeof s&&null!==s){switch(s.$$typeof){case j:return s.key===n?c(e,t,s,r):null;case w:return s.key===n?d(e,t,s,r):null;case I:return m(e,t,(n=s._init)(s._payload),r)}if(te(s)||D(s))return null!==n?null:u(e,t,s,r,null);ga(e,s)}return null}function p(e,t,s,r,n){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(s)||null,""+r,n);if("object"===typeof r&&null!==r){switch(r.$$typeof){case j:return c(t,e=e.get(null===r.key?s:r.key)||null,r,n);case w:return d(t,e=e.get(null===r.key?s:r.key)||null,r,n);case I:return p(e,t,s,(0,r._init)(r._payload),n)}if(te(r)||D(r))return u(t,e=e.get(s)||null,r,n,null);ga(t,r)}return null}function f(n,a,o,l){for(var c=null,d=null,u=a,f=a=0,x=null;null!==u&&f<o.length;f++){u.index>f?(x=u,u=null):x=u.sibling;var g=m(n,u,o[f],l);if(null===g){null===u&&(u=x);break}e&&u&&null===g.alternate&&t(n,u),a=i(g,a,f),null===d?c=g:d.sibling=g,d=g,u=x}if(f===o.length)return s(n,u),na&&$n(n,f),c;if(null===u){for(;f<o.length;f++)null!==(u=h(n,o[f],l))&&(a=i(u,a,f),null===d?c=u:d.sibling=u,d=u);return na&&$n(n,f),c}for(u=r(n,u);f<o.length;f++)null!==(x=p(u,n,f,o[f],l))&&(e&&null!==x.alternate&&u.delete(null===x.key?f:x.key),a=i(x,a,f),null===d?c=x:d.sibling=x,d=x);return e&&u.forEach(function(e){return t(n,e)}),na&&$n(n,f),c}function x(n,o,l,c){var d=D(l);if("function"!==typeof d)throw Error(a(150));if(null==(l=d.call(l)))throw Error(a(151));for(var u=d=null,f=o,x=o=0,g=null,v=l.next();null!==f&&!v.done;x++,v=l.next()){f.index>x?(g=f,f=null):g=f.sibling;var y=m(n,f,v.value,c);if(null===y){null===f&&(f=g);break}e&&f&&null===y.alternate&&t(n,f),o=i(y,o,x),null===u?d=y:u.sibling=y,u=y,f=g}if(v.done)return s(n,f),na&&$n(n,x),d;if(null===f){for(;!v.done;x++,v=l.next())null!==(v=h(n,v.value,c))&&(o=i(v,o,x),null===u?d=v:u.sibling=v,u=v);return na&&$n(n,x),d}for(f=r(n,f);!v.done;x++,v=l.next())null!==(v=p(f,n,x,v.value,c))&&(e&&null!==v.alternate&&f.delete(null===v.key?x:v.key),o=i(v,o,x),null===u?d=v:u.sibling=v,u=v);return e&&f.forEach(function(e){return t(n,e)}),na&&$n(n,x),d}return function e(r,a,i,l){if("object"===typeof i&&null!==i&&i.type===N&&null===i.key&&(i=i.props.children),"object"===typeof i&&null!==i){switch(i.$$typeof){case j:e:{for(var c=i.key,d=a;null!==d;){if(d.key===c){if((c=i.type)===N){if(7===d.tag){s(r,d.sibling),(a=n(d,i.props.children)).return=r,r=a;break e}}else if(d.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===I&&va(c)===d.type){s(r,d.sibling),(a=n(d,i.props)).ref=xa(r,d,i),a.return=r,r=a;break e}s(r,d);break}t(r,d),d=d.sibling}i.type===N?((a=Dc(i.props.children,r.mode,l,i.key)).return=r,r=a):((l=Oc(i.type,i.key,i.props,null,r.mode,l)).ref=xa(r,a,i),l.return=r,r=l)}return o(r);case w:e:{for(d=i.key;null!==a;){if(a.key===d){if(4===a.tag&&a.stateNode.containerInfo===i.containerInfo&&a.stateNode.implementation===i.implementation){s(r,a.sibling),(a=n(a,i.children||[])).return=r,r=a;break e}s(r,a);break}t(r,a),a=a.sibling}(a=Mc(i,r.mode,l)).return=r,r=a}return o(r);case I:return e(r,a,(d=i._init)(i._payload),l)}if(te(i))return f(r,a,i,l);if(D(i))return x(r,a,i,l);ga(r,i)}return"string"===typeof i&&""!==i||"number"===typeof i?(i=""+i,null!==a&&6===a.tag?(s(r,a.sibling),(a=n(a,i)).return=r,r=a):(s(r,a),(a=zc(i,r.mode,l)).return=r,r=a),o(r)):s(r,a)}}var ba=ya(!0),ja=ya(!1),wa=Sn(null),Na=null,Sa=null,ka=null;function Aa(){ka=Sa=Na=null}function _a(e){var t=wa.current;kn(wa),e._currentValue=t}function Ea(e,t,s){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===s)break;e=e.return}}function Ca(e,t){Na=e,ka=Sa=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(yo=!0),e.firstContext=null)}function Pa(e){var t=e._currentValue;if(ka!==e)if(e={context:e,memoizedValue:t,next:null},null===Sa){if(null===Na)throw Error(a(308));Sa=e,Na.dependencies={lanes:0,firstContext:e}}else Sa=Sa.next=e;return t}var Ta=null;function Ia(e){null===Ta?Ta=[e]:Ta.push(e)}function Ra(e,t,s,r){var n=t.interleaved;return null===n?(s.next=s,Ia(t)):(s.next=n.next,n.next=s),t.interleaved=s,Oa(e,r)}function Oa(e,t){e.lanes|=t;var s=e.alternate;for(null!==s&&(s.lanes|=t),s=e,e=e.return;null!==e;)e.childLanes|=t,null!==(s=e.alternate)&&(s.childLanes|=t),s=e,e=e.return;return 3===s.tag?s.stateNode:null}var Da=!1;function La(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function za(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ma(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Fa(e,t,s){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&El)){var n=r.pending;return null===n?t.next=t:(t.next=n.next,n.next=t),r.pending=t,Oa(e,s)}return null===(n=r.interleaved)?(t.next=t,Ia(r)):(t.next=n.next,n.next=t),r.interleaved=t,Oa(e,s)}function Ua(e,t,s){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&s))){var r=t.lanes;s|=r&=e.pendingLanes,t.lanes=s,vt(e,s)}}function Ba(e,t){var s=e.updateQueue,r=e.alternate;if(null!==r&&s===(r=r.updateQueue)){var n=null,a=null;if(null!==(s=s.firstBaseUpdate)){do{var i={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};null===a?n=a=i:a=a.next=i,s=s.next}while(null!==s);null===a?n=a=t:a=a.next=t}else n=a=t;return s={baseState:r.baseState,firstBaseUpdate:n,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=s)}null===(e=s.lastBaseUpdate)?s.firstBaseUpdate=t:e.next=t,s.lastBaseUpdate=t}function Va(e,t,s,r){var n=e.updateQueue;Da=!1;var a=n.firstBaseUpdate,i=n.lastBaseUpdate,o=n.shared.pending;if(null!==o){n.shared.pending=null;var l=o,c=l.next;l.next=null,null===i?a=c:i.next=c,i=l;var d=e.alternate;null!==d&&((o=(d=d.updateQueue).lastBaseUpdate)!==i&&(null===o?d.firstBaseUpdate=c:o.next=c,d.lastBaseUpdate=l))}if(null!==a){var u=n.baseState;for(i=0,d=c=l=null,o=a;;){var h=o.lane,m=o.eventTime;if((r&h)===h){null!==d&&(d=d.next={eventTime:m,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,f=o;switch(h=t,m=s,f.tag){case 1:if("function"===typeof(p=f.payload)){u=p.call(m,u,h);break e}u=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=f.payload)?p.call(m,u,h):p)||void 0===h)break e;u=z({},u,h);break e;case 2:Da=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(h=n.effects)?n.effects=[o]:h.push(o))}else m={eventTime:m,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===d?(c=d=m,l=u):d=d.next=m,i|=h;if(null===(o=o.next)){if(null===(o=n.shared.pending))break;o=(h=o).next,h.next=null,n.lastBaseUpdate=h,n.shared.pending=null}}if(null===d&&(l=u),n.baseState=l,n.firstBaseUpdate=c,n.lastBaseUpdate=d,null!==(t=n.shared.interleaved)){n=t;do{i|=n.lane,n=n.next}while(n!==t)}else null===a&&(n.shared.lanes=0);Ll|=i,e.lanes=i,e.memoizedState=u}}function qa(e,t,s){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],n=r.callback;if(null!==n){if(r.callback=null,r=s,"function"!==typeof n)throw Error(a(191,n));n.call(r)}}}var Ha={},Wa=Sn(Ha),Ga=Sn(Ha),Ka=Sn(Ha);function Za(e){if(e===Ha)throw Error(a(174));return e}function Qa(e,t){switch(An(Ka,t),An(Ga,e),An(Wa,Ha),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}kn(Wa),An(Wa,t)}function Ja(){kn(Wa),kn(Ga),kn(Ka)}function Ya(e){Za(Ka.current);var t=Za(Wa.current),s=le(t,e.type);t!==s&&(An(Ga,e),An(Wa,s))}function $a(e){Ga.current===e&&(kn(Wa),kn(Ga))}var Xa=Sn(0);function ei(e){for(var t=e;null!==t;){if(13===t.tag){var s=t.memoizedState;if(null!==s&&(null===(s=s.dehydrated)||"$?"===s.data||"$!"===s.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ti=[];function si(){for(var e=0;e<ti.length;e++)ti[e]._workInProgressVersionPrimary=null;ti.length=0}var ri=b.ReactCurrentDispatcher,ni=b.ReactCurrentBatchConfig,ai=0,ii=null,oi=null,li=null,ci=!1,di=!1,ui=0,hi=0;function mi(){throw Error(a(321))}function pi(e,t){if(null===t)return!1;for(var s=0;s<t.length&&s<e.length;s++)if(!ir(e[s],t[s]))return!1;return!0}function fi(e,t,s,r,n,i){if(ai=i,ii=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ri.current=null===e||null===e.memoizedState?$i:Xi,e=s(r,n),di){i=0;do{if(di=!1,ui=0,25<=i)throw Error(a(301));i+=1,li=oi=null,t.updateQueue=null,ri.current=eo,e=s(r,n)}while(di)}if(ri.current=Yi,t=null!==oi&&null!==oi.next,ai=0,li=oi=ii=null,ci=!1,t)throw Error(a(300));return e}function xi(){var e=0!==ui;return ui=0,e}function gi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===li?ii.memoizedState=li=e:li=li.next=e,li}function vi(){if(null===oi){var e=ii.alternate;e=null!==e?e.memoizedState:null}else e=oi.next;var t=null===li?ii.memoizedState:li.next;if(null!==t)li=t,oi=e;else{if(null===e)throw Error(a(310));e={memoizedState:(oi=e).memoizedState,baseState:oi.baseState,baseQueue:oi.baseQueue,queue:oi.queue,next:null},null===li?ii.memoizedState=li=e:li=li.next=e}return li}function yi(e,t){return"function"===typeof t?t(e):t}function bi(e){var t=vi(),s=t.queue;if(null===s)throw Error(a(311));s.lastRenderedReducer=e;var r=oi,n=r.baseQueue,i=s.pending;if(null!==i){if(null!==n){var o=n.next;n.next=i.next,i.next=o}r.baseQueue=n=i,s.pending=null}if(null!==n){i=n.next,r=r.baseState;var l=o=null,c=null,d=i;do{var u=d.lane;if((ai&u)===u)null!==c&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:e(r,d.action);else{var h={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};null===c?(l=c=h,o=r):c=c.next=h,ii.lanes|=u,Ll|=u}d=d.next}while(null!==d&&d!==i);null===c?o=r:c.next=l,ir(r,t.memoizedState)||(yo=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,s.lastRenderedState=r}if(null!==(e=s.interleaved)){n=e;do{i=n.lane,ii.lanes|=i,Ll|=i,n=n.next}while(n!==e)}else null===n&&(s.lanes=0);return[t.memoizedState,s.dispatch]}function ji(e){var t=vi(),s=t.queue;if(null===s)throw Error(a(311));s.lastRenderedReducer=e;var r=s.dispatch,n=s.pending,i=t.memoizedState;if(null!==n){s.pending=null;var o=n=n.next;do{i=e(i,o.action),o=o.next}while(o!==n);ir(i,t.memoizedState)||(yo=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),s.lastRenderedState=i}return[i,r]}function wi(){}function Ni(e,t){var s=ii,r=vi(),n=t(),i=!ir(r.memoizedState,n);if(i&&(r.memoizedState=n,yo=!0),r=r.queue,Di(Ai.bind(null,s,r,e),[e]),r.getSnapshot!==t||i||null!==li&&1&li.memoizedState.tag){if(s.flags|=2048,Pi(9,ki.bind(null,s,r,n,t),void 0,null),null===Cl)throw Error(a(349));0!==(30&ai)||Si(s,t,n)}return n}function Si(e,t,s){e.flags|=16384,e={getSnapshot:t,value:s},null===(t=ii.updateQueue)?(t={lastEffect:null,stores:null},ii.updateQueue=t,t.stores=[e]):null===(s=t.stores)?t.stores=[e]:s.push(e)}function ki(e,t,s,r){t.value=s,t.getSnapshot=r,_i(t)&&Ei(e)}function Ai(e,t,s){return s(function(){_i(t)&&Ei(e)})}function _i(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!ir(e,s)}catch(r){return!0}}function Ei(e){var t=Oa(e,1);null!==t&&sc(t,e,1,-1)}function Ci(e){var t=gi();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:yi,lastRenderedState:e},t.queue=e,e=e.dispatch=Ki.bind(null,ii,e),[t.memoizedState,e]}function Pi(e,t,s,r){return e={tag:e,create:t,destroy:s,deps:r,next:null},null===(t=ii.updateQueue)?(t={lastEffect:null,stores:null},ii.updateQueue=t,t.lastEffect=e.next=e):null===(s=t.lastEffect)?t.lastEffect=e.next=e:(r=s.next,s.next=e,e.next=r,t.lastEffect=e),e}function Ti(){return vi().memoizedState}function Ii(e,t,s,r){var n=gi();ii.flags|=e,n.memoizedState=Pi(1|t,s,void 0,void 0===r?null:r)}function Ri(e,t,s,r){var n=vi();r=void 0===r?null:r;var a=void 0;if(null!==oi){var i=oi.memoizedState;if(a=i.destroy,null!==r&&pi(r,i.deps))return void(n.memoizedState=Pi(t,s,a,r))}ii.flags|=e,n.memoizedState=Pi(1|t,s,a,r)}function Oi(e,t){return Ii(8390656,8,e,t)}function Di(e,t){return Ri(2048,8,e,t)}function Li(e,t){return Ri(4,2,e,t)}function zi(e,t){return Ri(4,4,e,t)}function Mi(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Fi(e,t,s){return s=null!==s&&void 0!==s?s.concat([e]):null,Ri(4,4,Mi.bind(null,t,e),s)}function Ui(){}function Bi(e,t){var s=vi();t=void 0===t?null:t;var r=s.memoizedState;return null!==r&&null!==t&&pi(t,r[1])?r[0]:(s.memoizedState=[e,t],e)}function Vi(e,t){var s=vi();t=void 0===t?null:t;var r=s.memoizedState;return null!==r&&null!==t&&pi(t,r[1])?r[0]:(e=e(),s.memoizedState=[e,t],e)}function qi(e,t,s){return 0===(21&ai)?(e.baseState&&(e.baseState=!1,yo=!0),e.memoizedState=s):(ir(s,t)||(s=ft(),ii.lanes|=s,Ll|=s,e.baseState=!0),t)}function Hi(e,t){var s=yt;yt=0!==s&&4>s?s:4,e(!0);var r=ni.transition;ni.transition={};try{e(!1),t()}finally{yt=s,ni.transition=r}}function Wi(){return vi().memoizedState}function Gi(e,t,s){var r=tc(e);if(s={lane:r,action:s,hasEagerState:!1,eagerState:null,next:null},Zi(e))Qi(t,s);else if(null!==(s=Ra(e,t,s,r))){sc(s,e,r,ec()),Ji(s,t,r)}}function Ki(e,t,s){var r=tc(e),n={lane:r,action:s,hasEagerState:!1,eagerState:null,next:null};if(Zi(e))Qi(t,n);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var i=t.lastRenderedState,o=a(i,s);if(n.hasEagerState=!0,n.eagerState=o,ir(o,i)){var l=t.interleaved;return null===l?(n.next=n,Ia(t)):(n.next=l.next,l.next=n),void(t.interleaved=n)}}catch(c){}null!==(s=Ra(e,t,n,r))&&(sc(s,e,r,n=ec()),Ji(s,t,r))}}function Zi(e){var t=e.alternate;return e===ii||null!==t&&t===ii}function Qi(e,t){di=ci=!0;var s=e.pending;null===s?t.next=t:(t.next=s.next,s.next=t),e.pending=t}function Ji(e,t,s){if(0!==(4194240&s)){var r=t.lanes;s|=r&=e.pendingLanes,t.lanes=s,vt(e,s)}}var Yi={readContext:Pa,useCallback:mi,useContext:mi,useEffect:mi,useImperativeHandle:mi,useInsertionEffect:mi,useLayoutEffect:mi,useMemo:mi,useReducer:mi,useRef:mi,useState:mi,useDebugValue:mi,useDeferredValue:mi,useTransition:mi,useMutableSource:mi,useSyncExternalStore:mi,useId:mi,unstable_isNewReconciler:!1},$i={readContext:Pa,useCallback:function(e,t){return gi().memoizedState=[e,void 0===t?null:t],e},useContext:Pa,useEffect:Oi,useImperativeHandle:function(e,t,s){return s=null!==s&&void 0!==s?s.concat([e]):null,Ii(4194308,4,Mi.bind(null,t,e),s)},useLayoutEffect:function(e,t){return Ii(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ii(4,2,e,t)},useMemo:function(e,t){var s=gi();return t=void 0===t?null:t,e=e(),s.memoizedState=[e,t],e},useReducer:function(e,t,s){var r=gi();return t=void 0!==s?s(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Gi.bind(null,ii,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},gi().memoizedState=e},useState:Ci,useDebugValue:Ui,useDeferredValue:function(e){return gi().memoizedState=e},useTransition:function(){var e=Ci(!1),t=e[0];return e=Hi.bind(null,e[1]),gi().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,s){var r=ii,n=gi();if(na){if(void 0===s)throw Error(a(407));s=s()}else{if(s=t(),null===Cl)throw Error(a(349));0!==(30&ai)||Si(r,t,s)}n.memoizedState=s;var i={value:s,getSnapshot:t};return n.queue=i,Oi(Ai.bind(null,r,i,e),[e]),r.flags|=2048,Pi(9,ki.bind(null,r,i,s,t),void 0,null),s},useId:function(){var e=gi(),t=Cl.identifierPrefix;if(na){var s=Yn;t=":"+t+"R"+(s=(Jn&~(1<<32-it(Jn)-1)).toString(32)+s),0<(s=ui++)&&(t+="H"+s.toString(32)),t+=":"}else t=":"+t+"r"+(s=hi++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Xi={readContext:Pa,useCallback:Bi,useContext:Pa,useEffect:Di,useImperativeHandle:Fi,useInsertionEffect:Li,useLayoutEffect:zi,useMemo:Vi,useReducer:bi,useRef:Ti,useState:function(){return bi(yi)},useDebugValue:Ui,useDeferredValue:function(e){return qi(vi(),oi.memoizedState,e)},useTransition:function(){return[bi(yi)[0],vi().memoizedState]},useMutableSource:wi,useSyncExternalStore:Ni,useId:Wi,unstable_isNewReconciler:!1},eo={readContext:Pa,useCallback:Bi,useContext:Pa,useEffect:Di,useImperativeHandle:Fi,useInsertionEffect:Li,useLayoutEffect:zi,useMemo:Vi,useReducer:ji,useRef:Ti,useState:function(){return ji(yi)},useDebugValue:Ui,useDeferredValue:function(e){var t=vi();return null===oi?t.memoizedState=e:qi(t,oi.memoizedState,e)},useTransition:function(){return[ji(yi)[0],vi().memoizedState]},useMutableSource:wi,useSyncExternalStore:Ni,useId:Wi,unstable_isNewReconciler:!1};function to(e,t){if(e&&e.defaultProps){for(var s in t=z({},t),e=e.defaultProps)void 0===t[s]&&(t[s]=e[s]);return t}return t}function so(e,t,s,r){s=null===(s=s(r,t=e.memoizedState))||void 0===s?t:z({},t,s),e.memoizedState=s,0===e.lanes&&(e.updateQueue.baseState=s)}var ro={isMounted:function(e){return!!(e=e._reactInternals)&&Ve(e)===e},enqueueSetState:function(e,t,s){e=e._reactInternals;var r=ec(),n=tc(e),a=Ma(r,n);a.payload=t,void 0!==s&&null!==s&&(a.callback=s),null!==(t=Fa(e,a,n))&&(sc(t,e,n,r),Ua(t,e,n))},enqueueReplaceState:function(e,t,s){e=e._reactInternals;var r=ec(),n=tc(e),a=Ma(r,n);a.tag=1,a.payload=t,void 0!==s&&null!==s&&(a.callback=s),null!==(t=Fa(e,a,n))&&(sc(t,e,n,r),Ua(t,e,n))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var s=ec(),r=tc(e),n=Ma(s,r);n.tag=2,void 0!==t&&null!==t&&(n.callback=t),null!==(t=Fa(e,n,r))&&(sc(t,e,r,s),Ua(t,e,r))}};function no(e,t,s,r,n,a,i){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,i):!t.prototype||!t.prototype.isPureReactComponent||(!or(s,r)||!or(n,a))}function ao(e,t,s){var r=!1,n=_n,a=t.contextType;return"object"===typeof a&&null!==a?a=Pa(a):(n=In(t)?Pn:En.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Tn(e,n):_n),t=new t(s,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ro,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=a),t}function io(e,t,s,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(s,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(s,r),t.state!==e&&ro.enqueueReplaceState(t,t.state,null)}function oo(e,t,s,r){var n=e.stateNode;n.props=s,n.state=e.memoizedState,n.refs={},La(e);var a=t.contextType;"object"===typeof a&&null!==a?n.context=Pa(a):(a=In(t)?Pn:En.current,n.context=Tn(e,a)),n.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(so(e,t,a,s),n.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof n.getSnapshotBeforeUpdate||"function"!==typeof n.UNSAFE_componentWillMount&&"function"!==typeof n.componentWillMount||(t=n.state,"function"===typeof n.componentWillMount&&n.componentWillMount(),"function"===typeof n.UNSAFE_componentWillMount&&n.UNSAFE_componentWillMount(),t!==n.state&&ro.enqueueReplaceState(n,n.state,null),Va(e,s,n,r),n.state=e.memoizedState),"function"===typeof n.componentDidMount&&(e.flags|=4194308)}function lo(e,t){try{var s="",r=t;do{s+=B(r),r=r.return}while(r);var n=s}catch(a){n="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:n,digest:null}}function co(e,t,s){return{value:e,source:null,stack:null!=s?s:null,digest:null!=t?t:null}}function uo(e,t){try{console.error(t.value)}catch(s){setTimeout(function(){throw s})}}var ho="function"===typeof WeakMap?WeakMap:Map;function mo(e,t,s){(s=Ma(-1,s)).tag=3,s.payload={element:null};var r=t.value;return s.callback=function(){Hl||(Hl=!0,Wl=r),uo(0,t)},s}function po(e,t,s){(s=Ma(-1,s)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var n=t.value;s.payload=function(){return r(n)},s.callback=function(){uo(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(s.callback=function(){uo(0,t),"function"!==typeof r&&(null===Gl?Gl=new Set([this]):Gl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),s}function fo(e,t,s){var r=e.pingCache;if(null===r){r=e.pingCache=new ho;var n=new Set;r.set(t,n)}else void 0===(n=r.get(t))&&(n=new Set,r.set(t,n));n.has(s)||(n.add(s),e=kc.bind(null,e,t,s),t.then(e,e))}function xo(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function go(e,t,s,r,n){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,s.flags|=131072,s.flags&=-52805,1===s.tag&&(null===s.alternate?s.tag=17:((t=Ma(-1,1)).tag=2,Fa(s,t,1))),s.lanes|=1),e):(e.flags|=65536,e.lanes=n,e)}var vo=b.ReactCurrentOwner,yo=!1;function bo(e,t,s,r){t.child=null===e?ja(t,null,s,r):ba(t,e.child,s,r)}function jo(e,t,s,r,n){s=s.render;var a=t.ref;return Ca(t,n),r=fi(e,t,s,r,a,n),s=xi(),null===e||yo?(na&&s&&ea(t),t.flags|=1,bo(e,t,r,n),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n,Ho(e,t,n))}function wo(e,t,s,r,n){if(null===e){var a=s.type;return"function"!==typeof a||Ic(a)||void 0!==a.defaultProps||null!==s.compare||void 0!==s.defaultProps?((e=Oc(s.type,null,r,t,t.mode,n)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,No(e,t,a,r,n))}if(a=e.child,0===(e.lanes&n)){var i=a.memoizedProps;if((s=null!==(s=s.compare)?s:or)(i,r)&&e.ref===t.ref)return Ho(e,t,n)}return t.flags|=1,(e=Rc(a,r)).ref=t.ref,e.return=t,t.child=e}function No(e,t,s,r,n){if(null!==e){var a=e.memoizedProps;if(or(a,r)&&e.ref===t.ref){if(yo=!1,t.pendingProps=r=a,0===(e.lanes&n))return t.lanes=e.lanes,Ho(e,t,n);0!==(131072&e.flags)&&(yo=!0)}}return Ao(e,t,s,r,n)}function So(e,t,s){var r=t.pendingProps,n=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},An(Rl,Il),Il|=s;else{if(0===(1073741824&s))return e=null!==a?a.baseLanes|s:s,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,An(Rl,Il),Il|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:s,An(Rl,Il),Il|=r}else null!==a?(r=a.baseLanes|s,t.memoizedState=null):r=s,An(Rl,Il),Il|=r;return bo(e,t,n,s),t.child}function ko(e,t){var s=t.ref;(null===e&&null!==s||null!==e&&e.ref!==s)&&(t.flags|=512,t.flags|=2097152)}function Ao(e,t,s,r,n){var a=In(s)?Pn:En.current;return a=Tn(t,a),Ca(t,n),s=fi(e,t,s,r,a,n),r=xi(),null===e||yo?(na&&r&&ea(t),t.flags|=1,bo(e,t,s,n),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n,Ho(e,t,n))}function _o(e,t,s,r,n){if(In(s)){var a=!0;Ln(t)}else a=!1;if(Ca(t,n),null===t.stateNode)qo(e,t),ao(t,s,r),oo(t,s,r,n),r=!0;else if(null===e){var i=t.stateNode,o=t.memoizedProps;i.props=o;var l=i.context,c=s.contextType;"object"===typeof c&&null!==c?c=Pa(c):c=Tn(t,c=In(s)?Pn:En.current);var d=s.getDerivedStateFromProps,u="function"===typeof d||"function"===typeof i.getSnapshotBeforeUpdate;u||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(o!==r||l!==c)&&io(t,i,r,c),Da=!1;var h=t.memoizedState;i.state=h,Va(t,r,i,n),l=t.memoizedState,o!==r||h!==l||Cn.current||Da?("function"===typeof d&&(so(t,s,d,r),l=t.memoizedState),(o=Da||no(t,s,o,r,h,l,c))?(u||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||("function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"===typeof i.componentDidMount&&(t.flags|=4194308)):("function"===typeof i.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),i.props=r,i.state=l,i.context=c,r=o):("function"===typeof i.componentDidMount&&(t.flags|=4194308),r=!1)}else{i=t.stateNode,za(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:to(t.type,o),i.props=c,u=t.pendingProps,h=i.context,"object"===typeof(l=s.contextType)&&null!==l?l=Pa(l):l=Tn(t,l=In(s)?Pn:En.current);var m=s.getDerivedStateFromProps;(d="function"===typeof m||"function"===typeof i.getSnapshotBeforeUpdate)||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(o!==u||h!==l)&&io(t,i,r,l),Da=!1,h=t.memoizedState,i.state=h,Va(t,r,i,n);var p=t.memoizedState;o!==u||h!==p||Cn.current||Da?("function"===typeof m&&(so(t,s,m,r),p=t.memoizedState),(c=Da||no(t,s,c,r,h,p,l)||!1)?(d||"function"!==typeof i.UNSAFE_componentWillUpdate&&"function"!==typeof i.componentWillUpdate||("function"===typeof i.componentWillUpdate&&i.componentWillUpdate(r,p,l),"function"===typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof i.componentDidUpdate&&(t.flags|=4),"function"===typeof i.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof i.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),i.props=r,i.state=p,i.context=l,r=c):("function"!==typeof i.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Eo(e,t,s,r,a,n)}function Eo(e,t,s,r,n,a){ko(e,t);var i=0!==(128&t.flags);if(!r&&!i)return n&&zn(t,s,!1),Ho(e,t,a);r=t.stateNode,vo.current=t;var o=i&&"function"!==typeof s.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&i?(t.child=ba(t,e.child,null,a),t.child=ba(t,null,o,a)):bo(e,t,o,a),t.memoizedState=r.state,n&&zn(t,s,!0),t.child}function Co(e){var t=e.stateNode;t.pendingContext?On(0,t.pendingContext,t.pendingContext!==t.context):t.context&&On(0,t.context,!1),Qa(e,t.containerInfo)}function Po(e,t,s,r,n){return ma(),pa(n),t.flags|=256,bo(e,t,s,r),t.child}var To,Io,Ro,Oo,Do={dehydrated:null,treeContext:null,retryLane:0};function Lo(e){return{baseLanes:e,cachePool:null,transitions:null}}function zo(e,t,s){var r,n=t.pendingProps,i=Xa.current,o=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&i)),r?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(i|=1),An(Xa,1&i),null===e)return ca(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=n.children,e=n.fallback,o?(n=t.mode,o=t.child,l={mode:"hidden",children:l},0===(1&n)&&null!==o?(o.childLanes=0,o.pendingProps=l):o=Lc(l,n,0,null),e=Dc(e,n,s,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Lo(s),t.memoizedState=Do,e):Mo(t,l));if(null!==(i=e.memoizedState)&&null!==(r=i.dehydrated))return function(e,t,s,r,n,i,o){if(s)return 256&t.flags?(t.flags&=-257,Fo(e,t,o,r=co(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(i=r.fallback,n=t.mode,r=Lc({mode:"visible",children:r.children},n,0,null),(i=Dc(i,n,o,null)).flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,0!==(1&t.mode)&&ba(t,e.child,null,o),t.child.memoizedState=Lo(o),t.memoizedState=Do,i);if(0===(1&t.mode))return Fo(e,t,o,null);if("$!"===n.data){if(r=n.nextSibling&&n.nextSibling.dataset)var l=r.dgst;return r=l,Fo(e,t,o,r=co(i=Error(a(419)),r,void 0))}if(l=0!==(o&e.childLanes),yo||l){if(null!==(r=Cl)){switch(o&-o){case 4:n=2;break;case 16:n=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:n=32;break;case 536870912:n=268435456;break;default:n=0}0!==(n=0!==(n&(r.suspendedLanes|o))?0:n)&&n!==i.retryLane&&(i.retryLane=n,Oa(e,n),sc(r,e,n,-1))}return fc(),Fo(e,t,o,r=co(Error(a(421))))}return"$?"===n.data?(t.flags|=128,t.child=e.child,t=_c.bind(null,e),n._reactRetry=t,null):(e=i.treeContext,ra=cn(n.nextSibling),sa=t,na=!0,aa=null,null!==e&&(Kn[Zn++]=Jn,Kn[Zn++]=Yn,Kn[Zn++]=Qn,Jn=e.id,Yn=e.overflow,Qn=t),t=Mo(t,r.children),t.flags|=4096,t)}(e,t,l,n,r,i,s);if(o){o=n.fallback,l=t.mode,r=(i=e.child).sibling;var c={mode:"hidden",children:n.children};return 0===(1&l)&&t.child!==i?((n=t.child).childLanes=0,n.pendingProps=c,t.deletions=null):(n=Rc(i,c)).subtreeFlags=14680064&i.subtreeFlags,null!==r?o=Rc(r,o):(o=Dc(o,l,s,null)).flags|=2,o.return=t,n.return=t,n.sibling=o,t.child=n,n=o,o=t.child,l=null===(l=e.child.memoizedState)?Lo(s):{baseLanes:l.baseLanes|s,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~s,t.memoizedState=Do,n}return e=(o=e.child).sibling,n=Rc(o,{mode:"visible",children:n.children}),0===(1&t.mode)&&(n.lanes=s),n.return=t,n.sibling=null,null!==e&&(null===(s=t.deletions)?(t.deletions=[e],t.flags|=16):s.push(e)),t.child=n,t.memoizedState=null,n}function Mo(e,t){return(t=Lc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Fo(e,t,s,r){return null!==r&&pa(r),ba(t,e.child,null,s),(e=Mo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Uo(e,t,s){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ea(e.return,t,s)}function Bo(e,t,s,r,n){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:s,tailMode:n}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=s,a.tailMode=n)}function Vo(e,t,s){var r=t.pendingProps,n=r.revealOrder,a=r.tail;if(bo(e,t,r.children,s),0!==(2&(r=Xa.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Uo(e,s,t);else if(19===e.tag)Uo(e,s,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(An(Xa,r),0===(1&t.mode))t.memoizedState=null;else switch(n){case"forwards":for(s=t.child,n=null;null!==s;)null!==(e=s.alternate)&&null===ei(e)&&(n=s),s=s.sibling;null===(s=n)?(n=t.child,t.child=null):(n=s.sibling,s.sibling=null),Bo(t,!1,n,s,a);break;case"backwards":for(s=null,n=t.child,t.child=null;null!==n;){if(null!==(e=n.alternate)&&null===ei(e)){t.child=n;break}e=n.sibling,n.sibling=s,s=n,n=e}Bo(t,!0,s,null,a);break;case"together":Bo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function qo(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ho(e,t,s){if(null!==e&&(t.dependencies=e.dependencies),Ll|=t.lanes,0===(s&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(s=Rc(e=t.child,e.pendingProps),t.child=s,s.return=t;null!==e.sibling;)e=e.sibling,(s=s.sibling=Rc(e,e.pendingProps)).return=t;s.sibling=null}return t.child}function Wo(e,t){if(!na)switch(e.tailMode){case"hidden":t=e.tail;for(var s=null;null!==t;)null!==t.alternate&&(s=t),t=t.sibling;null===s?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var r=null;null!==s;)null!==s.alternate&&(r=s),s=s.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Go(e){var t=null!==e.alternate&&e.alternate.child===e.child,s=0,r=0;if(t)for(var n=e.child;null!==n;)s|=n.lanes|n.childLanes,r|=14680064&n.subtreeFlags,r|=14680064&n.flags,n.return=e,n=n.sibling;else for(n=e.child;null!==n;)s|=n.lanes|n.childLanes,r|=n.subtreeFlags,r|=n.flags,n.return=e,n=n.sibling;return e.subtreeFlags|=r,e.childLanes=s,t}function Ko(e,t,s){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Go(t),null;case 1:case 17:return In(t.type)&&Rn(),Go(t),null;case 3:return r=t.stateNode,Ja(),kn(Cn),kn(En),si(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ua(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(ic(aa),aa=null))),Io(e,t),Go(t),null;case 5:$a(t);var n=Za(Ka.current);if(s=t.type,null!==e&&null!=t.stateNode)Ro(e,t,s,r,n),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Go(t),null}if(e=Za(Wa.current),ua(t)){r=t.stateNode,s=t.type;var i=t.memoizedProps;switch(r[hn]=t,r[mn]=i,e=0!==(1&t.mode),s){case"dialog":Mr("cancel",r),Mr("close",r);break;case"iframe":case"object":case"embed":Mr("load",r);break;case"video":case"audio":for(n=0;n<Or.length;n++)Mr(Or[n],r);break;case"source":Mr("error",r);break;case"img":case"image":case"link":Mr("error",r),Mr("load",r);break;case"details":Mr("toggle",r);break;case"input":J(r,i),Mr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Mr("invalid",r);break;case"textarea":ne(r,i),Mr("invalid",r)}for(var l in ve(s,i),n=null,i)if(i.hasOwnProperty(l)){var c=i[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==i.suppressHydrationWarning&&Yr(r.textContent,c,e),n=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==i.suppressHydrationWarning&&Yr(r.textContent,c,e),n=["children",""+c]):o.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Mr("scroll",r)}switch(s){case"input":G(r),X(r,i,!0);break;case"textarea":G(r),ie(r);break;case"select":case"option":break;default:"function"===typeof i.onClick&&(r.onclick=$r)}r=n,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===n.nodeType?n:n.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(s)),"http://www.w3.org/1999/xhtml"===e?"script"===s?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(s,{is:r.is}):(e=l.createElement(s),"select"===s&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,s),e[hn]=t,e[mn]=r,To(e,t,!1,!1),t.stateNode=e;e:{switch(l=ye(s,r),s){case"dialog":Mr("cancel",e),Mr("close",e),n=r;break;case"iframe":case"object":case"embed":Mr("load",e),n=r;break;case"video":case"audio":for(n=0;n<Or.length;n++)Mr(Or[n],e);n=r;break;case"source":Mr("error",e),n=r;break;case"img":case"image":case"link":Mr("error",e),Mr("load",e),n=r;break;case"details":Mr("toggle",e),n=r;break;case"input":J(e,r),n=Q(e,r),Mr("invalid",e);break;case"option":default:n=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},n=z({},r,{value:void 0}),Mr("invalid",e);break;case"textarea":ne(e,r),n=re(e,r),Mr("invalid",e)}for(i in ve(s,n),c=n)if(c.hasOwnProperty(i)){var d=c[i];"style"===i?xe(e,d):"dangerouslySetInnerHTML"===i?null!=(d=d?d.__html:void 0)&&ue(e,d):"children"===i?"string"===typeof d?("textarea"!==s||""!==d)&&he(e,d):"number"===typeof d&&he(e,""+d):"suppressContentEditableWarning"!==i&&"suppressHydrationWarning"!==i&&"autoFocus"!==i&&(o.hasOwnProperty(i)?null!=d&&"onScroll"===i&&Mr("scroll",e):null!=d&&y(e,i,d,l))}switch(s){case"input":G(e),X(e,r,!1);break;case"textarea":G(e),ie(e);break;case"option":null!=r.value&&e.setAttribute("value",""+H(r.value));break;case"select":e.multiple=!!r.multiple,null!=(i=r.value)?se(e,!!r.multiple,i,!1):null!=r.defaultValue&&se(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof n.onClick&&(e.onclick=$r)}switch(s){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Go(t),null;case 6:if(e&&null!=t.stateNode)Oo(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(s=Za(Ka.current),Za(Wa.current),ua(t)){if(r=t.stateNode,s=t.memoizedProps,r[hn]=t,(i=r.nodeValue!==s)&&null!==(e=sa))switch(e.tag){case 3:Yr(r.nodeValue,s,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Yr(r.nodeValue,s,0!==(1&e.mode))}i&&(t.flags|=4)}else(r=(9===s.nodeType?s:s.ownerDocument).createTextNode(r))[hn]=t,t.stateNode=r}return Go(t),null;case 13:if(kn(Xa),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(na&&null!==ra&&0!==(1&t.mode)&&0===(128&t.flags))ha(),ma(),t.flags|=98560,i=!1;else if(i=ua(t),null!==r&&null!==r.dehydrated){if(null===e){if(!i)throw Error(a(318));if(!(i=null!==(i=t.memoizedState)?i.dehydrated:null))throw Error(a(317));i[hn]=t}else ma(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Go(t),i=!1}else null!==aa&&(ic(aa),aa=null),i=!0;if(!i)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=s,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Xa.current)?0===Ol&&(Ol=3):fc())),null!==t.updateQueue&&(t.flags|=4),Go(t),null);case 4:return Ja(),Io(e,t),null===e&&Br(t.stateNode.containerInfo),Go(t),null;case 10:return _a(t.type._context),Go(t),null;case 19:if(kn(Xa),null===(i=t.memoizedState))return Go(t),null;if(r=0!==(128&t.flags),null===(l=i.rendering))if(r)Wo(i,!1);else{if(0!==Ol||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ei(e))){for(t.flags|=128,Wo(i,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=s,s=t.child;null!==s;)e=r,(i=s).flags&=14680066,null===(l=i.alternate)?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,e=l.dependencies,i.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),s=s.sibling;return An(Xa,1&Xa.current|2),t.child}e=e.sibling}null!==i.tail&&Ye()>Vl&&(t.flags|=128,r=!0,Wo(i,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ei(l))){if(t.flags|=128,r=!0,null!==(s=e.updateQueue)&&(t.updateQueue=s,t.flags|=4),Wo(i,!0),null===i.tail&&"hidden"===i.tailMode&&!l.alternate&&!na)return Go(t),null}else 2*Ye()-i.renderingStartTime>Vl&&1073741824!==s&&(t.flags|=128,r=!0,Wo(i,!1),t.lanes=4194304);i.isBackwards?(l.sibling=t.child,t.child=l):(null!==(s=i.last)?s.sibling=l:t.child=l,i.last=l)}return null!==i.tail?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Ye(),t.sibling=null,s=Xa.current,An(Xa,r?1&s|2:1&s),t):(Go(t),null);case 22:case 23:return uc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Il)&&(Go(t),6&t.subtreeFlags&&(t.flags|=8192)):Go(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Zo(e,t){switch(ta(t),t.tag){case 1:return In(t.type)&&Rn(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Ja(),kn(Cn),kn(En),si(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return $a(t),null;case 13:if(kn(Xa),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));ma()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return kn(Xa),null;case 4:return Ja(),null;case 10:return _a(t.type._context),null;case 22:case 23:return uc(),null;default:return null}}To=function(e,t){for(var s=t.child;null!==s;){if(5===s.tag||6===s.tag)e.appendChild(s.stateNode);else if(4!==s.tag&&null!==s.child){s.child.return=s,s=s.child;continue}if(s===t)break;for(;null===s.sibling;){if(null===s.return||s.return===t)return;s=s.return}s.sibling.return=s.return,s=s.sibling}},Io=function(){},Ro=function(e,t,s,r){var n=e.memoizedProps;if(n!==r){e=t.stateNode,Za(Wa.current);var a,i=null;switch(s){case"input":n=Q(e,n),r=Q(e,r),i=[];break;case"select":n=z({},n,{value:void 0}),r=z({},r,{value:void 0}),i=[];break;case"textarea":n=re(e,n),r=re(e,r),i=[];break;default:"function"!==typeof n.onClick&&"function"===typeof r.onClick&&(e.onclick=$r)}for(d in ve(s,r),s=null,n)if(!r.hasOwnProperty(d)&&n.hasOwnProperty(d)&&null!=n[d])if("style"===d){var l=n[d];for(a in l)l.hasOwnProperty(a)&&(s||(s={}),s[a]="")}else"dangerouslySetInnerHTML"!==d&&"children"!==d&&"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&"autoFocus"!==d&&(o.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var c=r[d];if(l=null!=n?n[d]:void 0,r.hasOwnProperty(d)&&c!==l&&(null!=c||null!=l))if("style"===d)if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(s||(s={}),s[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(s||(s={}),s[a]=c[a])}else s||(i||(i=[]),i.push(d,s)),s=c;else"dangerouslySetInnerHTML"===d?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(i=i||[]).push(d,c)):"children"===d?"string"!==typeof c&&"number"!==typeof c||(i=i||[]).push(d,""+c):"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&(o.hasOwnProperty(d)?(null!=c&&"onScroll"===d&&Mr("scroll",e),i||l===c||(i=[])):(i=i||[]).push(d,c))}s&&(i=i||[]).push("style",s);var d=i;(t.updateQueue=d)&&(t.flags|=4)}},Oo=function(e,t,s,r){s!==r&&(t.flags|=4)};var Qo=!1,Jo=!1,Yo="function"===typeof WeakSet?WeakSet:Set,$o=null;function Xo(e,t){var s=e.ref;if(null!==s)if("function"===typeof s)try{s(null)}catch(r){Sc(e,t,r)}else s.current=null}function el(e,t,s){try{s()}catch(r){Sc(e,t,r)}}var tl=!1;function sl(e,t,s){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var n=r=r.next;do{if((n.tag&e)===e){var a=n.destroy;n.destroy=void 0,void 0!==a&&el(t,s,a)}n=n.next}while(n!==r)}}function rl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var s=t=t.next;do{if((s.tag&e)===e){var r=s.create;s.destroy=r()}s=s.next}while(s!==t)}}function nl(e){var t=e.ref;if(null!==t){var s=e.stateNode;e.tag,e=s,"function"===typeof t?t(e):t.current=e}}function al(e){var t=e.alternate;null!==t&&(e.alternate=null,al(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hn],delete t[mn],delete t[fn],delete t[xn],delete t[gn])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function il(e){return 5===e.tag||3===e.tag||4===e.tag}function ol(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||il(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,s){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===s.nodeType?s.parentNode.insertBefore(e,t):s.insertBefore(e,t):(8===s.nodeType?(t=s.parentNode).insertBefore(e,s):(t=s).appendChild(e),null!==(s=s._reactRootContainer)&&void 0!==s||null!==t.onclick||(t.onclick=$r));else if(4!==r&&null!==(e=e.child))for(ll(e,t,s),e=e.sibling;null!==e;)ll(e,t,s),e=e.sibling}function cl(e,t,s){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?s.insertBefore(e,t):s.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cl(e,t,s),e=e.sibling;null!==e;)cl(e,t,s),e=e.sibling}var dl=null,ul=!1;function hl(e,t,s){for(s=s.child;null!==s;)ml(e,t,s),s=s.sibling}function ml(e,t,s){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(nt,s)}catch(o){}switch(s.tag){case 5:Jo||Xo(s,t);case 6:var r=dl,n=ul;dl=null,hl(e,t,s),ul=n,null!==(dl=r)&&(ul?(e=dl,s=s.stateNode,8===e.nodeType?e.parentNode.removeChild(s):e.removeChild(s)):dl.removeChild(s.stateNode));break;case 18:null!==dl&&(ul?(e=dl,s=s.stateNode,8===e.nodeType?ln(e.parentNode,s):1===e.nodeType&&ln(e,s),Vt(e)):ln(dl,s.stateNode));break;case 4:r=dl,n=ul,dl=s.stateNode.containerInfo,ul=!0,hl(e,t,s),dl=r,ul=n;break;case 0:case 11:case 14:case 15:if(!Jo&&(null!==(r=s.updateQueue)&&null!==(r=r.lastEffect))){n=r=r.next;do{var a=n,i=a.destroy;a=a.tag,void 0!==i&&(0!==(2&a)||0!==(4&a))&&el(s,t,i),n=n.next}while(n!==r)}hl(e,t,s);break;case 1:if(!Jo&&(Xo(s,t),"function"===typeof(r=s.stateNode).componentWillUnmount))try{r.props=s.memoizedProps,r.state=s.memoizedState,r.componentWillUnmount()}catch(o){Sc(s,t,o)}hl(e,t,s);break;case 21:hl(e,t,s);break;case 22:1&s.mode?(Jo=(r=Jo)||null!==s.memoizedState,hl(e,t,s),Jo=r):hl(e,t,s);break;default:hl(e,t,s)}}function pl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var s=e.stateNode;null===s&&(s=e.stateNode=new Yo),t.forEach(function(t){var r=Ec.bind(null,e,t);s.has(t)||(s.add(t),t.then(r,r))})}}function fl(e,t){var s=t.deletions;if(null!==s)for(var r=0;r<s.length;r++){var n=s[r];try{var i=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 5:dl=l.stateNode,ul=!1;break e;case 3:case 4:dl=l.stateNode.containerInfo,ul=!0;break e}l=l.return}if(null===dl)throw Error(a(160));ml(i,o,n),dl=null,ul=!1;var c=n.alternate;null!==c&&(c.return=null),n.return=null}catch(d){Sc(n,t,d)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)xl(t,e),t=t.sibling}function xl(e,t){var s=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(fl(t,e),gl(e),4&r){try{sl(3,e,e.return),rl(3,e)}catch(x){Sc(e,e.return,x)}try{sl(5,e,e.return)}catch(x){Sc(e,e.return,x)}}break;case 1:fl(t,e),gl(e),512&r&&null!==s&&Xo(s,s.return);break;case 5:if(fl(t,e),gl(e),512&r&&null!==s&&Xo(s,s.return),32&e.flags){var n=e.stateNode;try{he(n,"")}catch(x){Sc(e,e.return,x)}}if(4&r&&null!=(n=e.stateNode)){var i=e.memoizedProps,o=null!==s?s.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===i.type&&null!=i.name&&Y(n,i),ye(l,o);var d=ye(l,i);for(o=0;o<c.length;o+=2){var u=c[o],h=c[o+1];"style"===u?xe(n,h):"dangerouslySetInnerHTML"===u?ue(n,h):"children"===u?he(n,h):y(n,u,h,d)}switch(l){case"input":$(n,i);break;case"textarea":ae(n,i);break;case"select":var m=n._wrapperState.wasMultiple;n._wrapperState.wasMultiple=!!i.multiple;var p=i.value;null!=p?se(n,!!i.multiple,p,!1):m!==!!i.multiple&&(null!=i.defaultValue?se(n,!!i.multiple,i.defaultValue,!0):se(n,!!i.multiple,i.multiple?[]:"",!1))}n[mn]=i}catch(x){Sc(e,e.return,x)}}break;case 6:if(fl(t,e),gl(e),4&r){if(null===e.stateNode)throw Error(a(162));n=e.stateNode,i=e.memoizedProps;try{n.nodeValue=i}catch(x){Sc(e,e.return,x)}}break;case 3:if(fl(t,e),gl(e),4&r&&null!==s&&s.memoizedState.isDehydrated)try{Vt(t.containerInfo)}catch(x){Sc(e,e.return,x)}break;case 4:default:fl(t,e),gl(e);break;case 13:fl(t,e),gl(e),8192&(n=e.child).flags&&(i=null!==n.memoizedState,n.stateNode.isHidden=i,!i||null!==n.alternate&&null!==n.alternate.memoizedState||(Bl=Ye())),4&r&&pl(e);break;case 22:if(u=null!==s&&null!==s.memoizedState,1&e.mode?(Jo=(d=Jo)||u,fl(t,e),Jo=d):fl(t,e),gl(e),8192&r){if(d=null!==e.memoizedState,(e.stateNode.isHidden=d)&&!u&&0!==(1&e.mode))for($o=e,u=e.child;null!==u;){for(h=$o=u;null!==$o;){switch(p=(m=$o).child,m.tag){case 0:case 11:case 14:case 15:sl(4,m,m.return);break;case 1:Xo(m,m.return);var f=m.stateNode;if("function"===typeof f.componentWillUnmount){r=m,s=m.return;try{t=r,f.props=t.memoizedProps,f.state=t.memoizedState,f.componentWillUnmount()}catch(x){Sc(r,s,x)}}break;case 5:Xo(m,m.return);break;case 22:if(null!==m.memoizedState){jl(h);continue}}null!==p?(p.return=m,$o=p):jl(h)}u=u.sibling}e:for(u=null,h=e;;){if(5===h.tag){if(null===u){u=h;try{n=h.stateNode,d?"function"===typeof(i=n.style).setProperty?i.setProperty("display","none","important"):i.display="none":(l=h.stateNode,o=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=fe("display",o))}catch(x){Sc(e,e.return,x)}}}else if(6===h.tag){if(null===u)try{h.stateNode.nodeValue=d?"":h.memoizedProps}catch(x){Sc(e,e.return,x)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:fl(t,e),gl(e),4&r&&pl(e);case 21:}}function gl(e){var t=e.flags;if(2&t){try{e:{for(var s=e.return;null!==s;){if(il(s)){var r=s;break e}s=s.return}throw Error(a(160))}switch(r.tag){case 5:var n=r.stateNode;32&r.flags&&(he(n,""),r.flags&=-33),cl(e,ol(e),n);break;case 3:case 4:var i=r.stateNode.containerInfo;ll(e,ol(e),i);break;default:throw Error(a(161))}}catch(o){Sc(e,e.return,o)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function vl(e,t,s){$o=e,yl(e,t,s)}function yl(e,t,s){for(var r=0!==(1&e.mode);null!==$o;){var n=$o,a=n.child;if(22===n.tag&&r){var i=null!==n.memoizedState||Qo;if(!i){var o=n.alternate,l=null!==o&&null!==o.memoizedState||Jo;o=Qo;var c=Jo;if(Qo=i,(Jo=l)&&!c)for($o=n;null!==$o;)l=(i=$o).child,22===i.tag&&null!==i.memoizedState?wl(n):null!==l?(l.return=i,$o=l):wl(n);for(;null!==a;)$o=a,yl(a,t,s),a=a.sibling;$o=n,Qo=o,Jo=c}bl(e)}else 0!==(8772&n.subtreeFlags)&&null!==a?(a.return=n,$o=a):bl(e)}}function bl(e){for(;null!==$o;){var t=$o;if(0!==(8772&t.flags)){var s=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Jo||rl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Jo)if(null===s)r.componentDidMount();else{var n=t.elementType===t.type?s.memoizedProps:to(t.type,s.memoizedProps);r.componentDidUpdate(n,s.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;null!==i&&qa(t,i,r);break;case 3:var o=t.updateQueue;if(null!==o){if(s=null,null!==t.child)switch(t.child.tag){case 5:case 1:s=t.child.stateNode}qa(t,o,s)}break;case 5:var l=t.stateNode;if(null===s&&4&t.flags){s=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&s.focus();break;case"img":c.src&&(s.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var d=t.alternate;if(null!==d){var u=d.memoizedState;if(null!==u){var h=u.dehydrated;null!==h&&Vt(h)}}}break;default:throw Error(a(163))}Jo||512&t.flags&&nl(t)}catch(m){Sc(t,t.return,m)}}if(t===e){$o=null;break}if(null!==(s=t.sibling)){s.return=t.return,$o=s;break}$o=t.return}}function jl(e){for(;null!==$o;){var t=$o;if(t===e){$o=null;break}var s=t.sibling;if(null!==s){s.return=t.return,$o=s;break}$o=t.return}}function wl(e){for(;null!==$o;){var t=$o;try{switch(t.tag){case 0:case 11:case 15:var s=t.return;try{rl(4,t)}catch(l){Sc(t,s,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var n=t.return;try{r.componentDidMount()}catch(l){Sc(t,n,l)}}var a=t.return;try{nl(t)}catch(l){Sc(t,a,l)}break;case 5:var i=t.return;try{nl(t)}catch(l){Sc(t,i,l)}}}catch(l){Sc(t,t.return,l)}if(t===e){$o=null;break}var o=t.sibling;if(null!==o){o.return=t.return,$o=o;break}$o=t.return}}var Nl,Sl=Math.ceil,kl=b.ReactCurrentDispatcher,Al=b.ReactCurrentOwner,_l=b.ReactCurrentBatchConfig,El=0,Cl=null,Pl=null,Tl=0,Il=0,Rl=Sn(0),Ol=0,Dl=null,Ll=0,zl=0,Ml=0,Fl=null,Ul=null,Bl=0,Vl=1/0,ql=null,Hl=!1,Wl=null,Gl=null,Kl=!1,Zl=null,Ql=0,Jl=0,Yl=null,$l=-1,Xl=0;function ec(){return 0!==(6&El)?Ye():-1!==$l?$l:$l=Ye()}function tc(e){return 0===(1&e.mode)?1:0!==(2&El)&&0!==Tl?Tl&-Tl:null!==fa.transition?(0===Xl&&(Xl=ft()),Xl):0!==(e=yt)?e:e=void 0===(e=window.event)?16:Jt(e.type)}function sc(e,t,s,r){if(50<Jl)throw Jl=0,Yl=null,Error(a(185));gt(e,s,r),0!==(2&El)&&e===Cl||(e===Cl&&(0===(2&El)&&(zl|=s),4===Ol&&oc(e,Tl)),rc(e,r),1===s&&0===El&&0===(1&t.mode)&&(Vl=Ye()+500,Fn&&Vn()))}function rc(e,t){var s=e.callbackNode;!function(e,t){for(var s=e.suspendedLanes,r=e.pingedLanes,n=e.expirationTimes,a=e.pendingLanes;0<a;){var i=31-it(a),o=1<<i,l=n[i];-1===l?0!==(o&s)&&0===(o&r)||(n[i]=mt(o,t)):l<=t&&(e.expiredLanes|=o),a&=~o}}(e,t);var r=ht(e,e===Cl?Tl:0);if(0===r)null!==s&&Ze(s),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=s&&Ze(s),1===t)0===e.tag?function(e){Fn=!0,Bn(e)}(lc.bind(null,e)):Bn(lc.bind(null,e)),an(function(){0===(6&El)&&Vn()}),s=null;else{switch(bt(r)){case 1:s=Xe;break;case 4:s=et;break;case 16:default:s=tt;break;case 536870912:s=rt}s=Cc(s,nc.bind(null,e))}e.callbackPriority=t,e.callbackNode=s}}function nc(e,t){if($l=-1,Xl=0,0!==(6&El))throw Error(a(327));var s=e.callbackNode;if(wc()&&e.callbackNode!==s)return null;var r=ht(e,e===Cl?Tl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=xc(e,r);else{t=r;var n=El;El|=2;var i=pc();for(Cl===e&&Tl===t||(ql=null,Vl=Ye()+500,hc(e,t));;)try{vc();break}catch(l){mc(e,l)}Aa(),kl.current=i,El=n,null!==Pl?t=0:(Cl=null,Tl=0,t=Ol)}if(0!==t){if(2===t&&(0!==(n=pt(e))&&(r=n,t=ac(e,n))),1===t)throw s=Dl,hc(e,0),oc(e,r),rc(e,Ye()),s;if(6===t)oc(e,r);else{if(n=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var s=t.updateQueue;if(null!==s&&null!==(s=s.stores))for(var r=0;r<s.length;r++){var n=s[r],a=n.getSnapshot;n=n.value;try{if(!ir(a(),n))return!1}catch(o){return!1}}}if(s=t.child,16384&t.subtreeFlags&&null!==s)s.return=t,t=s;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(n)&&(2===(t=xc(e,r))&&(0!==(i=pt(e))&&(r=i,t=ac(e,i))),1===t))throw s=Dl,hc(e,0),oc(e,r),rc(e,Ye()),s;switch(e.finishedWork=n,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:jc(e,Ul,ql);break;case 3:if(oc(e,r),(130023424&r)===r&&10<(t=Bl+500-Ye())){if(0!==ht(e,0))break;if(((n=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&n;break}e.timeoutHandle=sn(jc.bind(null,e,Ul,ql),t);break}jc(e,Ul,ql);break;case 4:if(oc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,n=-1;0<r;){var o=31-it(r);i=1<<o,(o=t[o])>n&&(n=o),r&=~i}if(r=n,10<(r=(120>(r=Ye()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Sl(r/1960))-r)){e.timeoutHandle=sn(jc.bind(null,e,Ul,ql),r);break}jc(e,Ul,ql);break;default:throw Error(a(329))}}}return rc(e,Ye()),e.callbackNode===s?nc.bind(null,e):null}function ac(e,t){var s=Fl;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=xc(e,t))&&(t=Ul,Ul=s,null!==t&&ic(t)),e}function ic(e){null===Ul?Ul=e:Ul.push.apply(Ul,e)}function oc(e,t){for(t&=~Ml,t&=~zl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var s=31-it(t),r=1<<s;e[s]=-1,t&=~r}}function lc(e){if(0!==(6&El))throw Error(a(327));wc();var t=ht(e,0);if(0===(1&t))return rc(e,Ye()),null;var s=xc(e,t);if(0!==e.tag&&2===s){var r=pt(e);0!==r&&(t=r,s=ac(e,r))}if(1===s)throw s=Dl,hc(e,0),oc(e,t),rc(e,Ye()),s;if(6===s)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,jc(e,Ul,ql),rc(e,Ye()),null}function cc(e,t){var s=El;El|=1;try{return e(t)}finally{0===(El=s)&&(Vl=Ye()+500,Fn&&Vn())}}function dc(e){null!==Zl&&0===Zl.tag&&0===(6&El)&&wc();var t=El;El|=1;var s=_l.transition,r=yt;try{if(_l.transition=null,yt=1,e)return e()}finally{yt=r,_l.transition=s,0===(6&(El=t))&&Vn()}}function uc(){Il=Rl.current,kn(Rl)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var s=e.timeoutHandle;if(-1!==s&&(e.timeoutHandle=-1,rn(s)),null!==Pl)for(s=Pl.return;null!==s;){var r=s;switch(ta(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Rn();break;case 3:Ja(),kn(Cn),kn(En),si();break;case 5:$a(r);break;case 4:Ja();break;case 13:case 19:kn(Xa);break;case 10:_a(r.type._context);break;case 22:case 23:uc()}s=s.return}if(Cl=e,Pl=e=Rc(e.current,null),Tl=Il=t,Ol=0,Dl=null,Ml=zl=Ll=0,Ul=Fl=null,null!==Ta){for(t=0;t<Ta.length;t++)if(null!==(r=(s=Ta[t]).interleaved)){s.interleaved=null;var n=r.next,a=s.pending;if(null!==a){var i=a.next;a.next=n,r.next=i}s.pending=r}Ta=null}return e}function mc(e,t){for(;;){var s=Pl;try{if(Aa(),ri.current=Yi,ci){for(var r=ii.memoizedState;null!==r;){var n=r.queue;null!==n&&(n.pending=null),r=r.next}ci=!1}if(ai=0,li=oi=ii=null,di=!1,ui=0,Al.current=null,null===s||null===s.return){Ol=1,Dl=t,Pl=null;break}e:{var i=e,o=s.return,l=s,c=t;if(t=Tl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var d=c,u=l,h=u.tag;if(0===(1&u.mode)&&(0===h||11===h||15===h)){var m=u.alternate;m?(u.updateQueue=m.updateQueue,u.memoizedState=m.memoizedState,u.lanes=m.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=xo(o);if(null!==p){p.flags&=-257,go(p,o,l,0,t),1&p.mode&&fo(i,d,t),c=d;var f=(t=p).updateQueue;if(null===f){var x=new Set;x.add(c),t.updateQueue=x}else f.add(c);break e}if(0===(1&t)){fo(i,d,t),fc();break e}c=Error(a(426))}else if(na&&1&l.mode){var g=xo(o);if(null!==g){0===(65536&g.flags)&&(g.flags|=256),go(g,o,l,0,t),pa(lo(c,l));break e}}i=c=lo(c,l),4!==Ol&&(Ol=2),null===Fl?Fl=[i]:Fl.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t,Ba(i,mo(0,c,t));break e;case 1:l=c;var v=i.type,y=i.stateNode;if(0===(128&i.flags)&&("function"===typeof v.getDerivedStateFromError||null!==y&&"function"===typeof y.componentDidCatch&&(null===Gl||!Gl.has(y)))){i.flags|=65536,t&=-t,i.lanes|=t,Ba(i,po(i,l,t));break e}}i=i.return}while(null!==i)}bc(s)}catch(b){t=b,Pl===s&&null!==s&&(Pl=s=s.return);continue}break}}function pc(){var e=kl.current;return kl.current=Yi,null===e?Yi:e}function fc(){0!==Ol&&3!==Ol&&2!==Ol||(Ol=4),null===Cl||0===(268435455&Ll)&&0===(268435455&zl)||oc(Cl,Tl)}function xc(e,t){var s=El;El|=2;var r=pc();for(Cl===e&&Tl===t||(ql=null,hc(e,t));;)try{gc();break}catch(n){mc(e,n)}if(Aa(),El=s,kl.current=r,null!==Pl)throw Error(a(261));return Cl=null,Tl=0,Ol}function gc(){for(;null!==Pl;)yc(Pl)}function vc(){for(;null!==Pl&&!Qe();)yc(Pl)}function yc(e){var t=Nl(e.alternate,e,Il);e.memoizedProps=e.pendingProps,null===t?bc(e):Pl=t,Al.current=null}function bc(e){var t=e;do{var s=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(s=Ko(s,t,Il)))return void(Pl=s)}else{if(null!==(s=Zo(s,t)))return s.flags&=32767,void(Pl=s);if(null===e)return Ol=6,void(Pl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Pl=t);Pl=t=e}while(null!==t);0===Ol&&(Ol=5)}function jc(e,t,s){var r=yt,n=_l.transition;try{_l.transition=null,yt=1,function(e,t,s,r){do{wc()}while(null!==Zl);if(0!==(6&El))throw Error(a(327));s=e.finishedWork;var n=e.finishedLanes;if(null===s)return null;if(e.finishedWork=null,e.finishedLanes=0,s===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var i=s.lanes|s.childLanes;if(function(e,t){var s=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<s;){var n=31-it(s),a=1<<n;t[n]=0,r[n]=-1,e[n]=-1,s&=~a}}(e,i),e===Cl&&(Pl=Cl=null,Tl=0),0===(2064&s.subtreeFlags)&&0===(2064&s.flags)||Kl||(Kl=!0,Cc(tt,function(){return wc(),null})),i=0!==(15990&s.flags),0!==(15990&s.subtreeFlags)||i){i=_l.transition,_l.transition=null;var o=yt;yt=1;var l=El;El|=4,Al.current=null,function(e,t){if(Xr=Ht,hr(e=ur())){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(s=(s=e.ownerDocument)&&s.defaultView||window).getSelection&&s.getSelection();if(r&&0!==r.rangeCount){s=r.anchorNode;var n=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{s.nodeType,i.nodeType}catch(j){s=null;break e}var o=0,l=-1,c=-1,d=0,u=0,h=e,m=null;t:for(;;){for(var p;h!==s||0!==n&&3!==h.nodeType||(l=o+n),h!==i||0!==r&&3!==h.nodeType||(c=o+r),3===h.nodeType&&(o+=h.nodeValue.length),null!==(p=h.firstChild);)m=h,h=p;for(;;){if(h===e)break t;if(m===s&&++d===n&&(l=o),m===i&&++u===r&&(c=o),null!==(p=h.nextSibling))break;m=(h=m).parentNode}h=p}s=-1===l||-1===c?null:{start:l,end:c}}else s=null}s=s||{start:0,end:0}}else s=null;for(en={focusedElem:e,selectionRange:s},Ht=!1,$o=t;null!==$o;)if(e=(t=$o).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,$o=e;else for(;null!==$o;){t=$o;try{var f=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==f){var x=f.memoizedProps,g=f.memoizedState,v=t.stateNode,y=v.getSnapshotBeforeUpdate(t.elementType===t.type?x:to(t.type,x),g);v.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(a(163))}}catch(j){Sc(t,t.return,j)}if(null!==(e=t.sibling)){e.return=t.return,$o=e;break}$o=t.return}f=tl,tl=!1}(e,s),xl(s,e),mr(en),Ht=!!Xr,en=Xr=null,e.current=s,vl(s,e,n),Je(),El=l,yt=o,_l.transition=i}else e.current=s;if(Kl&&(Kl=!1,Zl=e,Ql=n),i=e.pendingLanes,0===i&&(Gl=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(nt,e,void 0,128===(128&e.current.flags))}catch(t){}}(s.stateNode),rc(e,Ye()),null!==t)for(r=e.onRecoverableError,s=0;s<t.length;s++)n=t[s],r(n.value,{componentStack:n.stack,digest:n.digest});if(Hl)throw Hl=!1,e=Wl,Wl=null,e;0!==(1&Ql)&&0!==e.tag&&wc(),i=e.pendingLanes,0!==(1&i)?e===Yl?Jl++:(Jl=0,Yl=e):Jl=0,Vn()}(e,t,s,r)}finally{_l.transition=n,yt=r}return null}function wc(){if(null!==Zl){var e=bt(Ql),t=_l.transition,s=yt;try{if(_l.transition=null,yt=16>e?16:e,null===Zl)var r=!1;else{if(e=Zl,Zl=null,Ql=0,0!==(6&El))throw Error(a(331));var n=El;for(El|=4,$o=e.current;null!==$o;){var i=$o,o=i.child;if(0!==(16&$o.flags)){var l=i.deletions;if(null!==l){for(var c=0;c<l.length;c++){var d=l[c];for($o=d;null!==$o;){var u=$o;switch(u.tag){case 0:case 11:case 15:sl(8,u,i)}var h=u.child;if(null!==h)h.return=u,$o=h;else for(;null!==$o;){var m=(u=$o).sibling,p=u.return;if(al(u),u===d){$o=null;break}if(null!==m){m.return=p,$o=m;break}$o=p}}}var f=i.alternate;if(null!==f){var x=f.child;if(null!==x){f.child=null;do{var g=x.sibling;x.sibling=null,x=g}while(null!==x)}}$o=i}}if(0!==(2064&i.subtreeFlags)&&null!==o)o.return=i,$o=o;else e:for(;null!==$o;){if(0!==(2048&(i=$o).flags))switch(i.tag){case 0:case 11:case 15:sl(9,i,i.return)}var v=i.sibling;if(null!==v){v.return=i.return,$o=v;break e}$o=i.return}}var y=e.current;for($o=y;null!==$o;){var b=(o=$o).child;if(0!==(2064&o.subtreeFlags)&&null!==b)b.return=o,$o=b;else e:for(o=y;null!==$o;){if(0!==(2048&(l=$o).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(w){Sc(l,l.return,w)}if(l===o){$o=null;break e}var j=l.sibling;if(null!==j){j.return=l.return,$o=j;break e}$o=l.return}}if(El=n,Vn(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(nt,e)}catch(w){}r=!0}return r}finally{yt=s,_l.transition=t}}return!1}function Nc(e,t,s){e=Fa(e,t=mo(0,t=lo(s,t),1),1),t=ec(),null!==e&&(gt(e,1,t),rc(e,t))}function Sc(e,t,s){if(3===e.tag)Nc(e,e,s);else for(;null!==t;){if(3===t.tag){Nc(t,e,s);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Gl||!Gl.has(r))){t=Fa(t,e=po(t,e=lo(s,e),1),1),e=ec(),null!==t&&(gt(t,1,e),rc(t,e));break}}t=t.return}}function kc(e,t,s){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&s,Cl===e&&(Tl&s)===s&&(4===Ol||3===Ol&&(130023424&Tl)===Tl&&500>Ye()-Bl?hc(e,0):Ml|=s),rc(e,t)}function Ac(e,t){0===t&&(0===(1&e.mode)?t=1:(t=dt,0===(130023424&(dt<<=1))&&(dt=4194304)));var s=ec();null!==(e=Oa(e,t))&&(gt(e,t,s),rc(e,s))}function _c(e){var t=e.memoizedState,s=0;null!==t&&(s=t.retryLane),Ac(e,s)}function Ec(e,t){var s=0;switch(e.tag){case 13:var r=e.stateNode,n=e.memoizedState;null!==n&&(s=n.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Ac(e,s)}function Cc(e,t){return Ke(e,t)}function Pc(e,t,s,r){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Tc(e,t,s,r){return new Pc(e,t,s,r)}function Ic(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Rc(e,t){var s=e.alternate;return null===s?((s=Tc(e.tag,t,e.key,e.mode)).elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=t,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=14680064&e.flags,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,t=e.dependencies,s.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s}function Oc(e,t,s,r,n,i){var o=2;if(r=e,"function"===typeof e)Ic(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case N:return Dc(s.children,n,i,t);case S:o=8,n|=8;break;case k:return(e=Tc(12,s,t,2|n)).elementType=k,e.lanes=i,e;case C:return(e=Tc(13,s,t,n)).elementType=C,e.lanes=i,e;case P:return(e=Tc(19,s,t,n)).elementType=P,e.lanes=i,e;case R:return Lc(s,n,i,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case A:o=10;break e;case _:o=9;break e;case E:o=11;break e;case T:o=14;break e;case I:o=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Tc(o,s,t,n)).elementType=e,t.type=r,t.lanes=i,t}function Dc(e,t,s,r){return(e=Tc(7,e,r,t)).lanes=s,e}function Lc(e,t,s,r){return(e=Tc(22,e,r,t)).elementType=R,e.lanes=s,e.stateNode={isHidden:!1},e}function zc(e,t,s){return(e=Tc(6,e,null,t)).lanes=s,e}function Mc(e,t,s){return(t=Tc(4,null!==e.children?e.children:[],e.key,t)).lanes=s,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Fc(e,t,s,r,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=xt(0),this.expirationTimes=xt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=xt(0),this.identifierPrefix=r,this.onRecoverableError=n,this.mutableSourceEagerHydrationData=null}function Uc(e,t,s,r,n,a,i,o,l){return e=new Fc(e,t,s,o,l),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Tc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},La(a),e}function Bc(e){if(!e)return _n;e:{if(Ve(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(In(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var s=e.type;if(In(s))return Dn(e,s,t)}return t}function Vc(e,t,s,r,n,a,i,o,l){return(e=Uc(s,r,!0,e,0,a,0,o,l)).context=Bc(null),s=e.current,(a=Ma(r=ec(),n=tc(s))).callback=void 0!==t&&null!==t?t:null,Fa(s,a,n),e.current.lanes=n,gt(e,n,r),rc(e,r),e}function qc(e,t,s,r){var n=t.current,a=ec(),i=tc(n);return s=Bc(s),null===t.context?t.context=s:t.pendingContext=s,(t=Ma(a,i)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Fa(n,t,i))&&(sc(e,n,i,a),Ua(e,n,i)),i}function Hc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Wc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var s=e.retryLane;e.retryLane=0!==s&&s<t?s:t}}function Gc(e,t){Wc(e,t),(e=e.alternate)&&Wc(e,t)}Nl=function(e,t,s){if(null!==e)if(e.memoizedProps!==t.pendingProps||Cn.current)yo=!0;else{if(0===(e.lanes&s)&&0===(128&t.flags))return yo=!1,function(e,t,s){switch(t.tag){case 3:Co(t),ma();break;case 5:Ya(t);break;case 1:In(t.type)&&Ln(t);break;case 4:Qa(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,n=t.memoizedProps.value;An(wa,r._currentValue),r._currentValue=n;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(An(Xa,1&Xa.current),t.flags|=128,null):0!==(s&t.child.childLanes)?zo(e,t,s):(An(Xa,1&Xa.current),null!==(e=Ho(e,t,s))?e.sibling:null);An(Xa,1&Xa.current);break;case 19:if(r=0!==(s&t.childLanes),0!==(128&e.flags)){if(r)return Vo(e,t,s);t.flags|=128}if(null!==(n=t.memoizedState)&&(n.rendering=null,n.tail=null,n.lastEffect=null),An(Xa,Xa.current),r)break;return null;case 22:case 23:return t.lanes=0,So(e,t,s)}return Ho(e,t,s)}(e,t,s);yo=0!==(131072&e.flags)}else yo=!1,na&&0!==(1048576&t.flags)&&Xn(t,Gn,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;qo(e,t),e=t.pendingProps;var n=Tn(t,En.current);Ca(t,s),n=fi(null,t,r,e,n,s);var i=xi();return t.flags|=1,"object"===typeof n&&null!==n&&"function"===typeof n.render&&void 0===n.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,In(r)?(i=!0,Ln(t)):i=!1,t.memoizedState=null!==n.state&&void 0!==n.state?n.state:null,La(t),n.updater=ro,t.stateNode=n,n._reactInternals=t,oo(t,r,e,s),t=Eo(null,t,r,!0,i,s)):(t.tag=0,na&&i&&ea(t),bo(null,t,n,s),t=t.child),t;case 16:r=t.elementType;e:{switch(qo(e,t),e=t.pendingProps,r=(n=r._init)(r._payload),t.type=r,n=t.tag=function(e){if("function"===typeof e)return Ic(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===E)return 11;if(e===T)return 14}return 2}(r),e=to(r,e),n){case 0:t=Ao(null,t,r,e,s);break e;case 1:t=_o(null,t,r,e,s);break e;case 11:t=jo(null,t,r,e,s);break e;case 14:t=wo(null,t,r,to(r.type,e),s);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,n=t.pendingProps,Ao(e,t,r,n=t.elementType===r?n:to(r,n),s);case 1:return r=t.type,n=t.pendingProps,_o(e,t,r,n=t.elementType===r?n:to(r,n),s);case 3:e:{if(Co(t),null===e)throw Error(a(387));r=t.pendingProps,n=(i=t.memoizedState).element,za(e,t),Va(t,r,null,s);var o=t.memoizedState;if(r=o.element,i.isDehydrated){if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,256&t.flags){t=Po(e,t,r,s,n=lo(Error(a(423)),t));break e}if(r!==n){t=Po(e,t,r,s,n=lo(Error(a(424)),t));break e}for(ra=cn(t.stateNode.containerInfo.firstChild),sa=t,na=!0,aa=null,s=ja(t,null,r,s),t.child=s;s;)s.flags=-3&s.flags|4096,s=s.sibling}else{if(ma(),r===n){t=Ho(e,t,s);break e}bo(e,t,r,s)}t=t.child}return t;case 5:return Ya(t),null===e&&ca(t),r=t.type,n=t.pendingProps,i=null!==e?e.memoizedProps:null,o=n.children,tn(r,n)?o=null:null!==i&&tn(r,i)&&(t.flags|=32),ko(e,t),bo(e,t,o,s),t.child;case 6:return null===e&&ca(t),null;case 13:return zo(e,t,s);case 4:return Qa(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=ba(t,null,r,s):bo(e,t,r,s),t.child;case 11:return r=t.type,n=t.pendingProps,jo(e,t,r,n=t.elementType===r?n:to(r,n),s);case 7:return bo(e,t,t.pendingProps,s),t.child;case 8:case 12:return bo(e,t,t.pendingProps.children,s),t.child;case 10:e:{if(r=t.type._context,n=t.pendingProps,i=t.memoizedProps,o=n.value,An(wa,r._currentValue),r._currentValue=o,null!==i)if(ir(i.value,o)){if(i.children===n.children&&!Cn.current){t=Ho(e,t,s);break e}}else for(null!==(i=t.child)&&(i.return=t);null!==i;){var l=i.dependencies;if(null!==l){o=i.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===i.tag){(c=Ma(-1,s&-s)).tag=2;var d=i.updateQueue;if(null!==d){var u=(d=d.shared).pending;null===u?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}i.lanes|=s,null!==(c=i.alternate)&&(c.lanes|=s),Ea(i.return,s,t),l.lanes|=s;break}c=c.next}}else if(10===i.tag)o=i.type===t.type?null:i.child;else if(18===i.tag){if(null===(o=i.return))throw Error(a(341));o.lanes|=s,null!==(l=o.alternate)&&(l.lanes|=s),Ea(o,s,t),o=i.sibling}else o=i.child;if(null!==o)o.return=i;else for(o=i;null!==o;){if(o===t){o=null;break}if(null!==(i=o.sibling)){i.return=o.return,o=i;break}o=o.return}i=o}bo(e,t,n.children,s),t=t.child}return t;case 9:return n=t.type,r=t.pendingProps.children,Ca(t,s),r=r(n=Pa(n)),t.flags|=1,bo(e,t,r,s),t.child;case 14:return n=to(r=t.type,t.pendingProps),wo(e,t,r,n=to(r.type,n),s);case 15:return No(e,t,t.type,t.pendingProps,s);case 17:return r=t.type,n=t.pendingProps,n=t.elementType===r?n:to(r,n),qo(e,t),t.tag=1,In(r)?(e=!0,Ln(t)):e=!1,Ca(t,s),ao(t,r,n),oo(t,r,n,s),Eo(null,t,r,!0,e,s);case 19:return Vo(e,t,s);case 22:return So(e,t,s)}throw Error(a(156,t.tag))};var Kc="function"===typeof reportError?reportError:function(e){console.error(e)};function Zc(e){this._internalRoot=e}function Qc(e){this._internalRoot=e}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Yc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function $c(){}function Xc(e,t,s,r,n){var a=s._reactRootContainer;if(a){var i=a;if("function"===typeof n){var o=n;n=function(){var e=Hc(i);o.call(e)}}qc(t,i,e,n)}else i=function(e,t,s,r,n){if(n){if("function"===typeof r){var a=r;r=function(){var e=Hc(i);a.call(e)}}var i=Vc(t,r,e,0,null,!1,0,"",$c);return e._reactRootContainer=i,e[pn]=i.current,Br(8===e.nodeType?e.parentNode:e),dc(),i}for(;n=e.lastChild;)e.removeChild(n);if("function"===typeof r){var o=r;r=function(){var e=Hc(l);o.call(e)}}var l=Uc(e,0,!1,null,0,!1,0,"",$c);return e._reactRootContainer=l,e[pn]=l.current,Br(8===e.nodeType?e.parentNode:e),dc(function(){qc(t,l,s,r)}),l}(s,t,e,n,r);return Hc(i)}Qc.prototype.render=Zc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));qc(e,t,null,null)},Qc.prototype.unmount=Zc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;dc(function(){qc(null,e,null,null)}),t[pn]=null}},Qc.prototype.unstable_scheduleHydration=function(e){if(e){var t=St();e={blockedOn:null,target:e,priority:t};for(var s=0;s<Rt.length&&0!==t&&t<Rt[s].priority;s++);Rt.splice(s,0,e),0===s&&zt(e)}},jt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var s=ut(t.pendingLanes);0!==s&&(vt(t,1|s),rc(t,Ye()),0===(6&El)&&(Vl=Ye()+500,Vn()))}break;case 13:dc(function(){var t=Oa(e,1);if(null!==t){var s=ec();sc(t,e,1,s)}}),Gc(e,1)}},wt=function(e){if(13===e.tag){var t=Oa(e,134217728);if(null!==t)sc(t,e,134217728,ec());Gc(e,134217728)}},Nt=function(e){if(13===e.tag){var t=tc(e),s=Oa(e,t);if(null!==s)sc(s,e,t,ec());Gc(e,t)}},St=function(){return yt},kt=function(e,t){var s=yt;try{return yt=e,t()}finally{yt=s}},we=function(e,t,s){switch(t){case"input":if($(e,s),t=s.name,"radio"===s.type&&null!=t){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<s.length;t++){var r=s[t];if(r!==e&&r.form===e.form){var n=jn(r);if(!n)throw Error(a(90));K(r),$(r,n)}}}break;case"textarea":ae(e,s);break;case"select":null!=(t=s.value)&&se(e,!!s.multiple,t,!1)}},Ee=cc,Ce=dc;var ed={usingClientEntryPoint:!1,Events:[yn,bn,jn,Ae,_e,cc]},td={findFiberByHostInstance:vn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},sd={bundleType:td.bundleType,version:td.version,rendererPackageName:td.rendererPackageName,rendererConfig:td.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=We(e))?null:e.stateNode},findFiberByHostInstance:td.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var rd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rd.isDisabled&&rd.supportsFiber)try{nt=rd.inject(sd),at=rd}catch(de){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ed,t.createPortal=function(e,t){var s=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Jc(t))throw Error(a(200));return function(e,t,s){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:w,key:null==r?null:""+r,children:e,containerInfo:t,implementation:s}}(e,t,null,s)},t.createRoot=function(e,t){if(!Jc(e))throw Error(a(299));var s=!1,r="",n=Kc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(s=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(n=t.onRecoverableError)),t=Uc(e,1,!1,null,0,s,0,r,n),e[pn]=t.current,Br(8===e.nodeType?e.parentNode:e),new Zc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=We(t))?null:e.stateNode},t.flushSync=function(e){return dc(e)},t.hydrate=function(e,t,s){if(!Yc(t))throw Error(a(200));return Xc(null,e,t,!0,s)},t.hydrateRoot=function(e,t,s){if(!Jc(e))throw Error(a(405));var r=null!=s&&s.hydratedSources||null,n=!1,i="",o=Kc;if(null!==s&&void 0!==s&&(!0===s.unstable_strictMode&&(n=!0),void 0!==s.identifierPrefix&&(i=s.identifierPrefix),void 0!==s.onRecoverableError&&(o=s.onRecoverableError)),t=Vc(t,null,e,1,null!=s?s:null,n,0,i,o),e[pn]=t.current,Br(e),r)for(e=0;e<r.length;e++)n=(n=(s=r[e])._getVersion)(s._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[s,n]:t.mutableSourceEagerHydrationData.push(s,n);return new Qc(t)},t.render=function(e,t,s){if(!Yc(t))throw Error(a(200));return Xc(null,e,t,!1,s)},t.unmountComponentAtNode=function(e){if(!Yc(e))throw Error(a(40));return!!e._reactRootContainer&&(dc(function(){Xc(null,null,e,!1,function(){e._reactRootContainer=null,e[pn]=null})}),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,s,r){if(!Yc(s))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return Xc(e,t,s,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},2938:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});const r=(0,s(3797).A)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]])},3216:(e,t,s)=>{"use strict";var r;s.d(t,{$P:()=>m,BV:()=>z,C5:()=>O,Ix:()=>L,V8:()=>R,Zp:()=>g,g:()=>v,jb:()=>c,qh:()=>D,x$:()=>y,zy:()=>f});var n=s(5043),a=s(1387);function i(){return i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e},i.apply(this,arguments)}const o=n.createContext(null);const l=n.createContext(null);const c=n.createContext(null);const d=n.createContext(null);const u=n.createContext({outlet:null,matches:[],isDataRoute:!1});const h=n.createContext(null);function m(e,t){let{relative:s}=void 0===t?{}:t;p()||(0,a.Oi)(!1);let{basename:r,navigator:i}=n.useContext(c),{hash:o,pathname:l,search:d}=y(e,{relative:s}),u=l;return"/"!==r&&(u="/"===l?r:(0,a.HS)([r,l])),i.createHref({pathname:u,search:d,hash:o})}function p(){return null!=n.useContext(d)}function f(){return p()||(0,a.Oi)(!1),n.useContext(d).location}function x(e){n.useContext(c).static||n.useLayoutEffect(e)}function g(){let{isDataRoute:e}=n.useContext(u);return e?function(){let{router:e}=E(A.UseNavigateStable),t=P(_.UseNavigateStable),s=n.useRef(!1);return x(()=>{s.current=!0}),n.useCallback(function(r,n){void 0===n&&(n={}),s.current&&("number"===typeof r?e.navigate(r):e.navigate(r,i({fromRouteId:t},n)))},[e,t])}():function(){p()||(0,a.Oi)(!1);let e=n.useContext(o),{basename:t,future:s,navigator:r}=n.useContext(c),{matches:i}=n.useContext(u),{pathname:l}=f(),d=JSON.stringify((0,a.yD)(i,s.v7_relativeSplatPath)),h=n.useRef(!1);return x(()=>{h.current=!0}),n.useCallback(function(s,n){if(void 0===n&&(n={}),!h.current)return;if("number"===typeof s)return void r.go(s);let i=(0,a.Gh)(s,JSON.parse(d),l,"path"===n.relative);null==e&&"/"!==t&&(i.pathname="/"===i.pathname?t:(0,a.HS)([t,i.pathname])),(n.replace?r.replace:r.push)(i,n.state,n)},[t,r,d,l,e])}()}function v(){let{matches:e}=n.useContext(u),t=e[e.length-1];return t?t.params:{}}function y(e,t){let{relative:s}=void 0===t?{}:t,{future:r}=n.useContext(c),{matches:i}=n.useContext(u),{pathname:o}=f(),l=JSON.stringify((0,a.yD)(i,r.v7_relativeSplatPath));return n.useMemo(()=>(0,a.Gh)(e,JSON.parse(l),o,"path"===s),[e,l,o,s])}function b(e,t,s,r){p()||(0,a.Oi)(!1);let{navigator:o}=n.useContext(c),{matches:l}=n.useContext(u),h=l[l.length-1],m=h?h.params:{},x=(h&&h.pathname,h?h.pathnameBase:"/");h&&h.route;let g,v=f();if(t){var y;let e="string"===typeof t?(0,a.Rr)(t):t;"/"===x||(null==(y=e.pathname)?void 0:y.startsWith(x))||(0,a.Oi)(!1),g=e}else g=v;let b=g.pathname||"/",j=b;if("/"!==x){let e=x.replace(/^\//,"").split("/");j="/"+b.replace(/^\//,"").split("/").slice(e.length).join("/")}let w=(0,a.ue)(e,{pathname:j});let N=k(w&&w.map(e=>Object.assign({},e,{params:Object.assign({},m,e.params),pathname:(0,a.HS)([x,o.encodeLocation?o.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?x:(0,a.HS)([x,o.encodeLocation?o.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),l,s,r);return t&&N?n.createElement(d.Provider,{value:{location:i({pathname:"/",search:"",hash:"",state:null,key:"default"},g),navigationType:a.rc.Pop}},N):N}function j(){let e=function(){var e;let t=n.useContext(h),s=C(_.UseRouteError),r=P(_.UseRouteError);if(void 0!==t)return t;return null==(e=s.errors)?void 0:e[r]}(),t=(0,a.pX)(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),s=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r};return n.createElement(n.Fragment,null,n.createElement("h2",null,"Unexpected Application Error!"),n.createElement("h3",{style:{fontStyle:"italic"}},t),s?n.createElement("pre",{style:i},s):null,null)}const w=n.createElement(j,null);class N extends n.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?n.createElement(u.Provider,{value:this.props.routeContext},n.createElement(h.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function S(e){let{routeContext:t,match:s,children:r}=e,a=n.useContext(o);return a&&a.static&&a.staticContext&&(s.route.errorElement||s.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=s.route.id),n.createElement(u.Provider,{value:t},r)}function k(e,t,s,r){var i;if(void 0===t&&(t=[]),void 0===s&&(s=null),void 0===r&&(r=null),null==e){var o;if(!s)return null;if(s.errors)e=s.matches;else{if(!(null!=(o=r)&&o.v7_partialHydration&&0===t.length&&!s.initialized&&s.matches.length>0))return null;e=s.matches}}let l=e,c=null==(i=s)?void 0:i.errors;if(null!=c){let e=l.findIndex(e=>e.route.id&&void 0!==(null==c?void 0:c[e.route.id]));e>=0||(0,a.Oi)(!1),l=l.slice(0,Math.min(l.length,e+1))}let d=!1,u=-1;if(s&&r&&r.v7_partialHydration)for(let n=0;n<l.length;n++){let e=l[n];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(u=n),e.route.id){let{loaderData:t,errors:r}=s,n=e.route.loader&&void 0===t[e.route.id]&&(!r||void 0===r[e.route.id]);if(e.route.lazy||n){d=!0,l=u>=0?l.slice(0,u+1):[l[0]];break}}}return l.reduceRight((e,r,a)=>{let i,o=!1,h=null,m=null;var p;s&&(i=c&&r.route.id?c[r.route.id]:void 0,h=r.route.errorElement||w,d&&(u<0&&0===a?(p="route-fallback",!1||T[p]||(T[p]=!0),o=!0,m=null):u===a&&(o=!0,m=r.route.hydrateFallbackElement||null)));let f=t.concat(l.slice(0,a+1)),x=()=>{let t;return t=i?h:o?m:r.route.Component?n.createElement(r.route.Component,null):r.route.element?r.route.element:e,n.createElement(S,{match:r,routeContext:{outlet:e,matches:f,isDataRoute:null!=s},children:t})};return s&&(r.route.ErrorBoundary||r.route.errorElement||0===a)?n.createElement(N,{location:s.location,revalidation:s.revalidation,component:h,error:i,children:x(),routeContext:{outlet:null,matches:f,isDataRoute:!0}}):x()},null)}var A=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(A||{}),_=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(_||{});function E(e){let t=n.useContext(o);return t||(0,a.Oi)(!1),t}function C(e){let t=n.useContext(l);return t||(0,a.Oi)(!1),t}function P(e){let t=function(){let e=n.useContext(u);return e||(0,a.Oi)(!1),e}(),s=t.matches[t.matches.length-1];return s.route.id||(0,a.Oi)(!1),s.route.id}const T={};const I=(e,t,s)=>{};function R(e,t){void 0===(null==e?void 0:e.v7_startTransition)&&I("v7_startTransition","React Router will begin wrapping state updates in `React.startTransition` in v7","https://reactrouter.com/v6/upgrading/future#v7_starttransition"),void 0!==(null==e?void 0:e.v7_relativeSplatPath)||t&&void 0!==t.v7_relativeSplatPath||I("v7_relativeSplatPath","Relative route resolution within Splat routes is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_relativesplatpath"),t&&(void 0===t.v7_fetcherPersist&&I("v7_fetcherPersist","The persistence behavior of fetchers is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_fetcherpersist"),void 0===t.v7_normalizeFormMethod&&I("v7_normalizeFormMethod","Casing of `formMethod` fields is being normalized to uppercase in v7","https://reactrouter.com/v6/upgrading/future#v7_normalizeformmethod"),void 0===t.v7_partialHydration&&I("v7_partialHydration","`RouterProvider` hydration behavior is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_partialhydration"),void 0===t.v7_skipActionErrorRevalidation&&I("v7_skipActionErrorRevalidation","The revalidation behavior after 4xx/5xx `action` responses is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_skipactionerrorrevalidation"))}(r||(r=s.t(n,2))).startTransition;function O(e){let{to:t,replace:s,state:r,relative:i}=e;p()||(0,a.Oi)(!1);let{future:o,static:l}=n.useContext(c),{matches:d}=n.useContext(u),{pathname:h}=f(),m=g(),x=(0,a.Gh)(t,(0,a.yD)(d,o.v7_relativeSplatPath),h,"path"===i),v=JSON.stringify(x);return n.useEffect(()=>m(JSON.parse(v),{replace:s,state:r,relative:i}),[m,v,i,s,r]),null}function D(e){(0,a.Oi)(!1)}function L(e){let{basename:t="/",children:s=null,location:r,navigationType:o=a.rc.Pop,navigator:l,static:u=!1,future:h}=e;p()&&(0,a.Oi)(!1);let m=t.replace(/^\/*/,"/"),f=n.useMemo(()=>({basename:m,navigator:l,static:u,future:i({v7_relativeSplatPath:!1},h)}),[m,h,l,u]);"string"===typeof r&&(r=(0,a.Rr)(r));let{pathname:x="/",search:g="",hash:v="",state:y=null,key:b="default"}=r,j=n.useMemo(()=>{let e=(0,a.pb)(x,m);return null==e?null:{location:{pathname:e,search:g,hash:v,state:y,key:b},navigationType:o}},[m,x,g,v,y,b,o]);return null==j?null:n.createElement(c.Provider,{value:f},n.createElement(d.Provider,{children:s,value:j}))}function z(e){let{children:t,location:s}=e;return b(M(t),s)}new Promise(()=>{});n.Component;function M(e,t){void 0===t&&(t=[]);let s=[];return n.Children.forEach(e,(e,r)=>{if(!n.isValidElement(e))return;let i=[...t,r];if(e.type===n.Fragment)return void s.push.apply(s,M(e.props.children,i));e.type!==D&&(0,a.Oi)(!1),e.props.index&&e.props.children&&(0,a.Oi)(!1);let o={id:e.props.id||i.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(o.children=M(e.props.children,i)),s.push(o)}),s}},3797:(e,t,s)=>{"use strict";s.d(t,{A:()=>l});var r=s(2555),n=s(3986),a=s(5043),i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const o=["color","size","strokeWidth","absoluteStrokeWidth","children"];var l=(e,t)=>{const s=(0,a.forwardRef)((s,l)=>{let{color:c="currentColor",size:d=24,strokeWidth:u=2,absoluteStrokeWidth:h,children:m}=s,p=(0,n.A)(s,o);return(0,a.createElement)("svg",(0,r.A)((0,r.A)({ref:l},i),{},{width:d,height:d,stroke:c,strokeWidth:h?24*Number(u)/Number(d):u,className:"lucide lucide-".concat((f=e,f.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()))},p),[...t.map(e=>{let[t,s]=e;return(0,a.createElement)(t,s)}),...(Array.isArray(m)?m:[m])||[]]);var f});return s.displayName="".concat(e),s}},3986:(e,t,s)=>{"use strict";function r(e,t){if(null==e)return{};var s,r,n=function(e,t){if(null==e)return{};var s={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;s[r]=e[r]}return s}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)s=a[r],-1===t.indexOf(s)&&{}.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}s.d(t,{A:()=>r})},4068:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});const r=(0,s(3797).A)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},4139:(e,t,s)=>{"use strict";s.d(t,{f:()=>r});const r="https://ab-pret-back.onrender.com";console.log("[CONFIG] Backend URL:",r),console.log("[CONFIG] Environment:","production")},4202:(e,t)=>{"use strict";var s=Symbol.for("react.element"),r=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),m=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},f=Object.assign,x={};function g(e,t,s){this.props=e,this.context=t,this.refs=x,this.updater=s||p}function v(){}function y(e,t,s){this.props=e,this.context=t,this.refs=x,this.updater=s||p}g.prototype.isReactComponent={},g.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},g.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=g.prototype;var b=y.prototype=new v;b.constructor=y,f(b,g.prototype),b.isPureReactComponent=!0;var j=Array.isArray,w=Object.prototype.hasOwnProperty,N={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function k(e,t,r){var n,a={},i=null,o=null;if(null!=t)for(n in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(i=""+t.key),t)w.call(t,n)&&!S.hasOwnProperty(n)&&(a[n]=t[n]);var l=arguments.length-2;if(1===l)a.children=r;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];a.children=c}if(e&&e.defaultProps)for(n in l=e.defaultProps)void 0===a[n]&&(a[n]=l[n]);return{$$typeof:s,type:e,key:i,ref:o,props:a,_owner:N.current}}function A(e){return"object"===typeof e&&null!==e&&e.$$typeof===s}var _=/\/+/g;function E(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function C(e,t,n,a,i){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l=!1;if(null===e)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case s:case r:l=!0}}if(l)return i=i(l=e),e=""===a?"."+E(l,0):a,j(i)?(n="",null!=e&&(n=e.replace(_,"$&/")+"/"),C(i,t,n,"",function(e){return e})):null!=i&&(A(i)&&(i=function(e,t){return{$$typeof:s,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(i,n+(!i.key||l&&l.key===i.key?"":(""+i.key).replace(_,"$&/")+"/")+e)),t.push(i)),1;if(l=0,a=""===a?".":a+":",j(e))for(var c=0;c<e.length;c++){var d=a+E(o=e[c],c);l+=C(o,t,n,d,i)}else if(d=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=m&&e[m]||e["@@iterator"])?e:null}(e),"function"===typeof d)for(e=d.call(e),c=0;!(o=e.next()).done;)l+=C(o=o.value,t,n,d=a+E(o,c++),i);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function P(e,t,s){if(null==e)return e;var r=[],n=0;return C(e,r,"","",function(e){return t.call(s,e,n++)}),r}function T(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var I={current:null},R={transition:null},O={ReactCurrentDispatcher:I,ReactCurrentBatchConfig:R,ReactCurrentOwner:N};function D(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:P,forEach:function(e,t,s){P(e,function(){t.apply(this,arguments)},s)},count:function(e){var t=0;return P(e,function(){t++}),t},toArray:function(e){return P(e,function(e){return e})||[]},only:function(e){if(!A(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=g,t.Fragment=n,t.Profiler=i,t.PureComponent=y,t.StrictMode=a,t.Suspense=d,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.act=D,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=f({},e.props),a=e.key,i=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(i=t.ref,o=N.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)w.call(t,c)&&!S.hasOwnProperty(c)&&(n[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)n.children=r;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];n.children=l}return{$$typeof:s,type:e.type,key:a,ref:i,props:n,_owner:o}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=k,t.createFactory=function(e){var t=k.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=A,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:T}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=R.transition;R.transition={};try{e()}finally{R.transition=t}},t.unstable_act=D,t.useCallback=function(e,t){return I.current.useCallback(e,t)},t.useContext=function(e){return I.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return I.current.useDeferredValue(e)},t.useEffect=function(e,t){return I.current.useEffect(e,t)},t.useId=function(){return I.current.useId()},t.useImperativeHandle=function(e,t,s){return I.current.useImperativeHandle(e,t,s)},t.useInsertionEffect=function(e,t){return I.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return I.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return I.current.useMemo(e,t)},t.useReducer=function(e,t,s){return I.current.useReducer(e,t,s)},t.useRef=function(e){return I.current.useRef(e)},t.useState=function(e){return I.current.useState(e)},t.useSyncExternalStore=function(e,t,s){return I.current.useSyncExternalStore(e,t,s)},t.useTransition=function(){return I.current.useTransition()},t.version="18.3.1"},4391:(e,t,s)=>{"use strict";var r=s(7950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},4445:(e,t)=>{"use strict";t.byteLength=function(e){var t=o(e),s=t[0],r=t[1];return 3*(s+r)/4-r},t.toByteArray=function(e){var t,s,a=o(e),i=a[0],l=a[1],c=new n(function(e,t,s){return 3*(t+s)/4-s}(0,i,l)),d=0,u=l>0?i-4:i;for(s=0;s<u;s+=4)t=r[e.charCodeAt(s)]<<18|r[e.charCodeAt(s+1)]<<12|r[e.charCodeAt(s+2)]<<6|r[e.charCodeAt(s+3)],c[d++]=t>>16&255,c[d++]=t>>8&255,c[d++]=255&t;2===l&&(t=r[e.charCodeAt(s)]<<2|r[e.charCodeAt(s+1)]>>4,c[d++]=255&t);1===l&&(t=r[e.charCodeAt(s)]<<10|r[e.charCodeAt(s+1)]<<4|r[e.charCodeAt(s+2)]>>2,c[d++]=t>>8&255,c[d++]=255&t);return c},t.fromByteArray=function(e){for(var t,r=e.length,n=r%3,a=[],i=16383,o=0,l=r-n;o<l;o+=i)a.push(c(e,o,o+i>l?l:o+i));1===n?(t=e[r-1],a.push(s[t>>2]+s[t<<4&63]+"==")):2===n&&(t=(e[r-2]<<8)+e[r-1],a.push(s[t>>10]+s[t>>4&63]+s[t<<2&63]+"="));return a.join("")};for(var s=[],r=[],n="undefined"!==typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0;i<64;++i)s[i]=a[i],r[a.charCodeAt(i)]=i;function o(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var s=e.indexOf("=");return-1===s&&(s=t),[s,s===t?0:4-s%4]}function l(e){return s[e>>18&63]+s[e>>12&63]+s[e>>6&63]+s[63&e]}function c(e,t,s){for(var r,n=[],a=t;a<s;a+=3)r=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),n.push(l(r));return n.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},4630:(e,t,s)=>{"use strict";s.r(t),s.d(t,{Headers:()=>i,Request:()=>o,Response:()=>l,default:()=>a,fetch:()=>n});var r=function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof s.g)return s.g;throw new Error("unable to locate global object")}();const n=r.fetch,a=r.fetch.bind(r),i=r.Headers,o=r.Request,l=r.Response},5043:(e,t,s)=>{"use strict";e.exports=s(4202)},5099:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});const r=(0,s(3797).A)("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]])},5275:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});const r=(0,s(3797).A)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])},5722:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});const r=(0,s(3797).A)("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]])},5736:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(s(7374));class a extends n.default{eq(e,t){return this.url.searchParams.append(e,"eq.".concat(t)),this}neq(e,t){return this.url.searchParams.append(e,"neq.".concat(t)),this}gt(e,t){return this.url.searchParams.append(e,"gt.".concat(t)),this}gte(e,t){return this.url.searchParams.append(e,"gte.".concat(t)),this}lt(e,t){return this.url.searchParams.append(e,"lt.".concat(t)),this}lte(e,t){return this.url.searchParams.append(e,"lte.".concat(t)),this}like(e,t){return this.url.searchParams.append(e,"like.".concat(t)),this}likeAllOf(e,t){return this.url.searchParams.append(e,"like(all).{".concat(t.join(","),"}")),this}likeAnyOf(e,t){return this.url.searchParams.append(e,"like(any).{".concat(t.join(","),"}")),this}ilike(e,t){return this.url.searchParams.append(e,"ilike.".concat(t)),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,"ilike(all).{".concat(t.join(","),"}")),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,"ilike(any).{".concat(t.join(","),"}")),this}is(e,t){return this.url.searchParams.append(e,"is.".concat(t)),this}in(e,t){const s=Array.from(new Set(t)).map(e=>"string"===typeof e&&new RegExp("[,()]").test(e)?'"'.concat(e,'"'):"".concat(e)).join(",");return this.url.searchParams.append(e,"in.(".concat(s,")")),this}contains(e,t){return"string"===typeof t?this.url.searchParams.append(e,"cs.".concat(t)):Array.isArray(t)?this.url.searchParams.append(e,"cs.{".concat(t.join(","),"}")):this.url.searchParams.append(e,"cs.".concat(JSON.stringify(t))),this}containedBy(e,t){return"string"===typeof t?this.url.searchParams.append(e,"cd.".concat(t)):Array.isArray(t)?this.url.searchParams.append(e,"cd.{".concat(t.join(","),"}")):this.url.searchParams.append(e,"cd.".concat(JSON.stringify(t))),this}rangeGt(e,t){return this.url.searchParams.append(e,"sr.".concat(t)),this}rangeGte(e,t){return this.url.searchParams.append(e,"nxl.".concat(t)),this}rangeLt(e,t){return this.url.searchParams.append(e,"sl.".concat(t)),this}rangeLte(e,t){return this.url.searchParams.append(e,"nxr.".concat(t)),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,"adj.".concat(t)),this}overlaps(e,t){return"string"===typeof t?this.url.searchParams.append(e,"ov.".concat(t)):this.url.searchParams.append(e,"ov.{".concat(t.join(","),"}")),this}textSearch(e,t){let{config:s,type:r}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n="";"plain"===r?n="pl":"phrase"===r?n="ph":"websearch"===r&&(n="w");const a=void 0===s?"":"(".concat(s,")");return this.url.searchParams.append(e,"".concat(n,"fts").concat(a,".").concat(t)),this}match(e){return Object.entries(e).forEach(e=>{let[t,s]=e;this.url.searchParams.append(t,"eq.".concat(s))}),this}not(e,t,s){return this.url.searchParams.append(e,"not.".concat(t,".").concat(s)),this}or(e){let{foreignTable:t,referencedTable:s=t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=s?"".concat(s,".or"):"or";return this.url.searchParams.append(r,"(".concat(e,")")),this}filter(e,t,s){return this.url.searchParams.append(e,"".concat(t,".").concat(s)),this}}t.default=a},6047:(e,t,s)=>{"use strict";s.d(t,{DT:()=>a,FY:()=>i,Yq:()=>n,vv:()=>r});const r=e=>new Intl.NumberFormat("fr-BJ",{style:"currency",currency:"XOF",minimumFractionDigits:0}).format(e),n=e=>new Intl.DateTimeFormat("fr-BJ",{year:"numeric",month:"long",day:"numeric"}).format(new Date(e)),a=e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e),i=e=>/^(\+229|229)?[0-9]{8}$/.test(e.replace(/\s/g,""))},6197:(e,t,s)=>{"use strict";s.d(t,{ND:()=>rs,LC:()=>ns});class r extends Error{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"FunctionsError",s=arguments.length>2?arguments[2]:void 0;super(e),this.name=t,this.context=s}}class n extends r{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class a extends r{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class i extends r{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var o;!function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"}(o||(o={}));var l=function(e,t,s,r){return new(s||(s=Promise))(function(n,a){function i(e){try{l(r.next(e))}catch(t){a(t)}}function o(e){try{l(r.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(i,o)}l((r=r.apply(e,t||[])).next())})};class c{constructor(e){let{headers:t={},customFetch:r,region:n=o.Any}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.url=e,this.headers=t,this.region=n,this.fetch=(e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Promise.resolve().then(s.bind(s,4630)).then(e=>{let{default:s}=e;return s(...t)})}:fetch),function(){return t(...arguments)}})(r)}setAuth(e){this.headers.Authorization="Bearer ".concat(e)}invoke(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var s;return l(this,void 0,void 0,function*(){try{const{headers:r,method:o,body:l}=t;let c={},{region:d}=t;d||(d=this.region);const u=new URL("".concat(this.url,"/").concat(e));let h;d&&"any"!==d&&(c["x-region"]=d,u.searchParams.set("forceFunctionRegion",d)),l&&(r&&!Object.prototype.hasOwnProperty.call(r,"Content-Type")||!r)&&("undefined"!==typeof Blob&&l instanceof Blob||l instanceof ArrayBuffer?(c["Content-Type"]="application/octet-stream",h=l):"string"===typeof l?(c["Content-Type"]="text/plain",h=l):"undefined"!==typeof FormData&&l instanceof FormData?h=l:(c["Content-Type"]="application/json",h=JSON.stringify(l)));const m=yield this.fetch(u.toString(),{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},c),this.headers),r),body:h}).catch(e=>{throw new n(e)}),p=m.headers.get("x-relay-error");if(p&&"true"===p)throw new a(m);if(!m.ok)throw new i(m);let f,x=(null!==(s=m.headers.get("Content-Type"))&&void 0!==s?s:"text/plain").split(";")[0].trim();return f="application/json"===x?yield m.json():"application/octet-stream"===x?yield m.blob():"text/event-stream"===x?m:"multipart/form-data"===x?yield m.formData():yield m.text(),{data:f,error:null,response:m}}catch(r){return{data:null,error:r,response:r instanceof i||r instanceof a?r.context:void 0}}})}}var d=s(7980);const{PostgrestClient:u,PostgrestQueryBuilder:h,PostgrestFilterBuilder:m,PostgrestTransformBuilder:p,PostgrestBuilder:f,PostgrestError:x}=d;var g=s(2285);const v=class{static detectEnvironment(){var e;if("undefined"!==typeof WebSocket)return{type:"native",constructor:WebSocket};if("undefined"!==typeof globalThis&&"undefined"!==typeof globalThis.WebSocket)return{type:"native",constructor:globalThis.WebSocket};if("undefined"!==typeof s.g&&"undefined"!==typeof s.g.WebSocket)return{type:"native",constructor:s.g.WebSocket};if("undefined"!==typeof globalThis&&"undefined"!==typeof globalThis.WebSocketPair&&"undefined"===typeof globalThis.WebSocket)return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if("undefined"!==typeof globalThis&&globalThis.EdgeRuntime||"undefined"!==typeof navigator&&(null===(e=navigator.userAgent)||void 0===e?void 0:e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if("undefined"!==typeof g){const e=g.versions;if(e&&e.node){const t=e.node,s=parseInt(t.replace(/^v/,"").split(".")[0]);return s>=22?"undefined"!==typeof globalThis.WebSocket?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:"Node.js ".concat(s," detected but native WebSocket not found."),workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:"Node.js ".concat(s," detected without native WebSocket support."),workaround:'For Node.js < 22, install "ws" package and provide it via the transport option:\nimport ws from "ws"\nnew RealtimeClient(url, { transport: ws })'}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+="\n\nSuggested solution: ".concat(e.workaround)),new Error(t)}static createWebSocket(e,t){return new(this.getWebSocketConstructor())(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return"native"===e.type||"ws"===e.type}catch(e){return!1}}},y="realtime-js/".concat("2.15.5"),b=1e4;var j,w,N,S,k,A;!function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"}(j||(j={})),function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"}(w||(w={})),function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"}(N||(N={})),function(e){e.websocket="websocket"}(S||(S={})),function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"}(k||(k={}));class _{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t("string"===typeof e?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),s=new TextDecoder;return this._decodeBroadcast(e,t,s)}_decodeBroadcast(e,t,s){const r=t.getUint8(1),n=t.getUint8(2);let a=this.HEADER_LENGTH+2;const i=s.decode(e.slice(a,a+r));a+=r;const o=s.decode(e.slice(a,a+n));a+=n;return{ref:null,topic:i,event:o,payload:JSON.parse(s.decode(e.slice(a,e.byteLength)))}}}class E{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}!function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"}(A||(A={}));const C=function(e,t){var s;const r=null!==(s=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).skipTypes)&&void 0!==s?s:[];return Object.keys(t).reduce((s,n)=>(s[n]=P(n,e,t,r),s),{})},P=(e,t,s,r)=>{const n=t.find(t=>t.name===e),a=null===n||void 0===n?void 0:n.type,i=s[e];return a&&!r.includes(a)?T(a,i):I(i)},T=(e,t)=>{if("_"===e.charAt(0)){const s=e.slice(1,e.length);return L(t,s)}switch(e){case A.bool:return R(t);case A.float4:case A.float8:case A.int2:case A.int4:case A.int8:case A.numeric:case A.oid:return O(t);case A.json:case A.jsonb:return D(t);case A.timestamp:return z(t);case A.abstime:case A.date:case A.daterange:case A.int4range:case A.int8range:case A.money:case A.reltime:case A.text:case A.time:case A.timestamptz:case A.timetz:case A.tsrange:case A.tstzrange:default:return I(t)}},I=e=>e,R=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},O=e=>{if("string"===typeof e){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},D=e=>{if("string"===typeof e)try{return JSON.parse(e)}catch(t){return console.log("JSON parse error: ".concat(t)),e}return e},L=(e,t)=>{if("string"!==typeof e)return e;const s=e.length-1,r=e[s];if("{"===e[0]&&"}"===r){let r;const a=e.slice(1,s);try{r=JSON.parse("["+a+"]")}catch(n){r=a?a.split(","):[]}return r.map(e=>T(t,e))}return e},z=e=>"string"===typeof e?e.replace(" ","T"):e,M=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class F{constructor(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:b;this.channel=e,this.event=t,this.payload=s,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var s;return this._hasReceived(e)&&t(null===(s=this.receivedResp)||void 0===s?void 0:s.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);this.channel._on(this.refEvent,{},e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)}),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive(e){let{status:t,response:s}=e;this.recHooks.filter(e=>e.status===t).forEach(e=>e.callback(s))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var U,B,V,q;!function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"}(U||(U={}));class H{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(null===t||void 0===t?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},e=>{const{onJoin:t,onLeave:s,onSync:r}=this.caller;this.joinRef=this.channel._joinRef(),this.state=H.syncState(this.state,e,t,s),this.pendingDiffs.forEach(e=>{this.state=H.syncDiff(this.state,e,t,s)}),this.pendingDiffs=[],r()}),this.channel._on(s.diff,{},e=>{const{onJoin:t,onLeave:s,onSync:r}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(e):(this.state=H.syncDiff(this.state,e,t,s),r())}),this.onJoin((e,t,s)=>{this.channel._trigger("presence",{event:"join",key:e,currentPresences:t,newPresences:s})}),this.onLeave((e,t,s)=>{this.channel._trigger("presence",{event:"leave",key:e,currentPresences:t,leftPresences:s})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,s,r){const n=this.cloneDeep(e),a=this.transformState(t),i={},o={};return this.map(n,(e,t)=>{a[e]||(o[e]=t)}),this.map(a,(e,t)=>{const s=n[e];if(s){const r=t.map(e=>e.presence_ref),n=s.map(e=>e.presence_ref),a=t.filter(e=>n.indexOf(e.presence_ref)<0),l=s.filter(e=>r.indexOf(e.presence_ref)<0);a.length>0&&(i[e]=a),l.length>0&&(o[e]=l)}else i[e]=t}),this.syncDiff(n,{joins:i,leaves:o},s,r)}static syncDiff(e,t,s,r){const{joins:n,leaves:a}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return s||(s=()=>{}),r||(r=()=>{}),this.map(n,(t,r)=>{var n;const a=null!==(n=e[t])&&void 0!==n?n:[];if(e[t]=this.cloneDeep(r),a.length>0){const s=e[t].map(e=>e.presence_ref),r=a.filter(e=>s.indexOf(e.presence_ref)<0);e[t].unshift(...r)}s(t,a,r)}),this.map(a,(t,s)=>{let n=e[t];if(!n)return;const a=s.map(e=>e.presence_ref);n=n.filter(e=>a.indexOf(e.presence_ref)<0),e[t]=n,r(t,n,s),0===n.length&&delete e[t]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(s=>t(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,s)=>{const r=e[s];return t[s]="metas"in r?r.metas.map(e=>(e.presence_ref=e.phx_ref,delete e.phx_ref,delete e.phx_ref_prev,e)):r,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}!function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"}(B||(B={})),function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"}(V||(V={})),function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"}(q||(q={}));class W{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}},s=arguments.length>2?arguments[2]:void 0;this.topic=e,this.params=t,this.socket=s,this.bindings={},this.state=w.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new F(this,N.join,this.params,this.timeout),this.rejoinTimer=new E(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=w.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(e=>e.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel","close ".concat(this.topic," ").concat(this._joinRef())),this.state=w.closed,this.socket._remove(this)}),this._onError(e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel","error ".concat(this.topic),e),this.state=w.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel","timeout ".concat(this.topic),this.joinPush.timeout),this.state=w.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel","error ".concat(this.topic),e),this.state=w.errored,this.rejoinTimer.scheduleTimeout())}),this._on(N.reply,{},(e,t)=>{this._trigger(this._replyEventName(t),e)}),this.presence=new H(this),this.broadcastEndpointURL=M(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.timeout;var s,r,n;if(this.socket.isConnected()||this.socket.connect(),this.state==w.closed){const{config:{broadcast:a,presence:i,private:o}}=this.params,l=null!==(r=null===(s=this.bindings.postgres_changes)||void 0===s?void 0:s.map(e=>e.filter))&&void 0!==r?r:[],c=!!this.bindings[V.PRESENCE]&&this.bindings[V.PRESENCE].length>0||!0===(null===(n=this.params.config.presence)||void 0===n?void 0:n.enabled),d={},u={broadcast:a,presence:Object.assign(Object.assign({},i),{enabled:c}),postgres_changes:l,private:o};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this._onError(t=>null===e||void 0===e?void 0:e(q.CHANNEL_ERROR,t)),this._onClose(()=>null===e||void 0===e?void 0:e(q.CLOSED)),this.updateJoinPayload(Object.assign({config:u},d)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async t=>{let{postgres_changes:s}=t;var r;if(this.socket.setAuth(),void 0!==s){const t=this.bindings.postgres_changes,n=null!==(r=null===t||void 0===t?void 0:t.length)&&void 0!==r?r:0,a=[];for(let r=0;r<n;r++){const n=t[r],{filter:{event:i,schema:o,table:l,filter:c}}=n,d=s&&s[r];if(!d||d.event!==i||d.schema!==o||d.table!==l||d.filter!==c)return this.unsubscribe(),this.state=w.errored,void(null===e||void 0===e||e(q.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes")));a.push(Object.assign(Object.assign({},n),{id:d.id}))}return this.bindings.postgres_changes=a,void(e&&e(q.SUBSCRIBED))}null===e||void 0===e||e(q.SUBSCRIBED)}).receive("error",t=>{this.state=w.errored,null===e||void 0===e||e(q.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(t).join(", ")||"error")))}).receive("timeout",()=>{null===e||void 0===e||e(q.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return await this.send({type:"presence",event:"untrack"},e)}on(e,t,s){return this.state===w.joined&&e===V.PRESENCE&&(this.socket.log("channel","resubscribe to ".concat(this.topic," due to change in presence callbacks on joined channel")),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,s)}async send(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var s,r;if(this._canPush()||"broadcast"!==e.type)return new Promise(s=>{var r,n,a;const i=this._push(e.type,e,t.timeout||this.timeout);"broadcast"!==e.type||(null===(a=null===(n=null===(r=this.params)||void 0===r?void 0:r.config)||void 0===n?void 0:n.broadcast)||void 0===a?void 0:a.ack)||s("ok"),i.receive("ok",()=>s("ok")),i.receive("error",()=>s("error")),i.receive("timeout",()=>s("timed out"))});{const{event:a,payload:i}=e,o={method:"POST",headers:{Authorization:this.socket.accessTokenValue?"Bearer ".concat(this.socket.accessTokenValue):"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:i,private:this.private}]})};try{const e=await this._fetchWithTimeout(this.broadcastEndpointURL,o,null!==(s=t.timeout)&&void 0!==s?s:this.timeout);return await(null===(r=e.body)||void 0===r?void 0:r.cancel()),e.ok?"ok":"error"}catch(n){return"AbortError"===n.name?"timed out":"error"}}}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this.state=w.leaving;const t=()=>{this.socket.log("channel","leave ".concat(this.topic)),this._trigger(N.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(r=>{s=new F(this,N.leave,{},e),s.receive("ok",()=>{t(),r("ok")}).receive("timeout",()=>{t(),r("timed out")}).receive("error",()=>{r("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{null===s||void 0===s||s.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=w.closed,this.bindings={}}async _fetchWithTimeout(e,t,s){const r=new AbortController,n=setTimeout(()=>r.abort(),s),a=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:r.signal}));return clearTimeout(n),a}_push(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.timeout;if(!this.joinedOnce)throw"tried to push '".concat(e,"' to '").concat(this.topic,"' before joining. Use channel.subscribe() before pushing events");let r=new F(this,e,t,s);return this._canPush()?r.send():this._addToPushBuffer(r),r}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>100){const e=this.pushBuffer.shift();e&&(e.destroy(),this.socket.log("channel","discarded push due to buffer overflow: ".concat(e.event),e.payload))}}_onMessage(e,t,s){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,s){var r,n;const a=e.toLocaleLowerCase(),{close:i,error:o,leave:l,join:c}=N;if(s&&[i,o,l,c].indexOf(a)>=0&&s!==this._joinRef())return;let d=this._onMessage(a,t,s);if(t&&!d)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?null===(r=this.bindings.postgres_changes)||void 0===r||r.filter(e=>{var t,s,r;return"*"===(null===(t=e.filter)||void 0===t?void 0:t.event)||(null===(r=null===(s=e.filter)||void 0===s?void 0:s.event)||void 0===r?void 0:r.toLocaleLowerCase())===a}).map(e=>e.callback(d,s)):null===(n=this.bindings[a])||void 0===n||n.filter(e=>{var s,r,n,i,o,l;if(["broadcast","presence","postgres_changes"].includes(a)){if("id"in e){const a=e.id,i=null===(s=e.filter)||void 0===s?void 0:s.event;return a&&(null===(r=t.ids)||void 0===r?void 0:r.includes(a))&&("*"===i||(null===i||void 0===i?void 0:i.toLocaleLowerCase())===(null===(n=t.data)||void 0===n?void 0:n.type.toLocaleLowerCase()))}{const s=null===(o=null===(i=null===e||void 0===e?void 0:e.filter)||void 0===i?void 0:i.event)||void 0===o?void 0:o.toLocaleLowerCase();return"*"===s||s===(null===(l=null===t||void 0===t?void 0:t.event)||void 0===l?void 0:l.toLocaleLowerCase())}}return e.type.toLocaleLowerCase()===a}).map(e=>{if("object"===typeof d&&"ids"in d){const e=d.data,{schema:t,table:s,commit_timestamp:r,type:n,errors:a}=e,i={schema:t,table:s,commit_timestamp:r,eventType:n,new:{},old:{},errors:a};d=Object.assign(Object.assign({},i),this._getPayloadRecords(e))}e.callback(d,s)})}_isClosed(){return this.state===w.closed}_isJoined(){return this.state===w.joined}_isJoining(){return this.state===w.joining}_isLeaving(){return this.state===w.leaving}_replyEventName(e){return"chan_reply_".concat(e)}_on(e,t,s){const r=e.toLocaleLowerCase(),n={type:r,filter:t,callback:s};return this.bindings[r]?this.bindings[r].push(n):this.bindings[r]=[n],this}_off(e,t){const s=e.toLocaleLowerCase();return this.bindings[s]&&(this.bindings[s]=this.bindings[s].filter(e=>{var r;return!((null===(r=e.type)||void 0===r?void 0:r.toLocaleLowerCase())===s&&W.isEqual(e.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const s in e)if(e[s]!==t[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(N.close,{},e)}_onError(e){this._on(N.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=w.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return"INSERT"!==e.type&&"UPDATE"!==e.type||(t.new=C(e.columns,e.record)),"UPDATE"!==e.type&&"DELETE"!==e.type||(t.old=C(e.columns,e.old_record)),t}}const G=()=>{},K=25e3,Z=10,Q=100,J=[1e3,2e3,5e3,1e4];class Y{constructor(e,t){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=b,this.transport=null,this.heartbeatIntervalMs=K,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=G,this.ref=0,this.reconnectTimer=null,this.logger=G,this.conn=null,this.sendBuffer=[],this.serializer=new _,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Promise.resolve().then(s.bind(s,4630)).then(e=>{let{default:s}=e;return s(...t)}).catch(e=>{throw new Error("Failed to load @supabase/node-fetch: ".concat(e.message,". ")+"This is required for HTTP requests in Node.js environments without native fetch.")})}:fetch),function(){return t(...arguments)}},!(null===(r=null===t||void 0===t?void 0:t.params)||void 0===r?void 0:r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint="".concat(e,"/").concat(S.websocket),this.httpEndpoint=M(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(null===t||void 0===t?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||null!==this.conn&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=v.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;if(t.includes("Node.js"))throw new Error("".concat(t,"\n\n")+'To use Realtime in Node.js, you need to provide a WebSocket implementation:\n\nOption 1: Use Node.js 22+ which has native WebSocket support\nOption 2: Install and provide the "ws" package:\n\n  npm install ws\n\n  import ws from "ws"\n  const client = new RealtimeClient(url, {\n    ...options,\n    transport: ws\n  })');throw new Error("WebSocket not available: ".concat(t))}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:"1.0.0"}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const s=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(s),this._setConnectionState("disconnected")},e?this.conn.close(e,null!==t&&void 0!==t?t:""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return 0===this.channels.length&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(e=>e.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,s){this.logger(e,t,s)}connectionState(){switch(this.conn&&this.conn.readyState){case j.connecting:return k.Connecting;case j.open:return k.Open;case j.closing:return k.Closing;default:return k.Closed}}isConnected(){return this.connectionState()===k.Open}isConnecting(){return"connecting"===this._connectionState}isDisconnecting(){return"disconnecting"===this._connectionState}channel(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}};const s="realtime:".concat(e),r=this.getChannels().find(e=>e.topic===s);if(r)return r;{const s=new W("realtime:".concat(e),t,this);return this.channels.push(s),s}}push(e){const{topic:t,event:s,payload:r,ref:n}=e,a=()=>{this.encode(e,e=>{var t;null===(t=this.conn)||void 0===t||t.send(e)})};this.log("push","".concat(t," ").concat(s," (").concat(n,")"),r),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(t){this.log("error","error in heartbeat callback",t)}return this._wasManualDisconnect=!1,null===(e=this.conn)||void 0===e||e.close(1e3,"heartbeat timeout"),void setTimeout(()=>{var e;this.isConnected()||null===(e=this.reconnectTimer)||void 0===e||e.scheduleTimeout()},Q)}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(t){this.log("error","error in heartbeat callback",t)}this._setAuthSafely("heartbeat")}else try{this.heartbeatCallback("disconnected")}catch(t){this.log("error","error in heartbeat callback",t)}}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(t=>t.topic===e&&(t._isJoined()||t._isJoining()));t&&(this.log("transport",'leaving duplicate topic "'.concat(e,'"')),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,e=>{if("phoenix"===e.topic&&"phx_reply"===e.event)try{this.heartbeatCallback("ok"===e.payload.status?"ok":"error")}catch(o){this.log("error","error in heartbeat callback",o)}e.ref&&e.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:t,event:s,payload:r,ref:n}=e,a=n?"(".concat(n,")"):"",i=r.status||"";this.log("receive","".concat(i," ").concat(t," ").concat(s," ").concat(a).trim(),r),this.channels.filter(e=>e._isMember(t)).forEach(e=>e._trigger(s,r,n)),this._triggerStateCallbacks("message",e)})}_clearTimer(e){var t;"heartbeat"===e&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):"reconnect"===e&&(null===(t=this.reconnectTimer)||void 0===t||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport","connected to ".concat(this.endpointURL())),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker","starting worker for from ".concat(this.workerUrl)):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this.workerRef.terminate()},this.workerRef.onmessage=e=>{"keepAlive"===e.data.event&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||null===(t=this.reconnectTimer)||void 0===t||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport","".concat(e)),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(N.error))}_appendParams(e,t){if(0===Object.keys(t).length)return e;const s=e.match(/\?/)?"&":"?",r=new URLSearchParams(t);return"".concat(e).concat(s).concat(r)}_workerObjectUrl(e){let t;if(e)t=e;else{const e=new Blob(['\n  addEventListener("message", (e) => {\n    if (e.data.event === "start") {\n      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);\n    }\n  });'],{type:"application/javascript"});t=URL.createObjectURL(e)}return t}_setConnectionState(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._connectionState=e,"connecting"===e?this._wasManualDisconnect=!1:"disconnecting"===e&&(this._wasManualDisconnect=t)}async _performAuth(){let e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e=t||(this.accessToken?await this.accessToken():this.accessTokenValue),this.accessTokenValue!=e&&(this.accessTokenValue=e,this.channels.forEach(t=>{const s={access_token:e,version:y};e&&t.updateJoinPayload(s),t.joinedOnce&&t._isJoined()&&t._push(N.access_token,{access_token:e})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"general";this.setAuth().catch(t=>{this.log("error","error setting auth in ".concat(e),t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(s=>{try{s(t)}catch(r){this.log("error","error in ".concat(e," callback"),r)}})}catch(s){this.log("error","error triggering ".concat(e," callbacks"),s)}}_setupReconnectionTimer(){this.reconnectTimer=new E(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Z)},this.reconnectAfterMs)}_initializeOptions(e){var t,s,r,n,a,i,o,l,c;if(this.transport=null!==(t=null===e||void 0===e?void 0:e.transport)&&void 0!==t?t:null,this.timeout=null!==(s=null===e||void 0===e?void 0:e.timeout)&&void 0!==s?s:b,this.heartbeatIntervalMs=null!==(r=null===e||void 0===e?void 0:e.heartbeatIntervalMs)&&void 0!==r?r:K,this.worker=null!==(n=null===e||void 0===e?void 0:e.worker)&&void 0!==n&&n,this.accessToken=null!==(a=null===e||void 0===e?void 0:e.accessToken)&&void 0!==a?a:null,this.heartbeatCallback=null!==(i=null===e||void 0===e?void 0:e.heartbeatCallback)&&void 0!==i?i:G,(null===e||void 0===e?void 0:e.params)&&(this.params=e.params),(null===e||void 0===e?void 0:e.logger)&&(this.logger=e.logger),((null===e||void 0===e?void 0:e.logLevel)||(null===e||void 0===e?void 0:e.log_level))&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=null!==(o=null===e||void 0===e?void 0:e.reconnectAfterMs)&&void 0!==o?o:e=>J[e-1]||1e4,this.encode=null!==(l=null===e||void 0===e?void 0:e.encode)&&void 0!==l?l:(e,t)=>t(JSON.stringify(e)),this.decode=null!==(c=null===e||void 0===e?void 0:e.decode)&&void 0!==c?c:this.serializer.decode.bind(this.serializer),this.worker){if("undefined"!==typeof window&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=null===e||void 0===e?void 0:e.workerUrl}}}class $ extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function X(e){return"object"===typeof e&&null!==e&&"__isStorageError"in e}class ee extends ${constructor(e,t,s){super(e),this.name="StorageApiError",this.status=t,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class te extends ${constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var se=function(e,t,s,r){return new(s||(s=Promise))(function(n,a){function i(e){try{l(r.next(e))}catch(t){a(t)}}function o(e){try{l(r.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(i,o)}l((r=r.apply(e,t||[])).next())})};const re=e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Promise.resolve().then(s.bind(s,4630)).then(e=>{let{default:s}=e;return s(...t)})}:fetch),function(){return t(...arguments)}},ne=e=>{if(Array.isArray(e))return e.map(e=>ne(e));if("function"===typeof e||e!==Object(e))return e;const t={};return Object.entries(e).forEach(e=>{let[s,r]=e;const n=s.replace(/([-_][a-z])/gi,e=>e.toUpperCase().replace(/[-_]/g,""));t[n]=ne(r)}),t};var ae=function(e,t,s,r){return new(s||(s=Promise))(function(n,a){function i(e){try{l(r.next(e))}catch(t){a(t)}}function o(e){try{l(r.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(i,o)}l((r=r.apply(e,t||[])).next())})};const ie=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),oe=(e,t,r)=>ae(void 0,void 0,void 0,function*(){const n=yield se(void 0,void 0,void 0,function*(){return"undefined"===typeof Response?(yield Promise.resolve().then(s.bind(s,4630))).Response:Response});e instanceof n&&!(null===r||void 0===r?void 0:r.noResolveJson)?e.json().then(s=>{const r=e.status||500,n=(null===s||void 0===s?void 0:s.statusCode)||r+"";t(new ee(ie(s),r,n))}).catch(e=>{t(new te(ie(e),e))}):t(new te(ie(e),e))}),le=(e,t,s,r)=>{const n={method:e,headers:(null===t||void 0===t?void 0:t.headers)||{}};return"GET"!==e&&r?((e=>{if("object"!==typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)})(r)?(n.headers=Object.assign({"Content-Type":"application/json"},null===t||void 0===t?void 0:t.headers),n.body=JSON.stringify(r)):n.body=r,(null===t||void 0===t?void 0:t.duplex)&&(n.duplex=t.duplex),Object.assign(Object.assign({},n),s)):n};function ce(e,t,s,r,n,a){return ae(this,void 0,void 0,function*(){return new Promise((i,o)=>{e(s,le(t,r,n,a)).then(e=>{if(!e.ok)throw e;return(null===r||void 0===r?void 0:r.noResolveJson)?e:e.json()}).then(e=>i(e)).catch(e=>oe(e,o,r))})})}function de(e,t,s,r){return ae(this,void 0,void 0,function*(){return ce(e,"GET",t,s,r)})}function ue(e,t,s,r,n){return ae(this,void 0,void 0,function*(){return ce(e,"POST",t,r,n,s)})}function he(e,t,s,r,n){return ae(this,void 0,void 0,function*(){return ce(e,"PUT",t,r,n,s)})}function me(e,t,s,r,n){return ae(this,void 0,void 0,function*(){return ce(e,"DELETE",t,r,n,s)})}var pe=s(6382).hp,fe=function(e,t,s,r){return new(s||(s=Promise))(function(n,a){function i(e){try{l(r.next(e))}catch(t){a(t)}}function o(e){try{l(r.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(i,o)}l((r=r.apply(e,t||[])).next())})};const xe={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},ge={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class ve{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=s,this.fetch=re(r)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,t,s,r){return fe(this,void 0,void 0,function*(){try{let n;const a=Object.assign(Object.assign({},ge),r);let i=Object.assign(Object.assign({},this.headers),"POST"===e&&{"x-upsert":String(a.upsert)});const o=a.metadata;"undefined"!==typeof Blob&&s instanceof Blob?(n=new FormData,n.append("cacheControl",a.cacheControl),o&&n.append("metadata",this.encodeMetadata(o)),n.append("",s)):"undefined"!==typeof FormData&&s instanceof FormData?(n=s,n.append("cacheControl",a.cacheControl),o&&n.append("metadata",this.encodeMetadata(o))):(n=s,i["cache-control"]="max-age=".concat(a.cacheControl),i["content-type"]=a.contentType,o&&(i["x-metadata"]=this.toBase64(this.encodeMetadata(o)))),(null===r||void 0===r?void 0:r.headers)&&(i=Object.assign(Object.assign({},i),r.headers));const l=this._removeEmptyFolders(t),c=this._getFinalPath(l),d=yield("PUT"==e?he:ue)(this.fetch,"".concat(this.url,"/object/").concat(c),n,Object.assign({headers:i},(null===a||void 0===a?void 0:a.duplex)?{duplex:a.duplex}:{}));return{data:{path:l,id:d.Id,fullPath:d.Key},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(X(n))return{data:null,error:n};throw n}})}upload(e,t,s){return fe(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,s)})}uploadToSignedUrl(e,t,s,r){return fe(this,void 0,void 0,function*(){const n=this._removeEmptyFolders(e),a=this._getFinalPath(n),i=new URL(this.url+"/object/upload/sign/".concat(a));i.searchParams.set("token",t);try{let e;const t=Object.assign({upsert:ge.upsert},r),a=Object.assign(Object.assign({},this.headers),{"x-upsert":String(t.upsert)});"undefined"!==typeof Blob&&s instanceof Blob?(e=new FormData,e.append("cacheControl",t.cacheControl),e.append("",s)):"undefined"!==typeof FormData&&s instanceof FormData?(e=s,e.append("cacheControl",t.cacheControl)):(e=s,a["cache-control"]="max-age=".concat(t.cacheControl),a["content-type"]=t.contentType);return{data:{path:n,fullPath:(yield he(this.fetch,i.toString(),e,{headers:a})).Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(X(o))return{data:null,error:o};throw o}})}createSignedUploadUrl(e,t){return fe(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e);const r=Object.assign({},this.headers);(null===t||void 0===t?void 0:t.upsert)&&(r["x-upsert"]="true");const n=yield ue(this.fetch,"".concat(this.url,"/object/upload/sign/").concat(s),{},{headers:r}),a=new URL(this.url+n.url),i=a.searchParams.get("token");if(!i)throw new $("No token returned by API");return{data:{signedUrl:a.toString(),path:e,token:i},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(X(s))return{data:null,error:s};throw s}})}update(e,t,s){return fe(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,s)})}move(e,t,s){return fe(this,void 0,void 0,function*(){try{return{data:yield ue(this.fetch,"".concat(this.url,"/object/move"),{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null===s||void 0===s?void 0:s.destinationBucket},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(X(r))return{data:null,error:r};throw r}})}copy(e,t,s){return fe(this,void 0,void 0,function*(){try{return{data:{path:(yield ue(this.fetch,"".concat(this.url,"/object/copy"),{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null===s||void 0===s?void 0:s.destinationBucket},{headers:this.headers})).Key},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(X(r))return{data:null,error:r};throw r}})}createSignedUrl(e,t,s){return fe(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e),n=yield ue(this.fetch,"".concat(this.url,"/object/sign/").concat(r),Object.assign({expiresIn:t},(null===s||void 0===s?void 0:s.transform)?{transform:s.transform}:{}),{headers:this.headers});const a=(null===s||void 0===s?void 0:s.download)?"&download=".concat(!0===s.download?"":s.download):"";return n={signedUrl:encodeURI("".concat(this.url).concat(n.signedURL).concat(a))},{data:n,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(X(r))return{data:null,error:r};throw r}})}createSignedUrls(e,t,s){return fe(this,void 0,void 0,function*(){try{const r=yield ue(this.fetch,"".concat(this.url,"/object/sign/").concat(this.bucketId),{expiresIn:t,paths:e},{headers:this.headers}),n=(null===s||void 0===s?void 0:s.download)?"&download=".concat(!0===s.download?"":s.download):"";return{data:r.map(e=>Object.assign(Object.assign({},e),{signedUrl:e.signedURL?encodeURI("".concat(this.url).concat(e.signedURL).concat(n)):null})),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(X(r))return{data:null,error:r};throw r}})}download(e,t){return fe(this,void 0,void 0,function*(){const s="undefined"!==typeof(null===t||void 0===t?void 0:t.transform)?"render/image/authenticated":"object",r=this.transformOptsToQueryString((null===t||void 0===t?void 0:t.transform)||{}),n=r?"?".concat(r):"";try{const t=this._getFinalPath(e),r=yield de(this.fetch,"".concat(this.url,"/").concat(s,"/").concat(t).concat(n),{headers:this.headers,noResolveJson:!0});return{data:yield r.blob(),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(X(a))return{data:null,error:a};throw a}})}info(e){return fe(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const e=yield de(this.fetch,"".concat(this.url,"/object/info/").concat(t),{headers:this.headers});return{data:ne(e),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(X(s))return{data:null,error:s};throw s}})}exists(e){return fe(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield function(e,t,s,r){return ae(this,void 0,void 0,function*(){return ce(e,"HEAD",t,Object.assign(Object.assign({},s),{noResolveJson:!0}),r)})}(this.fetch,"".concat(this.url,"/object/").concat(t),{headers:this.headers}),{data:!0,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(X(s)&&s instanceof te){const e=s.originalError;if([400,404].includes(null===e||void 0===e?void 0:e.status))return{data:!1,error:s}}throw s}})}getPublicUrl(e,t){const s=this._getFinalPath(e),r=[],n=(null===t||void 0===t?void 0:t.download)?"download=".concat(!0===t.download?"":t.download):"";""!==n&&r.push(n);const a="undefined"!==typeof(null===t||void 0===t?void 0:t.transform)?"render/image":"object",i=this.transformOptsToQueryString((null===t||void 0===t?void 0:t.transform)||{});""!==i&&r.push(i);let o=r.join("&");return""!==o&&(o="?".concat(o)),{data:{publicUrl:encodeURI("".concat(this.url,"/").concat(a,"/public/").concat(s).concat(o))}}}remove(e){return fe(this,void 0,void 0,function*(){try{return{data:yield me(this.fetch,"".concat(this.url,"/object/").concat(this.bucketId),{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(X(t))return{data:null,error:t};throw t}})}list(e,t,s){return fe(this,void 0,void 0,function*(){try{const r=Object.assign(Object.assign(Object.assign({},xe),t),{prefix:e||""});return{data:yield ue(this.fetch,"".concat(this.url,"/object/list/").concat(this.bucketId),r,{headers:this.headers},s),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(X(r))return{data:null,error:r};throw r}})}listV2(e,t){return fe(this,void 0,void 0,function*(){try{const s=Object.assign({},e);return{data:yield ue(this.fetch,"".concat(this.url,"/object/list-v2/").concat(this.bucketId),s,{headers:this.headers},t),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(X(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return"undefined"!==typeof pe?pe.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return"".concat(this.bucketId,"/").concat(e.replace(/^\/+/,""))}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push("width=".concat(e.width)),e.height&&t.push("height=".concat(e.height)),e.resize&&t.push("resize=".concat(e.resize)),e.format&&t.push("format=".concat(e.format)),e.quality&&t.push("quality=".concat(e.quality)),t.join("&")}}const ye={"X-Client-Info":"storage-js/".concat("2.12.1")};var be=function(e,t,s,r){return new(s||(s=Promise))(function(n,a){function i(e){try{l(r.next(e))}catch(t){a(t)}}function o(e){try{l(r.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(i,o)}l((r=r.apply(e,t||[])).next())})};class je{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;this.shouldThrowOnError=!1;const n=new URL(e);if(null===r||void 0===r?void 0:r.useNewHostname){/supabase\.(co|in|red)$/.test(n.hostname)&&!n.hostname.includes("storage.supabase.")&&(n.hostname=n.hostname.replace("supabase.","storage.supabase."))}this.url=n.href,this.headers=Object.assign(Object.assign({},ye),t),this.fetch=re(s)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return be(this,void 0,void 0,function*(){try{return{data:yield de(this.fetch,"".concat(this.url,"/bucket"),{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(X(e))return{data:null,error:e};throw e}})}getBucket(e){return be(this,void 0,void 0,function*(){try{return{data:yield de(this.fetch,"".concat(this.url,"/bucket/").concat(e),{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(X(t))return{data:null,error:t};throw t}})}createBucket(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{public:!1};return be(this,void 0,void 0,function*(){try{return{data:yield ue(this.fetch,"".concat(this.url,"/bucket"),{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(X(s))return{data:null,error:s};throw s}})}updateBucket(e,t){return be(this,void 0,void 0,function*(){try{return{data:yield he(this.fetch,"".concat(this.url,"/bucket/").concat(e),{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(X(s))return{data:null,error:s};throw s}})}emptyBucket(e){return be(this,void 0,void 0,function*(){try{return{data:yield ue(this.fetch,"".concat(this.url,"/bucket/").concat(e,"/empty"),{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(X(t))return{data:null,error:t};throw t}})}deleteBucket(e){return be(this,void 0,void 0,function*(){try{return{data:yield me(this.fetch,"".concat(this.url,"/bucket/").concat(e),{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(X(t))return{data:null,error:t};throw t}})}}class we extends je{constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},arguments.length>2?arguments[2]:void 0,arguments.length>3?arguments[3]:void 0)}from(e){return new ve(this.url,this.headers,e,this.fetch)}}let Ne="";Ne="undefined"!==typeof Deno?"deno":"undefined"!==typeof document?"web":"undefined"!==typeof navigator&&"ReactNative"===navigator.product?"react-native":"node";const Se={headers:{"X-Client-Info":"supabase-js-".concat(Ne,"/").concat("2.57.4")}},ke={schema:"public"},Ae={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},_e={};var Ee=s(4630),Ce=function(e,t,s,r){return new(s||(s=Promise))(function(n,a){function i(e){try{l(r.next(e))}catch(t){a(t)}}function o(e){try{l(r.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(i,o)}l((r=r.apply(e,t||[])).next())})};const Pe=e=>{let t;return t=e||("undefined"===typeof fetch?Ee.default:fetch),function(){return t(...arguments)}},Te=(e,t,s)=>{const r=Pe(s),n="undefined"===typeof Headers?Ee.Headers:Headers;return(s,a)=>Ce(void 0,void 0,void 0,function*(){var i;const o=null!==(i=yield t())&&void 0!==i?i:e;let l=new n(null===a||void 0===a?void 0:a.headers);return l.has("apikey")||l.set("apikey",e),l.has("Authorization")||l.set("Authorization","Bearer ".concat(o)),r(s,Object.assign(Object.assign({},a),{headers:l}))})};var Ie=function(e,t,s,r){return new(s||(s=Promise))(function(n,a){function i(e){try{l(r.next(e))}catch(t){a(t)}}function o(e){try{l(r.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(i,o)}l((r=r.apply(e,t||[])).next())})};const Re="2.71.1",Oe=3e4,De=9e4,Le={"X-Client-Info":"gotrue-js/".concat(Re)},ze="X-Supabase-Api-Version",Me={timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"},Fe=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i;class Ue extends Error{constructor(e,t,s){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=s}}function Be(e){return"object"===typeof e&&null!==e&&"__isAuthError"in e}class Ve extends Ue{constructor(e,t,s){super(e,t,s),this.name="AuthApiError",this.status=t,this.code=s}}class qe extends Ue{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class He extends Ue{constructor(e,t,s,r){super(e,s,r),this.name=t,this.status=s}}class We extends He{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class Ge extends He{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ke extends He{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Ze extends He{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Qe extends He{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Je extends He{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Ye(e){return Be(e)&&"AuthRetryableFetchError"===e.name}class $e extends He{constructor(e,t,s){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=s}}class Xe extends He{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const et="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),tt=" \t\n\r=".split(""),st=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<tt.length;t+=1)e[tt[t].charCodeAt(0)]=-2;for(let t=0;t<et.length;t+=1)e[et[t].charCodeAt(0)]=t;return e})();function rt(e,t,s){if(null!==e)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;s(et[e]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;s(et[e]),t.queuedBits-=6}}function nt(e,t,s){const r=st[e];if(!(r>-1)){if(-2===r)return;throw new Error('Invalid Base64-URL character "'.concat(String.fromCharCode(e),'"'))}for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)s(t.queue>>t.queuedBits-8&255),t.queuedBits-=8}function at(e){const t=[],s=e=>{t.push(String.fromCodePoint(e))},r={utf8seq:0,codepoint:0},n={queue:0,queuedBits:0},a=e=>{!function(e,t,s){if(0===t.utf8seq){if(e<=127)return void s(e);for(let s=1;s<6;s+=1)if(0===(e>>7-s&1)){t.utf8seq=s;break}if(2===t.utf8seq)t.codepoint=31&e;else if(3===t.utf8seq)t.codepoint=15&e;else{if(4!==t.utf8seq)throw new Error("Invalid UTF-8 sequence");t.codepoint=7&e}t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|63&e,t.utf8seq-=1,0===t.utf8seq&&s(t.codepoint)}}(e,r,s)};for(let i=0;i<e.length;i+=1)nt(e.charCodeAt(i),n,a);return t.join("")}function it(e,t){if(!(e<=127)){if(e<=2047)return t(192|e>>6),void t(128|63&e);if(e<=65535)return t(224|e>>12),t(128|e>>6&63),void t(128|63&e);if(e<=1114111)return t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),void t(128|63&e);throw new Error("Unrecognized Unicode codepoint: ".concat(e.toString(16)))}t(e)}function ot(e,t){for(let s=0;s<e.length;s+=1){let r=e.charCodeAt(s);if(r>55295&&r<=56319){const t=1024*(r-55296)&65535;r=65536+(e.charCodeAt(s+1)-56320&65535|t),s+=1}it(r,t)}}function lt(e){const t=[],s={queue:0,queuedBits:0},r=e=>{t.push(e)};for(let n=0;n<e.length;n+=1)nt(e.charCodeAt(n),s,r);return new Uint8Array(t)}function ct(e){const t=[],s={queue:0,queuedBits:0},r=e=>{t.push(e)};return e.forEach(e=>rt(e,s,r)),rt(null,s,r),t.join("")}const dt=()=>"undefined"!==typeof window&&"undefined"!==typeof document,ut={tested:!1,writable:!1},ht=()=>{if(!dt())return!1;try{if("object"!==typeof globalThis.localStorage)return!1}catch(t){return!1}if(ut.tested)return ut.writable;const e="lswt-".concat(Math.random()).concat(Math.random());try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),ut.tested=!0,ut.writable=!0}catch(t){ut.tested=!0,ut.writable=!1}return ut.writable};const mt=e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Promise.resolve().then(s.bind(s,4630)).then(e=>{let{default:s}=e;return s(...t)})}:fetch),function(){return t(...arguments)}},pt=async(e,t,s)=>{await e.setItem(t,JSON.stringify(s))},ft=async(e,t)=>{const s=await e.getItem(t);if(!s)return null;try{return JSON.parse(s)}catch(r){return s}},xt=async(e,t)=>{await e.removeItem(t)};class gt{constructor(){this.promise=new gt.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}function vt(e){const t=e.split(".");if(3!==t.length)throw new Xe("Invalid JWT structure");for(let s=0;s<t.length;s++)if(!Fe.test(t[s]))throw new Xe("JWT not in base64url format");return{header:JSON.parse(at(t[0])),payload:JSON.parse(at(t[1])),signature:lt(t[2]),raw:{header:t[0],payload:t[1]}}}function yt(e){return("0"+e.toString(16)).substr(-2)}async function bt(e){if(!("undefined"!==typeof crypto&&"undefined"!==typeof crypto.subtle&&"undefined"!==typeof TextEncoder))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const t=await async function(e){const t=(new TextEncoder).encode(e),s=await crypto.subtle.digest("SHA-256",t),r=new Uint8Array(s);return Array.from(r).map(e=>String.fromCharCode(e)).join("")}(e);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function jt(e,t){let s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=function(){const e=new Uint32Array(56);if("undefined"===typeof crypto){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",t=e.length;let s="";for(let r=0;r<56;r++)s+=e.charAt(Math.floor(Math.random()*t));return s}return crypto.getRandomValues(e),Array.from(e,yt).join("")}();let n=r;s&&(n+="/PASSWORD_RECOVERY"),await pt(e,"".concat(t,"-code-verifier"),n);const a=await bt(r);return[a,r===a?"plain":"s256"]}gt.promiseConstructor=Promise;const wt=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;const Nt=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function St(e){if(!Nt.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function kt(){return new Proxy({},{get:(e,t)=>{if("__isUserNotAvailableProxy"===t)return!0;if("symbol"===typeof t){const e=t.toString();if("Symbol(Symbol.toPrimitive)"===e||"Symbol(Symbol.toStringTag)"===e||"Symbol(util.inspect.custom)"===e)return}throw new Error('@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "'.concat(t,'" property of the session object is not supported. Please use getUser() instead.'))},set:(e,t)=>{throw new Error('@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "'.concat(t,'" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.'))},deleteProperty:(e,t)=>{throw new Error('@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "'.concat(t,'" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.'))}})}function At(e){return JSON.parse(JSON.stringify(e))}var _t=function(e,t){var s={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(s[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(s[r[n]]=e[r[n]])}return s};const Et=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Ct=[502,503,504];async function Pt(e){var t,s;if(!("object"===typeof(s=e)&&null!==s&&"status"in s&&"ok"in s&&"json"in s&&"function"===typeof s.json))throw new Je(Et(e),0);if(Ct.includes(e.status))throw new Je(Et(e),e.status);let r,n;try{r=await e.json()}catch(i){throw new qe(Et(i),i)}const a=function(e){const t=e.headers.get(ze);if(!t)return null;if(!t.match(wt))return null;try{return new Date("".concat(t,"T00:00:00.0Z"))}catch(i){return null}}(e);if(a&&a.getTime()>=Me.timestamp&&"object"===typeof r&&r&&"string"===typeof r.code?n=r.code:"object"===typeof r&&r&&"string"===typeof r.error_code&&(n=r.error_code),n){if("weak_password"===n)throw new $e(Et(r),e.status,(null===(t=r.weak_password)||void 0===t?void 0:t.reasons)||[]);if("session_not_found"===n)throw new We}else if("object"===typeof r&&r&&"object"===typeof r.weak_password&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((e,t)=>e&&"string"===typeof t,!0))throw new $e(Et(r),e.status,r.weak_password.reasons);throw new Ve(Et(r),e.status||500,n)}async function Tt(e,t,s,r){var n;const a=Object.assign({},null===r||void 0===r?void 0:r.headers);a[ze]||(a[ze]=Me.name),(null===r||void 0===r?void 0:r.jwt)&&(a.Authorization="Bearer ".concat(r.jwt));const i=null!==(n=null===r||void 0===r?void 0:r.query)&&void 0!==n?n:{};(null===r||void 0===r?void 0:r.redirectTo)&&(i.redirect_to=r.redirectTo);const o=Object.keys(i).length?"?"+new URLSearchParams(i).toString():"",l=await async function(e,t,s,r,n,a){const i=((e,t,s,r)=>{const n={method:e,headers:(null===t||void 0===t?void 0:t.headers)||{}};return"GET"===e?n:(n.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},null===t||void 0===t?void 0:t.headers),n.body=JSON.stringify(r),Object.assign(Object.assign({},n),s))})(t,r,n,a);let o;try{o=await e(s,Object.assign({},i))}catch(l){throw console.error(l),new Je(Et(l),0)}o.ok||await Pt(o);if(null===r||void 0===r?void 0:r.noResolveJson)return o;try{return await o.json()}catch(l){await Pt(l)}}(e,t,s+o,{headers:a,noResolveJson:null===r||void 0===r?void 0:r.noResolveJson},{},null===r||void 0===r?void 0:r.body);return(null===r||void 0===r?void 0:r.xform)?null===r||void 0===r?void 0:r.xform(l):{data:Object.assign({},l),error:null}}function It(e){var t;let s=null;var r;(function(e){return e.access_token&&e.refresh_token&&e.expires_in})(e)&&(s=Object.assign({},e),e.expires_at||(s.expires_at=(r=e.expires_in,Math.round(Date.now()/1e3)+r)));return{data:{session:s,user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function Rt(e){const t=It(e);return!t.error&&e.weak_password&&"object"===typeof e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&"string"===typeof e.weak_password.message&&e.weak_password.reasons.reduce((e,t)=>e&&"string"===typeof t,!0)&&(t.data.weak_password=e.weak_password),t}function Ot(e){var t;return{data:{user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function Dt(e){return{data:e,error:null}}function Lt(e){const{action_link:t,email_otp:s,hashed_token:r,redirect_to:n,verification_type:a}=e,i=_t(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]);return{data:{properties:{action_link:t,email_otp:s,hashed_token:r,redirect_to:n,verification_type:a},user:Object.assign({},i)},error:null}}function zt(e){return e}const Mt=["global","local","others"];var Ft=function(e,t){var s={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(s[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(s[r[n]]=e[r[n]])}return s};class Ut{constructor(e){let{url:t="",headers:s={},fetch:r}=e;this.url=t,this.headers=s,this.fetch=mt(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Mt[0];if(Mt.indexOf(t)<0)throw new Error("@supabase/auth-js: Parameter scope must be one of ".concat(Mt.join(", ")));try{return await Tt(this.fetch,"POST","".concat(this.url,"/logout?scope=").concat(t),{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if(Be(s))return{data:null,error:s};throw s}}async inviteUserByEmail(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{return await Tt(this.fetch,"POST","".concat(this.url,"/invite"),{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:Ot})}catch(s){if(Be(s))return{data:{user:null},error:s};throw s}}async generateLink(e){try{const{options:t}=e,s=Ft(e,["options"]),r=Object.assign(Object.assign({},s),t);return"newEmail"in s&&(r.new_email=null===s||void 0===s?void 0:s.newEmail,delete r.newEmail),await Tt(this.fetch,"POST","".concat(this.url,"/admin/generate_link"),{body:r,headers:this.headers,xform:Lt,redirectTo:null===t||void 0===t?void 0:t.redirectTo})}catch(t){if(Be(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await Tt(this.fetch,"POST","".concat(this.url,"/admin/users"),{body:e,headers:this.headers,xform:Ot})}catch(t){if(Be(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,s,r,n,a,i,o;try{const l={nextPage:null,lastPage:0,total:0},c=await Tt(this.fetch,"GET","".concat(this.url,"/admin/users"),{headers:this.headers,noResolveJson:!0,query:{page:null!==(s=null===(t=null===e||void 0===e?void 0:e.page)||void 0===t?void 0:t.toString())&&void 0!==s?s:"",per_page:null!==(n=null===(r=null===e||void 0===e?void 0:e.perPage)||void 0===r?void 0:r.toString())&&void 0!==n?n:""},xform:zt});if(c.error)throw c.error;const d=await c.json(),u=null!==(a=c.headers.get("x-total-count"))&&void 0!==a?a:0,h=null!==(o=null===(i=c.headers.get("link"))||void 0===i?void 0:i.split(","))&&void 0!==o?o:[];return h.length>0&&(h.forEach(e=>{const t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),s=JSON.parse(e.split(";")[1].split("=")[1]);l["".concat(s,"Page")]=t}),l.total=parseInt(u)),{data:Object.assign(Object.assign({},d),l),error:null}}catch(l){if(Be(l))return{data:{users:[]},error:l};throw l}}async getUserById(e){St(e);try{return await Tt(this.fetch,"GET","".concat(this.url,"/admin/users/").concat(e),{headers:this.headers,xform:Ot})}catch(t){if(Be(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){St(e);try{return await Tt(this.fetch,"PUT","".concat(this.url,"/admin/users/").concat(e),{body:t,headers:this.headers,xform:Ot})}catch(s){if(Be(s))return{data:{user:null},error:s};throw s}}async deleteUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];St(e);try{return await Tt(this.fetch,"DELETE","".concat(this.url,"/admin/users/").concat(e),{headers:this.headers,body:{should_soft_delete:t},xform:Ot})}catch(s){if(Be(s))return{data:{user:null},error:s};throw s}}async _listFactors(e){St(e.userId);try{const{data:t,error:s}=await Tt(this.fetch,"GET","".concat(this.url,"/admin/users/").concat(e.userId,"/factors"),{headers:this.headers,xform:e=>({data:{factors:e},error:null})});return{data:t,error:s}}catch(t){if(Be(t))return{data:null,error:t};throw t}}async _deleteFactor(e){St(e.userId),St(e.id);try{return{data:await Tt(this.fetch,"DELETE","".concat(this.url,"/admin/users/").concat(e.userId,"/factors/").concat(e.id),{headers:this.headers}),error:null}}catch(t){if(Be(t))return{data:null,error:t};throw t}}}function Bt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{getItem:t=>e[t]||null,setItem:(t,s)=>{e[t]=s},removeItem:t=>{delete e[t]}}}const Vt=!!(globalThis&&ht()&&globalThis.localStorage&&"true"===globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug"));class qt extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Ht extends qt{}async function Wt(e,t,s){Vt&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),Vt&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,0===t?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async r=>{if(!r){if(0===t)throw Vt&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new Ht('Acquiring an exclusive Navigator LockManager lock "'.concat(e,'" immediately failed'));if(Vt)try{const e=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(e,null,"  "))}catch(n){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",n)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await s()}Vt&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,r.name);try{return await s()}finally{Vt&&console.log("@supabase/gotrue-js: navigatorLock: released",e,r.name)}}))}!function(){if("object"!==typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(e){"undefined"!==typeof self&&(self.globalThis=self)}}();const Gt={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Le,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Kt(e,t,s){return await s()}const Zt={};class Qt{constructor(e){var t,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Qt.nextInstanceID,Qt.nextInstanceID+=1,this.instanceID>0&&dt()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const r=Object.assign(Object.assign({},Gt),e);if(this.logDebugMessages=!!r.debug,"function"===typeof r.debug&&(this.logger=r.debug),this.persistSession=r.persistSession,this.storageKey=r.storageKey,this.autoRefreshToken=r.autoRefreshToken,this.admin=new Ut({url:r.url,headers:r.headers,fetch:r.fetch}),this.url=r.url,this.headers=r.headers,this.fetch=mt(r.fetch),this.lock=r.lock||Kt,this.detectSessionInUrl=r.detectSessionInUrl,this.flowType=r.flowType,this.hasCustomAuthorizationHeader=r.hasCustomAuthorizationHeader,r.lock?this.lock=r.lock:dt()&&(null===(t=null===globalThis||void 0===globalThis?void 0:globalThis.navigator)||void 0===t?void 0:t.locks)?this.lock=Wt:this.lock=Kt,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(r.storage?this.storage=r.storage:ht()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Bt(this.memoryStorage)),r.userStorage&&(this.userStorage=r.userStorage)):(this.memoryStorage={},this.storage=Bt(this.memoryStorage)),dt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(n){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",n)}null===(s=this.broadcastChannel)||void 0===s||s.addEventListener("message",async e=>{this._debug("received broadcast notification from other tab or client",e),await this._notifyAllSubscribers(e.data.event,e.data.session,!1)})}this.initialize()}get jwks(){var e,t;return null!==(t=null===(e=Zt[this.storageKey])||void 0===e?void 0:e.jwks)&&void 0!==t?t:{keys:[]}}set jwks(e){Zt[this.storageKey]=Object.assign(Object.assign({},Zt[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return null!==(t=null===(e=Zt[this.storageKey])||void 0===e?void 0:e.cachedAt)&&void 0!==t?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Zt[this.storageKey]=Object.assign(Object.assign({},Zt[this.storageKey]),{cachedAt:e})}_debug(){if(this.logDebugMessages){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];this.logger("GoTrueClient@".concat(this.instanceID," (").concat(Re,") ").concat((new Date).toISOString()),...t)}return this}async initialize(){return this.initializePromise||(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))()),await this.initializePromise}async _initialize(){var e;try{const t=function(e){const t={},s=new URL(e);if(s.hash&&"#"===s.hash[0])try{new URLSearchParams(s.hash.substring(1)).forEach((e,s)=>{t[s]=e})}catch(r){}return s.searchParams.forEach((e,s)=>{t[s]=e}),t}(window.location.href);let s="none";if(this._isImplicitGrantCallback(t)?s="implicit":await this._isPKCECallback(t)&&(s="pkce"),dt()&&this.detectSessionInUrl&&"none"!==s){const{data:r,error:n}=await this._getSessionFromURL(t,s);if(n){if(this._debug("#_initialize()","error detecting session from URL",n),function(e){return Be(e)&&"AuthImplicitGrantRedirectError"===e.name}(n)){const t=null===(e=n.details)||void 0===e?void 0:e.code;if("identity_already_exists"===t||"identity_not_found"===t||"single_identity_not_deletable"===t)return{error:n}}return await this._removeSession(),{error:n}}const{session:a,redirectType:i}=r;return this._debug("#_initialize()","detected session in URL",a,"redirect type",i),await this._saveSession(a),setTimeout(async()=>{"recovery"===i?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return Be(t)?{error:t}:{error:new qe("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,s,r;try{const n=await Tt(this.fetch,"POST","".concat(this.url,"/signup"),{headers:this.headers,body:{data:null!==(s=null===(t=null===e||void 0===e?void 0:e.options)||void 0===t?void 0:t.data)&&void 0!==s?s:{},gotrue_meta_security:{captcha_token:null===(r=null===e||void 0===e?void 0:e.options)||void 0===r?void 0:r.captchaToken}},xform:It}),{data:a,error:i}=n;if(i||!a)return{data:{user:null,session:null},error:i};const o=a.session,l=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:l,session:o},error:null}}catch(n){if(Be(n))return{data:{user:null,session:null},error:n};throw n}}async signUp(e){var t,s,r;try{let n;if("email"in e){const{email:s,password:r,options:a}=e;let i=null,o=null;"pkce"===this.flowType&&([i,o]=await jt(this.storage,this.storageKey)),n=await Tt(this.fetch,"POST","".concat(this.url,"/signup"),{headers:this.headers,redirectTo:null===a||void 0===a?void 0:a.emailRedirectTo,body:{email:s,password:r,data:null!==(t=null===a||void 0===a?void 0:a.data)&&void 0!==t?t:{},gotrue_meta_security:{captcha_token:null===a||void 0===a?void 0:a.captchaToken},code_challenge:i,code_challenge_method:o},xform:It})}else{if(!("phone"in e))throw new Ke("You must provide either an email or phone number and a password");{const{phone:t,password:a,options:i}=e;n=await Tt(this.fetch,"POST","".concat(this.url,"/signup"),{headers:this.headers,body:{phone:t,password:a,data:null!==(s=null===i||void 0===i?void 0:i.data)&&void 0!==s?s:{},channel:null!==(r=null===i||void 0===i?void 0:i.channel)&&void 0!==r?r:"sms",gotrue_meta_security:{captcha_token:null===i||void 0===i?void 0:i.captchaToken}},xform:It})}}const{data:a,error:i}=n;if(i||!a)return{data:{user:null,session:null},error:i};const o=a.session,l=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:l,session:o},error:null}}catch(n){if(Be(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithPassword(e){try{let t;if("email"in e){const{email:s,password:r,options:n}=e;t=await Tt(this.fetch,"POST","".concat(this.url,"/token?grant_type=password"),{headers:this.headers,body:{email:s,password:r,gotrue_meta_security:{captcha_token:null===n||void 0===n?void 0:n.captchaToken}},xform:Rt})}else{if(!("phone"in e))throw new Ke("You must provide either an email or phone number and a password");{const{phone:s,password:r,options:n}=e;t=await Tt(this.fetch,"POST","".concat(this.url,"/token?grant_type=password"),{headers:this.headers,body:{phone:s,password:r,gotrue_meta_security:{captcha_token:null===n||void 0===n?void 0:n.captchaToken}},xform:Rt})}}const{data:s,error:r}=t;return r?{data:{user:null,session:null},error:r}:s&&s.session&&s.user?(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:r}):{data:{user:null,session:null},error:new Ge}}catch(t){if(Be(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,s,r,n;return await this._handleProviderSignIn(e.provider,{redirectTo:null===(t=e.options)||void 0===t?void 0:t.redirectTo,scopes:null===(s=e.options)||void 0===s?void 0:s.scopes,queryParams:null===(r=e.options)||void 0===r?void 0:r.queryParams,skipBrowserRedirect:null===(n=e.options)||void 0===n?void 0:n.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;if("solana"===t)return await this.signInWithSolana(e);throw new Error('@supabase/auth-js: Unsupported chain "'.concat(t,'"'))}async signInWithSolana(e){var t,s,r,n,a,i,o,l,c,d,u,h;let m,p;if("message"in e)m=e.message,p=e.signature;else{const{chain:u,wallet:h,statement:f,options:x}=e;let g;if(dt())if("object"===typeof h)g=h;else{const e=window;if(!("solana"in e)||"object"!==typeof e.solana||!("signIn"in e.solana&&"function"===typeof e.solana.signIn||"signMessage"in e.solana&&"function"===typeof e.solana.signMessage))throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.");g=e.solana}else{if("object"!==typeof h||!(null===x||void 0===x?void 0:x.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");g=h}const v=new URL(null!==(t=null===x||void 0===x?void 0:x.url)&&void 0!==t?t:window.location.href);if("signIn"in g&&g.signIn){const e=await g.signIn(Object.assign(Object.assign(Object.assign({issuedAt:(new Date).toISOString()},null===x||void 0===x?void 0:x.signInWithSolana),{version:"1",domain:v.host,uri:v.href}),f?{statement:f}:null));let t;if(Array.isArray(e)&&e[0]&&"object"===typeof e[0])t=e[0];else{if(!(e&&"object"===typeof e&&"signedMessage"in e&&"signature"in e))throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");t=e}if(!("signedMessage"in t&&"signature"in t&&("string"===typeof t.signedMessage||t.signedMessage instanceof Uint8Array)&&t.signature instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields");m="string"===typeof t.signedMessage?t.signedMessage:(new TextDecoder).decode(t.signedMessage),p=t.signature}else{if(!("signMessage"in g)||"function"!==typeof g.signMessage||!("publicKey"in g)||"object"!==typeof g||!g.publicKey||!("toBase58"in g.publicKey)||"function"!==typeof g.publicKey.toBase58)throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");m=["".concat(v.host," wants you to sign in with your Solana account:"),g.publicKey.toBase58(),...f?["",f,""]:[""],"Version: 1","URI: ".concat(v.href),"Issued At: ".concat(null!==(r=null===(s=null===x||void 0===x?void 0:x.signInWithSolana)||void 0===s?void 0:s.issuedAt)&&void 0!==r?r:(new Date).toISOString()),...(null===(n=null===x||void 0===x?void 0:x.signInWithSolana)||void 0===n?void 0:n.notBefore)?["Not Before: ".concat(x.signInWithSolana.notBefore)]:[],...(null===(a=null===x||void 0===x?void 0:x.signInWithSolana)||void 0===a?void 0:a.expirationTime)?["Expiration Time: ".concat(x.signInWithSolana.expirationTime)]:[],...(null===(i=null===x||void 0===x?void 0:x.signInWithSolana)||void 0===i?void 0:i.chainId)?["Chain ID: ".concat(x.signInWithSolana.chainId)]:[],...(null===(o=null===x||void 0===x?void 0:x.signInWithSolana)||void 0===o?void 0:o.nonce)?["Nonce: ".concat(x.signInWithSolana.nonce)]:[],...(null===(l=null===x||void 0===x?void 0:x.signInWithSolana)||void 0===l?void 0:l.requestId)?["Request ID: ".concat(x.signInWithSolana.requestId)]:[],...(null===(d=null===(c=null===x||void 0===x?void 0:x.signInWithSolana)||void 0===c?void 0:c.resources)||void 0===d?void 0:d.length)?["Resources",...x.signInWithSolana.resources.map(e=>"- ".concat(e))]:[]].join("\n");const e=await g.signMessage((new TextEncoder).encode(m),"utf8");if(!e||!(e instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");p=e}}try{const{data:t,error:s}=await Tt(this.fetch,"POST","".concat(this.url,"/token?grant_type=web3"),{headers:this.headers,body:Object.assign({chain:"solana",message:m,signature:ct(p)},(null===(u=e.options)||void 0===u?void 0:u.captchaToken)?{gotrue_meta_security:{captcha_token:null===(h=e.options)||void 0===h?void 0:h.captchaToken}}:null),xform:It});if(s)throw s;return t&&t.session&&t.user?(t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign({},t),error:s}):{data:{user:null,session:null},error:new Ge}}catch(f){if(Be(f))return{data:{user:null,session:null},error:f};throw f}}async _exchangeCodeForSession(e){const t=await ft(this.storage,"".concat(this.storageKey,"-code-verifier")),[s,r]=(null!==t&&void 0!==t?t:"").split("/");try{const{data:t,error:n}=await Tt(this.fetch,"POST","".concat(this.url,"/token?grant_type=pkce"),{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:It});if(await xt(this.storage,"".concat(this.storageKey,"-code-verifier")),n)throw n;return t&&t.session&&t.user?(t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign(Object.assign({},t),{redirectType:null!==r&&void 0!==r?r:null}),error:n}):{data:{user:null,session:null,redirectType:null},error:new Ge}}catch(n){if(Be(n))return{data:{user:null,session:null,redirectType:null},error:n};throw n}}async signInWithIdToken(e){try{const{options:t,provider:s,token:r,access_token:n,nonce:a}=e,i=await Tt(this.fetch,"POST","".concat(this.url,"/token?grant_type=id_token"),{headers:this.headers,body:{provider:s,id_token:r,access_token:n,nonce:a,gotrue_meta_security:{captcha_token:null===t||void 0===t?void 0:t.captchaToken}},xform:It}),{data:o,error:l}=i;return l?{data:{user:null,session:null},error:l}:o&&o.session&&o.user?(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:o,error:l}):{data:{user:null,session:null},error:new Ge}}catch(t){if(Be(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,s,r,n,a;try{if("email"in e){const{email:r,options:n}=e;let a=null,i=null;"pkce"===this.flowType&&([a,i]=await jt(this.storage,this.storageKey));const{error:o}=await Tt(this.fetch,"POST","".concat(this.url,"/otp"),{headers:this.headers,body:{email:r,data:null!==(t=null===n||void 0===n?void 0:n.data)&&void 0!==t?t:{},create_user:null===(s=null===n||void 0===n?void 0:n.shouldCreateUser)||void 0===s||s,gotrue_meta_security:{captcha_token:null===n||void 0===n?void 0:n.captchaToken},code_challenge:a,code_challenge_method:i},redirectTo:null===n||void 0===n?void 0:n.emailRedirectTo});return{data:{user:null,session:null},error:o}}if("phone"in e){const{phone:t,options:s}=e,{data:i,error:o}=await Tt(this.fetch,"POST","".concat(this.url,"/otp"),{headers:this.headers,body:{phone:t,data:null!==(r=null===s||void 0===s?void 0:s.data)&&void 0!==r?r:{},create_user:null===(n=null===s||void 0===s?void 0:s.shouldCreateUser)||void 0===n||n,gotrue_meta_security:{captcha_token:null===s||void 0===s?void 0:s.captchaToken},channel:null!==(a=null===s||void 0===s?void 0:s.channel)&&void 0!==a?a:"sms"}});return{data:{user:null,session:null,messageId:null===i||void 0===i?void 0:i.message_id},error:o}}throw new Ke("You must provide either an email or phone number.")}catch(i){if(Be(i))return{data:{user:null,session:null},error:i};throw i}}async verifyOtp(e){var t,s;try{let r,n;"options"in e&&(r=null===(t=e.options)||void 0===t?void 0:t.redirectTo,n=null===(s=e.options)||void 0===s?void 0:s.captchaToken);const{data:a,error:i}=await Tt(this.fetch,"POST","".concat(this.url,"/verify"),{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:n}}),redirectTo:r,xform:It});if(i)throw i;if(!a)throw new Error("An error occurred on token verification.");const o=a.session,l=a.user;return(null===o||void 0===o?void 0:o.access_token)&&(await this._saveSession(o),await this._notifyAllSubscribers("recovery"==e.type?"PASSWORD_RECOVERY":"SIGNED_IN",o)),{data:{user:l,session:o},error:null}}catch(r){if(Be(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithSSO(e){var t,s,r;try{let n=null,a=null;return"pkce"===this.flowType&&([n,a]=await jt(this.storage,this.storageKey)),await Tt(this.fetch,"POST","".concat(this.url,"/sso"),{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:null!==(s=null===(t=e.options)||void 0===t?void 0:t.redirectTo)&&void 0!==s?s:void 0}),(null===(r=null===e||void 0===e?void 0:e.options)||void 0===r?void 0:r.captchaToken)?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:n,code_challenge_method:a}),headers:this.headers,xform:Dt})}catch(n){if(Be(n))return{data:null,error:n};throw n}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:s}=e;if(s)throw s;if(!t)throw new We;const{error:r}=await Tt(this.fetch,"GET","".concat(this.url,"/reauthenticate"),{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:r}})}catch(e){if(Be(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t="".concat(this.url,"/resend");if("email"in e){const{email:s,type:r,options:n}=e,{error:a}=await Tt(this.fetch,"POST",t,{headers:this.headers,body:{email:s,type:r,gotrue_meta_security:{captcha_token:null===n||void 0===n?void 0:n.captchaToken}},redirectTo:null===n||void 0===n?void 0:n.emailRedirectTo});return{data:{user:null,session:null},error:a}}if("phone"in e){const{phone:s,type:r,options:n}=e,{data:a,error:i}=await Tt(this.fetch,"POST",t,{headers:this.headers,body:{phone:s,type:r,gotrue_meta_security:{captcha_token:null===n||void 0===n?void 0:n.captchaToken}}});return{data:{user:null,session:null,messageId:null===a||void 0===a?void 0:a.message_id},error:i}}throw new Ke("You must provide either an email or phone number and a type")}catch(t){if(Be(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){await this.initializePromise;return await this._acquireLock(-1,async()=>this._useSession(async e=>e))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const e=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await e,await t()))();return this.pendingInLock.push((async()=>{try{await s}catch(e){}})()),s}return await this.lock("lock:".concat(this.storageKey),e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const e=t();for(this.pendingInLock.push((async()=>{try{await e}catch(t){}})()),await e;this.pendingInLock.length;){const e=[...this.pendingInLock];await Promise.all(e),this.pendingInLock.splice(0,e.length)}return await e}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",(new Error).stack);try{let e=null;const t=await ft(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),null!==t&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const s=!!e.expires_at&&1e3*e.expires_at-Date.now()<De;if(this._debug("#__loadSession()","session has".concat(s?"":" not"," expired"),"expires_at",e.expires_at),!s){if(this.userStorage){const t=await ft(this.userStorage,this.storageKey+"-user");(null===t||void 0===t?void 0:t.user)?e.user=t.user:e.user=kt()}if(this.storage.isServer&&e.user){let t=this.suppressGetSessionWarning;e=new Proxy(e,{get:(e,s,r)=>(t||"user"!==s||(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t=!0,this.suppressGetSessionWarning=!0),Reflect.get(e,s,r))})}return{data:{session:e},error:null}}const{session:r,error:n}=await this._callRefreshToken(e.refresh_token);return n?{data:{session:null},error:n}:{data:{session:r},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;return await this._acquireLock(-1,async()=>await this._getUser())}async _getUser(e){try{return e?await Tt(this.fetch,"GET","".concat(this.url,"/user"),{headers:this.headers,jwt:e,xform:Ot}):await this._useSession(async e=>{var t,s,r;const{data:n,error:a}=e;if(a)throw a;return(null===(t=n.session)||void 0===t?void 0:t.access_token)||this.hasCustomAuthorizationHeader?await Tt(this.fetch,"GET","".concat(this.url,"/user"),{headers:this.headers,jwt:null!==(r=null===(s=n.session)||void 0===s?void 0:s.access_token)&&void 0!==r?r:void 0,xform:Ot}):{data:{user:null},error:new We}})}catch(t){if(Be(t))return function(e){return Be(e)&&"AuthSessionMissingError"===e.name}(t)&&(await this._removeSession(),await xt(this.storage,"".concat(this.storageKey,"-code-verifier"))),{data:{user:null},error:t};throw t}}async updateUser(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{return await this._useSession(async s=>{const{data:r,error:n}=s;if(n)throw n;if(!r.session)throw new We;const a=r.session;let i=null,o=null;"pkce"===this.flowType&&null!=e.email&&([i,o]=await jt(this.storage,this.storageKey));const{data:l,error:c}=await Tt(this.fetch,"PUT","".concat(this.url,"/user"),{headers:this.headers,redirectTo:null===t||void 0===t?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:i,code_challenge_method:o}),jwt:a.access_token,xform:Ot});if(c)throw c;return a.user=l.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(s){if(Be(s))return{data:{user:null},error:s};throw s}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new We;const t=Date.now()/1e3;let s=t,r=!0,n=null;const{payload:a}=vt(e.access_token);if(a.exp&&(s=a.exp,r=s<=t),r){const{session:t,error:s}=await this._callRefreshToken(e.refresh_token);if(s)return{data:{user:null,session:null},error:s};if(!t)return{data:{user:null,session:null},error:null};n=t}else{const{data:r,error:a}=await this._getUser(e.access_token);if(a)throw a;n={access_token:e.access_token,refresh_token:e.refresh_token,user:r.user,token_type:"bearer",expires_in:s-t,expires_at:s},await this._saveSession(n),await this._notifyAllSubscribers("SIGNED_IN",n)}return{data:{user:n.user,session:n},error:null}}catch(t){if(Be(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var s;if(!e){const{data:r,error:n}=t;if(n)throw n;e=null!==(s=r.session)&&void 0!==s?s:void 0}if(!(null===e||void 0===e?void 0:e.refresh_token))throw new We;const{session:r,error:n}=await this._callRefreshToken(e.refresh_token);return n?{data:{user:null,session:null},error:n}:r?{data:{user:r.user,session:r},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(Be(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!dt())throw new Ze("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Ze(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if("pkce"===this.flowType)throw new Qe("Not a valid PKCE flow url.");break;case"pkce":if("implicit"===this.flowType)throw new Ze("Not a valid implicit grant flow url.")}if("pkce"===t){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Qe("No code detected.");const{data:t,error:s}=await this._exchangeCodeForSession(e.code);if(s)throw s;const r=new URL(window.location.href);return r.searchParams.delete("code"),window.history.replaceState(window.history.state,"",r.toString()),{data:{session:t.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:r,access_token:n,refresh_token:a,expires_in:i,expires_at:o,token_type:l}=e;if(!n||!i||!a||!l)throw new Ze("No session defined in URL");const c=Math.round(Date.now()/1e3),d=parseInt(i);let u=c+d;o&&(u=parseInt(o));const h=u-c;1e3*h<=Oe&&console.warn("@supabase/gotrue-js: Session as retrieved from URL expires in ".concat(h,"s, should have been closer to ").concat(d,"s"));const m=u-d;c-m>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",m,u,c):c-m<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",m,u,c);const{data:p,error:f}=await this._getUser(n);if(f)throw f;const x={provider_token:s,provider_refresh_token:r,access_token:n,expires_in:d,expires_at:u,refresh_token:a,token_type:l,user:p.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:x,redirectType:e.type},error:null}}catch(s){if(Be(s))return{data:{session:null,redirectType:null},error:s};throw s}}_isImplicitGrantCallback(e){return Boolean(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await ft(this.storage,"".concat(this.storageKey,"-code-verifier"));return!(!e.code||!t)}async signOut(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{scope:"global"};return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut(){let{scope:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{scope:"global"};return await this._useSession(async t=>{var s;const{data:r,error:n}=t;if(n)return{error:n};const a=null===(s=r.session)||void 0===s?void 0:s.access_token;if(a){const{error:t}=await this.admin.signOut(a,e);if(t&&(!function(e){return Be(e)&&"AuthApiError"===e.name}(t)||404!==t.status&&401!==t.status&&403!==t.status))return{error:t}}return"others"!==e&&(await this._removeSession(),await xt(this.storage,"".concat(this.storageKey,"-code-verifier"))),{error:null}})}onAuthStateChange(e){const t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}),s={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,s),(async()=>{await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})})(),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession(async t=>{var s,r;try{const{data:{session:r},error:n}=t;if(n)throw n;await(null===(s=this.stateChangeEmitters.get(e))||void 0===s?void 0:s.callback("INITIAL_SESSION",r)),this._debug("INITIAL_SESSION","callback id",e,"session",r)}catch(n){await(null===(r=this.stateChangeEmitters.get(e))||void 0===r?void 0:r.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",n),console.error(n)}})}async resetPasswordForEmail(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=null,r=null;"pkce"===this.flowType&&([s,r]=await jt(this.storage,this.storageKey,!0));try{return await Tt(this.fetch,"POST","".concat(this.url,"/recover"),{body:{email:e,code_challenge:s,code_challenge_method:r,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(n){if(Be(n))return{data:null,error:n};throw n}}async getUserIdentities(){var e;try{const{data:t,error:s}=await this.getUser();if(s)throw s;return{data:{identities:null!==(e=t.user.identities)&&void 0!==e?e:[]},error:null}}catch(t){if(Be(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:s,error:r}=await this._useSession(async t=>{var s,r,n,a,i;const{data:o,error:l}=t;if(l)throw l;const c=await this._getUrlForProvider("".concat(this.url,"/user/identities/authorize"),e.provider,{redirectTo:null===(s=e.options)||void 0===s?void 0:s.redirectTo,scopes:null===(r=e.options)||void 0===r?void 0:r.scopes,queryParams:null===(n=e.options)||void 0===n?void 0:n.queryParams,skipBrowserRedirect:!0});return await Tt(this.fetch,"GET",c,{headers:this.headers,jwt:null!==(i=null===(a=o.session)||void 0===a?void 0:a.access_token)&&void 0!==i?i:void 0})});if(r)throw r;return dt()&&!(null===(t=e.options)||void 0===t?void 0:t.skipBrowserRedirect)&&window.location.assign(null===s||void 0===s?void 0:s.url),{data:{provider:e.provider,url:null===s||void 0===s?void 0:s.url},error:null}}catch(s){if(Be(s))return{data:{provider:e.provider,url:null},error:s};throw s}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var s,r;const{data:n,error:a}=t;if(a)throw a;return await Tt(this.fetch,"DELETE","".concat(this.url,"/user/identities/").concat(e.identity_id),{headers:this.headers,jwt:null!==(r=null===(s=n.session)||void 0===s?void 0:s.access_token)&&void 0!==r?r:void 0})})}catch(t){if(Be(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t="#_refreshAccessToken(".concat(e.substring(0,5),"...)");this._debug(t,"begin");try{const n=Date.now();return await(s=async s=>(s>0&&await async function(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}(200*Math.pow(2,s-1)),this._debug(t,"refreshing attempt",s),await Tt(this.fetch,"POST","".concat(this.url,"/token?grant_type=refresh_token"),{body:{refresh_token:e},headers:this.headers,xform:It})),r=(e,t)=>{const s=200*Math.pow(2,e);return t&&Ye(t)&&Date.now()+s-n<Oe},new Promise((e,t)=>{(async()=>{for(let a=0;a<1/0;a++)try{const t=await s(a);if(!r(a,null,t))return void e(t)}catch(n){if(!r(a,n))return void t(n)}})()}))}catch(n){if(this._debug(t,"error",n),Be(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(t,"end")}var s,r}_isValidSession(e){return"object"===typeof e&&null!==e&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const s=await this._getUrlForProvider("".concat(this.url,"/authorize"),e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",s),dt()&&!t.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e,t;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const n=await ft(this.storage,this.storageKey);if(n&&this.userStorage){let t=await ft(this.userStorage,this.storageKey+"-user");this.storage.isServer||!Object.is(this.storage,this.userStorage)||t||(t={user:n.user},await pt(this.userStorage,this.storageKey+"-user",t)),n.user=null!==(e=null===t||void 0===t?void 0:t.user)&&void 0!==e?e:kt()}else if(n&&!n.user&&!n.user){const e=await ft(this.storage,this.storageKey+"-user");e&&(null===e||void 0===e?void 0:e.user)?(n.user=e.user,await xt(this.storage,this.storageKey+"-user"),await pt(this.storage,this.storageKey,n)):n.user=kt()}if(this._debug(s,"session from storage",n),!this._isValidSession(n))return this._debug(s,"session is not valid"),void(null!==n&&await this._removeSession());const a=1e3*(null!==(t=n.expires_at)&&void 0!==t?t:1/0)-Date.now()<De;if(this._debug(s,"session has".concat(a?"":" not"," expired with margin of ").concat(De,"s")),a){if(this.autoRefreshToken&&n.refresh_token){const{error:e}=await this._callRefreshToken(n.refresh_token);e&&(console.error(e),Ye(e)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",e),await this._removeSession()))}}else if(n.user&&!0===n.user.__isUserNotAvailableProxy)try{const{data:e,error:t}=await this._getUser(n.access_token);!t&&(null===e||void 0===e?void 0:e.user)?(n.user=e.user,await this._saveSession(n),await this._notifyAllSubscribers("SIGNED_IN",n)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(r){console.error("Error getting user data:",r),this._debug(s,"error getting user data, skipping SIGNED_IN notification",r)}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){return this._debug(s,"error",n),void console.error(n)}finally{this._debug(s,"end")}}async _callRefreshToken(e){var t,s;if(!e)throw new We;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const r="#_callRefreshToken(".concat(e.substring(0,5),"...)");this._debug(r,"begin");try{this.refreshingDeferred=new gt;const{data:t,error:s}=await this._refreshAccessToken(e);if(s)throw s;if(!t.session)throw new We;await this._saveSession(t.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",t.session);const r={session:t.session,error:null};return this.refreshingDeferred.resolve(r),r}catch(n){if(this._debug(r,"error",n),Be(n)){const e={session:null,error:n};return Ye(n)||await this._removeSession(),null===(t=this.refreshingDeferred)||void 0===t||t.resolve(e),e}throw null===(s=this.refreshingDeferred)||void 0===s||s.reject(n),n}finally{this.refreshingDeferred=null,this._debug(r,"end")}}async _notifyAllSubscribers(e,t){let s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r="#_notifyAllSubscribers(".concat(e,")");this._debug(r,"begin",t,"broadcast = ".concat(s));try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:t});const r=[],n=Array.from(this.stateChangeEmitters.values()).map(async s=>{try{await s.callback(e,t)}catch(n){r.push(n)}});if(await Promise.all(n),r.length>0){for(let e=0;e<r.length;e+=1)console.error(r[e]);throw r[0]}}finally{this._debug(r,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),s=t.user&&!0===t.user.__isUserNotAvailableProxy;if(this.userStorage){!s&&t.user&&await pt(this.userStorage,this.storageKey+"-user",{user:t.user});const e=Object.assign({},t);delete e.user;const r=At(e);await pt(this.storage,this.storageKey,r)}else{const e=At(t);await pt(this.storage,this.storageKey,e)}}async _removeSession(){this._debug("#_removeSession()"),await xt(this.storage,this.storageKey),await xt(this.storage,this.storageKey+"-code-verifier"),await xt(this.storage,this.storageKey+"-user"),this.userStorage&&await xt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&dt()&&(null===window||void 0===window?void 0:window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Oe);this.autoRefreshTicker=e,e&&"object"===typeof e&&"function"===typeof e.unref?e.unref():"undefined"!==typeof Deno&&"function"===typeof Deno.unrefTimer&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async e=>{const{data:{session:s}}=e;if(!s||!s.refresh_token||!s.expires_at)return void this._debug("#_autoRefreshTokenTick()","no session");const r=Math.floor((1e3*s.expires_at-t)/Oe);this._debug("#_autoRefreshTokenTick()","access token expires in ".concat(r," ticks, a tick lasts ").concat(Oe,"ms, refresh threshold is ").concat(3," ticks")),r<=3&&await this._callRefreshToken(s.refresh_token)})}catch(e){console.error("Auto refresh tick failed with error. This is likely a transient error.",e)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(!(e.isAcquireTimeout||e instanceof qt))throw e;this._debug("auto refresh token tick lock not available")}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!dt()||!(null===window||void 0===window?void 0:window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),null===window||void 0===window||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t="#_onVisibilityChanged(".concat(e,")");this._debug(t,"visibilityState",document.visibilityState),"visible"===document.visibilityState?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{"visible"===document.visibilityState?await this._recoverAndRefresh():this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting")}))):"hidden"===document.visibilityState&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,s){const r=["provider=".concat(encodeURIComponent(t))];if((null===s||void 0===s?void 0:s.redirectTo)&&r.push("redirect_to=".concat(encodeURIComponent(s.redirectTo))),(null===s||void 0===s?void 0:s.scopes)&&r.push("scopes=".concat(encodeURIComponent(s.scopes))),"pkce"===this.flowType){const[e,t]=await jt(this.storage,this.storageKey),s=new URLSearchParams({code_challenge:"".concat(encodeURIComponent(e)),code_challenge_method:"".concat(encodeURIComponent(t))});r.push(s.toString())}if(null===s||void 0===s?void 0:s.queryParams){const e=new URLSearchParams(s.queryParams);r.push(e.toString())}return(null===s||void 0===s?void 0:s.skipBrowserRedirect)&&r.push("skip_http_redirect=".concat(s.skipBrowserRedirect)),"".concat(e,"?").concat(r.join("&"))}async _unenroll(e){try{return await this._useSession(async t=>{var s;const{data:r,error:n}=t;return n?{data:null,error:n}:await Tt(this.fetch,"DELETE","".concat(this.url,"/factors/").concat(e.factorId),{headers:this.headers,jwt:null===(s=null===r||void 0===r?void 0:r.session)||void 0===s?void 0:s.access_token})})}catch(t){if(Be(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var s,r;const{data:n,error:a}=t;if(a)return{data:null,error:a};const i=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},"phone"===e.factorType?{phone:e.phone}:{issuer:e.issuer}),{data:o,error:l}=await Tt(this.fetch,"POST","".concat(this.url,"/factors"),{body:i,headers:this.headers,jwt:null===(s=null===n||void 0===n?void 0:n.session)||void 0===s?void 0:s.access_token});return l?{data:null,error:l}:("totp"===e.factorType&&(null===(r=null===o||void 0===o?void 0:o.totp)||void 0===r?void 0:r.qr_code)&&(o.totp.qr_code="data:image/svg+xml;utf-8,".concat(o.totp.qr_code)),{data:o,error:null})})}catch(t){if(Be(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:r,error:n}=t;if(n)return{data:null,error:n};const{data:a,error:i}=await Tt(this.fetch,"POST","".concat(this.url,"/factors/").concat(e.factorId,"/verify"),{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:null===(s=null===r||void 0===r?void 0:r.session)||void 0===s?void 0:s.access_token});return i?{data:null,error:i}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:i})})}catch(t){if(Be(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:r,error:n}=t;return n?{data:null,error:n}:await Tt(this.fetch,"POST","".concat(this.url,"/factors/").concat(e.factorId,"/challenge"),{body:{channel:e.channel},headers:this.headers,jwt:null===(s=null===r||void 0===r?void 0:r.session)||void 0===s?void 0:s.access_token})})}catch(t){if(Be(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:s}=await this._challenge({factorId:e.factorId});return s?{data:null,error:s}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const s=(null===e||void 0===e?void 0:e.factors)||[],r=s.filter(e=>"totp"===e.factor_type&&"verified"===e.status),n=s.filter(e=>"phone"===e.factor_type&&"verified"===e.status);return{data:{all:s,totp:r,phone:n},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,s;const{data:{session:r},error:n}=e;if(n)return{data:null,error:n};if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=vt(r.access_token);let i=null;a.aal&&(i=a.aal);let o=i;(null!==(s=null===(t=r.user.factors)||void 0===t?void 0:t.filter(e=>"verified"===e.status))&&void 0!==s?s:[]).length>0&&(o="aal2");return{data:{currentLevel:i,nextLevel:o,currentAuthenticationMethods:a.amr||[]},error:null}}))}async fetchJwk(e){let t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{keys:[]}).keys.find(t=>t.kid===e);if(t)return t;const s=Date.now();if(t=this.jwks.keys.find(t=>t.kid===e),t&&this.jwks_cached_at+6e5>s)return t;const{data:r,error:n}=await Tt(this.fetch,"GET","".concat(this.url,"/.well-known/jwks.json"),{headers:this.headers});if(n)throw n;return r.keys&&0!==r.keys.length?(this.jwks=r,this.jwks_cached_at=s,t=r.keys.find(t=>t.kid===e),t||null):null}async getClaims(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{let s=e;if(!s){const{data:e,error:t}=await this.getSession();if(t||!e.session)return{data:null,error:t};s=e.session.access_token}const{header:r,payload:n,signature:a,raw:{header:i,payload:o}}=vt(s);(null===t||void 0===t?void 0:t.allowExpired)||function(e){if(!e)throw new Error("Missing exp claim");if(e<=Math.floor(Date.now()/1e3))throw new Error("JWT has expired")}(n.exp);const l=r.alg&&!r.alg.startsWith("HS")&&r.kid&&"crypto"in globalThis&&"subtle"in globalThis.crypto?await this.fetchJwk(r.kid,(null===t||void 0===t?void 0:t.keys)?{keys:t.keys}:null===t||void 0===t?void 0:t.jwks):null;if(!l){const{error:e}=await this.getUser(s);if(e)throw e;return{data:{claims:n,header:r,signature:a},error:null}}const c=function(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}(r.alg),d=await crypto.subtle.importKey("jwk",l,c,!0,["verify"]);if(!await crypto.subtle.verify(c,d,a,function(e){const t=[];return ot(e,e=>t.push(e)),new Uint8Array(t)}("".concat(i,".").concat(o))))throw new Xe("Invalid JWT signature");return{data:{claims:n,header:r,signature:a},error:null}}catch(s){if(Be(s))return{data:null,error:s};throw s}}}Qt.nextInstanceID=0;const Jt=Qt;class Yt extends Jt{constructor(e){super(e)}}var $t=function(e,t,s,r){return new(s||(s=Promise))(function(n,a){function i(e){try{l(r.next(e))}catch(t){a(t)}}function o(e){try{l(r.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(i,o)}l((r=r.apply(e,t||[])).next())})};class Xt{constructor(e,t,s){var r,n,a;this.supabaseUrl=e,this.supabaseKey=t;const i=function(e){const t=null===e||void 0===e?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL((s=t).endsWith("/")?s:s+"/")}catch(r){throw Error("Invalid supabaseUrl: Provided URL is malformed.")}var s}(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",i),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",i),this.storageUrl=new URL("storage/v1",i),this.functionsUrl=new URL("functions/v1",i);const o="sb-".concat(i.hostname.split(".")[0],"-auth-token"),l=function(e,t){var s,r;const{db:n,auth:a,realtime:i,global:o}=e,{db:l,auth:c,realtime:d,global:u}=t,h={db:Object.assign(Object.assign({},l),n),auth:Object.assign(Object.assign({},c),a),realtime:Object.assign(Object.assign({},d),i),storage:{},global:Object.assign(Object.assign(Object.assign({},u),o),{headers:Object.assign(Object.assign({},null!==(s=null===u||void 0===u?void 0:u.headers)&&void 0!==s?s:{}),null!==(r=null===o||void 0===o?void 0:o.headers)&&void 0!==r?r:{})}),accessToken:()=>Ie(this,void 0,void 0,function*(){return""})};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}(null!==s&&void 0!==s?s:{},{db:ke,realtime:_e,auth:Object.assign(Object.assign({},Ae),{storageKey:o}),global:Se});this.storageKey=null!==(r=l.auth.storageKey)&&void 0!==r?r:"",this.headers=null!==(n=l.global.headers)&&void 0!==n?n:{},l.accessToken?(this.accessToken=l.accessToken,this.auth=new Proxy({},{get:(e,t)=>{throw new Error("@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.".concat(String(t)," is not possible"))}})):this.auth=this._initSupabaseAuthClient(null!==(a=l.auth)&&void 0!==a?a:{},this.headers,l.global.fetch),this.fetch=Te(t,this._getAccessToken.bind(this),l.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},l.realtime)),this.rest=new u(new URL("rest/v1",i).href,{headers:this.headers,schema:l.db.schema,fetch:this.fetch}),this.storage=new we(this.storageUrl.href,this.headers,this.fetch,null===s||void 0===s?void 0:s.storage),l.accessToken||this._listenForAuthEvents()}get functions(){return new c(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.rest.rpc(e,t,s)}channel(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}};return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return $t(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:s}=yield this.auth.getSession();return null!==(t=null===(e=s.session)||void 0===e?void 0:e.access_token)&&void 0!==t?t:this.supabaseKey})}_initSupabaseAuthClient(e,t,s){let{autoRefreshToken:r,persistSession:n,detectSessionInUrl:a,storage:i,userStorage:o,storageKey:l,flowType:c,lock:d,debug:u}=e;const h={Authorization:"Bearer ".concat(this.supabaseKey),apikey:"".concat(this.supabaseKey)};return new Yt({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),t),storageKey:l,autoRefreshToken:r,persistSession:n,detectSessionInUrl:a,storage:i,userStorage:o,flowType:c,lock:d,debug:u,fetch:s,hasCustomAuthorizationHeader:Object.keys(this.headers).some(e=>"authorization"===e.toLowerCase())})}_initRealtimeClient(e){return new Y(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},null===e||void 0===e?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",null===t||void 0===t?void 0:t.access_token)})}_handleTokenChanged(e,t,s){"TOKEN_REFRESHED"!==e&&"SIGNED_IN"!==e||this.changedAccessToken===s?"SIGNED_OUT"===e&&(this.realtime.setAuth(),"STORAGE"==t&&this.auth.signOut(),this.changedAccessToken=void 0):this.changedAccessToken=s}}var es=s(2285);(function(){if("undefined"!==typeof window)return!1;if("undefined"===typeof es)return!1;const e=es.version;if(void 0===e||null===e)return!1;const t=e.match(/^v(\d+)\./);return!!t&&parseInt(t[1],10)<=18})()&&console.warn("\u26a0\ufe0f  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const ts="https://dlgfhgcczqefbuhcyazh.supabase.co",ss="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRsZ2ZoZ2NjenFlZmJ1aGN5YXpoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ2MDM3NjQsImV4cCI6MjA3MDE3OTc2NH0.ILqv7fUAP8KAr0GzkqeqaRqDcbKcPhcHtIQR7PYFIgY";const rs=ts&&ss?((e,t,s)=>new Xt(e,t,s))(ts,ss):null,ns=async()=>{if(!rs)return console.error("[SUPABASE] Client non initialis\xe9 - configuration manquante"),{success:!1,error:"Configuration Supabase manquante"};try{const{error:e}=await rs.from("users").select("count").limit(1);return e?(console.error("[SUPABASE] Erreur de connexion:",e.message),{success:!1,error:e.message}):(console.log("[SUPABASE] Connexion r\xe9ussie"),{success:!0})}catch(e){return console.error("[SUPABASE] Erreur de connexion:",e.message),{success:!1,error:e.message}}}},6382:(e,t,s)=>{"use strict";const r=s(4445),n=s(6900),a="function"===typeof Symbol&&"function"===typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.hp=l,t.IS=50;const i=2147483647;function o(e){if(e>i)throw new RangeError('The value "'+e+'" is invalid for option "size"');const t=new Uint8Array(e);return Object.setPrototypeOf(t,l.prototype),t}function l(e,t,s){if("number"===typeof e){if("string"===typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return u(e)}return c(e,t,s)}function c(e,t,s){if("string"===typeof e)return function(e,t){"string"===typeof t&&""!==t||(t="utf8");if(!l.isEncoding(t))throw new TypeError("Unknown encoding: "+t);const s=0|f(e,t);let r=o(s);const n=r.write(e,t);n!==s&&(r=r.slice(0,n));return r}(e,t);if(ArrayBuffer.isView(e))return function(e){if(Q(e,Uint8Array)){const t=new Uint8Array(e);return m(t.buffer,t.byteOffset,t.byteLength)}return h(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(Q(e,ArrayBuffer)||e&&Q(e.buffer,ArrayBuffer))return m(e,t,s);if("undefined"!==typeof SharedArrayBuffer&&(Q(e,SharedArrayBuffer)||e&&Q(e.buffer,SharedArrayBuffer)))return m(e,t,s);if("number"===typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');const r=e.valueOf&&e.valueOf();if(null!=r&&r!==e)return l.from(r,t,s);const n=function(e){if(l.isBuffer(e)){const t=0|p(e.length),s=o(t);return 0===s.length||e.copy(s,0,0,t),s}if(void 0!==e.length)return"number"!==typeof e.length||J(e.length)?o(0):h(e);if("Buffer"===e.type&&Array.isArray(e.data))return h(e.data)}(e);if(n)return n;if("undefined"!==typeof Symbol&&null!=Symbol.toPrimitive&&"function"===typeof e[Symbol.toPrimitive])return l.from(e[Symbol.toPrimitive]("string"),t,s);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function d(e){if("number"!==typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function u(e){return d(e),o(e<0?0:0|p(e))}function h(e){const t=e.length<0?0:0|p(e.length),s=o(t);for(let r=0;r<t;r+=1)s[r]=255&e[r];return s}function m(e,t,s){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(s||0))throw new RangeError('"length" is outside of buffer bounds');let r;return r=void 0===t&&void 0===s?new Uint8Array(e):void 0===s?new Uint8Array(e,t):new Uint8Array(e,t,s),Object.setPrototypeOf(r,l.prototype),r}function p(e){if(e>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return 0|e}function f(e,t){if(l.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||Q(e,ArrayBuffer))return e.byteLength;if("string"!==typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);const s=e.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===s)return 0;let n=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return s;case"utf8":case"utf-8":return G(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*s;case"hex":return s>>>1;case"base64":return K(e).length;default:if(n)return r?-1:G(e).length;t=(""+t).toLowerCase(),n=!0}}function x(e,t,s){let r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===s||s>this.length)&&(s=this.length),s<=0)return"";if((s>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return P(this,t,s);case"utf8":case"utf-8":return A(this,t,s);case"ascii":return E(this,t,s);case"latin1":case"binary":return C(this,t,s);case"base64":return k(this,t,s);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,t,s);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function g(e,t,s){const r=e[t];e[t]=e[s],e[s]=r}function v(e,t,s,r,n){if(0===e.length)return-1;if("string"===typeof s?(r=s,s=0):s>2147483647?s=2147483647:s<-2147483648&&(s=-2147483648),J(s=+s)&&(s=n?0:e.length-1),s<0&&(s=e.length+s),s>=e.length){if(n)return-1;s=e.length-1}else if(s<0){if(!n)return-1;s=0}if("string"===typeof t&&(t=l.from(t,r)),l.isBuffer(t))return 0===t.length?-1:y(e,t,s,r,n);if("number"===typeof t)return t&=255,"function"===typeof Uint8Array.prototype.indexOf?n?Uint8Array.prototype.indexOf.call(e,t,s):Uint8Array.prototype.lastIndexOf.call(e,t,s):y(e,[t],s,r,n);throw new TypeError("val must be string, number or Buffer")}function y(e,t,s,r,n){let a,i=1,o=e.length,l=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;i=2,o/=2,l/=2,s/=2}function c(e,t){return 1===i?e[t]:e.readUInt16BE(t*i)}if(n){let r=-1;for(a=s;a<o;a++)if(c(e,a)===c(t,-1===r?0:a-r)){if(-1===r&&(r=a),a-r+1===l)return r*i}else-1!==r&&(a-=a-r),r=-1}else for(s+l>o&&(s=o-l),a=s;a>=0;a--){let s=!0;for(let r=0;r<l;r++)if(c(e,a+r)!==c(t,r)){s=!1;break}if(s)return a}return-1}function b(e,t,s,r){s=Number(s)||0;const n=e.length-s;r?(r=Number(r))>n&&(r=n):r=n;const a=t.length;let i;for(r>a/2&&(r=a/2),i=0;i<r;++i){const r=parseInt(t.substr(2*i,2),16);if(J(r))return i;e[s+i]=r}return i}function j(e,t,s,r){return Z(G(t,e.length-s),e,s,r)}function w(e,t,s,r){return Z(function(e){const t=[];for(let s=0;s<e.length;++s)t.push(255&e.charCodeAt(s));return t}(t),e,s,r)}function N(e,t,s,r){return Z(K(t),e,s,r)}function S(e,t,s,r){return Z(function(e,t){let s,r,n;const a=[];for(let i=0;i<e.length&&!((t-=2)<0);++i)s=e.charCodeAt(i),r=s>>8,n=s%256,a.push(n),a.push(r);return a}(t,e.length-s),e,s,r)}function k(e,t,s){return 0===t&&s===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,s))}function A(e,t,s){s=Math.min(e.length,s);const r=[];let n=t;for(;n<s;){const t=e[n];let a=null,i=t>239?4:t>223?3:t>191?2:1;if(n+i<=s){let s,r,o,l;switch(i){case 1:t<128&&(a=t);break;case 2:s=e[n+1],128===(192&s)&&(l=(31&t)<<6|63&s,l>127&&(a=l));break;case 3:s=e[n+1],r=e[n+2],128===(192&s)&&128===(192&r)&&(l=(15&t)<<12|(63&s)<<6|63&r,l>2047&&(l<55296||l>57343)&&(a=l));break;case 4:s=e[n+1],r=e[n+2],o=e[n+3],128===(192&s)&&128===(192&r)&&128===(192&o)&&(l=(15&t)<<18|(63&s)<<12|(63&r)<<6|63&o,l>65535&&l<1114112&&(a=l))}}null===a?(a=65533,i=1):a>65535&&(a-=65536,r.push(a>>>10&1023|55296),a=56320|1023&a),r.push(a),n+=i}return function(e){const t=e.length;if(t<=_)return String.fromCharCode.apply(String,e);let s="",r=0;for(;r<t;)s+=String.fromCharCode.apply(String,e.slice(r,r+=_));return s}(r)}l.TYPED_ARRAY_SUPPORT=function(){try{const e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),l.TYPED_ARRAY_SUPPORT||"undefined"===typeof console||"function"!==typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(l.prototype,"parent",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.buffer}}),Object.defineProperty(l.prototype,"offset",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.byteOffset}}),l.poolSize=8192,l.from=function(e,t,s){return c(e,t,s)},Object.setPrototypeOf(l.prototype,Uint8Array.prototype),Object.setPrototypeOf(l,Uint8Array),l.alloc=function(e,t,s){return function(e,t,s){return d(e),e<=0?o(e):void 0!==t?"string"===typeof s?o(e).fill(t,s):o(e).fill(t):o(e)}(e,t,s)},l.allocUnsafe=function(e){return u(e)},l.allocUnsafeSlow=function(e){return u(e)},l.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==l.prototype},l.compare=function(e,t){if(Q(e,Uint8Array)&&(e=l.from(e,e.offset,e.byteLength)),Q(t,Uint8Array)&&(t=l.from(t,t.offset,t.byteLength)),!l.isBuffer(e)||!l.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let s=e.length,r=t.length;for(let n=0,a=Math.min(s,r);n<a;++n)if(e[n]!==t[n]){s=e[n],r=t[n];break}return s<r?-1:r<s?1:0},l.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return l.alloc(0);let s;if(void 0===t)for(t=0,s=0;s<e.length;++s)t+=e[s].length;const r=l.allocUnsafe(t);let n=0;for(s=0;s<e.length;++s){let t=e[s];if(Q(t,Uint8Array))n+t.length>r.length?(l.isBuffer(t)||(t=l.from(t)),t.copy(r,n)):Uint8Array.prototype.set.call(r,t,n);else{if(!l.isBuffer(t))throw new TypeError('"list" argument must be an Array of Buffers');t.copy(r,n)}n+=t.length}return r},l.byteLength=f,l.prototype._isBuffer=!0,l.prototype.swap16=function(){const e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)g(this,t,t+1);return this},l.prototype.swap32=function(){const e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)g(this,t,t+3),g(this,t+1,t+2);return this},l.prototype.swap64=function(){const e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)g(this,t,t+7),g(this,t+1,t+6),g(this,t+2,t+5),g(this,t+3,t+4);return this},l.prototype.toString=function(){const e=this.length;return 0===e?"":0===arguments.length?A(this,0,e):x.apply(this,arguments)},l.prototype.toLocaleString=l.prototype.toString,l.prototype.equals=function(e){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===l.compare(this,e)},l.prototype.inspect=function(){let e="";const s=t.IS;return e=this.toString("hex",0,s).replace(/(.{2})/g,"$1 ").trim(),this.length>s&&(e+=" ... "),"<Buffer "+e+">"},a&&(l.prototype[a]=l.prototype.inspect),l.prototype.compare=function(e,t,s,r,n){if(Q(e,Uint8Array)&&(e=l.from(e,e.offset,e.byteLength)),!l.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===s&&(s=e?e.length:0),void 0===r&&(r=0),void 0===n&&(n=this.length),t<0||s>e.length||r<0||n>this.length)throw new RangeError("out of range index");if(r>=n&&t>=s)return 0;if(r>=n)return-1;if(t>=s)return 1;if(this===e)return 0;let a=(n>>>=0)-(r>>>=0),i=(s>>>=0)-(t>>>=0);const o=Math.min(a,i),c=this.slice(r,n),d=e.slice(t,s);for(let l=0;l<o;++l)if(c[l]!==d[l]){a=c[l],i=d[l];break}return a<i?-1:i<a?1:0},l.prototype.includes=function(e,t,s){return-1!==this.indexOf(e,t,s)},l.prototype.indexOf=function(e,t,s){return v(this,e,t,s,!0)},l.prototype.lastIndexOf=function(e,t,s){return v(this,e,t,s,!1)},l.prototype.write=function(e,t,s,r){if(void 0===t)r="utf8",s=this.length,t=0;else if(void 0===s&&"string"===typeof t)r=t,s=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(s)?(s>>>=0,void 0===r&&(r="utf8")):(r=s,s=void 0)}const n=this.length-t;if((void 0===s||s>n)&&(s=n),e.length>0&&(s<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");let a=!1;for(;;)switch(r){case"hex":return b(this,e,t,s);case"utf8":case"utf-8":return j(this,e,t,s);case"ascii":case"latin1":case"binary":return w(this,e,t,s);case"base64":return N(this,e,t,s);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,e,t,s);default:if(a)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),a=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const _=4096;function E(e,t,s){let r="";s=Math.min(e.length,s);for(let n=t;n<s;++n)r+=String.fromCharCode(127&e[n]);return r}function C(e,t,s){let r="";s=Math.min(e.length,s);for(let n=t;n<s;++n)r+=String.fromCharCode(e[n]);return r}function P(e,t,s){const r=e.length;(!t||t<0)&&(t=0),(!s||s<0||s>r)&&(s=r);let n="";for(let a=t;a<s;++a)n+=Y[e[a]];return n}function T(e,t,s){const r=e.slice(t,s);let n="";for(let a=0;a<r.length-1;a+=2)n+=String.fromCharCode(r[a]+256*r[a+1]);return n}function I(e,t,s){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>s)throw new RangeError("Trying to access beyond buffer length")}function R(e,t,s,r,n,a){if(!l.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>n||t<a)throw new RangeError('"value" argument is out of bounds');if(s+r>e.length)throw new RangeError("Index out of range")}function O(e,t,s,r,n){V(t,r,n,e,s,7);let a=Number(t&BigInt(4294967295));e[s++]=a,a>>=8,e[s++]=a,a>>=8,e[s++]=a,a>>=8,e[s++]=a;let i=Number(t>>BigInt(32)&BigInt(4294967295));return e[s++]=i,i>>=8,e[s++]=i,i>>=8,e[s++]=i,i>>=8,e[s++]=i,s}function D(e,t,s,r,n){V(t,r,n,e,s,7);let a=Number(t&BigInt(4294967295));e[s+7]=a,a>>=8,e[s+6]=a,a>>=8,e[s+5]=a,a>>=8,e[s+4]=a;let i=Number(t>>BigInt(32)&BigInt(4294967295));return e[s+3]=i,i>>=8,e[s+2]=i,i>>=8,e[s+1]=i,i>>=8,e[s]=i,s+8}function L(e,t,s,r,n,a){if(s+r>e.length)throw new RangeError("Index out of range");if(s<0)throw new RangeError("Index out of range")}function z(e,t,s,r,a){return t=+t,s>>>=0,a||L(e,0,s,4),n.write(e,t,s,r,23,4),s+4}function M(e,t,s,r,a){return t=+t,s>>>=0,a||L(e,0,s,8),n.write(e,t,s,r,52,8),s+8}l.prototype.slice=function(e,t){const s=this.length;(e=~~e)<0?(e+=s)<0&&(e=0):e>s&&(e=s),(t=void 0===t?s:~~t)<0?(t+=s)<0&&(t=0):t>s&&(t=s),t<e&&(t=e);const r=this.subarray(e,t);return Object.setPrototypeOf(r,l.prototype),r},l.prototype.readUintLE=l.prototype.readUIntLE=function(e,t,s){e>>>=0,t>>>=0,s||I(e,t,this.length);let r=this[e],n=1,a=0;for(;++a<t&&(n*=256);)r+=this[e+a]*n;return r},l.prototype.readUintBE=l.prototype.readUIntBE=function(e,t,s){e>>>=0,t>>>=0,s||I(e,t,this.length);let r=this[e+--t],n=1;for(;t>0&&(n*=256);)r+=this[e+--t]*n;return r},l.prototype.readUint8=l.prototype.readUInt8=function(e,t){return e>>>=0,t||I(e,1,this.length),this[e]},l.prototype.readUint16LE=l.prototype.readUInt16LE=function(e,t){return e>>>=0,t||I(e,2,this.length),this[e]|this[e+1]<<8},l.prototype.readUint16BE=l.prototype.readUInt16BE=function(e,t){return e>>>=0,t||I(e,2,this.length),this[e]<<8|this[e+1]},l.prototype.readUint32LE=l.prototype.readUInt32LE=function(e,t){return e>>>=0,t||I(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},l.prototype.readUint32BE=l.prototype.readUInt32BE=function(e,t){return e>>>=0,t||I(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},l.prototype.readBigUInt64LE=$(function(e){q(e>>>=0,"offset");const t=this[e],s=this[e+7];void 0!==t&&void 0!==s||H(e,this.length-8);const r=t+256*this[++e]+65536*this[++e]+this[++e]*2**24,n=this[++e]+256*this[++e]+65536*this[++e]+s*2**24;return BigInt(r)+(BigInt(n)<<BigInt(32))}),l.prototype.readBigUInt64BE=$(function(e){q(e>>>=0,"offset");const t=this[e],s=this[e+7];void 0!==t&&void 0!==s||H(e,this.length-8);const r=t*2**24+65536*this[++e]+256*this[++e]+this[++e],n=this[++e]*2**24+65536*this[++e]+256*this[++e]+s;return(BigInt(r)<<BigInt(32))+BigInt(n)}),l.prototype.readIntLE=function(e,t,s){e>>>=0,t>>>=0,s||I(e,t,this.length);let r=this[e],n=1,a=0;for(;++a<t&&(n*=256);)r+=this[e+a]*n;return n*=128,r>=n&&(r-=Math.pow(2,8*t)),r},l.prototype.readIntBE=function(e,t,s){e>>>=0,t>>>=0,s||I(e,t,this.length);let r=t,n=1,a=this[e+--r];for(;r>0&&(n*=256);)a+=this[e+--r]*n;return n*=128,a>=n&&(a-=Math.pow(2,8*t)),a},l.prototype.readInt8=function(e,t){return e>>>=0,t||I(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},l.prototype.readInt16LE=function(e,t){e>>>=0,t||I(e,2,this.length);const s=this[e]|this[e+1]<<8;return 32768&s?4294901760|s:s},l.prototype.readInt16BE=function(e,t){e>>>=0,t||I(e,2,this.length);const s=this[e+1]|this[e]<<8;return 32768&s?4294901760|s:s},l.prototype.readInt32LE=function(e,t){return e>>>=0,t||I(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},l.prototype.readInt32BE=function(e,t){return e>>>=0,t||I(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},l.prototype.readBigInt64LE=$(function(e){q(e>>>=0,"offset");const t=this[e],s=this[e+7];void 0!==t&&void 0!==s||H(e,this.length-8);const r=this[e+4]+256*this[e+5]+65536*this[e+6]+(s<<24);return(BigInt(r)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*2**24)}),l.prototype.readBigInt64BE=$(function(e){q(e>>>=0,"offset");const t=this[e],s=this[e+7];void 0!==t&&void 0!==s||H(e,this.length-8);const r=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(r)<<BigInt(32))+BigInt(this[++e]*2**24+65536*this[++e]+256*this[++e]+s)}),l.prototype.readFloatLE=function(e,t){return e>>>=0,t||I(e,4,this.length),n.read(this,e,!0,23,4)},l.prototype.readFloatBE=function(e,t){return e>>>=0,t||I(e,4,this.length),n.read(this,e,!1,23,4)},l.prototype.readDoubleLE=function(e,t){return e>>>=0,t||I(e,8,this.length),n.read(this,e,!0,52,8)},l.prototype.readDoubleBE=function(e,t){return e>>>=0,t||I(e,8,this.length),n.read(this,e,!1,52,8)},l.prototype.writeUintLE=l.prototype.writeUIntLE=function(e,t,s,r){if(e=+e,t>>>=0,s>>>=0,!r){R(this,e,t,s,Math.pow(2,8*s)-1,0)}let n=1,a=0;for(this[t]=255&e;++a<s&&(n*=256);)this[t+a]=e/n&255;return t+s},l.prototype.writeUintBE=l.prototype.writeUIntBE=function(e,t,s,r){if(e=+e,t>>>=0,s>>>=0,!r){R(this,e,t,s,Math.pow(2,8*s)-1,0)}let n=s-1,a=1;for(this[t+n]=255&e;--n>=0&&(a*=256);)this[t+n]=e/a&255;return t+s},l.prototype.writeUint8=l.prototype.writeUInt8=function(e,t,s){return e=+e,t>>>=0,s||R(this,e,t,1,255,0),this[t]=255&e,t+1},l.prototype.writeUint16LE=l.prototype.writeUInt16LE=function(e,t,s){return e=+e,t>>>=0,s||R(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},l.prototype.writeUint16BE=l.prototype.writeUInt16BE=function(e,t,s){return e=+e,t>>>=0,s||R(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},l.prototype.writeUint32LE=l.prototype.writeUInt32LE=function(e,t,s){return e=+e,t>>>=0,s||R(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},l.prototype.writeUint32BE=l.prototype.writeUInt32BE=function(e,t,s){return e=+e,t>>>=0,s||R(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},l.prototype.writeBigUInt64LE=$(function(e){return O(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeBigUInt64BE=$(function(e){return D(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeIntLE=function(e,t,s,r){if(e=+e,t>>>=0,!r){const r=Math.pow(2,8*s-1);R(this,e,t,s,r-1,-r)}let n=0,a=1,i=0;for(this[t]=255&e;++n<s&&(a*=256);)e<0&&0===i&&0!==this[t+n-1]&&(i=1),this[t+n]=(e/a|0)-i&255;return t+s},l.prototype.writeIntBE=function(e,t,s,r){if(e=+e,t>>>=0,!r){const r=Math.pow(2,8*s-1);R(this,e,t,s,r-1,-r)}let n=s-1,a=1,i=0;for(this[t+n]=255&e;--n>=0&&(a*=256);)e<0&&0===i&&0!==this[t+n+1]&&(i=1),this[t+n]=(e/a|0)-i&255;return t+s},l.prototype.writeInt8=function(e,t,s){return e=+e,t>>>=0,s||R(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},l.prototype.writeInt16LE=function(e,t,s){return e=+e,t>>>=0,s||R(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},l.prototype.writeInt16BE=function(e,t,s){return e=+e,t>>>=0,s||R(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},l.prototype.writeInt32LE=function(e,t,s){return e=+e,t>>>=0,s||R(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},l.prototype.writeInt32BE=function(e,t,s){return e=+e,t>>>=0,s||R(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},l.prototype.writeBigInt64LE=$(function(e){return O(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),l.prototype.writeBigInt64BE=$(function(e){return D(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),l.prototype.writeFloatLE=function(e,t,s){return z(this,e,t,!0,s)},l.prototype.writeFloatBE=function(e,t,s){return z(this,e,t,!1,s)},l.prototype.writeDoubleLE=function(e,t,s){return M(this,e,t,!0,s)},l.prototype.writeDoubleBE=function(e,t,s){return M(this,e,t,!1,s)},l.prototype.copy=function(e,t,s,r){if(!l.isBuffer(e))throw new TypeError("argument should be a Buffer");if(s||(s=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<s&&(r=s),r===s)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(s<0||s>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-s&&(r=e.length-t+s);const n=r-s;return this===e&&"function"===typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,s,r):Uint8Array.prototype.set.call(e,this.subarray(s,r),t),n},l.prototype.fill=function(e,t,s,r){if("string"===typeof e){if("string"===typeof t?(r=t,t=0,s=this.length):"string"===typeof s&&(r=s,s=this.length),void 0!==r&&"string"!==typeof r)throw new TypeError("encoding must be a string");if("string"===typeof r&&!l.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===e.length){const t=e.charCodeAt(0);("utf8"===r&&t<128||"latin1"===r)&&(e=t)}}else"number"===typeof e?e&=255:"boolean"===typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<s)throw new RangeError("Out of range index");if(s<=t)return this;let n;if(t>>>=0,s=void 0===s?this.length:s>>>0,e||(e=0),"number"===typeof e)for(n=t;n<s;++n)this[n]=e;else{const a=l.isBuffer(e)?e:l.from(e,r),i=a.length;if(0===i)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(n=0;n<s-t;++n)this[n+t]=a[n%i]}return this};const F={};function U(e,t,s){F[e]=class extends s{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name="".concat(this.name," [").concat(e,"]"),this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return"".concat(this.name," [").concat(e,"]: ").concat(this.message)}}}function B(e){let t="",s=e.length;const r="-"===e[0]?1:0;for(;s>=r+4;s-=3)t="_".concat(e.slice(s-3,s)).concat(t);return"".concat(e.slice(0,s)).concat(t)}function V(e,t,s,r,n,a){if(e>s||e<t){const r="bigint"===typeof t?"n":"";let n;throw n=a>3?0===t||t===BigInt(0)?">= 0".concat(r," and < 2").concat(r," ** ").concat(8*(a+1)).concat(r):">= -(2".concat(r," ** ").concat(8*(a+1)-1).concat(r,") and < 2 ** ")+"".concat(8*(a+1)-1).concat(r):">= ".concat(t).concat(r," and <= ").concat(s).concat(r),new F.ERR_OUT_OF_RANGE("value",n,e)}!function(e,t,s){q(t,"offset"),void 0!==e[t]&&void 0!==e[t+s]||H(t,e.length-(s+1))}(r,n,a)}function q(e,t){if("number"!==typeof e)throw new F.ERR_INVALID_ARG_TYPE(t,"number",e)}function H(e,t,s){if(Math.floor(e)!==e)throw q(e,s),new F.ERR_OUT_OF_RANGE(s||"offset","an integer",e);if(t<0)throw new F.ERR_BUFFER_OUT_OF_BOUNDS;throw new F.ERR_OUT_OF_RANGE(s||"offset",">= ".concat(s?1:0," and <= ").concat(t),e)}U("ERR_BUFFER_OUT_OF_BOUNDS",function(e){return e?"".concat(e," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"},RangeError),U("ERR_INVALID_ARG_TYPE",function(e,t){return'The "'.concat(e,'" argument must be of type number. Received type ').concat(typeof t)},TypeError),U("ERR_OUT_OF_RANGE",function(e,t,s){let r='The value of "'.concat(e,'" is out of range.'),n=s;return Number.isInteger(s)&&Math.abs(s)>2**32?n=B(String(s)):"bigint"===typeof s&&(n=String(s),(s>BigInt(2)**BigInt(32)||s<-(BigInt(2)**BigInt(32)))&&(n=B(n)),n+="n"),r+=" It must be ".concat(t,". Received ").concat(n),r},RangeError);const W=/[^+/0-9A-Za-z-_]/g;function G(e,t){let s;t=t||1/0;const r=e.length;let n=null;const a=[];for(let i=0;i<r;++i){if(s=e.charCodeAt(i),s>55295&&s<57344){if(!n){if(s>56319){(t-=3)>-1&&a.push(239,191,189);continue}if(i+1===r){(t-=3)>-1&&a.push(239,191,189);continue}n=s;continue}if(s<56320){(t-=3)>-1&&a.push(239,191,189),n=s;continue}s=65536+(n-55296<<10|s-56320)}else n&&(t-=3)>-1&&a.push(239,191,189);if(n=null,s<128){if((t-=1)<0)break;a.push(s)}else if(s<2048){if((t-=2)<0)break;a.push(s>>6|192,63&s|128)}else if(s<65536){if((t-=3)<0)break;a.push(s>>12|224,s>>6&63|128,63&s|128)}else{if(!(s<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(s>>18|240,s>>12&63|128,s>>6&63|128,63&s|128)}}return a}function K(e){return r.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(W,"")).length<2)return"";for(;e.length%4!==0;)e+="=";return e}(e))}function Z(e,t,s,r){let n;for(n=0;n<r&&!(n+s>=t.length||n>=e.length);++n)t[n+s]=e[n];return n}function Q(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function J(e){return e!==e}const Y=function(){const e="0123456789abcdef",t=new Array(256);for(let s=0;s<16;++s){const r=16*s;for(let n=0;n<16;++n)t[r+n]=e[s]+e[n]}return t}();function $(e){return"undefined"===typeof BigInt?X:e}function X(){throw new Error("BigInt not supported")}},6487:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});const r=(0,s(3797).A)("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]])},6540:(e,t,s)=>{"use strict";s.d(t,{$h:()=>i,CF:()=>f,CI:()=>h,DI:()=>v,E$:()=>b,HW:()=>m,Lb:()=>j,Or:()=>y,Ru:()=>d,bk:()=>c,dl:()=>l,eg:()=>p,k5:()=>w,kG:()=>g,pU:()=>x,zN:()=>u});var r=s(2555),n=s(6197),a=s(4139);const i=async()=>{try{if(console.log("[TEST] V\xe9rification de la connexion Supabase..."),!n.ND)return console.warn("[TEST] \u26a0\ufe0f Client Supabase non initialis\xe9 - configuration manquante"),{success:!1,error:"Configuration Supabase manquante"};const t=await(0,n.LC)();if(!t.success)throw new Error("Connexion Supabase \xe9chou\xe9e: ".concat(t.error));console.log("[TEST] \u2705 Connexion Supabase OK");const s=["users","otp_codes","loans","payments"];for(const r of s)try{const{error:e}=await n.ND.from(r).select("count").limit(1);e?console.warn("[TEST] \u26a0\ufe0f Table ".concat(r," non accessible:"),e.message):console.log("[TEST] \u2705 Table ".concat(r," accessible"))}catch(e){console.warn("[TEST] \u26a0\ufe0f Table ".concat(r," non accessible:"),e.message)}return{success:!0,message:"Tous les tests de base sont pass\xe9s"}}catch(e){return console.error("[TEST] \u274c Erreur lors des tests:",e.message),{success:!1,error:e.message}}},o=e=>{const t=e.message||e,s=e.details||"",r=e.hint||"",n="".concat(t," ").concat(s," ").concat(r).toLowerCase();return n.includes("phone_number")&&(n.includes("duplicate")||n.includes("unique"))?"Ce num\xe9ro de t\xe9l\xe9phone est d\xe9j\xe0 utilis\xe9 pour cr\xe9er un compte. Veuillez utiliser un autre num\xe9ro de t\xe9l\xe9phone.":n.includes("email")&&(n.includes("duplicate")||n.includes("unique"))?"Cette adresse email est d\xe9j\xe0 utilis\xe9e. Veuillez utiliser une autre adresse email.":n.includes("password")?n.includes("weak")?"Le mot de passe est trop faible. Il doit contenir au moins 6 caract\xe8res.":"Erreur avec le mot de passe. Veuillez v\xe9rifier votre saisie.":n.includes("invalid")?n.includes("email")?"Adresse email invalide. Veuillez v\xe9rifier votre saisie.":n.includes("phone")?"Num\xe9ro de t\xe9l\xe9phone invalide. Veuillez v\xe9rifier votre saisie.":"Donn\xe9es invalides. Veuillez v\xe9rifier vos informations.":n.includes("network")||n.includes("fetch")?"Erreur de connexion. Veuillez v\xe9rifier votre connexion internet et r\xe9essayer.":n.includes("server")||n.includes("500")?"Erreur du serveur. Veuillez r\xe9essayer dans quelques minutes.":n.includes("quota")||n.includes("limit")?"Limite de tentatives atteinte. Veuillez r\xe9essayer plus tard.":n.includes("already registered")?n.includes("phone")?"Un compte existe d\xe9j\xe0 avec ce num\xe9ro de t\xe9l\xe9phone.":n.includes("email")?"Un compte existe d\xe9j\xe0 avec cette adresse email.":"Un compte existe d\xe9j\xe0 avec ces informations.":n.includes("user already registered")?n.includes("phone")?"Un utilisateur existe d\xe9j\xe0 avec ce num\xe9ro de t\xe9l\xe9phone.":n.includes("email")?"Un utilisateur existe d\xe9j\xe0 avec cette adresse email.":"Un utilisateur avec ces informations existe d\xe9j\xe0.":t},l=async(e,t,s)=>{if(!n.ND)return console.error("[SUPABASE] Client non initialis\xe9 - configuration manquante"),{success:!1,error:"Configuration Supabase manquante"};try{const r=e.replace(/[^0-9]/g,"");if(r.length<8)throw new Error("Num\xe9ro de t\xe9l\xe9phone invalide");let a;if(console.log("[SUPABASE] userData re\xe7u:",s),console.log("[SUPABASE] Email fourni:",s.email),s.email&&s.email.trim())a=s.email.trim(),console.log("[SUPABASE] \u2705 Utilisation email fourni: ".concat(a));else{const e=Date.now();a="user.".concat(r,".").concat(e,"@gmail.com"),console.log("[SUPABASE] \u26a0\ufe0f Cr\xe9ation email temporaire: ".concat(a))}console.log("[SUPABASE] Cr\xe9ation utilisateur avec email: ".concat(a));const{data:i,error:l}=await n.ND.auth.signUp({email:a,password:t,options:{data:{first_name:s.firstName,last_name:s.lastName,phone_number:e,role:"client"}}});if(l)throw console.error("[SUPABASE] Erreur Auth:",l),new Error(o(l));const{error:c}=await n.ND.from("users").insert([{id:i.user.id,phone_number:e,email:a,first_name:s.firstName,last_name:s.lastName,role:"client",status:"approved"}]);if(c)throw console.error("[SUPABASE] Erreur insertion utilisateur:",c),new Error(o(c));return console.log("[SUPABASE] \u2705 Utilisateur cr\xe9\xe9: ".concat(s.firstName," ").concat(s.lastName," (").concat(e,")")),{success:!0,user:i.user}}catch(r){console.error("[SUPABASE] Erreur lors de l'inscription:",r.message);return{success:!1,error:o(r)}}},c=async(e,t,s)=>{if(!n.ND)return console.error("[SUPABASE] Client non initialis\xe9 - configuration manquante"),{success:!1,error:"Configuration Supabase manquante"};try{const{data:r,error:a}=await n.ND.auth.signUp({email:e,password:t,options:{data:{first_name:s.firstName,last_name:s.lastName,phone_number:s.phoneNumber||"",role:"client"}}});if(a)throw console.error("[SUPABASE] Erreur Auth:",a),new Error(o(a));const{error:i}=await n.ND.from("users").insert([{id:r.user.id,email:e,phone_number:s.phoneNumber||"",first_name:s.firstName,last_name:s.lastName,role:"client",status:"approved"}]);if(i)throw console.error("[SUPABASE] Erreur insertion utilisateur:",i),new Error(o(i));return s.phoneNumber&&console.log("[SUPABASE] \u2705 Utilisateur cr\xe9\xe9: ".concat(s.firstName," ").concat(s.lastName," (").concat(s.phoneNumber,")")),{success:!0,user:r.user}}catch(r){console.error("[SUPABASE] Erreur lors de l'inscription:",r.message);return{success:!1,error:o(r)}}},d=async(e,t)=>{if(!n.ND)return console.error("[SUPABASE] Client non initialis\xe9 - configuration manquante"),{success:!1,error:"Configuration Supabase manquante"};try{var s,a,i,l;console.log("[SUPABASE] Tentative de connexion avec email:",e);const{data:p,error:f}=await n.ND.auth.signInWithPassword({email:e,password:t});if(f)throw console.error("[SUPABASE] Erreur d'authentification:",f.message),new Error(o(f));if(!p.user)throw new Error("Aucun utilisateur retourn\xe9 apr\xe8s authentification");console.log("[SUPABASE] Authentification r\xe9ussie pour:",p.user.email);let x=null,g=null;try{const e=n.ND.from("users").select("*").eq("id",p.user.id).single(),t=new Promise((e,t)=>setTimeout(()=>t(new Error("Timeout: r\xe9cup\xe9ration des donn\xe9es utilisateur")),5e3)),s=await Promise.race([e,t]);x=s.data,g=s.error,g&&console.warn("[SUPABASE] Erreur r\xe9cup\xe9ration table users:",g.message,g.code)}catch(m){console.warn("[SUPABASE] Erreur/timeout lors de la r\xe9cup\xe9ration utilisateur:",m.message),g={message:m.message}}if(g||!x){var c,d,u,h;console.log("[SUPABASE] Utilisation des donn\xe9es auth (RLS peut bloquer l'acc\xe8s \xe0 la table users)");const e=(0,r.A)((0,r.A)({},p.user),{},{role:(null===(c=p.user.user_metadata)||void 0===c?void 0:c.role)||(null===(d=p.user.app_metadata)||void 0===d?void 0:d.role)||"client",first_name:(null===(u=p.user.user_metadata)||void 0===u?void 0:u.first_name)||"",last_name:(null===(h=p.user.user_metadata)||void 0===h?void 0:h.last_name)||"",status:"approved"});return console.log("[SUPABASE] Utilisateur retourn\xe9 (depuis auth):",{id:e.id,email:e.email,role:e.role}),{success:!0,user:e}}const v=(0,r.A)((0,r.A)({},p.user),{},{role:x.role||(null===(s=p.user.user_metadata)||void 0===s?void 0:s.role)||(null===(a=p.user.app_metadata)||void 0===a?void 0:a.role)||"client",first_name:x.first_name||(null===(i=p.user.user_metadata)||void 0===i?void 0:i.first_name)||"",last_name:x.last_name||(null===(l=p.user.user_metadata)||void 0===l?void 0:l.last_name)||"",phone_number:x.phone_number||"",status:x.status||"approved"});return console.log("[SUPABASE] Utilisateur complet r\xe9cup\xe9r\xe9:",{id:v.id,email:v.email,role:v.role,status:v.status}),{success:!0,user:v}}catch(m){return console.error("[SUPABASE] Erreur lors de la connexion:",m.message),{success:!1,error:m.message}}},u=async(e,t)=>{if(!n.ND)return console.error("[SUPABASE] Client non initialis\xe9 - configuration manquante"),{success:!1,error:"Configuration Supabase manquante"};try{console.log("[SUPABASE] Tentative de connexion avec t\xe9l\xe9phone:",e);const{data:s,error:a}=await n.ND.from("users").select("*").eq("phone_number",e).single();if(a||!s)return console.error("[SUPABASE] Utilisateur non trouv\xe9 pour le t\xe9l\xe9phone:",e,a),{success:!1,error:"Aucun utilisateur trouv\xe9 avec ce num\xe9ro de t\xe9l\xe9phone"};if(console.log("[SUPABASE] Utilisateur trouv\xe9 dans la table users:",{id:s.id,email:s.email,phone_number:s.phone_number,role:s.role,status:s.status}),"approved"!==s.status)return console.error("[SUPABASE] Utilisateur non approuv\xe9, statut:",s.status),{success:!1,error:"Votre compte n'est pas encore approuv\xe9"};if(!s.email)return console.error("[SUPABASE] Utilisateur sans email"),{success:!1,error:"Votre compte n'a pas d'email configur\xe9. Contactez l'administrateur."};console.log("[SUPABASE] Tentative de connexion avec email:",s.email);const{data:i,error:l}=await n.ND.auth.signInWithPassword({email:s.email,password:t});if(l){if(console.error("[SUPABASE] Erreur d'authentification:",l.message),l.message.includes("Invalid login credentials"))return{success:!1,error:"Identifiants incorrects. V\xe9rifiez votre num\xe9ro de t\xe9l\xe9phone et mot de passe."};throw new Error(o(l))}if(!i.user)throw new Error("Aucun utilisateur retourn\xe9 apr\xe8s authentification");console.log("[SUPABASE] \u2705 Connexion r\xe9ussie");return{success:!0,user:(0,r.A)((0,r.A)({},i.user),{},{role:s.role||"client",first_name:s.first_name||"",last_name:s.last_name||"",phone_number:s.phone_number||"",status:s.status||"approved"})}}catch(s){console.error("[SUPABASE] Erreur lors de la connexion (t\xe9l\xe9phone):",s.message);return{success:!1,error:o(s)}}},h=async()=>{try{const{error:e}=await n.ND.auth.signOut();if(e)throw new Error(o(e));return{success:!0}}catch(e){console.error("[SUPABASE] Erreur lors de la d\xe9connexion:",e.message);return{success:!1,error:o(e)}}},m=async()=>{try{var e,t;const{data:{user:a},error:i}=await n.ND.auth.getUser();if(i)throw i;if(!a)return{success:!1,error:"Utilisateur non connect\xe9"};let o=null;try{const{data:e,error:t}=await n.ND.from("users").select("*").eq("id",a.id).single();if(t)throw t;o=e}catch(s){console.warn("[SUPABASE] Lecture de public.users indisponible pour cet utilisateur:",s.message)}return{success:!0,user:(0,r.A)((0,r.A)((0,r.A)({},a),o||{}),{},{role:o&&o.role||(null===a||void 0===a||null===(e=a.user_metadata)||void 0===e?void 0:e.role)||(null===a||void 0===a||null===(t=a.app_metadata)||void 0===t?void 0:t.role)||"client"})}}catch(a){return console.error("[SUPABASE] Erreur lors de la r\xe9cup\xe9ration utilisateur:",a.message),{success:!1,error:a.message}}},p=async(e,t)=>{try{console.log("[PROFILE] Mise \xe0 jour du profil utilisateur:",e,t);const s={updated_at:(new Date).toISOString()};t.firstName&&(s.first_name=t.firstName),t.lastName&&(s.last_name=t.lastName),t.phone&&(s.phone_number=t.phone),t.email&&(s.email=t.email),t.filiere&&(s.filiere=t.filiere),t.annee_etude&&(s.annee_etude=t.annee_etude),t.entite&&(s.entite=t.entite),t.facebook_name&&(s.facebook_name=t.facebook_name),t.temoin_name&&(s.temoin_name=t.temoin_name),t.temoin_quartier&&(s.temoin_quartier=t.temoin_quartier),t.temoin_phone&&(s.temoin_phone=t.temoin_phone),t.temoin_email&&(s.temoin_email=t.temoin_email),t.emergency_name&&(s.emergency_name=t.emergency_name),t.emergency_relation&&(s.emergency_relation=t.emergency_relation),t.emergency_phone&&(s.emergency_phone=t.emergency_phone),t.emergency_email&&(s.emergency_email=t.emergency_email),t.emergency_address&&(s.emergency_address=t.emergency_address),t.user_identity_card_name&&(s.user_identity_card_name=t.user_identity_card_name),t.temoin_identity_card_name&&(s.temoin_identity_card_name=t.temoin_identity_card_name),t.student_card_name&&(s.student_card_name=t.student_card_name),t.user_identity_card_url&&(s.user_identity_card_url=t.user_identity_card_url),t.temoin_identity_card_url&&(s.temoin_identity_card_url=t.temoin_identity_card_url),t.student_card_url&&(s.student_card_url=t.student_card_url);const{error:r}=await n.ND.from("users").update(s).eq("id",e);if(r)throw console.error("[PROFILE] Erreur mise \xe0 jour table users:",r),r;if(t.firstName||t.lastName||t.phone){const e={};t.firstName&&(e.first_name=t.firstName),t.lastName&&(e.last_name=t.lastName),t.phone&&(e.phone_number=t.phone);const{error:s}=await n.ND.auth.updateUser({data:e});if(s)throw console.error("[PROFILE] Erreur mise \xe0 jour m\xe9tadonn\xe9es auth:",s),s}return console.log("[PROFILE] \u2705 Profil mis \xe0 jour avec succ\xe8s"),{success:!0}}catch(s){return console.error("[PROFILE] \u274c Erreur lors de la mise \xe0 jour du profil:",s.message),{success:!1,error:s.message}}},f=async()=>{try{const{data:e,error:t}=await n.ND.from("users").select("*").order("created_at",{ascending:!1});if(t)throw t;const{data:s,error:a}=await n.ND.from("loans").select("id, user_id, status, amount").order("created_at",{ascending:!1});if(a)throw a;return{success:!0,data:e.map(e=>{const t=s.filter(t=>t.user_id===e.id),n=t.length,a=t.filter(e=>"approved"===e.status||"active"===e.status).length,i=t.reduce((e,t)=>e+(t.amount||0),0);return(0,r.A)((0,r.A)({},e),{},{totalLoans:n,activeLoans:a,totalAmount:i})})}}catch(e){return console.error("[SUPABASE] Erreur lors de la r\xe9cup\xe9ration des utilisateurs:",e.message),{success:!1,error:e.message}}},x=async(e,t)=>{try{const{data:s,error:r}=await n.ND.from("users").update({status:t,updated_at:(new Date).toISOString()}).eq("id",e).select().single();if(r)throw r;return{success:!0,data:s}}catch(s){return console.error("[SUPABASE] Erreur lors de la mise \xe0 jour du statut utilisateur:",s.message),{success:!1,error:s.message}}},g=async e=>{try{const t=await fetch("".concat(a.f,"/api/admin/delete-user/").concat(e),{method:"DELETE",headers:{"Content-Type":"application/json"}}),s=await t.json();if(!t.ok)throw new Error(s.error||"Erreur lors de la suppression");return console.log("[DELETE_USER] \u2705 Utilisateur supprim\xe9:",s.message),{success:!0,message:s.message}}catch(t){return console.error("[DELETE_USER] \u274c Erreur:",t.message),{success:!1,error:t.message}}},v=async e=>{try{console.log("[SUPABASE] Tentative de cr\xe9ation du pr\xeat avec:",e);const{data:s,error:r}=await n.ND.from("loans").insert([e]).select("\n        *,\n        users!inner(id, first_name, last_name)\n      ").single();if(r)throw console.error("[SUPABASE] Erreur Supabase:",r),r;if(console.log("[SUPABASE] Pr\xeat cr\xe9\xe9 avec succ\xe8s:",s),s&&s.users)try{console.log("[ADMIN_NOTIFICATION] Envoi notification \xe0 l'admin...");const e="".concat(s.users.first_name," ").concat(s.users.last_name),t=await fetch("".concat(a.f,"/api/notify-admin-new-loan"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({loanAmount:s.amount,clientName:e,loanId:s.id})});t.ok?console.log("[ADMIN_NOTIFICATION] \u2705 Notification envoy\xe9e \xe0 l'admin avec succ\xe8s"):console.error("[ADMIN_NOTIFICATION] \u274c Erreur envoi notification:",await t.text())}catch(t){console.error("[ADMIN_NOTIFICATION] \u274c Erreur lors de l'envoi de la notification:",t)}return{success:!0,data:s}}catch(s){return console.error("[SUPABASE] Erreur lors de la cr\xe9ation du pr\xeat:",s),console.error("[SUPABASE] D\xe9tails de l'erreur:",{message:s.message,details:s.details,hint:s.hint,code:s.code}),{success:!1,error:s.message}}},y=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;try{let t=n.ND.from("loans").select("\n        *,\n        users (\n          id,\n          first_name,\n          last_name,\n          email,\n          phone_number,\n          filiere,\n          annee_etude,\n          entite,\n          address,\n          facebook_name,\n          temoin_name,\n          temoin_quartier,\n          temoin_phone,\n          temoin_email,\n          emergency_name,\n          emergency_relation,\n          emergency_phone,\n          emergency_email,\n          emergency_address,\n          user_identity_card_name,\n          temoin_identity_card_name,\n          student_card_name,\n          user_identity_card_url,\n          temoin_identity_card_url,\n          student_card_url\n        )\n      ").order("created_at",{ascending:!1});e&&(t=t.eq("user_id",e));const{data:s,error:r}=await t;if(r)throw r;return{success:!0,data:s}}catch(t){return console.error("[SUPABASE] Erreur lors de la r\xe9cup\xe9ration des pr\xeats:",t.message),{success:!1,error:t.message}}},b=async function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;try{console.log("[UPDATE_LOAN_STATUS] \ud83d\udcdd Mise \xe0 jour du pr\xeat:",{loanId:e,status:t,adminId:s});const l=["pending","approved","active","completed","rejected"];if(!l.includes(t))throw new Error("Statut invalide: ".concat(t,". Statuts autoris\xe9s: ").concat(l.join(", ")));const c={status:t,updated_at:(new Date).toISOString()};"approved"===t&&(c.status="active",c.approved_by=s,c.approved_at=(new Date).toISOString()),console.log("[UPDATE_LOAN_STATUS] \ud83d\udd04 Donn\xe9es \xe0 mettre \xe0 jour:",c);const{data:d,error:u}=await n.ND.from("loans").update(c).eq("id",e).select("\n        *,\n        users!inner(id, first_name, last_name)\n      ").single();if(u){var r;if(console.error("[UPDATE_LOAN_STATUS] \u274c Erreur Supabase:",{message:u.message,details:u.details,hint:u.hint,code:u.code}),"23514"===u.code||null!==(r=u.message)&&void 0!==r&&r.includes("check constraint"))throw new Error("La base de donn\xe9es n'autorise pas le statut \"".concat(t,"\". Veuillez contacter l'administrateur pour mettre \xe0 jour la contrainte."));throw u}if(console.log("[UPDATE_LOAN_STATUS] \u2705 Pr\xeat mis \xe0 jour avec succ\xe8s:",d),d&&("approved"===t||"rejected"===t))try{const e="approved"===t,s=e?"approbation":"refus";console.log("[LOAN_".concat(s.toUpperCase(),"] Syst\xe8me hybride de notifications..."));const{error:r}=await n.ND.from("notifications").insert({user_id:d.user_id,title:e?"Pr\xeat approuv\xe9 ! \ud83c\udf89":"Demande de pr\xeat refus\xe9e",message:"Votre demande de pr\xeat de ".concat(parseInt(d.amount).toLocaleString(),e?" FCFA a \xe9t\xe9 approuv\xe9e. Vous pouvez maintenant effectuer votre premier remboursement.":" FCFA a \xe9t\xe9 refus\xe9e. Contactez l'administration pour plus d'informations."),type:"loan_status",data:{loan_id:d.id,loan_amount:d.amount,status:e?"approved":"rejected",action:e?"approved":"rejected"},read:!1});r?console.error("[LOAN_".concat(s.toUpperCase(),"] \u274c Erreur cr\xe9ation notification DB:"),r):console.log("[LOAN_".concat(s.toUpperCase(),"] \u2705 Notification in-app cr\xe9\xe9e (TOUJOURS disponible)"));try{(await fetch("".concat(a.f,"/api/notify-loan-").concat(s),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:d.user_id,loanAmount:d.amount,loanId:d.id,status:e?"approved":"rejected"})})).ok?console.log("[LOAN_".concat(s.toUpperCase(),"] \u2705 Notification push envoy\xe9e (utilisateur hors ligne notifi\xe9)")):console.log("[LOAN_".concat(s.toUpperCase(),"] \u26a0\ufe0f Push \xe9chou\xe9 mais notification in-app disponible"))}catch(i){console.log("[LOAN_".concat(s.toUpperCase(),"] \u26a0\ufe0f Push non disponible mais notification in-app cr\xe9\xe9e"))}console.log("[LOAN_".concat(s.toUpperCase(),"] \ud83c\udfaf Syst\xe8me hybride : Notification garantie (in-app + push si disponible)"))}catch(o){console.error("[LOAN_NOTIFICATION] \u274c Erreur syst\xe8me de notifications:",o)}return{success:!0,data:d}}catch(l){console.error("[UPDATE_LOAN_STATUS] \u274c Erreur lors de la mise \xe0 jour du pr\xeat:",l);return{success:!1,error:l.message||"Erreur lors de la mise \xe0 jour du statut du pr\xeat"}}},j=async e=>{try{const{data:t,error:s}=await n.ND.from("payments").insert([e]).select().single();if(s)throw s;return{success:!0,data:t}}catch(t){return console.error("[SUPABASE] Erreur lors de la cr\xe9ation du paiement:",t.message),{success:!1,error:t.message}}},w=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;try{let t=n.ND.from("payments").select("\n        *,\n        loans (\n          id,\n          amount,\n          purpose\n        )\n      ").order("created_at",{ascending:!1});e&&(t=t.eq("user_id",e));const{data:s,error:r}=await t;if(r)throw r;return{success:!0,data:s}}catch(t){return console.error("[SUPABASE] Erreur lors de la r\xe9cup\xe9ration des paiements:",t.message),{success:!1,error:t.message}}}},6852:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});const r=(0,s(3797).A)("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]])},6900:(e,t)=>{t.read=function(e,t,s,r,n){var a,i,o=8*n-r-1,l=(1<<o)-1,c=l>>1,d=-7,u=s?n-1:0,h=s?-1:1,m=e[t+u];for(u+=h,a=m&(1<<-d)-1,m>>=-d,d+=o;d>0;a=256*a+e[t+u],u+=h,d-=8);for(i=a&(1<<-d)-1,a>>=-d,d+=r;d>0;i=256*i+e[t+u],u+=h,d-=8);if(0===a)a=1-c;else{if(a===l)return i?NaN:1/0*(m?-1:1);i+=Math.pow(2,r),a-=c}return(m?-1:1)*i*Math.pow(2,a-r)},t.write=function(e,t,s,r,n,a){var i,o,l,c=8*a-n-1,d=(1<<c)-1,u=d>>1,h=23===n?Math.pow(2,-24)-Math.pow(2,-77):0,m=r?0:a-1,p=r?1:-1,f=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(o=isNaN(t)?1:0,i=d):(i=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-i))<1&&(i--,l*=2),(t+=i+u>=1?h/l:h*Math.pow(2,1-u))*l>=2&&(i++,l/=2),i+u>=d?(o=0,i=d):i+u>=1?(o=(t*l-1)*Math.pow(2,n),i+=u):(o=t*Math.pow(2,u-1)*Math.pow(2,n),i=0));n>=8;e[s+m]=255&o,m+=p,o/=256,n-=8);for(i=i<<n|o,c+=n;c>0;e[s+m]=255&i,m+=p,i/=256,c-=8);e[s+m-p]|=128*f}},7234:(e,t)=>{"use strict";function s(e,t){var s=e.length;e.push(t);e:for(;0<s;){var r=s-1>>>1,n=e[r];if(!(0<a(n,t)))break e;e[r]=t,e[s]=n,s=r}}function r(e){return 0===e.length?null:e[0]}function n(e){if(0===e.length)return null;var t=e[0],s=e.pop();if(s!==t){e[0]=s;e:for(var r=0,n=e.length,i=n>>>1;r<i;){var o=2*(r+1)-1,l=e[o],c=o+1,d=e[c];if(0>a(l,s))c<n&&0>a(d,l)?(e[r]=d,e[c]=s,r=c):(e[r]=l,e[o]=s,r=o);else{if(!(c<n&&0>a(d,s)))break e;e[r]=d,e[c]=s,r=c}}}return t}function a(e,t){var s=e.sortIndex-t.sortIndex;return 0!==s?s:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],d=[],u=1,h=null,m=3,p=!1,f=!1,x=!1,g="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,y="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(d);null!==t;){if(null===t.callback)n(d);else{if(!(t.startTime<=e))break;n(d),t.sortIndex=t.expirationTime,s(c,t)}t=r(d)}}function j(e){if(x=!1,b(e),!f)if(null!==r(c))f=!0,R(w);else{var t=r(d);null!==t&&O(j,t.startTime-e)}}function w(e,s){f=!1,x&&(x=!1,v(A),A=-1),p=!0;var a=m;try{for(b(s),h=r(c);null!==h&&(!(h.expirationTime>s)||e&&!C());){var i=h.callback;if("function"===typeof i){h.callback=null,m=h.priorityLevel;var o=i(h.expirationTime<=s);s=t.unstable_now(),"function"===typeof o?h.callback=o:h===r(c)&&n(c),b(s)}else n(c);h=r(c)}if(null!==h)var l=!0;else{var u=r(d);null!==u&&O(j,u.startTime-s),l=!1}return l}finally{h=null,m=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var N,S=!1,k=null,A=-1,_=5,E=-1;function C(){return!(t.unstable_now()-E<_)}function P(){if(null!==k){var e=t.unstable_now();E=e;var s=!0;try{s=k(!0,e)}finally{s?N():(S=!1,k=null)}}else S=!1}if("function"===typeof y)N=function(){y(P)};else if("undefined"!==typeof MessageChannel){var T=new MessageChannel,I=T.port2;T.port1.onmessage=P,N=function(){I.postMessage(null)}}else N=function(){g(P,0)};function R(e){k=e,S||(S=!0,N())}function O(e,s){A=g(function(){e(t.unstable_now())},s)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){f||p||(f=!0,R(w))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(m){case 1:case 2:case 3:var t=3;break;default:t=m}var s=m;m=t;try{return e()}finally{m=s}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var s=m;m=e;try{return t()}finally{m=s}},t.unstable_scheduleCallback=function(e,n,a){var i=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?i+a:i:a=i,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:u++,callback:n,priorityLevel:e,startTime:a,expirationTime:o=a+o,sortIndex:-1},a>i?(e.sortIndex=a,s(d,e),null===r(c)&&e===r(d)&&(x?(v(A),A=-1):x=!0,O(j,a-i))):(e.sortIndex=o,s(c,e),f||p||(f=!0,R(w))),e},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(e){var t=m;return function(){var s=m;m=t;try{return e.apply(this,arguments)}finally{m=s}}}},7374:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(s(9286));class a extends n.default{select(e){let t=!1;const s=(null!==e&&void 0!==e?e:"*").split("").map(e=>/\s/.test(e)&&!t?"":('"'===e&&(t=!t),e)).join("");return this.url.searchParams.set("select",s),this.headers.append("Prefer","return=representation"),this}order(e){let{ascending:t=!0,nullsFirst:s,foreignTable:r,referencedTable:n=r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const a=n?"".concat(n,".order"):"order",i=this.url.searchParams.get(a);return this.url.searchParams.set(a,"".concat(i?"".concat(i,","):"").concat(e,".").concat(t?"asc":"desc").concat(void 0===s?"":s?".nullsfirst":".nullslast")),this}limit(e){let{foreignTable:t,referencedTable:s=t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r="undefined"===typeof s?"limit":"".concat(s,".limit");return this.url.searchParams.set(r,"".concat(e)),this}range(e,t){let{foreignTable:s,referencedTable:r=s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const n="undefined"===typeof r?"offset":"".concat(r,".offset"),a="undefined"===typeof r?"limit":"".concat(r,".limit");return this.url.searchParams.set(n,"".concat(e)),this.url.searchParams.set(a,"".concat(t-e+1)),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return"GET"===this.method?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain(){let{analyze:e=!1,verbose:t=!1,settings:s=!1,buffers:r=!1,wal:n=!1,format:a="text"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var i;const o=[e?"analyze":null,t?"verbose":null,s?"settings":null,r?"buffers":null,n?"wal":null].filter(Boolean).join("|"),l=null!==(i=this.headers.get("Accept"))&&void 0!==i?i:"application/json";return this.headers.set("Accept","application/vnd.pgrst.plan+".concat(a,'; for="').concat(l,'"; options=').concat(o,";")),this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer","max-affected=".concat(e)),this}}t.default=a},7528:(e,t,s)=>{"use strict";function r(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}s.d(t,{A:()=>r})},7607:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});const r=(0,s(3797).A)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},7950:(e,t,s)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=s(2730)},7980:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.PostgrestError=t.PostgrestBuilder=t.PostgrestTransformBuilder=t.PostgrestFilterBuilder=t.PostgrestQueryBuilder=t.PostgrestClient=void 0;const n=r(s(1210));t.PostgrestClient=n.default;const a=r(s(8829));t.PostgrestQueryBuilder=a.default;const i=r(s(5736));t.PostgrestFilterBuilder=i.default;const o=r(s(7374));t.PostgrestTransformBuilder=o.default;const l=r(s(9286));t.PostgrestBuilder=l.default;const c=r(s(2611));t.PostgrestError=c.default,t.default={PostgrestClient:n.default,PostgrestQueryBuilder:a.default,PostgrestFilterBuilder:i.default,PostgrestTransformBuilder:o.default,PostgrestBuilder:l.default,PostgrestError:c.default}},8829:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(s(5736));t.default=class{constructor(e,t){let{headers:s={},schema:r,fetch:n}=t;this.url=e,this.headers=new Headers(s),this.schema=r,this.fetch=n}select(e){let{head:t=!1,count:s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=t?"HEAD":"GET";let a=!1;const i=(null!==e&&void 0!==e?e:"*").split("").map(e=>/\s/.test(e)&&!a?"":('"'===e&&(a=!a),e)).join("");return this.url.searchParams.set("select",i),s&&this.headers.append("Prefer","count=".concat(s)),new n.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e){let{count:t,defaultToNull:s=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var r;if(t&&this.headers.append("Prefer","count=".concat(t)),s||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){const e=[...new Set(t)].map(e=>'"'.concat(e,'"'));this.url.searchParams.set("columns",e.join(","))}}return new n.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!==(r=this.fetch)&&void 0!==r?r:fetch})}upsert(e){let{onConflict:t,ignoreDuplicates:s=!1,count:r,defaultToNull:a=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var i;if(this.headers.append("Prefer","resolution=".concat(s?"ignore":"merge","-duplicates")),void 0!==t&&this.url.searchParams.set("on_conflict",t),r&&this.headers.append("Prefer","count=".concat(r)),a||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){const e=[...new Set(t)].map(e=>'"'.concat(e,'"'));this.url.searchParams.set("columns",e.join(","))}}return new n.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!==(i=this.fetch)&&void 0!==i?i:fetch})}update(e){let{count:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var s;return t&&this.headers.append("Prefer","count=".concat(t)),new n.default({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!==(s=this.fetch)&&void 0!==s?s:fetch})}delete(){let{count:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t;return e&&this.headers.append("Prefer","count=".concat(e)),new n.default({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:null!==(t=this.fetch)&&void 0!==t?t:fetch})}}},8853:(e,t,s)=>{"use strict";e.exports=s(7234)},9120:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});const r=(0,s(3797).A)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},9286:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(s(4630)),a=r(s(2611));t.default=class{constructor(e){var t,s;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=null!==(t=e.shouldThrowOnError)&&void 0!==t&&t,this.signal=e.signal,this.isMaybeSingle=null!==(s=e.isMaybeSingle)&&void 0!==s&&s,e.fetch?this.fetch=e.fetch:"undefined"===typeof fetch?this.fetch=n.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),"GET"!==this.method&&"HEAD"!==this.method&&this.headers.set("Content-Type","application/json");let s=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async e=>{var t,s,r,n;let i=null,o=null,l=null,c=e.status,d=e.statusText;if(e.ok){if("HEAD"!==this.method){const s=await e.text();""===s||(o="text/csv"===this.headers.get("Accept")||this.headers.get("Accept")&&(null===(t=this.headers.get("Accept"))||void 0===t?void 0:t.includes("application/vnd.pgrst.plan+text"))?s:JSON.parse(s))}const n=null===(s=this.headers.get("Prefer"))||void 0===s?void 0:s.match(/count=(exact|planned|estimated)/),a=null===(r=e.headers.get("content-range"))||void 0===r?void 0:r.split("/");n&&a&&a.length>1&&(l=parseInt(a[1])),this.isMaybeSingle&&"GET"===this.method&&Array.isArray(o)&&(o.length>1?(i={code:"PGRST116",details:"Results contain ".concat(o.length," rows, application/vnd.pgrst.object+json requires 1 row"),hint:null,message:"JSON object requested, multiple (or no) rows returned"},o=null,l=null,c=406,d="Not Acceptable"):o=1===o.length?o[0]:null)}else{const t=await e.text();try{i=JSON.parse(t),Array.isArray(i)&&404===e.status&&(o=[],i=null,c=200,d="OK")}catch(u){404===e.status&&""===t?(c=204,d="No Content"):i={message:t}}if(i&&this.isMaybeSingle&&(null===(n=null===i||void 0===i?void 0:i.details)||void 0===n?void 0:n.includes("0 rows"))&&(i=null,c=200,d="OK"),i&&this.shouldThrowOnError)throw new a.default(i)}return{error:i,data:o,count:l,status:c,statusText:d}});return this.shouldThrowOnError||(s=s.catch(e=>{var t,s,r;return{error:{message:"".concat(null!==(t=null===e||void 0===e?void 0:e.name)&&void 0!==t?t:"FetchError",": ").concat(null===e||void 0===e?void 0:e.message),details:"".concat(null!==(s=null===e||void 0===e?void 0:e.stack)&&void 0!==s?s:""),hint:"",code:"".concat(null!==(r=null===e||void 0===e?void 0:e.code)&&void 0!==r?r:"")},data:null,count:null,status:0,statusText:""}})),s.then(e,t)}returns(){return this}overrideTypes(){return this}}}},t={};function s(r){var n=t[r];if(void 0!==n)return n.exports;var a=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(a.exports,a,a.exports,s),a.loaded=!0,a.exports}s.m=e,s.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return s.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;s.t=function(r,n){if(1&n&&(r=this(r)),8&n)return r;if("object"===typeof r&&r){if(4&n&&r.__esModule)return r;if(16&n&&"function"===typeof r.then)return r}var a=Object.create(null);s.r(a);var i={};e=e||[null,t({}),t([]),t(t)];for(var o=2&n&&r;("object"==typeof o||"function"==typeof o)&&!~e.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach(e=>i[e]=()=>r[e]);return i.default=()=>r,s.d(a,i),a}})(),s.d=(e,t)=>{for(var r in t)s.o(t,r)&&!s.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},s.f={},s.e=e=>Promise.all(Object.keys(s.f).reduce((t,r)=>(s.f[r](e,t),t),[])),s.u=e=>"static/js/"+e+"."+{407:"be61cdb6",453:"361f310c",521:"a547ee3d"}[e]+".chunk.js",s.miniCssF=e=>{},s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="ab-campus-finance-frontend:";s.l=(r,n,a,i)=>{if(e[r])e[r].push(n);else{var o,l;if(void 0!==a)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var u=c[d];if(u.getAttribute("src")==r||u.getAttribute("data-webpack")==t+a){o=u;break}}o||(l=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,s.nc&&o.setAttribute("nonce",s.nc),o.setAttribute("data-webpack",t+a),o.src=r),e[r]=[n];var h=(t,s)=>{o.onerror=o.onload=null,clearTimeout(m);var n=e[r];if(delete e[r],o.parentNode&&o.parentNode.removeChild(o),n&&n.forEach(e=>e(s)),t)return t(s)},m=setTimeout(h.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=h.bind(null,o.onerror),o.onload=h.bind(null,o.onload),l&&document.head.appendChild(o)}}})(),s.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),s.p="/",(()=>{var e={792:0};s.f.j=(t,r)=>{var n=s.o(e,t)?e[t]:void 0;if(0!==n)if(n)r.push(n[2]);else{var a=new Promise((s,r)=>n=e[t]=[s,r]);r.push(n[2]=a);var i=s.p+s.u(t),o=new Error;s.l(i,r=>{if(s.o(e,t)&&(0!==(n=e[t])&&(e[t]=void 0),n)){var a=r&&("load"===r.type?"missing":r.type),i=r&&r.target&&r.target.src;o.message="Loading chunk "+t+" failed.\n("+a+": "+i+")",o.name="ChunkLoadError",o.type=a,o.request=i,n[1](o)}},"chunk-"+t,t)}};var t=(t,r)=>{var n,a,i=r[0],o=r[1],l=r[2],c=0;if(i.some(t=>0!==e[t])){for(n in o)s.o(o,n)&&(s.m[n]=o[n]);if(l)l(s)}for(t&&t(r);c<i.length;c++)a=i[c],s.o(e,a)&&e[a]&&e[a][0](),e[a]=0},r=self.webpackChunkab_campus_finance_frontend=self.webpackChunkab_campus_finance_frontend||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),(()=>{"use strict";var e,t,r=s(5043),n=s.t(r,2),a=s(4391),i=s(579),o=r.createContext(void 0),l=e=>{let{client:t,children:s}=e;return r.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),(0,i.jsx)(o.Provider,{value:t,children:s})},c=s(2555);function d(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function u(e,t,s){d(e,t),t.set(e,s)}function h(e,t,s){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:s;throw new TypeError("Private element is not present on this object")}function m(e,t){return e.get(h(e,t))}function p(e,t,s){return e.set(h(e,t),s),s}var f={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},x=(e=new WeakMap,t=new WeakMap,class{constructor(){u(this,e,f),u(this,t,!1)}setTimeoutProvider(t){p(e,this,t)}setTimeout(t,s){return m(e,this).setTimeout(t,s)}clearTimeout(t){m(e,this).clearTimeout(t)}setInterval(t,s){return m(e,this).setInterval(t,s)}clearInterval(t){m(e,this).clearInterval(t)}}),g=new x;var v="undefined"===typeof window||"Deno"in globalThis;function y(){}function b(e){return"number"===typeof e&&e>=0&&e!==1/0}function j(e,t){return Math.max(e+(t||0)-Date.now(),0)}function w(e,t){return"function"===typeof e?e(t):e}function N(e,t){return"function"===typeof e?e(t):e}function S(e,t){const{type:s="all",exact:r,fetchStatus:n,predicate:a,queryKey:i,stale:o}=e;if(i)if(r){if(t.queryHash!==A(i,t.options))return!1}else if(!E(t.queryKey,i))return!1;if("all"!==s){const e=t.isActive();if("active"===s&&!e)return!1;if("inactive"===s&&e)return!1}return("boolean"!==typeof o||t.isStale()===o)&&((!n||n===t.state.fetchStatus)&&!(a&&!a(t)))}function k(e,t){const{exact:s,status:r,predicate:n,mutationKey:a}=e;if(a){if(!t.options.mutationKey)return!1;if(s){if(_(t.options.mutationKey)!==_(a))return!1}else if(!E(t.options.mutationKey,a))return!1}return(!r||t.state.status===r)&&!(n&&!n(t))}function A(e,t){return((null===t||void 0===t?void 0:t.queryKeyHashFn)||_)(e)}function _(e){return JSON.stringify(e,(e,t)=>R(t)?Object.keys(t).sort().reduce((e,s)=>(e[s]=t[s],e),{}):t)}function E(e,t){return e===t||typeof e===typeof t&&(!(!e||!t||"object"!==typeof e||"object"!==typeof t)&&Object.keys(t).every(s=>E(e[s],t[s])))}var C=Object.prototype.hasOwnProperty;function P(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(e===t)return e;if(s>500)return t;const r=I(e)&&I(t);if(!r&&(!R(e)||!R(t)))return t;const n=(r?e:Object.keys(e)).length,a=r?t:Object.keys(t),i=a.length,o=r?new Array(i):{};let l=0;for(let c=0;c<i;c++){const i=r?c:a[c],d=e[i],u=t[i];if(d===u){o[i]=d,(r?c<n:C.call(e,i))&&l++;continue}if(null===d||null===u||"object"!==typeof d||"object"!==typeof u){o[i]=u;continue}const h=P(d,u,s+1);o[i]=h,h===d&&l++}return n===i&&l===n?e:o}function T(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const s in e)if(e[s]!==t[s])return!1;return!0}function I(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function R(e){if(!O(e))return!1;const t=e.constructor;if(void 0===t)return!0;const s=t.prototype;return!!O(s)&&(!!s.hasOwnProperty("isPrototypeOf")&&Object.getPrototypeOf(e)===Object.prototype)}function O(e){return"[object Object]"===Object.prototype.toString.call(e)}function D(e,t,s){return"function"===typeof s.structuralSharing?s.structuralSharing(e,t):!1!==s.structuralSharing?P(e,t):t}function L(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r=[...e,t];return s&&r.length>s?r.slice(1):r}function z(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r=[t,...e];return s&&r.length>s?r.slice(0,-1):r}var M=Symbol();function F(e,t){return!e.queryFn&&null!==t&&void 0!==t&&t.initialPromise?()=>t.initialPromise:e.queryFn&&e.queryFn!==M?e.queryFn:()=>Promise.reject(new Error("Missing queryFn: '".concat(e.queryHash,"'")))}function U(e,t){return"function"===typeof e?e(...t):!!e}function B(e,t){d(e,t),t.add(e)}var V=function(e){setTimeout(e,0)};var q,H,W,G,K,Z,Q=function(){let e=[],t=0,s=e=>{e()},r=e=>{e()},n=V;const a=r=>{t?e.push(r):n(()=>{s(r)})};return{batch:a=>{let i;t++;try{i=a()}finally{t--,t||(()=>{const t=e;e=[],t.length&&n(()=>{r(()=>{t.forEach(e=>{s(e)})})})})()}return i},batchCalls:e=>function(){for(var t=arguments.length,s=new Array(t),r=0;r<t;r++)s[r]=arguments[r];a(()=>{e(...s)})},schedule:a,setNotifyFunction:e=>{s=e},setBatchNotifyFunction:e=>{r=e},setScheduler:e=>{n=e}}}(),J=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Y=new(q=new WeakMap,H=new WeakMap,W=new WeakMap,class extends J{constructor(){super(),u(this,q,void 0),u(this,H,void 0),u(this,W,void 0),p(W,this,e=>{if(!v&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}})}onSubscribe(){m(H,this)||this.setEventListener(m(W,this))}onUnsubscribe(){var e;this.hasListeners()||(null===(e=m(H,this))||void 0===e||e.call(this),p(H,this,void 0))}setEventListener(e){var t;p(W,this,e),null===(t=m(H,this))||void 0===t||t.call(this),p(H,this,e(e=>{"boolean"===typeof e?this.setFocused(e):this.onFocus()}))}setFocused(e){m(q,this)!==e&&(p(q,this,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){var e;return"boolean"===typeof m(q,this)?m(q,this):"hidden"!==(null===(e=globalThis.document)||void 0===e?void 0:e.visibilityState)}}),$=new(G=new WeakMap,K=new WeakMap,Z=new WeakMap,class extends J{constructor(){super(),u(this,G,!0),u(this,K,void 0),u(this,Z,void 0),p(Z,this,e=>{if(!v&&window.addEventListener){const t=()=>e(!0),s=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",s,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",s)}}})}onSubscribe(){m(K,this)||this.setEventListener(m(Z,this))}onUnsubscribe(){var e;this.hasListeners()||(null===(e=m(K,this))||void 0===e||e.call(this),p(K,this,void 0))}setEventListener(e){var t;p(Z,this,e),null===(t=m(K,this))||void 0===t||t.call(this),p(K,this,e(this.setOnline.bind(this)))}setOnline(e){m(G,this)!==e&&(p(G,this,e),this.listeners.forEach(t=>{t(e)}))}isOnline(){return m(G,this)}});function X(){let e,t;const s=new Promise((s,r)=>{e=s,t=r});function r(e){Object.assign(s,e),delete s.resolve,delete s.reject}return s.status="pending",s.catch(()=>{}),s.resolve=t=>{r({status:"fulfilled",value:t}),e(t)},s.reject=e=>{r({status:"rejected",reason:e}),t(e)},s}function ee(e){return Math.min(1e3*2**e,3e4)}function te(e){return"online"!==(null!==e&&void 0!==e?e:"online")||$.isOnline()}var se,re=class extends Error{constructor(e){super("CancelledError"),this.revert=null===e||void 0===e?void 0:e.revert,this.silent=null===e||void 0===e?void 0:e.silent}};function ne(e){let t,s=!1,r=0;const n=X(),a=()=>"pending"!==n.status,i=()=>Y.isFocused()&&("always"===e.networkMode||$.isOnline())&&e.canRun(),o=()=>te(e.networkMode)&&e.canRun(),l=e=>{var s;a()||(null===(s=t)||void 0===s||s(),n.resolve(e))},c=e=>{var s;a()||(null===(s=t)||void 0===s||s(),n.reject(e))},d=()=>new Promise(s=>{var r;t=e=>{(a()||i())&&s(e)},null===(r=e.onPause)||void 0===r||r.call(e)}).then(()=>{var s;(t=void 0,a())||(null===(s=e.onContinue)||void 0===s||s.call(e))}),u=()=>{if(a())return;let t;const n=0===r?e.initialPromise:void 0;try{t=null!==n&&void 0!==n?n:e.fn()}catch(o){t=Promise.reject(o)}Promise.resolve(t).then(l).catch(t=>{var n,o,l;if(a())return;const h=null!==(n=e.retry)&&void 0!==n?n:v?0:3,m=null!==(o=e.retryDelay)&&void 0!==o?o:ee,p="function"===typeof m?m(r,t):m,f=!0===h||"number"===typeof h&&r<h||"function"===typeof h&&h(r,t);var x;!s&&f?(r++,null===(l=e.onFail)||void 0===l||l.call(e,r,t),(x=p,new Promise(e=>{g.setTimeout(e,x)})).then(()=>i()?void 0:d()).then(()=>{s?c(t):u()})):c(t)})};return{promise:n,status:()=>n.status,cancel:t=>{if(!a()){var s;const r=new re(t);c(r),null===(s=e.onCancel)||void 0===s||s.call(e,r)}},continue:()=>{var e;return null===(e=t)||void 0===e||e(),n},cancelRetry:()=>{s=!0},continueRetry:()=>{s=!1},canStart:o,start:()=>(o()?u():d().then(u),n)}}var ae,ie,oe,le,ce,de,ue,he,me,pe=(se=new WeakMap,class{constructor(){u(this,se,void 0)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),b(this.gcTime)&&p(se,this,g.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,null!==e&&void 0!==e?e:v?1/0:3e5)}clearGcTimeout(){m(se,this)&&(g.clearTimeout(m(se,this)),p(se,this,void 0))}}),fe=(ae=new WeakMap,ie=new WeakMap,oe=new WeakMap,le=new WeakMap,ce=new WeakMap,de=new WeakMap,ue=new WeakMap,he=new WeakSet,class extends pe{constructor(e){var t;super(),B(this,he),u(this,ae,void 0),u(this,ie,void 0),u(this,oe,void 0),u(this,le,void 0),u(this,ce,void 0),u(this,de,void 0),u(this,ue,void 0),p(ue,this,!1),p(de,this,e.defaultOptions),this.setOptions(e.options),this.observers=[],p(le,this,e.client),p(oe,this,m(le,this).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,p(ae,this,ye(this.options)),this.state=null!==(t=e.state)&&void 0!==t?t:m(ae,this),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return null===(e=m(ce,this))||void 0===e?void 0:e.promise}setOptions(e){if(this.options=(0,c.A)((0,c.A)({},m(de,this)),e),this.updateGcTime(this.options.gcTime),this.state&&void 0===this.state.data){const e=ye(this.options);void 0!==e.data&&(this.setState(ve(e.data,e.dataUpdatedAt)),p(ae,this,e))}}optionalRemove(){this.observers.length||"idle"!==this.state.fetchStatus||m(oe,this).remove(this)}setData(e,t){const s=D(this.state.data,e,this.options);return h(he,this,xe).call(this,{data:s,type:"success",dataUpdatedAt:null===t||void 0===t?void 0:t.updatedAt,manual:null===t||void 0===t?void 0:t.manual}),s}setState(e,t){h(he,this,xe).call(this,{type:"setState",state:e,setStateOptions:t})}cancel(e){var t,s;const r=null===(t=m(ce,this))||void 0===t?void 0:t.promise;return null===(s=m(ce,this))||void 0===s||s.cancel(e),r?r.then(y).catch(y):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(m(ae,this))}isActive(){return this.observers.some(e=>!1!==N(e.options.enabled,this))}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===M||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0&&this.observers.some(e=>"static"===w(e.options.staleTime,this))}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):void 0===this.state.data||this.state.isInvalidated}isStaleByTime(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return void 0===this.state.data||"static"!==e&&(!!this.state.isInvalidated||!j(this.state.dataUpdatedAt,e))}onFocus(){var e;const t=this.observers.find(e=>e.shouldFetchOnWindowFocus());null===t||void 0===t||t.refetch({cancelRefetch:!1}),null===(e=m(ce,this))||void 0===e||e.continue()}onOnline(){var e;const t=this.observers.find(e=>e.shouldFetchOnReconnect());null===t||void 0===t||t.refetch({cancelRefetch:!1}),null===(e=m(ce,this))||void 0===e||e.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),m(oe,this).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(m(ce,this)&&(m(ue,this)?m(ce,this).cancel({revert:!0}):m(ce,this).cancelRetry()),this.scheduleGc()),m(oe,this).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||h(he,this,xe).call(this,{type:"invalidate"})}async fetch(e,t){var s,r,n;if("idle"!==this.state.fetchStatus&&"rejected"!==(null===(s=m(ce,this))||void 0===s?void 0:s.status()))if(void 0!==this.state.data&&null!==t&&void 0!==t&&t.cancelRefetch)this.cancel({silent:!0});else if(m(ce,this))return m(ce,this).continueRetry(),m(ce,this).promise;if(e&&this.setOptions(e),!this.options.queryFn){const e=this.observers.find(e=>e.options.queryFn);e&&this.setOptions(e.options)}const a=new AbortController,i=e=>{Object.defineProperty(e,"signal",{enumerable:!0,get:()=>(p(ue,this,!0),a.signal)})},o=()=>{const e=F(this.options,t),s=(()=>{const e={client:m(le,this),queryKey:this.queryKey,meta:this.meta};return i(e),e})();return p(ue,this,!1),this.options.persister?this.options.persister(e,s,this):e(s)},l=(()=>{const e={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:m(le,this),state:this.state,fetchFn:o};return i(e),e})();var d;(null===(r=this.options.behavior)||void 0===r||r.onFetch(l,this),p(ie,this,this.state),"idle"===this.state.fetchStatus||this.state.fetchMeta!==(null===(n=l.fetchOptions)||void 0===n?void 0:n.meta))&&h(he,this,xe).call(this,{type:"fetch",meta:null===(d=l.fetchOptions)||void 0===d?void 0:d.meta});p(ce,this,ne({initialPromise:null===t||void 0===t?void 0:t.initialPromise,fn:l.fetchFn,onCancel:e=>{e instanceof re&&e.revert&&this.setState((0,c.A)((0,c.A)({},m(ie,this)),{},{fetchStatus:"idle"})),a.abort()},onFail:(e,t)=>{h(he,this,xe).call(this,{type:"failed",failureCount:e,error:t})},onPause:()=>{h(he,this,xe).call(this,{type:"pause"})},onContinue:()=>{h(he,this,xe).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0}));try{var u,f,x,g;const e=await m(ce,this).start();if(void 0===e)throw new Error("".concat(this.queryHash," data is undefined"));return this.setData(e),null===(u=(f=m(oe,this).config).onSuccess)||void 0===u||u.call(f,e,this),null===(x=(g=m(oe,this).config).onSettled)||void 0===x||x.call(g,e,this.state.error,this),e}catch(w){var v,y,b,j;if(w instanceof re){if(w.silent)return m(ce,this).promise;if(w.revert){if(void 0===this.state.data)throw w;return this.state.data}}throw h(he,this,xe).call(this,{type:"error",error:w}),null===(v=(y=m(oe,this).config).onError)||void 0===v||v.call(y,w,this),null===(b=(j=m(oe,this).config).onSettled)||void 0===b||b.call(j,this.state.data,w,this),w}finally{this.scheduleGc()}}});function xe(e){this.state=(t=>{var s;switch(e.type){case"failed":return(0,c.A)((0,c.A)({},t),{},{fetchFailureCount:e.failureCount,fetchFailureReason:e.error});case"pause":return(0,c.A)((0,c.A)({},t),{},{fetchStatus:"paused"});case"continue":return(0,c.A)((0,c.A)({},t),{},{fetchStatus:"fetching"});case"fetch":return(0,c.A)((0,c.A)((0,c.A)({},t),ge(t.data,this.options)),{},{fetchMeta:null!==(s=e.meta)&&void 0!==s?s:null});case"success":const r=(0,c.A)((0,c.A)((0,c.A)({},t),ve(e.data,e.dataUpdatedAt)),{},{dataUpdateCount:t.dataUpdateCount+1},!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null});return p(ie,this,e.manual?r:void 0),r;case"error":const n=e.error;return(0,c.A)((0,c.A)({},t),{},{error:n,errorUpdateCount:t.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:t.fetchFailureCount+1,fetchFailureReason:n,fetchStatus:"idle",status:"error",isInvalidated:!0});case"invalidate":return(0,c.A)((0,c.A)({},t),{},{isInvalidated:!0});case"setState":return(0,c.A)((0,c.A)({},t),e.state)}})(this.state),Q.batch(()=>{this.observers.forEach(e=>{e.onQueryUpdate()}),m(oe,this).notify({query:this,type:"updated",action:e})})}function ge(e,t){return(0,c.A)({fetchFailureCount:0,fetchFailureReason:null,fetchStatus:te(t.networkMode)?"fetching":"paused"},void 0===e&&{error:null,status:"pending"})}function ve(e,t){return{data:e,dataUpdatedAt:null!==t&&void 0!==t?t:Date.now(),error:null,isInvalidated:!1,status:"success"}}function ye(e){const t="function"===typeof e.initialData?e.initialData():e.initialData,s=void 0!==t,r=s?"function"===typeof e.initialDataUpdatedAt?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:s?null!==r&&void 0!==r?r:Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:s?"success":"pending",fetchStatus:"idle"}}var be,je,we,Ne,Se,ke,Ae,_e,Ee=(me=new WeakMap,class extends J{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),u(this,me,void 0),this.config=e,p(me,this,new Map)}build(e,t,s){var r;const n=t.queryKey,a=null!==(r=t.queryHash)&&void 0!==r?r:A(n,t);let i=this.get(a);return i||(i=new fe({client:e,queryKey:n,queryHash:a,options:e.defaultQueryOptions(t),state:s,defaultOptions:e.getQueryDefaults(n)}),this.add(i)),i}add(e){m(me,this).has(e.queryHash)||(m(me,this).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=m(me,this).get(e.queryHash);t&&(e.destroy(),t===e&&m(me,this).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Q.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return m(me,this).get(e)}getAll(){return[...m(me,this).values()]}find(e){const t=(0,c.A)({exact:!0},e);return this.getAll().find(e=>S(t,e))}findAll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=this.getAll();return Object.keys(e).length>0?t.filter(t=>S(e,t)):t}notify(e){Q.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){Q.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Q.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}}),Ce=(be=new WeakMap,je=new WeakMap,we=new WeakMap,Ne=new WeakMap,Se=new WeakSet,class extends pe{constructor(e){super(),B(this,Se),u(this,be,void 0),u(this,je,void 0),u(this,we,void 0),u(this,Ne,void 0),p(be,this,e.client),this.mutationId=e.mutationId,p(we,this,e.mutationCache),p(je,this,[]),this.state=e.state||{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0},this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){m(je,this).includes(e)||(m(je,this).push(e),this.clearGcTimeout(),m(we,this).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){p(je,this,m(je,this).filter(t=>t!==e)),this.scheduleGc(),m(we,this).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){m(je,this).length||("pending"===this.state.status?this.scheduleGc():m(we,this).remove(this))}continue(){var e,t;return null!==(e=null===(t=m(Ne,this))||void 0===t?void 0:t.continue())&&void 0!==e?e:this.execute(this.state.variables)}async execute(e){var t;const s=()=>{h(Se,this,Pe).call(this,{type:"continue"})},r={client:m(be,this),meta:this.options.meta,mutationKey:this.options.mutationKey};p(Ne,this,ne({fn:()=>this.options.mutationFn?this.options.mutationFn(e,r):Promise.reject(new Error("No mutationFn found")),onFail:(e,t)=>{h(Se,this,Pe).call(this,{type:"failed",failureCount:e,error:t})},onPause:()=>{h(Se,this,Pe).call(this,{type:"pause"})},onContinue:s,retry:null!==(t=this.options.retry)&&void 0!==t?t:0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>m(we,this).canRun(this)}));const n="pending"===this.state.status,a=!m(Ne,this).canStart();try{var i,o,l,c,d,u,f,x;if(n)s();else{var g,v;h(Se,this,Pe).call(this,{type:"pending",variables:e,isPaused:a}),m(we,this).config.onMutate&&await m(we,this).config.onMutate(e,this,r);const t=await(null===(g=(v=this.options).onMutate)||void 0===g?void 0:g.call(v,e,r));t!==this.state.context&&h(Se,this,Pe).call(this,{type:"pending",context:t,variables:e,isPaused:a})}const t=await m(Ne,this).start();return await(null===(i=(o=m(we,this).config).onSuccess)||void 0===i?void 0:i.call(o,t,e,this.state.context,this,r)),await(null===(l=(c=this.options).onSuccess)||void 0===l?void 0:l.call(c,t,e,this.state.context,r)),await(null===(d=(u=m(we,this).config).onSettled)||void 0===d?void 0:d.call(u,t,null,this.state.variables,this.state.context,this,r)),await(null===(f=(x=this.options).onSettled)||void 0===f?void 0:f.call(x,t,null,e,this.state.context,r)),h(Se,this,Pe).call(this,{type:"success",data:t}),t}catch(_){try{var y,b;await(null===(y=(b=m(we,this).config).onError)||void 0===y?void 0:y.call(b,_,e,this.state.context,this,r))}catch(Rt){Promise.reject(Rt)}try{var j,w;await(null===(j=(w=this.options).onError)||void 0===j?void 0:j.call(w,_,e,this.state.context,r))}catch(Rt){Promise.reject(Rt)}try{var N,S;await(null===(N=(S=m(we,this).config).onSettled)||void 0===N?void 0:N.call(S,void 0,_,this.state.variables,this.state.context,this,r))}catch(Rt){Promise.reject(Rt)}try{var k,A;await(null===(k=(A=this.options).onSettled)||void 0===k?void 0:k.call(A,void 0,_,e,this.state.context,r))}catch(Rt){Promise.reject(Rt)}throw h(Se,this,Pe).call(this,{type:"error",error:_}),_}finally{m(we,this).runNext(this)}}});function Pe(e){this.state=(t=>{switch(e.type){case"failed":return(0,c.A)((0,c.A)({},t),{},{failureCount:e.failureCount,failureReason:e.error});case"pause":return(0,c.A)((0,c.A)({},t),{},{isPaused:!0});case"continue":return(0,c.A)((0,c.A)({},t),{},{isPaused:!1});case"pending":return(0,c.A)((0,c.A)({},t),{},{context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()});case"success":return(0,c.A)((0,c.A)({},t),{},{data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1});case"error":return(0,c.A)((0,c.A)({},t),{},{data:void 0,error:e.error,failureCount:t.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"})}})(this.state),Q.batch(()=>{m(je,this).forEach(t=>{t.onMutationUpdate(e)}),m(we,this).notify({mutation:this,type:"updated",action:e})})}var Te,Ie,Re,Oe,De,Le,ze,Me,Fe=(ke=new WeakMap,Ae=new WeakMap,_e=new WeakMap,class extends J{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),u(this,ke,void 0),u(this,Ae,void 0),u(this,_e,void 0),this.config=e,p(ke,this,new Set),p(Ae,this,new Map),p(_e,this,0)}build(e,t,s){var r;const n=new Ce({client:e,mutationCache:this,mutationId:p(_e,this,(r=m(_e,this),++r)),options:e.defaultMutationOptions(t),state:s});return this.add(n),n}add(e){m(ke,this).add(e);const t=Ue(e);if("string"===typeof t){const s=m(Ae,this).get(t);s?s.push(e):m(Ae,this).set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(m(ke,this).delete(e)){const t=Ue(e);if("string"===typeof t){const s=m(Ae,this).get(t);if(s)if(s.length>1){const t=s.indexOf(e);-1!==t&&s.splice(t,1)}else s[0]===e&&m(Ae,this).delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=Ue(e);if("string"===typeof t){const s=m(Ae,this).get(t),r=null===s||void 0===s?void 0:s.find(e=>"pending"===e.state.status);return!r||r===e}return!0}runNext(e){const t=Ue(e);if("string"===typeof t){var s,r;const n=null===(s=m(Ae,this).get(t))||void 0===s?void 0:s.find(t=>t!==e&&t.state.isPaused);return null!==(r=null===n||void 0===n?void 0:n.continue())&&void 0!==r?r:Promise.resolve()}return Promise.resolve()}clear(){Q.batch(()=>{m(ke,this).forEach(e=>{this.notify({type:"removed",mutation:e})}),m(ke,this).clear(),m(Ae,this).clear()})}getAll(){return Array.from(m(ke,this))}find(e){const t=(0,c.A)({exact:!0},e);return this.getAll().find(e=>k(t,e))}findAll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.getAll().filter(t=>k(e,t))}notify(e){Q.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(e=>e.state.isPaused);return Q.batch(()=>Promise.all(e.map(e=>e.continue().catch(y))))}});function Ue(e){var t;return null===(t=e.options.scope)||void 0===t?void 0:t.id}function Be(e){return{onFetch:(t,s)=>{var r,n,a;const i=t.options,o=null===(r=t.fetchOptions)||void 0===r||null===(r=r.meta)||void 0===r||null===(r=r.fetchMore)||void 0===r?void 0:r.direction,l=(null===(n=t.state.data)||void 0===n?void 0:n.pages)||[],c=(null===(a=t.state.data)||void 0===a?void 0:a.pageParams)||[];let d={pages:[],pageParams:[]},u=0;const h=async()=>{let s=!1;const r=e=>{!function(e,t,s){let r,n=!1;Object.defineProperty(e,"signal",{enumerable:!0,get:()=>(null!==r&&void 0!==r||(r=t()),n||(n=!0,r.aborted?s():r.addEventListener("abort",s,{once:!0})),r)})}(e,()=>t.signal,()=>s=!0)},n=F(t.options,t.fetchOptions),a=async(e,a,i)=>{if(s)return Promise.reject();if(null==a&&e.pages.length)return Promise.resolve(e);const o=(()=>{const e={client:t.client,queryKey:t.queryKey,pageParam:a,direction:i?"backward":"forward",meta:t.options.meta};return r(e),e})(),l=await n(o),{maxPages:c}=t.options,d=i?z:L;return{pages:d(e.pages,l,c),pageParams:d(e.pageParams,a,c)}};if(o&&l.length){const e="backward"===o,t={pages:l,pageParams:c},s=(e?qe:Ve)(i,t);d=await a(t,s,e)}else{const t=null!==e&&void 0!==e?e:l.length;do{var h;const e=0===u?null!==(h=c[0])&&void 0!==h?h:i.initialPageParam:Ve(i,d);if(u>0&&null==e)break;d=await a(d,e),u++}while(u<t)}return d};t.options.persister?t.fetchFn=()=>{var e,r;return null===(e=(r=t.options).persister)||void 0===e?void 0:e.call(r,h,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},s)}:t.fetchFn=h}}}function Ve(e,t){let{pages:s,pageParams:r}=t;const n=s.length-1;return s.length>0?e.getNextPageParam(s[n],s,r[n],r):void 0}function qe(e,t){var s;let{pages:r,pageParams:n}=t;return r.length>0?null===(s=e.getPreviousPageParam)||void 0===s?void 0:s.call(e,r[0],r,n[0],n):void 0}const He=new(Te=new WeakMap,Ie=new WeakMap,Re=new WeakMap,Oe=new WeakMap,De=new WeakMap,Le=new WeakMap,ze=new WeakMap,Me=new WeakMap,class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};u(this,Te,void 0),u(this,Ie,void 0),u(this,Re,void 0),u(this,Oe,void 0),u(this,De,void 0),u(this,Le,void 0),u(this,ze,void 0),u(this,Me,void 0),p(Te,this,e.queryCache||new Ee),p(Ie,this,e.mutationCache||new Fe),p(Re,this,e.defaultOptions||{}),p(Oe,this,new Map),p(De,this,new Map),p(Le,this,0)}mount(){var e;p(Le,this,(e=m(Le,this),e++,e)),1===m(Le,this)&&(p(ze,this,Y.subscribe(async e=>{e&&(await this.resumePausedMutations(),m(Te,this).onFocus())})),p(Me,this,$.subscribe(async e=>{e&&(await this.resumePausedMutations(),m(Te,this).onOnline())})))}unmount(){var e,t,s;p(Le,this,(e=m(Le,this),e--,e)),0===m(Le,this)&&(null===(t=m(ze,this))||void 0===t||t.call(this),p(ze,this,void 0),null===(s=m(Me,this))||void 0===s||s.call(this),p(Me,this,void 0))}isFetching(e){return m(Te,this).findAll((0,c.A)((0,c.A)({},e),{},{fetchStatus:"fetching"})).length}isMutating(e){return m(Ie,this).findAll((0,c.A)((0,c.A)({},e),{},{status:"pending"})).length}getQueryData(e){var t;const s=this.defaultQueryOptions({queryKey:e});return null===(t=m(Te,this).get(s.queryHash))||void 0===t?void 0:t.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),s=m(Te,this).build(this,t),r=s.state.data;return void 0===r?this.fetchQuery(e):(e.revalidateIfStale&&s.isStaleByTime(w(t.staleTime,s))&&this.prefetchQuery(t),Promise.resolve(r))}getQueriesData(e){return m(Te,this).findAll(e).map(e=>{let{queryKey:t,state:s}=e;return[t,s.data]})}setQueryData(e,t,s){const r=this.defaultQueryOptions({queryKey:e}),n=m(Te,this).get(r.queryHash),a=function(e,t){return"function"===typeof e?e(t):e}(t,null===n||void 0===n?void 0:n.state.data);if(void 0!==a)return m(Te,this).build(this,r).setData(a,(0,c.A)((0,c.A)({},s),{},{manual:!0}))}setQueriesData(e,t,s){return Q.batch(()=>m(Te,this).findAll(e).map(e=>{let{queryKey:r}=e;return[r,this.setQueryData(r,t,s)]}))}getQueryState(e){var t;const s=this.defaultQueryOptions({queryKey:e});return null===(t=m(Te,this).get(s.queryHash))||void 0===t?void 0:t.state}removeQueries(e){const t=m(Te,this);Q.batch(()=>{t.findAll(e).forEach(e=>{t.remove(e)})})}resetQueries(e,t){const s=m(Te,this);return Q.batch(()=>(s.findAll(e).forEach(e=>{e.reset()}),this.refetchQueries((0,c.A)({type:"active"},e),t)))}cancelQueries(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=(0,c.A)({revert:!0},t),r=Q.batch(()=>m(Te,this).findAll(e).map(e=>e.cancel(s)));return Promise.all(r).then(y).catch(y)}invalidateQueries(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Q.batch(()=>{var s,r;return m(Te,this).findAll(e).forEach(e=>{e.invalidate()}),"none"===(null===e||void 0===e?void 0:e.refetchType)?Promise.resolve():this.refetchQueries((0,c.A)((0,c.A)({},e),{},{type:null!==(s=null!==(r=null===e||void 0===e?void 0:e.refetchType)&&void 0!==r?r:null===e||void 0===e?void 0:e.type)&&void 0!==s?s:"active"}),t)})}refetchQueries(e){var t;let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=(0,c.A)((0,c.A)({},s),{},{cancelRefetch:null===(t=s.cancelRefetch)||void 0===t||t}),n=Q.batch(()=>m(Te,this).findAll(e).filter(e=>!e.isDisabled()&&!e.isStatic()).map(e=>{let t=e.fetch(void 0,r);return r.throwOnError||(t=t.catch(y)),"paused"===e.state.fetchStatus?Promise.resolve():t}));return Promise.all(n).then(y)}fetchQuery(e){const t=this.defaultQueryOptions(e);void 0===t.retry&&(t.retry=!1);const s=m(Te,this).build(this,t);return s.isStaleByTime(w(t.staleTime,s))?s.fetch(t):Promise.resolve(s.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(y).catch(y)}fetchInfiniteQuery(e){return e.behavior=Be(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(y).catch(y)}ensureInfiniteQueryData(e){return e.behavior=Be(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return $.isOnline()?m(Ie,this).resumePausedMutations():Promise.resolve()}getQueryCache(){return m(Te,this)}getMutationCache(){return m(Ie,this)}getDefaultOptions(){return m(Re,this)}setDefaultOptions(e){p(Re,this,e)}setQueryDefaults(e,t){m(Oe,this).set(_(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...m(Oe,this).values()],s={};return t.forEach(t=>{E(e,t.queryKey)&&Object.assign(s,t.defaultOptions)}),s}setMutationDefaults(e,t){m(De,this).set(_(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...m(De,this).values()],s={};return t.forEach(t=>{E(e,t.mutationKey)&&Object.assign(s,t.defaultOptions)}),s}defaultQueryOptions(e){if(e._defaulted)return e;const t=(0,c.A)((0,c.A)((0,c.A)((0,c.A)({},m(Re,this).queries),this.getQueryDefaults(e.queryKey)),e),{},{_defaulted:!0});return t.queryHash||(t.queryHash=A(t.queryKey,t)),void 0===t.refetchOnReconnect&&(t.refetchOnReconnect="always"!==t.networkMode),void 0===t.throwOnError&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===M&&(t.enabled=!1),t}defaultMutationOptions(e){return null!==e&&void 0!==e&&e._defaulted?e:(0,c.A)((0,c.A)((0,c.A)((0,c.A)({},m(Re,this).mutations),(null===e||void 0===e?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey)),e),{},{_defaulted:!0})}clear(){m(Te,this).clear(),m(Ie,this).clear()}})({defaultOptions:{queries:{staleTime:12e4,gcTime:3e5,refetchOnWindowFocus:!1,refetchOnReconnect:!0,retry:1}}});var We=s(3216),Ge=s(7950),Ke=s.t(Ge,2),Ze=s(1387);function Qe(){return Qe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e},Qe.apply(this,arguments)}function Je(e,t){if(null==e)return{};var s,r,n={},a=Object.keys(e);for(r=0;r<a.length;r++)s=a[r],t.indexOf(s)>=0||(n[s]=e[s]);return n}function Ye(e){return void 0===e&&(e=""),new URLSearchParams("string"===typeof e||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,s)=>{let r=e[s];return t.concat(Array.isArray(r)?r.map(e=>[s,e]):[[s,r]])},[]))}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const $e=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"];try{window.__reactRouterVersion="6"}catch(Rt){}new Map;const Xe=n.startTransition;Ke.flushSync,n.useId;function et(e){let{basename:t,children:s,future:n,window:a}=e,i=r.useRef();null==i.current&&(i.current=(0,Ze.zR)({window:a,v5Compat:!0}));let o=i.current,[l,c]=r.useState({action:o.action,location:o.location}),{v7_startTransition:d}=n||{},u=r.useCallback(e=>{d&&Xe?Xe(()=>c(e)):c(e)},[c,d]);return r.useLayoutEffect(()=>o.listen(u),[o,u]),r.useEffect(()=>(0,We.V8)(n),[n]),r.createElement(We.Ix,{basename:t,children:s,location:l.location,navigationType:l.action,navigator:o,future:n})}const tt="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,st=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,rt=r.forwardRef(function(e,t){let s,{onClick:n,relative:a,reloadDocument:i,replace:o,state:l,target:c,to:d,preventScrollReset:u,viewTransition:h}=e,m=Je(e,$e),{basename:p}=r.useContext(We.jb),f=!1;if("string"===typeof d&&st.test(d)&&(s=d,tt))try{let e=new URL(window.location.href),t=d.startsWith("//")?new URL(e.protocol+d):new URL(d),s=(0,Ze.pb)(t.pathname,p);t.origin===e.origin&&null!=s?d=s+t.search+t.hash:f=!0}catch(Rt){}let x=(0,We.$P)(d,{relative:a}),g=function(e,t){let{target:s,replace:n,state:a,preventScrollReset:i,relative:o,viewTransition:l}=void 0===t?{}:t,c=(0,We.Zp)(),d=(0,We.zy)(),u=(0,We.x$)(e,{relative:o});return r.useCallback(t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,s)){t.preventDefault();let s=void 0!==n?n:(0,Ze.AO)(d)===(0,Ze.AO)(u);c(e,{replace:s,state:a,preventScrollReset:i,relative:o,viewTransition:l})}},[d,c,u,n,a,s,e,i,o,l])}(d,{replace:o,state:l,target:c,preventScrollReset:u,relative:a,viewTransition:h});return r.createElement("a",Qe({},m,{href:s||x,onClick:f||i?n:function(e){n&&n(e),e.defaultPrevented||g(e)},ref:t,target:c}))});var nt,at;function it(e){let t=r.useRef(Ye(e)),s=r.useRef(!1),n=(0,We.zy)(),a=r.useMemo(()=>function(e,t){let s=Ye(e);return t&&t.forEach((e,r)=>{s.has(r)||t.getAll(r).forEach(e=>{s.append(r,e)})}),s}(n.search,s.current?null:t.current),[n.search]),i=(0,We.Zp)(),o=r.useCallback((e,t)=>{const r=Ye("function"===typeof e?e(a):e);s.current=!0,i("?"+r,t)},[i,a]);return[a,o]}(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(nt||(nt={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(at||(at={}));var ot=s(6197),lt=s(6540);const ct=(0,r.createContext)(),dt=()=>{const e=(0,r.useContext)(ct);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e},ut=e=>{let{children:t}=e;const[s,n]=(0,r.useState)(null),[a,o]=(0,r.useState)(!0);(0,r.useEffect)(()=>{console.log("[AUTH] Initialisation du contexte d'authentification...");try{const e=localStorage.getItem("ab_user_cache");if(e){JSON.parse(e);const t=localStorage.getItem("ab_user_cache_time");if(t){Date.now()-parseInt(t)>864e5&&(console.log("[AUTH] Cache obsol\xe8te d\xe9tect\xe9, nettoyage..."),localStorage.removeItem("ab_user_cache"),localStorage.removeItem("ab_user_cache_time"))}}}catch(r){console.warn("[AUTH] Erreur v\xe9rification cache:",r),localStorage.removeItem("ab_user_cache"),localStorage.removeItem("ab_user_cache_time")}const e=setTimeout(()=>{console.log("[AUTH] \u26a0\ufe0f Timeout de s\xe9curit\xe9 - arr\xeat du loader"),o(!1)},3e3);if(!ot.ND)return console.warn("[AUTH] Supabase non initialis\xe9 - skip auth subscription"),void o(!1);let t,s=!1;return(async()=>{try{console.log("[AUTH] V\xe9rification de la session actuelle...");const{data:{session:e}}=await ot.ND.auth.getSession();if(null!==e&&void 0!==e&&e.user){var a,i,l,d;console.log("[AUTH] Session trouv\xe9e:",e.user.email);const t=(null===(a=e.user)||void 0===a||null===(i=a.user_metadata)||void 0===i?void 0:i.role)||(null===(l=e.user)||void 0===l||null===(d=l.app_metadata)||void 0===d?void 0:d.role)||"client",s=localStorage.getItem("ab_user_cache_time"),r=localStorage.getItem("ab_user_cache"),v=s&&r&&Date.now()-parseInt(s,10)<3e5;let y=!1;if(v)try{const s=JSON.parse(r);if((null===s||void 0===s?void 0:s.id)===e.user.id){y=!0;const r=(0,c.A)((0,c.A)({},e.user),{},{role:s.role||t,firstName:s.first_name,lastName:s.last_name});n(r),o(!1),(async()=>{try{const{data:s}=await ot.ND.from("users").select("role, first_name, last_name").eq("id",e.user.id).single();s&&(n(r=>(0,c.A)((0,c.A)((0,c.A)({},r),e.user),{},{role:s.role||t,firstName:s.first_name,lastName:s.last_name})),localStorage.setItem("ab_user_cache",JSON.stringify({id:e.user.id,email:e.user.email,role:s.role||t,first_name:s.first_name||"",last_name:s.last_name||""})),localStorage.setItem("ab_user_cache_time",Date.now().toString()))}catch(ys){}})()}}catch(Rt){console.warn("[AUTH] Cache invalide, fallback DB")}if(!y)try{const s=ot.ND.from("users").select("role, first_name, last_name").eq("id",e.user.id).single(),r=new Promise((e,t)=>setTimeout(()=>t(new Error("Timeout")),2e3)),a=await Promise.race([s,r]);if(!a.error&&a.data){var u,h;const s=a.data,r=s.role||t,i=(0,c.A)((0,c.A)({},e.user),{},{role:r,firstName:s.first_name||(null===(u=e.user.user_metadata)||void 0===u?void 0:u.first_name),lastName:s.last_name||(null===(h=e.user.user_metadata)||void 0===h?void 0:h.last_name)});n(i),localStorage.setItem("ab_user_cache",JSON.stringify({id:i.id,email:i.email,role:r,first_name:s.first_name||"",last_name:s.last_name||""})),localStorage.setItem("ab_user_cache_time",Date.now().toString())}else{var m,p;const s=(0,c.A)((0,c.A)({},e.user),{},{role:t});n(s),localStorage.setItem("ab_user_cache",JSON.stringify({id:s.id,email:s.email,role:t,first_name:(null===(m=s.user_metadata)||void 0===m?void 0:m.first_name)||"",last_name:(null===(p=s.user_metadata)||void 0===p?void 0:p.last_name)||""})),localStorage.setItem("ab_user_cache_time",Date.now().toString())}}catch(g){var f,x;console.warn("[AUTH] Erreur/timeout r\xe9cup\xe9ration r\xf4le DB:",g.message);const s=(0,c.A)((0,c.A)({},e.user),{},{role:t});n(s),localStorage.setItem("ab_user_cache",JSON.stringify({id:s.id,email:s.email,role:t,first_name:(null===(f=s.user_metadata)||void 0===f?void 0:f.first_name)||"",last_name:(null===(x=s.user_metadata)||void 0===x?void 0:x.last_name)||""})),localStorage.setItem("ab_user_cache_time",Date.now().toString())}}else{console.log("[AUTH] Aucune session active");try{const e=localStorage.getItem("ab_user_cache");if(e){const t=JSON.parse(e);t&&t.id&&(console.log("[AUTH] Utilisateur r\xe9cup\xe9r\xe9 depuis le cache"),n(t))}}catch(r){console.warn("[AUTH] Erreur lecture cache:",r)}}console.log("[AUTH] Configuration de l'\xe9couteur d'\xe9v\xe9nements...");const v=ot.ND.auth.onAuthStateChange(async(e,t)=>{var s;if(console.log("[AUTH] \xc9v\xe9nement auth:",e,null===t||void 0===t||null===(s=t.user)||void 0===s?void 0:s.email),"SIGNED_IN"===e&&t){var a,i,o,l;let e=(null===(a=t.user)||void 0===a||null===(i=a.user_metadata)||void 0===i?void 0:i.role)||(null===(o=t.user)||void 0===o||null===(l=o.app_metadata)||void 0===l?void 0:l.role)||"client";try{const s=ot.ND.from("users").select("role, first_name, last_name").eq("id",t.user.id).single(),r=new Promise((e,t)=>setTimeout(()=>t(new Error("Timeout")),3e3)),a=await Promise.race([s,r]);if(!a.error&&a.data){var d,u;const s=a.data;console.log("[AUTH] SIGNED_IN - R\xf4le DB:",s.role),e=s.role||e;const r=(0,c.A)((0,c.A)({},t.user),{},{role:e,firstName:s.first_name||(null===(d=t.user.user_metadata)||void 0===d?void 0:d.first_name),lastName:s.last_name||(null===(u=t.user.user_metadata)||void 0===u?void 0:u.last_name)});n(r),localStorage.setItem("ab_user_cache",JSON.stringify({id:r.id,email:r.email,role:e,first_name:s.first_name||"",last_name:s.last_name||""}))}else{var h,m;console.warn("[AUTH] Utilisation des m\xe9tadonn\xe9es auth (RLS peut bloquer)");const s=(0,c.A)((0,c.A)({},t.user),{},{role:e});n(s),localStorage.setItem("ab_user_cache",JSON.stringify({id:s.id,email:s.email,role:e,first_name:(null===(h=s.user_metadata)||void 0===h?void 0:h.first_name)||"",last_name:(null===(m=s.user_metadata)||void 0===m?void 0:m.last_name)||""}))}}catch(g){var p,f;console.warn("[AUTH] Erreur/timeout r\xe9cup\xe9ration r\xf4le DB (SIGNED_IN):",g.message);const r=(0,c.A)((0,c.A)({},t.user),{},{role:e});n(r),localStorage.setItem("ab_user_cache",JSON.stringify({id:r.id,email:r.email,role:e,first_name:(null===(p=r.user_metadata)||void 0===p?void 0:p.first_name)||"",last_name:(null===(f=r.user_metadata)||void 0===f?void 0:f.last_name)||""}))}}else if("SIGNED_OUT"===e){console.log("[AUTH] Utilisateur d\xe9connect\xe9"),n(null);try{localStorage.removeItem("ab_user_cache")}catch(r){console.warn("[AUTH] Erreur suppression cache:",r)}}else if("TOKEN_REFRESHED"===e&&t){var x,v,y,b;console.log("[AUTH] Token rafra\xeechi");let e=(null===(x=t.user)||void 0===x||null===(v=x.user_metadata)||void 0===v?void 0:v.role)||(null===(y=t.user)||void 0===y||null===(b=y.app_metadata)||void 0===b?void 0:b.role)||"client";try{const{data:s,error:r}=await ot.ND.from("users").select("role, first_name, last_name").eq("id",t.user.id).single();if(!r&&s){var j,w;e=s.role||e;const r=(0,c.A)((0,c.A)({},t.user),{},{role:e,firstName:s.first_name||(null===(j=t.user.user_metadata)||void 0===j?void 0:j.first_name),lastName:s.last_name||(null===(w=t.user.user_metadata)||void 0===w?void 0:w.last_name)});n(r)}else{const s=(0,c.A)((0,c.A)({},t.user),{},{role:e});n(s)}}catch(g){console.error("[AUTH] Erreur r\xe9cup\xe9ration r\xf4le DB (TOKEN_REFRESHED):",g);const r=(0,c.A)((0,c.A)({},t.user),{},{role:e});n(r)}}});t=v.data.subscription,s=!0,console.log("[AUTH] \u2705 Contexte d'authentification initialis\xe9")}catch(v){console.error("[AUTH] \u274c Erreur lors de l'initialisation:",v.message)}finally{clearTimeout(e),o(!1)}})(),()=>{clearTimeout(e),t&&t.unsubscribe()}},[]);const l={user:s,loading:a,isAuthenticated:!!s,signUp:async(e,t,s)=>{if(!ot.ND)return console.error("[AUTH] Supabase non configur\xe9 - impossible de s'inscrire"),{success:!1,error:"Configuration Supabase manquante. V\xe9rifiez vos variables d'environnement."};try{return await(0,lt.bk)(e,t,s)}catch(r){return console.error("[AUTH] Erreur lors de l'inscription:",r.message),{success:!1,error:r.message}}},signIn:async(e,t)=>{if(!ot.ND)return console.error("[AUTH] Supabase non configur\xe9 - impossible de se connecter"),{success:!1,error:"Configuration Supabase manquante. V\xe9rifiez vos variables d'environnement."};try{console.log("[AUTH] Tentative de connexion avec Supabase...");const s=await(0,lt.Ru)(e,t);return console.log("[AUTH] R\xe9sultat Supabase:",s),s}catch(s){return console.error("[AUTH] Erreur lors de la connexion:",s.message),{success:!1,error:s.message}}},signInWithPhoneNumber:async(e,t)=>{if(!ot.ND)return{success:!1,error:"Supabase non configur\xe9"};try{return await(0,lt.zN)(e,t)}catch(s){return console.error("[AUTH] Erreur lors de la connexion par t\xe9l\xe9phone:",s.message),{success:!1,error:s.message}}},logout:async()=>{if(!ot.ND){n(null);try{localStorage.removeItem("ab_user_cache")}catch(e){console.warn("[AUTH] Erreur lors de la suppression du cache:",e)}return{success:!0}}try{const t=await(0,lt.CI)();if(t.success){n(null);try{localStorage.removeItem("ab_user_cache")}catch(e){console.warn("[AUTH] Erreur lors de la suppression du cache:",e)}}return t}catch(e){return console.error("[AUTH] Erreur lors de la d\xe9connexion:",e.message),{success:!1,error:e.message}}},refreshUser:async()=>{if(!ot.ND)return{success:!1,error:"Supabase non configur\xe9"};try{const e=await(0,lt.HW)();return e.success&&e.user&&n(e.user),e}catch(e){return console.error("[AUTH] Erreur lors du rafra\xeechissement:",e.message),{success:!1,error:e.message}}},forceRefreshRole:async()=>{if(!ot.ND||!s)return{success:!1,error:"Utilisateur non connect\xe9"};try{console.log("[AUTH] \ud83d\udd04 For\xe7age de la r\xe9cup\xe9ration du r\xf4le depuis la DB...");const{data:e,error:t}=await ot.ND.from("users").select("role, first_name, last_name").eq("id",s.id).single();if(t||!e)return console.error("[AUTH] Erreur r\xe9cup\xe9ration r\xf4le DB:",t),{success:!1,error:"Impossible de r\xe9cup\xe9rer le r\xf4le"};console.log("[AUTH] \u2705 R\xf4le r\xe9cup\xe9r\xe9 depuis la DB:",e.role);const r=(0,c.A)((0,c.A)({},s),{},{role:e.role,firstName:e.first_name,lastName:e.last_name});return n(r),localStorage.setItem("ab_user_cache",JSON.stringify({id:r.id,email:r.email,role:e.role,first_name:e.first_name||"",last_name:e.last_name||""})),localStorage.setItem("ab_user_cache_time",Date.now().toString()),console.log("[AUTH] \u2705 R\xf4le mis \xe0 jour:",e.role),{success:!0,role:e.role}}catch(e){return console.error("[AUTH] Erreur lors du for\xe7age du r\xf4le:",e),{success:!1,error:e.message}}},setUser:n};return(0,i.jsx)(ct.Provider,{value:l,children:t})};var ht=s(917),mt=s(3797);const pt=(0,mt.A)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),ft=(0,mt.A)("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),xt=(0,mt.A)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),gt=e=>{let{message:t,type:s="info",duration:n=5e3,onClose:a}=e;(0,r.useEffect)(()=>{const e=setTimeout(()=>{a()},n);return()=>clearTimeout(e)},[n,a]);return(0,i.jsxs)("div",{className:"fixed top-4 right-4 z-50 max-w-sm w-full ".concat((()=>{switch(s){case"success":return"bg-green-50 border-green-200";case"error":return"bg-red-50 border-red-200";case"warning":return"bg-yellow-50 border-yellow-200";default:return"bg-blue-50 border-blue-200"}})()," border rounded-2xl shadow-2xl backdrop-blur-xl"),children:[(0,i.jsxs)("div",{className:"flex items-start p-4",children:[(0,i.jsx)("div",{className:"flex-shrink-0 mr-3 mt-0.5",children:(()=>{switch(s){case"success":return(0,i.jsx)(ht.A,{size:20,className:"text-green-600"});case"error":return(0,i.jsx)(pt,{size:20,className:"text-red-600"});case"warning":return(0,i.jsx)(pt,{size:20,className:"text-yellow-600"});default:return(0,i.jsx)(ft,{size:20,className:"text-blue-600"})}})()}),(0,i.jsx)("div",{className:"flex-1 min-w-0",children:(0,i.jsx)("p",{className:"text-sm font-medium text-gray-900",children:t})}),(0,i.jsx)("div",{className:"flex-shrink-0 ml-3",children:(0,i.jsx)("button",{onClick:a,className:"inline-flex text-gray-400 hover:text-gray-600 transition-colors duration-200",children:(0,i.jsx)(xt,{size:16})})})]}),(0,i.jsx)("div",{className:"h-1 bg-gray-200 rounded-b-2xl overflow-hidden",children:(0,i.jsx)("div",{className:"h-full ".concat("success"===s?"bg-green-500":"error"===s?"bg-red-500":"warning"===s?"bg-yellow-500":"bg-blue-500")})})]})},vt=(0,r.createContext)(),yt=()=>{const e=(0,r.useContext)(vt);if(!e)throw new Error("useNotifications must be used within a NotificationProvider");return e},bt=e=>{let{children:t}=e;const[s,n]=(0,r.useState)([]),[a,o]=(0,r.useState)(0),[l,d]=(0,r.useState)([]);(0,r.useEffect)(()=>{const e=s.filter(e=>!e.read).length;o(e)},[s]);const u=(0,r.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;try{if(!ot.ND)return void console.log("[NOTIFICATIONS] Supabase non configur\xe9 - skip chargement");let t=ot.ND.from("notifications").select("*").order("created_at",{ascending:!1}).limit(50);e&&(t=t.eq("user_id",e));const{data:s,error:r}=await t;if(r)return void console.error("[NOTIFICATIONS] Erreur lors du chargement:",r);if(s){const e=s.map(e=>({id:e.id,title:e.title,message:e.message,type:e.type||"info",priority:e.priority||"medium",read:e.read||!1,timestamp:e.created_at,data:e.data||{},action:e.action||null}));n(e)}}catch(t){console.error("[NOTIFICATIONS] Erreur lors du chargement:",t)}},[]),h=(0,r.useCallback)(async e=>{try{if(!ot.ND){console.log("[NOTIFICATIONS] Supabase non configur\xe9 - notification locale seulement");const t={id:Date.now()+Math.random(),title:e.title,message:e.message,type:e.type||"info",priority:e.priority||"medium",read:!1,data:e.data||{},action:e.action||null,user_id:e.userId||null,created_at:(new Date).toISOString(),timestamp:(new Date).toISOString()};return void n(s=>s.some(t=>t.title===e.title&&t.message===e.message&&Date.now()-new Date(t.timestamp).getTime()<6e4)?s:[t,...s.slice(0,49)])}const t={title:e.title,message:e.message,type:e.type||"info",priority:e.priority||"medium",read:!1,data:e.data||{},action:e.action||null,user_id:e.userId||null,created_at:(new Date).toISOString()},{data:s,error:r}=await ot.ND.from("notifications").insert([t]).select().single();if(r)return void console.error("[NOTIFICATIONS] Erreur lors de la sauvegarde:",r);const a=(0,c.A)((0,c.A)({id:s.id},t),{},{timestamp:s.created_at});n(t=>t.some(t=>t.title===e.title&&t.message===e.message&&Date.now()-new Date(t.timestamp).getTime()<6e4)?t:[a,...t.slice(0,49)])}catch(t){console.error("[NOTIFICATIONS] Erreur lors de l'ajout:",t)}},[]),m=(0,r.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;await u(e)},[u]),p=(0,r.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5e3;const r=Date.now()+Math.random(),n={id:r,message:e,type:t,duration:s};d(e=>[...e,n]),setTimeout(()=>{y(r)},s)},[]),f=(0,r.useCallback)(e=>{p(e,"success")},[p]),x=(0,r.useCallback)(e=>{p(e,"error")},[p]),g=(0,r.useCallback)(e=>{p(e,"warning")},[p]),v=(0,r.useCallback)(e=>{p(e,"info")},[p]),y=(0,r.useCallback)(e=>{d(t=>t.filter(t=>t.id!==e))},[]),b={notifications:s,unreadCount:a,addNotification:h,markAsRead:async e=>{try{if(!ot.ND)return void n(t=>t.map(t=>t.id===e?(0,c.A)((0,c.A)({},t),{},{read:!0}):t));const{error:t}=await ot.ND.from("notifications").update({read:!0}).eq("id",e);if(t)return void console.error("[NOTIFICATIONS] Erreur lors de la mise \xe0 jour:",t);n(t=>t.map(t=>t.id===e?(0,c.A)((0,c.A)({},t),{},{read:!0}):t))}catch(t){console.error("[NOTIFICATIONS] Erreur lors de la mise \xe0 jour:",t)}},markAllAsRead:async()=>{try{if(!ot.ND)return void n(e=>e.map(e=>(0,c.A)((0,c.A)({},e),{},{read:!0})));const{error:e}=await ot.ND.from("notifications").update({read:!0}).eq("read",!1);if(e)return void console.error("[NOTIFICATIONS] Erreur lors de la mise \xe0 jour globale:",e);n(e=>e.map(e=>(0,c.A)((0,c.A)({},e),{},{read:!0})))}catch(e){console.error("[NOTIFICATIONS] Erreur lors de la mise \xe0 jour globale:",e)}},removeNotification:async e=>{try{if(!ot.ND)return void n(t=>t.filter(t=>t.id!==e));const{error:t}=await ot.ND.from("notifications").delete().eq("id",e);if(t)return void console.error("[NOTIFICATIONS] Erreur lors de la suppression:",t);n(t=>t.filter(t=>t.id!==e))}catch(t){console.error("[NOTIFICATIONS] Erreur lors de la suppression:",t)}},clearAllNotifications:async()=>{try{if(!ot.ND)return void n([]);const{error:e}=await ot.ND.from("notifications").delete().neq("id",0);if(e)return void console.error("[NOTIFICATIONS] Erreur lors de la suppression globale:",e);n([])}catch(e){console.error("[NOTIFICATIONS] Erreur lors de la suppression globale:",e)}},clearReadNotifications:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;try{if(!ot.ND)return void n(e=>e.filter(e=>!e.read));let t=ot.ND.from("notifications").delete().eq("read",!0);e&&(t=t.eq("user_id",e));const{error:s}=await t;if(s)return void console.error("[NOTIFICATIONS] Erreur lors de la suppression des notifications lues:",s);n(e=>e.filter(e=>!e.read)),console.log("[NOTIFICATIONS] Notifications lues supprim\xe9es avec succ\xe8s")}catch(t){console.error("[NOTIFICATIONS] Erreur lors de la suppression des notifications lues:",t)}},refreshNotifications:m,showToast:p,showSuccess:f,showError:x,showWarning:g,showInfo:v};return(0,i.jsxs)(vt.Provider,{value:b,children:[t,(0,i.jsx)("div",{className:"fixed top-4 right-4 z-50 space-y-2",children:l.map(e=>(0,i.jsx)(gt,{message:e.message,type:e.type,duration:e.duration,onClose:()=>y(e.id)},e.id))})]})},jt=()=>{console.log("\ud83d\udd0d Test de la configuration PWA..."),"serviceWorker"in navigator?console.log("\u2705 Service Worker support\xe9"):console.log("\u274c Service Worker non support\xe9"),"beforeinstallprompt"in window?console.log("\u2705 API d'installation PWA disponible"):console.log("\u274c API d'installation PWA non disponible"),window.matchMedia("(display-mode: standalone)").matches?console.log("\u2705 App en mode standalone (install\xe9e)"):console.log("\u2139\ufe0f App en mode navigateur");const e=document.querySelector('link[rel="manifest"]');e?console.log("\u2705 Manifest.json trouv\xe9:",e.href):console.log("\u274c Manifest.json non trouv\xe9");const t=document.querySelector('meta[name="theme-color"]');t?console.log("\u2705 Theme color d\xe9fini:",t.content):console.log("\u274c Theme color non d\xe9fini");const s=document.querySelector('link[rel="apple-touch-icon"]');s?console.log("\u2705 Apple touch icon d\xe9fini:",s.href):console.log("\u274c Apple touch icon non d\xe9fini"),"caches"in window?(console.log("\u2705 Cache API disponible"),caches.keys().then(e=>{console.log("\ud83d\udce6 Caches disponibles:",e)})):console.log("\u274c Cache API non disponible"),console.log("\ud83c\udfaf Test PWA termin\xe9")},wt=()=>{console.log("\ud83d\udd27 For\xe7age de l'affichage du prompt d'installation...");const e=new Event("beforeinstallprompt");e.preventDefault=()=>{},e.prompt=()=>Promise.resolve({outcome:"accepted"}),e.userChoice=Promise.resolve({outcome:"accepted"}),window.dispatchEvent(e),console.log("\u2705 \xc9v\xe9nement beforeinstallprompt simul\xe9")},Nt=()=>{const e=window.matchMedia("(display-mode: standalone)").matches||!0===window.navigator.standalone,t=localStorage.getItem("pwa-install-prompt-seen"),s=localStorage.getItem("pwa-install-accepted"),r=localStorage.getItem("pwa-install-declined");return console.log("\ud83d\udcca \xc9tat d'installation:",{isInstalled:e,hasSeenPrompt:!!t,hasAccepted:!!s,hasDeclined:!!r}),{isInstalled:e,hasSeenPrompt:!!t,hasAccepted:!!s,hasDeclined:!!r}},St=()=>{console.log("\ud83d\udd04 R\xe9initialisation de l'\xe9tat d'installation..."),localStorage.removeItem("pwa-install-prompt-seen"),localStorage.removeItem("pwa-install-prompt-last-seen"),localStorage.removeItem("pwa-install-accepted"),localStorage.removeItem("pwa-install-declined"),localStorage.removeItem("pwa-install-declined-date"),localStorage.removeItem("pwa-installed"),localStorage.removeItem("pwa-install-date"),console.log("\u2705 \xc9tat d'installation r\xe9initialis\xe9")};"undefined"!==typeof window&&(window.testPWA={testConfiguration:jt,forceInstallPrompt:wt,checkInstallationStatus:Nt,resetInstallationState:St},console.log("\ud83d\udee0\ufe0f Fonctions de test PWA disponibles dans window.testPWA"));const kt=()=>{localStorage.removeItem("notification-prompt-seen"),localStorage.removeItem("notification-prompt-last-seen"),console.log("\ud83e\uddea [TEST] Prompt de notification r\xe9initialis\xe9 pour les tests")},At=()=>{kt(),console.log("\ud83e\uddea [TEST] Simulation d'un utilisateur non abonn\xe9")},_t=()=>{const e=localStorage.getItem("notification-prompt-seen"),t=localStorage.getItem("notification-prompt-last-seen");if(console.log("\ud83e\uddea [TEST] \xc9tat du prompt:"),console.log("   - A vu le prompt:",e),console.log("   - Derni\xe8re fois vu:",t?new Date(parseInt(t)).toLocaleString():"Jamais"),t){const e=(Date.now()-parseInt(t))/864e5;console.log("   - Jours depuis la derni\xe8re fois:",Math.round(e))}return{hasSeenPrompt:!!e,lastSeen:t?parseInt(t):null,daysSinceLastSeen:t?(Date.now()-parseInt(t))/864e5:null}},Et=()=>{console.log("\ud83e\uddea [TEST] Test des conditions d'affichage du prompt:");const e="serviceWorker"in navigator&&"PushManager"in window,t=Notification.permission;console.log("   - Notifications support\xe9es:",e),console.log("   - Permission actuelle:",t),console.log("   - Service Worker disponible:","serviceWorker"in navigator),console.log("   - PushManager disponible:","PushManager"in window);const s=_t(),r=e&&"denied"!==t&&(!s.hasSeenPrompt||s.daysSinceLastSeen&&s.daysSinceLastSeen>=3);return console.log("   - Devrait afficher le prompt:",r),{isSupported:e,permission:t,shouldShow:r,promptState:s}},Ct=()=>{kt(),console.log("\ud83e\uddea [TEST] Prompt forc\xe9 pour les tests - rechargez la page")},Pt=()=>{kt(),console.log("\ud83e\uddea [TEST] Simulation d'un utilisateur qui a refus\xe9"),console.log("   - Pour tester, refusez manuellement les notifications dans votre navigateur")},Tt=async()=>{console.log("\ud83e\uddea [TEST] Test du cycle complet de notifications..."),console.log("\n1. \xc9tat initial:");const e=Et();console.log("\n2. R\xe9initialisation pour le test:"),kt(),console.log("\n3. \xc9tat apr\xe8s r\xe9initialisation:");const t=Et();return console.log("\n\u2705 Test termin\xe9. Rechargez la page pour voir le prompt."),{initialState:e,resetState:t}};"undefined"!==typeof window&&(window.testNotificationPrompt={resetNotificationPromptForTesting:kt,simulateUnsubscribedUser:At,checkPromptState:_t,testPromptConditions:Et,forceShowPromptForTesting:Ct,simulateDeniedUser:Pt,testCompleteNotificationFlow:Tt},console.log("\ud83e\uddea [TEST] Utilitaires de test charg\xe9s. Utilisez:"),console.log("   - testNotificationPrompt.testCompleteNotificationFlow()"),console.log("   - testNotificationPrompt.checkPromptState()"),console.log("   - testNotificationPrompt.forceShowPromptForTesting()"));var It=s(7528);let Rt={data:""},Ot=e=>"object"==typeof window?((e?e.querySelector("#_goober"):window._goober)||Object.assign((e||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:e||Rt,Dt=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,Lt=/\/\*[^]*?\*\/|  +/g,zt=/\n+/g,Mt=(e,t)=>{let s="",r="",n="";for(let a in e){let i=e[a];"@"==a[0]?"i"==a[1]?s=a+" "+i+";":r+="f"==a[1]?Mt(i,a):a+"{"+Mt(i,"k"==a[1]?"":t)+"}":"object"==typeof i?r+=Mt(i,t?t.replace(/([^,])+/g,e=>a.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,t=>/&/.test(t)?t.replace(/&/g,e):e?e+" "+t:t)):a):null!=i&&(a=/^--/.test(a)?a:a.replace(/[A-Z]/g,"-$&").toLowerCase(),n+=Mt.p?Mt.p(a,i):a+":"+i+";")}return s+(t&&n?t+"{"+n+"}":n)+r},Ft={},Ut=e=>{if("object"==typeof e){let t="";for(let s in e)t+=s+Ut(e[s]);return t}return e},Bt=(e,t,s,r,n)=>{let a=Ut(e),i=Ft[a]||(Ft[a]=(e=>{let t=0,s=11;for(;t<e.length;)s=101*s+e.charCodeAt(t++)>>>0;return"go"+s})(a));if(!Ft[i]){let t=a!==e?e:(e=>{let t,s,r=[{}];for(;t=Dt.exec(e.replace(Lt,""));)t[4]?r.shift():t[3]?(s=t[3].replace(zt," ").trim(),r.unshift(r[0][s]=r[0][s]||{})):r[0][t[1]]=t[2].replace(zt," ").trim();return r[0]})(e);Ft[i]=Mt(n?{["@keyframes "+i]:t}:t,s?"":"."+i)}let o=s&&Ft.g?Ft.g:null;return s&&(Ft.g=Ft[i]),((e,t,s,r)=>{r?t.data=t.data.replace(r,e):-1===t.data.indexOf(e)&&(t.data=s?e+t.data:t.data+e)})(Ft[i],t,r,o),i};function Vt(e){let t=this||{},s=e.call?e(t.p):e;return Bt(s.unshift?s.raw?((e,t,s)=>e.reduce((e,r,n)=>{let a=t[n];if(a&&a.call){let e=a(s),t=e&&e.props&&e.props.className||/^go/.test(e)&&e;a=t?"."+t:e&&"object"==typeof e?e.props?"":Mt(e,""):!1===e?"":e}return e+r+(null==a?"":a)},""))(s,[].slice.call(arguments,1),t.p):s.reduce((e,s)=>Object.assign(e,s&&s.call?s(t.p):s),{}):s,Ot(t.target),t.g,t.o,t.k)}Vt.bind({g:1});let qt,Ht,Wt,Gt=Vt.bind({k:1});function Kt(e,t){let s=this||{};return function(){let r=arguments;function n(a,i){let o=Object.assign({},a),l=o.className||n.className;s.p=Object.assign({theme:Ht&&Ht()},o),s.o=/ *go\d+/.test(l),o.className=Vt.apply(s,r)+(l?" "+l:""),t&&(o.ref=i);let c=e;return e[0]&&(c=o.as||e,delete o.as),Wt&&c[0]&&Wt(o),qt(c,o)}return t?t(n):n}}var Zt,Qt,Jt,Yt,$t,Xt,es,ts,ss,rs,ns,as,is,os,ls,cs,ds=(e,t)=>(e=>"function"==typeof e)(e)?e(t):e,us=(()=>{let e=0;return()=>(++e).toString()})(),hs=(()=>{let e;return()=>{if(void 0===e&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),ms="default",ps=(e,t)=>{let{toastLimit:s}=e.settings;switch(t.type){case 0:return(0,c.A)((0,c.A)({},e),{},{toasts:[t.toast,...e.toasts].slice(0,s)});case 1:return(0,c.A)((0,c.A)({},e),{},{toasts:e.toasts.map(e=>e.id===t.toast.id?(0,c.A)((0,c.A)({},e),t.toast):e)});case 2:let{toast:r}=t;return ps(e,{type:e.toasts.find(e=>e.id===r.id)?1:0,toast:r});case 3:let{toastId:n}=t;return(0,c.A)((0,c.A)({},e),{},{toasts:e.toasts.map(e=>e.id===n||void 0===n?(0,c.A)((0,c.A)({},e),{},{dismissed:!0,visible:!1}):e)});case 4:return void 0===t.toastId?(0,c.A)((0,c.A)({},e),{},{toasts:[]}):(0,c.A)((0,c.A)({},e),{},{toasts:e.toasts.filter(e=>e.id!==t.toastId)});case 5:return(0,c.A)((0,c.A)({},e),{},{pausedAt:t.time});case 6:let a=t.time-(e.pausedAt||0);return(0,c.A)((0,c.A)({},e),{},{pausedAt:void 0,toasts:e.toasts.map(e=>(0,c.A)((0,c.A)({},e),{},{pauseDuration:e.pauseDuration+a}))})}},fs=[],xs={toasts:[],pausedAt:void 0,settings:{toastLimit:20}},gs={},vs=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ms;gs[t]=ps(gs[t]||xs,e),fs.forEach(e=>{let[s,r]=e;s===t&&r(gs[t])})},ys=e=>Object.keys(gs).forEach(t=>vs(e,t)),bs=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ms;return t=>{vs(t,e)}},js={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},ws=e=>(t,s)=>{let r=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"blank",s=arguments.length>2?arguments[2]:void 0;return(0,c.A)((0,c.A)({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0},s),{},{id:(null==s?void 0:s.id)||us()})}(t,e,s);return bs(r.toasterId||(e=>Object.keys(gs).find(t=>gs[t].toasts.some(t=>t.id===e)))(r.id))({type:2,toast:r}),r.id},Ns=(e,t)=>ws("blank")(e,t);Ns.error=ws("error"),Ns.success=ws("success"),Ns.loading=ws("loading"),Ns.custom=ws("custom"),Ns.dismiss=(e,t)=>{let s={type:3,toastId:e};t?bs(t)(s):ys(s)},Ns.dismissAll=e=>Ns.dismiss(void 0,e),Ns.remove=(e,t)=>{let s={type:4,toastId:e};t?bs(t)(s):ys(s)},Ns.removeAll=e=>Ns.remove(void 0,e),Ns.promise=(e,t,s)=>{let r=Ns.loading(t.loading,(0,c.A)((0,c.A)({},s),null==s?void 0:s.loading));return"function"==typeof e&&(e=e()),e.then(e=>{let n=t.success?ds(t.success,e):void 0;return n?Ns.success(n,(0,c.A)((0,c.A)({id:r},s),null==s?void 0:s.success)):Ns.dismiss(r),e}).catch(e=>{let n=t.error?ds(t.error,e):void 0;n?Ns.error(n,(0,c.A)((0,c.A)({id:r},s),null==s?void 0:s.error)):Ns.dismiss(r)}),e};var Ss=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",{toasts:s,pausedAt:n}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ms,[s,n]=(0,r.useState)(gs[t]||xs),a=(0,r.useRef)(gs[t]);(0,r.useEffect)(()=>(a.current!==gs[t]&&n(gs[t]),fs.push([t,n]),()=>{let e=fs.findIndex(e=>{let[s]=e;return s===t});e>-1&&fs.splice(e,1)}),[t]);let i=s.toasts.map(t=>{var s,r,n;return(0,c.A)((0,c.A)((0,c.A)((0,c.A)({},e),e[t.type]),t),{},{removeDelay:t.removeDelay||(null==(s=e[t.type])?void 0:s.removeDelay)||(null==e?void 0:e.removeDelay),duration:t.duration||(null==(r=e[t.type])?void 0:r.duration)||(null==e?void 0:e.duration)||js[t.type],style:(0,c.A)((0,c.A)((0,c.A)({},e.style),null==(n=e[t.type])?void 0:n.style),t.style)})});return(0,c.A)((0,c.A)({},s),{},{toasts:i})}(e,t),a=(0,r.useRef)(new Map).current,i=(0,r.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;if(a.has(e))return;let s=setTimeout(()=>{a.delete(e),o({type:4,toastId:e})},t);a.set(e,s)},[]);(0,r.useEffect)(()=>{if(n)return;let e=Date.now(),r=s.map(s=>{if(s.duration===1/0)return;let r=(s.duration||0)+s.pauseDuration-(e-s.createdAt);if(!(r<0))return setTimeout(()=>Ns.dismiss(s.id,t),r);s.visible&&Ns.dismiss(s.id)});return()=>{r.forEach(e=>e&&clearTimeout(e))}},[s,n,t]);let o=(0,r.useCallback)(bs(t),[t]),l=(0,r.useCallback)(()=>{o({type:5,time:Date.now()})},[o]),d=(0,r.useCallback)((e,t)=>{o({type:1,toast:{id:e,height:t}})},[o]),u=(0,r.useCallback)(()=>{n&&o({type:6,time:Date.now()})},[n,o]),h=(0,r.useCallback)((e,t)=>{let{reverseOrder:r=!1,gutter:n=8,defaultPosition:a}=t||{},i=s.filter(t=>(t.position||a)===(e.position||a)&&t.height),o=i.findIndex(t=>t.id===e.id),l=i.filter((e,t)=>t<o&&e.visible).length;return i.filter(e=>e.visible).slice(...r?[l+1]:[0,l]).reduce((e,t)=>e+(t.height||0)+n,0)},[s]);return(0,r.useEffect)(()=>{s.forEach(e=>{if(e.dismissed)i(e.id,e.removeDelay);else{let t=a.get(e.id);t&&(clearTimeout(t),a.delete(e.id))}})},[s,i]),{toasts:s,handlers:{updateHeight:d,startPause:l,endPause:u,calculateOffset:h}}},ks=Gt(Zt||(Zt=(0,It.A)(["\nfrom {\n  transform: scale(0) rotate(45deg);\n\topacity: 0;\n}\nto {\n transform: scale(1) rotate(45deg);\n  opacity: 1;\n}"]))),As=Gt(Qt||(Qt=(0,It.A)(["\nfrom {\n  transform: scale(0);\n  opacity: 0;\n}\nto {\n  transform: scale(1);\n  opacity: 1;\n}"]))),_s=Gt(Jt||(Jt=(0,It.A)(["\nfrom {\n  transform: scale(0) rotate(90deg);\n\topacity: 0;\n}\nto {\n  transform: scale(1) rotate(90deg);\n\topacity: 1;\n}"]))),Es=Kt("div")(Yt||(Yt=(0,It.A)(["\n  width: 20px;\n  opacity: 0;\n  height: 20px;\n  border-radius: 10px;\n  background: ",";\n  position: relative;\n  transform: rotate(45deg);\n\n  animation: "," 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)\n    forwards;\n  animation-delay: 100ms;\n\n  &:after,\n  &:before {\n    content: '';\n    animation: "," 0.15s ease-out forwards;\n    animation-delay: 150ms;\n    position: absolute;\n    border-radius: 3px;\n    opacity: 0;\n    background: ",";\n    bottom: 9px;\n    left: 4px;\n    height: 2px;\n    width: 12px;\n  }\n\n  &:before {\n    animation: "," 0.15s ease-out forwards;\n    animation-delay: 180ms;\n    transform: rotate(90deg);\n  }\n"])),e=>e.primary||"#ff4b4b",ks,As,e=>e.secondary||"#fff",_s),Cs=Gt($t||($t=(0,It.A)(["\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n"]))),Ps=Kt("div")(Xt||(Xt=(0,It.A)(["\n  width: 12px;\n  height: 12px;\n  box-sizing: border-box;\n  border: 2px solid;\n  border-radius: 100%;\n  border-color: ",";\n  border-right-color: ",";\n  animation: "," 1s linear infinite;\n"])),e=>e.secondary||"#e0e0e0",e=>e.primary||"#616161",Cs),Ts=Gt(es||(es=(0,It.A)(["\nfrom {\n  transform: scale(0) rotate(45deg);\n\topacity: 0;\n}\nto {\n  transform: scale(1) rotate(45deg);\n\topacity: 1;\n}"]))),Is=Gt(ts||(ts=(0,It.A)(["\n0% {\n\theight: 0;\n\twidth: 0;\n\topacity: 0;\n}\n40% {\n  height: 0;\n\twidth: 6px;\n\topacity: 1;\n}\n100% {\n  opacity: 1;\n  height: 10px;\n}"]))),Rs=Kt("div")(ss||(ss=(0,It.A)(["\n  width: 20px;\n  opacity: 0;\n  height: 20px;\n  border-radius: 10px;\n  background: ",";\n  position: relative;\n  transform: rotate(45deg);\n\n  animation: "," 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)\n    forwards;\n  animation-delay: 100ms;\n  &:after {\n    content: '';\n    box-sizing: border-box;\n    animation: "," 0.2s ease-out forwards;\n    opacity: 0;\n    animation-delay: 200ms;\n    position: absolute;\n    border-right: 2px solid;\n    border-bottom: 2px solid;\n    border-color: ",";\n    bottom: 6px;\n    left: 6px;\n    height: 10px;\n    width: 6px;\n  }\n"])),e=>e.primary||"#61d345",Ts,Is,e=>e.secondary||"#fff"),Os=Kt("div")(rs||(rs=(0,It.A)(["\n  position: absolute;\n"]))),Ds=Kt("div")(ns||(ns=(0,It.A)(["\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  min-width: 20px;\n  min-height: 20px;\n"]))),Ls=Gt(as||(as=(0,It.A)(["\nfrom {\n  transform: scale(0.6);\n  opacity: 0.4;\n}\nto {\n  transform: scale(1);\n  opacity: 1;\n}"]))),zs=Kt("div")(is||(is=(0,It.A)(["\n  position: relative;\n  transform: scale(0.6);\n  opacity: 0.4;\n  min-width: 20px;\n  animation: "," 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)\n    forwards;\n"])),Ls),Ms=e=>{let{toast:t}=e,{icon:s,type:n,iconTheme:a}=t;return void 0!==s?"string"==typeof s?r.createElement(zs,null,s):s:"blank"===n?null:r.createElement(Ds,null,r.createElement(Ps,(0,c.A)({},a)),"loading"!==n&&r.createElement(Os,null,"error"===n?r.createElement(Es,(0,c.A)({},a)):r.createElement(Rs,(0,c.A)({},a))))},Fs=e=>"\n0% {transform: translate3d(0,".concat(-200*e,"%,0) scale(.6); opacity:.5;}\n100% {transform: translate3d(0,0,0) scale(1); opacity:1;}\n"),Us=e=>"\n0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}\n100% {transform: translate3d(0,".concat(-150*e,"%,-1px) scale(.6); opacity:0;}\n"),Bs=Kt("div")(os||(os=(0,It.A)(["\n  display: flex;\n  align-items: center;\n  background: #fff;\n  color: #363636;\n  line-height: 1.3;\n  will-change: transform;\n  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);\n  max-width: 350px;\n  pointer-events: auto;\n  padding: 8px 10px;\n  border-radius: 8px;\n"]))),Vs=Kt("div")(ls||(ls=(0,It.A)(["\n  display: flex;\n  justify-content: center;\n  margin: 4px 10px;\n  color: inherit;\n  flex: 1 1 auto;\n  white-space: pre-line;\n"]))),qs=r.memo(e=>{let{toast:t,position:s,style:n,children:a}=e,i=t.height?((e,t)=>{let s=e.includes("top")?1:-1,[r,n]=hs()?["0%{opacity:0;} 100%{opacity:1;}","0%{opacity:1;} 100%{opacity:0;}"]:[Fs(s),Us(s)];return{animation:t?"".concat(Gt(r)," 0.35s cubic-bezier(.21,1.02,.73,1) forwards"):"".concat(Gt(n)," 0.4s forwards cubic-bezier(.06,.71,.55,1)")}})(t.position||s||"top-center",t.visible):{opacity:0},o=r.createElement(Ms,{toast:t}),l=r.createElement(Vs,(0,c.A)({},t.ariaProps),ds(t.message,t));return r.createElement(Bs,{className:t.className,style:(0,c.A)((0,c.A)((0,c.A)({},i),n),t.style)},"function"==typeof a?a({icon:o,message:l}):r.createElement(r.Fragment,null,o,l))});!function(e,t,s,r){Mt.p=t,qt=e,Ht=s,Wt=r}(r.createElement);var Hs=e=>{let{id:t,className:s,style:n,onHeightUpdate:a,children:i}=e,o=r.useCallback(e=>{if(e){let s=()=>{let s=e.getBoundingClientRect().height;a(t,s)};s(),new MutationObserver(s).observe(e,{subtree:!0,childList:!0,characterData:!0})}},[t,a]);return r.createElement("div",{ref:o,className:s,style:n},i)},Ws=Vt(cs||(cs=(0,It.A)(["\n  z-index: 9999;\n  > * {\n    pointer-events: auto;\n  }\n"]))),Gs=e=>{let{reverseOrder:t,position:s="top-center",toastOptions:n,gutter:a,children:i,toasterId:o,containerStyle:l,containerClassName:d}=e,{toasts:u,handlers:h}=Ss(n,o);return r.createElement("div",{"data-rht-toaster":o||"",style:(0,c.A)({position:"fixed",zIndex:9999,top:16,left:16,right:16,bottom:16,pointerEvents:"none"},l),className:d,onMouseEnter:h.startPause,onMouseLeave:h.endPause},u.map(e=>{let n=e.position||s,o=((e,t)=>{let s=e.includes("top"),r=s?{top:0}:{bottom:0},n=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return(0,c.A)((0,c.A)({left:0,right:0,display:"flex",position:"absolute",transition:hs()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:"translateY(".concat(t*(s?1:-1),"px)")},r),n)})(n,h.calculateOffset(e,{reverseOrder:t,gutter:a,defaultPosition:s}));return r.createElement(Hs,{id:e.id,key:e.id,onHeightUpdate:h.updateHeight,className:e.visible?Ws:"",style:o},"custom"===e.type?ds(e.message,e):i?i(e):r.createElement(qs,{toast:e,position:n}))}))},Ks=Ns;const Zs=3e5,Qs=(0,mt.A)("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);var Js=s(4068);const Ys=e=>{let{updateAvailable:t,newVersion:s,onUpdate:n,onIgnore:a,currentVersion:o}=e;const[l,c]=(0,r.useState)(!1),[d,u]=(0,r.useState)(!1);(0,r.useEffect)(()=>{t&&setTimeout(()=>{c(!0)},500)},[t]);const h=()=>{c(!1),setTimeout(()=>{a()},300)};if(!t||!l)return null;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"fixed inset-0 bg-black/20 backdrop-blur-sm z-[9998] transition-opacity duration-300 ".concat(l?"opacity-100":"opacity-0"),onClick:h}),(0,i.jsx)("div",{className:"fixed bottom-4 right-4 left-4 sm:left-auto sm:max-w-md z-[9999] transition-all duration-300 ".concat(l?"translate-y-0 opacity-100":"translate-y-full opacity-0"),children:(0,i.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl border border-gray-100 overflow-hidden",children:[(0,i.jsxs)("div",{className:"bg-gradient-to-r from-blue-500 via-indigo-500 to-purple-600 p-4 relative overflow-hidden",children:[(0,i.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-400/20 to-transparent"}),(0,i.jsxs)("div",{className:"relative flex items-center justify-between",children:[(0,i.jsxs)("div",{className:"flex items-center gap-3",children:[(0,i.jsx)("div",{className:"p-2 bg-white/20 rounded-xl backdrop-blur-sm",children:(0,i.jsx)(Qs,{className:"w-5 h-5 text-white"})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{className:"text-white font-bold text-lg",children:"Mise \xe0 jour disponible"}),(0,i.jsxs)("p",{className:"text-white/90 text-xs",children:[s?(e=>e?"v".concat(e.version||e):"nouvelle version")(s):"Nouvelle version"," pr\xeate \xe0 \xeatre install\xe9e"]})]})]}),(0,i.jsx)("button",{onClick:h,className:"p-1.5 hover:bg-white/20 rounded-lg transition-colors","aria-label":"Fermer",children:(0,i.jsx)(xt,{className:"w-4 h-4 text-white"})})]})]}),(0,i.jsxs)("div",{className:"p-4 space-y-4",children:[(0,i.jsxs)("div",{className:"flex items-start gap-3",children:[(0,i.jsx)("div",{className:"p-2 bg-blue-50 rounded-lg",children:(0,i.jsx)(ht.A,{className:"w-5 h-5 text-blue-600"})}),(0,i.jsxs)("div",{className:"flex-1",children:[(0,i.jsx)("p",{className:"text-gray-700 text-sm font-medium",children:"Une nouvelle version de l'application est disponible"}),(0,i.jsx)("p",{className:"text-gray-500 text-xs mt-1",children:null!==s&&void 0!==s&&s.buildDate?"Mise \xe0 jour du ".concat(new Date(s.buildDate).toLocaleDateString("fr-FR",{day:"numeric",month:"long",year:"numeric"})):"Profitez des derni\xe8res am\xe9liorations et corrections"})]})]}),(0,i.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3 space-y-2",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2 text-xs text-gray-600",children:[(0,i.jsx)("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full"}),(0,i.jsx)("span",{children:"Nouvelles fonctionnalit\xe9s"})]}),(0,i.jsxs)("div",{className:"flex items-center gap-2 text-xs text-gray-600",children:[(0,i.jsx)("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full"}),(0,i.jsx)("span",{children:"Corrections de bugs"})]}),(0,i.jsxs)("div",{className:"flex items-center gap-2 text-xs text-gray-600",children:[(0,i.jsx)("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full"}),(0,i.jsx)("span",{children:"Am\xe9lioration des performances"})]})]}),(0,i.jsxs)("div",{className:"flex gap-3",children:[(0,i.jsx)("button",{onClick:h,className:"flex-1 px-4 py-2.5 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-xl transition-colors",children:"Plus tard"}),(0,i.jsx)("button",{onClick:async()=>{u(!0),setTimeout(()=>{n()},300)},disabled:d,className:"flex-1 flex items-center justify-center gap-2 px-4 py-2.5 text-sm font-semibold text-white bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700 rounded-xl transition-all shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed",children:d?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Js.A,{className:"w-4 h-4 animate-spin"}),"Mise \xe0 jour..."]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Js.A,{className:"w-4 h-4"}),"Mettre \xe0 jour"]})})]})]})]})})]})},$s="2.0.0",Xs="ab_app_version",er=()=>{try{const e=localStorage.getItem(Xs);return e!==$s&&(console.log("[CACHE] Nouvelle version d\xe9tect\xe9e:",$s,"(ancienne:",e,")"),localStorage.setItem(Xs,$s),tr(),console.log("[CACHE] Cache nettoy\xe9 pour la version",$s),!0)}catch(e){return console.error("[CACHE] Erreur lors de la v\xe9rification de version:",e),!1}},tr=async()=>{try{const e=["ab_user_cache","supabase.auth.token"];if(Object.keys(localStorage).forEach(t=>{e.some(e=>t.includes(e))||localStorage.removeItem(t)}),console.log("[CACHE] localStorage nettoy\xe9 (sauf donn\xe9es essentielles)"),sessionStorage.clear(),console.log("[CACHE] sessionStorage nettoy\xe9"),"caches"in window){const e=await caches.keys();await Promise.all(e.map(e=>(console.log("[CACHE] Suppression du cache:",e),caches.delete(e)))),console.log("[CACHE] Cache Service Worker nettoy\xe9")}if("serviceWorker"in navigator){const e=await navigator.serviceWorker.getRegistrations();for(let t of e)await t.unregister(),console.log("[CACHE] Service Worker d\xe9sinscrit")}return!0}catch(e){return console.error("[CACHE] Erreur lors du nettoyage du cache:",e),!1}},sr=()=>er()?(console.log("[CACHE] \u2705 Application mise \xe0 jour vers la version",$s),!0):(console.log("[CACHE] Application \xe0 jour (version",$s,")"),!1),rr=()=>(console.log("\ud83d\udd04 R\xe9initialisation de tous les prompts utilisateur..."),localStorage.removeItem("pwa-install-prompt-seen"),localStorage.removeItem("pwa-install-prompt-dismissed"),localStorage.removeItem("pwa-install-prompt-last-seen"),localStorage.removeItem("notification-prompt-seen"),localStorage.removeItem("notification-prompt-declined"),localStorage.removeItem("notification-prompt-last-seen"),console.log("\u2705 Tous les prompts ont \xe9t\xe9 r\xe9initialis\xe9s"),!0),nr=()=>(console.log("\ud83d\udd04 R\xe9initialisation des prompts PWA..."),localStorage.removeItem("pwa-install-prompt-seen"),localStorage.removeItem("pwa-install-prompt-dismissed"),localStorage.removeItem("pwa-install-prompt-last-seen"),console.log("\u2705 Prompts PWA r\xe9initialis\xe9s"),!0),ar=()=>(console.log("\ud83d\udd04 R\xe9initialisation des prompts de notifications..."),localStorage.removeItem("notification-prompt-seen"),localStorage.removeItem("notification-prompt-declined"),localStorage.removeItem("notification-prompt-last-seen"),console.log("\u2705 Prompts de notifications r\xe9initialis\xe9s"),!0),ir=()=>{const e={pwa:{seen:"true"===localStorage.getItem("pwa-install-prompt-seen"),dismissed:"true"===localStorage.getItem("pwa-install-prompt-dismissed"),lastSeen:localStorage.getItem("pwa-install-prompt-last-seen")},notifications:{seen:"true"===localStorage.getItem("notification-prompt-seen"),declined:"true"===localStorage.getItem("notification-prompt-declined"),lastSeen:localStorage.getItem("notification-prompt-last-seen")}};return console.log("\ud83d\udcca \xc9tat des prompts:",e),e},or=()=>{console.log("\ud83d\udd27 For\xe7age de l'affichage des prompts..."),rr(),window.location.reload()};"undefined"!==typeof window&&(window.resetAllUserPrompts=rr,window.resetPWAPrompts=nr,window.resetNotificationPrompts=ar,window.checkPromptStatus=ir,window.forceShowPrompts=or,console.log("\n\ud83d\udd27 Utilitaires de prompts disponibles dans la console :\n\n\u2022 resetAllUserPrompts() - R\xe9initialise tous les prompts\n\u2022 resetPWAPrompts() - R\xe9initialise seulement les prompts PWA\n\u2022 resetNotificationPrompts() - R\xe9initialise seulement les prompts de notifications\n\u2022 checkPromptStatus() - V\xe9rifie l'\xe9tat actuel des prompts\n\u2022 forceShowPrompts() - Force l'affichage des prompts (recharge la page)\n\n\ud83d\udca1 Utilisez ces fonctions pour tester ou r\xe9initialiser les prompts utilisateur.\n  "));const lr=(0,mt.A)("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]),cr=(0,mt.A)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),dr=(0,mt.A)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),ur=(0,mt.A)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),hr=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],mr=(()=>new Set(hr))(),pr=e=>180*e/Math.PI,fr=e=>{const t=pr(Math.atan2(e[1],e[0]));return gr(t)},xr={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:fr,rotateZ:fr,skewX:e=>pr(Math.atan(e[1])),skewY:e=>pr(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},gr=e=>((e%=360)<0&&(e+=360),e),vr=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),yr=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),br={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:vr,scaleY:yr,scale:e=>(vr(e)+yr(e))/2,rotateX:e=>gr(pr(Math.atan2(e[6],e[5]))),rotateY:e=>gr(pr(Math.atan2(-e[2],e[0]))),rotateZ:fr,rotate:fr,skewX:e=>pr(Math.atan(e[4])),skewY:e=>pr(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function jr(e){return e.includes("scale")?1:0}function wr(e,t){if(!e||"none"===e)return jr(t);const s=e.match(/^matrix3d\(([\t-\r ,-\.0-9e\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+)\)$/);let r,n;if(s)r=br,n=s;else{const t=e.match(/^matrix\(([\t-\r ,-\.0-9e\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+)\)$/);r=xr,n=t}if(!n)return jr(t);const a=r[t],i=n[1].split(",").map(Nr);return"function"===typeof a?a(i):i[a]}function Nr(e){return parseFloat(e.trim())}const Sr=e=>t=>"string"===typeof t&&t.startsWith(e),kr=Sr("--"),Ar=Sr("var(--"),_r=e=>!!Ar(e)&&Er.test(e.split("/*")[0].trim()),Er=/var\(--(?:[\x2D0-9A-Z_a-z\u017F\u212A]+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*|[\x2D0-9A-Z_a-z\u017F\u212A]+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*,(?:[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(?:(?![\t-\r \(\)\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uD800-\uDFFF\uFEFF])[^]|[\uD800-\uDBFF][\uDC00-\uDFFF])|[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*\((?:(?:(?![\(\)\uD800-\uDFFF])[^]|[\uD800-\uDBFF][\uDC00-\uDFFF])|\((?:(?![\(\)\uD800-\uDFFF])[^]|[\uD800-\uDBFF][\uDC00-\uDFFF])*\))*\))+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*)\)$/i;function Cr(e){let{top:t,left:s,right:r,bottom:n}=e;return{x:{min:s,max:r},y:{min:t,max:n}}}const Pr=(e,t,s)=>e+(t-e)*s;function Tr(e){return void 0===e||1===e}function Ir(e){let{scale:t,scaleX:s,scaleY:r}=e;return!Tr(t)||!Tr(s)||!Tr(r)}function Rr(e){return Ir(e)||Or(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function Or(e){return Dr(e.x)||Dr(e.y)}function Dr(e){return e&&"0%"!==e}function Lr(e,t,s){return s+t*(e-s)}function zr(e,t,s,r,n){return void 0!==n&&(e=Lr(e,n,r)),Lr(e,s,r)+t}function Mr(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,n=arguments.length>4?arguments[4]:void 0;e.min=zr(e.min,t,s,r,n),e.max=zr(e.max,t,s,r,n)}function Fr(e,t){let{x:s,y:r}=t;Mr(e.x,s.translate,s.scale,s.originPoint),Mr(e.y,r.translate,r.scale,r.originPoint)}const Ur=.999999999999,Br=1.0000000000001;function Vr(e,t){e.min=e.min+t,e.max=e.max+t}function qr(e,t,s,r){let n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.5;Mr(e,t,s,Pr(e.min,e.max,n),r)}function Hr(e,t){qr(e.x,t.x,t.scaleX,t.scale,t.originX),qr(e.y,t.y,t.scaleY,t.scale,t.originY)}function Wr(e,t){return Cr(function(e,t){if(!t)return e;const s=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:s.y,left:s.x,bottom:r.y,right:r.x}}(e.getBoundingClientRect(),t))}const Gr=new Set(["width","height","top","left","right","bottom",...hr]),Kr=(e,t,s)=>s>t?t:s<e?e:s,Zr={test:e=>"number"===typeof e,parse:parseFloat,transform:e=>e},Qr=(0,c.A)((0,c.A)({},Zr),{},{transform:e=>Kr(0,1,e)}),Jr=(0,c.A)((0,c.A)({},Zr),{},{default:1}),Yr=e=>({test:t=>"string"===typeof t&&t.endsWith(e)&&1===t.split(" ").length,parse:parseFloat,transform:t=>"".concat(t).concat(e)}),$r=Yr("deg"),Xr=Yr("%"),en=Yr("px"),tn=Yr("vh"),sn=Yr("vw"),rn=(()=>(0,c.A)((0,c.A)({},Xr),{},{parse:e=>Xr.parse(e)/100,transform:e=>Xr.transform(100*e)}))(),nn=e=>t=>t.test(e),an=[Zr,en,Xr,$r,sn,tn,{test:e=>"auto"===e,parse:e=>e}],on=e=>an.find(nn(e));const ln=e=>/^-?(?:[0-9]+(?:\.[0-9]+)?|\.[0-9]+)$/.test(e),cn=/^var\(--(?:([\x2D0-9A-Z_a-z]+)|([\x2D0-9A-Z_a-z]+), ?([ #%\(\),-\.0-9A-Za-z]+))\)/;function dn(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;'Max CSS variable fallback depth detected in property "'.concat(e,'". This may indicate a circular fallback dependency.');const[r,n]=function(e){const t=cn.exec(e);if(!t)return[,];const[,s,r,n]=t;return["--".concat(null!==s&&void 0!==s?s:r),n]}(e);if(!r)return;const a=window.getComputedStyle(t).getPropertyValue(r);if(a){const e=a.trim();return ln(e)?parseFloat(e):e}return _r(n)?dn(n,t,s+1):n}const un=e=>e===Zr||e===en,hn=new Set(["x","y","z"]),mn=hr.filter(e=>!hn.has(e));const pn={width:(e,t)=>{let{x:s}=e,{paddingLeft:r="0",paddingRight:n="0"}=t;return s.max-s.min-parseFloat(r)-parseFloat(n)},height:(e,t)=>{let{y:s}=e,{paddingTop:r="0",paddingBottom:n="0"}=t;return s.max-s.min-parseFloat(r)-parseFloat(n)},top:(e,t)=>{let{top:s}=t;return parseFloat(s)},left:(e,t)=>{let{left:s}=t;return parseFloat(s)},bottom:(e,t)=>{let{y:s}=e,{top:r}=t;return parseFloat(r)+(s.max-s.min)},right:(e,t)=>{let{x:s}=e,{left:r}=t;return parseFloat(r)+(s.max-s.min)},x:(e,t)=>{let{transform:s}=t;return wr(s,"x")},y:(e,t)=>{let{transform:s}=t;return wr(s,"y")}};pn.translateX=pn.x,pn.translateY=pn.y;const fn=e=>e,xn={},gn=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],vn={value:null,addProjectionMetrics:null};function yn(e,t){let s=!1,r=!0;const n={delta:0,timestamp:0,isProcessing:!1},a=()=>s=!0,i=gn.reduce((e,s)=>(e[s]=function(e,t){let s=new Set,r=new Set,n=!1,a=!1;const i=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1},l=0;function c(t){i.has(t)&&(d.schedule(t),e()),l++,t(o)}const d={schedule:function(e){const t=arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&n?s:r;return arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&i.add(e),t.has(e)||t.add(e),e},cancel:e=>{r.delete(e),i.delete(e)},process:e=>{o=e,n?a=!0:(n=!0,[s,r]=[r,s],s.forEach(c),t&&vn.value&&vn.value.frameloop[t].push(l),l=0,s.clear(),n=!1,a&&(a=!1,d.process(e)))}};return d}(a,t?s:void 0),e),{}),{setup:o,read:l,resolveKeyframes:c,preUpdate:d,update:u,preRender:h,render:m,postRender:p}=i,f=()=>{const a=xn.useManualTiming?n.timestamp:performance.now();s=!1,xn.useManualTiming||(n.delta=r?1e3/60:Math.max(Math.min(a-n.timestamp,40),1)),n.timestamp=a,n.isProcessing=!0,o.process(n),l.process(n),c.process(n),d.process(n),u.process(n),h.process(n),m.process(n),p.process(n),n.isProcessing=!1,s&&t&&(r=!1,e(f))},x=gn.reduce((t,a)=>{const o=i[a];return t[a]=function(t){let a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return s||(s=!0,r=!0,n.isProcessing||e(f)),o.schedule(t,a,i)},t},{});return{schedule:x,cancel:e=>{for(let t=0;t<gn.length;t++)i[gn[t]].cancel(e)},state:n,steps:i}}const{schedule:bn,cancel:jn,state:wn,steps:Nn}=yn("undefined"!==typeof requestAnimationFrame?requestAnimationFrame:fn,!0),Sn=new Set;let kn=!1,An=!1,_n=!1;function En(){if(An){const e=Array.from(Sn).filter(e=>e.needsMeasurement),t=new Set(e.map(e=>e.element)),s=new Map;t.forEach(e=>{const t=function(e){const t=[];return mn.forEach(s=>{const r=e.getValue(s);void 0!==r&&(t.push([s,r.get()]),r.set(s.startsWith("scale")?1:0))}),t}(e);t.length&&(s.set(e,t),e.render())}),e.forEach(e=>e.measureInitialState()),t.forEach(e=>{e.render();const t=s.get(e);t&&t.forEach(t=>{var s;let[r,n]=t;null===(s=e.getValue(r))||void 0===s||s.set(n)})}),e.forEach(e=>e.measureEndState()),e.forEach(e=>{void 0!==e.suspendedScrollY&&window.scrollTo(0,e.suspendedScrollY)})}An=!1,kn=!1,Sn.forEach(e=>e.complete(_n)),Sn.clear()}function Cn(){Sn.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(An=!0)})}class Pn{constructor(e,t,s,r,n){let a=arguments.length>5&&void 0!==arguments[5]&&arguments[5];this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=s,this.motionValue=r,this.element=n,this.isAsync=a}scheduleResolve(){this.state="scheduled",this.isAsync?(Sn.add(this),kn||(kn=!0,bn.read(Cn),bn.resolveKeyframes(En))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:s,motionValue:r}=this;if(null===e[0]){const n=null===r||void 0===r?void 0:r.get(),a=e[e.length-1];if(void 0!==n)e[0]=n;else if(s&&t){const r=s.readValue(t,a);void 0!==r&&null!==r&&(e[0]=r)}void 0===e[0]&&(e[0]=a),r&&void 0===n&&r.set(e[0])}!function(e){for(let s=1;s<e.length;s++){var t;null!==(t=e[s])&&void 0!==t||(e[s]=e[s-1])}}(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Sn.delete(this)}cancel(){"scheduled"===this.state&&(Sn.delete(this),this.state="pending")}resume(){"pending"===this.state&&this.scheduleResolve()}}const Tn=e=>/^0(?:[\0-\x08\x0E-\x1F!-\x2D\/-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+$/.test(e);function In(e){return"number"===typeof e?0===e:null===e||("none"===e||"0"===e||Tn(e))}const Rn=e=>Math.round(1e5*e)/1e5,On=/-?(?:[0-9]+(?:\.[0-9]+)?|\.[0-9]+)/g;const Dn=/^(?:#[0-9a-f]{3,8}|(?:rgb|h[s\u017F]l)a?\((?:-?[\.0-9]+%?[\t-\r ,\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+){2}-?[\.0-9]+%?[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(?:[,\/][\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*)?(?:\b[0-9]+(?:\.[0-9]+)?|\.[0-9]+)?%?\))$/i,Ln=(e,t)=>s=>Boolean("string"===typeof s&&Dn.test(s)&&s.startsWith(e)||t&&!function(e){return null==e}(s)&&Object.prototype.hasOwnProperty.call(s,t)),zn=(e,t,s)=>r=>{if("string"!==typeof r)return r;const[n,a,i,o]=r.match(On);return{[e]:parseFloat(n),[t]:parseFloat(a),[s]:parseFloat(i),alpha:void 0!==o?parseFloat(o):1}},Mn=(0,c.A)((0,c.A)({},Zr),{},{transform:e=>Math.round((e=>Kr(0,255,e))(e))}),Fn={test:Ln("rgb","red"),parse:zn("red","green","blue"),transform:e=>{let{red:t,green:s,blue:r,alpha:n=1}=e;return"rgba("+Mn.transform(t)+", "+Mn.transform(s)+", "+Mn.transform(r)+", "+Rn(Qr.transform(n))+")"}};const Un={test:Ln("#"),parse:function(e){let t="",s="",r="",n="";return e.length>5?(t=e.substring(1,3),s=e.substring(3,5),r=e.substring(5,7),n=e.substring(7,9)):(t=e.substring(1,2),s=e.substring(2,3),r=e.substring(3,4),n=e.substring(4,5),t+=t,s+=s,r+=r,n+=n),{red:parseInt(t,16),green:parseInt(s,16),blue:parseInt(r,16),alpha:n?parseInt(n,16)/255:1}},transform:Fn.transform},Bn={test:Ln("hsl","hue"),parse:zn("hue","saturation","lightness"),transform:e=>{let{hue:t,saturation:s,lightness:r,alpha:n=1}=e;return"hsla("+Math.round(t)+", "+Xr.transform(Rn(s))+", "+Xr.transform(Rn(r))+", "+Rn(Qr.transform(n))+")"}},Vn={test:e=>Fn.test(e)||Un.test(e)||Bn.test(e),parse:e=>Fn.test(e)?Fn.parse(e):Bn.test(e)?Bn.parse(e):Un.parse(e),transform:e=>"string"===typeof e?e:e.hasOwnProperty("red")?Fn.transform(e):Bn.transform(e),getAnimatableNone:e=>{const t=Vn.parse(e);return t.alpha=0,Vn.transform(t)}},qn=/(?:#[0-9a-f]{3,8}|(?:rgb|h[s\u017F]l)a?\((?:-?[\.0-9]+%?[\t-\r ,\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+){2}-?[\.0-9]+%?[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(?:[,\/][\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*)?(?:\b[0-9]+(?:\.[0-9]+)?|\.[0-9]+)?%?\))/gi;const Hn="number",Wn="color",Gn=/var[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*\([\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*--(?:[\x2D0-9A-Z_a-z\u017F\u212A]+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*|[\x2D0-9A-Z_a-z\u017F\u212A]+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*,(?:[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(?:(?![\t-\r \(\)\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uD800-\uDFFF\uFEFF])[^]|[\uD800-\uDBFF][\uDC00-\uDFFF])|[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*\((?:(?:(?![\(\)\uD800-\uDFFF])[^]|[\uD800-\uDBFF][\uDC00-\uDFFF])|\((?:(?![\(\)\uD800-\uDFFF])[^]|[\uD800-\uDBFF][\uDC00-\uDFFF])*\))*\))+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*)\)|#[0-9a-f]{3,8}|(?:rgb|h[s\u017F]l)a?\((?:-?[\.0-9]+%?[\t-\r ,\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+){2}-?[\.0-9]+%?[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(?:[,\/][\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*)?(?:\b[0-9]+(?:\.[0-9]+)?|\.[0-9]+)?%?\)|-?(?:[0-9]+(?:\.[0-9]+)?|\.[0-9]+)/gi;function Kn(e){const t=e.toString(),s=[],r={color:[],number:[],var:[]},n=[];let a=0;const i=t.replace(Gn,e=>(Vn.test(e)?(r.color.push(a),n.push(Wn),s.push(Vn.parse(e))):e.startsWith("var(")?(r.var.push(a),n.push("var"),s.push(e)):(r.number.push(a),n.push(Hn),s.push(parseFloat(e))),++a,"${}")).split("${}");return{values:s,split:i,indexes:r,types:n}}function Zn(e){return Kn(e).values}function Qn(e){const{split:t,types:s}=Kn(e),r=t.length;return e=>{let n="";for(let a=0;a<r;a++)if(n+=t[a],void 0!==e[a]){const t=s[a];n+=t===Hn?Rn(e[a]):t===Wn?Vn.transform(e[a]):e[a]}return n}}const Jn=e=>"number"===typeof e?0:Vn.test(e)?Vn.getAnimatableNone(e):e;const Yn={test:function(e){var t,s;return isNaN(e)&&"string"===typeof e&&((null===(t=e.match(On))||void 0===t?void 0:t.length)||0)+((null===(s=e.match(qn))||void 0===s?void 0:s.length)||0)>0},parse:Zn,createTransformer:Qn,getAnimatableNone:function(e){const t=Zn(e);return Qn(e)(t.map(Jn))}},$n=new Set(["brightness","contrast","saturate","opacity"]);function Xn(e){const[t,s]=e.slice(0,-1).split("(");if("drop-shadow"===t)return e;const[r]=s.match(On)||[];if(!r)return e;const n=s.replace(r,"");let a=$n.has(t)?1:0;return r!==s&&(a*=100),t+"("+a+n+")"}const ea=/\b([\x2Da-z]*)\((?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?\)/g,ta=(0,c.A)((0,c.A)({},Yn),{},{getAnimatableNone:e=>{const t=e.match(ea);return t?t.map(Xn).join(" "):e}}),sa=(0,c.A)((0,c.A)({},Zr),{},{transform:Math.round}),ra={rotate:$r,rotateX:$r,rotateY:$r,rotateZ:$r,scale:Jr,scaleX:Jr,scaleY:Jr,scaleZ:Jr,skew:$r,skewX:$r,skewY:$r,distance:en,translateX:en,translateY:en,translateZ:en,x:en,y:en,z:en,perspective:en,transformPerspective:en,opacity:Qr,originX:rn,originY:rn,originZ:en},na=(0,c.A)((0,c.A)({borderWidth:en,borderTopWidth:en,borderRightWidth:en,borderBottomWidth:en,borderLeftWidth:en,borderRadius:en,radius:en,borderTopLeftRadius:en,borderTopRightRadius:en,borderBottomRightRadius:en,borderBottomLeftRadius:en,width:en,maxWidth:en,height:en,maxHeight:en,top:en,right:en,bottom:en,left:en,padding:en,paddingTop:en,paddingRight:en,paddingBottom:en,paddingLeft:en,margin:en,marginTop:en,marginRight:en,marginBottom:en,marginLeft:en,backgroundPositionX:en,backgroundPositionY:en},ra),{},{zIndex:sa,fillOpacity:Qr,strokeOpacity:Qr,numOctaves:sa}),aa=(0,c.A)((0,c.A)({},na),{},{color:Vn,backgroundColor:Vn,outlineColor:Vn,fill:Vn,stroke:Vn,borderColor:Vn,borderTopColor:Vn,borderRightColor:Vn,borderBottomColor:Vn,borderLeftColor:Vn,filter:ta,WebkitFilter:ta}),ia=e=>aa[e];function oa(e,t){let s=ia(e);return s!==ta&&(s=Yn),s.getAnimatableNone?s.getAnimatableNone(t):void 0}const la=new Set(["auto","none","0"]);class ca extends Pn{constructor(e,t,s,r,n){super(e,t,s,r,n,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:s}=this;if(!t||!t.current)return;super.readKeyframes();for(let o=0;o<e.length;o++){let s=e[o];if("string"===typeof s&&(s=s.trim(),_r(s))){const r=dn(s,t.current);void 0!==r&&(e[o]=r),o===e.length-1&&(this.finalKeyframe=s)}}if(this.resolveNoneKeyframes(),!Gr.has(s)||2!==e.length)return;const[r,n]=e,a=on(r),i=on(n);if(a!==i)if(un(a)&&un(i))for(let o=0;o<e.length;o++){const t=e[o];"string"===typeof t&&(e[o]=parseFloat(t))}else pn[s]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,s=[];for(let r=0;r<e.length;r++)(null===e[r]||In(e[r]))&&s.push(r);s.length&&function(e,t,s){let r,n=0;for(;n<e.length&&!r;){const t=e[n];"string"===typeof t&&!la.has(t)&&Kn(t).values.length&&(r=e[n]),n++}if(r&&s)for(const a of t)e[a]=oa(s,r)}(e,s,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:s}=this;if(!e||!e.current)return;"height"===s&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=pn[s](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const r=t[t.length-1];void 0!==r&&e.getValue(s,r).jump(r,!1)}measureEndState(){var e;const{element:t,name:s,unresolvedKeyframes:r}=this;if(!t||!t.current)return;const n=t.getValue(s);n&&n.jump(this.measuredOrigin,!1);const a=r.length-1,i=r[a];r[a]=pn[s](t.measureViewportBox(),window.getComputedStyle(t.current)),null!==i&&void 0===this.finalKeyframe&&(this.finalKeyframe=i),null!==(e=this.removedTransforms)&&void 0!==e&&e.length&&this.removedTransforms.forEach(e=>{let[s,r]=e;t.getValue(s).set(r)}),this.resolveNoneKeyframes()}}const da=e=>Boolean(e&&e.getVelocity);var ua=s(3986);let ha;function ma(){ha=void 0}const pa={now:()=>(void 0===ha&&pa.set(wn.isProcessing||xn.useManualTiming?wn.timestamp:performance.now()),ha),set:e=>{ha=e,queueMicrotask(ma)}};function fa(e,t){-1===e.indexOf(t)&&e.push(t)}function xa(e,t){const s=e.indexOf(t);s>-1&&e.splice(s,1)}class ga{constructor(){this.subscriptions=[]}add(e){return fa(this.subscriptions,e),()=>xa(this.subscriptions,e)}notify(e,t,s){const r=this.subscriptions.length;if(r)if(1===r)this.subscriptions[0](e,t,s);else for(let n=0;n<r;n++){const r=this.subscriptions[n];r&&r(e,t,s)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function va(e,t){return t?e*(1e3/t):0}const ya={current:void 0};class ba{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.canTrackVelocity=null,this.events={},this.updateAndNotify=e=>{const t=pa.now();var s;if((this.updatedAt!==t&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(e),this.current!==this.prev)&&(null===(s=this.events.change)||void 0===s||s.notify(this.current),this.dependents))for(const r of this.dependents)r.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){var t;this.current=e,this.updatedAt=pa.now(),null===this.canTrackVelocity&&void 0!==e&&(this.canTrackVelocity=(t=this.current,!isNaN(parseFloat(t))))}setPrevFrameValue(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.current;this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new ga);const s=this.events[e].add(t);return"change"===e?()=>{s(),bn.read(()=>{this.events.change.getSize()||this.stop()})}:s}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,t,s){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-s}jump(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;null===(e=this.events.change)||void 0===e||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return ya.current&&ya.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const e=pa.now();if(!this.canTrackVelocity||void 0===this.prevFrameValue||e-this.updatedAt>30)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,30);return va(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,t;null===(e=this.dependents)||void 0===e||e.clear(),null===(t=this.events.destroy)||void 0===t||t.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function ja(e,t){return new ba(e,t)}const wa=[...an,Vn,Yn],{schedule:Na,cancel:Sa}=yn(queueMicrotask,!1),ka={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Aa={};for(const s in ka)Aa[s]={isEnabled:e=>ka[s].some(t=>!!e[t])};const _a=()=>({x:{min:0,max:0},y:{min:0,max:0}}),Ea="undefined"!==typeof window,Ca={current:null},Pa={current:!1};const Ta=new WeakMap;function Ia(e){return null!==e&&"object"===typeof e&&"function"===typeof e.start}function Ra(e){return"string"===typeof e||Array.isArray(e)}const Oa=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Da=["initial",...Oa];function La(e){return Ia(e.animate)||Da.some(t=>Ra(e[t]))}function za(e){return Boolean(La(e)||e.variants)}function Ma(e){const t=[{},{}];return null===e||void 0===e||e.values.forEach((e,s)=>{t[0][s]=e.get(),t[1][s]=e.getVelocity()}),t}function Fa(e,t,s,r){if("function"===typeof t){const[n,a]=Ma(r);t=t(void 0!==s?s:e.custom,n,a)}if("string"===typeof t&&(t=e.variants&&e.variants[t]),"function"===typeof t){const[n,a]=Ma(r);t=t(void 0!==s?s:e.custom,n,a)}return t}const Ua=["willChange"],Ba=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class Va{scrapeMotionValuesFromProps(e,t,s){return{}}constructor(e){let{parent:t,props:s,presenceContext:r,reducedMotionConfig:n,blockInitialAnimation:a,visualState:i}=e,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Pn,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const e=pa.now();this.renderScheduledAt<e&&(this.renderScheduledAt=e,bn.render(this.render,!1,!0))};const{latestValues:l,renderState:d}=i;this.latestValues=l,this.baseTarget=(0,c.A)({},l),this.initialValues=s.initial?(0,c.A)({},l):{},this.renderState=d,this.parent=t,this.props=s,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=n,this.options=o,this.blockInitialAnimation=Boolean(a),this.isControllingVariants=La(s),this.isVariantNode=za(s),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=Boolean(t&&t.current);const u=this.scrapeMotionValuesFromProps(s,{},this),{willChange:h}=u,m=(0,ua.A)(u,Ua);for(const c in m){const e=m[c];void 0!==l[c]&&da(e)&&e.set(l[c])}}mount(e){var t;this.current=e,Ta.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((e,t)=>this.bindToMotionValue(t,e)),Pa.current||function(){if(Pa.current=!0,Ea)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>Ca.current=e.matches;e.addEventListener("change",t),t()}else Ca.current=!1}(),this.shouldReduceMotion="never"!==this.reducedMotionConfig&&("always"===this.reducedMotionConfig||Ca.current),null===(t=this.parent)||void 0===t||t.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var e;this.projection&&this.projection.unmount(),jn(this.notifyUpdate),jn(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),null===(e=this.parent)||void 0===e||e.removeChild(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const e=this.features[t];e&&(e.unmount(),e.isMounted=!1)}this.current=null}addChild(e){var t;this.children.add(e),null!==(t=this.enteringChildren)&&void 0!==t||(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const s=mr.has(e);s&&this.onBindTransform&&this.onBindTransform();const r=t.on("change",t=>{this.latestValues[e]=t,this.props.onUpdate&&bn.preRender(this.notifyUpdate),s&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let n;window.MotionCheckAppearSync&&(n=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{r(),n&&n(),t.owner&&t.stop()})}sortNodePosition(e){return this.current&&this.sortInstanceNodePosition&&this.type===e.type?this.sortInstanceNodePosition(this.current,e.current):0}updateFeatures(){let e="animation";for(e in Aa){const t=Aa[e];if(!t)continue;const{isEnabled:s,Feature:r}=t;if(!this.features[e]&&r&&s(this.props)&&(this.features[e]=new r(this)),this.features[e]){const t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):{x:{min:0,max:0},y:{min:0,max:0}}}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let s=0;s<Ba.length;s++){const t=Ba[s];this.propEventSubscriptions[t]&&(this.propEventSubscriptions[t](),delete this.propEventSubscriptions[t]);const r=e["on"+t];r&&(this.propEventSubscriptions[t]=this.on(t,r))}this.prevMotionValues=function(e,t,s){for(const r in t){const n=t[r],a=s[r];if(da(n))e.addValue(r,n);else if(da(a))e.addValue(r,ja(n,{owner:e}));else if(a!==n)if(e.hasValue(r)){const t=e.getValue(r);!0===t.liveStyle?t.jump(n):t.hasAnimated||t.set(n)}else{const t=e.getStaticValue(r);e.addValue(r,ja(void 0!==t?t:n,{owner:e}))}}for(const r in s)void 0===t[r]&&e.removeValue(r);return t}(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const s=this.values.get(e);t!==s&&(s&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let s=this.values.get(e);return void 0===s&&void 0!==t&&(s=ja(null===t?void 0:t,{owner:this}),this.addValue(e,s)),s}readValue(e,t){var s;let r=void 0===this.latestValues[e]&&this.current?null!==(s=this.getBaseTargetFromProps(this.props,e))&&void 0!==s?s:this.readValueFromInstance(this.current,e,this.options):this.latestValues[e];return void 0!==r&&null!==r&&("string"===typeof r&&(ln(r)||Tn(r))?r=parseFloat(r):!(e=>wa.find(nn(e)))(r)&&Yn.test(t)&&(r=oa(e,t)),this.setBaseTarget(e,da(r)?r.get():r)),da(r)?r.get():r}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){const{initial:t}=this.props;let s;if("string"===typeof t||"object"===typeof t){var r;const n=Fa(this.props,t,null===(r=this.presenceContext)||void 0===r?void 0:r.custom);n&&(s=n[e])}if(t&&void 0!==s)return s;const n=this.getBaseTargetFromProps(this.props,e);return void 0===n||da(n)?void 0!==this.initialValues[e]&&void 0===s?void 0:this.baseTarget[e]:n}on(e,t){return this.events[e]||(this.events[e]=new ga),this.events[e].add(t)}notify(e){if(this.events[e]){for(var t=arguments.length,s=new Array(t>1?t-1:0),r=1;r<t;r++)s[r-1]=arguments[r];this.events[e].notify(...s)}}scheduleRenderMicrotask(){Na.render(this.render)}}class qa extends Va{constructor(){super(...arguments),this.KeyframeResolver=ca}sortInstanceNodePosition(e,t){return 2&e.compareDocumentPosition(t)?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,t){let{vars:s,style:r}=t;delete s[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;da(e)&&(this.childSubscription=e.on("change",e=>{this.current&&(this.current.textContent="".concat(e))}))}}const Ha=(e,t)=>t&&"number"===typeof e?t.transform(e):e,Wa={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Ga=hr.length;function Ka(e,t,s){const{style:r,vars:n,transformOrigin:a}=e;let i=!1,o=!1;for(const l in t){const e=t[l];if(mr.has(l))i=!0;else if(kr(l))n[l]=e;else{const t=Ha(e,na[l]);l.startsWith("origin")?(o=!0,a[l]=t):r[l]=t}}if(t.transform||(i||s?r.transform=function(e,t,s){let r="",n=!0;for(let a=0;a<Ga;a++){const i=hr[a],o=e[i];if(void 0===o)continue;let l=!0;if(l="number"===typeof o?o===(i.startsWith("scale")?1:0):0===parseFloat(o),!l||s){const e=Ha(o,na[i]);l||(n=!1,r+="".concat(Wa[i]||i,"(").concat(e,") ")),s&&(t[i]=e)}}return r=r.trim(),s?r=s(t,n?"":r):n&&(r="none"),r}(t,e.transform,s):r.transform&&(r.transform="none")),o){const{originX:e="50%",originY:t="50%",originZ:s=0}=a;r.transformOrigin="".concat(e," ").concat(t," ").concat(s)}}function Za(e,t,s,r){let{style:n,vars:a}=t;const i=e.style;let o;for(o in n)i[o]=n[o];for(o in null===r||void 0===r||r.applyProjectionStyles(i,s),a)i.setProperty(o,a[o])}const Qa={};function Ja(e,t){let{layout:s,layoutId:r}=t;return mr.has(e)||e.startsWith("origin")||(s||void 0!==r)&&(!!Qa[e]||"opacity"===e)}function Ya(e,t,s){const{style:r}=e,n={};for(const i in r){var a;(da(r[i])||t.style&&da(t.style[i])||Ja(i,e)||void 0!==(null===s||void 0===s||null===(a=s.getValue(i))||void 0===a?void 0:a.liveStyle))&&(n[i]=r[i])}return n}class $a extends qa{constructor(){super(...arguments),this.type="html",this.renderInstance=Za}readValueFromInstance(e,t){var s,r;if(mr.has(t))return null!==(s=this.projection)&&void 0!==s&&s.isProjecting?jr(t):((e,t)=>{const{transform:s="none"}=getComputedStyle(e);return wr(s,t)})(e,t);{const s=(r=e,window.getComputedStyle(r)),n=(kr(t)?s.getPropertyValue(t):s[t])||0;return"string"===typeof n?n.trim():n}}measureInstanceViewportBox(e,t){let{transformPagePoint:s}=t;return Wr(e,s)}build(e,t,s){Ka(e,t,s.transformTemplate)}scrapeMotionValuesFromProps(e,t,s){return Ya(e,t,s)}}const Xa=e=>e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),ei={offset:"stroke-dashoffset",array:"stroke-dasharray"},ti={offset:"strokeDashoffset",array:"strokeDasharray"};const si=["attrX","attrY","attrScale","pathLength","pathSpacing","pathOffset"];function ri(e,t,s,r,n){let{attrX:a,attrY:i,attrScale:o,pathLength:l,pathSpacing:c=1,pathOffset:d=0}=t;if(Ka(e,(0,ua.A)(t,si),r),s)return void(e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox));e.attrs=e.style,e.style={};const{attrs:u,style:h}=e;var m,p;(u.transform&&(h.transform=u.transform,delete u.transform),h.transform||u.transformOrigin)&&(h.transformOrigin=null!==(m=u.transformOrigin)&&void 0!==m?m:"50% 50%",delete u.transformOrigin);h.transform&&(h.transformBox=null!==(p=null===n||void 0===n?void 0:n.transformBox)&&void 0!==p?p:"fill-box",delete u.transformBox);void 0!==a&&(u.x=a),void 0!==i&&(u.y=i),void 0!==o&&(u.scale=o),void 0!==l&&function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,n=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];e.pathLength=1;const a=n?ei:ti;e[a.offset]=en.transform(-r);const i=en.transform(t),o=en.transform(s);e[a.array]="".concat(i," ").concat(o)}(u,l,c,d,!1)}const ni=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]),ai=e=>"string"===typeof e&&"svg"===e.toLowerCase();function ii(e,t,s){const r=Ya(e,t,s);for(const n in e)if(da(e[n])||da(t[n])){r[-1!==hr.indexOf(n)?"attr"+n.charAt(0).toUpperCase()+n.substring(1):n]=e[n]}return r}class oi extends qa{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=_a}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(mr.has(t)){const e=ia(t);return e&&e.default||0}return t=ni.has(t)?t:Xa(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,s){return ii(e,t,s)}build(e,t,s){ri(e,t,this.isSVGTag,s.transformTemplate,s.style)}renderInstance(e,t,s,r){!function(e,t,s,r){Za(e,t,void 0,r);for(const n in t.attrs)e.setAttribute(ni.has(n)?n:Xa(n),t.attrs[n])}(e,t,0,r)}mount(e){this.isSVGTag=ai(e.tagName),super.mount(e)}}const li=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function ci(e){return"string"===typeof e&&!e.includes("-")&&!!(li.indexOf(e)>-1||/[A-Z]/.test(e))}const di=(e,t)=>ci(e)?new oi(t):new $a(t,{allowProjection:e!==r.Fragment}),ui=(0,r.createContext)({}),hi=(0,r.createContext)({strict:!1}),mi=(0,r.createContext)({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),pi=(0,r.createContext)({});function fi(e){const{initial:t,animate:s}=function(e,t){if(La(e)){const{initial:t,animate:s}=e;return{initial:!1===t||Ra(t)?t:void 0,animate:Ra(s)?s:void 0}}return!1!==e.inherit?t:{}}(e,(0,r.useContext)(pi));return(0,r.useMemo)(()=>({initial:t,animate:s}),[xi(t),xi(s)])}function xi(e){return Array.isArray(e)?e.join(" "):e}const gi=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function vi(e,t,s){for(const r in t)da(t[r])||Ja(r,s)||(e[r]=t[r])}function yi(e,t){const s={};return vi(s,e.style||{},e),Object.assign(s,function(e,t){let{transformTemplate:s}=e;return(0,r.useMemo)(()=>{const e={style:{},transform:{},transformOrigin:{},vars:{}};return Ka(e,t,s),Object.assign({},e.vars,e.style)},[t])}(e,t)),s}function bi(e,t){const s={},r=yi(e,t);return e.drag&&!1!==e.dragListener&&(s.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=!0===e.drag?"none":"pan-".concat("x"===e.drag?"y":"x")),void 0===e.tabIndex&&(e.onTap||e.onTapStart||e.whileTap)&&(s.tabIndex=0),s.style=r,s}const ji=()=>(0,c.A)((0,c.A)({},{style:{},transform:{},transformOrigin:{},vars:{}}),{},{attrs:{}});function wi(e,t,s,n){const a=(0,r.useMemo)(()=>{const s=ji();return ri(s,t,ai(n),e.transformTemplate,e.style),(0,c.A)((0,c.A)({},s.attrs),{},{style:(0,c.A)({},s.style)})},[t]);if(e.style){const t={};vi(t,e.style,e),a.style=(0,c.A)((0,c.A)({},t),a.style)}return a}const Ni=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Si(e){return e.startsWith("while")||e.startsWith("drag")&&"draggable"!==e||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||Ni.has(e)}let ki=e=>!Si(e);try{"function"===typeof(Ai=require("@emotion/is-prop-valid").default)&&(ki=e=>e.startsWith("on")?!Si(e):Ai(e))}catch(df){}var Ai;function _i(e,t,s,n,a){let{latestValues:i}=n,o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];const l=(ci(e)?wi:bi)(t,i,a,e),d=function(e,t,s){const r={};for(const n in e)"values"===n&&"object"===typeof e.values||(ki(n)||!0===s&&Si(n)||!t&&!Si(n)||e.draggable&&n.startsWith("onDrag"))&&(r[n]=e[n]);return r}(t,"string"===typeof e,o),u=e!==r.Fragment?(0,c.A)((0,c.A)((0,c.A)({},d),l),{},{ref:s}):{},{children:h}=t,m=(0,r.useMemo)(()=>da(h)?h.get():h,[h]);return(0,r.createElement)(e,(0,c.A)((0,c.A)({},u),{},{children:m}))}const Ei=(0,r.createContext)(null);function Ci(e){const t=(0,r.useRef)(null);return null===t.current&&(t.current=e()),t.current}function Pi(e){return da(e)?e.get():e}const Ti=["transitionEnd","transition"];function Ii(e,t,s,r){const n={},a=r(e,{});for(const h in a)n[h]=Pi(a[h]);let{initial:i,animate:o}=e;const l=La(e),c=za(e);t&&c&&!l&&!1!==e.inherit&&(void 0===i&&(i=t.initial),void 0===o&&(o=t.animate));let d=!!s&&!1===s.initial;d=d||!1===i;const u=d?o:i;if(u&&"boolean"!==typeof u&&!Ia(u)){const t=Array.isArray(u)?u:[u];for(let s=0;s<t.length;s++){const r=Fa(e,t[s]);if(r){const{transitionEnd:e,transition:t}=r,s=(0,ua.A)(r,Ti);for(const r in s){let e=s[r];if(Array.isArray(e)){e=e[d?e.length-1:0]}null!==e&&(n[r]=e)}for(const r in e)n[r]=e[r]}}}return n}const Ri=e=>(t,s)=>{const n=(0,r.useContext)(pi),a=(0,r.useContext)(Ei),i=()=>function(e,t,s,r){let{scrapeMotionValuesFromProps:n,createRenderState:a}=e;return{latestValues:Ii(t,s,r,n),renderState:a()}}(e,t,n,a);return s?i():Ci(i)},Oi=Ri({scrapeMotionValuesFromProps:Ya,createRenderState:gi}),Di=Ri({scrapeMotionValuesFromProps:ii,createRenderState:ji});const Li=Symbol.for("motionComponentSymbol");function zi(e){return e&&"object"===typeof e&&Object.prototype.hasOwnProperty.call(e,"current")}function Mi(e,t,s){return(0,r.useCallback)(r=>{r&&e.onMount&&e.onMount(r),t&&(r?t.mount(r):t.unmount()),s&&("function"===typeof s?s(r):zi(s)&&(s.current=r))},[t])}const Fi="data-"+Xa("framerAppearId"),Ui=(0,r.createContext)({}),Bi=Ea?r.useLayoutEffect:r.useEffect;function Vi(e,t,s,n,a){var i,o,l,c;const{visualElement:d}=(0,r.useContext)(pi),u=(0,r.useContext)(hi),h=(0,r.useContext)(Ei),m=(0,r.useContext)(mi).reducedMotion,p=(0,r.useRef)(null);n=n||u.renderer,!p.current&&n&&(p.current=n(e,{visualState:t,parent:d,props:s,presenceContext:h,blockInitialAnimation:!!h&&!1===h.initial,reducedMotionConfig:m}));const f=p.current,x=(0,r.useContext)(Ui);!f||f.projection||!a||"html"!==f.type&&"svg"!==f.type||function(e,t,s,r){const{layoutId:n,layout:a,drag:i,dragConstraints:o,layoutScroll:l,layoutRoot:c,layoutCrossfade:d}=t;e.projection=new s(e.latestValues,t["data-framer-portal-id"]?void 0:qi(e.parent)),e.projection.setOptions({layoutId:n,layout:a,alwaysMeasureLayout:Boolean(i)||o&&zi(o),visualElement:e,animationType:"string"===typeof a?a:"both",initialPromotionConfig:r,crossfade:d,layoutScroll:l,layoutRoot:c})}(p.current,s,a,x);const g=(0,r.useRef)(!1);(0,r.useInsertionEffect)(()=>{f&&g.current&&f.update(s,h)});const v=s[Fi],y=(0,r.useRef)(Boolean(v)&&!(null!==(i=(o=window).MotionHandoffIsComplete)&&void 0!==i&&i.call(o,v))&&(null===(l=(c=window).MotionHasOptimisedAnimation)||void 0===l?void 0:l.call(c,v)));return Bi(()=>{f&&(g.current=!0,window.MotionIsMounted=!0,f.updateFeatures(),f.scheduleRenderMicrotask(),y.current&&f.animationState&&f.animationState.animateChanges())}),(0,r.useEffect)(()=>{f&&(!y.current&&f.animationState&&f.animationState.animateChanges(),y.current&&(queueMicrotask(()=>{var e,t;null===(e=(t=window).MotionHandoffMarkAsComplete)||void 0===e||e.call(t,v)}),y.current=!1),f.enteringChildren=void 0)}),f}function qi(e){if(e)return!1!==e.options.allowProjection?e.projection:qi(e.parent)}function Hi(e){var t,s;let{forwardMotionProps:n=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0;a&&function(e){for(const t in e)Aa[t]=(0,c.A)((0,c.A)({},Aa[t]),e[t])}(a);const l=ci(e)?Di:Oi;function d(t,s){let a;const d=(0,c.A)((0,c.A)((0,c.A)({},(0,r.useContext)(mi)),t),{},{layoutId:Wi(t)}),{isStatic:u}=d,h=fi(t),m=l(t,u);if(!u&&Ea){!function(){(0,r.useContext)(hi).strict;0}();const t=function(e){const{drag:t,layout:s}=Aa;if(!t&&!s)return{};const r=(0,c.A)((0,c.A)({},t),s);return{MeasureLayout:null!==t&&void 0!==t&&t.isEnabled(e)||null!==s&&void 0!==s&&s.isEnabled(e)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}(d);a=t.MeasureLayout,h.visualElement=Vi(e,m,d,o,t.ProjectionNode)}return(0,i.jsxs)(pi.Provider,{value:h,children:[a&&h.visualElement?(0,i.jsx)(a,(0,c.A)({visualElement:h.visualElement},d)):null,_i(e,t,Mi(m,h.visualElement,s),m,u,n)]})}d.displayName="motion.".concat("string"===typeof e?e:"create(".concat(null!==(t=null!==(s=e.displayName)&&void 0!==s?s:e.name)&&void 0!==t?t:"",")"));const u=(0,r.forwardRef)(d);return u[Li]=e,u}function Wi(e){let{layoutId:t}=e;const s=(0,r.useContext)(ui).id;return s&&void 0!==t?s+"-"+t:t}function Gi(e,t){if("undefined"===typeof Proxy)return Hi;const s=new Map,r=(s,r)=>Hi(s,r,e,t);return new Proxy((e,t)=>r(e,t),{get:(n,a)=>"create"===a?r:(s.has(a)||s.set(a,Hi(a,void 0,e,t)),s.get(a))})}function Ki(e,t,s){const r=e.getProps();return Fa(r,t,void 0!==s?s:r.custom,e)}function Zi(e,t){var s,r;return null!==(s=null!==(r=null===e||void 0===e?void 0:e[t])&&void 0!==r?r:null===e||void 0===e?void 0:e.default)&&void 0!==s?s:e}const Qi=e=>Array.isArray(e),Ji=["transitionEnd","transition"];function Yi(e,t,s){e.hasValue(t)?e.getValue(t).set(s):e.addValue(t,ja(s))}function $i(e){return Qi(e)?e[e.length-1]||0:e}function Xi(e,t){const s=e.getValue("willChange");if(r=s,Boolean(da(r)&&r.add))return s.add(t);if(!s&&xn.WillChange){const s=new xn.WillChange("auto");e.addValue("willChange",s),s.add(t)}var r}function eo(e){return e.props[Fi]}function to(e){e.duration=0,e.type}const so=(e,t)=>s=>t(e(s)),ro=function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.reduce(so)},no=e=>1e3*e,ao=e=>e/1e3,io={layout:0,mainThread:0,waapi:0};function oo(e,t,s){return s<0&&(s+=1),s>1&&(s-=1),s<1/6?e+6*(t-e)*s:s<.5?t:s<2/3?e+(t-e)*(2/3-s)*6:e}function lo(e,t){return s=>s>0?t:e}const co=(e,t,s)=>{const r=e*e,n=s*(t*t-r)+r;return n<0?0:Math.sqrt(n)},uo=[Un,Fn,Bn];function ho(e){const t=(e=>uo.find(t=>t.test(e)))(e);if(Boolean(t),"'".concat(e,"' is not an animatable color. Use the equivalent color code instead."),!Boolean(t))return!1;let s=t.parse(e);return t===Bn&&(s=function(e){let{hue:t,saturation:s,lightness:r,alpha:n}=e;t/=360,s/=100,r/=100;let a=0,i=0,o=0;if(s){const e=r<.5?r*(1+s):r+s-r*s,n=2*r-e;a=oo(n,e,t+1/3),i=oo(n,e,t),o=oo(n,e,t-1/3)}else a=i=o=r;return{red:Math.round(255*a),green:Math.round(255*i),blue:Math.round(255*o),alpha:n}}(s)),s}const mo=(e,t)=>{const s=ho(e),r=ho(t);if(!s||!r)return lo(e,t);const n=(0,c.A)({},s);return e=>(n.red=co(s.red,r.red,e),n.green=co(s.green,r.green,e),n.blue=co(s.blue,r.blue,e),n.alpha=Pr(s.alpha,r.alpha,e),Fn.transform(n))},po=new Set(["none","hidden"]);function fo(e,t){return s=>Pr(e,t,s)}function xo(e){return"number"===typeof e?fo:"string"===typeof e?_r(e)?lo:Vn.test(e)?mo:yo:Array.isArray(e)?go:"object"===typeof e?Vn.test(e)?mo:vo:lo}function go(e,t){const s=[...e],r=s.length,n=e.map((e,s)=>xo(e)(e,t[s]));return e=>{for(let t=0;t<r;t++)s[t]=n[t](e);return s}}function vo(e,t){const s=(0,c.A)((0,c.A)({},e),t),r={};for(const n in s)void 0!==e[n]&&void 0!==t[n]&&(r[n]=xo(e[n])(e[n],t[n]));return e=>{for(const t in r)s[t]=r[t](e);return s}}const yo=(e,t)=>{const s=Yn.createTransformer(t),r=Kn(e),n=Kn(t);return r.indexes.var.length===n.indexes.var.length&&r.indexes.color.length===n.indexes.color.length&&r.indexes.number.length>=n.indexes.number.length?po.has(e)&&!n.values.length||po.has(t)&&!r.values.length?function(e,t){return po.has(e)?s=>s<=0?e:t:s=>s>=1?t:e}(e,t):ro(go(function(e,t){const s=[],r={color:0,var:0,number:0};for(let a=0;a<t.values.length;a++){var n;const i=t.types[a],o=e.indexes[i][r[i]],l=null!==(n=e.values[o])&&void 0!==n?n:0;s[a]=l,r[i]++}return s}(r,n),n.values),s):("Complex values '".concat(e,"' and '").concat(t,"' too different to mix. Ensure all colors are of the same type, and that each contains the same quantity of number and color values. Falling back to instant transition."),lo(e,t))};function bo(e,t,s){if("number"===typeof e&&"number"===typeof t&&"number"===typeof s)return Pr(e,t,s);return xo(e)(e,t)}const jo=e=>{const t=t=>{let{timestamp:s}=t;return e(s)};return{start:function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return bn.update(t,e)},stop:()=>jn(t),now:()=>wn.isProcessing?wn.timestamp:pa.now()}},wo=function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,r="";const n=Math.max(Math.round(t/s),2);for(let a=0;a<n;a++)r+=Math.round(1e4*e(a/(n-1)))/1e4+", ";return"linear(".concat(r.substring(0,r.length-2),")")},No=2e4;function So(e){let t=0;let s=e.next(t);for(;!s.done&&t<No;)t+=50,s=e.next(t);return t>=No?1/0:t}function ko(e,t,s){const r=Math.max(t-5,0);return va(s-e(r),t-r)}const Ao={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},_o=.001;function Eo(e){let t,s,{duration:r=Ao.duration,bounce:n=Ao.bounce,velocity:a=Ao.velocity,mass:i=Ao.mass}=e;no(Ao.maxDuration);let o=1-n;o=Kr(Ao.minDamping,Ao.maxDamping,o),r=Kr(Ao.minDuration,Ao.maxDuration,ao(r)),o<1?(t=e=>{const t=e*o,s=t*r,n=t-a,i=Po(e,o),l=Math.exp(-s);return _o-n/i*l},s=e=>{const s=e*o*r,n=s*a+a,i=Math.pow(o,2)*Math.pow(e,2)*r,l=Math.exp(-s),c=Po(Math.pow(e,2),o);return(-t(e)+_o>0?-1:1)*((n-i)*l)/c}):(t=e=>Math.exp(-e*r)*((e-a)*r+1)-.001,s=e=>Math.exp(-e*r)*(r*r*(a-e)));const l=function(e,t,s){let r=s;for(let n=1;n<Co;n++)r-=e(r)/t(r);return r}(t,s,5/r);if(r=no(r),isNaN(l))return{stiffness:Ao.stiffness,damping:Ao.damping,duration:r};{const e=Math.pow(l,2)*i;return{stiffness:e,damping:2*o*Math.sqrt(i*e),duration:r}}}const Co=12;function Po(e,t){return e*Math.sqrt(1-t*t)}const To=["duration","bounce"],Io=["stiffness","damping","mass"];function Ro(e,t){return t.some(t=>void 0!==e[t])}function Oo(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ao.visualDuration,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ao.bounce;const s="object"!==typeof e?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:r,restDelta:n}=s;const a=s.keyframes[0],i=s.keyframes[s.keyframes.length-1],o={done:!1,value:a},{stiffness:l,damping:d,mass:u,duration:h,velocity:m,isResolvedFromDuration:p}=function(e){let t=(0,c.A)({velocity:Ao.velocity,stiffness:Ao.stiffness,damping:Ao.damping,mass:Ao.mass,isResolvedFromDuration:!1},e);if(!Ro(e,Io)&&Ro(e,To))if(e.visualDuration){const s=e.visualDuration,r=2*Math.PI/(1.2*s),n=r*r,a=2*Kr(.05,1,1-(e.bounce||0))*Math.sqrt(n);t=(0,c.A)((0,c.A)({},t),{},{mass:Ao.mass,stiffness:n,damping:a})}else{const s=Eo(e);t=(0,c.A)((0,c.A)((0,c.A)({},t),s),{},{mass:Ao.mass}),t.isResolvedFromDuration=!0}return t}((0,c.A)((0,c.A)({},s),{},{velocity:-ao(s.velocity||0)})),f=m||0,x=d/(2*Math.sqrt(l*u)),g=i-a,v=ao(Math.sqrt(l/u)),y=Math.abs(g)<5;let b;if(r||(r=y?Ao.restSpeed.granular:Ao.restSpeed.default),n||(n=y?Ao.restDelta.granular:Ao.restDelta.default),x<1){const e=Po(v,x);b=t=>{const s=Math.exp(-x*v*t);return i-s*((f+x*v*g)/e*Math.sin(e*t)+g*Math.cos(e*t))}}else if(1===x)b=e=>i-Math.exp(-v*e)*(g+(f+v*g)*e);else{const e=v*Math.sqrt(x*x-1);b=t=>{const s=Math.exp(-x*v*t),r=Math.min(e*t,300);return i-s*((f+x*v*g)*Math.sinh(r)+e*g*Math.cosh(r))/e}}const j={calculatedDuration:p&&h||null,next:e=>{const t=b(e);if(p)o.done=e>=h;else{let s=0===e?f:0;x<1&&(s=0===e?no(f):ko(b,e,t));const a=Math.abs(s)<=r,l=Math.abs(i-t)<=n;o.done=a&&l}return o.value=o.done?i:t,o},toString:()=>{const e=Math.min(So(j),No),t=wo(t=>j.next(e*t).value,e,30);return e+"ms "+t},toTransition:()=>{}};return j}function Do(e){let{keyframes:t,velocity:s=0,power:r=.8,timeConstant:n=325,bounceDamping:a=10,bounceStiffness:i=500,modifyTarget:o,min:l,max:c,restDelta:d=.5,restSpeed:u}=e;const h=t[0],m={done:!1,value:h},p=e=>void 0===l?c:void 0===c||Math.abs(l-e)<Math.abs(c-e)?l:c;let f=r*s;const x=h+f,g=void 0===o?x:o(x);g!==x&&(f=g-h);const v=e=>-f*Math.exp(-e/n),y=e=>g+v(e),b=e=>{const t=v(e),s=y(e);m.done=Math.abs(t)<=d,m.value=m.done?g:s};let j,w;const N=e=>{(e=>void 0!==l&&e<l||void 0!==c&&e>c)(m.value)&&(j=e,w=Oo({keyframes:[m.value,p(m.value)],velocity:ko(y,e,m.value),damping:a,stiffness:i,restDelta:d,restSpeed:u}))};return N(0),{calculatedDuration:null,next:e=>{let t=!1;return w||void 0!==j||(t=!0,b(e),N(e)),void 0!==j&&e>=j?w.next(e-j):(!t&&b(e),m)}}}Oo.applyToOptions=e=>{const t=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;const s=(arguments.length>2?arguments[2]:void 0)((0,c.A)((0,c.A)({},e),{},{keyframes:[0,t]})),r=Math.min(So(s),No);return{type:"keyframes",ease:e=>s.next(r*e).value/t,duration:ao(r)}}(e,100,Oo);return e.ease=t.ease,e.duration=no(t.duration),e.type="keyframes",e};const Lo=(e,t,s)=>(((1-3*s+3*t)*e+(3*s-6*t))*e+3*t)*e;function zo(e,t,s,r){if(e===t&&s===r)return fn;const n=t=>function(e,t,s,r,n){let a,i,o=0;do{i=t+(s-t)/2,a=Lo(i,r,n)-e,a>0?s=i:t=i}while(Math.abs(a)>1e-7&&++o<12);return i}(t,0,1,e,s);return e=>0===e||1===e?e:Lo(n(e),t,r)}const Mo=zo(.42,0,1,1),Fo=zo(0,0,.58,1),Uo=zo(.42,0,.58,1),Bo=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,Vo=e=>t=>1-e(1-t),qo=zo(.33,1.53,.69,.99),Ho=Vo(qo),Wo=Bo(Ho),Go=e=>(e*=2)<1?.5*Ho(e):.5*(2-Math.pow(2,-10*(e-1))),Ko=e=>1-Math.sin(Math.acos(e)),Zo=Vo(Ko),Qo=Bo(Ko),Jo=e=>Array.isArray(e)&&"number"===typeof e[0],Yo={linear:fn,easeIn:Mo,easeInOut:Uo,easeOut:Fo,circIn:Ko,circInOut:Qo,circOut:Zo,backIn:Ho,backInOut:Wo,backOut:qo,anticipate:Go},$o=e=>{if(Jo(e)){e.length;const[t,s,r,n]=e;return zo(t,s,r,n)}return"string"===typeof e?("Invalid easing type '".concat(e,"'"),Yo[e]):e},Xo=(e,t,s)=>{const r=t-e;return 0===r?1:(s-e)/r};function el(e,t){let{clamp:s=!0,ease:r,mixer:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=e.length;if(t.length,1===a)return()=>t[0];if(2===a&&t[0]===t[1])return()=>t[1];const i=e[0]===e[1];e[0]>e[a-1]&&(e=[...e].reverse(),t=[...t].reverse());const o=function(e,t,s){const r=[],n=s||xn.mix||bo,a=e.length-1;for(let i=0;i<a;i++){let s=n(e[i],e[i+1]);if(t){const e=Array.isArray(t)?t[i]||fn:t;s=ro(e,s)}r.push(s)}return r}(t,r,n),l=o.length,c=s=>{if(i&&s<e[0])return t[0];let r=0;if(l>1)for(;r<e.length-2&&!(s<e[r+1]);r++);const n=Xo(e[r],e[r+1],s);return o[r](n)};return s?t=>c(Kr(e[0],e[a-1],t)):c}function tl(e){const t=[0];return function(e,t){const s=e[e.length-1];for(let r=1;r<=t;r++){const n=Xo(0,t,r);e.push(Pr(s,1,n))}}(t,e.length-1),t}function sl(e){let{duration:t=300,keyframes:s,times:r,ease:n="easeInOut"}=e;const a=(e=>Array.isArray(e)&&"number"!==typeof e[0])(n)?n.map($o):$o(n),i={done:!1,value:s[0]},o=function(e,t){return e.map(e=>e*t)}(r&&r.length===s.length?r:tl(s),t),l=el(o,s,{ease:Array.isArray(a)?a:(c=s,d=a,c.map(()=>d||Uo).splice(0,c.length-1))});var c,d;return{calculatedDuration:t,next:e=>(i.value=l(e),i.done=e>=t,i)}}const rl=e=>null!==e;function nl(e,t,s){let{repeat:r,repeatType:n="loop"}=t,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;const i=e.filter(rl),o=a<0||r&&"loop"!==n&&r%2===1?0:i.length-1;return o&&void 0!==s?s:i[o]}const al={decay:Do,inertia:Do,tween:sl,keyframes:sl,spring:Oo};function il(e){"string"===typeof e.type&&(e.type=al[e.type])}class ol{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const ll=e=>e/100;class cl extends ol{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var e,t;const{motionValue:s}=this.options;s&&s.updatedAt!==pa.now()&&this.tick(pa.now()),this.isStopped=!0,"idle"!==this.state&&(this.teardown(),null===(e=(t=this.options).onStop)||void 0===e||e.call(t))},io.mainThread++,this.options=e,this.initAnimation(),this.play(),!1===e.autoplay&&this.pause()}initAnimation(){const{options:e}=this;il(e);const{type:t=sl,repeat:s=0,repeatDelay:r=0,repeatType:n,velocity:a=0}=e;let{keyframes:i}=e;const o=t||sl;o!==sl&&"number"!==typeof i[0]&&(this.mixKeyframes=ro(ll,bo(i[0],i[1])),i=[0,100]);const l=o((0,c.A)((0,c.A)({},e),{},{keyframes:i}));"mirror"===n&&(this.mirroredGenerator=o((0,c.A)((0,c.A)({},e),{},{keyframes:[...i].reverse(),velocity:-a}))),null===l.calculatedDuration&&(l.calculatedDuration=So(l));const{calculatedDuration:d}=l;this.calculatedDuration=d,this.resolvedDuration=d+r,this.totalDuration=this.resolvedDuration*(s+1)-r,this.generator=l}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;null!==this.holdTime?this.currentTime=this.holdTime:this.currentTime=t}tick(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{generator:s,totalDuration:r,mixKeyframes:n,mirroredGenerator:a,resolvedDuration:i,calculatedDuration:o}=this;if(null===this.startTime)return s.next(0);const{delay:l=0,keyframes:c,repeat:d,repeatType:u,repeatDelay:h,type:m,onUpdate:p,finalKeyframe:f}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-r/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const x=this.currentTime-l*(this.playbackSpeed>=0?1:-1),g=this.playbackSpeed>=0?x<0:x>r;this.currentTime=Math.max(x,0),"finished"===this.state&&null===this.holdTime&&(this.currentTime=r);let v=this.currentTime,y=s;if(d){const e=Math.min(this.currentTime,r)/i;let t=Math.floor(e),s=e%1;!s&&e>=1&&(s=1),1===s&&t--,t=Math.min(t,d+1);Boolean(t%2)&&("reverse"===u?(s=1-s,h&&(s-=h/i)):"mirror"===u&&(y=a)),v=Kr(0,1,s)*i}const b=g?{done:!1,value:c[0]}:y.next(v);n&&(b.value=n(b.value));let{done:j}=b;g||null===o||(j=this.playbackSpeed>=0?this.currentTime>=r:this.currentTime<=0);const w=null===this.holdTime&&("finished"===this.state||"running"===this.state&&j);return w&&m!==Do&&(b.value=nl(c,this.options,f,this.speed)),p&&p(b.value),w&&this.finish(),b}then(e,t){return this.finished.then(e,t)}get duration(){return ao(this.calculatedDuration)}get time(){return ao(this.currentTime)}set time(e){var t;e=no(e),this.currentTime=e,null===this.startTime||null!==this.holdTime||0===this.playbackSpeed?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),null===(t=this.driver)||void 0===t||t.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(pa.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=ao(this.currentTime))}play(){var e,t;if(this.isStopped)return;const{driver:s=jo,startTime:r}=this.options;this.driver||(this.driver=s(e=>this.tick(e))),null===(e=(t=this.options).onPlay)||void 0===e||e.call(t);const n=this.driver.now();"finished"===this.state?(this.updateFinished(),this.startTime=n):null!==this.holdTime?this.startTime=n-this.holdTime:this.startTime||(this.startTime=null!==r&&void 0!==r?r:n),"finished"===this.state&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(pa.now()),this.holdTime=this.currentTime}complete(){"running"!==this.state&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,t;this.notifyFinished(),this.teardown(),this.state="finished",null===(e=(t=this.options).onComplete)||void 0===e||e.call(t)}cancel(){var e,t;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),null===(e=(t=this.options).onCancel)||void 0===e||e.call(t)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null,io.mainThread--}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var t;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),null===(t=this.driver)||void 0===t||t.stop(),e.observe(this)}}function dl(e){let t;return()=>(void 0===t&&(t=e()),t)}const ul=dl(()=>void 0!==window.ScrollTimeline),hl={};function ml(e,t){const s=dl(e);return()=>{var e;return null!==(e=hl[t])&&void 0!==e?e:s()}}const pl=ml(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch(Rt){return!1}return!0},"linearEasing"),fl=e=>{let[t,s,r,n]=e;return"cubic-bezier(".concat(t,", ").concat(s,", ").concat(r,", ").concat(n,")")},xl={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:fl([0,.65,.55,1]),circOut:fl([.55,0,1,.45]),backIn:fl([.31,.01,.66,-.59]),backOut:fl([.33,1.53,.69,.99])};function gl(e,t){return e?"function"===typeof e?pl()?wo(e,t):"ease-out":Jo(e)?fl(e):Array.isArray(e)?e.map(e=>gl(e,t)||xl.easeOut):xl[e]:void 0}function vl(e,t,s){let{delay:r=0,duration:n=300,repeat:a=0,repeatType:i="loop",ease:o="easeOut",times:l}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0;const d={[t]:s};l&&(d.offset=l);const u=gl(o,n);Array.isArray(u)&&(d.easing=u),vn.value&&io.waapi++;const h={delay:r,duration:n,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:a+1,direction:"reverse"===i?"alternate":"normal"};c&&(h.pseudoElement=c);const m=e.animate(d,h);return vn.value&&m.finished.finally(()=>{io.waapi--}),m}function yl(e){return"function"===typeof e&&"applyToOptions"in e}const bl=["type"];class jl extends ol{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:t,name:s,keyframes:r,pseudoElement:n,allowFlatten:a=!1,finalKeyframe:i,onComplete:o}=e;this.isPseudoElement=Boolean(n),this.allowFlatten=a,this.options=e,e.type;const l=function(e){let{type:t}=e,s=(0,ua.A)(e,bl);return yl(t)&&pl()?t.applyToOptions(s):(null!==(r=s.duration)&&void 0!==r||(s.duration=300),null!==(n=s.ease)&&void 0!==n||(s.ease="easeOut"),s);var r,n}(e);this.animation=vl(t,s,r,l,n),!1===l.autoplay&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!n){const e=nl(r,this.options,i,this.speed);this.updateMotionValue?this.updateMotionValue(e):function(e,t,s){(e=>e.startsWith("--"))(t)?e.style.setProperty(t,s):e.style[t]=s}(t,s,e),this.animation.cancel()}null===o||void 0===o||o(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),"finished"===this.state&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,t;null===(e=(t=this.animation).finish)||void 0===e||e.call(t)}cancel(){try{this.animation.cancel()}catch(Rt){}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;"idle"!==e&&"finished"!==e&&(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,t;this.isPseudoElement||(null===(e=(t=this.animation).commitStyles)||void 0===e||e.call(t))}get duration(){var e,t;const s=(null===(e=this.animation.effect)||void 0===e||null===(t=e.getComputedTiming)||void 0===t?void 0:t.call(e).duration)||0;return ao(Number(s))}get time(){return ao(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=no(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return null!==this.finishedTime?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline(e){let{timeline:t,observe:s}=e;var r;this.allowFlatten&&(null===(r=this.animation.effect)||void 0===r||r.updateTiming({easing:"linear"}));return this.animation.onfinish=null,t&&ul()?(this.animation.timeline=t,fn):s(this)}}const wl={anticipate:Go,backInOut:Wo,circInOut:Qo};function Nl(e){"string"===typeof e.ease&&e.ease in wl&&(e.ease=wl[e.ease])}const Sl=["motionValue","onUpdate","onComplete","element"];class kl extends jl{constructor(e){Nl(e),il(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){var t;const s=this.options,{motionValue:r,onUpdate:n,onComplete:a,element:i}=s,o=(0,ua.A)(s,Sl);if(!r)return;if(void 0!==e)return void r.set(e);const l=new cl((0,c.A)((0,c.A)({},o),{},{autoplay:!1})),d=no(null!==(t=this.finishedTime)&&void 0!==t?t:this.time);r.setWithVelocity(l.sample(d-10).value,l.sample(d).value,10),l.stop()}}const Al=(e,t)=>"zIndex"!==t&&(!("number"!==typeof e&&!Array.isArray(e))||!("string"!==typeof e||!Yn.test(e)&&"0"!==e||e.startsWith("url(")));const _l=new Set(["opacity","clipPath","filter","transform"]),El=dl(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));const Cl=["autoplay","delay","type","repeat","repeatDelay","repeatType","keyframes","name","motionValue","element"];class Pl extends ol{constructor(e){var t;let{autoplay:s=!0,delay:r=0,type:n="keyframes",repeat:a=0,repeatDelay:i=0,repeatType:o="loop",keyframes:l,name:d,motionValue:u,element:h}=e,m=(0,ua.A)(e,Cl);super(),this.stop=()=>{var e,t;this._animation&&(this._animation.stop(),null===(t=this.stopTimeline)||void 0===t||t.call(this));null===(e=this.keyframeResolver)||void 0===e||e.cancel()},this.createdAt=pa.now();const p=(0,c.A)({autoplay:s,delay:r,type:n,repeat:a,repeatDelay:i,repeatType:o,name:d,motionValue:u,element:h},m),f=(null===h||void 0===h?void 0:h.KeyframeResolver)||Pn;this.keyframeResolver=new f(l,(e,t,s)=>this.onKeyframesResolved(e,t,p,!s),d,u,h),null===(t=this.keyframeResolver)||void 0===t||t.scheduleResolve()}onKeyframesResolved(e,t,s,r){this.keyframeResolver=void 0;const{name:n,type:a,velocity:i,delay:o,isHandoff:l,onUpdate:d}=s;this.resolvedAt=pa.now(),function(e,t,s,r){const n=e[0];if(null===n)return!1;if("display"===t||"visibility"===t)return!0;const a=e[e.length-1],i=Al(n,t),o=Al(a,t);return"You are trying to animate ".concat(t,' from "').concat(n,'" to "').concat(a,'". "').concat(i?a:n,'" is not an animatable value.'),!(!i||!o)&&(function(e){const t=e[0];if(1===e.length)return!0;for(let s=0;s<e.length;s++)if(e[s]!==t)return!0}(e)||("spring"===s||yl(s))&&r)}(e,n,a,i)||(!xn.instantAnimations&&o||null===d||void 0===d||d(nl(e,s,t)),e[0]=e[e.length-1],to(s),s.repeat=0);const u=r?this.resolvedAt&&this.resolvedAt-this.createdAt>40?this.resolvedAt:this.createdAt:void 0,h=(0,c.A)((0,c.A)({startTime:u,finalKeyframe:t},s),{},{keyframes:e}),m=!l&&function(e){var t;const{motionValue:s,name:r,repeatDelay:n,repeatType:a,damping:i,type:o}=e;if(!((null===s||void 0===s||null===(t=s.owner)||void 0===t?void 0:t.current)instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:c}=s.owner.getProps();return El()&&r&&_l.has(r)&&("transform"!==r||!c)&&!l&&!n&&"mirror"!==a&&0!==i&&"inertia"!==o}(h)?new kl((0,c.A)((0,c.A)({},h),{},{element:h.motionValue.owner.current})):new cl(h);m.finished.then(()=>this.notifyFinished()).catch(fn),this.pendingTimeline&&(this.stopTimeline=m.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=m}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){var e;this._animation||(null===(e=this.keyframeResolver)||void 0===e||e.resume(),_n=!0,Cn(),En(),_n=!1);return this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),null===(e=this.keyframeResolver)||void 0===e||e.cancel()}}const Tl=e=>null!==e;const Il={type:"spring",stiffness:500,damping:25,restSpeed:10},Rl={type:"keyframes",duration:.8},Ol={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Dl=(e,t)=>{let{keyframes:s}=t;return s.length>2?Rl:mr.has(e)?e.startsWith("scale")?(e=>({type:"spring",stiffness:550,damping:0===e?2*Math.sqrt(550):30,restSpeed:10}))(s[1]):Il:Ol},Ll=["when","delay","delayChildren","staggerChildren","staggerDirection","repeat","repeatType","repeatDelay","from","elapsed"];const zl=function(e,t,s){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4?arguments[4]:void 0,a=arguments.length>5?arguments[5]:void 0;return i=>{const o=Zi(r,e)||{},l=o.delay||r.delay||0;let{elapsed:d=0}=r;d-=no(l);const u=(0,c.A)((0,c.A)({keyframes:Array.isArray(s)?s:[null,s],ease:"easeOut",velocity:t.getVelocity()},o),{},{delay:-d,onUpdate:e=>{t.set(e),o.onUpdate&&o.onUpdate(e)},onComplete:()=>{i(),o.onComplete&&o.onComplete()},name:e,motionValue:t,element:a?void 0:n});(function(e){let{when:t,delay:s,delayChildren:r,staggerChildren:n,staggerDirection:a,repeat:i,repeatType:o,repeatDelay:l,from:c,elapsed:d}=e,u=(0,ua.A)(e,Ll);return!!Object.keys(u).length})(o)||Object.assign(u,Dl(e,u)),u.duration&&(u.duration=no(u.duration)),u.repeatDelay&&(u.repeatDelay=no(u.repeatDelay)),void 0!==u.from&&(u.keyframes[0]=u.from);let h=!1;if((!1===u.type||0===u.duration&&!u.repeatDelay)&&(to(u),0===u.delay&&(h=!0)),(xn.instantAnimations||xn.skipAnimations)&&(h=!0,to(u),u.delay=0),u.allowFlatten=!o.type&&!o.ease,h&&!a&&void 0!==t.get()){const e=function(e,t,s){let{repeat:r,repeatType:n="loop"}=t;const a=e.filter(Tl),i=r&&"loop"!==n&&r%2===1?0:a.length-1;return i&&void 0!==s?s:a[i]}(u.keyframes,o);if(void 0!==e)return void bn.update(()=>{u.onUpdate(e),u.onComplete()})}return o.isSync?new cl(u):new Pl(u)}},Ml=["transition","transitionEnd"];function Fl(e,t){let{protectedKeys:s,needsAnimating:r}=e;const n=s.hasOwnProperty(t)&&!0!==r[t];return r[t]=!1,n}function Ul(e,t){let{delay:s=0,transitionOverride:r,type:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{transition:a=e.getDefaultTransition(),transitionEnd:i}=t,o=(0,ua.A)(t,Ml);r&&(a=r);const l=[],d=n&&e.animationState&&e.animationState.getState()[n];for(const h in o){var u;const t=e.getValue(h,null!==(u=e.latestValues[h])&&void 0!==u?u:null),r=o[h];if(void 0===r||d&&Fl(d,h))continue;const n=(0,c.A)({delay:s},Zi(a||{},h)),i=t.get();if(void 0!==i&&!t.isAnimating&&!Array.isArray(r)&&r===i&&!n.velocity)continue;let m=!1;if(window.MotionHandoffAnimation){const t=eo(e);if(t){const e=window.MotionHandoffAnimation(t,h,bn);null!==e&&(n.startTime=e,m=!0)}}Xi(e,h),t.start(zl(h,t,r,e.shouldReduceMotion&&Gr.has(h)?{type:!1}:n,e,m));const p=t.animation;p&&l.push(p)}return i&&Promise.all(l).then(()=>{bn.update(()=>{i&&function(e,t){let s=Ki(e,t)||{},{transitionEnd:r={},transition:n={}}=s,a=(0,ua.A)(s,Ji);a=(0,c.A)((0,c.A)({},a),r);for(const i in a)Yi(e,i,$i(a[i]))}(e,i)})}),l}function Bl(e,t,s){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;const a=Array.from(e).sort((e,t)=>e.sortNodePosition(t)).indexOf(t),i=e.size,o=(i-1)*r;return"function"===typeof s?s(a,i):1===n?a*r:o-a*r}function Vl(e,t){var s;let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const n=Ki(e,t,"exit"===r.type?null===(s=e.presenceContext)||void 0===s?void 0:s.custom:void 0);let{transition:a=e.getDefaultTransition()||{}}=n||{};r.transitionOverride&&(a=r.transitionOverride);const i=n?()=>Promise.all(Ul(e,n,r)):()=>Promise.resolve(),o=e.variantChildren&&e.variantChildren.size?function(){let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const{delayChildren:n=0,staggerChildren:i,staggerDirection:o}=a;return function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,i=arguments.length>6?arguments[6]:void 0;const o=[];for(const l of e.variantChildren)l.notify("AnimationStart",t),o.push(Vl(l,t,(0,c.A)((0,c.A)({},i),{},{delay:s+("function"===typeof r?0:r)+Bl(e.variantChildren,l,r,n,a)})).then(()=>l.notify("AnimationComplete",t)));return Promise.all(o)}(e,t,s,n,i,o,r)}:()=>Promise.resolve(),{when:l}=a;if(l){const[e,t]="beforeChildren"===l?[i,o]:[o,i];return e().then(()=>t())}return Promise.all([i(),o(r.delay)])}function ql(e,t){if(!Array.isArray(t))return!1;const s=t.length;if(s!==e.length)return!1;for(let r=0;r<s;r++)if(t[r]!==e[r])return!1;return!0}const Hl=Da.length;function Wl(e){if(!e)return;if(!e.isControllingVariants){const t=e.parent&&Wl(e.parent)||{};return void 0!==e.props.initial&&(t.initial=e.props.initial),t}const t={};for(let s=0;s<Hl;s++){const r=Da[s],n=e.props[r];(Ra(n)||!1===n)&&(t[r]=n)}return t}const Gl=["transition","transitionEnd"],Kl=[...Oa].reverse(),Zl=Oa.length;function Ql(e){return t=>Promise.all(t.map(t=>{let{animation:s,options:r}=t;return function(e,t){let s,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e.notify("AnimationStart",t),Array.isArray(t)){const n=t.map(t=>Vl(e,t,r));s=Promise.all(n)}else if("string"===typeof t)s=Vl(e,t,r);else{const n="function"===typeof t?Ki(e,t,r.custom):t;s=Promise.all(Ul(e,n,r))}return s.then(()=>{e.notify("AnimationComplete",t)})}(e,s,r)}))}function Jl(e){let t=Ql(e),s=Xl(),r=!0;const n=t=>(s,r)=>{var n;const a=Ki(e,r,"exit"===t?null===(n=e.presenceContext)||void 0===n?void 0:n.custom:void 0);if(a){const{transition:e,transitionEnd:t}=a,r=(0,ua.A)(a,Gl);s=(0,c.A)((0,c.A)((0,c.A)({},s),r),t)}return s};function a(a){const{props:i}=e,o=Wl(e.parent)||{},l=[],d=new Set;let u={},h=1/0;for(let t=0;t<Zl;t++){const m=Kl[t],p=s[m],f=void 0!==i[m]?i[m]:o[m],x=Ra(f),g=m===a?p.isActive:null;!1===g&&(h=t);let v=f===o[m]&&f!==i[m]&&x;if(v&&r&&e.manuallyAnimateOnMount&&(v=!1),p.protectedKeys=(0,c.A)({},u),!p.isActive&&null===g||!f&&!p.prevProp||Ia(f)||"boolean"===typeof f)continue;const y=Yl(p.prevProp,f);let b=y||m===a&&p.isActive&&!v&&x||t>h&&x,j=!1;const w=Array.isArray(f)?f:[f];let N=w.reduce(n(m),{});!1===g&&(N={});const{prevResolvedValues:S={}}=p,k=(0,c.A)((0,c.A)({},S),N),A=t=>{b=!0,d.has(t)&&(j=!0,d.delete(t)),p.needsAnimating[t]=!0;const s=e.getValue(t);s&&(s.liveStyle=!1)};for(const e in k){const t=N[e],s=S[e];if(u.hasOwnProperty(e))continue;let r=!1;r=Qi(t)&&Qi(s)?!ql(t,s):t!==s,r?void 0!==t&&null!==t?A(e):d.add(e):void 0!==t&&d.has(e)?A(e):p.protectedKeys[e]=!0}p.prevProp=f,p.prevResolvedValues=N,p.isActive&&(u=(0,c.A)((0,c.A)({},u),N)),r&&e.blockInitialAnimation&&(b=!1);const _=v&&y;b&&(!_||j)&&l.push(...w.map(t=>{const s={type:m};if("string"===typeof t&&r&&!_&&e.manuallyAnimateOnMount&&e.parent){const{parent:r}=e,n=Ki(r,t);if(r.enteringChildren&&n){const{delayChildren:t}=n.transition||{};s.delay=Bl(r.enteringChildren,e,t)}}return{animation:t,options:s}}))}if(d.size){const t={};if("boolean"!==typeof i.initial){const s=Ki(e,Array.isArray(i.initial)?i.initial[0]:i.initial);s&&s.transition&&(t.transition=s.transition)}d.forEach(s=>{const r=e.getBaseTarget(s),n=e.getValue(s);n&&(n.liveStyle=!0),t[s]=null!==r&&void 0!==r?r:null}),l.push({animation:t})}let m=Boolean(l.length);return!r||!1!==i.initial&&i.initial!==i.animate||e.manuallyAnimateOnMount||(m=!1),r=!1,m?t(l):Promise.resolve()}return{animateChanges:a,setActive:function(t,r){var n;if(s[t].isActive===r)return Promise.resolve();null===(n=e.variantChildren)||void 0===n||n.forEach(e=>{var s;return null===(s=e.animationState)||void 0===s?void 0:s.setActive(t,r)}),s[t].isActive=r;const i=a(t);for(const e in s)s[e].protectedKeys={};return i},setAnimateFunction:function(s){t=s(e)},getState:()=>s,reset:()=>{s=Xl(),r=!0}}}function Yl(e,t){return"string"===typeof t?t!==e:!!Array.isArray(t)&&!ql(t,e)}function $l(){return{isActive:arguments.length>0&&void 0!==arguments[0]&&arguments[0],protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Xl(){return{animate:$l(!0),whileInView:$l(),whileHover:$l(),whileTap:$l(),whileDrag:$l(),whileFocus:$l(),exit:$l()}}class ec{constructor(e){this.isMounted=!1,this.node=e}update(){}}let tc=0;const sc={animation:{Feature:class extends ec{constructor(e){super(e),e.animationState||(e.animationState=Jl(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Ia(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),null===(e=this.unmountControls)||void 0===e||e.call(this)}}},exit:{Feature:class extends ec{constructor(){super(...arguments),this.id=tc++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===s)return;const r=this.node.animationState.setActive("exit",!e);t&&!e&&r.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}}},rc={x:!1,y:!1};function nc(){return rc.x||rc.y}function ac(e,t,s){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{passive:!0};return e.addEventListener(t,s,r),()=>e.removeEventListener(t,s)}const ic=e=>"mouse"===e.pointerType?"number"!==typeof e.button||e.button<=0:!1!==e.isPrimary;function oc(e){return{point:{x:e.pageX,y:e.pageY}}}function lc(e,t,s,r){return ac(e,t,(e=>t=>ic(t)&&e(t,oc(t)))(s),r)}function cc(e){return e.max-e.min}function dc(e,t,s){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;e.origin=r,e.originPoint=Pr(t.min,t.max,e.origin),e.scale=cc(s)/cc(t),e.translate=Pr(s.min,s.max,e.origin)-e.originPoint,(e.scale>=.9999&&e.scale<=1.0001||isNaN(e.scale))&&(e.scale=1),(e.translate>=-.01&&e.translate<=.01||isNaN(e.translate))&&(e.translate=0)}function uc(e,t,s,r){dc(e.x,t.x,s.x,r?r.originX:void 0),dc(e.y,t.y,s.y,r?r.originY:void 0)}function hc(e,t,s){e.min=s.min+t.min,e.max=e.min+cc(t)}function mc(e,t,s){e.min=t.min-s.min,e.max=e.min+cc(t)}function pc(e,t,s){mc(e.x,t.x,s.x),mc(e.y,t.y,s.y)}function fc(e){return[e("x"),e("y")]}const xc=e=>{let{current:t}=e;return t?t.ownerDocument.defaultView:null},gc=(e,t)=>Math.abs(e-t);class vc{constructor(e,t){let{transformPagePoint:s,contextWindow:r=window,dragSnapToOrigin:n=!1,distanceThreshold:a=3}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!this.lastMoveEvent||!this.lastMoveEventInfo)return;const e=jc(this.lastMoveEventInfo,this.history),t=null!==this.startEvent,s=function(e,t){const s=gc(e.x,t.x),r=gc(e.y,t.y);return Math.sqrt(s**2+r**2)}(e.offset,{x:0,y:0})>=this.distanceThreshold;if(!t&&!s)return;const{point:r}=e,{timestamp:n}=wn;this.history.push((0,c.A)((0,c.A)({},r),{},{timestamp:n}));const{onStart:a,onMove:i}=this.handlers;t||(a&&a(this.lastMoveEvent,e),this.startEvent=this.lastMoveEvent),i&&i(this.lastMoveEvent,e)},this.handlePointerMove=(e,t)=>{this.lastMoveEvent=e,this.lastMoveEventInfo=yc(t,this.transformPagePoint),bn.update(this.updatePoint,!0)},this.handlePointerUp=(e,t)=>{this.end();const{onEnd:s,onSessionEnd:r,resumeAnimation:n}=this.handlers;if(this.dragSnapToOrigin&&n&&n(),!this.lastMoveEvent||!this.lastMoveEventInfo)return;const a=jc("pointercancel"===e.type?this.lastMoveEventInfo:yc(t,this.transformPagePoint),this.history);this.startEvent&&s&&s(e,a),r&&r(e,a)},!ic(e))return;this.dragSnapToOrigin=n,this.handlers=t,this.transformPagePoint=s,this.distanceThreshold=a,this.contextWindow=r||window;const i=yc(oc(e),this.transformPagePoint),{point:o}=i,{timestamp:l}=wn;this.history=[(0,c.A)((0,c.A)({},o),{},{timestamp:l})];const{onSessionStart:d}=t;d&&d(e,jc(i,this.history)),this.removeListeners=ro(lc(this.contextWindow,"pointermove",this.handlePointerMove),lc(this.contextWindow,"pointerup",this.handlePointerUp),lc(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),jn(this.updatePoint)}}function yc(e,t){return t?{point:t(e.point)}:e}function bc(e,t){return{x:e.x-t.x,y:e.y-t.y}}function jc(e,t){let{point:s}=e;return{point:s,delta:bc(s,Nc(t)),offset:bc(s,wc(t)),velocity:Sc(t,.1)}}function wc(e){return e[0]}function Nc(e){return e[e.length-1]}function Sc(e,t){if(e.length<2)return{x:0,y:0};let s=e.length-1,r=null;const n=Nc(e);for(;s>=0&&(r=e[s],!(n.timestamp-r.timestamp>no(t)));)s--;if(!r)return{x:0,y:0};const a=ao(n.timestamp-r.timestamp);if(0===a)return{x:0,y:0};const i={x:(n.x-r.x)/a,y:(n.y-r.y)/a};return i.x===1/0&&(i.x=0),i.y===1/0&&(i.y=0),i}function kc(e,t,s){return{min:void 0!==t?e.min+t:void 0,max:void 0!==s?e.max+s-(e.max-e.min):void 0}}function Ac(e,t){let s=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([s,r]=[r,s]),{min:s,max:r}}const _c=.35;function Ec(e,t,s){return{min:Cc(e,t),max:Cc(e,s)}}function Cc(e,t){return"number"===typeof e?e:e[t]||0}const Pc=new WeakMap;class Tc{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic={x:{min:0,max:0},y:{min:0,max:0}},this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e){let{snapToCursor:t=!1,distanceThreshold:s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{presenceContext:r}=this.visualElement;if(r&&!1===r.isPresent)return;const{dragSnapToOrigin:n}=this.getProps();this.panSession=new vc(e,{onSessionStart:e=>{const{dragSnapToOrigin:s}=this.getProps();s?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(oc(e).point)},onStart:(e,t)=>{const{drag:s,dragPropagation:r,onDragStart:n}=this.getProps();if(s&&!r&&(this.openDragLock&&this.openDragLock(),this.openDragLock="x"===(a=s)||"y"===a?rc[a]?null:(rc[a]=!0,()=>{rc[a]=!1}):rc.x||rc.y?null:(rc.x=rc.y=!0,()=>{rc.x=rc.y=!1}),!this.openDragLock))return;var a;this.latestPointerEvent=e,this.latestPanInfo=t,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),fc(e=>{let t=this.getAxisMotionValue(e).get()||0;if(Xr.test(t)){const{projection:s}=this.visualElement;if(s&&s.layout){const r=s.layout.layoutBox[e];if(r){t=cc(r)*(parseFloat(t)/100)}}}this.originPoint[e]=t}),n&&bn.postRender(()=>n(e,t)),Xi(this.visualElement,"transform");const{animationState:i}=this.visualElement;i&&i.setActive("whileDrag",!0)},onMove:(e,t)=>{this.latestPointerEvent=e,this.latestPanInfo=t;const{dragPropagation:s,dragDirectionLock:r,onDirectionLock:n,onDrag:a}=this.getProps();if(!s&&!this.openDragLock)return;const{offset:i}=t;if(r&&null===this.currentDirection)return this.currentDirection=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,s=null;Math.abs(e.y)>t?s="y":Math.abs(e.x)>t&&(s="x");return s}(i),void(null!==this.currentDirection&&n&&n(this.currentDirection));this.updateAxis("x",t.point,i),this.updateAxis("y",t.point,i),this.visualElement.render(),a&&a(e,t)},onSessionEnd:(e,t)=>{this.latestPointerEvent=e,this.latestPanInfo=t,this.stop(e,t),this.latestPointerEvent=null,this.latestPanInfo=null},resumeAnimation:()=>fc(e=>{var t;return"paused"===this.getAnimationState(e)&&(null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.play())})},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:n,distanceThreshold:s,contextWindow:xc(this.visualElement)})}stop(e,t){const s=e||this.latestPointerEvent,r=t||this.latestPanInfo,n=this.isDragging;if(this.cancel(),!n||!r||!s)return;const{velocity:a}=r;this.startAnimation(a);const{onDragEnd:i}=this.getProps();i&&bn.postRender(()=>i(s,r))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:s}=this.getProps();!s&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,s){const{drag:r}=this.getProps();if(!s||!Ic(e,r,this.currentDirection))return;const n=this.getAxisMotionValue(e);let a=this.originPoint[e]+s[e];this.constraints&&this.constraints[e]&&(a=function(e,t,s){let{min:r,max:n}=t;return void 0!==r&&e<r?e=s?Pr(r,e,s.min):Math.max(e,r):void 0!==n&&e>n&&(e=s?Pr(n,e,s.max):Math.min(e,n)),e}(a,this.constraints[e],this.elastic[e])),n.set(a)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:s}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):null===(e=this.visualElement.projection)||void 0===e?void 0:e.layout,n=this.constraints;t&&zi(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):this.constraints=!(!t||!r)&&function(e,t){let{top:s,left:r,bottom:n,right:a}=t;return{x:kc(e.x,r,a),y:kc(e.y,s,n)}}(r.layoutBox,t),this.elastic=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_c;return!1===e?e=0:!0===e&&(e=_c),{x:Ec(e,"left","right"),y:Ec(e,"top","bottom")}}(s),n!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&fc(e=>{!1!==this.constraints&&this.getAxisMotionValue(e)&&(this.constraints[e]=function(e,t){const s={};return void 0!==t.min&&(s.min=t.min-e.min),void 0!==t.max&&(s.max=t.max-e.min),s}(r.layoutBox[e],this.constraints[e]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!zi(e))return!1;const s=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const n=function(e,t,s){const r=Wr(e,s),{scroll:n}=t;return n&&(Vr(r.x,n.offset.x),Vr(r.y,n.offset.y)),r}(s,r.root,this.visualElement.getTransformPagePoint());let a=function(e,t){return{x:Ac(e.x,t.x),y:Ac(e.y,t.y)}}(r.layout.layoutBox,n);if(t){const e=t(function(e){let{x:t,y:s}=e;return{top:s.min,right:t.max,bottom:s.max,left:t.min}}(a));this.hasMutatedConstraints=!!e,e&&(a=Cr(e))}return a}startAnimation(e){const{drag:t,dragMomentum:s,dragElastic:r,dragTransition:n,dragSnapToOrigin:a,onDragTransitionEnd:i}=this.getProps(),o=this.constraints||{},l=fc(i=>{if(!Ic(i,t,this.currentDirection))return;let l=o&&o[i]||{};a&&(l={min:0,max:0});const d=r?200:1e6,u=r?40:1e7,h=(0,c.A)((0,c.A)({type:"inertia",velocity:s?e[i]:0,bounceStiffness:d,bounceDamping:u,timeConstant:750,restDelta:1,restSpeed:10},n),l);return this.startAxisValueAnimation(i,h)});return Promise.all(l).then(i)}startAxisValueAnimation(e,t){const s=this.getAxisMotionValue(e);return Xi(this.visualElement,e),s.start(zl(e,s,0,t,this.visualElement,!1))}stopAnimation(){fc(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){fc(e=>{var t;return null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.pause()})}getAnimationState(e){var t;return null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.state}getAxisMotionValue(e){const t="_drag".concat(e.toUpperCase()),s=this.visualElement.getProps(),r=s[t];return r||this.visualElement.getValue(e,(s.initial?s.initial[e]:void 0)||0)}snapToCursor(e){fc(t=>{const{drag:s}=this.getProps();if(!Ic(t,s,this.currentDirection))return;const{projection:r}=this.visualElement,n=this.getAxisMotionValue(t);if(r&&r.layout){const{min:s,max:a}=r.layout.layoutBox[t];n.set(e[t]-Pr(s,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:s}=this.visualElement;if(!zi(t)||!s||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};fc(e=>{const t=this.getAxisMotionValue(e);if(t&&!1!==this.constraints){const s=t.get();r[e]=function(e,t){let s=.5;const r=cc(e),n=cc(t);return n>r?s=Xo(t.min,t.max-r,e.min):r>n&&(s=Xo(e.min,e.max-n,t.min)),Kr(0,1,s)}({min:s,max:s},this.constraints[e])}});const{transformTemplate:n}=this.visualElement.getProps();this.visualElement.current.style.transform=n?n({},""):"none",s.root&&s.root.updateScroll(),s.updateLayout(),this.resolveConstraints(),fc(t=>{if(!Ic(t,e,null))return;const s=this.getAxisMotionValue(t),{min:n,max:a}=this.constraints[t];s.set(Pr(n,a,r[t]))})}addListeners(){if(!this.visualElement.current)return;Pc.set(this.visualElement,this);const e=lc(this.visualElement.current,"pointerdown",e=>{const{drag:t,dragListener:s=!0}=this.getProps();t&&s&&this.start(e)}),t=()=>{const{dragConstraints:e}=this.getProps();zi(e)&&e.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,r=s.addEventListener("measure",t);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),bn.read(t);const n=ac(window,"resize",()=>this.scalePositionWithinConstraints()),a=s.addEventListener("didUpdate",e=>{let{delta:t,hasLayoutChanged:s}=e;this.isDragging&&s&&(fc(e=>{const s=this.getAxisMotionValue(e);s&&(this.originPoint[e]+=t[e].translate,s.set(s.get()+t[e].translate))}),this.visualElement.render())});return()=>{n(),e(),r(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:s=!1,dragPropagation:r=!1,dragConstraints:n=!1,dragElastic:a=_c,dragMomentum:i=!0}=e;return(0,c.A)((0,c.A)({},e),{},{drag:t,dragDirectionLock:s,dragPropagation:r,dragConstraints:n,dragElastic:a,dragMomentum:i})}}function Ic(e,t,s){return(!0===t||t===e)&&(null===s||s===e)}const Rc=e=>(t,s)=>{e&&bn.postRender(()=>e(t,s))};function Oc(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=(0,r.useContext)(Ei);if(null===t)return[!0,null];const{isPresent:s,onExitComplete:n,register:a}=t,i=(0,r.useId)();(0,r.useEffect)(()=>{if(e)return a(i)},[e]);const o=(0,r.useCallback)(()=>e&&n&&n(i),[i,n,e]);return!s&&n?[!1,o]:[!0]}const Dc={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Lc(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const zc={correct:(e,t)=>{if(!t.target)return e;if("string"===typeof e){if(!en.test(e))return e;e=parseFloat(e)}const s=Lc(e,t.target.x),r=Lc(e,t.target.y);return"".concat(s,"% ").concat(r,"%")}},Mc={correct:(e,t)=>{let{treeScale:s,projectionDelta:r}=t;const n=e,a=Yn.parse(e);if(a.length>5)return n;const i=Yn.createTransformer(e),o="number"!==typeof a[0]?1:0,l=r.x.scale*s.x,c=r.y.scale*s.y;a[0+o]/=l,a[1+o]/=c;const d=Pr(l,c,.5);return"number"===typeof a[2+o]&&(a[2+o]/=d),"number"===typeof a[3+o]&&(a[3+o]/=d),i(a)}};let Fc=!1;class Uc extends r.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:s,layoutId:r}=this.props,{projection:n}=e;!function(e){for(const t in e)Qa[t]=e[t],kr(t)&&(Qa[t].isCSSVariable=!0)}(Vc),n&&(t.group&&t.group.add(n),s&&s.register&&r&&s.register(n),Fc&&n.root.didUpdate(),n.addEventListener("animationComplete",()=>{this.safeToRemove()}),n.setOptions((0,c.A)((0,c.A)({},n.options),{},{onExitComplete:()=>this.safeToRemove()}))),Dc.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:s,drag:r,isPresent:n}=this.props,{projection:a}=s;return a?(a.isPresent=n,Fc=!0,r||e.layoutDependency!==t||void 0===t||e.isPresent!==n?a.willUpdate():this.safeToRemove(),e.isPresent!==n&&(n?a.promote():a.relegate()||bn.postRender(()=>{const e=a.getStack();e&&e.members.length||this.safeToRemove()})),null):null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Na.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:s}=this.props,{projection:r}=e;Fc=!0,r&&(r.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(r),s&&s.deregister&&s.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function Bc(e){const[t,s]=Oc(),n=(0,r.useContext)(ui);return(0,i.jsx)(Uc,(0,c.A)((0,c.A)({},e),{},{layoutGroup:n,switchLayoutGroup:(0,r.useContext)(Ui),isPresent:t,safeToRemove:s}))}const Vc={borderRadius:(0,c.A)((0,c.A)({},zc),{},{applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]}),borderTopLeftRadius:zc,borderTopRightRadius:zc,borderBottomLeftRadius:zc,borderBottomRightRadius:zc,boxShadow:Mc};function qc(e){return"object"===typeof e&&null!==e}function Hc(e){return qc(e)&&"ownerSVGElement"in e}const Wc=(e,t)=>e.depth-t.depth;class Gc{constructor(){this.children=[],this.isDirty=!1}add(e){fa(this.children,e),this.isDirty=!0}remove(e){xa(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(Wc),this.isDirty=!1,this.children.forEach(e)}}function Kc(e,t){const s=pa.now(),r=n=>{let{timestamp:a}=n;const i=a-s;i>=t&&(jn(r),e(i-t))};return bn.setup(r,!0),()=>jn(r)}const Zc=["TopLeft","TopRight","BottomLeft","BottomRight"],Qc=Zc.length,Jc=e=>"string"===typeof e?parseFloat(e):e,Yc=e=>"number"===typeof e||en.test(e);function $c(e,t){return void 0!==e[t]?e[t]:e.borderRadius}const Xc=td(0,.5,Zo),ed=td(.5,.95,fn);function td(e,t,s){return r=>r<e?0:r>t?1:s(Xo(e,t,r))}function sd(e,t){e.min=t.min,e.max=t.max}function rd(e,t){sd(e.x,t.x),sd(e.y,t.y)}function nd(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function ad(e,t,s,r,n){return e=Lr(e-=t,1/s,r),void 0!==n&&(e=Lr(e,1/n,r)),e}function id(e,t,s,r,n){let[a,i,o]=s;!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,n=arguments.length>4?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:e,i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:e;Xr.test(t)&&(t=parseFloat(t),t=Pr(i.min,i.max,t/100)-i.min);if("number"!==typeof t)return;let o=Pr(a.min,a.max,r);e===a&&(o-=t),e.min=ad(e.min,t,s,o,n),e.max=ad(e.max,t,s,o,n)}(e,t[a],t[i],t[o],t.scale,r,n)}const od=["x","scaleX","originX"],ld=["y","scaleY","originY"];function cd(e,t,s,r){id(e.x,t,od,s?s.x:void 0,r?r.x:void 0),id(e.y,t,ld,s?s.y:void 0,r?r.y:void 0)}function dd(e){return 0===e.translate&&1===e.scale}function ud(e){return dd(e.x)&&dd(e.y)}function hd(e,t){return e.min===t.min&&e.max===t.max}function md(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function pd(e,t){return md(e.x,t.x)&&md(e.y,t.y)}function fd(e){return cc(e.x)/cc(e.y)}function xd(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class gd{constructor(){this.members=[]}add(e){fa(this.members,e),e.scheduleRender()}remove(e){if(xa(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(e){const t=this.members.findIndex(t=>e===t);if(0===t)return!1;let s;for(let r=t;r>=0;r--){const e=this.members[r];if(!1!==e.isPresent){s=e;break}}return!!s&&(this.promote(s),!0)}promote(e,t){const s=this.lead;if(e!==s&&(this.prevLead=s,this.lead=e,e.show(),s)){s.instance&&s.scheduleRender(),e.scheduleRender(),e.resumeFrom=s,t&&(e.resumeFrom.preserveOpacity=!0),s.snapshot&&(e.snapshot=s.snapshot,e.snapshot.latestValues=s.animationValues||s.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;!1===r&&s.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:s}=e;t.onExitComplete&&t.onExitComplete(),s&&s.options.onExitComplete&&s.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const vd={nodes:0,calculatedTargetDeltas:0,calculatedProjections:0},yd=["","X","Y","Z"];let bd=0;function jd(e,t,s,r){const{latestValues:n}=t;n[e]&&(s[e]=n[e],t.setStaticValue(e,0),r&&(r[e]=0))}function wd(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const s=eo(t);if(window.MotionHasOptimisedAnimation(s,"transform")){const{layout:t,layoutId:r}=e.options;window.MotionCancelOptimisedAnimation(s,"transform",bn,!(t||r))}const{parent:r}=e;r&&!r.hasCheckedOptimisedAppear&&wd(r)}function Nd(e){let{attachResizeListener:t,defaultParent:s,measureScroll:r,checkIsScrollRoot:n,resetTransform:a}=e;return class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null===s||void 0===s?void 0:s();this.id=bd++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,vn.value&&(vd.nodes=vd.calculatedTargetDeltas=vd.calculatedProjections=0),this.nodes.forEach(Ad),this.nodes.forEach(Rd),this.nodes.forEach(Od),this.nodes.forEach(_d),vn.addProjectionMetrics&&vn.addProjectionMetrics(vd)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=e,this.root=t?t.root||t:this,this.path=t?[...t.path,t]:[],this.parent=t,this.depth=t?t.depth+1:0;for(let s=0;s<this.path.length;s++)this.path[s].shouldResetTransform=!0;this.root===this&&(this.nodes=new Gc)}addEventListener(e,t){return this.eventHandlers.has(e)||this.eventHandlers.set(e,new ga),this.eventHandlers.get(e).add(t)}notifyListeners(e){const t=this.eventHandlers.get(e);for(var s=arguments.length,r=new Array(s>1?s-1:0),n=1;n<s;n++)r[n-1]=arguments[n];t&&t.notify(...r)}hasListeners(e){return this.eventHandlers.has(e)}mount(e){if(this.instance)return;var s;this.isSVG=Hc(e)&&!(Hc(s=e)&&"svg"===s.tagName),this.instance=e;const{layoutId:r,layout:n,visualElement:a}=this.options;if(a&&!a.current&&a.mount(e),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(n||r)&&(this.isLayoutDirty=!0),t){let s,r=0;const n=()=>this.root.updateBlockedByResize=!1;bn.read(()=>{r=window.innerWidth}),t(e,()=>{const e=window.innerWidth;e!==r&&(r=e,this.root.updateBlockedByResize=!0,s&&s(),s=Kc(n,250),Dc.hasAnimatedSinceResize&&(Dc.hasAnimatedSinceResize=!1,this.nodes.forEach(Id)))})}r&&this.root.registerSharedNode(r,this),!1!==this.options.animate&&a&&(r||n)&&this.addEventListener("didUpdate",e=>{let{delta:t,hasLayoutChanged:s,hasRelativeLayoutChanged:r,layout:n}=e;if(this.isTreeAnimationBlocked())return this.target=void 0,void(this.relativeTarget=void 0);const i=this.options.transition||a.getDefaultTransition()||Ud,{onLayoutAnimationStart:o,onLayoutAnimationComplete:l}=a.getProps(),d=!this.targetLayout||!pd(this.targetLayout,n),u=!s&&r;if(this.options.layoutRoot||this.resumeFrom||u||s&&(d||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const e=(0,c.A)((0,c.A)({},Zi(i,"layout")),{},{onPlay:o,onComplete:l});(a.shouldReduceMotion||this.options.layoutRoot)&&(e.delay=0,e.type=!1),this.startAnimation(e),this.setAnimationOrigin(t,u)}else s||Id(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=n})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const e=this.getStack();e&&e.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),jn(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Dd),this.animationId++)}getTransformTemplate(){const{visualElement:e}=this.options;return e&&e.getProps().transformTemplate}willUpdate(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked())return void(this.options.onExitComplete&&this.options.onExitComplete());if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&wd(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let n=0;n<this.path.length;n++){const e=this.path[n];e.shouldResetTransform=!0,e.updateScroll("snapshot"),e.options.layoutRoot&&e.willUpdate(!1)}const{layoutId:t,layout:s}=this.options;if(void 0===t&&!s)return;const r=this.getTransformTemplate();this.prevTransformTemplateValue=r?r(this.latestValues,""):void 0,this.updateSnapshot(),e&&this.notifyListeners("willUpdate")}update(){this.updateScheduled=!1;if(this.isUpdateBlocked())return this.unblockUpdate(),this.clearAllSnapshots(),void this.nodes.forEach(Cd);if(this.animationId<=this.animationCommitId)return void this.nodes.forEach(Pd);this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(Td),this.nodes.forEach(Sd),this.nodes.forEach(kd)):this.nodes.forEach(Pd),this.clearAllSnapshots();const e=pa.now();wn.delta=Kr(0,1e3/60,e-wn.timestamp),wn.timestamp=e,wn.isProcessing=!0,Nn.update.process(wn),Nn.preRender.process(wn),Nn.render.process(wn),wn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Na.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Ed),this.sharedNodes.forEach(Ld)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,bn.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){bn.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){!this.snapshot&&this.instance&&(this.snapshot=this.measure(),!this.snapshot||cc(this.snapshot.measuredBox.x)||cc(this.snapshot.measuredBox.y)||(this.snapshot=void 0))}updateLayout(){if(!this.instance)return;if(this.updateScroll(),(!this.options.alwaysMeasureLayout||!this.isLead())&&!this.isLayoutDirty)return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let s=0;s<this.path.length;s++){this.path[s].updateScroll()}const e=this.layout;this.layout=this.measure(!1),this.layoutCorrected={x:{min:0,max:0},y:{min:0,max:0}},this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:t}=this.options;t&&t.notify("LayoutMeasure",this.layout.layoutBox,e?e.layoutBox:void 0)}updateScroll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"measure",t=Boolean(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===e&&(t=!1),t&&this.instance){const t=n(this.instance);this.scroll={animationId:this.root.animationId,phase:e,isRoot:t,offset:r(this.instance),wasRoot:this.scroll?this.scroll.isRoot:t}}}resetTransform(){if(!a)return;const e=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,t=this.projectionDelta&&!ud(this.projectionDelta),s=this.getTransformTemplate(),r=s?s(this.latestValues,""):void 0,n=r!==this.prevTransformTemplateValue;e&&this.instance&&(t||Rr(this.latestValues)||n)&&(a(this.instance,r),this.shouldResetTransform=!1,this.scheduleRender())}measure(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=this.measurePageBox();let s=this.removeElementScroll(t);var r;return e&&(s=this.removeTransform(s)),qd((r=s).x),qd(r.y),{animationId:this.root.animationId,measuredBox:t,layoutBox:s,latestValues:{},source:this.id}}measurePageBox(){var e;const{visualElement:t}=this.options;if(!t)return{x:{min:0,max:0},y:{min:0,max:0}};const s=t.measureViewportBox();if(!((null===(e=this.scroll)||void 0===e?void 0:e.wasRoot)||this.path.some(Wd))){const{scroll:e}=this.root;e&&(Vr(s.x,e.offset.x),Vr(s.y,e.offset.y))}return s}removeElementScroll(e){var t;const s={x:{min:0,max:0},y:{min:0,max:0}};if(rd(s,e),null!==(t=this.scroll)&&void 0!==t&&t.wasRoot)return s;for(let r=0;r<this.path.length;r++){const t=this.path[r],{scroll:n,options:a}=t;t!==this.root&&n&&a.layoutScroll&&(n.wasRoot&&rd(s,e),Vr(s.x,n.offset.x),Vr(s.y,n.offset.y))}return s}applyTransform(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const s={x:{min:0,max:0},y:{min:0,max:0}};rd(s,e);for(let r=0;r<this.path.length;r++){const e=this.path[r];!t&&e.options.layoutScroll&&e.scroll&&e!==e.root&&Hr(s,{x:-e.scroll.offset.x,y:-e.scroll.offset.y}),Rr(e.latestValues)&&Hr(s,e.latestValues)}return Rr(this.latestValues)&&Hr(s,this.latestValues),s}removeTransform(e){const t={x:{min:0,max:0},y:{min:0,max:0}};rd(t,e);for(let s=0;s<this.path.length;s++){const e=this.path[s];if(!e.instance)continue;if(!Rr(e.latestValues))continue;Ir(e.latestValues)&&e.updateSnapshot();const r=_a();rd(r,e.measurePageBox()),cd(t,e.latestValues,e.snapshot?e.snapshot.layoutBox:void 0,r)}return Rr(this.latestValues)&&cd(t,this.latestValues),t}setTargetDelta(e){this.targetDelta=e,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(e){this.options=(0,c.A)((0,c.A)((0,c.A)({},this.options),e),{},{crossfade:void 0===e.crossfade||e.crossfade})}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==wn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(){var e;let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const s=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=s.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=s.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=s.isSharedProjectionDirty);const r=Boolean(this.resumingFrom)||this!==s;if(!(t||r&&this.isSharedProjectionDirty||this.isProjectionDirty||null!==(e=this.parent)&&void 0!==e&&e.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:n,layoutId:a}=this.options;if(this.layout&&(n||a)){if(this.resolvedRelativeTargetAt=wn.timestamp,!this.targetDelta&&!this.relativeTarget){const e=this.getClosestProjectingParent();e&&e.layout&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},pc(this.relativeTargetOrigin,this.layout.layoutBox,e.layout.layoutBox),rd(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(this.relativeTarget||this.targetDelta){if(this.target||(this.target={x:{min:0,max:0},y:{min:0,max:0}},this.targetWithTransforms={x:{min:0,max:0},y:{min:0,max:0}}),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),function(e,t,s){hc(e.x,t.x,s.x),hc(e.y,t.y,s.y)}(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(Boolean(this.resumingFrom)?this.target=this.applyTransform(this.layout.layoutBox):rd(this.target,this.layout.layoutBox),Fr(this.target,this.targetDelta)):rd(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const e=this.getClosestProjectingParent();e&&Boolean(e.resumingFrom)===Boolean(this.resumingFrom)&&!e.options.layoutScroll&&e.target&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},pc(this.relativeTargetOrigin,this.target,e.target),rd(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}vn.value&&vd.calculatedTargetDeltas++}}}getClosestProjectingParent(){if(this.parent&&!Ir(this.parent.latestValues)&&!Or(this.parent.latestValues))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return Boolean((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var e;const t=this.getLead(),s=Boolean(this.resumingFrom)||this!==t;let r=!0;if((this.isProjectionDirty||null!==(e=this.parent)&&void 0!==e&&e.isProjectionDirty)&&(r=!1),s&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(r=!1),this.resolvedRelativeTargetAt===wn.timestamp&&(r=!1),r)return;const{layout:n,layoutId:a}=this.options;if(this.isTreeAnimating=Boolean(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!n&&!a)return;rd(this.layoutCorrected,this.layout.layoutBox);const i=this.treeScale.x,o=this.treeScale.y;!function(e,t,s){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const n=s.length;if(!n)return;let a,i;t.x=t.y=1;for(let o=0;o<n;o++){a=s[o],i=a.projectionDelta;const{visualElement:n}=a.options;n&&n.props.style&&"contents"===n.props.style.display||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&Hr(e,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),i&&(t.x*=i.x.scale,t.y*=i.y.scale,Fr(e,i)),r&&Rr(a.latestValues)&&Hr(e,a.latestValues))}t.x<Br&&t.x>Ur&&(t.x=1),t.y<Br&&t.y>Ur&&(t.y=1)}(this.layoutCorrected,this.treeScale,this.path,s),!t.layout||t.target||1===this.treeScale.x&&1===this.treeScale.y||(t.target=t.layout.layoutBox,t.targetWithTransforms={x:{min:0,max:0},y:{min:0,max:0}});const{target:l}=t;l?(this.projectionDelta&&this.prevProjectionDelta?(nd(this.prevProjectionDelta.x,this.projectionDelta.x),nd(this.prevProjectionDelta.y,this.projectionDelta.y)):this.createProjectionDeltas(),uc(this.projectionDelta,this.layoutCorrected,l,this.latestValues),this.treeScale.x===i&&this.treeScale.y===o&&xd(this.projectionDelta.x,this.prevProjectionDelta.x)&&xd(this.projectionDelta.y,this.prevProjectionDelta.y)||(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",l)),vn.value&&vd.calculatedProjections++):this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender())}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(){var e;let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(null===(e=this.options.visualElement)||void 0===e||e.scheduleRender(),t){const e=this.getStack();e&&e.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionDeltaWithTransform={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}}}setAnimationOrigin(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const s=this.snapshot,r=s?s.latestValues:{},n=(0,c.A)({},this.latestValues),a={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};this.relativeParent&&this.relativeParent.options.layoutRoot||(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!t;const i={x:{min:0,max:0},y:{min:0,max:0}},o=(s?s.source:void 0)!==(this.layout?this.layout.source:void 0),l=this.getStack(),d=!l||l.members.length<=1,u=Boolean(o&&!d&&!0===this.options.crossfade&&!this.path.some(Fd));let h;this.animationProgress=0,this.mixTargetDelta=t=>{const s=t/1e3;zd(a.x,e.x,s),zd(a.y,e.y,s),this.setTargetDelta(a),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(pc(i,this.layout.layoutBox,this.relativeParent.layout.layoutBox),function(e,t,s,r){Md(e.x,t.x,s.x,r),Md(e.y,t.y,s.y,r)}(this.relativeTarget,this.relativeTargetOrigin,i,s),h&&function(e,t){return hd(e.x,t.x)&&hd(e.y,t.y)}(this.relativeTarget,h)&&(this.isProjectionDirty=!1),h||(h={x:{min:0,max:0},y:{min:0,max:0}}),rd(h,this.relativeTarget)),o&&(this.animationValues=n,function(e,t,s,r,n,a){var i,o;if(n)e.opacity=Pr(0,null!==(i=s.opacity)&&void 0!==i?i:1,Xc(r)),e.opacityExit=Pr(null!==(o=t.opacity)&&void 0!==o?o:1,0,ed(r));else if(a){var l,c;e.opacity=Pr(null!==(l=t.opacity)&&void 0!==l?l:1,null!==(c=s.opacity)&&void 0!==c?c:1,r)}for(let d=0;d<Qc;d++){const n="border".concat(Zc[d],"Radius");let a=$c(t,n),i=$c(s,n);void 0===a&&void 0===i||(a||(a=0),i||(i=0),0===a||0===i||Yc(a)===Yc(i)?(e[n]=Math.max(Pr(Jc(a),Jc(i),r),0),(Xr.test(i)||Xr.test(a))&&(e[n]+="%")):e[n]=i)}(t.rotate||s.rotate)&&(e.rotate=Pr(t.rotate||0,s.rotate||0,r))}(n,r,this.latestValues,s,u,d)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=s},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(e){var t,s;this.notifyListeners("animationStart"),null===(t=this.currentAnimation)||void 0===t||t.stop(),null===(s=this.resumingFrom)||void 0===s||null===(s=s.currentAnimation)||void 0===s||s.stop(),this.pendingAnimation&&(jn(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=bn.update(()=>{Dc.hasAnimatedSinceResize=!0,io.layout++,this.motionValue||(this.motionValue=ja(0)),this.currentAnimation=function(e,t,s){const r=da(e)?e:ja(e);return r.start(zl("",r,t,s)),r.animation}(this.motionValue,[0,1e3],(0,c.A)((0,c.A)({},e),{},{velocity:0,isSync:!0,onUpdate:t=>{this.mixTargetDelta(t),e.onUpdate&&e.onUpdate(t)},onStop:()=>{io.layout--},onComplete:()=>{io.layout--,e.onComplete&&e.onComplete(),this.completeAnimation()}})),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const e=this.getStack();e&&e.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(1e3),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const e=this.getLead();let{targetWithTransforms:t,target:s,layout:r,latestValues:n}=e;if(t&&s&&r){if(this!==e&&this.layout&&r&&Hd(this.options.animationType,this.layout.layoutBox,r.layoutBox)){s=this.target||{x:{min:0,max:0},y:{min:0,max:0}};const t=cc(this.layout.layoutBox.x);s.x.min=e.target.x.min,s.x.max=s.x.min+t;const r=cc(this.layout.layoutBox.y);s.y.min=e.target.y.min,s.y.max=s.y.min+r}rd(t,s),Hr(t,n),uc(this.projectionDeltaWithTransform,this.layoutCorrected,t,n)}}registerSharedNode(e,t){this.sharedNodes.has(e)||this.sharedNodes.set(e,new gd);this.sharedNodes.get(e).add(t);const s=t.options.initialPromotionConfig;t.promote({transition:s?s.transition:void 0,preserveFollowOpacity:s&&s.shouldPreserveFollowOpacity?s.shouldPreserveFollowOpacity(t):void 0})}isLead(){const e=this.getStack();return!e||e.lead===this}getLead(){var e;const{layoutId:t}=this.options;return t&&(null===(e=this.getStack())||void 0===e?void 0:e.lead)||this}getPrevLead(){var e;const{layoutId:t}=this.options;return t?null===(e=this.getStack())||void 0===e?void 0:e.prevLead:void 0}getStack(){const{layoutId:e}=this.options;if(e)return this.root.sharedNodes.get(e)}promote(){let{needsReset:e,transition:t,preserveFollowOpacity:s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const r=this.getStack();r&&r.promote(this,s),e&&(this.projectionDelta=void 0,this.needsReset=!0),t&&this.setOptions({transition:t})}relegate(){const e=this.getStack();return!!e&&e.relegate(this)}resetSkewAndRotation(){const{visualElement:e}=this.options;if(!e)return;let t=!1;const{latestValues:s}=e;if((s.z||s.rotate||s.rotateX||s.rotateY||s.rotateZ||s.skewX||s.skewY)&&(t=!0),!t)return;const r={};s.z&&jd("z",e,r,this.animationValues);for(let n=0;n<yd.length;n++)jd("rotate".concat(yd[n]),e,r,this.animationValues),jd("skew".concat(yd[n]),e,r,this.animationValues);e.render();for(const n in r)e.setStaticValue(n,r[n]),this.animationValues&&(this.animationValues[n]=r[n]);e.scheduleRender()}applyProjectionStyles(e,t){if(!this.instance||this.isSVG)return;if(!this.isVisible)return void(e.visibility="hidden");const s=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,e.visibility="",e.opacity="",e.pointerEvents=Pi(null===t||void 0===t?void 0:t.pointerEvents)||"",void(e.transform=s?s(this.latestValues,""):"none");const r=this.getLead();if(!this.projectionDelta||!this.layout||!r.target)return this.options.layoutId&&(e.opacity=void 0!==this.latestValues.opacity?this.latestValues.opacity:1,e.pointerEvents=Pi(null===t||void 0===t?void 0:t.pointerEvents)||""),void(this.hasProjected&&!Rr(this.latestValues)&&(e.transform=s?s({},""):"none",this.hasProjected=!1));e.visibility="";const n=r.animationValues||r.latestValues;this.applyTransformsToTarget();let a=function(e,t,s){let r="";const n=e.x.translate/t.x,a=e.y.translate/t.y,i=(null===s||void 0===s?void 0:s.z)||0;if((n||a||i)&&(r="translate3d(".concat(n,"px, ").concat(a,"px, ").concat(i,"px) ")),1===t.x&&1===t.y||(r+="scale(".concat(1/t.x,", ").concat(1/t.y,") ")),s){const{transformPerspective:e,rotate:t,rotateX:n,rotateY:a,skewX:i,skewY:o}=s;e&&(r="perspective(".concat(e,"px) ").concat(r)),t&&(r+="rotate(".concat(t,"deg) ")),n&&(r+="rotateX(".concat(n,"deg) ")),a&&(r+="rotateY(".concat(a,"deg) ")),i&&(r+="skewX(".concat(i,"deg) ")),o&&(r+="skewY(".concat(o,"deg) "))}const o=e.x.scale*t.x,l=e.y.scale*t.y;return 1===o&&1===l||(r+="scale(".concat(o,", ").concat(l,")")),r||"none"}(this.projectionDeltaWithTransform,this.treeScale,n);s&&(a=s(n,a)),e.transform=a;const{x:i,y:o}=this.projectionDelta;var l,c;(e.transformOrigin="".concat(100*i.origin,"% ").concat(100*o.origin,"% 0"),r.animationValues)?e.opacity=r===this?null!==(l=null!==(c=n.opacity)&&void 0!==c?c:this.latestValues.opacity)&&void 0!==l?l:1:this.preserveOpacity?this.latestValues.opacity:n.opacityExit:e.opacity=r===this?void 0!==n.opacity?n.opacity:"":void 0!==n.opacityExit?n.opacityExit:0;for(const d in Qa){if(void 0===n[d])continue;const{correct:t,applyTo:s,isCSSVariable:i}=Qa[d],o="none"===a?n[d]:t(n[d],r);if(s){const t=s.length;for(let r=0;r<t;r++)e[s[r]]=o}else i?this.options.visualElement.renderState.vars[d]=o:e[d]=o}this.options.layoutId&&(e.pointerEvents=r===this?Pi(null===t||void 0===t?void 0:t.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(e=>{var t;return null===(t=e.currentAnimation)||void 0===t?void 0:t.stop()}),this.root.nodes.forEach(Cd),this.root.sharedNodes.clear()}}}function Sd(e){e.updateLayout()}function kd(e){var t;const s=(null===(t=e.resumeFrom)||void 0===t?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&s&&e.hasListeners("didUpdate")){const{layoutBox:t,measuredBox:r}=e.layout,{animationType:n}=e.options,a=s.source!==e.layout.source;"size"===n?fc(e=>{const r=a?s.measuredBox[e]:s.layoutBox[e],n=cc(r);r.min=t[e].min,r.max=r.min+n}):Hd(n,s.layoutBox,t)&&fc(r=>{const n=a?s.measuredBox[r]:s.layoutBox[r],i=cc(t[r]);n.max=n.min+i,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[r].max=e.relativeTarget[r].min+i)});const i={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};uc(i,t,s.layoutBox);const o={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};a?uc(o,e.applyTransform(r,!0),s.measuredBox):uc(o,t,s.layoutBox);const l=!ud(i);let c=!1;if(!e.resumeFrom){const r=e.getClosestProjectingParent();if(r&&!r.resumeFrom){const{snapshot:n,layout:a}=r;if(n&&a){const i={x:{min:0,max:0},y:{min:0,max:0}};pc(i,s.layoutBox,n.layoutBox);const o={x:{min:0,max:0},y:{min:0,max:0}};pc(o,t,a.layoutBox),pd(i,o)||(c=!0),r.options.layoutRoot&&(e.relativeTarget=o,e.relativeTargetOrigin=i,e.relativeParent=r)}}}e.notifyListeners("didUpdate",{layout:t,snapshot:s,delta:o,layoutDelta:i,hasLayoutChanged:l,hasRelativeLayoutChanged:c})}else if(e.isLead()){const{onExitComplete:t}=e.options;t&&t()}e.options.transition=void 0}function Ad(e){vn.value&&vd.nodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=Boolean(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function _d(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function Ed(e){e.clearSnapshot()}function Cd(e){e.clearMeasurements()}function Pd(e){e.isLayoutDirty=!1}function Td(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function Id(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function Rd(e){e.resolveTargetDelta()}function Od(e){e.calcProjection()}function Dd(e){e.resetSkewAndRotation()}function Ld(e){e.removeLeadSnapshot()}function zd(e,t,s){e.translate=Pr(t.translate,0,s),e.scale=Pr(t.scale,1,s),e.origin=t.origin,e.originPoint=t.originPoint}function Md(e,t,s,r){e.min=Pr(t.min,s.min,r),e.max=Pr(t.max,s.max,r)}function Fd(e){return e.animationValues&&void 0!==e.animationValues.opacityExit}const Ud={duration:.45,ease:[.4,0,.1,1]},Bd=e=>"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),Vd=Bd("applewebkit/")&&!Bd("chrome/")?Math.round:fn;function qd(e){e.min=Vd(e.min),e.max=Vd(e.max)}function Hd(e,t,s){return"position"===e||"preserve-aspect"===e&&!function(e,t,s){return Math.abs(e-t)<=s}(fd(t),fd(s),.2)}function Wd(e){var t;return e!==e.root&&(null===(t=e.scroll)||void 0===t?void 0:t.wasRoot)}const Gd=Nd({attachResizeListener:(e,t)=>ac(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Kd={current:void 0},Zd=Nd({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!Kd.current){const e=new Gd({});e.mount(window),e.setOptions({layoutScroll:!0}),Kd.current=e}return Kd.current},resetTransform:(e,t)=>{e.style.transform=void 0!==t?t:"none"},checkIsScrollRoot:e=>Boolean("fixed"===window.getComputedStyle(e).position)}),Qd={pan:{Feature:class extends ec{constructor(){super(...arguments),this.removePointerDownListener=fn}onPointerDown(e){this.session=new vc(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:xc(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:s,onPanEnd:r}=this.node.getProps();return{onSessionStart:Rc(e),onStart:Rc(t),onMove:s,onEnd:(e,t)=>{delete this.session,r&&bn.postRender(()=>r(e,t))}}}mount(){this.removePointerDownListener=lc(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}},drag:{Feature:class extends ec{constructor(e){super(e),this.removeGroupControls=fn,this.removeListeners=fn,this.controls=new Tc(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||fn}unmount(){this.removeGroupControls(),this.removeListeners()}},ProjectionNode:Zd,MeasureLayout:Bc}};function Jd(e,t){const s=function(e,t,s){if(e instanceof EventTarget)return[e];if("string"===typeof e){var r;let n=document;t&&(n=t.current);const a=null!==(r=null===s||void 0===s?void 0:s[e])&&void 0!==r?r:n.querySelectorAll(e);return a?Array.from(a):[]}return Array.from(e)}(e),r=new AbortController;return[s,(0,c.A)((0,c.A)({passive:!0},t),{},{signal:r.signal}),()=>r.abort()]}function Yd(e){return!("touch"===e.pointerType||nc())}function $d(e,t,s){const{props:r}=e;e.animationState&&r.whileHover&&e.animationState.setActive("whileHover","Start"===s);const n=r["onHover"+s];n&&bn.postRender(()=>n(t,oc(t)))}function Xd(e){return qc(e)&&"offsetHeight"in e}const eu=(e,t)=>!!t&&(e===t||eu(e,t.parentElement)),tu=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);const su=new WeakSet;function ru(e){return t=>{"Enter"===t.key&&e(t)}}function nu(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}function au(e){return ic(e)&&!nc()}function iu(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const[r,n,a]=Jd(e,s),i=e=>{const r=e.currentTarget;if(!au(e))return;su.add(r);const a=t(r,e),i=(e,t)=>{window.removeEventListener("pointerup",o),window.removeEventListener("pointercancel",l),su.has(r)&&su.delete(r),au(e)&&"function"===typeof a&&a(e,{success:t})},o=e=>{i(e,r===window||r===document||s.useGlobalTarget||eu(r,e.target))},l=e=>{i(e,!1)};window.addEventListener("pointerup",o,n),window.addEventListener("pointercancel",l,n)};return r.forEach(e=>{var t;(s.useGlobalTarget?window:e).addEventListener("pointerdown",i,n),Xd(e)&&(e.addEventListener("focus",e=>((e,t)=>{const s=e.currentTarget;if(!s)return;const r=ru(()=>{if(su.has(s))return;nu(s,"down");const e=ru(()=>{nu(s,"up")});s.addEventListener("keyup",e,t),s.addEventListener("blur",()=>nu(s,"cancel"),t)});s.addEventListener("keydown",r,t),s.addEventListener("blur",()=>s.removeEventListener("keydown",r),t)})(e,n)),t=e,tu.has(t.tagName)||-1!==t.tabIndex||e.hasAttribute("tabindex")||(e.tabIndex=0))}),a}function ou(e,t,s){const{props:r}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&r.whileTap&&e.animationState.setActive("whileTap","Start"===s);const n=r["onTap"+("End"===s?"":s)];n&&bn.postRender(()=>n(t,oc(t)))}const lu=["root"],cu=new WeakMap,du=new WeakMap,uu=e=>{const t=cu.get(e.target);t&&t(e)},hu=e=>{e.forEach(uu)};function mu(e,t,s){const r=function(e){let{root:t}=e,s=(0,ua.A)(e,lu);const r=t||document;du.has(r)||du.set(r,{});const n=du.get(r),a=JSON.stringify(s);return n[a]||(n[a]=new IntersectionObserver(hu,(0,c.A)({root:t},s))),n[a]}(t);return cu.set(e,s),r.observe(e),()=>{cu.delete(e),r.unobserve(e)}}const pu={some:0,all:1};const fu={inView:{Feature:class extends ec{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:s,amount:r="some",once:n}=e,a={root:t?t.current:void 0,rootMargin:s,threshold:"number"===typeof r?r:pu[r]};return mu(this.node.current,a,e=>{const{isIntersecting:t}=e;if(this.isInView===t)return;if(this.isInView=t,n&&!t&&this.hasEnteredView)return;t&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",t);const{onViewportEnter:s,onViewportLeave:r}=this.node.getProps(),a=t?s:r;a&&a(e)})}mount(){this.startObserver()}update(){if("undefined"===typeof IntersectionObserver)return;const{props:e,prevProps:t}=this.node,s=["amount","margin","root"].some(function(e){let{viewport:t={}}=e,{viewport:s={}}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e=>t[e]!==s[e]}(e,t));s&&this.startObserver()}unmount(){}}},tap:{Feature:class extends ec{mount(){const{current:e}=this.node;e&&(this.unmount=iu(e,(e,t)=>(ou(this.node,t,"Start"),(e,t)=>{let{success:s}=t;return ou(this.node,e,s?"End":"Cancel")}),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}},focus:{Feature:class extends ec{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch(Rt){e=!0}e&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){this.isActive&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=ro(ac(this.node.current,"focus",()=>this.onFocus()),ac(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}},hover:{Feature:class extends ec{mount(){const{current:e}=this.node;e&&(this.unmount=function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const[r,n,a]=Jd(e,s),i=e=>{if(!Yd(e))return;const{target:s}=e,r=t(s,e);if("function"!==typeof r||!s)return;const a=e=>{Yd(e)&&(r(e),s.removeEventListener("pointerleave",a))};s.addEventListener("pointerleave",a,n)};return r.forEach(e=>{e.addEventListener("pointerenter",i,n)}),a}(e,(e,t)=>($d(this.node,t,"Start"),e=>$d(this.node,e,"End"))))}unmount(){}}}},xu={layout:{ProjectionNode:Zd,MeasureLayout:Bc}},gu=Gi((0,c.A)((0,c.A)((0,c.A)((0,c.A)({},sc),fu),Qd),xu),di),vu=e=>{let{text:t="",delay:s=200,className:n="",animateBy:a="words",direction:o="top",threshold:l=.1,rootMargin:c="0px",animationFrom:d,animationTo:u,easing:h=e=>e,onAnimationComplete:m,stepDuration:p=.35}=e;const f="words"===a?t.split(" "):t.split(""),[x,g]=(0,r.useState)(!1),v=(0,r.useRef)(null);(0,r.useEffect)(()=>{if(!v.current)return;const e=new IntersectionObserver(t=>{let[s]=t;s.isIntersecting&&(g(!0),v.current&&e.unobserve(v.current))},{threshold:l,rootMargin:c});return e.observe(v.current),()=>e.disconnect()},[l,c]);const y=(0,r.useMemo)(()=>"top"===o?{filter:"blur(10px)",opacity:0,y:-50}:{filter:"blur(10px)",opacity:0,y:50},[o]),b=(0,r.useMemo)(()=>[{filter:"blur(5px)",opacity:.5,y:"top"===o?5:-5},{filter:"blur(0px)",opacity:1,y:0}],[o]),j=null!==d&&void 0!==d?d:y,w=null!==u&&void 0!==u?u:b,N=w.length+1,S=p*(N-1),k=Array.from({length:N},(e,t)=>1===N?0:t/(N-1));return(0,i.jsx)("p",{ref:v,className:"blur-text ".concat(n," flex flex-wrap"),children:f.map((e,t)=>{const r=((e,t)=>{const s=new Set([...Object.keys(e),...t.flatMap(e=>Object.keys(e))]),r={};return s.forEach(s=>{r[s]=[e[s],...t.map(e=>e[s])]}),r})(j,w),n={duration:S,times:k,delay:t*s/1e3};return n.ease=h,(0,i.jsxs)(gu.span,{className:"inline-block will-change-[transform,filter,opacity]",initial:j,animate:x?r:j,transition:n,onAnimationComplete:t===f.length-1?m:void 0,children:[" "===e?"\xa0":e,"words"===a&&t<f.length-1&&"\xa0"]},t)})})},yu=e=>{let{className:t="",size:s="md",showText:r=!0}=e;return(0,i.jsxs)("div",{className:"flex items-center space-x-3 ".concat(t),children:[(0,i.jsx)("div",{className:"".concat({sm:"w-8 h-8",md:"w-12 h-12",lg:"w-16 h-16",xl:"w-20 h-20"}[s]," flex-shrink-0"),children:(0,i.jsx)("img",{src:"/logo-campus-finance.png",alt:"AB CAMPUS FINANCE Logo",className:"w-full h-full object-contain"})}),r&&(0,i.jsxs)("div",{className:"flex flex-col",children:[(0,i.jsx)(vu,{text:"AB CAMPUS FINANCE",delay:150,className:"font-semibold text-secondary-900 font-montserrat ".concat({sm:"text-xs",md:"text-sm",lg:"text-base",xl:"text-lg"}[s]),animateBy:"letters",direction:"top",onAnimationComplete:()=>{console.log("[UI] Animation logo termin\xe9e")}}),(0,i.jsx)("p",{className:"text-xs text-neutral-600 font-montserrat",children:"Votre succ\xe8s, notre mission"})]})]})},bu=(0,mt.A)("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]),ju=(0,mt.A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),wu=(0,mt.A)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),Nu=(0,mt.A)("Wifi",[["path",{d:"M5 13a10 10 0 0 1 14 0",key:"6v8j51"}],["path",{d:"M8.5 16.5a5 5 0 0 1 7 0",key:"sej527"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["line",{x1:"12",x2:"12.01",y1:"20",y2:"20",key:"of4bc4"}]]),Su=(0,mt.A)("WifiOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M8.5 16.5a5 5 0 0 1 7 0",key:"sej527"}],["path",{d:"M2 8.82a15 15 0 0 1 4.17-2.65",key:"11utq1"}],["path",{d:"M10.66 5c4.01-.36 8.14.9 11.34 3.76",key:"hxefdu"}],["path",{d:"M16.85 11.25a10 10 0 0 1 2.22 1.68",key:"q734kn"}],["path",{d:"M5 13a10 10 0 0 1 5.24-2.76",key:"piq4yl"}],["line",{x1:"12",x2:"12.01",y1:"20",y2:"20",key:"of4bc4"}]]);var ku=s(4139);const Au=!0,_u="/serviceWorker.js",Eu={scope:"/",updateViaCache:"none"};function Cu(e){const t=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),s=window.atob(t);return Uint8Array.from([...s].map(e=>e.charCodeAt(0)))}const Pu=()=>{const{user:e}=dt(),[t,s]=(0,r.useState)(!1),[n,a]=(0,r.useState)(!1),[i,o]=(0,r.useState)(null),[l,c]=(0,r.useState)(null),[d,u]=(0,r.useState)(!1);(0,r.useEffect)(()=>{const e=setTimeout(()=>{(async()=>{try{const e=await fetch("".concat(ku.f,"/api/push/vapid-public-key")),t=await e.json();c(t.publicKey)}catch(e){0}})()},800);return()=>clearTimeout(e)},[]),(0,r.useEffect)(()=>{(()=>{const e="serviceWorker"in navigator&&"PushManager"in window;s(e)})()},[]),(0,r.useEffect)(()=>{(async()=>{if(!t||!l)return void u(!0);if("true"!==localStorage.getItem("notification-prompt-declined"))try{const e=await navigator.serviceWorker.ready;let t=await e.pushManager.getSubscription();t?(o(t),a(!0),u(!0)):u(!0)}catch(e){u(!0)}else u(!0)})()},[t,l,e]),(0,r.useEffect)(()=>{if(null===e||void 0===e||!e.id||!l)return;let t;const s=setTimeout(()=>{const e=async()=>{try{const e=await navigator.serviceWorker.ready,t=await e.pushManager.getSubscription();if(!t)return a(!1),o(null),localStorage.setItem("subscription-inactive","true"),void localStorage.removeItem("notification-prompt-seen");if(await h(t))a(!0),o(t),localStorage.setItem("subscription-active","true"),localStorage.removeItem("subscription-inactive");else{const t=await m(e);t?(a(!0),o(t),localStorage.setItem("subscription-active","true"),localStorage.removeItem("subscription-inactive")):(a(!1),o(null),localStorage.setItem("subscription-inactive","true"),localStorage.removeItem("notification-prompt-seen"))}}catch(e){a(!1),o(null),localStorage.setItem("subscription-inactive","true")}};e(),t=setInterval(e,216e5)},1500);return()=>{clearTimeout(s),t&&clearInterval(t)}},[null===e||void 0===e?void 0:e.id,l]);const h=async e=>{try{return console.log("[PUSH HOOK] Validation du token d'abonnement..."),e&&e.endpoint&&e.keys?e.endpoint.startsWith("https://")?e.keys.p256dh&&e.keys.auth?(console.log("[PUSH HOOK] \u2705 Token valide (mode production)"),!0):(console.log("[PUSH HOOK] \u274c Cl\xe9s d'abonnement manquantes"),!1):(console.log("[PUSH HOOK] \u274c Endpoint invalide"),!1):(console.log("[PUSH HOOK] \u274c Abonnement invalide - propri\xe9t\xe9s manquantes"),!1)}catch(t){return console.error("[PUSH HOOK] Erreur validation token:",t),!1}},m=async t=>{try{console.log("[PUSH HOOK] Renouvellement silencieux de l'abonnement...");const s=await t.pushManager.getSubscription();s&&(await s.unsubscribe(),console.log("[PUSH HOOK] Ancien abonnement d\xe9sabonn\xe9"));const r=await t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Cu(l)});console.log("[PUSH HOOK] Nouvel abonnement cr\xe9\xe9");return(await fetch("".concat(ku.f,"/api/save-subscription"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({subscription:r,userId:null===e||void 0===e?void 0:e.id})})).ok?(console.log("[PUSH HOOK] \u2705 Nouvel abonnement sauvegard\xe9"),r):(console.error("[PUSH HOOK] \u274c Erreur sauvegarde nouvel abonnement"),null)}catch(s){return console.error("[PUSH HOOK] Erreur renouvellement silencieux:",s),null}};return{isSupported:t,isSubscribed:n,subscription:i,vapidPublicKey:l,hasAskedPermission:d,subscribeUser:async()=>{if(console.log("[PUSH HOOK] D\xe9but de subscribeUser...",{isSupported:t,vapidPublicKey:!!l,user:!!e,userId:null===e||void 0===e?void 0:e.id}),!t||!l)return console.log("[PUSH HOOK] Notifications push non support\xe9es ou cl\xe9 VAPID manquante"),!1;try{console.log("[PUSH HOOK] Enregistrement du service worker...");const t=await(async()=>{if(!Au)return console.log("[SW_CONFIG] Service Worker d\xe9sactiv\xe9 en d\xe9veloppement"),null;if(!("serviceWorker"in navigator))return console.log("[SW_CONFIG] Service Worker non support\xe9 par ce navigateur"),null;try{console.log("[SW_CONFIG] Enregistrement du Service Worker...");const e=await navigator.serviceWorker.register(_u,Eu);return console.log("[SW_CONFIG] Service Worker enregistr\xe9 avec succ\xe8s:",e.scope),e.addEventListener("updatefound",()=>{const t=e.installing;t&&t.addEventListener("statechange",()=>{"installed"===t.state&&navigator.serviceWorker.controller&&console.log("[SW_CONFIG] Nouvelle version du Service Worker disponible")})}),e}catch(e){return console.warn("[SW_CONFIG] \xc9chec de l'enregistrement du Service Worker:",e),null}})();t||console.log("[PUSH HOOK] Service worker non disponible, continuation sans..."),console.log("[PUSH HOOK] Demande de permission...");const s=await Notification.requestPermission();if(console.log("[PUSH HOOK] Permission:",s),"granted"!==s)return console.log("[PUSH HOOK] Permission refus\xe9e"),!1;console.log("[PUSH HOOK] V\xe9rification de l'abonnement existant...");const r=await t.pushManager.getSubscription();if(r)return o(r),a(!0),console.log("[PUSH HOOK] \u2705 D\xe9j\xe0 abonn\xe9 aux notifications"),!0;console.log("[PUSH HOOK] Cr\xe9ation d'un nouvel abonnement...");const n=await t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Cu(l)});console.log("[PUSH HOOK] \u2705 Nouvelle subscription cr\xe9\xe9e:",n),console.log("[PUSH HOOK] Envoi au backend...",{url:"".concat(ku.f,"/api/save-subscription"),userId:null===e||void 0===e?void 0:e.id});const i=await fetch("".concat(ku.f,"/api/save-subscription"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({subscription:n,userId:null===e||void 0===e?void 0:e.id})});if(console.log("[PUSH HOOK] R\xe9ponse du backend:",i.status,i.ok),i.ok)return o(n),a(!0),console.log("[PUSH HOOK] \u2705 Abonnement enregistr\xe9 avec succ\xe8s !"),!0;{const e=await i.text();return console.error("[PUSH HOOK] Erreur lors de l'enregistrement de l'abonnement:",e),!1}}catch(s){return console.error("[PUSH HOOK] Erreur abonnement:",s),!1}},unsubscribeUser:async()=>{if(!i)return!1;try{await navigator.serviceWorker.ready;if(await i.unsubscribe())return o(null),a(!1),console.log("D\xe9sabonnement r\xe9ussi"),!0}catch(e){console.error("Erreur lors du d\xe9sabonnement:",e)}return!1}}};var Tu=s(6047);const Iu=e=>{let{notifications:t,onNotificationClick:s,className:n="",fixed:a=!1}=e;const[o,l]=(0,r.useState)(!1),c=(0,r.useRef)(null),[d,u]=(0,r.useState)(!1),[h,m]=(0,r.useState)([]),[p,f]=(0,r.useState)(new Set),{user:x}=dt(),{notifications:g,unreadCount:v,markAllAsRead:y,clearReadNotifications:b,refreshNotifications:j,showSuccess:w}=yt(),{pendingRequests:N}=(()=>{const{user:e}=dt(),[t,s]=(0,r.useState)({total:0,pending:0,approved:0,rejected:0,active:0,completed:0}),[n,a]=(0,r.useState)(0),i=async()=>{if(null!==e&&void 0!==e&&e.id)try{let t=ot.ND.from("loans").select("status, amount");"admin"!==e.role&&(t=t.eq("user_id",e.id));const{data:r,error:n}=await t;if(n)return void console.error("Erreur lors du chargement des compteurs:",n);const i={total:0,pending:0,approved:0,rejected:0,active:0,completed:0};if(null===r||void 0===r||r.forEach(e=>{i.total++,i[e.status]++}),s(i),"admin"===e.role){const{data:e,error:t}=await ot.ND.from("loans").select("id").eq("status","pending");!t&&e&&a(e.length)}}catch(t){console.error("Erreur lors du chargement des compteurs:",t)}};return(0,r.useEffect)(()=>{if(null===e||void 0===e||!e.id)return;const t=setTimeout(()=>i(),400);let s;const r=setTimeout(()=>{s=ot.ND.channel("loan_counters").on("postgres_changes",{event:"*",schema:"public",table:"loans"},()=>{setTimeout(i,100)}).subscribe(e=>{})},800);return()=>{clearTimeout(t),clearTimeout(r),s&&s.unsubscribe()}},[null===e||void 0===e?void 0:e.id,null===e||void 0===e?void 0:e.role]),{counters:t,pendingRequests:"admin"!==(null===e||void 0===e?void 0:e.role)?0:n,totalLoans:t.total,getCountByStatus:e=>t[e]||0,getAllCounters:()=>t,refresh:i}})(),{isSupported:S,isSubscribed:k,subscribeUser:A,unsubscribeUser:_}=Pu(),E=g&&g.length>0?g:t||[],C=E.filter(e=>!e.read),P=[...C];"admin"===(null===x||void 0===x?void 0:x.role)&&h.length>0&&h.forEach(e=>{var t,s;p.has(e.id)||P.push({id:"pending-loan-".concat(e.id),title:"Nouvelle demande de pr\xeat",message:"".concat((null===(t=e.users)||void 0===t?void 0:t.first_name)||"Utilisateur"," ").concat((null===(s=e.users)||void 0===s?void 0:s.last_name)||""," - ").concat((0,Tu.vv)(e.amount||0)),type:"warning",priority:"high",read:!1,timestamp:e.created_at,data:{loanId:e.id,userId:e.user_id},action:"Voir la demande",isPendingLoan:!0})});const T=P.sort((e,t)=>{const s=new Date(e.timestamp||0);return new Date(t.timestamp||0)-s}),I=E.filter(e=>!e.read).length,R=E.filter(e=>e.read).length,O=T.filter(e=>!e.read).length,D=h.filter(e=>!p.has(e.id)).length,L=(T.filter(e=>e.isPendingLoan).length,T.length>0||D>0);(0,r.useEffect)(()=>{(async()=>{if("admin"===(null===x||void 0===x?void 0:x.role)&&o)try{const e=await(0,lt.Or)();if(e.success){const t=e.data.filter(e=>"pending"===e.status);m(t.slice(0,10)),console.log("[NOTIFICATION_BELL] Demandes en attente charg\xe9es:",t.length)}}catch(e){console.error("[NOTIFICATION_BELL] Erreur chargement demandes:",e)}})()},[o,null===x||void 0===x?void 0:x.role]),(0,r.useEffect)(()=>{o&&null!==x&&void 0!==x&&x.id&&(console.log("[NOTIFICATION_BELL] \ud83d\udd14 Dropdown ouvert, rafra\xeechissement des notifications pour user:",x.id),console.log("[NOTIFICATION_BELL] Notifications actuelles:",T.length),u(!0),j(x.id).then(()=>{u(!1),console.log("[NOTIFICATION_BELL] \u2705 Notifications rafra\xeechies")}).catch(e=>{console.error("[NOTIFICATION_BELL] \u274c Erreur rafra\xeechissement:",e),u(!1)}))},[o,null===x||void 0===x?void 0:x.id]),(0,r.useEffect)(()=>{const e=e=>{c.current&&!c.current.contains(e.target)&&z()};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);const z=()=>{l(!1)},M=I+D;return(0,i.jsxs)("div",{className:"relative ".concat(a?"fixed top-24 right-4 z-[9999] sm:top-4":"z-[9999]"," ").concat(n),ref:c,children:[(0,i.jsxs)("button",{onClick:()=>l(!o),className:"relative p-2 bg-white/80 backdrop-blur-sm rounded-full shadow-lg hover:shadow-xl transition-all duration-200 border border-gray-200/50",children:[(0,i.jsx)(lr,{size:20,className:"text-gray-700 w-5 h-5 sm:w-5 sm:h-5"}),M>0&&(0,i.jsx)("div",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center font-medium",children:M>99?"99+":M})]}),o&&(0,i.jsxs)("div",{className:"absolute right-0 mt-2 w-80 max-w-[calc(100vw-2rem)] sm:w-80 bg-white/95 backdrop-blur-sm rounded-xl shadow-2xl border border-gray-200/50 overflow-hidden",children:[(0,i.jsxs)("div",{className:"border-b border-gray-200/50 bg-gradient-to-r from-gray-50/50 to-white/50",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between p-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{className:"font-semibold text-gray-900",children:"Notifications"}),N>0&&(0,i.jsxs)("p",{className:"text-sm text-orange-600 font-medium",children:[N," demande",N>1?"s":""," en attente"]})]}),(0,i.jsx)("button",{onClick:z,className:"p-1 rounded-full hover:bg-gray-100 transition-colors duration-200","aria-label":"Fermer",children:(0,i.jsx)(xt,{size:16,className:"text-gray-500"})})]}),L&&(0,i.jsxs)("div",{className:"flex gap-2 px-4 pb-3 border-t border-gray-200/50 pt-3 bg-gray-50/30",children:[(O>0||D>0)&&(0,i.jsxs)("button",{onClick:async()=>{try{if(console.log("[NOTIFICATION_BELL] \ud83d\udfe6 Marquage de toutes les notifications comme lues..."),console.log("[NOTIFICATION_BELL] Notifications avant:",E.length,"non lues:",I),await y(),h.length>0){const e=new Set(p);h.forEach(t=>{e.add(t.id)}),f(e),console.log("[NOTIFICATION_BELL] Demandes en attente marqu\xe9es comme dismissed:",e.size)}null!==x&&void 0!==x&&x.id&&(console.log("[NOTIFICATION_BELL] \ud83d\udd04 Rafra\xeechissement des notifications..."),await j(x.id),console.log("[NOTIFICATION_BELL] \u2705 Notifications rafra\xeechies")),w("Toutes les notifications ont \xe9t\xe9 marqu\xe9es comme lues")}catch(e){console.error("[NOTIFICATION_BELL] \u274c Erreur lors du marquage:",e),w("Erreur lors du marquage des notifications")}},className:"flex-1 flex items-center justify-center gap-1.5 px-3 py-2.5 text-xs font-semibold text-blue-700 bg-blue-50 hover:bg-blue-100 active:bg-blue-200 rounded-lg transition-all duration-200 shadow-sm hover:shadow-md",title:"Marquer ".concat(O||D," notification").concat((O||D)>1?"s":""," comme lue").concat((O||D)>1?"s":""),children:[(0,i.jsx)(bu,{size:14,className:"flex-shrink-0"}),(0,i.jsx)("span",{children:"Tout marquer lu"}),(O||D)>0&&(0,i.jsx)("span",{className:"ml-1 px-1.5 py-0.5 bg-blue-200 text-blue-800 rounded-full text-[10px] font-bold",children:O||D})]}),R>0&&(0,i.jsxs)("button",{onClick:async()=>{try{await b((null===x||void 0===x?void 0:x.id)||null),w("Notifications lues supprim\xe9es"),null!==x&&void 0!==x&&x.id&&await j(x.id)}catch(e){console.error("[NOTIFICATION_BELL] Erreur lors du nettoyage:",e)}},className:"flex-1 flex items-center justify-center gap-1.5 px-3 py-2.5 text-xs font-semibold text-red-700 bg-red-50 hover:bg-red-100 active:bg-red-200 rounded-lg transition-all duration-200 shadow-sm hover:shadow-md",title:"Supprimer ".concat(R," notification").concat(R>1?"s":""," lue").concat(R>1?"s":""),children:[(0,i.jsx)(ju,{size:14,className:"flex-shrink-0"}),(0,i.jsx)("span",{children:"Nettoyer"}),R>0&&(0,i.jsx)("span",{className:"ml-1 px-1.5 py-0.5 bg-red-200 text-red-800 rounded-full text-[10px] font-bold",children:R})]})]})]}),(0,i.jsx)("div",{className:"max-h-96 overflow-y-auto",children:d?(0,i.jsxs)("div",{className:"p-8 text-center text-gray-500",children:[(0,i.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600 mx-auto mb-4"}),(0,i.jsx)("p",{className:"text-sm",children:"Chargement des notifications..."})]}):0===T.length&&0===D?(0,i.jsxs)("div",{className:"p-8 text-center text-gray-500",children:[(0,i.jsx)(lr,{size:48,className:"mx-auto mb-4 text-gray-300"}),(0,i.jsx)("p",{className:"text-sm",children:"Aucune notification"})]}):(0,i.jsx)("div",{className:"p-2",children:T.map((e,t)=>(0,i.jsx)("div",{onClick:()=>(e=>{var t;if(e.isPendingLoan&&null!==(t=e.data)&&void 0!==t&&t.loanId)return z(),void setTimeout(()=>{window.location.href="/admin/loan-requests"},100);null===s||void 0===s||s(e),z()})(e),className:"p-3 rounded-lg cursor-pointer transition-all duration-200 hover:bg-gray-50/80 ".concat(!e.read||e.isPendingLoan?"bg-orange-50/50 border-l-4 border-orange-400":"bg-white"),children:(0,i.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,i.jsxs)("div",{className:"flex-shrink-0 mt-1",children:["success"===e.type&&(0,i.jsx)(ht.A,{size:16,className:"text-green-500"}),"error"===e.type&&(0,i.jsx)(pt,{size:16,className:"text-red-500"}),"info"===e.type&&(0,i.jsx)(ft,{size:16,className:"text-blue-500"}),"warning"===e.type&&(0,i.jsx)(wu,{size:16,className:"text-yellow-500"}),e.isPendingLoan&&(0,i.jsx)(wu,{size:16,className:"text-orange-500"})]}),(0,i.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,i.jsx)("p",{className:"text-sm font-medium text-gray-900 leading-5",children:e.title}),(0,i.jsx)("p",{className:"text-sm text-gray-600 leading-5 mt-1",children:e.message}),e.action&&(0,i.jsxs)("p",{className:"text-xs text-blue-600 font-medium mt-2",children:[e.action," \u2192"]})]})]})},e.id))})}),(0,i.jsxs)("div",{className:"p-3 border-t border-gray-200/50 bg-gray-50/30",children:[S&&(0,i.jsx)("div",{className:"mb-3",children:(0,i.jsx)("button",{onClick:async()=>{k?await _():await A()},className:"w-full flex items-center justify-center space-x-2 px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200 ".concat(k?"bg-green-100 text-green-700 hover:bg-green-200":"bg-blue-100 text-blue-700 hover:bg-blue-200"),children:k?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Nu,{size:16}),(0,i.jsx)("span",{children:"Notifications activ\xe9es"})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Su,{size:16}),(0,i.jsx)("span",{children:"Activer les notifications"})]})})}),T.length>0&&(0,i.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[(0,i.jsxs)("span",{children:[v," non lue",v>1?"s":""]}),N>0&&(0,i.jsxs)("span",{className:"text-orange-600 font-medium",children:[N," en attente"]})]})]})]})]})},Ru=()=>{const{user:e,logout:t}=dt(),s=(0,We.Zp)(),n=(0,We.zy)(),{showInfo:a,notifications:o,markAsRead:l,refreshNotifications:c}=yt(),[d,u]=(0,r.useState)(!1),[h,m]=(0,r.useState)(0);(0,r.useEffect)(()=>{if(null===e||void 0===e||!e.id)return;const t=setTimeout(()=>{c(e.id)},300);return()=>clearTimeout(t)},[null===e||void 0===e?void 0:e.id,c]),(0,r.useEffect)(()=>{if("admin"===(null===e||void 0===e?void 0:e.role)){const e=()=>{const e=JSON.parse(localStorage.getItem("adminNotifications")||"[]").filter(e=>!e.read&&new Date(e.timestamp)>new Date(Date.now()-3e5));if(e.length>0){m(e.length);const t=e[0];"new_registration"===t.type&&a("Nouvelle inscription : ".concat(t.user.firstName," ").concat(t.user.lastName))}},t=setInterval(e,3e4);return e(),()=>clearInterval(t)}},[null===e||void 0===e?void 0:e.role,a]);const p=async()=>{try{console.log("[HEADER] Tentative de d\xe9connexion..."),await t(),console.log("[HEADER] \u2705 D\xe9connexion r\xe9ussie, redirection vers login"),s("/login")}catch(e){console.error("[HEADER] \u274c Erreur lors de la d\xe9connexion:",e);try{localStorage.removeItem("ab_user_cache")}catch(ys){}s("/login")}},f=()=>null!==e&&void 0!==e&&e.firstName&&null!==e&&void 0!==e&&e.lastName?"".concat(e.firstName," ").concat(e.lastName):(null===e||void 0===e?void 0:e.email)||"Utilisateur";return(0,i.jsx)("header",{className:"fixed top-0 left-0 right-0 bg-white shadow-soft border-b border-accent-200 w-full z-50",children:(0,i.jsxs)("div",{className:"w-full",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center py-4 w-full px-4 lg:px-8",children:[(0,i.jsx)("button",{onClick:()=>{"admin"===(null===e||void 0===e?void 0:e.role)&&n.pathname.startsWith("/admin")||"admin"===(null===e||void 0===e?void 0:e.role)?s("/admin"):s("/dashboard")},className:"flex items-center space-x-3 hover:opacity-80 transition-opacity duration-200",children:(0,i.jsx)(yu,{size:"md"})}),(0,i.jsx)("div",{className:"lg:hidden",children:(0,i.jsx)(Iu,{notifications:o,onNotificationClick:e=>{l(e.id),"payment"===e.type?s("/repayment"):"loan"===e.type&&s("/loan-history")}})}),"admin"!==(null===e||void 0===e?void 0:e.role)&&(0,i.jsxs)("nav",{className:"hidden lg:flex items-center space-x-6",children:[(0,i.jsx)("a",{href:"/dashboard",className:"text-neutral-600 hover:text-secondary-900 font-montserrat transition-colors duration-200",children:"Accueil"}),(0,i.jsx)("a",{href:"/loan-request",className:"text-neutral-600 hover:text-secondary-900 font-montserrat transition-colors duration-200",children:"Demander un pr\xeat"}),(0,i.jsx)("a",{href:"/loan-history",className:"text-neutral-600 hover:text-secondary-900 font-montserrat transition-colors duration-200",children:"Historique"}),(0,i.jsx)("a",{href:"/repayment",className:"text-neutral-600 hover:text-secondary-900 font-montserrat transition-colors duration-200",children:"Remboursement"})]}),(0,i.jsxs)("div",{className:"hidden lg:flex items-center space-x-4",children:[(0,i.jsx)(Iu,{notifications:o,onNotificationClick:e=>{l(e.id),"payment"===e.type?s("/repayment"):"loan"===e.type&&s("/loan-history")}}),"admin"===(null===e||void 0===e?void 0:e.role)&&h>0&&(0,i.jsxs)("button",{className:"relative p-2 text-neutral-400 hover:text-neutral-600 transition-colors duration-200",children:[(0,i.jsx)(lr,{size:20}),(0,i.jsx)("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:h})]}),(0,i.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,i.jsx)("div",{className:"w-8 h-8 bg-primary-100 rounded-full flex items-center justify-center",children:(0,i.jsx)(cr,{size:16,className:"text-primary-600"})}),(0,i.jsxs)("div",{className:"flex flex-col",children:[(0,i.jsx)("span",{className:"text-sm font-medium text-secondary-900 font-montserrat",children:f()}),(0,i.jsx)("span",{className:"text-xs text-neutral-600 font-montserrat",children:"admin"===(null===e||void 0===e?void 0:e.role)?"Administrateur":"Client AB CAMPUS FINANCE"})]}),(0,i.jsx)("button",{onClick:p,className:"p-2 text-neutral-400 hover:text-neutral-600 transition-colors duration-200",children:(0,i.jsx)(dr,{size:20})})]})]}),(0,i.jsx)("button",{onClick:()=>u(!d),className:"lg:hidden relative p-3 rounded-xl bg-white/80 backdrop-blur-sm border border-gray-200/50 hover:bg-white/90 transition-all duration-200 shadow-sm hover:shadow-md",children:(0,i.jsxs)("div",{className:"flex flex-col space-y-1.5",children:[(0,i.jsx)("span",{className:"w-6 h-0.5 bg-gray-700 rounded-full"}),(0,i.jsx)("span",{className:"w-6 h-0.5 bg-gray-700 rounded-full"}),(0,i.jsx)("span",{className:"w-6 h-0.5 bg-gray-700 rounded-full"})]})})]}),d&&(0,i.jsxs)("div",{className:"lg:hidden border-t border-accent-200 py-4 w-full overflow-hidden",children:[(0,i.jsx)("div",{className:"px-4 mb-4",children:(0,i.jsx)("h3",{className:"text-lg font-semibold text-secondary-900 font-montserrat mb-4",children:"Nous contacter"})}),(0,i.jsx)("div",{className:"px-4",children:(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsxs)("a",{href:"https://wa.me/22953463606",target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-3 px-4 py-3 rounded-xl hover:bg-green-50 transition-all duration-200 group",onClick:()=>u(!1),children:[(0,i.jsx)("div",{className:"w-8 h-8 bg-green-500 rounded-full flex items-center justify-center flex-shrink-0",children:(0,i.jsx)("svg",{className:"w-4 h-4 text-white",fill:"currentColor",viewBox:"0 0 24 24",children:(0,i.jsx)("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893A11.821 11.821 0 0020.885 3.488"})})}),(0,i.jsxs)("div",{className:"flex-1",children:[(0,i.jsx)("p",{className:"text-sm font-medium text-secondary-900 font-montserrat group-hover:text-green-600 transition-colors",children:"WhatsApp"}),(0,i.jsx)("p",{className:"text-xs text-neutral-600 font-montserrat",children:"+229 53 46 36 06"})]}),(0,i.jsx)(ur,{size:16,className:"text-neutral-400 group-hover:text-green-600 transition-colors"})]}),(0,i.jsxs)("a",{href:"mailto:abpret51@gmail.com",className:"flex items-center space-x-3 px-4 py-3 rounded-xl hover:bg-blue-50 transition-all duration-200 group",onClick:()=>u(!1),children:[(0,i.jsx)("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center flex-shrink-0",children:(0,i.jsx)("svg",{className:"w-4 h-4 text-white",fill:"currentColor",viewBox:"0 0 24 24",children:(0,i.jsx)("path",{d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"})})}),(0,i.jsxs)("div",{className:"flex-1",children:[(0,i.jsx)("p",{className:"text-sm font-medium text-secondary-900 font-montserrat group-hover:text-blue-600 transition-colors",children:"Email"}),(0,i.jsx)("p",{className:"text-xs text-neutral-600 font-montserrat",children:"abpret51@gmail.com"})]}),(0,i.jsx)(ur,{size:16,className:"text-neutral-400 group-hover:text-blue-600 transition-colors"})]}),(0,i.jsxs)("a",{href:"https://www.facebook.com/abpret.2024",target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-3 px-4 py-3 rounded-xl hover:bg-blue-50 transition-all duration-200 group",onClick:()=>u(!1),children:[(0,i.jsx)("div",{className:"w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center flex-shrink-0",children:(0,i.jsx)("svg",{className:"w-4 h-4 text-white",fill:"currentColor",viewBox:"0 0 24 24",children:(0,i.jsx)("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})})}),(0,i.jsxs)("div",{className:"flex-1",children:[(0,i.jsx)("p",{className:"text-sm font-medium text-secondary-900 font-montserrat group-hover:text-blue-600 transition-colors",children:"Facebook"}),(0,i.jsx)("p",{className:"text-xs text-neutral-600 font-montserrat",children:"AB Campus Finance"})]}),(0,i.jsx)(ur,{size:16,className:"text-neutral-400 group-hover:text-blue-600 transition-colors"})]})]})}),(0,i.jsx)("div",{className:"mt-6 pt-6 border-t border-accent-200",children:(0,i.jsxs)("div",{className:"flex items-center justify-between px-4",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,i.jsx)("div",{className:"w-8 h-8 bg-primary-100 rounded-full flex items-center justify-center",children:(0,i.jsx)(cr,{size:16,className:"text-primary-600"})}),(0,i.jsxs)("div",{className:"flex flex-col",children:[(0,i.jsx)("span",{className:"text-sm font-medium text-secondary-900 font-montserrat",children:f()}),(0,i.jsx)("span",{className:"text-xs text-neutral-600 font-montserrat",children:"admin"===(null===e||void 0===e?void 0:e.role)?"Administrateur":"Client"})]})]}),(0,i.jsx)("button",{onClick:p,className:"p-2 text-neutral-400 hover:text-neutral-600 transition-colors duration-200",children:(0,i.jsx)(dr,{size:20})})]})})]})]})})},Ou=(0,mt.A)("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]),Du=(0,mt.A)("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]),Lu=e=>{let{size:t=16,className:s=""}=e;return(0,i.jsx)("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"currentColor",className:s,children:(0,i.jsx)("path",{d:"M12.031 6.172c-3.181 0-5.767 2.586-5.768 5.766-.001 1.298.38 2.27 1.019 3.287l-.582 2.128 2.182-.573c.978.58 1.911.928 3.145.929 3.178 0 5.767-2.587 5.768-5.766.001-3.187-2.575-5.771-5.764-5.771zm3.392 8.244c-.144.405-.837.774-1.17.824-.299.045-.677.063-1.092-.069-.252-.08-.575-.187-.988-.365-1.739-.751-2.874-2.502-2.961-2.617-.087-.116-.708-.94-.708-1.793s.448-1.273.607-1.446c.159-.173.346-.217.462-.217l.332.006c.106.005.249-.04.39.298.144.347.491 1.2.534 1.287.043.087.072.188.014.304-.058.116-.087.188-.173.289l-.26.304c-.087.086-.177.18-.076.354.101.174.449.741.964 1.201.662.591 1.221.774 1.394.86s.274.072.376-.043c.101-.116.433-.506.549-.68.116-.173.231-.145.39-.087s1.011.477 1.184.564.289.13.332.202c.045.072.045.419-.1.824zm-3.423-14.416c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm.029 18.88c-1.161 0-2.305-.292-3.318-.844l-3.677.964.984-3.595c-.607-1.052-.927-2.246-.926-3.468.001-3.825 3.113-6.937 6.937-6.937 1.856 0 3.598.723 4.907 2.034 1.31 1.311 2.031 3.054 2.03 4.908-.001 3.825-3.113 6.938-6.937 6.938z"})})},zu=e=>{let{size:t=16,className:s=""}=e;return(0,i.jsx)("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"currentColor",className:s,children:(0,i.jsx)("path",{d:"M24 5.457v13.909c0 .904-.732 1.636-1.636 1.636h-3.819V11.73L12 16.64l-6.545-4.91v9.273H1.636A1.636 1.636 0 0 1 0 19.366V5.457c0-.904.732-1.636 1.636-1.636h.819L12 10.91l9.545-7.089h.819A1.636 1.636 0 0 1 24 5.457z"})})},Mu=()=>{const e=()=>{window.open("mailto:abpret51@gmail.com","_blank")},t=()=>{const e="https://wa.me/".concat("+22953463606","?text=").concat(encodeURIComponent("Bonjour, je souhaite avoir plus d'informations sur vos services de pr\xeat."));window.open(e,"_blank")},s=()=>{window.open("https://www.facebook.com/abpret.2024","_blank")};return(0,i.jsx)("footer",{className:"bg-white/80 backdrop-blur-sm border-t border-accent-200",children:(0,i.jsxs)("div",{className:"max-w-7xl mx-auto px-4 pt-2 pb-4",children:[(0,i.jsxs)("div",{className:"lg:hidden",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,i.jsx)("div",{className:"w-8 h-8 bg-primary-100 rounded-full flex items-center justify-center",children:(0,i.jsx)("span",{className:"text-primary-600 font-bold text-sm",children:"AB"})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-xs font-medium text-secondary-900 font-montserrat",children:"AB CAMPUS FINANCE"}),(0,i.jsx)("p",{className:"text-xs text-neutral-600 font-montserrat",children:"Cotonou, B\xe9nin"})]})]}),(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,i.jsx)("button",{onClick:e,className:"p-2 bg-red-100 rounded-full hover:bg-red-200 transition-colors duration-200",title:"Envoyer un email",children:(0,i.jsx)(zu,{size:14,className:"text-red-600"})}),(0,i.jsx)("button",{onClick:t,className:"p-2 bg-green-100 rounded-full hover:bg-green-200 transition-colors duration-200",title:"Contacter sur WhatsApp",children:(0,i.jsx)(Lu,{size:14,className:"text-green-600"})}),(0,i.jsx)("button",{onClick:s,className:"p-2 bg-blue-100 rounded-full hover:bg-blue-200 transition-colors duration-200",title:"Suivre sur Facebook",children:(0,i.jsx)(Ou,{size:14,className:"text-blue-600"})})]})]}),(0,i.jsx)("div",{className:"mt-3 pt-3 border-t border-accent-200",children:(0,i.jsxs)("div",{className:"flex items-center justify-between text-xs text-neutral-600 font-montserrat",children:[(0,i.jsx)("span",{children:"\xa9 2025 AB CAMPUS FINANCE"}),(0,i.jsx)("span",{className:"text-primary-600 font-semibold",children:"Made in B\xe9nin \ud83c\udde7\ud83c\uddef"})]})})]}),(0,i.jsx)("div",{className:"hidden lg:block",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,i.jsx)("div",{className:"w-10 h-10 bg-primary-100 rounded-full flex items-center justify-center",children:(0,i.jsx)("span",{className:"text-primary-600 font-bold",children:"AB"})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"font-semibold text-secondary-900 font-montserrat",children:"AB CAMPUS FINANCE"}),(0,i.jsx)("p",{className:"text-sm text-neutral-600 font-montserrat",children:"Votre succ\xe8s, notre mission"})]})]}),(0,i.jsxs)("div",{className:"flex items-center space-x-4 text-sm",children:[(0,i.jsxs)("button",{onClick:e,className:"flex items-center space-x-2 text-neutral-600 hover:text-red-600 transition-colors duration-200 font-montserrat",children:[(0,i.jsx)(zu,{size:16}),(0,i.jsx)("span",{children:"abpret51@gmail.com"}),(0,i.jsx)(Du,{size:12})]}),(0,i.jsxs)("button",{onClick:t,className:"flex items-center space-x-2 text-neutral-600 hover:text-green-600 transition-colors duration-200 font-montserrat",children:[(0,i.jsx)(Lu,{size:16}),(0,i.jsx)("span",{children:"+229 53463606"}),(0,i.jsx)(Du,{size:12})]}),(0,i.jsxs)("button",{onClick:s,className:"flex items-center space-x-2 text-neutral-600 hover:text-blue-600 transition-colors duration-200 font-montserrat",children:[(0,i.jsx)(Ou,{size:16}),(0,i.jsx)("span",{children:"Suivre sur Facebook"}),(0,i.jsx)(Du,{size:12})]})]})]}),(0,i.jsxs)("div",{className:"text-sm text-neutral-600 font-montserrat",children:["\xa9 2025 AB CAMPUS FINANCE. Tous droits r\xe9serv\xe9s. ",(0,i.jsx)("span",{className:"text-primary-600 font-semibold ml-2",children:"Made in B\xe9nin \ud83c\udde7\ud83c\uddef"})]})]})})]})})},Fu=e=>{let{items:t,panelHeight:s=68,baseItemSize:n=50,magnification:a=70,className:o=""}=e;const[l,c]=(0,r.useState)(null),d=(0,We.Zp)(),u=(0,We.zy)();return(0,i.jsxs)(gu.div,{className:"fixed bottom-4 left-4 right-4 z-50 ".concat(o),initial:{y:0,opacity:1},animate:{y:0,opacity:1},transition:{type:"spring",stiffness:300,damping:30,duration:.3},children:[(0,i.jsx)("div",{className:"absolute inset-0 bg-white border border-accent-200 rounded-3xl shadow-2xl"}),(0,i.jsx)("div",{className:"relative flex items-center justify-center px-6 py-3",style:{height:s},children:(0,i.jsx)("div",{className:"flex items-center space-x-3",children:t.map((e,t)=>{const s=l===t,r=u.pathname===e.path,o=s?n+a:n;return(0,i.jsxs)(gu.div,{className:"relative",onHoverStart:()=>c(t),onHoverEnd:()=>c(null),onClick:()=>(e=>{e.path&&e.path!==u.pathname&&d(e.path)})(e),whileTap:{scale:.92},transition:{type:"spring",stiffness:400,damping:17},children:[(0,i.jsxs)(gu.div,{className:"\n                    flex flex-col items-center justify-center rounded-2xl cursor-pointer\n                    ".concat(r?"bg-primary-100 shadow-lg":s?"bg-accent-100 shadow-lg":"bg-transparent hover:bg-accent-50","\n                    transition-all duration-300 ease-out\n                  "),style:{width:o,height:o,minWidth:o,minHeight:o},animate:{scale:s?1.15:1,y:s?-12:0},transition:{type:"spring",stiffness:400,damping:17},children:[(0,i.jsx)(gu.div,{className:"\n                      transition-colors duration-200\n                      ".concat(r||s?"text-primary-600":"text-secondary-600","\n                    "),animate:{scale:s?1.1:1},transition:{duration:.2},children:e.icon}),(0,i.jsx)(gu.span,{className:"text-xs font-medium mt-1 transition-colors duration-200 ".concat(r||s?"text-primary-600":"text-secondary-600"),style:{fontSize:"10px"},animate:{scale:s?1.05:1},transition:{duration:.2},children:e.label})]}),s&&(0,i.jsx)(gu.div,{className:"absolute inset-0 rounded-2xl bg-primary-200/40 blur-2xl -z-10",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1.3},exit:{opacity:0,scale:.8},transition:{duration:.3}})]},t)})})}),(0,i.jsx)("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 w-32 h-1 bg-gradient-to-r from-transparent via-primary-200/50 to-transparent rounded-full"})]})},Uu=(0,mt.A)("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);var Bu=s(5722);const Vu=(0,mt.A)("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);var qu=s(6852);const Hu=(0,mt.A)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Wu=(0,mt.A)("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),Gu=(0,mt.A)("Grid",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["line",{x1:"3",x2:"21",y1:"9",y2:"9",key:"1vqk6q"}],["line",{x1:"3",x2:"21",y1:"15",y2:"15",key:"o2sbyz"}],["line",{x1:"9",x2:"9",y1:"3",y2:"21",key:"13tij5"}],["line",{x1:"15",x2:"15",y1:"3",y2:"21",key:"1hpv9i"}]]),Ku=(0,mt.A)("Wallet",[["path",{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4",key:"195gfw"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h16v-5",key:"195n9w"}],["path",{d:"M18 12a2 2 0 0 0 0 4h4v-4Z",key:"vllfpd"}]]),Zu=(0,r.createContext)(),Qu=e=>{let{children:t}=e;const{user:s}=dt(),r="admin"===(null===s||void 0===s?void 0:s.role)?[{icon:(0,i.jsx)(Uu,{size:20}),label:"Accueil",path:"/admin"},{icon:(0,i.jsx)(Bu.A,{size:20}),label:"Demandes",path:"/admin/loan-requests"},{icon:(0,i.jsx)(Vu,{size:20}),label:"Menu",path:"/admin/menu"},{icon:(0,i.jsx)(qu.A,{size:20}),label:"Analytics",path:"/admin/analytics"},{icon:(0,i.jsx)(Hu,{size:20}),label:"Param\xe8tres",path:"/admin/settings"}]:[{icon:(0,i.jsx)(Uu,{size:20}),label:"Accueil",path:"/dashboard"},{icon:(0,i.jsx)(Wu,{size:20}),label:"Demandes",path:"/loan-request"},{icon:(0,i.jsx)(Gu,{size:20}),label:"Menu",path:"/menu"},{icon:(0,i.jsx)(Ku,{size:20}),label:"Rembourser",path:"/repayment"},{icon:(0,i.jsx)(cr,{size:20}),label:"Profil",path:"/profile"}];return(0,i.jsxs)(Zu.Provider,{value:{dockItems:r},children:[t,(0,i.jsx)(Fu,{items:r,panelHeight:80,baseItemSize:60,magnification:80})]})},Ju=e=>{let{children:t}=e;return(0,i.jsx)(Qu,{children:(0,i.jsxs)("div",{className:"bg-gray-50 w-full overflow-x-hidden",children:[(0,i.jsx)(Ru,{}),(0,i.jsx)("main",{className:"w-full overflow-x-hidden pt-20",children:t}),(0,i.jsx)(Mu,{})]})})};function Yu(e,t){if("function"===typeof e)return e(t);null!==e&&void 0!==e&&(e.current=t)}function $u(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return r.useCallback(function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return e=>{let s=!1;const r=t.map(t=>{const r=Yu(t,e);return s||"function"!==typeof r||(s=!0),r});if(s)return()=>{for(let e=0;e<r.length;e++){const s=r[e];"function"===typeof s?s():Yu(t[e],null)}}}}(...t),t)}class Xu extends r.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const e=t.offsetParent,s=Xd(e)&&e.offsetWidth||0,r=this.props.sizeRef.current;r.height=t.offsetHeight||0,r.width=t.offsetWidth||0,r.top=t.offsetTop,r.left=t.offsetLeft,r.right=s-r.width-r.left}return null}componentDidUpdate(){}render(){return this.props.children}}function eh(e){let{children:t,isPresent:s,anchorX:n,root:a}=e;const o=(0,r.useId)(),l=(0,r.useRef)(null),c=(0,r.useRef)({width:0,height:0,top:0,left:0,right:0}),{nonce:d}=(0,r.useContext)(mi),u=$u(l,null===t||void 0===t?void 0:t.ref);return(0,r.useInsertionEffect)(()=>{const{width:e,height:t,top:r,left:i,right:u}=c.current;if(s||!l.current||!e||!t)return;const h="left"===n?"left: ".concat(i):"right: ".concat(u);l.current.dataset.motionPopId=o;const m=document.createElement("style");d&&(m.nonce=d);const p=null!==a&&void 0!==a?a:document.head;return p.appendChild(m),m.sheet&&m.sheet.insertRule('\n          [data-motion-pop-id="'.concat(o,'"] {\n            position: absolute !important;\n            width: ').concat(e,"px !important;\n            height: ").concat(t,"px !important;\n            ").concat(h,"px !important;\n            top: ").concat(r,"px !important;\n          }\n        ")),()=>{p.contains(m)&&p.removeChild(m)}},[s]),(0,i.jsx)(Xu,{isPresent:s,childRef:l,sizeRef:c,children:r.cloneElement(t,{ref:u})})}const th=e=>{let{children:t,initial:s,isPresent:n,onExitComplete:a,custom:o,presenceAffectsLayout:l,mode:d,anchorX:u,root:h}=e;const m=Ci(sh),p=(0,r.useId)();let f=!0,x=(0,r.useMemo)(()=>(f=!1,{id:p,initial:s,isPresent:n,custom:o,onExitComplete:e=>{m.set(e,!0);for(const t of m.values())if(!t)return;a&&a()},register:e=>(m.set(e,!1),()=>m.delete(e))}),[n,m,a]);return l&&f&&(x=(0,c.A)({},x)),(0,r.useMemo)(()=>{m.forEach((e,t)=>m.set(t,!1))},[n]),r.useEffect(()=>{!n&&!m.size&&a&&a()},[n]),"popLayout"===d&&(t=(0,i.jsx)(eh,{isPresent:n,anchorX:u,root:h,children:t})),(0,i.jsx)(Ei.Provider,{value:x,children:t})};function sh(){return new Map}const rh=e=>e.key||"";function nh(e){const t=[];return r.Children.forEach(e,e=>{(0,r.isValidElement)(e)&&t.push(e)}),t}const ah=e=>{let{children:t,custom:s,initial:n=!0,onExitComplete:a,presenceAffectsLayout:o=!0,mode:l="sync",propagate:c=!1,anchorX:d="left",root:u}=e;const[h,m]=Oc(c),p=(0,r.useMemo)(()=>nh(t),[t]),f=c&&!h?[]:p.map(rh),x=(0,r.useRef)(!0),g=(0,r.useRef)(p),v=Ci(()=>new Map),[y,b]=(0,r.useState)(p),[j,w]=(0,r.useState)(p);Bi(()=>{x.current=!1,g.current=p;for(let e=0;e<j.length;e++){const t=rh(j[e]);f.includes(t)?v.delete(t):!0!==v.get(t)&&v.set(t,!1)}},[j,f.length,f.join("-")]);const N=[];if(p!==y){let e=[...p];for(let t=0;t<j.length;t++){const s=j[t],r=rh(s);f.includes(r)||(e.splice(t,0,s),N.push(s))}return"wait"===l&&N.length&&(e=N),w(nh(e)),b(p),null}const{forceRender:S}=(0,r.useContext)(ui);return(0,i.jsx)(i.Fragment,{children:j.map(e=>{const t=rh(e),r=!(c&&!h)&&(p===j||f.includes(t));return(0,i.jsx)(th,{isPresent:r,initial:!(x.current&&!n)&&void 0,custom:s,presenceAffectsLayout:o,mode:l,root:u,onExitComplete:r?void 0:()=>{if(!v.has(t))return;v.set(t,!0);let e=!0;v.forEach(t=>{t||(e=!1)}),e&&(null===S||void 0===S||S(),w(g.current),c&&(null===m||void 0===m||m()),a&&a())},anchorX:d,children:e},t)})})},ih=()=>{const[e,t]=(0,r.useState)(!1),[s,n]=(0,r.useState)(!1),{isSupported:a,isSubscribed:o,hasAskedPermission:l,subscribeUser:c}=Pu();(0,r.useEffect)(()=>{if("true"===localStorage.getItem("notification-prompt-declined"))return;if(o)return;if("true"!==localStorage.getItem("subscription-inactive"))return;if("true"===localStorage.getItem("notification-prompt-seen")){const e=localStorage.getItem("notification-prompt-last-seen");if(e){if((Date.now()-parseInt(e))/36e5<24)return}}if(a&&l&&!o&&"denied"!==Notification.permission){const e=setTimeout(()=>t(!0),3e3);return()=>clearTimeout(e)}},[a,l,o]);return e?(0,i.jsx)(ah,{children:(0,i.jsx)(gu.div,{initial:{opacity:0,y:-50,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-50,scale:.9},transition:{duration:.3,ease:"easeOut"},className:"fixed top-4 right-4 z-[10000] max-w-sm",children:(0,i.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl border border-gray-200/50 p-4 backdrop-blur-sm",children:[(0,i.jsxs)("div",{className:"flex items-start space-x-3 mb-3",children:[(0,i.jsx)("div",{className:"flex-shrink-0",children:(0,i.jsx)("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:(0,i.jsx)(lr,{size:20,className:"text-blue-600"})})}),(0,i.jsxs)("div",{className:"flex-1",children:[(0,i.jsx)("h3",{className:"font-semibold text-gray-900 text-sm",children:"Notifications requises"}),(0,i.jsx)("p",{className:"text-xs text-gray-600 mt-1",children:"Activez les notifications pour recevoir les alertes importantes sur les nouveaut\xe9s et avantages"})]})]}),(0,i.jsx)("div",{className:"flex space-x-2",children:(0,i.jsx)("button",{onClick:async()=>{console.log("[PUSH PROMPT] D\xe9but de l'activation des notifications..."),n(!0);try{const e=await c();console.log("[PUSH PROMPT] R\xe9sultat de l'abonnement:",e),localStorage.setItem("notification-prompt-seen","true"),localStorage.setItem("notification-prompt-last-seen",Date.now().toString()),console.log("[PUSH PROMPT] Prompt marqu\xe9 comme vu dans localStorage"),e?(console.log("[PUSH PROMPT] Abonnement r\xe9ussi, fermeture du prompt"),localStorage.setItem("subscription-active","true"),localStorage.removeItem("subscription-inactive"),t(!1)):(console.log("[PUSH PROMPT] \xc9chec de l'abonnement, fermeture du prompt quand m\xeame"),t(!1))}catch(e){console.error("[PUSH PROMPT] Erreur lors de l'abonnement:",e),localStorage.setItem("notification-prompt-seen","true"),localStorage.setItem("notification-prompt-last-seen",Date.now().toString()),t(!1)}finally{n(!1)}},disabled:s,className:"w-full px-4 py-3 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 transition-colors duration-200 disabled:opacity-50 flex items-center justify-center space-x-2",children:s?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),(0,i.jsx)("span",{children:"Activation en cours..."})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(ht.A,{size:16}),(0,i.jsx)("span",{children:"Activer les notifications maintenant"})]})})}),(0,i.jsx)("div",{className:"mt-3 pt-3 border-t border-gray-100",children:(0,i.jsxs)("div",{className:"flex items-center space-x-2 text-xs text-gray-500",children:[(0,i.jsx)(pt,{size:12}),(0,i.jsx)("span",{children:"Les notifications sont essentielles pour votre exp\xe9rience utilisateur"})]})})]})})}):null},oh=(0,mt.A)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),lh=(0,mt.A)("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]),ch=(0,mt.A)("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),dh=(0,mt.A)("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",key:"3xmgem"}]]),uh=(0,mt.A)("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]),hh=()=>{const[e,t]=(0,r.useState)(null),[s,n]=(0,r.useState)(!1),[a,i]=(0,r.useState)(!1),[o,l]=(0,r.useState)(!1);(0,r.useEffect)(()=>{const e=localStorage.getItem("pwa-install-prompt-seen"),s=localStorage.getItem("pwa-install-prompt-dismissed");if("true"===localStorage.getItem("pwa-install-accepted"))return console.log("[PWA_INSTALL] App d\xe9j\xe0 accept\xe9e par l'utilisateur"),void i(!0);if("true"===e&&"true"===s)return void console.log("[PWA_INSTALL] Prompt d\xe9j\xe0 rejet\xe9 par l'utilisateur, pas d'affichage");if((window.matchMedia("(display-mode: standalone)").matches||!0===window.navigator.standalone)&&(i(!0),1))return void console.log("[PWA_INSTALL] App d\xe9j\xe0 install\xe9e");const r=e=>{console.log("[PWA_INSTALL] beforeinstallprompt d\xe9clench\xe9"),e.preventDefault();const s=localStorage.getItem("pwa-install-prompt-seen"),r=localStorage.getItem("pwa-install-prompt-dismissed");"true"===localStorage.getItem("pwa-install-accepted")||"true"===s&&"true"===r?console.log("[PWA_INSTALL] Prompt d\xe9j\xe0 g\xe9r\xe9 par l'utilisateur - pas d'affichage"):(t(e),n(!0),setTimeout(()=>{l(!0)},3e3))},a=()=>{console.log("[PWA_INSTALL] App install\xe9e avec succ\xe8s"),i(!0),n(!1),l(!1),t(null),localStorage.setItem("pwa-installed","true"),localStorage.setItem("pwa-install-date",Date.now().toString())};return window.addEventListener("beforeinstallprompt",r),window.addEventListener("appinstalled",a),()=>{window.removeEventListener("beforeinstallprompt",r),window.removeEventListener("appinstalled",a)}},[]);return{isInstallable:s,isInstalled:a,showInstallPrompt:o,canInstall:s&&!a&&null!==e,installApp:async()=>{if(!e)return console.log("[PWA_INSTALL] Pas de prompt d'installation disponible"),!1;try{console.log("[PWA_INSTALL] D\xe9clenchement de l'installation..."),e.prompt();const{outcome:s}=await e.userChoice;return console.log("[PWA_INSTALL] R\xe9sultat de l'installation:",s),"accepted"===s?(console.log("[PWA_INSTALL] \u2705 Installation accept\xe9e"),i(!0),l(!1),localStorage.setItem("pwa-install-accepted","true"),localStorage.setItem("pwa-install-date",Date.now().toString())):(console.log("[PWA_INSTALL] \u274c Installation refus\xe9e"),localStorage.setItem("pwa-install-declined","true"),localStorage.setItem("pwa-install-declined-date",Date.now().toString())),t(null),n(!1),"accepted"===s}catch(s){return console.error("[PWA_INSTALL] Erreur lors de l'installation:",s),!1}},dismissInstallPrompt:()=>{console.log("[PWA_INSTALL] Prompt d'installation ferm\xe9"),l(!1),localStorage.setItem("pwa-install-prompt-seen","true"),localStorage.setItem("pwa-install-prompt-dismissed","true"),console.log("[PWA_INSTALL] Prompt d'installation rejet\xe9 par l'utilisateur")}}},mh=()=>{const{showInstallPrompt:e,canInstall:t,installApp:s,dismissInstallPrompt:r}=hh();if(!e||!t)return null;return(0,i.jsx)(ah,{children:(0,i.jsx)(gu.div,{initial:{opacity:0,y:50,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:50,scale:.9},transition:{duration:.3,ease:"easeOut"},className:"fixed bottom-4 left-4 right-4 z-50 max-w-sm mx-auto",children:(0,i.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl border border-gray-200 overflow-hidden",children:[(0,i.jsx)("div",{className:"bg-gradient-to-r from-primary-500 to-secondary-500 p-4 text-white",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,i.jsx)("div",{className:"p-2 bg-white/20 rounded-lg",children:(0,i.jsx)(oh,{size:20})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{className:"font-bold text-lg",children:"Installer l'app"}),(0,i.jsx)("p",{className:"text-primary-100 text-sm",children:"Acc\xe8s rapide depuis votre \xe9cran d'accueil"})]})]}),(0,i.jsx)("button",{onClick:r,className:"p-1 hover:bg-white/20 rounded-lg transition-colors",children:(0,i.jsx)(xt,{size:20})})]})}),(0,i.jsxs)("div",{className:"p-4",children:[(0,i.jsxs)("div",{className:"space-y-3 mb-4",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,i.jsx)("div",{className:"p-2 bg-green-100 rounded-lg",children:(0,i.jsx)(lh,{size:16,className:"text-green-600"})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"font-medium text-gray-900 text-sm",children:"Acc\xe8s instantan\xe9"}),(0,i.jsx)("p",{className:"text-gray-500 text-xs",children:"Ouvrez l'app directement depuis votre \xe9cran d'accueil"})]})]}),(0,i.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,i.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,i.jsx)(ch,{size:16,className:"text-blue-600"})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"font-medium text-gray-900 text-sm",children:"Plus rapide"}),(0,i.jsx)("p",{className:"text-gray-500 text-xs",children:"Chargement plus rapide et navigation fluide"})]})]}),(0,i.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,i.jsx)("div",{className:"p-2 bg-purple-100 rounded-lg",children:(0,i.jsx)(dh,{size:16,className:"text-purple-600"})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"font-medium text-gray-900 text-sm",children:"S\xe9curis\xe9"}),(0,i.jsx)("p",{className:"text-gray-500 text-xs",children:"Vos donn\xe9es sont prot\xe9g\xe9es et synchronis\xe9es"})]})]})]}),(0,i.jsxs)("div",{className:"flex space-x-3",children:[(0,i.jsxs)("button",{onClick:async()=>{await s()&&console.log("[PWA_INSTALL_PROMPT] Installation r\xe9ussie")},className:"flex-1 bg-gradient-to-r from-primary-500 to-secondary-500 text-white font-semibold py-3 px-4 rounded-xl hover:from-primary-600 hover:to-secondary-600 transition-all duration-200 transform hover:scale-105 flex items-center justify-center space-x-2",children:[(0,i.jsx)(oh,{size:18}),(0,i.jsx)("span",{children:"Installer"})]}),(0,i.jsx)("button",{onClick:r,className:"px-4 py-3 text-gray-600 font-medium hover:bg-gray-100 rounded-xl transition-colors",children:"Plus tard"})]}),(0,i.jsx)("div",{className:"mt-3 p-3 bg-blue-50 rounded-lg",children:(0,i.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,i.jsx)(uh,{size:16,className:"text-blue-600 mt-0.5 flex-shrink-0"}),(0,i.jsxs)("p",{className:"text-blue-800 text-xs",children:[(0,i.jsx)("strong",{children:"Conseil :"})," Une fois install\xe9e, l'app appara\xeetra sur votre \xe9cran d'accueil comme une application native. Vous pourrez y acc\xe9der m\xeame sans connexion internet !"]})]})})]})]})})})},ph=(0,mt.A)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),fh=(0,mt.A)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),xh=(0,mt.A)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),gh=(0,mt.A)("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),vh=(0,mt.A)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),yh=(0,mt.A)("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]),bh=(0,mt.A)("KeyRound",[["path",{d:"M2 18v3c0 .6.4 1 1 1h4v-3h3v-3h2l1.4-1.4a6.5 6.5 0 1 0-4-4Z",key:"167ctg"}],["circle",{cx:"16.5",cy:"7.5",r:".5",key:"1kog09"}]]),jh=(0,mt.A)("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),wh=()=>{const[e,t]=(0,r.useState)({identifier:"",password:""}),[s,n]=(0,r.useState)(!1),[a,o]=(0,r.useState)(!1),[l,d]=(0,r.useState)(""),{signIn:u,signInWithPhoneNumber:h}=dt(),m=(0,We.Zp)(),p=e=>{const t=e.replace(/[^0-9]/g,"");return t.length>=8&&t.length<=15},f=s=>{t((0,c.A)((0,c.A)({},e),{},{[s.target.name]:s.target.value})),d("")};return(0,i.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-yellow-50 to-slate-100 flex items-center justify-center p-4",children:(0,i.jsxs)("div",{className:"w-full max-w-md",children:[(0,i.jsxs)("div",{className:"bg-white rounded-3xl shadow-2xl border border-gray-100 overflow-hidden",children:[(0,i.jsxs)("div",{className:"bg-gradient-to-r from-slate-700 to-slate-800 p-8 text-center",children:[(0,i.jsx)("div",{className:"w-24 h-24 bg-white rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg p-2",children:(0,i.jsx)("img",{src:"/logo-campus-finance.png",alt:"AB Campus Finance",className:"w-full h-full object-contain"})}),(0,i.jsx)("h1",{className:"text-3xl font-bold text-white font-montserrat mb-2",children:"Bienvenue"}),(0,i.jsx)("p",{className:"text-slate-300 font-montserrat",children:"Connectez-vous \xe0 votre compte"})]}),(0,i.jsx)("div",{className:"p-8",children:(0,i.jsxs)("form",{onSubmit:async t=>{t.preventDefault(),o(!0),d("");try{const t=e.identifier.trim(),s=p(t);let r;console.log("[LOGIN] Tentative de connexion avec:",{identifier:t,type:s?"t\xe9l\xe9phone":"email"}),r=s?await h(t,e.password):await u(t,e.password),console.log("[LOGIN] R\xe9sultat:",r),r.success?r.user&&"admin"===r.user.role?m("/admin"):m("/dashboard"):d(r.error||"Identifiants incorrects")}catch(s){console.error("[LOGIN] Erreur:",s),d("Erreur de connexion")}finally{o(!1)}},className:"space-y-6",children:[l&&(0,i.jsx)("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 rounded-lg",children:(0,i.jsx)("p",{className:"text-sm text-red-700 font-medium",children:l})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email ou T\xe9l\xe9phone"}),(0,i.jsxs)("div",{className:"relative",children:[p(e.identifier)?(0,i.jsx)(ph,{size:18,className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400"}):(0,i.jsx)(fh,{size:18,className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,i.jsx)("input",{type:"text",name:"identifier",value:e.identifier,onChange:f,placeholder:"Entrez votre email ou t\xe9l\xe9phone",required:!0,className:"w-full pl-12 pr-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-yellow-500 focus:border-transparent transition-all"})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Mot de passe"}),(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsx)(xh,{size:18,className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,i.jsx)("input",{type:s?"text":"password",name:"password",value:e.password,onChange:f,placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",required:!0,className:"w-full pl-12 pr-12 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-yellow-500 focus:border-transparent transition-all"}),(0,i.jsx)("button",{type:"button",onClick:()=>n(!s),className:"absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors",children:s?(0,i.jsx)(gh,{size:18}):(0,i.jsx)(vh,{size:18})})]})]}),(0,i.jsxs)("button",{type:"submit",disabled:a,className:"w-full flex items-center justify-center gap-2 py-3 bg-gradient-to-r from-yellow-500 to-yellow-600 hover:from-yellow-600 hover:to-yellow-700 text-slate-900 rounded-xl font-bold transition-all duration-200 shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,i.jsx)(yh,{size:20}),(0,i.jsx)("span",{children:a?"Connexion en cours...":"Se connecter"})]}),(0,i.jsxs)("div",{className:"space-y-3",children:[(0,i.jsx)("div",{className:"text-center",children:(0,i.jsxs)(rt,{to:"/forgot-password",className:"inline-flex items-center gap-2 text-sm text-gray-600 hover:text-yellow-600 font-medium transition-colors",children:[(0,i.jsx)(bh,{size:16}),"Mot de passe oubli\xe9 ?"]})}),(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,i.jsx)("div",{className:"w-full border-t border-gray-200"})}),(0,i.jsx)("div",{className:"relative flex justify-center text-sm",children:(0,i.jsx)("span",{className:"px-4 bg-white text-gray-500",children:"ou"})})]}),(0,i.jsxs)(rt,{to:"/create-account",className:"w-full flex items-center justify-center gap-2 py-3 bg-slate-50 hover:bg-slate-100 text-slate-700 rounded-xl font-medium transition-all duration-200 border border-slate-200",children:[(0,i.jsx)(jh,{size:20}),(0,i.jsx)("span",{children:"Cr\xe9er un compte"})]})]})]})})]}),(0,i.jsxs)("div",{className:"text-center mt-6",children:[(0,i.jsx)("p",{className:"text-sm text-gray-600",children:"\xa9 2025 AB Campus Finance. Tous droits r\xe9serv\xe9s."}),(0,i.jsx)("p",{className:"text-sm text-primary-600 font-semibold mt-1",children:"Made in B\xe9nin \ud83c\udde7\ud83c\uddef"})]})]})})},Nh=["children","variant","size","disabled","loading","onClick","type","className"],Sh=e=>{let{children:t,variant:s="primary",size:r="md",disabled:n=!1,loading:a=!1,onClick:o,type:l="button",className:d=""}=e,u=(0,ua.A)(e,Nh);const h="".concat("font-medium rounded-xl transition-colors duration-200 flex items-center justify-center font-montserrat"," ").concat({primary:"bg-primary-500 text-white hover:bg-primary-600 disabled:bg-primary-300",secondary:"bg-secondary-900 text-white hover:bg-secondary-800 disabled:bg-secondary-300",outline:"border-2 border-primary-500 text-primary-600 hover:bg-primary-50 disabled:border-primary-300",danger:"bg-red-600 text-white hover:bg-red-700 disabled:bg-red-300",accent:"bg-accent-400 text-secondary-900 hover:bg-accent-500 disabled:bg-accent-300"}[s]," ").concat({sm:"px-3 py-2 text-sm",md:"px-6 py-3 text-base",lg:"px-8 py-4 text-lg"}[r]," ").concat(d);return(0,i.jsxs)("button",(0,c.A)((0,c.A)({type:l,disabled:n||a,onClick:o,className:h},u),{},{children:[a&&(0,i.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",fill:"none",viewBox:"0 0 24 24",children:[(0,i.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,i.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),t]}))},kh=["label","type","placeholder","value","onChange","error","required","disabled","className","children"],Ah=e=>{let{label:t,type:s="text",placeholder:r,value:n,onChange:a,error:o,required:l=!1,disabled:d=!1,className:u="",children:h}=e,m=(0,ua.A)(e,kh);const p="\n    w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-colors duration-200 font-montserrat\n    ".concat(o?"border-red-500":"border-accent-300","\n    ").concat(d?"bg-accent-100 cursor-not-allowed":"bg-white","\n    ").concat(u,"\n  ");return(0,i.jsxs)("div",{className:"mb-4",children:[t&&(0,i.jsxs)("label",{className:"block text-sm font-medium text-secondary-900 mb-2 font-montserrat",children:[t,l&&(0,i.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]}),(()=>{switch(s){case"select":return(0,i.jsx)("select",(0,c.A)((0,c.A)({value:n,onChange:a,disabled:d,className:p},m),{},{children:h}));case"textarea":return(0,i.jsx)("textarea",(0,c.A)({placeholder:r,value:n,onChange:a,disabled:d,className:"".concat(p," resize-vertical min-h-[100px]")},m));default:return(0,i.jsx)("input",(0,c.A)({type:s,placeholder:r,value:n,onChange:a,disabled:d,className:p},m))}})(),o&&(0,i.jsx)("p",{className:"mt-1 text-sm text-red-500 font-montserrat",children:o})]})},_h=["as","className","color","speed","thickness","children"],Eh=e=>{let{as:t="button",className:s="",color:r="white",speed:n="6s",thickness:a=1,children:o}=e,l=(0,ua.A)(e,_h);return(0,i.jsxs)(t,(0,c.A)((0,c.A)({className:"star-border-container ".concat(s),style:(0,c.A)({padding:"".concat(a,"px 0")},l.style)},l),{},{children:[(0,i.jsx)("div",{className:"border-gradient-bottom",style:{background:"radial-gradient(circle, ".concat(r,", transparent 10%)"),animationDuration:n}}),(0,i.jsx)("div",{className:"border-gradient-top",style:{background:"radial-gradient(circle, ".concat(r,", transparent 10%)"),animationDuration:n}}),(0,i.jsx)("div",{className:"inner-content",children:o})]}))},Ch=(0,mt.A)("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),Ph=(0,mt.A)("GraduationCap",[["path",{d:"M22 10v6M2 10l10-5 10 5-10 5z",key:"1ef52a"}],["path",{d:"M6 12v5c3 3 9 3 12 0v-5",key:"1f75yj"}]]),Th=(0,mt.A)("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]),Ih=(0,mt.A)("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);var Rh=s(7607);const Oh=async function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"user";const r=Date.now(),n="".concat(s,"_identity_").concat(t,"_").concat(r,".").concat(e.name.split(".").pop()),a="identity-cards/".concat(t,"/").concat(n);return await(async(e,t,s)=>{try{console.log("[UPLOAD] D\xe9but upload:",{fileName:e.name,bucket:t,path:s});const r=5242880;if(e.size>r)throw new Error("Le fichier est trop volumineux (max 5MB)");if(!["image/jpeg","image/png","image/jpg"].includes(e.type))throw new Error("Type de fichier non autoris\xe9 (JPG, PNG uniquement)");const{error:n}=await ot.ND.storage.from(t).upload(s,e,{cacheControl:"3600",upsert:!1});if(n)throw console.error("[UPLOAD] Erreur upload:",n),n;const{data:a}=ot.ND.storage.from(t).getPublicUrl(s);return console.log("[UPLOAD] \u2705 Upload r\xe9ussi:",a.publicUrl),{success:!0,url:a.publicUrl,path:s}}catch(r){return console.error("[UPLOAD] \u274c Erreur upload:",r.message),{success:!1,error:r.message}}})(e,"documents",a)},Dh=()=>{const e=(0,We.Zp)(),t=(0,We.zy)(),{basicInfo:s,fromCreateAccount:n}=t.state||{};console.log("[REGISTER] Donn\xe9es re\xe7ues:",{basicInfo:s,fromCreateAccount:n}),console.log("[REGISTER] Location state:",t.state),console.log("[REGISTER] basicInfo.firstName:",null===s||void 0===s?void 0:s.firstName),console.log("[REGISTER] basicInfo.lastName:",null===s||void 0===s?void 0:s.lastName),console.log("[REGISTER] basicInfo.phoneNumber:",null===s||void 0===s?void 0:s.phoneNumber);const[a,o]=(0,r.useState)(5),[l,d]=(0,r.useState)({firstName:"",lastName:"",email:"",phone:"",password:"",confirmPassword:"",address:"",facebookName:"",filiere:"",anneeEtude:"",entite:"",userIdentityCard:null,temoinIdentityCard:null,studentCard:null,temoinName:"",temoinQuartier:"",temoinPhone:"",temoinEmail:"",emergencyName:"",emergencyRelation:"",emergencyPhone:"",emergencyEmail:"",emergencyAddress:""}),[u,h]=(0,r.useState)(!1),[m,p]=(0,r.useState)(!1),[f,x]=(0,r.useState)({}),{showSuccess:g,showError:v}=yt();(0,r.useEffect)(()=>{s&&n&&(console.log("[REGISTER] Pr\xe9-remplissage du formulaire avec:",s),d(e=>(0,c.A)((0,c.A)({},e),{},{firstName:s.firstName||"",lastName:s.lastName||"",email:s.email||"",phone:s.phoneNumber||"",password:s.password||"",confirmPassword:s.confirmPassword||"",address:s.address||"",facebookName:s.facebookName||""})))},[s,n]);const y=[{id:5,title:"Informations personnelles",icon:cr},{id:6,title:"Informations du t\xe9moin",icon:dh},{id:7,title:"Contact d'urgence",icon:ph},{id:8,title:"Validation",icon:ht.A}],b=e=>{d((0,c.A)((0,c.A)({},l),{},{[e.target.name]:e.target.value})),f[e.target.name]&&x((0,c.A)((0,c.A)({},f),{},{[e.target.name]:""}))},j=(e,t)=>{const s=e.target.files[0];s&&d((0,c.A)((0,c.A)({},l),{},{[t]:s}))},w=()=>{const e={};switch(a){case 5:l.firstName.trim()||(e.firstName="Le pr\xe9nom est requis"),l.lastName.trim()||(e.lastName="Le nom est requis"),l.address.trim()||(e.address="L'adresse est requise"),l.facebookName.trim()||(e.facebookName="Le nom du profil Facebook est requis"),l.filiere.trim()||(e.filiere="La fili\xe8re est requise"),l.anneeEtude.trim()||(e.anneeEtude="L'ann\xe9e d'\xe9tude est requise"),l.entite.trim()||(e.entite="L'entit\xe9 est requise"),l.email.trim()||(e.email="L'adresse email est requise"),l.email&&!(0,Tu.DT)(l.email)&&(e.email="Email invalide"),(0,Tu.FY)(l.phone)||(e.phone="Num\xe9ro de t\xe9l\xe9phone invalide"),l.password.length<6&&(e.password="Le mot de passe doit contenir au moins 6 caract\xe8res"),l.password!==l.confirmPassword&&(e.confirmPassword="Les mots de passe ne correspondent pas"),l.userIdentityCard||(e.userIdentityCard="La photo de votre carte d'identit\xe9 est requise"),l.studentCard||(e.studentCard="La photo de votre carte d'\xe9tudiant est requise");break;case 6:l.temoinName.trim()||(e.temoinName="Le nom du t\xe9moin est requis"),l.temoinQuartier.trim()||(e.temoinQuartier="Le quartier du t\xe9moin est requis"),(0,Tu.FY)(l.temoinPhone)||(e.temoinPhone="Num\xe9ro de t\xe9l\xe9phone invalide"),(0,Tu.DT)(l.temoinEmail)||(e.temoinEmail="Email invalide"),l.temoinIdentityCard||(e.temoinIdentityCard="La photo de la carte d'identit\xe9 du t\xe9moin est requise");break;case 7:l.emergencyName.trim()||(e.emergencyName="Le nom du contact d'urgence est requis"),l.emergencyRelation.trim()||(e.emergencyRelation="La relation est requise"),(0,Tu.FY)(l.emergencyPhone)||(e.emergencyPhone="Num\xe9ro de t\xe9l\xe9phone invalide"),(0,Tu.DT)(l.emergencyEmail)||(e.emergencyEmail="Email invalide"),l.emergencyAddress.trim()||(e.emergencyAddress="L'adresse est requise")}return x(e),0===Object.keys(e).length},N=()=>{a>5&&o(a-1)};return(0,i.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8 relative overflow-hidden",children:[(0,i.jsxs)("div",{className:"absolute inset-0 overflow-hidden",children:[(0,i.jsx)("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-gradient-to-br from-primary-400/20 to-secondary-400/20 rounded-full blur-3xl"}),(0,i.jsx)("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-gradient-to-tr from-accent-400/20 to-primary-400/20 rounded-full blur-3xl"})]}),(0,i.jsxs)("div",{className:"max-w-4xl w-full space-y-8 relative z-10",children:[(0,i.jsxs)("div",{className:"text-center mb-8 animate-fade-in-up",children:[(0,i.jsx)("div",{className:"flex justify-center mb-6",children:(0,i.jsx)("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-soft",children:(0,i.jsx)(yu,{size:"xl",showText:!0})})}),(0,i.jsx)("h1",{className:"text-4xl font-bold text-secondary-900 font-montserrat mb-3 bg-gradient-to-r from-primary-600 to-secondary-600 bg-clip-text text-transparent",children:"Cr\xe9er votre compte \xe9tudiant"}),(0,i.jsx)("p",{className:"text-lg text-neutral-600 font-montserrat max-w-2xl mx-auto",children:"Rejoignez la communaut\xe9 AB CAMPUS FINANCE et acc\xe9dez \xe0 nos services de pr\xeat \xe9tudiant"})]}),(0,i.jsx)("div",{className:"flex justify-center mb-8",children:(0,i.jsx)("div",{className:"flex items-center space-x-4 bg-white/80 backdrop-blur-sm rounded-2xl p-4 shadow-soft",children:y.map((e,t)=>(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("div",{className:"flex items-center justify-center w-10 h-10 rounded-full border-2 transition-all duration-300 ".concat(a>=e.id?"bg-primary-500 border-primary-500 text-white":"bg-white border-accent-300 text-neutral-400"),children:a>e.id?(0,i.jsx)(ht.A,{size:20,className:"text-white"}):(0,i.jsx)(e.icon,{size:20})}),t<y.length-1&&(0,i.jsx)("div",{className:"w-8 h-0.5 mx-2 transition-all duration-300 ".concat(a>e.id?"bg-primary-500":"bg-accent-300")})]},e.id))})}),(0,i.jsxs)("div",{className:"bg-white/90 backdrop-blur-sm rounded-3xl shadow-2xl border border-white/20 p-8 lg:p-12",children:[(0,i.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),w()){p(!0);try{var s,r,n,a;console.log("[REGISTER] Donn\xe9es pour inscription:",{phone:l.phone,firstName:l.firstName,lastName:l.lastName,email:l.email,address:l.address,facebookName:l.facebookName,filiere:l.filiere,anneeEtude:l.anneeEtude,entite:l.entite});const t=await(0,lt.dl)(l.phone,l.password,{firstName:l.firstName,lastName:l.lastName,email:l.email});if(console.log("[REGISTER] R\xe9sultat signUp:",t),!t.success||null===(s=t.user)||void 0===s||!s.id)throw console.error("[REGISTER] Erreur signUp:",t.error),new Error(t.error||"Cr\xe9ation du compte \xe9chou\xe9e");let i=null,o=null,c=null;if(l.userIdentityCard){console.log("[REGISTER] Upload carte d'identit\xe9 utilisateur...");const e=await Oh(l.userIdentityCard,t.user.id,"user");e.success?(i=e.url,console.log("[REGISTER] \u2705 Carte d'identit\xe9 utilisateur upload\xe9e")):console.error("[REGISTER] \u274c Erreur upload carte d'identit\xe9 utilisateur:",e.error)}if(l.temoinIdentityCard){console.log("[REGISTER] Upload carte d'identit\xe9 t\xe9moin...");const e=await Oh(l.temoinIdentityCard,t.user.id,"temoin");e.success?(o=e.url,console.log("[REGISTER] \u2705 Carte d'identit\xe9 t\xe9moin upload\xe9e")):console.error("[REGISTER] \u274c Erreur upload carte d'identit\xe9 t\xe9moin:",e.error)}if(l.studentCard){console.log("[REGISTER] Upload carte d'\xe9tudiant...");const e=await Oh(l.studentCard,t.user.id,"student");e.success?(c=e.url,console.log("[REGISTER] \u2705 Carte d'\xe9tudiant upload\xe9e")):console.error("[REGISTER] \u274c Erreur upload carte d'\xe9tudiant:",e.error)}console.log("[REGISTER] Mise \xe0 jour du profil avec les donn\xe9es:",{address:l.address,filiere:l.filiere,annee_etude:l.anneeEtude,entite:l.entite,facebook_name:l.facebookName});const d=await(0,lt.eg)(t.user.id,{address:l.address,filiere:l.filiere,annee_etude:l.anneeEtude,entite:l.entite,facebook_name:l.facebookName,temoin_name:l.temoinName,temoin_quartier:l.temoinQuartier,temoin_phone:l.temoinPhone,temoin_email:l.temoinEmail,emergency_name:l.emergencyName,emergency_relation:l.emergencyRelation,emergency_phone:l.emergencyPhone,emergency_email:l.emergencyEmail,emergency_address:l.emergencyAddress,user_identity_card_url:i,temoin_identity_card_url:o,student_card_url:c,user_identity_card_name:(null===(r=l.userIdentityCard)||void 0===r?void 0:r.name)||null,temoin_identity_card_name:(null===(n=l.temoinIdentityCard)||void 0===n?void 0:n.name)||null,student_card_name:(null===(a=l.studentCard)||void 0===a?void 0:a.name)||null});if(console.log("[REGISTER] R\xe9sultat mise \xe0 jour profil:",d),!d.success)throw console.error("[REGISTER] Erreur mise \xe0 jour profil:",d.error),new Error("Erreur mise \xe0 jour profil: ".concat(d.error));g("Inscription compl\xe9t\xe9e ! Votre compte a \xe9t\xe9 cr\xe9\xe9 avec succ\xe8s."),e("/dashboard")}catch(i){console.error("[REGISTER] Erreur d\xe9taill\xe9e lors de l'inscription:",{message:i.message,stack:i.stack,error:i}),x({general:"Erreur lors de l'inscription: ".concat(i.message)}),v("Inscription \xe9chou\xe9e","Une erreur est survenue: ".concat(i.message))}finally{p(!1)}}},className:"space-y-8",children:[f.general&&(0,i.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-6 py-4 rounded-2xl font-montserrat animate-fade-in-up",children:f.general}),(()=>{switch(a){case 5:return(0,i.jsxs)("div",{className:"space-y-6 animate-fade-in-up",children:[n&&(0,i.jsx)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-6",children:(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)(ht.A,{size:20,className:"text-green-600 mr-3"}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h4",{className:"text-sm font-medium text-green-800",children:"Informations pr\xe9-remplies"}),(0,i.jsx)("p",{className:"text-sm text-green-700 mt-1",children:"Vos informations de base ont \xe9t\xe9 automatiquement remplies depuis la cr\xe9ation de votre compte."})]})]})}),(0,i.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[(0,i.jsx)("div",{className:"w-10 h-10 bg-primary-100 rounded-xl flex items-center justify-center",children:(0,i.jsx)(cr,{size:20,className:"text-primary-600"})}),(0,i.jsx)("h3",{className:"text-xl font-semibold text-secondary-900 font-montserrat",children:"Informations personnelles"})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,i.jsx)("div",{className:"relative group",children:(0,i.jsx)(Ah,{label:"Pr\xe9nom",type:"text",name:"firstName",value:l.firstName,onChange:b,placeholder:"Votre pr\xe9nom",error:f.firstName,required:!0,readOnly:n,className:"group-hover:shadow-md transition-all duration-300 ".concat(n?"bg-gray-50 cursor-not-allowed":"")})}),(0,i.jsx)("div",{className:"relative group",children:(0,i.jsx)(Ah,{label:"Nom",type:"text",name:"lastName",value:l.lastName,onChange:b,placeholder:"Votre nom",error:f.lastName,required:!0,readOnly:n,className:"group-hover:shadow-md transition-all duration-300 ".concat(n?"bg-gray-50 cursor-not-allowed":"")})})]}),(0,i.jsx)("div",{className:"relative group",children:(0,i.jsx)(Ah,{label:"Nom du profil Facebook",type:"text",name:"facebookName",value:l.facebookName,onChange:b,placeholder:"Votre nom de profil Facebook",error:f.facebookName,required:!0,readOnly:n,className:"group-hover:shadow-md transition-all duration-300 ".concat(n?"bg-gray-50 cursor-not-allowed":"")})}),(0,i.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:(0,i.jsxs)("div",{className:"relative group",children:[(0,i.jsx)(Ah,{label:"Adresse",type:"text",name:"address",value:l.address,onChange:b,placeholder:"Votre adresse compl\xe8te",error:f.address,required:!0,readOnly:n,className:"group-hover:shadow-md transition-all duration-300 ".concat(n?"bg-gray-50 cursor-not-allowed":"")}),(0,i.jsx)(Ch,{size:20,className:"absolute right-4 top-12 text-neutral-400 group-hover:text-primary-500 transition-colors duration-300"})]})}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,i.jsxs)("div",{className:"relative group",children:[(0,i.jsx)(Ah,{label:"Fili\xe8re",type:"text",name:"filiere",value:l.filiere,onChange:b,placeholder:"Ex: Informatique",error:f.filiere,required:!0,className:"group-hover:shadow-md transition-all duration-300"}),(0,i.jsx)(Ph,{size:20,className:"absolute right-4 top-12 text-neutral-400 group-hover:text-primary-500 transition-colors duration-300"})]}),(0,i.jsx)("div",{className:"relative group",children:(0,i.jsx)(Ah,{label:"Ann\xe9e d'\xe9tude",type:"text",name:"anneeEtude",value:l.anneeEtude,onChange:b,placeholder:"Ex: 2\xe8me ann\xe9e",error:f.anneeEtude,required:!0,className:"group-hover:shadow-md transition-all duration-300"})}),(0,i.jsxs)("div",{className:"relative group",children:[(0,i.jsxs)("select",{name:"entite",value:l.entite,onChange:b,className:"w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-transparent font-montserrat transition-all duration-300 group-hover:shadow-md ".concat(f.entite?"border-red-300":"border-accent-200"),required:!0,children:[(0,i.jsx)("option",{value:"",children:"S\xe9lectionner une entit\xe9"}),(0,i.jsx)("option",{value:"INSTI",children:"INSTI"}),(0,i.jsx)("option",{value:"ENSET",children:"ENSET"})]}),(0,i.jsx)(Th,{size:20,className:"absolute right-4 top-12 text-neutral-400 group-hover:text-primary-500 transition-colors duration-300"}),f.entite&&(0,i.jsx)("p",{className:"text-red-500 text-sm mt-1 font-montserrat",children:f.entite})]})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,i.jsxs)("div",{className:"relative group",children:[(0,i.jsx)(Ah,{label:"Adresse email (optionnel)",type:"email",name:"email",value:l.email,onChange:b,placeholder:"votre@email.com (optionnel)",error:f.email,className:"group-hover:shadow-md transition-all duration-300"}),(0,i.jsx)(fh,{size:20,className:"absolute right-4 top-12 text-neutral-400 group-hover:text-primary-500 transition-colors duration-300"})]}),(0,i.jsxs)("div",{className:"relative group",children:[(0,i.jsx)(Ah,{label:"Num\xe9ro de t\xe9l\xe9phone",type:"tel",name:"phone",value:l.phone,onChange:b,placeholder:"+229 12345678",error:f.phone,required:!0,className:"group-hover:shadow-md transition-all duration-300"}),(0,i.jsx)(ph,{size:20,className:"absolute right-4 top-12 text-neutral-400 group-hover:text-primary-500 transition-colors duration-300"})]})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,i.jsxs)("div",{className:"relative group",children:[(0,i.jsx)(Ah,{label:"Mot de passe",type:u?"text":"password",name:"password",value:l.password,onChange:b,placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",error:f.password,required:!0,className:"group-hover:shadow-md transition-all duration-300"}),(0,i.jsx)("button",{type:"button",onClick:()=>h(!u),className:"absolute right-4 top-12 text-neutral-400 hover:text-primary-500 transition-colors duration-300",children:u?(0,i.jsx)(gh,{size:20}):(0,i.jsx)(vh,{size:20})})]}),(0,i.jsxs)("div",{className:"relative group",children:[(0,i.jsx)(Ah,{label:"Confirmer le mot de passe",type:"password",name:"confirmPassword",value:l.confirmPassword,onChange:b,placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",error:f.confirmPassword,required:!0,className:"group-hover:shadow-md transition-all duration-300"}),(0,i.jsx)(xh,{size:20,className:"absolute right-4 top-12 text-neutral-400 group-hover:text-primary-500 transition-colors duration-300"})]})]}),(0,i.jsxs)("div",{className:"group",children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-secondary-900 font-montserrat mb-3",children:"Photo de votre carte d'identit\xe9 *"}),(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsx)("input",{type:"file",accept:"image/*",onChange:e=>j(e,"userIdentityCard"),className:"hidden",id:"userIdentityCard",required:!0}),(0,i.jsx)("label",{htmlFor:"userIdentityCard",className:"flex items-center justify-center w-full px-6 py-8 border-2 border-dashed border-accent-300 rounded-2xl cursor-pointer hover:border-primary-500 hover:bg-primary-50/50 transition-all duration-300 group-hover:shadow-md",children:(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)(Ih,{size:32,className:"text-neutral-400 group-hover:text-primary-500 transition-colors duration-300 mx-auto mb-2"}),(0,i.jsx)("span",{className:"text-neutral-600 font-montserrat block",children:l.userIdentityCard?l.userIdentityCard.name:"Choisir une photo"}),(0,i.jsx)("span",{className:"text-sm text-neutral-400 font-montserrat",children:l.userIdentityCard?"Fichier s\xe9lectionn\xe9":"Cliquez pour s\xe9lectionner"})]})})]}),f.userIdentityCard&&(0,i.jsx)("p",{className:"text-red-500 text-sm mt-2 font-montserrat",children:f.userIdentityCard})]}),(0,i.jsxs)("div",{className:"group",children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-secondary-900 font-montserrat mb-3",children:"Photo de votre carte d'\xe9tudiant *"}),(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsx)("input",{type:"file",accept:"image/*",onChange:e=>j(e,"studentCard"),className:"hidden",id:"studentCard",required:!0}),(0,i.jsx)("label",{htmlFor:"studentCard",className:"flex items-center justify-center w-full px-6 py-8 border-2 border-dashed border-accent-300 rounded-2xl cursor-pointer hover:border-primary-500 hover:bg-primary-50/50 transition-all duration-300 group-hover:shadow-md",children:(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)(Ih,{size:32,className:"text-neutral-400 group-hover:text-primary-500 transition-colors duration-300 mx-auto mb-2"}),(0,i.jsx)("span",{className:"text-neutral-600 font-montserrat block",children:l.studentCard?l.studentCard.name:"Choisir une photo"}),(0,i.jsx)("span",{className:"text-sm text-neutral-400 font-montserrat",children:l.studentCard?"Fichier s\xe9lectionn\xe9":"Cliquez pour s\xe9lectionner"})]})})]}),f.studentCard&&(0,i.jsx)("p",{className:"text-red-500 text-sm mt-2 font-montserrat",children:f.studentCard})]})]});case 6:return(0,i.jsxs)("div",{className:"space-y-6 animate-fade-in-up",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[(0,i.jsx)("div",{className:"w-10 h-10 bg-secondary-100 rounded-xl flex items-center justify-center",children:(0,i.jsx)(dh,{size:20,className:"text-secondary-600"})}),(0,i.jsx)("h3",{className:"text-xl font-semibold text-secondary-900 font-montserrat",children:"Informations du t\xe9moin"})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,i.jsx)("div",{className:"relative group",children:(0,i.jsx)(Ah,{label:"Nom complet du t\xe9moin",type:"text",name:"temoinName",value:l.temoinName,onChange:b,placeholder:"Nom et pr\xe9nom du t\xe9moin",error:f.temoinName,required:!0,className:"group-hover:shadow-md transition-all duration-300"})}),(0,i.jsx)("div",{className:"relative group",children:(0,i.jsx)(Ah,{label:"Quartier du t\xe9moin",type:"text",name:"temoinQuartier",value:l.temoinQuartier,onChange:b,placeholder:"Ex: Akpakpa, Cotonou",error:f.temoinQuartier,required:!0,className:"group-hover:shadow-md transition-all duration-300"})})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,i.jsxs)("div",{className:"relative group",children:[(0,i.jsx)(Ah,{label:"T\xe9l\xe9phone du t\xe9moin",type:"tel",name:"temoinPhone",value:l.temoinPhone,onChange:b,placeholder:"+229 12345678",error:f.temoinPhone,required:!0,className:"group-hover:shadow-md transition-all duration-300"}),(0,i.jsx)(ph,{size:20,className:"absolute right-4 top-12 text-neutral-400 group-hover:text-primary-500 transition-colors duration-300"})]}),(0,i.jsxs)("div",{className:"relative group",children:[(0,i.jsx)(Ah,{label:"Email du t\xe9moin",type:"email",name:"temoinEmail",value:l.temoinEmail,onChange:b,placeholder:"temoins@email.com",error:f.temoinEmail,required:!0,className:"group-hover:shadow-md transition-all duration-300"}),(0,i.jsx)(fh,{size:20,className:"absolute right-4 top-12 text-neutral-400 group-hover:text-primary-500 transition-colors duration-300"})]})]}),(0,i.jsxs)("div",{className:"group",children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-secondary-900 font-montserrat mb-3",children:"Photo de la carte d'identit\xe9 du t\xe9moin *"}),(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsx)("input",{type:"file",accept:"image/*",onChange:e=>j(e,"temoinIdentityCard"),className:"hidden",id:"temoinIdentityCard",required:!0}),(0,i.jsx)("label",{htmlFor:"temoinIdentityCard",className:"flex items-center justify-center w-full px-6 py-8 border-2 border-dashed border-accent-300 rounded-2xl cursor-pointer hover:border-primary-500 hover:bg-primary-50/50 transition-all duration-300 group-hover:shadow-md",children:(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)(Ih,{size:32,className:"text-neutral-400 group-hover:text-primary-500 transition-colors duration-300 mx-auto mb-2"}),(0,i.jsx)("span",{className:"text-neutral-600 font-montserrat block",children:l.temoinIdentityCard?l.temoinIdentityCard.name:"Choisir une photo"}),(0,i.jsx)("span",{className:"text-sm text-neutral-400 font-montserrat",children:l.temoinIdentityCard?"Fichier s\xe9lectionn\xe9":"Cliquez pour s\xe9lectionner"})]})})]}),f.temoinIdentityCard&&(0,i.jsx)("p",{className:"text-red-500 text-sm mt-2 font-montserrat",children:f.temoinIdentityCard})]})]});case 7:return(0,i.jsxs)("div",{className:"space-y-6 animate-fade-in-up",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[(0,i.jsx)("div",{className:"w-10 h-10 bg-accent-100 rounded-xl flex items-center justify-center",children:(0,i.jsx)(ph,{size:20,className:"text-accent-600"})}),(0,i.jsx)("h3",{className:"text-xl font-semibold text-secondary-900 font-montserrat",children:"Contact d'urgence"})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,i.jsx)("div",{className:"relative group",children:(0,i.jsx)(Ah,{label:"Nom complet du contact",type:"text",name:"emergencyName",value:l.emergencyName,onChange:b,placeholder:"Nom et pr\xe9nom",error:f.emergencyName,required:!0,className:"group-hover:shadow-md transition-all duration-300"})}),(0,i.jsx)("div",{className:"relative group",children:(0,i.jsx)(Ah,{label:"Relation avec vous",type:"text",name:"emergencyRelation",value:l.emergencyRelation,onChange:b,placeholder:"Ex: Parent, Fr\xe8re, S\u0153ur",error:f.emergencyRelation,required:!0,className:"group-hover:shadow-md transition-all duration-300"})})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,i.jsxs)("div",{className:"relative group",children:[(0,i.jsx)(Ah,{label:"T\xe9l\xe9phone d'urgence",type:"tel",name:"emergencyPhone",value:l.emergencyPhone,onChange:b,placeholder:"+229 12345678",error:f.emergencyPhone,required:!0,className:"group-hover:shadow-md transition-all duration-300"}),(0,i.jsx)(ph,{size:20,className:"absolute right-4 top-12 text-neutral-400 group-hover:text-primary-500 transition-colors duration-300"})]}),(0,i.jsxs)("div",{className:"relative group",children:[(0,i.jsx)(Ah,{label:"Email d'urgence",type:"email",name:"emergencyEmail",value:l.emergencyEmail,onChange:b,placeholder:"contact@email.com",error:f.emergencyEmail,required:!0,className:"group-hover:shadow-md transition-all duration-300"}),(0,i.jsx)(fh,{size:20,className:"absolute right-4 top-12 text-neutral-400 group-hover:text-primary-500 transition-colors duration-300"})]})]}),(0,i.jsx)("div",{className:"relative group",children:(0,i.jsx)(Ah,{label:"Adresse compl\xe8te",type:"textarea",name:"emergencyAddress",value:l.emergencyAddress,onChange:b,placeholder:"Adresse compl\xe8te du contact d'urgence",error:f.emergencyAddress,required:!0,className:"group-hover:shadow-md transition-all duration-300"})})]});case 8:return(0,i.jsxs)("div",{className:"space-y-6 animate-fade-in-up",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[(0,i.jsx)("div",{className:"w-10 h-10 bg-green-100 rounded-xl flex items-center justify-center",children:(0,i.jsx)(ht.A,{size:20,className:"text-green-600"})}),(0,i.jsx)("h3",{className:"text-xl font-semibold text-secondary-900 font-montserrat",children:"Validation et cr\xe9ation du compte"})]}),(0,i.jsxs)("div",{className:"bg-accent-50 rounded-2xl p-6 space-y-4",children:[(0,i.jsx)("h4",{className:"font-semibold text-secondary-900 font-montserrat",children:"R\xe9capitulatif de vos informations :"}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"font-medium text-secondary-900",children:"Informations personnelles :"}),(0,i.jsxs)("p",{className:"text-neutral-600",children:[l.firstName," ",l.lastName]}),(0,i.jsxs)("p",{className:"text-neutral-600",children:["Facebook: ",l.facebookName]}),(0,i.jsxs)("p",{className:"text-neutral-600",children:[l.filiere," - ",l.anneeEtude]}),(0,i.jsx)("p",{className:"text-neutral-600",children:l.entite})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"font-medium text-secondary-900",children:"Contact :"}),(0,i.jsx)("p",{className:"text-neutral-600",children:l.email}),(0,i.jsx)("p",{className:"text-neutral-600",children:l.phone})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"font-medium text-secondary-900",children:"T\xe9moin :"}),(0,i.jsx)("p",{className:"text-neutral-600",children:l.temoinName}),(0,i.jsx)("p",{className:"text-neutral-600",children:l.temoinQuartier})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"font-medium text-secondary-900",children:"Contact d'urgence :"}),(0,i.jsx)("p",{className:"text-neutral-600",children:l.emergencyName}),(0,i.jsx)("p",{className:"text-neutral-600",children:l.emergencyRelation})]})]})]}),(0,i.jsx)("div",{className:"bg-blue-50 rounded-2xl p-6",children:(0,i.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,i.jsx)("div",{className:"w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:(0,i.jsx)("span",{className:"text-white text-xs font-bold",children:"i"})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"font-medium text-blue-900 font-montserrat",children:"Important :"}),(0,i.jsx)("p",{className:"text-blue-700 text-sm font-montserrat",children:"Apr\xe8s la cr\xe9ation de votre compte, vous recevrez un code OTP par email pour finaliser l'inscription."})]})]})})]});default:return null}})(),(0,i.jsx)("div",{className:"flex justify-between pt-6",children:a<8?(0,i.jsxs)(i.Fragment,{children:[a>5&&(0,i.jsxs)(Sh,{type:"button",onClick:N,className:"flex items-center space-x-2 bg-neutral-100 hover:bg-neutral-200 text-neutral-700 font-montserrat px-6 py-3 rounded-xl transition-all duration-300",children:[(0,i.jsx)(Rh.A,{size:20}),(0,i.jsx)("span",{children:"Pr\xe9c\xe9dent"})]}),(0,i.jsx)("div",{className:"flex-1"}),(0,i.jsxs)(Sh,{type:"button",onClick:()=>{w()&&o(a+1)},className:"flex items-center space-x-2 bg-gradient-to-r from-primary-500 to-primary-600 hover:from-primary-600 hover:to-primary-700 text-white font-montserrat px-6 py-3 rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-[1.02]",children:[(0,i.jsx)("span",{children:"Suivant"}),(0,i.jsx)(ur,{size:20})]})]}):(0,i.jsxs)("div",{className:"flex items-center space-x-4 w-full",children:[(0,i.jsxs)(Sh,{type:"button",onClick:N,className:"flex items-center space-x-2 bg-neutral-100 hover:bg-neutral-200 text-neutral-700 font-montserrat px-6 py-3 rounded-xl transition-all duration-300 text-sm",children:[(0,i.jsx)(Rh.A,{size:18}),(0,i.jsx)("span",{children:"Pr\xe9c\xe9dent"})]}),(0,i.jsx)("div",{className:"flex-1"}),(0,i.jsx)(Eh,{color:"#FF6B35",speed:"2s",thickness:3,className:"w-auto",children:(0,i.jsx)(Sh,{type:"submit",loading:m,className:"bg-gradient-to-r from-primary-500 to-primary-600 hover:from-primary-600 hover:to-primary-700 text-white font-montserrat px-6 py-3 rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-[1.02] text-sm",children:m?"Cr\xe9ation...":"Cr\xe9er mon compte"})})]})})]}),(0,i.jsx)("div",{className:"mt-8 text-center pt-6 border-t border-accent-200",children:(0,i.jsxs)("p",{className:"text-neutral-600 font-montserrat",children:["D\xe9j\xe0 un compte ?"," ",(0,i.jsx)(rt,{to:"/login",className:"text-primary-600 hover:text-primary-700 font-semibold transition-colors duration-300",children:"Se connecter"})]})})]})]})]})},Lh=e=>{let t=e;if(!e.startsWith("+229")){const s=e.replace(/[\s\-()]/g,"");if(s.startsWith("0"))t="+229"+s.substring(1);else if(s.startsWith("229"))t="+"+s;else{if(8!==s.length)return{valid:!1,error:"Format de num\xe9ro invalide"};t="+229"+s}}return/^\+229[0-9]{8}$/.test(t)?{valid:!0,formattedNumber:t}:{valid:!1,error:"Num\xe9ro de t\xe9l\xe9phone b\xe9ninois invalide"}},zh=()=>{const e=(0,We.Zp)(),{showSuccess:t,showError:s}=yt(),[n,a]=(0,r.useState)(1),[o,l]=(0,r.useState)(!1),[d,u]=(0,r.useState)(!1),[h,m]=(0,r.useState)({}),[p,f]=(0,r.useState)({firstName:"",lastName:"",email:"",facebookName:"",phoneNumber:"",address:"",password:"",confirmPassword:""}),[x,g]=(0,r.useState)(!1),v=[{id:1,title:"Informations de base",icon:cr},{id:2,title:"Confirmation",icon:ht.A},{id:3,title:"Inscription compl\xe8te",icon:ph}],y=e=>{const{name:t,value:s}=e.target;f(e=>(0,c.A)((0,c.A)({},e),{},{[t]:s})),h[t]&&m(e=>(0,c.A)((0,c.A)({},e),{},{[t]:""}))};return(0,i.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-primary-50 via-accent-50 to-secondary-50 flex items-center justify-center p-4",children:(0,i.jsxs)("div",{className:"w-full max-w-md",children:[(0,i.jsx)("div",{className:"text-center mb-8",children:(0,i.jsx)(yu,{})}),(0,i.jsxs)("div",{className:"mb-8",children:[(0,i.jsx)("div",{className:"flex items-center justify-between mb-4",children:v.map((e,t)=>(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ".concat(n>=e.id?"bg-primary-500 text-white":"bg-gray-200 text-gray-600"),children:n>e.id?(0,i.jsx)(ht.A,{size:16}):e.id}),t<v.length-1&&(0,i.jsx)("div",{className:"flex-1 h-1 mx-2 ".concat(n>e.id?"bg-primary-500":"bg-gray-200")})]},e.id))}),(0,i.jsxs)("p",{className:"text-sm text-gray-600",children:["\xc9tape ",n," sur ",v.length," : ",v[n-1].title]})]}),(0,i.jsx)("div",{className:"bg-white rounded-2xl shadow-soft p-6 mb-6",children:(0,i.jsx)(ah,{mode:"wait",children:(()=>{switch(n){case 1:return(0,i.jsxs)(gu.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-6",children:[(0,i.jsxs)("div",{className:"text-center mb-8",children:[(0,i.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Cr\xe9er votre compte"}),(0,i.jsx)("p",{className:"text-gray-600",children:"Commen\xe7ons par vos informations de base"})]}),(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,i.jsx)(Ah,{label:"Pr\xe9nom",name:"firstName",value:p.firstName,onChange:y,error:h.firstName,icon:cr}),(0,i.jsx)(Ah,{label:"Nom",name:"lastName",value:p.lastName,onChange:y,error:h.lastName,icon:cr})]}),(0,i.jsx)(Ah,{label:"Adresse email",type:"email",name:"email",value:p.email,onChange:y,error:h.email,icon:fh,placeholder:"votre@email.com"}),(0,i.jsx)(Ah,{label:"Nom du profil Facebook",name:"facebookName",value:p.facebookName,onChange:y,error:h.facebookName,icon:cr,placeholder:"Votre nom de profil Facebook"}),(0,i.jsx)(Ah,{label:"Num\xe9ro de t\xe9l\xe9phone",type:"tel",name:"phoneNumber",value:p.phoneNumber,onChange:y,error:h.phoneNumber,icon:ph,placeholder:"Ex: 53448573"}),(0,i.jsx)(Ah,{label:"Adresse",name:"address",value:p.address,onChange:y,error:h.address,icon:Ch,placeholder:"Votre adresse compl\xe8te"}),(0,i.jsx)(Ah,{label:"Mot de passe",type:d?"text":"password",name:"password",value:p.password,onChange:y,error:h.password,icon:d?gh:vh,onIconClick:()=>u(!d)}),(0,i.jsx)(Ah,{label:"Confirmer le mot de passe",type:d?"text":"password",name:"confirmPassword",value:p.confirmPassword,onChange:y,error:h.confirmPassword,icon:d?gh:vh,onIconClick:()=>u(!d)})]})]});case 2:return(0,i.jsxs)(gu.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-6",children:[(0,i.jsxs)("div",{className:"text-center mb-8",children:[(0,i.jsx)("div",{className:"w-16 h-16 bg-primary-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,i.jsx)(ht.A,{size:24,className:"text-primary-600"})}),(0,i.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Confirmation"}),(0,i.jsx)("p",{className:"text-gray-600",children:"V\xe9rifiez vos informations avant de continuer"})]}),(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,i.jsx)("h3",{className:"font-semibold text-gray-900 mb-3",children:"Informations personnelles"}),(0,i.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,i.jsxs)("p",{children:[(0,i.jsx)("span",{className:"font-medium",children:"Nom complet:"})," ",p.firstName," ",p.lastName]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("span",{className:"font-medium",children:"Email:"})," ",p.email]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("span",{className:"font-medium",children:"Nom Facebook:"})," ",p.facebookName]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("span",{className:"font-medium",children:"T\xe9l\xe9phone:"})," ",p.phoneNumber]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("span",{className:"font-medium",children:"Adresse:"})," ",p.address]})]})]}),(0,i.jsx)("div",{className:"text-center",children:(0,i.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"En continuant, vous acceptez nos conditions d'utilisation et notre politique de confidentialit\xe9."})})]})]});case 3:return(0,i.jsxs)(gu.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"text-center space-y-6",children:[(0,i.jsx)(gu.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring",stiffness:200},className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto",children:(0,i.jsx)(ht.A,{size:32,className:"text-green-600"})}),(0,i.jsx)("div",{children:(0,i.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Compte cr\xe9\xe9 avec succ\xe8s !"})})]});default:return null}})()})}),(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[n>1&&(0,i.jsxs)(Sh,{onClick:()=>{n>1&&a(n-1)},variant:"outline",className:"flex items-center space-x-2",children:[(0,i.jsx)(Rh.A,{size:16}),(0,i.jsx)("span",{children:"Pr\xe9c\xe9dent"})]}),n<=v.length&&(0,i.jsxs)(Sh,{onClick:()=>{1===n?(()=>{const e={};p.firstName.trim()||(e.firstName="Le pr\xe9nom est requis"),p.lastName.trim()||(e.lastName="Le nom est requis"),p.address.trim()||(e.address="L'adresse est requise"),p.email.trim()?(0,Tu.DT)(p.email)||(e.email="Email invalide"):e.email="L'adresse email est requise",p.facebookName.trim()||(e.facebookName="Le nom du profil Facebook est requis");const t=Lh(p.phoneNumber);return t.valid||(e.phoneNumber=t.error),p.password.length<6&&(e.password="Le mot de passe doit contenir au moins 6 caract\xe8res"),p.password!==p.confirmPassword&&(e.confirmPassword="Les mots de passe ne correspondent pas"),m(e),0===Object.keys(e).length})()&&a(2):2===n?(g(!0),setTimeout(()=>{a(3)},2e3)):3===n&&setTimeout(()=>{console.log("[CREATEACCOUNT] Donn\xe9es transmises:",p),e("/register",{state:{basicInfo:{firstName:p.firstName,lastName:p.lastName,email:p.email,facebookName:p.facebookName,phoneNumber:p.phoneNumber,address:p.address,password:p.password,confirmPassword:p.confirmPassword},fromCreateAccount:!0}})},3e3)},disabled:o,className:"flex items-center space-x-2 ml-auto",children:[(0,i.jsx)("span",{children:1===n||2===n?"Continuer":3===n?"Continuer vers l'inscription compl\xe8te":"Suivant"}),(0,i.jsx)(ur,{size:16})]})]}),(0,i.jsx)("div",{className:"text-center mt-6",children:(0,i.jsxs)("p",{className:"text-sm text-gray-600",children:["D\xe9j\xe0 un compte ?"," ",(0,i.jsx)("button",{onClick:()=>e("/login"),className:"text-primary-600 hover:text-primary-700 font-medium",children:"Se connecter"})]})})]})})},Mh=()=>(0,i.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-primary-50 to-secondary-50 flex items-center justify-center p-4",children:(0,i.jsxs)(gu.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"w-full max-w-md",children:[(0,i.jsx)("div",{className:"text-center mb-8",children:(0,i.jsx)(yu,{className:"mx-auto mb-4"})}),(0,i.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8 border border-gray-100",children:[(0,i.jsxs)("div",{className:"text-center mb-6",children:[(0,i.jsx)("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,i.jsx)(ht.A,{className:"w-8 h-8 text-green-600"})}),(0,i.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Inscription r\xe9ussie !"}),(0,i.jsx)("p",{className:"text-gray-600",children:"Votre compte a \xe9t\xe9 cr\xe9\xe9 avec succ\xe8s"})]}),(0,i.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-xl p-4 mb-6",children:(0,i.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,i.jsx)(wu,{className:"w-5 h-5 text-yellow-600"}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{className:"font-semibold text-yellow-800",children:"En attente d'approbation"}),(0,i.jsx)("p",{className:"text-sm text-yellow-700",children:"Votre compte sera activ\xe9 sous 24-48h"})]})]})}),(0,i.jsxs)("div",{className:"space-y-4 mb-6",children:[(0,i.jsx)("h3",{className:"font-semibold text-gray-900 mb-3",children:"Prochaines \xe9tapes :"}),(0,i.jsxs)("div",{className:"space-y-3",children:[(0,i.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,i.jsx)("div",{className:"w-6 h-6 bg-primary-100 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:(0,i.jsx)("span",{className:"text-xs font-semibold text-primary-600",children:"1"})}),(0,i.jsx)("div",{children:(0,i.jsxs)("p",{className:"text-sm text-gray-700",children:[(0,i.jsx)("strong",{children:"V\xe9rification des documents"})," - Nous v\xe9rifions vos informations"]})})]}),(0,i.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,i.jsx)("div",{className:"w-6 h-6 bg-primary-100 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:(0,i.jsx)("span",{className:"text-xs font-semibold text-primary-600",children:"2"})}),(0,i.jsx)("div",{children:(0,i.jsxs)("p",{className:"text-sm text-gray-700",children:[(0,i.jsx)("strong",{children:"Notification par SMS/Email"})," - Vous recevrez une confirmation"]})})]}),(0,i.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,i.jsx)("div",{className:"w-6 h-6 bg-primary-100 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:(0,i.jsx)("span",{className:"text-xs font-semibold text-primary-600",children:"3"})}),(0,i.jsx)("div",{children:(0,i.jsxs)("p",{className:"text-sm text-gray-700",children:[(0,i.jsx)("strong",{children:"Acc\xe8s \xe0 votre compte"})," - Vous pourrez vous connecter"]})})]})]})]}),(0,i.jsxs)("div",{className:"bg-gray-50 rounded-xl p-4 mb-6",children:[(0,i.jsx)("h3",{className:"font-semibold text-gray-900 mb-3",children:"Besoin d'aide ?"}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,i.jsx)(ph,{className:"w-4 h-4 text-gray-500"}),(0,i.jsx)("span",{className:"text-sm text-gray-600",children:"+229 90 00 00 00"})]}),(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,i.jsx)(fh,{className:"w-4 h-4 text-gray-500"}),(0,i.jsx)("span",{className:"text-sm text-gray-600",children:"support@abpret.com"})]})]})]}),(0,i.jsxs)("div",{className:"space-y-3",children:[(0,i.jsx)(Sh,{onClick:()=>window.location.href="/",className:"w-full",variant:"primary",children:"Retour \xe0 l'accueil"}),(0,i.jsx)(rt,{to:"/login",children:(0,i.jsxs)(Sh,{className:"w-full",variant:"outline",children:[(0,i.jsx)(Rh.A,{className:"w-4 h-4 mr-2"}),"Aller \xe0 la connexion"]})})]})]}),(0,i.jsxs)("div",{className:"text-center mt-6",children:[(0,i.jsx)("p",{className:"text-sm text-gray-500",children:"\xa9 2025 AB CAMPUS FINANCE. Tous droits r\xe9serv\xe9s."}),(0,i.jsx)("p",{className:"text-sm text-primary-600 font-semibold mt-1",children:"Made in B\xe9nin \ud83c\udde7\ud83c\uddef"})]})]})}),Fh=(0,mt.A)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),Uh=()=>{const[e,t]=(0,r.useState)(""),[s,n]=(0,r.useState)("idle"),[a,o]=(0,r.useState)(""),l=(0,We.Zp)(),c=async t=>{if(t.preventDefault(),!e)return o("Veuillez entrer votre adresse email"),void n("error");if(!e.includes("@"))return o("Veuillez entrer une adresse email valide"),void n("error");n("loading"),o("");try{const{error:t}=await ot.ND.auth.resetPasswordForEmail(e,{redirectTo:"".concat(window.location.origin,"/reset-password")});if(t)return console.error("[FORGOT_PASSWORD] Erreur Supabase:",t),n("error"),void o("Une erreur est survenue. Veuillez r\xe9essayer.");n("success")}catch(s){console.error("[FORGOT_PASSWORD] Erreur g\xe9n\xe9rale:",s),n("error"),o("Une erreur est survenue. Veuillez r\xe9essayer.")}},d=()=>{l("/login")};return"success"===s?(0,i.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-100 to-blue-50 flex items-center justify-center p-4",children:[(0,i.jsx)("div",{className:"absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZGVmcz48cGF0dGVybiBpZD0iZ3JpZCIgd2lkdGg9IjQwIiBoZWlnaHQ9IjQwIiBwYXR0ZXJuVW5pdHM9InVzZXJTcGFjZU9uVXNlIj48cGF0aCBkPSJNIDQwIDAgTCAwIDAgMCA0MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJyZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMDMpIiBzdHJva2Utd2lkdGg9IjEiLz48L3BhdHRlcm4+PC9kZWZzPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9InVybCgjZ3JpZCkiLz48L3N2Zz4=')] opacity-30"}),(0,i.jsx)("div",{className:"relative max-w-md w-full",children:(0,i.jsx)("div",{className:"bg-white/80 backdrop-blur-xl rounded-3xl p-8 border border-blue-200/50 shadow-2xl animate-in fade-in-0 zoom-in-95 duration-500",children:(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("div",{className:"mx-auto w-16 h-16 bg-gradient-to-r from-green-500 to-emerald-600 rounded-full flex items-center justify-center mb-6",children:(0,i.jsx)(ht.A,{className:"w-8 h-8 text-white"})}),(0,i.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Email envoy\xe9 !"}),(0,i.jsxs)("p",{className:"text-gray-600 mb-8 leading-relaxed",children:["Nous avons envoy\xe9 un lien de r\xe9initialisation \xe0"," ",(0,i.jsx)("span",{className:"font-semibold text-blue-600",children:e}),(0,i.jsx)("br",{}),"V\xe9rifiez votre bo\xeete mail et suivez les instructions."]}),(0,i.jsxs)("button",{onClick:d,className:"group flex items-center justify-center w-full bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white font-semibold py-4 px-6 rounded-xl transition-all duration-300 transform hover:scale-105 hover:shadow-lg",children:[(0,i.jsx)(Rh.A,{className:"w-5 h-5 mr-2 transition-transform group-hover:-translate-x-1"}),"Retour \xe0 la connexion"]})]})})})]}):(0,i.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-100 to-blue-50 flex items-center justify-center p-4",children:[(0,i.jsx)("div",{className:"absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZGVmcz48cGF0dGVybiBpZD0iZ3JpZCIgd2lkdGg9IjQwIiBoZWlnaHQ9IjQwIiBwYXR0ZXJuVW5pdHM9InVzZXJTcGFjZU9uVXNlIj48cGF0aCBkPSJNIDQwIDAgTCAwIDAgMCA0MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJyZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMDMpIiBzdHJva2Utd2lkdGg9IjEiLz48L3BhdHRlcm4+PC9kZWZzPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9InVybCgjZ3JpZCkiLz48L3N2Zz4=')] opacity-30"}),(0,i.jsx)("div",{className:"absolute top-20 left-20 w-32 h-32 bg-blue-500/20 rounded-full blur-xl animate-pulse"}),(0,i.jsx)("div",{className:"absolute bottom-20 right-20 w-40 h-40 bg-indigo-500/20 rounded-full blur-xl animate-pulse delay-1000"}),(0,i.jsx)("div",{className:"absolute top-1/2 left-10 w-24 h-24 bg-cyan-500/20 rounded-full blur-xl animate-pulse delay-500"}),(0,i.jsxs)("div",{className:"relative max-w-md w-full",children:[(0,i.jsxs)("div",{className:"bg-white/80 backdrop-blur-xl rounded-3xl p-8 border border-blue-200/50 shadow-2xl animate-in fade-in-0 slide-in-from-bottom-4 duration-700",children:[(0,i.jsxs)("div",{className:"text-center mb-8",children:[(0,i.jsx)("div",{className:"mx-auto w-16 h-16 bg-gradient-to-r from-blue-600 to-indigo-600 rounded-full flex items-center justify-center mb-6 animate-pulse",children:(0,i.jsx)(fh,{className:"w-8 h-8 text-white"})}),(0,i.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Mot de passe oubli\xe9 ?"}),(0,i.jsx)("p",{className:"text-gray-600 leading-relaxed",children:"Pas de souci ! Entrez votre adresse email et nous vous enverrons un lien pour r\xe9initialiser votre mot de passe."})]}),(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Adresse email"}),(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsx)("input",{id:"email",type:"email",value:e,onChange:e=>{t(e.target.value),"error"===s&&(n("idle"),o(""))},className:"w-full px-4 py-4 pl-12 bg-white/50 border border-blue-200/50 rounded-xl text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300 backdrop-blur-sm",placeholder:"votre@email.com",disabled:"loading"===s}),(0,i.jsx)(fh,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-500 w-5 h-5"})]})]}),"error"===s&&(0,i.jsxs)("div",{className:"flex items-center space-x-3 p-4 bg-red-50 border border-red-200 rounded-xl animate-in fade-in-0 slide-in-from-top-2 duration-300",children:[(0,i.jsx)(pt,{className:"w-5 h-5 text-red-500 flex-shrink-0"}),(0,i.jsx)("p",{className:"text-red-700 text-sm",children:a})]}),(0,i.jsxs)("button",{onClick:c,disabled:"loading"===s,className:"group relative w-full bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 disabled:from-gray-400 disabled:to-gray-500 text-white font-semibold py-4 px-6 rounded-xl transition-all duration-300 transform hover:scale-105 hover:shadow-lg disabled:scale-100 disabled:shadow-none overflow-hidden",children:[(0,i.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-white/0 via-white/20 to-white/0 transform -skew-x-12 -translate-x-full group-hover:translate-x-full transition-transform duration-1000"}),(0,i.jsx)("div",{className:"relative flex items-center justify-center",children:"loading"===s?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Fh,{className:"w-5 h-5 mr-2 animate-spin"}),"Envoi en cours..."]}):"Envoyer le lien de r\xe9initialisation"})]}),(0,i.jsx)("div",{className:"text-center pt-4",children:(0,i.jsxs)("button",{onClick:d,className:"group text-gray-600 hover:text-blue-600 font-medium transition-colors duration-200 flex items-center justify-center mx-auto",children:[(0,i.jsx)(Rh.A,{className:"w-4 h-4 mr-2 transition-transform group-hover:-translate-x-1"}),"Retour \xe0 la connexion"]})})]})]}),(0,i.jsx)("div",{className:"text-center mt-6",children:(0,i.jsxs)("p",{className:"text-gray-500 text-sm",children:["Vous n'avez pas re\xe7u l'email ? V\xe9rifiez vos spams ou"," ",(0,i.jsx)("button",{onClick:()=>{e&&"loading"!==s&&c({preventDefault:()=>{}})},className:"text-blue-600 hover:text-blue-700 font-medium transition-colors duration-200",children:"renvoyez-le"})]})})]})]})},Bh=()=>{const[e,t]=(0,r.useState)(""),[s,n]=(0,r.useState)(""),[a,o]=(0,r.useState)(!1),[l,c]=(0,r.useState)(!1),[d,u]=(0,r.useState)("idle"),[h,m]=(0,r.useState)(""),[p]=it(),f=(0,We.Zp)();(0,r.useEffect)(()=>{const e=p.get("access_token"),t=p.get("refresh_token");e&&t||(u("error"),m("Lien de r\xe9initialisation invalide ou expir\xe9."))},[p]);return"success"===d?(0,i.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-100 to-blue-50 flex items-center justify-center p-4",children:[(0,i.jsx)("div",{className:"absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZGVmcz48cGF0dGVybiBpZD0iZ3JpZCIgd2lkdGg9IjQwIiBoZWlnaHQ9IjQwIiBwYXR0ZXJuVW5pdHM9InVzZXJTcGFjZU9uVXNlIj48cGF0aCBkPSJNIDQwIDAgTCAwIDAgMCA0MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJyZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMDMpIiBzdHJva2Utd2lkdGg9IjEiLz48L3BhdHRlcm4+PC9kZWZzPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9InVybCgjZ3JpZCkiLz48L3N2Zz4=')] opacity-30"}),(0,i.jsx)("div",{className:"relative max-w-md w-full",children:(0,i.jsx)("div",{className:"bg-white/80 backdrop-blur-xl rounded-3xl p-8 border border-blue-200/50 shadow-2xl animate-in fade-in-0 zoom-in-95 duration-500",children:(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("div",{className:"mx-auto w-16 h-16 bg-gradient-to-r from-green-500 to-emerald-600 rounded-full flex items-center justify-center mb-6",children:(0,i.jsx)(ht.A,{className:"w-8 h-8 text-white"})}),(0,i.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Mot de passe mis \xe0 jour !"}),(0,i.jsxs)("p",{className:"text-gray-600 mb-8 leading-relaxed",children:["Votre mot de passe a \xe9t\xe9 r\xe9initialis\xe9 avec succ\xe8s.",(0,i.jsx)("br",{}),"Vous allez \xeatre redirig\xe9 vers la page de connexion..."]}),(0,i.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2 mb-4",children:(0,i.jsx)("div",{className:"bg-gradient-to-r from-green-500 to-emerald-600 h-2 rounded-full animate-pulse",style:{width:"100%"}})})]})})})]}):(0,i.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-100 to-blue-50 flex items-center justify-center p-4",children:[(0,i.jsx)("div",{className:"absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZGVmcz48cGF0dGVybiBpZD0iZ3JpZCIgd2lkdGg9IjQwIiBoZWlnaHQ9IjQwIiBwYXR0ZXJuVW5pdHM9InVzZXJTcGFjZU9uVXNlIj48cGF0aCBkPSJNIDQwIDAgTCAwIDAgMCA0MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJyZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMDMpIiBzdHJva2Utd2lkdGg9IjEiLz48L3BhdHRlcm4+PC9kZWZzPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9InVybCgjZ3JpZCkiLz48L3N2Zz4=')] opacity-30"}),(0,i.jsx)("div",{className:"absolute top-20 left-20 w-32 h-32 bg-blue-500/20 rounded-full blur-xl animate-pulse"}),(0,i.jsx)("div",{className:"absolute bottom-20 right-20 w-40 h-40 bg-indigo-500/20 rounded-full blur-xl animate-pulse delay-1000"}),(0,i.jsx)("div",{className:"absolute top-1/2 left-10 w-24 h-24 bg-cyan-500/20 rounded-full blur-xl animate-pulse delay-500"}),(0,i.jsx)("div",{className:"relative max-w-md w-full",children:(0,i.jsxs)("div",{className:"bg-white/80 backdrop-blur-xl rounded-3xl p-8 border border-blue-200/50 shadow-2xl animate-in fade-in-0 slide-in-from-bottom-4 duration-700",children:[(0,i.jsxs)("div",{className:"text-center mb-8",children:[(0,i.jsx)("div",{className:"mx-auto w-16 h-16 bg-gradient-to-r from-blue-600 to-indigo-600 rounded-full flex items-center justify-center mb-6 animate-pulse",children:(0,i.jsx)(xh,{className:"w-8 h-8 text-white"})}),(0,i.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Nouveau mot de passe"}),(0,i.jsx)("p",{className:"text-gray-600 leading-relaxed",children:"Entrez votre nouveau mot de passe pour finaliser la r\xe9initialisation."})]}),(0,i.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),!e)return m("Veuillez entrer un mot de passe"),void u("error");if(!s)return m("Veuillez confirmer votre mot de passe"),void u("error");if(e!==s)return m("Les mots de passe ne correspondent pas"),void u("error");const r=(e=>e.length<6?"Le mot de passe doit contenir au moins 6 caract\xe8res":null)(e);if(r)return m(r),void u("error");u("loading"),m("");try{const{error:t}=await ot.ND.auth.updateUser({password:e});if(t)return console.error("[RESET_PASSWORD] Erreur Supabase:",t),u("error"),void m("Une erreur est survenue. Veuillez r\xe9essayer.");u("success"),setTimeout(()=>{f("/login")},3e3)}catch(n){console.error("[RESET_PASSWORD] Erreur g\xe9n\xe9rale:",n),u("error"),m("Une erreur est survenue. Veuillez r\xe9essayer.")}},className:"space-y-6",children:[(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Nouveau mot de passe"}),(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsx)("input",{id:"password",type:a?"text":"password",value:e,onChange:e=>{t(e.target.value),"error"===d&&(u("idle"),m(""))},className:"w-full px-4 py-4 pl-12 pr-12 bg-white/50 border border-blue-200/50 rounded-xl text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300 backdrop-blur-sm",placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",disabled:"loading"===d,required:!0}),(0,i.jsx)(xh,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-500 w-5 h-5"}),(0,i.jsx)("button",{type:"button",onClick:()=>o(!a),className:"absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700 transition-colors",children:a?(0,i.jsx)(gh,{size:20}):(0,i.jsx)(vh,{size:20})})]})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700",children:"Confirmer le mot de passe"}),(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsx)("input",{id:"confirmPassword",type:l?"text":"password",value:s,onChange:e=>{n(e.target.value),"error"===d&&(u("idle"),m(""))},className:"w-full px-4 py-4 pl-12 pr-12 bg-white/50 border border-blue-200/50 rounded-xl text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300 backdrop-blur-sm",placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",disabled:"loading"===d,required:!0}),(0,i.jsx)(xh,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-500 w-5 h-5"}),(0,i.jsx)("button",{type:"button",onClick:()=>c(!l),className:"absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700 transition-colors",children:l?(0,i.jsx)(gh,{size:20}):(0,i.jsx)(vh,{size:20})})]})]}),"error"===d&&(0,i.jsxs)("div",{className:"flex items-center space-x-3 p-4 bg-red-50 border border-red-200 rounded-xl animate-in fade-in-0 slide-in-from-top-2 duration-300",children:[(0,i.jsx)(pt,{className:"w-5 h-5 text-red-500 flex-shrink-0"}),(0,i.jsx)("p",{className:"text-red-700 text-sm",children:h})]}),(0,i.jsxs)("button",{type:"submit",disabled:"loading"===d,className:"group relative w-full bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 disabled:from-gray-400 disabled:to-gray-500 text-white font-semibold py-4 px-6 rounded-xl transition-all duration-300 transform hover:scale-105 hover:shadow-lg disabled:scale-100 disabled:shadow-none overflow-hidden",children:[(0,i.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-white/0 via-white/20 to-white/0 transform -skew-x-12 -translate-x-full group-hover:translate-x-full transition-transform duration-1000"}),(0,i.jsx)("div",{className:"relative flex items-center justify-center",children:"loading"===d?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Fh,{className:"w-5 h-5 mr-2 animate-spin"}),"Mise \xe0 jour en cours..."]}):"Mettre \xe0 jour le mot de passe"})]})]})]})})]})},Vh=(0,mt.A)("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]]),qh=()=>{const[e,t]=(0,r.useState)(!1),s=[{name:"WhatsApp",icon:(0,i.jsx)("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24",children:(0,i.jsx)("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"})}),url:"https://wa.me/22953463606",color:"bg-green-500 hover:bg-green-600",description:"+229 53 46 36 06"},{name:"Facebook",icon:(0,i.jsx)("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24",children:(0,i.jsx)("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})}),url:"https://www.facebook.com/abpret.2024",color:"bg-blue-600 hover:bg-blue-700",description:"AB Campus Finance"},{name:"Email",icon:(0,i.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),url:"mailto:abpret51@gmail.com",color:"bg-gray-600 hover:bg-gray-700",description:"abpret51@gmail.com"}];return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("button",{onClick:()=>t(!e),className:"fixed bottom-28 right-6 z-40 p-4 bg-primary-500 hover:bg-primary-600 text-white rounded-full shadow-lg transition-all duration-300 transform hover:scale-110 focus:outline-none focus:ring-4 focus:ring-primary-300","aria-label":"Nous contacter",children:e?(0,i.jsx)(xt,{size:24}):(0,i.jsx)(Vh,{size:24})}),e&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"fixed inset-0 z-30",onClick:()=>t(!1)}),(0,i.jsxs)("div",{className:"fixed bottom-44 right-6 z-40 w-80 bg-white rounded-2xl shadow-2xl border border-gray-200 overflow-hidden animate-slide-up",children:[(0,i.jsx)("div",{className:"bg-gradient-to-r from-primary-500 to-primary-600 p-4 text-white",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{className:"text-lg font-bold font-montserrat",children:"Nous contacter"}),(0,i.jsx)("p",{className:"text-sm text-primary-100",children:"Choisissez votre canal pr\xe9f\xe9r\xe9"})]}),(0,i.jsx)("button",{onClick:()=>t(!1),className:"p-1 hover:bg-white/20 rounded-full transition-colors",children:(0,i.jsx)(xt,{size:20})})]})}),(0,i.jsx)("div",{className:"p-4 space-y-3",children:s.map(e=>(0,i.jsxs)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",onClick:()=>t(!1),className:"flex items-center space-x-4 p-4 rounded-xl ".concat(e.color," text-white transition-all duration-200 transform hover:scale-105 hover:shadow-lg"),children:[(0,i.jsx)("div",{className:"flex-shrink-0",children:e.icon}),(0,i.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,i.jsx)("p",{className:"font-semibold font-montserrat",children:e.name}),(0,i.jsx)("p",{className:"text-sm opacity-90 truncate",children:e.description})]}),(0,i.jsx)("svg",{className:"w-5 h-5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]},e.name))}),(0,i.jsx)("div",{className:"bg-gray-50 px-4 py-3 border-t border-gray-200",children:(0,i.jsx)("p",{className:"text-xs text-gray-600 text-center font-montserrat",children:"Nous sommes disponibles pour vous aider"})})]})]}),(0,i.jsx)("style",{jsx:!0,children:"\n        @keyframes slide-up {\n          from {\n            opacity: 0;\n            transform: translateY(20px);\n          }\n          to {\n            opacity: 1;\n            transform: translateY(0);\n          }\n        }\n\n        .animate-slide-up {\n          animation: slide-up 0.3s ease-out;\n        }\n      "})]})};var Hh,Wh,Gh,Kh,Zh,Qh,Jh,Yh,$h,Xh,em,tm,sm,rm,nm,am,im=(Hh=new WeakMap,Wh=new WeakMap,Gh=new WeakMap,Kh=new WeakMap,Zh=new WeakMap,Qh=new WeakMap,Jh=new WeakMap,Yh=new WeakMap,$h=new WeakMap,Xh=new WeakMap,em=new WeakMap,tm=new WeakMap,sm=new WeakMap,rm=new WeakMap,nm=new WeakMap,am=new WeakSet,class extends J{constructor(e,t){super(),B(this,am),u(this,Hh,void 0),u(this,Wh,void 0),u(this,Gh,void 0),u(this,Kh,void 0),u(this,Zh,void 0),u(this,Qh,void 0),u(this,Jh,void 0),u(this,Yh,void 0),u(this,$h,void 0),u(this,Xh,void 0),u(this,em,void 0),u(this,tm,void 0),u(this,sm,void 0),u(this,rm,void 0),u(this,nm,new Set),this.options=t,p(Hh,this,e),p(Yh,this,null),p(Jh,this,X()),this.bindMethods(),this.setOptions(t)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){1===this.listeners.size&&(m(Wh,this).addObserver(this),xm(m(Wh,this),this.options)?h(am,this,om).call(this):this.updateResult(),h(am,this,um).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return gm(m(Wh,this),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return gm(m(Wh,this),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,h(am,this,hm).call(this),h(am,this,mm).call(this),m(Wh,this).removeObserver(this)}setOptions(e){const t=this.options,s=m(Wh,this);if(this.options=m(Hh,this).defaultQueryOptions(e),void 0!==this.options.enabled&&"boolean"!==typeof this.options.enabled&&"function"!==typeof this.options.enabled&&"boolean"!==typeof N(this.options.enabled,m(Wh,this)))throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");h(am,this,pm).call(this),m(Wh,this).setOptions(this.options),t._defaulted&&!T(this.options,t)&&m(Hh,this).getQueryCache().notify({type:"observerOptionsUpdated",query:m(Wh,this),observer:this});const r=this.hasListeners();r&&vm(m(Wh,this),s,this.options,t)&&h(am,this,om).call(this),this.updateResult(),!r||m(Wh,this)===s&&N(this.options.enabled,m(Wh,this))===N(t.enabled,m(Wh,this))&&w(this.options.staleTime,m(Wh,this))===w(t.staleTime,m(Wh,this))||h(am,this,lm).call(this);const n=h(am,this,cm).call(this);!r||m(Wh,this)===s&&N(this.options.enabled,m(Wh,this))===N(t.enabled,m(Wh,this))&&n===m(rm,this)||h(am,this,dm).call(this,n)}getOptimisticResult(e){const t=m(Hh,this).getQueryCache().build(m(Hh,this),e),s=this.createResult(t,e);return function(e,t){if(!T(e.getCurrentResult(),t))return!0;return!1}(this,s)&&(p(Kh,this,s),p(Qh,this,this.options),p(Zh,this,m(Wh,this).state)),s}getCurrentResult(){return m(Kh,this)}trackResult(e,t){return new Proxy(e,{get:(e,s)=>(this.trackProp(s),null===t||void 0===t||t(s),"promise"===s&&(this.trackProp("data"),this.options.experimental_prefetchInRender||"pending"!==m(Jh,this).status||m(Jh,this).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(e,s))})}trackProp(e){m(nm,this).add(e)}getCurrentQuery(){return m(Wh,this)}refetch(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({},(function(e){if(null==e)throw new TypeError("Cannot destructure "+e)}(e),e));return this.fetch((0,c.A)({},t))}fetchOptimistic(e){const t=m(Hh,this).defaultQueryOptions(e),s=m(Hh,this).getQueryCache().build(m(Hh,this),t);return s.fetch().then(()=>this.createResult(s,t))}fetch(e){var t;return h(am,this,om).call(this,(0,c.A)((0,c.A)({},e),{},{cancelRefetch:null===(t=e.cancelRefetch)||void 0===t||t})).then(()=>(this.updateResult(),m(Kh,this)))}createResult(e,t){const s=m(Wh,this),r=this.options,n=m(Kh,this),a=m(Zh,this),i=m(Qh,this),o=e!==s?e.state:m(Gh,this),{state:l}=e;let d,u=(0,c.A)({},l),h=!1;if(t._optimisticResults){const n=this.hasListeners(),a=!n&&xm(e,t),i=n&&vm(e,s,t,r);(a||i)&&(u=(0,c.A)((0,c.A)({},u),ge(l.data,e.options))),"isRestoring"===t._optimisticResults&&(u.fetchStatus="idle")}let{error:f,errorUpdatedAt:x,status:g}=u;d=u.data;let v=!1;if(void 0!==t.placeholderData&&void 0===d&&"pending"===g){let e;var y;if(null!==n&&void 0!==n&&n.isPlaceholderData&&t.placeholderData===(null===i||void 0===i?void 0:i.placeholderData))e=n.data,v=!0;else e="function"===typeof t.placeholderData?t.placeholderData(null===(y=m(em,this))||void 0===y?void 0:y.state.data,m(em,this)):t.placeholderData;void 0!==e&&(g="success",d=D(null===n||void 0===n?void 0:n.data,e,t),h=!0)}if(t.select&&void 0!==d&&!v)if(n&&d===(null===a||void 0===a?void 0:a.data)&&t.select===m($h,this))d=m(Xh,this);else try{p($h,this,t.select),d=t.select(d),d=D(null===n||void 0===n?void 0:n.data,d,t),p(Xh,this,d),p(Yh,this,null)}catch(_){p(Yh,this,_)}m(Yh,this)&&(f=m(Yh,this),d=m(Xh,this),x=Date.now(),g="error");const b="fetching"===u.fetchStatus,j="pending"===g,w="error"===g,S=j&&b,k=void 0!==d,A={status:g,fetchStatus:u.fetchStatus,isPending:j,isSuccess:"success"===g,isError:w,isInitialLoading:S,isLoading:S,data:d,dataUpdatedAt:u.dataUpdatedAt,error:f,errorUpdatedAt:x,failureCount:u.fetchFailureCount,failureReason:u.fetchFailureReason,errorUpdateCount:u.errorUpdateCount,isFetched:u.dataUpdateCount>0||u.errorUpdateCount>0,isFetchedAfterMount:u.dataUpdateCount>o.dataUpdateCount||u.errorUpdateCount>o.errorUpdateCount,isFetching:b,isRefetching:b&&!j,isLoadingError:w&&!k,isPaused:"paused"===u.fetchStatus,isPlaceholderData:h,isRefetchError:w&&k,isStale:ym(e,t),refetch:this.refetch,promise:m(Jh,this),isEnabled:!1!==N(t.enabled,e)};if(this.options.experimental_prefetchInRender){const t=void 0!==A.data,r="error"===A.status&&!t,n=e=>{r?e.reject(A.error):t&&e.resolve(A.data)},a=()=>{const e=p(Jh,this,A.promise=X());n(e)},i=m(Jh,this);switch(i.status){case"pending":e.queryHash===s.queryHash&&n(i);break;case"fulfilled":(r||A.data!==i.value)&&a();break;case"rejected":r&&A.error===i.reason||a()}}return A}updateResult(){const e=m(Kh,this),t=this.createResult(m(Wh,this),this.options);if(p(Zh,this,m(Wh,this).state),p(Qh,this,this.options),void 0!==m(Zh,this).data&&p(em,this,m(Wh,this)),T(t,e))return;p(Kh,this,t);h(am,this,fm).call(this,{listeners:(()=>{if(!e)return!0;const{notifyOnChangeProps:t}=this.options,s="function"===typeof t?t():t;if("all"===s||!s&&!m(nm,this).size)return!0;const r=new Set(null!==s&&void 0!==s?s:m(nm,this));return this.options.throwOnError&&r.add("error"),Object.keys(m(Kh,this)).some(t=>{const s=t;return m(Kh,this)[s]!==e[s]&&r.has(s)})})()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&h(am,this,um).call(this)}});function om(e){h(am,this,pm).call(this);let t=m(Wh,this).fetch(this.options,e);return null!==e&&void 0!==e&&e.throwOnError||(t=t.catch(y)),t}function lm(){h(am,this,hm).call(this);const e=w(this.options.staleTime,m(Wh,this));if(v||m(Kh,this).isStale||!b(e))return;const t=j(m(Kh,this).dataUpdatedAt,e)+1;p(tm,this,g.setTimeout(()=>{m(Kh,this).isStale||this.updateResult()},t))}function cm(){var e;return null!==(e="function"===typeof this.options.refetchInterval?this.options.refetchInterval(m(Wh,this)):this.options.refetchInterval)&&void 0!==e&&e}function dm(e){h(am,this,mm).call(this),p(rm,this,e),!v&&!1!==N(this.options.enabled,m(Wh,this))&&b(m(rm,this))&&0!==m(rm,this)&&p(sm,this,g.setInterval(()=>{(this.options.refetchIntervalInBackground||Y.isFocused())&&h(am,this,om).call(this)},m(rm,this)))}function um(){h(am,this,lm).call(this),h(am,this,dm).call(this,h(am,this,cm).call(this))}function hm(){m(tm,this)&&(g.clearTimeout(m(tm,this)),p(tm,this,void 0))}function mm(){m(sm,this)&&(g.clearInterval(m(sm,this)),p(sm,this,void 0))}function pm(){const e=m(Hh,this).getQueryCache().build(m(Hh,this),this.options);if(e===m(Wh,this))return;const t=m(Wh,this);p(Wh,this,e),p(Gh,this,e.state),this.hasListeners()&&(null===t||void 0===t||t.removeObserver(this),e.addObserver(this))}function fm(e){Q.batch(()=>{e.listeners&&this.listeners.forEach(e=>{e(m(Kh,this))}),m(Hh,this).getQueryCache().notify({query:m(Wh,this),type:"observerResultsUpdated"})})}function xm(e,t){return function(e,t){return!1!==N(t.enabled,e)&&void 0===e.state.data&&!("error"===e.state.status&&!1===t.retryOnMount)}(e,t)||void 0!==e.state.data&&gm(e,t,t.refetchOnMount)}function gm(e,t,s){if(!1!==N(t.enabled,e)&&"static"!==w(t.staleTime,e)){const r="function"===typeof s?s(e):s;return"always"===r||!1!==r&&ym(e,t)}return!1}function vm(e,t,s,r){return(e!==t||!1===N(r.enabled,e))&&(!s.suspense||"error"!==e.state.status)&&ym(e,s)}function ym(e,t){return!1!==N(t.enabled,e)&&e.isStaleByTime(w(t.staleTime,e))}function bm(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var jm=r.createContext(bm()),wm=r.createContext(!1),Nm=(wm.Provider,(e,t,s)=>t.fetchOptimistic(e).catch(()=>{s.clearReset()}));function Sm(e,t,s){var n,a,i,l;const c=r.useContext(wm),d=r.useContext(jm),u=(e=>{const t=r.useContext(o);if(e)return e;if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t})(s),h=u.defaultQueryOptions(e);null===(n=u.getDefaultOptions().queries)||void 0===n||null===(a=n._experimental_beforeQuery)||void 0===a||a.call(n,h);const m=u.getQueryCache().get(h.queryHash);h._optimisticResults=c?"isRestoring":"optimistic",(e=>{if(e.suspense){const t=1e3,s=e=>"static"===e?e:Math.max(null!==e&&void 0!==e?e:t,t),r=e.staleTime;e.staleTime="function"===typeof r?function(){return s(r(...arguments))}:s(r),"number"===typeof e.gcTime&&(e.gcTime=Math.max(e.gcTime,t))}})(h),((e,t,s)=>{const r=null!==s&&void 0!==s&&s.state.error&&"function"===typeof e.throwOnError?U(e.throwOnError,[s.state.error,s]):e.throwOnError;(e.suspense||e.experimental_prefetchInRender||r)&&(t.isReset()||(e.retryOnMount=!1))})(h,d,m),(e=>{r.useEffect(()=>{e.clearReset()},[e])})(d);const p=!u.getQueryCache().get(h.queryHash),[f]=r.useState(()=>new t(u,h)),x=f.getOptimisticResult(h),g=!c&&!1!==e.subscribed;if(r.useSyncExternalStore(r.useCallback(e=>{const t=g?f.subscribe(Q.batchCalls(e)):y;return f.updateResult(),t},[f,g]),()=>f.getCurrentResult(),()=>f.getCurrentResult()),r.useEffect(()=>{f.setOptions(h)},[h,f]),((e,t)=>(null===e||void 0===e?void 0:e.suspense)&&t.isPending)(h,x))throw Nm(h,f,d);if((e=>{let{result:t,errorResetBoundary:s,throwOnError:r,query:n,suspense:a}=e;return t.isError&&!s.isReset()&&!t.isFetching&&n&&(a&&void 0===t.data||U(r,[t.error,n]))})({result:x,errorResetBoundary:d,throwOnError:h.throwOnError,query:m,suspense:h.suspense}))throw x.error;if(null===(i=u.getDefaultOptions().queries)||void 0===i||null===(l=i._experimental_afterQuery)||void 0===l||l.call(i,h,x),h.experimental_prefetchInRender&&!v&&((e,t)=>e.isLoading&&e.isFetching&&!t)(x,c)){const e=p?Nm(h,f,d):null===m||void 0===m?void 0:m.promise;null===e||void 0===e||e.catch(y).finally(()=>{f.updateResult()})}return h.notifyOnChangeProps?x:f.trackResult(x)}function km(e){var t,s,r;const n=function(e,t){return Sm(e,im,t)}({queryKey:["dashboardStats",e],queryFn:()=>async function(e){const[t,s,r]=await Promise.all([(0,lt.Or)(e),(0,lt.k5)(e),ot.ND.from("savings_plans").select("current_balance").eq("user_id",e).eq("status","active").order("current_balance",{ascending:!1})]),n=t.success&&t.data||[],a=s.success&&s.data||[],i=(null===r||void 0===r?void 0:r.data)||[],o=i.length>0?Math.max(...i.map(e=>e.current_balance||0)):0,l=n.reduce((e,t)=>e+(t.amount||0),0),c=a.reduce((e,t)=>e+(t.amount||0),0),d=n.filter(e=>"active"===e.status).length,u=l-c;let h=0,m=0,p=null;const f=n.find(e=>"active"===e.status);if(f){const e=parseFloat(f.amount)||0,t=parseFloat(f.interest_rate)||0;if(e>0&&(h=Math.round(e*(1+t/100))),f.approved_at){const e=new Date(f.approved_at),t=parseInt(f.duration_months||f.duration,10)||30;p=new Date(e),p.setDate(p.getDate()+t);const s=new Date;s.setHours(0,0,0,0),p.setHours(0,0,0,0),m=Math.floor((p.getTime()-s.getTime())/864e5)}}const x=new Map(n.map(e=>[e.id,e])),g=a.filter(e=>"completed"===(e.status||"").toLowerCase()),v=new Set;return g.forEach(e=>{const t=x.get(e.loan_id);if(null===t||void 0===t||!t.approved_at)return;const s=new Date(t.approved_at),r=parseInt(t.duration_months||t.duration||30,10),n=new Date(s.getTime()+24*r*60*60*1e3);n.setHours(23,59,59,999);const a=new Date(e.payment_date||e.created_at||new Date);a.setHours(0,0,0,0),a.getTime()<=n.getTime()&&v.add(e.loan_id)}),n.forEach(e=>{const t=(e.status||"").toLowerCase();"completed"!==t&&"rembours\xe9"!==t||v.has(e.id)||v.add(e.id)}),{totalLoaned:l,totalRepaid:c,amountToRepay:u,activeLoans:d,nextPayment:h,daysUntilNextPayment:m,dueDate:p,loyaltyScore:Math.max(0,Math.min(5,v.size)),savingsBalance:o}}(e),enabled:!!e,staleTime:12e4,gcTime:3e5});return{stats:null!==(t=n.data)&&void 0!==t?t:{totalLoaned:0,totalRepaid:0,amountToRepay:0,activeLoans:0,nextPayment:0,daysUntilNextPayment:0,dueDate:null,loyaltyScore:0,savingsBalance:0},loading:n.isLoading,error:null!==(s=null===(r=n.error)||void 0===r?void 0:r.message)&&void 0!==s?s:null,refetch:n.refetch,isFetching:n.isFetching}}function Am(e){let{className:t=""}=e;return(0,i.jsxs)("div",{className:"rounded-2xl p-4 sm:p-6 border border-gray-100 bg-white animate-pulse ".concat(t),children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,i.jsx)("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-gray-200 rounded-xl"}),(0,i.jsx)("div",{className:"w-12 h-4 bg-gray-200 rounded"})]}),(0,i.jsx)("div",{className:"w-16 h-8 sm:w-20 sm:h-9 bg-gray-200 rounded mb-2"}),(0,i.jsx)("div",{className:"w-24 h-4 bg-gray-100 rounded"})]})}function _m(){return(0,i.jsx)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6 mb-8",children:[1,2,3,4].map(e=>(0,i.jsx)(Am,{},e))})}function Em(e){let{lines:t=3}=e;return(0,i.jsx)("div",{className:"border border-gray-200/50 rounded-2xl p-6 animate-pulse",children:(0,i.jsx)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0",children:(0,i.jsxs)("div",{className:"flex-1 space-y-3",children:[(0,i.jsxs)("div",{className:"flex gap-2",children:[(0,i.jsx)("div",{className:"h-5 w-24 bg-gray-200 rounded"}),(0,i.jsx)("div",{className:"h-5 w-16 bg-gray-100 rounded-full"})]}),(0,i.jsx)("div",{className:"h-4 w-3/4 bg-gray-100 rounded"}),(0,i.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[1,2,3].map(e=>(0,i.jsx)("div",{className:"h-14 bg-gray-50 rounded-xl"},e))})]})})})}function Cm(e){let{rows:t=5}=e;return(0,i.jsx)("div",{className:"space-y-4",children:Array.from({length:t}).map((e,t)=>(0,i.jsx)(Em,{},t))})}var Pm=s(5099);const Tm=(0,mt.A)("PiggyBank",[["path",{d:"M19 5c-1.5 0-2.8 1.4-3 2-3.5-1.5-11-.3-11 5 0 1.8 0 3 2 4.5V20h4v-2h3v2h4v-4c1-.5 1.7-1 2-2h2v-4h-2c0-1-.5-1.5-1-2h0V5z",key:"uf6l00"}],["path",{d:"M2 9v1c0 1.1.9 2 2 2h1",key:"nm575m"}],["path",{d:"M16 11h0",key:"k2aug8"}]]),Im=(0,mt.A)("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]),Rm=(0,mt.A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),Om=()=>{var e;const t=(0,We.Zp)(),{user:s}=dt(),{stats:r,loading:n,error:a,refetch:o,isFetching:l}=km(null===s||void 0===s?void 0:s.id);if(a)return(0,i.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 flex items-center justify-center p-4",children:(0,i.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8 max-w-md w-full text-center",children:[(0,i.jsx)("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,i.jsx)(Pm.A,{size:32,className:"text-red-600"})}),(0,i.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Erreur"}),(0,i.jsx)("p",{className:"text-gray-600 mb-6",children:a}),(0,i.jsxs)("button",{onClick:()=>o(),className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl transition-colors",children:[(0,i.jsx)(Js.A,{size:18}),"R\xe9essayer"]})]})});const c=[{id:"ab-pret",title:"AB Pr\xeat",description:"Demander un pr\xeat rapide",icon:Bu.A,color:"from-blue-500 to-purple-600",iconBg:"bg-blue-100",iconColor:"text-blue-600",path:"/loan-request",badge:r.activeLoans>0?"".concat(r.activeLoans," actif").concat(r.activeLoans>1?"s":""):null},{id:"ab-epargne",title:"AB \xc9pargne",description:"\xc9pargner intelligemment",icon:Tm,color:"from-green-500 to-emerald-600",iconBg:"bg-green-100",iconColor:"text-green-600",path:"/ab-epargne"},{id:"ab-logement",title:"AB Logement",description:"Votre maison de r\xeave",icon:Uu,color:"from-purple-500 to-indigo-600",iconBg:"bg-purple-100",iconColor:"text-purple-600",path:"/ab-logement"},{id:"coaching",title:"Coaching Finance",description:"D\xe9veloppez votre business",icon:Ph,color:"from-orange-500 to-red-600",iconBg:"bg-orange-100",iconColor:"text-orange-600",path:"/coaching-finance"}];return(0,i.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 pb-24",children:[(0,i.jsx)("div",{className:"bg-white/80 backdrop-blur-lg shadow-lg border-b border-white/50 sticky top-0 z-30",children:(0,i.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{className:"flex items-center gap-4",children:[(0,i.jsx)("div",{className:"p-3 bg-gradient-to-br from-blue-500 to-purple-600 rounded-2xl shadow-lg",children:(0,i.jsx)(Uu,{size:32,className:"text-white"})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900 font-montserrat",children:"Tableau de bord"}),(0,i.jsxs)("p",{className:"text-sm sm:text-base text-gray-600 font-montserrat",children:["Bonjour ",(null===s||void 0===s?void 0:s.first_name)||(null===s||void 0===s||null===(e=s.user_metadata)||void 0===e?void 0:e.first_name)||"Utilisateur"," \ud83d\udc4b"]})]})]}),(0,i.jsxs)("button",{onClick:()=>o(),disabled:l,className:"flex items-center gap-2 px-3 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-xl transition-colors text-sm",children:[(0,i.jsx)(Js.A,{size:16,className:l?"animate-spin":""}),(0,i.jsx)("span",{className:"hidden sm:inline",children:"Actualiser"})]})]})})}),(0,i.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[n?(0,i.jsx)(_m,{}):(0,i.jsxs)(i.Fragment,{children:[l&&(0,i.jsxs)("div",{className:"flex items-center justify-center gap-2 py-2 mb-4 text-gray-500 text-sm",children:[(0,i.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-blue-500 border-t-transparent"}),(0,i.jsx)("span",{children:"Mise \xe0 jour..."})]}),(0,i.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6 mb-8",children:[(0,i.jsxs)("div",{className:"bg-gradient-to-br from-yellow-500 to-orange-600 text-white rounded-2xl shadow-lg border border-yellow-400/50 p-4 sm:p-6 flex flex-col justify-between hover:shadow-xl transition-all duration-300",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,i.jsx)("div",{className:"p-2 sm:p-3 bg-white/20 rounded-xl",children:(0,i.jsx)(Im,{size:20})}),(0,i.jsx)("span",{className:"text-xs font-medium text-yellow-100",children:"Score"})]}),(0,i.jsx)("p",{className:"text-2xl sm:text-3xl font-bold font-montserrat mb-1",children:r.loyaltyScore}),(0,i.jsx)("p",{className:"text-sm text-yellow-100 font-montserrat",children:"/ 5 points"}),(0,i.jsx)("div",{className:"flex mt-2",children:[...Array(5)].map((e,t)=>(0,i.jsx)(uh,{className:"w-3 h-3 sm:w-4 sm:h-4 ".concat(t<r.loyaltyScore?"text-white fill-current":"text-yellow-300/30")},t))})]}),(0,i.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 p-4 sm:p-6 flex flex-col justify-between hover:shadow-xl transition-all duration-300",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,i.jsx)("div",{className:"p-2 sm:p-3 bg-blue-100 rounded-xl",children:(0,i.jsx)(Bu.A,{size:20,className:"text-blue-600"})}),(0,i.jsx)("span",{className:"text-xs font-medium text-gray-500",children:"Actifs"})]}),(0,i.jsx)("p",{className:"text-2xl sm:text-3xl font-bold text-gray-900 font-montserrat mb-1",children:r.activeLoans}),(0,i.jsxs)("p",{className:"text-sm text-gray-600 font-montserrat",children:["Pr\xeat",r.activeLoans>1?"s":""," en cours"]})]}),(0,i.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 p-4 sm:p-6 flex flex-col justify-between hover:shadow-xl transition-all duration-300",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,i.jsx)("div",{className:"p-2 sm:p-3 bg-green-100 rounded-xl",children:(0,i.jsx)(Tm,{size:20,className:"text-green-600"})}),(0,i.jsx)("span",{className:"text-xs font-medium text-gray-500",children:"Compte \xc9pargne"})]}),(0,i.jsx)("p",{className:"text-2xl sm:text-3xl font-bold text-gray-900 font-montserrat mb-1",children:(0,Tu.vv)(r.savingsBalance)}),(0,i.jsx)("p",{className:"text-sm text-gray-600 font-montserrat",children:"Solde disponible"})]}),(0,i.jsxs)("div",{className:"bg-gradient-to-br from-orange-500 to-red-600 text-white rounded-2xl shadow-lg border border-orange-400/50 p-4 sm:p-6 flex flex-col justify-between hover:shadow-xl transition-all duration-300",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,i.jsx)("div",{className:"p-2 sm:p-3 bg-white/20 rounded-xl",children:(0,i.jsx)(wu,{size:20})}),(0,i.jsx)("span",{className:"text-xs font-medium text-orange-100",children:r.daysUntilNextPayment<0?"Retard":0===r.daysUntilNextPayment?"Aujourd'hui":"".concat(r.daysUntilNextPayment,"j")})]}),(0,i.jsx)("p",{className:"text-2xl sm:text-3xl font-bold font-montserrat mb-1",children:(0,Tu.vv)(r.nextPayment)}),(0,i.jsx)("p",{className:"text-sm text-orange-100 font-montserrat",children:"Prochain paiement"})]})]})]}),(0,i.jsx)("h2",{className:"text-xl font-bold text-gray-900 font-montserrat mb-4",children:"Nos Services"}),(0,i.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6 mb-8",children:c.map(e=>(0,i.jsxs)("button",{onClick:()=>t(e.path),className:"relative flex flex-col items-start p-6 bg-white rounded-2xl shadow-lg border border-gray-100 hover:shadow-xl transition-all duration-300 group overflow-hidden text-left",children:[(0,i.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br ".concat(e.color," opacity-0 group-hover:opacity-10 transition-opacity duration-300")}),(0,i.jsxs)("div",{className:"relative z-10 flex items-center justify-between w-full mb-4",children:[(0,i.jsx)("div",{className:"p-3 ".concat(e.iconBg," rounded-xl group-hover:scale-110 transition-transform duration-300"),children:(0,i.jsx)(e.icon,{size:24,className:e.iconColor})}),e.badge&&(0,i.jsx)("span",{className:"px-3 py-1 bg-blue-500 text-white text-xs font-bold rounded-full shadow-sm",children:e.badge})]}),(0,i.jsx)("h3",{className:"relative z-10 text-lg font-bold text-gray-900 font-montserrat mb-1",children:e.title}),(0,i.jsx)("p",{className:"relative z-10 text-sm text-gray-600 font-montserrat mb-4",children:e.description}),(0,i.jsx)(ur,{size:20,className:"absolute bottom-6 right-6 text-gray-400 group-hover:text-blue-600 transition-all duration-300 group-hover:translate-x-1"})]},e.id))}),(0,i.jsx)("div",{className:"flex justify-center",children:(0,i.jsxs)("button",{onClick:()=>t("/loan-request"),className:"flex items-center gap-3 px-8 py-4 bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white rounded-2xl font-bold text-lg shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105",children:[(0,i.jsx)(Rm,{size:24}),(0,i.jsx)("span",{children:"Nouvelle demande de pr\xeat"})]})})]}),(0,i.jsx)(qh,{})]})};var Dm=s(5275);const Lm=(0,mt.A)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),zm=()=>{const{user:e}=dt(),t=(0,We.Zp)(),{isConnected:s}=(()=>{const{addNotification:e}=yt(),{user:t}=dt(),[s,n]=(0,r.useState)(!1),[a]=(0,r.useState)(new Set);return(0,r.useEffect)(()=>{if(!t)return;const s="admin"===(null===t||void 0===t?void 0:t.role),r=null===t||void 0===t?void 0:t.id;console.log("[REALTIME] ".concat(s?"Admin":"Utilisateur"," connect\xe9, ID: ").concat(r));const i=ot.ND.channel("loans_changes").on("postgres_changes",{event:"INSERT",schema:"public",table:"loans"},t=>{console.log("[REALTIME] Nouvelle demande de pr\xeat:",t.new),a.has(t.new.id)||(a.add(t.new.id),s&&e({title:"\ud83d\udea8 Nouvelle demande de pr\xeat",message:"Demande de ".concat(new Intl.NumberFormat("fr-FR",{style:"currency",currency:"XOF"}).format(t.new.amount)," - ").concat(t.new.purpose||"Objectif non sp\xe9cifi\xe9"),type:"info",priority:"high",forAdmin:!0,data:{loan_id:t.new.id,amount:t.new.amount,purpose:t.new.purpose,status:t.new.status,created_at:t.new.created_at},action:"Voir la demande"}))}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"loans"},t=>{if(console.log("[REALTIME] Mise \xe0 jour de pr\xeat:",t.new),t.old.status!==t.new.status){let n="",a="info",i="";switch(t.new.status){case"approved":n="Pr\xeat approuv\xe9 pour ".concat(new Intl.NumberFormat("fr-FR",{style:"currency",currency:"XOF"}).format(t.new.amount)," FCFA"),a="success",i="\u2705 Pr\xeat approuv\xe9";break;case"rejected":n="Pr\xeat rejet\xe9 pour ".concat(new Intl.NumberFormat("fr-FR",{style:"currency",currency:"XOF"}).format(t.new.amount)," FCFA"),a="error",i="\u274c Pr\xeat rejet\xe9";break;case"active":n="Pr\xeat activ\xe9 pour ".concat(new Intl.NumberFormat("fr-FR",{style:"currency",currency:"XOF"}).format(t.new.amount)," FCFA"),a="success",i="\ud83d\ude80 Pr\xeat activ\xe9";break;default:return}s&&e({title:"Statut de pr\xeat mis \xe0 jour",message:"".concat(n," - Utilisateur: ").concat(t.new.user_id),type:a,priority:"medium",forAdmin:!0,data:t.new}),s||t.new.user_id!==r||e({title:i,message:n,type:a,priority:"high",forUser:!0,userId:r,data:t.new,action:"Voir les d\xe9tails"})}}).subscribe(e=>{console.log("[REALTIME] Statut de la connexion loans:",e),n("SUBSCRIBED"===e)});if(s){const t=ot.ND.channel("users_changes").on("postgres_changes",{event:"INSERT",schema:"public",table:"users"},t=>{console.log("[REALTIME] Nouvel utilisateur (admin):",t.new),a.has(t.new.id)||(a.add(t.new.id),e({title:"\ud83d\udc64 Nouvel utilisateur inscrit",message:"".concat(t.new.first_name," ").concat(t.new.last_name," - ").concat(t.new.phone_number),type:"info",priority:"medium",forAdmin:!0,data:{user_id:t.new.id,first_name:t.new.first_name,last_name:t.new.last_name,phone_number:t.new.phone_number,status:t.new.status,created_at:t.new.created_at},action:"Voir le profil"}))}).subscribe(e=>{console.log("[REALTIME] Statut de la connexion users (admin):",e)});return()=>{console.log("[REALTIME] Nettoyage des abonnements (admin)"),i.unsubscribe(),t.unsubscribe()}}return()=>{console.log("[REALTIME] Nettoyage des abonnements (utilisateur)"),i.unsubscribe()}},[e,null===t||void 0===t?void 0:t.role,null===t||void 0===t?void 0:t.id]),{isConnected:s}})(),[n,a]=(0,r.useState)(!1),[o,l]=(0,r.useState)(null),[c,d]=(0,r.useState)({totalUsers:0,totalLoans:0,totalAmount:0,totalInterestCollected:0,pendingRequests:0,activeLoans:0,completedLoans:0,totalSavings:0,activeSavingsPlans:0}),[u,h]=(0,r.useState)([]);(0,r.useEffect)(()=>{m()},[]);const m=async()=>{try{a(!0),l(null),console.log("[ADMIN_DASHBOARD] \ud83d\udce5 Chargement des donn\xe9es...");const[e,t,s]=await Promise.all([(0,lt.CF)(),(0,lt.Or)(),ot.ND.from("savings_plans").select("*")]);console.log("[ADMIN_DASHBOARD] \u2705 Donn\xe9es charg\xe9es");const r=e.success?e.data.length:0;let n=0,i=0,o=0,c=0,u=0,m=0,p=[];if(t.success){const e=t.data||[];n=e.length;const s=e=>e.approved_at&&"pending"!==e.status&&"rejected"!==e.status,r=e=>e.approved_at&&"completed"!==e.status&&"rejected"!==e.status&&"pending"!==e.status;u=e.filter(r).length,i=e.filter(s).reduce((e,t)=>e+(t.amount||0),0);const a=e.filter(e=>"completed"===e.status&&e.approved_at);o=a.reduce((e,t)=>e+Math.round((t.amount||0)*((t.interest_rate||0)/100)),0),c=e.filter(e=>"pending"===e.status).length,m=a.length,p=e.slice(0,5).map(e=>{var t,s;return{id:e.id,type:"loan",status:e.status,user:{firstName:(null===(t=e.users)||void 0===t?void 0:t.first_name)||"Utilisateur",lastName:(null===(s=e.users)||void 0===s?void 0:s.last_name)||"Inconnu"},amount:e.amount||0,date:e.created_at,description:e.purpose||"Pr\xeat"}})}let f=0,x=0,g=[];if(s.data){const e=s.data||[];f=e.reduce((e,t)=>e+(t.current_balance||0),0),x=e.filter(e=>"active"===e.status).length,g=e.slice(0,3).map(e=>({id:e.id,type:"savings",status:e.status,amount:e.current_balance||0,target:e.total_amount_target||0,date:e.created_at,description:"Plan d'\xe9pargne"}))}const v=[...p,...g].sort((e,t)=>new Date(t.date)-new Date(e.date)).slice(0,8);d({totalUsers:r,totalLoans:n,totalAmount:i,totalInterestCollected:o,pendingRequests:c,activeLoans:u,completedLoans:m,totalSavings:f,activeSavingsPlans:x}),h(v)}catch(o){console.error("[ADMIN_DASHBOARD] \u274c Erreur:",o),l(o.message||"Une erreur est survenue")}finally{a(!1)}},p=e=>{if("loan"===e.type){if("pending"===e.status)return(0,i.jsx)(wu,{size:16,className:"text-yellow-600"});if("active"===e.status||"approved"===e.status)return(0,i.jsx)(Pm.A,{size:16,className:"text-blue-600"});if("completed"===e.status)return(0,i.jsx)(ht.A,{size:16,className:"text-green-600"})}return"savings"===e.type?(0,i.jsx)(Tm,{size:16,className:"text-purple-600"}):(0,i.jsx)(Bu.A,{size:16,className:"text-gray-600"})},f=e=>{if("loan"===e.type){if("pending"===e.status)return(0,i.jsx)("span",{className:"px-2 py-0.5 bg-yellow-100 text-yellow-700 rounded-full text-[10px] font-semibold",children:"En attente"});if("active"===e.status||"approved"===e.status)return(0,i.jsx)("span",{className:"px-2 py-0.5 bg-blue-100 text-blue-700 rounded-full text-[10px] font-semibold",children:"Actif"});if("completed"===e.status)return(0,i.jsx)("span",{className:"px-2 py-0.5 bg-green-100 text-green-700 rounded-full text-[10px] font-semibold",children:"Rembours\xe9"})}return"savings"===e.type?(0,i.jsx)("span",{className:"px-2 py-0.5 bg-purple-100 text-purple-700 rounded-full text-[10px] font-semibold",children:"\xc9pargne"}):null},x=[{title:"AB Pret",description:"G\xe9rer les demandes de pr\xeats",icon:Bu.A,color:"from-blue-500 to-purple-600",iconBg:"bg-blue-100",iconColor:"text-blue-600",path:"/admin/loan-requests",badge:c.pendingRequests>0?"".concat(c.pendingRequests," en attente"):null},{title:"AB Epargne",description:"G\xe9rer les comptes d'\xe9pargne",icon:Tm,color:"from-green-500 to-emerald-600",iconBg:"bg-green-100",iconColor:"text-green-600",path:"/admin/ab-epargne",badge:c.activeSavingsPlans>0?"".concat(c.activeSavingsPlans," actifs"):null},{title:"Analytics",description:"Voir les statistiques",icon:Dm.A,color:"from-orange-500 to-red-600",iconBg:"bg-orange-100",iconColor:"text-orange-600",path:"/admin/analytics"},{title:"Utilisateurs",description:"G\xe9rer les clients",icon:Lm,color:"from-purple-500 to-pink-600",iconBg:"bg-purple-100",iconColor:"text-purple-600",path:"/admin/user-management"}];return o?(0,i.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 flex items-center justify-center p-4",children:(0,i.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8 max-w-md w-full text-center",children:[(0,i.jsx)("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,i.jsx)(pt,{size:32,className:"text-red-600"})}),(0,i.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Erreur de chargement"}),(0,i.jsx)("p",{className:"text-gray-600 mb-6",children:o}),(0,i.jsxs)("button",{onClick:m,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl transition-colors",children:[(0,i.jsx)(Js.A,{size:18}),"R\xe9essayer"]})]})}):(0,i.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 pb-24",children:[(0,i.jsx)("div",{className:"bg-white/80 backdrop-blur-lg shadow-lg border-b border-white/50 sticky top-0 z-30",children:(0,i.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{className:"flex items-center gap-4",children:[(0,i.jsx)("div",{className:"p-3 bg-gradient-to-br from-blue-500 to-purple-600 rounded-2xl shadow-lg",children:(0,i.jsx)(Uu,{size:32,className:"text-white"})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900 font-montserrat",children:"Tableau de bord"}),(0,i.jsxs)("p",{className:"text-sm sm:text-base text-gray-600 font-montserrat",children:["Bonjour ",(null===e||void 0===e?void 0:e.first_name)||"Admin"]})]})]}),(0,i.jsxs)("div",{className:"flex items-center gap-3",children:[s&&(0,i.jsxs)("div",{className:"hidden sm:flex items-center gap-2 px-3 py-1.5 bg-green-100 rounded-full",children:[(0,i.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),(0,i.jsx)("span",{className:"text-xs font-medium text-green-700",children:"En ligne"})]}),(0,i.jsxs)("button",{onClick:m,className:"flex items-center gap-2 px-3 sm:px-4 py-2 bg-white hover:bg-gray-50 border border-gray-200 rounded-xl transition-all duration-200 shadow-sm hover:shadow",children:[(0,i.jsx)(Js.A,{size:18,className:"text-gray-600"}),(0,i.jsx)("span",{className:"hidden sm:inline text-sm font-medium text-gray-700",children:"Actualiser"})]})]})]})})}),(0,i.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[n&&(0,i.jsxs)("div",{className:"flex items-center justify-center gap-2 py-2 mb-4 text-gray-500 text-sm",children:[(0,i.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-blue-500 border-t-transparent"}),(0,i.jsx)("span",{children:"Mise \xe0 jour des donn\xe9es..."})]}),(0,i.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6 mb-8 transition-opacity duration-200 ".concat(n?"opacity-75":""),children:[(0,i.jsxs)("div",{className:"bg-white rounded-2xl p-4 sm:p-6 shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-100 group",children:[(0,i.jsx)("div",{className:"flex items-start justify-between mb-3 sm:mb-4",children:(0,i.jsx)("div",{className:"p-2 sm:p-3 bg-purple-100 rounded-xl group-hover:scale-110 transition-transform duration-300",children:(0,i.jsx)(Lm,{size:20,className:"sm:w-6 sm:h-6 text-purple-600"})})}),(0,i.jsx)("p",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:c.totalUsers}),(0,i.jsx)("p",{className:"text-xs sm:text-sm text-gray-600 mt-1",children:"Utilisateurs"})]}),(0,i.jsxs)("div",{className:"bg-gradient-to-br from-blue-500 to-purple-600 rounded-2xl p-4 sm:p-6 shadow-lg hover:shadow-xl transition-all duration-300 text-white group",children:[(0,i.jsx)("div",{className:"flex items-start justify-between mb-3 sm:mb-4",children:(0,i.jsx)("div",{className:"p-2 sm:p-3 bg-white/20 rounded-xl group-hover:scale-110 transition-transform duration-300",children:(0,i.jsx)(Pm.A,{size:20,className:"sm:w-6 sm:h-6 text-white"})})}),(0,i.jsx)("p",{className:"text-2xl sm:text-3xl font-bold",children:c.activeLoans}),(0,i.jsx)("p",{className:"text-xs sm:text-sm text-blue-100 mt-1",children:"Pr\xeats actifs"})]}),(0,i.jsxs)("button",{type:"button",onClick:()=>t("/admin/analytics/detailed"),className:"w-full text-left bg-white rounded-2xl p-4 sm:p-6 shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-100 group cursor-pointer",children:[(0,i.jsxs)("div",{className:"flex items-start justify-between mb-3 sm:mb-4",children:[(0,i.jsx)("div",{className:"p-2 sm:p-3 bg-green-100 rounded-xl group-hover:scale-110 transition-transform duration-300",children:(0,i.jsx)(Ku,{size:20,className:"sm:w-6 sm:h-6 text-green-600"})}),(0,i.jsx)(qu.A,{size:18,className:"text-gray-400 group-hover:text-green-600 transition-colors flex-shrink-0 mt-1"})]}),(0,i.jsx)("p",{className:"text-lg sm:text-xl font-bold text-gray-900",children:(0,Tu.vv)(c.totalInterestCollected)}),(0,i.jsx)("p",{className:"text-xs sm:text-sm text-gray-600 mt-1",children:"Int\xe9r\xeats collect\xe9s"}),(0,i.jsxs)("p",{className:"text-xs text-green-600 font-medium mt-2 flex items-center gap-1 group-hover:underline",children:["Voir les statistiques d\xe9taill\xe9es",(0,i.jsx)(ur,{size:14,className:"inline"})]})]}),(0,i.jsxs)("div",{className:"bg-white rounded-2xl p-4 sm:p-6 shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-100 group",children:[(0,i.jsx)("div",{className:"flex items-start justify-between mb-3 sm:mb-4",children:(0,i.jsx)("div",{className:"p-2 sm:p-3 bg-yellow-100 rounded-xl group-hover:scale-110 transition-transform duration-300",children:(0,i.jsx)(wu,{size:20,className:"sm:w-6 sm:h-6 text-yellow-600"})})}),(0,i.jsx)("p",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:c.pendingRequests}),(0,i.jsx)("p",{className:"text-xs sm:text-sm text-gray-600 mt-1",children:"En attente"})]})]}),(0,i.jsxs)("div",{className:"mb-8",children:[(0,i.jsx)("h2",{className:"text-xl font-bold text-gray-900 font-montserrat mb-4",children:"Actions rapides"}),(0,i.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:x.map((e,s)=>(0,i.jsxs)("button",{onClick:()=>t(e.path),className:"group relative bg-white rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-100 overflow-hidden text-left",children:[(0,i.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br ".concat(e.color," opacity-0 group-hover:opacity-5 transition-opacity duration-300")}),(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsx)("div",{className:"inline-flex p-3 rounded-xl ".concat(e.iconBg," mb-4 group-hover:scale-110 transition-transform duration-300"),children:(0,i.jsx)(e.icon,{size:24,className:e.iconColor})}),e.badge&&(0,i.jsx)("span",{className:"absolute top-0 right-0 px-2 py-1 bg-red-500 text-white text-[10px] font-bold rounded-full",children:e.badge}),(0,i.jsx)("h3",{className:"text-lg font-bold text-gray-900 font-montserrat mb-2",children:e.title}),(0,i.jsx)("p",{className:"text-sm text-gray-600 font-montserrat mb-4",children:e.description}),(0,i.jsxs)("div",{className:"flex items-center text-primary-600 font-semibold font-montserrat group-hover:translate-x-2 transition-transform duration-300",children:[(0,i.jsx)("span",{className:"text-sm",children:"Acc\xe9der"}),(0,i.jsx)(ur,{size:16,className:"ml-2"})]})]})]},s))})]}),(0,i.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden",children:[(0,i.jsx)("div",{className:"p-4 sm:p-6 border-b border-gray-100",children:(0,i.jsx)("h2",{className:"text-xl font-bold text-gray-900 font-montserrat",children:"Activit\xe9s r\xe9centes"})}),(0,i.jsx)("div",{className:"divide-y divide-gray-100",children:0===u.length?(0,i.jsxs)("div",{className:"p-8 sm:p-12 text-center",children:[(0,i.jsx)(Pm.A,{size:48,className:"mx-auto text-gray-300 mb-4"}),(0,i.jsx)("p",{className:"text-gray-500 font-medium",children:"Aucune activit\xe9 r\xe9cente"})]}):u.map((e,s)=>{var r,n;return(0,i.jsx)("div",{className:"p-4 sm:p-6 hover:bg-gray-50 transition-colors cursor-pointer",onClick:()=>{"loan"===e.type&&t("/admin/loan-requests"),"savings"===e.type&&t("/admin/ab-epargne")},children:(0,i.jsxs)("div",{className:"flex items-start gap-3 sm:gap-4",children:[(0,i.jsx)("div",{className:"flex-shrink-0 w-10 h-10 bg-gray-100 rounded-full flex items-center justify-center",children:p(e)}),(0,i.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,i.jsxs)("div",{className:"flex items-start justify-between gap-2 mb-1",children:[(0,i.jsx)("p",{className:"text-sm sm:text-base font-semibold text-gray-900 truncate",children:"loan"===e.type?"".concat(null===(r=e.user)||void 0===r?void 0:r.firstName," ").concat(null===(n=e.user)||void 0===n?void 0:n.lastName):e.description}),f(e)]}),(0,i.jsx)("p",{className:"text-xs sm:text-sm text-gray-600 mb-2",children:"loan"===e.type?e.description:"".concat((0,Tu.vv)(e.amount)," / ").concat((0,Tu.vv)(e.target))}),(0,i.jsxs)("div",{className:"flex items-center gap-3 text-xs text-gray-500",children:[(0,i.jsx)("span",{className:"font-bold text-gray-900",children:(0,Tu.vv)(e.amount)}),(0,i.jsx)("span",{children:"\u2022"}),(0,i.jsx)("span",{children:new Date(e.date).toLocaleDateString("fr-FR")})]})]}),(0,i.jsx)(ur,{size:16,className:"flex-shrink-0 text-gray-400 group-hover:text-gray-600 transition-colors"})]})},s)})})]})]})]})},Mm=(0,mt.A)("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),Fm=(0,mt.A)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),Um=(0,mt.A)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),Bm=(0,mt.A)("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),Vm=(0,mt.A)("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]),qm=(0,mt.A)("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]),Hm=()=>{var e,t;(0,We.Zp)();const{showSuccess:s,showError:n}=yt(),[a,o]=(0,r.useState)([]),[l,d]=(0,r.useState)(!1),[u,h]=(0,r.useState)(null),[m,p]=(0,r.useState)(""),[f,x]=(0,r.useState)("all"),[g,v]=(0,r.useState)(null),[y,b]=(0,r.useState)({totalRequests:0,pending:0,active:0,completed:0,totalAmount:0});(0,r.useEffect)(()=>{j()},[]);const j=async()=>{try{d(!0),h(null),console.log("[ADMIN_LOANS] \ud83d\udce5 Chargement des demandes de pr\xeats...");const[e,t]=await Promise.all([(0,lt.Or)(),(0,lt.k5)()]);if(e.success&&t.success){const s=e.data||[],r=t.data||[];console.log("[ADMIN_LOANS] \u2705 Pr\xeats charg\xe9s:",s.length),console.log("[ADMIN_LOANS] \u2705 Paiements charg\xe9s:",r.length);const n=s.map(e=>{var t,s,n,a,i,o,l,c,d,u,h,m,p,f,x,g,v,y,b;const j=r.filter(t=>t.loan_id===e.id).reduce((e,t)=>e+(t.amount||0),0),w=e.amount?e.amount*(1+(e.interest_rate||0)/100):0,N=w-j,S=e.approved_at?new Date(e.approved_at):null,k=e.duration_months||30,A=S?new Date(S.getTime()+24*k*60*60*1e3):null;return{id:e.id,userId:e.user_id,user:{id:e.user_id,firstName:(null===(t=e.users)||void 0===t?void 0:t.first_name)||"Utilisateur",lastName:(null===(s=e.users)||void 0===s?void 0:s.last_name)||"Inconnu",email:(null===(n=e.users)||void 0===n?void 0:n.email)||"email@inconnu.com",phone:(null===(a=e.users)||void 0===a?void 0:a.phone_number)||"Non sp\xe9cifi\xe9",dateOfBirth:null===(i=e.users)||void 0===i?void 0:i.date_of_birth,gender:null===(o=e.users)||void 0===o?void 0:o.gender,address:null===(l=e.users)||void 0===l?void 0:l.address,city:null===(c=e.users)||void 0===c?void 0:c.city,university:null===(d=e.users)||void 0===d?void 0:d.university,studentId:null===(u=e.users)||void 0===u?void 0:u.student_id,temoinName:null===(h=e.users)||void 0===h?void 0:h.temoin_name,temoinPhone:null===(m=e.users)||void 0===m?void 0:m.temoin_phone,temoinQuartier:null===(p=e.users)||void 0===p?void 0:p.temoin_quartier,identityCardUrl:null===(f=e.users)||void 0===f?void 0:f.identity_card_url,studentCardUrl:null===(x=e.users)||void 0===x?void 0:x.student_card_url,temoinIdentityCardUrl:null===(g=e.users)||void 0===g?void 0:g.temoin_identity_card_url,profileImageUrl:null===(v=e.users)||void 0===v?void 0:v.profile_image_url,status:null===(y=e.users)||void 0===y?void 0:y.status,createdAt:null===(b=e.users)||void 0===b?void 0:b.created_at},amount:e.amount||0,totalAmount:Math.round(w),paidAmount:Math.round(j),remainingAmount:Math.round(N),duration:e.duration_months||0,purpose:e.purpose||"Non sp\xe9cifi\xe9",status:e.status||"pending",requestDate:e.created_at||(new Date).toISOString(),dueDate:A?A.toISOString():null,guarantee:e.guarantee||"Non sp\xe9cifi\xe9e",employment_status:e.employment_status||"Non sp\xe9cifi\xe9",momoNumber:e.momo_number||"Non sp\xe9cifi\xe9",momoNetwork:e.momo_network||"Non sp\xe9cifi\xe9",momoName:e.momo_name||"Non sp\xe9cifi\xe9",interest_rate:e.interest_rate||0,monthly_payment:e.monthly_payment||0,approved_by:e.approved_by,approved_at:e.approved_at}});o(n);const a=n.filter(e=>"pending"===e.status).length,i=n.filter(e=>"active"===e.status||"approved"===e.status).length,l=n.filter(e=>"completed"===e.status).length,c=n.reduce((e,t)=>e+t.amount,0);b({totalRequests:n.length,pending:a,active:i,completed:l,totalAmount:c})}else console.error("[ADMIN_LOANS] \u274c Erreur:",{loans:e.error,payments:t.error}),h("Erreur lors du chargement des demandes")}catch(u){console.error("[ADMIN_LOANS] \u274c Erreur:",u),h(u.message||"Une erreur est survenue")}finally{d(!1)}},w=a.reduce((e,t)=>{const s=t.userId;return e[s]||(e[s]={user:t.user,loans:[],stats:{newRequests:0,activeLoans:0,completedLoans:0,totalBorrowed:0,totalPaid:0,activeLoanAmount:0,activeLoanInterest:0}}),e[s].loans.push(t),"pending"===t.status&&e[s].stats.newRequests++,"active"!==t.status&&"approved"!==t.status||(e[s].stats.activeLoans++,e[s].stats.activeLoanAmount+=t.amount||0,e[s].stats.activeLoanInterest+=Math.round((t.amount||0)*((t.interest_rate||0)/100))),"completed"===t.status&&e[s].stats.completedLoans++,e[s].stats.totalBorrowed+=t.amount,e[s].stats.totalPaid+=t.paidAmount,e},{}),N=Object.values(w).filter(e=>{const t=!m||((t,s,r,n)=>{const a=m.toLowerCase();return(null===(t=e.user.firstName)||void 0===t?void 0:t.toLowerCase().includes(a))||(null===(s=e.user.lastName)||void 0===s?void 0:s.toLowerCase().includes(a))||(null===(r=e.user.email)||void 0===r?void 0:r.toLowerCase().includes(a))||(null===(n=e.user.phone)||void 0===n?void 0:n.includes(a))})(),s="all"===f||("pending"===f?e.stats.newRequests>0:"active"===f?e.stats.activeLoans>0:"completed"!==f||e.stats.completedLoans>0&&0===e.stats.newRequests&&0===e.stats.activeLoans);return t&&s}),S=e=>e.newRequests>0?(0,i.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 sm:px-3 py-1 rounded-full text-[10px] sm:text-xs font-semibold bg-yellow-100 text-yellow-700 whitespace-nowrap",children:[(0,i.jsx)(wu,{size:12,className:"sm:w-3.5 sm:h-3.5 flex-shrink-0"}),(0,i.jsxs)("span",{className:"hidden sm:inline",children:[e.newRequests," Nouvelle",e.newRequests>1?"s":""," demande",e.newRequests>1?"s":""]}),(0,i.jsxs)("span",{className:"sm:hidden",children:[e.newRequests," Nouv."]})]}):e.activeLoans>0?(0,i.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 sm:px-3 py-1 rounded-full text-[10px] sm:text-xs font-semibold bg-blue-100 text-blue-700 whitespace-nowrap",children:[(0,i.jsx)(Pm.A,{size:12,className:"sm:w-3.5 sm:h-3.5 flex-shrink-0"}),(0,i.jsxs)("span",{className:"hidden sm:inline",children:[e.activeLoans," Pr\xeat",e.activeLoans>1?"s":""," en cours"]}),(0,i.jsxs)("span",{className:"sm:hidden",children:[e.activeLoans," Actif",e.activeLoans>1?"s":""]})]}):e.completedLoans>0?(0,i.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 sm:px-3 py-1 rounded-full text-[10px] sm:text-xs font-semibold bg-green-100 text-green-700 whitespace-nowrap",children:[(0,i.jsx)(ht.A,{size:12,className:"sm:w-3.5 sm:h-3.5 flex-shrink-0"}),(0,i.jsxs)("span",{className:"hidden sm:inline",children:[e.completedLoans," Pr\xeat",e.completedLoans>1?"s":""," rembours\xe9",e.completedLoans>1?"s":""]}),(0,i.jsxs)("span",{className:"sm:hidden",children:[e.completedLoans," OK"]})]}):null;return u?(0,i.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 flex items-center justify-center p-4",children:(0,i.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8 max-w-md w-full text-center",children:[(0,i.jsx)("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,i.jsx)(Mm,{size:32,className:"text-red-600"})}),(0,i.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Erreur de chargement"}),(0,i.jsx)("p",{className:"text-gray-600 mb-6",children:u}),(0,i.jsxs)("button",{onClick:j,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl transition-colors",children:[(0,i.jsx)(Js.A,{size:18}),"R\xe9essayer"]})]})}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 pb-24",children:[(0,i.jsx)("div",{className:"bg-white/80 backdrop-blur-lg shadow-lg border-b border-white/50 sticky top-0 z-30",children:(0,i.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{className:"flex items-center gap-4",children:[(0,i.jsx)("div",{className:"p-3 bg-gradient-to-br from-blue-500 to-purple-600 rounded-2xl shadow-lg",children:(0,i.jsx)(Bu.A,{size:32,className:"text-white"})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h1",{className:"text-3xl font-bold text-gray-900 font-montserrat",children:"AB Pret"}),(0,i.jsx)("p",{className:"text-gray-600 font-montserrat",children:"Gestion des demandes de pr\xeats"})]})]}),(0,i.jsxs)("button",{onClick:j,className:"flex items-center gap-2 px-4 py-2 bg-white hover:bg-gray-50 border border-gray-200 rounded-xl transition-all duration-200 shadow-sm hover:shadow",children:[(0,i.jsx)(Js.A,{size:18,className:"text-gray-600"}),(0,i.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Actualiser"})]})]})})}),(0,i.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[l&&(0,i.jsxs)("div",{className:"flex items-center justify-center gap-2 py-2 mb-4 text-gray-500 text-sm",children:[(0,i.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-blue-500 border-t-transparent"}),(0,i.jsx)("span",{children:"Chargement des demandes..."})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8 transition-opacity duration-200 ".concat(l?"opacity-75":""),children:[(0,i.jsxs)("div",{className:"bg-white rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-100 group",children:[(0,i.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,i.jsx)("div",{className:"p-3 bg-yellow-100 rounded-xl group-hover:scale-110 transition-transform duration-300",children:(0,i.jsx)(wu,{size:24,className:"text-yellow-600"})}),(0,i.jsxs)("div",{className:"text-right",children:[(0,i.jsx)("p",{className:"text-sm text-gray-600 font-medium",children:"En attente"}),(0,i.jsx)("p",{className:"text-3xl font-bold text-gray-900 mt-1",children:y.pending})]})]}),(0,i.jsx)("div",{className:"pt-4 border-t border-gray-100",children:(0,i.jsx)("span",{className:"text-xs text-gray-500",children:"Nouvelles demandes"})})]}),(0,i.jsxs)("div",{className:"bg-gradient-to-br from-blue-500 to-purple-600 rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 text-white group",children:[(0,i.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,i.jsx)("div",{className:"p-3 bg-white/20 rounded-xl group-hover:scale-110 transition-transform duration-300",children:(0,i.jsx)(Pm.A,{size:24,className:"text-white"})}),(0,i.jsxs)("div",{className:"text-right",children:[(0,i.jsx)("p",{className:"text-sm text-blue-100 font-medium",children:"Pr\xeats actifs"}),(0,i.jsx)("p",{className:"text-3xl font-bold mt-1",children:y.active})]})]}),(0,i.jsxs)("div",{className:"flex items-center gap-2 pt-4 border-t border-white/20",children:[(0,i.jsx)(Dm.A,{size:16,className:"text-blue-200"}),(0,i.jsx)("span",{className:"text-sm text-blue-100",children:"En cours de remboursement"})]})]}),(0,i.jsxs)("div",{className:"bg-white rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-100 group",children:[(0,i.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,i.jsx)("div",{className:"p-3 bg-green-100 rounded-xl group-hover:scale-110 transition-transform duration-300",children:(0,i.jsx)(ht.A,{size:24,className:"text-green-600"})}),(0,i.jsxs)("div",{className:"text-right",children:[(0,i.jsx)("p",{className:"text-sm text-gray-600 font-medium",children:"Rembours\xe9s"}),(0,i.jsx)("p",{className:"text-3xl font-bold text-gray-900 mt-1",children:y.completed})]})]}),(0,i.jsx)("div",{className:"pt-4 border-t border-gray-100",children:(0,i.jsx)("span",{className:"text-xs text-gray-500",children:"Pr\xeats termin\xe9s"})})]}),(0,i.jsxs)("div",{className:"bg-white rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-100 group",children:[(0,i.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,i.jsx)("div",{className:"p-3 bg-purple-100 rounded-xl group-hover:scale-110 transition-transform duration-300",children:(0,i.jsx)(Ku,{size:24,className:"text-purple-600"})}),(0,i.jsxs)("div",{className:"text-right",children:[(0,i.jsx)("p",{className:"text-sm text-gray-600 font-medium",children:"Montant total"}),(0,i.jsx)("p",{className:"text-xl font-bold text-gray-900 mt-1",children:(0,Tu.vv)(y.totalAmount)})]})]}),(0,i.jsx)("div",{className:"pt-4 border-t border-gray-100",children:(0,i.jsx)("span",{className:"text-xs text-gray-500",children:"Tous les pr\xeats"})})]})]}),(0,i.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 p-4 mb-6",children:[(0,i.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,i.jsxs)("div",{className:"flex-1 relative",children:[(0,i.jsx)(Fm,{size:20,className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,i.jsx)("input",{type:"text",placeholder:"Rechercher par nom, email ou t\xe9l\xe9phone...",value:m,onChange:e=>p(e.target.value),className:"w-full pl-12 pr-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent font-montserrat"})]}),(0,i.jsxs)("div",{className:"flex items-center gap-2 sm:min-w-[250px]",children:[(0,i.jsx)(Um,{size:20,className:"text-gray-400 flex-shrink-0"}),(0,i.jsxs)("select",{value:f,onChange:e=>x(e.target.value),className:"flex-1 px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent font-montserrat bg-white cursor-pointer",children:[(0,i.jsx)("option",{value:"all",children:"Tous les statuts"}),(0,i.jsx)("option",{value:"pending",children:"\ud83d\udfe1 Demandes en attente"}),(0,i.jsx)("option",{value:"active",children:"\ud83d\udd35 Pr\xeats en cours"}),(0,i.jsx)("option",{value:"completed",children:"\ud83d\udfe2 Pr\xeats rembours\xe9s"})]})]})]}),(m||"all"!==f)&&(0,i.jsxs)("div",{className:"flex items-center gap-2 mt-3 pt-3 border-t border-gray-100",children:[(0,i.jsx)("span",{className:"text-sm text-gray-600",children:"Filtres actifs:"}),m&&(0,i.jsxs)("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-xs font-medium",children:['Recherche: "',m,'"',(0,i.jsx)("button",{onClick:()=>p(""),className:"hover:bg-blue-200 rounded-full p-0.5 transition-colors",children:(0,i.jsx)(xt,{size:12})})]}),"all"!==f&&(0,i.jsxs)("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-purple-100 text-purple-700 rounded-full text-xs font-medium",children:["Statut: ","pending"===f?"En attente":"active"===f?"En cours":"Rembours\xe9s",(0,i.jsx)("button",{onClick:()=>x("all"),className:"hover:bg-purple-200 rounded-full p-0.5 transition-colors",children:(0,i.jsx)(xt,{size:12})})]}),(0,i.jsx)("button",{onClick:()=>{p(""),x("all")},className:"ml-auto text-xs text-gray-500 hover:text-gray-700 font-medium",children:"R\xe9initialiser tout"})]})]}),(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,i.jsxs)("h2",{className:"text-xl font-bold text-gray-900 font-montserrat",children:["Clients (",N.length,")"]})}),0===N.length?(0,i.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 p-12 text-center",children:[(0,i.jsx)(cr,{size:64,className:"mx-auto text-gray-300 mb-4"}),(0,i.jsx)("p",{className:"text-gray-500 font-medium",children:"Aucun client trouv\xe9"}),m&&(0,i.jsx)("button",{onClick:()=>p(""),className:"mt-4 text-blue-600 hover:text-blue-700 font-medium",children:"Effacer la recherche"})]}):(0,i.jsx)("div",{className:"grid grid-cols-1 gap-4",children:N.map(e=>{var t,s;return(0,i.jsx)("div",{className:"bg-white rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-100 overflow-hidden group cursor-pointer",onClick:()=>v(e),children:(0,i.jsxs)("div",{className:"p-4 sm:p-6",children:[(0,i.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-3 mb-4",children:[(0,i.jsxs)("div",{className:"flex items-start gap-3 min-w-0 flex-1",children:[(0,i.jsxs)("div",{className:"w-12 h-12 sm:w-14 sm:h-14 bg-gradient-to-br from-blue-400 to-purple-500 rounded-full flex items-center justify-center text-white font-bold text-lg sm:text-xl shadow-lg flex-shrink-0",children:[(null===(t=e.user.firstName)||void 0===t?void 0:t[0])||"?",(null===(s=e.user.lastName)||void 0===s?void 0:s[0])||""]}),(0,i.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,i.jsxs)("h3",{className:"text-base sm:text-lg font-bold text-gray-900 font-montserrat truncate",children:[e.user.firstName," ",e.user.lastName]}),(0,i.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-3 mt-1",children:[(0,i.jsxs)("div",{className:"flex items-center gap-1 text-xs sm:text-sm text-gray-500 min-w-0",children:[(0,i.jsx)(fh,{size:12,className:"flex-shrink-0"}),(0,i.jsx)("span",{className:"truncate",children:e.user.email})]}),e.user.phone&&(0,i.jsxs)("div",{className:"flex items-center gap-1 text-xs sm:text-sm text-gray-500",children:[(0,i.jsx)(ph,{size:12,className:"flex-shrink-0"}),(0,i.jsx)("span",{children:e.user.phone})]})]})]})]}),(0,i.jsx)("div",{className:"flex-shrink-0",children:S(e.stats)})]}),(0,i.jsxs)("div",{className:"grid grid-cols-3 gap-2 sm:gap-4 mb-4",children:[(0,i.jsxs)("div",{className:"bg-yellow-50 rounded-xl p-2 sm:p-3 text-center",children:[(0,i.jsx)("p",{className:"text-xl sm:text-2xl font-bold text-yellow-700",children:e.stats.newRequests}),(0,i.jsx)("p",{className:"text-[10px] sm:text-xs text-gray-600 mt-1",children:"Nouvelles"})]}),(0,i.jsxs)("div",{className:"bg-blue-50 rounded-xl p-2 sm:p-3 text-center",children:[(0,i.jsx)("p",{className:"text-xl sm:text-2xl font-bold text-blue-700",children:e.stats.activeLoans}),(0,i.jsx)("p",{className:"text-[10px] sm:text-xs text-gray-600 mt-1",children:"En cours"})]}),(0,i.jsxs)("div",{className:"bg-green-50 rounded-xl p-2 sm:p-3 text-center",children:[(0,i.jsx)("p",{className:"text-xl sm:text-2xl font-bold text-green-700",children:e.stats.completedLoans}),(0,i.jsx)("p",{className:"text-[10px] sm:text-xs text-gray-600 mt-1",children:"Rembours\xe9s"})]})]}),(0,i.jsxs)("div",{className:"flex flex-col gap-3 pt-4 border-t border-gray-100",children:[(0,i.jsxs)("div",{className:"flex flex-wrap items-center gap-x-4 gap-y-1 text-xs sm:text-sm text-gray-600",children:[(0,i.jsxs)("span",{className:"truncate",children:["Total emprunt\xe9: ",(0,i.jsx)("span",{className:"font-bold text-gray-900",children:(0,Tu.vv)(e.stats.totalBorrowed)})]}),(0,i.jsxs)("span",{className:"truncate",children:["Total pay\xe9: ",(0,i.jsx)("span",{className:"font-bold text-green-600",children:(0,Tu.vv)(e.stats.totalPaid)})]}),e.stats.activeLoans>0&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("span",{className:"truncate",children:["Pr\xeat en cours: ",(0,i.jsx)("span",{className:"font-bold text-blue-700",children:(0,Tu.vv)(e.stats.activeLoanAmount)})]}),(0,i.jsxs)("span",{className:"truncate",children:["Int\xe9r\xeat \xe0 rembourser: ",(0,i.jsx)("span",{className:"font-bold text-orange-600",children:(0,Tu.vv)(e.stats.activeLoanInterest)})]})]})]}),(0,i.jsxs)("button",{className:"flex items-center justify-center gap-2 px-3 sm:px-4 py-2 bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white rounded-xl transition-all duration-200 shadow-md hover:shadow-lg w-full sm:w-auto",children:[(0,i.jsx)(vh,{size:16}),(0,i.jsx)("span",{className:"text-sm font-medium",children:"Voir le profil"})]})]})]})},e.user.id)})})]})]})]}),g&&(0,i.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md z-50 flex items-center justify-center p-4 overflow-y-auto",children:(0,i.jsxs)("div",{className:"bg-white rounded-3xl shadow-2xl max-w-6xl w-full my-8 max-h-[95vh] overflow-hidden",children:[(0,i.jsx)("div",{className:"sticky top-0 bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-600 text-white p-6 rounded-t-3xl z-10",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{className:"flex items-center gap-4",children:[(0,i.jsxs)("div",{className:"w-16 h-16 bg-white/20 backdrop-blur-sm rounded-2xl flex items-center justify-center text-white font-bold text-2xl shadow-lg",children:[null===(e=g.user.firstName)||void 0===e?void 0:e[0],null===(t=g.user.lastName)||void 0===t?void 0:t[0]]}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("h3",{className:"text-2xl font-bold",children:[g.user.firstName," ",g.user.lastName]}),(0,i.jsxs)("p",{className:"text-indigo-100 flex items-center gap-2",children:[(0,i.jsx)(cr,{size:16}),g.loans.length," demande",g.loans.length>1?"s":""," de pr\xeat"]})]})]}),(0,i.jsx)("button",{onClick:()=>v(null),className:"p-3 hover:bg-white/20 rounded-2xl transition-all duration-200 hover:scale-105",children:(0,i.jsx)(xt,{size:24})})]})}),(0,i.jsxs)("div",{className:"p-6 pb-32 space-y-8 max-h-[calc(95vh-200px)] overflow-y-auto",children:[(0,i.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-2xl p-6 border border-blue-100",children:[(0,i.jsxs)("h4",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center gap-3",children:[(0,i.jsx)("div",{className:"p-2 bg-blue-100 rounded-xl",children:(0,i.jsx)(cr,{size:20,className:"text-blue-600"})}),"Informations Personnelles"]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"text-sm font-medium text-gray-600",children:"Nom complet"}),(0,i.jsxs)("p",{className:"text-lg font-semibold text-gray-900",children:[g.user.firstName," ",g.user.lastName]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"text-sm font-medium text-gray-600",children:"Email"}),(0,i.jsx)("p",{className:"text-gray-900",children:g.user.email})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"text-sm font-medium text-gray-600",children:"T\xe9l\xe9phone"}),(0,i.jsx)("p",{className:"text-gray-900",children:g.user.phone})]}),g.user.dateOfBirth&&(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"text-sm font-medium text-gray-600",children:"Date de naissance"}),(0,i.jsx)("p",{className:"text-gray-900",children:new Date(g.user.dateOfBirth).toLocaleDateString("fr-FR")})]})]}),(0,i.jsxs)("div",{className:"space-y-4",children:[g.user.university&&(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"text-sm font-medium text-gray-600",children:"Universit\xe9"}),(0,i.jsx)("p",{className:"text-gray-900",children:g.user.university})]}),g.user.studentId&&(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"text-sm font-medium text-gray-600",children:"Num\xe9ro \xe9tudiant"}),(0,i.jsx)("p",{className:"text-gray-900",children:g.user.studentId})]}),g.user.address&&(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"text-sm font-medium text-gray-600",children:"Adresse"}),(0,i.jsx)("p",{className:"text-gray-900",children:g.user.address})]}),g.user.city&&(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"text-sm font-medium text-gray-600",children:"Ville"}),(0,i.jsx)("p",{className:"text-gray-900",children:g.user.city})]})]}),(0,i.jsxs)("div",{className:"space-y-4",children:[g.user.temoinName&&(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"text-sm font-medium text-gray-600",children:"T\xe9moin"}),(0,i.jsx)("p",{className:"text-gray-900",children:g.user.temoinName})]}),g.user.temoinPhone&&(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"text-sm font-medium text-gray-600",children:"T\xe9l\xe9phone t\xe9moin"}),(0,i.jsx)("p",{className:"text-gray-900",children:g.user.temoinPhone})]}),g.user.temoinQuartier&&(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"text-sm font-medium text-gray-600",children:"Quartier t\xe9moin"}),(0,i.jsx)("p",{className:"text-gray-900",children:g.user.temoinQuartier})]})]})]})]}),(0,i.jsxs)("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 rounded-2xl p-6 border border-green-100",children:[(0,i.jsxs)("h4",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center gap-3",children:[(0,i.jsx)("div",{className:"p-2 bg-green-100 rounded-xl",children:(0,i.jsx)(Wu,{size:20,className:"text-green-600"})}),"Documents Fournis"]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[g.user.identityCardUrl&&(0,i.jsxs)("div",{className:"bg-white rounded-xl p-4 border border-green-200",children:[(0,i.jsx)("h5",{className:"font-semibold text-gray-900 mb-2",children:"Carte d'identit\xe9"}),(0,i.jsxs)("a",{href:g.user.identityCardUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 text-green-600 hover:text-green-700 font-medium",children:[(0,i.jsx)(vh,{size:16}),"Voir le document"]})]}),g.user.studentCardUrl&&(0,i.jsxs)("div",{className:"bg-white rounded-xl p-4 border border-green-200",children:[(0,i.jsx)("h5",{className:"font-semibold text-gray-900 mb-2",children:"Carte \xe9tudiante"}),(0,i.jsxs)("a",{href:g.user.studentCardUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 text-green-600 hover:text-green-700 font-medium",children:[(0,i.jsx)(vh,{size:16}),"Voir le document"]})]}),g.user.temoinIdentityCardUrl&&(0,i.jsxs)("div",{className:"bg-white rounded-xl p-4 border border-green-200",children:[(0,i.jsx)("h5",{className:"font-semibold text-gray-900 mb-2",children:"Carte d'identit\xe9 t\xe9moin"}),(0,i.jsxs)("a",{href:g.user.temoinIdentityCardUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 text-green-600 hover:text-green-700 font-medium",children:[(0,i.jsx)(vh,{size:16}),"Voir le document"]})]})]})]}),(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsxs)("h4",{className:"text-xl font-bold text-gray-900 flex items-center gap-3",children:[(0,i.jsx)("div",{className:"p-2 bg-purple-100 rounded-xl",children:(0,i.jsx)(Bu.A,{size:20,className:"text-purple-600"})}),"Demandes de Pr\xeat"]}),(0,i.jsx)("div",{className:"space-y-6",children:g.loans.map(e=>(0,i.jsxs)("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100 rounded-2xl p-6 border border-gray-200 shadow-sm",children:[(0,i.jsx)("div",{className:"flex items-start justify-between mb-6",children:(0,i.jsxs)("div",{className:"flex-1",children:[(0,i.jsxs)("div",{className:"flex items-center gap-4 mb-3",children:[(0,i.jsx)("div",{className:"text-3xl font-bold text-gray-900",children:(0,Tu.vv)(e.amount)}),(0,i.jsxs)("span",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full text-sm font-semibold ".concat("pending"===e.status?"bg-yellow-100 text-yellow-700 border border-yellow-200":"active"===e.status||"approved"===e.status?"bg-blue-100 text-blue-700 border border-blue-200":"completed"===e.status?"bg-green-100 text-green-700 border border-green-200":"bg-red-100 text-red-700 border border-red-200"),children:["pending"===e.status&&(0,i.jsx)(wu,{size:16}),("active"===e.status||"approved"===e.status)&&(0,i.jsx)(Pm.A,{size:16}),"completed"===e.status&&(0,i.jsx)(ht.A,{size:16}),"rejected"===e.status&&(0,i.jsx)(Bm,{size:16}),"pending"===e.status?"En attente":"active"===e.status||"approved"===e.status?"En cours":"completed"===e.status?"Rembours\xe9":"Rejet\xe9"]})]}),(0,i.jsx)("p",{className:"text-gray-600 text-lg",children:e.purpose})]})}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[(0,i.jsxs)("div",{className:"bg-white rounded-xl p-4 border border-gray-200",children:[(0,i.jsx)("h5",{className:"font-semibold text-gray-900 mb-2",children:"Dur\xe9e"}),(0,i.jsxs)("p",{className:"text-2xl font-bold text-blue-600",children:[e.duration," jours"]})]}),(0,i.jsxs)("div",{className:"bg-white rounded-xl p-4 border border-gray-200",children:[(0,i.jsx)("h5",{className:"font-semibold text-gray-900 mb-2",children:"Taux d'int\xe9r\xeat"}),(0,i.jsxs)("p",{className:"text-2xl font-bold text-purple-600",children:[e.interest_rate,"%"]})]}),(0,i.jsxs)("div",{className:"bg-white rounded-xl p-4 border border-gray-200",children:[(0,i.jsx)("h5",{className:"font-semibold text-gray-900 mb-2",children:"Montant total"}),(0,i.jsx)("p",{className:"text-2xl font-bold text-green-600",children:(0,Tu.vv)(e.totalAmount)})]}),(0,i.jsxs)("div",{className:"bg-white rounded-xl p-4 border border-gray-200",children:[(0,i.jsx)("h5",{className:"font-semibold text-gray-900 mb-2",children:"Pay\xe9"}),(0,i.jsx)("p",{className:"text-2xl font-bold text-emerald-600",children:(0,Tu.vv)(e.paidAmount)})]})]}),e.momoNumber&&"Non sp\xe9cifi\xe9"!==e.momoNumber&&(0,i.jsxs)("div",{className:"bg-blue-50 rounded-xl p-4 mb-6 border border-blue-200",children:[(0,i.jsxs)("h5",{className:"font-semibold text-blue-900 mb-4 flex items-center gap-2",children:[(0,i.jsx)(Bu.A,{size:18}),"Informations MoMo"]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"text-sm font-medium text-blue-700",children:"Num\xe9ro"}),(0,i.jsx)("p",{className:"text-lg font-bold text-blue-900",children:e.momoNumber})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"text-sm font-medium text-blue-700",children:"R\xe9seau"}),(0,i.jsx)("p",{className:"text-lg font-bold text-blue-900",children:e.momoNetwork})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"text-sm font-medium text-blue-700",children:"Nom sur le compte"}),(0,i.jsx)("p",{className:"text-lg font-bold text-blue-900",children:e.momoName})]})]})]}),e.guarantee&&"Non sp\xe9cifi\xe9e"!==e.guarantee&&(0,i.jsxs)("div",{className:"bg-orange-50 rounded-xl p-4 mb-6 border border-orange-200",children:[(0,i.jsxs)("h5",{className:"font-semibold text-orange-900 mb-2 flex items-center gap-2",children:[(0,i.jsx)(dh,{size:18}),"Garanties"]}),(0,i.jsx)("p",{className:"text-orange-900",children:e.guarantee})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[(0,i.jsxs)("div",{className:"bg-white rounded-xl p-4 border border-gray-200",children:[(0,i.jsx)("h5",{className:"font-semibold text-gray-900 mb-2",children:"Date de demande"}),(0,i.jsx)("p",{className:"text-gray-600",children:new Date(e.requestDate).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),(0,i.jsxs)("div",{className:"bg-white rounded-xl p-4 border border-gray-200",children:[(0,i.jsx)("h5",{className:"font-semibold text-gray-900 mb-2",children:"Date d'\xe9ch\xe9ance"}),(0,i.jsx)("p",{className:"text-gray-600",children:e.dueDate?new Date(e.dueDate).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric"}):"Non approuv\xe9"})]})]}),"pending"===e.status&&(0,i.jsxs)("div",{className:"flex gap-4 pt-6 border-t border-gray-200",children:[(0,i.jsxs)("button",{onClick:t=>{t.stopPropagation(),(async e=>{try{(await(0,lt.E$)(e,"approved")).success?(o(t=>t.map(t=>t.id===e?(0,c.A)((0,c.A)({},t),{},{status:"approved"}):t)),s("Demande approuv\xe9e avec succ\xe8s"),j()):n("Erreur lors de l'approbation")}catch(u){console.error("[ADMIN_LOANS] Erreur approbation:",u),n("Erreur lors de l'approbation")}})(e.id)},className:"flex-1 flex items-center justify-center gap-3 px-6 py-4 bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white rounded-xl transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105 font-semibold",children:[(0,i.jsx)(Vm,{size:20}),"Approuver la demande"]}),(0,i.jsxs)("button",{onClick:t=>{t.stopPropagation(),(async e=>{try{console.log("[ADMIN_LOANS] \u274c Tentative de rejet du pr\xeat:",e);const a=await(0,lt.E$)(e,"rejected");var t,r;a.success?(console.log("[ADMIN_LOANS] \u2705 Pr\xeat rejet\xe9 avec succ\xe8s"),o(t=>t.map(t=>t.id===e?(0,c.A)((0,c.A)({},t),{},{status:"rejected"}):t)),s("Demande rejet\xe9e avec succ\xe8s"),j()):(console.error("[ADMIN_LOANS] \u274c Erreur rejet:",a.error),null!==(t=a.error)&&void 0!==t&&t.includes("contrainte")||null!==(r=a.error)&&void 0!==r&&r.includes("constraint")?n("Erreur: La base de donn\xe9es doit \xeatre mise \xe0 jour. Veuillez contacter l'administrateur."):n(a.error||"Erreur lors du rejet de la demande"))}catch(u){console.error("[ADMIN_LOANS] \u274c Erreur rejet:",u),n(u.message||"Erreur lors du rejet")}})(e.id)},className:"flex-1 flex items-center justify-center gap-3 px-6 py-4 bg-gradient-to-r from-red-500 to-pink-600 hover:from-red-600 hover:to-pink-700 text-white rounded-xl transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105 font-semibold",children:[(0,i.jsx)(qm,{size:20}),"Rejeter la demande"]})]})]},e.id))})]})]})]})})]})},Wm=(0,mt.A)("FileImage",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["circle",{cx:"10",cy:"13",r:"2",key:"6v46hv"}],["path",{d:"m20 17-1.09-1.09a2 2 0 0 0-2.82 0L10 22",key:"17vly1"}]]),Gm=()=>{const e=(0,We.Zp)(),{showSuccess:t,showError:s}=yt(),[n,a]=(0,r.useState)([]),[o,l]=(0,r.useState)(!1),[c,d]=(0,r.useState)(""),[u,h]=(0,r.useState)("all"),[m,p]=(0,r.useState)(null),[f,x]=(0,r.useState)(!1),[g,v]=(0,r.useState)(!1),[y,b]=(0,r.useState)({url:"",title:""}),[j,w]=(0,r.useState)(!1),[N,S]=(0,r.useState)(!1);(0,r.useEffect)(()=>{k()},[]);const k=async()=>{try{l(!0);const e=await(0,lt.CF)();if(e.success){const t=e.data.map(e=>({id:e.id,firstName:e.first_name||"Utilisateur",lastName:e.last_name||"Inconnu",email:e.email||"email@inconnu.com",phone:e.phone_number||"Non renseign\xe9",status:e.status||"pending",registrationDate:e.created_at||(new Date).toISOString(),totalLoans:e.totalLoans||0,activeLoans:e.activeLoans||0,totalAmount:e.totalAmount||0,verified:"approved"===e.status,filiere:e.filiere||"Non sp\xe9cifi\xe9e",anneeEtude:e.annee_etude||"Non sp\xe9cifi\xe9e",entite:e.entite||"Non sp\xe9cifi\xe9e",address:e.address||"Non sp\xe9cifi\xe9e",facebookName:e.facebook_name||"Non sp\xe9cifi\xe9",temoinName:e.temoin_name||"Non sp\xe9cifi\xe9",temoinQuartier:e.temoin_quartier||"Non sp\xe9cifi\xe9",temoinPhone:e.temoin_phone||"Non sp\xe9cifi\xe9",temoinEmail:e.temoin_email||"Non sp\xe9cifi\xe9",emergencyName:e.emergency_name||"Non sp\xe9cifi\xe9",emergencyRelation:e.emergency_relation||"Non sp\xe9cifi\xe9",emergencyPhone:e.emergency_phone||"Non sp\xe9cifi\xe9",emergencyEmail:e.emergency_email||"Non sp\xe9cifi\xe9",emergencyAddress:e.emergency_address||"Non sp\xe9cifi\xe9",userIdentityCard:e.user_identity_card_name||"Non sp\xe9cifi\xe9",temoinIdentityCard:e.temoin_identity_card_name||"Non sp\xe9cifi\xe9",studentCard:e.student_card_name||"Non sp\xe9cifi\xe9",userIdentityCardUrl:e.user_identity_card_url||null,temoinIdentityCardUrl:e.temoin_identity_card_url||null,studentCardUrl:e.student_card_url||null}));a(t)}else s("Erreur lors du chargement des utilisateurs")}catch(e){console.error("[ADMIN] Erreur:",e),s("Erreur lors du chargement des utilisateurs")}finally{l(!1)}},A=(e,t)=>{e&&(b({url:e,title:t}),v(!0))},_=e=>{const t={approved:{bg:"bg-green-100",text:"text-green-700",label:"Approuv\xe9",icon:ht.A},pending:{bg:"bg-yellow-100",text:"text-yellow-700",label:"En attente",icon:Mm},rejected:{bg:"bg-red-100",text:"text-red-700",label:"Rejet\xe9",icon:Bm}},s=t[e]||t.pending,r=s.icon;return(0,i.jsxs)("span",{className:"inline-flex items-center gap-1.5 px-3 py-1 rounded-full text-xs font-medium ".concat(s.bg," ").concat(s.text),children:[(0,i.jsx)(r,{size:14}),s.label]})},E=n.filter(e=>{const t=e.firstName.toLowerCase().includes(c.toLowerCase())||e.lastName.toLowerCase().includes(c.toLowerCase())||e.email.toLowerCase().includes(c.toLowerCase())||e.phone.includes(c),s="all"===u||e.status===u;return t&&s}),C={total:n.length,approved:n.filter(e=>"approved"===e.status).length,pending:n.filter(e=>"pending"===e.status).length,rejected:n.filter(e=>"rejected"===e.status).length};return(0,i.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-yellow-50 to-slate-100 pb-24",children:[(0,i.jsx)("div",{className:"bg-white/80 backdrop-blur-lg shadow-lg border-b border-white/50 sticky top-0 z-30",children:(0,i.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,i.jsxs)("div",{className:"flex items-center justify-between py-6",children:[(0,i.jsxs)("div",{className:"flex items-center gap-4",children:[(0,i.jsx)("button",{onClick:()=>e("/admin/menu"),className:"p-2 hover:bg-gray-100 rounded-xl transition-colors",children:(0,i.jsx)(Rh.A,{size:24,className:"text-gray-600"})}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("h1",{className:"text-3xl font-bold text-secondary-900 font-montserrat flex items-center gap-3",children:[(0,i.jsx)(Lm,{className:"text-primary-600",size:32}),"Gestion des Utilisateurs"]}),(0,i.jsxs)("p",{className:"text-gray-600 font-montserrat mt-1",children:[E.length," utilisateur",E.length>1?"s":""]})]})]}),(0,i.jsxs)("button",{onClick:k,className:"flex items-center gap-2 px-4 py-2 bg-primary-500 hover:bg-primary-600 text-white rounded-xl font-medium transition-all duration-200",children:[(0,i.jsx)(Js.A,{size:18}),(0,i.jsx)("span",{className:"hidden sm:inline",children:"Actualiser"})]})]})})}),(0,i.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[o&&(0,i.jsxs)("div",{className:"flex items-center justify-center gap-2 py-2 mb-4 text-gray-500 text-sm",children:[(0,i.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-purple-500 border-t-transparent"}),(0,i.jsx)("span",{children:"Chargement des utilisateurs..."})]}),(0,i.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8 transition-opacity duration-200 ".concat(o?"opacity-75":""),children:[(0,i.jsx)("div",{className:"bg-white rounded-2xl p-6 shadow-lg border border-gray-100",children:(0,i.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,i.jsx)("div",{className:"p-3 bg-secondary-100 rounded-xl",children:(0,i.jsx)(Lm,{size:24,className:"text-secondary-700"})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-sm text-gray-600 font-medium",children:"Total"}),(0,i.jsx)("p",{className:"text-2xl font-bold text-secondary-900",children:C.total})]})]})}),(0,i.jsx)("div",{className:"bg-white rounded-2xl p-6 shadow-lg border border-gray-100",children:(0,i.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,i.jsx)("div",{className:"p-3 bg-green-100 rounded-xl",children:(0,i.jsx)(ht.A,{size:24,className:"text-green-600"})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-sm text-gray-600 font-medium",children:"Approuv\xe9s"}),(0,i.jsx)("p",{className:"text-2xl font-bold text-secondary-900",children:C.approved})]})]})}),(0,i.jsx)("div",{className:"bg-white rounded-2xl p-6 shadow-lg border border-gray-100",children:(0,i.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,i.jsx)("div",{className:"p-3 bg-primary-100 rounded-xl",children:(0,i.jsx)(Mm,{size:24,className:"text-primary-700"})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-sm text-gray-600 font-medium",children:"En attente"}),(0,i.jsx)("p",{className:"text-2xl font-bold text-secondary-900",children:C.pending})]})]})}),(0,i.jsx)("div",{className:"bg-white rounded-2xl p-6 shadow-lg border border-gray-100",children:(0,i.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,i.jsx)("div",{className:"p-3 bg-red-100 rounded-xl",children:(0,i.jsx)(Bm,{size:24,className:"text-red-600"})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-sm text-gray-600 font-medium",children:"Rejet\xe9s"}),(0,i.jsx)("p",{className:"text-2xl font-bold text-secondary-900",children:C.rejected})]})]})})]}),(0,i.jsx)("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 p-6 mb-8",children:(0,i.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,i.jsxs)("div",{className:"flex-1 relative",children:[(0,i.jsx)(Fm,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),(0,i.jsx)("input",{type:"text",placeholder:"Rechercher par nom, email ou t\xe9l\xe9phone...",value:c,onChange:e=>d(e.target.value),className:"w-full pl-12 pr-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all"})]}),(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsx)(Um,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),(0,i.jsxs)("select",{value:u,onChange:e=>h(e.target.value),className:"pl-12 pr-8 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all appearance-none bg-white cursor-pointer min-w-[200px]",children:[(0,i.jsx)("option",{value:"all",children:"Tous les statuts"}),(0,i.jsx)("option",{value:"approved",children:"Approuv\xe9s"}),(0,i.jsx)("option",{value:"pending",children:"En attente"}),(0,i.jsx)("option",{value:"rejected",children:"Rejet\xe9s"})]})]})]})}),(0,i.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:E.map(e=>(0,i.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden hover:shadow-xl transition-all duration-300",children:[(0,i.jsx)("div",{className:"bg-gradient-to-r from-secondary-800 to-secondary-900 p-6",children:(0,i.jsxs)("div",{className:"flex items-center gap-4",children:[(0,i.jsx)("div",{className:"w-16 h-16 bg-white rounded-full flex items-center justify-center shadow-lg",children:(0,i.jsx)(cr,{size:32,className:"text-primary-600"})}),(0,i.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,i.jsxs)("h3",{className:"text-lg font-bold text-white truncate",children:[e.firstName," ",e.lastName]}),(0,i.jsx)("p",{className:"text-gray-200 text-sm truncate",children:e.email})]})]})}),(0,i.jsxs)("div",{className:"p-6 space-y-4",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[(0,i.jsx)(ph,{size:16,className:"text-gray-400"}),(0,i.jsx)("span",{children:e.phone})]}),(0,i.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[(0,i.jsx)(Bu.A,{size:16,className:"text-gray-400"}),(0,i.jsxs)("span",{children:[e.activeLoans," pr\xeat",e.activeLoans>1?"s":""," actif",e.activeLoans>1?"s":""]})]}),(0,i.jsxs)("div",{className:"flex items-center justify-between pt-4 border-t border-gray-100",children:[_(e.status),(0,i.jsxs)("button",{onClick:()=>{p(e),x(!0)},className:"flex items-center gap-2 px-4 py-2 bg-primary-500 hover:bg-primary-600 text-white rounded-xl font-medium transition-all duration-200 text-sm",children:[(0,i.jsx)(vh,{size:16}),"D\xe9tails"]})]})]})]},e.id))}),0===E.length&&(0,i.jsxs)("div",{className:"text-center py-12",children:[(0,i.jsx)(Lm,{size:64,className:"text-gray-300 mx-auto mb-4"}),(0,i.jsx)("p",{className:"text-gray-500 text-lg font-medium",children:"Aucun utilisateur trouv\xe9"}),(0,i.jsx)("p",{className:"text-gray-400 text-sm mt-2",children:"Essayez de modifier vos crit\xe8res de recherche"})]})]}),f&&m&&(0,i.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4 overflow-y-auto",children:(0,i.jsxs)("div",{className:"bg-white rounded-3xl shadow-2xl max-w-4xl w-full my-8 flex flex-col max-h-[90vh]",children:[(0,i.jsxs)("div",{className:"sticky top-0 bg-gradient-to-r from-secondary-800 to-secondary-900 p-6 flex items-center justify-between z-10",children:[(0,i.jsxs)("div",{className:"flex items-center gap-4",children:[(0,i.jsx)("div",{className:"w-16 h-16 bg-white rounded-full flex items-center justify-center shadow-lg",children:(0,i.jsx)(cr,{size:32,className:"text-primary-600"})}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("h2",{className:"text-2xl font-bold text-white",children:[m.firstName," ",m.lastName]}),(0,i.jsx)("p",{className:"text-gray-200",children:m.email})]})]}),(0,i.jsx)("button",{onClick:()=>x(!1),className:"p-2 hover:bg-white/20 rounded-xl transition-colors",children:(0,i.jsx)(xt,{size:24,className:"text-white"})})]}),(0,i.jsxs)("div",{className:"p-6 pb-4 overflow-y-auto flex-1 space-y-6",children:[(0,i.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-2xl p-6 border border-blue-200",children:[(0,i.jsxs)("h3",{className:"text-lg font-semibold text-blue-900 font-montserrat mb-4 flex items-center",children:[(0,i.jsx)(fh,{className:"w-5 h-5 mr-2"}),"Informations de Contact"]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-sm text-blue-700 font-medium",children:"T\xe9l\xe9phone"}),(0,i.jsx)("p",{className:"text-blue-900 font-semibold",children:m.phone})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-sm text-blue-700 font-medium",children:"Email"}),(0,i.jsx)("p",{className:"text-blue-900 font-semibold break-all",children:m.email})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-sm text-blue-700 font-medium",children:"Adresse"}),(0,i.jsx)("p",{className:"text-blue-900",children:m.address})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-sm text-blue-700 font-medium",children:"Facebook"}),(0,i.jsx)("p",{className:"text-blue-900",children:m.facebookName})]})]})]}),(0,i.jsxs)("div",{className:"bg-gradient-to-br from-primary-50 to-primary-100 rounded-2xl p-6 border border-primary-200",children:[(0,i.jsxs)("h3",{className:"text-lg font-semibold text-primary-900 font-montserrat mb-4 flex items-center",children:[(0,i.jsx)(Ph,{className:"w-5 h-5 mr-2"}),"Informations Acad\xe9miques"]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-sm text-primary-800 font-medium",children:"Fili\xe8re"}),(0,i.jsx)("p",{className:"text-secondary-900 font-semibold",children:m.filiere})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-sm text-primary-800 font-medium",children:"Ann\xe9e d'\xe9tude"}),(0,i.jsx)("p",{className:"text-secondary-900 font-semibold",children:m.anneeEtude})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-sm text-primary-800 font-medium",children:"Entit\xe9"}),(0,i.jsx)("p",{className:"text-secondary-900 font-semibold",children:m.entite})]})]})]}),(0,i.jsxs)("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-2xl p-6 border border-green-200",children:[(0,i.jsxs)("h3",{className:"text-lg font-semibold text-green-900 font-montserrat mb-4 flex items-center",children:[(0,i.jsx)(dh,{className:"w-5 h-5 mr-2"}),"Informations du T\xe9moin"]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-sm text-green-700 font-medium",children:"Nom"}),(0,i.jsx)("p",{className:"text-green-900 font-semibold",children:m.temoinName})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-sm text-green-700 font-medium",children:"T\xe9l\xe9phone"}),(0,i.jsx)("p",{className:"text-green-900",children:m.temoinPhone})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-sm text-green-700 font-medium",children:"Email"}),(0,i.jsx)("p",{className:"text-green-900 break-all",children:m.temoinEmail})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-sm text-green-700 font-medium",children:"Quartier"}),(0,i.jsx)("p",{className:"text-green-900",children:m.temoinQuartier})]})]})]}),(0,i.jsxs)("div",{className:"bg-gradient-to-br from-red-50 to-red-100 rounded-2xl p-6 border border-red-200",children:[(0,i.jsxs)("h3",{className:"text-lg font-semibold text-red-900 font-montserrat mb-4 flex items-center",children:[(0,i.jsx)(Mm,{className:"w-5 h-5 mr-2"}),"Contact d'Urgence"]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-sm text-red-700 font-medium",children:"Nom"}),(0,i.jsx)("p",{className:"text-red-900 font-semibold",children:m.emergencyName})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-sm text-red-700 font-medium",children:"Relation"}),(0,i.jsx)("p",{className:"text-red-900",children:m.emergencyRelation})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-sm text-red-700 font-medium",children:"T\xe9l\xe9phone"}),(0,i.jsx)("p",{className:"text-red-900",children:m.emergencyPhone})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-sm text-red-700 font-medium",children:"Email"}),(0,i.jsx)("p",{className:"text-red-900 break-all",children:m.emergencyEmail})]}),(0,i.jsxs)("div",{className:"md:col-span-2",children:[(0,i.jsx)("p",{className:"text-sm text-red-700 font-medium",children:"Adresse"}),(0,i.jsx)("p",{className:"text-red-900",children:m.emergencyAddress})]})]})]}),(0,i.jsxs)("div",{className:"bg-gradient-to-br from-secondary-50 to-secondary-100 rounded-2xl p-6 border border-secondary-200",children:[(0,i.jsxs)("h3",{className:"text-lg font-semibold text-secondary-900 font-montserrat mb-4 flex items-center",children:[(0,i.jsx)(Wm,{className:"w-5 h-5 mr-2"}),"Documents"]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-sm text-secondary-700 font-medium mb-2",children:"Carte d'identit\xe9"}),(0,i.jsx)("button",{onClick:()=>A(m.userIdentityCardUrl,"Carte d'identit\xe9"),disabled:!m.userIdentityCardUrl,className:"w-full px-4 py-3 rounded-xl font-medium transition-all ".concat(m.userIdentityCardUrl?"bg-primary-500 hover:bg-primary-600 text-white cursor-pointer":"bg-gray-100 text-gray-400 cursor-not-allowed"),children:m.userIdentityCardUrl?"Voir":"Non disponible"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-sm text-secondary-700 font-medium mb-2",children:"Carte t\xe9moin"}),(0,i.jsx)("button",{onClick:()=>A(m.temoinIdentityCardUrl,"Carte d'identit\xe9 t\xe9moin"),disabled:!m.temoinIdentityCardUrl,className:"w-full px-4 py-3 rounded-xl font-medium transition-all ".concat(m.temoinIdentityCardUrl?"bg-primary-500 hover:bg-primary-600 text-white cursor-pointer":"bg-gray-100 text-gray-400 cursor-not-allowed"),children:m.temoinIdentityCardUrl?"Voir":"Non disponible"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-sm text-secondary-700 font-medium mb-2",children:"Carte \xe9tudiant"}),(0,i.jsx)("button",{onClick:()=>A(m.studentCardUrl,"Carte d'\xe9tudiant"),disabled:!m.studentCardUrl,className:"w-full px-4 py-3 rounded-xl font-medium transition-all ".concat(m.studentCardUrl?"bg-primary-500 hover:bg-primary-600 text-white cursor-pointer":"bg-gray-100 text-gray-400 cursor-not-allowed"),children:m.studentCardUrl?"Voir":"Non disponible"})]})]})]}),(0,i.jsxs)("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 rounded-2xl p-6 border border-orange-200",children:[(0,i.jsxs)("h3",{className:"text-lg font-semibold text-orange-900 font-montserrat mb-4 flex items-center",children:[(0,i.jsx)(Bu.A,{className:"w-5 h-5 mr-2"}),"Informations du Compte"]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-sm text-orange-700 font-medium",children:"Pr\xeats actifs"}),(0,i.jsx)("p",{className:"text-2xl font-bold text-orange-900",children:m.activeLoans})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-sm text-orange-700 font-medium",children:"Total pr\xeats"}),(0,i.jsx)("p",{className:"text-2xl font-bold text-orange-900",children:m.totalLoans})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-sm text-orange-700 font-medium",children:"Statut"}),(0,i.jsx)("div",{className:"mt-2",children:_(m.status)})]})]})]})]}),(0,i.jsxs)("div",{className:"p-6 pt-4 pb-6 bg-gray-50 border-t border-gray-200 flex gap-4",style:{paddingBottom:"max(1.5rem, env(safe-area-inset-bottom))"},children:["pending"===m.status&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("button",{onClick:()=>(async e=>{try{(await(0,lt.pU)(e,"approved")).success?(t("Utilisateur approuv\xe9 avec succ\xe8s"),k(),x(!1)):s("Erreur lors de l'approbation")}catch(r){s("Erreur lors de l'approbation")}})(m.id),className:"flex-1 flex items-center justify-center gap-2 px-6 py-3 bg-green-600 hover:bg-green-700 text-white rounded-xl font-medium transition-all duration-200",children:[(0,i.jsx)(Vm,{size:20}),"Approuver"]}),(0,i.jsxs)("button",{onClick:()=>(async e=>{try{(await(0,lt.pU)(e,"rejected")).success?(t("Utilisateur rejet\xe9"),k(),x(!1)):s("Erreur lors du rejet")}catch(r){s("Erreur lors du rejet")}})(m.id),className:"flex-1 flex items-center justify-center gap-2 px-6 py-3 bg-red-600 hover:bg-red-700 text-white rounded-xl font-medium transition-all duration-200",children:[(0,i.jsx)(qm,{size:20}),"Rejeter"]})]}),"pending"!==m.status&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("button",{onClick:()=>x(!1),className:"flex-1 px-6 py-3 bg-gray-600 hover:bg-gray-700 text-white rounded-xl font-medium transition-all duration-200",children:"Fermer"}),(0,i.jsxs)("button",{onClick:()=>{w(!0)},className:"flex-1 flex items-center justify-center gap-2 px-6 py-3 bg-red-600 hover:bg-red-700 text-white rounded-xl font-medium transition-all duration-200",children:[(0,i.jsx)(ju,{size:20}),"Supprimer d\xe9finitivement"]})]})]})]})}),j&&m&&(0,i.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:(0,i.jsx)("div",{className:"bg-white rounded-3xl shadow-2xl max-w-md w-full",children:(0,i.jsxs)("div",{className:"p-6",children:[(0,i.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[(0,i.jsx)("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center",children:(0,i.jsx)(Mm,{className:"text-red-600",size:24})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:"Confirmer la suppression"}),(0,i.jsx)("p",{className:"text-gray-600 text-sm",children:"Cette action est irr\xe9versible"})]})]}),(0,i.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4 mb-6",children:[(0,i.jsx)("p",{className:"text-gray-800 font-medium mb-2",children:"Vous \xeates sur le point de supprimer d\xe9finitivement :"}),(0,i.jsxs)("p",{className:"text-lg font-bold text-red-900",children:[m.firstName," ",m.lastName]}),(0,i.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:m.email})]}),(0,i.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-xl p-4 mb-6",children:[(0,i.jsxs)("p",{className:"text-sm text-yellow-900",children:["\u26a0\ufe0f ",(0,i.jsx)("strong",{children:"Toutes les donn\xe9es"})," de cet utilisateur seront supprim\xe9es :"]}),(0,i.jsxs)("ul",{className:"list-disc list-inside text-sm text-yellow-800 mt-2 space-y-1",children:[(0,i.jsx)("li",{children:"Compte utilisateur"}),(0,i.jsx)("li",{children:"Pr\xeats et historique"}),(0,i.jsx)("li",{children:"Paiements"}),(0,i.jsx)("li",{children:"Plans d'\xe9pargne"}),(0,i.jsx)("li",{children:"Notifications"})]})]}),(0,i.jsxs)("div",{className:"flex gap-4",children:[(0,i.jsx)("button",{onClick:()=>w(!1),disabled:N,className:"flex-1 px-6 py-3 bg-gray-200 hover:bg-gray-300 text-gray-800 rounded-xl font-medium transition-all duration-200 disabled:opacity-50",children:"Annuler"}),(0,i.jsx)("button",{onClick:async()=>{if(m)try{S(!0);const e=await(0,lt.kG)(m.id);e.success?(t(e.message||"Utilisateur supprim\xe9 d\xe9finitivement"),k(),w(!1),x(!1),p(null)):s(e.error||"Erreur lors de la suppression")}catch(e){console.error("[ADMIN] Erreur suppression:",e),s("Erreur lors de la suppression")}finally{S(!1)}},disabled:N,className:"flex-1 flex items-center justify-center gap-2 px-6 py-3 bg-red-600 hover:bg-red-700 text-white rounded-xl font-medium transition-all duration-200 disabled:opacity-50",children:N?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Js.A,{size:20,className:"animate-spin"}),"Suppression..."]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(ju,{size:20}),"Supprimer d\xe9finitivement"]})})]})]})})}),g&&y.url&&(0,i.jsx)("div",{className:"fixed inset-0 bg-black/90 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:(0,i.jsxs)("div",{className:"relative max-w-4xl w-full",children:[(0,i.jsx)("button",{onClick:()=>v(!1),className:"absolute -top-12 right-0 p-2 bg-white/10 hover:bg-white/20 rounded-xl transition-colors",children:(0,i.jsx)(xt,{size:24,className:"text-white"})}),(0,i.jsxs)("div",{className:"bg-white rounded-3xl p-4",children:[(0,i.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-4 text-center",children:y.title}),(0,i.jsx)("img",{src:y.url,alt:y.title,className:"w-full h-auto rounded-2xl"})]})]})})]})};var Km=s(9120);const Zm=(0,mt.A)("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]),Qm=()=>{const e=(0,We.Zp)(),[t,s]=(0,r.useState)(!1),[n,a]=(0,r.useState)(null),[o,l]=(0,r.useState)({totalLoans:0,activeLoans:0,completedLoans:0,pendingLoans:0,totalLoanAmount:0,totalPaidAmount:0,totalInterestCollected:0,totalInterestNotCollected:0,totalRemainingAmount:0,totalSavingsPlans:0,activeSavingsPlans:0,completedSavingsPlans:0,totalSavingsAmount:0,totalUsers:0,activeUsers:0,pendingUsers:0,averageLoanAmount:0,averageRepaymentRate:0,topBorrowers:[]});(0,r.useEffect)(()=>{c()},[]),(0,r.useEffect)(()=>{let e=null;const t=()=>{e&&clearTimeout(e),e=setTimeout(()=>c(!0),500)},s=ot.ND.channel("analytics_realtime").on("postgres_changes",{event:"*",schema:"public",table:"loans"},t).on("postgres_changes",{event:"*",schema:"public",table:"users"},t).on("postgres_changes",{event:"*",schema:"public",table:"payments"},t).on("postgres_changes",{event:"*",schema:"public",table:"savings_plans"},t).subscribe(e=>{"SUBSCRIBED"===e&&console.log("[ANALYTICS] \ud83d\udd34 Temps r\xe9el actif")});return()=>{e&&clearTimeout(e),ot.ND.removeChannel(s)}},[]);const c=async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];try{e||(s(!0),a(null)),e||console.log("[ANALYTICS] \ud83d\udcca Chargement des analytics...");const[t,r,n,i]=await Promise.all([(0,lt.CF)(),(0,lt.Or)(),(0,lt.k5)(),ot.ND.from("savings_plans").select("*")]);e||console.log("[ANALYTICS] \u2705 Donn\xe9es charg\xe9es");const o=t.success?t.data:[],c=o.length,d=o.filter(e=>"approved"===e.status).length,u=o.filter(e=>"pending"===e.status).length,h=r.success?r.data:[],m=n.success?n.data:[],p=e=>e.approved_at&&"pending"!==e.status&&"rejected"!==e.status,f=h.filter(p),x=h.length,g=h.filter(e=>"active"===e.status||"approved"===e.status).length,v=h.filter(e=>"completed"===e.status).length,y=h.filter(e=>"pending"===e.status).length,b=f.reduce((e,t)=>e+(t.amount||0),0),j=m.reduce((e,t)=>e+(t.amount||0),0),w=b-j,N=f.filter(e=>"completed"===e.status),S=N.reduce((e,t)=>{const s=t.amount||0,r=(t.interest_rate||0)/100;return e+Math.round(s*r)},0),k=f.filter(e=>"completed"!==e.status),A=k.reduce((e,t)=>{const s=t.amount||0,r=(t.interest_rate||0)/100;return e+Math.round(s*r)},0),_=b>0?Math.round(j/b*100):0,E=f.length>0?Math.round(b/f.length):0,C={};f.forEach(e=>{const t=e.user_id;var s,r;C[t]||(C[t]={userId:t,userName:"".concat((null===(s=e.users)||void 0===s?void 0:s.first_name)||"Utilisateur"," ").concat((null===(r=e.users)||void 0===r?void 0:r.last_name)||"Inconnu"),totalBorrowed:0,loansCount:0,completedLoans:0});C[t].totalBorrowed+=e.amount||0,C[t].loansCount++,"completed"===e.status&&C[t].completedLoans++});const P=Object.values(C).sort((e,t)=>t.totalBorrowed-e.totalBorrowed).slice(0,5),T=i.data||[],I=T.length,R=T.filter(e=>"active"===e.status).length,O=T.filter(e=>"completed"===e.status).length,D=T.reduce((e,t)=>e+(t.current_balance||0),0);l({totalLoans:x,activeLoans:g,completedLoans:v,pendingLoans:y,totalLoanAmount:b,totalPaidAmount:j,totalInterestCollected:S,totalInterestNotCollected:A,totalRemainingAmount:w,totalSavingsPlans:I,activeSavingsPlans:R,completedSavingsPlans:O,totalSavingsAmount:D,totalUsers:c,activeUsers:d,pendingUsers:u,averageLoanAmount:E,averageRepaymentRate:_,topBorrowers:P})}catch(n){console.error("[ANALYTICS] \u274c Erreur:",n),a(n.message||"Une erreur est survenue")}finally{s(!1)}};return n?(0,i.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 via-red-50 to-pink-50 flex items-center justify-center p-4",children:(0,i.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8 max-w-md w-full text-center",children:[(0,i.jsx)("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,i.jsx)(pt,{size:32,className:"text-red-600"})}),(0,i.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Erreur de chargement"}),(0,i.jsx)("p",{className:"text-gray-600 mb-6",children:n}),(0,i.jsxs)("button",{onClick:c,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-orange-600 hover:bg-orange-700 text-white rounded-xl transition-colors",children:[(0,i.jsx)(Js.A,{size:18}),"R\xe9essayer"]})]})}):(0,i.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 via-red-50 to-pink-50 pb-24",children:[(0,i.jsx)("div",{className:"bg-white/80 backdrop-blur-lg shadow-lg border-b border-white/50 sticky top-0 z-30",children:(0,i.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{className:"flex items-center gap-4",children:[(0,i.jsx)("div",{className:"p-3 bg-gradient-to-br from-orange-500 to-red-600 rounded-2xl shadow-lg",children:(0,i.jsx)(qu.A,{size:32,className:"text-white"})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900 font-montserrat",children:"Analytics"}),(0,i.jsx)("p",{className:"text-sm sm:text-base text-gray-600 font-montserrat",children:"Vue d'ensemble des performances"})]})]}),(0,i.jsxs)("button",{onClick:c,className:"flex items-center gap-2 px-3 sm:px-4 py-2 bg-white hover:bg-gray-50 border border-gray-200 rounded-xl transition-all duration-200 shadow-sm hover:shadow",children:[(0,i.jsx)(Js.A,{size:18,className:"text-gray-600"}),(0,i.jsx)("span",{className:"hidden sm:inline text-sm font-medium text-gray-700",children:"Actualiser"})]})]})})}),(0,i.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[t&&(0,i.jsxs)("div",{className:"flex items-center justify-center gap-2 py-2 mb-4 text-gray-500 text-sm",children:[(0,i.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-orange-500 border-t-transparent"}),(0,i.jsx)("span",{children:"Chargement des analytics..."})]}),(0,i.jsxs)("div",{className:"mb-6 transition-opacity duration-200 ".concat(t?"opacity-75":""),children:[(0,i.jsx)("h2",{className:"text-xl font-bold text-gray-900 font-montserrat mb-4",children:"\ud83d\udcca Pr\xeats"}),(0,i.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6",children:[(0,i.jsxs)("div",{className:"bg-white rounded-2xl p-4 sm:p-6 shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-100 group",children:[(0,i.jsx)("div",{className:"flex items-start justify-between mb-3 sm:mb-4",children:(0,i.jsx)("div",{className:"p-2 sm:p-3 bg-blue-100 rounded-xl group-hover:scale-110 transition-transform duration-300",children:(0,i.jsx)(Bu.A,{size:20,className:"sm:w-6 sm:h-6 text-blue-600"})})}),(0,i.jsx)("p",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:o.totalLoans}),(0,i.jsx)("p",{className:"text-xs sm:text-sm text-gray-600 mt-1",children:"Total pr\xeats"})]}),(0,i.jsxs)("div",{className:"bg-gradient-to-br from-blue-500 to-purple-600 rounded-2xl p-4 sm:p-6 shadow-lg hover:shadow-xl transition-all duration-300 text-white group",children:[(0,i.jsx)("div",{className:"flex items-start justify-between mb-3 sm:mb-4",children:(0,i.jsx)("div",{className:"p-2 sm:p-3 bg-white/20 rounded-xl group-hover:scale-110 transition-transform duration-300",children:(0,i.jsx)(Pm.A,{size:20,className:"sm:w-6 sm:h-6 text-white"})})}),(0,i.jsx)("p",{className:"text-2xl sm:text-3xl font-bold",children:o.activeLoans}),(0,i.jsx)("p",{className:"text-xs sm:text-sm text-blue-100 mt-1",children:"Actifs"})]}),(0,i.jsxs)("div",{className:"bg-white rounded-2xl p-4 sm:p-6 shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-100 group",children:[(0,i.jsx)("div",{className:"flex items-start justify-between mb-3 sm:mb-4",children:(0,i.jsx)("div",{className:"p-2 sm:p-3 bg-green-100 rounded-xl group-hover:scale-110 transition-transform duration-300",children:(0,i.jsx)(ht.A,{size:20,className:"sm:w-6 sm:h-6 text-green-600"})})}),(0,i.jsx)("p",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:o.completedLoans}),(0,i.jsx)("p",{className:"text-xs sm:text-sm text-gray-600 mt-1",children:"Rembours\xe9s"})]}),(0,i.jsxs)("div",{className:"bg-white rounded-2xl p-4 sm:p-6 shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-100 group",children:[(0,i.jsx)("div",{className:"flex items-start justify-between mb-3 sm:mb-4",children:(0,i.jsx)("div",{className:"p-2 sm:p-3 bg-yellow-100 rounded-xl group-hover:scale-110 transition-transform duration-300",children:(0,i.jsx)(wu,{size:20,className:"sm:w-6 sm:h-6 text-yellow-600"})})}),(0,i.jsx)("p",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:o.pendingLoans}),(0,i.jsx)("p",{className:"text-xs sm:text-sm text-gray-600 mt-1",children:"En attente"})]})]})]}),(0,i.jsxs)("div",{className:"mb-6",children:[(0,i.jsx)("h2",{className:"text-xl font-bold text-gray-900 font-montserrat mb-4",children:"\ud83d\udcb0 Montants"}),(0,i.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6",children:[(0,i.jsxs)("div",{className:"bg-white rounded-2xl p-4 sm:p-6 shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-100",children:[(0,i.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,i.jsx)("div",{className:"p-2 bg-purple-100 rounded-lg",children:(0,i.jsx)(Km.A,{size:18,className:"text-purple-600"})}),(0,i.jsx)("p",{className:"text-xs sm:text-sm text-gray-600 font-medium",children:"Total pr\xeat\xe9"})]}),(0,i.jsx)("p",{className:"text-lg sm:text-xl font-bold text-gray-900",children:(0,Tu.vv)(o.totalLoanAmount)})]}),(0,i.jsxs)("div",{className:"bg-white rounded-2xl p-4 sm:p-6 shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-100",children:[(0,i.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,i.jsx)("div",{className:"p-2 bg-green-100 rounded-lg",children:(0,i.jsx)(ht.A,{size:18,className:"text-green-600"})}),(0,i.jsx)("p",{className:"text-xs sm:text-sm text-gray-600 font-medium",children:"Int\xe9r\xeats collect\xe9s"})]}),(0,i.jsx)("p",{className:"text-lg sm:text-xl font-bold text-green-600",children:(0,Tu.vv)(o.totalInterestCollected)})]}),(0,i.jsxs)("div",{className:"bg-white rounded-2xl p-4 sm:p-6 shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-100",children:[(0,i.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,i.jsx)("div",{className:"p-2 bg-orange-100 rounded-lg",children:(0,i.jsx)(Zm,{size:18,className:"text-orange-600"})}),(0,i.jsx)("p",{className:"text-xs sm:text-sm text-gray-600 font-medium",children:"Int\xe9r\xeats \xe0 percevoir"})]}),(0,i.jsx)("p",{className:"text-lg sm:text-xl font-bold text-orange-600",children:(0,Tu.vv)(o.totalInterestNotCollected)})]}),(0,i.jsxs)("button",{type:"button",onClick:()=>e("/admin/analytics/detailed"),className:"w-full text-left bg-gradient-to-br from-green-500 to-emerald-600 rounded-2xl p-4 sm:p-6 shadow-lg hover:shadow-xl transition-all duration-300 text-white group border-0 cursor-pointer",children:[(0,i.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,i.jsx)("div",{className:"p-2 bg-white/20 rounded-lg group-hover:scale-110 transition-transform",children:(0,i.jsx)(qu.A,{size:18,className:"text-white"})}),(0,i.jsx)("p",{className:"text-xs sm:text-sm text-green-100 font-medium",children:"Statistiques d\xe9taill\xe9es"})]}),(0,i.jsx)("p",{className:"text-sm sm:text-base font-semibold text-green-100",children:"Voir les statistiques d\xe9taill\xe9es"}),(0,i.jsx)("p",{className:"text-xs text-green-200/90 mt-1",children:"Graphiques, filtres par p\xe9riode, comptabilit\xe9"})]})]})]}),(0,i.jsxs)("div",{className:"mb-6",children:[(0,i.jsx)("h2",{className:"text-xl font-bold text-gray-900 font-montserrat mb-4",children:"\ud83c\udfe6 \xc9pargne"}),(0,i.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6",children:[(0,i.jsxs)("div",{className:"bg-white rounded-2xl p-4 sm:p-6 shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-100 group",children:[(0,i.jsx)("div",{className:"flex items-start justify-between mb-3 sm:mb-4",children:(0,i.jsx)("div",{className:"p-2 sm:p-3 bg-purple-100 rounded-xl group-hover:scale-110 transition-transform duration-300",children:(0,i.jsx)(Tm,{size:20,className:"sm:w-6 sm:h-6 text-purple-600"})})}),(0,i.jsx)("p",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:o.totalSavingsPlans}),(0,i.jsx)("p",{className:"text-xs sm:text-sm text-gray-600 mt-1",children:"Plans total"})]}),(0,i.jsxs)("div",{className:"bg-white rounded-2xl p-4 sm:p-6 shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-100 group",children:[(0,i.jsx)("div",{className:"flex items-start justify-between mb-3 sm:mb-4",children:(0,i.jsx)("div",{className:"p-2 sm:p-3 bg-green-100 rounded-xl group-hover:scale-110 transition-transform duration-300",children:(0,i.jsx)(Pm.A,{size:20,className:"sm:w-6 sm:h-6 text-green-600"})})}),(0,i.jsx)("p",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:o.activeSavingsPlans}),(0,i.jsx)("p",{className:"text-xs sm:text-sm text-gray-600 mt-1",children:"Actifs"})]}),(0,i.jsxs)("div",{className:"bg-white rounded-2xl p-4 sm:p-6 shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-100 group",children:[(0,i.jsx)("div",{className:"flex items-start justify-between mb-3 sm:mb-4",children:(0,i.jsx)("div",{className:"p-2 sm:p-3 bg-blue-100 rounded-xl group-hover:scale-110 transition-transform duration-300",children:(0,i.jsx)(ht.A,{size:20,className:"sm:w-6 sm:h-6 text-blue-600"})})}),(0,i.jsx)("p",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:o.completedSavingsPlans}),(0,i.jsx)("p",{className:"text-xs sm:text-sm text-gray-600 mt-1",children:"Termin\xe9s"})]}),(0,i.jsxs)("div",{className:"bg-gradient-to-br from-purple-500 to-pink-600 rounded-2xl p-4 sm:p-6 shadow-lg hover:shadow-xl transition-all duration-300 text-white group",children:[(0,i.jsx)("div",{className:"flex items-start justify-between mb-3 sm:mb-4",children:(0,i.jsx)("div",{className:"p-2 sm:p-3 bg-white/20 rounded-xl group-hover:scale-110 transition-transform duration-300",children:(0,i.jsx)(Ku,{size:20,className:"sm:w-6 sm:h-6 text-white"})})}),(0,i.jsx)("p",{className:"text-lg sm:text-xl font-bold",children:(0,Tu.vv)(o.totalSavingsAmount)}),(0,i.jsx)("p",{className:"text-xs sm:text-sm text-purple-100 mt-1",children:"Total \xe9pargn\xe9"})]})]})]}),(0,i.jsxs)("div",{className:"mb-6",children:[(0,i.jsx)("h2",{className:"text-xl font-bold text-gray-900 font-montserrat mb-4",children:"\ud83d\udc65 Utilisateurs"}),(0,i.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 sm:gap-6",children:[(0,i.jsxs)("div",{className:"bg-white rounded-2xl p-4 sm:p-6 shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-100",children:[(0,i.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,i.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,i.jsx)(Lm,{size:18,className:"text-blue-600"})}),(0,i.jsx)("p",{className:"text-xs sm:text-sm text-gray-600 font-medium",children:"Total"})]}),(0,i.jsx)("p",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:o.totalUsers})]}),(0,i.jsxs)("div",{className:"bg-white rounded-2xl p-4 sm:p-6 shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-100",children:[(0,i.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,i.jsx)("div",{className:"p-2 bg-green-100 rounded-lg",children:(0,i.jsx)(ht.A,{size:18,className:"text-green-600"})}),(0,i.jsx)("p",{className:"text-xs sm:text-sm text-gray-600 font-medium",children:"Actifs"})]}),(0,i.jsx)("p",{className:"text-2xl sm:text-3xl font-bold text-green-600",children:o.activeUsers})]}),(0,i.jsxs)("div",{className:"bg-white rounded-2xl p-4 sm:p-6 shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-100",children:[(0,i.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,i.jsx)("div",{className:"p-2 bg-yellow-100 rounded-lg",children:(0,i.jsx)(wu,{size:18,className:"text-yellow-600"})}),(0,i.jsx)("p",{className:"text-xs sm:text-sm text-gray-600 font-medium",children:"En attente"})]}),(0,i.jsx)("p",{className:"text-2xl sm:text-3xl font-bold text-yellow-600",children:o.pendingUsers})]})]})]}),o.topBorrowers.length>0&&(0,i.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden",children:[(0,i.jsx)("div",{className:"p-4 sm:p-6 border-b border-gray-100",children:(0,i.jsxs)("h2",{className:"text-xl font-bold text-gray-900 font-montserrat flex items-center gap-2",children:[(0,i.jsx)(Im,{size:24,className:"text-orange-600"}),"Top 5 Emprunteurs"]})}),(0,i.jsx)("div",{className:"divide-y divide-gray-100",children:o.topBorrowers.map((e,t)=>(0,i.jsx)("div",{className:"p-4 sm:p-6 hover:bg-gray-50 transition-colors",children:(0,i.jsxs)("div",{className:"flex items-center gap-3 sm:gap-4",children:[(0,i.jsx)("div",{className:"flex-shrink-0 w-10 h-10 sm:w-12 sm:h-12 rounded-full flex items-center justify-center font-bold text-lg ".concat(0===t?"bg-yellow-100 text-yellow-700":1===t?"bg-gray-100 text-gray-700":2===t?"bg-orange-100 text-orange-700":"bg-blue-100 text-blue-700"),children:t+1}),(0,i.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,i.jsx)("p",{className:"text-sm sm:text-base font-bold text-gray-900 truncate",children:e.userName}),(0,i.jsxs)("p",{className:"text-xs sm:text-sm text-gray-600",children:[e.loansCount," pr\xeat",e.loansCount>1?"s":""," \u2022 ",e.completedLoans," rembours\xe9",e.completedLoans>1?"s":""]})]}),(0,i.jsxs)("div",{className:"text-right",children:[(0,i.jsx)("p",{className:"text-sm sm:text-base font-bold text-gray-900",children:(0,Tu.vv)(e.totalBorrowed)}),(0,i.jsx)("p",{className:"text-xs text-gray-500",children:"Total"})]})]})},t))})]})]})]})},Jm=()=>{const e=(0,We.Zp)(),t=[{id:"ab-epargne",title:"AB Epargne",description:"Gestion des comptes d'\xe9pargne et des plans",icon:Tm,color:"from-green-500 to-emerald-600",bgColor:"bg-green-50",iconColor:"text-green-600",path:"/admin/ab-epargne"},{id:"ab-pret",title:"AB Pret",description:"Gestion des demandes de pr\xeats et remboursements",icon:Bu.A,color:"from-blue-500 to-indigo-600",bgColor:"bg-blue-50",iconColor:"text-blue-600",path:"/admin/loan-requests"},{id:"utilisateurs",title:"Utilisateurs",description:"G\xe9rer les clients et voir leurs informations",icon:Lm,color:"from-purple-500 to-pink-600",bgColor:"bg-purple-50",iconColor:"text-purple-600",path:"/admin/user-management"}];return(0,i.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-blue-50 pb-24",children:[(0,i.jsx)("div",{className:"bg-white shadow-sm border-b border-gray-200",children:(0,i.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,i.jsxs)("div",{className:"py-6",children:[(0,i.jsx)("h1",{className:"text-3xl font-bold text-gray-900 font-montserrat",children:"Menu Admin"}),(0,i.jsx)("p",{className:"text-gray-600 font-montserrat mt-2",children:"S\xe9lectionnez une section pour g\xe9rer"})]})})}),(0,i.jsx)("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:(0,i.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(t=>(0,i.jsxs)("button",{onClick:()=>e(t.path),className:"group relative bg-white rounded-3xl p-8 shadow-lg hover:shadow-2xl transition-all duration-300 transform hover:scale-105 border border-gray-100 overflow-hidden",children:[(0,i.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br ".concat(t.color," opacity-0 group-hover:opacity-5 transition-opacity duration-300")}),(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsx)("div",{className:"inline-flex p-4 rounded-2xl ".concat(t.bgColor," mb-6 group-hover:scale-110 transition-transform duration-300"),children:(0,i.jsx)(t.icon,{size:40,className:t.iconColor})}),(0,i.jsx)("h2",{className:"text-2xl font-bold text-gray-900 font-montserrat mb-3",children:t.title}),(0,i.jsx)("p",{className:"text-gray-600 font-montserrat mb-6",children:t.description}),(0,i.jsxs)("div",{className:"flex items-center text-primary-600 font-semibold font-montserrat group-hover:translate-x-2 transition-transform duration-300",children:[(0,i.jsx)("span",{children:"Acc\xe9der"}),(0,i.jsx)(ur,{size:20,className:"ml-2"})]})]}),(0,i.jsx)("div",{className:"absolute -right-8 -bottom-8 w-32 h-32 rounded-full bg-gradient-to-br ".concat(t.color," opacity-10 group-hover:opacity-20 transition-opacity duration-300")})]},t.id))})})]})},Ym=()=>{const{user:e,forceRefreshRole:t}=dt(),[s,n]=(0,r.useState)(!1),[a,o]=(0,r.useState)(!1),[l,d]=(0,r.useState)(null),[u,h]=(0,r.useState)(null);return e?(0,i.jsxs)("div",{className:"bg-white rounded-lg shadow-lg border border-gray-200 p-4 max-w-sm mx-auto",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,i.jsx)(cr,{size:20,className:"text-blue-600"}),(0,i.jsx)("h3",{className:"font-semibold text-gray-900",children:"Debug R\xf4le"})]}),(0,i.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsx)("span",{className:"text-gray-600",children:"R\xf4le actuel:"}),(0,i.jsx)("span",{className:"font-semibold ".concat("admin"===e.role?"text-green-600":"text-orange-600"),children:e.role||"Non d\xe9fini"})]}),(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsx)("span",{className:"text-gray-600",children:"Email:"}),(0,i.jsx)("span",{className:"text-gray-900",children:e.email})]}),l&&(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsx)("span",{className:"text-gray-600",children:"Dernier refresh:"}),(0,i.jsx)("span",{className:"text-gray-900",children:l})]}),u&&(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsx)("span",{className:"text-gray-600",children:"Coh\xe9rence:"}),(0,i.jsx)("span",{className:"font-semibold ".concat(u.consistent?"text-green-600":"text-red-600"),children:u.consistent?"OK":"INCOH\xc9RENT"})]})]}),(0,i.jsxs)("div",{className:"mt-4 space-y-2",children:[(0,i.jsxs)("button",{onClick:async()=>{n(!0);try{const e=await t();d((new Date).toLocaleTimeString()),e.success?console.log("[ROLE_DEBUGGER] \u2705 R\xf4le mis \xe0 jour:",e.role):console.error("[ROLE_DEBUGGER] \u274c Erreur:",e.error)}catch(e){console.error("[ROLE_DEBUGGER] \u274c Erreur:",e)}finally{n(!1)}},disabled:s,className:"w-full flex items-center justify-center gap-2 px-3 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white rounded-lg transition-colors text-sm",children:[(0,i.jsx)(Js.A,{size:16,className:s?"animate-spin":""}),s?"Actualisation...":"Forcer Refresh R\xf4le"]}),(0,i.jsxs)("button",{onClick:async()=>{o(!0);try{const t=await(async()=>{try{console.log("[FORCE_ROLE_REFRESH] \ud83d\udd04 D\xe9but du rafra\xeechissement forc\xe9 du r\xf4le..."),console.log("[FORCE_ROLE_REFRESH] \ud83e\uddf9 Nettoyage du cache..."),localStorage.removeItem("ab_user_cache"),localStorage.removeItem("ab_user_cache_time"),sessionStorage.clear();const{data:{session:e},error:t}=await ot.ND.auth.getSession();if(t)return console.error("[FORCE_ROLE_REFRESH] \u274c Erreur session:",t),{success:!1,error:t.message};if(null===e||void 0===e||!e.user)return console.log("[FORCE_ROLE_REFRESH] \u26a0\ufe0f Aucune session active"),{success:!1,error:"Aucune session active"};console.log("[FORCE_ROLE_REFRESH] \ud83d\udc64 Session trouv\xe9e:",e.user.email),console.log("[FORCE_ROLE_REFRESH] \ud83d\uddc4\ufe0f R\xe9cup\xe9ration du r\xf4le depuis la DB...");const{data:s,error:r}=await ot.ND.from("users").select("role, first_name, last_name, email").eq("id",e.user.id).single();if(r)return console.error("[FORCE_ROLE_REFRESH] \u274c Erreur DB:",r),{success:!1,error:r.message};if(!s)return console.error("[FORCE_ROLE_REFRESH] \u274c Utilisateur non trouv\xe9 en DB"),{success:!1,error:"Utilisateur non trouv\xe9"};console.log("[FORCE_ROLE_REFRESH] \u2705 R\xf4le r\xe9cup\xe9r\xe9:",s.role);const n={id:e.user.id,email:e.user.email,role:s.role,first_name:s.first_name||"",last_name:s.last_name||"",firstName:s.first_name,lastName:s.last_name};return localStorage.setItem("ab_user_cache",JSON.stringify(n)),localStorage.setItem("ab_user_cache_time",Date.now().toString()),console.log("[FORCE_ROLE_REFRESH] \u2705 Cache mis \xe0 jour avec le r\xf4le:",s.role),console.log("[FORCE_ROLE_REFRESH] \ud83d\udd04 Rechargement de la page..."),window.location.reload(),{success:!0,role:s.role,user:n}}catch(e){return console.error("[FORCE_ROLE_REFRESH] \u274c Erreur g\xe9n\xe9rale:",e),{success:!1,error:e.message}}})(e.id);t.success?console.log("[ROLE_DEBUGGER] \u2705 R\xf4le forc\xe9 mis \xe0 jour:",t.role):(console.error("[ROLE_DEBUGGER] \u274c Erreur force refresh:",t.error),alert("Erreur: ".concat(t.error)))}catch(t){console.error("[ROLE_DEBUGGER] \u274c Erreur force refresh:",t),alert("Erreur: ".concat(t.message))}finally{o(!1)}},disabled:a,className:"w-full flex items-center justify-center gap-2 px-3 py-2 bg-red-600 hover:bg-red-700 disabled:bg-red-400 text-white rounded-lg transition-colors text-sm",children:[(0,i.jsx)(ch,{size:16,className:a?"animate-pulse":""}),a?"Force Refresh...":"Force Refresh + Reload"]}),(0,i.jsxs)("button",{onClick:async()=>{try{const e=await(async()=>{try{const e=localStorage.getItem("ab_user_cache");if(!e)return{consistent:!1,reason:"Aucun cache trouv\xe9"};const t=JSON.parse(e),{data:{session:s}}=await ot.ND.auth.getSession();if(null===s||void 0===s||!s.user)return{consistent:!1,reason:"Aucune session active"};const{data:r,error:n}=await ot.ND.from("users").select("role").eq("id",s.user.id).single();if(n||!r)return{consistent:!1,reason:"Impossible de r\xe9cup\xe9rer le r\xf4le depuis la DB"};const a=t.role===r.role;return{consistent:a,cachedRole:t.role,dbRole:r.role,reason:a?"R\xf4les coh\xe9rents":"R\xf4les incoh\xe9rents"}}catch(e){return console.error("[CHECK_ROLE_CONSISTENCY] \u274c Erreur:",e),{consistent:!1,reason:e.message}}})();h(e),console.log("[ROLE_DEBUGGER] Coh\xe9rence des r\xf4les:",e)}catch(e){console.error("[ROLE_DEBUGGER] \u274c Erreur v\xe9rification:",e)}},className:"w-full flex items-center justify-center gap-2 px-3 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-lg transition-colors text-sm",children:[(0,i.jsx)(ht.A,{size:16}),"V\xe9rifier Coh\xe9rence"]}),(0,i.jsxs)("button",{onClick:()=>{window.confirm("\u26a0\ufe0f ATTENTION: Cette action va nettoyer TOUS les caches et recharger la page. Continuer ?")&&(console.log("[ROLE_DEBUGGER] \ud83e\uddf9 Nettoyage complet du cache..."),(()=>{console.log("[CLEAR_ALL_CACHE] \ud83e\uddf9 D\xe9but du nettoyage complet...");try{const e=["push_subscription"],t=(0,c.A)({},localStorage);for(const s in t)e.includes(s)||(localStorage.removeItem(s),console.log("[CLEAR_ALL_CACHE] \ud83d\uddd1\ufe0f Supprim\xe9 localStorage: ".concat(s)));sessionStorage.clear(),console.log("[CLEAR_ALL_CACHE] \ud83d\uddd1\ufe0f sessionStorage nettoy\xe9"),"caches"in window&&caches.keys().then(e=>{e.forEach(e=>{caches.delete(e),console.log("[CLEAR_ALL_CACHE] \ud83d\uddd1\ufe0f Cache supprim\xe9: ".concat(e))})}),console.log("[CLEAR_ALL_CACHE] \ud83d\udd04 Rechargement de la page..."),window.location.reload(!0)}catch(e){console.error("[CLEAR_ALL_CACHE] \u274c Erreur lors du nettoyage:",e),window.location.reload(!0)}})())},className:"w-full flex items-center justify-center gap-2 px-3 py-2 bg-red-800 hover:bg-red-900 text-white rounded-lg transition-colors text-sm",children:[(0,i.jsx)(ju,{size:16}),"Nettoyer Tout + Reload"]}),(0,i.jsxs)("button",{onClick:async()=>{if(window.confirm("\u26a0\ufe0f ATTENTION: Cette action va nettoyer TOUS les Service Workers. Continuer ?")){console.log("[ROLE_DEBUGGER] \ud83e\uddf9 Nettoyage des Service Workers...");await(async()=>{if("serviceWorker"in navigator)try{console.log("[CLEAR_SW] \ud83e\uddf9 Nettoyage des Service Workers...");const e=await navigator.serviceWorker.getRegistrations();if(console.log("[CLEAR_SW] ".concat(e.length," Service Worker(s) trouv\xe9(s)")),await Promise.all(e.map(e=>(console.log("[CLEAR_SW] D\xe9senregistrement: ".concat(e.scope)),e.unregister()))),console.log("[CLEAR_SW] \u2705 Tous les Service Workers ont \xe9t\xe9 d\xe9senregistr\xe9s"),"caches"in window){const e=await caches.keys();console.log("[CLEAR_SW] ".concat(e.length," cache(s) trouv\xe9(s)")),await Promise.all(e.map(e=>(console.log("[CLEAR_SW] Suppression du cache: ".concat(e)),caches.delete(e)))),console.log("[CLEAR_SW] \u2705 Tous les caches ont \xe9t\xe9 supprim\xe9s")}return!0}catch(e){return console.error("[CLEAR_SW] \u274c Erreur lors du nettoyage:",e),!1}else console.log("[CLEAR_SW] Service Worker non support\xe9")})()?alert("\u2705 Service Workers nettoy\xe9s avec succ\xe8s !"):alert("\u274c Erreur lors du nettoyage des Service Workers")}},className:"w-full flex items-center justify-center gap-2 px-3 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg transition-colors text-sm",children:[(0,i.jsx)(Nu,{size:16}),"Nettoyer Service Workers"]}),"admin"!==e.role&&(0,i.jsxs)("div",{className:"flex items-center gap-2 p-2 bg-orange-50 border border-orange-200 rounded-lg",children:[(0,i.jsx)(Mm,{size:16,className:"text-orange-600"}),(0,i.jsx)("span",{className:"text-orange-800 text-xs",children:'R\xf4le incorrect d\xe9tect\xe9. Cliquez sur "Forcer Refresh R\xf4le".'})]}),"admin"===e.role&&(0,i.jsxs)("div",{className:"flex items-center gap-2 p-2 bg-green-50 border border-green-200 rounded-lg",children:[(0,i.jsx)(ht.A,{size:16,className:"text-green-600"}),(0,i.jsx)("span",{className:"text-green-800 text-xs",children:"R\xf4le admin correctement charg\xe9."})]})]})]}):null},$m=(0,mt.A)("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),Xm=(0,mt.A)("Bug",[["rect",{width:"8",height:"14",x:"8",y:"6",rx:"4",key:"hq8nra"}],["path",{d:"m19 7-3 2",key:"fmg8ec"}],["path",{d:"m5 7 3 2",key:"dkxqes"}],["path",{d:"m19 19-3-2",key:"1hbhi4"}],["path",{d:"m5 19 3-2",key:"dvt2ee"}],["path",{d:"M20 13h-4",key:"1agfp2"}],["path",{d:"M4 13h4",key:"1bwh8b"}],["path",{d:"m10 4 1 2",key:"1pot59"}],["path",{d:"m14 4-1 2",key:"m8sn0o"}]]),ep=()=>{(0,We.Zp)();const{user:e}=dt(),{showSuccess:t,showError:s}=yt(),[n,a]=(0,r.useState)(!1),[o,l]=(0,r.useState)(null),[d,u]=(0,r.useState)(!1),[h,m]=(0,r.useState)(!1),[p,f]=(0,r.useState)({firstName:(null===e||void 0===e?void 0:e.first_name)||"",lastName:(null===e||void 0===e?void 0:e.last_name)||"",email:(null===e||void 0===e?void 0:e.email)||"",phone:(null===e||void 0===e?void 0:e.phone_number)||""}),[x,g]=(0,r.useState)({currentPassword:"",newPassword:"",confirmPassword:""}),[v,y]=(0,r.useState)({emailNotifications:!0,loanAlerts:!0,savingsAlerts:!0,systemAlerts:!1});return(0,i.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50 pb-24",children:[(0,i.jsx)("div",{className:"bg-white/80 backdrop-blur-lg shadow-lg border-b border-white/50 sticky top-0 z-30",children:(0,i.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:(0,i.jsx)("div",{className:"flex items-center justify-between",children:(0,i.jsxs)("div",{className:"flex items-center gap-4",children:[(0,i.jsx)("div",{className:"p-3 bg-gradient-to-br from-purple-500 to-pink-600 rounded-2xl shadow-lg",children:(0,i.jsx)(Hu,{size:32,className:"text-white"})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900 font-montserrat",children:"Param\xe8tres"}),(0,i.jsx)("p",{className:"text-sm sm:text-base text-gray-600 font-montserrat",children:"Configuration de votre compte"})]})]})})})}),(0,i.jsxs)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,i.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden mb-6",children:[(0,i.jsx)("div",{className:"p-4 sm:p-6 bg-gradient-to-r from-blue-500 to-purple-600 text-white",children:(0,i.jsxs)("div",{className:"flex items-center gap-3",children:[(0,i.jsx)("div",{className:"p-2 bg-white/20 rounded-xl",children:(0,i.jsx)(cr,{size:24})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h2",{className:"text-xl font-bold font-montserrat",children:"Informations du profil"}),(0,i.jsx)("p",{className:"text-sm text-blue-100",children:"G\xe9rez vos informations personnelles"})]})]})}),(0,i.jsxs)("div",{className:"p-4 sm:p-6",children:[(0,i.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-6",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Pr\xe9nom"}),(0,i.jsx)("input",{type:"text",value:p.firstName,onChange:e=>f((0,c.A)((0,c.A)({},p),{},{firstName:e.target.value})),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nom"}),(0,i.jsx)("input",{type:"text",value:p.lastName,onChange:e=>f((0,c.A)((0,c.A)({},p),{},{lastName:e.target.value})),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsx)(fh,{size:18,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,i.jsx)("input",{type:"email",value:p.email,onChange:e=>f((0,c.A)((0,c.A)({},p),{},{email:e.target.value})),className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"T\xe9l\xe9phone"}),(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsx)(ph,{size:18,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,i.jsx)("input",{type:"tel",value:p.phone,onChange:e=>f((0,c.A)((0,c.A)({},p),{},{phone:e.target.value})),className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})]}),(0,i.jsxs)("button",{onClick:async()=>{try{a(!0),await new Promise(e=>setTimeout(e,1e3)),t("Profil mis \xe0 jour avec succ\xe8s")}catch(o){console.error("[SETTINGS] Erreur:",o),s("Erreur lors de la mise \xe0 jour")}finally{a(!1)}},disabled:n,className:"flex items-center justify-center gap-2 px-6 py-3 bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white rounded-xl transition-all duration-200 shadow-md hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,i.jsx)($m,{size:18}),(0,i.jsx)("span",{className:"font-medium",children:n?"Enregistrement...":"Enregistrer les modifications"})]})]})]}),(0,i.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden mb-6",children:[(0,i.jsx)("div",{className:"p-4 sm:p-6 bg-gradient-to-r from-red-500 to-orange-600 text-white",children:(0,i.jsxs)("div",{className:"flex items-center gap-3",children:[(0,i.jsx)("div",{className:"p-2 bg-white/20 rounded-xl",children:(0,i.jsx)(dh,{size:24})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h2",{className:"text-xl font-bold font-montserrat",children:"S\xe9curit\xe9"}),(0,i.jsx)("p",{className:"text-sm text-red-100",children:"Changez votre mot de passe"})]})]})}),(0,i.jsxs)("div",{className:"p-4 sm:p-6",children:[(0,i.jsxs)("div",{className:"space-y-4 mb-6",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Mot de passe actuel"}),(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsx)(xh,{size:18,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,i.jsx)("input",{type:d?"text":"password",value:x.currentPassword,onChange:e=>g((0,c.A)((0,c.A)({},x),{},{currentPassword:e.target.value})),className:"w-full pl-10 pr-12 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-red-500 focus:border-transparent"}),(0,i.jsx)("button",{type:"button",onClick:()=>u(!d),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:d?(0,i.jsx)(gh,{size:18}):(0,i.jsx)(vh,{size:18})})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nouveau mot de passe"}),(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsx)(xh,{size:18,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,i.jsx)("input",{type:d?"text":"password",value:x.newPassword,onChange:e=>g((0,c.A)((0,c.A)({},x),{},{newPassword:e.target.value})),className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-red-500 focus:border-transparent"})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirmer le nouveau mot de passe"}),(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsx)(xh,{size:18,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,i.jsx)("input",{type:d?"text":"password",value:x.confirmPassword,onChange:e=>g((0,c.A)((0,c.A)({},x),{},{confirmPassword:e.target.value})),className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-red-500 focus:border-transparent"})]})]})]}),(0,i.jsxs)("button",{onClick:async()=>{try{if(x.newPassword!==x.confirmPassword)return void s("Les mots de passe ne correspondent pas");if(x.newPassword.length<6)return void s("Le mot de passe doit contenir au moins 6 caract\xe8res");a(!0),await new Promise(e=>setTimeout(e,1e3)),t("Mot de passe mis \xe0 jour avec succ\xe8s"),g({currentPassword:"",newPassword:"",confirmPassword:""})}catch(o){console.error("[SETTINGS] Erreur:",o),s("Erreur lors de la mise \xe0 jour")}finally{a(!1)}},disabled:n,className:"flex items-center justify-center gap-2 px-6 py-3 bg-gradient-to-r from-red-500 to-orange-600 hover:from-red-600 hover:to-orange-700 text-white rounded-xl transition-all duration-200 shadow-md hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,i.jsx)(dh,{size:18}),(0,i.jsx)("span",{className:"font-medium",children:n?"Mise \xe0 jour...":"Changer le mot de passe"})]})]})]}),(0,i.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden",children:[(0,i.jsx)("div",{className:"p-4 sm:p-6 bg-gradient-to-r from-green-500 to-emerald-600 text-white",children:(0,i.jsxs)("div",{className:"flex items-center gap-3",children:[(0,i.jsx)("div",{className:"p-2 bg-white/20 rounded-xl",children:(0,i.jsx)(lr,{size:24})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h2",{className:"text-xl font-bold font-montserrat",children:"Notifications"}),(0,i.jsx)("p",{className:"text-sm text-green-100",children:"G\xe9rez vos pr\xe9f\xe9rences de notification"})]})]})}),(0,i.jsxs)("div",{className:"p-4 sm:p-6",children:[(0,i.jsxs)("div",{className:"space-y-4 mb-6",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-xl",children:[(0,i.jsxs)("div",{className:"flex items-center gap-3",children:[(0,i.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,i.jsx)(fh,{size:18,className:"text-blue-600"})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"font-medium text-gray-900",children:"Notifications par email"}),(0,i.jsx)("p",{className:"text-sm text-gray-600",children:"Recevoir les notifications importantes par email"})]})]}),(0,i.jsx)("button",{onClick:()=>y((0,c.A)((0,c.A)({},v),{},{emailNotifications:!v.emailNotifications})),className:"relative w-12 h-6 rounded-full transition-colors ".concat(v.emailNotifications?"bg-green-500":"bg-gray-300"),children:(0,i.jsx)("div",{className:"absolute top-1 w-4 h-4 bg-white rounded-full transition-transform ".concat(v.emailNotifications?"translate-x-7":"translate-x-1")})})]}),(0,i.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-xl",children:[(0,i.jsxs)("div",{className:"flex items-center gap-3",children:[(0,i.jsx)("div",{className:"p-2 bg-purple-100 rounded-lg",children:(0,i.jsx)(Pm.A,{size:18,className:"text-purple-600"})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"font-medium text-gray-900",children:"Alertes de pr\xeats"}),(0,i.jsx)("p",{className:"text-sm text-gray-600",children:"Notifications pour les nouvelles demandes de pr\xeat"})]})]}),(0,i.jsx)("button",{onClick:()=>y((0,c.A)((0,c.A)({},v),{},{loanAlerts:!v.loanAlerts})),className:"relative w-12 h-6 rounded-full transition-colors ".concat(v.loanAlerts?"bg-green-500":"bg-gray-300"),children:(0,i.jsx)("div",{className:"absolute top-1 w-4 h-4 bg-white rounded-full transition-transform ".concat(v.loanAlerts?"translate-x-7":"translate-x-1")})})]}),(0,i.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-xl",children:[(0,i.jsxs)("div",{className:"flex items-center gap-3",children:[(0,i.jsx)("div",{className:"p-2 bg-green-100 rounded-lg",children:(0,i.jsx)(ht.A,{size:18,className:"text-green-600"})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"font-medium text-gray-900",children:"Alertes d'\xe9pargne"}),(0,i.jsx)("p",{className:"text-sm text-gray-600",children:"Notifications pour les nouveaux plans d'\xe9pargne"})]})]}),(0,i.jsx)("button",{onClick:()=>y((0,c.A)((0,c.A)({},v),{},{savingsAlerts:!v.savingsAlerts})),className:"relative w-12 h-6 rounded-full transition-colors ".concat(v.savingsAlerts?"bg-green-500":"bg-gray-300"),children:(0,i.jsx)("div",{className:"absolute top-1 w-4 h-4 bg-white rounded-full transition-transform ".concat(v.savingsAlerts?"translate-x-7":"translate-x-1")})})]}),(0,i.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-xl",children:[(0,i.jsxs)("div",{className:"flex items-center gap-3",children:[(0,i.jsx)("div",{className:"p-2 bg-orange-100 rounded-lg",children:(0,i.jsx)(pt,{size:18,className:"text-orange-600"})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"font-medium text-gray-900",children:"Alertes syst\xe8me"}),(0,i.jsx)("p",{className:"text-sm text-gray-600",children:"Notifications pour les mises \xe0 jour syst\xe8me"})]})]}),(0,i.jsx)("button",{onClick:()=>y((0,c.A)((0,c.A)({},v),{},{systemAlerts:!v.systemAlerts})),className:"relative w-12 h-6 rounded-full transition-colors ".concat(v.systemAlerts?"bg-green-500":"bg-gray-300"),children:(0,i.jsx)("div",{className:"absolute top-1 w-4 h-4 bg-white rounded-full transition-transform ".concat(v.systemAlerts?"translate-x-7":"translate-x-1")})})]})]}),(0,i.jsxs)("button",{onClick:async()=>{try{a(!0),await new Promise(e=>setTimeout(e,1e3)),t("Pr\xe9f\xe9rences de notification mises \xe0 jour")}catch(o){console.error("[SETTINGS] Erreur:",o),s("Erreur lors de la mise \xe0 jour")}finally{a(!1)}},disabled:n,className:"flex items-center justify-center gap-2 px-6 py-3 bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white rounded-xl transition-all duration-200 shadow-md hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,i.jsx)(lr,{size:18}),(0,i.jsx)("span",{className:"font-medium",children:n?"Enregistrement...":"Enregistrer les pr\xe9f\xe9rences"})]})]})]}),(0,i.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden mb-6",children:[(0,i.jsx)("div",{className:"p-4 sm:p-6 bg-gradient-to-r from-orange-500 to-red-600 text-white",children:(0,i.jsxs)("div",{className:"flex items-center gap-3",children:[(0,i.jsx)("div",{className:"p-2 bg-white/20 rounded-xl",children:(0,i.jsx)(Xm,{size:24})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h2",{className:"text-xl font-bold font-montserrat",children:"Outils de d\xe9veloppement"}),(0,i.jsx)("p",{className:"text-sm text-orange-100",children:"Outils de debug et diagnostic"})]})]})}),(0,i.jsxs)("div",{className:"p-4 sm:p-6",children:[(0,i.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-xl p-4 mb-4",children:(0,i.jsxs)("div",{className:"flex items-start gap-3",children:[(0,i.jsx)(pt,{size:20,className:"text-yellow-600 mt-0.5"}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{className:"font-semibold text-yellow-800 mb-1",children:"\u26a0\ufe0f Outils de Debug"}),(0,i.jsx)("p",{className:"text-sm text-yellow-700",children:"Ces outils sont destin\xe9s aux d\xe9veloppeurs et administrateurs techniques. Utilisez-les uniquement en cas de probl\xe8me avec les r\xf4les ou les notifications."})]})]})}),(0,i.jsxs)("button",{onClick:()=>m(!h),className:"flex items-center justify-center gap-2 px-6 py-3 bg-gradient-to-r from-orange-500 to-red-600 hover:from-orange-600 hover:to-red-700 text-white rounded-xl transition-all duration-200 shadow-md hover:shadow-lg",children:[(0,i.jsx)(Xm,{size:18}),(0,i.jsx)("span",{className:"font-medium",children:h?"Masquer le panneau de debug":"Afficher le panneau de debug"})]})]})]})]}),h&&(0,i.jsx)(Ym,{})]})};var tp=s(6487),sp=s(2938);const rp=()=>{var e,t,s,n,a,o;const l=(0,We.Zp)(),[d,u]=(0,r.useState)(!1),[h,m]=(0,r.useState)(null),[p,f]=(0,r.useState)([]),[x,g]=(0,r.useState)({totalPlans:0,totalSaved:0,activePlans:0,completedPlans:0,suspendedPlans:0,averageProgress:0}),[v,y]=(0,r.useState)(""),[b,j]=(0,r.useState)(null),[w,N]=(0,r.useState)([]),[S,k]=(0,r.useState)(null),[A,_]=(0,r.useState)("plans");(0,r.useEffect)(()=>{E(),C()},[]);const E=async()=>{try{u(!0),m(null),console.log("[ADMIN_AB_EPARGNE] \ud83d\udce5 Chargement des plans d'\xe9pargne...");const{data:e,error:t}=await ot.ND.from("savings_plans").select("*").order("created_at",{ascending:!1});if(t)throw console.error("[ADMIN_AB_EPARGNE] \u274c Erreur plans:",t),m(t.message||"Erreur lors du chargement des plans"),t;console.log("[ADMIN_AB_EPARGNE] \u2705 Plans charg\xe9s:",e),console.log("[ADMIN_AB_EPARGNE] \ud83d\udcca Nombre de plans:",(null===e||void 0===e?void 0:e.length)||0);const s=[...new Set(e.map(e=>e.user_id).filter(Boolean))];console.log("[ADMIN_AB_EPARGNE] \ud83d\udc65 IDs utilisateurs:",s);const{data:r,error:n}=await ot.ND.from("users").select("id, first_name, last_name, email, phone_number").in("id",s);n&&console.error("[ADMIN_AB_EPARGNE] \u26a0\ufe0f Erreur utilisateurs:",n),console.log("[ADMIN_AB_EPARGNE] \u2705 Utilisateurs charg\xe9s:",(null===r||void 0===r?void 0:r.length)||0);const a={};(r||[]).forEach(e=>{a[e.id]=e});const i=e.map(e=>(0,c.A)((0,c.A)({},e),{},{users:a[e.user_id]||null}));console.log("[ADMIN_AB_EPARGNE] \u2705 Plans avec utilisateurs:",i);const o=(i||[]).map(e=>{const t=e.total_amount_target||e.target_amount||0,s=e.current_balance||0,r=t>0?Math.round(s/t*100):0;return(0,c.A)((0,c.A)({},e),{},{user:e.users,target_amount:t,current_balance:s,monthly_amount:e.fixed_amount||e.monthly_amount||0,progress:Math.min(r,100),daysActive:Math.floor((new Date-new Date(e.created_at))/864e5),isOverdue:e.is_overdue||!1,isSuspended:e.is_suspended||!1})});console.log("[ADMIN_AB_EPARGNE] \ud83d\udccb Plans format\xe9s:",o),f(o);const l=o.filter(e=>"active"===e.status).length,d=o.filter(e=>"completed"===e.status).length,h=o.filter(e=>e.is_suspended).length,p=o.reduce((e,t)=>e+(t.current_balance||0),0),x=o.length>0?Math.round(o.reduce((e,t)=>e+t.progress,0)/o.length):0;g({totalPlans:o.length,totalSaved:p,activePlans:l,completedPlans:d,suspendedPlans:h,averageProgress:x})}catch(h){console.error("[ADMIN_AB_EPARGNE] \u274c Erreur lors du chargement:",h),m(h.message||"Une erreur est survenue"),f([]),g({totalPlans:0,totalSaved:0,activePlans:0,completedPlans:0,suspendedPlans:0,averageProgress:0})}finally{u(!1)}},C=async()=>{try{console.log("[ADMIN_AB_EPARGNE] \ud83d\udce5 Chargement des demandes de retrait...");const{data:e,error:t}=await ot.ND.from("withdrawal_requests").select("*").order("created_at",{ascending:!1});if(t)throw console.error("[ADMIN_AB_EPARGNE] \u274c Erreur demandes:",t),t;console.log("[ADMIN_AB_EPARGNE] \u2705 Demandes charg\xe9es:",e);const s=[...new Set(e.map(e=>e.user_id).filter(Boolean))],r=[...new Set(e.map(e=>e.savings_plan_id).filter(Boolean))],{data:n}=await ot.ND.from("users").select("id, first_name, last_name, email, phone_number").in("id",s),{data:a}=await ot.ND.from("savings_plans").select("id, target_amount, current_balance").in("id",r),i={};(n||[]).forEach(e=>{i[e.id]=e});const o={};(a||[]).forEach(e=>{o[e.id]=e});const l=e.map(e=>(0,c.A)((0,c.A)({},e),{},{user:i[e.user_id]||null,plan:o[e.savings_plan_id]||null}));N(l),console.log("[ADMIN_AB_EPARGNE] \u2705 Demandes format\xe9es:",l)}catch(h){console.error("[ADMIN_AB_EPARGNE] \u274c Erreur chargement demandes:",h)}},P=e=>e.is_suspended?(0,i.jsxs)("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-semibold bg-red-100 text-red-700",children:[(0,i.jsx)(Bm,{size:14}),"Suspendu"]}):e.is_overdue?(0,i.jsxs)("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-semibold bg-orange-100 text-orange-700",children:[(0,i.jsx)(pt,{size:14}),"En retard"]}):"completed"===e.status?(0,i.jsxs)("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-semibold bg-green-100 text-green-700",children:[(0,i.jsx)(ht.A,{size:14}),"Termin\xe9"]}):"active"===e.status?(0,i.jsxs)("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-semibold bg-blue-100 text-blue-700",children:[(0,i.jsx)(Pm.A,{size:14}),"Actif"]}):(0,i.jsxs)("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-semibold bg-gray-100 text-gray-700",children:[(0,i.jsx)(wu,{size:14}),e.status]}),T=p.filter(e=>{var t,s,r,n,a,i,o,l;if(!v)return!0;const c=v.toLowerCase();return(null===(t=e.user)||void 0===t||null===(s=t.first_name)||void 0===s?void 0:s.toLowerCase().includes(c))||(null===(r=e.user)||void 0===r||null===(n=r.last_name)||void 0===n?void 0:n.toLowerCase().includes(c))||(null===(a=e.user)||void 0===a||null===(i=a.email)||void 0===i?void 0:i.toLowerCase().includes(c))||(null===(o=e.user)||void 0===o||null===(l=o.phone_number)||void 0===l?void 0:l.includes(c))});return h?(0,i.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-green-50 via-blue-50 to-purple-50 flex items-center justify-center p-4",children:(0,i.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8 max-w-md w-full text-center",children:[(0,i.jsx)("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,i.jsx)(pt,{size:32,className:"text-red-600"})}),(0,i.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Erreur de chargement"}),(0,i.jsx)("p",{className:"text-gray-600 mb-6",children:h}),(0,i.jsxs)("div",{className:"space-y-3",children:[(0,i.jsxs)("button",{onClick:E,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-green-600 hover:bg-green-700 text-white rounded-xl transition-colors",children:[(0,i.jsx)(Js.A,{size:18}),"R\xe9essayer"]}),(0,i.jsx)("button",{onClick:()=>l("/admin"),className:"w-full px-4 py-3 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-xl transition-colors",children:"Retour au dashboard"})]}),(0,i.jsx)("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg text-left",children:(0,i.jsx)("p",{className:"text-xs text-gray-500 font-mono break-all",children:h})})]})}):(0,i.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-green-50 via-blue-50 to-purple-50 pb-24",children:[(0,i.jsx)("div",{className:"bg-white/80 backdrop-blur-lg shadow-lg border-b border-white/50 sticky top-0 z-30",children:(0,i.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{className:"flex items-center gap-4",children:[(0,i.jsx)("div",{className:"p-3 bg-gradient-to-br from-green-500 to-emerald-600 rounded-2xl shadow-lg",children:(0,i.jsx)(Tm,{size:32,className:"text-white"})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h1",{className:"text-3xl font-bold text-gray-900 font-montserrat",children:"AB Epargne"}),(0,i.jsx)("p",{className:"text-gray-600 font-montserrat",children:"Gestion des comptes d'\xe9pargne"})]})]}),(0,i.jsxs)("button",{onClick:E,className:"flex items-center gap-2 px-4 py-2 bg-white hover:bg-gray-50 border border-gray-200 rounded-xl transition-all duration-200 shadow-sm hover:shadow",children:[(0,i.jsx)(Js.A,{size:18,className:"text-gray-600"}),(0,i.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Actualiser"})]})]})})}),(0,i.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[d&&(0,i.jsxs)("div",{className:"flex items-center justify-center gap-2 py-2 mb-4 text-gray-500 text-sm",children:[(0,i.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-green-500 border-t-transparent"}),(0,i.jsx)("span",{children:"Chargement des donn\xe9es..."})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8 transition-opacity duration-200 ".concat(d?"opacity-75":""),children:[(0,i.jsxs)("div",{className:"bg-white rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-100 group",children:[(0,i.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,i.jsx)("div",{className:"p-3 bg-blue-100 rounded-xl group-hover:scale-110 transition-transform duration-300",children:(0,i.jsx)(Pm.A,{size:24,className:"text-blue-600"})}),(0,i.jsxs)("div",{className:"text-right",children:[(0,i.jsx)("p",{className:"text-sm text-gray-600 font-medium",children:"Plans Actifs"}),(0,i.jsx)("p",{className:"text-3xl font-bold text-gray-900 mt-1",children:x.activePlans})]})]}),(0,i.jsxs)("div",{className:"flex items-center justify-between pt-4 border-t border-gray-100",children:[(0,i.jsx)("span",{className:"text-xs text-gray-500",children:"Total plans"}),(0,i.jsx)("span",{className:"text-sm font-semibold text-gray-700",children:x.totalPlans})]})]}),(0,i.jsxs)("div",{className:"bg-gradient-to-br from-green-500 to-emerald-600 rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 text-white group",children:[(0,i.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,i.jsx)("div",{className:"p-3 bg-white/20 rounded-xl group-hover:scale-110 transition-transform duration-300",children:(0,i.jsx)(Ku,{size:24,className:"text-white"})}),(0,i.jsxs)("div",{className:"text-right",children:[(0,i.jsx)("p",{className:"text-sm text-green-100 font-medium",children:"Total \xc9pargn\xe9"}),(0,i.jsx)("p",{className:"text-2xl font-bold mt-1",children:(0,Tu.vv)(x.totalSaved)})]})]}),(0,i.jsxs)("div",{className:"flex items-center gap-2 pt-4 border-t border-white/20",children:[(0,i.jsx)(Dm.A,{size:16,className:"text-green-200"}),(0,i.jsxs)("span",{className:"text-sm text-green-100",children:["Progression moyenne: ",x.averageProgress,"%"]})]})]}),(0,i.jsx)("div",{className:"bg-white rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-100",children:(0,i.jsxs)("div",{className:"space-y-3",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)(ht.A,{size:18,className:"text-green-600"}),(0,i.jsx)("span",{className:"text-sm text-gray-600",children:"Termin\xe9s"})]}),(0,i.jsx)("span",{className:"text-lg font-bold text-gray-900",children:x.completedPlans})]}),(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)(Bm,{size:18,className:"text-red-600"}),(0,i.jsx)("span",{className:"text-sm text-gray-600",children:"Suspendus"})]}),(0,i.jsx)("span",{className:"text-lg font-bold text-gray-900",children:x.suspendedPlans})]}),(0,i.jsxs)("div",{className:"flex items-center justify-between pt-3 border-t border-gray-100",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)(Im,{size:18,className:"text-purple-600"}),(0,i.jsx)("span",{className:"text-sm text-gray-600",children:"Taux de r\xe9ussite"})]}),(0,i.jsxs)("span",{className:"text-lg font-bold text-purple-600",children:[x.totalPlans>0?Math.round(x.completedPlans/x.totalPlans*100):0,"%"]})]})]})})]}),(0,i.jsx)("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 p-2 mb-6",children:(0,i.jsxs)("div",{className:"flex gap-2",children:[(0,i.jsxs)("button",{onClick:()=>_("plans"),className:"flex-1 flex items-center justify-center gap-2 px-6 py-3 rounded-xl font-semibold transition-all duration-200 ".concat("plans"===A?"bg-gradient-to-r from-green-500 to-emerald-600 text-white shadow-lg":"bg-gray-50 text-gray-600 hover:bg-gray-100"),children:[(0,i.jsx)(Tm,{size:20}),(0,i.jsx)("span",{children:"Plans d'\xe9pargne"}),(0,i.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-bold ".concat("plans"===A?"bg-white/20":"bg-gray-200 text-gray-700"),children:p.length})]}),(0,i.jsxs)("button",{onClick:()=>_("withdrawals"),className:"flex-1 flex items-center justify-center gap-2 px-6 py-3 rounded-xl font-semibold transition-all duration-200 ".concat("withdrawals"===A?"bg-gradient-to-r from-green-500 to-emerald-600 text-white shadow-lg":"bg-gray-50 text-gray-600 hover:bg-gray-100"),children:[(0,i.jsx)(Bu.A,{size:20}),(0,i.jsx)("span",{children:"Demandes de retrait"}),(0,i.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-bold ".concat("withdrawals"===A?"bg-white/20":"bg-gray-200 text-gray-700"),children:w.filter(e=>"pending"===e.status).length})]})]})}),"plans"===A&&(0,i.jsx)("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 p-4 mb-6",children:(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsx)(Fm,{size:20,className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,i.jsx)("input",{type:"text",placeholder:"Rechercher par nom, email ou t\xe9l\xe9phone...",value:v,onChange:e=>y(e.target.value),className:"w-full pl-12 pr-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-transparent font-montserrat"})]})}),"plans"===A&&(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,i.jsxs)("h2",{className:"text-xl font-bold text-gray-900 font-montserrat",children:["Plans d'\xe9pargne (",T.length,")"]})}),0===T.length?(0,i.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 p-12 text-center",children:[(0,i.jsx)(Tm,{size:64,className:"mx-auto text-gray-300 mb-4"}),(0,i.jsx)("p",{className:"text-gray-500 font-medium",children:"Aucun plan d'\xe9pargne trouv\xe9"}),v&&(0,i.jsx)("button",{onClick:()=>y(""),className:"mt-4 text-green-600 hover:text-green-700 font-medium",children:"Effacer la recherche"})]}):(0,i.jsx)("div",{className:"grid grid-cols-1 gap-4",children:T.map(e=>{var t,s,r,n,a,o,l,c;return(0,i.jsx)("div",{className:"bg-white rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-100 overflow-hidden group",children:(0,i.jsxs)("div",{className:"p-6",children:[(0,i.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,i.jsxs)("div",{className:"flex items-center gap-4",children:[(0,i.jsxs)("div",{className:"w-12 h-12 bg-gradient-to-br from-green-400 to-blue-500 rounded-full flex items-center justify-center text-white font-bold text-lg shadow-lg",children:[(null===(t=e.user)||void 0===t||null===(s=t.first_name)||void 0===s?void 0:s[0])||"?",(null===(r=e.user)||void 0===r||null===(n=r.last_name)||void 0===n?void 0:n[0])||""]}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("h3",{className:"text-lg font-bold text-gray-900 font-montserrat",children:[(null===(a=e.user)||void 0===a?void 0:a.first_name)||"Inconnu"," ",(null===(o=e.user)||void 0===o?void 0:o.last_name)||""]}),(0,i.jsxs)("div",{className:"flex items-center gap-3 mt-1",children:[(0,i.jsxs)("div",{className:"flex items-center gap-1 text-sm text-gray-500",children:[(0,i.jsx)(fh,{size:14}),(null===(l=e.user)||void 0===l?void 0:l.email)||"N/A"]}),(null===(c=e.user)||void 0===c?void 0:c.phone_number)&&(0,i.jsxs)("div",{className:"flex items-center gap-1 text-sm text-gray-500",children:[(0,i.jsx)(ph,{size:14}),e.user.phone_number]})]})]})]}),P(e)]}),(0,i.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[(0,i.jsxs)("div",{className:"bg-gray-50 rounded-xl p-3",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,i.jsx)(tp.A,{size:16,className:"text-blue-600"}),(0,i.jsx)("p",{className:"text-xs text-gray-600 font-medium",children:"Objectif"})]}),(0,i.jsx)("p",{className:"text-lg font-bold text-gray-900",children:(0,Tu.vv)(e.target_amount)})]}),(0,i.jsxs)("div",{className:"bg-green-50 rounded-xl p-3",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,i.jsx)(Ku,{size:16,className:"text-green-600"}),(0,i.jsx)("p",{className:"text-xs text-gray-600 font-medium",children:"\xc9pargn\xe9"})]}),(0,i.jsx)("p",{className:"text-lg font-bold text-green-700",children:(0,Tu.vv)(e.current_balance||0)})]}),(0,i.jsxs)("div",{className:"bg-purple-50 rounded-xl p-3",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,i.jsx)(Km.A,{size:16,className:"text-purple-600"}),(0,i.jsx)("p",{className:"text-xs text-gray-600 font-medium",children:"Mensualit\xe9"})]}),(0,i.jsx)("p",{className:"text-lg font-bold text-purple-700",children:(0,Tu.vv)(e.monthly_amount||0)})]}),(0,i.jsxs)("div",{className:"bg-orange-50 rounded-xl p-3",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,i.jsx)(sp.A,{size:16,className:"text-orange-600"}),(0,i.jsx)("p",{className:"text-xs text-gray-600 font-medium",children:"Prochain d\xe9p\xf4t"})]}),(0,i.jsx)("p",{className:"text-sm font-bold text-orange-700",children:e.next_deposit_date?new Date(e.next_deposit_date).toLocaleDateString("fr-FR",{day:"2-digit",month:"short"}):"N/A"})]})]}),(0,i.jsxs)("div",{className:"mb-4",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,i.jsx)("span",{className:"text-sm font-medium text-gray-600",children:"Progression"}),(0,i.jsxs)("span",{className:"text-sm font-bold text-green-600",children:[e.progress,"%"]})]}),(0,i.jsx)("div",{className:"relative w-full h-3 bg-gray-200 rounded-full overflow-hidden",children:(0,i.jsx)("div",{className:"absolute top-0 left-0 h-full bg-gradient-to-r from-green-500 to-emerald-600 rounded-full transition-all duration-500",style:{width:"".concat(e.progress,"%")},children:(0,i.jsx)("div",{className:"absolute inset-0 bg-white/20 animate-pulse"})})})]}),(0,i.jsxs)("div",{className:"flex items-center justify-between pt-4 border-t border-gray-100",children:[(0,i.jsxs)("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[(0,i.jsxs)("span",{children:["Cr\xe9\xe9 il y a ",e.daysActive," jours"]}),e.is_overdue&&e.days_overdue>0&&(0,i.jsxs)("span",{className:"text-orange-600 font-medium",children:["\u26a0\ufe0f ",e.days_overdue," jour(s) de retard"]})]}),(0,i.jsxs)("button",{onClick:()=>j(e),className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white rounded-xl transition-all duration-200 shadow-md hover:shadow-lg group",children:[(0,i.jsx)(vh,{size:16}),(0,i.jsx)("span",{className:"text-sm font-medium",children:"D\xe9tails"})]})]})]})},e.id)})})]}),"withdrawals"===A&&(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,i.jsxs)("h2",{className:"text-xl font-bold text-gray-900 font-montserrat",children:["Demandes de retrait (",w.length,")"]})}),0===w.length?(0,i.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 p-12 text-center",children:[(0,i.jsx)(Bu.A,{size:64,className:"mx-auto text-gray-300 mb-4"}),(0,i.jsx)("p",{className:"text-gray-500 font-medium",children:"Aucune demande de retrait"})]}):(0,i.jsx)("div",{className:"grid gap-4",children:w.map(e=>{var t,s,r,n,a,o,l;return(0,i.jsx)("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 hover:shadow-xl transition-all duration-300 overflow-hidden",children:(0,i.jsxs)("div",{className:"p-6",children:[(0,i.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,i.jsxs)("div",{className:"flex items-center gap-3",children:[(0,i.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-green-100 to-emerald-100 rounded-xl flex items-center justify-center",children:(0,i.jsxs)("span",{className:"text-xl font-bold text-green-700",children:[null===(t=e.user)||void 0===t||null===(s=t.first_name)||void 0===s?void 0:s[0],null===(r=e.user)||void 0===r||null===(n=r.last_name)||void 0===n?void 0:n[0]]})}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("h3",{className:"text-lg font-bold text-gray-900",children:[null===(a=e.user)||void 0===a?void 0:a.first_name," ",null===(o=e.user)||void 0===o?void 0:o.last_name]}),(0,i.jsx)("p",{className:"text-sm text-gray-500",children:null===(l=e.user)||void 0===l?void 0:l.email})]})]}),(0,i.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-semibold ".concat("pending"===e.status?"bg-orange-100 text-orange-700":"approved"===e.status?"bg-green-100 text-green-700":"bg-red-100 text-red-700"),children:"pending"===e.status?"\u23f3 En attente":"approved"===e.status?"\u2705 Approuv\xe9":"\u274c Refus\xe9"})]}),(0,i.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[(0,i.jsxs)("div",{className:"bg-blue-50 rounded-xl p-3",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,i.jsx)(Ku,{size:16,className:"text-blue-600"}),(0,i.jsx)("p",{className:"text-xs text-gray-600 font-medium",children:"Montant"})]}),(0,i.jsx)("p",{className:"text-lg font-bold text-blue-700",children:(0,Tu.vv)(e.amount||0)})]}),(0,i.jsxs)("div",{className:"bg-purple-50 rounded-xl p-3",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,i.jsx)(ph,{size:16,className:"text-purple-600"}),(0,i.jsx)("p",{className:"text-xs text-gray-600 font-medium",children:"Num\xe9ro"})]}),(0,i.jsx)("p",{className:"text-sm font-bold text-purple-700",children:e.recipient_phone})]}),(0,i.jsxs)("div",{className:"bg-green-50 rounded-xl p-3",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,i.jsx)(Lm,{size:16,className:"text-green-600"}),(0,i.jsx)("p",{className:"text-xs text-gray-600 font-medium",children:"Nom"})]}),(0,i.jsx)("p",{className:"text-sm font-bold text-green-700",children:e.recipient_name})]}),(0,i.jsxs)("div",{className:"bg-orange-50 rounded-xl p-3",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,i.jsx)(sp.A,{size:16,className:"text-orange-600"}),(0,i.jsx)("p",{className:"text-xs text-gray-600 font-medium",children:"Date"})]}),(0,i.jsx)("p",{className:"text-xs font-bold text-orange-700",children:new Date(e.created_at).toLocaleDateString("fr-FR",{day:"2-digit",month:"short",year:"numeric"})})]})]}),"pending"===e.status&&(0,i.jsxs)("div",{className:"flex items-center gap-3 pt-4 border-t border-gray-100",children:[(0,i.jsxs)("button",{onClick:()=>(async e=>{try{var t;console.log("[ADMIN_AB_EPARGNE] \u2705 Approbation retrait:",e.id);const{error:s}=await ot.ND.from("withdrawal_requests").update({status:"approved",processed_at:(new Date).toISOString(),processed_by:null===(t=(await ot.ND.auth.getUser()).data.user)||void 0===t?void 0:t.id}).eq("id",e.id);if(s)throw s;const{error:r}=await ot.ND.from("savings_plans").update({current_balance:0,target_amount:0,status:"completed",updated_at:(new Date).toISOString()}).eq("id",e.savings_plan_id);if(r)throw r;await ot.ND.from("notifications").insert([{user_id:e.user_id,title:"Retrait approuv\xe9",message:"Votre retrait de ".concat((0,Tu.vv)(e.amount)," a \xe9t\xe9 approuv\xe9 et transf\xe9r\xe9."),type:"withdrawal_approved",data:{withdrawal_id:e.id,amount:e.amount}}]),Ks.success("Retrait approuv\xe9 avec succ\xe8s !"),k(null),C(),E()}catch(h){console.error("[ADMIN_AB_EPARGNE] \u274c Erreur approbation:",h),Ks.error("Erreur lors de l'approbation du retrait")}})(e),className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white rounded-xl transition-all duration-200 shadow-md hover:shadow-lg font-semibold",children:[(0,i.jsx)(ht.A,{size:18}),(0,i.jsx)("span",{children:"Approuver"})]}),(0,i.jsxs)("button",{onClick:()=>k(e),className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 bg-red-500 hover:bg-red-600 text-white rounded-xl transition-all duration-200 shadow-md hover:shadow-lg font-semibold",children:[(0,i.jsx)(Bm,{size:18}),(0,i.jsx)("span",{children:"Refuser"})]})]}),"pending"!==e.status&&e.processed_at&&(0,i.jsxs)("div",{className:"pt-4 border-t border-gray-100",children:[(0,i.jsxs)("p",{className:"text-xs text-gray-500",children:["Trait\xe9 le ",new Date(e.processed_at).toLocaleDateString("fr-FR",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})]}),e.notes&&(0,i.jsxs)("p",{className:"text-sm text-gray-600 mt-2",children:[(0,i.jsx)("span",{className:"font-semibold",children:"Note:"})," ",e.notes]})]})]})},e.id)})})]})]}),S&&(0,i.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:(0,i.jsxs)("div",{className:"bg-white rounded-3xl shadow-2xl max-w-md w-full",children:[(0,i.jsx)("div",{className:"bg-gradient-to-r from-red-500 to-red-600 text-white p-6 rounded-t-3xl",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsx)("h3",{className:"text-2xl font-bold",children:"Refuser la demande"}),(0,i.jsx)("button",{onClick:()=>k(null),className:"p-2 hover:bg-white/20 rounded-full transition-colors",children:(0,i.jsx)(Bm,{size:24})})]})}),(0,i.jsxs)("div",{className:"p-6",children:[(0,i.jsxs)("p",{className:"text-gray-600 mb-4",children:["\xcates-vous s\xfbr de vouloir refuser la demande de retrait de ",(0,i.jsxs)("span",{className:"font-bold",children:[null===(e=S.user)||void 0===e?void 0:e.first_name," ",null===(t=S.user)||void 0===t?void 0:t.last_name]})," ?"]}),(0,i.jsxs)("div",{className:"mb-6",children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Raison du refus"}),(0,i.jsx)("textarea",{id:"rejection-reason",rows:"3",className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"Expliquez pourquoi vous refusez cette demande..."})]}),(0,i.jsxs)("div",{className:"flex gap-3",children:[(0,i.jsx)("button",{onClick:()=>k(null),className:"flex-1 px-4 py-3 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-xl transition-colors font-semibold",children:"Annuler"}),(0,i.jsx)("button",{onClick:()=>{const e=document.getElementById("rejection-reason").value;e.trim()?(async(e,t)=>{try{var s;console.log("[ADMIN_AB_EPARGNE] \u274c Rejet retrait:",e.id);const{error:r}=await ot.ND.from("withdrawal_requests").update({status:"rejected",processed_at:(new Date).toISOString(),processed_by:null===(s=(await ot.ND.auth.getUser()).data.user)||void 0===s?void 0:s.id,notes:t}).eq("id",e.id);if(r)throw r;const{error:n}=await ot.ND.from("savings_plans").update({status:"active",updated_at:(new Date).toISOString()}).eq("id",e.savings_plan_id);if(n)throw n;await ot.ND.from("notifications").insert([{user_id:e.user_id,title:"Retrait refus\xe9",message:"Votre demande de retrait a \xe9t\xe9 refus\xe9e. Raison: ".concat(t),type:"withdrawal_rejected",data:{withdrawal_id:e.id,reason:t}}]),Ks.success("Demande rejet\xe9e"),k(null),C(),E()}catch(h){console.error("[ADMIN_AB_EPARGNE] \u274c Erreur rejet:",h),Ks.error("Erreur lors du rejet de la demande")}})(S,e):Ks.error("Veuillez indiquer une raison")},className:"flex-1 px-4 py-3 bg-red-500 hover:bg-red-600 text-white rounded-xl transition-colors font-semibold",children:"Confirmer le refus"})]})]})]})}),b&&(0,i.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4 overflow-y-auto",children:(0,i.jsxs)("div",{className:"bg-white rounded-3xl shadow-2xl max-w-2xl w-full my-8",children:[(0,i.jsx)("div",{className:"sticky top-0 bg-gradient-to-r from-green-500 to-emerald-600 text-white p-6 rounded-t-3xl z-10",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsx)("h3",{className:"text-2xl font-bold",children:"D\xe9tails du plan"}),(0,i.jsx)("button",{onClick:()=>j(null),className:"p-2 hover:bg-white/20 rounded-full transition-colors",children:(0,i.jsx)(Bm,{size:24})})]})}),(0,i.jsxs)("div",{className:"p-6 pb-32 space-y-6 max-h-[calc(90vh-80px)] overflow-y-auto",children:[(0,i.jsxs)("div",{className:"bg-gray-50 rounded-2xl p-4",children:[(0,i.jsxs)("h4",{className:"font-bold text-gray-900 mb-3 flex items-center gap-2",children:[(0,i.jsx)(Lm,{size:18}),"Informations client"]}),(0,i.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,i.jsxs)("p",{children:[(0,i.jsx)("span",{className:"font-medium",children:"Nom:"})," ",null===(s=b.user)||void 0===s?void 0:s.first_name," ",null===(n=b.user)||void 0===n?void 0:n.last_name]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("span",{className:"font-medium",children:"Email:"})," ",null===(a=b.user)||void 0===a?void 0:a.email]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("span",{className:"font-medium",children:"T\xe9l\xe9phone:"})," ",(null===(o=b.user)||void 0===o?void 0:o.phone_number)||"N/A"]})]})]}),(0,i.jsxs)("div",{className:"bg-green-50 rounded-2xl p-4",children:[(0,i.jsxs)("h4",{className:"font-bold text-gray-900 mb-3 flex items-center gap-2",children:[(0,i.jsx)(Km.A,{size:18}),"D\xe9tails financiers"]}),(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-gray-600",children:"Objectif"}),(0,i.jsx)("p",{className:"font-bold text-lg",children:(0,Tu.vv)(b.target_amount)})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-gray-600",children:"\xc9pargn\xe9"}),(0,i.jsx)("p",{className:"font-bold text-lg text-green-600",children:(0,Tu.vv)(b.current_balance||0)})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-gray-600",children:"Mensualit\xe9"}),(0,i.jsx)("p",{className:"font-bold",children:(0,Tu.vv)(b.monthly_amount||0)})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-gray-600",children:"Fr\xe9quence"}),(0,i.jsx)("p",{className:"font-bold capitalize",children:b.deposit_frequency||"N/A"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-gray-600",children:"Taux d'int\xe9r\xeat"}),(0,i.jsxs)("p",{className:"font-bold",children:[b.interest_rate||0,"%"]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-gray-600",children:"Int\xe9r\xeats accumul\xe9s"}),(0,i.jsx)("p",{className:"font-bold text-purple-600",children:(0,Tu.vv)(b.accumulated_interest||0)})]})]})]}),(0,i.jsxs)("div",{className:"bg-blue-50 rounded-2xl p-4",children:[(0,i.jsxs)("h4",{className:"font-bold text-gray-900 mb-3 flex items-center gap-2",children:[(0,i.jsx)(sp.A,{size:18}),"Dates importantes"]}),(0,i.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,i.jsxs)("p",{children:[(0,i.jsx)("span",{className:"font-medium",children:"Cr\xe9\xe9 le:"})," ",new Date(b.created_at).toLocaleDateString("fr-FR")]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("span",{className:"font-medium",children:"Prochain d\xe9p\xf4t:"})," ",b.next_deposit_date?new Date(b.next_deposit_date).toLocaleDateString("fr-FR"):"N/A"]}),b.is_overdue&&(0,i.jsxs)("p",{className:"text-orange-600 font-medium",children:["\u26a0\ufe0f En retard depuis ",b.days_overdue," jour(s)"]})]})]}),(0,i.jsxs)("div",{className:"bg-purple-50 rounded-2xl p-4",children:[(0,i.jsx)("h4",{className:"font-bold text-gray-900 mb-3",children:"Progression"}),(0,i.jsx)("div",{className:"relative w-full h-4 bg-gray-200 rounded-full overflow-hidden mb-2",children:(0,i.jsx)("div",{className:"absolute top-0 left-0 h-full bg-gradient-to-r from-green-500 to-emerald-600 rounded-full",style:{width:"".concat(b.progress,"%")}})}),(0,i.jsxs)("p",{className:"text-center font-bold text-2xl text-green-600",children:[b.progress,"%"]})]})]})]})})]})},np=(0,mt.A)("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),ap=["children","className","title"],ip=e=>{let{children:t,className:s="",title:r}=e,n=(0,ua.A)(e,ap);return(0,i.jsxs)("div",(0,c.A)((0,c.A)({className:"bg-white rounded-xl shadow-soft border border-accent-200 ".concat(s)},n),{},{children:[r&&(0,i.jsx)("div",{className:"px-6 py-4 border-b border-accent-200",children:(0,i.jsx)("h3",{className:"text-lg font-semibold text-secondary-900 font-montserrat",children:r})}),(0,i.jsx)("div",{className:"p-6",children:t})]}))},op=()=>{const[e,t]=(0,r.useState)([]),[s,n]=(0,r.useState)(""),[a,o]=(0,r.useState)("approval"),[l,c]=(0,r.useState)(!1),[d,u]=(0,r.useState)(null),[h,m]=(0,r.useState)(!0);(0,r.useEffect)(()=>{p()},[]);const p=async()=>{try{m(!0);const e=await(0,lt.CF)();if(e.success){const s=e.data.filter(e=>"approved"===e.status);t(s),console.log("[TEST_NOTIFICATIONS] Utilisateurs charg\xe9s:",s.length)}else console.error("[TEST_NOTIFICATIONS] Erreur chargement utilisateurs:",e.error)}catch(e){console.error("[TEST_NOTIFICATIONS] Erreur:",e)}finally{m(!1)}},f=e.find(e=>e.id===s);return(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Test des Notifications"}),(0,i.jsx)("p",{className:"text-gray-600",children:"Envoyer des notifications de test aux utilisateurs"})]}),(0,i.jsxs)(Sh,{onClick:p,variant:"outline",size:"sm",className:"flex items-center space-x-2",disabled:h,children:[(0,i.jsx)(Js.A,{size:16,className:h?"animate-spin":""}),(0,i.jsx)("span",{children:"Actualiser"})]})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,i.jsx)(ip,{children:(0,i.jsxs)("div",{className:"p-6",children:[(0,i.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center space-x-2",children:[(0,i.jsx)(lr,{size:20,className:"text-primary-600"}),(0,i.jsx)("span",{children:"Configuration du test"})]}),(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Utilisateur cible"}),h?(0,i.jsxs)("div",{className:"flex items-center space-x-2 text-gray-500",children:[(0,i.jsx)(Fh,{size:16,className:"animate-spin"}),(0,i.jsx)("span",{children:"Chargement des utilisateurs..."})]}):(0,i.jsxs)("select",{value:s,onChange:e=>n(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[(0,i.jsx)("option",{value:"",children:"S\xe9lectionner un utilisateur"}),e.map(e=>(0,i.jsxs)("option",{value:e.id,children:[e.first_name," ",e.last_name," (",e.email,")"]},e.id))]}),f&&(0,i.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:[f.first_name," ",f.last_name," - ",f.email]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Type de notification"}),(0,i.jsx)("div",{className:"space-y-2",children:["approval","reminder","overdue"].map(e=>{const t=(e=>{const t={approval:{icon:(0,i.jsx)(ht.A,{size:20,className:"text-green-600"}),title:"Pr\xeat approuv\xe9",description:"Notification de validation de pr\xeat",color:"text-green-600 bg-green-100"},reminder:{icon:(0,i.jsx)(wu,{size:20,className:"text-blue-600"}),title:"Rappel de remboursement",description:"Notification de rappel avant \xe9ch\xe9ance",color:"text-blue-600 bg-blue-100"},overdue:{icon:(0,i.jsx)(Mm,{size:20,className:"text-red-600"}),title:"Pr\xeat en retard",description:"Notification de pr\xeat en retard avec p\xe9nalit\xe9s",color:"text-red-600 bg-red-100"}};return t[e]||t.approval})(e);return(0,i.jsxs)("label",{className:"flex items-center space-x-3 p-3 border rounded-lg cursor-pointer hover:bg-gray-50",children:[(0,i.jsx)("input",{type:"radio",name:"testType",value:e,checked:a===e,onChange:e=>o(e.target.value),className:"text-primary-600 focus:ring-primary-500"}),(0,i.jsx)("div",{className:"p-2 rounded-lg ".concat(t.color),children:t.icon}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"font-medium text-gray-900",children:t.title}),(0,i.jsx)("p",{className:"text-sm text-gray-500",children:t.description})]})]},e)})})]}),(0,i.jsx)(Sh,{onClick:async()=>{if(s)try{c(!0),u(null);const e=(()=>"https://ab-pret-back.onrender.com")();console.log("[TEST_NOTIFICATIONS] Envoi notification de test...",{userId:s,testType:a,backendUrl:e});const t=await fetch("".concat(e,"/api/test-loan-notification"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:s,testType:a})}),r=await t.json();r.success?(u({type:"success",message:"Notification envoy\xe9e avec succ\xe8s !",details:r.details}),console.log("[TEST_NOTIFICATIONS] \u2705 Notification envoy\xe9e:",r.details)):(u({type:"error",message:r.error||"Erreur lors de l'envoi de la notification",details:null}),console.error("[TEST_NOTIFICATIONS] \u274c Erreur:",r.error))}catch(e){console.error("[TEST_NOTIFICATIONS] Erreur r\xe9seau:",e),u({type:"error",message:"Erreur de connexion au serveur",details:null})}finally{c(!1)}else alert("Veuillez s\xe9lectionner un utilisateur")},disabled:!s||l,className:"w-full flex items-center justify-center space-x-2",children:l?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Fh,{size:16,className:"animate-spin"}),(0,i.jsx)("span",{children:"Envoi en cours..."})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(np,{size:16}),(0,i.jsx)("span",{children:"Envoyer la notification de test"})]})})]})]})}),(0,i.jsx)(ip,{children:(0,i.jsxs)("div",{className:"p-6",children:[(0,i.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center space-x-2",children:[(0,i.jsx)(Bu.A,{size:20,className:"text-primary-600"}),(0,i.jsx)("span",{children:"R\xe9sultat du test"})]}),d?(0,i.jsx)(gu.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"p-4 rounded-lg ".concat("success"===d.type?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"),children:(0,i.jsxs)("div",{className:"flex items-start space-x-3",children:["success"===d.type?(0,i.jsx)(ht.A,{size:20,className:"text-green-600 mt-0.5"}):(0,i.jsx)(pt,{size:20,className:"text-red-600 mt-0.5"}),(0,i.jsxs)("div",{className:"flex-1",children:[(0,i.jsx)("p",{className:"font-medium ".concat("success"===d.type?"text-green-800":"text-red-800"),children:d.message}),d.details&&(0,i.jsxs)("div",{className:"mt-3 space-y-2 text-sm",children:[(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:"font-medium text-gray-700",children:"Utilisateur:"}),(0,i.jsx)("p",{className:"text-gray-600",children:d.details.user})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:"font-medium text-gray-700",children:"Email:"}),(0,i.jsx)("p",{className:"text-gray-600",children:d.details.email})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:"font-medium text-gray-700",children:"Type:"}),(0,i.jsx)("p",{className:"text-gray-600",children:d.details.testType})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:"font-medium text-gray-700",children:"Abonnements:"}),(0,i.jsx)("p",{className:"text-gray-600",children:d.details.subscriptionsFound})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:"font-medium text-gray-700",children:"Envoy\xe9es:"}),(0,i.jsx)("p",{className:"text-gray-600",children:d.details.notificationsSent})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:"font-medium text-gray-700",children:"Erreurs:"}),(0,i.jsx)("p",{className:"text-gray-600",children:d.details.errors})]})]}),d.details.notificationData&&(0,i.jsxs)("div",{className:"mt-3 p-3 bg-gray-100 rounded-lg",children:[(0,i.jsx)("p",{className:"font-medium text-gray-700 mb-1",children:"Contenu de la notification:"}),(0,i.jsxs)("p",{className:"text-sm text-gray-600",children:[(0,i.jsx)("strong",{children:"Titre:"})," ",d.details.notificationData.title]}),(0,i.jsxs)("p",{className:"text-sm text-gray-600",children:[(0,i.jsx)("strong",{children:"Message:"})," ",d.details.notificationData.body]})]})]})]})]})}):(0,i.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,i.jsx)(lr,{size:48,className:"mx-auto mb-4 opacity-50"}),(0,i.jsx)("p",{children:"Aucun test effectu\xe9"}),(0,i.jsx)("p",{className:"text-sm",children:"S\xe9lectionnez un utilisateur et envoyez une notification de test"})]})]})})]}),(0,i.jsx)(ip,{children:(0,i.jsxs)("div",{className:"p-6",children:[(0,i.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Informations sur l'environnement"}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:"font-medium text-gray-700",children:"Environnement:"}),(0,i.jsx)("p",{className:"text-gray-600",children:"production"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:"font-medium text-gray-700",children:"Backend URL:"}),(0,i.jsx)("p",{className:"text-gray-600",children:"https://ab-pret-back.onrender.com"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:"font-medium text-gray-700",children:"Utilisateurs disponibles:"}),(0,i.jsxs)("p",{className:"text-gray-600",children:[e.length," utilisateurs approuv\xe9s"]})]})]})]})})]})},lp=(0,mt.A)("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]),cp=(0,mt.A)("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]),dp=(0,mt.A)("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]),up=(0,mt.A)("Check",[["polyline",{points:"20 6 9 17 4 12",key:"10jjfj"}]]),hp={durations:[{value:5,label:"5 jours",days:5},{value:10,label:"10 jours",days:10},{value:15,label:"15 jours",days:15},{value:25,label:"25 jours",days:25},{value:30,label:"30 jours",days:30}],interestRates:{5:6,10:10,15:15,25:25,30:25},amounts:{min:1e3,max:5e5},monthlyIncome:{min:1e4,max:2e6},getInterestRate:function(e){return 25===e?25:30===e?(arguments.length>1&&void 0!==arguments[1]?arguments[1]:0)>=2e4?25:30:hp.interestRates[e]||25},calculateInterest:(e,t)=>e*hp.getInterestRate(t,e)/100,calculateTotalAmount:(e,t)=>e+hp.calculateInterest(e,t),calculatePaymentAmount:(e,t)=>e,validateLoan:(e,t)=>{const s=[];e<hp.amounts.min&&s.push("Le montant minimum est de ".concat(hp.amounts.min.toLocaleString()," FCFA")),e>hp.amounts.max&&s.push("Le montant maximum est de ".concat(hp.amounts.max.toLocaleString()," FCFA"));const r=hp.durations.map(e=>e.days);return r.includes(t)||s.push("Dur\xe9e de pr\xeat non valide"),{isValid:0===s.length,errors:s}},validateMonthlyIncome:e=>{const t=[];return e<hp.monthlyIncome.min&&t.push("Le revenu mensuel minimum est de ".concat(hp.monthlyIncome.min.toLocaleString()," FCFA")),e>hp.monthlyIncome.max&&t.push("Le revenu mensuel maximum est de ".concat(hp.monthlyIncome.max.toLocaleString()," FCFA")),{isValid:0===t.length,errors:t}}},mp=()=>{const{user:e}=dt(),{showSuccess:t,showError:s}=yt(),n=(0,We.Zp)(),[a,o]=(0,r.useState)(1),[l,d]=(0,r.useState)({amount:"",duration:5,purpose:"",employmentStatus:"student",guarantee:"",momoNumber:"",momoNetwork:"",momoName:"",category:""}),[u,h]=(0,r.useState)(!1),[m,p]=(0,r.useState)(!1),[f,x]=(0,r.useState)(null),[g,v]=(0,r.useState)(!1),[y,b]=(0,r.useState)(!1),[j,w]=(0,r.useState)({}),[N,S]=(0,r.useState)(null),[k,A]=(0,r.useState)(!1),[_,E]=(0,r.useState)(!1);(0,r.useEffect)(()=>{C()},[null===e||void 0===e?void 0:e.id]);const C=async()=>{try{E(!0);const t=await(0,lt.Or)(e.id);if(t.success){const e=(t.data||[]).find(e=>"active"===e.status||"approved"===e.status||"overdue"===e.status);A(!!e),e&&("overdue"===e.status?s("Vous ne pouvez pas demander un nouveau pr\xeat tant que votre pr\xeat en retard n'est pas rembours\xe9."):s("Vous avez d\xe9j\xe0 un pr\xeat en cours. Vous devez le rembourser avant de faire une nouvelle demande."))}}catch(t){console.error("[LOAN_REQUEST] Erreur:",t)}finally{E(!1)}};(0,r.useEffect)(()=>{l.amount&&l.duration&&P()},[l.amount,l.duration]);const P=()=>{const e=parseFloat(l.amount),t=parseInt(l.duration);if(!e||e<hp.amounts.min||e>hp.amounts.max)return void S(null);const s=hp.getInterestRate(t,e),r=Math.round(hp.calculateInterest(e,t)),n=Math.round(hp.calculateTotalAmount(e,t));S({principal:e,interest:r,totalAmount:n,interestRate:s,duration:t})},T=[{id:"education",name:"\xc9ducation",icon:lp,color:"from-blue-500 to-blue-600",bgColor:"bg-blue-50",iconColor:"text-blue-600"},{id:"business",name:"Entreprise",icon:cp,color:"from-green-500 to-green-600",bgColor:"bg-green-50",iconColor:"text-green-600"},{id:"housing",name:"Logement",icon:Uu,color:"from-orange-500 to-orange-600",bgColor:"bg-orange-50",iconColor:"text-orange-600"},{id:"personal",name:"Personnel",icon:cr,color:"from-purple-500 to-purple-600",bgColor:"bg-purple-50",iconColor:"text-purple-600"},{id:"health",name:"Sant\xe9",icon:dp,color:"from-pink-500 to-pink-600",bgColor:"bg-pink-50",iconColor:"text-pink-600"}],I=e=>{const{name:t,value:s}=e.target;d((0,c.A)((0,c.A)({},l),{},{[t]:s})),j[t]&&w((0,c.A)((0,c.A)({},j),{},{[t]:""}))},R=e=>{const t={};if(1===e&&(l.category||(t.category="Veuillez s\xe9lectionner une cat\xe9gorie")),2===e){const e=parseFloat(l.amount);!e||e<hp.amounts.min?t.amount="Le montant minimum est ".concat((0,Tu.vv)(hp.amounts.min)):e>hp.amounts.max&&(t.amount="Le montant maximum est ".concat((0,Tu.vv)(hp.amounts.max)))}return 3===e&&((!l.purpose||l.purpose.trim().length<10)&&(t.purpose="Veuillez d\xe9crire l'utilisation du pr\xeat (min. 10 caract\xe8res)"),l.guarantee||(t.guarantee="Veuillez s\xe9lectionner une garantie")),4===e&&((!l.momoNumber||l.momoNumber.trim().length<8)&&(t.momoNumber="Num\xe9ro Mobile Money invalide"),l.momoNetwork||(t.momoNetwork="Veuillez s\xe9lectionner votre op\xe9rateur"),(!l.momoName||l.momoName.trim().length<3)&&(t.momoName="Veuillez entrer le nom du compte Mobile Money")),w(t),0===Object.keys(t).length},O=async()=>{if(f)try{const e=await fetch("".concat(ku.f,"/api/generate-pdf/").concat(f));if(!e.ok)throw new Error("Erreur lors de la g\xe9n\xe9ration du PDF");const s=await e.blob(),r=window.URL.createObjectURL(s),n=document.createElement("a");n.href=r,n.download="engagement-pret-".concat(f,".pdf"),document.body.appendChild(n),n.click(),window.URL.revokeObjectURL(r),document.body.removeChild(n),v(!0),t("PDF t\xe9l\xe9charg\xe9 avec succ\xe8s !")}catch(e){console.error("[PDF] Erreur:",e),s("Erreur lors du t\xe9l\xe9chargement du PDF")}else s("ID de pr\xeat manquant")};if(m)return(0,i.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 flex items-center justify-center p-4",children:(0,i.jsxs)("div",{className:"bg-white rounded-3xl shadow-2xl p-8 max-w-md w-full text-center",children:[(0,i.jsx)("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,i.jsx)(ht.A,{size:40,className:"text-green-600"})}),(0,i.jsx)("h2",{className:"text-3xl font-bold text-gray-900 mb-4 font-montserrat",children:"Demande envoy\xe9e !"}),(0,i.jsx)("p",{className:"text-gray-600 mb-6 font-montserrat",children:"Votre demande de pr\xeat a \xe9t\xe9 soumise avec succ\xe8s. Nous l'examinerons dans les plus brefs d\xe9lais."}),!g&&(0,i.jsx)("div",{className:"bg-blue-50 border-l-4 border-blue-500 p-4 rounded-lg mb-6 text-left",children:(0,i.jsxs)("div",{className:"flex items-start gap-3",children:[(0,i.jsx)(Wu,{size:24,className:"text-blue-600 flex-shrink-0 mt-0.5"}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{className:"font-bold text-blue-900 mb-1",children:"Document d'engagement"}),(0,i.jsx)("p",{className:"text-sm text-blue-700 mb-3",children:"Veuillez t\xe9l\xe9charger et signer votre document d'engagement de pr\xeat."}),(0,i.jsxs)("button",{onClick:O,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-all duration-200 text-sm",children:[(0,i.jsx)(Wu,{size:18}),(0,i.jsx)("span",{children:"T\xe9l\xe9charger le PDF"})]})]})]})}),g&&(0,i.jsx)("div",{className:"bg-green-50 border-l-4 border-green-500 p-4 rounded-lg mb-6 text-left",children:(0,i.jsxs)("div",{className:"flex items-start gap-3",children:[(0,i.jsx)(ht.A,{size:24,className:"text-green-600 flex-shrink-0 mt-0.5"}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{className:"font-bold text-green-900 mb-1",children:"PDF t\xe9l\xe9charg\xe9"}),(0,i.jsx)("p",{className:"text-sm text-green-700",children:"Veuillez signer le document et le conserver pr\xe9cieusement."})]})]})}),(0,i.jsxs)("button",{onClick:()=>n("/dashboard"),className:"w-full flex items-center justify-center gap-2 px-6 py-3 bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white rounded-xl font-medium transition-all duration-200",children:[(0,i.jsx)(Rh.A,{size:20}),(0,i.jsx)("span",{children:"Retour au tableau de bord"})]})]})});const D=[{number:1,title:"Cat\xe9gorie",icon:Wu},{number:2,title:"Montant",icon:Km.A},{number:3,title:"D\xe9tails",icon:Wu},{number:4,title:"Paiement",icon:Bu.A}];return(0,i.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 pb-24",children:[_&&(0,i.jsxs)("div",{className:"sticky top-0 z-40 flex items-center justify-center gap-2 py-2 bg-blue-100/90 text-blue-800 text-sm font-medium",children:[(0,i.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-blue-600 border-t-transparent"}),(0,i.jsx)("span",{children:"V\xe9rification des pr\xeats en cours..."})]}),(0,i.jsx)("div",{className:"bg-white/80 backdrop-blur-lg shadow-lg border-b border-white/50 sticky top-0 z-30",children:(0,i.jsxs)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[(0,i.jsx)("div",{className:"flex items-center justify-between",children:(0,i.jsxs)("div",{className:"flex items-center gap-4",children:[(0,i.jsx)("button",{onClick:()=>n("/dashboard"),className:"p-2 hover:bg-gray-100 rounded-xl transition-colors",children:(0,i.jsx)(Rh.A,{size:24,className:"text-gray-700"})}),(0,i.jsxs)("div",{className:"flex items-center gap-3",children:[(0,i.jsx)("div",{className:"p-3 bg-gradient-to-br from-blue-500 to-purple-600 rounded-2xl shadow-lg",children:(0,i.jsx)(Bu.A,{size:32,className:"text-white"})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900 font-montserrat",children:"Demande de pr\xeat"}),(0,i.jsxs)("p",{className:"text-sm text-gray-600 font-montserrat",children:["\xc9tape ",a," sur ",4]})]})]})]})}),(0,i.jsx)("div",{className:"mt-6",children:(0,i.jsx)("div",{className:"flex items-center justify-between",children:D.map((e,t)=>(0,i.jsxs)(r.Fragment,{children:[(0,i.jsxs)("div",{className:"flex flex-col items-center",children:[(0,i.jsx)("div",{className:"w-12 h-12 rounded-full flex items-center justify-center transition-all duration-300 ".concat(a>e.number?"bg-green-500 text-white":a===e.number?"bg-gradient-to-br from-blue-500 to-purple-600 text-white":"bg-gray-200 text-gray-500"),children:a>e.number?(0,i.jsx)(up,{size:24}):(0,i.jsx)(e.icon,{size:24})}),(0,i.jsx)("p",{className:"text-xs mt-2 font-medium ".concat(a>=e.number?"text-gray-900":"text-gray-500"),children:e.title})]}),t<D.length-1&&(0,i.jsx)("div",{className:"flex-1 h-1 mx-2 transition-all duration-300 ".concat(a>e.number?"bg-green-500":"bg-gray-200")})]},e.number))})})]})}),(0,i.jsxs)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[k&&(0,i.jsx)("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 rounded-lg mb-6",children:(0,i.jsxs)("div",{className:"flex items-start gap-3",children:[(0,i.jsx)(pt,{size:24,className:"text-red-600 flex-shrink-0 mt-0.5"}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{className:"font-bold text-red-900 mb-1",children:"Pr\xeat actif d\xe9tect\xe9"}),(0,i.jsx)("p",{className:"text-sm text-red-700",children:"Vous avez d\xe9j\xe0 un pr\xeat en cours. Vous devez le rembourser avant de faire une nouvelle demande."})]})]})}),(0,i.jsxs)("form",{onSubmit:async r=>{if(r.preventDefault(),g)if(R(a))if(k)s("Vous avez d\xe9j\xe0 un pr\xeat en cours");else{h(!0);try{const s=parseFloat(l.amount),r=parseInt(l.duration),n=hp.getInterestRate(r,s),a={user_id:e.id,amount:s,duration:r,duration_months:r,interest_rate:n,purpose:l.purpose,employment_status:l.employmentStatus,guarantee:l.guarantee,momo_number:l.momoNumber,momo_network:l.momoNetwork,momo_name:l.momoName,status:"pending"};console.log("[LOAN_REQUEST] Cr\xe9ation du pr\xeat via Supabase"),console.log("[LOAN_REQUEST] Donn\xe9es:",a);const i=await(0,lt.DI)(a);if(console.log("[LOAN_REQUEST] R\xe9sultat:",i),!i.success||!i.data)throw new Error(i.error||"Erreur lors de la soumission");x(i.data.id),p(!0),t("Demande de pr\xeat soumise avec succ\xe8s !")}catch(n){console.error("[LOAN_REQUEST] Erreur:",n),s(n.message||"Erreur lors de la soumission de la demande")}finally{h(!1)}}else s("Veuillez corriger les erreurs dans le formulaire");else s("Veuillez t\xe9l\xe9charger le PDF d'engagement avant de soumettre")},children:[1===a&&(0,i.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 p-6",children:[(0,i.jsxs)("h2",{className:"text-xl font-bold text-gray-900 mb-4 font-montserrat flex items-center gap-2",children:[(0,i.jsx)(Wu,{size:24,className:"text-blue-600"}),"S\xe9lectionnez la cat\xe9gorie de votre pr\xeat"]}),(0,i.jsx)("p",{className:"text-gray-600 mb-6",children:"Choisissez la cat\xe9gorie qui correspond le mieux \xe0 votre besoin"}),(0,i.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-5 gap-4",children:T.map(e=>(0,i.jsxs)("button",{type:"button",onClick:()=>{return t=e.id,d(e=>(0,c.A)((0,c.A)({},e),{},{category:t})),void w(e=>(0,c.A)((0,c.A)({},e),{},{category:""}));var t},className:"p-6 rounded-xl border-2 transition-all duration-200 ".concat(l.category===e.id?"border-blue-500 bg-blue-50 shadow-md scale-105":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"),children:[(0,i.jsx)("div",{className:"w-16 h-16 ".concat(e.bgColor," rounded-xl flex items-center justify-center mx-auto mb-3"),children:(0,i.jsx)(e.icon,{size:32,className:e.iconColor})}),(0,i.jsx)("p",{className:"text-sm font-medium text-gray-900 text-center",children:e.name})]},e.id))}),j.category&&(0,i.jsx)("p",{className:"text-red-500 text-sm mt-4",children:j.category})]}),2===a&&(0,i.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 p-6",children:[(0,i.jsxs)("h2",{className:"text-xl font-bold text-gray-900 mb-4 font-montserrat flex items-center gap-2",children:[(0,i.jsx)(Km.A,{size:24,className:"text-green-600"}),"Montant et dur\xe9e du pr\xeat"]}),(0,i.jsx)("p",{className:"text-gray-600 mb-6",children:"Indiquez le montant souhait\xe9 et la dur\xe9e de remboursement"}),(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsxs)("div",{children:[(0,i.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Montant souhait\xe9 ",(0,i.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsx)(Km.A,{size:18,className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,i.jsx)("input",{type:"number",name:"amount",value:l.amount,onChange:I,placeholder:"Ex: 50000",min:hp.amounts.min,max:hp.amounts.max,className:"w-full pl-12 pr-4 py-3 border rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all ".concat(j.amount?"border-red-500 bg-red-50":"border-gray-200")})]}),j.amount&&(0,i.jsx)("p",{className:"text-red-500 text-sm mt-1",children:j.amount}),(0,i.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Min: ",(0,Tu.vv)(hp.amounts.min)," - Max: ",(0,Tu.vv)(hp.amounts.max)]})]}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Dur\xe9e ",(0,i.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsx)(sp.A,{size:18,className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,i.jsx)("select",{name:"duration",value:l.duration,onChange:I,className:"w-full pl-12 pr-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all appearance-none bg-white",children:hp.durations.map(e=>(0,i.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,i.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Choisissez la dur\xe9e de remboursement"})]}),N&&(0,i.jsxs)("div",{className:"mt-6 p-6 bg-gradient-to-r from-blue-50 to-purple-50 rounded-xl border border-blue-200",children:[(0,i.jsx)("h3",{className:"font-bold text-gray-900 mb-4",children:"R\xe9capitulatif"}),(0,i.jsxs)("div",{className:"space-y-3",children:[(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsx)("span",{className:"text-gray-600",children:"Montant demand\xe9"}),(0,i.jsx)("span",{className:"font-bold text-gray-900",children:(0,Tu.vv)(N.principal)})]}),(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsxs)("span",{className:"text-gray-600",children:["Int\xe9r\xeats (",N.interestRate,"%)"]}),(0,i.jsx)("span",{className:"font-bold text-orange-600",children:(0,Tu.vv)(N.interest)})]}),(0,i.jsxs)("div",{className:"border-t border-gray-300 pt-3 flex justify-between",children:[(0,i.jsx)("span",{className:"font-bold text-gray-900",children:"Montant total \xe0 rembourser"}),(0,i.jsx)("span",{className:"font-bold text-2xl text-blue-600",children:(0,Tu.vv)(N.totalAmount)})]}),(0,i.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,i.jsx)("span",{className:"text-gray-600",children:"Dur\xe9e"}),(0,i.jsxs)("span",{className:"font-medium text-gray-900",children:[N.duration," jours"]})]})]})]})]})]}),3===a&&(0,i.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 p-6",children:[(0,i.jsxs)("h2",{className:"text-xl font-bold text-gray-900 mb-4 font-montserrat flex items-center gap-2",children:[(0,i.jsx)(Wu,{size:24,className:"text-purple-600"}),"D\xe9tails de la demande"]}),(0,i.jsx)("p",{className:"text-gray-600 mb-6",children:"Fournissez plus d'informations sur votre demande"}),(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsxs)("div",{children:[(0,i.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Utilisation du pr\xeat ",(0,i.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,i.jsx)("textarea",{name:"purpose",value:l.purpose,onChange:I,placeholder:"D\xe9crivez pr\xe9cis\xe9ment l'utilisation du pr\xeat...",rows:"4",className:"w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all ".concat(j.purpose?"border-red-500 bg-red-50":"border-gray-200")}),j.purpose&&(0,i.jsx)("p",{className:"text-red-500 text-sm mt-1",children:j.purpose})]}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Statut professionnel ",(0,i.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,i.jsxs)("select",{name:"employmentStatus",value:l.employmentStatus,onChange:I,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",children:[(0,i.jsx)("option",{value:"student",children:"\xc9tudiant"}),(0,i.jsx)("option",{value:"self-employed",children:"Ind\xe9pendant"}),(0,i.jsx)("option",{value:"employed",children:"Salari\xe9"}),(0,i.jsx)("option",{value:"unemployed",children:"Sans emploi"})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Garantie ",(0,i.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,i.jsxs)("select",{name:"guarantee",value:l.guarantee,onChange:I,className:"w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all ".concat(j.guarantee?"border-red-500 bg-red-50":"border-gray-200"),children:[(0,i.jsx)("option",{value:"",children:"S\xe9lectionnez votre garantie"}),(0,i.jsx)("option",{value:"\ud83e\udeaa Carte d'identit\xe9 / \xe9tudiante",children:"\ud83e\udeaa Carte d'identit\xe9 / \xe9tudiante"}),(0,i.jsx)("option",{value:"\ud83d\udcf1 T\xe9l\xe9phone portable",children:"\ud83d\udcf1 T\xe9l\xe9phone portable"}),(0,i.jsx)("option",{value:"\ud83d\udcbb Ordinateur portable",children:"\ud83d\udcbb Ordinateur portable"}),(0,i.jsx)("option",{value:"\ud83d\udd25 Bouteille de gaz",children:"\ud83d\udd25 Bouteille de gaz"}),(0,i.jsx)("option",{value:"\ud83e\ude99 Montre connect\xe9e ou classique de valeur",children:"\ud83e\ude99 Montre connect\xe9e ou classique de valeur"}),(0,i.jsx)("option",{value:"\ud83d\udcf7 Tablette",children:"\ud83d\udcf7 Tablette"}),(0,i.jsx)("option",{value:"\ud83c\udfa7 \xc9couteurs ou casque Bluetooth",children:"\ud83c\udfa7 \xc9couteurs ou casque Bluetooth"}),(0,i.jsx)("option",{value:"\ud83e\uddf3 Petit ventilateur ou cuisini\xe8re \xe9lectrique",children:"\ud83e\uddf3 Petit ventilateur ou cuisini\xe8re \xe9lectrique"}),(0,i.jsx)("option",{value:"\ud83d\udcbe Disque dur externe ou cl\xe9 USB haut de gamme",children:"\ud83d\udcbe Disque dur externe ou cl\xe9 USB haut de gamme"}),(0,i.jsx)("option",{value:"\ud83e\ude91 Petit appareil \xe9lectrom\xe9nager (fer \xe0 repasser, mixeur, etc.)",children:"\ud83e\ude91 Petit appareil \xe9lectrom\xe9nager (fer \xe0 repasser, mixeur, etc.)"})]}),j.guarantee&&(0,i.jsx)("p",{className:"text-red-500 text-sm mt-1",children:j.guarantee})]})]})]}),4===a&&(0,i.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 p-6",children:[(0,i.jsxs)("h2",{className:"text-xl font-bold text-gray-900 mb-4 font-montserrat flex items-center gap-2",children:[(0,i.jsx)(Bu.A,{size:24,className:"text-green-600"}),"Informations Mobile Money"]}),(0,i.jsx)("p",{className:"text-gray-600 mb-6",children:"Indiquez vos coordonn\xe9es de paiement Mobile Money"}),(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsxs)("div",{children:[(0,i.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Op\xe9rateur ",(0,i.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,i.jsxs)("select",{name:"momoNetwork",value:l.momoNetwork,onChange:I,className:"w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all ".concat(j.momoNetwork?"border-red-500 bg-red-50":"border-gray-200"),children:[(0,i.jsx)("option",{value:"",children:"S\xe9lectionnez votre op\xe9rateur"}),(0,i.jsx)("option",{value:"MTN",children:"MTN Mobile Money"}),(0,i.jsx)("option",{value:"Moov",children:"Moov Money"}),(0,i.jsx)("option",{value:"Celtiis",children:"Celtiis Cash"})]}),j.momoNetwork&&(0,i.jsx)("p",{className:"text-red-500 text-sm mt-1",children:j.momoNetwork})]}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Num\xe9ro Mobile Money ",(0,i.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,i.jsx)("input",{type:"tel",name:"momoNumber",value:l.momoNumber,onChange:I,placeholder:"Ex: 97123456",className:"w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all ".concat(j.momoNumber?"border-red-500 bg-red-50":"border-gray-200")}),j.momoNumber&&(0,i.jsx)("p",{className:"text-red-500 text-sm mt-1",children:j.momoNumber})]}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Nom du compte ",(0,i.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,i.jsx)("input",{type:"text",name:"momoName",value:l.momoName,onChange:I,placeholder:"Nom complet du titulaire",className:"w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all ".concat(j.momoName?"border-red-500 bg-red-50":"border-gray-200")}),j.momoName&&(0,i.jsx)("p",{className:"text-red-500 text-sm mt-1",children:j.momoName})]})]}),!g&&(0,i.jsx)("div",{className:"mt-6 bg-blue-50 border-l-4 border-blue-500 p-4 rounded-lg",children:(0,i.jsxs)("div",{className:"flex items-start gap-3",children:[(0,i.jsx)(Wu,{size:24,className:"text-blue-600 flex-shrink-0 mt-0.5"}),(0,i.jsxs)("div",{className:"flex-1",children:[(0,i.jsx)("h3",{className:"font-bold text-blue-900 mb-1",children:"Document d'engagement requis"}),(0,i.jsx)("p",{className:"text-sm text-blue-700 mb-3",children:"Avant de soumettre votre demande, vous devez t\xe9l\xe9charger et signer le document d'engagement de pr\xeat."}),(0,i.jsx)("button",{type:"button",onClick:async()=>{try{var r,n;if(h(!0),!ot.ND)throw new Error("Connexion \xe0 la base de donn\xe9es non disponible");const{data:s,error:a}=await ot.ND.from("users").select("*").eq("id",e.id).single();if(a)throw console.error("[PDF] Erreur r\xe9cup\xe9ration utilisateur:",a),new Error("Impossible de r\xe9cup\xe9rer vos informations");console.log("[PDF] Donn\xe9es utilisateur r\xe9cup\xe9r\xe9es:",{id:s.id,name:"".concat(s.first_name," ").concat(s.last_name),hasTemoinName:!!s.temoin_name,hasTemoinPhone:!!s.temoin_phone,hasTemoinQuartier:!!s.temoin_quartier});const i=parseFloat(l.amount),o=parseInt(l.duration),c=hp.getInterestRate(o,i),d=Math.round(hp.calculateInterest(i,o)),u=Math.round(hp.calculateTotalAmount(i,o)),m={user:{first_name:s.first_name||(null===(r=e.user_metadata)||void 0===r?void 0:r.first_name),last_name:s.last_name||(null===(n=e.user_metadata)||void 0===n?void 0:n.last_name),email:s.email||e.email,phone_number:s.phone_number||e.phone,temoin_name:s.temoin_name,temoin_phone:s.temoin_phone,temoin_quartier:s.temoin_quartier,temoin_email:s.temoin_email},loan:{amount:i,duration:o,interest_rate:c,purpose:l.purpose,guarantee:l.guarantee,category:l.category},calculation:{interest:d,totalAmount:u}};console.log("[PDF] Envoi des donn\xe9es:",m);const p=await fetch("".concat(ku.f,"/api/generate-preview-pdf"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(m)});if(console.log("[PDF] Response status:",p.status),!p.ok){const e=await p.text();throw console.error("[PDF] Erreur serveur:",e),new Error("Erreur lors de la g\xe9n\xe9ration du PDF: ".concat(p.status," - ").concat(e))}const f=await p.blob(),x=window.URL.createObjectURL(f),g=document.createElement("a");g.href=x,g.download="engagement-pret-preview.pdf",document.body.appendChild(g),g.click(),window.URL.revokeObjectURL(x),document.body.removeChild(g),v(!0),t("PDF t\xe9l\xe9charg\xe9 avec succ\xe8s ! Vous pouvez maintenant soumettre votre demande.")}catch(a){console.error("[PDF] Erreur compl\xe8te:",a),console.error("[PDF] Message:",a.message),console.error("[PDF] Stack:",a.stack),s(a.message||"Erreur lors de la g\xe9n\xe9ration du PDF")}finally{h(!1)}},disabled:u,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-all duration-200 text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:u?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"}),(0,i.jsx)("span",{children:"G\xe9n\xe9ration..."})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Wu,{size:18}),(0,i.jsx)("span",{children:"T\xe9l\xe9charger le PDF d'engagement"})]})})]})]})}),g&&(0,i.jsx)("div",{className:"mt-6 bg-green-50 border-l-4 border-green-500 p-4 rounded-lg",children:(0,i.jsxs)("div",{className:"flex items-start gap-3",children:[(0,i.jsx)(ht.A,{size:24,className:"text-green-600 flex-shrink-0 mt-0.5"}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{className:"font-bold text-green-900 mb-1",children:"PDF t\xe9l\xe9charg\xe9 \u2713"}),(0,i.jsx)("p",{className:"text-sm text-green-700",children:"Vous pouvez maintenant soumettre votre demande. Veuillez signer le document et le conserver pr\xe9cieusement."})]})]})})]}),(0,i.jsxs)("div",{className:"flex justify-between items-center mt-8",children:[(0,i.jsxs)("button",{type:"button",onClick:()=>{o(e=>Math.max(e-1,1))},disabled:1===a,className:"flex items-center gap-2 px-6 py-3 rounded-xl font-medium transition-all duration-200 ".concat(1===a?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:[(0,i.jsx)(Rh.A,{size:20}),(0,i.jsx)("span",{children:"Pr\xe9c\xe9dent"})]}),a<4?(0,i.jsxs)("button",{type:"button",onClick:()=>{R(a)?o(e=>Math.min(e+1,4)):s("Veuillez corriger les erreurs avant de continuer")},className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white rounded-xl font-medium transition-all duration-200 shadow-lg hover:shadow-xl",children:[(0,i.jsx)("span",{children:"Suivant"}),(0,i.jsx)(ur,{size:20})]}):(0,i.jsx)("button",{type:"submit",disabled:u||k,className:"flex items-center gap-2 px-8 py-3 bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white rounded-xl font-bold transition-all duration-200 shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed",children:u?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-white border-t-transparent"}),(0,i.jsx)("span",{children:"Envoi en cours..."})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(np,{size:20}),(0,i.jsx)("span",{children:"Soumettre la demande"})]})})]})]})]})]})},pp=()=>{const{notifications:e,markAsRead:t}=yt(),{user:s}=dt(),n=(0,We.Zp)(),[a,o]=(0,r.useState)([]),[l,c]=(0,r.useState)(!1),[d,u]=(0,r.useState)(""),[h,m]=(0,r.useState)("all"),[p,f]=(0,r.useState)({totalLoans:0,totalBorrowed:0,totalRepaid:0,activeLoans:0,completedLoans:0,pendingLoans:0,rejectedLoans:0});(0,r.useEffect)(()=>{(async()=>{if(null!==s&&void 0!==s&&s.id)try{c(!0);const[e,t]=await Promise.all([(0,lt.Or)(s.id),(0,lt.k5)(s.id)]);if(e.success&&t.success){const s=e.data||[],r=t.data||[],n=s.map(e=>{const t=r.filter(t=>t.loan_id===e.id).reduce((e,t)=>e+(t.amount||0),0),s=e.amount?e.amount*(1+(e.interest_rate||0)/100):0;let n=null;if(("active"===e.status||"completed"===e.status)&&e.approved_at){const t=new Date(e.approved_at),s=e.duration||e.duration_months||30;n=new Date(t.getTime()+24*s*60*60*1e3)}return{id:e.id,amount:e.amount||0,status:e.status||"pending",requestDate:e.created_at,dueDate:n?n.toISOString().split("T")[0]:null,totalAmount:Math.round(s),paidAmount:Math.round(t),purpose:e.purpose||"Non sp\xe9cifi\xe9",category:e.loan_type||"other",interest_rate:e.interest_rate||0,duration:e.duration||12,monthly_payment:e.monthly_payment||0}});o(n);const a=n.reduce((e,t)=>e+t.amount,0),i=n.reduce((e,t)=>e+t.paidAmount,0),l=n.filter(e=>"active"===e.status).length,c=n.filter(e=>"completed"===e.status).length,d=n.filter(e=>"pending"===e.status).length,u=n.filter(e=>"rejected"===e.status).length;f({totalLoans:n.length,totalBorrowed:a,totalRepaid:i,activeLoans:l,completedLoans:c,pendingLoans:d,rejectedLoans:u})}else console.error("[LOAN HISTORY] Erreur lors du chargement des donn\xe9es:",{loans:e.error,payments:t.error})}catch(e){console.error("[LOAN HISTORY] Erreur lors du chargement de l'historique:",e.message)}finally{c(!1)}else c(!1)})()},[null===s||void 0===s?void 0:s.id]);const x=e=>{switch(e){case"active":return"text-blue-600 bg-blue-100";case"completed":return"text-green-600 bg-green-100";case"pending":return"text-yellow-600 bg-yellow-100";case"rejected":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}},g=e=>{switch(e){case"active":return"Actif";case"completed":return"Rembours\xe9";case"pending":return"En attente";case"rejected":return"Rejet\xe9";default:return"Inconnu"}},v=e=>{switch(e){case"education":return(0,i.jsx)(lp,{size:16});case"business":return(0,i.jsx)(Dm.A,{size:16});case"health":return(0,i.jsx)(pt,{size:16});case"transport":return(0,i.jsx)(Zm,{size:16});default:return(0,i.jsx)(Wu,{size:16})}},y=e=>{switch(e){case"education":return"text-blue-600 bg-blue-100";case"business":return"text-green-600 bg-green-100";case"health":return"text-pink-600 bg-pink-100";case"transport":return"text-orange-600 bg-orange-100";default:return"text-gray-600 bg-gray-100"}},b=e=>{switch(e){case"education":return"\xc9ducation";case"business":return"Entreprise";case"health":return"Sant\xe9";case"transport":return"Transport";default:return"Autre"}},j=a.filter(e=>{const t=e.id.toString().includes(d)||(0,Tu.vv)(e.amount).includes(d)||e.purpose&&e.purpose.toLowerCase().includes(d.toLowerCase()),s="all"===h||e.status===h;return t&&s});return(0,i.jsxs)("div",{className:"bg-gradient-to-br from-primary-50 via-accent-50 to-secondary-50",children:[(0,i.jsx)("style",{children:"\n    @keyframes gradient {\n      0% { background-position: 0% 50%; }\n      50% { background-position: 100% 50%; }\n      100% { background-position: 0% 50%; }\n    }\n    @keyframes pulse-glow {\n      0%, 100% { opacity: 0.3; transform: scale(1); }\n      50% { opacity: 0.6; transform: scale(1.05); }\n    }\n    @keyframes slide-in-right {\n      from { transform: translateX(100%); opacity: 0; }\n      to { transform: translateX(0); opacity: 1; }\n    }\n    @keyframes bounce-in {\n      0% { transform: scale(0.3); opacity: 0; }\n      50% { transform: scale(1.05); }\n      70% { transform: scale(0.9); }\n      100% { transform: scale(1); opacity: 1; }\n    }\n    @keyframes float {\n      0%, 100% { transform: translateY(0px); }\n      50% { transform: translateY(-10px); }\n    }\n    @keyframes shine {\n      0% { transform: translateX(-100%); }\n      100% { transform: translateX(100%); }\n    }\n    .animate-gradient {\n      background-size: 200% 200%;\n      animation: gradient 8s ease infinite;\n    }\n    .animate-pulse-glow {\n      animation: pulse-glow 2s ease-in-out infinite;\n    }\n    .animate-slide-in-right {\n      animation: slide-in-right 0.6s ease-out;\n    }\n    .animate-bounce-in {\n      animation: bounce-in 0.8s ease-out;\n    }\n    .animate-float {\n      animation: float 3s ease-in-out infinite;\n    }\n    .animate-shine {\n      animation: shine 2s ease-in-out infinite;\n    }\n  "}),(0,i.jsxs)("div",{className:"relative overflow-hidden",children:[(0,i.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-500 via-purple-600 to-indigo-600 opacity-15 animate-gradient"}),(0,i.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-white/20 via-transparent to-transparent"}),(0,i.jsxs)("div",{className:"absolute inset-0 opacity-8",children:[(0,i.jsx)("div",{animate:{scale:[1,1.2,1],rotate:[0,180,360],opacity:[.3,.6,.3]},transition:{duration:8,repeat:1/0,ease:"easeInOut"},className:"absolute top-0 left-0 w-72 h-72 bg-blue-400 rounded-full mix-blend-multiply filter blur-xl"}),(0,i.jsx)("div",{animate:{scale:[1.2,1,1.2],rotate:[360,180,0],opacity:[.6,.3,.6]},transition:{duration:10,repeat:1/0,ease:"easeInOut",delay:2},className:"absolute top-0 right-0 w-72 h-72 bg-purple-400 rounded-full mix-blend-multiply filter blur-xl"}),(0,i.jsx)("div",{animate:{scale:[1,1.3,1],rotate:[180,360,180],opacity:[.4,.7,.4]},transition:{duration:12,repeat:1/0,ease:"easeInOut",delay:4},className:"absolute -bottom-8 left-20 w-72 h-72 bg-indigo-400 rounded-full mix-blend-multiply filter blur-xl"}),(0,i.jsx)("div",{animate:{y:[0,-20,0],opacity:[.2,.6,.2]},transition:{duration:4,repeat:1/0,ease:"easeInOut"},className:"absolute top-1/4 left-1/4 w-4 h-4 bg-blue-300 rounded-full"}),(0,i.jsx)("div",{animate:{y:[0,15,0],opacity:[.3,.7,.3]},transition:{duration:5,repeat:1/0,ease:"easeInOut",delay:1},className:"absolute top-3/4 right-1/3 w-3 h-3 bg-purple-300 rounded-full"}),(0,i.jsx)("div",{animate:{x:[0,10,0],opacity:[.4,.8,.4]},transition:{duration:6,repeat:1/0,ease:"easeInOut",delay:2},className:"absolute bottom-1/4 left-1/2 w-2 h-2 bg-indigo-300 rounded-full"}),(0,i.jsx)("div",{animate:{x:[0,-15,0],y:[0,-10,0],opacity:[.3,.8,.3]},transition:{duration:7,repeat:1/0,ease:"easeInOut",delay:.5},className:"absolute top-1/3 right-1/4 w-2 h-2 bg-green-300 rounded-full"}),(0,i.jsx)("div",{animate:{x:[0,12,0],y:[0,-8,0],opacity:[.2,.7,.2]},transition:{duration:8,repeat:1/0,ease:"easeInOut",delay:1.5},className:"absolute bottom-1/3 right-1/3 w-3 h-3 bg-pink-300 rounded-full"}),(0,i.jsx)("div",{animate:{x:[0,-8,0],y:[0,12,0],opacity:[.4,.9,.4]},transition:{duration:9,repeat:1/0,ease:"easeInOut",delay:2.5},className:"absolute top-2/3 left-1/3 w-1 h-1 bg-yellow-300 rounded-full"})]}),(0,i.jsx)("div",{className:"relative px-4 lg:px-8 py-8 lg:py-12 backdrop-blur-sm",children:(0,i.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,i.jsxs)("div",{className:"text-center mb-8 lg:mb-12",children:[(0,i.jsxs)("h1",{className:"text-4xl lg:text-6xl font-bold text-secondary-900 font-montserrat mb-4",children:["Historique des"," ",(0,i.jsx)("span",{className:"bg-gradient-to-r from-blue-600 via-purple-600 to-indigo-600 bg-clip-text text-transparent",children:"Pr\xeat"})," ",(0,i.jsx)("span",{className:"inline-block",children:"\ud83d\udcc8"})]}),(0,i.jsx)("p",{className:"text-lg lg:text-xl text-neutral-600 font-montserrat max-w-3xl mx-auto leading-relaxed",children:"Consultez l'historique de votre pr\xeat et paiements"}),(0,i.jsxs)("div",{className:"flex items-center justify-center space-x-6 mt-6",children:[(0,i.jsxs)("div",{animate:{y:[0,-5,0],rotate:[0,5,0]},transition:{duration:3,repeat:1/0,ease:"easeInOut"},className:"flex items-center space-x-2 text-sm text-neutral-500",children:[(0,i.jsx)(Wu,{size:16,className:"text-green-500"}),(0,i.jsx)("span",{children:"Suivi complet"})]}),(0,i.jsxs)("div",{animate:{y:[0,-5,0],rotate:[0,-5,0]},transition:{duration:3,repeat:1/0,ease:"easeInOut",delay:1},className:"flex items-center space-x-2 text-sm text-neutral-500",children:[(0,i.jsx)(dh,{size:16,className:"text-blue-500"}),(0,i.jsx)("span",{children:"Donn\xe9es s\xe9curis\xe9es"})]}),(0,i.jsxs)("div",{animate:{y:[0,-5,0],rotate:[0,5,0]},transition:{duration:3,repeat:1/0,ease:"easeInOut",delay:2},className:"flex items-center space-x-2 text-sm text-neutral-500",children:[(0,i.jsx)(Pm.A,{size:16,className:"text-purple-500"}),(0,i.jsx)("span",{children:"Analyses d\xe9taill\xe9es"})]})]})]}),(0,i.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[(0,i.jsxs)("div",{whileHover:{scale:1.05,y:-5,boxShadow:"0 20px 40px rgba(0,0,0,0.1)"},className:"bg-white/80 backdrop-blur-sm rounded-2xl p-4 border border-white/50 shadow-soft relative overflow-hidden",children:[(0,i.jsx)("div",{animate:{x:["-100%","100%"]},transition:{duration:3,repeat:1/0,ease:"linear",delay:.5},className:"absolute inset-0 bg-gradient-to-r from-transparent via-blue-200/20 to-transparent"}),(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("div",{animate:{scale:[1,1.1,1],rotate:[0,5,0]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},className:"flex items-center justify-center mb-2",children:(0,i.jsx)(qu.A,{size:20,className:"text-primary-600"})}),(0,i.jsx)("p",{className:"text-lg sm:text-xl font-bold text-secondary-900",children:p.totalLoans}),(0,i.jsx)("p",{className:"text-xs sm:text-sm text-secondary-600",children:"Total pr\xeat"})]})]}),(0,i.jsxs)("div",{whileHover:{scale:1.05,y:-5,boxShadow:"0 20px 40px rgba(0,0,0,0.1)"},className:"bg-white/80 backdrop-blur-sm rounded-2xl p-4 border border-white/50 shadow-soft relative overflow-hidden",children:[(0,i.jsx)("div",{animate:{x:["-100%","100%"]},transition:{duration:3,repeat:1/0,ease:"linear",delay:1},className:"absolute inset-0 bg-gradient-to-r from-transparent via-green-200/20 to-transparent"}),(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("div",{animate:{scale:[1,1.1,1],rotate:[0,-5,0]},transition:{duration:2,repeat:1/0,ease:"easeInOut",delay:.5},className:"flex items-center justify-center mb-2",children:(0,i.jsx)(Dm.A,{size:20,className:"text-green-600"})}),(0,i.jsx)("p",{className:"text-lg sm:text-xl font-bold text-secondary-900 break-words leading-tight",children:(0,Tu.vv)(p.totalBorrowed)}),(0,i.jsx)("p",{className:"text-xs sm:text-sm text-secondary-600",children:"Total emprunt\xe9"})]})]}),(0,i.jsxs)("div",{whileHover:{scale:1.05,y:-5,boxShadow:"0 20px 40px rgba(0,0,0,0.1)"},className:"bg-white/80 backdrop-blur-sm rounded-2xl p-4 border border-white/50 shadow-soft relative overflow-hidden",children:[(0,i.jsx)("div",{animate:{x:["-100%","100%"]},transition:{duration:3,repeat:1/0,ease:"linear",delay:1.5},className:"absolute inset-0 bg-gradient-to-r from-transparent via-blue-200/20 to-transparent"}),(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("div",{animate:{scale:[1,1.1,1],rotate:[0,5,0]},transition:{duration:2,repeat:1/0,ease:"easeInOut",delay:1},className:"flex items-center justify-center mb-2",children:(0,i.jsx)(ht.A,{size:20,className:"text-blue-600"})}),(0,i.jsx)("p",{className:"text-lg sm:text-xl font-bold text-secondary-900 break-words leading-tight",children:(0,Tu.vv)(p.totalRepaid)}),(0,i.jsx)("p",{className:"text-xs sm:text-sm text-secondary-600",children:"Total rembours\xe9"})]})]}),(0,i.jsxs)("div",{whileHover:{scale:1.05,y:-5,boxShadow:"0 20px 40px rgba(0,0,0,0.1)"},className:"bg-white/80 backdrop-blur-sm rounded-2xl p-4 border border-white/50 shadow-soft relative overflow-hidden",children:[(0,i.jsx)("div",{animate:{x:["-100%","100%"]},transition:{duration:3,repeat:1/0,ease:"linear",delay:2},className:"absolute inset-0 bg-gradient-to-r from-transparent via-orange-200/20 to-transparent"}),(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("div",{animate:{scale:[1,1.1,1],rotate:[0,-5,0]},transition:{duration:2,repeat:1/0,ease:"easeInOut",delay:1.5},className:"flex items-center justify-center mb-2",children:(0,i.jsx)(wu,{size:20,className:"text-orange-600"})}),(0,i.jsx)("p",{className:"text-lg sm:text-xl font-bold text-secondary-900",children:p.activeLoans}),(0,i.jsx)("p",{className:"text-xs sm:text-sm text-secondary-600",children:"Pr\xeat actif"})]})]})]})]})})]}),(0,i.jsxs)("div",{className:"max-w-6xl mx-auto px-4 pb-8",children:[(0,i.jsx)("div",{className:"mb-8",children:(0,i.jsx)(ip,{className:"bg-white/90 backdrop-blur-sm border-white/20",children:(0,i.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,i.jsxs)("div",{className:"flex-1 relative",children:[(0,i.jsx)(Fm,{size:20,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,i.jsx)("input",{type:"text",placeholder:"Rechercher par ID, montant ou objet...",value:d,onChange:e=>u(e.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-2xl focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white/80 backdrop-blur-sm"})]}),(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,i.jsx)(Um,{size:20,className:"text-gray-400"}),(0,i.jsxs)("select",{value:h,onChange:e=>m(e.target.value),className:"px-4 py-3 border border-gray-200 rounded-2xl focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white/80 backdrop-blur-sm",children:[(0,i.jsx)("option",{value:"all",children:"Tous les statuts"}),(0,i.jsx)("option",{value:"active",children:"Actifs"}),(0,i.jsx)("option",{value:"completed",children:"Rembours\xe9s"}),(0,i.jsx)("option",{value:"pending",children:"En attente"}),(0,i.jsx)("option",{value:"rejected",children:"Rejet\xe9s"})]})]})]})})}),(0,i.jsx)("div",{children:(0,i.jsx)(ip,{className:"bg-white/90 backdrop-blur-sm border-white/20",children:l?(0,i.jsx)(Cm,{rows:6}):j.length>0?(0,i.jsx)("div",{className:"space-y-4",children:j.map((e,t)=>(0,i.jsx)("div",{className:"border border-gray-200/50 rounded-2xl p-6 hover:shadow-lg transition-all duration-300 bg-white/60 backdrop-blur-sm",children:(0,i.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0",children:[(0,i.jsxs)("div",{className:"flex-1",children:[(0,i.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-3 mb-4",children:[(0,i.jsxs)("h3",{className:"text-lg sm:text-xl font-semibold text-gray-900 font-montserrat",children:["Pr\xeat #",e.id]}),(0,i.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-medium ".concat(x(e.status)),children:g(e.status)}),e.category&&(0,i.jsxs)("span",{className:"px-2 py-1 rounded-full text-xs font-medium flex items-center space-x-1 ".concat(y(e.category)),children:[v(e.category),(0,i.jsx)("span",{className:"hidden sm:inline",children:b(e.category)})]})]}),e.purpose&&(0,i.jsxs)("div",{className:"mb-4 p-3 bg-gray-50/80 rounded-xl",children:[(0,i.jsx)("span",{className:"text-gray-600 text-xs uppercase tracking-wide",children:"Objet du pr\xeat"}),(0,i.jsx)("p",{className:"font-medium text-gray-900",children:e.purpose})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 sm:gap-6 text-sm",children:[(0,i.jsxs)("div",{className:"p-3 bg-accent-50/50 rounded-xl",children:[(0,i.jsx)("span",{className:"text-gray-600 text-xs uppercase tracking-wide",children:"Montant demand\xe9"}),(0,i.jsx)("p",{className:"font-semibold text-base sm:text-lg text-gray-900 break-words leading-tight",children:(0,Tu.vv)(e.amount)})]}),(0,i.jsxs)("div",{className:"p-3 bg-accent-50/50 rounded-xl",children:[(0,i.jsx)("span",{className:"text-gray-600 text-xs uppercase tracking-wide",children:"Date de demande"}),(0,i.jsx)("p",{className:"font-semibold text-base sm:text-lg text-gray-900",children:(0,Tu.Yq)(e.requestDate)})]}),e.dueDate&&(0,i.jsxs)("div",{className:"p-3 bg-accent-50/50 rounded-xl",children:[(0,i.jsx)("span",{className:"text-gray-600 text-xs uppercase tracking-wide",children:"\xc9ch\xe9ance"}),(0,i.jsx)("p",{className:"font-semibold text-base sm:text-lg text-gray-900",children:(0,Tu.Yq)(e.dueDate)})]})]}),"active"===e.status&&(0,i.jsxs)("div",{className:"mt-6 p-6 bg-blue-50/80 rounded-2xl border border-blue-200/50",children:[(0,i.jsxs)("h4",{className:"font-semibold text-blue-900 mb-4 flex items-center space-x-2",children:[(0,i.jsx)(Km.A,{size:18,className:"sm:w-5 sm:h-5"}),(0,i.jsx)("span",{className:"text-sm sm:text-base",children:"D\xe9tails du pr\xeat"})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 sm:gap-6 text-sm",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:"text-blue-700 text-xs uppercase tracking-wide",children:"Montant total"}),(0,i.jsx)("p",{className:"font-semibold text-base sm:text-lg text-blue-900 break-words leading-tight",children:(0,Tu.vv)(e.totalAmount)})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:"text-blue-700 text-xs uppercase tracking-wide",children:"Montant rembours\xe9"}),(0,i.jsx)("p",{className:"font-semibold text-base sm:text-lg text-blue-900 break-words leading-tight",children:(0,Tu.vv)(e.paidAmount)})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:"text-blue-700 text-xs uppercase tracking-wide",children:"Statut"}),(0,i.jsx)("p",{className:"font-semibold text-base sm:text-lg text-blue-900 break-words leading-tight",children:e.paidAmount>=e.totalAmount?"Rembours\xe9":"En cours"})]})]})]}),"completed"===e.status&&(0,i.jsx)("div",{className:"mt-6 p-6 bg-green-50/80 rounded-2xl border border-green-200/50",children:(0,i.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:[(0,i.jsxs)("span",{className:"text-green-800 font-semibold text-base sm:text-lg flex items-center space-x-2",children:[(0,i.jsx)(ht.A,{size:18,className:"sm:w-5 sm:h-5"}),(0,i.jsx)("span",{children:"Pr\xeat enti\xe8rement rembours\xe9"})]}),(0,i.jsx)("span",{className:"text-green-600 font-bold text-base sm:text-lg break-words leading-tight",children:(0,Tu.vv)(e.paidAmount)})]})}),"pending"===e.status&&(0,i.jsx)("div",{className:"mt-6 p-6 bg-yellow-50/80 rounded-2xl border border-yellow-200/50",children:(0,i.jsx)("div",{className:"flex items-center",children:(0,i.jsxs)("span",{className:"text-yellow-800 font-semibold text-base sm:text-lg flex items-center space-x-2",children:[(0,i.jsx)(wu,{size:18,className:"sm:w-5 sm:h-5"}),(0,i.jsx)("span",{children:"En attente d'approbation"})]})})}),"rejected"===e.status&&(0,i.jsx)("div",{className:"mt-6 p-6 bg-red-50/80 rounded-2xl border border-red-200/50",children:(0,i.jsx)("div",{className:"flex items-center",children:(0,i.jsxs)("span",{className:"text-red-800 font-semibold text-base sm:text-lg flex items-center space-x-2",children:[(0,i.jsx)(Bm,{size:18,className:"sm:w-5 sm:h-5"}),(0,i.jsx)("span",{children:"Demande rejet\xe9e"})]})})})]}),(0,i.jsxs)("div",{className:"flex flex-col space-y-3",children:[(0,i.jsxs)(Sh,{variant:"outline",size:"sm",onClick:()=>n("/loan-details/".concat(e.id)),className:"px-6 py-3 rounded-2xl font-medium flex items-center space-x-2",children:[(0,i.jsx)(vh,{size:16}),(0,i.jsx)("span",{children:"Voir d\xe9tails"})]}),"active"===e.status&&(0,i.jsxs)(Sh,{size:"sm",onClick:()=>n("/repayment",{state:{loanId:e.id}}),className:"px-6 py-3 rounded-2xl font-medium bg-primary-500 hover:bg-primary-600 flex items-center space-x-2",children:[(0,i.jsx)(Km.A,{size:16}),(0,i.jsx)("span",{children:"Rembourser"})]})]})]})},e.id))}):(0,i.jsxs)("div",{className:"text-center py-16",children:[(0,i.jsx)("div",{className:"text-gray-400 mb-6",children:(0,i.jsx)(Fm,{size:80,className:"mx-auto"})}),(0,i.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-3 font-montserrat",children:"Aucun pr\xeat trouv\xe9"}),(0,i.jsx)("p",{className:"text-gray-500 mb-6 text-lg",children:d||"all"!==h?"Aucun pr\xeat ne correspond \xe0 vos crit\xe8res de recherche":"Vous n'avez pas encore de pr\xeat"}),!d&&"all"===h&&(0,i.jsx)(Sh,{onClick:()=>n("/loan-request"),className:"px-8 py-4 text-lg rounded-2xl bg-primary-500 hover:bg-primary-600",children:"Faire une demande"})]})})}),(0,i.jsx)("div",{className:"fixed bottom-24 right-6 z-10",children:(0,i.jsxs)(Sh,{variant:"outline",onClick:()=>{const e="data:text/csv;charset=utf-8,ID,Montant,Statut,Date de demande,\xc9ch\xe9ance,Montant total,Statut remboursement\n"+j.map(e=>"".concat(e.id,",").concat(e.amount,",").concat(g(e.status),",").concat((0,Tu.Yq)(e.requestDate),",").concat(e.dueDate?(0,Tu.Yq)(e.dueDate):"N/A",",").concat(e.totalAmount||"N/A",",").concat(e.paidAmount>=(e.totalAmount||0)?"Rembours\xe9":"En cours")).join("\n"),t=encodeURI(e),s=document.createElement("a");s.setAttribute("href",t),s.setAttribute("download","historique_prets.csv"),document.body.appendChild(s),s.click(),document.body.removeChild(s)},className:"flex items-center space-x-2 px-4 py-3 rounded-full bg-white/90 backdrop-blur-sm border-white/50 shadow-lg hover:shadow-xl",children:[(0,i.jsx)(oh,{size:20}),(0,i.jsx)("span",{className:"hidden sm:inline",children:"Exporter"})]})})]})]})},fp=e=>{let{loan:t,onSuccess:s}=e;const n=(0,r.useRef)(null),{user:a}=dt(),[o,l]=(0,r.useState)(!1);(0,r.useEffect)(()=>{const e=document.createElement("script");return e.src="https://cdn.fedapay.com/checkout.js?v=1.1.7",e.async=!0,e.onload=()=>{console.log("[FedaPay] \u2705 Script charg\xe9 pour remboursement")},e.onerror=()=>{console.error("[FedaPay] \u274c Erreur chargement script")},document.body.appendChild(e),()=>{document.body.contains(e)&&document.body.removeChild(e)}},[]);return(0,i.jsxs)("button",{ref:n,onClick:async()=>{if(window.FedaPay)if(a&&t){l(!0);try{const e=ku.f,s=await fetch("".concat(e,"/api/create-loan-repayment"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:null===a||void 0===a?void 0:a.id,loan_id:t.id,amount:t.remainingAmount})}),r=await s.json();console.log("[FedaPayRemboursementButton] R\xe9ponse backend:",r),console.log("[FedaPayRemboursementButton] Status HTTP:",s.status),r.success&&r.transactionUrl?window.location.href=r.transactionUrl:(console.error("[FedaPayRemboursementButton] \u274c Erreur d\xe9taill\xe9e:",r),alert("Erreur lors de la cr\xe9ation de la transaction de remboursement: ".concat(r.error||"Erreur inconnue")))}catch(e){console.error("[FedaPayRemboursementButton] \u274c Erreur:",e),alert("Erreur de connexion. Veuillez r\xe9essayer.")}finally{l(!1)}}else alert("Informations utilisateur ou pr\xeat manquantes");else alert("FedaPay n'est pas encore charg\xe9 !")},disabled:o,className:"w-full bg-gradient-to-r from-blue-500 to-blue-600 text-white py-4 rounded-xl font-semibold shadow-lg flex items-center justify-center",children:[o?(0,i.jsx)("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}):(0,i.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})}),"Rembourser mon pr\xeat"]})},xp=()=>{const{showSuccess:e,showError:t}=yt(),{user:s}=dt(),n=(0,We.Zp)(),[a,o]=(0,r.useState)(null),[l,c]=(0,r.useState)(!1),d=async()=>{if(null!==s&&void 0!==s&&s.id)try{c(!0);const[e,t]=await Promise.all([(0,lt.Or)(s.id),(0,lt.k5)(s.id)]);if(e.success&&t.success){const s=e.data||[],r=t.data||[];console.log("[REPAYMENT] Tous les pr\xeats:",s.map(e=>({id:e.id,status:e.status})));const n=s.find(e=>"active"===e.status||"approved"===e.status||"overdue"===e.status);if(console.log("[REPAYMENT] Pr\xeat actif trouv\xe9:",n?{id:n.id,status:n.status}:"Aucun"),n){const e=r.filter(e=>e.loan_id===n.id).reduce((e,t)=>e+(t.amount||0),0),t=parseFloat(n.amount),s=t+t*(n.interest_rate||0)/100,a=null!=n.duration_months?Math.round(30*Number(n.duration_months)):null!=n.duration?Number(n.duration):30;let i=null,l=null;if(n.approved_at){const e=new Date(n.approved_at);i=new Date(e.getTime()+24*a*60*60*1e3)}let c=parseFloat(n.total_penalty_amount||0);if(i&&new Date>i&&0===c){const e=Math.floor((new Date-i)/864e5);c=s*((parseFloat(n.daily_penalty_rate)||2)/100)*e}const d=s+c,u=Math.max(0,d-e);if(n.approved_at){const e=new Date(n.approved_at),t=new Date,s=Math.floor((t-e)/864e5),r=30,a=s+r-s%r;l=new Date(e.getTime()+24*a*60*60*1e3)}console.log("[REPAYMENT] Calcul du montant \xe0 rembourser:",{loanId:n.id,originalAmount:n.amount,interestRate:n.interest_rate||0,totalOriginalAmount:s,paidAmount:e,remainingAmount:u,calculation:"".concat(n.amount," * (1 + ").concat(n.interest_rate||0,"/100) = ").concat(s)});const h={id:n.id,amount:n.amount,monthlyPayment:n.monthly_payment||Math.round(s/a),totalAmount:Math.round(s),paidAmount:Math.round(e),remainingAmount:Math.round(u),penaltyAmount:Math.round(c),totalAmountWithPenalty:Math.round(d),dueDate:i?i.toISOString().split("T")[0]:null,nextPaymentDate:l?l.toISOString().split("T")[0]:null,interest_rate:n.interest_rate||0,duration:a,purpose:n.purpose||"Non sp\xe9cifi\xe9",status:n.status};o(h)}else o(null)}else console.error("[REPAYMENT] Erreur lors du chargement des donn\xe9es:",{loans:e.error,payments:t.error})}catch(e){console.error("[REPAYMENT] Erreur lors du chargement du pr\xeat actif:",e.message)}finally{c(!1)}};(0,r.useEffect)(()=>{d()},[null===s||void 0===s?void 0:s.id]);return(0,i.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-yellow-50 to-slate-100 pb-24",children:[(0,i.jsx)("div",{className:"bg-white/80 backdrop-blur-lg shadow-lg border-b border-white/50 sticky top-0 z-30",children:(0,i.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,i.jsxs)("div",{className:"flex items-center justify-between py-6",children:[(0,i.jsx)("button",{onClick:()=>n("/dashboard"),className:"p-2 hover:bg-gray-100 rounded-xl transition-colors",children:(0,i.jsx)(Rh.A,{size:24,className:"text-gray-600"})}),(0,i.jsx)("div",{className:"text-center flex-1",children:(0,i.jsxs)("h1",{className:"text-3xl font-bold text-secondary-900 font-montserrat flex items-center justify-center gap-3",children:[(0,i.jsx)(Bu.A,{className:"text-primary-600",size:32}),"Remboursement de Pr\xeat"]})}),(0,i.jsx)("div",{className:"w-10"})]})})}),(0,i.jsx)("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:l?(0,i.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,i.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-primary-600 border-t-transparent"})}):a?(0,i.jsx)("div",{className:"space-y-6",children:(0,i.jsxs)("div",{className:"bg-white rounded-3xl shadow-xl border border-gray-100 overflow-hidden",children:[(0,i.jsxs)("div",{className:"bg-gradient-to-r from-secondary-800 to-secondary-900 p-8",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,i.jsxs)("div",{className:"flex items-center gap-3",children:[(0,i.jsx)("div",{className:"p-3 bg-white rounded-xl",children:(0,i.jsx)(Ku,{size:28,className:"text-primary-600"})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Pr\xeat Actif"}),(0,i.jsxs)("p",{className:"text-gray-300 text-sm",children:["ID: #",a.id.substring(0,8)]})]})]}),(0,i.jsxs)("div",{className:"text-right",children:[(0,i.jsx)("p",{className:"text-gray-300 text-sm",children:"Objet du pr\xeat"}),(0,i.jsx)("p",{className:"text-white font-semibold",children:a.purpose})]})]}),(0,i.jsxs)("div",{className:"bg-white/10 backdrop-blur-sm rounded-2xl p-6 border border-white/20",children:[(0,i.jsx)("p",{className:"text-gray-200 text-sm mb-2",children:"Montant restant \xe0 rembourser"}),(0,i.jsx)("p",{className:"text-5xl font-bold text-white",children:(0,Tu.vv)(a.remainingAmount)})]})]}),(0,i.jsxs)("div",{className:"p-8",children:[(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[(0,i.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-2xl p-5 border border-blue-200",children:[(0,i.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,i.jsx)("div",{className:"p-2 bg-blue-200 rounded-lg",children:(0,i.jsx)(Km.A,{size:20,className:"text-blue-700"})}),(0,i.jsx)("p",{className:"text-blue-900 font-medium text-sm",children:"Montant initial"})]}),(0,i.jsx)("p",{className:"text-2xl font-bold text-blue-900",children:(0,Tu.vv)(a.amount)})]}),(0,i.jsxs)("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-2xl p-5 border border-green-200",children:[(0,i.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,i.jsx)("div",{className:"p-2 bg-green-200 rounded-lg",children:(0,i.jsx)(ht.A,{size:20,className:"text-green-700"})}),(0,i.jsx)("p",{className:"text-green-900 font-medium text-sm",children:"D\xe9j\xe0 rembours\xe9"})]}),(0,i.jsx)("p",{className:"text-2xl font-bold text-green-900",children:(0,Tu.vv)(a.paidAmount)})]}),(0,i.jsxs)("div",{className:"bg-gradient-to-br from-primary-50 to-primary-100 rounded-2xl p-5 border border-primary-200",children:[(0,i.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,i.jsx)("div",{className:"p-2 bg-primary-200 rounded-lg",children:(0,i.jsx)(Dm.A,{size:20,className:"text-primary-700"})}),(0,i.jsx)("p",{className:"text-primary-900 font-medium text-sm",children:"Total avec int\xe9r\xeats"})]}),(0,i.jsx)("p",{className:"text-2xl font-bold text-primary-900",children:(0,Tu.vv)(a.totalAmount)}),(0,i.jsxs)("p",{className:"text-xs text-primary-700 mt-1",children:["Taux: ",a.interest_rate,"%"]})]}),(0,i.jsxs)("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-2xl p-5 border border-purple-200",children:[(0,i.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,i.jsx)("div",{className:"p-2 bg-purple-200 rounded-lg",children:(0,i.jsx)(sp.A,{size:20,className:"text-purple-700"})}),(0,i.jsx)("p",{className:"text-purple-900 font-medium text-sm",children:"Date d'\xe9ch\xe9ance"})]}),(0,i.jsx)("p",{className:"text-lg font-bold text-purple-900",children:a.dueDate?new Date(a.dueDate).toLocaleDateString("fr-FR",{day:"numeric",month:"long",year:"numeric"}):"Non d\xe9fini"}),(0,i.jsxs)("p",{className:"text-xs text-purple-700 mt-1",children:["Dur\xe9e: ",a.duration," jours"]})]})]}),a.penaltyAmount>0&&(0,i.jsx)("div",{className:"bg-gradient-to-r from-red-50 to-orange-50 border-l-4 border-red-500 rounded-xl p-6 mb-6",children:(0,i.jsxs)("div",{className:"flex items-start gap-4",children:[(0,i.jsx)("div",{className:"p-3 bg-red-100 rounded-xl",children:(0,i.jsx)(Mm,{size:24,className:"text-red-600"})}),(0,i.jsxs)("div",{className:"flex-1",children:[(0,i.jsx)("h3",{className:"font-bold text-red-900 text-lg mb-2",children:"\u26a0\ufe0f Pr\xeat en retard"}),(0,i.jsxs)("p",{className:"text-red-800 mb-3",children:["Votre pr\xeat a d\xe9pass\xe9 la date d'\xe9ch\xe9ance. Des p\xe9nalit\xe9s de ",(0,i.jsx)("strong",{children:"2% par jour"})," sont appliqu\xe9es."]}),(0,i.jsx)("div",{className:"bg-white/50 rounded-xl p-4 border border-red-200",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsx)("span",{className:"text-red-900 font-medium",children:"P\xe9nalit\xe9s accumul\xe9es"}),(0,i.jsx)("span",{className:"text-2xl font-bold text-red-700",children:(0,Tu.vv)(a.penaltyAmount)})]})})]})]})}),(0,i.jsx)("div",{className:"bg-gradient-to-r from-blue-50 to-cyan-50 rounded-2xl p-6 border border-blue-200 mb-6",children:(0,i.jsxs)("div",{className:"flex items-start gap-4",children:[(0,i.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,i.jsx)(ft,{size:20,className:"text-blue-600"})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{className:"font-semibold text-blue-900 mb-2",children:"Informations importantes"}),(0,i.jsxs)("ul",{className:"text-blue-800 text-sm space-y-1",children:[(0,i.jsx)("li",{children:"\u2022 Le remboursement se fait via Mobile Money (MTN, Moov)"}),(0,i.jsx)("li",{children:"\u2022 Vous pouvez rembourser partiellement ou totalement"}),(0,i.jsx)("li",{children:"\u2022 Le remboursement est instantan\xe9 et s\xe9curis\xe9"}),(0,i.jsx)("li",{children:"\u2022 \xc9vitez les p\xe9nalit\xe9s en remboursant avant l'\xe9ch\xe9ance"})]})]})]})}),(0,i.jsxs)("div",{className:"bg-gradient-to-br from-primary-50 to-yellow-50 rounded-2xl p-6 border-2 border-primary-300",children:[(0,i.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,i.jsx)("div",{className:"p-3 bg-primary-500 rounded-xl",children:(0,i.jsx)(Bu.A,{size:24,className:"text-white"})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{className:"font-bold text-secondary-900 text-lg",children:"Effectuer un remboursement"}),(0,i.jsx)("p",{className:"text-gray-600 text-sm",children:"Paiement s\xe9curis\xe9 via FedaPay"})]})]}),(0,i.jsx)(fp,{loan:a,onSuccess:t=>{e(t),setTimeout(()=>{d()},1e3)}})]})]})]})}):(0,i.jsx)("div",{className:"bg-white rounded-3xl shadow-xl border border-gray-100 overflow-hidden",children:(0,i.jsxs)("div",{className:"p-16 text-center",children:[(0,i.jsx)("div",{className:"w-32 h-32 bg-gradient-to-br from-gray-100 to-gray-200 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,i.jsx)(Ku,{size:64,className:"text-gray-400"})}),(0,i.jsx)("h2",{className:"text-3xl font-bold text-gray-900 mb-4 font-montserrat",children:"Aucun pr\xeat en cours"}),(0,i.jsx)("p",{className:"text-gray-600 mb-2 max-w-md mx-auto",children:"Vous n'avez actuellement aucun pr\xeat actif \xe0 rembourser."}),(0,i.jsx)("p",{className:"text-gray-500 text-sm mb-8",children:"Un seul pr\xeat peut \xeatre actif \xe0 la fois"}),(0,i.jsxs)("button",{onClick:()=>n("/loan-request"),className:"inline-flex items-center gap-2 px-8 py-4 bg-primary-500 hover:bg-primary-600 text-white font-semibold rounded-xl transition-all duration-200 shadow-lg hover:shadow-xl",children:[(0,i.jsx)(Bu.A,{size:20}),"Demander un nouveau pr\xeat"]})]})})})]})},gp=()=>{const e=(0,We.zy)(),t=(0,We.Zp)(),{user:s}=dt(),{showSuccess:n,showError:a,addNotification:o}=yt(),[l,c]=(0,r.useState)(null),[d,u]=(0,r.useState)(!1);(0,r.useEffect)(()=>{const t=new URLSearchParams(e.search),s=t.get("transaction_id"),r=t.get("amount"),n=t.get("loan_id");if(s&&r&&n){const e={transactionId:s,amount:parseInt(r),loanId:n};c(e),h(e)}},[e]);const h=async e=>{if(!d)try{u(!0),console.log("[REPAYMENT_SUCCESS] Traitement du remboursement:",e);const t={loan_id:e.loanId,user_id:s.id,amount:e.amount,payment_method:"fedapay",fedapay_transaction_id:e.transactionId,status:"completed",payment_date:(new Date).toISOString(),description:"Remboursement complet du pr\xeat #".concat(e.loanId),metadata:{fedapay_data:{transaction_id:e.transactionId,amount:e.amount,payment_date:(new Date).toISOString()},payment_type:"loan_repayment",app_source:"ab_pret_web"}},r=await(0,lt.Lb)(t);if(!r.success)throw new Error("Erreur lors de la cr\xe9ation du paiement: "+r.error);console.log("[REPAYMENT_SUCCESS] Paiement cr\xe9\xe9:",r.data);const a=await(0,lt.E$)(e.loanId,"completed");if(!a.success)throw new Error("Erreur lors de la mise \xe0 jour du pr\xeat: "+a.error);console.log("[REPAYMENT_SUCCESS] Pr\xeat mis \xe0 jour:",a.data);const i={title:"Remboursement de pr\xeat effectu\xe9",message:"Le client ".concat(s.first_name||s.fullName," a rembours\xe9 son pr\xeat #").concat(e.loanId," d'un montant de ").concat(e.amount," FCFA"),type:"success",priority:"high",data:{loanId:e.loanId,userId:s.id,amount:e.amount,transactionId:e.transactionId,action:"view_loan_details"}};o(i),n("Remboursement trait\xe9 avec succ\xe8s ! Le pr\xeat a \xe9t\xe9 marqu\xe9 comme rembours\xe9.")}catch(t){console.error("[REPAYMENT_SUCCESS] Erreur lors du traitement:",t),a("Erreur lors du traitement du remboursement: "+t.message)}finally{u(!1)}};return(0,i.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-green-50 to-blue-50 flex items-center justify-center p-4",children:(0,i.jsxs)("div",{className:"max-w-md w-full",children:[(0,i.jsxs)("div",{className:"bg-white rounded-3xl shadow-xl p-8 text-center",children:[(0,i.jsx)("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,i.jsx)(ht.A,{className:"w-12 h-12 text-green-600"})}),(0,i.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Remboursement r\xe9ussi !"}),(0,i.jsx)("p",{className:"text-gray-600 mb-6",children:"Votre pr\xeat a \xe9t\xe9 rembours\xe9 avec succ\xe8s via FedaPay."}),l&&(0,i.jsx)("div",{className:"bg-gray-50 rounded-2xl p-6 mb-6",children:(0,i.jsxs)("div",{className:"space-y-3",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center",children:[(0,i.jsx)("span",{className:"text-gray-600",children:"Montant rembours\xe9 :"}),(0,i.jsx)("span",{className:"font-semibold text-gray-900",children:(m=l.amount,new Intl.NumberFormat("fr-CI",{style:"currency",currency:"XOF"}).format(m/100))})]}),(0,i.jsxs)("div",{className:"flex justify-between items-center",children:[(0,i.jsx)("span",{className:"text-gray-600",children:"ID Transaction :"}),(0,i.jsxs)("span",{className:"font-mono text-sm text-gray-500",children:[l.transactionId.substring(0,12),"..."]})]}),(0,i.jsxs)("div",{className:"flex justify-between items-center",children:[(0,i.jsx)("span",{className:"text-gray-600",children:"Pr\xeat # :"}),(0,i.jsx)("span",{className:"font-semibold text-gray-900",children:l.loanId})]})]})}),(0,i.jsx)("div",{className:"bg-green-50 border border-green-200 rounded-xl p-4 mb-6",children:(0,i.jsxs)("p",{className:"text-green-800 text-sm",children:[(0,i.jsx)("strong",{children:"Confirmation :"}),d?"Traitement du remboursement en cours...":"Votre pr\xeat a \xe9t\xe9 marqu\xe9 comme rembours\xe9 dans notre syst\xe8me. Vous recevrez bient\xf4t un email de confirmation."]})}),(0,i.jsxs)("div",{className:"space-y-3",children:[(0,i.jsxs)("button",{onClick:()=>{t("/loan-history")},className:"w-full bg-primary-500 hover:bg-primary-600 text-white font-semibold py-3 px-6 rounded-xl transition-colors flex items-center justify-center space-x-2",children:[(0,i.jsx)(Rh.A,{className:"w-5 h-5"}),(0,i.jsx)("span",{children:"Voir l'historique des pr\xeats"})]}),(0,i.jsxs)("button",{onClick:()=>{t("/dashboard")},className:"w-full bg-gray-100 hover:bg-gray-200 text-gray-700 font-semibold py-3 px-6 rounded-xl transition-colors flex items-center justify-center space-x-2",children:[(0,i.jsx)(Uu,{className:"w-5 h-5"}),(0,i.jsx)("span",{children:"Retour au tableau de bord"})]})]})]}),(0,i.jsx)("div",{className:"mt-6 text-center",children:(0,i.jsx)("p",{className:"text-sm text-gray-500",children:"Si vous avez des questions, contactez notre support client."})})]})});var m},vp=()=>{const{showError:e}=yt(),{user:t}=dt(),s=(0,We.Zp)(),[n]=it(),[a,o]=(0,r.useState)(!1),l=n.get("transaction_id"),c=n.get("amount"),d=n.get("loan_id"),u=n.get("user_id");(0,r.useEffect)(()=>{e("Le paiement a \xe9chou\xe9. Veuillez r\xe9essayer.")},[e]);return(0,i.jsxs)("div",{className:"bg-gradient-to-br from-red-50 via-orange-50 to-yellow-50 min-h-screen",children:[(0,i.jsxs)("div",{className:"relative overflow-hidden",children:[(0,i.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-red-500 via-orange-600 to-yellow-500 opacity-10 animate-gradient"}),(0,i.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-white/20 via-transparent to-transparent"}),(0,i.jsx)("div",{className:"relative px-4 lg:px-8 py-8 lg:py-12 backdrop-blur-sm",children:(0,i.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,i.jsx)("div",{className:"flex items-center justify-between mb-8",children:(0,i.jsxs)(Sh,{variant:"outline",onClick:()=>s("/dashboard"),className:"flex items-center space-x-2 px-4 py-2 bg-white/20 backdrop-blur-sm border-white/30",children:[(0,i.jsx)(Rh.A,{size:20}),(0,i.jsx)("span",{children:"Retour au Dashboard"})]})}),(0,i.jsx)("div",{className:"text-center mb-8 lg:mb-12",children:(0,i.jsxs)("h1",{className:"text-4xl lg:text-6xl font-bold text-red-900 font-montserrat mb-4",children:["Paiement \xc9chou\xe9"," ",(0,i.jsx)("span",{className:"inline-block",children:"\u274c"})]})})]})})]}),(0,i.jsx)("div",{className:"max-w-2xl mx-auto px-4 pb-8",children:(0,i.jsx)(ip,{title:"D\xe9tails de l'\xe9chec",className:"bg-white/90 backdrop-blur-sm border-white/20",children:(0,i.jsxs)("div",{className:"text-center py-8",children:[(0,i.jsx)("div",{className:"w-24 h-24 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,i.jsx)(Bm,{className:"w-12 h-12 text-red-600"})}),(0,i.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Le paiement n'a pas pu \xeatre trait\xe9"}),(0,i.jsxs)("p",{className:"text-gray-600 mb-6 text-lg",children:["Nous n'avons pas pu traiter votre paiement de"," ",(0,i.jsx)("strong",{children:c?(0,Tu.vv)(parseInt(c)):"N/A"}),"."]}),(0,i.jsxs)("div",{className:"bg-gray-50 rounded-xl p-4 mb-6 text-left",children:[(0,i.jsx)("h3",{className:"font-semibold text-gray-900 mb-2",children:"D\xe9tails techniques :"}),(0,i.jsxs)("div",{className:"space-y-1 text-sm text-gray-600",children:[(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"Transaction ID :"})," ",l||"N/A"]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"Pr\xeat ID :"})," ",d||"N/A"]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"Utilisateur ID :"})," ",u||"N/A"]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"Montant :"})," ",c?(0,Tu.vv)(parseInt(c)):"N/A"]})]})]}),(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4",children:[(0,i.jsx)("h3",{className:"font-semibold text-blue-900 mb-2",children:"Que pouvez-vous faire ?"}),(0,i.jsxs)("ul",{className:"text-sm text-blue-800 space-y-1",children:[(0,i.jsx)("li",{children:"\u2022 V\xe9rifiez que votre compte Mobile Money a suffisamment de fonds"}),(0,i.jsx)("li",{children:"\u2022 Assurez-vous que votre num\xe9ro de t\xe9l\xe9phone est correct"}),(0,i.jsx)("li",{children:'\u2022 R\xe9essayez le paiement en cliquant sur "R\xe9essayer"'}),(0,i.jsx)("li",{children:"\u2022 Contactez le support si le probl\xe8me persiste"})]})]}),(0,i.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 pt-4",children:[(0,i.jsx)(Sh,{onClick:()=>{o(!0),setTimeout(()=>{s("/remboursement"),o(!1)},1e3)},disabled:a,className:"flex-1 bg-primary-500 hover:bg-primary-600 text-white font-semibold py-3 px-6 rounded-xl transition-colors flex items-center justify-center space-x-2",children:a?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Js.A,{className:"w-5 h-5 animate-spin"}),(0,i.jsx)("span",{children:"Redirection..."})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Js.A,{className:"w-5 h-5"}),(0,i.jsx)("span",{children:"R\xe9essayer le paiement"})]})}),(0,i.jsx)(Sh,{onClick:()=>{s("/dashboard")},variant:"outline",className:"flex-1 border-gray-300 text-gray-700 hover:bg-gray-50 font-semibold py-3 px-6 rounded-xl transition-colors",children:"Retour au Dashboard"})]})]}),(0,i.jsxs)("div",{className:"mt-8 pt-6 border-t border-gray-200",children:[(0,i.jsx)("p",{className:"text-sm text-gray-500 mb-2",children:"Besoin d'aide ? Contactez notre support :"}),(0,i.jsxs)("div",{className:"flex justify-center space-x-4 text-sm",children:[(0,i.jsx)("a",{href:"mailto:support@campusfinance.com",className:"text-primary-600 hover:text-primary-700",children:"support@campusfinance.com"}),(0,i.jsx)("span",{className:"text-gray-400",children:"|"}),(0,i.jsx)("a",{href:"tel:+2250700000000",className:"text-primary-600 hover:text-primary-700",children:"+225 07 00 00 00 00"})]})]})]})})})]})},yp=()=>{const{showError:e}=yt(),{user:t}=dt(),s=(0,We.Zp)(),[n]=it(),[a,o]=(0,r.useState)(!1),l=n.get("transaction_id"),c=n.get("amount"),d=n.get("loan_id"),u=n.get("user_id");(0,r.useEffect)(()=>{e("Le paiement a \xe9t\xe9 annul\xe9.")},[e]);return(0,i.jsxs)("div",{className:"bg-gradient-to-br from-yellow-50 via-orange-50 to-red-50 min-h-screen",children:[(0,i.jsxs)("div",{className:"relative overflow-hidden",children:[(0,i.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-yellow-500 via-orange-600 to-red-500 opacity-10 animate-gradient"}),(0,i.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-white/20 via-transparent to-transparent"}),(0,i.jsx)("div",{className:"relative px-4 lg:px-8 py-8 lg:py-12 backdrop-blur-sm",children:(0,i.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,i.jsx)("div",{className:"flex items-center justify-between mb-8",children:(0,i.jsxs)(Sh,{variant:"outline",onClick:()=>s("/dashboard"),className:"flex items-center space-x-2 px-4 py-2 bg-white/20 backdrop-blur-sm border-white/30",children:[(0,i.jsx)(Rh.A,{size:20}),(0,i.jsx)("span",{children:"Retour au Dashboard"})]})}),(0,i.jsx)("div",{className:"text-center mb-8 lg:mb-12",children:(0,i.jsxs)("h1",{className:"text-4xl lg:text-6xl font-bold text-orange-900 font-montserrat mb-4",children:["Paiement Annul\xe9"," ",(0,i.jsx)("span",{className:"inline-block",children:"\u26a0\ufe0f"})]})})]})})]}),(0,i.jsx)("div",{className:"max-w-2xl mx-auto px-4 pb-8",children:(0,i.jsx)(ip,{title:"D\xe9tails de l'annulation",className:"bg-white/90 backdrop-blur-sm border-white/20",children:(0,i.jsxs)("div",{className:"text-center py-8",children:[(0,i.jsx)("div",{className:"w-24 h-24 bg-orange-100 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,i.jsx)(xt,{className:"w-12 h-12 text-orange-600"})}),(0,i.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Le paiement a \xe9t\xe9 annul\xe9"}),(0,i.jsxs)("p",{className:"text-gray-600 mb-6 text-lg",children:["Votre paiement de"," ",(0,i.jsx)("strong",{children:c?(0,Tu.vv)(parseInt(c)):"N/A"})," a \xe9t\xe9 annul\xe9. Aucun montant n'a \xe9t\xe9 d\xe9bit\xe9 de votre compte."]}),(0,i.jsxs)("div",{className:"bg-gray-50 rounded-xl p-4 mb-6 text-left",children:[(0,i.jsx)("h3",{className:"font-semibold text-gray-900 mb-2",children:"D\xe9tails techniques :"}),(0,i.jsxs)("div",{className:"space-y-1 text-sm text-gray-600",children:[(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"Transaction ID :"})," ",l||"N/A"]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"Pr\xeat ID :"})," ",d||"N/A"]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"Utilisateur ID :"})," ",u||"N/A"]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"Montant :"})," ",c?(0,Tu.vv)(parseInt(c)):"N/A"]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"Statut :"})," ",(0,i.jsx)("span",{className:"text-orange-600 font-medium",children:"Annul\xe9"})]})]})]}),(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4",children:[(0,i.jsx)("h3",{className:"font-semibold text-blue-900 mb-2",children:"Que pouvez-vous faire ?"}),(0,i.jsxs)("ul",{className:"text-sm text-blue-800 space-y-1",children:[(0,i.jsx)("li",{children:"\u2022 R\xe9essayer le paiement maintenant"}),(0,i.jsx)("li",{children:"\u2022 Retourner au dashboard pour plus tard"}),(0,i.jsx)("li",{children:"\u2022 V\xe9rifier les informations de votre compte Mobile Money"}),(0,i.jsx)("li",{children:"\u2022 Contacter le support si vous avez des questions"})]})]}),(0,i.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 pt-4",children:[(0,i.jsx)(Sh,{onClick:()=>{o(!0),setTimeout(()=>{s("/remboursement"),o(!1)},1e3)},disabled:a,className:"flex-1 bg-primary-500 hover:bg-primary-600 text-white font-semibold py-3 px-6 rounded-xl transition-colors flex items-center justify-center space-x-2",children:a?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Js.A,{className:"w-5 h-5 animate-spin"}),(0,i.jsx)("span",{children:"Redirection..."})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Js.A,{className:"w-5 h-5"}),(0,i.jsx)("span",{children:"R\xe9essayer le paiement"})]})}),(0,i.jsx)(Sh,{onClick:()=>{s("/dashboard")},variant:"outline",className:"flex-1 border-gray-300 text-gray-700 hover:bg-gray-50 font-semibold py-3 px-6 rounded-xl transition-colors",children:"Retour au Dashboard"})]})]}),(0,i.jsxs)("div",{className:"mt-6 bg-green-50 border border-green-200 rounded-xl p-4",children:[(0,i.jsx)("h3",{className:"font-semibold text-green-900 mb-2",children:"Information importante :"}),(0,i.jsx)("p",{className:"text-sm text-green-800",children:"Aucun montant n'a \xe9t\xe9 d\xe9bit\xe9 de votre compte. Vous pouvez r\xe9essayer le paiement \xe0 tout moment sans aucun frais suppl\xe9mentaire."})]}),(0,i.jsxs)("div",{className:"mt-8 pt-6 border-t border-gray-200",children:[(0,i.jsx)("p",{className:"text-sm text-gray-500 mb-2",children:"Besoin d'aide ? Contactez notre support :"}),(0,i.jsxs)("div",{className:"flex justify-center space-x-4 text-sm",children:[(0,i.jsx)("a",{href:"mailto:support@campusfinance.com",className:"text-primary-600 hover:text-primary-700",children:"support@campusfinance.com"}),(0,i.jsx)("span",{className:"text-gray-400",children:"|"}),(0,i.jsx)("a",{href:"tel:+2250700000000",className:"text-primary-600 hover:text-primary-700",children:"+225 07 00 00 00 00"})]})]})]})})})]})},bp=(0,mt.A)("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]),jp=()=>{var e,t,s;const{user:n,logout:a}=dt(),o=(0,We.Zp)(),{notifications:l,markAsRead:d}=yt(),[u,h]=(0,r.useState)(!1),[m,p]=(0,r.useState)(!1),[f,x]=(0,r.useState)(null),[g,v]=(0,r.useState)(null),[y,b]=(0,r.useState)(!1),j=(0,r.useRef)(null),[w,N]=(0,r.useState)({firstName:(null===n||void 0===n?void 0:n.first_name)||(null===n||void 0===n||null===(e=n.user_metadata)||void 0===e?void 0:e.first_name)||"",lastName:(null===n||void 0===n?void 0:n.last_name)||(null===n||void 0===n||null===(t=n.user_metadata)||void 0===t?void 0:t.last_name)||"",email:(null===n||void 0===n?void 0:n.email)||"",phone:(null===n||void 0===n?void 0:n.phone_number)||(null===n||void 0===n||null===(s=n.user_metadata)||void 0===s?void 0:s.phone_number)||""});return n?(0,i.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-primary-50 via-accent-50 to-secondary-50",children:[(0,i.jsx)("div",{className:"bg-white/80 backdrop-blur-sm border-b border-white/20 sticky top-0 z-10",children:(0,i.jsx)("div",{className:"max-w-7xl mx-auto px-4 py-4",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,i.jsx)("button",{onClick:()=>o("/menu"),className:"text-gray-600 hover:text-gray-900 transition-colors",children:"\u2190 Retour au menu"}),(0,i.jsx)("h1",{className:"text-2xl font-bold text-gray-900 font-montserrat",children:"Mon Profil"})]}),(0,i.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,i.jsx)(Iu,{notifications:l,onMarkAsRead:d}),(0,i.jsxs)(Sh,{onClick:async()=>{try{await a(),o("/login")}catch(e){console.error("Erreur lors de la d\xe9connexion:",e)}},variant:"outline",className:"flex items-center space-x-2 text-red-600 border-red-200 hover:bg-red-50",children:[(0,i.jsx)(dr,{size:16}),(0,i.jsx)("span",{children:"D\xe9connexion"})]})]})]})})}),(0,i.jsx)("div",{className:"max-w-7xl mx-auto px-4 py-8",children:(0,i.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,i.jsx)("div",{className:"lg:col-span-2 space-y-6",children:(0,i.jsxs)(ip,{className:"bg-white/90 backdrop-blur-sm border-white/20",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,i.jsx)("h2",{className:"text-2xl font-bold text-gray-900 font-montserrat",children:"Informations personnelles"}),u?(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,i.jsxs)(Sh,{onClick:async()=>{p(!0);try{console.log("[PROFILE] Sauvegarde du profil en cours...");w.firstName,w.lastName,w.email,w.phone;try{const e=JSON.parse(localStorage.getItem("ab_user_cache")||"{}"),t=(0,c.A)((0,c.A)({},e),{},{first_name:w.firstName,last_name:w.lastName,email:w.email});localStorage.setItem("ab_user_cache",JSON.stringify(t)),console.log("[PROFILE] \u2705 Cache local mis \xe0 jour")}catch(e){console.warn("[PROFILE] Erreur lors de la mise \xe0 jour du cache:",e)}h(!1),console.log("[PROFILE] \u2705 Profil mis \xe0 jour avec succ\xe8s")}catch(t){console.error("[PROFILE] \u274c Erreur exceptionnelle:",t)}finally{p(!1)}},disabled:m,className:"flex items-center space-x-2 bg-green-600 hover:bg-green-700",children:[(0,i.jsx)($m,{size:16}),(0,i.jsx)("span",{children:m?"Sauvegarde...":"Sauvegarder"})]}),(0,i.jsxs)(Sh,{onClick:()=>{var e,t,s;N({firstName:(null===n||void 0===n?void 0:n.first_name)||(null===n||void 0===n||null===(e=n.user_metadata)||void 0===e?void 0:e.first_name)||"",lastName:(null===n||void 0===n?void 0:n.last_name)||(null===n||void 0===n||null===(t=n.user_metadata)||void 0===t?void 0:t.last_name)||"",email:(null===n||void 0===n?void 0:n.email)||"",phone:(null===n||void 0===n?void 0:n.phone_number)||(null===n||void 0===n||null===(s=n.user_metadata)||void 0===s?void 0:s.phone_number)||""}),h(!1)},variant:"outline",className:"flex items-center space-x-2",children:[(0,i.jsx)(xt,{size:16}),(0,i.jsx)("span",{children:"Annuler"})]})]}):(0,i.jsxs)(Sh,{onClick:()=>{h(!0)},className:"flex items-center space-x-2 bg-primary-600 hover:bg-primary-700",children:[(0,i.jsx)(bp,{size:16}),(0,i.jsx)("span",{children:"Modifier"})]})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Pr\xe9nom"}),(0,i.jsx)(Ah,{type:"text",value:w.firstName,onChange:e=>N(t=>(0,c.A)((0,c.A)({},t),{},{firstName:e.target.value})),disabled:!u,className:"w-full"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nom"}),(0,i.jsx)(Ah,{type:"text",value:w.lastName,onChange:e=>N(t=>(0,c.A)((0,c.A)({},t),{},{lastName:e.target.value})),disabled:!u,className:"w-full"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),(0,i.jsx)(Ah,{type:"email",value:w.email,onChange:e=>N(t=>(0,c.A)((0,c.A)({},t),{},{email:e.target.value})),disabled:!u,className:"w-full"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"T\xe9l\xe9phone"}),(0,i.jsx)(Ah,{type:"tel",value:w.phone,onChange:e=>N(t=>(0,c.A)((0,c.A)({},t),{},{phone:e.target.value})),disabled:!u,className:"w-full"})]})]})]})}),(0,i.jsx)("div",{className:"space-y-4",children:(0,i.jsx)("div",{children:(0,i.jsx)(ip,{className:"bg-white/90 backdrop-blur-sm border-white/20",children:(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsxs)("div",{className:"relative mx-auto mb-6",children:[(0,i.jsx)("input",{ref:j,type:"file",accept:"image/*",onChange:e=>{const t=e.target.files[0];if(t){x(t);const e=new FileReader;e.onload=e=>{v(e.target.result)},e.readAsDataURL(t)}},className:"hidden"}),(0,i.jsxs)("div",{className:"relative mx-auto w-28 h-28",children:[(0,i.jsx)("div",{className:"absolute inset-0 rounded-full bg-gradient-to-r from-blue-500 via-indigo-500 to-purple-500 p-1"}),(0,i.jsxs)("div",{className:"w-full h-full bg-gradient-to-br from-blue-400 via-indigo-500 to-purple-600 rounded-full flex items-center justify-center shadow-2xl overflow-hidden relative",children:[g?(0,i.jsx)("img",{src:g,alt:"Photo de profil",className:"w-full h-full object-cover relative z-10"}):(0,i.jsxs)("span",{className:"text-white text-4xl font-bold relative z-10",children:[w.firstName.charAt(0),w.lastName.charAt(0)]}),y&&(0,i.jsx)("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center rounded-full z-20",children:(0,i.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-3 border-white border-t-transparent"})}),(0,i.jsx)("button",{onClick:()=>{var e;null===(e=j.current)||void 0===e||e.click()},className:"absolute bottom-0 right-0 w-8 h-8 bg-white rounded-full shadow-lg flex items-center justify-center z-30 hover:bg-gray-100 transition-colors duration-200",children:(0,i.jsx)(Ih,{size:16,className:"text-gray-600"})}),g&&(0,i.jsx)("button",{onClick:()=>{x(null),v(null),j.current&&(j.current.value="")},className:"absolute top-0 right-0 w-8 h-8 bg-red-500 rounded-full shadow-lg flex items-center justify-center z-30 hover:bg-red-600 transition-colors duration-200",children:(0,i.jsx)(ju,{size:16,className:"text-white"})})]})]})]}),(0,i.jsxs)("h3",{className:"text-2xl font-bold text-gray-900 font-montserrat mb-3 bg-gradient-to-r from-blue-600 via-indigo-600 to-purple-600 bg-clip-text text-transparent",children:[w.firstName," ",w.lastName]}),(0,i.jsx)("div",{className:"flex items-center justify-center space-x-2 text-sm text-gray-500",children:(0,i.jsx)("span",{className:"font-medium capitalize",children:n.role})})]})})})})]})})]}):(0,i.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-primary-50 via-accent-50 to-secondary-50 flex items-center justify-center",children:(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-primary-600 mx-auto mb-4"}),(0,i.jsx)("p",{className:"text-gray-600",children:"Chargement du profil..."})]})})},wp=()=>{const e=(0,We.Zp)(),[t,s]=(0,r.useState)({name:"Elise HASSI",email:"elise.hassi@example.com",role:"client",avatar:null}),n=[{icon:(0,i.jsx)(Tm,{size:24}),title:"AB \xc9pargne",subtitle:"\xc9pargne et investissement",description:"D\xe9couvrez nos solutions d'\xe9pargne et d'investissement personnalis\xe9es pour faire fructifier votre capital",action:()=>e("/ab-epargne"),color:"from-green-500 to-emerald-600",bgColor:"bg-gradient-to-br from-green-50 to-emerald-100",iconBg:"bg-gradient-to-r from-green-500 to-emerald-600"},{icon:(0,i.jsx)(Uu,{size:24}),title:"AB Logement",subtitle:"Solutions immobili\xe8res",description:"Acc\xe9dez \xe0 nos services de financement immobilier et de gestion locative personnalis\xe9s",action:()=>e("/ab-logement"),color:"from-blue-500 to-indigo-600",bgColor:"bg-gradient-to-br from-blue-50 to-indigo-100",iconBg:"bg-gradient-to-r from-blue-500 to-indigo-600"},{icon:(0,i.jsx)(Dm.A,{size:24}),title:"Coaching et Finance Entrepreneuriale",subtitle:"Accompagnement business",description:"D\xe9veloppez votre entreprise avec notre expertise en finance et notre accompagnement personnalis\xe9",action:()=>e("/coaching-finance"),color:"from-purple-500 to-violet-600",bgColor:"bg-gradient-to-br from-purple-50 to-violet-100",iconBg:"bg-gradient-to-r from-purple-500 to-violet-600"},{icon:(0,i.jsx)(Im,{size:24}),title:"Score de Fid\xe9lit\xe9",subtitle:"Programme de r\xe9compenses",description:"D\xe9couvrez vos avantages et r\xe9compenses pour votre fid\xe9lit\xe9 \xe0 nos services",action:()=>e("/loyalty-score"),color:"from-yellow-500 to-orange-600",bgColor:"bg-gradient-to-br from-yellow-50 to-orange-100",iconBg:"bg-gradient-to-r from-yellow-500 to-orange-600"}];return(0,i.jsx)("div",{className:"bg-gradient-to-br from-primary-50 via-accent-50 to-secondary-50 pt-0",children:(0,i.jsxs)("div",{className:"relative overflow-hidden",children:[(0,i.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-500 via-purple-600 to-indigo-600 opacity-15"}),(0,i.jsx)("div",{className:"relative px-4 lg:px-8 py-8 lg:py-12 backdrop-blur-sm",children:(0,i.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,i.jsx)("div",{className:"text-center mb-8 lg:mb-12",children:(0,i.jsxs)("h1",{className:"text-4xl lg:text-6xl font-bold text-secondary-900 font-montserrat mb-4",children:["Menu"," ",(0,i.jsx)("span",{className:"bg-gradient-to-r from-blue-600 via-purple-600 to-indigo-600 bg-clip-text text-transparent",children:"Principal"})]})}),(0,i.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:n.map((e,t)=>(0,i.jsx)("div",{className:"group cursor-pointer",onClick:e.action,children:(0,i.jsxs)("div",{className:"".concat(e.bgColor," p-4 rounded-2xl border border-white/50 shadow-lg hover:shadow-xl transition-all duration-300 relative overflow-hidden"),children:[(0,i.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-700"}),(0,i.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,i.jsxs)("div",{className:"flex-1",children:[(0,i.jsx)("h3",{className:"text-lg font-bold bg-gradient-to-r ".concat(e.color," bg-clip-text text-transparent mb-1"),children:e.title}),(0,i.jsx)("p",{className:"text-xs text-gray-600 font-medium",children:e.subtitle})]}),(0,i.jsx)("div",{className:"p-2 rounded-xl ".concat(e.iconBg," text-white shadow-lg"),children:e.icon})]}),(0,i.jsx)("p",{className:"text-xs text-gray-600 leading-relaxed mb-3",children:e.description}),(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsx)("div",{className:"w-6 h-6 rounded-full ".concat(e.iconBg," flex items-center justify-center"),children:(0,i.jsx)(ur,{size:12,className:"text-white"})}),(0,i.jsx)("div",{className:"text-xs font-medium bg-gradient-to-r ".concat(e.color," bg-clip-text text-transparent"),children:"D\xe9couvrir"})]})]})},t))})]})})]})})},Np=()=>{const e=(0,We.Zp)();return(0,i.jsx)("div",{className:"bg-gradient-to-br from-blue-50 via-indigo-50 to-blue-100 min-h-screen",children:(0,i.jsxs)("div",{className:"relative overflow-hidden",children:[(0,i.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-500 via-indigo-600 to-blue-600 opacity-10"}),(0,i.jsx)("div",{className:"relative px-4 lg:px-8 py-6",children:(0,i.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,i.jsxs)(gu.button,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5},onClick:()=>e("/menu"),className:"inline-flex items-center space-x-2 px-4 py-2 bg-white/80 backdrop-blur-sm rounded-full border border-white/50 shadow-lg hover:bg-white/90 transition-all duration-300 mb-8",children:[(0,i.jsx)(Rh.A,{size:16,className:"text-blue-600"}),(0,i.jsx)("span",{className:"text-sm font-medium text-blue-700",children:"Retour au menu"})]}),(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)(gu.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.8,delay:.2},className:"mb-8",children:(0,i.jsx)("div",{className:"inline-flex p-8 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-full text-white shadow-2xl",children:(0,i.jsx)(Uu,{size:80})})}),(0,i.jsxs)(gu.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.3},className:"text-4xl lg:text-6xl font-bold text-gray-900 mb-6",children:["AB"," ",(0,i.jsx)("span",{className:"bg-gradient-to-r from-blue-600 via-indigo-600 to-blue-600 bg-clip-text text-transparent",children:"Logement"})]}),(0,i.jsx)(gu.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.4},className:"mb-8",children:(0,i.jsxs)("div",{className:"inline-flex items-center space-x-3 px-6 py-3 bg-yellow-100 border border-yellow-300 rounded-full",children:[(0,i.jsx)(wu,{size:20,className:"text-yellow-600"}),(0,i.jsx)("span",{className:"text-lg font-semibold text-yellow-800",children:"Bient\xf4t disponible"})]})}),(0,i.jsxs)(gu.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.5},className:"text-xl lg:text-2xl text-gray-600 mb-12 font-light max-w-2xl mx-auto",children:["Nos solutions immobili\xe8res et de financement logement sont en cours de d\xe9veloppement.",(0,i.jsx)("br",{}),(0,i.jsx)("span",{className:"text-blue-600 font-medium",children:"Revenez bient\xf4t !"})]}),(0,i.jsx)(gu.button,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.6},onClick:()=>e("/menu"),className:"bg-gradient-to-r from-blue-500 to-indigo-600 text-white px-8 py-4 rounded-2xl shadow-xl hover:shadow-2xl transition-all duration-300 hover:scale-105",children:"Retour au menu principal"})]})]})})]})})},Sp=(0,mt.A)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),kp=(0,mt.A)("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]),Ap=e=>{let{planConfig:t}=e;const s=(0,r.useRef)(null),{user:n}=((0,We.Zp)(),dt()),[a,o]=(0,r.useState)(!1),[l,c]=(0,r.useState)(!0),[d,u]=(0,r.useState)(null);(0,r.useEffect)(()=>{if(window.FedaPay)return console.log("[FedaPay] \u2705 D\xe9j\xe0 charg\xe9"),o(!0),void c(!1);if(document.querySelector('script[src*="fedapay.com/checkout.js"]')){console.log("[FedaPay] \u23f3 Script d\xe9j\xe0 en cours de chargement, attente...");const e=setInterval(()=>{window.FedaPay&&(console.log("[FedaPay] \u2705 Script charg\xe9 (d\xe9tection diff\xe9r\xe9e)"),o(!0),c(!1),clearInterval(e))},100);return setTimeout(()=>{clearInterval(e),window.FedaPay||(console.error("[FedaPay] \u274c Timeout - Script non charg\xe9 apr\xe8s 10 secondes"),u("Erreur de chargement de FedaPay. Veuillez actualiser la page."),c(!1))},1e4),()=>clearInterval(e)}console.log("[FedaPay] \ud83d\udce5 Chargement du script..."),c(!0),u(null);const e=document.createElement("script");return e.src="https://cdn.fedapay.com/checkout.js?v=1.1.7",e.async=!0,e.onload=()=>{console.log("[FedaPay] \u2705 Script charg\xe9 avec succ\xe8s"),window.FedaPay?(o(!0),c(!1)):setTimeout(()=>{window.FedaPay?(o(!0),c(!1)):(console.error("[FedaPay] \u274c Script charg\xe9 mais window.FedaPay non disponible"),u("Erreur d'initialisation de FedaPay. Veuillez actualiser la page."),c(!1))},500)},e.onerror=()=>{console.error("[FedaPay] \u274c Erreur lors du chargement du script"),u("Impossible de charger FedaPay. V\xe9rifiez votre connexion internet."),c(!1)},document.body.appendChild(e),()=>{if(e.parentNode){document.querySelectorAll('script[src*="fedapay.com/checkout.js"]').length}}},[]);const h=()=>{console.log("[FedaPay] \ud83d\udd0d D\xe9marrage du polling pour d\xe9tecter la cr\xe9ation du plan...");let e=0;const t=async()=>{try{e++,console.log("[FedaPay] \ud83d\udd0d Tentative ".concat(e,"/").concat(60," - V\xe9rification du plan..."));const s="https://ab-pret-back.onrender.com",r=await fetch("".concat(s,"/api/savings/plan-status?userId=").concat(null===n||void 0===n?void 0:n.id)),a=await r.json();if(a.success&&a.plan)return console.log("[FedaPay] \u2705 Plan trouv\xe9 ! Redirection vers RetourEpargne..."),void(window.location.href="/ab-epargne/retour?planId=".concat(a.plan.id,"&status=approved"));if(e>=60)return console.log("[FedaPay] \u23f0 Timeout - Aucun plan trouv\xe9 apr\xe8s 2 minutes"),void alert("Le plan n'a pas \xe9t\xe9 cr\xe9\xe9 dans les temps. Veuillez r\xe9essayer.");setTimeout(t,2e3)}catch(d){if(console.error("[FedaPay] \u274c Erreur lors du polling:",d),e++,e>=60)return void alert("Erreur de connexion. Veuillez r\xe9essayer.");setTimeout(t,2e3)}};setTimeout(t,5e3)};return d?(0,i.jsxs)("div",{className:"w-full p-4 bg-red-50 border border-red-200 rounded-xl",children:[(0,i.jsx)("p",{className:"text-red-600 text-sm font-medium mb-2",children:d}),(0,i.jsx)("button",{onClick:()=>window.location.reload(),className:"w-full bg-red-500 hover:bg-red-600 text-white py-2 px-4 rounded-lg font-semibold transition-colors",children:"Actualiser la page"})]}):l?(0,i.jsxs)("button",{disabled:!0,className:"w-full bg-gray-400 text-white py-3 rounded-lg font-semibold text-base cursor-not-allowed flex items-center justify-center gap-2",children:[(0,i.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),"Chargement de FedaPay..."]}):(0,i.jsx)("button",{ref:s,onClick:()=>a?window.FedaPay?void(n?t?(console.log("[FedaPay] \ud83d\ude80 Initialisation du paiement..."),h(),window.FedaPay.init(s.current,{public_key:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_BACKEND_URL:"https://ab-pret-back.onrender.com",REACT_APP_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRsZ2ZoZ2NjenFlZmJ1aGN5YXpoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ2MDM3NjQsImV4cCI6MjA3MDE3OTc2NH0.ILqv7fUAP8KAr0GzkqeqaRqDcbKcPhcHtIQR7PYFIgY",REACT_APP_SUPABASE_URL:"https://dlgfhgcczqefbuhcyazh.supabase.co"}.REACT_APP_FEDAPAY_PUBLIC_KEY||"pk_live_u0sqkP5Irt1BvqvnU5gh4FOC",transaction:{amount:1e3,description:"Cr\xe9ation plan \xe9pargne - ".concat(null===n||void 0===n?void 0:n.email),currency:{iso:"XOF"},callback_url:"".concat(window.location.origin,"/ab-epargne/retour"),custom_metadata:{paymentType:"savings_plan_creation",user_id:null===n||void 0===n?void 0:n.id,fixed_amount:t.montant,frequency_days:t.frequence,duration_months:t.nombreMois}},customer:{email:null===n||void 0===n?void 0:n.email,firstname:(null===n||void 0===n?void 0:n.first_name)||"Client",lastname:(null===n||void 0===n?void 0:n.last_name)||"Campus",phone_number:{number:(null===n||void 0===n?void 0:n.phone)||"97000000",country:"BJ"}},modal:!0})):alert("Configuration du plan manquante."):alert("Vous devez \xeatre connect\xe9 pour effectuer un paiement.")):(console.error("[FedaPay] \u274c window.FedaPay n'est pas disponible"),void alert("Erreur d'initialisation de FedaPay. Veuillez actualiser la page.")):(console.error("[FedaPay] \u274c FedaPay n'est pas charg\xe9 (fedaPayLoaded = false)"),void alert("FedaPay est en cours de chargement. Veuillez patienter quelques secondes.")),disabled:!a,className:"w-full py-3 rounded-lg font-semibold text-base transition-all ".concat(a?"bg-blue-600 hover:bg-blue-700 text-white shadow-md hover:shadow-lg":"bg-gray-400 text-white cursor-not-allowed"),children:a?"Payer 1000 F":"Chargement..."})},_p=()=>{const e=(0,We.Zp)(),{user:t}=dt(),[s,n]=(0,r.useState)("config"),[a,o]=(0,r.useState)({montant:500,frequence:"5",nombreMois:6}),[l,d]=(0,r.useState)(!1),[u,h]=(0,r.useState)(!1);(0,r.useEffect)(()=>{(()=>{const t=new URLSearchParams(window.location.search),s=t.get("reference"),r=t.get("status");if(s&&"approved"===r)console.log("[AB_EPARGNE] \ud83d\udd04 Paiement d\xe9tect\xe9, redirection vers RetourEpargne"),window.history.replaceState({},document.title,window.location.pathname),e("/ab-epargne/retour?reference=".concat(s,"&status=approved"))})()},[e]);const m=()=>{d(!0)},p=()=>{e("/dashboard")};(0,r.useEffect)(()=>{(async()=>{if(!t)return console.log("[AB_EPARGNE] \u23f3 Pas d'utilisateur connect\xe9"),void h(!1);try{h(!0),console.log("[AB_EPARGNE] \ud83d\udd0d Recherche du plan actif pour user:",t.id);const s=ku.f,r="".concat(s,"/api/savings/plan-status?userId=").concat(t.id);console.log("[AB_EPARGNE] \ud83c\udf10 URL API:",r);const n=await fetch(r);console.log("[AB_EPARGNE] \ud83d\udce1 Status r\xe9ponse:",n.status);const a=await n.json();if(console.log("[AB_EPARGNE] \ud83d\udce1 R\xe9ponse API compl\xe8te:",a),a.success&&a.plan){console.log("[AB_EPARGNE] \u2705 Plan actif trouv\xe9:",a.plan);const t=a.plan.personalized_at&&null!==a.plan.personalized_at&&a.plan.plan_name&&""!==a.plan.plan_name.trim()&&"Plan \xc9pargne"!==a.plan.plan_name.trim()&&a.plan.goal;return console.log("[AB_EPARGNE] \ud83d\udd0d V\xe9rification personnalisation:",{personalized_at:a.plan.personalized_at,plan_name:a.plan.plan_name,goal:a.plan.goal,isPersonalized:t}),t?(console.log("[AB_EPARGNE] \u2705 Plan personnalis\xe9, redirection vers dashboard"),void e("/ab-epargne/plan/".concat(a.plan.id),{replace:!0})):(console.log("[AB_EPARGNE] \u26a0\ufe0f Plan non personnalis\xe9, redirection OBLIGATOIRE vers personnalisation"),void e("/ab-epargne/personalize/".concat(a.plan.id),{replace:!0}))}console.log("[AB_EPARGNE] \u2139\ufe0f Aucun plan actif trouv\xe9, affichage de la config")}catch(s){console.error("[AB_EPARGNE] \u274c Erreur:",s)}finally{h(!1)}})()},[t,e]);const f=()=>(0,i.jsxs)("div",{className:"min-h-screen bg-gray-50 sm:bg-gray-100",children:[(0,i.jsx)("div",{className:"bg-gray-100 sm:bg-white rounded-b-2xl sm:rounded-none mb-4 sm:mb-6",children:(0,i.jsxs)("div",{className:"flex items-center justify-between px-4 py-4 sm:px-6 sm:py-4",children:[(0,i.jsx)("button",{onClick:p,className:"w-10 h-10 rounded-full bg-white sm:bg-gray-50 flex items-center justify-center shadow-sm hover:bg-gray-50 transition-colors",children:(0,i.jsx)(Sp,{className:"w-5 h-5 text-gray-700"})}),(0,i.jsx)("h1",{className:"text-base sm:text-lg font-semibold text-gray-900",children:"Configuration du Plan"}),(0,i.jsx)("div",{className:"w-10"})," "]})}),(0,i.jsxs)("div",{className:"text-center mb-6 sm:mb-8 px-4",children:[(0,i.jsx)("p",{className:"text-sm text-gray-500 mb-2",children:"Total amount"}),(0,i.jsx)("p",{className:"text-4xl sm:text-5xl font-bold text-blue-600",children:"1 000 F CFA"})]}),(0,i.jsxs)("div",{className:"bg-white rounded-t-3xl sm:rounded-2xl shadow-lg sm:shadow-xl p-6 sm:p-8 mx-auto max-w-md sm:max-w-lg",children:[(0,i.jsxs)("div",{className:"mb-6",children:[(0,i.jsxs)("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:["Montant \xe0 d\xe9poser ",(0,i.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,i.jsxs)("div",{className:"flex items-center bg-gray-50 rounded-xl p-4 border border-blue-200",children:[(0,i.jsx)("button",{onClick:()=>o((0,c.A)((0,c.A)({},a),{},{montant:Math.max(500,a.montant-100)})),className:"w-10 h-10 bg-white rounded-full shadow-sm flex items-center justify-center hover:bg-gray-50 transition-colors",children:(0,i.jsx)(kp,{className:"w-4 h-4 text-gray-600"})}),(0,i.jsxs)("div",{className:"flex-1 text-center",children:[(0,i.jsx)("input",{type:"number",min:"500",step:"100",value:a.montant,onChange:e=>{const t=parseInt(e.target.value)||500;o((0,c.A)((0,c.A)({},a),{},{montant:Math.max(500,t)}))},onFocus:e=>{e.target.select()},onClick:e=>{e.target.select()},className:"w-full text-xl font-semibold text-gray-900 text-center bg-transparent border-none outline-none focus:outline-none cursor-pointer",style:{width:"".concat(Math.max(a.montant.toString().length+2,6),"ch")},placeholder:"500"}),(0,i.jsx)("span",{className:"text-gray-600 ml-1",children:"F"})]}),(0,i.jsx)("button",{onClick:()=>o((0,c.A)((0,c.A)({},a),{},{montant:a.montant+100})),className:"w-10 h-10 bg-white rounded-full shadow-sm flex items-center justify-center hover:bg-gray-50 transition-colors",children:(0,i.jsx)(Rm,{className:"w-4 h-4 text-gray-600"})})]}),(0,i.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Minimum 500 F"})]}),(0,i.jsxs)("div",{className:"mb-6",children:[(0,i.jsxs)("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:["Fr\xe9quence de d\xe9p\xf4t ",(0,i.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,i.jsxs)("div",{className:"flex gap-3",children:[(0,i.jsx)("button",{onClick:()=>o((0,c.A)((0,c.A)({},a),{},{frequence:"5"})),className:"flex-1 py-3 px-4 rounded-lg font-medium text-sm transition-all ".concat("5"===a.frequence?"bg-blue-600 text-white shadow-md":"bg-gray-50 text-gray-700 border border-gray-200 hover:border-blue-300"),children:"Tous les 5 jours"}),(0,i.jsx)("button",{onClick:()=>o((0,c.A)((0,c.A)({},a),{},{frequence:"10"})),className:"flex-1 py-3 px-4 rounded-lg font-medium text-sm transition-all ".concat("10"===a.frequence?"bg-blue-600 text-white shadow-md":"bg-gray-50 text-gray-700 border border-gray-200 hover:border-blue-300"),children:"Tous les 10 jours"})]})]}),(0,i.jsxs)("div",{className:"mb-6",children:[(0,i.jsxs)("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:["Dur\xe9e (mois) ",(0,i.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,i.jsxs)("div",{className:"flex items-center bg-gray-50 rounded-xl p-4 border border-blue-200",children:[(0,i.jsx)("button",{onClick:()=>o((0,c.A)((0,c.A)({},a),{},{nombreMois:Math.max(1,a.nombreMois-1)})),className:"w-10 h-10 bg-white rounded-full shadow-sm flex items-center justify-center hover:bg-gray-50 transition-colors",children:(0,i.jsx)(kp,{className:"w-4 h-4 text-gray-600"})}),(0,i.jsxs)("div",{className:"flex-1 text-center",children:[(0,i.jsx)("span",{className:"text-xl font-semibold text-gray-900",children:a.nombreMois}),(0,i.jsx)("span",{className:"text-gray-600 ml-1",children:"mois"})]}),(0,i.jsx)("button",{onClick:()=>o((0,c.A)((0,c.A)({},a),{},{nombreMois:a.nombreMois+1})),className:"w-10 h-10 bg-white rounded-full shadow-sm flex items-center justify-center hover:bg-gray-50 transition-colors",children:(0,i.jsx)(Rm,{className:"w-4 h-4 text-gray-600"})})]})]}),(0,i.jsxs)("div",{className:"bg-gray-50 rounded-xl p-4 mb-6 border border-gray-200",children:[(0,i.jsx)("h3",{className:"font-semibold text-gray-900 mb-3 text-sm",children:"R\xe9sum\xe9 de votre plan"}),(0,i.jsxs)("div",{className:"text-xs text-gray-600 space-y-2",children:[(0,i.jsxs)("p",{children:["\u2022 D\xe9p\xf4t : ",a.montant.toLocaleString()," F tous les ",a.frequence," jours"]}),(0,i.jsxs)("p",{children:["\u2022 Dur\xe9e : ",a.nombreMois," mois"]}),(0,i.jsx)("p",{children:"\u2022 Taux d'int\xe9r\xeats : 5% par mois"}),(0,i.jsxs)("p",{children:["\u2022 Total d\xe9pos\xe9 : ",(a.montant*(30/parseInt(a.frequence))*a.nombreMois).toLocaleString()," F"]}),(0,i.jsxs)("p",{children:["\u2022 Int\xe9r\xeats estim\xe9s : ",Math.round(a.montant*(30/parseInt(a.frequence))*a.nombreMois*.05*a.nombreMois).toLocaleString()," F"]}),(0,i.jsxs)("p",{className:"font-semibold text-blue-600 pt-2 border-t border-gray-200",children:["\u2022 Total avec int\xe9r\xeats : ",Math.round(a.montant*(30/parseInt(a.frequence))*a.nombreMois*(1+.05*a.nombreMois)).toLocaleString()," F"]})]})]}),(0,i.jsx)("button",{onClick:m,className:"w-full bg-blue-600 hover:bg-blue-700 text-white py-4 rounded-lg font-semibold text-base shadow-md hover:shadow-lg transition-all duration-200 mb-6",children:"Pay now"}),(0,i.jsxs)("div",{className:"text-center pt-4 border-t border-gray-200",children:[(0,i.jsx)("p",{className:"text-xs text-gray-500 mb-2",children:"Powered by"}),(0,i.jsxs)("div",{className:"flex items-center justify-center gap-2 mb-2",children:[(0,i.jsx)("div",{className:"w-6 h-6 bg-gradient-to-r from-blue-600 to-indigo-600 rounded flex items-center justify-center",children:(0,i.jsx)(Ku,{className:"w-4 h-4 text-white"})}),(0,i.jsx)("span",{className:"text-sm font-semibold text-blue-600",children:"AB Campus Finance"})]}),(0,i.jsx)("p",{className:"text-xs text-gray-400 mt-2",children:"Offer your customers a tailor-made payment experience"})]})]}),l&&(0,i.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,i.jsxs)("div",{className:"bg-white rounded-2xl sm:rounded-3xl p-6 max-w-sm w-full shadow-2xl",children:[(0,i.jsxs)("div",{className:"text-center mb-6",children:[(0,i.jsx)(Bu.A,{className:"w-12 h-12 text-blue-600 mx-auto mb-3"}),(0,i.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Paiement requis"}),(0,i.jsx)("p",{className:"text-gray-600 text-sm",children:"Frais de cr\xe9ation du plan d'\xe9pargne"})]}),(0,i.jsx)("div",{className:"bg-gray-50 rounded-xl p-4 mb-6 text-center border border-gray-200",children:(0,i.jsx)("span",{className:"text-2xl font-bold text-gray-900",children:"1 000 F"})}),(0,i.jsxs)("div",{className:"flex gap-3",children:[(0,i.jsx)("button",{onClick:()=>d(!1),className:"flex-1 py-3 text-gray-600 font-medium hover:text-gray-800 transition-colors",children:"Annuler"}),(0,i.jsx)("div",{className:"flex-1",children:(0,i.jsx)(Ap,{planConfig:a})})]})]})})]}),x=()=>(0,i.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-4",children:[(0,i.jsx)("div",{className:"flex items-center justify-between mb-8 pt-4",children:(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("button",{onClick:p,className:"flex items-center",children:(0,i.jsx)(Sp,{className:"w-6 h-6 text-gray-600"})}),(0,i.jsx)("h1",{className:"text-xl font-semibold text-gray-800 ml-4",children:"Mon Plan d'\xc9pargne"})]})}),(0,i.jsxs)("div",{className:"bg-gradient-to-r from-blue-500 to-indigo-600 rounded-2xl p-6 mb-6 text-white shadow-xl",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-blue-100 text-sm",children:"Solde disponible"}),(0,i.jsx)("p",{className:"text-3xl font-bold",children:"0 F"})]}),(0,i.jsx)("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center",children:(0,i.jsx)(Ku,{className:"w-6 h-6"})})]}),(0,i.jsxs)("div",{className:"flex justify-between text-sm text-blue-100",children:[(0,i.jsx)("span",{children:"Plan actif depuis aujourd'hui"}),(0,i.jsxs)("span",{children:["Prochain d\xe9p\xf4t : ",a.frequence," jours"]})]})]}),(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[(0,i.jsxs)("div",{className:"bg-white rounded-xl p-4 shadow-md",children:[(0,i.jsx)("p",{className:"text-gray-600 text-sm",children:"D\xe9p\xf4t pr\xe9vu"}),(0,i.jsxs)("p",{className:"text-lg font-bold text-gray-800",children:[a.montant.toLocaleString()," F"]})]}),(0,i.jsxs)("div",{className:"bg-white rounded-xl p-4 shadow-md",children:[(0,i.jsx)("p",{className:"text-gray-600 text-sm",children:"Dur\xe9e restante"}),(0,i.jsxs)("p",{className:"text-lg font-bold text-gray-800",children:[a.nombreMois," mois"]})]})]}),(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsxs)("button",{className:"w-full bg-gradient-to-r from-green-500 to-green-600 text-white py-4 rounded-xl font-semibold shadow-lg flex items-center justify-center",children:[(0,i.jsx)(Rm,{className:"w-5 h-5 mr-2"}),"Effectuer un D\xe9p\xf4t"]}),(0,i.jsxs)("button",{className:"w-full bg-gradient-to-r from-orange-500 to-orange-600 text-white py-4 rounded-xl font-semibold shadow-lg flex items-center justify-center",children:[(0,i.jsx)(kp,{className:"w-5 h-5 mr-2"}),"Effectuer un Retrait"]})]}),(0,i.jsxs)("div",{className:"bg-white rounded-xl p-6 mt-6 shadow-md",children:[(0,i.jsx)("h3",{className:"font-semibold text-gray-800 mb-4",children:"D\xe9tails du plan"}),(0,i.jsxs)("div",{className:"space-y-3 text-sm",children:[(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsx)("span",{className:"text-gray-600",children:"Montant par d\xe9p\xf4t"}),(0,i.jsxs)("span",{className:"font-medium",children:[a.montant.toLocaleString()," F"]})]}),(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsx)("span",{className:"text-gray-600",children:"Fr\xe9quence"}),(0,i.jsxs)("span",{className:"font-medium",children:["Tous les ",a.frequence," jours"]})]}),(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsx)("span",{className:"text-gray-600",children:"Dur\xe9e totale"}),(0,i.jsxs)("span",{className:"font-medium",children:[a.nombreMois," mois"]})]}),(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsx)("span",{className:"text-gray-600",children:"Taux d'int\xe9r\xeats"}),(0,i.jsx)("span",{className:"font-medium text-green-600",children:"5% par mois"})]}),(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsx)("span",{className:"text-gray-600",children:"Total d\xe9pos\xe9"}),(0,i.jsxs)("span",{className:"font-medium",children:[(a.montant*(30/parseInt(a.frequence))*a.nombreMois).toLocaleString()," F"]})]}),(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsx)("span",{className:"text-gray-600",children:"Int\xe9r\xeats estim\xe9s"}),(0,i.jsxs)("span",{className:"font-medium text-green-600",children:[Math.round(a.montant*(30/parseInt(a.frequence))*a.nombreMois*.05*a.nombreMois).toLocaleString()," F"]})]}),(0,i.jsxs)("div",{className:"border-t pt-3 flex justify-between",children:[(0,i.jsx)("span",{className:"text-gray-600",children:"Objectif d'\xe9pargne"}),(0,i.jsxs)("span",{className:"font-semibold text-blue-600",children:[Math.round(a.montant*(30/parseInt(a.frequence))*a.nombreMois*(1+.05*a.nombreMois)).toLocaleString()," F"]})]})]})]})]});return(0,i.jsxs)("div",{className:"max-w-sm mx-auto bg-white min-h-screen relative",children:[u&&(0,i.jsxs)("div",{className:"absolute top-4 left-1/2 -translate-x-1/2 z-10 flex items-center gap-2 px-4 py-2 bg-white/95 shadow-lg rounded-full border border-gray-200",children:[(0,i.jsx)("div",{className:"w-5 h-5 border-2 border-blue-600 border-t-transparent rounded-full animate-spin"}),(0,i.jsx)("span",{className:"text-sm text-gray-600",children:"V\xe9rification du plan..."})]}),"config"===s?(0,i.jsx)(f,{}):(0,i.jsx)(x,{})]})},Ep=()=>{const e=(0,We.Zp)(),t=(0,We.zy)(),{user:s}=dt(),[n,a]=(0,r.useState)("loading"),[o,l]=(0,r.useState)(null),[c,d]=(0,r.useState)(null),[u,h]=(0,r.useState)(0),[m,p]=(0,r.useState)(0),f=ku.f;(0,r.useEffect)(()=>{const r=async()=>{try{const n=new URLSearchParams(t.search),i=n.get("planId"),o=n.get("reference"),c=n.get("status");if(!i&&!o||"approved"!==c)return d("Paiement non confirm\xe9"),void a("error");let m;console.log("[RETOUR_EPARGNE] \ud83d\udd0d Polling pour planId:",i,"ou reference:",o),m=i?"".concat(f,"/api/savings/plan-status?planId=").concat(i):o&&o.startsWith("temp_")?"".concat(f,"/api/savings/plan-status?userId=").concat(null===s||void 0===s?void 0:s.id):"".concat(f,"/api/savings/plan-status?reference=").concat(o);const x=await fetch(m),g=await x.json();if(console.log("[RETOUR_EPARGNE] \ud83d\udce1 R\xe9ponse API:",g),g.success&&g.plan){console.log("[RETOUR_EPARGNE] \u2705 Plan trouv\xe9"),l(g.plan),a("success");const t=g.plan.personalized_at&&null!==g.plan.personalized_at&&g.plan.plan_name&&""!==g.plan.plan_name.trim()&&"Plan \xc9pargne"!==g.plan.plan_name.trim()&&g.plan.goal;console.log("[RETOUR_EPARGNE] \ud83d\udd0d V\xe9rification personnalisation:",{personalized_at:g.plan.personalized_at,plan_name:g.plan.plan_name,goal:g.plan.goal,isPersonalized:t}),setTimeout(()=>{t?(console.log("[RETOUR_EPARGNE] \ud83d\ude80 Plan d\xe9j\xe0 personnalis\xe9, redirection vers PlanEpargne..."),e("/ab-epargne/plan/".concat(g.plan.id),{replace:!0})):(console.log("[RETOUR_EPARGNE] \ud83d\ude80 Plan non personnalis\xe9, redirection OBLIGATOIRE vers PersonalizePlan..."),e("/ab-epargne/personalize/".concat(g.plan.id),{replace:!0}))},2e3)}else{const e=u+1;if(console.log("[RETOUR_EPARGNE] \u23f3 Plan pas encore cr\xe9\xe9, tentative:",e),h(e),p(Math.min(e/30*100,100)),e>=30)return d("Le plan n'a pas \xe9t\xe9 cr\xe9\xe9 dans les temps. Veuillez contacter le support."),void a("error");setTimeout(r,1e4)}}catch(c){if(console.error("[RETOUR_EPARGNE] \u274c Erreur lors du polling:",c),h(e=>e+1),u>=30)return d("Erreur de connexion persistante. Veuillez contacter le support."),void a("error");setTimeout(r,1e4)}};r()},[t.search,e]);const x=()=>{a("loading"),d(null),h(0),window.location.reload()},g=()=>{e("/dashboard")};return"loading"===n?(0,i.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:(0,i.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8 max-w-md w-full text-center",children:[(0,i.jsxs)("div",{className:"mb-6",children:[(0,i.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 bg-green-100 rounded-full flex items-center justify-center",children:(0,i.jsxs)("svg",{className:"w-8 h-8 text-green-600 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[(0,i.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,i.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}),(0,i.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Paiement confirm\xe9 !"}),(0,i.jsx)("p",{className:"text-gray-600 mb-4",children:"Cr\xe9ation de votre plan d'\xe9pargne en cours..."}),(0,i.jsxs)("div",{className:"text-sm text-gray-500",children:["Tentative ",u+1,"/30 \u2022 ",Math.round(m),"% compl\xe9t\xe9"]})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)("div",{className:"h-3 bg-gray-200 rounded-full overflow-hidden",children:(0,i.jsx)("div",{className:"h-full bg-gradient-to-r from-green-500 to-blue-500 rounded-full transition-all duration-500 ease-out",style:{width:"".concat(m,"%")}})}),(0,i.jsx)("div",{className:"text-xs text-gray-400 text-center",children:"V\xe9rification de la cr\xe9ation du plan..."}),(0,i.jsx)("p",{className:"text-xs text-gray-500",children:"Veuillez patienter, cela ne prendra que quelques instants..."})]})]})}):"error"===n?(0,i.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:(0,i.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8 max-w-md w-full text-center",children:[(0,i.jsxs)("div",{className:"mb-6",children:[(0,i.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 bg-red-100 rounded-full flex items-center justify-center",children:(0,i.jsx)("svg",{className:"w-8 h-8 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),(0,i.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Erreur de cr\xe9ation"}),(0,i.jsx)("p",{className:"text-gray-600 mb-4",children:c||"Une erreur est survenue lors de la cr\xe9ation de votre plan."})]}),(0,i.jsxs)("div",{className:"space-y-3",children:[(0,i.jsx)("button",{onClick:x,className:"w-full bg-blue-600 text-white py-3 px-4 rounded-lg font-medium hover:bg-blue-700 transition-colors",children:"R\xe9essayer"}),(0,i.jsx)("button",{onClick:g,className:"w-full bg-gray-200 text-gray-800 py-3 px-4 rounded-lg font-medium hover:bg-gray-300 transition-colors",children:"Retour au tableau de bord"})]})]})}):"success"===n&&o?(0,i.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:(0,i.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8 max-w-md w-full text-center",children:[(0,i.jsxs)("div",{className:"mb-6",children:[(0,i.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 bg-green-100 rounded-full flex items-center justify-center",children:(0,i.jsx)("svg",{className:"w-8 h-8 text-green-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),(0,i.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Plan cr\xe9\xe9 avec succ\xe8s !"}),(0,i.jsx)("p",{className:"text-gray-600 mb-4",children:"Votre plan d'\xe9pargne est maintenant actif."})]}),(0,i.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 mb-6 text-left",children:[(0,i.jsx)("h3",{className:"font-semibold text-gray-900 mb-2",children:"D\xe9tails du plan :"}),(0,i.jsxs)("div",{className:"space-y-1 text-sm text-gray-600",children:[(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsx)("span",{children:"Montant par d\xe9p\xf4t :"}),(0,i.jsxs)("span",{className:"font-medium",children:[null===(v=o.fixed_amount)||void 0===v?void 0:v.toLocaleString()," F"]})]}),(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsx)("span",{children:"Objectif total :"}),(0,i.jsxs)("span",{className:"font-medium",children:[null===(y=o.total_amount_target)||void 0===y?void 0:y.toLocaleString()," F"]})]}),(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsx)("span",{children:"Statut :"}),(0,i.jsx)("span",{className:"font-medium text-green-600 capitalize",children:o.status})]}),(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsx)("span",{children:"Progression :"}),(0,i.jsxs)("span",{className:"font-medium",children:[o.completion_percentage||0,"%"]})]})]})]}),(0,i.jsx)("div",{className:"text-sm text-gray-500 mb-4",children:"Redirection automatique vers votre plan..."}),(0,i.jsx)("button",{onClick:()=>e("/ab-epargne/plan/".concat(o.id)),className:"w-full bg-green-600 text-white py-3 px-4 rounded-lg font-medium hover:bg-green-700 transition-colors",children:"Voir mon plan maintenant"})]})}):null;var v,y},Cp=(0,mt.A)("CheckCircle2",[["path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",key:"14v8dr"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),Pp=e=>{let{plan:t,onSuccess:s}=e;const n=(0,r.useRef)(null),a=(0,r.useRef)(null),{user:o}=dt(),[l,c]=(0,r.useState)(!1);(0,r.useEffect)(()=>{const e=document.createElement("script");return e.src="https://cdn.fedapay.com/checkout.js?v=1.1.7",e.async=!0,e.onload=()=>{console.log("[FedaPay] \u2705 Script charg\xe9 pour d\xe9p\xf4t")},e.onerror=()=>{console.error("[FedaPay] \u274c Erreur chargement script")},document.body.appendChild(e),()=>{document.body.contains(e)&&document.body.removeChild(e)}},[]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("button",{ref:a,style:{display:"none"},onClick:()=>{}}),(0,i.jsx)("button",{ref:n,onClick:async()=>{if(window.FedaPay)if(o&&t){c(!0);try{const e=ku.f,s=await fetch("".concat(e,"/api/create-savings-deposit"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:o.id,plan_id:t.id,amount:t.fixed_amount})}),r=await s.json();console.log("[FedaPay] R\xe9ponse backend:",r),r.success&&r.transactionUrl?window.location.href=r.transactionUrl:(alert("Erreur de connexion. Veuillez r\xe9essayer."),c(!1))}catch(e){console.error("[FedaPay] \u274c Erreur:",e),alert("Erreur de connexion. Veuillez r\xe9essayer."),c(!1)}}else alert("Informations utilisateur ou plan manquantes");else alert("FedaPay n'est pas encore charg\xe9 !")},disabled:l,className:"w-full bg-blue-600 hover:bg-blue-700 text-white py-4 rounded-lg font-semibold text-sm shadow-md hover:shadow-lg transition-all duration-200 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed",children:l?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"..."]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Rm,{className:"w-5 h-5 mr-2"}),"D\xe9p\xf4t"]})})]})},Tp=e=>{let{plan:t,onClose:s,onSuccess:n}=e;const[a,o]=(0,r.useState)(1),[l,d]=(0,r.useState)(!1),[u,h]=(0,r.useState)(""),[m,p]=(0,r.useState)({phoneNumber:"",recipientName:""}),f=e=>{p((0,c.A)((0,c.A)({},m),{},{[e.target.name]:e.target.value})),h("")};return(0,i.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:(0,i.jsxs)("div",{className:"bg-white rounded-3xl shadow-2xl max-w-md w-full overflow-hidden",children:[(0,i.jsxs)("div",{className:"bg-gradient-to-r from-green-500 to-emerald-600 text-white p-6",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,i.jsx)("h3",{className:"text-2xl font-bold",children:"Demande de retrait"}),(0,i.jsx)("button",{onClick:s,className:"p-2 hover:bg-white/20 rounded-full transition-colors",children:(0,i.jsx)(xt,{size:24})})]}),(0,i.jsx)("p",{className:"text-green-100 text-sm",children:1===a?"\xc9tape 1/2 : Informations de transfert":"\xc9tape 2/2 : Confirmation"})]}),(0,i.jsx)("div",{className:"p-6",children:1===a?(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsxs)("div",{className:"bg-green-50 rounded-2xl p-4 border border-green-200",children:[(0,i.jsx)("p",{className:"text-sm text-green-800 mb-2",children:"Montant disponible"}),(0,i.jsx)("p",{className:"text-3xl font-bold text-green-600",children:(0,Tu.vv)(t.current_balance)})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)(Bu.A,{size:18}),"Num\xe9ro de t\xe9l\xe9phone Mobile Money"]})}),(0,i.jsx)("input",{type:"tel",name:"phoneNumber",value:m.phoneNumber,onChange:f,placeholder:"+229 XX XX XX XX",className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all"}),(0,i.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Le num\xe9ro qui recevra le transfert"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)(cr,{size:18}),"Nom sur le num\xe9ro"]})}),(0,i.jsx)("input",{type:"text",name:"recipientName",value:m.recipientName,onChange:f,placeholder:"Nom complet du b\xe9n\xe9ficiaire",className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all"}),(0,i.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Le nom associ\xe9 au num\xe9ro Mobile Money"})]}),u&&(0,i.jsx)("div",{className:"bg-red-50 border-l-4 border-red-500 rounded-lg p-4",children:(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)(pt,{size:20,className:"text-red-600"}),(0,i.jsx)("p",{className:"text-sm text-red-800",children:u})]})}),(0,i.jsx)("button",{onClick:()=>{if(!m.phoneNumber||!m.recipientName)return void h("Veuillez remplir tous les champs");/^[\d\s\+\-\(\)]+$/.test(m.phoneNumber)?o(2):h("Num\xe9ro de t\xe9l\xe9phone invalide")},className:"w-full py-3 bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white font-semibold rounded-xl transition-all duration-200 shadow-lg hover:shadow-xl",children:"Suivant"})]}):(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsxs)("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 rounded-2xl p-6 border-2 border-green-200",children:[(0,i.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,i.jsx)("div",{className:"p-3 bg-green-500 rounded-xl",children:(0,i.jsx)(ht.A,{size:24,className:"text-white"})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h4",{className:"font-bold text-gray-900",children:"R\xe9capitulatif"}),(0,i.jsx)("p",{className:"text-sm text-gray-600",children:"V\xe9rifiez les informations"})]})]}),(0,i.jsxs)("div",{className:"space-y-3",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center py-2 border-b border-green-200",children:[(0,i.jsx)("span",{className:"text-sm text-gray-600",children:"Montant"}),(0,i.jsx)("span",{className:"text-lg font-bold text-green-600",children:(0,Tu.vv)(t.current_balance)})]}),(0,i.jsxs)("div",{className:"flex justify-between items-center py-2 border-b border-green-200",children:[(0,i.jsx)("span",{className:"text-sm text-gray-600",children:"Num\xe9ro"}),(0,i.jsx)("span",{className:"font-semibold text-gray-900",children:m.phoneNumber})]}),(0,i.jsxs)("div",{className:"flex justify-between items-center py-2",children:[(0,i.jsx)("span",{className:"text-sm text-gray-600",children:"B\xe9n\xe9ficiaire"}),(0,i.jsx)("span",{className:"font-semibold text-gray-900",children:m.recipientName})]})]})]}),(0,i.jsx)("div",{className:"bg-blue-50 rounded-xl p-4 border border-blue-200",children:(0,i.jsx)("p",{className:"text-sm text-blue-800",children:"\u2139\ufe0f Votre demande sera trait\xe9e par un administrateur. Vous recevrez une notification une fois le transfert effectu\xe9."})}),u&&(0,i.jsx)("div",{className:"bg-red-50 border-l-4 border-red-500 rounded-lg p-4",children:(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)(pt,{size:20,className:"text-red-600"}),(0,i.jsx)("p",{className:"text-sm text-red-800",children:u})]})}),(0,i.jsxs)("div",{className:"flex gap-3",children:[(0,i.jsx)("button",{onClick:()=>o(1),disabled:l,className:"flex-1 py-3 bg-gray-100 hover:bg-gray-200 text-gray-700 font-semibold rounded-xl transition-all duration-200 disabled:opacity-50",children:"Retour"}),(0,i.jsx)("button",{onClick:async()=>{try{d(!0),h(""),console.log("[WITHDRAWAL] Cr\xe9ation de la demande de retrait...");const{data:l,error:c}=await ot.ND.from("withdrawal_requests").insert([{user_id:t.user_id,savings_plan_id:t.id,amount:t.current_balance,phone_number:m.phoneNumber,recipient_name:m.recipientName,status:"pending"}]).select().single();if(c)throw console.error("[WITHDRAWAL] Erreur cr\xe9ation demande:",c),new Error("Erreur lors de la cr\xe9ation de la demande");console.log("[WITHDRAWAL] Demande cr\xe9\xe9e:",l);const{error:u}=await ot.ND.from("savings_plans").update({status:"withdrawal_pending",updated_at:(new Date).toISOString()}).eq("id",t.id);u&&console.error("[WITHDRAWAL] Erreur mise \xe0 jour plan:",u);const{data:p}=await ot.ND.from("users").select("id").eq("role","admin").single();if(p){var e,r;await ot.ND.from("notifications").insert([{user_id:p.id,title:"Nouvelle demande de retrait",message:"".concat(null===(e=t.user)||void 0===e?void 0:e.first_name," ").concat(null===(r=t.user)||void 0===r?void 0:r.last_name," demande un retrait de ").concat((0,Tu.vv)(t.current_balance)),type:"withdrawal_request",data:{withdrawal_id:l.id,plan_id:t.id,user_id:t.user_id,amount:t.current_balance}}]);try{var a,i;const e="https://ab-pret-back.onrender.com",s=await fetch("".concat(e,"/api/notify-admin-withdrawal"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({withdrawalId:l.id,clientName:"".concat(null===(a=t.user)||void 0===a?void 0:a.first_name," ").concat(null===(i=t.user)||void 0===i?void 0:i.last_name),amount:t.current_balance,userId:t.user_id})});s.ok?console.log("[WITHDRAWAL] \u2705 Notification push envoy\xe9e \xe0 l'admin"):console.error("[WITHDRAWAL] \u26a0\ufe0f Erreur notification push:",await s.text())}catch(o){console.error("[WITHDRAWAL] \u26a0\ufe0f Erreur envoi notification push:",o)}}console.log("[WITHDRAWAL] \u2705 Demande de retrait envoy\xe9e avec succ\xe8s"),n&&n("Demande de retrait envoy\xe9e avec succ\xe8s !"),s()}catch(l){console.error("[WITHDRAWAL] Erreur:",l),h(l.message||"Erreur lors de l'envoi de la demande")}finally{d(!1)}},disabled:l,className:"flex-1 py-3 bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white font-semibold rounded-xl transition-all duration-200 shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed",children:l?(0,i.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,i.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-white border-t-transparent"}),(0,i.jsx)("span",{children:"Envoi..."})]}):"Confirmer le retrait"})]})]})})]})})},Ip=()=>{var e;const{id:t}=(0,We.g)(),s=(0,We.Zp)(),{user:n}=dt(),[a,o]=(0,r.useState)(null),[l,c]=(0,r.useState)(!1),[d,u]=(0,r.useState)(null),[h,m]=(0,r.useState)(!1),[p,f]=(0,r.useState)(!1),[x,g]=(0,r.useState)(0);(0,r.useEffect)(()=>{n&&t&&(async()=>{try{c(!0);const e=ku.f,r=await fetch("".concat(e,"/api/savings/plan-status?planId=").concat(t)),n=await r.json();if(!n.success)return console.error("[PLAN_EPARGNE] \u274c Erreur r\xe9cup\xe9ration plan:",n.error),void u("Plan non trouv\xe9 ou acc\xe8s refus\xe9");const a=n.plan.personalized_at&&null!==n.plan.personalized_at&&n.plan.plan_name&&""!==n.plan.plan_name.trim()&&"Plan \xc9pargne"!==n.plan.plan_name.trim()&&n.plan.goal;if(console.log("[PLAN_EPARGNE] \ud83d\udd0d V\xe9rification personnalisation:",{personalized_at:n.plan.personalized_at,plan_name:n.plan.plan_name,goal:n.plan.goal,isPersonalized:a}),!a)return console.log("[PLAN_EPARGNE] \u26a0\ufe0f Acc\xe8s bloqu\xe9 : Plan non personnalis\xe9, redirection vers personnalisation"),void s("/ab-epargne/personalize/".concat(n.plan.id),{replace:!0});o(n.plan);const i=n.plan.current_balance||0,l=n.plan.total_amount_target||n.plan.target_amount||1,d=Math.min(i/l*100,100);g(d),d>=100&&!p&&(f(!0),setTimeout(()=>f(!1),5e3))}catch(d){console.error("[PLAN_EPARGNE] \u274c Erreur:",d),u("Erreur de chargement du plan")}finally{c(!1)}})()},[n,t]);const v=e=>{let{percentage:t,size:s=200}=e;const r=(s-20)/2,n=2*Math.PI*r,a=n-t/100*n,o=()=>t>=100?"#10b981":t>=75?"#3b82f6":t>=50?"#f59e0b":"#ef4444";return(0,i.jsxs)("div",{className:"relative",style:{width:s,height:s},children:[(0,i.jsxs)("svg",{className:"transform -rotate-90",width:s,height:s,children:[(0,i.jsx)("circle",{cx:s/2,cy:s/2,r:r,stroke:"#e5e7eb",strokeWidth:"12",fill:"none"}),(0,i.jsx)("circle",{cx:s/2,cy:s/2,r:r,stroke:o(),strokeWidth:"12",fill:"none",strokeDasharray:n,strokeDashoffset:a,strokeLinecap:"round",className:"transition-all duration-1000 ease-out"})]}),(0,i.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[(0,i.jsxs)("span",{className:"text-4xl font-bold",style:{color:o()},children:[Math.round(t),"%"]}),(0,i.jsx)("span",{className:"text-xs text-gray-500 mt-1",children:"compl\xe9t\xe9"})]})]})};if(d)return(0,i.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:(0,i.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-8 max-w-md w-full text-center",children:[(0,i.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 bg-red-100 rounded-full flex items-center justify-center",children:(0,i.jsx)("svg",{className:"w-8 h-8 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,i.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Erreur"}),(0,i.jsx)("p",{className:"text-gray-600 mb-6",children:d}),(0,i.jsx)("button",{onClick:()=>s("/ab-epargne"),className:"w-full bg-blue-600 text-white py-3 rounded-xl font-semibold",children:"Retour \xe0 l'\xe9pargne"})]})});if(!a)return(0,i.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:l?(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,i.jsx)("p",{className:"text-gray-600",children:"Chargement du plan..."})]}):(0,i.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-8 max-w-md w-full text-center",children:[(0,i.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center",children:(0,i.jsx)("svg",{className:"w-8 h-8 text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),(0,i.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Plan non trouv\xe9"}),(0,i.jsx)("p",{className:"text-gray-600 mb-6",children:"Ce plan d'\xe9pargne n'existe pas ou vous n'y avez pas acc\xe8s."}),(0,i.jsx)("button",{onClick:()=>s("/ab-epargne"),className:"w-full bg-blue-600 text-white py-3 rounded-xl font-semibold",children:"Retour \xe0 l'\xe9pargne"})]})});const y=e=>e?new Date(e).toLocaleDateString("fr-FR",{day:"numeric",month:"long",year:"numeric"}):"N/A",b=()=>{if(!a)return!1;const e="active"===a.status,t=a.total_amount_target||a.target_amount||0,s=a.current_balance>=t,r=!a.is_overdue,n="withdrawal_pending"!==a.status;return e&&s&&r&&n},j=a.plan_name||"Mon Plan d'\xc9pargne",w=a.total_amount_target||a.target_amount||0,N=a.current_balance||0;return(0,i.jsxs)("div",{className:"min-h-screen bg-gray-50 sm:bg-gray-100",children:[(0,i.jsx)("div",{className:"bg-gray-100 sm:bg-white rounded-b-2xl sm:rounded-none",children:(0,i.jsxs)("div",{className:"flex items-center justify-between px-4 py-4 sm:px-6 sm:py-4",children:[(0,i.jsx)("button",{onClick:()=>s("/ab-epargne"),className:"w-10 h-10 rounded-full bg-white sm:bg-gray-50 flex items-center justify-center shadow-sm hover:bg-gray-50 transition-colors",children:(0,i.jsx)(Sp,{className:"w-5 h-5 text-gray-700"})}),(0,i.jsx)("h1",{className:"text-base sm:text-lg font-semibold text-gray-900",children:j}),(0,i.jsx)("div",{className:"w-10"})]})}),(0,i.jsxs)("div",{className:"px-4 sm:px-6 pb-6",children:[(0,i.jsxs)("div",{className:"text-center mb-6 mt-6",children:[(0,i.jsx)("p",{className:"text-sm text-gray-500 mb-1",children:"Solde actuel"}),(0,i.jsxs)("p",{className:"text-4xl sm:text-5xl font-bold text-blue-600",children:[N.toLocaleString()," F CFA"]})]}),(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-3 mb-6",children:[(0,i.jsx)(Pp,{plan:a}),(0,i.jsxs)("button",{onClick:()=>{if(b())m(!0);else if("withdrawal_pending"===a.status)Ks.info("Votre demande de retrait est en cours de traitement");else if(a.is_overdue)Ks.error("Vous ne pouvez pas effectuer de retrait car vous avez des retards de d\xe9p\xf4t");else{const e=a.total_amount_target||a.target_amount||0;a.current_balance<e?Ks.error("Vous devez atteindre votre objectif d'\xe9pargne avant de pouvoir retirer"):Ks.error("Retrait non disponible pour ce plan")}},disabled:!b(),className:"py-4 rounded-lg font-semibold text-sm shadow-md hover:shadow-lg transition-all duration-200 flex items-center justify-center ".concat(b()?"bg-orange-600 hover:bg-orange-700 text-white":"bg-gray-300 text-gray-500 cursor-not-allowed"),children:[(0,i.jsx)(kp,{className:"w-5 h-5 mr-2"}),"Retrait"]})]}),(0,i.jsxs)("div",{className:"bg-white rounded-t-3xl sm:rounded-2xl shadow-lg p-6 sm:p-8 mb-6 flex flex-col items-center",children:[(0,i.jsx)(v,{percentage:x,size:180}),x>=100&&(0,i.jsxs)("div",{className:"mt-4 flex items-center gap-2 text-green-600",children:[(0,i.jsx)(Cp,{className:"w-5 h-5"}),(0,i.jsx)("span",{className:"font-semibold",children:"Objectif atteint ! \ud83c\udf89"})]})]}),(0,i.jsxs)("div",{className:"bg-white rounded-2xl sm:rounded-2xl shadow-lg p-6 sm:p-8 mb-6",children:[(0,i.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"D\xe9tails du plan"}),(0,i.jsxs)("div",{className:"space-y-3",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[(0,i.jsx)("span",{className:"text-sm text-gray-600",children:"Montant total pr\xe9vu"}),(0,i.jsxs)("span",{className:"text-sm font-semibold text-gray-900",children:[w.toLocaleString()," F"]})]}),(0,i.jsxs)("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[(0,i.jsx)("span",{className:"text-sm text-gray-600",children:"Montant d\xe9j\xe0 \xe9pargn\xe9"}),(0,i.jsxs)("span",{className:"text-sm font-semibold text-blue-600",children:[N.toLocaleString()," F"]})]}),(0,i.jsxs)("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[(0,i.jsx)("span",{className:"text-sm text-gray-600",children:"Prochain d\xe9p\xf4t \xe0 effectuer"}),(0,i.jsxs)("span",{className:"text-sm font-semibold text-gray-900",children:[null===(e=a.fixed_amount)||void 0===e?void 0:e.toLocaleString()," F"]})]}),(0,i.jsxs)("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[(0,i.jsx)("span",{className:"text-sm text-gray-600",children:"Date du dernier d\xe9p\xf4t"}),(0,i.jsx)("span",{className:"text-sm font-medium text-gray-700",children:y(a.last_deposit_date||a.start_date)})]}),(0,i.jsxs)("div",{className:"flex justify-between items-center py-2",children:[(0,i.jsx)("span",{className:"text-sm text-gray-600",children:"Statut du plan"}),(0,i.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-semibold ".concat("active"===a.status?"bg-green-100 text-green-700":"completed"===a.status?"bg-blue-100 text-blue-700":"interrupted"===a.status?"bg-red-100 text-red-700":"bg-gray-100 text-gray-700"),children:"active"===a.status?"En cours":"completed"===a.status?"R\xe9ussi":"interrupted"===a.status?"Interrompu":a.status})]})]})]}),(0,i.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-6 sm:p-8",children:[(0,i.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"D\xe9tails du plan"}),(0,i.jsxs)("div",{className:"space-y-3 text-sm",children:[(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsx)("span",{className:"text-gray-600",children:"Fr\xe9quence"}),(0,i.jsxs)("span",{className:"font-medium",children:["Tous les ",a.frequency_days," jours"]})]}),(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsx)("span",{className:"text-gray-600",children:"Dur\xe9e totale"}),(0,i.jsxs)("span",{className:"font-medium",children:[a.duration_months," mois"]})]}),(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsx)("span",{className:"text-gray-600",children:"Taux d'int\xe9r\xeat"}),(0,i.jsxs)("span",{className:"font-medium text-green-600",children:[a.interest_rate||5,"% par mois"]})]}),(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsx)("span",{className:"text-gray-600",children:"D\xe9p\xf4ts effectu\xe9s"}),(0,i.jsxs)("span",{className:"font-medium",children:[a.completed_deposits||0," / ",a.total_deposits_required||0]})]}),(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsx)("span",{className:"text-gray-600",children:"Prochain d\xe9p\xf4t"}),(0,i.jsx)("span",{className:"font-medium text-blue-600",children:y(a.next_deposit_date)})]})]})]})]}),p&&(0,i.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center pointer-events-none",children:(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("div",{className:"text-6xl mb-4 animate-bounce",children:"\ud83c\udf89"}),(0,i.jsx)("h2",{className:"text-3xl font-bold text-blue-600 mb-2",children:"F\xe9licitations !"}),(0,i.jsx)("p",{className:"text-xl text-gray-700",children:"Objectif atteint ! \ud83c\udf8a"})]})}),h&&(0,i.jsx)(Tp,{plan:a,onClose:()=>m(!1),onSuccess:e=>{Ks.success(e),m(!1),setTimeout(()=>{window.location.reload()},1500)}})]})},Rp=(0,mt.A)("Bike",[["circle",{cx:"18.5",cy:"17.5",r:"3.5",key:"15x4ox"}],["circle",{cx:"5.5",cy:"17.5",r:"3.5",key:"1noe27"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["path",{d:"M12 17.5V14l-3-3 4-3 2 3h2",key:"1npguv"}]]),Op=(0,mt.A)("Shirt",[["path",{d:"M20.38 3.46 16 2a4 4 0 0 1-8 0L3.62 3.46a2 2 0 0 0-1.34 2.23l.58 3.47a1 1 0 0 0 .99.84H6v10c0 1.1.9 2 2 2h8a2 2 0 0 0 2-2V10h2.15a1 1 0 0 0 .99-.84l.58-3.47a2 2 0 0 0-1.34-2.23z",key:"1wgbhj"}]]),Dp=(0,mt.A)("PartyPopper",[["path",{d:"M5.8 11.3 2 22l10.7-3.79",key:"gwxi1d"}],["path",{d:"M4 3h.01",key:"1vcuye"}],["path",{d:"M22 8h.01",key:"1mrtc2"}],["path",{d:"M15 2h.01",key:"1cjtqr"}],["path",{d:"M22 20h.01",key:"1mrys2"}],["path",{d:"m22 2-2.24.75a2.9 2.9 0 0 0-1.96 3.12v0c.1.86-.57 1.63-1.45 1.63h-.38c-.86 0-1.6.6-1.76 1.44L14 10",key:"bpx1uq"}],["path",{d:"m22 13-.82-.33c-.86-.34-1.82.2-1.98 1.11v0c-.11.7-.72 1.22-1.43 1.22H17",key:"1pd0s7"}],["path",{d:"m11 2 .33.82c.34.86-.2 1.82-1.11 1.98v0C9.52 4.9 9 5.52 9 6.23V7",key:"zq5xbz"}],["path",{d:"M11 13c1.93 1.93 2.83 4.17 2 5-.83.83-3.07-.07-5-2-1.93-1.93-2.83-4.17-2-5 .83-.83 3.07.07 5 2Z",key:"4kbmks"}]]),Lp=(0,mt.A)("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]),zp=(0,mt.A)("UtensilsCrossed",[["path",{d:"m16 2-2.3 2.3a3 3 0 0 0 0 4.2l1.8 1.8a3 3 0 0 0 4.2 0L22 8",key:"n7qcjb"}],["path",{d:"M15 15 3.3 3.3a4.2 4.2 0 0 0 0 6l7.3 7.3c.7.7 2 .7 2.8 0L15 15Zm0 0 7 7",key:"d0u48b"}],["path",{d:"m2.1 21.8 6.4-6.3",key:"yn04lh"}],["path",{d:"m19 5-7 7",key:"194lzd"}]]),Mp=(0,mt.A)("Laptop",[["path",{d:"M20 16V7a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v9m16 0H4m16 0 1.28 2.55a1 1 0 0 1-.9 1.45H3.62a1 1 0 0 1-.9-1.45L4 16",key:"tarvll"}]]),Fp=(0,mt.A)("Plane",[["path",{d:"M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2z",key:"1v9wt8"}]]),Up=(0,mt.A)("Gift",[["polyline",{points:"20 12 20 22 4 22 4 12",key:"nda8fc"}],["rect",{width:"20",height:"5",x:"2",y:"7",key:"wkgdzj"}],["line",{x1:"12",x2:"12",y1:"22",y2:"7",key:"1n8zgp"}],["path",{d:"M12 7H7.5a2.5 2.5 0 0 1 0-5C11 2 12 7 12 7z",key:"zighg4"}],["path",{d:"M12 7h4.5a2.5 2.5 0 0 0 0-5C13 2 12 7 12 7z",key:"1pa5tk"}]]),Bp=[{id:"graduation",label:"Pr\xe9paration / Soutenance",icon:Ph,emoji:"\ud83c\udf93",color:"from-blue-500 to-indigo-600"},{id:"rent",label:"Loyer ou h\xe9bergement",icon:Uu,emoji:"\ud83c\udfe0",color:"from-green-500 to-emerald-600"},{id:"motorcycle",label:"Achat de moto",icon:Rp,emoji:"\ud83d\udeb4",color:"from-orange-500 to-red-600"},{id:"phone",label:"Achat de t\xe9l\xe9phone",icon:lh,emoji:"\ud83d\udcf1",color:"from-purple-500 to-pink-600"},{id:"clothes",label:"Achat de v\xeatements / Accessoires",icon:Op,emoji:"\ud83d\udc55",color:"from-pink-500 to-rose-600"},{id:"party",label:"Achat de ticket de f\xeate ou \xe9v\xe9nement",icon:Dp,emoji:"\ud83c\udf89",color:"from-yellow-500 to-orange-600"},{id:"project",label:"Projet personnel",icon:Lp,emoji:"\ud83d\udcbc",color:"from-indigo-500 to-blue-600"},{id:"nutrition",label:"Nutrition / Cantine",icon:zp,emoji:"\ud83c\udf7d\ufe0f",color:"from-red-500 to-pink-600"},{id:"laptop",label:"Achat d'ordinateur / Mat\xe9riel scolaire",icon:Mp,emoji:"\ud83d\udcbb",color:"from-gray-600 to-gray-800"},{id:"travel",label:"Voyage ou sortie",icon:Fp,emoji:"\u2708\ufe0f",color:"from-cyan-500 to-blue-600"},{id:"gift",label:"Cadeau ou surprise",icon:Up,emoji:"\ud83c\udf81",color:"from-purple-500 to-indigo-600"},{id:"custom",label:"Autre (personnalis\xe9)",icon:dp,emoji:"\ud83d\udcb0",color:"from-blue-500 to-purple-600"}],Vp=()=>{const e=(0,We.Zp)(),{planId:t}=(0,We.g)(),{user:s}=dt(),[n,a]=(0,r.useState)(null),[o,l]=(0,r.useState)(""),[c,d]=(0,r.useState)(""),[u,h]=(0,r.useState)(!1),[m,p]=(0,r.useState)(null);(0,r.useEffect)(()=>{(async()=>{if(t&&s)try{const s=ku.f,r=await fetch("".concat(s,"/api/savings/plan-status?planId=").concat(t)),n=await r.json();if(n.success&&n.plan){const s=n.plan.personalized_at&&null!==n.plan.personalized_at&&n.plan.plan_name&&""!==n.plan.plan_name.trim()&&"Plan \xc9pargne"!==n.plan.plan_name.trim()&&n.plan.goal;if(console.log("[PERSONALIZE_PLAN] \ud83d\udd0d V\xe9rification personnalisation:",{personalized_at:n.plan.personalized_at,plan_name:n.plan.plan_name,goal:n.plan.goal,isPersonalized:s}),s)return console.log("[PERSONALIZE_PLAN] \u26a0\ufe0f Plan d\xe9j\xe0 personnalis\xe9, redirection vers dashboard"),void e("/ab-epargne/plan/".concat(t),{replace:!0});if(p(n.plan),n.plan.plan_name&&"Plan \xc9pargne"!==n.plan.plan_name.trim()){d(n.plan.plan_name);const e=Bp.find(e=>n.plan.plan_name.includes(e.label)||n.plan.goal===e.id);e&&a(e.id)}}else console.error("[PERSONALIZE_PLAN] Plan non trouv\xe9"),Ks.error("Plan non trouv\xe9"),e("/ab-epargne",{replace:!0})}catch(r){console.error("[PERSONALIZE_PLAN] Erreur:",r),Ks.error("Erreur de chargement du plan"),e("/ab-epargne",{replace:!0})}})()},[t,s,e]);return(0,i.jsxs)("div",{className:"min-h-screen bg-gray-50 sm:bg-gray-100",children:[(0,i.jsx)("div",{className:"bg-gray-100 sm:bg-white rounded-b-2xl sm:rounded-none mb-4 sm:mb-6",children:(0,i.jsxs)("div",{className:"flex items-center justify-between px-4 py-4 sm:px-6 sm:py-4",children:[(0,i.jsx)("button",{onClick:()=>e(-1),className:"w-10 h-10 rounded-full bg-white sm:bg-gray-50 flex items-center justify-center shadow-sm hover:bg-gray-50 transition-colors",children:(0,i.jsx)(Sp,{className:"w-5 h-5 text-gray-700"})}),(0,i.jsx)("h1",{className:"text-base sm:text-lg font-semibold text-gray-900",children:"Personnalisez votre plan"}),(0,i.jsx)("div",{className:"w-10"})]})}),(0,i.jsxs)("div",{className:"bg-white rounded-t-3xl sm:rounded-2xl shadow-lg sm:shadow-xl p-6 sm:p-8 mx-auto max-w-md sm:max-w-lg",children:[(0,i.jsxs)("div",{className:"text-center mb-8",children:[(0,i.jsx)("div",{className:"w-16 h-16 bg-gradient-to-r from-blue-600 to-indigo-600 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,i.jsx)(Qs,{className:"w-8 h-8 text-white"})}),(0,i.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Choisissez votre objectif"}),(0,i.jsx)("p",{className:"text-gray-600 text-sm",children:"Donnez un nom \xe0 votre plan d'\xe9pargne"})]}),(0,i.jsxs)("div",{className:"mb-6",children:[(0,i.jsxs)("label",{className:"block text-sm font-medium text-gray-900 mb-3",children:["Objectif d'\xe9pargne ",(0,i.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,i.jsx)("div",{className:"grid grid-cols-2 gap-3",children:Bp.map(e=>{const t=e.icon,s=n===e.id;return(0,i.jsxs)("button",{onClick:()=>(e=>{a(e);const t=Bp.find(t=>t.id===e);if(t&&"custom"!==e){const e="graduation"===t.id?"Ma Soutenance ".concat((new Date).getFullYear()):"motorcycle"===t.id?"Ma Moto":"rent"===t.id?"Mon Loyer":"phone"===t.id?"Mon T\xe9l\xe9phone":"laptop"===t.id?"Mon Ordinateur":"Mon ".concat(t.label.replace("Achat de ","").replace(" ou ","/").split(" ")[0]);d(e)}else"custom"===e&&d("")})(e.id),className:"p-4 rounded-xl border-2 transition-all text-left ".concat(s?"border-blue-600 bg-blue-50 shadow-md":"border-gray-200 bg-white hover:border-blue-300 hover:bg-gray-50"),children:[(0,i.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,i.jsx)("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-r ".concat(e.color," flex items-center justify-center text-white text-lg"),children:e.emoji}),"custom"!==e.id&&(0,i.jsx)(t,{className:"w-4 h-4 ".concat(s?"text-blue-600":"text-gray-400")})]}),(0,i.jsx)("p",{className:"text-xs font-medium ".concat(s?"text-blue-900":"text-gray-700"),children:e.label})]},e.id)})})]}),"custom"===n&&(0,i.jsxs)("div",{className:"mb-6",children:[(0,i.jsxs)("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:["Votre objectif personnalis\xe9 ",(0,i.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,i.jsx)("input",{type:"text",value:o,onChange:e=>l(e.target.value),placeholder:"Ex: \xc9pargner pour un \xe9v\xe9nement sp\xe9cial...",className:"w-full px-4 py-3 border border-blue-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none bg-gray-50"})]}),(0,i.jsxs)("div",{className:"mb-6",children:[(0,i.jsxs)("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:["Nom de votre plan ",(0,i.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,i.jsx)("input",{type:"text",value:c,onChange:e=>d(e.target.value),placeholder:"Ex: Ma Moto, Ma Soutenance 2025...",className:"w-full px-4 py-3 border border-blue-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none bg-gray-50"}),(0,i.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Ce nom s'affichera sur votre tableau de bord"})]}),(0,i.jsx)("button",{onClick:async()=>{if(n)if("custom"!==n||o.trim())if(c.trim())try{var s;h(!0);const a="custom"===n?o:null===(s=Bp.find(e=>e.id===n))||void 0===s?void 0:s.label,i="custom"===n?"custom":n;console.log("[PERSONALIZE_PLAN] \ud83d\udcdd Envoi de la personnalisation au backend...",{planId:t,planName:c.trim(),goal:i,goalLabel:a});const l=ku.f,d=new AbortController,u=setTimeout(()=>d.abort(),3e4);try{const s=await fetch("".concat(l,"/api/savings/personalize-plan"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({planId:t,planName:c.trim(),goal:i,goalLabel:a}),signal:d.signal});clearTimeout(u);const r=await s.json();if(!s.ok||!r.success)return console.error("[PERSONALIZE_PLAN] \u274c Erreur API:",r),void Ks.error(r.error||"Erreur lors de la sauvegarde");console.log("[PERSONALIZE_PLAN] \u2705 Plan personnalis\xe9 avec succ\xe8s:",r.plan),Ks.success("Plan personnalis\xe9 avec succ\xe8s ! \ud83c\udf89"),setTimeout(()=>{e("/ab-epargne/plan/".concat(t),{replace:!0})},500)}catch(r){clearTimeout(u),"AbortError"===r.name?(console.error("[PERSONALIZE_PLAN] \u274c Timeout: La requ\xeate a pris trop de temps"),Ks.error("La requ\xeate a pris trop de temps. Veuillez v\xe9rifier votre connexion et r\xe9essayer.")):r instanceof TypeError&&r.message.includes("fetch")?(console.error("[PERSONALIZE_PLAN] \u274c Erreur r\xe9seau:",r),Ks.error("Erreur de connexion au serveur. V\xe9rifiez votre connexion internet.")):(console.error("[PERSONALIZE_PLAN] \u274c Erreur:",r),Ks.error("Erreur lors de la personnalisation. Veuillez r\xe9essayer."))}}catch(a){console.error("[PERSONALIZE_PLAN] \u274c Erreur inattendue:",a),Ks.error("Une erreur inattendue est survenue. Veuillez r\xe9essayer.")}finally{h(!1)}else Ks.error("Veuillez donner un nom \xe0 votre plan");else Ks.error("Veuillez saisir votre objectif personnalis\xe9");else Ks.error("Veuillez s\xe9lectionner un objectif")},disabled:u||!n||!c.trim(),className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed text-white py-4 rounded-lg font-semibold text-base shadow-md hover:shadow-lg transition-all duration-200 mb-6",children:u?"Enregistrement...":"Continuer"}),(0,i.jsx)("div",{className:"text-center pt-4 border-t border-gray-200",children:(0,i.jsx)("p",{className:"text-xs text-gray-500",children:"Personnalisez votre exp\xe9rience d'\xe9pargne"})})]})]})},qp=()=>{const e=(0,We.zy)(),t=(0,We.Zp)(),[s,n]=(0,r.useState)("loading"),[a,o]=(0,r.useState)("V\xe9rification du d\xe9p\xf4t..."),[l,c]=(0,r.useState)(null);(0,r.useEffect)(()=>{const s=new URLSearchParams(e.search),r=s.get("id")||s.get("reference")||s.get("txId"),a=s.get("status");if(console.log("[DEPOT_RETOUR] Param\xe8tres URL:",{transactionId:r,status:a,allParams:Object.fromEntries(s.entries())}),!r)return n("success"),o("D\xe9p\xf4t confirm\xe9 ! Le solde sera mis \xe0 jour sous peu."),void setTimeout(()=>{t("/ab-epargne")},3e3);"approved"===a||"transferred"===a?d(r):(n("error"),o("D\xe9p\xf4t non approuv\xe9"))},[e.search]);const d=async e=>{try{o("V\xe9rification du d\xe9p\xf4t...");const s="https://ab-pret-back.onrender.com";let r=0;const a=10,i=async()=>{r++,console.log("[DEPOT_RETOUR] Tentative ".concat(r,"/").concat(a," pour r\xe9f\xe9rence: ").concat(e));try{const l=await fetch("".concat(s,"/api/savings/deposit-status?reference=").concat(e)),d=await l.json();if(d.success&&d.plan)return n("success"),o("D\xe9p\xf4t confirm\xe9, solde mis \xe0 jour !"),c(d.plan),void setTimeout(()=>{t("/ab-epargne/plan/".concat(d.plan.id))},3e3);if(r<a)return o("V\xe9rification du d\xe9p\xf4t... (".concat(r,"/").concat(a,")")),void setTimeout(i,2e3);n("success"),o("D\xe9p\xf4t confirm\xe9 ! Le solde sera mis \xe0 jour sous peu."),setTimeout(()=>{t("/ab-epargne")},3e3)}catch(l){console.error("[DEPOT_RETOUR] \u274c Erreur tentative ".concat(r,":"),l),r<a?setTimeout(i,2e3):(n("error"),o("Erreur de connexion"))}};i()}catch(s){console.error("[DEPOT_RETOUR] \u274c Erreur:",s),n("error"),o("Erreur de connexion")}};return(0,i.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-green-50 to-emerald-100 flex items-center justify-center p-4",children:(0,i.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8 max-w-md w-full text-center",children:["loading"===s&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 bg-blue-100 rounded-full flex items-center justify-center",children:(0,i.jsx)("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"})}),(0,i.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"V\xe9rification en cours"}),(0,i.jsx)("p",{className:"text-gray-600",children:a})]}),"success"===s&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 bg-green-100 rounded-full flex items-center justify-center",children:(0,i.jsx)(ht.A,{className:"w-8 h-8 text-green-600"})}),(0,i.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"D\xe9p\xf4t confirm\xe9 !"}),(0,i.jsx)("p",{className:"text-gray-600 mb-6",children:a}),l&&(0,i.jsxs)("div",{className:"bg-gray-50 rounded-xl p-4 mb-6",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,i.jsx)("span",{className:"text-gray-600",children:"Nouveau solde"}),(0,i.jsxs)("span",{className:"font-bold text-green-600",children:[(l.current_balance||0).toLocaleString()," F"]})]}),(0,i.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,i.jsx)("span",{className:"text-gray-600",children:"Total d\xe9pos\xe9"}),(0,i.jsxs)("span",{className:"font-bold text-gray-900",children:[(l.total_deposited||0).toLocaleString()," F"]})]}),(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsx)("span",{className:"text-gray-600",children:"Progression"}),(0,i.jsxs)("span",{className:"font-bold text-blue-600",children:[l.completion_percentage||0,"%"]})]})]}),(0,i.jsxs)("div",{className:"space-y-3",children:[(0,i.jsx)("button",{onClick:()=>{t(l?"/ab-epargne/plan/".concat(l.id):"/ab-epargne")},className:"w-full bg-gradient-to-r from-blue-500 to-blue-600 text-white py-3 rounded-xl font-semibold",children:"Voir mon plan"}),(0,i.jsx)("p",{className:"text-sm text-gray-500",children:"Redirection automatique dans 3 secondes..."})]})]}),"error"===s&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 bg-red-100 rounded-full flex items-center justify-center",children:(0,i.jsx)("svg",{className:"w-8 h-8 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,i.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Erreur"}),(0,i.jsx)("p",{className:"text-gray-600 mb-6",children:a}),(0,i.jsx)("button",{onClick:()=>t("/ab-epargne"),className:"w-full bg-blue-600 text-white py-3 rounded-xl font-semibold",children:"Retour \xe0 l'\xe9pargne"})]})]})})},Hp=()=>{const e=(0,We.Zp)(),t=(0,We.zy)(),{user:s}=dt(),[n,a]=(0,r.useState)("loading"),[o,l]=(0,r.useState)("V\xe9rification du remboursement...");(0,r.useEffect)(()=>{const s=new URLSearchParams(t.search),r=s.get("id")||s.get("reference")||s.get("txId"),n=s.get("status");if(console.log("[REMBOURSEMENT_RETOUR] Param\xe8tres URL:",{transactionId:r,status:n,allParams:Object.fromEntries(s.entries())}),!r)return a("success"),l("Remboursement confirm\xe9 ! Votre pr\xeat sera mis \xe0 jour sous peu."),void setTimeout(()=>{e("/dashboard")},3e3);"approved"===n||"transferred"===n?c(r):(a("error"),l("Remboursement non approuv\xe9"))},[t.search,e,s]);const c=async t=>{try{l("V\xe9rification du remboursement...");let s=0;const r=10,n=async()=>{s++,console.log("[REMBOURSEMENT_RETOUR] Tentative ".concat(s,"/").concat(r," pour transaction ID: ").concat(t));try{const i=await fetch("".concat("https://ab-pret-back.onrender.com","/api/loans/repayment-status?id=").concat(t)),o=await i.json();if(o.success&&o.loan)return a("success"),l("Remboursement confirm\xe9, pr\xeat mis \xe0 jour !"),void setTimeout(()=>{e("/dashboard")},3e3);if(s<r)return l("V\xe9rification du remboursement... (".concat(s,"/").concat(r,")")),void setTimeout(n,2e3);a("success"),l("Remboursement confirm\xe9 ! Votre pr\xeat sera mis \xe0 jour sous peu."),setTimeout(()=>{e("/dashboard")},3e3)}catch(i){console.error("[REMBOURSEMENT_RETOUR] \u274c Erreur tentative ".concat(s,":"),i),s<r?setTimeout(n,2e3):(a("error"),l("Erreur de connexion"))}};n()}catch(s){console.error("[REMBOURSEMENT_RETOUR] \u274c Erreur:",s),a("error"),l("Erreur de connexion")}};return(0,i.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:(0,i.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8 max-w-md w-full text-center",children:[(0,i.jsxs)("div",{className:"mb-6",children:["loading"===n&&(0,i.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 bg-blue-100 rounded-full flex items-center justify-center",children:(0,i.jsxs)("svg",{className:"w-8 h-8 text-blue-600 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[(0,i.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,i.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}),"success"===n&&(0,i.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 bg-green-100 rounded-full flex items-center justify-center",children:(0,i.jsx)("svg",{className:"w-8 h-8 text-green-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),"error"===n&&(0,i.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 bg-red-100 rounded-full flex items-center justify-center",children:(0,i.jsx)("svg",{className:"w-8 h-8 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,i.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"success"===n?"Remboursement effectu\xe9 !":"error"===n?"Erreur":"V\xe9rification..."}),(0,i.jsx)("p",{className:"text-gray-600 mb-4",children:o})]}),(0,i.jsx)("button",{onClick:()=>{e("/dashboard")},className:"bg-blue-600 text-white py-3 px-6 rounded-lg font-medium hover:bg-blue-700 transition-colors",children:"Retour au tableau de bord"})]})})},Wp=()=>{const{id:e}=(0,We.g)();return(0,i.jsx)("div",{className:"min-h-screen bg-gray-50 p-8",children:(0,i.jsxs)("div",{className:"max-w-2xl mx-auto",children:[(0,i.jsxs)("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:["Test Plan \xc9pargne - ID: ",e]}),(0,i.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[(0,i.jsx)("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Plan d'\xe9pargne cr\xe9\xe9 avec succ\xe8s !"}),(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsx)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:(0,i.jsxs)("p",{className:"text-green-800",children:["\u2705 Le plan d'\xe9pargne a \xe9t\xe9 cr\xe9\xe9 avec l'ID: ",(0,i.jsx)("strong",{children:e})]})}),(0,i.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,i.jsx)("p",{className:"text-blue-800",children:"\ud83c\udf89 La redirection fonctionne correctement !"})}),(0,i.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:(0,i.jsxs)("p",{className:"text-yellow-800",children:["\ud83d\udcdd Cette page de test confirme que le flux complet fonctionne :",(0,i.jsx)("br",{}),"1. Paiement FedaPay \u2705",(0,i.jsx)("br",{}),"2. Redirection vers RetourEpargne \u2705",(0,i.jsx)("br",{}),"3. Polling du backend \u2705",(0,i.jsx)("br",{}),"4. Redirection vers PlanEpargne \u2705"]})})]})]})]})})},Gp=()=>{const e=(0,We.Zp)();return(0,i.jsx)("div",{className:"bg-gradient-to-br from-purple-50 via-violet-50 to-indigo-50 min-h-screen",children:(0,i.jsxs)("div",{className:"relative overflow-hidden",children:[(0,i.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-500 via-violet-600 to-indigo-600 opacity-10"}),(0,i.jsx)("div",{className:"relative px-4 lg:px-8 py-6",children:(0,i.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,i.jsxs)(gu.button,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5},onClick:()=>e("/menu"),className:"inline-flex items-center space-x-2 px-4 py-2 bg-white/80 backdrop-blur-sm rounded-full border border-white/50 shadow-lg hover:bg-white/90 transition-all duration-300 mb-8",children:[(0,i.jsx)(Rh.A,{size:16,className:"text-purple-600"}),(0,i.jsx)("span",{className:"text-sm font-medium text-purple-700",children:"Retour au menu"})]}),(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)(gu.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.8,delay:.2},className:"mb-8",children:(0,i.jsx)("div",{className:"inline-flex p-8 bg-gradient-to-r from-purple-500 to-violet-600 rounded-full text-white shadow-2xl",children:(0,i.jsx)(Dm.A,{size:80})})}),(0,i.jsxs)(gu.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.3},className:"text-4xl lg:text-6xl font-bold text-gray-900 mb-6",children:["Coaching et"," ",(0,i.jsx)("span",{className:"bg-gradient-to-r from-purple-600 via-violet-600 to-indigo-600 bg-clip-text text-transparent",children:"Finance Entrepreneuriale"})]}),(0,i.jsx)(gu.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.4},className:"mb-8",children:(0,i.jsxs)("div",{className:"inline-flex items-center space-x-3 px-6 py-3 bg-yellow-100 border border-yellow-300 rounded-full",children:[(0,i.jsx)(wu,{size:20,className:"text-yellow-600"}),(0,i.jsx)("span",{className:"text-lg font-semibold text-yellow-800",children:"Bient\xf4t disponible"})]})}),(0,i.jsxs)(gu.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.5},className:"text-xl lg:text-2xl text-gray-600 mb-12 font-light max-w-2xl mx-auto",children:["Nos services de coaching et de finance entrepreneuriale sont en cours de d\xe9veloppement.",(0,i.jsx)("br",{}),(0,i.jsx)("span",{className:"text-purple-600 font-medium",children:"Revenez bient\xf4t !"})]}),(0,i.jsx)(gu.button,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.6},onClick:()=>e("/menu"),className:"bg-gradient-to-r from-purple-500 to-violet-600 text-white px-8 py-4 rounded-2xl shadow-xl hover:shadow-2xl transition-all duration-300 hover:scale-105",children:"Retour au menu principal"})]})]})})]})})},Kp=(0,mt.A)("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]),Zp=(0,mt.A)("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]),Qp=(0,mt.A)("Diamond",[["path",{d:"M2.7 10.3a2.41 2.41 0 0 0 0 3.41l7.59 7.59a2.41 2.41 0 0 0 3.41 0l7.59-7.59a2.41 2.41 0 0 0 0-3.41l-7.59-7.59a2.41 2.41 0 0 0-3.41 0Z",key:"1f1r0c"}]]),Jp=(0,mt.A)("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]),Yp=(0,mt.A)("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]),$p=()=>{const e=(0,We.Zp)(),{user:t}=dt(),{showSuccess:s,showError:n}=yt(),[a,o]=(0,r.useState)("overview"),[l,c]=(0,r.useState)(!1),[d,u]=(0,r.useState)(!0),[h,m]=(0,r.useState)({currentScore:0,maxScore:5,level:"Bronze",nextLevel:"Silver",pointsToNextLevel:1,completedLoans:0,loansForNextBonus:1,totalSavings:0,phoneCreditEarned:0,nextReward:"Premier bonus apr\xe8s 1 remboursement",history:[]}),p=[{name:"Bronze",minScore:0,maxScore:1,color:"from-amber-600 to-amber-800",icon:uh},{name:"Silver",minScore:2,maxScore:2,color:"from-gray-400 to-gray-600",icon:Im},{name:"Gold",minScore:3,maxScore:3,color:"from-yellow-400 to-yellow-600",icon:Kp},{name:"Platinum",minScore:4,maxScore:4,color:"from-blue-400 to-blue-600",icon:Zp},{name:"Diamond",minScore:5,maxScore:5,color:"from-purple-400 to-purple-600",icon:Qp}],f=p.find(e=>h.currentScore>=e.minScore&&h.currentScore<=e.maxScore),x=e=>{const t=p.find(t=>e>=t.minScore&&e<=t.maxScore);return t?t.color:"from-gray-400 to-gray-600"},g=(0,r.useCallback)(async()=>{if(null!==t&&void 0!==t&&t.id)try{u(!0);const[r,n]=await Promise.all([(0,lt.Or)(t.id),(0,lt.k5)(t.id)]);if(r.success&&n.success){var e,s;const t=r.data||[],a=n.data||[],i=new Map(t.map(e=>[e.id,e])),o=a.filter(e=>"completed"===(e.status||"").toLowerCase()),l=new Set,c=new Map;o.forEach(e=>{const t=i.get(e.loan_id);if(!t)return;const s=t.approved_at?new Date(t.approved_at):null;if(!s)return;const r=parseInt(t.duration_months||t.duration||30,10),n=new Date(s.getTime()+24*r*60*60*1e3),a=new Date(e.payment_date||e.created_at||new Date);if(a.getTime()<=n.getTime()){l.add(e.loan_id);const t=c.get(e.loan_id);(!t||a.getTime()<t.paymentDate.getTime())&&c.set(e.loan_id,{id:e.id,paymentDate:a})}});const d=Math.max(0,Math.min(5,l.size)),u=Array.from(c.entries()).map(e=>{let[t,s]=e;return{id:s.id,date:s.paymentDate.toISOString(),points:1,action:"Remboursement \xe0 temps du pr\xeat #".concat(t)}}),h=t.filter(e=>{const t=(e.status||"").toLowerCase();return"completed"===t||"rembours\xe9"===t}).length,f=p.find(e=>e.minScore>d)||p[p.length-1],x=Math.max(0,(null!==(e=f.minScore)&&void 0!==e?e:d)-d),g=d>=5?"Score maximum atteint":"1 remboursement \xe0 temps = +1 point";m({currentScore:d,maxScore:5,level:(null===(s=p.find(e=>d>=e.minScore&&d<=e.maxScore))||void 0===s?void 0:s.name)||"Bronze",nextLevel:f.name,pointsToNextLevel:x,completedLoans:h,loansForNextBonus:Math.max(0,1),totalSavings:0,phoneCreditEarned:0,nextReward:g,history:u})}}catch(r){console.error("[LOYALTY] Erreur lors du calcul du score:",r),n("Erreur lors du chargement du score de fid\xe9lit\xe9")}finally{u(!1)}else u(!1)},[null===t||void 0===t?void 0:t.id,n]);(0,r.useEffect)(()=>{g()},[g]);const v=[{title:"R\xe9duction de 2% sur les frais",description:"\xc9conomisez sur tous vos pr\xeats futurs",icon:Jp,color:"text-green-600",bgColor:"bg-green-100"},{title:"Forfait d'internet",description:"Recevez un forfait internet sur le num\xe9ro de votre choix",icon:ph,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Traitement prioritaire",description:"Vos demandes sont trait\xe9es en priorit\xe9",icon:ch,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Taux d'int\xe9r\xeat pr\xe9f\xe9rentiels",description:"B\xe9n\xe9ficiez de taux r\xe9duits sur vos pr\xeats",icon:Dm.A,color:"text-orange-600",bgColor:"bg-orange-100"}],y=[{step:1,title:"Remboursez un pr\xeat",description:"Remboursez votre pr\xeat dans les d\xe9lais impartis",icon:tp.A,color:"from-blue-500 to-blue-600"},{step:2,title:"Gagnez 1 point",description:"Votre score de fid\xe9lit\xe9 augmente de 1 point",icon:ht.A,color:"from-green-500 to-green-600"},{step:3,title:"Progressez vers le niveau sup\xe9rieur",description:"Atteignez le niveau suivant avec plus de remboursements",icon:Dm.A,color:"from-purple-500 to-purple-600"},{step:4,title:"D\xe9bloquez les avantages",description:"Profitez de r\xe9ductions et de forfaits gratuits",icon:Up,color:"from-orange-500 to-orange-600"}];return(0,i.jsxs)("div",{className:"bg-gradient-to-br from-gray-50 to-blue-50",children:[(0,i.jsx)("div",{className:"bg-white shadow-sm border-b border-gray-200",children:(0,i.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,i.jsxs)("div",{className:"flex items-center justify-between h-16",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,i.jsx)(Sh,{variant:"ghost",onClick:()=>e("/dashboard"),className:"p-2 hover:bg-gray-100 rounded-lg",children:(0,i.jsx)(Rh.A,{size:20})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h1",{className:"text-xl font-bold text-gray-900 font-montserrat",children:"Score de Fid\xe9lit\xe9"}),(0,i.jsx)("p",{className:"text-sm text-gray-600 font-montserrat",children:"Programme de r\xe9compenses et avantages"})]})]}),(0,i.jsx)(Sh,{variant:"ghost",onClick:()=>c(!0),className:"p-2 hover:bg-gray-100 rounded-lg",children:(0,i.jsx)(ft,{size:20})})]})})}),(0,i.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,i.jsx)(gu.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"mb-8",children:d?(0,i.jsx)(ip,{className:"bg-gradient-to-br from-white to-gray-50 border-0 shadow-xl",children:(0,i.jsxs)("div",{className:"p-8 text-center",children:[(0,i.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,i.jsx)("p",{className:"text-gray-600",children:"Chargement du score de fid\xe9lit\xe9..."})]})}):(0,i.jsx)(ip,{className:"bg-gradient-to-br from-white to-gray-50 border-0 shadow-xl",children:(0,i.jsxs)("div",{className:"p-8 text-center",children:[(0,i.jsx)("div",{className:"flex justify-center mb-6",children:(0,i.jsx)("div",{className:"p-6 rounded-full bg-gradient-to-br ".concat(x(h.currentScore)),children:r.createElement((e=>{const t=p.find(t=>e>=t.minScore&&e<=t.maxScore);return t?t.icon:uh})(h.currentScore),{size:48,className:"text-white"})})}),(0,i.jsxs)("h2",{className:"text-4xl font-bold text-gray-900 font-montserrat mb-2",children:[h.currentScore,"/5"]}),(0,i.jsxs)("p",{className:"text-xl font-semibold text-gray-700 font-montserrat mb-4",children:["Niveau ",null===f||void 0===f?void 0:f.name]}),(0,i.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4 mb-6 max-w-md mx-auto",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,i.jsx)(ft,{size:16,className:"text-blue-600"}),(0,i.jsx)("p",{className:"text-sm font-medium text-blue-800",children:"Syst\xe8me mis \xe0 jour"})]}),(0,i.jsx)("p",{className:"text-xs text-blue-700",children:"Le syst\xe8me de score de fid\xe9lit\xe9 a \xe9t\xe9 mis \xe0 jour. Tous les comptes commencent maintenant \xe0 0/5 points. Votre progression se fera \xe0 partir de vos prochains remboursements."})]}),(0,i.jsxs)("div",{className:"w-full max-w-md mx-auto mb-6",children:[(0,i.jsxs)("div",{className:"flex justify-between text-sm text-gray-600 mb-2",children:[(0,i.jsxs)("span",{children:["Progression vers ",h.nextLevel]}),(0,i.jsxs)("span",{children:[h.pointsToNextLevel," point",h.pointsToNextLevel>1?"s":""," restant",h.pointsToNextLevel>1?"s":""]})]}),(0,i.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-3",children:(0,i.jsx)(gu.div,{className:"h-3 rounded-full bg-gradient-to-r ".concat(x(h.currentScore)),initial:{width:0},animate:{width:"".concat(h.currentScore/h.maxScore*100,"%")},transition:{duration:1,delay:.5}})}),(0,i.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[Math.round(h.currentScore/h.maxScore*100),"% du score maximum atteint"]})]}),(0,i.jsxs)("div",{className:"grid grid-cols-3 gap-4 max-w-md mx-auto",children:[(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:h.completedLoans}),(0,i.jsx)("p",{className:"text-sm text-gray-600",children:"Pr\xeats termin\xe9s"})]}),(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("p",{className:"text-2xl font-bold text-green-600",children:h.loansForNextBonus}),(0,i.jsx)("p",{className:"text-sm text-gray-600",children:"Pour le bonus"})]}),(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:(0,Tu.vv)(h.totalSavings)}),(0,i.jsx)("p",{className:"text-sm text-gray-600",children:"\xc9conomies"})]})]})]})})}),(0,i.jsx)(gu.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:"mb-8",children:(0,i.jsx)("div",{className:"flex space-x-1 bg-white rounded-xl p-1 shadow-sm",children:[{id:"overview",label:"Vue d'ensemble",icon:tp.A},{id:"benefits",label:"Avantages",icon:Up},{id:"how-it-works",label:"Comment \xe7a marche",icon:lp},{id:"history",label:"Historique",icon:wu}].map(e=>(0,i.jsxs)("button",{onClick:()=>o(e.id),className:"flex-1 flex items-center justify-center space-x-2 py-3 px-4 rounded-lg font-medium transition-all duration-200 ".concat(a===e.id?"bg-primary-500 text-white shadow-sm":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"),children:[r.createElement(e.icon,{size:16}),(0,i.jsx)("span",{className:"font-montserrat",children:e.label})]},e.id))})}),(0,i.jsxs)(ah,{mode:"wait",children:["overview"===a&&(0,i.jsxs)(gu.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},className:"space-y-4",children:[(0,i.jsx)(ip,{className:"bg-gradient-to-br from-blue-500 to-blue-600 text-white",children:(0,i.jsxs)("div",{className:"p-6",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{className:"text-xl font-bold font-montserrat mb-2",children:"Prochain objectif"}),(0,i.jsx)("p",{className:"text-blue-100",children:"Terminez votre 4\xe8me pr\xeat pour d\xe9bloquer le bonus"})]}),(0,i.jsx)("div",{className:"p-3 bg-white/20 rounded-full",children:(0,i.jsx)(tp.A,{size:24})})]}),(0,i.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,i.jsxs)("div",{className:"flex-1",children:[(0,i.jsxs)("div",{className:"flex justify-between text-sm mb-2",children:[(0,i.jsx)("span",{children:"Progression"}),(0,i.jsxs)("span",{children:[h.completedLoans,"/4 pr\xeats"]})]}),(0,i.jsx)("div",{className:"w-full bg-white/20 rounded-full h-2",children:(0,i.jsx)("div",{className:"bg-white h-2 rounded-full transition-all duration-500",style:{width:"".concat(h.completedLoans/4*100,"%")}})})]}),(0,i.jsx)(Sh,{variant:"white",onClick:()=>e("/loan-request"),className:"whitespace-nowrap",children:"Demander un pr\xeat"})]})]})}),(0,i.jsx)("div",{className:"grid grid-cols-1 gap-6",children:(0,i.jsx)(ip,{className:"bg-gradient-to-br from-purple-500 to-purple-600 text-white",children:(0,i.jsxs)("div",{className:"p-6",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{className:"text-lg font-bold font-montserrat mb-1",children:"Forfait internet"}),(0,i.jsx)("p",{className:"text-purple-100 text-sm",children:"Prochaine r\xe9compense"})]}),(0,i.jsx)("div",{className:"p-2 bg-white/20 rounded-full",children:(0,i.jsx)(ph,{size:20})})]}),(0,i.jsx)("p",{className:"text-lg font-semibold",children:h.nextReward})]})})})]},"overview"),"benefits"===a&&(0,i.jsx)(gu.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},children:(0,i.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:v.map((e,t)=>(0,i.jsx)(gu.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*t},children:(0,i.jsx)(ip,{className:"hover:shadow-lg transition-all duration-200 transform hover:scale-105",children:(0,i.jsx)("div",{className:"p-6",children:(0,i.jsxs)("div",{className:"flex items-start space-x-4",children:[(0,i.jsx)("div",{className:"p-3 rounded-lg ".concat(e.bgColor),children:r.createElement(e.icon,{size:24,className:e.color})}),(0,i.jsxs)("div",{className:"flex-1",children:[(0,i.jsx)("h3",{className:"text-lg font-semibold text-gray-900 font-montserrat mb-2",children:e.title}),(0,i.jsx)("p",{className:"text-gray-600 font-montserrat",children:e.description})]})]})})})},e.title))})},"benefits"),"how-it-works"===a&&(0,i.jsx)(gu.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},children:(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsx)(ip,{className:"bg-gradient-to-br from-blue-50 to-indigo-50 border-blue-200",children:(0,i.jsxs)("div",{className:"p-6",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,i.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,i.jsx)(Yp,{size:20,className:"text-blue-600"})}),(0,i.jsx)("h3",{className:"text-xl font-bold text-gray-900 font-montserrat",children:"Comment fonctionne le programme de fid\xe9lit\xe9 ?"})]}),(0,i.jsx)("p",{className:"text-gray-700 font-montserrat",children:"Notre programme de fid\xe9lit\xe9 r\xe9compense les clients qui remboursent leurs pr\xeats dans les d\xe9lais. Plus vous \xeates fid\xe8le, plus vous b\xe9n\xe9ficiez d'avantages exclusifs."})]})}),(0,i.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:y.map((e,t)=>(0,i.jsx)(gu.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*t},children:(0,i.jsx)(ip,{className:"text-center hover:shadow-lg transition-all duration-200",children:(0,i.jsxs)("div",{className:"p-6",children:[(0,i.jsx)("div",{className:"inline-flex items-center justify-center w-12 h-12 rounded-full bg-gradient-to-br ".concat(e.color," text-white font-bold text-lg mb-4"),children:e.step}),(0,i.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-gradient-to-br ".concat(e.color," text-white mb-4"),children:r.createElement(e.icon,{size:24})}),(0,i.jsx)("h4",{className:"text-lg font-semibold text-gray-900 font-montserrat mb-2",children:e.title}),(0,i.jsx)("p",{className:"text-gray-600 font-montserrat text-sm",children:e.description})]})})},e.step))}),(0,i.jsx)(ip,{className:"bg-gradient-to-br from-green-50 to-emerald-50 border-green-200",children:(0,i.jsxs)("div",{className:"p-6",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,i.jsx)("div",{className:"p-2 bg-green-100 rounded-lg",children:(0,i.jsx)(Qs,{size:20,className:"text-green-600"})}),(0,i.jsx)("h3",{className:"text-lg font-bold text-gray-900 font-montserrat",children:"Avantages cumulatifs"})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,i.jsx)(ht.A,{size:16,className:"text-green-600"}),(0,i.jsx)("span",{className:"text-sm font-montserrat",children:"Score de fid\xe9lit\xe9 +1 point"})]}),(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,i.jsx)(ht.A,{size:16,className:"text-green-600"}),(0,i.jsx)("span",{className:"text-sm font-montserrat",children:"R\xe9duction de 2% sur les frais"})]})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,i.jsx)(ht.A,{size:16,className:"text-green-600"}),(0,i.jsx)("span",{className:"text-sm font-montserrat",children:"Forfait internet gratuit"})]}),(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,i.jsx)(ht.A,{size:16,className:"text-green-600"}),(0,i.jsx)("span",{className:"text-sm font-montserrat",children:"Traitement prioritaire"})]})]})]})]})})]})},"how-it-works"),"history"===a&&(0,i.jsx)(gu.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},children:(0,i.jsx)(ip,{children:(0,i.jsxs)("div",{className:"p-6",children:[(0,i.jsx)("h3",{className:"text-lg font-semibold text-gray-900 font-montserrat mb-4",children:"Historique des points"}),(0,i.jsx)("div",{className:"space-y-4",children:h.history.map((e,t)=>(0,i.jsxs)(gu.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*t},className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,i.jsx)("div",{className:"p-2 bg-green-100 rounded-full",children:(0,i.jsx)(Dm.A,{size:16,className:"text-green-600"})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"font-medium text-gray-900 font-montserrat",children:e.action}),(0,i.jsx)("p",{className:"text-sm text-gray-600 font-montserrat",children:new Date(e.date).toLocaleDateString("fr-FR")})]})]}),(0,i.jsx)("div",{className:"text-right",children:(0,i.jsxs)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:["+",e.points," points"]})})]},e.id))})]})})},"history")]})]}),(0,i.jsx)(ah,{children:l&&(0,i.jsx)(gu.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:()=>c(!1),children:(0,i.jsxs)(gu.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-2xl p-6 max-w-md w-full max-h-[80vh] overflow-y-auto",onClick:e=>e.stopPropagation(),children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,i.jsx)("h3",{className:"text-lg font-bold text-gray-900 font-montserrat",children:"\xc0 propos du score de fid\xe9lit\xe9"}),(0,i.jsx)("button",{onClick:()=>c(!1),className:"p-1 hover:bg-gray-100 rounded-full",children:(0,i.jsx)(xt,{size:20})})]}),(0,i.jsxs)("div",{className:"space-y-4 text-sm text-gray-700 font-montserrat",children:[(0,i.jsx)("p",{children:"Le score de fid\xe9lit\xe9 est un programme de r\xe9compenses qui vous permet de b\xe9n\xe9ficier d'avantages exclusifs en fonction de votre historique de remboursement."}),(0,i.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg",children:[(0,i.jsx)("h4",{className:"font-semibold text-blue-900 mb-2",children:"Comment gagner des points :"}),(0,i.jsxs)("ul",{className:"space-y-1 text-blue-800",children:[(0,i.jsx)("li",{children:"\u2022 Rembourser un pr\xeat dans les d\xe9lais impartis"}),(0,i.jsx)("li",{children:"\u2022 +1 point par remboursement \xe0 temps"}),(0,i.jsx)("li",{children:"\u2022 Score maximum : 5 points"})]})]}),(0,i.jsxs)("div",{className:"bg-green-50 p-4 rounded-lg",children:[(0,i.jsx)("h4",{className:"font-semibold text-green-900 mb-2",children:"Avantages d\xe9bloqu\xe9s :"}),(0,i.jsxs)("ul",{className:"space-y-1 text-green-800",children:[(0,i.jsx)("li",{children:"\u2022 R\xe9duction de 2% sur les frais"}),(0,i.jsx)("li",{children:"\u2022 Forfait internet gratuit"}),(0,i.jsx)("li",{children:"\u2022 Traitement prioritaire"}),(0,i.jsx)("li",{children:"\u2022 Taux d'int\xe9r\xeat pr\xe9f\xe9rentiels"})]})]}),(0,i.jsx)("p",{className:"text-xs text-gray-500",children:"Les avantages sont cumulatifs et s'appliquent automatiquement une fois les conditions remplies."})]})]})})})]})},Xp=()=>{const[e,t]=(0,r.useState)(""),[s,n]=(0,r.useState)(null),[a,o]=(0,r.useState)(!1),[l,c]=(0,r.useState)("");return(0,i.jsx)("div",{className:"min-h-screen bg-gray-50 py-12 px-4",children:(0,i.jsx)("div",{className:"max-w-4xl mx-auto",children:(0,i.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-8",children:[(0,i.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-8 text-center",children:"\ud83d\udd0d Diagnostic des Utilisateurs"}),(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Num\xe9ro de t\xe9l\xe9phone \xe0 v\xe9rifier"}),(0,i.jsxs)("div",{className:"flex space-x-2",children:[(0,i.jsx)("input",{type:"text",value:e,onChange:e=>t(e.target.value),placeholder:"22912345678",className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),(0,i.jsx)("button",{onClick:async()=>{if(e.trim()){o(!0),c(""),n(null);try{console.log("[DIAGNOSTIC] V\xe9rification de l'utilisateur:",e);const{data:s,error:r}=await ot.ND.from("users").select("*").eq("phone_number",e).single();if(r)return console.error("[DIAGNOSTIC] Erreur table users:",r),void c("Utilisateur non trouv\xe9 dans la table users: ".concat(r.message));console.log("[DIAGNOSTIC] Utilisateur trouv\xe9 dans users:",s);let a=null;try{const{data:e,error:t}=await ot.ND.auth.admin.getUserById(s.id);!t&&e&&(a=e.user,console.log("[DIAGNOSTIC] Utilisateur trouv\xe9 dans auth.users:",a))}catch(t){console.log("[DIAGNOSTIC] Impossible d'acc\xe9der \xe0 auth.users (pas de droits admin)")}const i=e.replace(/[^0-9]/g,""),o=new Date(s.created_at).getTime(),l="user.".concat(i,".").concat(o,"@gmail.com");n({user:s,authUser:a,tempEmail:l,cleanPhone:i})}catch(l){console.error("[DIAGNOSTIC] Erreur:",l),c("Erreur lors de la v\xe9rification: ".concat(l.message))}finally{o(!1)}}else c("Veuillez entrer un num\xe9ro de t\xe9l\xe9phone")},disabled:a,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:a?"V\xe9rification...":"V\xe9rifier"})]})]}),l&&(0,i.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:l}),s&&(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"\ud83d\udccb Informations Utilisateur"}),(0,i.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,i.jsx)("h3",{className:"font-semibold text-gray-800 mb-3",children:"Table users"}),(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:"ID:"})," ",s.user.id]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:"Email:"})," ",s.user.email||"Non d\xe9fini"]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:"T\xe9l\xe9phone:"})," ",s.user.phone_number]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:"Pr\xe9nom:"})," ",s.user.first_name]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:"Nom:"})," ",s.user.last_name]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:"R\xf4le:"})," ",s.user.role]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:"Statut:"})," ",s.user.status]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:"Cr\xe9\xe9 le:"})," ",new Date(s.user.created_at).toLocaleString()]})]})]}),s.authUser?(0,i.jsxs)("div",{className:"bg-green-50 rounded-lg p-4",children:[(0,i.jsx)("h3",{className:"font-semibold text-green-800 mb-3",children:"\u2705 Table auth.users"}),(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:"ID:"})," ",s.authUser.id]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:"Email:"})," ",s.authUser.email]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:"Email v\xe9rifi\xe9:"})," ",s.authUser.email_confirmed_at?"Oui":"Non"]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:"Derni\xe8re connexion:"})," ",s.authUser.last_sign_in_at?new Date(s.authUser.last_sign_in_at).toLocaleString():"Jamais"]})]})]}):(0,i.jsxs)("div",{className:"bg-yellow-50 rounded-lg p-4",children:[(0,i.jsx)("h3",{className:"font-semibold text-yellow-800 mb-3",children:"\u26a0\ufe0f Table auth.users"}),(0,i.jsx)("p",{className:"text-yellow-700",children:"Utilisateur non trouv\xe9 dans auth.users. Cela explique pourquoi la connexion \xe9choue."})]}),(0,i.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4",children:[(0,i.jsx)("h3",{className:"font-semibold text-blue-800 mb-3",children:"\ud83d\udce7 Email temporaire reconstruit"}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)("div",{children:(0,i.jsx)("strong",{children:"Email utilis\xe9 pour la connexion:"})}),(0,i.jsx)("code",{className:"bg-blue-100 px-2 py-1 rounded text-sm",children:s.tempEmail}),(0,i.jsx)("div",{className:"text-sm text-blue-600",children:"Cet email est reconstruit \xe0 partir du t\xe9l\xe9phone et de la date de cr\xe9ation."})]})]}),(0,i.jsxs)("div",{className:"bg-purple-50 rounded-lg p-4",children:[(0,i.jsx)("h3",{className:"font-semibold text-purple-800 mb-3",children:"\ud83d\udca1 Recommandations"}),(0,i.jsxs)("ul",{className:"text-sm text-purple-700 space-y-1",children:[!s.authUser&&(0,i.jsx)("li",{children:"\u2022 L\\'utilisateur n\\'existe pas dans auth.users - il faut le recr\xe9er avec signUpWithPhone"}),"approved"!==s.user.status&&(0,i.jsx)("li",{children:'\u2022 Le statut n\\\'est pas "approved" - mettre \xe0 jour le statut'}),(0,i.jsx)("li",{children:"\u2022 V\xe9rifier que le mot de passe correspond \xe0 l\\'email temporaire"}),(0,i.jsx)("li",{children:"\u2022 Essayer de se connecter avec l\\'email temporaire directement"})]})]})]})]})]})})})},ef=()=>{const[e,t]=(0,r.useState)(null),[s,n]=(0,r.useState)(!1),[a,o]=(0,r.useState)(null),l=async()=>{n(!0),o(null);try{console.log("\ud83d\udd0d Test de la route /api/health...");const e=await fetch("/api/health");if(console.log("\ud83d\udce1 R\xe9ponse re\xe7ue:",e.status,e.statusText),!e.ok)throw new Error("HTTP ".concat(e.status,": ").concat(e.statusText));const s=e.headers.get("content-type");if(!s||!s.includes("application/json"))throw new Error("Type de contenu invalide: ".concat(s));const r=await e.text();if(console.log("\ud83d\udcc4 Contenu brut:",r),!r||""===r.trim())throw new Error("R\xe9ponse vide du serveur");const n=JSON.parse(r);console.log("\u2705 JSON pars\xe9:",n),t(n)}catch(e){console.error("\u274c Erreur lors du test:",e);let t=e.message;e.message.includes("Failed to fetch")?t="Impossible de se connecter au serveur API. V\xe9rifiez que le serveur est d\xe9marr\xe9 (npm run start:api)":e.message.includes("Unexpected end of JSON input")?t="R\xe9ponse invalide du serveur. Le serveur API pourrait ne pas \xeatre d\xe9marr\xe9.":e.message.includes("HTTP")&&(t="Erreur HTTP: ".concat(e.message)),o(t)}finally{n(!1)}};return(0,r.useEffect)(()=>{l()},[]),(0,i.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:(0,i.jsxs)("div",{className:"max-w-md w-full bg-white rounded-2xl shadow-xl p-8 text-center",children:[(0,i.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-6",children:"Test API Health"}),s&&(0,i.jsxs)("div",{className:"mb-4",children:[(0,i.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),(0,i.jsx)("p",{className:"text-gray-600 mt-2",children:"Test en cours..."})]}),a&&(0,i.jsxs)("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:[(0,i.jsx)("p",{className:"text-red-700 font-semibold",children:"\u274c Erreur:"}),(0,i.jsx)("p",{className:"text-red-600 text-sm",children:a}),(0,i.jsxs)("div",{className:"mt-3 text-xs text-red-500",children:[(0,i.jsx)("p",{children:"\ud83d\udca1 Solutions possibles:"}),(0,i.jsxs)("ul",{className:"list-disc list-inside mt-1 space-y-1",children:[(0,i.jsxs)("li",{children:["D\xe9marrer le serveur API: ",(0,i.jsx)("code",{children:"npm run start:api"})]}),(0,i.jsx)("li",{children:"V\xe9rifier que le port 5000 est libre"}),(0,i.jsx)("li",{children:"Red\xe9marrer l'application React"})]})]})]}),e&&(0,i.jsxs)("div",{className:"mb-4 p-4 bg-green-50 border border-green-200 rounded-lg",children:[(0,i.jsx)("p",{className:"text-green-700 font-semibold",children:"\u2705 API fonctionnelle"}),(0,i.jsx)("pre",{className:"text-sm text-green-600 mt-2",children:JSON.stringify(e,null,2)})]}),(0,i.jsx)("button",{onClick:l,disabled:s,className:"bg-blue-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:s?"Test en cours...":"Tester \xe0 nouveau"}),(0,i.jsxs)("div",{className:"mt-6 text-sm text-gray-500",children:[(0,i.jsxs)("p",{children:["Cette page teste la route ",(0,i.jsx)("code",{children:"/api/health"})]}),(0,i.jsx)("p",{children:"via le proxy de d\xe9veloppement."}),(0,i.jsxs)("p",{className:"mt-2 text-xs",children:["Serveur API: localhost:5000",(0,i.jsx)("br",{}),"Frontend: localhost:3001"]})]})]})})},tf=(0,mt.A)("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]),sf=()=>{const[e]=it(),t=(0,We.Zp)(),[s,n]=(0,r.useState)("loading"),[a,o]=(0,r.useState)(""),[l,c]=(0,r.useState)("");(0,r.useEffect)(()=>{const t=setTimeout(()=>{n("loading"),o(e.get("amount")||"50000"),c(e.get("transaction_id")||"mock_123")},1e3);return()=>clearTimeout(t)},[e]);const d=async()=>{n("success");try{const s=e.get("loan_id"),r=e.get("user_id");console.log("\ud83d\udd04 Traitement du remboursement simul\xe9...",{loanId:s,userId:r,amount:a,transactionId:l});const n=await fetch("/api/fedapay/webhook",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({transaction:{id:l,status:"approved",amount:parseInt(a),payment_method:"mobile_money",paid_at:(new Date).toISOString(),metadata:{loan_id:s,user_id:r,type:"loan_repayment"}}})}),i=await n.json();console.log("\u2705 Webhook trait\xe9:",i),setTimeout(()=>{const e="/remboursement/success?transaction_id=".concat(l,"&amount=").concat(a,"&loan_id=").concat(s);t(e)},2e3)}catch(s){console.error("\u274c Erreur traitement remboursement:",s),n("failed")}},u=async()=>{n("failed");try{const s=e.get("loan_id"),r=e.get("user_id");console.log("\ud83d\udd04 Traitement de l'\xe9chec de paiement simul\xe9...",{loanId:s,userId:r,amount:a,transactionId:l});const n=await fetch("/api/fedapay/webhook",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({transaction:{id:l,status:"failed",amount:parseInt(a),failure_reason:"Paiement refus\xe9 par l'utilisateur",failed_at:(new Date).toISOString(),metadata:{loan_id:s,user_id:r,type:"loan_repayment"}}})}),i=await n.json();console.log("\u274c Webhook \xe9chec trait\xe9:",i),setTimeout(()=>{const e="/remboursement/failure?transaction_id=".concat(l,"&amount=").concat(a,"&loan_id=").concat(s);t(e)},2e3)}catch(s){console.error("\u274c Erreur traitement \xe9chec:",s)}},h=e=>new Intl.NumberFormat("fr-CI",{style:"currency",currency:"XOF"}).format(e/100);return"loading"===s?(0,i.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:(0,i.jsxs)(gu.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"max-w-md w-full bg-white rounded-2xl shadow-xl p-8 text-center",children:[(0,i.jsxs)("div",{className:"mb-6",children:[(0,i.jsx)("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,i.jsx)(Bu.A,{className:"w-8 h-8 text-blue-600"})}),(0,i.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"FedaPay Simulation"}),(0,i.jsx)("p",{className:"text-gray-600",children:"Page de paiement simul\xe9e pour les tests"})]}),(0,i.jsx)("div",{className:"bg-gray-50 rounded-xl p-6 mb-6",children:(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"Montant \xe0 payer"}),(0,i.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:h(a)}),(0,i.jsxs)("p",{className:"text-xs text-gray-500 mt-2",children:["Transaction: ",l]})]})}),(0,i.jsxs)("div",{className:"space-y-3",children:[(0,i.jsxs)("button",{onClick:d,className:"w-full bg-green-600 hover:bg-green-700 text-white font-semibold py-3 px-6 rounded-xl transition-colors flex items-center justify-center space-x-2",children:[(0,i.jsx)(ht.A,{className:"w-5 h-5"}),(0,i.jsx)("span",{children:"Simuler Paiement R\xe9ussi"})]}),(0,i.jsxs)("button",{onClick:u,className:"w-full bg-red-600 hover:bg-red-700 text-white font-semibold py-3 px-6 rounded-xl transition-colors flex items-center justify-center space-x-2",children:[(0,i.jsx)(Bm,{className:"w-5 h-5"}),(0,i.jsx)("span",{children:"Simuler Paiement \xc9chou\xe9"})]})]}),(0,i.jsxs)("div",{className:"mt-6 text-xs text-gray-500",children:[(0,i.jsx)("p",{children:"\u26a0\ufe0f Cette page simule FedaPay pour les tests"}),(0,i.jsx)("p",{children:"En production, vous seriez redirig\xe9 vers FedaPay r\xe9el"})]})]})}):(0,i.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:(0,i.jsxs)(gu.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"max-w-md w-full bg-white rounded-2xl shadow-xl p-8 text-center",children:["success"===s?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,i.jsx)(ht.A,{className:"w-8 h-8 text-green-600"})}),(0,i.jsx)("h2",{className:"text-2xl font-bold text-green-900 mb-2",children:"Paiement R\xe9ussi !"}),(0,i.jsx)("p",{className:"text-green-700 mb-4",children:"Redirection en cours..."})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,i.jsx)(Bm,{className:"w-8 h-8 text-red-600"})}),(0,i.jsx)("h2",{className:"text-2xl font-bold text-red-900 mb-2",children:"Paiement \xc9chou\xe9"}),(0,i.jsx)("p",{className:"text-red-700 mb-4",children:"Redirection en cours..."})]}),(0,i.jsx)("div",{className:"flex items-center justify-center",children:(0,i.jsx)(tf,{className:"w-6 h-6 animate-spin text-gray-600"})})]})})},rf=(0,r.lazy)(()=>Promise.all([s.e(521),s.e(407)]).then(s.bind(s,9407))),nf=()=>(0,i.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:(0,i.jsxs)("div",{className:"max-w-2xl w-full bg-white rounded-2xl shadow-xl p-8 text-center",children:[(0,i.jsxs)("div",{className:"mb-8",children:[(0,i.jsx)("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"AB Campus Finance"}),(0,i.jsx)("div",{className:"w-24 h-24 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-full mx-auto flex items-center justify-center",children:(0,i.jsx)("svg",{className:"w-12 h-12 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})})]}),(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[(0,i.jsx)("h3",{className:"text-lg font-semibold text-yellow-800 mb-2",children:"Configuration requise"}),(0,i.jsx)("p",{className:"text-yellow-700",children:"L'application n\xe9cessite une configuration Supabase pour fonctionner."})]}),(0,i.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 text-left",children:[(0,i.jsx)("h4",{className:"font-semibold text-gray-800 mb-2",children:"\xc9tapes de configuration :"}),(0,i.jsxs)("ol",{className:"list-decimal list-inside space-y-2 text-gray-600 text-sm",children:[(0,i.jsxs)("li",{children:["Cr\xe9ez un projet sur ",(0,i.jsx)("a",{href:"https://supabase.com",className:"text-blue-600 hover:underline",target:"_blank",rel:"noopener noreferrer",children:"Supabase.com"})]}),(0,i.jsx)("li",{children:"Copiez l'URL et la cl\xe9 anonyme depuis Settings \u2192 API"}),(0,i.jsxs)("li",{children:["Cr\xe9ez un fichier ",(0,i.jsx)("code",{className:"bg-gray-200 px-1 rounded",children:".env.local"})," \xe0 la racine du projet"]}),(0,i.jsx)("li",{children:"Ajoutez vos cl\xe9s Supabase"}),(0,i.jsx)("li",{children:"Red\xe9marrez l'application"})]})]}),(0,i.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,i.jsx)("h4",{className:"font-semibold text-blue-800 mb-2",children:"Exemple de fichier .env.local :"}),(0,i.jsx)("pre",{className:"text-xs text-blue-700 bg-blue-100 p-3 rounded overflow-x-auto",children:"REACT_APP_SUPABASE_URL=https://your-project.supabase.co\nREACT_APP_SUPABASE_ANON_KEY=your_anon_key_here\nREACT_APP_BACKEND_URL=http://localhost:5000"})]}),(0,i.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[(0,i.jsx)("h4",{className:"font-semibold text-red-800 mb-2",children:"Diagnostic de la configuration :"}),(0,i.jsxs)("div",{className:"text-sm text-red-700 space-y-1",children:[(0,i.jsxs)("p",{children:["\u2022 URL Supabase: ","\u2705 D\xe9finie"]}),(0,i.jsxs)("p",{children:["\u2022 Cl\xe9 Supabase: ","\u2705 D\xe9finie"]}),(0,i.jsxs)("p",{children:["\u2022 Backend URL: ","\u2705 D\xe9finie"]}),(0,i.jsxs)("p",{children:["\u2022 Mode: ","production"]})]}),(0,i.jsx)("p",{className:"text-xs text-red-600 mt-2",children:"\ud83d\udca1 Ouvrez la console du navigateur (F12) pour voir les logs d\xe9taill\xe9s"})]}),(0,i.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[(0,i.jsx)("button",{onClick:()=>{console.log("[CONFIG] Tentative de rechargement..."),console.log("[CONFIG] Variables d'environnement:",{hasUrl:!0,hasKey:!0,url:"D\xe9finie",key:"D\xe9finie"}),window.location.reload()},className:"bg-gradient-to-r from-blue-500 to-indigo-600 text-white px-8 py-3 rounded-lg font-semibold hover:from-blue-600 hover:to-indigo-700 transition-all duration-200 shadow-lg hover:shadow-xl",children:"Recharger apr\xe8s configuration"}),(0,i.jsx)("button",{onClick:()=>{console.log("[CONFIG] Test de connexion manuel..."),(0,lt.$h)().then(e=>{console.log("[CONFIG] R\xe9sultat du test:",e),alert("Test de configuration: ".concat(e.success?"SUCC\xc8S":"\xc9CHEC","\nD\xe9tails: ").concat(e.error||e.message||"Aucun d\xe9tail"))}).catch(e=>{console.error("[CONFIG] Erreur du test:",e),alert("Erreur du test: ".concat(e.message))})},className:"bg-gradient-to-r from-green-500 to-emerald-600 text-white px-8 py-3 rounded-lg font-semibold hover:from-green-600 hover:to-emerald-700 transition-all duration-200 shadow-lg hover:shadow-xl",children:"Tester la configuration"})]})]})]})}),af=e=>{let{children:t,adminOnly:s=!1}=e;const{isAuthenticated:r,user:n,loading:a}=dt();return a?(0,i.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,i.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary-600"})}):r?s&&"admin"!==(null===n||void 0===n?void 0:n.role)?(0,i.jsx)(We.C5,{to:"/dashboard",replace:!0}):t:(0,i.jsx)(We.C5,{to:"/login",replace:!0})},of=()=>{const{updateAvailable:e,isChecking:t,currentVersion:s,newVersion:n,checkVersion:a,applyUpdate:o,ignoreUpdate:l}=(()=>{const[e,t]=(0,r.useState)(!1),[s,n]=(0,r.useState)(!1),[a,i]=(0,r.useState)(null),[o,l]=(0,r.useState)(null),[c,d]=(0,r.useState)(null),u=(0,r.useCallback)(e=>{e.addEventListener("updatefound",()=>{const s=e.installing;s&&s.addEventListener("statechange",()=>{"installed"===s.state&&navigator.serviceWorker.controller&&(console.log("[APP_UPDATE] Nouveau Service Worker disponible"),t(!0))})})},[]),h=(0,r.useCallback)(e=>{if(e)try{navigator.serviceWorker.getRegistration(e.scope).then(e=>{e&&e.update().catch(e=>{var t;null!==(t=e.message)&&void 0!==t&&t.includes("uninstalled")})}).catch(()=>{})}catch(t){}},[]);(0,r.useEffect)(()=>{"serviceWorker"in navigator&&navigator.serviceWorker.getRegistration().then(e=>e?(console.log("[APP_UPDATE] Service Worker d\xe9j\xe0 enregistr\xe9:",e.scope),d(e),u(e),e):navigator.serviceWorker.register("/serviceWorker.js")).then(e=>{e&&(console.log("[APP_UPDATE] Service Worker enregistr\xe9:",e.scope),d(t=>(t&&t===e||u(e),e)),h(e))}).catch(e=>{console.error("[APP_UPDATE] Erreur enregistrement Service Worker:",e)})},[u,h]);const m=(0,r.useCallback)(async()=>{try{n(!0);const e=localStorage.getItem("app-version"),s=localStorage.getItem("app-build-number"),r=await fetch("".concat("/version.json","?t=").concat(Date.now()),{cache:"no-cache",headers:{"Cache-Control":"no-cache",Pragma:"no-cache"}});if(!r.ok)return void console.log("[APP_UPDATE] Fichier version.json non trouv\xe9, utilisation de la d\xe9tection Service Worker uniquement");const a=await r.json(),{version:o,buildNumber:c,buildDate:d}=a;console.log("[APP_UPDATE] Version serveur:",{version:o,buildNumber:c,buildDate:d}),console.log("[APP_UPDATE] Version stock\xe9e:",{version:e,buildNumber:s}),e&&s?(c>parseInt(s)||o!==e)&&(console.log("[APP_UPDATE] \u2705 Nouvelle version d\xe9tect\xe9e !"),l(a),t(!0)):(localStorage.setItem("app-version",o),localStorage.setItem("app-build-number",c.toString()),i(a)),o&&(localStorage.setItem("app-version",o),localStorage.setItem("app-build-number",c.toString()))}catch(e){console.error("[APP_UPDATE] Erreur lors de la v\xe9rification:",e)}finally{n(!1)}},[]);(0,r.useEffect)(()=>{m();const e=setInterval(m,Zs),t=()=>{m()};if(window.addEventListener("focus",t),c){const s=setInterval(()=>{navigator.serviceWorker.getRegistration(c.scope).then(e=>{e&&e.update().catch(e=>{var t;null!==(t=e.message)&&void 0!==t&&t.includes("uninstalled")||console.log("[APP_UPDATE] Service Worker mise \xe0 jour:",e.message)})}).catch(()=>{})},Zs);return()=>{clearInterval(e),clearInterval(s),window.removeEventListener("focus",t)}}return()=>{clearInterval(e),window.removeEventListener("focus",t)}},[m,c]);const p=(0,r.useCallback)(()=>{c?navigator.serviceWorker.getRegistration(c.scope).then(e=>{null!==e&&void 0!==e&&e.waiting?(e.waiting.postMessage({type:"SKIP_WAITING"}),e.waiting.addEventListener("statechange",e=>{"activated"===e.target.state&&window.location.reload()})):window.location.reload()}).catch(()=>{window.location.reload()}):window.location.reload()},[c]),f=(0,r.useCallback)(()=>{t(!1),sessionStorage.setItem("update-ignored","true")},[]);return{updateAvailable:e&&!sessionStorage.getItem("update-ignored"),isChecking:s,currentVersion:a,newVersion:o,checkVersion:m,applyUpdate:p,ignoreUpdate:f}})();return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(et,{children:(0,i.jsxs)(We.BV,{children:[(0,i.jsx)(We.qh,{path:"/login",element:(0,i.jsx)(wh,{})}),(0,i.jsx)(We.qh,{path:"/register",element:(0,i.jsx)(Dh,{})}),(0,i.jsx)(We.qh,{path:"/create-account",element:(0,i.jsx)(zh,{})}),(0,i.jsx)(We.qh,{path:"/pending-approval",element:(0,i.jsx)(Mh,{})}),(0,i.jsx)(We.qh,{path:"/forgot-password",element:(0,i.jsx)(Uh,{})}),(0,i.jsx)(We.qh,{path:"/reset-password",element:(0,i.jsx)(Bh,{})}),(0,i.jsx)(We.qh,{path:"/dashboard",element:(0,i.jsx)(af,{children:(0,i.jsx)(Ju,{children:(0,i.jsx)(Om,{})})})}),(0,i.jsx)(We.qh,{path:"/admin",element:(0,i.jsx)(af,{adminOnly:!0,children:(0,i.jsx)(Ju,{children:(0,i.jsx)(zm,{})})})}),(0,i.jsx)(We.qh,{path:"/admin/loan-requests",element:(0,i.jsx)(af,{adminOnly:!0,children:(0,i.jsx)(Ju,{children:(0,i.jsx)(Hm,{})})})}),(0,i.jsx)(We.qh,{path:"/admin/users",element:(0,i.jsx)(af,{adminOnly:!0,children:(0,i.jsx)(Ju,{children:(0,i.jsx)(Gm,{})})})}),(0,i.jsx)(We.qh,{path:"/admin/user-management",element:(0,i.jsx)(af,{adminOnly:!0,children:(0,i.jsx)(Ju,{children:(0,i.jsx)(Gm,{})})})}),(0,i.jsx)(We.qh,{path:"/admin/menu",element:(0,i.jsx)(af,{adminOnly:!0,children:(0,i.jsx)(Ju,{children:(0,i.jsx)(Jm,{})})})}),(0,i.jsx)(We.qh,{path:"/admin/analytics",element:(0,i.jsx)(af,{adminOnly:!0,children:(0,i.jsx)(Ju,{children:(0,i.jsx)(Qm,{})})})}),(0,i.jsx)(We.qh,{path:"/admin/analytics/detailed",element:(0,i.jsx)(af,{adminOnly:!0,children:(0,i.jsx)(Ju,{children:(0,i.jsx)(r.Suspense,{fallback:(0,i.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-green-50",children:(0,i.jsx)("div",{className:"animate-spin rounded-full h-10 w-10 border-2 border-green-500 border-t-transparent"})}),children:(0,i.jsx)(rf,{})})})})}),(0,i.jsx)(We.qh,{path:"/admin/settings",element:(0,i.jsx)(af,{adminOnly:!0,children:(0,i.jsx)(Ju,{children:(0,i.jsx)(ep,{})})})}),(0,i.jsx)(We.qh,{path:"/admin/ab-epargne",element:(0,i.jsx)(af,{adminOnly:!0,children:(0,i.jsx)(Ju,{children:(0,i.jsx)(rp,{})})})}),(0,i.jsx)(We.qh,{path:"/admin/test-notifications",element:(0,i.jsx)(af,{adminOnly:!0,children:(0,i.jsx)(Ju,{children:(0,i.jsx)(op,{})})})}),(0,i.jsx)(We.qh,{path:"/loan-request",element:(0,i.jsx)(af,{children:(0,i.jsx)(Ju,{children:(0,i.jsx)(mp,{})})})}),(0,i.jsx)(We.qh,{path:"/loan-history",element:(0,i.jsx)(af,{children:(0,i.jsx)(Ju,{children:(0,i.jsx)(pp,{})})})}),(0,i.jsx)(We.qh,{path:"/repayment",element:(0,i.jsx)(af,{children:(0,i.jsx)(Ju,{children:(0,i.jsx)(xp,{})})})}),(0,i.jsx)(We.qh,{path:"/repayment/success",element:(0,i.jsx)(af,{children:(0,i.jsx)(Ju,{children:(0,i.jsx)(gp,{})})})}),(0,i.jsx)(We.qh,{path:"/repayment/failure",element:(0,i.jsx)(af,{children:(0,i.jsx)(Ju,{children:(0,i.jsx)(vp,{})})})}),(0,i.jsx)(We.qh,{path:"/repayment/cancel",element:(0,i.jsx)(af,{children:(0,i.jsx)(Ju,{children:(0,i.jsx)(yp,{})})})}),(0,i.jsx)(We.qh,{path:"/profile",element:(0,i.jsx)(af,{children:(0,i.jsx)(Ju,{children:(0,i.jsx)(jp,{})})})}),(0,i.jsx)(We.qh,{path:"/menu",element:(0,i.jsx)(af,{children:(0,i.jsx)(Ju,{children:(0,i.jsx)(wp,{})})})}),(0,i.jsx)(We.qh,{path:"/ab-logement",element:(0,i.jsx)(af,{children:(0,i.jsx)(Ju,{children:(0,i.jsx)(Np,{})})})}),(0,i.jsx)(We.qh,{path:"/ab-epargne",element:(0,i.jsx)(af,{children:(0,i.jsx)(Ju,{children:(0,i.jsx)(_p,{})})})}),(0,i.jsx)(We.qh,{path:"/ab-epargne/retour",element:(0,i.jsx)(af,{children:(0,i.jsx)(Ju,{children:(0,i.jsx)(Ep,{})})})}),(0,i.jsx)(We.qh,{path:"/ab-epargne/personalize/:planId",element:(0,i.jsx)(af,{children:(0,i.jsx)(Ju,{children:(0,i.jsx)(Vp,{})})})}),(0,i.jsx)(We.qh,{path:"/ab-epargne/plan/:id",element:(0,i.jsx)(af,{children:(0,i.jsx)(Ju,{children:(0,i.jsx)(Ip,{})})})}),(0,i.jsx)(We.qh,{path:"/ab-epargne/depot-retour",element:(0,i.jsx)(af,{children:(0,i.jsx)(Ju,{children:(0,i.jsx)(qp,{})})})}),(0,i.jsx)(We.qh,{path:"/remboursement-retour",element:(0,i.jsx)(af,{children:(0,i.jsx)(Ju,{children:(0,i.jsx)(Hp,{})})})}),(0,i.jsx)(We.qh,{path:"/coaching-finance",element:(0,i.jsx)(af,{children:(0,i.jsx)(Ju,{children:(0,i.jsx)(Gp,{})})})}),(0,i.jsx)(We.qh,{path:"/loyalty-score",element:(0,i.jsx)(af,{children:(0,i.jsx)(Ju,{children:(0,i.jsx)($p,{})})})}),(0,i.jsx)(We.qh,{path:"/test-otp",element:(0,i.jsx)(Xp,{})}),(0,i.jsx)(We.qh,{path:"/test-health",element:(0,i.jsx)(ef,{})}),(0,i.jsx)(We.qh,{path:"/test-fedapay",element:(0,i.jsx)(sf,{})}),(0,i.jsx)(We.qh,{path:"/test-plan-epargne/:id",element:(0,i.jsx)(Wp,{})}),(0,i.jsx)(We.qh,{path:"/",element:(0,i.jsx)(We.C5,{to:"/dashboard",replace:!0})})]})}),(0,i.jsx)(Ys,{updateAvailable:e,newVersion:n,currentVersion:s,onUpdate:o,onIgnore:l})]})},lf=()=>{const[e,t]=(0,r.useState)(!1),[s,n]=(0,r.useState)(!0);return(0,r.useEffect)(()=>{(()=>{try{console.log("[APP] V\xe9rification des variables d'environnement...");const e=!0,s=!0,r=!0;console.log("[APP] Variables d'environnement:",{hasSupabaseUrl:e,hasSupabaseKey:s,hasBackendUrl:r,url:"D\xe9finie",key:"D\xe9finie",backend:"D\xe9finie"});const n=e&&s&&r;t(n),n?console.log("[APP] \u2705 Configuration d\xe9tect\xe9e, d\xe9marrage de l'application"):console.log("[APP] \u274c Configuration manquante, affichage de la page de configuration")}catch(e){console.error("[APP] Erreur lors de la v\xe9rification de la configuration:",e),t(!1)}finally{n(!1)}})(),console.log("[APP] Initialisation de la gestion du cache..."),sr()},[]),s?(0,i.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center",children:(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("div",{className:"w-16 h-16 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,i.jsx)("p",{className:"text-gray-600",children:"V\xe9rification de la configuration..."})]})}):e?(0,i.jsx)(ut,{children:(0,i.jsxs)(bt,{children:[(0,i.jsx)(of,{}),(0,i.jsx)(ih,{}),(0,i.jsx)(mh,{}),(0,i.jsx)(Gs,{position:"top-right"})]})}):(0,i.jsx)(nf,{})},cf=e=>{e&&e instanceof Function&&s.e(453).then(s.bind(s,6453)).then(t=>{let{getCLS:s,getFID:r,getFCP:n,getLCP:a,getTTFB:i}=t;s(e),r(e),n(e),a(e),i(e)})};a.createRoot(document.getElementById("root")).render((0,i.jsx)(r.StrictMode,{children:(0,i.jsx)(l,{client:He,children:(0,i.jsx)(lf,{})})})),cf()})()})();
//# sourceMappingURL=main.003a1594.js.map