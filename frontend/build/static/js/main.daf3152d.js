/*! For license information please see main.daf3152d.js.LICENSE.txt */
(()=>{var e={579:(e,t,s)=>{"use strict";e.exports=s(1153)},917:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});const n=(0,s(3797).A)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]])},1153:(e,t,s)=>{"use strict";var n=s(5043),r=Symbol.for("react.element"),a=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,s){var n,a={},c=null,d=null;for(n in void 0!==s&&(c=""+s),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)i.call(t,n)&&!l.hasOwnProperty(n)&&(a[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===a[n]&&(a[n]=t[n]);return{$$typeof:r,type:e,key:c,ref:d,props:a,_owner:o.current}}t.Fragment=a,t.jsx=c,t.jsxs=c},1155:(e,t,s)=>{"use strict";s.r(t),s.d(t,{checkPromptStatus:()=>i,forceShowPrompts:()=>o,resetAllUserPrompts:()=>n,resetNotificationPrompts:()=>a,resetPWAPrompts:()=>r});const n=()=>(console.log("\ud83d\udd04 R\xe9initialisation de tous les prompts utilisateur..."),localStorage.removeItem("pwa-install-prompt-seen"),localStorage.removeItem("pwa-install-prompt-dismissed"),localStorage.removeItem("pwa-install-prompt-last-seen"),localStorage.removeItem("notification-prompt-seen"),localStorage.removeItem("notification-prompt-declined"),localStorage.removeItem("notification-prompt-last-seen"),console.log("\u2705 Tous les prompts ont \xe9t\xe9 r\xe9initialis\xe9s"),!0),r=()=>(console.log("\ud83d\udd04 R\xe9initialisation des prompts PWA..."),localStorage.removeItem("pwa-install-prompt-seen"),localStorage.removeItem("pwa-install-prompt-dismissed"),localStorage.removeItem("pwa-install-prompt-last-seen"),console.log("\u2705 Prompts PWA r\xe9initialis\xe9s"),!0),a=()=>(console.log("\ud83d\udd04 R\xe9initialisation des prompts de notifications..."),localStorage.removeItem("notification-prompt-seen"),localStorage.removeItem("notification-prompt-declined"),localStorage.removeItem("notification-prompt-last-seen"),console.log("\u2705 Prompts de notifications r\xe9initialis\xe9s"),!0),i=()=>{const e={pwa:{seen:"true"===localStorage.getItem("pwa-install-prompt-seen"),dismissed:"true"===localStorage.getItem("pwa-install-prompt-dismissed"),lastSeen:localStorage.getItem("pwa-install-prompt-last-seen")},notifications:{seen:"true"===localStorage.getItem("notification-prompt-seen"),declined:"true"===localStorage.getItem("notification-prompt-declined"),lastSeen:localStorage.getItem("notification-prompt-last-seen")}};return console.log("\ud83d\udcca \xc9tat des prompts:",e),e},o=()=>{console.log("\ud83d\udd27 For\xe7age de l'affichage des prompts..."),n(),window.location.reload()};"undefined"!==typeof window&&(window.resetAllUserPrompts=n,window.resetPWAPrompts=r,window.resetNotificationPrompts=a,window.checkPromptStatus=i,window.forceShowPrompts=o,console.log("\n\ud83d\udd27 Utilitaires de prompts disponibles dans la console :\n\n\u2022 resetAllUserPrompts() - R\xe9initialise tous les prompts\n\u2022 resetPWAPrompts() - R\xe9initialise seulement les prompts PWA\n\u2022 resetNotificationPrompts() - R\xe9initialise seulement les prompts de notifications\n\u2022 checkPromptStatus() - V\xe9rifie l'\xe9tat actuel des prompts\n\u2022 forceShowPrompts() - Force l'affichage des prompts (recharge la page)\n\n\ud83d\udca1 Utilisez ces fonctions pour tester ou r\xe9initialiser les prompts utilisateur.\n  "))},1210:function(e,t,s){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(s(8829)),a=n(s(5736));class i{constructor(e){let{headers:t={},schema:s,fetch:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.url=e,this.headers=new Headers(t),this.schemaName=s,this.fetch=n}from(e){const t=new URL("".concat(this.url,"/").concat(e));return new r.default(t,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new i(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{head:s=!1,get:n=!1,count:r}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var i;let o;const l=new URL("".concat(this.url,"/rpc/").concat(e));let c;s||n?(o=s?"HEAD":"GET",Object.entries(t).filter(e=>{let[t,s]=e;return void 0!==s}).map(e=>{let[t,s]=e;return[t,Array.isArray(s)?"{".concat(s.join(","),"}"):"".concat(s)]}).forEach(e=>{let[t,s]=e;l.searchParams.append(t,s)})):(o="POST",c=t);const d=new Headers(this.headers);return r&&d.set("Prefer","count=".concat(r)),new a.default({method:o,url:l,headers:d,schema:this.schemaName,body:c,fetch:null!==(i=this.fetch)&&void 0!==i?i:fetch})}}t.default=i},1387:(e,t,s)=>{"use strict";function n(){return n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},n.apply(this,arguments)}var r;s.d(t,{AO:()=>u,Gh:()=>D,HS:()=>O,Oi:()=>o,Rr:()=>h,pX:()=>U,pb:()=>P,rc:()=>r,tH:()=>F,ue:()=>f,yD:()=>R,zR:()=>i}),function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(r||(r={}));const a="popstate";function i(e){return void 0===e&&(e={}),m(function(e,t){let{pathname:s,search:n,hash:r}=e.location;return d("",{pathname:s,search:n,hash:r},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"===typeof t?t:u(t)},null,e)}function o(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function l(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(s){}}}function c(e,t){return{usr:e.state,key:e.key,idx:t}}function d(e,t,s,r){return void 0===s&&(s=null),n({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?h(t):t,{state:s,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function u(e){let{pathname:t="/",search:s="",hash:n=""}=e;return s&&"?"!==s&&(t+="?"===s.charAt(0)?s:"?"+s),n&&"#"!==n&&(t+="#"===n.charAt(0)?n:"#"+n),t}function h(e){let t={};if(e){let s=e.indexOf("#");s>=0&&(t.hash=e.substr(s),e=e.substr(0,s));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function m(e,t,s,i){void 0===i&&(i={});let{window:l=document.defaultView,v5Compat:h=!1}=i,m=l.history,p=r.Pop,f=null,g=x();function x(){return(m.state||{idx:null}).idx}function v(){p=r.Pop;let e=x(),t=null==e?null:e-g;g=e,f&&f({action:p,location:y.location,delta:t})}function b(e){let t="null"!==l.location.origin?l.location.origin:l.location.href,s="string"===typeof e?e:u(e);return s=s.replace(/ $/,"%20"),o(t,"No window.location.(origin|href) available to create URL for href: "+s),new URL(s,t)}null==g&&(g=0,m.replaceState(n({},m.state,{idx:g}),""));let y={get action(){return p},get location(){return e(l,m)},listen(e){if(f)throw new Error("A history only accepts one active listener");return l.addEventListener(a,v),f=e,()=>{l.removeEventListener(a,v),f=null}},createHref:e=>t(l,e),createURL:b,encodeLocation(e){let t=b(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){p=r.Push;let n=d(y.location,e,t);s&&s(n,e),g=x()+1;let a=c(n,g),i=y.createHref(n);try{m.pushState(a,"",i)}catch(o){if(o instanceof DOMException&&"DataCloneError"===o.name)throw o;l.location.assign(i)}h&&f&&f({action:p,location:y.location,delta:1})},replace:function(e,t){p=r.Replace;let n=d(y.location,e,t);s&&s(n,e),g=x();let a=c(n,g),i=y.createHref(n);m.replaceState(a,"",i),h&&f&&f({action:p,location:y.location,delta:0})},go:e=>m.go(e)};return y}var p;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(p||(p={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function f(e,t,s){return void 0===s&&(s="/"),g(e,t,s,!1)}function g(e,t,s,n){let r=P(("string"===typeof t?h(t):t).pathname||"/",s);if(null==r)return null;let a=x(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let s=e.length===t.length&&e.slice(0,-1).every((e,s)=>e===t[s]);return s?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(a);let i=null;for(let o=0;null==i&&o<a.length;++o){let e=C(r);i=_(a[o],e,n)}return i}function x(e,t,s,n){void 0===t&&(t=[]),void 0===s&&(s=[]),void 0===n&&(n="");let r=(e,r,a)=>{let i={relativePath:void 0===a?e.path||"":a,caseSensitive:!0===e.caseSensitive,childrenIndex:r,route:e};i.relativePath.startsWith("/")&&(o(i.relativePath.startsWith(n),'Absolute route path "'+i.relativePath+'" nested under path "'+n+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),i.relativePath=i.relativePath.slice(n.length));let l=O([n,i.relativePath]),c=s.concat(i);e.children&&e.children.length>0&&(o(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+l+'".'),x(e.children,t,c,l)),(null!=e.path||e.index)&&t.push({path:l,score:A(l,e.index),routesMeta:c})};return e.forEach((e,t)=>{var s;if(""!==e.path&&null!=(s=e.path)&&s.includes("?"))for(let n of v(e.path))r(e,t,n);else r(e,t)}),t}function v(e){let t=e.split("/");if(0===t.length)return[];let[s,...n]=t,r=s.endsWith("?"),a=s.replace(/\?$/,"");if(0===n.length)return r?[a,""]:[a];let i=v(n.join("/")),o=[];return o.push(...i.map(e=>""===e?a:[a,e].join("/"))),r&&o.push(...i),o.map(t=>e.startsWith("/")&&""===t?"/":t)}const b=/^:[\w-]+$/,y=3,j=2,w=1,N=10,S=-2,k=e=>"*"===e;function A(e,t){let s=e.split("/"),n=s.length;return s.some(k)&&(n+=S),t&&(n+=j),s.filter(e=>!k(e)).reduce((e,t)=>e+(b.test(t)?y:""===t?w:N),n)}function _(e,t,s){void 0===s&&(s=!1);let{routesMeta:n}=e,r={},a="/",i=[];for(let o=0;o<n.length;++o){let e=n[o],l=o===n.length-1,c="/"===a?t:t.slice(a.length)||"/",d=E({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),u=e.route;if(!d&&l&&s&&!n[n.length-1].route.index&&(d=E({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!d)return null;Object.assign(r,d.params),i.push({params:r,pathname:O([a,d.pathname]),pathnameBase:L(O([a,d.pathnameBase])),route:u}),"/"!==d.pathnameBase&&(a=O([a,d.pathnameBase]))}return i}function E(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[s,n]=function(e,t,s){void 0===t&&(t=!1);void 0===s&&(s=!0);l("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let n=[],r="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,s)=>(n.push({paramName:t,isOptional:null!=s}),s?"/?([^\\/]+)?":"/([^\\/]+)"));e.endsWith("*")?(n.push({paramName:"*"}),r+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?r+="\\/*$":""!==e&&"/"!==e&&(r+="(?:(?=\\/|$))");let a=new RegExp(r,t?void 0:"i");return[a,n]}(e.path,e.caseSensitive,e.end),r=t.match(s);if(!r)return null;let a=r[0],i=a.replace(/(.)\/+$/,"$1"),o=r.slice(1);return{params:n.reduce((e,t,s)=>{let{paramName:n,isOptional:r}=t;if("*"===n){let e=o[s]||"";i=a.slice(0,a.length-e.length).replace(/(.)\/+$/,"$1")}const l=o[s];return e[n]=r&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{}),pathname:a,pathnameBase:i,pattern:e}}function C(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return l(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function P(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let s=t.endsWith("/")?t.length-1:t.length,n=e.charAt(s);return n&&"/"!==n?null:e.slice(s)||"/"}function T(e,t,s,n){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the `to."+s+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function I(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function R(e,t){let s=I(e);return t?s.map((e,t)=>t===s.length-1?e.pathname:e.pathnameBase):s.map(e=>e.pathnameBase)}function D(e,t,s,r){let a;void 0===r&&(r=!1),"string"===typeof e?a=h(e):(a=n({},e),o(!a.pathname||!a.pathname.includes("?"),T("?","pathname","search",a)),o(!a.pathname||!a.pathname.includes("#"),T("#","pathname","hash",a)),o(!a.search||!a.search.includes("#"),T("#","search","hash",a)));let i,l=""===e||""===a.pathname,c=l?"/":a.pathname;if(null==c)i=s;else{let e=t.length-1;if(!r&&c.startsWith("..")){let t=c.split("/");for(;".."===t[0];)t.shift(),e-=1;a.pathname=t.join("/")}i=e>=0?t[e]:"/"}let d=function(e,t){void 0===t&&(t="/");let{pathname:s,search:n="",hash:r=""}="string"===typeof e?h(e):e,a=s?s.startsWith("/")?s:function(e,t){let s=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?s.length>1&&s.pop():"."!==e&&s.push(e)}),s.length>1?s.join("/"):"/"}(s,t):t;return{pathname:a,search:M(n),hash:z(r)}}(a,i),u=c&&"/"!==c&&c.endsWith("/"),m=(l||"."===c)&&s.endsWith("/");return d.pathname.endsWith("/")||!u&&!m||(d.pathname+="/"),d}const O=e=>e.join("/").replace(/\/\/+/g,"/"),L=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),M=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",z=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";class F extends Error{}function U(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const B=["post","put","patch","delete"],q=(new Set(B),["get",...B]);new Set(q),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred")},2285:e=>{var t,s,n=e.exports={};function r(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function i(e){if(t===setTimeout)return setTimeout(e,0);if((t===r||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(s){try{return t.call(null,e,0)}catch(s){return t.call(this,e,0)}}}!function(){try{t="function"===typeof setTimeout?setTimeout:r}catch(e){t=r}try{s="function"===typeof clearTimeout?clearTimeout:a}catch(e){s=a}}();var o,l=[],c=!1,d=-1;function u(){c&&o&&(c=!1,o.length?l=o.concat(l):d=-1,l.length&&h())}function h(){if(!c){var e=i(u);c=!0;for(var t=l.length;t;){for(o=l,l=[];++d<t;)o&&o[d].run();d=-1,t=l.length}o=null,c=!1,function(e){if(s===clearTimeout)return clearTimeout(e);if((s===a||!s)&&clearTimeout)return s=clearTimeout,clearTimeout(e);try{return s(e)}catch(t){try{return s.call(null,e)}catch(t){return s.call(this,e)}}}(e)}}function m(e,t){this.fun=e,this.array=t}function p(){}n.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var s=1;s<arguments.length;s++)t[s-1]=arguments[s];l.push(new m(e,t)),1!==l.length||c||i(h)},m.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=p,n.addListener=p,n.once=p,n.off=p,n.removeListener=p,n.removeAllListeners=p,n.emit=p,n.prependListener=p,n.prependOnceListener=p,n.listeners=function(e){return[]},n.binding=function(e){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(e){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},2555:(e,t,s)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function r(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var r=s.call(e,t||"default");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:t+""}function a(e,t,s){return(t=r(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function i(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,n)}return s}function o(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?i(Object(s),!0).forEach(function(t){a(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):i(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}s.d(t,{A:()=>o})},2611:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});class s extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}}t.default=s},2730:(e,t,s)=>{"use strict";var n=s(5043),r=s(8853);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,s=1;s<arguments.length;s++)t+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(o[e]=t,e=0;e<t.length;e++)i.add(t[e])}var d=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),u=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},p={};function f(e,t,s,n,r,a,i){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=n,this.attributeNamespace=r,this.mustUseProperty=s,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=i}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){g[e]=new f(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];g[t]=new f(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){g[e]=new f(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){g[e]=new f(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){g[e]=new f(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){g[e]=new f(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){g[e]=new f(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){g[e]=new f(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){g[e]=new f(e,5,!1,e.toLowerCase(),null,!1,!1)});var x=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function b(e,t,s,n){var r=g.hasOwnProperty(t)?g[t]:null;(null!==r?0!==r.type:n||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,s,n){if(null===t||"undefined"===typeof t||function(e,t,s,n){if(null!==s&&0===s.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!n&&(null!==s?!s.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,s,n))return!0;if(n)return!1;if(null!==s)switch(s.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,s,r,n)&&(s=null),n||null===r?function(e){return!!u.call(p,e)||!u.call(m,e)&&(h.test(e)?p[e]=!0:(m[e]=!0,!1))}(t)&&(null===s?e.removeAttribute(t):e.setAttribute(t,""+s)):r.mustUseProperty?e[r.propertyName]=null===s?3!==r.type&&"":s:(t=r.attributeName,n=r.attributeNamespace,null===s?e.removeAttribute(t):(s=3===(r=r.type)||4===r&&!0===s?"":""+s,n?e.setAttributeNS(n,t,s):e.setAttribute(t,s))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(x,v);g[t]=new f(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(x,v);g[t]=new f(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(x,v);g[t]=new f(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){g[e]=new f(e,1,!1,e.toLowerCase(),null,!1,!1)}),g.xlinkHref=new f("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){g[e]=new f(e,1,!1,e.toLowerCase(),null,!0,!0)});var y=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,j=Symbol.for("react.element"),w=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),A=Symbol.for("react.provider"),_=Symbol.for("react.context"),E=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),T=Symbol.for("react.memo"),I=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var R=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var D=Symbol.iterator;function O(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=D&&e[D]||e["@@iterator"])?e:null}var L,M=Object.assign;function z(e){if(void 0===L)try{throw Error()}catch(s){var t=s.stack.trim().match(/\n( *(at )?)/);L=t&&t[1]||""}return"\n"+L+e}var F=!1;function U(e,t){if(!e||F)return"";F=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var n=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){n=c}e.call(t.prototype)}else{try{throw Error()}catch(c){n=c}e()}}catch(c){if(c&&n&&"string"===typeof c.stack){for(var r=c.stack.split("\n"),a=n.stack.split("\n"),i=r.length-1,o=a.length-1;1<=i&&0<=o&&r[i]!==a[o];)o--;for(;1<=i&&0<=o;i--,o--)if(r[i]!==a[o]){if(1!==i||1!==o)do{if(i--,0>--o||r[i]!==a[o]){var l="\n"+r[i].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=i&&0<=o);break}}}finally{F=!1,Error.prepareStackTrace=s}return(e=e?e.displayName||e.name:"")?z(e):""}function B(e){switch(e.tag){case 5:return z(e.type);case 16:return z("Lazy");case 13:return z("Suspense");case 19:return z("SuspenseList");case 0:case 2:case 15:return e=U(e.type,!1);case 11:return e=U(e.type.render,!1);case 1:return e=U(e.type,!0);default:return""}}function q(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case N:return"Fragment";case w:return"Portal";case k:return"Profiler";case S:return"StrictMode";case C:return"Suspense";case P:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case _:return(e.displayName||"Context")+".Consumer";case A:return(e._context.displayName||"Context")+".Provider";case E:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case T:return null!==(t=e.displayName||null)?t:q(e.type)||"Memo";case I:t=e._payload,e=e._init;try{return q(e(t))}catch(s){}}return null}function V(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return q(t);case 8:return t===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function W(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function G(e){e._valueTracker||(e._valueTracker=function(e){var t=W(e)?"checked":"value",s=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof s&&"function"===typeof s.get&&"function"===typeof s.set){var r=s.get,a=s.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(e){n=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:s.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function K(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var s=t.getValue(),n="";return e&&(n=W(e)?e.checked?"true":"false":e.value),(e=n)!==s&&(t.setValue(e),!0)}function Z(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function J(e,t){var s=t.checked;return M({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=s?s:e._wrapperState.initialChecked})}function Q(e,t){var s=null==t.defaultValue?"":t.defaultValue,n=null!=t.checked?t.checked:t.defaultChecked;s=H(null!=t.value?t.value:s),e._wrapperState={initialChecked:n,initialValue:s,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Y(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function $(e,t){Y(e,t);var s=H(t.value),n=t.type;if(null!=s)"number"===n?(0===s&&""===e.value||e.value!=s)&&(e.value=""+s):e.value!==""+s&&(e.value=""+s);else if("submit"===n||"reset"===n)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,s):t.hasOwnProperty("defaultValue")&&ee(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function X(e,t,s){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!("submit"!==n&&"reset"!==n||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,s||t===e.value||(e.value=t),e.defaultValue=t}""!==(s=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==s&&(e.name=s)}function ee(e,t,s){"number"===t&&Z(e.ownerDocument)===e||(null==s?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+s&&(e.defaultValue=""+s))}var te=Array.isArray;function se(e,t,s,n){if(e=e.options,t){t={};for(var r=0;r<s.length;r++)t["$"+s[r]]=!0;for(s=0;s<e.length;s++)r=t.hasOwnProperty("$"+e[s].value),e[s].selected!==r&&(e[s].selected=r),r&&n&&(e[s].defaultSelected=!0)}else{for(s=""+H(s),t=null,r=0;r<e.length;r++){if(e[r].value===s)return e[r].selected=!0,void(n&&(e[r].defaultSelected=!0));null!==t||e[r].disabled||(t=e[r])}null!==t&&(t.selected=!0)}}function ne(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return M({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function re(e,t){var s=t.value;if(null==s){if(s=t.children,t=t.defaultValue,null!=s){if(null!=t)throw Error(a(92));if(te(s)){if(1<s.length)throw Error(a(93));s=s[0]}t=s}null==t&&(t=""),s=t}e._wrapperState={initialValue:H(s)}}function ae(e,t){var s=H(t.value),n=H(t.defaultValue);null!=s&&((s=""+s)!==e.value&&(e.value=s),null==t.defaultValue&&e.defaultValue!==s&&(e.defaultValue=s)),null!=n&&(e.defaultValue=""+n)}function ie(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,de,ue=(de=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,s,n){MSApp.execUnsafeLocalFunction(function(){return de(e,t)})}:de);function he(e,t){if(t){var s=e.firstChild;if(s&&s===e.lastChild&&3===s.nodeType)return void(s.nodeValue=t)}e.textContent=t}var me={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function fe(e,t,s){return null==t||"boolean"===typeof t||""===t?"":s||"number"!==typeof t||0===t||me.hasOwnProperty(e)&&me[e]?(""+t).trim():t+"px"}function ge(e,t){for(var s in e=e.style,t)if(t.hasOwnProperty(s)){var n=0===s.indexOf("--"),r=fe(s,t[s],n);"float"===s&&(s="cssFloat"),n?e.setProperty(s,r):e[s]=r}}Object.keys(me).forEach(function(e){pe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),me[t]=me[e]})});var xe=M({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(xe[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ye=null;function je(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var we=null,Ne=null,Se=null;function ke(e){if(e=br(e)){if("function"!==typeof we)throw Error(a(280));var t=e.stateNode;t&&(t=jr(t),we(e.stateNode,e.type,t))}}function Ae(e){Ne?Se?Se.push(e):Se=[e]:Ne=e}function _e(){if(Ne){var e=Ne,t=Se;if(Se=Ne=null,ke(e),t)for(e=0;e<t.length;e++)ke(t[e])}}function Ee(e,t){return e(t)}function Ce(){}var Pe=!1;function Te(e,t,s){if(Pe)return e(t,s);Pe=!0;try{return Ee(e,t,s)}finally{Pe=!1,(null!==Ne||null!==Se)&&(Ce(),_e())}}function Ie(e,t){var s=e.stateNode;if(null===s)return null;var n=jr(s);if(null===n)return null;s=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(n=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!n;break e;default:e=!1}if(e)return null;if(s&&"function"!==typeof s)throw Error(a(231,t,typeof s));return s}var Re=!1;if(d)try{var De={};Object.defineProperty(De,"passive",{get:function(){Re=!0}}),window.addEventListener("test",De,De),window.removeEventListener("test",De,De)}catch(de){Re=!1}function Oe(e,t,s,n,r,a,i,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(s,c)}catch(d){this.onError(d)}}var Le=!1,Me=null,ze=!1,Fe=null,Ue={onError:function(e){Le=!0,Me=e}};function Be(e,t,s,n,r,a,i,o,l){Le=!1,Me=null,Oe.apply(Ue,arguments)}function qe(e){var t=e,s=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(s=t.return),e=t.return}while(e)}return 3===t.tag?s:null}function Ve(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function He(e){if(qe(e)!==e)throw Error(a(188))}function We(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=qe(e)))throw Error(a(188));return t!==e?null:e}for(var s=e,n=t;;){var r=s.return;if(null===r)break;var i=r.alternate;if(null===i){if(null!==(n=r.return)){s=n;continue}break}if(r.child===i.child){for(i=r.child;i;){if(i===s)return He(r),e;if(i===n)return He(r),t;i=i.sibling}throw Error(a(188))}if(s.return!==n.return)s=r,n=i;else{for(var o=!1,l=r.child;l;){if(l===s){o=!0,s=r,n=i;break}if(l===n){o=!0,n=r,s=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===s){o=!0,s=i,n=r;break}if(l===n){o=!0,n=i,s=r;break}l=l.sibling}if(!o)throw Error(a(189))}}if(s.alternate!==n)throw Error(a(190))}if(3!==s.tag)throw Error(a(188));return s.stateNode.current===s?e:t}(e))?Ge(e):null}function Ge(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ge(e);if(null!==t)return t;e=e.sibling}return null}var Ke=r.unstable_scheduleCallback,Ze=r.unstable_cancelCallback,Je=r.unstable_shouldYield,Qe=r.unstable_requestPaint,Ye=r.unstable_now,$e=r.unstable_getCurrentPriorityLevel,Xe=r.unstable_ImmediatePriority,et=r.unstable_UserBlockingPriority,tt=r.unstable_NormalPriority,st=r.unstable_LowPriority,nt=r.unstable_IdlePriority,rt=null,at=null;var it=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ot(e)/lt|0)|0},ot=Math.log,lt=Math.LN2;var ct=64,dt=4194304;function ut(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var s=e.pendingLanes;if(0===s)return 0;var n=0,r=e.suspendedLanes,a=e.pingedLanes,i=268435455&s;if(0!==i){var o=i&~r;0!==o?n=ut(o):0!==(a&=i)&&(n=ut(a))}else 0!==(i=s&~r)?n=ut(i):0!==a&&(n=ut(a));if(0===n)return 0;if(0!==t&&t!==n&&0===(t&r)&&((r=n&-n)>=(a=t&-t)||16===r&&0!==(4194240&a)))return t;if(0!==(4&n)&&(n|=16&s),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=n;0<t;)r=1<<(s=31-it(t)),n|=e[s],t&=~r;return n}function mt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function ft(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],s=0;31>s;s++)t.push(e);return t}function xt(e,t,s){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-it(t)]=s}function vt(e,t){var s=e.entangledLanes|=t;for(e=e.entanglements;s;){var n=31-it(s),r=1<<n;r&t|e[n]&t&&(e[n]|=t),s&=~r}}var bt=0;function yt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var jt,wt,Nt,St,kt,At=!1,_t=[],Et=null,Ct=null,Pt=null,Tt=new Map,It=new Map,Rt=[],Dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ot(e,t){switch(e){case"focusin":case"focusout":Et=null;break;case"dragenter":case"dragleave":Ct=null;break;case"mouseover":case"mouseout":Pt=null;break;case"pointerover":case"pointerout":Tt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":It.delete(t.pointerId)}}function Lt(e,t,s,n,r,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:s,eventSystemFlags:n,nativeEvent:a,targetContainers:[r]},null!==t&&(null!==(t=br(t))&&wt(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,null!==r&&-1===t.indexOf(r)&&t.push(r),e)}function Mt(e){var t=vr(e.target);if(null!==t){var s=qe(t);if(null!==s)if(13===(t=s.tag)){if(null!==(t=Ve(s)))return e.blockedOn=t,void kt(e.priority,function(){Nt(s)})}else if(3===t&&s.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===s.tag?s.stateNode.containerInfo:null)}e.blockedOn=null}function zt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var s=Jt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==s)return null!==(t=br(s))&&wt(t),e.blockedOn=s,!1;var n=new(s=e.nativeEvent).constructor(s.type,s);ye=n,s.target.dispatchEvent(n),ye=null,t.shift()}return!0}function Ft(e,t,s){zt(e)&&s.delete(t)}function Ut(){At=!1,null!==Et&&zt(Et)&&(Et=null),null!==Ct&&zt(Ct)&&(Ct=null),null!==Pt&&zt(Pt)&&(Pt=null),Tt.forEach(Ft),It.forEach(Ft)}function Bt(e,t){e.blockedOn===t&&(e.blockedOn=null,At||(At=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Ut)))}function qt(e){function t(t){return Bt(t,e)}if(0<_t.length){Bt(_t[0],e);for(var s=1;s<_t.length;s++){var n=_t[s];n.blockedOn===e&&(n.blockedOn=null)}}for(null!==Et&&Bt(Et,e),null!==Ct&&Bt(Ct,e),null!==Pt&&Bt(Pt,e),Tt.forEach(t),It.forEach(t),s=0;s<Rt.length;s++)(n=Rt[s]).blockedOn===e&&(n.blockedOn=null);for(;0<Rt.length&&null===(s=Rt[0]).blockedOn;)Mt(s),null===s.blockedOn&&Rt.shift()}var Vt=y.ReactCurrentBatchConfig,Ht=!0;function Wt(e,t,s,n){var r=bt,a=Vt.transition;Vt.transition=null;try{bt=1,Kt(e,t,s,n)}finally{bt=r,Vt.transition=a}}function Gt(e,t,s,n){var r=bt,a=Vt.transition;Vt.transition=null;try{bt=4,Kt(e,t,s,n)}finally{bt=r,Vt.transition=a}}function Kt(e,t,s,n){if(Ht){var r=Jt(e,t,s,n);if(null===r)Hn(e,t,n,Zt,s),Ot(e,n);else if(function(e,t,s,n,r){switch(t){case"focusin":return Et=Lt(Et,e,t,s,n,r),!0;case"dragenter":return Ct=Lt(Ct,e,t,s,n,r),!0;case"mouseover":return Pt=Lt(Pt,e,t,s,n,r),!0;case"pointerover":var a=r.pointerId;return Tt.set(a,Lt(Tt.get(a)||null,e,t,s,n,r)),!0;case"gotpointercapture":return a=r.pointerId,It.set(a,Lt(It.get(a)||null,e,t,s,n,r)),!0}return!1}(r,e,t,s,n))n.stopPropagation();else if(Ot(e,n),4&t&&-1<Dt.indexOf(e)){for(;null!==r;){var a=br(r);if(null!==a&&jt(a),null===(a=Jt(e,t,s,n))&&Hn(e,t,n,Zt,s),a===r)break;r=a}null!==r&&n.stopPropagation()}else Hn(e,t,n,null,s)}}var Zt=null;function Jt(e,t,s,n){if(Zt=null,null!==(e=vr(e=je(n))))if(null===(t=qe(e)))e=null;else if(13===(s=t.tag)){if(null!==(e=Ve(t)))return e;e=null}else if(3===s){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Zt=e,null}function Qt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($e()){case Xe:return 1;case et:return 4;case tt:case st:return 16;case nt:return 536870912;default:return 16}default:return 16}}var Yt=null,$t=null,Xt=null;function es(){if(Xt)return Xt;var e,t,s=$t,n=s.length,r="value"in Yt?Yt.value:Yt.textContent,a=r.length;for(e=0;e<n&&s[e]===r[e];e++);var i=n-e;for(t=1;t<=i&&s[n-t]===r[a-t];t++);return Xt=r.slice(e,1<t?1-t:void 0)}function ts(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function ss(){return!0}function ns(){return!1}function rs(e){function t(t,s,n,r,a){for(var i in this._reactName=t,this._targetInst=n,this.type=s,this.nativeEvent=r,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(i)&&(t=e[i],this[i]=t?t(r):r[i]);return this.isDefaultPrevented=(null!=r.defaultPrevented?r.defaultPrevented:!1===r.returnValue)?ss:ns,this.isPropagationStopped=ns,this}return M(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=ss)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=ss)},persist:function(){},isPersistent:ss}),t}var as,is,os,ls={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cs=rs(ls),ds=M({},ls,{view:0,detail:0}),us=rs(ds),hs=M({},ds,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ss,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==os&&(os&&"mousemove"===e.type?(as=e.screenX-os.screenX,is=e.screenY-os.screenY):is=as=0,os=e),as)},movementY:function(e){return"movementY"in e?e.movementY:is}}),ms=rs(hs),ps=rs(M({},hs,{dataTransfer:0})),fs=rs(M({},ds,{relatedTarget:0})),gs=rs(M({},ls,{animationName:0,elapsedTime:0,pseudoElement:0})),xs=M({},ls,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),vs=rs(xs),bs=rs(M({},ls,{data:0})),ys={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},js={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ws={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ns(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=ws[e])&&!!t[e]}function Ss(){return Ns}var ks=M({},ds,{key:function(e){if(e.key){var t=ys[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=ts(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?js[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ss,charCode:function(e){return"keypress"===e.type?ts(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?ts(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),As=rs(ks),_s=rs(M({},hs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Es=rs(M({},ds,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ss})),Cs=rs(M({},ls,{propertyName:0,elapsedTime:0,pseudoElement:0})),Ps=M({},hs,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ts=rs(Ps),Is=[9,13,27,32],Rs=d&&"CompositionEvent"in window,Ds=null;d&&"documentMode"in document&&(Ds=document.documentMode);var Os=d&&"TextEvent"in window&&!Ds,Ls=d&&(!Rs||Ds&&8<Ds&&11>=Ds),Ms=String.fromCharCode(32),zs=!1;function Fs(e,t){switch(e){case"keyup":return-1!==Is.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Us(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Bs=!1;var qs={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vs(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qs[e.type]:"textarea"===t}function Hs(e,t,s,n){Ae(n),0<(t=Gn(t,"onChange")).length&&(s=new cs("onChange","change",null,s,n),e.push({event:s,listeners:t}))}var Ws=null,Gs=null;function Ks(e){zn(e,0)}function Zs(e){if(K(yr(e)))return e}function Js(e,t){if("change"===e)return t}var Qs=!1;if(d){var Ys;if(d){var $s="oninput"in document;if(!$s){var Xs=document.createElement("div");Xs.setAttribute("oninput","return;"),$s="function"===typeof Xs.oninput}Ys=$s}else Ys=!1;Qs=Ys&&(!document.documentMode||9<document.documentMode)}function en(){Ws&&(Ws.detachEvent("onpropertychange",tn),Gs=Ws=null)}function tn(e){if("value"===e.propertyName&&Zs(Gs)){var t=[];Hs(t,Gs,e,je(e)),Te(Ks,t)}}function sn(e,t,s){"focusin"===e?(en(),Gs=s,(Ws=t).attachEvent("onpropertychange",tn)):"focusout"===e&&en()}function nn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Zs(Gs)}function rn(e,t){if("click"===e)return Zs(t)}function an(e,t){if("input"===e||"change"===e)return Zs(t)}var on="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function ln(e,t){if(on(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var s=Object.keys(e),n=Object.keys(t);if(s.length!==n.length)return!1;for(n=0;n<s.length;n++){var r=s[n];if(!u.call(t,r)||!on(e[r],t[r]))return!1}return!0}function cn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function dn(e,t){var s,n=cn(e);for(e=0;n;){if(3===n.nodeType){if(s=e+n.textContent.length,e<=t&&s>=t)return{node:n,offset:t-e};e=s}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=cn(n)}}function un(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?un(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hn(){for(var e=window,t=Z();t instanceof e.HTMLIFrameElement;){try{var s="string"===typeof t.contentWindow.location.href}catch(n){s=!1}if(!s)break;t=Z((e=t.contentWindow).document)}return t}function mn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pn(e){var t=hn(),s=e.focusedElem,n=e.selectionRange;if(t!==s&&s&&s.ownerDocument&&un(s.ownerDocument.documentElement,s)){if(null!==n&&mn(s))if(t=n.start,void 0===(e=n.end)&&(e=t),"selectionStart"in s)s.selectionStart=t,s.selectionEnd=Math.min(e,s.value.length);else if((e=(t=s.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var r=s.textContent.length,a=Math.min(n.start,r);n=void 0===n.end?a:Math.min(n.end,r),!e.extend&&a>n&&(r=n,n=a,a=r),r=dn(s,a);var i=dn(s,n);r&&i&&(1!==e.rangeCount||e.anchorNode!==r.node||e.anchorOffset!==r.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&((t=t.createRange()).setStart(r.node,r.offset),e.removeAllRanges(),a>n?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}for(t=[],e=s;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof s.focus&&s.focus(),s=0;s<t.length;s++)(e=t[s]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var fn=d&&"documentMode"in document&&11>=document.documentMode,gn=null,xn=null,vn=null,bn=!1;function yn(e,t,s){var n=s.window===s?s.document:9===s.nodeType?s:s.ownerDocument;bn||null==gn||gn!==Z(n)||("selectionStart"in(n=gn)&&mn(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},vn&&ln(vn,n)||(vn=n,0<(n=Gn(xn,"onSelect")).length&&(t=new cs("onSelect","select",null,t,s),e.push({event:t,listeners:n}),t.target=gn)))}function jn(e,t){var s={};return s[e.toLowerCase()]=t.toLowerCase(),s["Webkit"+e]="webkit"+t,s["Moz"+e]="moz"+t,s}var wn={animationend:jn("Animation","AnimationEnd"),animationiteration:jn("Animation","AnimationIteration"),animationstart:jn("Animation","AnimationStart"),transitionend:jn("Transition","TransitionEnd")},Nn={},Sn={};function kn(e){if(Nn[e])return Nn[e];if(!wn[e])return e;var t,s=wn[e];for(t in s)if(s.hasOwnProperty(t)&&t in Sn)return Nn[e]=s[t];return e}d&&(Sn=document.createElement("div").style,"AnimationEvent"in window||(delete wn.animationend.animation,delete wn.animationiteration.animation,delete wn.animationstart.animation),"TransitionEvent"in window||delete wn.transitionend.transition);var An=kn("animationend"),_n=kn("animationiteration"),En=kn("animationstart"),Cn=kn("transitionend"),Pn=new Map,Tn="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function In(e,t){Pn.set(e,t),l(t,[e])}for(var Rn=0;Rn<Tn.length;Rn++){var Dn=Tn[Rn];In(Dn.toLowerCase(),"on"+(Dn[0].toUpperCase()+Dn.slice(1)))}In(An,"onAnimationEnd"),In(_n,"onAnimationIteration"),In(En,"onAnimationStart"),In("dblclick","onDoubleClick"),In("focusin","onFocus"),In("focusout","onBlur"),In(Cn,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var On="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ln=new Set("cancel close invalid load scroll toggle".split(" ").concat(On));function Mn(e,t,s){var n=e.type||"unknown-event";e.currentTarget=s,function(e,t,s,n,r,i,o,l,c){if(Be.apply(this,arguments),Le){if(!Le)throw Error(a(198));var d=Me;Le=!1,Me=null,ze||(ze=!0,Fe=d)}}(n,t,void 0,e),e.currentTarget=null}function zn(e,t){t=0!==(4&t);for(var s=0;s<e.length;s++){var n=e[s],r=n.event;n=n.listeners;e:{var a=void 0;if(t)for(var i=n.length-1;0<=i;i--){var o=n[i],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==a&&r.isPropagationStopped())break e;Mn(r,o,c),a=l}else for(i=0;i<n.length;i++){if(l=(o=n[i]).instance,c=o.currentTarget,o=o.listener,l!==a&&r.isPropagationStopped())break e;Mn(r,o,c),a=l}}}if(ze)throw e=Fe,ze=!1,Fe=null,e}function Fn(e,t){var s=t[fr];void 0===s&&(s=t[fr]=new Set);var n=e+"__bubble";s.has(n)||(Vn(t,e,2,!1),s.add(n))}function Un(e,t,s){var n=0;t&&(n|=4),Vn(s,e,n,t)}var Bn="_reactListening"+Math.random().toString(36).slice(2);function qn(e){if(!e[Bn]){e[Bn]=!0,i.forEach(function(t){"selectionchange"!==t&&(Ln.has(t)||Un(t,!1,e),Un(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Bn]||(t[Bn]=!0,Un("selectionchange",!1,t))}}function Vn(e,t,s,n){switch(Qt(t)){case 1:var r=Wt;break;case 4:r=Gt;break;default:r=Kt}s=r.bind(null,t,s,e),r=void 0,!Re||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(r=!0),n?void 0!==r?e.addEventListener(t,s,{capture:!0,passive:r}):e.addEventListener(t,s,!0):void 0!==r?e.addEventListener(t,s,{passive:r}):e.addEventListener(t,s,!1)}function Hn(e,t,s,n,r){var a=n;if(0===(1&t)&&0===(2&t)&&null!==n)e:for(;;){if(null===n)return;var i=n.tag;if(3===i||4===i){var o=n.stateNode.containerInfo;if(o===r||8===o.nodeType&&o.parentNode===r)break;if(4===i)for(i=n.return;null!==i;){var l=i.tag;if((3===l||4===l)&&((l=i.stateNode.containerInfo)===r||8===l.nodeType&&l.parentNode===r))return;i=i.return}for(;null!==o;){if(null===(i=vr(o)))return;if(5===(l=i.tag)||6===l){n=a=i;continue e}o=o.parentNode}}n=n.return}Te(function(){var n=a,r=je(s),i=[];e:{var o=Pn.get(e);if(void 0!==o){var l=cs,c=e;switch(e){case"keypress":if(0===ts(s))break e;case"keydown":case"keyup":l=As;break;case"focusin":c="focus",l=fs;break;case"focusout":c="blur",l=fs;break;case"beforeblur":case"afterblur":l=fs;break;case"click":if(2===s.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=ms;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=ps;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Es;break;case An:case _n:case En:l=gs;break;case Cn:l=Cs;break;case"scroll":l=us;break;case"wheel":l=Ts;break;case"copy":case"cut":case"paste":l=vs;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=_s}var d=0!==(4&t),u=!d&&"scroll"===e,h=d?null!==o?o+"Capture":null:o;d=[];for(var m,p=n;null!==p;){var f=(m=p).stateNode;if(5===m.tag&&null!==f&&(m=f,null!==h&&(null!=(f=Ie(p,h))&&d.push(Wn(p,f,m)))),u)break;p=p.return}0<d.length&&(o=new l(o,c,null,s,r),i.push({event:o,listeners:d}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||s===ye||!(c=s.relatedTarget||s.fromElement)||!vr(c)&&!c[pr])&&(l||o)&&(o=r.window===r?r:(o=r.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=n,null!==(c=(c=s.relatedTarget||s.toElement)?vr(c):null)&&(c!==(u=qe(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=n),l!==c)){if(d=ms,f="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(d=_s,f="onPointerLeave",h="onPointerEnter",p="pointer"),u=null==l?o:yr(l),m=null==c?o:yr(c),(o=new d(f,p+"leave",l,s,r)).target=u,o.relatedTarget=m,f=null,vr(r)===n&&((d=new d(h,p+"enter",c,s,r)).target=m,d.relatedTarget=u,f=d),u=f,l&&c)e:{for(h=c,p=0,m=d=l;m;m=Kn(m))p++;for(m=0,f=h;f;f=Kn(f))m++;for(;0<p-m;)d=Kn(d),p--;for(;0<m-p;)h=Kn(h),m--;for(;p--;){if(d===h||null!==h&&d===h.alternate)break e;d=Kn(d),h=Kn(h)}d=null}else d=null;null!==l&&Zn(i,o,l,d,!1),null!==c&&null!==u&&Zn(i,u,c,d,!0)}if("select"===(l=(o=n?yr(n):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var g=Js;else if(Vs(o))if(Qs)g=an;else{g=nn;var x=sn}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(g=rn);switch(g&&(g=g(e,n))?Hs(i,g,s,r):(x&&x(e,o,n),"focusout"===e&&(x=o._wrapperState)&&x.controlled&&"number"===o.type&&ee(o,"number",o.value)),x=n?yr(n):window,e){case"focusin":(Vs(x)||"true"===x.contentEditable)&&(gn=x,xn=n,vn=null);break;case"focusout":vn=xn=gn=null;break;case"mousedown":bn=!0;break;case"contextmenu":case"mouseup":case"dragend":bn=!1,yn(i,s,r);break;case"selectionchange":if(fn)break;case"keydown":case"keyup":yn(i,s,r)}var v;if(Rs)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Bs?Fs(e,s)&&(b="onCompositionEnd"):"keydown"===e&&229===s.keyCode&&(b="onCompositionStart");b&&(Ls&&"ko"!==s.locale&&(Bs||"onCompositionStart"!==b?"onCompositionEnd"===b&&Bs&&(v=es()):($t="value"in(Yt=r)?Yt.value:Yt.textContent,Bs=!0)),0<(x=Gn(n,b)).length&&(b=new bs(b,e,null,s,r),i.push({event:b,listeners:x}),v?b.data=v:null!==(v=Us(s))&&(b.data=v))),(v=Os?function(e,t){switch(e){case"compositionend":return Us(t);case"keypress":return 32!==t.which?null:(zs=!0,Ms);case"textInput":return(e=t.data)===Ms&&zs?null:e;default:return null}}(e,s):function(e,t){if(Bs)return"compositionend"===e||!Rs&&Fs(e,t)?(e=es(),Xt=$t=Yt=null,Bs=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ls&&"ko"!==t.locale?null:t.data}}(e,s))&&(0<(n=Gn(n,"onBeforeInput")).length&&(r=new bs("onBeforeInput","beforeinput",null,s,r),i.push({event:r,listeners:n}),r.data=v))}zn(i,t)})}function Wn(e,t,s){return{instance:e,listener:t,currentTarget:s}}function Gn(e,t){for(var s=t+"Capture",n=[];null!==e;){var r=e,a=r.stateNode;5===r.tag&&null!==a&&(r=a,null!=(a=Ie(e,s))&&n.unshift(Wn(e,a,r)),null!=(a=Ie(e,t))&&n.push(Wn(e,a,r))),e=e.return}return n}function Kn(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Zn(e,t,s,n,r){for(var a=t._reactName,i=[];null!==s&&s!==n;){var o=s,l=o.alternate,c=o.stateNode;if(null!==l&&l===n)break;5===o.tag&&null!==c&&(o=c,r?null!=(l=Ie(s,a))&&i.unshift(Wn(s,l,o)):r||null!=(l=Ie(s,a))&&i.push(Wn(s,l,o))),s=s.return}0!==i.length&&e.push({event:t,listeners:i})}var Jn=/\r\n?/g,Qn=/\u0000|\uFFFD/g;function Yn(e){return("string"===typeof e?e:""+e).replace(Jn,"\n").replace(Qn,"")}function $n(e,t,s){if(t=Yn(t),Yn(e)!==t&&s)throw Error(a(425))}function Xn(){}var er=null,tr=null;function sr(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var nr="function"===typeof setTimeout?setTimeout:void 0,rr="function"===typeof clearTimeout?clearTimeout:void 0,ar="function"===typeof Promise?Promise:void 0,ir="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ar?function(e){return ar.resolve(null).then(e).catch(or)}:nr;function or(e){setTimeout(function(){throw e})}function lr(e,t){var s=t,n=0;do{var r=s.nextSibling;if(e.removeChild(s),r&&8===r.nodeType)if("/$"===(s=r.data)){if(0===n)return e.removeChild(r),void qt(t);n--}else"$"!==s&&"$?"!==s&&"$!"!==s||n++;s=r}while(s);qt(t)}function cr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function dr(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var s=e.data;if("$"===s||"$!"===s||"$?"===s){if(0===t)return e;t--}else"/$"===s&&t++}e=e.previousSibling}return null}var ur=Math.random().toString(36).slice(2),hr="__reactFiber$"+ur,mr="__reactProps$"+ur,pr="__reactContainer$"+ur,fr="__reactEvents$"+ur,gr="__reactListeners$"+ur,xr="__reactHandles$"+ur;function vr(e){var t=e[hr];if(t)return t;for(var s=e.parentNode;s;){if(t=s[pr]||s[hr]){if(s=t.alternate,null!==t.child||null!==s&&null!==s.child)for(e=dr(e);null!==e;){if(s=e[hr])return s;e=dr(e)}return t}s=(e=s).parentNode}return null}function br(e){return!(e=e[hr]||e[pr])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function yr(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function jr(e){return e[mr]||null}var wr=[],Nr=-1;function Sr(e){return{current:e}}function kr(e){0>Nr||(e.current=wr[Nr],wr[Nr]=null,Nr--)}function Ar(e,t){Nr++,wr[Nr]=e.current,e.current=t}var _r={},Er=Sr(_r),Cr=Sr(!1),Pr=_r;function Tr(e,t){var s=e.type.contextTypes;if(!s)return _r;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var r,a={};for(r in s)a[r]=t[r];return n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Ir(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Rr(){kr(Cr),kr(Er)}function Dr(e,t,s){if(Er.current!==_r)throw Error(a(168));Ar(Er,t),Ar(Cr,s)}function Or(e,t,s){var n=e.stateNode;if(t=t.childContextTypes,"function"!==typeof n.getChildContext)return s;for(var r in n=n.getChildContext())if(!(r in t))throw Error(a(108,V(e)||"Unknown",r));return M({},s,n)}function Lr(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||_r,Pr=Er.current,Ar(Er,e),Ar(Cr,Cr.current),!0}function Mr(e,t,s){var n=e.stateNode;if(!n)throw Error(a(169));s?(e=Or(e,t,Pr),n.__reactInternalMemoizedMergedChildContext=e,kr(Cr),kr(Er),Ar(Er,e)):kr(Cr),Ar(Cr,s)}var zr=null,Fr=!1,Ur=!1;function Br(e){null===zr?zr=[e]:zr.push(e)}function qr(){if(!Ur&&null!==zr){Ur=!0;var e=0,t=bt;try{var s=zr;for(bt=1;e<s.length;e++){var n=s[e];do{n=n(!0)}while(null!==n)}zr=null,Fr=!1}catch(r){throw null!==zr&&(zr=zr.slice(e+1)),Ke(Xe,qr),r}finally{bt=t,Ur=!1}}return null}var Vr=[],Hr=0,Wr=null,Gr=0,Kr=[],Zr=0,Jr=null,Qr=1,Yr="";function $r(e,t){Vr[Hr++]=Gr,Vr[Hr++]=Wr,Wr=e,Gr=t}function Xr(e,t,s){Kr[Zr++]=Qr,Kr[Zr++]=Yr,Kr[Zr++]=Jr,Jr=e;var n=Qr;e=Yr;var r=32-it(n)-1;n&=~(1<<r),s+=1;var a=32-it(t)+r;if(30<a){var i=r-r%5;a=(n&(1<<i)-1).toString(32),n>>=i,r-=i,Qr=1<<32-it(t)+r|s<<r|n,Yr=a+e}else Qr=1<<a|s<<r|n,Yr=e}function ea(e){null!==e.return&&($r(e,1),Xr(e,1,0))}function ta(e){for(;e===Wr;)Wr=Vr[--Hr],Vr[Hr]=null,Gr=Vr[--Hr],Vr[Hr]=null;for(;e===Jr;)Jr=Kr[--Zr],Kr[Zr]=null,Yr=Kr[--Zr],Kr[Zr]=null,Qr=Kr[--Zr],Kr[Zr]=null}var sa=null,na=null,ra=!1,aa=null;function ia(e,t){var s=Tc(5,null,null,0);s.elementType="DELETED",s.stateNode=t,s.return=e,null===(t=e.deletions)?(e.deletions=[s],e.flags|=16):t.push(s)}function oa(e,t){switch(e.tag){case 5:var s=e.type;return null!==(t=1!==t.nodeType||s.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,sa=e,na=cr(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,sa=e,na=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(s=null!==Jr?{id:Qr,overflow:Yr}:null,e.memoizedState={dehydrated:t,treeContext:s,retryLane:1073741824},(s=Tc(18,null,null,0)).stateNode=t,s.return=e,e.child=s,sa=e,na=null,!0);default:return!1}}function la(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ca(e){if(ra){var t=na;if(t){var s=t;if(!oa(e,t)){if(la(e))throw Error(a(418));t=cr(s.nextSibling);var n=sa;t&&oa(e,t)?ia(n,s):(e.flags=-4097&e.flags|2,ra=!1,sa=e)}}else{if(la(e))throw Error(a(418));e.flags=-4097&e.flags|2,ra=!1,sa=e}}}function da(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;sa=e}function ua(e){if(e!==sa)return!1;if(!ra)return da(e),ra=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!sr(e.type,e.memoizedProps)),t&&(t=na)){if(la(e))throw ha(),Error(a(418));for(;t;)ia(e,t),t=cr(t.nextSibling)}if(da(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var s=e.data;if("/$"===s){if(0===t){na=cr(e.nextSibling);break e}t--}else"$"!==s&&"$!"!==s&&"$?"!==s||t++}e=e.nextSibling}na=null}}else na=sa?cr(e.stateNode.nextSibling):null;return!0}function ha(){for(var e=na;e;)e=cr(e.nextSibling)}function ma(){na=sa=null,ra=!1}function pa(e){null===aa?aa=[e]:aa.push(e)}var fa=y.ReactCurrentBatchConfig;function ga(e,t,s){if(null!==(e=s.ref)&&"function"!==typeof e&&"object"!==typeof e){if(s._owner){if(s=s._owner){if(1!==s.tag)throw Error(a(309));var n=s.stateNode}if(!n)throw Error(a(147,e));var r=n,i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=r.refs;null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!==typeof e)throw Error(a(284));if(!s._owner)throw Error(a(290,e))}return e}function xa(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function va(e){return(0,e._init)(e._payload)}function ba(e){function t(t,s){if(e){var n=t.deletions;null===n?(t.deletions=[s],t.flags|=16):n.push(s)}}function s(s,n){if(!e)return null;for(;null!==n;)t(s,n),n=n.sibling;return null}function n(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function r(e,t){return(e=Rc(e,t)).index=0,e.sibling=null,e}function i(t,s,n){return t.index=n,e?null!==(n=t.alternate)?(n=n.index)<s?(t.flags|=2,s):n:(t.flags|=2,s):(t.flags|=1048576,s)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,s,n){return null===t||6!==t.tag?((t=Mc(s,e.mode,n)).return=e,t):((t=r(t,s)).return=e,t)}function c(e,t,s,n){var a=s.type;return a===N?u(e,t,s.props.children,n,s.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===I&&va(a)===t.type)?((n=r(t,s.props)).ref=ga(e,t,s),n.return=e,n):((n=Dc(s.type,s.key,s.props,null,e.mode,n)).ref=ga(e,t,s),n.return=e,n)}function d(e,t,s,n){return null===t||4!==t.tag||t.stateNode.containerInfo!==s.containerInfo||t.stateNode.implementation!==s.implementation?((t=zc(s,e.mode,n)).return=e,t):((t=r(t,s.children||[])).return=e,t)}function u(e,t,s,n,a){return null===t||7!==t.tag?((t=Oc(s,e.mode,n,a)).return=e,t):((t=r(t,s)).return=e,t)}function h(e,t,s){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Mc(""+t,e.mode,s)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case j:return(s=Dc(t.type,t.key,t.props,null,e.mode,s)).ref=ga(e,null,t),s.return=e,s;case w:return(t=zc(t,e.mode,s)).return=e,t;case I:return h(e,(0,t._init)(t._payload),s)}if(te(t)||O(t))return(t=Oc(t,e.mode,s,null)).return=e,t;xa(e,t)}return null}function m(e,t,s,n){var r=null!==t?t.key:null;if("string"===typeof s&&""!==s||"number"===typeof s)return null!==r?null:l(e,t,""+s,n);if("object"===typeof s&&null!==s){switch(s.$$typeof){case j:return s.key===r?c(e,t,s,n):null;case w:return s.key===r?d(e,t,s,n):null;case I:return m(e,t,(r=s._init)(s._payload),n)}if(te(s)||O(s))return null!==r?null:u(e,t,s,n,null);xa(e,s)}return null}function p(e,t,s,n,r){if("string"===typeof n&&""!==n||"number"===typeof n)return l(t,e=e.get(s)||null,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case j:return c(t,e=e.get(null===n.key?s:n.key)||null,n,r);case w:return d(t,e=e.get(null===n.key?s:n.key)||null,n,r);case I:return p(e,t,s,(0,n._init)(n._payload),r)}if(te(n)||O(n))return u(t,e=e.get(s)||null,n,r,null);xa(t,n)}return null}function f(r,a,o,l){for(var c=null,d=null,u=a,f=a=0,g=null;null!==u&&f<o.length;f++){u.index>f?(g=u,u=null):g=u.sibling;var x=m(r,u,o[f],l);if(null===x){null===u&&(u=g);break}e&&u&&null===x.alternate&&t(r,u),a=i(x,a,f),null===d?c=x:d.sibling=x,d=x,u=g}if(f===o.length)return s(r,u),ra&&$r(r,f),c;if(null===u){for(;f<o.length;f++)null!==(u=h(r,o[f],l))&&(a=i(u,a,f),null===d?c=u:d.sibling=u,d=u);return ra&&$r(r,f),c}for(u=n(r,u);f<o.length;f++)null!==(g=p(u,r,f,o[f],l))&&(e&&null!==g.alternate&&u.delete(null===g.key?f:g.key),a=i(g,a,f),null===d?c=g:d.sibling=g,d=g);return e&&u.forEach(function(e){return t(r,e)}),ra&&$r(r,f),c}function g(r,o,l,c){var d=O(l);if("function"!==typeof d)throw Error(a(150));if(null==(l=d.call(l)))throw Error(a(151));for(var u=d=null,f=o,g=o=0,x=null,v=l.next();null!==f&&!v.done;g++,v=l.next()){f.index>g?(x=f,f=null):x=f.sibling;var b=m(r,f,v.value,c);if(null===b){null===f&&(f=x);break}e&&f&&null===b.alternate&&t(r,f),o=i(b,o,g),null===u?d=b:u.sibling=b,u=b,f=x}if(v.done)return s(r,f),ra&&$r(r,g),d;if(null===f){for(;!v.done;g++,v=l.next())null!==(v=h(r,v.value,c))&&(o=i(v,o,g),null===u?d=v:u.sibling=v,u=v);return ra&&$r(r,g),d}for(f=n(r,f);!v.done;g++,v=l.next())null!==(v=p(f,r,g,v.value,c))&&(e&&null!==v.alternate&&f.delete(null===v.key?g:v.key),o=i(v,o,g),null===u?d=v:u.sibling=v,u=v);return e&&f.forEach(function(e){return t(r,e)}),ra&&$r(r,g),d}return function e(n,a,i,l){if("object"===typeof i&&null!==i&&i.type===N&&null===i.key&&(i=i.props.children),"object"===typeof i&&null!==i){switch(i.$$typeof){case j:e:{for(var c=i.key,d=a;null!==d;){if(d.key===c){if((c=i.type)===N){if(7===d.tag){s(n,d.sibling),(a=r(d,i.props.children)).return=n,n=a;break e}}else if(d.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===I&&va(c)===d.type){s(n,d.sibling),(a=r(d,i.props)).ref=ga(n,d,i),a.return=n,n=a;break e}s(n,d);break}t(n,d),d=d.sibling}i.type===N?((a=Oc(i.props.children,n.mode,l,i.key)).return=n,n=a):((l=Dc(i.type,i.key,i.props,null,n.mode,l)).ref=ga(n,a,i),l.return=n,n=l)}return o(n);case w:e:{for(d=i.key;null!==a;){if(a.key===d){if(4===a.tag&&a.stateNode.containerInfo===i.containerInfo&&a.stateNode.implementation===i.implementation){s(n,a.sibling),(a=r(a,i.children||[])).return=n,n=a;break e}s(n,a);break}t(n,a),a=a.sibling}(a=zc(i,n.mode,l)).return=n,n=a}return o(n);case I:return e(n,a,(d=i._init)(i._payload),l)}if(te(i))return f(n,a,i,l);if(O(i))return g(n,a,i,l);xa(n,i)}return"string"===typeof i&&""!==i||"number"===typeof i?(i=""+i,null!==a&&6===a.tag?(s(n,a.sibling),(a=r(a,i)).return=n,n=a):(s(n,a),(a=Mc(i,n.mode,l)).return=n,n=a),o(n)):s(n,a)}}var ya=ba(!0),ja=ba(!1),wa=Sr(null),Na=null,Sa=null,ka=null;function Aa(){ka=Sa=Na=null}function _a(e){var t=wa.current;kr(wa),e._currentValue=t}function Ea(e,t,s){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==n&&(n.childLanes|=t)):null!==n&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===s)break;e=e.return}}function Ca(e,t){Na=e,ka=Sa=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bo=!0),e.firstContext=null)}function Pa(e){var t=e._currentValue;if(ka!==e)if(e={context:e,memoizedValue:t,next:null},null===Sa){if(null===Na)throw Error(a(308));Sa=e,Na.dependencies={lanes:0,firstContext:e}}else Sa=Sa.next=e;return t}var Ta=null;function Ia(e){null===Ta?Ta=[e]:Ta.push(e)}function Ra(e,t,s,n){var r=t.interleaved;return null===r?(s.next=s,Ia(t)):(s.next=r.next,r.next=s),t.interleaved=s,Da(e,n)}function Da(e,t){e.lanes|=t;var s=e.alternate;for(null!==s&&(s.lanes|=t),s=e,e=e.return;null!==e;)e.childLanes|=t,null!==(s=e.alternate)&&(s.childLanes|=t),s=e,e=e.return;return 3===s.tag?s.stateNode:null}var Oa=!1;function La(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ma(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function za(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Fa(e,t,s){var n=e.updateQueue;if(null===n)return null;if(n=n.shared,0!==(2&El)){var r=n.pending;return null===r?t.next=t:(t.next=r.next,r.next=t),n.pending=t,Da(e,s)}return null===(r=n.interleaved)?(t.next=t,Ia(n)):(t.next=r.next,r.next=t),n.interleaved=t,Da(e,s)}function Ua(e,t,s){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&s))){var n=t.lanes;s|=n&=e.pendingLanes,t.lanes=s,vt(e,s)}}function Ba(e,t){var s=e.updateQueue,n=e.alternate;if(null!==n&&s===(n=n.updateQueue)){var r=null,a=null;if(null!==(s=s.firstBaseUpdate)){do{var i={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};null===a?r=a=i:a=a.next=i,s=s.next}while(null!==s);null===a?r=a=t:a=a.next=t}else r=a=t;return s={baseState:n.baseState,firstBaseUpdate:r,lastBaseUpdate:a,shared:n.shared,effects:n.effects},void(e.updateQueue=s)}null===(e=s.lastBaseUpdate)?s.firstBaseUpdate=t:e.next=t,s.lastBaseUpdate=t}function qa(e,t,s,n){var r=e.updateQueue;Oa=!1;var a=r.firstBaseUpdate,i=r.lastBaseUpdate,o=r.shared.pending;if(null!==o){r.shared.pending=null;var l=o,c=l.next;l.next=null,null===i?a=c:i.next=c,i=l;var d=e.alternate;null!==d&&((o=(d=d.updateQueue).lastBaseUpdate)!==i&&(null===o?d.firstBaseUpdate=c:o.next=c,d.lastBaseUpdate=l))}if(null!==a){var u=r.baseState;for(i=0,d=c=l=null,o=a;;){var h=o.lane,m=o.eventTime;if((n&h)===h){null!==d&&(d=d.next={eventTime:m,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,f=o;switch(h=t,m=s,f.tag){case 1:if("function"===typeof(p=f.payload)){u=p.call(m,u,h);break e}u=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=f.payload)?p.call(m,u,h):p)||void 0===h)break e;u=M({},u,h);break e;case 2:Oa=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(h=r.effects)?r.effects=[o]:h.push(o))}else m={eventTime:m,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===d?(c=d=m,l=u):d=d.next=m,i|=h;if(null===(o=o.next)){if(null===(o=r.shared.pending))break;o=(h=o).next,h.next=null,r.lastBaseUpdate=h,r.shared.pending=null}}if(null===d&&(l=u),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=d,null!==(t=r.shared.interleaved)){r=t;do{i|=r.lane,r=r.next}while(r!==t)}else null===a&&(r.shared.lanes=0);Ll|=i,e.lanes=i,e.memoizedState=u}}function Va(e,t,s){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var n=e[t],r=n.callback;if(null!==r){if(n.callback=null,n=s,"function"!==typeof r)throw Error(a(191,r));r.call(n)}}}var Ha={},Wa=Sr(Ha),Ga=Sr(Ha),Ka=Sr(Ha);function Za(e){if(e===Ha)throw Error(a(174));return e}function Ja(e,t){switch(Ar(Ka,t),Ar(Ga,e),Ar(Wa,Ha),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}kr(Wa),Ar(Wa,t)}function Qa(){kr(Wa),kr(Ga),kr(Ka)}function Ya(e){Za(Ka.current);var t=Za(Wa.current),s=le(t,e.type);t!==s&&(Ar(Ga,e),Ar(Wa,s))}function $a(e){Ga.current===e&&(kr(Wa),kr(Ga))}var Xa=Sr(0);function ei(e){for(var t=e;null!==t;){if(13===t.tag){var s=t.memoizedState;if(null!==s&&(null===(s=s.dehydrated)||"$?"===s.data||"$!"===s.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ti=[];function si(){for(var e=0;e<ti.length;e++)ti[e]._workInProgressVersionPrimary=null;ti.length=0}var ni=y.ReactCurrentDispatcher,ri=y.ReactCurrentBatchConfig,ai=0,ii=null,oi=null,li=null,ci=!1,di=!1,ui=0,hi=0;function mi(){throw Error(a(321))}function pi(e,t){if(null===t)return!1;for(var s=0;s<t.length&&s<e.length;s++)if(!on(e[s],t[s]))return!1;return!0}function fi(e,t,s,n,r,i){if(ai=i,ii=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ni.current=null===e||null===e.memoizedState?$i:Xi,e=s(n,r),di){i=0;do{if(di=!1,ui=0,25<=i)throw Error(a(301));i+=1,li=oi=null,t.updateQueue=null,ni.current=eo,e=s(n,r)}while(di)}if(ni.current=Yi,t=null!==oi&&null!==oi.next,ai=0,li=oi=ii=null,ci=!1,t)throw Error(a(300));return e}function gi(){var e=0!==ui;return ui=0,e}function xi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===li?ii.memoizedState=li=e:li=li.next=e,li}function vi(){if(null===oi){var e=ii.alternate;e=null!==e?e.memoizedState:null}else e=oi.next;var t=null===li?ii.memoizedState:li.next;if(null!==t)li=t,oi=e;else{if(null===e)throw Error(a(310));e={memoizedState:(oi=e).memoizedState,baseState:oi.baseState,baseQueue:oi.baseQueue,queue:oi.queue,next:null},null===li?ii.memoizedState=li=e:li=li.next=e}return li}function bi(e,t){return"function"===typeof t?t(e):t}function yi(e){var t=vi(),s=t.queue;if(null===s)throw Error(a(311));s.lastRenderedReducer=e;var n=oi,r=n.baseQueue,i=s.pending;if(null!==i){if(null!==r){var o=r.next;r.next=i.next,i.next=o}n.baseQueue=r=i,s.pending=null}if(null!==r){i=r.next,n=n.baseState;var l=o=null,c=null,d=i;do{var u=d.lane;if((ai&u)===u)null!==c&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),n=d.hasEagerState?d.eagerState:e(n,d.action);else{var h={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};null===c?(l=c=h,o=n):c=c.next=h,ii.lanes|=u,Ll|=u}d=d.next}while(null!==d&&d!==i);null===c?o=n:c.next=l,on(n,t.memoizedState)||(bo=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=c,s.lastRenderedState=n}if(null!==(e=s.interleaved)){r=e;do{i=r.lane,ii.lanes|=i,Ll|=i,r=r.next}while(r!==e)}else null===r&&(s.lanes=0);return[t.memoizedState,s.dispatch]}function ji(e){var t=vi(),s=t.queue;if(null===s)throw Error(a(311));s.lastRenderedReducer=e;var n=s.dispatch,r=s.pending,i=t.memoizedState;if(null!==r){s.pending=null;var o=r=r.next;do{i=e(i,o.action),o=o.next}while(o!==r);on(i,t.memoizedState)||(bo=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),s.lastRenderedState=i}return[i,n]}function wi(){}function Ni(e,t){var s=ii,n=vi(),r=t(),i=!on(n.memoizedState,r);if(i&&(n.memoizedState=r,bo=!0),n=n.queue,Oi(Ai.bind(null,s,n,e),[e]),n.getSnapshot!==t||i||null!==li&&1&li.memoizedState.tag){if(s.flags|=2048,Pi(9,ki.bind(null,s,n,r,t),void 0,null),null===Cl)throw Error(a(349));0!==(30&ai)||Si(s,t,r)}return r}function Si(e,t,s){e.flags|=16384,e={getSnapshot:t,value:s},null===(t=ii.updateQueue)?(t={lastEffect:null,stores:null},ii.updateQueue=t,t.stores=[e]):null===(s=t.stores)?t.stores=[e]:s.push(e)}function ki(e,t,s,n){t.value=s,t.getSnapshot=n,_i(t)&&Ei(e)}function Ai(e,t,s){return s(function(){_i(t)&&Ei(e)})}function _i(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!on(e,s)}catch(n){return!0}}function Ei(e){var t=Da(e,1);null!==t&&sc(t,e,1,-1)}function Ci(e){var t=xi();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bi,lastRenderedState:e},t.queue=e,e=e.dispatch=Ki.bind(null,ii,e),[t.memoizedState,e]}function Pi(e,t,s,n){return e={tag:e,create:t,destroy:s,deps:n,next:null},null===(t=ii.updateQueue)?(t={lastEffect:null,stores:null},ii.updateQueue=t,t.lastEffect=e.next=e):null===(s=t.lastEffect)?t.lastEffect=e.next=e:(n=s.next,s.next=e,e.next=n,t.lastEffect=e),e}function Ti(){return vi().memoizedState}function Ii(e,t,s,n){var r=xi();ii.flags|=e,r.memoizedState=Pi(1|t,s,void 0,void 0===n?null:n)}function Ri(e,t,s,n){var r=vi();n=void 0===n?null:n;var a=void 0;if(null!==oi){var i=oi.memoizedState;if(a=i.destroy,null!==n&&pi(n,i.deps))return void(r.memoizedState=Pi(t,s,a,n))}ii.flags|=e,r.memoizedState=Pi(1|t,s,a,n)}function Di(e,t){return Ii(8390656,8,e,t)}function Oi(e,t){return Ri(2048,8,e,t)}function Li(e,t){return Ri(4,2,e,t)}function Mi(e,t){return Ri(4,4,e,t)}function zi(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Fi(e,t,s){return s=null!==s&&void 0!==s?s.concat([e]):null,Ri(4,4,zi.bind(null,t,e),s)}function Ui(){}function Bi(e,t){var s=vi();t=void 0===t?null:t;var n=s.memoizedState;return null!==n&&null!==t&&pi(t,n[1])?n[0]:(s.memoizedState=[e,t],e)}function qi(e,t){var s=vi();t=void 0===t?null:t;var n=s.memoizedState;return null!==n&&null!==t&&pi(t,n[1])?n[0]:(e=e(),s.memoizedState=[e,t],e)}function Vi(e,t,s){return 0===(21&ai)?(e.baseState&&(e.baseState=!1,bo=!0),e.memoizedState=s):(on(s,t)||(s=ft(),ii.lanes|=s,Ll|=s,e.baseState=!0),t)}function Hi(e,t){var s=bt;bt=0!==s&&4>s?s:4,e(!0);var n=ri.transition;ri.transition={};try{e(!1),t()}finally{bt=s,ri.transition=n}}function Wi(){return vi().memoizedState}function Gi(e,t,s){var n=tc(e);if(s={lane:n,action:s,hasEagerState:!1,eagerState:null,next:null},Zi(e))Ji(t,s);else if(null!==(s=Ra(e,t,s,n))){sc(s,e,n,ec()),Qi(s,t,n)}}function Ki(e,t,s){var n=tc(e),r={lane:n,action:s,hasEagerState:!1,eagerState:null,next:null};if(Zi(e))Ji(t,r);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var i=t.lastRenderedState,o=a(i,s);if(r.hasEagerState=!0,r.eagerState=o,on(o,i)){var l=t.interleaved;return null===l?(r.next=r,Ia(t)):(r.next=l.next,l.next=r),void(t.interleaved=r)}}catch(c){}null!==(s=Ra(e,t,r,n))&&(sc(s,e,n,r=ec()),Qi(s,t,n))}}function Zi(e){var t=e.alternate;return e===ii||null!==t&&t===ii}function Ji(e,t){di=ci=!0;var s=e.pending;null===s?t.next=t:(t.next=s.next,s.next=t),e.pending=t}function Qi(e,t,s){if(0!==(4194240&s)){var n=t.lanes;s|=n&=e.pendingLanes,t.lanes=s,vt(e,s)}}var Yi={readContext:Pa,useCallback:mi,useContext:mi,useEffect:mi,useImperativeHandle:mi,useInsertionEffect:mi,useLayoutEffect:mi,useMemo:mi,useReducer:mi,useRef:mi,useState:mi,useDebugValue:mi,useDeferredValue:mi,useTransition:mi,useMutableSource:mi,useSyncExternalStore:mi,useId:mi,unstable_isNewReconciler:!1},$i={readContext:Pa,useCallback:function(e,t){return xi().memoizedState=[e,void 0===t?null:t],e},useContext:Pa,useEffect:Di,useImperativeHandle:function(e,t,s){return s=null!==s&&void 0!==s?s.concat([e]):null,Ii(4194308,4,zi.bind(null,t,e),s)},useLayoutEffect:function(e,t){return Ii(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ii(4,2,e,t)},useMemo:function(e,t){var s=xi();return t=void 0===t?null:t,e=e(),s.memoizedState=[e,t],e},useReducer:function(e,t,s){var n=xi();return t=void 0!==s?s(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=Gi.bind(null,ii,e),[n.memoizedState,e]},useRef:function(e){return e={current:e},xi().memoizedState=e},useState:Ci,useDebugValue:Ui,useDeferredValue:function(e){return xi().memoizedState=e},useTransition:function(){var e=Ci(!1),t=e[0];return e=Hi.bind(null,e[1]),xi().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,s){var n=ii,r=xi();if(ra){if(void 0===s)throw Error(a(407));s=s()}else{if(s=t(),null===Cl)throw Error(a(349));0!==(30&ai)||Si(n,t,s)}r.memoizedState=s;var i={value:s,getSnapshot:t};return r.queue=i,Di(Ai.bind(null,n,i,e),[e]),n.flags|=2048,Pi(9,ki.bind(null,n,i,s,t),void 0,null),s},useId:function(){var e=xi(),t=Cl.identifierPrefix;if(ra){var s=Yr;t=":"+t+"R"+(s=(Qr&~(1<<32-it(Qr)-1)).toString(32)+s),0<(s=ui++)&&(t+="H"+s.toString(32)),t+=":"}else t=":"+t+"r"+(s=hi++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Xi={readContext:Pa,useCallback:Bi,useContext:Pa,useEffect:Oi,useImperativeHandle:Fi,useInsertionEffect:Li,useLayoutEffect:Mi,useMemo:qi,useReducer:yi,useRef:Ti,useState:function(){return yi(bi)},useDebugValue:Ui,useDeferredValue:function(e){return Vi(vi(),oi.memoizedState,e)},useTransition:function(){return[yi(bi)[0],vi().memoizedState]},useMutableSource:wi,useSyncExternalStore:Ni,useId:Wi,unstable_isNewReconciler:!1},eo={readContext:Pa,useCallback:Bi,useContext:Pa,useEffect:Oi,useImperativeHandle:Fi,useInsertionEffect:Li,useLayoutEffect:Mi,useMemo:qi,useReducer:ji,useRef:Ti,useState:function(){return ji(bi)},useDebugValue:Ui,useDeferredValue:function(e){var t=vi();return null===oi?t.memoizedState=e:Vi(t,oi.memoizedState,e)},useTransition:function(){return[ji(bi)[0],vi().memoizedState]},useMutableSource:wi,useSyncExternalStore:Ni,useId:Wi,unstable_isNewReconciler:!1};function to(e,t){if(e&&e.defaultProps){for(var s in t=M({},t),e=e.defaultProps)void 0===t[s]&&(t[s]=e[s]);return t}return t}function so(e,t,s,n){s=null===(s=s(n,t=e.memoizedState))||void 0===s?t:M({},t,s),e.memoizedState=s,0===e.lanes&&(e.updateQueue.baseState=s)}var no={isMounted:function(e){return!!(e=e._reactInternals)&&qe(e)===e},enqueueSetState:function(e,t,s){e=e._reactInternals;var n=ec(),r=tc(e),a=za(n,r);a.payload=t,void 0!==s&&null!==s&&(a.callback=s),null!==(t=Fa(e,a,r))&&(sc(t,e,r,n),Ua(t,e,r))},enqueueReplaceState:function(e,t,s){e=e._reactInternals;var n=ec(),r=tc(e),a=za(n,r);a.tag=1,a.payload=t,void 0!==s&&null!==s&&(a.callback=s),null!==(t=Fa(e,a,r))&&(sc(t,e,r,n),Ua(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var s=ec(),n=tc(e),r=za(s,n);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),null!==(t=Fa(e,r,n))&&(sc(t,e,n,s),Ua(t,e,n))}};function ro(e,t,s,n,r,a,i){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(n,a,i):!t.prototype||!t.prototype.isPureReactComponent||(!ln(s,n)||!ln(r,a))}function ao(e,t,s){var n=!1,r=_r,a=t.contextType;return"object"===typeof a&&null!==a?a=Pa(a):(r=Ir(t)?Pr:Er.current,a=(n=null!==(n=t.contextTypes)&&void 0!==n)?Tr(e,r):_r),t=new t(s,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=no,e.stateNode=t,t._reactInternals=e,n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=a),t}function io(e,t,s,n){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(s,n),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(s,n),t.state!==e&&no.enqueueReplaceState(t,t.state,null)}function oo(e,t,s,n){var r=e.stateNode;r.props=s,r.state=e.memoizedState,r.refs={},La(e);var a=t.contextType;"object"===typeof a&&null!==a?r.context=Pa(a):(a=Ir(t)?Pr:Er.current,r.context=Tr(e,a)),r.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(so(e,t,a,s),r.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof r.getSnapshotBeforeUpdate||"function"!==typeof r.UNSAFE_componentWillMount&&"function"!==typeof r.componentWillMount||(t=r.state,"function"===typeof r.componentWillMount&&r.componentWillMount(),"function"===typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),t!==r.state&&no.enqueueReplaceState(r,r.state,null),qa(e,s,r,n),r.state=e.memoizedState),"function"===typeof r.componentDidMount&&(e.flags|=4194308)}function lo(e,t){try{var s="",n=t;do{s+=B(n),n=n.return}while(n);var r=s}catch(a){r="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:r,digest:null}}function co(e,t,s){return{value:e,source:null,stack:null!=s?s:null,digest:null!=t?t:null}}function uo(e,t){try{console.error(t.value)}catch(s){setTimeout(function(){throw s})}}var ho="function"===typeof WeakMap?WeakMap:Map;function mo(e,t,s){(s=za(-1,s)).tag=3,s.payload={element:null};var n=t.value;return s.callback=function(){Hl||(Hl=!0,Wl=n),uo(0,t)},s}function po(e,t,s){(s=za(-1,s)).tag=3;var n=e.type.getDerivedStateFromError;if("function"===typeof n){var r=t.value;s.payload=function(){return n(r)},s.callback=function(){uo(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(s.callback=function(){uo(0,t),"function"!==typeof n&&(null===Gl?Gl=new Set([this]):Gl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),s}function fo(e,t,s){var n=e.pingCache;if(null===n){n=e.pingCache=new ho;var r=new Set;n.set(t,r)}else void 0===(r=n.get(t))&&(r=new Set,n.set(t,r));r.has(s)||(r.add(s),e=kc.bind(null,e,t,s),t.then(e,e))}function go(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function xo(e,t,s,n,r){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,s.flags|=131072,s.flags&=-52805,1===s.tag&&(null===s.alternate?s.tag=17:((t=za(-1,1)).tag=2,Fa(s,t,1))),s.lanes|=1),e):(e.flags|=65536,e.lanes=r,e)}var vo=y.ReactCurrentOwner,bo=!1;function yo(e,t,s,n){t.child=null===e?ja(t,null,s,n):ya(t,e.child,s,n)}function jo(e,t,s,n,r){s=s.render;var a=t.ref;return Ca(t,r),n=fi(e,t,s,n,a,r),s=gi(),null===e||bo?(ra&&s&&ea(t),t.flags|=1,yo(e,t,n,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Ho(e,t,r))}function wo(e,t,s,n,r){if(null===e){var a=s.type;return"function"!==typeof a||Ic(a)||void 0!==a.defaultProps||null!==s.compare||void 0!==s.defaultProps?((e=Dc(s.type,null,n,t,t.mode,r)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,No(e,t,a,n,r))}if(a=e.child,0===(e.lanes&r)){var i=a.memoizedProps;if((s=null!==(s=s.compare)?s:ln)(i,n)&&e.ref===t.ref)return Ho(e,t,r)}return t.flags|=1,(e=Rc(a,n)).ref=t.ref,e.return=t,t.child=e}function No(e,t,s,n,r){if(null!==e){var a=e.memoizedProps;if(ln(a,n)&&e.ref===t.ref){if(bo=!1,t.pendingProps=n=a,0===(e.lanes&r))return t.lanes=e.lanes,Ho(e,t,r);0!==(131072&e.flags)&&(bo=!0)}}return Ao(e,t,s,n,r)}function So(e,t,s){var n=t.pendingProps,r=n.children,a=null!==e?e.memoizedState:null;if("hidden"===n.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ar(Rl,Il),Il|=s;else{if(0===(1073741824&s))return e=null!==a?a.baseLanes|s:s,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ar(Rl,Il),Il|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=null!==a?a.baseLanes:s,Ar(Rl,Il),Il|=n}else null!==a?(n=a.baseLanes|s,t.memoizedState=null):n=s,Ar(Rl,Il),Il|=n;return yo(e,t,r,s),t.child}function ko(e,t){var s=t.ref;(null===e&&null!==s||null!==e&&e.ref!==s)&&(t.flags|=512,t.flags|=2097152)}function Ao(e,t,s,n,r){var a=Ir(s)?Pr:Er.current;return a=Tr(t,a),Ca(t,r),s=fi(e,t,s,n,a,r),n=gi(),null===e||bo?(ra&&n&&ea(t),t.flags|=1,yo(e,t,s,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Ho(e,t,r))}function _o(e,t,s,n,r){if(Ir(s)){var a=!0;Lr(t)}else a=!1;if(Ca(t,r),null===t.stateNode)Vo(e,t),ao(t,s,n),oo(t,s,n,r),n=!0;else if(null===e){var i=t.stateNode,o=t.memoizedProps;i.props=o;var l=i.context,c=s.contextType;"object"===typeof c&&null!==c?c=Pa(c):c=Tr(t,c=Ir(s)?Pr:Er.current);var d=s.getDerivedStateFromProps,u="function"===typeof d||"function"===typeof i.getSnapshotBeforeUpdate;u||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(o!==n||l!==c)&&io(t,i,n,c),Oa=!1;var h=t.memoizedState;i.state=h,qa(t,n,i,r),l=t.memoizedState,o!==n||h!==l||Cr.current||Oa?("function"===typeof d&&(so(t,s,d,n),l=t.memoizedState),(o=Oa||ro(t,s,o,n,h,l,c))?(u||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||("function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"===typeof i.componentDidMount&&(t.flags|=4194308)):("function"===typeof i.componentDidMount&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=l),i.props=n,i.state=l,i.context=c,n=o):("function"===typeof i.componentDidMount&&(t.flags|=4194308),n=!1)}else{i=t.stateNode,Ma(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:to(t.type,o),i.props=c,u=t.pendingProps,h=i.context,"object"===typeof(l=s.contextType)&&null!==l?l=Pa(l):l=Tr(t,l=Ir(s)?Pr:Er.current);var m=s.getDerivedStateFromProps;(d="function"===typeof m||"function"===typeof i.getSnapshotBeforeUpdate)||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(o!==u||h!==l)&&io(t,i,n,l),Oa=!1,h=t.memoizedState,i.state=h,qa(t,n,i,r);var p=t.memoizedState;o!==u||h!==p||Cr.current||Oa?("function"===typeof m&&(so(t,s,m,n),p=t.memoizedState),(c=Oa||ro(t,s,c,n,h,p,l)||!1)?(d||"function"!==typeof i.UNSAFE_componentWillUpdate&&"function"!==typeof i.componentWillUpdate||("function"===typeof i.componentWillUpdate&&i.componentWillUpdate(n,p,l),"function"===typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(n,p,l)),"function"===typeof i.componentDidUpdate&&(t.flags|=4),"function"===typeof i.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof i.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=p),i.props=n,i.state=p,i.context=l,n=c):("function"!==typeof i.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),n=!1)}return Eo(e,t,s,n,a,r)}function Eo(e,t,s,n,r,a){ko(e,t);var i=0!==(128&t.flags);if(!n&&!i)return r&&Mr(t,s,!1),Ho(e,t,a);n=t.stateNode,vo.current=t;var o=i&&"function"!==typeof s.getDerivedStateFromError?null:n.render();return t.flags|=1,null!==e&&i?(t.child=ya(t,e.child,null,a),t.child=ya(t,null,o,a)):yo(e,t,o,a),t.memoizedState=n.state,r&&Mr(t,s,!0),t.child}function Co(e){var t=e.stateNode;t.pendingContext?Dr(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Dr(0,t.context,!1),Ja(e,t.containerInfo)}function Po(e,t,s,n,r){return ma(),pa(r),t.flags|=256,yo(e,t,s,n),t.child}var To,Io,Ro,Do,Oo={dehydrated:null,treeContext:null,retryLane:0};function Lo(e){return{baseLanes:e,cachePool:null,transitions:null}}function Mo(e,t,s){var n,r=t.pendingProps,i=Xa.current,o=!1,l=0!==(128&t.flags);if((n=l)||(n=(null===e||null!==e.memoizedState)&&0!==(2&i)),n?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(i|=1),Ar(Xa,1&i),null===e)return ca(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=r.children,e=r.fallback,o?(r=t.mode,o=t.child,l={mode:"hidden",children:l},0===(1&r)&&null!==o?(o.childLanes=0,o.pendingProps=l):o=Lc(l,r,0,null),e=Oc(e,r,s,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Lo(s),t.memoizedState=Oo,e):zo(t,l));if(null!==(i=e.memoizedState)&&null!==(n=i.dehydrated))return function(e,t,s,n,r,i,o){if(s)return 256&t.flags?(t.flags&=-257,Fo(e,t,o,n=co(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(i=n.fallback,r=t.mode,n=Lc({mode:"visible",children:n.children},r,0,null),(i=Oc(i,r,o,null)).flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,0!==(1&t.mode)&&ya(t,e.child,null,o),t.child.memoizedState=Lo(o),t.memoizedState=Oo,i);if(0===(1&t.mode))return Fo(e,t,o,null);if("$!"===r.data){if(n=r.nextSibling&&r.nextSibling.dataset)var l=n.dgst;return n=l,Fo(e,t,o,n=co(i=Error(a(419)),n,void 0))}if(l=0!==(o&e.childLanes),bo||l){if(null!==(n=Cl)){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}0!==(r=0!==(r&(n.suspendedLanes|o))?0:r)&&r!==i.retryLane&&(i.retryLane=r,Da(e,r),sc(n,e,r,-1))}return fc(),Fo(e,t,o,n=co(Error(a(421))))}return"$?"===r.data?(t.flags|=128,t.child=e.child,t=_c.bind(null,e),r._reactRetry=t,null):(e=i.treeContext,na=cr(r.nextSibling),sa=t,ra=!0,aa=null,null!==e&&(Kr[Zr++]=Qr,Kr[Zr++]=Yr,Kr[Zr++]=Jr,Qr=e.id,Yr=e.overflow,Jr=t),t=zo(t,n.children),t.flags|=4096,t)}(e,t,l,r,n,i,s);if(o){o=r.fallback,l=t.mode,n=(i=e.child).sibling;var c={mode:"hidden",children:r.children};return 0===(1&l)&&t.child!==i?((r=t.child).childLanes=0,r.pendingProps=c,t.deletions=null):(r=Rc(i,c)).subtreeFlags=14680064&i.subtreeFlags,null!==n?o=Rc(n,o):(o=Oc(o,l,s,null)).flags|=2,o.return=t,r.return=t,r.sibling=o,t.child=r,r=o,o=t.child,l=null===(l=e.child.memoizedState)?Lo(s):{baseLanes:l.baseLanes|s,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~s,t.memoizedState=Oo,r}return e=(o=e.child).sibling,r=Rc(o,{mode:"visible",children:r.children}),0===(1&t.mode)&&(r.lanes=s),r.return=t,r.sibling=null,null!==e&&(null===(s=t.deletions)?(t.deletions=[e],t.flags|=16):s.push(e)),t.child=r,t.memoizedState=null,r}function zo(e,t){return(t=Lc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Fo(e,t,s,n){return null!==n&&pa(n),ya(t,e.child,null,s),(e=zo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Uo(e,t,s){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),Ea(e.return,t,s)}function Bo(e,t,s,n,r){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:s,tailMode:r}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=n,a.tail=s,a.tailMode=r)}function qo(e,t,s){var n=t.pendingProps,r=n.revealOrder,a=n.tail;if(yo(e,t,n.children,s),0!==(2&(n=Xa.current)))n=1&n|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Uo(e,s,t);else if(19===e.tag)Uo(e,s,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Ar(Xa,n),0===(1&t.mode))t.memoizedState=null;else switch(r){case"forwards":for(s=t.child,r=null;null!==s;)null!==(e=s.alternate)&&null===ei(e)&&(r=s),s=s.sibling;null===(s=r)?(r=t.child,t.child=null):(r=s.sibling,s.sibling=null),Bo(t,!1,r,s,a);break;case"backwards":for(s=null,r=t.child,t.child=null;null!==r;){if(null!==(e=r.alternate)&&null===ei(e)){t.child=r;break}e=r.sibling,r.sibling=s,s=r,r=e}Bo(t,!0,s,null,a);break;case"together":Bo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Vo(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ho(e,t,s){if(null!==e&&(t.dependencies=e.dependencies),Ll|=t.lanes,0===(s&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(s=Rc(e=t.child,e.pendingProps),t.child=s,s.return=t;null!==e.sibling;)e=e.sibling,(s=s.sibling=Rc(e,e.pendingProps)).return=t;s.sibling=null}return t.child}function Wo(e,t){if(!ra)switch(e.tailMode){case"hidden":t=e.tail;for(var s=null;null!==t;)null!==t.alternate&&(s=t),t=t.sibling;null===s?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var n=null;null!==s;)null!==s.alternate&&(n=s),s=s.sibling;null===n?t||null===e.tail?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Go(e){var t=null!==e.alternate&&e.alternate.child===e.child,s=0,n=0;if(t)for(var r=e.child;null!==r;)s|=r.lanes|r.childLanes,n|=14680064&r.subtreeFlags,n|=14680064&r.flags,r.return=e,r=r.sibling;else for(r=e.child;null!==r;)s|=r.lanes|r.childLanes,n|=r.subtreeFlags,n|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=n,e.childLanes=s,t}function Ko(e,t,s){var n=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Go(t),null;case 1:case 17:return Ir(t.type)&&Rr(),Go(t),null;case 3:return n=t.stateNode,Qa(),kr(Cr),kr(Er),si(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(ua(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(ic(aa),aa=null))),Io(e,t),Go(t),null;case 5:$a(t);var r=Za(Ka.current);if(s=t.type,null!==e&&null!=t.stateNode)Ro(e,t,s,n,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(null===t.stateNode)throw Error(a(166));return Go(t),null}if(e=Za(Wa.current),ua(t)){n=t.stateNode,s=t.type;var i=t.memoizedProps;switch(n[hr]=t,n[mr]=i,e=0!==(1&t.mode),s){case"dialog":Fn("cancel",n),Fn("close",n);break;case"iframe":case"object":case"embed":Fn("load",n);break;case"video":case"audio":for(r=0;r<On.length;r++)Fn(On[r],n);break;case"source":Fn("error",n);break;case"img":case"image":case"link":Fn("error",n),Fn("load",n);break;case"details":Fn("toggle",n);break;case"input":Q(n,i),Fn("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},Fn("invalid",n);break;case"textarea":re(n,i),Fn("invalid",n)}for(var l in ve(s,i),r=null,i)if(i.hasOwnProperty(l)){var c=i[l];"children"===l?"string"===typeof c?n.textContent!==c&&(!0!==i.suppressHydrationWarning&&$n(n.textContent,c,e),r=["children",c]):"number"===typeof c&&n.textContent!==""+c&&(!0!==i.suppressHydrationWarning&&$n(n.textContent,c,e),r=["children",""+c]):o.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Fn("scroll",n)}switch(s){case"input":G(n),X(n,i,!0);break;case"textarea":G(n),ie(n);break;case"select":case"option":break;default:"function"===typeof i.onClick&&(n.onclick=Xn)}n=r,t.updateQueue=n,null!==n&&(t.flags|=4)}else{l=9===r.nodeType?r:r.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(s)),"http://www.w3.org/1999/xhtml"===e?"script"===s?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof n.is?e=l.createElement(s,{is:n.is}):(e=l.createElement(s),"select"===s&&(l=e,n.multiple?l.multiple=!0:n.size&&(l.size=n.size))):e=l.createElementNS(e,s),e[hr]=t,e[mr]=n,To(e,t,!1,!1),t.stateNode=e;e:{switch(l=be(s,n),s){case"dialog":Fn("cancel",e),Fn("close",e),r=n;break;case"iframe":case"object":case"embed":Fn("load",e),r=n;break;case"video":case"audio":for(r=0;r<On.length;r++)Fn(On[r],e);r=n;break;case"source":Fn("error",e),r=n;break;case"img":case"image":case"link":Fn("error",e),Fn("load",e),r=n;break;case"details":Fn("toggle",e),r=n;break;case"input":Q(e,n),r=J(e,n),Fn("invalid",e);break;case"option":default:r=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},r=M({},n,{value:void 0}),Fn("invalid",e);break;case"textarea":re(e,n),r=ne(e,n),Fn("invalid",e)}for(i in ve(s,r),c=r)if(c.hasOwnProperty(i)){var d=c[i];"style"===i?ge(e,d):"dangerouslySetInnerHTML"===i?null!=(d=d?d.__html:void 0)&&ue(e,d):"children"===i?"string"===typeof d?("textarea"!==s||""!==d)&&he(e,d):"number"===typeof d&&he(e,""+d):"suppressContentEditableWarning"!==i&&"suppressHydrationWarning"!==i&&"autoFocus"!==i&&(o.hasOwnProperty(i)?null!=d&&"onScroll"===i&&Fn("scroll",e):null!=d&&b(e,i,d,l))}switch(s){case"input":G(e),X(e,n,!1);break;case"textarea":G(e),ie(e);break;case"option":null!=n.value&&e.setAttribute("value",""+H(n.value));break;case"select":e.multiple=!!n.multiple,null!=(i=n.value)?se(e,!!n.multiple,i,!1):null!=n.defaultValue&&se(e,!!n.multiple,n.defaultValue,!0);break;default:"function"===typeof r.onClick&&(e.onclick=Xn)}switch(s){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Go(t),null;case 6:if(e&&null!=t.stateNode)Do(e,t,e.memoizedProps,n);else{if("string"!==typeof n&&null===t.stateNode)throw Error(a(166));if(s=Za(Ka.current),Za(Wa.current),ua(t)){if(n=t.stateNode,s=t.memoizedProps,n[hr]=t,(i=n.nodeValue!==s)&&null!==(e=sa))switch(e.tag){case 3:$n(n.nodeValue,s,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&$n(n.nodeValue,s,0!==(1&e.mode))}i&&(t.flags|=4)}else(n=(9===s.nodeType?s:s.ownerDocument).createTextNode(n))[hr]=t,t.stateNode=n}return Go(t),null;case 13:if(kr(Xa),n=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ra&&null!==na&&0!==(1&t.mode)&&0===(128&t.flags))ha(),ma(),t.flags|=98560,i=!1;else if(i=ua(t),null!==n&&null!==n.dehydrated){if(null===e){if(!i)throw Error(a(318));if(!(i=null!==(i=t.memoizedState)?i.dehydrated:null))throw Error(a(317));i[hr]=t}else ma(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Go(t),i=!1}else null!==aa&&(ic(aa),aa=null),i=!0;if(!i)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=s,t):((n=null!==n)!==(null!==e&&null!==e.memoizedState)&&n&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Xa.current)?0===Dl&&(Dl=3):fc())),null!==t.updateQueue&&(t.flags|=4),Go(t),null);case 4:return Qa(),Io(e,t),null===e&&qn(t.stateNode.containerInfo),Go(t),null;case 10:return _a(t.type._context),Go(t),null;case 19:if(kr(Xa),null===(i=t.memoizedState))return Go(t),null;if(n=0!==(128&t.flags),null===(l=i.rendering))if(n)Wo(i,!1);else{if(0!==Dl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ei(e))){for(t.flags|=128,Wo(i,!1),null!==(n=l.updateQueue)&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=s,s=t.child;null!==s;)e=n,(i=s).flags&=14680066,null===(l=i.alternate)?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,e=l.dependencies,i.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),s=s.sibling;return Ar(Xa,1&Xa.current|2),t.child}e=e.sibling}null!==i.tail&&Ye()>ql&&(t.flags|=128,n=!0,Wo(i,!1),t.lanes=4194304)}else{if(!n)if(null!==(e=ei(l))){if(t.flags|=128,n=!0,null!==(s=e.updateQueue)&&(t.updateQueue=s,t.flags|=4),Wo(i,!0),null===i.tail&&"hidden"===i.tailMode&&!l.alternate&&!ra)return Go(t),null}else 2*Ye()-i.renderingStartTime>ql&&1073741824!==s&&(t.flags|=128,n=!0,Wo(i,!1),t.lanes=4194304);i.isBackwards?(l.sibling=t.child,t.child=l):(null!==(s=i.last)?s.sibling=l:t.child=l,i.last=l)}return null!==i.tail?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Ye(),t.sibling=null,s=Xa.current,Ar(Xa,n?1&s|2:1&s),t):(Go(t),null);case 22:case 23:return uc(),n=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==n&&(t.flags|=8192),n&&0!==(1&t.mode)?0!==(1073741824&Il)&&(Go(t),6&t.subtreeFlags&&(t.flags|=8192)):Go(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Zo(e,t){switch(ta(t),t.tag){case 1:return Ir(t.type)&&Rr(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Qa(),kr(Cr),kr(Er),si(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return $a(t),null;case 13:if(kr(Xa),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));ma()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return kr(Xa),null;case 4:return Qa(),null;case 10:return _a(t.type._context),null;case 22:case 23:return uc(),null;default:return null}}To=function(e,t){for(var s=t.child;null!==s;){if(5===s.tag||6===s.tag)e.appendChild(s.stateNode);else if(4!==s.tag&&null!==s.child){s.child.return=s,s=s.child;continue}if(s===t)break;for(;null===s.sibling;){if(null===s.return||s.return===t)return;s=s.return}s.sibling.return=s.return,s=s.sibling}},Io=function(){},Ro=function(e,t,s,n){var r=e.memoizedProps;if(r!==n){e=t.stateNode,Za(Wa.current);var a,i=null;switch(s){case"input":r=J(e,r),n=J(e,n),i=[];break;case"select":r=M({},r,{value:void 0}),n=M({},n,{value:void 0}),i=[];break;case"textarea":r=ne(e,r),n=ne(e,n),i=[];break;default:"function"!==typeof r.onClick&&"function"===typeof n.onClick&&(e.onclick=Xn)}for(d in ve(s,n),s=null,r)if(!n.hasOwnProperty(d)&&r.hasOwnProperty(d)&&null!=r[d])if("style"===d){var l=r[d];for(a in l)l.hasOwnProperty(a)&&(s||(s={}),s[a]="")}else"dangerouslySetInnerHTML"!==d&&"children"!==d&&"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&"autoFocus"!==d&&(o.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in n){var c=n[d];if(l=null!=r?r[d]:void 0,n.hasOwnProperty(d)&&c!==l&&(null!=c||null!=l))if("style"===d)if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(s||(s={}),s[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(s||(s={}),s[a]=c[a])}else s||(i||(i=[]),i.push(d,s)),s=c;else"dangerouslySetInnerHTML"===d?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(i=i||[]).push(d,c)):"children"===d?"string"!==typeof c&&"number"!==typeof c||(i=i||[]).push(d,""+c):"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&(o.hasOwnProperty(d)?(null!=c&&"onScroll"===d&&Fn("scroll",e),i||l===c||(i=[])):(i=i||[]).push(d,c))}s&&(i=i||[]).push("style",s);var d=i;(t.updateQueue=d)&&(t.flags|=4)}},Do=function(e,t,s,n){s!==n&&(t.flags|=4)};var Jo=!1,Qo=!1,Yo="function"===typeof WeakSet?WeakSet:Set,$o=null;function Xo(e,t){var s=e.ref;if(null!==s)if("function"===typeof s)try{s(null)}catch(n){Sc(e,t,n)}else s.current=null}function el(e,t,s){try{s()}catch(n){Sc(e,t,n)}}var tl=!1;function sl(e,t,s){var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var r=n=n.next;do{if((r.tag&e)===e){var a=r.destroy;r.destroy=void 0,void 0!==a&&el(t,s,a)}r=r.next}while(r!==n)}}function nl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var s=t=t.next;do{if((s.tag&e)===e){var n=s.create;s.destroy=n()}s=s.next}while(s!==t)}}function rl(e){var t=e.ref;if(null!==t){var s=e.stateNode;e.tag,e=s,"function"===typeof t?t(e):t.current=e}}function al(e){var t=e.alternate;null!==t&&(e.alternate=null,al(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hr],delete t[mr],delete t[fr],delete t[gr],delete t[xr])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function il(e){return 5===e.tag||3===e.tag||4===e.tag}function ol(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||il(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,s){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?8===s.nodeType?s.parentNode.insertBefore(e,t):s.insertBefore(e,t):(8===s.nodeType?(t=s.parentNode).insertBefore(e,s):(t=s).appendChild(e),null!==(s=s._reactRootContainer)&&void 0!==s||null!==t.onclick||(t.onclick=Xn));else if(4!==n&&null!==(e=e.child))for(ll(e,t,s),e=e.sibling;null!==e;)ll(e,t,s),e=e.sibling}function cl(e,t,s){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?s.insertBefore(e,t):s.appendChild(e);else if(4!==n&&null!==(e=e.child))for(cl(e,t,s),e=e.sibling;null!==e;)cl(e,t,s),e=e.sibling}var dl=null,ul=!1;function hl(e,t,s){for(s=s.child;null!==s;)ml(e,t,s),s=s.sibling}function ml(e,t,s){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(rt,s)}catch(o){}switch(s.tag){case 5:Qo||Xo(s,t);case 6:var n=dl,r=ul;dl=null,hl(e,t,s),ul=r,null!==(dl=n)&&(ul?(e=dl,s=s.stateNode,8===e.nodeType?e.parentNode.removeChild(s):e.removeChild(s)):dl.removeChild(s.stateNode));break;case 18:null!==dl&&(ul?(e=dl,s=s.stateNode,8===e.nodeType?lr(e.parentNode,s):1===e.nodeType&&lr(e,s),qt(e)):lr(dl,s.stateNode));break;case 4:n=dl,r=ul,dl=s.stateNode.containerInfo,ul=!0,hl(e,t,s),dl=n,ul=r;break;case 0:case 11:case 14:case 15:if(!Qo&&(null!==(n=s.updateQueue)&&null!==(n=n.lastEffect))){r=n=n.next;do{var a=r,i=a.destroy;a=a.tag,void 0!==i&&(0!==(2&a)||0!==(4&a))&&el(s,t,i),r=r.next}while(r!==n)}hl(e,t,s);break;case 1:if(!Qo&&(Xo(s,t),"function"===typeof(n=s.stateNode).componentWillUnmount))try{n.props=s.memoizedProps,n.state=s.memoizedState,n.componentWillUnmount()}catch(o){Sc(s,t,o)}hl(e,t,s);break;case 21:hl(e,t,s);break;case 22:1&s.mode?(Qo=(n=Qo)||null!==s.memoizedState,hl(e,t,s),Qo=n):hl(e,t,s);break;default:hl(e,t,s)}}function pl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var s=e.stateNode;null===s&&(s=e.stateNode=new Yo),t.forEach(function(t){var n=Ec.bind(null,e,t);s.has(t)||(s.add(t),t.then(n,n))})}}function fl(e,t){var s=t.deletions;if(null!==s)for(var n=0;n<s.length;n++){var r=s[n];try{var i=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 5:dl=l.stateNode,ul=!1;break e;case 3:case 4:dl=l.stateNode.containerInfo,ul=!0;break e}l=l.return}if(null===dl)throw Error(a(160));ml(i,o,r),dl=null,ul=!1;var c=r.alternate;null!==c&&(c.return=null),r.return=null}catch(d){Sc(r,t,d)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}function gl(e,t){var s=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(fl(t,e),xl(e),4&n){try{sl(3,e,e.return),nl(3,e)}catch(g){Sc(e,e.return,g)}try{sl(5,e,e.return)}catch(g){Sc(e,e.return,g)}}break;case 1:fl(t,e),xl(e),512&n&&null!==s&&Xo(s,s.return);break;case 5:if(fl(t,e),xl(e),512&n&&null!==s&&Xo(s,s.return),32&e.flags){var r=e.stateNode;try{he(r,"")}catch(g){Sc(e,e.return,g)}}if(4&n&&null!=(r=e.stateNode)){var i=e.memoizedProps,o=null!==s?s.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===i.type&&null!=i.name&&Y(r,i),be(l,o);var d=be(l,i);for(o=0;o<c.length;o+=2){var u=c[o],h=c[o+1];"style"===u?ge(r,h):"dangerouslySetInnerHTML"===u?ue(r,h):"children"===u?he(r,h):b(r,u,h,d)}switch(l){case"input":$(r,i);break;case"textarea":ae(r,i);break;case"select":var m=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!i.multiple;var p=i.value;null!=p?se(r,!!i.multiple,p,!1):m!==!!i.multiple&&(null!=i.defaultValue?se(r,!!i.multiple,i.defaultValue,!0):se(r,!!i.multiple,i.multiple?[]:"",!1))}r[mr]=i}catch(g){Sc(e,e.return,g)}}break;case 6:if(fl(t,e),xl(e),4&n){if(null===e.stateNode)throw Error(a(162));r=e.stateNode,i=e.memoizedProps;try{r.nodeValue=i}catch(g){Sc(e,e.return,g)}}break;case 3:if(fl(t,e),xl(e),4&n&&null!==s&&s.memoizedState.isDehydrated)try{qt(t.containerInfo)}catch(g){Sc(e,e.return,g)}break;case 4:default:fl(t,e),xl(e);break;case 13:fl(t,e),xl(e),8192&(r=e.child).flags&&(i=null!==r.memoizedState,r.stateNode.isHidden=i,!i||null!==r.alternate&&null!==r.alternate.memoizedState||(Bl=Ye())),4&n&&pl(e);break;case 22:if(u=null!==s&&null!==s.memoizedState,1&e.mode?(Qo=(d=Qo)||u,fl(t,e),Qo=d):fl(t,e),xl(e),8192&n){if(d=null!==e.memoizedState,(e.stateNode.isHidden=d)&&!u&&0!==(1&e.mode))for($o=e,u=e.child;null!==u;){for(h=$o=u;null!==$o;){switch(p=(m=$o).child,m.tag){case 0:case 11:case 14:case 15:sl(4,m,m.return);break;case 1:Xo(m,m.return);var f=m.stateNode;if("function"===typeof f.componentWillUnmount){n=m,s=m.return;try{t=n,f.props=t.memoizedProps,f.state=t.memoizedState,f.componentWillUnmount()}catch(g){Sc(n,s,g)}}break;case 5:Xo(m,m.return);break;case 22:if(null!==m.memoizedState){jl(h);continue}}null!==p?(p.return=m,$o=p):jl(h)}u=u.sibling}e:for(u=null,h=e;;){if(5===h.tag){if(null===u){u=h;try{r=h.stateNode,d?"function"===typeof(i=r.style).setProperty?i.setProperty("display","none","important"):i.display="none":(l=h.stateNode,o=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=fe("display",o))}catch(g){Sc(e,e.return,g)}}}else if(6===h.tag){if(null===u)try{h.stateNode.nodeValue=d?"":h.memoizedProps}catch(g){Sc(e,e.return,g)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:fl(t,e),xl(e),4&n&&pl(e);case 21:}}function xl(e){var t=e.flags;if(2&t){try{e:{for(var s=e.return;null!==s;){if(il(s)){var n=s;break e}s=s.return}throw Error(a(160))}switch(n.tag){case 5:var r=n.stateNode;32&n.flags&&(he(r,""),n.flags&=-33),cl(e,ol(e),r);break;case 3:case 4:var i=n.stateNode.containerInfo;ll(e,ol(e),i);break;default:throw Error(a(161))}}catch(o){Sc(e,e.return,o)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function vl(e,t,s){$o=e,bl(e,t,s)}function bl(e,t,s){for(var n=0!==(1&e.mode);null!==$o;){var r=$o,a=r.child;if(22===r.tag&&n){var i=null!==r.memoizedState||Jo;if(!i){var o=r.alternate,l=null!==o&&null!==o.memoizedState||Qo;o=Jo;var c=Qo;if(Jo=i,(Qo=l)&&!c)for($o=r;null!==$o;)l=(i=$o).child,22===i.tag&&null!==i.memoizedState?wl(r):null!==l?(l.return=i,$o=l):wl(r);for(;null!==a;)$o=a,bl(a,t,s),a=a.sibling;$o=r,Jo=o,Qo=c}yl(e)}else 0!==(8772&r.subtreeFlags)&&null!==a?(a.return=r,$o=a):yl(e)}}function yl(e){for(;null!==$o;){var t=$o;if(0!==(8772&t.flags)){var s=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Qo||nl(5,t);break;case 1:var n=t.stateNode;if(4&t.flags&&!Qo)if(null===s)n.componentDidMount();else{var r=t.elementType===t.type?s.memoizedProps:to(t.type,s.memoizedProps);n.componentDidUpdate(r,s.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;null!==i&&Va(t,i,n);break;case 3:var o=t.updateQueue;if(null!==o){if(s=null,null!==t.child)switch(t.child.tag){case 5:case 1:s=t.child.stateNode}Va(t,o,s)}break;case 5:var l=t.stateNode;if(null===s&&4&t.flags){s=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&s.focus();break;case"img":c.src&&(s.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var d=t.alternate;if(null!==d){var u=d.memoizedState;if(null!==u){var h=u.dehydrated;null!==h&&qt(h)}}}break;default:throw Error(a(163))}Qo||512&t.flags&&rl(t)}catch(m){Sc(t,t.return,m)}}if(t===e){$o=null;break}if(null!==(s=t.sibling)){s.return=t.return,$o=s;break}$o=t.return}}function jl(e){for(;null!==$o;){var t=$o;if(t===e){$o=null;break}var s=t.sibling;if(null!==s){s.return=t.return,$o=s;break}$o=t.return}}function wl(e){for(;null!==$o;){var t=$o;try{switch(t.tag){case 0:case 11:case 15:var s=t.return;try{nl(4,t)}catch(l){Sc(t,s,l)}break;case 1:var n=t.stateNode;if("function"===typeof n.componentDidMount){var r=t.return;try{n.componentDidMount()}catch(l){Sc(t,r,l)}}var a=t.return;try{rl(t)}catch(l){Sc(t,a,l)}break;case 5:var i=t.return;try{rl(t)}catch(l){Sc(t,i,l)}}}catch(l){Sc(t,t.return,l)}if(t===e){$o=null;break}var o=t.sibling;if(null!==o){o.return=t.return,$o=o;break}$o=t.return}}var Nl,Sl=Math.ceil,kl=y.ReactCurrentDispatcher,Al=y.ReactCurrentOwner,_l=y.ReactCurrentBatchConfig,El=0,Cl=null,Pl=null,Tl=0,Il=0,Rl=Sr(0),Dl=0,Ol=null,Ll=0,Ml=0,zl=0,Fl=null,Ul=null,Bl=0,ql=1/0,Vl=null,Hl=!1,Wl=null,Gl=null,Kl=!1,Zl=null,Jl=0,Ql=0,Yl=null,$l=-1,Xl=0;function ec(){return 0!==(6&El)?Ye():-1!==$l?$l:$l=Ye()}function tc(e){return 0===(1&e.mode)?1:0!==(2&El)&&0!==Tl?Tl&-Tl:null!==fa.transition?(0===Xl&&(Xl=ft()),Xl):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Qt(e.type)}function sc(e,t,s,n){if(50<Ql)throw Ql=0,Yl=null,Error(a(185));xt(e,s,n),0!==(2&El)&&e===Cl||(e===Cl&&(0===(2&El)&&(Ml|=s),4===Dl&&oc(e,Tl)),nc(e,n),1===s&&0===El&&0===(1&t.mode)&&(ql=Ye()+500,Fr&&qr()))}function nc(e,t){var s=e.callbackNode;!function(e,t){for(var s=e.suspendedLanes,n=e.pingedLanes,r=e.expirationTimes,a=e.pendingLanes;0<a;){var i=31-it(a),o=1<<i,l=r[i];-1===l?0!==(o&s)&&0===(o&n)||(r[i]=mt(o,t)):l<=t&&(e.expiredLanes|=o),a&=~o}}(e,t);var n=ht(e,e===Cl?Tl:0);if(0===n)null!==s&&Ze(s),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(null!=s&&Ze(s),1===t)0===e.tag?function(e){Fr=!0,Br(e)}(lc.bind(null,e)):Br(lc.bind(null,e)),ir(function(){0===(6&El)&&qr()}),s=null;else{switch(yt(n)){case 1:s=Xe;break;case 4:s=et;break;case 16:default:s=tt;break;case 536870912:s=nt}s=Cc(s,rc.bind(null,e))}e.callbackPriority=t,e.callbackNode=s}}function rc(e,t){if($l=-1,Xl=0,0!==(6&El))throw Error(a(327));var s=e.callbackNode;if(wc()&&e.callbackNode!==s)return null;var n=ht(e,e===Cl?Tl:0);if(0===n)return null;if(0!==(30&n)||0!==(n&e.expiredLanes)||t)t=gc(e,n);else{t=n;var r=El;El|=2;var i=pc();for(Cl===e&&Tl===t||(Vl=null,ql=Ye()+500,hc(e,t));;)try{vc();break}catch(l){mc(e,l)}Aa(),kl.current=i,El=r,null!==Pl?t=0:(Cl=null,Tl=0,t=Dl)}if(0!==t){if(2===t&&(0!==(r=pt(e))&&(n=r,t=ac(e,r))),1===t)throw s=Ol,hc(e,0),oc(e,n),nc(e,Ye()),s;if(6===t)oc(e,n);else{if(r=e.current.alternate,0===(30&n)&&!function(e){for(var t=e;;){if(16384&t.flags){var s=t.updateQueue;if(null!==s&&null!==(s=s.stores))for(var n=0;n<s.length;n++){var r=s[n],a=r.getSnapshot;r=r.value;try{if(!on(a(),r))return!1}catch(o){return!1}}}if(s=t.child,16384&t.subtreeFlags&&null!==s)s.return=t,t=s;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(r)&&(2===(t=gc(e,n))&&(0!==(i=pt(e))&&(n=i,t=ac(e,i))),1===t))throw s=Ol,hc(e,0),oc(e,n),nc(e,Ye()),s;switch(e.finishedWork=r,e.finishedLanes=n,t){case 0:case 1:throw Error(a(345));case 2:case 5:jc(e,Ul,Vl);break;case 3:if(oc(e,n),(130023424&n)===n&&10<(t=Bl+500-Ye())){if(0!==ht(e,0))break;if(((r=e.suspendedLanes)&n)!==n){ec(),e.pingedLanes|=e.suspendedLanes&r;break}e.timeoutHandle=nr(jc.bind(null,e,Ul,Vl),t);break}jc(e,Ul,Vl);break;case 4:if(oc(e,n),(4194240&n)===n)break;for(t=e.eventTimes,r=-1;0<n;){var o=31-it(n);i=1<<o,(o=t[o])>r&&(r=o),n&=~i}if(n=r,10<(n=(120>(n=Ye()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Sl(n/1960))-n)){e.timeoutHandle=nr(jc.bind(null,e,Ul,Vl),n);break}jc(e,Ul,Vl);break;default:throw Error(a(329))}}}return nc(e,Ye()),e.callbackNode===s?rc.bind(null,e):null}function ac(e,t){var s=Fl;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=gc(e,t))&&(t=Ul,Ul=s,null!==t&&ic(t)),e}function ic(e){null===Ul?Ul=e:Ul.push.apply(Ul,e)}function oc(e,t){for(t&=~zl,t&=~Ml,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var s=31-it(t),n=1<<s;e[s]=-1,t&=~n}}function lc(e){if(0!==(6&El))throw Error(a(327));wc();var t=ht(e,0);if(0===(1&t))return nc(e,Ye()),null;var s=gc(e,t);if(0!==e.tag&&2===s){var n=pt(e);0!==n&&(t=n,s=ac(e,n))}if(1===s)throw s=Ol,hc(e,0),oc(e,t),nc(e,Ye()),s;if(6===s)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,jc(e,Ul,Vl),nc(e,Ye()),null}function cc(e,t){var s=El;El|=1;try{return e(t)}finally{0===(El=s)&&(ql=Ye()+500,Fr&&qr())}}function dc(e){null!==Zl&&0===Zl.tag&&0===(6&El)&&wc();var t=El;El|=1;var s=_l.transition,n=bt;try{if(_l.transition=null,bt=1,e)return e()}finally{bt=n,_l.transition=s,0===(6&(El=t))&&qr()}}function uc(){Il=Rl.current,kr(Rl)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var s=e.timeoutHandle;if(-1!==s&&(e.timeoutHandle=-1,rr(s)),null!==Pl)for(s=Pl.return;null!==s;){var n=s;switch(ta(n),n.tag){case 1:null!==(n=n.type.childContextTypes)&&void 0!==n&&Rr();break;case 3:Qa(),kr(Cr),kr(Er),si();break;case 5:$a(n);break;case 4:Qa();break;case 13:case 19:kr(Xa);break;case 10:_a(n.type._context);break;case 22:case 23:uc()}s=s.return}if(Cl=e,Pl=e=Rc(e.current,null),Tl=Il=t,Dl=0,Ol=null,zl=Ml=Ll=0,Ul=Fl=null,null!==Ta){for(t=0;t<Ta.length;t++)if(null!==(n=(s=Ta[t]).interleaved)){s.interleaved=null;var r=n.next,a=s.pending;if(null!==a){var i=a.next;a.next=r,n.next=i}s.pending=n}Ta=null}return e}function mc(e,t){for(;;){var s=Pl;try{if(Aa(),ni.current=Yi,ci){for(var n=ii.memoizedState;null!==n;){var r=n.queue;null!==r&&(r.pending=null),n=n.next}ci=!1}if(ai=0,li=oi=ii=null,di=!1,ui=0,Al.current=null,null===s||null===s.return){Dl=1,Ol=t,Pl=null;break}e:{var i=e,o=s.return,l=s,c=t;if(t=Tl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var d=c,u=l,h=u.tag;if(0===(1&u.mode)&&(0===h||11===h||15===h)){var m=u.alternate;m?(u.updateQueue=m.updateQueue,u.memoizedState=m.memoizedState,u.lanes=m.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=go(o);if(null!==p){p.flags&=-257,xo(p,o,l,0,t),1&p.mode&&fo(i,d,t),c=d;var f=(t=p).updateQueue;if(null===f){var g=new Set;g.add(c),t.updateQueue=g}else f.add(c);break e}if(0===(1&t)){fo(i,d,t),fc();break e}c=Error(a(426))}else if(ra&&1&l.mode){var x=go(o);if(null!==x){0===(65536&x.flags)&&(x.flags|=256),xo(x,o,l,0,t),pa(lo(c,l));break e}}i=c=lo(c,l),4!==Dl&&(Dl=2),null===Fl?Fl=[i]:Fl.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t,Ba(i,mo(0,c,t));break e;case 1:l=c;var v=i.type,b=i.stateNode;if(0===(128&i.flags)&&("function"===typeof v.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Gl||!Gl.has(b)))){i.flags|=65536,t&=-t,i.lanes|=t,Ba(i,po(i,l,t));break e}}i=i.return}while(null!==i)}yc(s)}catch(y){t=y,Pl===s&&null!==s&&(Pl=s=s.return);continue}break}}function pc(){var e=kl.current;return kl.current=Yi,null===e?Yi:e}function fc(){0!==Dl&&3!==Dl&&2!==Dl||(Dl=4),null===Cl||0===(268435455&Ll)&&0===(268435455&Ml)||oc(Cl,Tl)}function gc(e,t){var s=El;El|=2;var n=pc();for(Cl===e&&Tl===t||(Vl=null,hc(e,t));;)try{xc();break}catch(r){mc(e,r)}if(Aa(),El=s,kl.current=n,null!==Pl)throw Error(a(261));return Cl=null,Tl=0,Dl}function xc(){for(;null!==Pl;)bc(Pl)}function vc(){for(;null!==Pl&&!Je();)bc(Pl)}function bc(e){var t=Nl(e.alternate,e,Il);e.memoizedProps=e.pendingProps,null===t?yc(e):Pl=t,Al.current=null}function yc(e){var t=e;do{var s=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(s=Ko(s,t,Il)))return void(Pl=s)}else{if(null!==(s=Zo(s,t)))return s.flags&=32767,void(Pl=s);if(null===e)return Dl=6,void(Pl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Pl=t);Pl=t=e}while(null!==t);0===Dl&&(Dl=5)}function jc(e,t,s){var n=bt,r=_l.transition;try{_l.transition=null,bt=1,function(e,t,s,n){do{wc()}while(null!==Zl);if(0!==(6&El))throw Error(a(327));s=e.finishedWork;var r=e.finishedLanes;if(null===s)return null;if(e.finishedWork=null,e.finishedLanes=0,s===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var i=s.lanes|s.childLanes;if(function(e,t){var s=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<s;){var r=31-it(s),a=1<<r;t[r]=0,n[r]=-1,e[r]=-1,s&=~a}}(e,i),e===Cl&&(Pl=Cl=null,Tl=0),0===(2064&s.subtreeFlags)&&0===(2064&s.flags)||Kl||(Kl=!0,Cc(tt,function(){return wc(),null})),i=0!==(15990&s.flags),0!==(15990&s.subtreeFlags)||i){i=_l.transition,_l.transition=null;var o=bt;bt=1;var l=El;El|=4,Al.current=null,function(e,t){if(er=Ht,mn(e=hn())){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{var n=(s=(s=e.ownerDocument)&&s.defaultView||window).getSelection&&s.getSelection();if(n&&0!==n.rangeCount){s=n.anchorNode;var r=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{s.nodeType,i.nodeType}catch(j){s=null;break e}var o=0,l=-1,c=-1,d=0,u=0,h=e,m=null;t:for(;;){for(var p;h!==s||0!==r&&3!==h.nodeType||(l=o+r),h!==i||0!==n&&3!==h.nodeType||(c=o+n),3===h.nodeType&&(o+=h.nodeValue.length),null!==(p=h.firstChild);)m=h,h=p;for(;;){if(h===e)break t;if(m===s&&++d===r&&(l=o),m===i&&++u===n&&(c=o),null!==(p=h.nextSibling))break;m=(h=m).parentNode}h=p}s=-1===l||-1===c?null:{start:l,end:c}}else s=null}s=s||{start:0,end:0}}else s=null;for(tr={focusedElem:e,selectionRange:s},Ht=!1,$o=t;null!==$o;)if(e=(t=$o).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,$o=e;else for(;null!==$o;){t=$o;try{var f=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==f){var g=f.memoizedProps,x=f.memoizedState,v=t.stateNode,b=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:to(t.type,g),x);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var y=t.stateNode.containerInfo;1===y.nodeType?y.textContent="":9===y.nodeType&&y.documentElement&&y.removeChild(y.documentElement);break;default:throw Error(a(163))}}catch(j){Sc(t,t.return,j)}if(null!==(e=t.sibling)){e.return=t.return,$o=e;break}$o=t.return}f=tl,tl=!1}(e,s),gl(s,e),pn(tr),Ht=!!er,tr=er=null,e.current=s,vl(s,e,r),Qe(),El=l,bt=o,_l.transition=i}else e.current=s;if(Kl&&(Kl=!1,Zl=e,Jl=r),i=e.pendingLanes,0===i&&(Gl=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(rt,e,void 0,128===(128&e.current.flags))}catch(t){}}(s.stateNode),nc(e,Ye()),null!==t)for(n=e.onRecoverableError,s=0;s<t.length;s++)r=t[s],n(r.value,{componentStack:r.stack,digest:r.digest});if(Hl)throw Hl=!1,e=Wl,Wl=null,e;0!==(1&Jl)&&0!==e.tag&&wc(),i=e.pendingLanes,0!==(1&i)?e===Yl?Ql++:(Ql=0,Yl=e):Ql=0,qr()}(e,t,s,n)}finally{_l.transition=r,bt=n}return null}function wc(){if(null!==Zl){var e=yt(Jl),t=_l.transition,s=bt;try{if(_l.transition=null,bt=16>e?16:e,null===Zl)var n=!1;else{if(e=Zl,Zl=null,Jl=0,0!==(6&El))throw Error(a(331));var r=El;for(El|=4,$o=e.current;null!==$o;){var i=$o,o=i.child;if(0!==(16&$o.flags)){var l=i.deletions;if(null!==l){for(var c=0;c<l.length;c++){var d=l[c];for($o=d;null!==$o;){var u=$o;switch(u.tag){case 0:case 11:case 15:sl(8,u,i)}var h=u.child;if(null!==h)h.return=u,$o=h;else for(;null!==$o;){var m=(u=$o).sibling,p=u.return;if(al(u),u===d){$o=null;break}if(null!==m){m.return=p,$o=m;break}$o=p}}}var f=i.alternate;if(null!==f){var g=f.child;if(null!==g){f.child=null;do{var x=g.sibling;g.sibling=null,g=x}while(null!==g)}}$o=i}}if(0!==(2064&i.subtreeFlags)&&null!==o)o.return=i,$o=o;else e:for(;null!==$o;){if(0!==(2048&(i=$o).flags))switch(i.tag){case 0:case 11:case 15:sl(9,i,i.return)}var v=i.sibling;if(null!==v){v.return=i.return,$o=v;break e}$o=i.return}}var b=e.current;for($o=b;null!==$o;){var y=(o=$o).child;if(0!==(2064&o.subtreeFlags)&&null!==y)y.return=o,$o=y;else e:for(o=b;null!==$o;){if(0!==(2048&(l=$o).flags))try{switch(l.tag){case 0:case 11:case 15:nl(9,l)}}catch(w){Sc(l,l.return,w)}if(l===o){$o=null;break e}var j=l.sibling;if(null!==j){j.return=l.return,$o=j;break e}$o=l.return}}if(El=r,qr(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(rt,e)}catch(w){}n=!0}return n}finally{bt=s,_l.transition=t}}return!1}function Nc(e,t,s){e=Fa(e,t=mo(0,t=lo(s,t),1),1),t=ec(),null!==e&&(xt(e,1,t),nc(e,t))}function Sc(e,t,s){if(3===e.tag)Nc(e,e,s);else for(;null!==t;){if(3===t.tag){Nc(t,e,s);break}if(1===t.tag){var n=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof n.componentDidCatch&&(null===Gl||!Gl.has(n))){t=Fa(t,e=po(t,e=lo(s,e),1),1),e=ec(),null!==t&&(xt(t,1,e),nc(t,e));break}}t=t.return}}function kc(e,t,s){var n=e.pingCache;null!==n&&n.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&s,Cl===e&&(Tl&s)===s&&(4===Dl||3===Dl&&(130023424&Tl)===Tl&&500>Ye()-Bl?hc(e,0):zl|=s),nc(e,t)}function Ac(e,t){0===t&&(0===(1&e.mode)?t=1:(t=dt,0===(130023424&(dt<<=1))&&(dt=4194304)));var s=ec();null!==(e=Da(e,t))&&(xt(e,t,s),nc(e,s))}function _c(e){var t=e.memoizedState,s=0;null!==t&&(s=t.retryLane),Ac(e,s)}function Ec(e,t){var s=0;switch(e.tag){case 13:var n=e.stateNode,r=e.memoizedState;null!==r&&(s=r.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(a(314))}null!==n&&n.delete(t),Ac(e,s)}function Cc(e,t){return Ke(e,t)}function Pc(e,t,s,n){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Tc(e,t,s,n){return new Pc(e,t,s,n)}function Ic(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Rc(e,t){var s=e.alternate;return null===s?((s=Tc(e.tag,t,e.key,e.mode)).elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=t,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=14680064&e.flags,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,t=e.dependencies,s.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s}function Dc(e,t,s,n,r,i){var o=2;if(n=e,"function"===typeof e)Ic(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case N:return Oc(s.children,r,i,t);case S:o=8,r|=8;break;case k:return(e=Tc(12,s,t,2|r)).elementType=k,e.lanes=i,e;case C:return(e=Tc(13,s,t,r)).elementType=C,e.lanes=i,e;case P:return(e=Tc(19,s,t,r)).elementType=P,e.lanes=i,e;case R:return Lc(s,r,i,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case A:o=10;break e;case _:o=9;break e;case E:o=11;break e;case T:o=14;break e;case I:o=16,n=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Tc(o,s,t,r)).elementType=e,t.type=n,t.lanes=i,t}function Oc(e,t,s,n){return(e=Tc(7,e,n,t)).lanes=s,e}function Lc(e,t,s,n){return(e=Tc(22,e,n,t)).elementType=R,e.lanes=s,e.stateNode={isHidden:!1},e}function Mc(e,t,s){return(e=Tc(6,e,null,t)).lanes=s,e}function zc(e,t,s){return(t=Tc(4,null!==e.children?e.children:[],e.key,t)).lanes=s,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Fc(e,t,s,n,r){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=n,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Uc(e,t,s,n,r,a,i,o,l){return e=new Fc(e,t,s,o,l),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Tc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:n,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},La(a),e}function Bc(e){if(!e)return _r;e:{if(qe(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ir(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var s=e.type;if(Ir(s))return Or(e,s,t)}return t}function qc(e,t,s,n,r,a,i,o,l){return(e=Uc(s,n,!0,e,0,a,0,o,l)).context=Bc(null),s=e.current,(a=za(n=ec(),r=tc(s))).callback=void 0!==t&&null!==t?t:null,Fa(s,a,r),e.current.lanes=r,xt(e,r,n),nc(e,n),e}function Vc(e,t,s,n){var r=t.current,a=ec(),i=tc(r);return s=Bc(s),null===t.context?t.context=s:t.pendingContext=s,(t=za(a,i)).payload={element:e},null!==(n=void 0===n?null:n)&&(t.callback=n),null!==(e=Fa(r,t,i))&&(sc(e,r,i,a),Ua(e,r,i)),i}function Hc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Wc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var s=e.retryLane;e.retryLane=0!==s&&s<t?s:t}}function Gc(e,t){Wc(e,t),(e=e.alternate)&&Wc(e,t)}Nl=function(e,t,s){if(null!==e)if(e.memoizedProps!==t.pendingProps||Cr.current)bo=!0;else{if(0===(e.lanes&s)&&0===(128&t.flags))return bo=!1,function(e,t,s){switch(t.tag){case 3:Co(t),ma();break;case 5:Ya(t);break;case 1:Ir(t.type)&&Lr(t);break;case 4:Ja(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,r=t.memoizedProps.value;Ar(wa,n._currentValue),n._currentValue=r;break;case 13:if(null!==(n=t.memoizedState))return null!==n.dehydrated?(Ar(Xa,1&Xa.current),t.flags|=128,null):0!==(s&t.child.childLanes)?Mo(e,t,s):(Ar(Xa,1&Xa.current),null!==(e=Ho(e,t,s))?e.sibling:null);Ar(Xa,1&Xa.current);break;case 19:if(n=0!==(s&t.childLanes),0!==(128&e.flags)){if(n)return qo(e,t,s);t.flags|=128}if(null!==(r=t.memoizedState)&&(r.rendering=null,r.tail=null,r.lastEffect=null),Ar(Xa,Xa.current),n)break;return null;case 22:case 23:return t.lanes=0,So(e,t,s)}return Ho(e,t,s)}(e,t,s);bo=0!==(131072&e.flags)}else bo=!1,ra&&0!==(1048576&t.flags)&&Xr(t,Gr,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Vo(e,t),e=t.pendingProps;var r=Tr(t,Er.current);Ca(t,s),r=fi(null,t,n,e,r,s);var i=gi();return t.flags|=1,"object"===typeof r&&null!==r&&"function"===typeof r.render&&void 0===r.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ir(n)?(i=!0,Lr(t)):i=!1,t.memoizedState=null!==r.state&&void 0!==r.state?r.state:null,La(t),r.updater=no,t.stateNode=r,r._reactInternals=t,oo(t,n,e,s),t=Eo(null,t,n,!0,i,s)):(t.tag=0,ra&&i&&ea(t),yo(null,t,r,s),t=t.child),t;case 16:n=t.elementType;e:{switch(Vo(e,t),e=t.pendingProps,n=(r=n._init)(n._payload),t.type=n,r=t.tag=function(e){if("function"===typeof e)return Ic(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===E)return 11;if(e===T)return 14}return 2}(n),e=to(n,e),r){case 0:t=Ao(null,t,n,e,s);break e;case 1:t=_o(null,t,n,e,s);break e;case 11:t=jo(null,t,n,e,s);break e;case 14:t=wo(null,t,n,to(n.type,e),s);break e}throw Error(a(306,n,""))}return t;case 0:return n=t.type,r=t.pendingProps,Ao(e,t,n,r=t.elementType===n?r:to(n,r),s);case 1:return n=t.type,r=t.pendingProps,_o(e,t,n,r=t.elementType===n?r:to(n,r),s);case 3:e:{if(Co(t),null===e)throw Error(a(387));n=t.pendingProps,r=(i=t.memoizedState).element,Ma(e,t),qa(t,n,null,s);var o=t.memoizedState;if(n=o.element,i.isDehydrated){if(i={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,256&t.flags){t=Po(e,t,n,s,r=lo(Error(a(423)),t));break e}if(n!==r){t=Po(e,t,n,s,r=lo(Error(a(424)),t));break e}for(na=cr(t.stateNode.containerInfo.firstChild),sa=t,ra=!0,aa=null,s=ja(t,null,n,s),t.child=s;s;)s.flags=-3&s.flags|4096,s=s.sibling}else{if(ma(),n===r){t=Ho(e,t,s);break e}yo(e,t,n,s)}t=t.child}return t;case 5:return Ya(t),null===e&&ca(t),n=t.type,r=t.pendingProps,i=null!==e?e.memoizedProps:null,o=r.children,sr(n,r)?o=null:null!==i&&sr(n,i)&&(t.flags|=32),ko(e,t),yo(e,t,o,s),t.child;case 6:return null===e&&ca(t),null;case 13:return Mo(e,t,s);case 4:return Ja(t,t.stateNode.containerInfo),n=t.pendingProps,null===e?t.child=ya(t,null,n,s):yo(e,t,n,s),t.child;case 11:return n=t.type,r=t.pendingProps,jo(e,t,n,r=t.elementType===n?r:to(n,r),s);case 7:return yo(e,t,t.pendingProps,s),t.child;case 8:case 12:return yo(e,t,t.pendingProps.children,s),t.child;case 10:e:{if(n=t.type._context,r=t.pendingProps,i=t.memoizedProps,o=r.value,Ar(wa,n._currentValue),n._currentValue=o,null!==i)if(on(i.value,o)){if(i.children===r.children&&!Cr.current){t=Ho(e,t,s);break e}}else for(null!==(i=t.child)&&(i.return=t);null!==i;){var l=i.dependencies;if(null!==l){o=i.child;for(var c=l.firstContext;null!==c;){if(c.context===n){if(1===i.tag){(c=za(-1,s&-s)).tag=2;var d=i.updateQueue;if(null!==d){var u=(d=d.shared).pending;null===u?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}i.lanes|=s,null!==(c=i.alternate)&&(c.lanes|=s),Ea(i.return,s,t),l.lanes|=s;break}c=c.next}}else if(10===i.tag)o=i.type===t.type?null:i.child;else if(18===i.tag){if(null===(o=i.return))throw Error(a(341));o.lanes|=s,null!==(l=o.alternate)&&(l.lanes|=s),Ea(o,s,t),o=i.sibling}else o=i.child;if(null!==o)o.return=i;else for(o=i;null!==o;){if(o===t){o=null;break}if(null!==(i=o.sibling)){i.return=o.return,o=i;break}o=o.return}i=o}yo(e,t,r.children,s),t=t.child}return t;case 9:return r=t.type,n=t.pendingProps.children,Ca(t,s),n=n(r=Pa(r)),t.flags|=1,yo(e,t,n,s),t.child;case 14:return r=to(n=t.type,t.pendingProps),wo(e,t,n,r=to(n.type,r),s);case 15:return No(e,t,t.type,t.pendingProps,s);case 17:return n=t.type,r=t.pendingProps,r=t.elementType===n?r:to(n,r),Vo(e,t),t.tag=1,Ir(n)?(e=!0,Lr(t)):e=!1,Ca(t,s),ao(t,n,r),oo(t,n,r,s),Eo(null,t,n,!0,e,s);case 19:return qo(e,t,s);case 22:return So(e,t,s)}throw Error(a(156,t.tag))};var Kc="function"===typeof reportError?reportError:function(e){console.error(e)};function Zc(e){this._internalRoot=e}function Jc(e){this._internalRoot=e}function Qc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Yc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function $c(){}function Xc(e,t,s,n,r){var a=s._reactRootContainer;if(a){var i=a;if("function"===typeof r){var o=r;r=function(){var e=Hc(i);o.call(e)}}Vc(t,i,e,r)}else i=function(e,t,s,n,r){if(r){if("function"===typeof n){var a=n;n=function(){var e=Hc(i);a.call(e)}}var i=qc(t,n,e,0,null,!1,0,"",$c);return e._reactRootContainer=i,e[pr]=i.current,qn(8===e.nodeType?e.parentNode:e),dc(),i}for(;r=e.lastChild;)e.removeChild(r);if("function"===typeof n){var o=n;n=function(){var e=Hc(l);o.call(e)}}var l=Uc(e,0,!1,null,0,!1,0,"",$c);return e._reactRootContainer=l,e[pr]=l.current,qn(8===e.nodeType?e.parentNode:e),dc(function(){Vc(t,l,s,n)}),l}(s,t,e,r,n);return Hc(i)}Jc.prototype.render=Zc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Vc(e,t,null,null)},Jc.prototype.unmount=Zc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;dc(function(){Vc(null,e,null,null)}),t[pr]=null}},Jc.prototype.unstable_scheduleHydration=function(e){if(e){var t=St();e={blockedOn:null,target:e,priority:t};for(var s=0;s<Rt.length&&0!==t&&t<Rt[s].priority;s++);Rt.splice(s,0,e),0===s&&Mt(e)}},jt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var s=ut(t.pendingLanes);0!==s&&(vt(t,1|s),nc(t,Ye()),0===(6&El)&&(ql=Ye()+500,qr()))}break;case 13:dc(function(){var t=Da(e,1);if(null!==t){var s=ec();sc(t,e,1,s)}}),Gc(e,1)}},wt=function(e){if(13===e.tag){var t=Da(e,134217728);if(null!==t)sc(t,e,134217728,ec());Gc(e,134217728)}},Nt=function(e){if(13===e.tag){var t=tc(e),s=Da(e,t);if(null!==s)sc(s,e,t,ec());Gc(e,t)}},St=function(){return bt},kt=function(e,t){var s=bt;try{return bt=e,t()}finally{bt=s}},we=function(e,t,s){switch(t){case"input":if($(e,s),t=s.name,"radio"===s.type&&null!=t){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<s.length;t++){var n=s[t];if(n!==e&&n.form===e.form){var r=jr(n);if(!r)throw Error(a(90));K(n),$(n,r)}}}break;case"textarea":ae(e,s);break;case"select":null!=(t=s.value)&&se(e,!!s.multiple,t,!1)}},Ee=cc,Ce=dc;var ed={usingClientEntryPoint:!1,Events:[br,yr,jr,Ae,_e,cc]},td={findFiberByHostInstance:vr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},sd={bundleType:td.bundleType,version:td.version,rendererPackageName:td.rendererPackageName,rendererConfig:td.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:y.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=We(e))?null:e.stateNode},findFiberByHostInstance:td.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var nd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nd.isDisabled&&nd.supportsFiber)try{rt=nd.inject(sd),at=nd}catch(de){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ed,t.createPortal=function(e,t){var s=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Qc(t))throw Error(a(200));return function(e,t,s){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:w,key:null==n?null:""+n,children:e,containerInfo:t,implementation:s}}(e,t,null,s)},t.createRoot=function(e,t){if(!Qc(e))throw Error(a(299));var s=!1,n="",r=Kc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(s=!0),void 0!==t.identifierPrefix&&(n=t.identifierPrefix),void 0!==t.onRecoverableError&&(r=t.onRecoverableError)),t=Uc(e,1,!1,null,0,s,0,n,r),e[pr]=t.current,qn(8===e.nodeType?e.parentNode:e),new Zc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=We(t))?null:e.stateNode},t.flushSync=function(e){return dc(e)},t.hydrate=function(e,t,s){if(!Yc(t))throw Error(a(200));return Xc(null,e,t,!0,s)},t.hydrateRoot=function(e,t,s){if(!Qc(e))throw Error(a(405));var n=null!=s&&s.hydratedSources||null,r=!1,i="",o=Kc;if(null!==s&&void 0!==s&&(!0===s.unstable_strictMode&&(r=!0),void 0!==s.identifierPrefix&&(i=s.identifierPrefix),void 0!==s.onRecoverableError&&(o=s.onRecoverableError)),t=qc(t,null,e,1,null!=s?s:null,r,0,i,o),e[pr]=t.current,qn(e),n)for(e=0;e<n.length;e++)r=(r=(s=n[e])._getVersion)(s._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[s,r]:t.mutableSourceEagerHydrationData.push(s,r);return new Jc(t)},t.render=function(e,t,s){if(!Yc(t))throw Error(a(200));return Xc(null,e,t,!1,s)},t.unmountComponentAtNode=function(e){if(!Yc(e))throw Error(a(40));return!!e._reactRootContainer&&(dc(function(){Xc(null,null,e,!1,function(){e._reactRootContainer=null,e[pr]=null})}),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,s,n){if(!Yc(s))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return Xc(e,t,s,!1,n)},t.version="18.3.1-next-f1338f8080-20240426"},2938:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});const n=(0,s(3797).A)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]])},3216:(e,t,s)=>{"use strict";var n;s.d(t,{$P:()=>m,BV:()=>M,C5:()=>D,Ix:()=>L,V8:()=>R,Zp:()=>x,g:()=>v,jb:()=>c,qh:()=>O,x$:()=>b,zy:()=>f});var r=s(5043),a=s(1387);function i(){return i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},i.apply(this,arguments)}const o=r.createContext(null);const l=r.createContext(null);const c=r.createContext(null);const d=r.createContext(null);const u=r.createContext({outlet:null,matches:[],isDataRoute:!1});const h=r.createContext(null);function m(e,t){let{relative:s}=void 0===t?{}:t;p()||(0,a.Oi)(!1);let{basename:n,navigator:i}=r.useContext(c),{hash:o,pathname:l,search:d}=b(e,{relative:s}),u=l;return"/"!==n&&(u="/"===l?n:(0,a.HS)([n,l])),i.createHref({pathname:u,search:d,hash:o})}function p(){return null!=r.useContext(d)}function f(){return p()||(0,a.Oi)(!1),r.useContext(d).location}function g(e){r.useContext(c).static||r.useLayoutEffect(e)}function x(){let{isDataRoute:e}=r.useContext(u);return e?function(){let{router:e}=E(A.UseNavigateStable),t=P(_.UseNavigateStable),s=r.useRef(!1);return g(()=>{s.current=!0}),r.useCallback(function(n,r){void 0===r&&(r={}),s.current&&("number"===typeof n?e.navigate(n):e.navigate(n,i({fromRouteId:t},r)))},[e,t])}():function(){p()||(0,a.Oi)(!1);let e=r.useContext(o),{basename:t,future:s,navigator:n}=r.useContext(c),{matches:i}=r.useContext(u),{pathname:l}=f(),d=JSON.stringify((0,a.yD)(i,s.v7_relativeSplatPath)),h=r.useRef(!1);return g(()=>{h.current=!0}),r.useCallback(function(s,r){if(void 0===r&&(r={}),!h.current)return;if("number"===typeof s)return void n.go(s);let i=(0,a.Gh)(s,JSON.parse(d),l,"path"===r.relative);null==e&&"/"!==t&&(i.pathname="/"===i.pathname?t:(0,a.HS)([t,i.pathname])),(r.replace?n.replace:n.push)(i,r.state,r)},[t,n,d,l,e])}()}function v(){let{matches:e}=r.useContext(u),t=e[e.length-1];return t?t.params:{}}function b(e,t){let{relative:s}=void 0===t?{}:t,{future:n}=r.useContext(c),{matches:i}=r.useContext(u),{pathname:o}=f(),l=JSON.stringify((0,a.yD)(i,n.v7_relativeSplatPath));return r.useMemo(()=>(0,a.Gh)(e,JSON.parse(l),o,"path"===s),[e,l,o,s])}function y(e,t,s,n){p()||(0,a.Oi)(!1);let{navigator:o}=r.useContext(c),{matches:l}=r.useContext(u),h=l[l.length-1],m=h?h.params:{},g=(h&&h.pathname,h?h.pathnameBase:"/");h&&h.route;let x,v=f();if(t){var b;let e="string"===typeof t?(0,a.Rr)(t):t;"/"===g||(null==(b=e.pathname)?void 0:b.startsWith(g))||(0,a.Oi)(!1),x=e}else x=v;let y=x.pathname||"/",j=y;if("/"!==g){let e=g.replace(/^\//,"").split("/");j="/"+y.replace(/^\//,"").split("/").slice(e.length).join("/")}let w=(0,a.ue)(e,{pathname:j});let N=k(w&&w.map(e=>Object.assign({},e,{params:Object.assign({},m,e.params),pathname:(0,a.HS)([g,o.encodeLocation?o.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?g:(0,a.HS)([g,o.encodeLocation?o.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),l,s,n);return t&&N?r.createElement(d.Provider,{value:{location:i({pathname:"/",search:"",hash:"",state:null,key:"default"},x),navigationType:a.rc.Pop}},N):N}function j(){let e=function(){var e;let t=r.useContext(h),s=C(_.UseRouteError),n=P(_.UseRouteError);if(void 0!==t)return t;return null==(e=s.errors)?void 0:e[n]}(),t=(0,a.pX)(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),s=e instanceof Error?e.stack:null,n="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:n};return r.createElement(r.Fragment,null,r.createElement("h2",null,"Unexpected Application Error!"),r.createElement("h3",{style:{fontStyle:"italic"}},t),s?r.createElement("pre",{style:i},s):null,null)}const w=r.createElement(j,null);class N extends r.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?r.createElement(u.Provider,{value:this.props.routeContext},r.createElement(h.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function S(e){let{routeContext:t,match:s,children:n}=e,a=r.useContext(o);return a&&a.static&&a.staticContext&&(s.route.errorElement||s.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=s.route.id),r.createElement(u.Provider,{value:t},n)}function k(e,t,s,n){var i;if(void 0===t&&(t=[]),void 0===s&&(s=null),void 0===n&&(n=null),null==e){var o;if(!s)return null;if(s.errors)e=s.matches;else{if(!(null!=(o=n)&&o.v7_partialHydration&&0===t.length&&!s.initialized&&s.matches.length>0))return null;e=s.matches}}let l=e,c=null==(i=s)?void 0:i.errors;if(null!=c){let e=l.findIndex(e=>e.route.id&&void 0!==(null==c?void 0:c[e.route.id]));e>=0||(0,a.Oi)(!1),l=l.slice(0,Math.min(l.length,e+1))}let d=!1,u=-1;if(s&&n&&n.v7_partialHydration)for(let r=0;r<l.length;r++){let e=l[r];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(u=r),e.route.id){let{loaderData:t,errors:n}=s,r=e.route.loader&&void 0===t[e.route.id]&&(!n||void 0===n[e.route.id]);if(e.route.lazy||r){d=!0,l=u>=0?l.slice(0,u+1):[l[0]];break}}}return l.reduceRight((e,n,a)=>{let i,o=!1,h=null,m=null;var p;s&&(i=c&&n.route.id?c[n.route.id]:void 0,h=n.route.errorElement||w,d&&(u<0&&0===a?(p="route-fallback",!1||T[p]||(T[p]=!0),o=!0,m=null):u===a&&(o=!0,m=n.route.hydrateFallbackElement||null)));let f=t.concat(l.slice(0,a+1)),g=()=>{let t;return t=i?h:o?m:n.route.Component?r.createElement(n.route.Component,null):n.route.element?n.route.element:e,r.createElement(S,{match:n,routeContext:{outlet:e,matches:f,isDataRoute:null!=s},children:t})};return s&&(n.route.ErrorBoundary||n.route.errorElement||0===a)?r.createElement(N,{location:s.location,revalidation:s.revalidation,component:h,error:i,children:g(),routeContext:{outlet:null,matches:f,isDataRoute:!0}}):g()},null)}var A=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(A||{}),_=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(_||{});function E(e){let t=r.useContext(o);return t||(0,a.Oi)(!1),t}function C(e){let t=r.useContext(l);return t||(0,a.Oi)(!1),t}function P(e){let t=function(){let e=r.useContext(u);return e||(0,a.Oi)(!1),e}(),s=t.matches[t.matches.length-1];return s.route.id||(0,a.Oi)(!1),s.route.id}const T={};const I=(e,t,s)=>{};function R(e,t){void 0===(null==e?void 0:e.v7_startTransition)&&I("v7_startTransition","React Router will begin wrapping state updates in `React.startTransition` in v7","https://reactrouter.com/v6/upgrading/future#v7_starttransition"),void 0!==(null==e?void 0:e.v7_relativeSplatPath)||t&&void 0!==t.v7_relativeSplatPath||I("v7_relativeSplatPath","Relative route resolution within Splat routes is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_relativesplatpath"),t&&(void 0===t.v7_fetcherPersist&&I("v7_fetcherPersist","The persistence behavior of fetchers is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_fetcherpersist"),void 0===t.v7_normalizeFormMethod&&I("v7_normalizeFormMethod","Casing of `formMethod` fields is being normalized to uppercase in v7","https://reactrouter.com/v6/upgrading/future#v7_normalizeformmethod"),void 0===t.v7_partialHydration&&I("v7_partialHydration","`RouterProvider` hydration behavior is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_partialhydration"),void 0===t.v7_skipActionErrorRevalidation&&I("v7_skipActionErrorRevalidation","The revalidation behavior after 4xx/5xx `action` responses is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_skipactionerrorrevalidation"))}(n||(n=s.t(r,2))).startTransition;function D(e){let{to:t,replace:s,state:n,relative:i}=e;p()||(0,a.Oi)(!1);let{future:o,static:l}=r.useContext(c),{matches:d}=r.useContext(u),{pathname:h}=f(),m=x(),g=(0,a.Gh)(t,(0,a.yD)(d,o.v7_relativeSplatPath),h,"path"===i),v=JSON.stringify(g);return r.useEffect(()=>m(JSON.parse(v),{replace:s,state:n,relative:i}),[m,v,i,s,n]),null}function O(e){(0,a.Oi)(!1)}function L(e){let{basename:t="/",children:s=null,location:n,navigationType:o=a.rc.Pop,navigator:l,static:u=!1,future:h}=e;p()&&(0,a.Oi)(!1);let m=t.replace(/^\/*/,"/"),f=r.useMemo(()=>({basename:m,navigator:l,static:u,future:i({v7_relativeSplatPath:!1},h)}),[m,h,l,u]);"string"===typeof n&&(n=(0,a.Rr)(n));let{pathname:g="/",search:x="",hash:v="",state:b=null,key:y="default"}=n,j=r.useMemo(()=>{let e=(0,a.pb)(g,m);return null==e?null:{location:{pathname:e,search:x,hash:v,state:b,key:y},navigationType:o}},[m,g,x,v,b,y,o]);return null==j?null:r.createElement(c.Provider,{value:f},r.createElement(d.Provider,{children:s,value:j}))}function M(e){let{children:t,location:s}=e;return y(z(t),s)}new Promise(()=>{});r.Component;function z(e,t){void 0===t&&(t=[]);let s=[];return r.Children.forEach(e,(e,n)=>{if(!r.isValidElement(e))return;let i=[...t,n];if(e.type===r.Fragment)return void s.push.apply(s,z(e.props.children,i));e.type!==O&&(0,a.Oi)(!1),e.props.index&&e.props.children&&(0,a.Oi)(!1);let o={id:e.props.id||i.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(o.children=z(e.props.children,i)),s.push(o)}),s}},3381:(e,t,s)=>{"use strict";s.r(t),s.d(t,{checkPromptState:()=>a,forceShowPromptForTesting:()=>o,resetNotificationPromptForTesting:()=>n,simulateDeniedUser:()=>l,simulateUnsubscribedUser:()=>r,testCompleteNotificationFlow:()=>c,testPromptConditions:()=>i});const n=()=>{localStorage.removeItem("notification-prompt-seen"),localStorage.removeItem("notification-prompt-last-seen"),console.log("\ud83e\uddea [TEST] Prompt de notification r\xe9initialis\xe9 pour les tests")},r=()=>{n(),console.log("\ud83e\uddea [TEST] Simulation d'un utilisateur non abonn\xe9")},a=()=>{const e=localStorage.getItem("notification-prompt-seen"),t=localStorage.getItem("notification-prompt-last-seen");if(console.log("\ud83e\uddea [TEST] \xc9tat du prompt:"),console.log("   - A vu le prompt:",e),console.log("   - Derni\xe8re fois vu:",t?new Date(parseInt(t)).toLocaleString():"Jamais"),t){const e=(Date.now()-parseInt(t))/864e5;console.log("   - Jours depuis la derni\xe8re fois:",Math.round(e))}return{hasSeenPrompt:!!e,lastSeen:t?parseInt(t):null,daysSinceLastSeen:t?(Date.now()-parseInt(t))/864e5:null}},i=()=>{console.log("\ud83e\uddea [TEST] Test des conditions d'affichage du prompt:");const e="serviceWorker"in navigator&&"PushManager"in window,t=Notification.permission;console.log("   - Notifications support\xe9es:",e),console.log("   - Permission actuelle:",t),console.log("   - Service Worker disponible:","serviceWorker"in navigator),console.log("   - PushManager disponible:","PushManager"in window);const s=a(),n=e&&"denied"!==t&&(!s.hasSeenPrompt||s.daysSinceLastSeen&&s.daysSinceLastSeen>=3);return console.log("   - Devrait afficher le prompt:",n),{isSupported:e,permission:t,shouldShow:n,promptState:s}},o=()=>{n(),console.log("\ud83e\uddea [TEST] Prompt forc\xe9 pour les tests - rechargez la page")},l=()=>{n(),console.log("\ud83e\uddea [TEST] Simulation d'un utilisateur qui a refus\xe9"),console.log("   - Pour tester, refusez manuellement les notifications dans votre navigateur")},c=async()=>{console.log("\ud83e\uddea [TEST] Test du cycle complet de notifications..."),console.log("\n1. \xc9tat initial:");const e=i();console.log("\n2. R\xe9initialisation pour le test:"),n(),console.log("\n3. \xc9tat apr\xe8s r\xe9initialisation:");const t=i();return console.log("\n\u2705 Test termin\xe9. Rechargez la page pour voir le prompt."),{initialState:e,resetState:t}};"undefined"!==typeof window&&(window.testNotificationPrompt={resetNotificationPromptForTesting:n,simulateUnsubscribedUser:r,checkPromptState:a,testPromptConditions:i,forceShowPromptForTesting:o,simulateDeniedUser:l,testCompleteNotificationFlow:c},console.log("\ud83e\uddea [TEST] Utilitaires de test charg\xe9s. Utilisez:"),console.log("   - testNotificationPrompt.testCompleteNotificationFlow()"),console.log("   - testNotificationPrompt.checkPromptState()"),console.log("   - testNotificationPrompt.forceShowPromptForTesting()"))},3797:(e,t,s)=>{"use strict";s.d(t,{A:()=>l});var n=s(2555),r=s(3986),a=s(5043),i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const o=["color","size","strokeWidth","absoluteStrokeWidth","children"];var l=(e,t)=>{const s=(0,a.forwardRef)((s,l)=>{let{color:c="currentColor",size:d=24,strokeWidth:u=2,absoluteStrokeWidth:h,children:m}=s,p=(0,r.A)(s,o);return(0,a.createElement)("svg",(0,n.A)((0,n.A)({ref:l},i),{},{width:d,height:d,stroke:c,strokeWidth:h?24*Number(u)/Number(d):u,className:"lucide lucide-".concat((f=e,f.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()))},p),[...t.map(e=>{let[t,s]=e;return(0,a.createElement)(t,s)}),...(Array.isArray(m)?m:[m])||[]]);var f});return s.displayName="".concat(e),s}},3986:(e,t,s)=>{"use strict";function n(e,t){if(null==e)return{};var s,n,r=function(e,t){if(null==e)return{};var s={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;s[n]=e[n]}return s}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)s=a[n],-1===t.indexOf(s)&&{}.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}s.d(t,{A:()=>n})},4068:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});const n=(0,s(3797).A)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},4139:(e,t,s)=>{"use strict";s.d(t,{f:()=>n});const n="https://ab-pret-back.onrender.com";console.log("[CONFIG] Backend URL:",n),console.log("[CONFIG] Environment:","production")},4202:(e,t)=>{"use strict";var s=Symbol.for("react.element"),n=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),m=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},f=Object.assign,g={};function x(e,t,s){this.props=e,this.context=t,this.refs=g,this.updater=s||p}function v(){}function b(e,t,s){this.props=e,this.context=t,this.refs=g,this.updater=s||p}x.prototype.isReactComponent={},x.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},x.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=x.prototype;var y=b.prototype=new v;y.constructor=b,f(y,x.prototype),y.isPureReactComponent=!0;var j=Array.isArray,w=Object.prototype.hasOwnProperty,N={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function k(e,t,n){var r,a={},i=null,o=null;if(null!=t)for(r in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(i=""+t.key),t)w.call(t,r)&&!S.hasOwnProperty(r)&&(a[r]=t[r]);var l=arguments.length-2;if(1===l)a.children=n;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];a.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps)void 0===a[r]&&(a[r]=l[r]);return{$$typeof:s,type:e,key:i,ref:o,props:a,_owner:N.current}}function A(e){return"object"===typeof e&&null!==e&&e.$$typeof===s}var _=/\/+/g;function E(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function C(e,t,r,a,i){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l=!1;if(null===e)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case s:case n:l=!0}}if(l)return i=i(l=e),e=""===a?"."+E(l,0):a,j(i)?(r="",null!=e&&(r=e.replace(_,"$&/")+"/"),C(i,t,r,"",function(e){return e})):null!=i&&(A(i)&&(i=function(e,t){return{$$typeof:s,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(i,r+(!i.key||l&&l.key===i.key?"":(""+i.key).replace(_,"$&/")+"/")+e)),t.push(i)),1;if(l=0,a=""===a?".":a+":",j(e))for(var c=0;c<e.length;c++){var d=a+E(o=e[c],c);l+=C(o,t,r,d,i)}else if(d=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=m&&e[m]||e["@@iterator"])?e:null}(e),"function"===typeof d)for(e=d.call(e),c=0;!(o=e.next()).done;)l+=C(o=o.value,t,r,d=a+E(o,c++),i);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function P(e,t,s){if(null==e)return e;var n=[],r=0;return C(e,n,"","",function(e){return t.call(s,e,r++)}),n}function T(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var I={current:null},R={transition:null},D={ReactCurrentDispatcher:I,ReactCurrentBatchConfig:R,ReactCurrentOwner:N};function O(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:P,forEach:function(e,t,s){P(e,function(){t.apply(this,arguments)},s)},count:function(e){var t=0;return P(e,function(){t++}),t},toArray:function(e){return P(e,function(e){return e})||[]},only:function(e){if(!A(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=x,t.Fragment=r,t.Profiler=i,t.PureComponent=b,t.StrictMode=a,t.Suspense=d,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,t.act=O,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=f({},e.props),a=e.key,i=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(i=t.ref,o=N.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)w.call(t,c)&&!S.hasOwnProperty(c)&&(r[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)r.children=n;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];r.children=l}return{$$typeof:s,type:e.type,key:a,ref:i,props:r,_owner:o}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=k,t.createFactory=function(e){var t=k.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=A,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:T}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=R.transition;R.transition={};try{e()}finally{R.transition=t}},t.unstable_act=O,t.useCallback=function(e,t){return I.current.useCallback(e,t)},t.useContext=function(e){return I.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return I.current.useDeferredValue(e)},t.useEffect=function(e,t){return I.current.useEffect(e,t)},t.useId=function(){return I.current.useId()},t.useImperativeHandle=function(e,t,s){return I.current.useImperativeHandle(e,t,s)},t.useInsertionEffect=function(e,t){return I.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return I.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return I.current.useMemo(e,t)},t.useReducer=function(e,t,s){return I.current.useReducer(e,t,s)},t.useRef=function(e){return I.current.useRef(e)},t.useState=function(e){return I.current.useState(e)},t.useSyncExternalStore=function(e,t,s){return I.current.useSyncExternalStore(e,t,s)},t.useTransition=function(){return I.current.useTransition()},t.version="18.3.1"},4391:(e,t,s)=>{"use strict";var n=s(7950);t.createRoot=n.createRoot,t.hydrateRoot=n.hydrateRoot},4445:(e,t)=>{"use strict";t.byteLength=function(e){var t=o(e),s=t[0],n=t[1];return 3*(s+n)/4-n},t.toByteArray=function(e){var t,s,a=o(e),i=a[0],l=a[1],c=new r(function(e,t,s){return 3*(t+s)/4-s}(0,i,l)),d=0,u=l>0?i-4:i;for(s=0;s<u;s+=4)t=n[e.charCodeAt(s)]<<18|n[e.charCodeAt(s+1)]<<12|n[e.charCodeAt(s+2)]<<6|n[e.charCodeAt(s+3)],c[d++]=t>>16&255,c[d++]=t>>8&255,c[d++]=255&t;2===l&&(t=n[e.charCodeAt(s)]<<2|n[e.charCodeAt(s+1)]>>4,c[d++]=255&t);1===l&&(t=n[e.charCodeAt(s)]<<10|n[e.charCodeAt(s+1)]<<4|n[e.charCodeAt(s+2)]>>2,c[d++]=t>>8&255,c[d++]=255&t);return c},t.fromByteArray=function(e){for(var t,n=e.length,r=n%3,a=[],i=16383,o=0,l=n-r;o<l;o+=i)a.push(c(e,o,o+i>l?l:o+i));1===r?(t=e[n-1],a.push(s[t>>2]+s[t<<4&63]+"==")):2===r&&(t=(e[n-2]<<8)+e[n-1],a.push(s[t>>10]+s[t>>4&63]+s[t<<2&63]+"="));return a.join("")};for(var s=[],n=[],r="undefined"!==typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0;i<64;++i)s[i]=a[i],n[a.charCodeAt(i)]=i;function o(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var s=e.indexOf("=");return-1===s&&(s=t),[s,s===t?0:4-s%4]}function l(e){return s[e>>18&63]+s[e>>12&63]+s[e>>6&63]+s[63&e]}function c(e,t,s){for(var n,r=[],a=t;a<s;a+=3)n=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),r.push(l(n));return r.join("")}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},4630:(e,t,s)=>{"use strict";s.r(t),s.d(t,{Headers:()=>i,Request:()=>o,Response:()=>l,default:()=>a,fetch:()=>r});var n=function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof s.g)return s.g;throw new Error("unable to locate global object")}();const r=n.fetch,a=n.fetch.bind(n),i=n.Headers,o=n.Request,l=n.Response},5043:(e,t,s)=>{"use strict";e.exports=s(4202)},5099:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});const n=(0,s(3797).A)("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]])},5275:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});const n=(0,s(3797).A)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])},5722:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});const n=(0,s(3797).A)("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]])},5736:function(e,t,s){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(s(7374));class a extends r.default{eq(e,t){return this.url.searchParams.append(e,"eq.".concat(t)),this}neq(e,t){return this.url.searchParams.append(e,"neq.".concat(t)),this}gt(e,t){return this.url.searchParams.append(e,"gt.".concat(t)),this}gte(e,t){return this.url.searchParams.append(e,"gte.".concat(t)),this}lt(e,t){return this.url.searchParams.append(e,"lt.".concat(t)),this}lte(e,t){return this.url.searchParams.append(e,"lte.".concat(t)),this}like(e,t){return this.url.searchParams.append(e,"like.".concat(t)),this}likeAllOf(e,t){return this.url.searchParams.append(e,"like(all).{".concat(t.join(","),"}")),this}likeAnyOf(e,t){return this.url.searchParams.append(e,"like(any).{".concat(t.join(","),"}")),this}ilike(e,t){return this.url.searchParams.append(e,"ilike.".concat(t)),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,"ilike(all).{".concat(t.join(","),"}")),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,"ilike(any).{".concat(t.join(","),"}")),this}is(e,t){return this.url.searchParams.append(e,"is.".concat(t)),this}in(e,t){const s=Array.from(new Set(t)).map(e=>"string"===typeof e&&new RegExp("[,()]").test(e)?'"'.concat(e,'"'):"".concat(e)).join(",");return this.url.searchParams.append(e,"in.(".concat(s,")")),this}contains(e,t){return"string"===typeof t?this.url.searchParams.append(e,"cs.".concat(t)):Array.isArray(t)?this.url.searchParams.append(e,"cs.{".concat(t.join(","),"}")):this.url.searchParams.append(e,"cs.".concat(JSON.stringify(t))),this}containedBy(e,t){return"string"===typeof t?this.url.searchParams.append(e,"cd.".concat(t)):Array.isArray(t)?this.url.searchParams.append(e,"cd.{".concat(t.join(","),"}")):this.url.searchParams.append(e,"cd.".concat(JSON.stringify(t))),this}rangeGt(e,t){return this.url.searchParams.append(e,"sr.".concat(t)),this}rangeGte(e,t){return this.url.searchParams.append(e,"nxl.".concat(t)),this}rangeLt(e,t){return this.url.searchParams.append(e,"sl.".concat(t)),this}rangeLte(e,t){return this.url.searchParams.append(e,"nxr.".concat(t)),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,"adj.".concat(t)),this}overlaps(e,t){return"string"===typeof t?this.url.searchParams.append(e,"ov.".concat(t)):this.url.searchParams.append(e,"ov.{".concat(t.join(","),"}")),this}textSearch(e,t){let{config:s,type:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r="";"plain"===n?r="pl":"phrase"===n?r="ph":"websearch"===n&&(r="w");const a=void 0===s?"":"(".concat(s,")");return this.url.searchParams.append(e,"".concat(r,"fts").concat(a,".").concat(t)),this}match(e){return Object.entries(e).forEach(e=>{let[t,s]=e;this.url.searchParams.append(t,"eq.".concat(s))}),this}not(e,t,s){return this.url.searchParams.append(e,"not.".concat(t,".").concat(s)),this}or(e){let{foreignTable:t,referencedTable:s=t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=s?"".concat(s,".or"):"or";return this.url.searchParams.append(n,"(".concat(e,")")),this}filter(e,t,s){return this.url.searchParams.append(e,"".concat(t,".").concat(s)),this}}t.default=a},6047:(e,t,s)=>{"use strict";s.d(t,{DT:()=>a,FY:()=>i,Yq:()=>r,vv:()=>n});const n=e=>new Intl.NumberFormat("fr-BJ",{style:"currency",currency:"XOF",minimumFractionDigits:0}).format(e),r=e=>new Intl.DateTimeFormat("fr-BJ",{year:"numeric",month:"long",day:"numeric"}).format(new Date(e)),a=e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e),i=e=>/^(\+229|229)?[0-9]{8}$/.test(e.replace(/\s/g,""))},6146:(e,t,s)=>{"use strict";s.r(t),s.d(t,{checkInstallationStatus:()=>a,forceInstallPrompt:()=>r,resetInstallationState:()=>i,testPWAConfiguration:()=>n});const n=()=>{console.log("\ud83d\udd0d Test de la configuration PWA..."),"serviceWorker"in navigator?console.log("\u2705 Service Worker support\xe9"):console.log("\u274c Service Worker non support\xe9"),"beforeinstallprompt"in window?console.log("\u2705 API d'installation PWA disponible"):console.log("\u274c API d'installation PWA non disponible"),window.matchMedia("(display-mode: standalone)").matches?console.log("\u2705 App en mode standalone (install\xe9e)"):console.log("\u2139\ufe0f App en mode navigateur");const e=document.querySelector('link[rel="manifest"]');e?console.log("\u2705 Manifest.json trouv\xe9:",e.href):console.log("\u274c Manifest.json non trouv\xe9");const t=document.querySelector('meta[name="theme-color"]');t?console.log("\u2705 Theme color d\xe9fini:",t.content):console.log("\u274c Theme color non d\xe9fini");const s=document.querySelector('link[rel="apple-touch-icon"]');s?console.log("\u2705 Apple touch icon d\xe9fini:",s.href):console.log("\u274c Apple touch icon non d\xe9fini"),"caches"in window?(console.log("\u2705 Cache API disponible"),caches.keys().then(e=>{console.log("\ud83d\udce6 Caches disponibles:",e)})):console.log("\u274c Cache API non disponible"),console.log("\ud83c\udfaf Test PWA termin\xe9")},r=()=>{console.log("\ud83d\udd27 For\xe7age de l'affichage du prompt d'installation...");const e=new Event("beforeinstallprompt");e.preventDefault=()=>{},e.prompt=()=>Promise.resolve({outcome:"accepted"}),e.userChoice=Promise.resolve({outcome:"accepted"}),window.dispatchEvent(e),console.log("\u2705 \xc9v\xe9nement beforeinstallprompt simul\xe9")},a=()=>{const e=window.matchMedia("(display-mode: standalone)").matches||!0===window.navigator.standalone,t=localStorage.getItem("pwa-install-prompt-seen"),s=localStorage.getItem("pwa-install-accepted"),n=localStorage.getItem("pwa-install-declined");return console.log("\ud83d\udcca \xc9tat d'installation:",{isInstalled:e,hasSeenPrompt:!!t,hasAccepted:!!s,hasDeclined:!!n}),{isInstalled:e,hasSeenPrompt:!!t,hasAccepted:!!s,hasDeclined:!!n}},i=()=>{console.log("\ud83d\udd04 R\xe9initialisation de l'\xe9tat d'installation..."),localStorage.removeItem("pwa-install-prompt-seen"),localStorage.removeItem("pwa-install-prompt-last-seen"),localStorage.removeItem("pwa-install-accepted"),localStorage.removeItem("pwa-install-declined"),localStorage.removeItem("pwa-install-declined-date"),localStorage.removeItem("pwa-installed"),localStorage.removeItem("pwa-install-date"),console.log("\u2705 \xc9tat d'installation r\xe9initialis\xe9")};"undefined"!==typeof window&&(window.testPWA={testConfiguration:n,forceInstallPrompt:r,checkInstallationStatus:a,resetInstallationState:i},console.log("\ud83d\udee0\ufe0f Fonctions de test PWA disponibles dans window.testPWA"))},6197:(e,t,s)=>{"use strict";s.d(t,{ND:()=>ns,LC:()=>rs});class n extends Error{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"FunctionsError",s=arguments.length>2?arguments[2]:void 0;super(e),this.name=t,this.context=s}}class r extends n{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class a extends n{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class i extends n{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var o;!function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"}(o||(o={}));var l=function(e,t,s,n){return new(s||(s=Promise))(function(r,a){function i(e){try{l(n.next(e))}catch(t){a(t)}}function o(e){try{l(n.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(i,o)}l((n=n.apply(e,t||[])).next())})};class c{constructor(e){let{headers:t={},customFetch:n,region:r=o.Any}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.url=e,this.headers=t,this.region=r,this.fetch=(e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Promise.resolve().then(s.bind(s,4630)).then(e=>{let{default:s}=e;return s(...t)})}:fetch),function(){return t(...arguments)}})(n)}setAuth(e){this.headers.Authorization="Bearer ".concat(e)}invoke(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var s;return l(this,void 0,void 0,function*(){try{const{headers:n,method:o,body:l}=t;let c={},{region:d}=t;d||(d=this.region);const u=new URL("".concat(this.url,"/").concat(e));let h;d&&"any"!==d&&(c["x-region"]=d,u.searchParams.set("forceFunctionRegion",d)),l&&(n&&!Object.prototype.hasOwnProperty.call(n,"Content-Type")||!n)&&("undefined"!==typeof Blob&&l instanceof Blob||l instanceof ArrayBuffer?(c["Content-Type"]="application/octet-stream",h=l):"string"===typeof l?(c["Content-Type"]="text/plain",h=l):"undefined"!==typeof FormData&&l instanceof FormData?h=l:(c["Content-Type"]="application/json",h=JSON.stringify(l)));const m=yield this.fetch(u.toString(),{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},c),this.headers),n),body:h}).catch(e=>{throw new r(e)}),p=m.headers.get("x-relay-error");if(p&&"true"===p)throw new a(m);if(!m.ok)throw new i(m);let f,g=(null!==(s=m.headers.get("Content-Type"))&&void 0!==s?s:"text/plain").split(";")[0].trim();return f="application/json"===g?yield m.json():"application/octet-stream"===g?yield m.blob():"text/event-stream"===g?m:"multipart/form-data"===g?yield m.formData():yield m.text(),{data:f,error:null,response:m}}catch(n){return{data:null,error:n,response:n instanceof i||n instanceof a?n.context:void 0}}})}}var d=s(7980);const{PostgrestClient:u,PostgrestQueryBuilder:h,PostgrestFilterBuilder:m,PostgrestTransformBuilder:p,PostgrestBuilder:f,PostgrestError:g}=d;var x=s(2285);const v=class{static detectEnvironment(){var e;if("undefined"!==typeof WebSocket)return{type:"native",constructor:WebSocket};if("undefined"!==typeof globalThis&&"undefined"!==typeof globalThis.WebSocket)return{type:"native",constructor:globalThis.WebSocket};if("undefined"!==typeof s.g&&"undefined"!==typeof s.g.WebSocket)return{type:"native",constructor:s.g.WebSocket};if("undefined"!==typeof globalThis&&"undefined"!==typeof globalThis.WebSocketPair&&"undefined"===typeof globalThis.WebSocket)return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if("undefined"!==typeof globalThis&&globalThis.EdgeRuntime||"undefined"!==typeof navigator&&(null===(e=navigator.userAgent)||void 0===e?void 0:e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if("undefined"!==typeof x){const e=x.versions;if(e&&e.node){const t=e.node,s=parseInt(t.replace(/^v/,"").split(".")[0]);return s>=22?"undefined"!==typeof globalThis.WebSocket?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:"Node.js ".concat(s," detected but native WebSocket not found."),workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:"Node.js ".concat(s," detected without native WebSocket support."),workaround:'For Node.js < 22, install "ws" package and provide it via the transport option:\nimport ws from "ws"\nnew RealtimeClient(url, { transport: ws })'}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+="\n\nSuggested solution: ".concat(e.workaround)),new Error(t)}static createWebSocket(e,t){return new(this.getWebSocketConstructor())(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return"native"===e.type||"ws"===e.type}catch(e){return!1}}},b="realtime-js/".concat("2.15.5"),y=1e4;var j,w,N,S,k,A;!function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"}(j||(j={})),function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"}(w||(w={})),function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"}(N||(N={})),function(e){e.websocket="websocket"}(S||(S={})),function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"}(k||(k={}));class _{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t("string"===typeof e?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),s=new TextDecoder;return this._decodeBroadcast(e,t,s)}_decodeBroadcast(e,t,s){const n=t.getUint8(1),r=t.getUint8(2);let a=this.HEADER_LENGTH+2;const i=s.decode(e.slice(a,a+n));a+=n;const o=s.decode(e.slice(a,a+r));a+=r;return{ref:null,topic:i,event:o,payload:JSON.parse(s.decode(e.slice(a,e.byteLength)))}}}class E{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}!function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"}(A||(A={}));const C=function(e,t){var s;const n=null!==(s=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).skipTypes)&&void 0!==s?s:[];return Object.keys(t).reduce((s,r)=>(s[r]=P(r,e,t,n),s),{})},P=(e,t,s,n)=>{const r=t.find(t=>t.name===e),a=null===r||void 0===r?void 0:r.type,i=s[e];return a&&!n.includes(a)?T(a,i):I(i)},T=(e,t)=>{if("_"===e.charAt(0)){const s=e.slice(1,e.length);return L(t,s)}switch(e){case A.bool:return R(t);case A.float4:case A.float8:case A.int2:case A.int4:case A.int8:case A.numeric:case A.oid:return D(t);case A.json:case A.jsonb:return O(t);case A.timestamp:return M(t);case A.abstime:case A.date:case A.daterange:case A.int4range:case A.int8range:case A.money:case A.reltime:case A.text:case A.time:case A.timestamptz:case A.timetz:case A.tsrange:case A.tstzrange:default:return I(t)}},I=e=>e,R=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},D=e=>{if("string"===typeof e){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},O=e=>{if("string"===typeof e)try{return JSON.parse(e)}catch(t){return console.log("JSON parse error: ".concat(t)),e}return e},L=(e,t)=>{if("string"!==typeof e)return e;const s=e.length-1,n=e[s];if("{"===e[0]&&"}"===n){let n;const a=e.slice(1,s);try{n=JSON.parse("["+a+"]")}catch(r){n=a?a.split(","):[]}return n.map(e=>T(t,e))}return e},M=e=>"string"===typeof e?e.replace(" ","T"):e,z=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class F{constructor(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:y;this.channel=e,this.event=t,this.payload=s,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var s;return this._hasReceived(e)&&t(null===(s=this.receivedResp)||void 0===s?void 0:s.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);this.channel._on(this.refEvent,{},e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)}),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive(e){let{status:t,response:s}=e;this.recHooks.filter(e=>e.status===t).forEach(e=>e.callback(s))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var U,B,q,V;!function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"}(U||(U={}));class H{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(null===t||void 0===t?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},e=>{const{onJoin:t,onLeave:s,onSync:n}=this.caller;this.joinRef=this.channel._joinRef(),this.state=H.syncState(this.state,e,t,s),this.pendingDiffs.forEach(e=>{this.state=H.syncDiff(this.state,e,t,s)}),this.pendingDiffs=[],n()}),this.channel._on(s.diff,{},e=>{const{onJoin:t,onLeave:s,onSync:n}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(e):(this.state=H.syncDiff(this.state,e,t,s),n())}),this.onJoin((e,t,s)=>{this.channel._trigger("presence",{event:"join",key:e,currentPresences:t,newPresences:s})}),this.onLeave((e,t,s)=>{this.channel._trigger("presence",{event:"leave",key:e,currentPresences:t,leftPresences:s})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,s,n){const r=this.cloneDeep(e),a=this.transformState(t),i={},o={};return this.map(r,(e,t)=>{a[e]||(o[e]=t)}),this.map(a,(e,t)=>{const s=r[e];if(s){const n=t.map(e=>e.presence_ref),r=s.map(e=>e.presence_ref),a=t.filter(e=>r.indexOf(e.presence_ref)<0),l=s.filter(e=>n.indexOf(e.presence_ref)<0);a.length>0&&(i[e]=a),l.length>0&&(o[e]=l)}else i[e]=t}),this.syncDiff(r,{joins:i,leaves:o},s,n)}static syncDiff(e,t,s,n){const{joins:r,leaves:a}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return s||(s=()=>{}),n||(n=()=>{}),this.map(r,(t,n)=>{var r;const a=null!==(r=e[t])&&void 0!==r?r:[];if(e[t]=this.cloneDeep(n),a.length>0){const s=e[t].map(e=>e.presence_ref),n=a.filter(e=>s.indexOf(e.presence_ref)<0);e[t].unshift(...n)}s(t,a,n)}),this.map(a,(t,s)=>{let r=e[t];if(!r)return;const a=s.map(e=>e.presence_ref);r=r.filter(e=>a.indexOf(e.presence_ref)<0),e[t]=r,n(t,r,s),0===r.length&&delete e[t]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(s=>t(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,s)=>{const n=e[s];return t[s]="metas"in n?n.metas.map(e=>(e.presence_ref=e.phx_ref,delete e.phx_ref,delete e.phx_ref_prev,e)):n,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}!function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"}(B||(B={})),function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"}(q||(q={})),function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"}(V||(V={}));class W{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}},s=arguments.length>2?arguments[2]:void 0;this.topic=e,this.params=t,this.socket=s,this.bindings={},this.state=w.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new F(this,N.join,this.params,this.timeout),this.rejoinTimer=new E(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=w.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(e=>e.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel","close ".concat(this.topic," ").concat(this._joinRef())),this.state=w.closed,this.socket._remove(this)}),this._onError(e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel","error ".concat(this.topic),e),this.state=w.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel","timeout ".concat(this.topic),this.joinPush.timeout),this.state=w.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel","error ".concat(this.topic),e),this.state=w.errored,this.rejoinTimer.scheduleTimeout())}),this._on(N.reply,{},(e,t)=>{this._trigger(this._replyEventName(t),e)}),this.presence=new H(this),this.broadcastEndpointURL=z(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.timeout;var s,n,r;if(this.socket.isConnected()||this.socket.connect(),this.state==w.closed){const{config:{broadcast:a,presence:i,private:o}}=this.params,l=null!==(n=null===(s=this.bindings.postgres_changes)||void 0===s?void 0:s.map(e=>e.filter))&&void 0!==n?n:[],c=!!this.bindings[q.PRESENCE]&&this.bindings[q.PRESENCE].length>0||!0===(null===(r=this.params.config.presence)||void 0===r?void 0:r.enabled),d={},u={broadcast:a,presence:Object.assign(Object.assign({},i),{enabled:c}),postgres_changes:l,private:o};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this._onError(t=>null===e||void 0===e?void 0:e(V.CHANNEL_ERROR,t)),this._onClose(()=>null===e||void 0===e?void 0:e(V.CLOSED)),this.updateJoinPayload(Object.assign({config:u},d)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async t=>{let{postgres_changes:s}=t;var n;if(this.socket.setAuth(),void 0!==s){const t=this.bindings.postgres_changes,r=null!==(n=null===t||void 0===t?void 0:t.length)&&void 0!==n?n:0,a=[];for(let n=0;n<r;n++){const r=t[n],{filter:{event:i,schema:o,table:l,filter:c}}=r,d=s&&s[n];if(!d||d.event!==i||d.schema!==o||d.table!==l||d.filter!==c)return this.unsubscribe(),this.state=w.errored,void(null===e||void 0===e||e(V.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes")));a.push(Object.assign(Object.assign({},r),{id:d.id}))}return this.bindings.postgres_changes=a,void(e&&e(V.SUBSCRIBED))}null===e||void 0===e||e(V.SUBSCRIBED)}).receive("error",t=>{this.state=w.errored,null===e||void 0===e||e(V.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(t).join(", ")||"error")))}).receive("timeout",()=>{null===e||void 0===e||e(V.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return await this.send({type:"presence",event:"untrack"},e)}on(e,t,s){return this.state===w.joined&&e===q.PRESENCE&&(this.socket.log("channel","resubscribe to ".concat(this.topic," due to change in presence callbacks on joined channel")),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,s)}async send(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var s,n;if(this._canPush()||"broadcast"!==e.type)return new Promise(s=>{var n,r,a;const i=this._push(e.type,e,t.timeout||this.timeout);"broadcast"!==e.type||(null===(a=null===(r=null===(n=this.params)||void 0===n?void 0:n.config)||void 0===r?void 0:r.broadcast)||void 0===a?void 0:a.ack)||s("ok"),i.receive("ok",()=>s("ok")),i.receive("error",()=>s("error")),i.receive("timeout",()=>s("timed out"))});{const{event:a,payload:i}=e,o={method:"POST",headers:{Authorization:this.socket.accessTokenValue?"Bearer ".concat(this.socket.accessTokenValue):"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:i,private:this.private}]})};try{const e=await this._fetchWithTimeout(this.broadcastEndpointURL,o,null!==(s=t.timeout)&&void 0!==s?s:this.timeout);return await(null===(n=e.body)||void 0===n?void 0:n.cancel()),e.ok?"ok":"error"}catch(r){return"AbortError"===r.name?"timed out":"error"}}}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this.state=w.leaving;const t=()=>{this.socket.log("channel","leave ".concat(this.topic)),this._trigger(N.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(n=>{s=new F(this,N.leave,{},e),s.receive("ok",()=>{t(),n("ok")}).receive("timeout",()=>{t(),n("timed out")}).receive("error",()=>{n("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{null===s||void 0===s||s.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=w.closed,this.bindings={}}async _fetchWithTimeout(e,t,s){const n=new AbortController,r=setTimeout(()=>n.abort(),s),a=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:n.signal}));return clearTimeout(r),a}_push(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.timeout;if(!this.joinedOnce)throw"tried to push '".concat(e,"' to '").concat(this.topic,"' before joining. Use channel.subscribe() before pushing events");let n=new F(this,e,t,s);return this._canPush()?n.send():this._addToPushBuffer(n),n}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>100){const e=this.pushBuffer.shift();e&&(e.destroy(),this.socket.log("channel","discarded push due to buffer overflow: ".concat(e.event),e.payload))}}_onMessage(e,t,s){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,s){var n,r;const a=e.toLocaleLowerCase(),{close:i,error:o,leave:l,join:c}=N;if(s&&[i,o,l,c].indexOf(a)>=0&&s!==this._joinRef())return;let d=this._onMessage(a,t,s);if(t&&!d)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?null===(n=this.bindings.postgres_changes)||void 0===n||n.filter(e=>{var t,s,n;return"*"===(null===(t=e.filter)||void 0===t?void 0:t.event)||(null===(n=null===(s=e.filter)||void 0===s?void 0:s.event)||void 0===n?void 0:n.toLocaleLowerCase())===a}).map(e=>e.callback(d,s)):null===(r=this.bindings[a])||void 0===r||r.filter(e=>{var s,n,r,i,o,l;if(["broadcast","presence","postgres_changes"].includes(a)){if("id"in e){const a=e.id,i=null===(s=e.filter)||void 0===s?void 0:s.event;return a&&(null===(n=t.ids)||void 0===n?void 0:n.includes(a))&&("*"===i||(null===i||void 0===i?void 0:i.toLocaleLowerCase())===(null===(r=t.data)||void 0===r?void 0:r.type.toLocaleLowerCase()))}{const s=null===(o=null===(i=null===e||void 0===e?void 0:e.filter)||void 0===i?void 0:i.event)||void 0===o?void 0:o.toLocaleLowerCase();return"*"===s||s===(null===(l=null===t||void 0===t?void 0:t.event)||void 0===l?void 0:l.toLocaleLowerCase())}}return e.type.toLocaleLowerCase()===a}).map(e=>{if("object"===typeof d&&"ids"in d){const e=d.data,{schema:t,table:s,commit_timestamp:n,type:r,errors:a}=e,i={schema:t,table:s,commit_timestamp:n,eventType:r,new:{},old:{},errors:a};d=Object.assign(Object.assign({},i),this._getPayloadRecords(e))}e.callback(d,s)})}_isClosed(){return this.state===w.closed}_isJoined(){return this.state===w.joined}_isJoining(){return this.state===w.joining}_isLeaving(){return this.state===w.leaving}_replyEventName(e){return"chan_reply_".concat(e)}_on(e,t,s){const n=e.toLocaleLowerCase(),r={type:n,filter:t,callback:s};return this.bindings[n]?this.bindings[n].push(r):this.bindings[n]=[r],this}_off(e,t){const s=e.toLocaleLowerCase();return this.bindings[s]&&(this.bindings[s]=this.bindings[s].filter(e=>{var n;return!((null===(n=e.type)||void 0===n?void 0:n.toLocaleLowerCase())===s&&W.isEqual(e.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const s in e)if(e[s]!==t[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(N.close,{},e)}_onError(e){this._on(N.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=w.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return"INSERT"!==e.type&&"UPDATE"!==e.type||(t.new=C(e.columns,e.record)),"UPDATE"!==e.type&&"DELETE"!==e.type||(t.old=C(e.columns,e.old_record)),t}}const G=()=>{},K=25e3,Z=10,J=100,Q=[1e3,2e3,5e3,1e4];class Y{constructor(e,t){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=y,this.transport=null,this.heartbeatIntervalMs=K,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=G,this.ref=0,this.reconnectTimer=null,this.logger=G,this.conn=null,this.sendBuffer=[],this.serializer=new _,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Promise.resolve().then(s.bind(s,4630)).then(e=>{let{default:s}=e;return s(...t)}).catch(e=>{throw new Error("Failed to load @supabase/node-fetch: ".concat(e.message,". ")+"This is required for HTTP requests in Node.js environments without native fetch.")})}:fetch),function(){return t(...arguments)}},!(null===(n=null===t||void 0===t?void 0:t.params)||void 0===n?void 0:n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint="".concat(e,"/").concat(S.websocket),this.httpEndpoint=z(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(null===t||void 0===t?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||null!==this.conn&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=v.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;if(t.includes("Node.js"))throw new Error("".concat(t,"\n\n")+'To use Realtime in Node.js, you need to provide a WebSocket implementation:\n\nOption 1: Use Node.js 22+ which has native WebSocket support\nOption 2: Install and provide the "ws" package:\n\n  npm install ws\n\n  import ws from "ws"\n  const client = new RealtimeClient(url, {\n    ...options,\n    transport: ws\n  })');throw new Error("WebSocket not available: ".concat(t))}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:"1.0.0"}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const s=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(s),this._setConnectionState("disconnected")},e?this.conn.close(e,null!==t&&void 0!==t?t:""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return 0===this.channels.length&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(e=>e.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,s){this.logger(e,t,s)}connectionState(){switch(this.conn&&this.conn.readyState){case j.connecting:return k.Connecting;case j.open:return k.Open;case j.closing:return k.Closing;default:return k.Closed}}isConnected(){return this.connectionState()===k.Open}isConnecting(){return"connecting"===this._connectionState}isDisconnecting(){return"disconnecting"===this._connectionState}channel(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}};const s="realtime:".concat(e),n=this.getChannels().find(e=>e.topic===s);if(n)return n;{const s=new W("realtime:".concat(e),t,this);return this.channels.push(s),s}}push(e){const{topic:t,event:s,payload:n,ref:r}=e,a=()=>{this.encode(e,e=>{var t;null===(t=this.conn)||void 0===t||t.send(e)})};this.log("push","".concat(t," ").concat(s," (").concat(r,")"),n),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(t){this.log("error","error in heartbeat callback",t)}return this._wasManualDisconnect=!1,null===(e=this.conn)||void 0===e||e.close(1e3,"heartbeat timeout"),void setTimeout(()=>{var e;this.isConnected()||null===(e=this.reconnectTimer)||void 0===e||e.scheduleTimeout()},J)}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(t){this.log("error","error in heartbeat callback",t)}this._setAuthSafely("heartbeat")}else try{this.heartbeatCallback("disconnected")}catch(t){this.log("error","error in heartbeat callback",t)}}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(t=>t.topic===e&&(t._isJoined()||t._isJoining()));t&&(this.log("transport",'leaving duplicate topic "'.concat(e,'"')),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,e=>{if("phoenix"===e.topic&&"phx_reply"===e.event)try{this.heartbeatCallback("ok"===e.payload.status?"ok":"error")}catch(o){this.log("error","error in heartbeat callback",o)}e.ref&&e.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:t,event:s,payload:n,ref:r}=e,a=r?"(".concat(r,")"):"",i=n.status||"";this.log("receive","".concat(i," ").concat(t," ").concat(s," ").concat(a).trim(),n),this.channels.filter(e=>e._isMember(t)).forEach(e=>e._trigger(s,n,r)),this._triggerStateCallbacks("message",e)})}_clearTimer(e){var t;"heartbeat"===e&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):"reconnect"===e&&(null===(t=this.reconnectTimer)||void 0===t||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport","connected to ".concat(this.endpointURL())),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker","starting worker for from ".concat(this.workerUrl)):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this.workerRef.terminate()},this.workerRef.onmessage=e=>{"keepAlive"===e.data.event&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||null===(t=this.reconnectTimer)||void 0===t||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport","".concat(e)),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(N.error))}_appendParams(e,t){if(0===Object.keys(t).length)return e;const s=e.match(/\?/)?"&":"?",n=new URLSearchParams(t);return"".concat(e).concat(s).concat(n)}_workerObjectUrl(e){let t;if(e)t=e;else{const e=new Blob(['\n  addEventListener("message", (e) => {\n    if (e.data.event === "start") {\n      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);\n    }\n  });'],{type:"application/javascript"});t=URL.createObjectURL(e)}return t}_setConnectionState(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._connectionState=e,"connecting"===e?this._wasManualDisconnect=!1:"disconnecting"===e&&(this._wasManualDisconnect=t)}async _performAuth(){let e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e=t||(this.accessToken?await this.accessToken():this.accessTokenValue),this.accessTokenValue!=e&&(this.accessTokenValue=e,this.channels.forEach(t=>{const s={access_token:e,version:b};e&&t.updateJoinPayload(s),t.joinedOnce&&t._isJoined()&&t._push(N.access_token,{access_token:e})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"general";this.setAuth().catch(t=>{this.log("error","error setting auth in ".concat(e),t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(s=>{try{s(t)}catch(n){this.log("error","error in ".concat(e," callback"),n)}})}catch(s){this.log("error","error triggering ".concat(e," callbacks"),s)}}_setupReconnectionTimer(){this.reconnectTimer=new E(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Z)},this.reconnectAfterMs)}_initializeOptions(e){var t,s,n,r,a,i,o,l,c;if(this.transport=null!==(t=null===e||void 0===e?void 0:e.transport)&&void 0!==t?t:null,this.timeout=null!==(s=null===e||void 0===e?void 0:e.timeout)&&void 0!==s?s:y,this.heartbeatIntervalMs=null!==(n=null===e||void 0===e?void 0:e.heartbeatIntervalMs)&&void 0!==n?n:K,this.worker=null!==(r=null===e||void 0===e?void 0:e.worker)&&void 0!==r&&r,this.accessToken=null!==(a=null===e||void 0===e?void 0:e.accessToken)&&void 0!==a?a:null,this.heartbeatCallback=null!==(i=null===e||void 0===e?void 0:e.heartbeatCallback)&&void 0!==i?i:G,(null===e||void 0===e?void 0:e.params)&&(this.params=e.params),(null===e||void 0===e?void 0:e.logger)&&(this.logger=e.logger),((null===e||void 0===e?void 0:e.logLevel)||(null===e||void 0===e?void 0:e.log_level))&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=null!==(o=null===e||void 0===e?void 0:e.reconnectAfterMs)&&void 0!==o?o:e=>Q[e-1]||1e4,this.encode=null!==(l=null===e||void 0===e?void 0:e.encode)&&void 0!==l?l:(e,t)=>t(JSON.stringify(e)),this.decode=null!==(c=null===e||void 0===e?void 0:e.decode)&&void 0!==c?c:this.serializer.decode.bind(this.serializer),this.worker){if("undefined"!==typeof window&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=null===e||void 0===e?void 0:e.workerUrl}}}class $ extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function X(e){return"object"===typeof e&&null!==e&&"__isStorageError"in e}class ee extends ${constructor(e,t,s){super(e),this.name="StorageApiError",this.status=t,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class te extends ${constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var se=function(e,t,s,n){return new(s||(s=Promise))(function(r,a){function i(e){try{l(n.next(e))}catch(t){a(t)}}function o(e){try{l(n.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(i,o)}l((n=n.apply(e,t||[])).next())})};const ne=e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Promise.resolve().then(s.bind(s,4630)).then(e=>{let{default:s}=e;return s(...t)})}:fetch),function(){return t(...arguments)}},re=e=>{if(Array.isArray(e))return e.map(e=>re(e));if("function"===typeof e||e!==Object(e))return e;const t={};return Object.entries(e).forEach(e=>{let[s,n]=e;const r=s.replace(/([-_][a-z])/gi,e=>e.toUpperCase().replace(/[-_]/g,""));t[r]=re(n)}),t};var ae=function(e,t,s,n){return new(s||(s=Promise))(function(r,a){function i(e){try{l(n.next(e))}catch(t){a(t)}}function o(e){try{l(n.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(i,o)}l((n=n.apply(e,t||[])).next())})};const ie=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),oe=(e,t,n)=>ae(void 0,void 0,void 0,function*(){const r=yield se(void 0,void 0,void 0,function*(){return"undefined"===typeof Response?(yield Promise.resolve().then(s.bind(s,4630))).Response:Response});e instanceof r&&!(null===n||void 0===n?void 0:n.noResolveJson)?e.json().then(s=>{const n=e.status||500,r=(null===s||void 0===s?void 0:s.statusCode)||n+"";t(new ee(ie(s),n,r))}).catch(e=>{t(new te(ie(e),e))}):t(new te(ie(e),e))}),le=(e,t,s,n)=>{const r={method:e,headers:(null===t||void 0===t?void 0:t.headers)||{}};return"GET"!==e&&n?((e=>{if("object"!==typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)})(n)?(r.headers=Object.assign({"Content-Type":"application/json"},null===t||void 0===t?void 0:t.headers),r.body=JSON.stringify(n)):r.body=n,(null===t||void 0===t?void 0:t.duplex)&&(r.duplex=t.duplex),Object.assign(Object.assign({},r),s)):r};function ce(e,t,s,n,r,a){return ae(this,void 0,void 0,function*(){return new Promise((i,o)=>{e(s,le(t,n,r,a)).then(e=>{if(!e.ok)throw e;return(null===n||void 0===n?void 0:n.noResolveJson)?e:e.json()}).then(e=>i(e)).catch(e=>oe(e,o,n))})})}function de(e,t,s,n){return ae(this,void 0,void 0,function*(){return ce(e,"GET",t,s,n)})}function ue(e,t,s,n,r){return ae(this,void 0,void 0,function*(){return ce(e,"POST",t,n,r,s)})}function he(e,t,s,n,r){return ae(this,void 0,void 0,function*(){return ce(e,"PUT",t,n,r,s)})}function me(e,t,s,n,r){return ae(this,void 0,void 0,function*(){return ce(e,"DELETE",t,n,r,s)})}var pe=s(6382).hp,fe=function(e,t,s,n){return new(s||(s=Promise))(function(r,a){function i(e){try{l(n.next(e))}catch(t){a(t)}}function o(e){try{l(n.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(i,o)}l((n=n.apply(e,t||[])).next())})};const ge={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},xe={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class ve{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0;this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=s,this.fetch=ne(n)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,t,s,n){return fe(this,void 0,void 0,function*(){try{let r;const a=Object.assign(Object.assign({},xe),n);let i=Object.assign(Object.assign({},this.headers),"POST"===e&&{"x-upsert":String(a.upsert)});const o=a.metadata;"undefined"!==typeof Blob&&s instanceof Blob?(r=new FormData,r.append("cacheControl",a.cacheControl),o&&r.append("metadata",this.encodeMetadata(o)),r.append("",s)):"undefined"!==typeof FormData&&s instanceof FormData?(r=s,r.append("cacheControl",a.cacheControl),o&&r.append("metadata",this.encodeMetadata(o))):(r=s,i["cache-control"]="max-age=".concat(a.cacheControl),i["content-type"]=a.contentType,o&&(i["x-metadata"]=this.toBase64(this.encodeMetadata(o)))),(null===n||void 0===n?void 0:n.headers)&&(i=Object.assign(Object.assign({},i),n.headers));const l=this._removeEmptyFolders(t),c=this._getFinalPath(l),d=yield("PUT"==e?he:ue)(this.fetch,"".concat(this.url,"/object/").concat(c),r,Object.assign({headers:i},(null===a||void 0===a?void 0:a.duplex)?{duplex:a.duplex}:{}));return{data:{path:l,id:d.Id,fullPath:d.Key},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(X(r))return{data:null,error:r};throw r}})}upload(e,t,s){return fe(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,s)})}uploadToSignedUrl(e,t,s,n){return fe(this,void 0,void 0,function*(){const r=this._removeEmptyFolders(e),a=this._getFinalPath(r),i=new URL(this.url+"/object/upload/sign/".concat(a));i.searchParams.set("token",t);try{let e;const t=Object.assign({upsert:xe.upsert},n),a=Object.assign(Object.assign({},this.headers),{"x-upsert":String(t.upsert)});"undefined"!==typeof Blob&&s instanceof Blob?(e=new FormData,e.append("cacheControl",t.cacheControl),e.append("",s)):"undefined"!==typeof FormData&&s instanceof FormData?(e=s,e.append("cacheControl",t.cacheControl)):(e=s,a["cache-control"]="max-age=".concat(t.cacheControl),a["content-type"]=t.contentType);return{data:{path:r,fullPath:(yield he(this.fetch,i.toString(),e,{headers:a})).Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(X(o))return{data:null,error:o};throw o}})}createSignedUploadUrl(e,t){return fe(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e);const n=Object.assign({},this.headers);(null===t||void 0===t?void 0:t.upsert)&&(n["x-upsert"]="true");const r=yield ue(this.fetch,"".concat(this.url,"/object/upload/sign/").concat(s),{},{headers:n}),a=new URL(this.url+r.url),i=a.searchParams.get("token");if(!i)throw new $("No token returned by API");return{data:{signedUrl:a.toString(),path:e,token:i},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(X(s))return{data:null,error:s};throw s}})}update(e,t,s){return fe(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,s)})}move(e,t,s){return fe(this,void 0,void 0,function*(){try{return{data:yield ue(this.fetch,"".concat(this.url,"/object/move"),{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null===s||void 0===s?void 0:s.destinationBucket},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(X(n))return{data:null,error:n};throw n}})}copy(e,t,s){return fe(this,void 0,void 0,function*(){try{return{data:{path:(yield ue(this.fetch,"".concat(this.url,"/object/copy"),{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null===s||void 0===s?void 0:s.destinationBucket},{headers:this.headers})).Key},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(X(n))return{data:null,error:n};throw n}})}createSignedUrl(e,t,s){return fe(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e),r=yield ue(this.fetch,"".concat(this.url,"/object/sign/").concat(n),Object.assign({expiresIn:t},(null===s||void 0===s?void 0:s.transform)?{transform:s.transform}:{}),{headers:this.headers});const a=(null===s||void 0===s?void 0:s.download)?"&download=".concat(!0===s.download?"":s.download):"";return r={signedUrl:encodeURI("".concat(this.url).concat(r.signedURL).concat(a))},{data:r,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(X(n))return{data:null,error:n};throw n}})}createSignedUrls(e,t,s){return fe(this,void 0,void 0,function*(){try{const n=yield ue(this.fetch,"".concat(this.url,"/object/sign/").concat(this.bucketId),{expiresIn:t,paths:e},{headers:this.headers}),r=(null===s||void 0===s?void 0:s.download)?"&download=".concat(!0===s.download?"":s.download):"";return{data:n.map(e=>Object.assign(Object.assign({},e),{signedUrl:e.signedURL?encodeURI("".concat(this.url).concat(e.signedURL).concat(r)):null})),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(X(n))return{data:null,error:n};throw n}})}download(e,t){return fe(this,void 0,void 0,function*(){const s="undefined"!==typeof(null===t||void 0===t?void 0:t.transform)?"render/image/authenticated":"object",n=this.transformOptsToQueryString((null===t||void 0===t?void 0:t.transform)||{}),r=n?"?".concat(n):"";try{const t=this._getFinalPath(e),n=yield de(this.fetch,"".concat(this.url,"/").concat(s,"/").concat(t).concat(r),{headers:this.headers,noResolveJson:!0});return{data:yield n.blob(),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(X(a))return{data:null,error:a};throw a}})}info(e){return fe(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const e=yield de(this.fetch,"".concat(this.url,"/object/info/").concat(t),{headers:this.headers});return{data:re(e),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(X(s))return{data:null,error:s};throw s}})}exists(e){return fe(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield function(e,t,s,n){return ae(this,void 0,void 0,function*(){return ce(e,"HEAD",t,Object.assign(Object.assign({},s),{noResolveJson:!0}),n)})}(this.fetch,"".concat(this.url,"/object/").concat(t),{headers:this.headers}),{data:!0,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(X(s)&&s instanceof te){const e=s.originalError;if([400,404].includes(null===e||void 0===e?void 0:e.status))return{data:!1,error:s}}throw s}})}getPublicUrl(e,t){const s=this._getFinalPath(e),n=[],r=(null===t||void 0===t?void 0:t.download)?"download=".concat(!0===t.download?"":t.download):"";""!==r&&n.push(r);const a="undefined"!==typeof(null===t||void 0===t?void 0:t.transform)?"render/image":"object",i=this.transformOptsToQueryString((null===t||void 0===t?void 0:t.transform)||{});""!==i&&n.push(i);let o=n.join("&");return""!==o&&(o="?".concat(o)),{data:{publicUrl:encodeURI("".concat(this.url,"/").concat(a,"/public/").concat(s).concat(o))}}}remove(e){return fe(this,void 0,void 0,function*(){try{return{data:yield me(this.fetch,"".concat(this.url,"/object/").concat(this.bucketId),{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(X(t))return{data:null,error:t};throw t}})}list(e,t,s){return fe(this,void 0,void 0,function*(){try{const n=Object.assign(Object.assign(Object.assign({},ge),t),{prefix:e||""});return{data:yield ue(this.fetch,"".concat(this.url,"/object/list/").concat(this.bucketId),n,{headers:this.headers},s),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(X(n))return{data:null,error:n};throw n}})}listV2(e,t){return fe(this,void 0,void 0,function*(){try{const s=Object.assign({},e);return{data:yield ue(this.fetch,"".concat(this.url,"/object/list-v2/").concat(this.bucketId),s,{headers:this.headers},t),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(X(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return"undefined"!==typeof pe?pe.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return"".concat(this.bucketId,"/").concat(e.replace(/^\/+/,""))}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push("width=".concat(e.width)),e.height&&t.push("height=".concat(e.height)),e.resize&&t.push("resize=".concat(e.resize)),e.format&&t.push("format=".concat(e.format)),e.quality&&t.push("quality=".concat(e.quality)),t.join("&")}}const be={"X-Client-Info":"storage-js/".concat("2.12.1")};var ye=function(e,t,s,n){return new(s||(s=Promise))(function(r,a){function i(e){try{l(n.next(e))}catch(t){a(t)}}function o(e){try{l(n.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(i,o)}l((n=n.apply(e,t||[])).next())})};class je{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0;this.shouldThrowOnError=!1;const r=new URL(e);if(null===n||void 0===n?void 0:n.useNewHostname){/supabase\.(co|in|red)$/.test(r.hostname)&&!r.hostname.includes("storage.supabase.")&&(r.hostname=r.hostname.replace("supabase.","storage.supabase."))}this.url=r.href,this.headers=Object.assign(Object.assign({},be),t),this.fetch=ne(s)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return ye(this,void 0,void 0,function*(){try{return{data:yield de(this.fetch,"".concat(this.url,"/bucket"),{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(X(e))return{data:null,error:e};throw e}})}getBucket(e){return ye(this,void 0,void 0,function*(){try{return{data:yield de(this.fetch,"".concat(this.url,"/bucket/").concat(e),{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(X(t))return{data:null,error:t};throw t}})}createBucket(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{public:!1};return ye(this,void 0,void 0,function*(){try{return{data:yield ue(this.fetch,"".concat(this.url,"/bucket"),{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(X(s))return{data:null,error:s};throw s}})}updateBucket(e,t){return ye(this,void 0,void 0,function*(){try{return{data:yield he(this.fetch,"".concat(this.url,"/bucket/").concat(e),{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(X(s))return{data:null,error:s};throw s}})}emptyBucket(e){return ye(this,void 0,void 0,function*(){try{return{data:yield ue(this.fetch,"".concat(this.url,"/bucket/").concat(e,"/empty"),{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(X(t))return{data:null,error:t};throw t}})}deleteBucket(e){return ye(this,void 0,void 0,function*(){try{return{data:yield me(this.fetch,"".concat(this.url,"/bucket/").concat(e),{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(X(t))return{data:null,error:t};throw t}})}}class we extends je{constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},arguments.length>2?arguments[2]:void 0,arguments.length>3?arguments[3]:void 0)}from(e){return new ve(this.url,this.headers,e,this.fetch)}}let Ne="";Ne="undefined"!==typeof Deno?"deno":"undefined"!==typeof document?"web":"undefined"!==typeof navigator&&"ReactNative"===navigator.product?"react-native":"node";const Se={headers:{"X-Client-Info":"supabase-js-".concat(Ne,"/").concat("2.57.4")}},ke={schema:"public"},Ae={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},_e={};var Ee=s(4630),Ce=function(e,t,s,n){return new(s||(s=Promise))(function(r,a){function i(e){try{l(n.next(e))}catch(t){a(t)}}function o(e){try{l(n.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(i,o)}l((n=n.apply(e,t||[])).next())})};const Pe=e=>{let t;return t=e||("undefined"===typeof fetch?Ee.default:fetch),function(){return t(...arguments)}},Te=(e,t,s)=>{const n=Pe(s),r="undefined"===typeof Headers?Ee.Headers:Headers;return(s,a)=>Ce(void 0,void 0,void 0,function*(){var i;const o=null!==(i=yield t())&&void 0!==i?i:e;let l=new r(null===a||void 0===a?void 0:a.headers);return l.has("apikey")||l.set("apikey",e),l.has("Authorization")||l.set("Authorization","Bearer ".concat(o)),n(s,Object.assign(Object.assign({},a),{headers:l}))})};var Ie=function(e,t,s,n){return new(s||(s=Promise))(function(r,a){function i(e){try{l(n.next(e))}catch(t){a(t)}}function o(e){try{l(n.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(i,o)}l((n=n.apply(e,t||[])).next())})};const Re="2.71.1",De=3e4,Oe=9e4,Le={"X-Client-Info":"gotrue-js/".concat(Re)},Me="X-Supabase-Api-Version",ze={timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"},Fe=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i;class Ue extends Error{constructor(e,t,s){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=s}}function Be(e){return"object"===typeof e&&null!==e&&"__isAuthError"in e}class qe extends Ue{constructor(e,t,s){super(e,t,s),this.name="AuthApiError",this.status=t,this.code=s}}class Ve extends Ue{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class He extends Ue{constructor(e,t,s,n){super(e,s,n),this.name=t,this.status=s}}class We extends He{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class Ge extends He{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ke extends He{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Ze extends He{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Je extends He{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Qe extends He{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Ye(e){return Be(e)&&"AuthRetryableFetchError"===e.name}class $e extends He{constructor(e,t,s){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=s}}class Xe extends He{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const et="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),tt=" \t\n\r=".split(""),st=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<tt.length;t+=1)e[tt[t].charCodeAt(0)]=-2;for(let t=0;t<et.length;t+=1)e[et[t].charCodeAt(0)]=t;return e})();function nt(e,t,s){if(null!==e)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;s(et[e]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;s(et[e]),t.queuedBits-=6}}function rt(e,t,s){const n=st[e];if(!(n>-1)){if(-2===n)return;throw new Error('Invalid Base64-URL character "'.concat(String.fromCharCode(e),'"'))}for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)s(t.queue>>t.queuedBits-8&255),t.queuedBits-=8}function at(e){const t=[],s=e=>{t.push(String.fromCodePoint(e))},n={utf8seq:0,codepoint:0},r={queue:0,queuedBits:0},a=e=>{!function(e,t,s){if(0===t.utf8seq){if(e<=127)return void s(e);for(let s=1;s<6;s+=1)if(0===(e>>7-s&1)){t.utf8seq=s;break}if(2===t.utf8seq)t.codepoint=31&e;else if(3===t.utf8seq)t.codepoint=15&e;else{if(4!==t.utf8seq)throw new Error("Invalid UTF-8 sequence");t.codepoint=7&e}t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|63&e,t.utf8seq-=1,0===t.utf8seq&&s(t.codepoint)}}(e,n,s)};for(let i=0;i<e.length;i+=1)rt(e.charCodeAt(i),r,a);return t.join("")}function it(e,t){if(!(e<=127)){if(e<=2047)return t(192|e>>6),void t(128|63&e);if(e<=65535)return t(224|e>>12),t(128|e>>6&63),void t(128|63&e);if(e<=1114111)return t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),void t(128|63&e);throw new Error("Unrecognized Unicode codepoint: ".concat(e.toString(16)))}t(e)}function ot(e,t){for(let s=0;s<e.length;s+=1){let n=e.charCodeAt(s);if(n>55295&&n<=56319){const t=1024*(n-55296)&65535;n=65536+(e.charCodeAt(s+1)-56320&65535|t),s+=1}it(n,t)}}function lt(e){const t=[],s={queue:0,queuedBits:0},n=e=>{t.push(e)};for(let r=0;r<e.length;r+=1)rt(e.charCodeAt(r),s,n);return new Uint8Array(t)}function ct(e){const t=[],s={queue:0,queuedBits:0},n=e=>{t.push(e)};return e.forEach(e=>nt(e,s,n)),nt(null,s,n),t.join("")}const dt=()=>"undefined"!==typeof window&&"undefined"!==typeof document,ut={tested:!1,writable:!1},ht=()=>{if(!dt())return!1;try{if("object"!==typeof globalThis.localStorage)return!1}catch(t){return!1}if(ut.tested)return ut.writable;const e="lswt-".concat(Math.random()).concat(Math.random());try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),ut.tested=!0,ut.writable=!0}catch(t){ut.tested=!0,ut.writable=!1}return ut.writable};const mt=e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Promise.resolve().then(s.bind(s,4630)).then(e=>{let{default:s}=e;return s(...t)})}:fetch),function(){return t(...arguments)}},pt=async(e,t,s)=>{await e.setItem(t,JSON.stringify(s))},ft=async(e,t)=>{const s=await e.getItem(t);if(!s)return null;try{return JSON.parse(s)}catch(n){return s}},gt=async(e,t)=>{await e.removeItem(t)};class xt{constructor(){this.promise=new xt.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}function vt(e){const t=e.split(".");if(3!==t.length)throw new Xe("Invalid JWT structure");for(let s=0;s<t.length;s++)if(!Fe.test(t[s]))throw new Xe("JWT not in base64url format");return{header:JSON.parse(at(t[0])),payload:JSON.parse(at(t[1])),signature:lt(t[2]),raw:{header:t[0],payload:t[1]}}}function bt(e){return("0"+e.toString(16)).substr(-2)}async function yt(e){if(!("undefined"!==typeof crypto&&"undefined"!==typeof crypto.subtle&&"undefined"!==typeof TextEncoder))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const t=await async function(e){const t=(new TextEncoder).encode(e),s=await crypto.subtle.digest("SHA-256",t),n=new Uint8Array(s);return Array.from(n).map(e=>String.fromCharCode(e)).join("")}(e);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function jt(e,t){let s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const n=function(){const e=new Uint32Array(56);if("undefined"===typeof crypto){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",t=e.length;let s="";for(let n=0;n<56;n++)s+=e.charAt(Math.floor(Math.random()*t));return s}return crypto.getRandomValues(e),Array.from(e,bt).join("")}();let r=n;s&&(r+="/PASSWORD_RECOVERY"),await pt(e,"".concat(t,"-code-verifier"),r);const a=await yt(n);return[a,n===a?"plain":"s256"]}xt.promiseConstructor=Promise;const wt=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;const Nt=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function St(e){if(!Nt.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function kt(){return new Proxy({},{get:(e,t)=>{if("__isUserNotAvailableProxy"===t)return!0;if("symbol"===typeof t){const e=t.toString();if("Symbol(Symbol.toPrimitive)"===e||"Symbol(Symbol.toStringTag)"===e||"Symbol(util.inspect.custom)"===e)return}throw new Error('@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "'.concat(t,'" property of the session object is not supported. Please use getUser() instead.'))},set:(e,t)=>{throw new Error('@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "'.concat(t,'" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.'))},deleteProperty:(e,t)=>{throw new Error('@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "'.concat(t,'" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.'))}})}function At(e){return JSON.parse(JSON.stringify(e))}var _t=function(e,t){var s={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(s[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(s[n[r]]=e[n[r]])}return s};const Et=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Ct=[502,503,504];async function Pt(e){var t,s;if(!("object"===typeof(s=e)&&null!==s&&"status"in s&&"ok"in s&&"json"in s&&"function"===typeof s.json))throw new Qe(Et(e),0);if(Ct.includes(e.status))throw new Qe(Et(e),e.status);let n,r;try{n=await e.json()}catch(i){throw new Ve(Et(i),i)}const a=function(e){const t=e.headers.get(Me);if(!t)return null;if(!t.match(wt))return null;try{return new Date("".concat(t,"T00:00:00.0Z"))}catch(i){return null}}(e);if(a&&a.getTime()>=ze.timestamp&&"object"===typeof n&&n&&"string"===typeof n.code?r=n.code:"object"===typeof n&&n&&"string"===typeof n.error_code&&(r=n.error_code),r){if("weak_password"===r)throw new $e(Et(n),e.status,(null===(t=n.weak_password)||void 0===t?void 0:t.reasons)||[]);if("session_not_found"===r)throw new We}else if("object"===typeof n&&n&&"object"===typeof n.weak_password&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((e,t)=>e&&"string"===typeof t,!0))throw new $e(Et(n),e.status,n.weak_password.reasons);throw new qe(Et(n),e.status||500,r)}async function Tt(e,t,s,n){var r;const a=Object.assign({},null===n||void 0===n?void 0:n.headers);a[Me]||(a[Me]=ze.name),(null===n||void 0===n?void 0:n.jwt)&&(a.Authorization="Bearer ".concat(n.jwt));const i=null!==(r=null===n||void 0===n?void 0:n.query)&&void 0!==r?r:{};(null===n||void 0===n?void 0:n.redirectTo)&&(i.redirect_to=n.redirectTo);const o=Object.keys(i).length?"?"+new URLSearchParams(i).toString():"",l=await async function(e,t,s,n,r,a){const i=((e,t,s,n)=>{const r={method:e,headers:(null===t||void 0===t?void 0:t.headers)||{}};return"GET"===e?r:(r.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},null===t||void 0===t?void 0:t.headers),r.body=JSON.stringify(n),Object.assign(Object.assign({},r),s))})(t,n,r,a);let o;try{o=await e(s,Object.assign({},i))}catch(l){throw console.error(l),new Qe(Et(l),0)}o.ok||await Pt(o);if(null===n||void 0===n?void 0:n.noResolveJson)return o;try{return await o.json()}catch(l){await Pt(l)}}(e,t,s+o,{headers:a,noResolveJson:null===n||void 0===n?void 0:n.noResolveJson},{},null===n||void 0===n?void 0:n.body);return(null===n||void 0===n?void 0:n.xform)?null===n||void 0===n?void 0:n.xform(l):{data:Object.assign({},l),error:null}}function It(e){var t;let s=null;var n;(function(e){return e.access_token&&e.refresh_token&&e.expires_in})(e)&&(s=Object.assign({},e),e.expires_at||(s.expires_at=(n=e.expires_in,Math.round(Date.now()/1e3)+n)));return{data:{session:s,user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function Rt(e){const t=It(e);return!t.error&&e.weak_password&&"object"===typeof e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&"string"===typeof e.weak_password.message&&e.weak_password.reasons.reduce((e,t)=>e&&"string"===typeof t,!0)&&(t.data.weak_password=e.weak_password),t}function Dt(e){var t;return{data:{user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function Ot(e){return{data:e,error:null}}function Lt(e){const{action_link:t,email_otp:s,hashed_token:n,redirect_to:r,verification_type:a}=e,i=_t(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]);return{data:{properties:{action_link:t,email_otp:s,hashed_token:n,redirect_to:r,verification_type:a},user:Object.assign({},i)},error:null}}function Mt(e){return e}const zt=["global","local","others"];var Ft=function(e,t){var s={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(s[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(s[n[r]]=e[n[r]])}return s};class Ut{constructor(e){let{url:t="",headers:s={},fetch:n}=e;this.url=t,this.headers=s,this.fetch=mt(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:zt[0];if(zt.indexOf(t)<0)throw new Error("@supabase/auth-js: Parameter scope must be one of ".concat(zt.join(", ")));try{return await Tt(this.fetch,"POST","".concat(this.url,"/logout?scope=").concat(t),{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if(Be(s))return{data:null,error:s};throw s}}async inviteUserByEmail(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{return await Tt(this.fetch,"POST","".concat(this.url,"/invite"),{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:Dt})}catch(s){if(Be(s))return{data:{user:null},error:s};throw s}}async generateLink(e){try{const{options:t}=e,s=Ft(e,["options"]),n=Object.assign(Object.assign({},s),t);return"newEmail"in s&&(n.new_email=null===s||void 0===s?void 0:s.newEmail,delete n.newEmail),await Tt(this.fetch,"POST","".concat(this.url,"/admin/generate_link"),{body:n,headers:this.headers,xform:Lt,redirectTo:null===t||void 0===t?void 0:t.redirectTo})}catch(t){if(Be(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await Tt(this.fetch,"POST","".concat(this.url,"/admin/users"),{body:e,headers:this.headers,xform:Dt})}catch(t){if(Be(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,s,n,r,a,i,o;try{const l={nextPage:null,lastPage:0,total:0},c=await Tt(this.fetch,"GET","".concat(this.url,"/admin/users"),{headers:this.headers,noResolveJson:!0,query:{page:null!==(s=null===(t=null===e||void 0===e?void 0:e.page)||void 0===t?void 0:t.toString())&&void 0!==s?s:"",per_page:null!==(r=null===(n=null===e||void 0===e?void 0:e.perPage)||void 0===n?void 0:n.toString())&&void 0!==r?r:""},xform:Mt});if(c.error)throw c.error;const d=await c.json(),u=null!==(a=c.headers.get("x-total-count"))&&void 0!==a?a:0,h=null!==(o=null===(i=c.headers.get("link"))||void 0===i?void 0:i.split(","))&&void 0!==o?o:[];return h.length>0&&(h.forEach(e=>{const t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),s=JSON.parse(e.split(";")[1].split("=")[1]);l["".concat(s,"Page")]=t}),l.total=parseInt(u)),{data:Object.assign(Object.assign({},d),l),error:null}}catch(l){if(Be(l))return{data:{users:[]},error:l};throw l}}async getUserById(e){St(e);try{return await Tt(this.fetch,"GET","".concat(this.url,"/admin/users/").concat(e),{headers:this.headers,xform:Dt})}catch(t){if(Be(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){St(e);try{return await Tt(this.fetch,"PUT","".concat(this.url,"/admin/users/").concat(e),{body:t,headers:this.headers,xform:Dt})}catch(s){if(Be(s))return{data:{user:null},error:s};throw s}}async deleteUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];St(e);try{return await Tt(this.fetch,"DELETE","".concat(this.url,"/admin/users/").concat(e),{headers:this.headers,body:{should_soft_delete:t},xform:Dt})}catch(s){if(Be(s))return{data:{user:null},error:s};throw s}}async _listFactors(e){St(e.userId);try{const{data:t,error:s}=await Tt(this.fetch,"GET","".concat(this.url,"/admin/users/").concat(e.userId,"/factors"),{headers:this.headers,xform:e=>({data:{factors:e},error:null})});return{data:t,error:s}}catch(t){if(Be(t))return{data:null,error:t};throw t}}async _deleteFactor(e){St(e.userId),St(e.id);try{return{data:await Tt(this.fetch,"DELETE","".concat(this.url,"/admin/users/").concat(e.userId,"/factors/").concat(e.id),{headers:this.headers}),error:null}}catch(t){if(Be(t))return{data:null,error:t};throw t}}}function Bt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{getItem:t=>e[t]||null,setItem:(t,s)=>{e[t]=s},removeItem:t=>{delete e[t]}}}const qt=!!(globalThis&&ht()&&globalThis.localStorage&&"true"===globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug"));class Vt extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Ht extends Vt{}async function Wt(e,t,s){qt&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),qt&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,0===t?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async n=>{if(!n){if(0===t)throw qt&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new Ht('Acquiring an exclusive Navigator LockManager lock "'.concat(e,'" immediately failed'));if(qt)try{const e=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(e,null,"  "))}catch(r){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",r)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await s()}qt&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,n.name);try{return await s()}finally{qt&&console.log("@supabase/gotrue-js: navigatorLock: released",e,n.name)}}))}!function(){if("object"!==typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(e){"undefined"!==typeof self&&(self.globalThis=self)}}();const Gt={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Le,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Kt(e,t,s){return await s()}const Zt={};class Jt{constructor(e){var t,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Jt.nextInstanceID,Jt.nextInstanceID+=1,this.instanceID>0&&dt()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const n=Object.assign(Object.assign({},Gt),e);if(this.logDebugMessages=!!n.debug,"function"===typeof n.debug&&(this.logger=n.debug),this.persistSession=n.persistSession,this.storageKey=n.storageKey,this.autoRefreshToken=n.autoRefreshToken,this.admin=new Ut({url:n.url,headers:n.headers,fetch:n.fetch}),this.url=n.url,this.headers=n.headers,this.fetch=mt(n.fetch),this.lock=n.lock||Kt,this.detectSessionInUrl=n.detectSessionInUrl,this.flowType=n.flowType,this.hasCustomAuthorizationHeader=n.hasCustomAuthorizationHeader,n.lock?this.lock=n.lock:dt()&&(null===(t=null===globalThis||void 0===globalThis?void 0:globalThis.navigator)||void 0===t?void 0:t.locks)?this.lock=Wt:this.lock=Kt,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(n.storage?this.storage=n.storage:ht()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Bt(this.memoryStorage)),n.userStorage&&(this.userStorage=n.userStorage)):(this.memoryStorage={},this.storage=Bt(this.memoryStorage)),dt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(r){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",r)}null===(s=this.broadcastChannel)||void 0===s||s.addEventListener("message",async e=>{this._debug("received broadcast notification from other tab or client",e),await this._notifyAllSubscribers(e.data.event,e.data.session,!1)})}this.initialize()}get jwks(){var e,t;return null!==(t=null===(e=Zt[this.storageKey])||void 0===e?void 0:e.jwks)&&void 0!==t?t:{keys:[]}}set jwks(e){Zt[this.storageKey]=Object.assign(Object.assign({},Zt[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return null!==(t=null===(e=Zt[this.storageKey])||void 0===e?void 0:e.cachedAt)&&void 0!==t?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Zt[this.storageKey]=Object.assign(Object.assign({},Zt[this.storageKey]),{cachedAt:e})}_debug(){if(this.logDebugMessages){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];this.logger("GoTrueClient@".concat(this.instanceID," (").concat(Re,") ").concat((new Date).toISOString()),...t)}return this}async initialize(){return this.initializePromise||(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))()),await this.initializePromise}async _initialize(){var e;try{const t=function(e){const t={},s=new URL(e);if(s.hash&&"#"===s.hash[0])try{new URLSearchParams(s.hash.substring(1)).forEach((e,s)=>{t[s]=e})}catch(n){}return s.searchParams.forEach((e,s)=>{t[s]=e}),t}(window.location.href);let s="none";if(this._isImplicitGrantCallback(t)?s="implicit":await this._isPKCECallback(t)&&(s="pkce"),dt()&&this.detectSessionInUrl&&"none"!==s){const{data:n,error:r}=await this._getSessionFromURL(t,s);if(r){if(this._debug("#_initialize()","error detecting session from URL",r),function(e){return Be(e)&&"AuthImplicitGrantRedirectError"===e.name}(r)){const t=null===(e=r.details)||void 0===e?void 0:e.code;if("identity_already_exists"===t||"identity_not_found"===t||"single_identity_not_deletable"===t)return{error:r}}return await this._removeSession(),{error:r}}const{session:a,redirectType:i}=n;return this._debug("#_initialize()","detected session in URL",a,"redirect type",i),await this._saveSession(a),setTimeout(async()=>{"recovery"===i?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return Be(t)?{error:t}:{error:new Ve("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,s,n;try{const r=await Tt(this.fetch,"POST","".concat(this.url,"/signup"),{headers:this.headers,body:{data:null!==(s=null===(t=null===e||void 0===e?void 0:e.options)||void 0===t?void 0:t.data)&&void 0!==s?s:{},gotrue_meta_security:{captcha_token:null===(n=null===e||void 0===e?void 0:e.options)||void 0===n?void 0:n.captchaToken}},xform:It}),{data:a,error:i}=r;if(i||!a)return{data:{user:null,session:null},error:i};const o=a.session,l=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:l,session:o},error:null}}catch(r){if(Be(r))return{data:{user:null,session:null},error:r};throw r}}async signUp(e){var t,s,n;try{let r;if("email"in e){const{email:s,password:n,options:a}=e;let i=null,o=null;"pkce"===this.flowType&&([i,o]=await jt(this.storage,this.storageKey)),r=await Tt(this.fetch,"POST","".concat(this.url,"/signup"),{headers:this.headers,redirectTo:null===a||void 0===a?void 0:a.emailRedirectTo,body:{email:s,password:n,data:null!==(t=null===a||void 0===a?void 0:a.data)&&void 0!==t?t:{},gotrue_meta_security:{captcha_token:null===a||void 0===a?void 0:a.captchaToken},code_challenge:i,code_challenge_method:o},xform:It})}else{if(!("phone"in e))throw new Ke("You must provide either an email or phone number and a password");{const{phone:t,password:a,options:i}=e;r=await Tt(this.fetch,"POST","".concat(this.url,"/signup"),{headers:this.headers,body:{phone:t,password:a,data:null!==(s=null===i||void 0===i?void 0:i.data)&&void 0!==s?s:{},channel:null!==(n=null===i||void 0===i?void 0:i.channel)&&void 0!==n?n:"sms",gotrue_meta_security:{captcha_token:null===i||void 0===i?void 0:i.captchaToken}},xform:It})}}const{data:a,error:i}=r;if(i||!a)return{data:{user:null,session:null},error:i};const o=a.session,l=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:l,session:o},error:null}}catch(r){if(Be(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithPassword(e){try{let t;if("email"in e){const{email:s,password:n,options:r}=e;t=await Tt(this.fetch,"POST","".concat(this.url,"/token?grant_type=password"),{headers:this.headers,body:{email:s,password:n,gotrue_meta_security:{captcha_token:null===r||void 0===r?void 0:r.captchaToken}},xform:Rt})}else{if(!("phone"in e))throw new Ke("You must provide either an email or phone number and a password");{const{phone:s,password:n,options:r}=e;t=await Tt(this.fetch,"POST","".concat(this.url,"/token?grant_type=password"),{headers:this.headers,body:{phone:s,password:n,gotrue_meta_security:{captcha_token:null===r||void 0===r?void 0:r.captchaToken}},xform:Rt})}}const{data:s,error:n}=t;return n?{data:{user:null,session:null},error:n}:s&&s.session&&s.user?(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:n}):{data:{user:null,session:null},error:new Ge}}catch(t){if(Be(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,s,n,r;return await this._handleProviderSignIn(e.provider,{redirectTo:null===(t=e.options)||void 0===t?void 0:t.redirectTo,scopes:null===(s=e.options)||void 0===s?void 0:s.scopes,queryParams:null===(n=e.options)||void 0===n?void 0:n.queryParams,skipBrowserRedirect:null===(r=e.options)||void 0===r?void 0:r.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;if("solana"===t)return await this.signInWithSolana(e);throw new Error('@supabase/auth-js: Unsupported chain "'.concat(t,'"'))}async signInWithSolana(e){var t,s,n,r,a,i,o,l,c,d,u,h;let m,p;if("message"in e)m=e.message,p=e.signature;else{const{chain:u,wallet:h,statement:f,options:g}=e;let x;if(dt())if("object"===typeof h)x=h;else{const e=window;if(!("solana"in e)||"object"!==typeof e.solana||!("signIn"in e.solana&&"function"===typeof e.solana.signIn||"signMessage"in e.solana&&"function"===typeof e.solana.signMessage))throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.");x=e.solana}else{if("object"!==typeof h||!(null===g||void 0===g?void 0:g.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");x=h}const v=new URL(null!==(t=null===g||void 0===g?void 0:g.url)&&void 0!==t?t:window.location.href);if("signIn"in x&&x.signIn){const e=await x.signIn(Object.assign(Object.assign(Object.assign({issuedAt:(new Date).toISOString()},null===g||void 0===g?void 0:g.signInWithSolana),{version:"1",domain:v.host,uri:v.href}),f?{statement:f}:null));let t;if(Array.isArray(e)&&e[0]&&"object"===typeof e[0])t=e[0];else{if(!(e&&"object"===typeof e&&"signedMessage"in e&&"signature"in e))throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");t=e}if(!("signedMessage"in t&&"signature"in t&&("string"===typeof t.signedMessage||t.signedMessage instanceof Uint8Array)&&t.signature instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields");m="string"===typeof t.signedMessage?t.signedMessage:(new TextDecoder).decode(t.signedMessage),p=t.signature}else{if(!("signMessage"in x)||"function"!==typeof x.signMessage||!("publicKey"in x)||"object"!==typeof x||!x.publicKey||!("toBase58"in x.publicKey)||"function"!==typeof x.publicKey.toBase58)throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");m=["".concat(v.host," wants you to sign in with your Solana account:"),x.publicKey.toBase58(),...f?["",f,""]:[""],"Version: 1","URI: ".concat(v.href),"Issued At: ".concat(null!==(n=null===(s=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===s?void 0:s.issuedAt)&&void 0!==n?n:(new Date).toISOString()),...(null===(r=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===r?void 0:r.notBefore)?["Not Before: ".concat(g.signInWithSolana.notBefore)]:[],...(null===(a=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===a?void 0:a.expirationTime)?["Expiration Time: ".concat(g.signInWithSolana.expirationTime)]:[],...(null===(i=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===i?void 0:i.chainId)?["Chain ID: ".concat(g.signInWithSolana.chainId)]:[],...(null===(o=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===o?void 0:o.nonce)?["Nonce: ".concat(g.signInWithSolana.nonce)]:[],...(null===(l=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===l?void 0:l.requestId)?["Request ID: ".concat(g.signInWithSolana.requestId)]:[],...(null===(d=null===(c=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===c?void 0:c.resources)||void 0===d?void 0:d.length)?["Resources",...g.signInWithSolana.resources.map(e=>"- ".concat(e))]:[]].join("\n");const e=await x.signMessage((new TextEncoder).encode(m),"utf8");if(!e||!(e instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");p=e}}try{const{data:t,error:s}=await Tt(this.fetch,"POST","".concat(this.url,"/token?grant_type=web3"),{headers:this.headers,body:Object.assign({chain:"solana",message:m,signature:ct(p)},(null===(u=e.options)||void 0===u?void 0:u.captchaToken)?{gotrue_meta_security:{captcha_token:null===(h=e.options)||void 0===h?void 0:h.captchaToken}}:null),xform:It});if(s)throw s;return t&&t.session&&t.user?(t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign({},t),error:s}):{data:{user:null,session:null},error:new Ge}}catch(f){if(Be(f))return{data:{user:null,session:null},error:f};throw f}}async _exchangeCodeForSession(e){const t=await ft(this.storage,"".concat(this.storageKey,"-code-verifier")),[s,n]=(null!==t&&void 0!==t?t:"").split("/");try{const{data:t,error:r}=await Tt(this.fetch,"POST","".concat(this.url,"/token?grant_type=pkce"),{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:It});if(await gt(this.storage,"".concat(this.storageKey,"-code-verifier")),r)throw r;return t&&t.session&&t.user?(t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign(Object.assign({},t),{redirectType:null!==n&&void 0!==n?n:null}),error:r}):{data:{user:null,session:null,redirectType:null},error:new Ge}}catch(r){if(Be(r))return{data:{user:null,session:null,redirectType:null},error:r};throw r}}async signInWithIdToken(e){try{const{options:t,provider:s,token:n,access_token:r,nonce:a}=e,i=await Tt(this.fetch,"POST","".concat(this.url,"/token?grant_type=id_token"),{headers:this.headers,body:{provider:s,id_token:n,access_token:r,nonce:a,gotrue_meta_security:{captcha_token:null===t||void 0===t?void 0:t.captchaToken}},xform:It}),{data:o,error:l}=i;return l?{data:{user:null,session:null},error:l}:o&&o.session&&o.user?(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:o,error:l}):{data:{user:null,session:null},error:new Ge}}catch(t){if(Be(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,s,n,r,a;try{if("email"in e){const{email:n,options:r}=e;let a=null,i=null;"pkce"===this.flowType&&([a,i]=await jt(this.storage,this.storageKey));const{error:o}=await Tt(this.fetch,"POST","".concat(this.url,"/otp"),{headers:this.headers,body:{email:n,data:null!==(t=null===r||void 0===r?void 0:r.data)&&void 0!==t?t:{},create_user:null===(s=null===r||void 0===r?void 0:r.shouldCreateUser)||void 0===s||s,gotrue_meta_security:{captcha_token:null===r||void 0===r?void 0:r.captchaToken},code_challenge:a,code_challenge_method:i},redirectTo:null===r||void 0===r?void 0:r.emailRedirectTo});return{data:{user:null,session:null},error:o}}if("phone"in e){const{phone:t,options:s}=e,{data:i,error:o}=await Tt(this.fetch,"POST","".concat(this.url,"/otp"),{headers:this.headers,body:{phone:t,data:null!==(n=null===s||void 0===s?void 0:s.data)&&void 0!==n?n:{},create_user:null===(r=null===s||void 0===s?void 0:s.shouldCreateUser)||void 0===r||r,gotrue_meta_security:{captcha_token:null===s||void 0===s?void 0:s.captchaToken},channel:null!==(a=null===s||void 0===s?void 0:s.channel)&&void 0!==a?a:"sms"}});return{data:{user:null,session:null,messageId:null===i||void 0===i?void 0:i.message_id},error:o}}throw new Ke("You must provide either an email or phone number.")}catch(i){if(Be(i))return{data:{user:null,session:null},error:i};throw i}}async verifyOtp(e){var t,s;try{let n,r;"options"in e&&(n=null===(t=e.options)||void 0===t?void 0:t.redirectTo,r=null===(s=e.options)||void 0===s?void 0:s.captchaToken);const{data:a,error:i}=await Tt(this.fetch,"POST","".concat(this.url,"/verify"),{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:r}}),redirectTo:n,xform:It});if(i)throw i;if(!a)throw new Error("An error occurred on token verification.");const o=a.session,l=a.user;return(null===o||void 0===o?void 0:o.access_token)&&(await this._saveSession(o),await this._notifyAllSubscribers("recovery"==e.type?"PASSWORD_RECOVERY":"SIGNED_IN",o)),{data:{user:l,session:o},error:null}}catch(n){if(Be(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithSSO(e){var t,s,n;try{let r=null,a=null;return"pkce"===this.flowType&&([r,a]=await jt(this.storage,this.storageKey)),await Tt(this.fetch,"POST","".concat(this.url,"/sso"),{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:null!==(s=null===(t=e.options)||void 0===t?void 0:t.redirectTo)&&void 0!==s?s:void 0}),(null===(n=null===e||void 0===e?void 0:e.options)||void 0===n?void 0:n.captchaToken)?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:r,code_challenge_method:a}),headers:this.headers,xform:Ot})}catch(r){if(Be(r))return{data:null,error:r};throw r}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:s}=e;if(s)throw s;if(!t)throw new We;const{error:n}=await Tt(this.fetch,"GET","".concat(this.url,"/reauthenticate"),{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:n}})}catch(e){if(Be(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t="".concat(this.url,"/resend");if("email"in e){const{email:s,type:n,options:r}=e,{error:a}=await Tt(this.fetch,"POST",t,{headers:this.headers,body:{email:s,type:n,gotrue_meta_security:{captcha_token:null===r||void 0===r?void 0:r.captchaToken}},redirectTo:null===r||void 0===r?void 0:r.emailRedirectTo});return{data:{user:null,session:null},error:a}}if("phone"in e){const{phone:s,type:n,options:r}=e,{data:a,error:i}=await Tt(this.fetch,"POST",t,{headers:this.headers,body:{phone:s,type:n,gotrue_meta_security:{captcha_token:null===r||void 0===r?void 0:r.captchaToken}}});return{data:{user:null,session:null,messageId:null===a||void 0===a?void 0:a.message_id},error:i}}throw new Ke("You must provide either an email or phone number and a type")}catch(t){if(Be(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){await this.initializePromise;return await this._acquireLock(-1,async()=>this._useSession(async e=>e))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const e=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await e,await t()))();return this.pendingInLock.push((async()=>{try{await s}catch(e){}})()),s}return await this.lock("lock:".concat(this.storageKey),e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const e=t();for(this.pendingInLock.push((async()=>{try{await e}catch(t){}})()),await e;this.pendingInLock.length;){const e=[...this.pendingInLock];await Promise.all(e),this.pendingInLock.splice(0,e.length)}return await e}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",(new Error).stack);try{let e=null;const t=await ft(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),null!==t&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const s=!!e.expires_at&&1e3*e.expires_at-Date.now()<Oe;if(this._debug("#__loadSession()","session has".concat(s?"":" not"," expired"),"expires_at",e.expires_at),!s){if(this.userStorage){const t=await ft(this.userStorage,this.storageKey+"-user");(null===t||void 0===t?void 0:t.user)?e.user=t.user:e.user=kt()}if(this.storage.isServer&&e.user){let t=this.suppressGetSessionWarning;e=new Proxy(e,{get:(e,s,n)=>(t||"user"!==s||(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t=!0,this.suppressGetSessionWarning=!0),Reflect.get(e,s,n))})}return{data:{session:e},error:null}}const{session:n,error:r}=await this._callRefreshToken(e.refresh_token);return r?{data:{session:null},error:r}:{data:{session:n},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;return await this._acquireLock(-1,async()=>await this._getUser())}async _getUser(e){try{return e?await Tt(this.fetch,"GET","".concat(this.url,"/user"),{headers:this.headers,jwt:e,xform:Dt}):await this._useSession(async e=>{var t,s,n;const{data:r,error:a}=e;if(a)throw a;return(null===(t=r.session)||void 0===t?void 0:t.access_token)||this.hasCustomAuthorizationHeader?await Tt(this.fetch,"GET","".concat(this.url,"/user"),{headers:this.headers,jwt:null!==(n=null===(s=r.session)||void 0===s?void 0:s.access_token)&&void 0!==n?n:void 0,xform:Dt}):{data:{user:null},error:new We}})}catch(t){if(Be(t))return function(e){return Be(e)&&"AuthSessionMissingError"===e.name}(t)&&(await this._removeSession(),await gt(this.storage,"".concat(this.storageKey,"-code-verifier"))),{data:{user:null},error:t};throw t}}async updateUser(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{return await this._useSession(async s=>{const{data:n,error:r}=s;if(r)throw r;if(!n.session)throw new We;const a=n.session;let i=null,o=null;"pkce"===this.flowType&&null!=e.email&&([i,o]=await jt(this.storage,this.storageKey));const{data:l,error:c}=await Tt(this.fetch,"PUT","".concat(this.url,"/user"),{headers:this.headers,redirectTo:null===t||void 0===t?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:i,code_challenge_method:o}),jwt:a.access_token,xform:Dt});if(c)throw c;return a.user=l.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(s){if(Be(s))return{data:{user:null},error:s};throw s}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new We;const t=Date.now()/1e3;let s=t,n=!0,r=null;const{payload:a}=vt(e.access_token);if(a.exp&&(s=a.exp,n=s<=t),n){const{session:t,error:s}=await this._callRefreshToken(e.refresh_token);if(s)return{data:{user:null,session:null},error:s};if(!t)return{data:{user:null,session:null},error:null};r=t}else{const{data:n,error:a}=await this._getUser(e.access_token);if(a)throw a;r={access_token:e.access_token,refresh_token:e.refresh_token,user:n.user,token_type:"bearer",expires_in:s-t,expires_at:s},await this._saveSession(r),await this._notifyAllSubscribers("SIGNED_IN",r)}return{data:{user:r.user,session:r},error:null}}catch(t){if(Be(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var s;if(!e){const{data:n,error:r}=t;if(r)throw r;e=null!==(s=n.session)&&void 0!==s?s:void 0}if(!(null===e||void 0===e?void 0:e.refresh_token))throw new We;const{session:n,error:r}=await this._callRefreshToken(e.refresh_token);return r?{data:{user:null,session:null},error:r}:n?{data:{user:n.user,session:n},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(Be(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!dt())throw new Ze("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Ze(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if("pkce"===this.flowType)throw new Je("Not a valid PKCE flow url.");break;case"pkce":if("implicit"===this.flowType)throw new Ze("Not a valid implicit grant flow url.")}if("pkce"===t){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Je("No code detected.");const{data:t,error:s}=await this._exchangeCodeForSession(e.code);if(s)throw s;const n=new URL(window.location.href);return n.searchParams.delete("code"),window.history.replaceState(window.history.state,"",n.toString()),{data:{session:t.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:n,access_token:r,refresh_token:a,expires_in:i,expires_at:o,token_type:l}=e;if(!r||!i||!a||!l)throw new Ze("No session defined in URL");const c=Math.round(Date.now()/1e3),d=parseInt(i);let u=c+d;o&&(u=parseInt(o));const h=u-c;1e3*h<=De&&console.warn("@supabase/gotrue-js: Session as retrieved from URL expires in ".concat(h,"s, should have been closer to ").concat(d,"s"));const m=u-d;c-m>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",m,u,c):c-m<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",m,u,c);const{data:p,error:f}=await this._getUser(r);if(f)throw f;const g={provider_token:s,provider_refresh_token:n,access_token:r,expires_in:d,expires_at:u,refresh_token:a,token_type:l,user:p.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:g,redirectType:e.type},error:null}}catch(s){if(Be(s))return{data:{session:null,redirectType:null},error:s};throw s}}_isImplicitGrantCallback(e){return Boolean(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await ft(this.storage,"".concat(this.storageKey,"-code-verifier"));return!(!e.code||!t)}async signOut(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{scope:"global"};return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut(){let{scope:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{scope:"global"};return await this._useSession(async t=>{var s;const{data:n,error:r}=t;if(r)return{error:r};const a=null===(s=n.session)||void 0===s?void 0:s.access_token;if(a){const{error:t}=await this.admin.signOut(a,e);if(t&&(!function(e){return Be(e)&&"AuthApiError"===e.name}(t)||404!==t.status&&401!==t.status&&403!==t.status))return{error:t}}return"others"!==e&&(await this._removeSession(),await gt(this.storage,"".concat(this.storageKey,"-code-verifier"))),{error:null}})}onAuthStateChange(e){const t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}),s={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,s),(async()=>{await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})})(),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession(async t=>{var s,n;try{const{data:{session:n},error:r}=t;if(r)throw r;await(null===(s=this.stateChangeEmitters.get(e))||void 0===s?void 0:s.callback("INITIAL_SESSION",n)),this._debug("INITIAL_SESSION","callback id",e,"session",n)}catch(r){await(null===(n=this.stateChangeEmitters.get(e))||void 0===n?void 0:n.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",r),console.error(r)}})}async resetPasswordForEmail(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=null,n=null;"pkce"===this.flowType&&([s,n]=await jt(this.storage,this.storageKey,!0));try{return await Tt(this.fetch,"POST","".concat(this.url,"/recover"),{body:{email:e,code_challenge:s,code_challenge_method:n,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(r){if(Be(r))return{data:null,error:r};throw r}}async getUserIdentities(){var e;try{const{data:t,error:s}=await this.getUser();if(s)throw s;return{data:{identities:null!==(e=t.user.identities)&&void 0!==e?e:[]},error:null}}catch(t){if(Be(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:s,error:n}=await this._useSession(async t=>{var s,n,r,a,i;const{data:o,error:l}=t;if(l)throw l;const c=await this._getUrlForProvider("".concat(this.url,"/user/identities/authorize"),e.provider,{redirectTo:null===(s=e.options)||void 0===s?void 0:s.redirectTo,scopes:null===(n=e.options)||void 0===n?void 0:n.scopes,queryParams:null===(r=e.options)||void 0===r?void 0:r.queryParams,skipBrowserRedirect:!0});return await Tt(this.fetch,"GET",c,{headers:this.headers,jwt:null!==(i=null===(a=o.session)||void 0===a?void 0:a.access_token)&&void 0!==i?i:void 0})});if(n)throw n;return dt()&&!(null===(t=e.options)||void 0===t?void 0:t.skipBrowserRedirect)&&window.location.assign(null===s||void 0===s?void 0:s.url),{data:{provider:e.provider,url:null===s||void 0===s?void 0:s.url},error:null}}catch(s){if(Be(s))return{data:{provider:e.provider,url:null},error:s};throw s}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var s,n;const{data:r,error:a}=t;if(a)throw a;return await Tt(this.fetch,"DELETE","".concat(this.url,"/user/identities/").concat(e.identity_id),{headers:this.headers,jwt:null!==(n=null===(s=r.session)||void 0===s?void 0:s.access_token)&&void 0!==n?n:void 0})})}catch(t){if(Be(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t="#_refreshAccessToken(".concat(e.substring(0,5),"...)");this._debug(t,"begin");try{const r=Date.now();return await(s=async s=>(s>0&&await async function(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}(200*Math.pow(2,s-1)),this._debug(t,"refreshing attempt",s),await Tt(this.fetch,"POST","".concat(this.url,"/token?grant_type=refresh_token"),{body:{refresh_token:e},headers:this.headers,xform:It})),n=(e,t)=>{const s=200*Math.pow(2,e);return t&&Ye(t)&&Date.now()+s-r<De},new Promise((e,t)=>{(async()=>{for(let a=0;a<1/0;a++)try{const t=await s(a);if(!n(a,null,t))return void e(t)}catch(r){if(!n(a,r))return void t(r)}})()}))}catch(r){if(this._debug(t,"error",r),Be(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(t,"end")}var s,n}_isValidSession(e){return"object"===typeof e&&null!==e&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const s=await this._getUrlForProvider("".concat(this.url,"/authorize"),e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",s),dt()&&!t.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e,t;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const r=await ft(this.storage,this.storageKey);if(r&&this.userStorage){let t=await ft(this.userStorage,this.storageKey+"-user");this.storage.isServer||!Object.is(this.storage,this.userStorage)||t||(t={user:r.user},await pt(this.userStorage,this.storageKey+"-user",t)),r.user=null!==(e=null===t||void 0===t?void 0:t.user)&&void 0!==e?e:kt()}else if(r&&!r.user&&!r.user){const e=await ft(this.storage,this.storageKey+"-user");e&&(null===e||void 0===e?void 0:e.user)?(r.user=e.user,await gt(this.storage,this.storageKey+"-user"),await pt(this.storage,this.storageKey,r)):r.user=kt()}if(this._debug(s,"session from storage",r),!this._isValidSession(r))return this._debug(s,"session is not valid"),void(null!==r&&await this._removeSession());const a=1e3*(null!==(t=r.expires_at)&&void 0!==t?t:1/0)-Date.now()<Oe;if(this._debug(s,"session has".concat(a?"":" not"," expired with margin of ").concat(Oe,"s")),a){if(this.autoRefreshToken&&r.refresh_token){const{error:e}=await this._callRefreshToken(r.refresh_token);e&&(console.error(e),Ye(e)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",e),await this._removeSession()))}}else if(r.user&&!0===r.user.__isUserNotAvailableProxy)try{const{data:e,error:t}=await this._getUser(r.access_token);!t&&(null===e||void 0===e?void 0:e.user)?(r.user=e.user,await this._saveSession(r),await this._notifyAllSubscribers("SIGNED_IN",r)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(n){console.error("Error getting user data:",n),this._debug(s,"error getting user data, skipping SIGNED_IN notification",n)}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){return this._debug(s,"error",r),void console.error(r)}finally{this._debug(s,"end")}}async _callRefreshToken(e){var t,s;if(!e)throw new We;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const n="#_callRefreshToken(".concat(e.substring(0,5),"...)");this._debug(n,"begin");try{this.refreshingDeferred=new xt;const{data:t,error:s}=await this._refreshAccessToken(e);if(s)throw s;if(!t.session)throw new We;await this._saveSession(t.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",t.session);const n={session:t.session,error:null};return this.refreshingDeferred.resolve(n),n}catch(r){if(this._debug(n,"error",r),Be(r)){const e={session:null,error:r};return Ye(r)||await this._removeSession(),null===(t=this.refreshingDeferred)||void 0===t||t.resolve(e),e}throw null===(s=this.refreshingDeferred)||void 0===s||s.reject(r),r}finally{this.refreshingDeferred=null,this._debug(n,"end")}}async _notifyAllSubscribers(e,t){let s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const n="#_notifyAllSubscribers(".concat(e,")");this._debug(n,"begin",t,"broadcast = ".concat(s));try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:t});const n=[],r=Array.from(this.stateChangeEmitters.values()).map(async s=>{try{await s.callback(e,t)}catch(r){n.push(r)}});if(await Promise.all(r),n.length>0){for(let e=0;e<n.length;e+=1)console.error(n[e]);throw n[0]}}finally{this._debug(n,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),s=t.user&&!0===t.user.__isUserNotAvailableProxy;if(this.userStorage){!s&&t.user&&await pt(this.userStorage,this.storageKey+"-user",{user:t.user});const e=Object.assign({},t);delete e.user;const n=At(e);await pt(this.storage,this.storageKey,n)}else{const e=At(t);await pt(this.storage,this.storageKey,e)}}async _removeSession(){this._debug("#_removeSession()"),await gt(this.storage,this.storageKey),await gt(this.storage,this.storageKey+"-code-verifier"),await gt(this.storage,this.storageKey+"-user"),this.userStorage&&await gt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&dt()&&(null===window||void 0===window?void 0:window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),De);this.autoRefreshTicker=e,e&&"object"===typeof e&&"function"===typeof e.unref?e.unref():"undefined"!==typeof Deno&&"function"===typeof Deno.unrefTimer&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async e=>{const{data:{session:s}}=e;if(!s||!s.refresh_token||!s.expires_at)return void this._debug("#_autoRefreshTokenTick()","no session");const n=Math.floor((1e3*s.expires_at-t)/De);this._debug("#_autoRefreshTokenTick()","access token expires in ".concat(n," ticks, a tick lasts ").concat(De,"ms, refresh threshold is ").concat(3," ticks")),n<=3&&await this._callRefreshToken(s.refresh_token)})}catch(e){console.error("Auto refresh tick failed with error. This is likely a transient error.",e)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(!(e.isAcquireTimeout||e instanceof Vt))throw e;this._debug("auto refresh token tick lock not available")}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!dt()||!(null===window||void 0===window?void 0:window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),null===window||void 0===window||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t="#_onVisibilityChanged(".concat(e,")");this._debug(t,"visibilityState",document.visibilityState),"visible"===document.visibilityState?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{"visible"===document.visibilityState?await this._recoverAndRefresh():this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting")}))):"hidden"===document.visibilityState&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,s){const n=["provider=".concat(encodeURIComponent(t))];if((null===s||void 0===s?void 0:s.redirectTo)&&n.push("redirect_to=".concat(encodeURIComponent(s.redirectTo))),(null===s||void 0===s?void 0:s.scopes)&&n.push("scopes=".concat(encodeURIComponent(s.scopes))),"pkce"===this.flowType){const[e,t]=await jt(this.storage,this.storageKey),s=new URLSearchParams({code_challenge:"".concat(encodeURIComponent(e)),code_challenge_method:"".concat(encodeURIComponent(t))});n.push(s.toString())}if(null===s||void 0===s?void 0:s.queryParams){const e=new URLSearchParams(s.queryParams);n.push(e.toString())}return(null===s||void 0===s?void 0:s.skipBrowserRedirect)&&n.push("skip_http_redirect=".concat(s.skipBrowserRedirect)),"".concat(e,"?").concat(n.join("&"))}async _unenroll(e){try{return await this._useSession(async t=>{var s;const{data:n,error:r}=t;return r?{data:null,error:r}:await Tt(this.fetch,"DELETE","".concat(this.url,"/factors/").concat(e.factorId),{headers:this.headers,jwt:null===(s=null===n||void 0===n?void 0:n.session)||void 0===s?void 0:s.access_token})})}catch(t){if(Be(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var s,n;const{data:r,error:a}=t;if(a)return{data:null,error:a};const i=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},"phone"===e.factorType?{phone:e.phone}:{issuer:e.issuer}),{data:o,error:l}=await Tt(this.fetch,"POST","".concat(this.url,"/factors"),{body:i,headers:this.headers,jwt:null===(s=null===r||void 0===r?void 0:r.session)||void 0===s?void 0:s.access_token});return l?{data:null,error:l}:("totp"===e.factorType&&(null===(n=null===o||void 0===o?void 0:o.totp)||void 0===n?void 0:n.qr_code)&&(o.totp.qr_code="data:image/svg+xml;utf-8,".concat(o.totp.qr_code)),{data:o,error:null})})}catch(t){if(Be(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:n,error:r}=t;if(r)return{data:null,error:r};const{data:a,error:i}=await Tt(this.fetch,"POST","".concat(this.url,"/factors/").concat(e.factorId,"/verify"),{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:null===(s=null===n||void 0===n?void 0:n.session)||void 0===s?void 0:s.access_token});return i?{data:null,error:i}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:i})})}catch(t){if(Be(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:n,error:r}=t;return r?{data:null,error:r}:await Tt(this.fetch,"POST","".concat(this.url,"/factors/").concat(e.factorId,"/challenge"),{body:{channel:e.channel},headers:this.headers,jwt:null===(s=null===n||void 0===n?void 0:n.session)||void 0===s?void 0:s.access_token})})}catch(t){if(Be(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:s}=await this._challenge({factorId:e.factorId});return s?{data:null,error:s}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const s=(null===e||void 0===e?void 0:e.factors)||[],n=s.filter(e=>"totp"===e.factor_type&&"verified"===e.status),r=s.filter(e=>"phone"===e.factor_type&&"verified"===e.status);return{data:{all:s,totp:n,phone:r},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,s;const{data:{session:n},error:r}=e;if(r)return{data:null,error:r};if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=vt(n.access_token);let i=null;a.aal&&(i=a.aal);let o=i;(null!==(s=null===(t=n.user.factors)||void 0===t?void 0:t.filter(e=>"verified"===e.status))&&void 0!==s?s:[]).length>0&&(o="aal2");return{data:{currentLevel:i,nextLevel:o,currentAuthenticationMethods:a.amr||[]},error:null}}))}async fetchJwk(e){let t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{keys:[]}).keys.find(t=>t.kid===e);if(t)return t;const s=Date.now();if(t=this.jwks.keys.find(t=>t.kid===e),t&&this.jwks_cached_at+6e5>s)return t;const{data:n,error:r}=await Tt(this.fetch,"GET","".concat(this.url,"/.well-known/jwks.json"),{headers:this.headers});if(r)throw r;return n.keys&&0!==n.keys.length?(this.jwks=n,this.jwks_cached_at=s,t=n.keys.find(t=>t.kid===e),t||null):null}async getClaims(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{let s=e;if(!s){const{data:e,error:t}=await this.getSession();if(t||!e.session)return{data:null,error:t};s=e.session.access_token}const{header:n,payload:r,signature:a,raw:{header:i,payload:o}}=vt(s);(null===t||void 0===t?void 0:t.allowExpired)||function(e){if(!e)throw new Error("Missing exp claim");if(e<=Math.floor(Date.now()/1e3))throw new Error("JWT has expired")}(r.exp);const l=n.alg&&!n.alg.startsWith("HS")&&n.kid&&"crypto"in globalThis&&"subtle"in globalThis.crypto?await this.fetchJwk(n.kid,(null===t||void 0===t?void 0:t.keys)?{keys:t.keys}:null===t||void 0===t?void 0:t.jwks):null;if(!l){const{error:e}=await this.getUser(s);if(e)throw e;return{data:{claims:r,header:n,signature:a},error:null}}const c=function(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}(n.alg),d=await crypto.subtle.importKey("jwk",l,c,!0,["verify"]);if(!await crypto.subtle.verify(c,d,a,function(e){const t=[];return ot(e,e=>t.push(e)),new Uint8Array(t)}("".concat(i,".").concat(o))))throw new Xe("Invalid JWT signature");return{data:{claims:r,header:n,signature:a},error:null}}catch(s){if(Be(s))return{data:null,error:s};throw s}}}Jt.nextInstanceID=0;const Qt=Jt;class Yt extends Qt{constructor(e){super(e)}}var $t=function(e,t,s,n){return new(s||(s=Promise))(function(r,a){function i(e){try{l(n.next(e))}catch(t){a(t)}}function o(e){try{l(n.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(i,o)}l((n=n.apply(e,t||[])).next())})};class Xt{constructor(e,t,s){var n,r,a;this.supabaseUrl=e,this.supabaseKey=t;const i=function(e){const t=null===e||void 0===e?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL((s=t).endsWith("/")?s:s+"/")}catch(n){throw Error("Invalid supabaseUrl: Provided URL is malformed.")}var s}(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",i),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",i),this.storageUrl=new URL("storage/v1",i),this.functionsUrl=new URL("functions/v1",i);const o="sb-".concat(i.hostname.split(".")[0],"-auth-token"),l=function(e,t){var s,n;const{db:r,auth:a,realtime:i,global:o}=e,{db:l,auth:c,realtime:d,global:u}=t,h={db:Object.assign(Object.assign({},l),r),auth:Object.assign(Object.assign({},c),a),realtime:Object.assign(Object.assign({},d),i),storage:{},global:Object.assign(Object.assign(Object.assign({},u),o),{headers:Object.assign(Object.assign({},null!==(s=null===u||void 0===u?void 0:u.headers)&&void 0!==s?s:{}),null!==(n=null===o||void 0===o?void 0:o.headers)&&void 0!==n?n:{})}),accessToken:()=>Ie(this,void 0,void 0,function*(){return""})};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}(null!==s&&void 0!==s?s:{},{db:ke,realtime:_e,auth:Object.assign(Object.assign({},Ae),{storageKey:o}),global:Se});this.storageKey=null!==(n=l.auth.storageKey)&&void 0!==n?n:"",this.headers=null!==(r=l.global.headers)&&void 0!==r?r:{},l.accessToken?(this.accessToken=l.accessToken,this.auth=new Proxy({},{get:(e,t)=>{throw new Error("@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.".concat(String(t)," is not possible"))}})):this.auth=this._initSupabaseAuthClient(null!==(a=l.auth)&&void 0!==a?a:{},this.headers,l.global.fetch),this.fetch=Te(t,this._getAccessToken.bind(this),l.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},l.realtime)),this.rest=new u(new URL("rest/v1",i).href,{headers:this.headers,schema:l.db.schema,fetch:this.fetch}),this.storage=new we(this.storageUrl.href,this.headers,this.fetch,null===s||void 0===s?void 0:s.storage),l.accessToken||this._listenForAuthEvents()}get functions(){return new c(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.rest.rpc(e,t,s)}channel(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}};return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return $t(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:s}=yield this.auth.getSession();return null!==(t=null===(e=s.session)||void 0===e?void 0:e.access_token)&&void 0!==t?t:this.supabaseKey})}_initSupabaseAuthClient(e,t,s){let{autoRefreshToken:n,persistSession:r,detectSessionInUrl:a,storage:i,userStorage:o,storageKey:l,flowType:c,lock:d,debug:u}=e;const h={Authorization:"Bearer ".concat(this.supabaseKey),apikey:"".concat(this.supabaseKey)};return new Yt({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),t),storageKey:l,autoRefreshToken:n,persistSession:r,detectSessionInUrl:a,storage:i,userStorage:o,flowType:c,lock:d,debug:u,fetch:s,hasCustomAuthorizationHeader:Object.keys(this.headers).some(e=>"authorization"===e.toLowerCase())})}_initRealtimeClient(e){return new Y(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},null===e||void 0===e?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",null===t||void 0===t?void 0:t.access_token)})}_handleTokenChanged(e,t,s){"TOKEN_REFRESHED"!==e&&"SIGNED_IN"!==e||this.changedAccessToken===s?"SIGNED_OUT"===e&&(this.realtime.setAuth(),"STORAGE"==t&&this.auth.signOut(),this.changedAccessToken=void 0):this.changedAccessToken=s}}var es=s(2285);(function(){if("undefined"!==typeof window)return!1;if("undefined"===typeof es)return!1;const e=es.version;if(void 0===e||null===e)return!1;const t=e.match(/^v(\d+)\./);return!!t&&parseInt(t[1],10)<=18})()&&console.warn("\u26a0\ufe0f  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const ts="https://dlgfhgcczqefbuhcyazh.supabase.co",ss="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRsZ2ZoZ2NjenFlZmJ1aGN5YXpoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ2MDM3NjQsImV4cCI6MjA3MDE3OTc2NH0.ILqv7fUAP8KAr0GzkqeqaRqDcbKcPhcHtIQR7PYFIgY";const ns=ts&&ss?((e,t,s)=>new Xt(e,t,s))(ts,ss):null,rs=async()=>{if(!ns)return console.error("[SUPABASE] Client non initialis\xe9 - configuration manquante"),{success:!1,error:"Configuration Supabase manquante"};try{const{error:e}=await ns.from("users").select("count").limit(1);return e?(console.error("[SUPABASE] Erreur de connexion:",e.message),{success:!1,error:e.message}):(console.log("[SUPABASE] Connexion r\xe9ussie"),{success:!0})}catch(e){return console.error("[SUPABASE] Erreur de connexion:",e.message),{success:!1,error:e.message}}}},6382:(e,t,s)=>{"use strict";const n=s(4445),r=s(6900),a="function"===typeof Symbol&&"function"===typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.hp=l,t.IS=50;const i=2147483647;function o(e){if(e>i)throw new RangeError('The value "'+e+'" is invalid for option "size"');const t=new Uint8Array(e);return Object.setPrototypeOf(t,l.prototype),t}function l(e,t,s){if("number"===typeof e){if("string"===typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return u(e)}return c(e,t,s)}function c(e,t,s){if("string"===typeof e)return function(e,t){"string"===typeof t&&""!==t||(t="utf8");if(!l.isEncoding(t))throw new TypeError("Unknown encoding: "+t);const s=0|f(e,t);let n=o(s);const r=n.write(e,t);r!==s&&(n=n.slice(0,r));return n}(e,t);if(ArrayBuffer.isView(e))return function(e){if(J(e,Uint8Array)){const t=new Uint8Array(e);return m(t.buffer,t.byteOffset,t.byteLength)}return h(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(J(e,ArrayBuffer)||e&&J(e.buffer,ArrayBuffer))return m(e,t,s);if("undefined"!==typeof SharedArrayBuffer&&(J(e,SharedArrayBuffer)||e&&J(e.buffer,SharedArrayBuffer)))return m(e,t,s);if("number"===typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');const n=e.valueOf&&e.valueOf();if(null!=n&&n!==e)return l.from(n,t,s);const r=function(e){if(l.isBuffer(e)){const t=0|p(e.length),s=o(t);return 0===s.length||e.copy(s,0,0,t),s}if(void 0!==e.length)return"number"!==typeof e.length||Q(e.length)?o(0):h(e);if("Buffer"===e.type&&Array.isArray(e.data))return h(e.data)}(e);if(r)return r;if("undefined"!==typeof Symbol&&null!=Symbol.toPrimitive&&"function"===typeof e[Symbol.toPrimitive])return l.from(e[Symbol.toPrimitive]("string"),t,s);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function d(e){if("number"!==typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function u(e){return d(e),o(e<0?0:0|p(e))}function h(e){const t=e.length<0?0:0|p(e.length),s=o(t);for(let n=0;n<t;n+=1)s[n]=255&e[n];return s}function m(e,t,s){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(s||0))throw new RangeError('"length" is outside of buffer bounds');let n;return n=void 0===t&&void 0===s?new Uint8Array(e):void 0===s?new Uint8Array(e,t):new Uint8Array(e,t,s),Object.setPrototypeOf(n,l.prototype),n}function p(e){if(e>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return 0|e}function f(e,t){if(l.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||J(e,ArrayBuffer))return e.byteLength;if("string"!==typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);const s=e.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===s)return 0;let r=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return s;case"utf8":case"utf-8":return G(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*s;case"hex":return s>>>1;case"base64":return K(e).length;default:if(r)return n?-1:G(e).length;t=(""+t).toLowerCase(),r=!0}}function g(e,t,s){let n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===s||s>this.length)&&(s=this.length),s<=0)return"";if((s>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return P(this,t,s);case"utf8":case"utf-8":return A(this,t,s);case"ascii":return E(this,t,s);case"latin1":case"binary":return C(this,t,s);case"base64":return k(this,t,s);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,t,s);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function x(e,t,s){const n=e[t];e[t]=e[s],e[s]=n}function v(e,t,s,n,r){if(0===e.length)return-1;if("string"===typeof s?(n=s,s=0):s>2147483647?s=2147483647:s<-2147483648&&(s=-2147483648),Q(s=+s)&&(s=r?0:e.length-1),s<0&&(s=e.length+s),s>=e.length){if(r)return-1;s=e.length-1}else if(s<0){if(!r)return-1;s=0}if("string"===typeof t&&(t=l.from(t,n)),l.isBuffer(t))return 0===t.length?-1:b(e,t,s,n,r);if("number"===typeof t)return t&=255,"function"===typeof Uint8Array.prototype.indexOf?r?Uint8Array.prototype.indexOf.call(e,t,s):Uint8Array.prototype.lastIndexOf.call(e,t,s):b(e,[t],s,n,r);throw new TypeError("val must be string, number or Buffer")}function b(e,t,s,n,r){let a,i=1,o=e.length,l=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;i=2,o/=2,l/=2,s/=2}function c(e,t){return 1===i?e[t]:e.readUInt16BE(t*i)}if(r){let n=-1;for(a=s;a<o;a++)if(c(e,a)===c(t,-1===n?0:a-n)){if(-1===n&&(n=a),a-n+1===l)return n*i}else-1!==n&&(a-=a-n),n=-1}else for(s+l>o&&(s=o-l),a=s;a>=0;a--){let s=!0;for(let n=0;n<l;n++)if(c(e,a+n)!==c(t,n)){s=!1;break}if(s)return a}return-1}function y(e,t,s,n){s=Number(s)||0;const r=e.length-s;n?(n=Number(n))>r&&(n=r):n=r;const a=t.length;let i;for(n>a/2&&(n=a/2),i=0;i<n;++i){const n=parseInt(t.substr(2*i,2),16);if(Q(n))return i;e[s+i]=n}return i}function j(e,t,s,n){return Z(G(t,e.length-s),e,s,n)}function w(e,t,s,n){return Z(function(e){const t=[];for(let s=0;s<e.length;++s)t.push(255&e.charCodeAt(s));return t}(t),e,s,n)}function N(e,t,s,n){return Z(K(t),e,s,n)}function S(e,t,s,n){return Z(function(e,t){let s,n,r;const a=[];for(let i=0;i<e.length&&!((t-=2)<0);++i)s=e.charCodeAt(i),n=s>>8,r=s%256,a.push(r),a.push(n);return a}(t,e.length-s),e,s,n)}function k(e,t,s){return 0===t&&s===e.length?n.fromByteArray(e):n.fromByteArray(e.slice(t,s))}function A(e,t,s){s=Math.min(e.length,s);const n=[];let r=t;for(;r<s;){const t=e[r];let a=null,i=t>239?4:t>223?3:t>191?2:1;if(r+i<=s){let s,n,o,l;switch(i){case 1:t<128&&(a=t);break;case 2:s=e[r+1],128===(192&s)&&(l=(31&t)<<6|63&s,l>127&&(a=l));break;case 3:s=e[r+1],n=e[r+2],128===(192&s)&&128===(192&n)&&(l=(15&t)<<12|(63&s)<<6|63&n,l>2047&&(l<55296||l>57343)&&(a=l));break;case 4:s=e[r+1],n=e[r+2],o=e[r+3],128===(192&s)&&128===(192&n)&&128===(192&o)&&(l=(15&t)<<18|(63&s)<<12|(63&n)<<6|63&o,l>65535&&l<1114112&&(a=l))}}null===a?(a=65533,i=1):a>65535&&(a-=65536,n.push(a>>>10&1023|55296),a=56320|1023&a),n.push(a),r+=i}return function(e){const t=e.length;if(t<=_)return String.fromCharCode.apply(String,e);let s="",n=0;for(;n<t;)s+=String.fromCharCode.apply(String,e.slice(n,n+=_));return s}(n)}l.TYPED_ARRAY_SUPPORT=function(){try{const e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),l.TYPED_ARRAY_SUPPORT||"undefined"===typeof console||"function"!==typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(l.prototype,"parent",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.buffer}}),Object.defineProperty(l.prototype,"offset",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.byteOffset}}),l.poolSize=8192,l.from=function(e,t,s){return c(e,t,s)},Object.setPrototypeOf(l.prototype,Uint8Array.prototype),Object.setPrototypeOf(l,Uint8Array),l.alloc=function(e,t,s){return function(e,t,s){return d(e),e<=0?o(e):void 0!==t?"string"===typeof s?o(e).fill(t,s):o(e).fill(t):o(e)}(e,t,s)},l.allocUnsafe=function(e){return u(e)},l.allocUnsafeSlow=function(e){return u(e)},l.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==l.prototype},l.compare=function(e,t){if(J(e,Uint8Array)&&(e=l.from(e,e.offset,e.byteLength)),J(t,Uint8Array)&&(t=l.from(t,t.offset,t.byteLength)),!l.isBuffer(e)||!l.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let s=e.length,n=t.length;for(let r=0,a=Math.min(s,n);r<a;++r)if(e[r]!==t[r]){s=e[r],n=t[r];break}return s<n?-1:n<s?1:0},l.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return l.alloc(0);let s;if(void 0===t)for(t=0,s=0;s<e.length;++s)t+=e[s].length;const n=l.allocUnsafe(t);let r=0;for(s=0;s<e.length;++s){let t=e[s];if(J(t,Uint8Array))r+t.length>n.length?(l.isBuffer(t)||(t=l.from(t)),t.copy(n,r)):Uint8Array.prototype.set.call(n,t,r);else{if(!l.isBuffer(t))throw new TypeError('"list" argument must be an Array of Buffers');t.copy(n,r)}r+=t.length}return n},l.byteLength=f,l.prototype._isBuffer=!0,l.prototype.swap16=function(){const e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)x(this,t,t+1);return this},l.prototype.swap32=function(){const e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)x(this,t,t+3),x(this,t+1,t+2);return this},l.prototype.swap64=function(){const e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)x(this,t,t+7),x(this,t+1,t+6),x(this,t+2,t+5),x(this,t+3,t+4);return this},l.prototype.toString=function(){const e=this.length;return 0===e?"":0===arguments.length?A(this,0,e):g.apply(this,arguments)},l.prototype.toLocaleString=l.prototype.toString,l.prototype.equals=function(e){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===l.compare(this,e)},l.prototype.inspect=function(){let e="";const s=t.IS;return e=this.toString("hex",0,s).replace(/(.{2})/g,"$1 ").trim(),this.length>s&&(e+=" ... "),"<Buffer "+e+">"},a&&(l.prototype[a]=l.prototype.inspect),l.prototype.compare=function(e,t,s,n,r){if(J(e,Uint8Array)&&(e=l.from(e,e.offset,e.byteLength)),!l.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===s&&(s=e?e.length:0),void 0===n&&(n=0),void 0===r&&(r=this.length),t<0||s>e.length||n<0||r>this.length)throw new RangeError("out of range index");if(n>=r&&t>=s)return 0;if(n>=r)return-1;if(t>=s)return 1;if(this===e)return 0;let a=(r>>>=0)-(n>>>=0),i=(s>>>=0)-(t>>>=0);const o=Math.min(a,i),c=this.slice(n,r),d=e.slice(t,s);for(let l=0;l<o;++l)if(c[l]!==d[l]){a=c[l],i=d[l];break}return a<i?-1:i<a?1:0},l.prototype.includes=function(e,t,s){return-1!==this.indexOf(e,t,s)},l.prototype.indexOf=function(e,t,s){return v(this,e,t,s,!0)},l.prototype.lastIndexOf=function(e,t,s){return v(this,e,t,s,!1)},l.prototype.write=function(e,t,s,n){if(void 0===t)n="utf8",s=this.length,t=0;else if(void 0===s&&"string"===typeof t)n=t,s=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(s)?(s>>>=0,void 0===n&&(n="utf8")):(n=s,s=void 0)}const r=this.length-t;if((void 0===s||s>r)&&(s=r),e.length>0&&(s<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");let a=!1;for(;;)switch(n){case"hex":return y(this,e,t,s);case"utf8":case"utf-8":return j(this,e,t,s);case"ascii":case"latin1":case"binary":return w(this,e,t,s);case"base64":return N(this,e,t,s);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,e,t,s);default:if(a)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),a=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const _=4096;function E(e,t,s){let n="";s=Math.min(e.length,s);for(let r=t;r<s;++r)n+=String.fromCharCode(127&e[r]);return n}function C(e,t,s){let n="";s=Math.min(e.length,s);for(let r=t;r<s;++r)n+=String.fromCharCode(e[r]);return n}function P(e,t,s){const n=e.length;(!t||t<0)&&(t=0),(!s||s<0||s>n)&&(s=n);let r="";for(let a=t;a<s;++a)r+=Y[e[a]];return r}function T(e,t,s){const n=e.slice(t,s);let r="";for(let a=0;a<n.length-1;a+=2)r+=String.fromCharCode(n[a]+256*n[a+1]);return r}function I(e,t,s){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>s)throw new RangeError("Trying to access beyond buffer length")}function R(e,t,s,n,r,a){if(!l.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>r||t<a)throw new RangeError('"value" argument is out of bounds');if(s+n>e.length)throw new RangeError("Index out of range")}function D(e,t,s,n,r){q(t,n,r,e,s,7);let a=Number(t&BigInt(4294967295));e[s++]=a,a>>=8,e[s++]=a,a>>=8,e[s++]=a,a>>=8,e[s++]=a;let i=Number(t>>BigInt(32)&BigInt(4294967295));return e[s++]=i,i>>=8,e[s++]=i,i>>=8,e[s++]=i,i>>=8,e[s++]=i,s}function O(e,t,s,n,r){q(t,n,r,e,s,7);let a=Number(t&BigInt(4294967295));e[s+7]=a,a>>=8,e[s+6]=a,a>>=8,e[s+5]=a,a>>=8,e[s+4]=a;let i=Number(t>>BigInt(32)&BigInt(4294967295));return e[s+3]=i,i>>=8,e[s+2]=i,i>>=8,e[s+1]=i,i>>=8,e[s]=i,s+8}function L(e,t,s,n,r,a){if(s+n>e.length)throw new RangeError("Index out of range");if(s<0)throw new RangeError("Index out of range")}function M(e,t,s,n,a){return t=+t,s>>>=0,a||L(e,0,s,4),r.write(e,t,s,n,23,4),s+4}function z(e,t,s,n,a){return t=+t,s>>>=0,a||L(e,0,s,8),r.write(e,t,s,n,52,8),s+8}l.prototype.slice=function(e,t){const s=this.length;(e=~~e)<0?(e+=s)<0&&(e=0):e>s&&(e=s),(t=void 0===t?s:~~t)<0?(t+=s)<0&&(t=0):t>s&&(t=s),t<e&&(t=e);const n=this.subarray(e,t);return Object.setPrototypeOf(n,l.prototype),n},l.prototype.readUintLE=l.prototype.readUIntLE=function(e,t,s){e>>>=0,t>>>=0,s||I(e,t,this.length);let n=this[e],r=1,a=0;for(;++a<t&&(r*=256);)n+=this[e+a]*r;return n},l.prototype.readUintBE=l.prototype.readUIntBE=function(e,t,s){e>>>=0,t>>>=0,s||I(e,t,this.length);let n=this[e+--t],r=1;for(;t>0&&(r*=256);)n+=this[e+--t]*r;return n},l.prototype.readUint8=l.prototype.readUInt8=function(e,t){return e>>>=0,t||I(e,1,this.length),this[e]},l.prototype.readUint16LE=l.prototype.readUInt16LE=function(e,t){return e>>>=0,t||I(e,2,this.length),this[e]|this[e+1]<<8},l.prototype.readUint16BE=l.prototype.readUInt16BE=function(e,t){return e>>>=0,t||I(e,2,this.length),this[e]<<8|this[e+1]},l.prototype.readUint32LE=l.prototype.readUInt32LE=function(e,t){return e>>>=0,t||I(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},l.prototype.readUint32BE=l.prototype.readUInt32BE=function(e,t){return e>>>=0,t||I(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},l.prototype.readBigUInt64LE=$(function(e){V(e>>>=0,"offset");const t=this[e],s=this[e+7];void 0!==t&&void 0!==s||H(e,this.length-8);const n=t+256*this[++e]+65536*this[++e]+this[++e]*2**24,r=this[++e]+256*this[++e]+65536*this[++e]+s*2**24;return BigInt(n)+(BigInt(r)<<BigInt(32))}),l.prototype.readBigUInt64BE=$(function(e){V(e>>>=0,"offset");const t=this[e],s=this[e+7];void 0!==t&&void 0!==s||H(e,this.length-8);const n=t*2**24+65536*this[++e]+256*this[++e]+this[++e],r=this[++e]*2**24+65536*this[++e]+256*this[++e]+s;return(BigInt(n)<<BigInt(32))+BigInt(r)}),l.prototype.readIntLE=function(e,t,s){e>>>=0,t>>>=0,s||I(e,t,this.length);let n=this[e],r=1,a=0;for(;++a<t&&(r*=256);)n+=this[e+a]*r;return r*=128,n>=r&&(n-=Math.pow(2,8*t)),n},l.prototype.readIntBE=function(e,t,s){e>>>=0,t>>>=0,s||I(e,t,this.length);let n=t,r=1,a=this[e+--n];for(;n>0&&(r*=256);)a+=this[e+--n]*r;return r*=128,a>=r&&(a-=Math.pow(2,8*t)),a},l.prototype.readInt8=function(e,t){return e>>>=0,t||I(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},l.prototype.readInt16LE=function(e,t){e>>>=0,t||I(e,2,this.length);const s=this[e]|this[e+1]<<8;return 32768&s?4294901760|s:s},l.prototype.readInt16BE=function(e,t){e>>>=0,t||I(e,2,this.length);const s=this[e+1]|this[e]<<8;return 32768&s?4294901760|s:s},l.prototype.readInt32LE=function(e,t){return e>>>=0,t||I(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},l.prototype.readInt32BE=function(e,t){return e>>>=0,t||I(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},l.prototype.readBigInt64LE=$(function(e){V(e>>>=0,"offset");const t=this[e],s=this[e+7];void 0!==t&&void 0!==s||H(e,this.length-8);const n=this[e+4]+256*this[e+5]+65536*this[e+6]+(s<<24);return(BigInt(n)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*2**24)}),l.prototype.readBigInt64BE=$(function(e){V(e>>>=0,"offset");const t=this[e],s=this[e+7];void 0!==t&&void 0!==s||H(e,this.length-8);const n=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(n)<<BigInt(32))+BigInt(this[++e]*2**24+65536*this[++e]+256*this[++e]+s)}),l.prototype.readFloatLE=function(e,t){return e>>>=0,t||I(e,4,this.length),r.read(this,e,!0,23,4)},l.prototype.readFloatBE=function(e,t){return e>>>=0,t||I(e,4,this.length),r.read(this,e,!1,23,4)},l.prototype.readDoubleLE=function(e,t){return e>>>=0,t||I(e,8,this.length),r.read(this,e,!0,52,8)},l.prototype.readDoubleBE=function(e,t){return e>>>=0,t||I(e,8,this.length),r.read(this,e,!1,52,8)},l.prototype.writeUintLE=l.prototype.writeUIntLE=function(e,t,s,n){if(e=+e,t>>>=0,s>>>=0,!n){R(this,e,t,s,Math.pow(2,8*s)-1,0)}let r=1,a=0;for(this[t]=255&e;++a<s&&(r*=256);)this[t+a]=e/r&255;return t+s},l.prototype.writeUintBE=l.prototype.writeUIntBE=function(e,t,s,n){if(e=+e,t>>>=0,s>>>=0,!n){R(this,e,t,s,Math.pow(2,8*s)-1,0)}let r=s-1,a=1;for(this[t+r]=255&e;--r>=0&&(a*=256);)this[t+r]=e/a&255;return t+s},l.prototype.writeUint8=l.prototype.writeUInt8=function(e,t,s){return e=+e,t>>>=0,s||R(this,e,t,1,255,0),this[t]=255&e,t+1},l.prototype.writeUint16LE=l.prototype.writeUInt16LE=function(e,t,s){return e=+e,t>>>=0,s||R(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},l.prototype.writeUint16BE=l.prototype.writeUInt16BE=function(e,t,s){return e=+e,t>>>=0,s||R(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},l.prototype.writeUint32LE=l.prototype.writeUInt32LE=function(e,t,s){return e=+e,t>>>=0,s||R(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},l.prototype.writeUint32BE=l.prototype.writeUInt32BE=function(e,t,s){return e=+e,t>>>=0,s||R(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},l.prototype.writeBigUInt64LE=$(function(e){return D(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeBigUInt64BE=$(function(e){return O(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeIntLE=function(e,t,s,n){if(e=+e,t>>>=0,!n){const n=Math.pow(2,8*s-1);R(this,e,t,s,n-1,-n)}let r=0,a=1,i=0;for(this[t]=255&e;++r<s&&(a*=256);)e<0&&0===i&&0!==this[t+r-1]&&(i=1),this[t+r]=(e/a|0)-i&255;return t+s},l.prototype.writeIntBE=function(e,t,s,n){if(e=+e,t>>>=0,!n){const n=Math.pow(2,8*s-1);R(this,e,t,s,n-1,-n)}let r=s-1,a=1,i=0;for(this[t+r]=255&e;--r>=0&&(a*=256);)e<0&&0===i&&0!==this[t+r+1]&&(i=1),this[t+r]=(e/a|0)-i&255;return t+s},l.prototype.writeInt8=function(e,t,s){return e=+e,t>>>=0,s||R(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},l.prototype.writeInt16LE=function(e,t,s){return e=+e,t>>>=0,s||R(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},l.prototype.writeInt16BE=function(e,t,s){return e=+e,t>>>=0,s||R(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},l.prototype.writeInt32LE=function(e,t,s){return e=+e,t>>>=0,s||R(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},l.prototype.writeInt32BE=function(e,t,s){return e=+e,t>>>=0,s||R(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},l.prototype.writeBigInt64LE=$(function(e){return D(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),l.prototype.writeBigInt64BE=$(function(e){return O(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),l.prototype.writeFloatLE=function(e,t,s){return M(this,e,t,!0,s)},l.prototype.writeFloatBE=function(e,t,s){return M(this,e,t,!1,s)},l.prototype.writeDoubleLE=function(e,t,s){return z(this,e,t,!0,s)},l.prototype.writeDoubleBE=function(e,t,s){return z(this,e,t,!1,s)},l.prototype.copy=function(e,t,s,n){if(!l.isBuffer(e))throw new TypeError("argument should be a Buffer");if(s||(s=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<s&&(n=s),n===s)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(s<0||s>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-s&&(n=e.length-t+s);const r=n-s;return this===e&&"function"===typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,s,n):Uint8Array.prototype.set.call(e,this.subarray(s,n),t),r},l.prototype.fill=function(e,t,s,n){if("string"===typeof e){if("string"===typeof t?(n=t,t=0,s=this.length):"string"===typeof s&&(n=s,s=this.length),void 0!==n&&"string"!==typeof n)throw new TypeError("encoding must be a string");if("string"===typeof n&&!l.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===e.length){const t=e.charCodeAt(0);("utf8"===n&&t<128||"latin1"===n)&&(e=t)}}else"number"===typeof e?e&=255:"boolean"===typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<s)throw new RangeError("Out of range index");if(s<=t)return this;let r;if(t>>>=0,s=void 0===s?this.length:s>>>0,e||(e=0),"number"===typeof e)for(r=t;r<s;++r)this[r]=e;else{const a=l.isBuffer(e)?e:l.from(e,n),i=a.length;if(0===i)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(r=0;r<s-t;++r)this[r+t]=a[r%i]}return this};const F={};function U(e,t,s){F[e]=class extends s{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name="".concat(this.name," [").concat(e,"]"),this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return"".concat(this.name," [").concat(e,"]: ").concat(this.message)}}}function B(e){let t="",s=e.length;const n="-"===e[0]?1:0;for(;s>=n+4;s-=3)t="_".concat(e.slice(s-3,s)).concat(t);return"".concat(e.slice(0,s)).concat(t)}function q(e,t,s,n,r,a){if(e>s||e<t){const n="bigint"===typeof t?"n":"";let r;throw r=a>3?0===t||t===BigInt(0)?">= 0".concat(n," and < 2").concat(n," ** ").concat(8*(a+1)).concat(n):">= -(2".concat(n," ** ").concat(8*(a+1)-1).concat(n,") and < 2 ** ")+"".concat(8*(a+1)-1).concat(n):">= ".concat(t).concat(n," and <= ").concat(s).concat(n),new F.ERR_OUT_OF_RANGE("value",r,e)}!function(e,t,s){V(t,"offset"),void 0!==e[t]&&void 0!==e[t+s]||H(t,e.length-(s+1))}(n,r,a)}function V(e,t){if("number"!==typeof e)throw new F.ERR_INVALID_ARG_TYPE(t,"number",e)}function H(e,t,s){if(Math.floor(e)!==e)throw V(e,s),new F.ERR_OUT_OF_RANGE(s||"offset","an integer",e);if(t<0)throw new F.ERR_BUFFER_OUT_OF_BOUNDS;throw new F.ERR_OUT_OF_RANGE(s||"offset",">= ".concat(s?1:0," and <= ").concat(t),e)}U("ERR_BUFFER_OUT_OF_BOUNDS",function(e){return e?"".concat(e," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"},RangeError),U("ERR_INVALID_ARG_TYPE",function(e,t){return'The "'.concat(e,'" argument must be of type number. Received type ').concat(typeof t)},TypeError),U("ERR_OUT_OF_RANGE",function(e,t,s){let n='The value of "'.concat(e,'" is out of range.'),r=s;return Number.isInteger(s)&&Math.abs(s)>2**32?r=B(String(s)):"bigint"===typeof s&&(r=String(s),(s>BigInt(2)**BigInt(32)||s<-(BigInt(2)**BigInt(32)))&&(r=B(r)),r+="n"),n+=" It must be ".concat(t,". Received ").concat(r),n},RangeError);const W=/[^+/0-9A-Za-z-_]/g;function G(e,t){let s;t=t||1/0;const n=e.length;let r=null;const a=[];for(let i=0;i<n;++i){if(s=e.charCodeAt(i),s>55295&&s<57344){if(!r){if(s>56319){(t-=3)>-1&&a.push(239,191,189);continue}if(i+1===n){(t-=3)>-1&&a.push(239,191,189);continue}r=s;continue}if(s<56320){(t-=3)>-1&&a.push(239,191,189),r=s;continue}s=65536+(r-55296<<10|s-56320)}else r&&(t-=3)>-1&&a.push(239,191,189);if(r=null,s<128){if((t-=1)<0)break;a.push(s)}else if(s<2048){if((t-=2)<0)break;a.push(s>>6|192,63&s|128)}else if(s<65536){if((t-=3)<0)break;a.push(s>>12|224,s>>6&63|128,63&s|128)}else{if(!(s<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(s>>18|240,s>>12&63|128,s>>6&63|128,63&s|128)}}return a}function K(e){return n.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(W,"")).length<2)return"";for(;e.length%4!==0;)e+="=";return e}(e))}function Z(e,t,s,n){let r;for(r=0;r<n&&!(r+s>=t.length||r>=e.length);++r)t[r+s]=e[r];return r}function J(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function Q(e){return e!==e}const Y=function(){const e="0123456789abcdef",t=new Array(256);for(let s=0;s<16;++s){const n=16*s;for(let r=0;r<16;++r)t[n+r]=e[s]+e[r]}return t}();function $(e){return"undefined"===typeof BigInt?X:e}function X(){throw new Error("BigInt not supported")}},6487:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});const n=(0,s(3797).A)("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]])},6540:(e,t,s)=>{"use strict";s.d(t,{$h:()=>i,CF:()=>f,CI:()=>h,DI:()=>v,E$:()=>y,HW:()=>m,Lb:()=>j,Or:()=>b,Ru:()=>d,a3:()=>S,bk:()=>c,dl:()=>l,eg:()=>p,fI:()=>N,k5:()=>w,kG:()=>x,pU:()=>g,zN:()=>u});var n=s(2555),r=s(6197),a=s(4139);const i=async()=>{try{if(console.log("[TEST] V\xe9rification de la connexion Supabase..."),!r.ND)return console.warn("[TEST] \u26a0\ufe0f Client Supabase non initialis\xe9 - configuration manquante"),{success:!1,error:"Configuration Supabase manquante"};const t=await(0,r.LC)();if(!t.success)throw new Error("Connexion Supabase \xe9chou\xe9e: ".concat(t.error));console.log("[TEST] \u2705 Connexion Supabase OK");const s=["users","otp_codes","loans","payments"];for(const n of s)try{const{error:e}=await r.ND.from(n).select("count").limit(1);e?console.warn("[TEST] \u26a0\ufe0f Table ".concat(n," non accessible:"),e.message):console.log("[TEST] \u2705 Table ".concat(n," accessible"))}catch(e){console.warn("[TEST] \u26a0\ufe0f Table ".concat(n," non accessible:"),e.message)}return{success:!0,message:"Tous les tests de base sont pass\xe9s"}}catch(e){return console.error("[TEST] \u274c Erreur lors des tests:",e.message),{success:!1,error:e.message}}},o=e=>{const t=e.message||e,s=e.details||"",n=e.hint||"",r="".concat(t," ").concat(s," ").concat(n).toLowerCase();return r.includes("phone_number")&&(r.includes("duplicate")||r.includes("unique"))?"Ce num\xe9ro de t\xe9l\xe9phone est d\xe9j\xe0 utilis\xe9 pour cr\xe9er un compte. Veuillez utiliser un autre num\xe9ro de t\xe9l\xe9phone.":r.includes("email")&&(r.includes("duplicate")||r.includes("unique"))?"Cette adresse email est d\xe9j\xe0 utilis\xe9e. Veuillez utiliser une autre adresse email.":r.includes("password")?r.includes("weak")?"Le mot de passe est trop faible. Il doit contenir au moins 6 caract\xe8res.":"Erreur avec le mot de passe. Veuillez v\xe9rifier votre saisie.":r.includes("invalid")?r.includes("email")?"Adresse email invalide. Veuillez v\xe9rifier votre saisie.":r.includes("phone")?"Num\xe9ro de t\xe9l\xe9phone invalide. Veuillez v\xe9rifier votre saisie.":"Donn\xe9es invalides. Veuillez v\xe9rifier vos informations.":r.includes("network")||r.includes("fetch")?"Erreur de connexion. Veuillez v\xe9rifier votre connexion internet et r\xe9essayer.":r.includes("server")||r.includes("500")?"Erreur du serveur. Veuillez r\xe9essayer dans quelques minutes.":r.includes("quota")||r.includes("limit")?"Limite de tentatives atteinte. Veuillez r\xe9essayer plus tard.":r.includes("already registered")?r.includes("phone")?"Un compte existe d\xe9j\xe0 avec ce num\xe9ro de t\xe9l\xe9phone.":r.includes("email")?"Un compte existe d\xe9j\xe0 avec cette adresse email.":"Un compte existe d\xe9j\xe0 avec ces informations.":r.includes("user already registered")?r.includes("phone")?"Un utilisateur existe d\xe9j\xe0 avec ce num\xe9ro de t\xe9l\xe9phone.":r.includes("email")?"Un utilisateur existe d\xe9j\xe0 avec cette adresse email.":"Un utilisateur avec ces informations existe d\xe9j\xe0.":t},l=async(e,t,s)=>{if(!r.ND)return console.error("[SUPABASE] Client non initialis\xe9 - configuration manquante"),{success:!1,error:"Configuration Supabase manquante"};try{const n=e.replace(/[^0-9]/g,"");if(n.length<8)throw new Error("Num\xe9ro de t\xe9l\xe9phone invalide");let a;if(console.log("[SUPABASE] userData re\xe7u:",s),console.log("[SUPABASE] Email fourni:",s.email),s.email&&s.email.trim())a=s.email.trim(),console.log("[SUPABASE] \u2705 Utilisation email fourni: ".concat(a));else{const e=Date.now();a="user.".concat(n,".").concat(e,"@gmail.com"),console.log("[SUPABASE] \u26a0\ufe0f Cr\xe9ation email temporaire: ".concat(a))}console.log("[SUPABASE] Cr\xe9ation utilisateur avec email: ".concat(a));const{data:i,error:l}=await r.ND.auth.signUp({email:a,password:t,options:{data:{first_name:s.firstName,last_name:s.lastName,phone_number:e,role:"client"}}});if(l)throw console.error("[SUPABASE] Erreur Auth:",l),new Error(o(l));const{error:c}=await r.ND.from("users").insert([{id:i.user.id,phone_number:e,email:a,first_name:s.firstName,last_name:s.lastName,role:"client",status:"approved"}]);if(c)throw console.error("[SUPABASE] Erreur insertion utilisateur:",c),new Error(o(c));return console.log("[SUPABASE] \u2705 Utilisateur cr\xe9\xe9: ".concat(s.firstName," ").concat(s.lastName," (").concat(e,")")),{success:!0,user:i.user}}catch(n){console.error("[SUPABASE] Erreur lors de l'inscription:",n.message);return{success:!1,error:o(n)}}},c=async(e,t,s)=>{if(!r.ND)return console.error("[SUPABASE] Client non initialis\xe9 - configuration manquante"),{success:!1,error:"Configuration Supabase manquante"};try{const{data:n,error:a}=await r.ND.auth.signUp({email:e,password:t,options:{data:{first_name:s.firstName,last_name:s.lastName,phone_number:s.phoneNumber||"",role:"client"}}});if(a)throw console.error("[SUPABASE] Erreur Auth:",a),new Error(o(a));const{error:i}=await r.ND.from("users").insert([{id:n.user.id,email:e,phone_number:s.phoneNumber||"",first_name:s.firstName,last_name:s.lastName,role:"client",status:"approved"}]);if(i)throw console.error("[SUPABASE] Erreur insertion utilisateur:",i),new Error(o(i));return s.phoneNumber&&console.log("[SUPABASE] \u2705 Utilisateur cr\xe9\xe9: ".concat(s.firstName," ").concat(s.lastName," (").concat(s.phoneNumber,")")),{success:!0,user:n.user}}catch(n){console.error("[SUPABASE] Erreur lors de l'inscription:",n.message);return{success:!1,error:o(n)}}},d=async(e,t)=>{if(!r.ND)return console.error("[SUPABASE] Client non initialis\xe9 - configuration manquante"),{success:!1,error:"Configuration Supabase manquante"};try{var s,a,i,l;console.log("[SUPABASE] Tentative de connexion avec email:",e);const{data:p,error:f}=await r.ND.auth.signInWithPassword({email:e,password:t});if(f)throw console.error("[SUPABASE] Erreur d'authentification:",f.message),new Error(o(f));if(!p.user)throw new Error("Aucun utilisateur retourn\xe9 apr\xe8s authentification");console.log("[SUPABASE] Authentification r\xe9ussie pour:",p.user.email);let g=null,x=null;try{const e=r.ND.from("users").select("*").eq("id",p.user.id).single(),t=new Promise((e,t)=>setTimeout(()=>t(new Error("Timeout: r\xe9cup\xe9ration des donn\xe9es utilisateur")),5e3)),s=await Promise.race([e,t]);g=s.data,x=s.error,x&&console.warn("[SUPABASE] Erreur r\xe9cup\xe9ration table users:",x.message,x.code)}catch(m){console.warn("[SUPABASE] Erreur/timeout lors de la r\xe9cup\xe9ration utilisateur:",m.message),x={message:m.message}}if(x||!g){var c,d,u,h;console.log("[SUPABASE] Utilisation des donn\xe9es auth (RLS peut bloquer l'acc\xe8s \xe0 la table users)");const e=(0,n.A)((0,n.A)({},p.user),{},{role:(null===(c=p.user.user_metadata)||void 0===c?void 0:c.role)||(null===(d=p.user.app_metadata)||void 0===d?void 0:d.role)||"client",first_name:(null===(u=p.user.user_metadata)||void 0===u?void 0:u.first_name)||"",last_name:(null===(h=p.user.user_metadata)||void 0===h?void 0:h.last_name)||"",status:"approved"});return console.log("[SUPABASE] Utilisateur retourn\xe9 (depuis auth):",{id:e.id,email:e.email,role:e.role}),{success:!0,user:e}}const v=(0,n.A)((0,n.A)({},p.user),{},{role:g.role||(null===(s=p.user.user_metadata)||void 0===s?void 0:s.role)||(null===(a=p.user.app_metadata)||void 0===a?void 0:a.role)||"client",first_name:g.first_name||(null===(i=p.user.user_metadata)||void 0===i?void 0:i.first_name)||"",last_name:g.last_name||(null===(l=p.user.user_metadata)||void 0===l?void 0:l.last_name)||"",phone_number:g.phone_number||"",status:g.status||"approved"});return console.log("[SUPABASE] Utilisateur complet r\xe9cup\xe9r\xe9:",{id:v.id,email:v.email,role:v.role,status:v.status}),{success:!0,user:v}}catch(m){return console.error("[SUPABASE] Erreur lors de la connexion:",m.message),{success:!1,error:m.message}}},u=async(e,t)=>{if(!r.ND)return console.error("[SUPABASE] Client non initialis\xe9 - configuration manquante"),{success:!1,error:"Configuration Supabase manquante"};try{console.log("[SUPABASE] Tentative de connexion avec t\xe9l\xe9phone:",e);const{data:s,error:a}=await r.ND.from("users").select("*").eq("phone_number",e).single();if(a||!s)return console.error("[SUPABASE] Utilisateur non trouv\xe9 pour le t\xe9l\xe9phone:",e,a),{success:!1,error:"Aucun utilisateur trouv\xe9 avec ce num\xe9ro de t\xe9l\xe9phone"};if(console.log("[SUPABASE] Utilisateur trouv\xe9 dans la table users:",{id:s.id,email:s.email,phone_number:s.phone_number,role:s.role,status:s.status}),"approved"!==s.status)return console.error("[SUPABASE] Utilisateur non approuv\xe9, statut:",s.status),{success:!1,error:"Votre compte n'est pas encore approuv\xe9"};if(!s.email)return console.error("[SUPABASE] Utilisateur sans email"),{success:!1,error:"Votre compte n'a pas d'email configur\xe9. Contactez l'administrateur."};console.log("[SUPABASE] Tentative de connexion avec email:",s.email);const{data:i,error:l}=await r.ND.auth.signInWithPassword({email:s.email,password:t});if(l){if(console.error("[SUPABASE] Erreur d'authentification:",l.message),l.message.includes("Invalid login credentials"))return{success:!1,error:"Identifiants incorrects. V\xe9rifiez votre num\xe9ro de t\xe9l\xe9phone et mot de passe."};throw new Error(o(l))}if(!i.user)throw new Error("Aucun utilisateur retourn\xe9 apr\xe8s authentification");console.log("[SUPABASE] \u2705 Connexion r\xe9ussie");return{success:!0,user:(0,n.A)((0,n.A)({},i.user),{},{role:s.role||"client",first_name:s.first_name||"",last_name:s.last_name||"",phone_number:s.phone_number||"",status:s.status||"approved"})}}catch(s){console.error("[SUPABASE] Erreur lors de la connexion (t\xe9l\xe9phone):",s.message);return{success:!1,error:o(s)}}},h=async()=>{try{const{error:e}=await r.ND.auth.signOut();if(e)throw new Error(o(e));return{success:!0}}catch(e){console.error("[SUPABASE] Erreur lors de la d\xe9connexion:",e.message);return{success:!1,error:o(e)}}},m=async()=>{try{var e,t;const{data:{user:a},error:i}=await r.ND.auth.getUser();if(i)throw i;if(!a)return{success:!1,error:"Utilisateur non connect\xe9"};let o=null;try{const{data:e,error:t}=await r.ND.from("users").select("*").eq("id",a.id).single();if(t)throw t;o=e}catch(s){console.warn("[SUPABASE] Lecture de public.users indisponible pour cet utilisateur:",s.message)}return{success:!0,user:(0,n.A)((0,n.A)((0,n.A)({},a),o||{}),{},{role:o&&o.role||(null===a||void 0===a||null===(e=a.user_metadata)||void 0===e?void 0:e.role)||(null===a||void 0===a||null===(t=a.app_metadata)||void 0===t?void 0:t.role)||"client"})}}catch(a){return console.error("[SUPABASE] Erreur lors de la r\xe9cup\xe9ration utilisateur:",a.message),{success:!1,error:a.message}}},p=async(e,t)=>{try{console.log("[PROFILE] Mise \xe0 jour du profil utilisateur:",e,t);const s={updated_at:(new Date).toISOString()};t.firstName&&(s.first_name=t.firstName),t.lastName&&(s.last_name=t.lastName),t.phone&&(s.phone_number=t.phone),t.email&&(s.email=t.email),t.filiere&&(s.filiere=t.filiere),t.annee_etude&&(s.annee_etude=t.annee_etude),t.entite&&(s.entite=t.entite),t.facebook_name&&(s.facebook_name=t.facebook_name),t.temoin_name&&(s.temoin_name=t.temoin_name),t.temoin_quartier&&(s.temoin_quartier=t.temoin_quartier),t.temoin_phone&&(s.temoin_phone=t.temoin_phone),t.temoin_email&&(s.temoin_email=t.temoin_email),t.emergency_name&&(s.emergency_name=t.emergency_name),t.emergency_relation&&(s.emergency_relation=t.emergency_relation),t.emergency_phone&&(s.emergency_phone=t.emergency_phone),t.emergency_email&&(s.emergency_email=t.emergency_email),t.emergency_address&&(s.emergency_address=t.emergency_address),t.user_identity_card_name&&(s.user_identity_card_name=t.user_identity_card_name),t.temoin_identity_card_name&&(s.temoin_identity_card_name=t.temoin_identity_card_name),t.student_card_name&&(s.student_card_name=t.student_card_name),t.user_identity_card_url&&(s.user_identity_card_url=t.user_identity_card_url),t.temoin_identity_card_url&&(s.temoin_identity_card_url=t.temoin_identity_card_url),t.student_card_url&&(s.student_card_url=t.student_card_url);const{error:n}=await r.ND.from("users").update(s).eq("id",e);if(n)throw console.error("[PROFILE] Erreur mise \xe0 jour table users:",n),n;if(t.firstName||t.lastName||t.phone){const e={};t.firstName&&(e.first_name=t.firstName),t.lastName&&(e.last_name=t.lastName),t.phone&&(e.phone_number=t.phone);const{error:s}=await r.ND.auth.updateUser({data:e});if(s)throw console.error("[PROFILE] Erreur mise \xe0 jour m\xe9tadonn\xe9es auth:",s),s}return console.log("[PROFILE] \u2705 Profil mis \xe0 jour avec succ\xe8s"),{success:!0}}catch(s){return console.error("[PROFILE] \u274c Erreur lors de la mise \xe0 jour du profil:",s.message),{success:!1,error:s.message}}},f=async()=>{try{const{data:e,error:t}=await r.ND.from("users").select("*").order("created_at",{ascending:!1});if(t)throw t;const{data:s,error:a}=await r.ND.from("loans").select("id, user_id, status, amount").order("created_at",{ascending:!1});if(a)throw a;return{success:!0,data:e.map(e=>{const t=s.filter(t=>t.user_id===e.id),r=t.length,a=t.filter(e=>"approved"===e.status||"active"===e.status).length,i=t.reduce((e,t)=>e+(t.amount||0),0);return(0,n.A)((0,n.A)({},e),{},{totalLoans:r,activeLoans:a,totalAmount:i})})}}catch(e){return console.error("[SUPABASE] Erreur lors de la r\xe9cup\xe9ration des utilisateurs:",e.message),{success:!1,error:e.message}}},g=async(e,t)=>{try{const{data:s,error:n}=await r.ND.from("users").update({status:t,updated_at:(new Date).toISOString()}).eq("id",e).select().single();if(n)throw n;return{success:!0,data:s}}catch(s){return console.error("[SUPABASE] Erreur lors de la mise \xe0 jour du statut utilisateur:",s.message),{success:!1,error:s.message}}},x=async e=>{try{const t=await fetch("".concat(a.f,"/api/admin/delete-user/").concat(e),{method:"DELETE",headers:{"Content-Type":"application/json"}}),s=await t.json();if(!t.ok)throw new Error(s.error||"Erreur lors de la suppression");return console.log("[DELETE_USER] \u2705 Utilisateur supprim\xe9:",s.message),{success:!0,message:s.message}}catch(t){return console.error("[DELETE_USER] \u274c Erreur:",t.message),{success:!1,error:t.message}}},v=async e=>{try{console.log("[SUPABASE] Tentative de cr\xe9ation du pr\xeat avec:",e);const{data:s,error:n}=await r.ND.from("loans").insert([e]).select("\n        *,\n        users!inner(id, first_name, last_name)\n      ").single();if(n)throw console.error("[SUPABASE] Erreur Supabase:",n),n;if(console.log("[SUPABASE] Pr\xeat cr\xe9\xe9 avec succ\xe8s:",s),s&&s.users)try{const e="".concat(s.users.first_name," ").concat(s.users.last_name);console.log("[ADMIN_NOTIFICATION] \ud83d\udce2 Envoi notification \xe0 l'admin...",{backendUrl:a.f,loanId:s.id,loanAmount:s.amount,clientName:e});const t=await fetch("".concat(a.f,"/api/notify-admin-new-loan"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({loanAmount:s.amount,clientName:e,loanId:s.id})}),n=await t.json();t.ok?(console.log("[ADMIN_NOTIFICATION] \u2705 R\xe9ponse backend:",n),n.fcmSent?console.log("[ADMIN_NOTIFICATION] \u2705 Notification FCM envoy\xe9e \xe0 l'admin"):console.warn("[ADMIN_NOTIFICATION] \u26a0\ufe0f Notification cr\xe9\xe9e dans la DB mais FCM non envoy\xe9:",n.fcmError||"Admin sans token FCM")):console.error("[ADMIN_NOTIFICATION] \u274c Erreur backend:",n)}catch(t){console.error("[ADMIN_NOTIFICATION] \u274c Erreur lors de l'envoi de la notification:",t)}else console.warn("[ADMIN_NOTIFICATION] \u26a0\ufe0f Donn\xe9es utilisateur manquantes, notification admin non envoy\xe9e");return{success:!0,data:s}}catch(s){return console.error("[SUPABASE] Erreur lors de la cr\xe9ation du pr\xeat:",s),console.error("[SUPABASE] D\xe9tails de l'erreur:",{message:s.message,details:s.details,hint:s.hint,code:s.code}),{success:!1,error:s.message}}},b=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;try{let t=r.ND.from("loans").select("\n        *,\n        users (\n          id,\n          first_name,\n          last_name,\n          email,\n          phone_number,\n          filiere,\n          annee_etude,\n          entite,\n          address,\n          facebook_name,\n          temoin_name,\n          temoin_quartier,\n          temoin_phone,\n          temoin_email,\n          emergency_name,\n          emergency_relation,\n          emergency_phone,\n          emergency_email,\n          emergency_address,\n          user_identity_card_name,\n          temoin_identity_card_name,\n          student_card_name,\n          user_identity_card_url,\n          temoin_identity_card_url,\n          student_card_url\n        )\n      ").order("created_at",{ascending:!1});e&&(t=t.eq("user_id",e));const{data:s,error:n}=await t;if(n)throw n;return{success:!0,data:s}}catch(t){return console.error("[SUPABASE] Erreur lors de la r\xe9cup\xe9ration des pr\xeats:",t.message),{success:!1,error:t.message}}},y=async function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;try{console.log("[UPDATE_LOAN_STATUS] \ud83d\udcdd Mise \xe0 jour du pr\xeat:",{loanId:e,status:t,adminId:s});const l=["pending","approved","active","completed","rejected"];if(!l.includes(t))throw new Error("Statut invalide: ".concat(t,". Statuts autoris\xe9s: ").concat(l.join(", ")));const c={status:t,updated_at:(new Date).toISOString()};"approved"===t&&(c.status="active",c.approved_by=s,c.approved_at=(new Date).toISOString()),console.log("[UPDATE_LOAN_STATUS] \ud83d\udd04 Donn\xe9es \xe0 mettre \xe0 jour:",c);const{data:d,error:u}=await r.ND.from("loans").update(c).eq("id",e).select("\n        *,\n        users!inner(id, first_name, last_name)\n      ").single();if(u){var n;if(console.error("[UPDATE_LOAN_STATUS] \u274c Erreur Supabase:",{message:u.message,details:u.details,hint:u.hint,code:u.code}),"23514"===u.code||null!==(n=u.message)&&void 0!==n&&n.includes("check constraint"))throw new Error("La base de donn\xe9es n'autorise pas le statut \"".concat(t,"\". Veuillez contacter l'administrateur pour mettre \xe0 jour la contrainte."));throw u}if(console.log("[UPDATE_LOAN_STATUS] \u2705 Pr\xeat mis \xe0 jour avec succ\xe8s:",d),d&&("approved"===t||"rejected"===t))try{const e="approved"===t,s=e?"approbation":"refus";console.log("[LOAN_".concat(s.toUpperCase(),"] Syst\xe8me hybride de notifications..."));const{error:n}=await r.ND.from("notifications").insert({user_id:d.user_id,title:e?"Pr\xeat approuv\xe9 ! \ud83c\udf89":"Demande de pr\xeat refus\xe9e",message:"Votre demande de pr\xeat de ".concat(parseInt(d.amount).toLocaleString(),e?" FCFA a \xe9t\xe9 approuv\xe9e. Vous pouvez maintenant effectuer votre premier remboursement.":" FCFA a \xe9t\xe9 refus\xe9e. Contactez l'administration pour plus d'informations."),type:"loan_status",data:{loan_id:d.id,loan_amount:d.amount,status:e?"approved":"rejected",action:e?"approved":"rejected"},read:!1});n?console.error("[LOAN_".concat(s.toUpperCase(),"] \u274c Erreur cr\xe9ation notification DB:"),n):console.log("[LOAN_".concat(s.toUpperCase(),"] \u2705 Notification in-app cr\xe9\xe9e (TOUJOURS disponible)"));try{(await fetch("".concat(a.f,"/api/notify-loan-").concat(s),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:d.user_id,loanAmount:d.amount,loanId:d.id,status:e?"approved":"rejected"})})).ok?console.log("[LOAN_".concat(s.toUpperCase(),"] \u2705 Notification push envoy\xe9e (utilisateur hors ligne notifi\xe9)")):console.log("[LOAN_".concat(s.toUpperCase(),"] \u26a0\ufe0f Push \xe9chou\xe9 mais notification in-app disponible"))}catch(i){console.log("[LOAN_".concat(s.toUpperCase(),"] \u26a0\ufe0f Push non disponible mais notification in-app cr\xe9\xe9e"))}console.log("[LOAN_".concat(s.toUpperCase(),"] \ud83c\udfaf Syst\xe8me hybride : Notification garantie (in-app + push si disponible)"))}catch(o){console.error("[LOAN_NOTIFICATION] \u274c Erreur syst\xe8me de notifications:",o)}return{success:!0,data:d}}catch(l){console.error("[UPDATE_LOAN_STATUS] \u274c Erreur lors de la mise \xe0 jour du pr\xeat:",l);return{success:!1,error:l.message||"Erreur lors de la mise \xe0 jour du statut du pr\xeat"}}},j=async e=>{try{const t=e.fedapay_transaction_id||e.transaction_id;if(t){const{data:e}=await r.ND.from("payments").select("id").or("fedapay_transaction_id.eq.".concat(t,",transaction_id.eq.").concat(t)).maybeSingle();if(e){console.log("[SUPABASE] \u26a0\ufe0f Paiement d\xe9j\xe0 existant, \xe9vite le doublon:",{payment_id:e.id,transaction_id:t});const{data:s}=await r.ND.from("payments").select("*").eq("id",e.id).single();return{success:!0,data:s,isDuplicate:!0}}}const{data:s,error:n}=await r.ND.from("payments").insert([e]).select().single();if(n)throw n;return{success:!0,data:s}}catch(t){return console.error("[SUPABASE] Erreur lors de la cr\xe9ation du paiement:",t.message),{success:!1,error:t.message}}},w=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;try{let t=r.ND.from("payments").select("\n        *,\n        loans (\n          id,\n          amount,\n          purpose,\n          interest_rate,\n          status,\n          approved_at,\n          created_at,\n          users (\n            id,\n            first_name,\n            last_name,\n            email,\n            phone_number\n          )\n        ),\n        users (\n          id,\n          first_name,\n          last_name,\n          email,\n          phone_number\n        )\n      ").order("created_at",{ascending:!1});e&&(t=t.eq("user_id",e));const{data:s,error:n}=await t;if(n)throw n;return{success:!0,data:s}}catch(t){return console.error("[SUPABASE] Erreur lors de la r\xe9cup\xe9ration des paiements:",t.message),{success:!1,error:t.message}}},N=async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{const s=await fetch("".concat(a.f,"/api/loyalty-popup-check?userId=").concat(e,"&isAdmin=").concat(t)),n=await s.json();if(!s.ok)throw new Error(n.error||"Erreur lors de la v\xe9rification du popup");return n}catch(s){return console.error("[SUPABASE] Erreur lors de la v\xe9rification du popup de fid\xe9lit\xe9:",s.message),{success:!1,showPopup:!1,error:s.message}}},S=async e=>{try{const t=await fetch("".concat(a.f,"/api/loyalty-reset-counter"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e})}),s=await t.json();if(!t.ok)throw new Error(s.error||"Erreur lors de la r\xe9initialisation du compteur");return s}catch(t){return console.error("[SUPABASE] Erreur lors de la r\xe9initialisation du compteur:",t.message),{success:!1,error:t.message}}}},6852:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});const n=(0,s(3797).A)("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]])},6900:(e,t)=>{t.read=function(e,t,s,n,r){var a,i,o=8*r-n-1,l=(1<<o)-1,c=l>>1,d=-7,u=s?r-1:0,h=s?-1:1,m=e[t+u];for(u+=h,a=m&(1<<-d)-1,m>>=-d,d+=o;d>0;a=256*a+e[t+u],u+=h,d-=8);for(i=a&(1<<-d)-1,a>>=-d,d+=n;d>0;i=256*i+e[t+u],u+=h,d-=8);if(0===a)a=1-c;else{if(a===l)return i?NaN:1/0*(m?-1:1);i+=Math.pow(2,n),a-=c}return(m?-1:1)*i*Math.pow(2,a-n)},t.write=function(e,t,s,n,r,a){var i,o,l,c=8*a-r-1,d=(1<<c)-1,u=d>>1,h=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,m=n?0:a-1,p=n?1:-1,f=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(o=isNaN(t)?1:0,i=d):(i=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-i))<1&&(i--,l*=2),(t+=i+u>=1?h/l:h*Math.pow(2,1-u))*l>=2&&(i++,l/=2),i+u>=d?(o=0,i=d):i+u>=1?(o=(t*l-1)*Math.pow(2,r),i+=u):(o=t*Math.pow(2,u-1)*Math.pow(2,r),i=0));r>=8;e[s+m]=255&o,m+=p,o/=256,r-=8);for(i=i<<r|o,c+=r;c>0;e[s+m]=255&i,m+=p,i/=256,c-=8);e[s+m-p]|=128*f}},7234:(e,t)=>{"use strict";function s(e,t){var s=e.length;e.push(t);e:for(;0<s;){var n=s-1>>>1,r=e[n];if(!(0<a(r,t)))break e;e[n]=t,e[s]=r,s=n}}function n(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],s=e.pop();if(s!==t){e[0]=s;e:for(var n=0,r=e.length,i=r>>>1;n<i;){var o=2*(n+1)-1,l=e[o],c=o+1,d=e[c];if(0>a(l,s))c<r&&0>a(d,l)?(e[n]=d,e[c]=s,n=c):(e[n]=l,e[o]=s,n=o);else{if(!(c<r&&0>a(d,s)))break e;e[n]=d,e[c]=s,n=c}}}return t}function a(e,t){var s=e.sortIndex-t.sortIndex;return 0!==s?s:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],d=[],u=1,h=null,m=3,p=!1,f=!1,g=!1,x="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function y(e){for(var t=n(d);null!==t;){if(null===t.callback)r(d);else{if(!(t.startTime<=e))break;r(d),t.sortIndex=t.expirationTime,s(c,t)}t=n(d)}}function j(e){if(g=!1,y(e),!f)if(null!==n(c))f=!0,R(w);else{var t=n(d);null!==t&&D(j,t.startTime-e)}}function w(e,s){f=!1,g&&(g=!1,v(A),A=-1),p=!0;var a=m;try{for(y(s),h=n(c);null!==h&&(!(h.expirationTime>s)||e&&!C());){var i=h.callback;if("function"===typeof i){h.callback=null,m=h.priorityLevel;var o=i(h.expirationTime<=s);s=t.unstable_now(),"function"===typeof o?h.callback=o:h===n(c)&&r(c),y(s)}else r(c);h=n(c)}if(null!==h)var l=!0;else{var u=n(d);null!==u&&D(j,u.startTime-s),l=!1}return l}finally{h=null,m=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var N,S=!1,k=null,A=-1,_=5,E=-1;function C(){return!(t.unstable_now()-E<_)}function P(){if(null!==k){var e=t.unstable_now();E=e;var s=!0;try{s=k(!0,e)}finally{s?N():(S=!1,k=null)}}else S=!1}if("function"===typeof b)N=function(){b(P)};else if("undefined"!==typeof MessageChannel){var T=new MessageChannel,I=T.port2;T.port1.onmessage=P,N=function(){I.postMessage(null)}}else N=function(){x(P,0)};function R(e){k=e,S||(S=!0,N())}function D(e,s){A=x(function(){e(t.unstable_now())},s)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){f||p||(f=!0,R(w))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(e){switch(m){case 1:case 2:case 3:var t=3;break;default:t=m}var s=m;m=t;try{return e()}finally{m=s}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var s=m;m=e;try{return t()}finally{m=s}},t.unstable_scheduleCallback=function(e,r,a){var i=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?i+a:i:a=i,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:u++,callback:r,priorityLevel:e,startTime:a,expirationTime:o=a+o,sortIndex:-1},a>i?(e.sortIndex=a,s(d,e),null===n(c)&&e===n(d)&&(g?(v(A),A=-1):g=!0,D(j,a-i))):(e.sortIndex=o,s(c,e),f||p||(f=!0,R(w))),e},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(e){var t=m;return function(){var s=m;m=t;try{return e.apply(this,arguments)}finally{m=s}}}},7374:function(e,t,s){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(s(9286));class a extends r.default{select(e){let t=!1;const s=(null!==e&&void 0!==e?e:"*").split("").map(e=>/\s/.test(e)&&!t?"":('"'===e&&(t=!t),e)).join("");return this.url.searchParams.set("select",s),this.headers.append("Prefer","return=representation"),this}order(e){let{ascending:t=!0,nullsFirst:s,foreignTable:n,referencedTable:r=n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const a=r?"".concat(r,".order"):"order",i=this.url.searchParams.get(a);return this.url.searchParams.set(a,"".concat(i?"".concat(i,","):"").concat(e,".").concat(t?"asc":"desc").concat(void 0===s?"":s?".nullsfirst":".nullslast")),this}limit(e){let{foreignTable:t,referencedTable:s=t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n="undefined"===typeof s?"limit":"".concat(s,".limit");return this.url.searchParams.set(n,"".concat(e)),this}range(e,t){let{foreignTable:s,referencedTable:n=s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r="undefined"===typeof n?"offset":"".concat(n,".offset"),a="undefined"===typeof n?"limit":"".concat(n,".limit");return this.url.searchParams.set(r,"".concat(e)),this.url.searchParams.set(a,"".concat(t-e+1)),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return"GET"===this.method?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain(){let{analyze:e=!1,verbose:t=!1,settings:s=!1,buffers:n=!1,wal:r=!1,format:a="text"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var i;const o=[e?"analyze":null,t?"verbose":null,s?"settings":null,n?"buffers":null,r?"wal":null].filter(Boolean).join("|"),l=null!==(i=this.headers.get("Accept"))&&void 0!==i?i:"application/json";return this.headers.set("Accept","application/vnd.pgrst.plan+".concat(a,'; for="').concat(l,'"; options=').concat(o,";")),this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer","max-affected=".concat(e)),this}}t.default=a},7528:(e,t,s)=>{"use strict";function n(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}s.d(t,{A:()=>n})},7607:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});const n=(0,s(3797).A)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},7950:(e,t,s)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=s(2730)},7980:function(e,t,s){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.PostgrestError=t.PostgrestBuilder=t.PostgrestTransformBuilder=t.PostgrestFilterBuilder=t.PostgrestQueryBuilder=t.PostgrestClient=void 0;const r=n(s(1210));t.PostgrestClient=r.default;const a=n(s(8829));t.PostgrestQueryBuilder=a.default;const i=n(s(5736));t.PostgrestFilterBuilder=i.default;const o=n(s(7374));t.PostgrestTransformBuilder=o.default;const l=n(s(9286));t.PostgrestBuilder=l.default;const c=n(s(2611));t.PostgrestError=c.default,t.default={PostgrestClient:r.default,PostgrestQueryBuilder:a.default,PostgrestFilterBuilder:i.default,PostgrestTransformBuilder:o.default,PostgrestBuilder:l.default,PostgrestError:c.default}},8829:function(e,t,s){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(s(5736));t.default=class{constructor(e,t){let{headers:s={},schema:n,fetch:r}=t;this.url=e,this.headers=new Headers(s),this.schema=n,this.fetch=r}select(e){let{head:t=!1,count:s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=t?"HEAD":"GET";let a=!1;const i=(null!==e&&void 0!==e?e:"*").split("").map(e=>/\s/.test(e)&&!a?"":('"'===e&&(a=!a),e)).join("");return this.url.searchParams.set("select",i),s&&this.headers.append("Prefer","count=".concat(s)),new r.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e){let{count:t,defaultToNull:s=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n;if(t&&this.headers.append("Prefer","count=".concat(t)),s||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){const e=[...new Set(t)].map(e=>'"'.concat(e,'"'));this.url.searchParams.set("columns",e.join(","))}}return new r.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!==(n=this.fetch)&&void 0!==n?n:fetch})}upsert(e){let{onConflict:t,ignoreDuplicates:s=!1,count:n,defaultToNull:a=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var i;if(this.headers.append("Prefer","resolution=".concat(s?"ignore":"merge","-duplicates")),void 0!==t&&this.url.searchParams.set("on_conflict",t),n&&this.headers.append("Prefer","count=".concat(n)),a||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){const e=[...new Set(t)].map(e=>'"'.concat(e,'"'));this.url.searchParams.set("columns",e.join(","))}}return new r.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!==(i=this.fetch)&&void 0!==i?i:fetch})}update(e){let{count:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var s;return t&&this.headers.append("Prefer","count=".concat(t)),new r.default({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!==(s=this.fetch)&&void 0!==s?s:fetch})}delete(){let{count:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t;return e&&this.headers.append("Prefer","count=".concat(e)),new r.default({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:null!==(t=this.fetch)&&void 0!==t?t:fetch})}}},8853:(e,t,s)=>{"use strict";e.exports=s(7234)},9120:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});const n=(0,s(3797).A)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},9286:function(e,t,s){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(s(4630)),a=n(s(2611));t.default=class{constructor(e){var t,s;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=null!==(t=e.shouldThrowOnError)&&void 0!==t&&t,this.signal=e.signal,this.isMaybeSingle=null!==(s=e.isMaybeSingle)&&void 0!==s&&s,e.fetch?this.fetch=e.fetch:"undefined"===typeof fetch?this.fetch=r.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),"GET"!==this.method&&"HEAD"!==this.method&&this.headers.set("Content-Type","application/json");let s=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async e=>{var t,s,n,r;let i=null,o=null,l=null,c=e.status,d=e.statusText;if(e.ok){if("HEAD"!==this.method){const s=await e.text();""===s||(o="text/csv"===this.headers.get("Accept")||this.headers.get("Accept")&&(null===(t=this.headers.get("Accept"))||void 0===t?void 0:t.includes("application/vnd.pgrst.plan+text"))?s:JSON.parse(s))}const r=null===(s=this.headers.get("Prefer"))||void 0===s?void 0:s.match(/count=(exact|planned|estimated)/),a=null===(n=e.headers.get("content-range"))||void 0===n?void 0:n.split("/");r&&a&&a.length>1&&(l=parseInt(a[1])),this.isMaybeSingle&&"GET"===this.method&&Array.isArray(o)&&(o.length>1?(i={code:"PGRST116",details:"Results contain ".concat(o.length," rows, application/vnd.pgrst.object+json requires 1 row"),hint:null,message:"JSON object requested, multiple (or no) rows returned"},o=null,l=null,c=406,d="Not Acceptable"):o=1===o.length?o[0]:null)}else{const t=await e.text();try{i=JSON.parse(t),Array.isArray(i)&&404===e.status&&(o=[],i=null,c=200,d="OK")}catch(u){404===e.status&&""===t?(c=204,d="No Content"):i={message:t}}if(i&&this.isMaybeSingle&&(null===(r=null===i||void 0===i?void 0:i.details)||void 0===r?void 0:r.includes("0 rows"))&&(i=null,c=200,d="OK"),i&&this.shouldThrowOnError)throw new a.default(i)}return{error:i,data:o,count:l,status:c,statusText:d}});return this.shouldThrowOnError||(s=s.catch(e=>{var t,s,n;return{error:{message:"".concat(null!==(t=null===e||void 0===e?void 0:e.name)&&void 0!==t?t:"FetchError",": ").concat(null===e||void 0===e?void 0:e.message),details:"".concat(null!==(s=null===e||void 0===e?void 0:e.stack)&&void 0!==s?s:""),hint:"",code:"".concat(null!==(n=null===e||void 0===e?void 0:e.code)&&void 0!==n?n:"")},data:null,count:null,status:0,statusText:""}})),s.then(e,t)}returns(){return this}overrideTypes(){return this}}}},t={};function s(n){var r=t[n];if(void 0!==r)return r.exports;var a=t[n]={id:n,loaded:!1,exports:{}};return e[n].call(a.exports,a,a.exports,s),a.loaded=!0,a.exports}s.m=e,s.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return s.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;s.t=function(n,r){if(1&r&&(n=this(n)),8&r)return n;if("object"===typeof n&&n){if(4&r&&n.__esModule)return n;if(16&r&&"function"===typeof n.then)return n}var a=Object.create(null);s.r(a);var i={};e=e||[null,t({}),t([]),t(t)];for(var o=2&r&&n;("object"==typeof o||"function"==typeof o)&&!~e.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach(e=>i[e]=()=>n[e]);return i.default=()=>n,s.d(a,i),a}})(),s.d=(e,t)=>{for(var n in t)s.o(t,n)&&!s.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},s.f={},s.e=e=>Promise.all(Object.keys(s.f).reduce((t,n)=>(s.f[n](e,t),t),[])),s.u=e=>"static/js/"+e+"."+{407:"93833a4c",453:"361f310c",521:"a547ee3d"}[e]+".chunk.js",s.miniCssF=e=>{},s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="ab-campus-finance-frontend:";s.l=(n,r,a,i)=>{if(e[n])e[n].push(r);else{var o,l;if(void 0!==a)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var u=c[d];if(u.getAttribute("src")==n||u.getAttribute("data-webpack")==t+a){o=u;break}}o||(l=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,s.nc&&o.setAttribute("nonce",s.nc),o.setAttribute("data-webpack",t+a),o.src=n),e[n]=[r];var h=(t,s)=>{o.onerror=o.onload=null,clearTimeout(m);var r=e[n];if(delete e[n],o.parentNode&&o.parentNode.removeChild(o),r&&r.forEach(e=>e(s)),t)return t(s)},m=setTimeout(h.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=h.bind(null,o.onerror),o.onload=h.bind(null,o.onload),l&&document.head.appendChild(o)}}})(),s.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),s.p="/",(()=>{var e={792:0};s.f.j=(t,n)=>{var r=s.o(e,t)?e[t]:void 0;if(0!==r)if(r)n.push(r[2]);else{var a=new Promise((s,n)=>r=e[t]=[s,n]);n.push(r[2]=a);var i=s.p+s.u(t),o=new Error;s.l(i,n=>{if(s.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var a=n&&("load"===n.type?"missing":n.type),i=n&&n.target&&n.target.src;o.message="Loading chunk "+t+" failed.\n("+a+": "+i+")",o.name="ChunkLoadError",o.type=a,o.request=i,r[1](o)}},"chunk-"+t,t)}};var t=(t,n)=>{var r,a,i=n[0],o=n[1],l=n[2],c=0;if(i.some(t=>0!==e[t])){for(r in o)s.o(o,r)&&(s.m[r]=o[r]);if(l)l(s)}for(t&&t(n);c<i.length;c++)a=i[c],s.o(e,a)&&e[a]&&e[a][0](),e[a]=0},n=self.webpackChunkab_campus_finance_frontend=self.webpackChunkab_campus_finance_frontend||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),(()=>{"use strict";var e,t,n=s(5043),r=s.t(n,2),a=s(4391),i=s(579),o=n.createContext(void 0),l=e=>{const t=n.useContext(o);if(e)return e;if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},c=e=>{let{client:t,children:s}=e;return n.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),(0,i.jsx)(o.Provider,{value:t,children:s})},d=s(2555);function u(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function h(e,t,s){u(e,t),t.set(e,s)}function m(e,t,s){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:s;throw new TypeError("Private element is not present on this object")}function p(e,t){return e.get(m(e,t))}function f(e,t,s){return e.set(m(e,t),s),s}var g={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},x=(e=new WeakMap,t=new WeakMap,class{constructor(){h(this,e,g),h(this,t,!1)}setTimeoutProvider(t){f(e,this,t)}setTimeout(t,s){return p(e,this).setTimeout(t,s)}clearTimeout(t){p(e,this).clearTimeout(t)}setInterval(t,s){return p(e,this).setInterval(t,s)}clearInterval(t){p(e,this).clearInterval(t)}}),v=new x;var b="undefined"===typeof window||"Deno"in globalThis;function y(){}function j(e){return"number"===typeof e&&e>=0&&e!==1/0}function w(e,t){return Math.max(e+(t||0)-Date.now(),0)}function N(e,t){return"function"===typeof e?e(t):e}function S(e,t){return"function"===typeof e?e(t):e}function k(e,t){const{type:s="all",exact:n,fetchStatus:r,predicate:a,queryKey:i,stale:o}=e;if(i)if(n){if(t.queryHash!==_(i,t.options))return!1}else if(!C(t.queryKey,i))return!1;if("all"!==s){const e=t.isActive();if("active"===s&&!e)return!1;if("inactive"===s&&e)return!1}return("boolean"!==typeof o||t.isStale()===o)&&((!r||r===t.state.fetchStatus)&&!(a&&!a(t)))}function A(e,t){const{exact:s,status:n,predicate:r,mutationKey:a}=e;if(a){if(!t.options.mutationKey)return!1;if(s){if(E(t.options.mutationKey)!==E(a))return!1}else if(!C(t.options.mutationKey,a))return!1}return(!n||t.state.status===n)&&!(r&&!r(t))}function _(e,t){return((null===t||void 0===t?void 0:t.queryKeyHashFn)||E)(e)}function E(e){return JSON.stringify(e,(e,t)=>D(t)?Object.keys(t).sort().reduce((e,s)=>(e[s]=t[s],e),{}):t)}function C(e,t){return e===t||typeof e===typeof t&&(!(!e||!t||"object"!==typeof e||"object"!==typeof t)&&Object.keys(t).every(s=>C(e[s],t[s])))}var P=Object.prototype.hasOwnProperty;function T(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(e===t)return e;if(s>500)return t;const n=R(e)&&R(t);if(!n&&(!D(e)||!D(t)))return t;const r=(n?e:Object.keys(e)).length,a=n?t:Object.keys(t),i=a.length,o=n?new Array(i):{};let l=0;for(let c=0;c<i;c++){const i=n?c:a[c],d=e[i],u=t[i];if(d===u){o[i]=d,(n?c<r:P.call(e,i))&&l++;continue}if(null===d||null===u||"object"!==typeof d||"object"!==typeof u){o[i]=u;continue}const h=T(d,u,s+1);o[i]=h,h===d&&l++}return r===i&&l===r?e:o}function I(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const s in e)if(e[s]!==t[s])return!1;return!0}function R(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function D(e){if(!O(e))return!1;const t=e.constructor;if(void 0===t)return!0;const s=t.prototype;return!!O(s)&&(!!s.hasOwnProperty("isPrototypeOf")&&Object.getPrototypeOf(e)===Object.prototype)}function O(e){return"[object Object]"===Object.prototype.toString.call(e)}function L(e,t,s){return"function"===typeof s.structuralSharing?s.structuralSharing(e,t):!1!==s.structuralSharing?T(e,t):t}function M(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const n=[...e,t];return s&&n.length>s?n.slice(1):n}function z(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const n=[t,...e];return s&&n.length>s?n.slice(0,-1):n}var F=Symbol();function U(e,t){return!e.queryFn&&null!==t&&void 0!==t&&t.initialPromise?()=>t.initialPromise:e.queryFn&&e.queryFn!==F?e.queryFn:()=>Promise.reject(new Error("Missing queryFn: '".concat(e.queryHash,"'")))}function B(e,t){return"function"===typeof e?e(...t):!!e}function q(e,t){u(e,t),t.add(e)}var V=function(e){setTimeout(e,0)};var H,W,G,K,Z,J,Q=function(){let e=[],t=0,s=e=>{e()},n=e=>{e()},r=V;const a=n=>{t?e.push(n):r(()=>{s(n)})};return{batch:a=>{let i;t++;try{i=a()}finally{t--,t||(()=>{const t=e;e=[],t.length&&r(()=>{n(()=>{t.forEach(e=>{s(e)})})})})()}return i},batchCalls:e=>function(){for(var t=arguments.length,s=new Array(t),n=0;n<t;n++)s[n]=arguments[n];a(()=>{e(...s)})},schedule:a,setNotifyFunction:e=>{s=e},setBatchNotifyFunction:e=>{n=e},setScheduler:e=>{r=e}}}(),Y=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},$=new(H=new WeakMap,W=new WeakMap,G=new WeakMap,class extends Y{constructor(){super(),h(this,H,void 0),h(this,W,void 0),h(this,G,void 0),f(G,this,e=>{if(!b&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}})}onSubscribe(){p(W,this)||this.setEventListener(p(G,this))}onUnsubscribe(){var e;this.hasListeners()||(null===(e=p(W,this))||void 0===e||e.call(this),f(W,this,void 0))}setEventListener(e){var t;f(G,this,e),null===(t=p(W,this))||void 0===t||t.call(this),f(W,this,e(e=>{"boolean"===typeof e?this.setFocused(e):this.onFocus()}))}setFocused(e){p(H,this)!==e&&(f(H,this,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){var e;return"boolean"===typeof p(H,this)?p(H,this):"hidden"!==(null===(e=globalThis.document)||void 0===e?void 0:e.visibilityState)}}),X=new(K=new WeakMap,Z=new WeakMap,J=new WeakMap,class extends Y{constructor(){super(),h(this,K,!0),h(this,Z,void 0),h(this,J,void 0),f(J,this,e=>{if(!b&&window.addEventListener){const t=()=>e(!0),s=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",s,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",s)}}})}onSubscribe(){p(Z,this)||this.setEventListener(p(J,this))}onUnsubscribe(){var e;this.hasListeners()||(null===(e=p(Z,this))||void 0===e||e.call(this),f(Z,this,void 0))}setEventListener(e){var t;f(J,this,e),null===(t=p(Z,this))||void 0===t||t.call(this),f(Z,this,e(this.setOnline.bind(this)))}setOnline(e){p(K,this)!==e&&(f(K,this,e),this.listeners.forEach(t=>{t(e)}))}isOnline(){return p(K,this)}});function ee(){let e,t;const s=new Promise((s,n)=>{e=s,t=n});function n(e){Object.assign(s,e),delete s.resolve,delete s.reject}return s.status="pending",s.catch(()=>{}),s.resolve=t=>{n({status:"fulfilled",value:t}),e(t)},s.reject=e=>{n({status:"rejected",reason:e}),t(e)},s}function te(e){return Math.min(1e3*2**e,3e4)}function se(e){return"online"!==(null!==e&&void 0!==e?e:"online")||X.isOnline()}var ne,re=class extends Error{constructor(e){super("CancelledError"),this.revert=null===e||void 0===e?void 0:e.revert,this.silent=null===e||void 0===e?void 0:e.silent}};function ae(e){let t,s=!1,n=0;const r=ee(),a=()=>"pending"!==r.status,i=()=>$.isFocused()&&("always"===e.networkMode||X.isOnline())&&e.canRun(),o=()=>se(e.networkMode)&&e.canRun(),l=e=>{var s;a()||(null===(s=t)||void 0===s||s(),r.resolve(e))},c=e=>{var s;a()||(null===(s=t)||void 0===s||s(),r.reject(e))},d=()=>new Promise(s=>{var n;t=e=>{(a()||i())&&s(e)},null===(n=e.onPause)||void 0===n||n.call(e)}).then(()=>{var s;(t=void 0,a())||(null===(s=e.onContinue)||void 0===s||s.call(e))}),u=()=>{if(a())return;let t;const r=0===n?e.initialPromise:void 0;try{t=null!==r&&void 0!==r?r:e.fn()}catch(o){t=Promise.reject(o)}Promise.resolve(t).then(l).catch(t=>{var r,o,l;if(a())return;const h=null!==(r=e.retry)&&void 0!==r?r:b?0:3,m=null!==(o=e.retryDelay)&&void 0!==o?o:te,p="function"===typeof m?m(n,t):m,f=!0===h||"number"===typeof h&&n<h||"function"===typeof h&&h(n,t);var g;!s&&f?(n++,null===(l=e.onFail)||void 0===l||l.call(e,n,t),(g=p,new Promise(e=>{v.setTimeout(e,g)})).then(()=>i()?void 0:d()).then(()=>{s?c(t):u()})):c(t)})};return{promise:r,status:()=>r.status,cancel:t=>{if(!a()){var s;const n=new re(t);c(n),null===(s=e.onCancel)||void 0===s||s.call(e,n)}},continue:()=>{var e;return null===(e=t)||void 0===e||e(),r},cancelRetry:()=>{s=!0},continueRetry:()=>{s=!1},canStart:o,start:()=>(o()?u():d().then(u),r)}}var ie,oe,le,ce,de,ue,he,me,pe,fe=(ne=new WeakMap,class{constructor(){h(this,ne,void 0)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),j(this.gcTime)&&f(ne,this,v.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,null!==e&&void 0!==e?e:b?1/0:3e5)}clearGcTimeout(){p(ne,this)&&(v.clearTimeout(p(ne,this)),f(ne,this,void 0))}}),ge=(ie=new WeakMap,oe=new WeakMap,le=new WeakMap,ce=new WeakMap,de=new WeakMap,ue=new WeakMap,he=new WeakMap,me=new WeakSet,class extends fe{constructor(e){var t;super(),q(this,me),h(this,ie,void 0),h(this,oe,void 0),h(this,le,void 0),h(this,ce,void 0),h(this,de,void 0),h(this,ue,void 0),h(this,he,void 0),f(he,this,!1),f(ue,this,e.defaultOptions),this.setOptions(e.options),this.observers=[],f(ce,this,e.client),f(le,this,p(ce,this).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,f(ie,this,ye(this.options)),this.state=null!==(t=e.state)&&void 0!==t?t:p(ie,this),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return null===(e=p(de,this))||void 0===e?void 0:e.promise}setOptions(e){if(this.options=(0,d.A)((0,d.A)({},p(ue,this)),e),this.updateGcTime(this.options.gcTime),this.state&&void 0===this.state.data){const e=ye(this.options);void 0!==e.data&&(this.setState(be(e.data,e.dataUpdatedAt)),f(ie,this,e))}}optionalRemove(){this.observers.length||"idle"!==this.state.fetchStatus||p(le,this).remove(this)}setData(e,t){const s=L(this.state.data,e,this.options);return m(me,this,xe).call(this,{data:s,type:"success",dataUpdatedAt:null===t||void 0===t?void 0:t.updatedAt,manual:null===t||void 0===t?void 0:t.manual}),s}setState(e,t){m(me,this,xe).call(this,{type:"setState",state:e,setStateOptions:t})}cancel(e){var t,s;const n=null===(t=p(de,this))||void 0===t?void 0:t.promise;return null===(s=p(de,this))||void 0===s||s.cancel(e),n?n.then(y).catch(y):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(p(ie,this))}isActive(){return this.observers.some(e=>!1!==S(e.options.enabled,this))}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===F||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0&&this.observers.some(e=>"static"===N(e.options.staleTime,this))}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):void 0===this.state.data||this.state.isInvalidated}isStaleByTime(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return void 0===this.state.data||"static"!==e&&(!!this.state.isInvalidated||!w(this.state.dataUpdatedAt,e))}onFocus(){var e;const t=this.observers.find(e=>e.shouldFetchOnWindowFocus());null===t||void 0===t||t.refetch({cancelRefetch:!1}),null===(e=p(de,this))||void 0===e||e.continue()}onOnline(){var e;const t=this.observers.find(e=>e.shouldFetchOnReconnect());null===t||void 0===t||t.refetch({cancelRefetch:!1}),null===(e=p(de,this))||void 0===e||e.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),p(le,this).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(p(de,this)&&(p(he,this)?p(de,this).cancel({revert:!0}):p(de,this).cancelRetry()),this.scheduleGc()),p(le,this).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||m(me,this,xe).call(this,{type:"invalidate"})}async fetch(e,t){var s,n,r;if("idle"!==this.state.fetchStatus&&"rejected"!==(null===(s=p(de,this))||void 0===s?void 0:s.status()))if(void 0!==this.state.data&&null!==t&&void 0!==t&&t.cancelRefetch)this.cancel({silent:!0});else if(p(de,this))return p(de,this).continueRetry(),p(de,this).promise;if(e&&this.setOptions(e),!this.options.queryFn){const e=this.observers.find(e=>e.options.queryFn);e&&this.setOptions(e.options)}const a=new AbortController,i=e=>{Object.defineProperty(e,"signal",{enumerable:!0,get:()=>(f(he,this,!0),a.signal)})},o=()=>{const e=U(this.options,t),s=(()=>{const e={client:p(ce,this),queryKey:this.queryKey,meta:this.meta};return i(e),e})();return f(he,this,!1),this.options.persister?this.options.persister(e,s,this):e(s)},l=(()=>{const e={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:p(ce,this),state:this.state,fetchFn:o};return i(e),e})();var c;(null===(n=this.options.behavior)||void 0===n||n.onFetch(l,this),f(oe,this,this.state),"idle"===this.state.fetchStatus||this.state.fetchMeta!==(null===(r=l.fetchOptions)||void 0===r?void 0:r.meta))&&m(me,this,xe).call(this,{type:"fetch",meta:null===(c=l.fetchOptions)||void 0===c?void 0:c.meta});f(de,this,ae({initialPromise:null===t||void 0===t?void 0:t.initialPromise,fn:l.fetchFn,onCancel:e=>{e instanceof re&&e.revert&&this.setState((0,d.A)((0,d.A)({},p(oe,this)),{},{fetchStatus:"idle"})),a.abort()},onFail:(e,t)=>{m(me,this,xe).call(this,{type:"failed",failureCount:e,error:t})},onPause:()=>{m(me,this,xe).call(this,{type:"pause"})},onContinue:()=>{m(me,this,xe).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0}));try{var u,h,g,x;const e=await p(de,this).start();if(void 0===e)throw new Error("".concat(this.queryHash," data is undefined"));return this.setData(e),null===(u=(h=p(le,this).config).onSuccess)||void 0===u||u.call(h,e,this),null===(g=(x=p(le,this).config).onSettled)||void 0===g||g.call(x,e,this.state.error,this),e}catch(w){var v,b,y,j;if(w instanceof re){if(w.silent)return p(de,this).promise;if(w.revert){if(void 0===this.state.data)throw w;return this.state.data}}throw m(me,this,xe).call(this,{type:"error",error:w}),null===(v=(b=p(le,this).config).onError)||void 0===v||v.call(b,w,this),null===(y=(j=p(le,this).config).onSettled)||void 0===y||y.call(j,this.state.data,w,this),w}finally{this.scheduleGc()}}});function xe(e){this.state=(t=>{var s;switch(e.type){case"failed":return(0,d.A)((0,d.A)({},t),{},{fetchFailureCount:e.failureCount,fetchFailureReason:e.error});case"pause":return(0,d.A)((0,d.A)({},t),{},{fetchStatus:"paused"});case"continue":return(0,d.A)((0,d.A)({},t),{},{fetchStatus:"fetching"});case"fetch":return(0,d.A)((0,d.A)((0,d.A)({},t),ve(t.data,this.options)),{},{fetchMeta:null!==(s=e.meta)&&void 0!==s?s:null});case"success":const n=(0,d.A)((0,d.A)((0,d.A)({},t),be(e.data,e.dataUpdatedAt)),{},{dataUpdateCount:t.dataUpdateCount+1},!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null});return f(oe,this,e.manual?n:void 0),n;case"error":const r=e.error;return(0,d.A)((0,d.A)({},t),{},{error:r,errorUpdateCount:t.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:t.fetchFailureCount+1,fetchFailureReason:r,fetchStatus:"idle",status:"error",isInvalidated:!0});case"invalidate":return(0,d.A)((0,d.A)({},t),{},{isInvalidated:!0});case"setState":return(0,d.A)((0,d.A)({},t),e.state)}})(this.state),Q.batch(()=>{this.observers.forEach(e=>{e.onQueryUpdate()}),p(le,this).notify({query:this,type:"updated",action:e})})}function ve(e,t){return(0,d.A)({fetchFailureCount:0,fetchFailureReason:null,fetchStatus:se(t.networkMode)?"fetching":"paused"},void 0===e&&{error:null,status:"pending"})}function be(e,t){return{data:e,dataUpdatedAt:null!==t&&void 0!==t?t:Date.now(),error:null,isInvalidated:!1,status:"success"}}function ye(e){const t="function"===typeof e.initialData?e.initialData():e.initialData,s=void 0!==t,n=s?"function"===typeof e.initialDataUpdatedAt?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:s?null!==n&&void 0!==n?n:Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:s?"success":"pending",fetchStatus:"idle"}}var je,we,Ne,Se,ke,Ae,_e,Ee,Ce=(pe=new WeakMap,class extends Y{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),h(this,pe,void 0),this.config=e,f(pe,this,new Map)}build(e,t,s){var n;const r=t.queryKey,a=null!==(n=t.queryHash)&&void 0!==n?n:_(r,t);let i=this.get(a);return i||(i=new ge({client:e,queryKey:r,queryHash:a,options:e.defaultQueryOptions(t),state:s,defaultOptions:e.getQueryDefaults(r)}),this.add(i)),i}add(e){p(pe,this).has(e.queryHash)||(p(pe,this).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=p(pe,this).get(e.queryHash);t&&(e.destroy(),t===e&&p(pe,this).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Q.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return p(pe,this).get(e)}getAll(){return[...p(pe,this).values()]}find(e){const t=(0,d.A)({exact:!0},e);return this.getAll().find(e=>k(t,e))}findAll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=this.getAll();return Object.keys(e).length>0?t.filter(t=>k(e,t)):t}notify(e){Q.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){Q.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Q.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}}),Pe=(je=new WeakMap,we=new WeakMap,Ne=new WeakMap,Se=new WeakMap,ke=new WeakSet,class extends fe{constructor(e){super(),q(this,ke),h(this,je,void 0),h(this,we,void 0),h(this,Ne,void 0),h(this,Se,void 0),f(je,this,e.client),this.mutationId=e.mutationId,f(Ne,this,e.mutationCache),f(we,this,[]),this.state=e.state||{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0},this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){p(we,this).includes(e)||(p(we,this).push(e),this.clearGcTimeout(),p(Ne,this).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){f(we,this,p(we,this).filter(t=>t!==e)),this.scheduleGc(),p(Ne,this).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){p(we,this).length||("pending"===this.state.status?this.scheduleGc():p(Ne,this).remove(this))}continue(){var e,t;return null!==(e=null===(t=p(Se,this))||void 0===t?void 0:t.continue())&&void 0!==e?e:this.execute(this.state.variables)}async execute(e){var t;const s=()=>{m(ke,this,Te).call(this,{type:"continue"})},n={client:p(je,this),meta:this.options.meta,mutationKey:this.options.mutationKey};f(Se,this,ae({fn:()=>this.options.mutationFn?this.options.mutationFn(e,n):Promise.reject(new Error("No mutationFn found")),onFail:(e,t)=>{m(ke,this,Te).call(this,{type:"failed",failureCount:e,error:t})},onPause:()=>{m(ke,this,Te).call(this,{type:"pause"})},onContinue:s,retry:null!==(t=this.options.retry)&&void 0!==t?t:0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>p(Ne,this).canRun(this)}));const r="pending"===this.state.status,a=!p(Se,this).canStart();try{var i,o,l,c,d,u,h,g;if(r)s();else{var x,v;m(ke,this,Te).call(this,{type:"pending",variables:e,isPaused:a}),p(Ne,this).config.onMutate&&await p(Ne,this).config.onMutate(e,this,n);const t=await(null===(x=(v=this.options).onMutate)||void 0===x?void 0:x.call(v,e,n));t!==this.state.context&&m(ke,this,Te).call(this,{type:"pending",context:t,variables:e,isPaused:a})}const t=await p(Se,this).start();return await(null===(i=(o=p(Ne,this).config).onSuccess)||void 0===i?void 0:i.call(o,t,e,this.state.context,this,n)),await(null===(l=(c=this.options).onSuccess)||void 0===l?void 0:l.call(c,t,e,this.state.context,n)),await(null===(d=(u=p(Ne,this).config).onSettled)||void 0===d?void 0:d.call(u,t,null,this.state.variables,this.state.context,this,n)),await(null===(h=(g=this.options).onSettled)||void 0===h?void 0:h.call(g,t,null,e,this.state.context,n)),m(ke,this,Te).call(this,{type:"success",data:t}),t}catch(_){try{var b,y;await(null===(b=(y=p(Ne,this).config).onError)||void 0===b?void 0:b.call(y,_,e,this.state.context,this,n))}catch(Nt){Promise.reject(Nt)}try{var j,w;await(null===(j=(w=this.options).onError)||void 0===j?void 0:j.call(w,_,e,this.state.context,n))}catch(Nt){Promise.reject(Nt)}try{var N,S;await(null===(N=(S=p(Ne,this).config).onSettled)||void 0===N?void 0:N.call(S,void 0,_,this.state.variables,this.state.context,this,n))}catch(Nt){Promise.reject(Nt)}try{var k,A;await(null===(k=(A=this.options).onSettled)||void 0===k?void 0:k.call(A,void 0,_,e,this.state.context,n))}catch(Nt){Promise.reject(Nt)}throw m(ke,this,Te).call(this,{type:"error",error:_}),_}finally{p(Ne,this).runNext(this)}}});function Te(e){this.state=(t=>{switch(e.type){case"failed":return(0,d.A)((0,d.A)({},t),{},{failureCount:e.failureCount,failureReason:e.error});case"pause":return(0,d.A)((0,d.A)({},t),{},{isPaused:!0});case"continue":return(0,d.A)((0,d.A)({},t),{},{isPaused:!1});case"pending":return(0,d.A)((0,d.A)({},t),{},{context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()});case"success":return(0,d.A)((0,d.A)({},t),{},{data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1});case"error":return(0,d.A)((0,d.A)({},t),{},{data:void 0,error:e.error,failureCount:t.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"})}})(this.state),Q.batch(()=>{p(we,this).forEach(t=>{t.onMutationUpdate(e)}),p(Ne,this).notify({mutation:this,type:"updated",action:e})})}var Ie,Re,De,Oe,Le,Me,ze,Fe,Ue=(Ae=new WeakMap,_e=new WeakMap,Ee=new WeakMap,class extends Y{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),h(this,Ae,void 0),h(this,_e,void 0),h(this,Ee,void 0),this.config=e,f(Ae,this,new Set),f(_e,this,new Map),f(Ee,this,0)}build(e,t,s){var n;const r=new Pe({client:e,mutationCache:this,mutationId:f(Ee,this,(n=p(Ee,this),++n)),options:e.defaultMutationOptions(t),state:s});return this.add(r),r}add(e){p(Ae,this).add(e);const t=Be(e);if("string"===typeof t){const s=p(_e,this).get(t);s?s.push(e):p(_e,this).set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(p(Ae,this).delete(e)){const t=Be(e);if("string"===typeof t){const s=p(_e,this).get(t);if(s)if(s.length>1){const t=s.indexOf(e);-1!==t&&s.splice(t,1)}else s[0]===e&&p(_e,this).delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=Be(e);if("string"===typeof t){const s=p(_e,this).get(t),n=null===s||void 0===s?void 0:s.find(e=>"pending"===e.state.status);return!n||n===e}return!0}runNext(e){const t=Be(e);if("string"===typeof t){var s,n;const r=null===(s=p(_e,this).get(t))||void 0===s?void 0:s.find(t=>t!==e&&t.state.isPaused);return null!==(n=null===r||void 0===r?void 0:r.continue())&&void 0!==n?n:Promise.resolve()}return Promise.resolve()}clear(){Q.batch(()=>{p(Ae,this).forEach(e=>{this.notify({type:"removed",mutation:e})}),p(Ae,this).clear(),p(_e,this).clear()})}getAll(){return Array.from(p(Ae,this))}find(e){const t=(0,d.A)({exact:!0},e);return this.getAll().find(e=>A(t,e))}findAll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.getAll().filter(t=>A(e,t))}notify(e){Q.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(e=>e.state.isPaused);return Q.batch(()=>Promise.all(e.map(e=>e.continue().catch(y))))}});function Be(e){var t;return null===(t=e.options.scope)||void 0===t?void 0:t.id}function qe(e){return{onFetch:(t,s)=>{var n,r,a;const i=t.options,o=null===(n=t.fetchOptions)||void 0===n||null===(n=n.meta)||void 0===n||null===(n=n.fetchMore)||void 0===n?void 0:n.direction,l=(null===(r=t.state.data)||void 0===r?void 0:r.pages)||[],c=(null===(a=t.state.data)||void 0===a?void 0:a.pageParams)||[];let d={pages:[],pageParams:[]},u=0;const h=async()=>{let s=!1;const n=e=>{!function(e,t,s){let n,r=!1;Object.defineProperty(e,"signal",{enumerable:!0,get:()=>(null!==n&&void 0!==n||(n=t()),r||(r=!0,n.aborted?s():n.addEventListener("abort",s,{once:!0})),n)})}(e,()=>t.signal,()=>s=!0)},r=U(t.options,t.fetchOptions),a=async(e,a,i)=>{if(s)return Promise.reject();if(null==a&&e.pages.length)return Promise.resolve(e);const o=(()=>{const e={client:t.client,queryKey:t.queryKey,pageParam:a,direction:i?"backward":"forward",meta:t.options.meta};return n(e),e})(),l=await r(o),{maxPages:c}=t.options,d=i?z:M;return{pages:d(e.pages,l,c),pageParams:d(e.pageParams,a,c)}};if(o&&l.length){const e="backward"===o,t={pages:l,pageParams:c},s=(e?He:Ve)(i,t);d=await a(t,s,e)}else{const t=null!==e&&void 0!==e?e:l.length;do{var h;const e=0===u?null!==(h=c[0])&&void 0!==h?h:i.initialPageParam:Ve(i,d);if(u>0&&null==e)break;d=await a(d,e),u++}while(u<t)}return d};t.options.persister?t.fetchFn=()=>{var e,n;return null===(e=(n=t.options).persister)||void 0===e?void 0:e.call(n,h,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},s)}:t.fetchFn=h}}}function Ve(e,t){let{pages:s,pageParams:n}=t;const r=s.length-1;return s.length>0?e.getNextPageParam(s[r],s,n[r],n):void 0}function He(e,t){var s;let{pages:n,pageParams:r}=t;return n.length>0?null===(s=e.getPreviousPageParam)||void 0===s?void 0:s.call(e,n[0],n,r[0],r):void 0}const We=new(Ie=new WeakMap,Re=new WeakMap,De=new WeakMap,Oe=new WeakMap,Le=new WeakMap,Me=new WeakMap,ze=new WeakMap,Fe=new WeakMap,class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};h(this,Ie,void 0),h(this,Re,void 0),h(this,De,void 0),h(this,Oe,void 0),h(this,Le,void 0),h(this,Me,void 0),h(this,ze,void 0),h(this,Fe,void 0),f(Ie,this,e.queryCache||new Ce),f(Re,this,e.mutationCache||new Ue),f(De,this,e.defaultOptions||{}),f(Oe,this,new Map),f(Le,this,new Map),f(Me,this,0)}mount(){var e;f(Me,this,(e=p(Me,this),e++,e)),1===p(Me,this)&&(f(ze,this,$.subscribe(async e=>{e&&(await this.resumePausedMutations(),p(Ie,this).onFocus())})),f(Fe,this,X.subscribe(async e=>{e&&(await this.resumePausedMutations(),p(Ie,this).onOnline())})))}unmount(){var e,t,s;f(Me,this,(e=p(Me,this),e--,e)),0===p(Me,this)&&(null===(t=p(ze,this))||void 0===t||t.call(this),f(ze,this,void 0),null===(s=p(Fe,this))||void 0===s||s.call(this),f(Fe,this,void 0))}isFetching(e){return p(Ie,this).findAll((0,d.A)((0,d.A)({},e),{},{fetchStatus:"fetching"})).length}isMutating(e){return p(Re,this).findAll((0,d.A)((0,d.A)({},e),{},{status:"pending"})).length}getQueryData(e){var t;const s=this.defaultQueryOptions({queryKey:e});return null===(t=p(Ie,this).get(s.queryHash))||void 0===t?void 0:t.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),s=p(Ie,this).build(this,t),n=s.state.data;return void 0===n?this.fetchQuery(e):(e.revalidateIfStale&&s.isStaleByTime(N(t.staleTime,s))&&this.prefetchQuery(t),Promise.resolve(n))}getQueriesData(e){return p(Ie,this).findAll(e).map(e=>{let{queryKey:t,state:s}=e;return[t,s.data]})}setQueryData(e,t,s){const n=this.defaultQueryOptions({queryKey:e}),r=p(Ie,this).get(n.queryHash),a=function(e,t){return"function"===typeof e?e(t):e}(t,null===r||void 0===r?void 0:r.state.data);if(void 0!==a)return p(Ie,this).build(this,n).setData(a,(0,d.A)((0,d.A)({},s),{},{manual:!0}))}setQueriesData(e,t,s){return Q.batch(()=>p(Ie,this).findAll(e).map(e=>{let{queryKey:n}=e;return[n,this.setQueryData(n,t,s)]}))}getQueryState(e){var t;const s=this.defaultQueryOptions({queryKey:e});return null===(t=p(Ie,this).get(s.queryHash))||void 0===t?void 0:t.state}removeQueries(e){const t=p(Ie,this);Q.batch(()=>{t.findAll(e).forEach(e=>{t.remove(e)})})}resetQueries(e,t){const s=p(Ie,this);return Q.batch(()=>(s.findAll(e).forEach(e=>{e.reset()}),this.refetchQueries((0,d.A)({type:"active"},e),t)))}cancelQueries(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=(0,d.A)({revert:!0},t),n=Q.batch(()=>p(Ie,this).findAll(e).map(e=>e.cancel(s)));return Promise.all(n).then(y).catch(y)}invalidateQueries(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Q.batch(()=>{var s,n;return p(Ie,this).findAll(e).forEach(e=>{e.invalidate()}),"none"===(null===e||void 0===e?void 0:e.refetchType)?Promise.resolve():this.refetchQueries((0,d.A)((0,d.A)({},e),{},{type:null!==(s=null!==(n=null===e||void 0===e?void 0:e.refetchType)&&void 0!==n?n:null===e||void 0===e?void 0:e.type)&&void 0!==s?s:"active"}),t)})}refetchQueries(e){var t;let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=(0,d.A)((0,d.A)({},s),{},{cancelRefetch:null===(t=s.cancelRefetch)||void 0===t||t}),r=Q.batch(()=>p(Ie,this).findAll(e).filter(e=>!e.isDisabled()&&!e.isStatic()).map(e=>{let t=e.fetch(void 0,n);return n.throwOnError||(t=t.catch(y)),"paused"===e.state.fetchStatus?Promise.resolve():t}));return Promise.all(r).then(y)}fetchQuery(e){const t=this.defaultQueryOptions(e);void 0===t.retry&&(t.retry=!1);const s=p(Ie,this).build(this,t);return s.isStaleByTime(N(t.staleTime,s))?s.fetch(t):Promise.resolve(s.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(y).catch(y)}fetchInfiniteQuery(e){return e.behavior=qe(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(y).catch(y)}ensureInfiniteQueryData(e){return e.behavior=qe(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return X.isOnline()?p(Re,this).resumePausedMutations():Promise.resolve()}getQueryCache(){return p(Ie,this)}getMutationCache(){return p(Re,this)}getDefaultOptions(){return p(De,this)}setDefaultOptions(e){f(De,this,e)}setQueryDefaults(e,t){p(Oe,this).set(E(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...p(Oe,this).values()],s={};return t.forEach(t=>{C(e,t.queryKey)&&Object.assign(s,t.defaultOptions)}),s}setMutationDefaults(e,t){p(Le,this).set(E(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...p(Le,this).values()],s={};return t.forEach(t=>{C(e,t.mutationKey)&&Object.assign(s,t.defaultOptions)}),s}defaultQueryOptions(e){if(e._defaulted)return e;const t=(0,d.A)((0,d.A)((0,d.A)((0,d.A)({},p(De,this).queries),this.getQueryDefaults(e.queryKey)),e),{},{_defaulted:!0});return t.queryHash||(t.queryHash=_(t.queryKey,t)),void 0===t.refetchOnReconnect&&(t.refetchOnReconnect="always"!==t.networkMode),void 0===t.throwOnError&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===F&&(t.enabled=!1),t}defaultMutationOptions(e){return null!==e&&void 0!==e&&e._defaulted?e:(0,d.A)((0,d.A)((0,d.A)((0,d.A)({},p(De,this).mutations),(null===e||void 0===e?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey)),e),{},{_defaulted:!0})}clear(){p(Ie,this).clear(),p(Re,this).clear()}})({defaultOptions:{queries:{staleTime:12e4,gcTime:3e5,refetchOnWindowFocus:!1,refetchOnReconnect:!0,retry:1}}});var Ge=s(3216),Ke=s(7950),Ze=s.t(Ke,2),Je=s(1387);function Qe(){return Qe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},Qe.apply(this,arguments)}function Ye(e,t){if(null==e)return{};var s,n,r={},a=Object.keys(e);for(n=0;n<a.length;n++)s=a[n],t.indexOf(s)>=0||(r[s]=e[s]);return r}function $e(e){return void 0===e&&(e=""),new URLSearchParams("string"===typeof e||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,s)=>{let n=e[s];return t.concat(Array.isArray(n)?n.map(e=>[s,e]):[[s,n]])},[]))}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const Xe=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"];try{window.__reactRouterVersion="6"}catch(Nt){}new Map;const et=r.startTransition;Ze.flushSync,r.useId;function tt(e){let{basename:t,children:s,future:r,window:a}=e,i=n.useRef();null==i.current&&(i.current=(0,Je.zR)({window:a,v5Compat:!0}));let o=i.current,[l,c]=n.useState({action:o.action,location:o.location}),{v7_startTransition:d}=r||{},u=n.useCallback(e=>{d&&et?et(()=>c(e)):c(e)},[c,d]);return n.useLayoutEffect(()=>o.listen(u),[o,u]),n.useEffect(()=>(0,Ge.V8)(r),[r]),n.createElement(Ge.Ix,{basename:t,children:s,location:l.location,navigationType:l.action,navigator:o,future:r})}const st="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,nt=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,rt=n.forwardRef(function(e,t){let s,{onClick:r,relative:a,reloadDocument:i,replace:o,state:l,target:c,to:d,preventScrollReset:u,viewTransition:h}=e,m=Ye(e,Xe),{basename:p}=n.useContext(Ge.jb),f=!1;if("string"===typeof d&&nt.test(d)&&(s=d,st))try{let e=new URL(window.location.href),t=d.startsWith("//")?new URL(e.protocol+d):new URL(d),s=(0,Je.pb)(t.pathname,p);t.origin===e.origin&&null!=s?d=s+t.search+t.hash:f=!0}catch(Nt){}let g=(0,Ge.$P)(d,{relative:a}),x=function(e,t){let{target:s,replace:r,state:a,preventScrollReset:i,relative:o,viewTransition:l}=void 0===t?{}:t,c=(0,Ge.Zp)(),d=(0,Ge.zy)(),u=(0,Ge.x$)(e,{relative:o});return n.useCallback(t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,s)){t.preventDefault();let s=void 0!==r?r:(0,Je.AO)(d)===(0,Je.AO)(u);c(e,{replace:s,state:a,preventScrollReset:i,relative:o,viewTransition:l})}},[d,c,u,r,a,s,e,i,o,l])}(d,{replace:o,state:l,target:c,preventScrollReset:u,relative:a,viewTransition:h});return n.createElement("a",Qe({},m,{href:s||g,onClick:f||i?r:function(e){r&&r(e),e.defaultPrevented||x(e)},ref:t,target:c}))});var at,it;function ot(e){let t=n.useRef($e(e)),s=n.useRef(!1),r=(0,Ge.zy)(),a=n.useMemo(()=>function(e,t){let s=$e(e);return t&&t.forEach((e,n)=>{s.has(n)||t.getAll(n).forEach(e=>{s.append(n,e)})}),s}(r.search,s.current?null:t.current),[r.search]),i=(0,Ge.Zp)(),o=n.useCallback((e,t)=>{const n=$e("function"===typeof e?e(a):e);s.current=!0,i("?"+n,t)},[i,a]);return[a,o]}(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(at||(at={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(it||(it={}));var lt=s(6197),ct=s(6540);const dt=(0,n.createContext)(),ut=()=>{const e=(0,n.useContext)(dt);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e},ht=e=>{let{children:t}=e;const[s,r]=(0,n.useState)(null),[a,o]=(0,n.useState)(!0);(0,n.useEffect)(()=>{console.log("[AUTH] Initialisation du contexte d'authentification...");try{const e=localStorage.getItem("ab_user_cache");if(e){JSON.parse(e);const t=localStorage.getItem("ab_user_cache_time");if(t){Date.now()-parseInt(t)>864e5&&(console.log("[AUTH] Cache obsol\xe8te d\xe9tect\xe9, nettoyage..."),localStorage.removeItem("ab_user_cache"),localStorage.removeItem("ab_user_cache_time"))}}}catch(s){console.warn("[AUTH] Erreur v\xe9rification cache:",s),localStorage.removeItem("ab_user_cache"),localStorage.removeItem("ab_user_cache_time")}const e=setTimeout(()=>{console.log("[AUTH] \u26a0\ufe0f Timeout de s\xe9curit\xe9 - arr\xeat du loader"),o(!1)},3e3);if(!lt.ND)return console.warn("[AUTH] Supabase non initialis\xe9 - skip auth subscription"),void o(!1);let t;return(async()=>{try{console.log("[AUTH] V\xe9rification de la session actuelle...");const{data:{session:e}}=await lt.ND.auth.getSession();if(null!==e&&void 0!==e&&e.user){var n,a,i,l;console.log("[AUTH] Session trouv\xe9e:",e.user.email);const t=(null===(n=e.user)||void 0===n||null===(a=n.user_metadata)||void 0===a?void 0:a.role)||(null===(i=e.user)||void 0===i||null===(l=i.app_metadata)||void 0===l?void 0:l.role)||"client",s=localStorage.getItem("ab_user_cache_time"),x=localStorage.getItem("ab_user_cache"),v=s&&x&&Date.now()-parseInt(s,10)<3e5;let b=!1;if(v)try{const s=JSON.parse(x);if((null===s||void 0===s?void 0:s.id)===e.user.id){b=!0;const n=(0,d.A)((0,d.A)({},e.user),{},{role:s.role||t,firstName:s.first_name,lastName:s.last_name});r(n),o(!1),(async()=>{try{const{data:s}=await lt.ND.from("users").select("role, first_name, last_name").eq("id",e.user.id).single();s&&(r(n=>(0,d.A)((0,d.A)((0,d.A)({},n),e.user),{},{role:s.role||t,firstName:s.first_name,lastName:s.last_name})),localStorage.setItem("ab_user_cache",JSON.stringify({id:e.user.id,email:e.user.email,role:s.role||t,first_name:s.first_name||"",last_name:s.last_name||""})),localStorage.setItem("ab_user_cache_time",Date.now().toString()))}catch(cs){}})()}}catch(Nt){console.warn("[AUTH] Cache invalide, fallback DB")}if(!b)try{const s=lt.ND.from("users").select("role, first_name, last_name").eq("id",e.user.id).single(),n=new Promise((e,t)=>setTimeout(()=>t(new Error("Timeout")),2e3)),a=await Promise.race([s,n]);if(!a.error&&a.data){var c,u;const s=a.data,n=s.role||t,i=(0,d.A)((0,d.A)({},e.user),{},{role:n,firstName:s.first_name||(null===(c=e.user.user_metadata)||void 0===c?void 0:c.first_name),lastName:s.last_name||(null===(u=e.user.user_metadata)||void 0===u?void 0:u.last_name)});r(i),localStorage.setItem("ab_user_cache",JSON.stringify({id:i.id,email:i.email,role:n,first_name:s.first_name||"",last_name:s.last_name||""})),localStorage.setItem("ab_user_cache_time",Date.now().toString())}else{var h,m;const s=(0,d.A)((0,d.A)({},e.user),{},{role:t});r(s),localStorage.setItem("ab_user_cache",JSON.stringify({id:s.id,email:s.email,role:t,first_name:(null===(h=s.user_metadata)||void 0===h?void 0:h.first_name)||"",last_name:(null===(m=s.user_metadata)||void 0===m?void 0:m.last_name)||""})),localStorage.setItem("ab_user_cache_time",Date.now().toString())}}catch(g){var p,f;console.warn("[AUTH] Erreur/timeout r\xe9cup\xe9ration r\xf4le DB:",g.message);const s=(0,d.A)((0,d.A)({},e.user),{},{role:t});r(s),localStorage.setItem("ab_user_cache",JSON.stringify({id:s.id,email:s.email,role:t,first_name:(null===(p=s.user_metadata)||void 0===p?void 0:p.first_name)||"",last_name:(null===(f=s.user_metadata)||void 0===f?void 0:f.last_name)||""})),localStorage.setItem("ab_user_cache_time",Date.now().toString())}}else{console.log("[AUTH] Aucune session active");try{const e=localStorage.getItem("ab_user_cache");if(e){const t=JSON.parse(e);t&&t.id&&(console.log("[AUTH] Utilisateur r\xe9cup\xe9r\xe9 depuis le cache"),r(t))}}catch(s){console.warn("[AUTH] Erreur lecture cache:",s)}}console.log("[AUTH] Configuration de l'\xe9couteur d'\xe9v\xe9nements...");const x=lt.ND.auth.onAuthStateChange(async(e,t)=>{var n;if(console.log("[AUTH] \xc9v\xe9nement auth:",e,null===t||void 0===t||null===(n=t.user)||void 0===n?void 0:n.email),"SIGNED_IN"===e&&t){var a,i,o,l;let e=(null===(a=t.user)||void 0===a||null===(i=a.user_metadata)||void 0===i?void 0:i.role)||(null===(o=t.user)||void 0===o||null===(l=o.app_metadata)||void 0===l?void 0:l.role)||"client";try{const s=lt.ND.from("users").select("role, first_name, last_name").eq("id",t.user.id).single(),n=new Promise((e,t)=>setTimeout(()=>t(new Error("Timeout")),3e3)),a=await Promise.race([s,n]);if(!a.error&&a.data){var c,u;const s=a.data;console.log("[AUTH] SIGNED_IN - R\xf4le DB:",s.role),e=s.role||e;const n=(0,d.A)((0,d.A)({},t.user),{},{role:e,firstName:s.first_name||(null===(c=t.user.user_metadata)||void 0===c?void 0:c.first_name),lastName:s.last_name||(null===(u=t.user.user_metadata)||void 0===u?void 0:u.last_name)});r(n),localStorage.setItem("ab_user_cache",JSON.stringify({id:n.id,email:n.email,role:e,first_name:s.first_name||"",last_name:s.last_name||""}))}else{var h,m;console.warn("[AUTH] Utilisation des m\xe9tadonn\xe9es auth (RLS peut bloquer)");const s=(0,d.A)((0,d.A)({},t.user),{},{role:e});r(s),localStorage.setItem("ab_user_cache",JSON.stringify({id:s.id,email:s.email,role:e,first_name:(null===(h=s.user_metadata)||void 0===h?void 0:h.first_name)||"",last_name:(null===(m=s.user_metadata)||void 0===m?void 0:m.last_name)||""}))}}catch(g){var p,f;console.warn("[AUTH] Erreur/timeout r\xe9cup\xe9ration r\xf4le DB (SIGNED_IN):",g.message);const n=(0,d.A)((0,d.A)({},t.user),{},{role:e});r(n),localStorage.setItem("ab_user_cache",JSON.stringify({id:n.id,email:n.email,role:e,first_name:(null===(p=n.user_metadata)||void 0===p?void 0:p.first_name)||"",last_name:(null===(f=n.user_metadata)||void 0===f?void 0:f.last_name)||""}))}}else if("SIGNED_OUT"===e){console.log("[AUTH] Utilisateur d\xe9connect\xe9"),r(null);try{localStorage.removeItem("ab_user_cache")}catch(s){console.warn("[AUTH] Erreur suppression cache:",s)}}else if("TOKEN_REFRESHED"===e&&t){var x,v,b,y;console.log("[AUTH] Token rafra\xeechi");let e=(null===(x=t.user)||void 0===x||null===(v=x.user_metadata)||void 0===v?void 0:v.role)||(null===(b=t.user)||void 0===b||null===(y=b.app_metadata)||void 0===y?void 0:y.role)||"client";try{const{data:s,error:n}=await lt.ND.from("users").select("role, first_name, last_name").eq("id",t.user.id).single();if(!n&&s){var j,w;e=s.role||e;const n=(0,d.A)((0,d.A)({},t.user),{},{role:e,firstName:s.first_name||(null===(j=t.user.user_metadata)||void 0===j?void 0:j.first_name),lastName:s.last_name||(null===(w=t.user.user_metadata)||void 0===w?void 0:w.last_name)});r(n)}else{const s=(0,d.A)((0,d.A)({},t.user),{},{role:e});r(s)}}catch(g){console.error("[AUTH] Erreur r\xe9cup\xe9ration r\xf4le DB (TOKEN_REFRESHED):",g);const n=(0,d.A)((0,d.A)({},t.user),{},{role:e});r(n)}}});t=x.data.subscription,console.log("[AUTH] \u2705 Contexte d'authentification initialis\xe9")}catch(x){console.error("[AUTH] \u274c Erreur lors de l'initialisation:",x.message)}finally{clearTimeout(e),o(!1)}})(),()=>{clearTimeout(e),t&&t.unsubscribe()}},[]);const l={user:s,loading:a,isAuthenticated:!!s,signUp:async(e,t,s)=>{if(!lt.ND)return console.error("[AUTH] Supabase non configur\xe9 - impossible de s'inscrire"),{success:!1,error:"Configuration Supabase manquante. V\xe9rifiez vos variables d'environnement."};try{return await(0,ct.bk)(e,t,s)}catch(n){return console.error("[AUTH] Erreur lors de l'inscription:",n.message),{success:!1,error:n.message}}},signIn:async(e,t)=>{if(!lt.ND)return console.error("[AUTH] Supabase non configur\xe9 - impossible de se connecter"),{success:!1,error:"Configuration Supabase manquante. V\xe9rifiez vos variables d'environnement."};try{console.log("[AUTH] Tentative de connexion avec Supabase...");const s=await(0,ct.Ru)(e,t);return console.log("[AUTH] R\xe9sultat Supabase:",s),s}catch(s){return console.error("[AUTH] Erreur lors de la connexion:",s.message),{success:!1,error:s.message}}},signInWithPhoneNumber:async(e,t)=>{if(!lt.ND)return{success:!1,error:"Supabase non configur\xe9"};try{return await(0,ct.zN)(e,t)}catch(s){return console.error("[AUTH] Erreur lors de la connexion par t\xe9l\xe9phone:",s.message),{success:!1,error:s.message}}},logout:async()=>{if(!lt.ND){r(null);try{localStorage.removeItem("ab_user_cache")}catch(e){console.warn("[AUTH] Erreur lors de la suppression du cache:",e)}return{success:!0}}try{const t=await(0,ct.CI)();if(t.success){r(null);try{localStorage.removeItem("ab_user_cache")}catch(e){console.warn("[AUTH] Erreur lors de la suppression du cache:",e)}}return t}catch(e){return console.error("[AUTH] Erreur lors de la d\xe9connexion:",e.message),{success:!1,error:e.message}}},refreshUser:async()=>{if(!lt.ND)return{success:!1,error:"Supabase non configur\xe9"};try{const e=await(0,ct.HW)();return e.success&&e.user&&r(e.user),e}catch(e){return console.error("[AUTH] Erreur lors du rafra\xeechissement:",e.message),{success:!1,error:e.message}}},forceRefreshRole:async()=>{if(!lt.ND||!s)return{success:!1,error:"Utilisateur non connect\xe9"};try{console.log("[AUTH] \ud83d\udd04 For\xe7age de la r\xe9cup\xe9ration du r\xf4le depuis la DB...");const{data:e,error:t}=await lt.ND.from("users").select("role, first_name, last_name").eq("id",s.id).single();if(t||!e)return console.error("[AUTH] Erreur r\xe9cup\xe9ration r\xf4le DB:",t),{success:!1,error:"Impossible de r\xe9cup\xe9rer le r\xf4le"};console.log("[AUTH] \u2705 R\xf4le r\xe9cup\xe9r\xe9 depuis la DB:",e.role);const n=(0,d.A)((0,d.A)({},s),{},{role:e.role,firstName:e.first_name,lastName:e.last_name});return r(n),localStorage.setItem("ab_user_cache",JSON.stringify({id:n.id,email:n.email,role:e.role,first_name:e.first_name||"",last_name:e.last_name||""})),localStorage.setItem("ab_user_cache_time",Date.now().toString()),console.log("[AUTH] \u2705 R\xf4le mis \xe0 jour:",e.role),{success:!0,role:e.role}}catch(e){return console.error("[AUTH] Erreur lors du for\xe7age du r\xf4le:",e),{success:!1,error:e.message}}},setUser:r};return(0,i.jsx)(dt.Provider,{value:l,children:t})};var mt=s(917),pt=s(3797);const ft=(0,pt.A)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),gt=(0,pt.A)("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),xt=(0,pt.A)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),vt=e=>{let{message:t,type:s="info",duration:r=5e3,onClose:a}=e;(0,n.useEffect)(()=>{const e=setTimeout(()=>{a()},r);return()=>clearTimeout(e)},[r,a]);return(0,i.jsxs)("div",{className:"fixed top-4 right-4 z-50 max-w-sm w-full ".concat((()=>{switch(s){case"success":return"bg-green-50 border-green-200";case"error":return"bg-red-50 border-red-200";case"warning":return"bg-yellow-50 border-yellow-200";default:return"bg-blue-50 border-blue-200"}})()," border rounded-2xl shadow-2xl backdrop-blur-xl"),children:[(0,i.jsxs)("div",{className:"flex items-start p-4",children:[(0,i.jsx)("div",{className:"flex-shrink-0 mr-3 mt-0.5",children:(()=>{switch(s){case"success":return(0,i.jsx)(mt.A,{size:20,className:"text-green-600"});case"error":return(0,i.jsx)(ft,{size:20,className:"text-red-600"});case"warning":return(0,i.jsx)(ft,{size:20,className:"text-yellow-600"});default:return(0,i.jsx)(gt,{size:20,className:"text-blue-600"})}})()}),(0,i.jsx)("div",{className:"flex-1 min-w-0",children:(0,i.jsx)("p",{className:"text-sm font-medium text-gray-900",children:t})}),(0,i.jsx)("div",{className:"flex-shrink-0 ml-3",children:(0,i.jsx)("button",{onClick:a,className:"inline-flex text-gray-400 hover:text-gray-600 transition-colors duration-200",children:(0,i.jsx)(xt,{size:16})})})]}),(0,i.jsx)("div",{className:"h-1 bg-gray-200 rounded-b-2xl overflow-hidden",children:(0,i.jsx)("div",{className:"h-full ".concat("success"===s?"bg-green-500":"error"===s?"bg-red-500":"warning"===s?"bg-yellow-500":"bg-blue-500")})})]})},bt=(0,n.createContext)(),yt=()=>{const e=(0,n.useContext)(bt);if(!e)throw new Error("useNotifications must be used within a NotificationProvider");return e},jt=e=>{let{children:t}=e;const[s,r]=(0,n.useState)([]),[a,o]=(0,n.useState)(0),[l,c]=(0,n.useState)([]);(0,n.useEffect)(()=>{const e=s.filter(e=>!e.read).length;o(e)},[s]);const u=(0,n.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;try{if(!lt.ND)return void console.log("[NOTIFICATIONS] Supabase non configur\xe9 - skip chargement");let t=lt.ND.from("notifications").select("*").order("created_at",{ascending:!1}).limit(50);e&&(t=t.eq("user_id",e));const{data:s,error:n}=await t;if(n)return void console.error("[NOTIFICATIONS] Erreur lors du chargement:",n);if(s){const e=s.map(e=>({id:e.id,title:e.title,message:e.message,type:e.type||"info",priority:e.priority||"medium",read:e.read||!1,timestamp:e.created_at,data:e.data||{},action:e.action||null}));r(e)}}catch(t){console.error("[NOTIFICATIONS] Erreur lors du chargement:",t)}},[]),h=(0,n.useCallback)(async e=>{try{if(!lt.ND){console.log("[NOTIFICATIONS] Supabase non configur\xe9 - notification locale seulement");const t={id:Date.now()+Math.random(),title:e.title,message:e.message,type:e.type||"info",priority:e.priority||"medium",read:!1,data:e.data||{},action:e.action||null,user_id:e.userId||null,created_at:(new Date).toISOString(),timestamp:(new Date).toISOString()};return void r(s=>s.some(t=>t.title===e.title&&t.message===e.message&&Date.now()-new Date(t.timestamp).getTime()<6e4)?s:[t,...s.slice(0,49)])}const t={title:e.title,message:e.message,type:e.type||"info",priority:e.priority||"medium",read:!1,data:e.data||{},action:e.action||null,user_id:e.userId||null,created_at:(new Date).toISOString()},{data:s,error:n}=await lt.ND.from("notifications").insert([t]).select().single();if(n)return void console.error("[NOTIFICATIONS] Erreur lors de la sauvegarde:",n);const a=(0,d.A)((0,d.A)({id:s.id},t),{},{timestamp:s.created_at});r(t=>t.some(t=>t.title===e.title&&t.message===e.message&&Date.now()-new Date(t.timestamp).getTime()<6e4)?t:[a,...t.slice(0,49)])}catch(t){console.error("[NOTIFICATIONS] Erreur lors de l'ajout:",t)}},[]),m=(0,n.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;await u(e)},[u]),p=(0,n.useCallback)(e=>{c(t=>t.filter(t=>t.id!==e))},[]),f=(0,n.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5e3;const n=Date.now()+Math.random(),r={id:n,message:e,type:t,duration:s};c(e=>[...e,r]),setTimeout(()=>{p(n)},s)},[p]),g=(0,n.useCallback)(e=>{f(e,"success")},[f]),x=(0,n.useCallback)(e=>{f(e,"error")},[f]),v=(0,n.useCallback)(e=>{f(e,"warning")},[f]),b=(0,n.useCallback)(e=>{f(e,"info")},[f]),y={notifications:s,unreadCount:a,addNotification:h,markAsRead:async e=>{try{if(!lt.ND)return void r(t=>t.map(t=>t.id===e?(0,d.A)((0,d.A)({},t),{},{read:!0}):t));const{error:t}=await lt.ND.from("notifications").update({read:!0}).eq("id",e);if(t)return void console.error("[NOTIFICATIONS] Erreur lors de la mise \xe0 jour:",t);r(t=>t.map(t=>t.id===e?(0,d.A)((0,d.A)({},t),{},{read:!0}):t))}catch(t){console.error("[NOTIFICATIONS] Erreur lors de la mise \xe0 jour:",t)}},markAllAsRead:async()=>{try{if(!lt.ND)return void r(e=>e.map(e=>(0,d.A)((0,d.A)({},e),{},{read:!0})));const{error:e}=await lt.ND.from("notifications").update({read:!0}).eq("read",!1);if(e)return void console.error("[NOTIFICATIONS] Erreur lors de la mise \xe0 jour globale:",e);r(e=>e.map(e=>(0,d.A)((0,d.A)({},e),{},{read:!0})))}catch(e){console.error("[NOTIFICATIONS] Erreur lors de la mise \xe0 jour globale:",e)}},removeNotification:async e=>{try{if(!lt.ND)return void r(t=>t.filter(t=>t.id!==e));const{error:t}=await lt.ND.from("notifications").delete().eq("id",e);if(t)return void console.error("[NOTIFICATIONS] Erreur lors de la suppression:",t);r(t=>t.filter(t=>t.id!==e))}catch(t){console.error("[NOTIFICATIONS] Erreur lors de la suppression:",t)}},clearAllNotifications:async()=>{try{if(!lt.ND)return void r([]);const{error:e}=await lt.ND.from("notifications").delete().neq("id",0);if(e)return void console.error("[NOTIFICATIONS] Erreur lors de la suppression globale:",e);r([])}catch(e){console.error("[NOTIFICATIONS] Erreur lors de la suppression globale:",e)}},clearReadNotifications:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;try{if(!lt.ND)return void r(e=>e.filter(e=>!e.read));let t=lt.ND.from("notifications").delete().eq("read",!0);e&&(t=t.eq("user_id",e));const{error:s}=await t;if(s)return void console.error("[NOTIFICATIONS] Erreur lors de la suppression des notifications lues:",s);r(e=>e.filter(e=>!e.read)),console.log("[NOTIFICATIONS] Notifications lues supprim\xe9es avec succ\xe8s")}catch(t){console.error("[NOTIFICATIONS] Erreur lors de la suppression des notifications lues:",t)}},refreshNotifications:m,showToast:f,showSuccess:g,showError:x,showWarning:v,showInfo:b};return(0,i.jsxs)(bt.Provider,{value:y,children:[t,(0,i.jsx)("div",{className:"fixed top-4 right-4 z-50 space-y-2",children:l.map(e=>(0,i.jsx)(vt,{message:e.message,type:e.type,duration:e.duration,onClose:()=>p(e.id)},e.id))})]})};var wt=s(7528);let Nt={data:""},St=e=>"object"==typeof window?((e?e.querySelector("#_goober"):window._goober)||Object.assign((e||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:e||Nt,kt=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,At=/\/\*[^]*?\*\/|  +/g,_t=/\n+/g,Et=(e,t)=>{let s="",n="",r="";for(let a in e){let i=e[a];"@"==a[0]?"i"==a[1]?s=a+" "+i+";":n+="f"==a[1]?Et(i,a):a+"{"+Et(i,"k"==a[1]?"":t)+"}":"object"==typeof i?n+=Et(i,t?t.replace(/([^,])+/g,e=>a.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,t=>/&/.test(t)?t.replace(/&/g,e):e?e+" "+t:t)):a):null!=i&&(a=/^--/.test(a)?a:a.replace(/[A-Z]/g,"-$&").toLowerCase(),r+=Et.p?Et.p(a,i):a+":"+i+";")}return s+(t&&r?t+"{"+r+"}":r)+n},Ct={},Pt=e=>{if("object"==typeof e){let t="";for(let s in e)t+=s+Pt(e[s]);return t}return e},Tt=(e,t,s,n,r)=>{let a=Pt(e),i=Ct[a]||(Ct[a]=(e=>{let t=0,s=11;for(;t<e.length;)s=101*s+e.charCodeAt(t++)>>>0;return"go"+s})(a));if(!Ct[i]){let t=a!==e?e:(e=>{let t,s,n=[{}];for(;t=kt.exec(e.replace(At,""));)t[4]?n.shift():t[3]?(s=t[3].replace(_t," ").trim(),n.unshift(n[0][s]=n[0][s]||{})):n[0][t[1]]=t[2].replace(_t," ").trim();return n[0]})(e);Ct[i]=Et(r?{["@keyframes "+i]:t}:t,s?"":"."+i)}let o=s&&Ct.g?Ct.g:null;return s&&(Ct.g=Ct[i]),((e,t,s,n)=>{n?t.data=t.data.replace(n,e):-1===t.data.indexOf(e)&&(t.data=s?e+t.data:t.data+e)})(Ct[i],t,n,o),i};function It(e){let t=this||{},s=e.call?e(t.p):e;return Tt(s.unshift?s.raw?((e,t,s)=>e.reduce((e,n,r)=>{let a=t[r];if(a&&a.call){let e=a(s),t=e&&e.props&&e.props.className||/^go/.test(e)&&e;a=t?"."+t:e&&"object"==typeof e?e.props?"":Et(e,""):!1===e?"":e}return e+n+(null==a?"":a)},""))(s,[].slice.call(arguments,1),t.p):s.reduce((e,s)=>Object.assign(e,s&&s.call?s(t.p):s),{}):s,St(t.target),t.g,t.o,t.k)}It.bind({g:1});let Rt,Dt,Ot,Lt=It.bind({k:1});function Mt(e,t){let s=this||{};return function(){let n=arguments;function r(a,i){let o=Object.assign({},a),l=o.className||r.className;s.p=Object.assign({theme:Dt&&Dt()},o),s.o=/ *go\d+/.test(l),o.className=It.apply(s,n)+(l?" "+l:""),t&&(o.ref=i);let c=e;return e[0]&&(c=o.as||e,delete o.as),Ot&&c[0]&&Ot(o),Rt(c,o)}return t?t(r):r}}var zt,Ft,Ut,Bt,qt,Vt,Ht,Wt,Gt,Kt,Zt,Jt,Qt,Yt,$t,Xt,es=(e,t)=>(e=>"function"==typeof e)(e)?e(t):e,ts=(()=>{let e=0;return()=>(++e).toString()})(),ss=(()=>{let e;return()=>{if(void 0===e&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),ns="default",rs=(e,t)=>{let{toastLimit:s}=e.settings;switch(t.type){case 0:return(0,d.A)((0,d.A)({},e),{},{toasts:[t.toast,...e.toasts].slice(0,s)});case 1:return(0,d.A)((0,d.A)({},e),{},{toasts:e.toasts.map(e=>e.id===t.toast.id?(0,d.A)((0,d.A)({},e),t.toast):e)});case 2:let{toast:n}=t;return rs(e,{type:e.toasts.find(e=>e.id===n.id)?1:0,toast:n});case 3:let{toastId:r}=t;return(0,d.A)((0,d.A)({},e),{},{toasts:e.toasts.map(e=>e.id===r||void 0===r?(0,d.A)((0,d.A)({},e),{},{dismissed:!0,visible:!1}):e)});case 4:return void 0===t.toastId?(0,d.A)((0,d.A)({},e),{},{toasts:[]}):(0,d.A)((0,d.A)({},e),{},{toasts:e.toasts.filter(e=>e.id!==t.toastId)});case 5:return(0,d.A)((0,d.A)({},e),{},{pausedAt:t.time});case 6:let a=t.time-(e.pausedAt||0);return(0,d.A)((0,d.A)({},e),{},{pausedAt:void 0,toasts:e.toasts.map(e=>(0,d.A)((0,d.A)({},e),{},{pauseDuration:e.pauseDuration+a}))})}},as=[],is={toasts:[],pausedAt:void 0,settings:{toastLimit:20}},os={},ls=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ns;os[t]=rs(os[t]||is,e),as.forEach(e=>{let[s,n]=e;s===t&&n(os[t])})},cs=e=>Object.keys(os).forEach(t=>ls(e,t)),ds=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ns;return t=>{ls(t,e)}},us={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},hs=e=>(t,s)=>{let n=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"blank",s=arguments.length>2?arguments[2]:void 0;return(0,d.A)((0,d.A)({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0},s),{},{id:(null==s?void 0:s.id)||ts()})}(t,e,s);return ds(n.toasterId||(e=>Object.keys(os).find(t=>os[t].toasts.some(t=>t.id===e)))(n.id))({type:2,toast:n}),n.id},ms=(e,t)=>hs("blank")(e,t);ms.error=hs("error"),ms.success=hs("success"),ms.loading=hs("loading"),ms.custom=hs("custom"),ms.dismiss=(e,t)=>{let s={type:3,toastId:e};t?ds(t)(s):cs(s)},ms.dismissAll=e=>ms.dismiss(void 0,e),ms.remove=(e,t)=>{let s={type:4,toastId:e};t?ds(t)(s):cs(s)},ms.removeAll=e=>ms.remove(void 0,e),ms.promise=(e,t,s)=>{let n=ms.loading(t.loading,(0,d.A)((0,d.A)({},s),null==s?void 0:s.loading));return"function"==typeof e&&(e=e()),e.then(e=>{let r=t.success?es(t.success,e):void 0;return r?ms.success(r,(0,d.A)((0,d.A)({id:n},s),null==s?void 0:s.success)):ms.dismiss(n),e}).catch(e=>{let r=t.error?es(t.error,e):void 0;r?ms.error(r,(0,d.A)((0,d.A)({id:n},s),null==s?void 0:s.error)):ms.dismiss(n)}),e};var ps=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",{toasts:s,pausedAt:r}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ns,[s,r]=(0,n.useState)(os[t]||is),a=(0,n.useRef)(os[t]);(0,n.useEffect)(()=>(a.current!==os[t]&&r(os[t]),as.push([t,r]),()=>{let e=as.findIndex(e=>{let[s]=e;return s===t});e>-1&&as.splice(e,1)}),[t]);let i=s.toasts.map(t=>{var s,n,r;return(0,d.A)((0,d.A)((0,d.A)((0,d.A)({},e),e[t.type]),t),{},{removeDelay:t.removeDelay||(null==(s=e[t.type])?void 0:s.removeDelay)||(null==e?void 0:e.removeDelay),duration:t.duration||(null==(n=e[t.type])?void 0:n.duration)||(null==e?void 0:e.duration)||us[t.type],style:(0,d.A)((0,d.A)((0,d.A)({},e.style),null==(r=e[t.type])?void 0:r.style),t.style)})});return(0,d.A)((0,d.A)({},s),{},{toasts:i})}(e,t),a=(0,n.useRef)(new Map).current,i=(0,n.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;if(a.has(e))return;let s=setTimeout(()=>{a.delete(e),o({type:4,toastId:e})},t);a.set(e,s)},[]);(0,n.useEffect)(()=>{if(r)return;let e=Date.now(),n=s.map(s=>{if(s.duration===1/0)return;let n=(s.duration||0)+s.pauseDuration-(e-s.createdAt);if(!(n<0))return setTimeout(()=>ms.dismiss(s.id,t),n);s.visible&&ms.dismiss(s.id)});return()=>{n.forEach(e=>e&&clearTimeout(e))}},[s,r,t]);let o=(0,n.useCallback)(ds(t),[t]),l=(0,n.useCallback)(()=>{o({type:5,time:Date.now()})},[o]),c=(0,n.useCallback)((e,t)=>{o({type:1,toast:{id:e,height:t}})},[o]),u=(0,n.useCallback)(()=>{r&&o({type:6,time:Date.now()})},[r,o]),h=(0,n.useCallback)((e,t)=>{let{reverseOrder:n=!1,gutter:r=8,defaultPosition:a}=t||{},i=s.filter(t=>(t.position||a)===(e.position||a)&&t.height),o=i.findIndex(t=>t.id===e.id),l=i.filter((e,t)=>t<o&&e.visible).length;return i.filter(e=>e.visible).slice(...n?[l+1]:[0,l]).reduce((e,t)=>e+(t.height||0)+r,0)},[s]);return(0,n.useEffect)(()=>{s.forEach(e=>{if(e.dismissed)i(e.id,e.removeDelay);else{let t=a.get(e.id);t&&(clearTimeout(t),a.delete(e.id))}})},[s,i]),{toasts:s,handlers:{updateHeight:c,startPause:l,endPause:u,calculateOffset:h}}},fs=Lt(zt||(zt=(0,wt.A)(["\nfrom {\n  transform: scale(0) rotate(45deg);\n\topacity: 0;\n}\nto {\n transform: scale(1) rotate(45deg);\n  opacity: 1;\n}"]))),gs=Lt(Ft||(Ft=(0,wt.A)(["\nfrom {\n  transform: scale(0);\n  opacity: 0;\n}\nto {\n  transform: scale(1);\n  opacity: 1;\n}"]))),xs=Lt(Ut||(Ut=(0,wt.A)(["\nfrom {\n  transform: scale(0) rotate(90deg);\n\topacity: 0;\n}\nto {\n  transform: scale(1) rotate(90deg);\n\topacity: 1;\n}"]))),vs=Mt("div")(Bt||(Bt=(0,wt.A)(["\n  width: 20px;\n  opacity: 0;\n  height: 20px;\n  border-radius: 10px;\n  background: ",";\n  position: relative;\n  transform: rotate(45deg);\n\n  animation: "," 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)\n    forwards;\n  animation-delay: 100ms;\n\n  &:after,\n  &:before {\n    content: '';\n    animation: "," 0.15s ease-out forwards;\n    animation-delay: 150ms;\n    position: absolute;\n    border-radius: 3px;\n    opacity: 0;\n    background: ",";\n    bottom: 9px;\n    left: 4px;\n    height: 2px;\n    width: 12px;\n  }\n\n  &:before {\n    animation: "," 0.15s ease-out forwards;\n    animation-delay: 180ms;\n    transform: rotate(90deg);\n  }\n"])),e=>e.primary||"#ff4b4b",fs,gs,e=>e.secondary||"#fff",xs),bs=Lt(qt||(qt=(0,wt.A)(["\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n"]))),ys=Mt("div")(Vt||(Vt=(0,wt.A)(["\n  width: 12px;\n  height: 12px;\n  box-sizing: border-box;\n  border: 2px solid;\n  border-radius: 100%;\n  border-color: ",";\n  border-right-color: ",";\n  animation: "," 1s linear infinite;\n"])),e=>e.secondary||"#e0e0e0",e=>e.primary||"#616161",bs),js=Lt(Ht||(Ht=(0,wt.A)(["\nfrom {\n  transform: scale(0) rotate(45deg);\n\topacity: 0;\n}\nto {\n  transform: scale(1) rotate(45deg);\n\topacity: 1;\n}"]))),ws=Lt(Wt||(Wt=(0,wt.A)(["\n0% {\n\theight: 0;\n\twidth: 0;\n\topacity: 0;\n}\n40% {\n  height: 0;\n\twidth: 6px;\n\topacity: 1;\n}\n100% {\n  opacity: 1;\n  height: 10px;\n}"]))),Ns=Mt("div")(Gt||(Gt=(0,wt.A)(["\n  width: 20px;\n  opacity: 0;\n  height: 20px;\n  border-radius: 10px;\n  background: ",";\n  position: relative;\n  transform: rotate(45deg);\n\n  animation: "," 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)\n    forwards;\n  animation-delay: 100ms;\n  &:after {\n    content: '';\n    box-sizing: border-box;\n    animation: "," 0.2s ease-out forwards;\n    opacity: 0;\n    animation-delay: 200ms;\n    position: absolute;\n    border-right: 2px solid;\n    border-bottom: 2px solid;\n    border-color: ",";\n    bottom: 6px;\n    left: 6px;\n    height: 10px;\n    width: 6px;\n  }\n"])),e=>e.primary||"#61d345",js,ws,e=>e.secondary||"#fff"),Ss=Mt("div")(Kt||(Kt=(0,wt.A)(["\n  position: absolute;\n"]))),ks=Mt("div")(Zt||(Zt=(0,wt.A)(["\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  min-width: 20px;\n  min-height: 20px;\n"]))),As=Lt(Jt||(Jt=(0,wt.A)(["\nfrom {\n  transform: scale(0.6);\n  opacity: 0.4;\n}\nto {\n  transform: scale(1);\n  opacity: 1;\n}"]))),_s=Mt("div")(Qt||(Qt=(0,wt.A)(["\n  position: relative;\n  transform: scale(0.6);\n  opacity: 0.4;\n  min-width: 20px;\n  animation: "," 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)\n    forwards;\n"])),As),Es=e=>{let{toast:t}=e,{icon:s,type:r,iconTheme:a}=t;return void 0!==s?"string"==typeof s?n.createElement(_s,null,s):s:"blank"===r?null:n.createElement(ks,null,n.createElement(ys,(0,d.A)({},a)),"loading"!==r&&n.createElement(Ss,null,"error"===r?n.createElement(vs,(0,d.A)({},a)):n.createElement(Ns,(0,d.A)({},a))))},Cs=e=>"\n0% {transform: translate3d(0,".concat(-200*e,"%,0) scale(.6); opacity:.5;}\n100% {transform: translate3d(0,0,0) scale(1); opacity:1;}\n"),Ps=e=>"\n0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}\n100% {transform: translate3d(0,".concat(-150*e,"%,-1px) scale(.6); opacity:0;}\n"),Ts=Mt("div")(Yt||(Yt=(0,wt.A)(["\n  display: flex;\n  align-items: center;\n  background: #fff;\n  color: #363636;\n  line-height: 1.3;\n  will-change: transform;\n  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);\n  max-width: 350px;\n  pointer-events: auto;\n  padding: 8px 10px;\n  border-radius: 8px;\n"]))),Is=Mt("div")($t||($t=(0,wt.A)(["\n  display: flex;\n  justify-content: center;\n  margin: 4px 10px;\n  color: inherit;\n  flex: 1 1 auto;\n  white-space: pre-line;\n"]))),Rs=n.memo(e=>{let{toast:t,position:s,style:r,children:a}=e,i=t.height?((e,t)=>{let s=e.includes("top")?1:-1,[n,r]=ss()?["0%{opacity:0;} 100%{opacity:1;}","0%{opacity:1;} 100%{opacity:0;}"]:[Cs(s),Ps(s)];return{animation:t?"".concat(Lt(n)," 0.35s cubic-bezier(.21,1.02,.73,1) forwards"):"".concat(Lt(r)," 0.4s forwards cubic-bezier(.06,.71,.55,1)")}})(t.position||s||"top-center",t.visible):{opacity:0},o=n.createElement(Es,{toast:t}),l=n.createElement(Is,(0,d.A)({},t.ariaProps),es(t.message,t));return n.createElement(Ts,{className:t.className,style:(0,d.A)((0,d.A)((0,d.A)({},i),r),t.style)},"function"==typeof a?a({icon:o,message:l}):n.createElement(n.Fragment,null,o,l))});!function(e,t,s,n){Et.p=t,Rt=e,Dt=s,Ot=n}(n.createElement);var Ds=e=>{let{id:t,className:s,style:r,onHeightUpdate:a,children:i}=e,o=n.useCallback(e=>{if(e){let s=()=>{let s=e.getBoundingClientRect().height;a(t,s)};s(),new MutationObserver(s).observe(e,{subtree:!0,childList:!0,characterData:!0})}},[t,a]);return n.createElement("div",{ref:o,className:s,style:r},i)},Os=It(Xt||(Xt=(0,wt.A)(["\n  z-index: 9999;\n  > * {\n    pointer-events: auto;\n  }\n"]))),Ls=e=>{let{reverseOrder:t,position:s="top-center",toastOptions:r,gutter:a,children:i,toasterId:o,containerStyle:l,containerClassName:c}=e,{toasts:u,handlers:h}=ps(r,o);return n.createElement("div",{"data-rht-toaster":o||"",style:(0,d.A)({position:"fixed",zIndex:9999,top:16,left:16,right:16,bottom:16,pointerEvents:"none"},l),className:c,onMouseEnter:h.startPause,onMouseLeave:h.endPause},u.map(e=>{let r=e.position||s,o=((e,t)=>{let s=e.includes("top"),n=s?{top:0}:{bottom:0},r=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return(0,d.A)((0,d.A)({left:0,right:0,display:"flex",position:"absolute",transition:ss()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:"translateY(".concat(t*(s?1:-1),"px)")},n),r)})(r,h.calculateOffset(e,{reverseOrder:t,gutter:a,defaultPosition:s}));return n.createElement(Ds,{id:e.id,key:e.id,onHeightUpdate:h.updateHeight,className:e.visible?Os:"",style:o},"custom"===e.type?es(e.message,e):i?i(e):n.createElement(Rs,{toast:e,position:r}))}))},Ms=ms;const zs=12e4;var Fs=s(2285);const Us=function(e){const t=[];let s=0;for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);r<128?t[s++]=r:r<2048?(t[s++]=r>>6|192,t[s++]=63&r|128):55296===(64512&r)&&n+1<e.length&&56320===(64512&e.charCodeAt(n+1))?(r=65536+((1023&r)<<10)+(1023&e.charCodeAt(++n)),t[s++]=r>>18|240,t[s++]=r>>12&63|128,t[s++]=r>>6&63|128,t[s++]=63&r|128):(t[s++]=r>>12|224,t[s++]=r>>6&63|128,t[s++]=63&r|128)}return t},Bs={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const s=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let r=0;r<e.length;r+=3){const t=e[r],a=r+1<e.length,i=a?e[r+1]:0,o=r+2<e.length,l=o?e[r+2]:0,c=t>>2,d=(3&t)<<4|i>>4;let u=(15&i)<<2|l>>6,h=63&l;o||(h=64,a||(u=64)),n.push(s[c],s[d],s[u],s[h])}return n.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Us(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let s=0,n=0;for(;s<e.length;){const r=e[s++];if(r<128)t[n++]=String.fromCharCode(r);else if(r>191&&r<224){const a=e[s++];t[n++]=String.fromCharCode((31&r)<<6|63&a)}else if(r>239&&r<365){const a=((7&r)<<18|(63&e[s++])<<12|(63&e[s++])<<6|63&e[s++])-65536;t[n++]=String.fromCharCode(55296+(a>>10)),t[n++]=String.fromCharCode(56320+(1023&a))}else{const a=e[s++],i=e[s++];t[n++]=String.fromCharCode((15&r)<<12|(63&a)<<6|63&i)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const s=t?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let r=0;r<e.length;){const t=s[e.charAt(r++)],a=r<e.length?s[e.charAt(r)]:0;++r;const i=r<e.length?s[e.charAt(r)]:64;++r;const o=r<e.length?s[e.charAt(r)]:64;if(++r,null==t||null==a||null==i||null==o)throw new qs;const l=t<<2|a>>4;if(n.push(l),64!==i){const e=a<<4&240|i>>2;if(n.push(e),64!==o){const e=i<<6&192|o;n.push(e)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class qs extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Vs=function(e){return function(e){const t=Us(e);return Bs.encodeByteArray(t,!0)}(e).replace(/\./g,"")},Hs=function(e){try{return Bs.decodeString(e,!0)}catch(Nt){console.error("base64Decode failed: ",Nt)}return null};const Ws=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof s.g)return s.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,Gs=()=>{try{return Ws()||(()=>{if("undefined"===typeof Fs)return;const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_BACKEND_URL:"http://localhost:5000",REACT_APP_FIREBASE_VAPID_KEY:"BJfHsbhtQhWA-laTTi9Ffq36xHSO8ylv-T4aU5Db6xlN5xhGqXBKtDtzcAi8qdiXimz6S-M2PxjgxNNXFftfGvQ",REACT_APP_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRsZ2ZoZ2NjenFlZmJ1aGN5YXpoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ2MDM3NjQsImV4cCI6MjA3MDE3OTc2NH0.ILqv7fUAP8KAr0GzkqeqaRqDcbKcPhcHtIQR7PYFIgY",REACT_APP_SUPABASE_URL:"https://dlgfhgcczqefbuhcyazh.supabase.co"}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(Nt){return}const t=e&&Hs(e[1]);return t&&JSON.parse(t)})()}catch(Nt){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(Nt))}},Ks=()=>{var e;return null===(e=Gs())||void 0===e?void 0:e.config};class Zs{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),"function"===typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,s))}}}function Js(){try{return"object"===typeof indexedDB}catch(Nt){return!1}}function Qs(){return new Promise((e,t)=>{try{let s=!0;const n="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(n);r.onsuccess=()=>{r.result.close(),s||self.indexedDB.deleteDatabase(n),e(!0)},r.onupgradeneeded=()=>{s=!1},r.onerror=()=>{var e;t((null===(e=r.error)||void 0===e?void 0:e.message)||"")}}catch(s){t(s)}})}class Ys extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name="FirebaseError",Object.setPrototypeOf(this,Ys.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,$s.prototype.create)}}class $s{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},s="".concat(this.service,"/").concat(e),n=this.errors[e],r=n?function(e,t){return e.replace(Xs,(e,s)=>{const n=t[s];return null!=n?String(n):"<".concat(s,"?>")})}(n,t):"Error",a="".concat(this.serviceName,": ").concat(r," (").concat(s,").");return new Ys(s,a,t)}}const Xs=/\{\$([^}]+)}/g;function en(e,t){if(e===t)return!0;const s=Object.keys(e),n=Object.keys(t);for(const r of s){if(!n.includes(r))return!1;const s=e[r],a=t[r];if(tn(s)&&tn(a)){if(!en(s,a))return!1}else if(s!==a)return!1}for(const r of n)if(!s.includes(r))return!1;return!0}function tn(e){return null!==e&&"object"===typeof e}function sn(e){return e&&e._delegate?e._delegate:e}class nn{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const rn="[DEFAULT]";class an{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new Zs;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&e.resolve(s)}catch(Nt){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const s=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),n=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(s)&&!this.shouldAutoInitialize()){if(n)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:s})}catch(Nt){if(n)return null;throw Nt}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:rn})}catch(Nt){}for(const[e,t]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:s});t.resolve(e)}catch(Nt){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rn;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rn;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rn;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error("".concat(this.name,"(").concat(s,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const n=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[r,a]of this.instancesDeferred.entries()){s===this.normalizeInstanceIdentifier(r)&&a.resolve(n)}return n}onInit(e,t){var s;const n=this.normalizeInstanceIdentifier(t),r=null!==(s=this.onInitCallbacks.get(n))&&void 0!==s?s:new Set;r.add(e),this.onInitCallbacks.set(n,r);const a=this.instances.get(n);return a&&e(a,n),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const r of s)try{r(e,t)}catch(n){}}getOrInitializeService(e){let{instanceIdentifier:t,options:s={}}=e,n=this.instances.get(t);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(r=t,r===rn?void 0:r),options:s}),this.instances.set(t,n),this.instancesOptions.set(t,s),this.invokeOnInitCallbacks(n,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,n)}catch(a){}var r;return n||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rn;return this.component?this.component.multipleInstances?e:rn:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class on{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new an(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const ln=[];var cn;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(cn||(cn={}));const dn={debug:cn.DEBUG,verbose:cn.VERBOSE,info:cn.INFO,warn:cn.WARN,error:cn.ERROR,silent:cn.SILENT},un=cn.INFO,hn={[cn.DEBUG]:"log",[cn.VERBOSE]:"log",[cn.INFO]:"info",[cn.WARN]:"warn",[cn.ERROR]:"error"},mn=function(e,t){if(t<e.logLevel)return;const s=(new Date).toISOString(),n=hn[t];if(!n)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var r=arguments.length,a=new Array(r>2?r-2:0),i=2;i<r;i++)a[i-2]=arguments[i];console[n]("[".concat(s,"]  ").concat(e.name,":"),...a)};let pn,fn;const gn=new WeakMap,xn=new WeakMap,vn=new WeakMap,bn=new WeakMap,yn=new WeakMap;let jn={get(e,t,s){if(e instanceof IDBTransaction){if("done"===t)return xn.get(e);if("objectStoreNames"===t)return e.objectStoreNames||vn.get(e);if("store"===t)return s.objectStoreNames[1]?void 0:s.objectStore(s.objectStoreNames[0])}return Sn(e[t])},set:(e,t,s)=>(e[t]=s,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function wn(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(fn||(fn=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,s=new Array(t),n=0;n<t;n++)s[n]=arguments[n];return e.apply(kn(this),s),Sn(gn.get(this))}:function(){for(var t=arguments.length,s=new Array(t),n=0;n<t;n++)s[n]=arguments[n];return Sn(e.apply(kn(this),s))}:function(t){for(var s=arguments.length,n=new Array(s>1?s-1:0),r=1;r<s;r++)n[r-1]=arguments[r];const a=e.call(kn(this),t,...n);return vn.set(a,t.sort?t.sort():[t]),Sn(a)}}function Nn(e){return"function"===typeof e?wn(e):(e instanceof IDBTransaction&&function(e){if(xn.has(e))return;const t=new Promise((t,s)=>{const n=()=>{e.removeEventListener("complete",r),e.removeEventListener("error",a),e.removeEventListener("abort",a)},r=()=>{t(),n()},a=()=>{s(e.error||new DOMException("AbortError","AbortError")),n()};e.addEventListener("complete",r),e.addEventListener("error",a),e.addEventListener("abort",a)});xn.set(e,t)}(e),t=e,(pn||(pn=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,jn):e);var t}function Sn(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,s)=>{const n=()=>{e.removeEventListener("success",r),e.removeEventListener("error",a)},r=()=>{t(Sn(e.result)),n()},a=()=>{s(e.error),n()};e.addEventListener("success",r),e.addEventListener("error",a)});return t.then(t=>{t instanceof IDBCursor&&gn.set(t,e)}).catch(()=>{}),yn.set(t,e),t}(e);if(bn.has(e))return bn.get(e);const t=Nn(e);return t!==e&&(bn.set(e,t),yn.set(t,e)),t}const kn=e=>yn.get(e);function An(e,t){let{blocked:s,upgrade:n,blocking:r,terminated:a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=indexedDB.open(e,t),o=Sn(i);return n&&i.addEventListener("upgradeneeded",e=>{n(Sn(i.result),e.oldVersion,e.newVersion,Sn(i.transaction),e)}),s&&i.addEventListener("blocked",e=>s(e.oldVersion,e.newVersion,e)),o.then(e=>{a&&e.addEventListener("close",()=>a()),r&&e.addEventListener("versionchange",e=>r(e.oldVersion,e.newVersion,e))}).catch(()=>{}),o}function _n(e){let{blocked:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=indexedDB.deleteDatabase(e);return t&&s.addEventListener("blocked",e=>t(e.oldVersion,e)),Sn(s).then(()=>{})}const En=["get","getKey","getAll","getAllKeys","count"],Cn=["put","add","delete","clear"],Pn=new Map;function Tn(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(Pn.get(t))return Pn.get(t);const s=t.replace(/FromIndex$/,""),n=t!==s,r=Cn.includes(s);if(!(s in(n?IDBIndex:IDBObjectStore).prototype)||!r&&!En.includes(s))return;const a=async function(e){const t=this.transaction(e,r?"readwrite":"readonly");let a=t.store;for(var i=arguments.length,o=new Array(i>1?i-1:0),l=1;l<i;l++)o[l-1]=arguments[l];return n&&(a=a.index(o.shift())),(await Promise.all([a[s](...o),r&&t.done]))[0]};return Pn.set(t,a),a}var In;In=e=>(0,d.A)((0,d.A)({},e),{},{get:(t,s,n)=>Tn(t,s)||e.get(t,s,n),has:(t,s)=>!!Tn(t,s)||e.has(t,s)}),jn=In(jn);class Rn{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null}).filter(e=>e).join(" ")}}const Dn="@firebase/app",On="0.14.8",Ln=new class{constructor(e){this.name=e,this._logLevel=un,this._logHandler=mn,this._userLogHandler=null,ln.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in cn))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?dn[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];this._userLogHandler&&this._userLogHandler(this,cn.DEBUG,...t),this._logHandler(this,cn.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];this._userLogHandler&&this._userLogHandler(this,cn.VERBOSE,...t),this._logHandler(this,cn.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];this._userLogHandler&&this._userLogHandler(this,cn.INFO,...t),this._logHandler(this,cn.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];this._userLogHandler&&this._userLogHandler(this,cn.WARN,...t),this._logHandler(this,cn.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];this._userLogHandler&&this._userLogHandler(this,cn.ERROR,...t),this._logHandler(this,cn.ERROR,...t)}}("@firebase/app"),Mn="@firebase/app-compat",zn="@firebase/analytics-compat",Fn="@firebase/analytics",Un="@firebase/app-check-compat",Bn="@firebase/app-check",qn="@firebase/auth",Vn="@firebase/auth-compat",Hn="@firebase/database",Wn="@firebase/data-connect",Gn="@firebase/database-compat",Kn="@firebase/functions",Zn="@firebase/functions-compat",Jn="@firebase/installations",Qn="@firebase/installations-compat",Yn="@firebase/messaging",$n="@firebase/messaging-compat",Xn="@firebase/performance",er="@firebase/performance-compat",tr="@firebase/remote-config",sr="@firebase/remote-config-compat",nr="@firebase/storage",rr="@firebase/storage-compat",ar="@firebase/firestore",ir="@firebase/ai",or="@firebase/firestore-compat",lr="firebase",cr="[DEFAULT]",dr={[Dn]:"fire-core",[Mn]:"fire-core-compat",[Fn]:"fire-analytics",[zn]:"fire-analytics-compat",[Bn]:"fire-app-check",[Un]:"fire-app-check-compat",[qn]:"fire-auth",[Vn]:"fire-auth-compat",[Hn]:"fire-rtdb",[Wn]:"fire-data-connect",[Gn]:"fire-rtdb-compat",[Kn]:"fire-fn",[Zn]:"fire-fn-compat",[Jn]:"fire-iid",[Qn]:"fire-iid-compat",[Yn]:"fire-fcm",[$n]:"fire-fcm-compat",[Xn]:"fire-perf",[er]:"fire-perf-compat",[tr]:"fire-rc",[sr]:"fire-rc-compat",[nr]:"fire-gcs",[rr]:"fire-gcs-compat",[ar]:"fire-fst",[or]:"fire-fst-compat",[ir]:"fire-vertex","fire-js":"fire-js",[lr]:"fire-js-all"},ur=new Map,hr=new Map,mr=new Map;function pr(e,t){try{e.container.addComponent(t)}catch(Nt){Ln.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),Nt)}}function fr(e){const t=e.name;if(mr.has(t))return Ln.debug("There were multiple attempts to register component ".concat(t,".")),!1;mr.set(t,e);for(const s of ur.values())pr(s,e);for(const s of hr.values())pr(s,e);return!0}function gr(e,t){const s=e.container.getProvider("heartbeat").getImmediate({optional:!0});return s&&s.triggerHeartbeat(),e.container.getProvider(t)}const xr=new $s("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class vr{constructor(e,t,s){this._isDeleted=!1,this._options=(0,d.A)({},e),this._config=(0,d.A)({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new nn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw xr.create("app-deleted",{appName:this._name})}}function br(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=e;if("object"!==typeof t){t={name:t}}const n=(0,d.A)({name:cr,automaticDataCollectionEnabled:!0},t),r=n.name;if("string"!==typeof r||!r)throw xr.create("bad-app-name",{appName:String(r)});if(s||(s=Ks()),!s)throw xr.create("no-options");const a=ur.get(r);if(a){if(en(s,a.options)&&en(n,a.config))return a;throw xr.create("duplicate-app",{appName:r})}const i=new on(r);for(const l of mr.values())i.addComponent(l);const o=new vr(s,n,i);return ur.set(r,o),o}function yr(e,t,s){var n;let r=null!==(n=dr[e])&&void 0!==n?n:e;s&&(r+="-".concat(s));const a=r.match(/\s|\//),i=t.match(/\s|\//);if(a||i){const e=['Unable to register library "'.concat(r,'" with version "').concat(t,'":')];return a&&e.push('library name "'.concat(r,'" contains illegal characters (whitespace or "/")')),a&&i&&e.push("and"),i&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Ln.warn(e.join(" "))}fr(new nn("".concat(r,"-version"),()=>({library:r,version:t}),"VERSION"))}const jr="firebase-heartbeat-store";let wr=null;function Nr(){return wr||(wr=An("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(jr)}catch(Nt){console.warn(Nt)}}}).catch(e=>{throw xr.create("idb-open",{originalErrorMessage:e.message})})),wr}async function Sr(e,t){try{const s=(await Nr()).transaction(jr,"readwrite"),n=s.objectStore(jr);await n.put(t,kr(e)),await s.done}catch(Nt){if(Nt instanceof Ys)Ln.warn(Nt.message);else{const t=xr.create("idb-set",{originalErrorMessage:null===Nt||void 0===Nt?void 0:Nt.message});Ln.warn(t.message)}}}function kr(e){return"".concat(e.name,"!").concat(e.options.appId)}class Ar{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Er(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){try{var e;const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),n=_r();var t;if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats))if(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats))return;if(this._heartbeatsCache.lastSentHeartbeatDate===n||this._heartbeatsCache.heartbeats.some(e=>e.date===n))return;if(this._heartbeatsCache.heartbeats.push({date:n,agent:s}),this._heartbeatsCache.heartbeats.length>30){const e=function(e){if(0===e.length)return-1;let t=0,s=e[0].date;for(let n=1;n<e.length;n++)e[n].date<s&&(s=e[n].date,t=n);return t}(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(Nt){Ln.warn(Nt)}}async getHeartbeatsHeader(){try{var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=_r(),{heartbeatsToSend:s,unsentEntries:n}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const s=[];let n=e.slice();for(const r of e){const e=s.find(e=>e.agent===r.agent);if(e){if(e.dates.push(r.date),Cr(s)>t){e.dates.pop();break}}else if(s.push({agent:r.agent,dates:[r.date]}),Cr(s)>t){s.pop();break}n=n.slice(1)}return{heartbeatsToSend:s,unsentEntries:n}}(this._heartbeatsCache.heartbeats),r=Vs(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(Nt){return Ln.warn(Nt),""}}}function _r(){return(new Date).toISOString().substring(0,10)}class Er{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!Js()&&Qs().then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await Nr()).transaction(jr),s=await t.objectStore(jr).get(kr(e));return await t.done,s}catch(Nt){if(Nt instanceof Ys)Ln.warn(Nt.message);else{const t=xr.create("idb-get",{originalErrorMessage:null===Nt||void 0===Nt?void 0:Nt.message});Ln.warn(t.message)}}}(this.app);return null!==e&&void 0!==e&&e.heartbeats?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){var t;const s=await this.read();return Sr(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){if(await this._canUseIndexedDBPromise){var t;const s=await this.read();return Sr(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}}}function Cr(e){return Vs(JSON.stringify({version:2,heartbeats:e})).length}var Pr;Pr="",fr(new nn("platform-logger",e=>new Rn(e),"PRIVATE")),fr(new nn("heartbeat",e=>new Ar(e),"PRIVATE")),yr(Dn,On,Pr),yr(Dn,On,"esm2020"),yr("fire-js","");yr("firebase","12.9.0","app");const Tr="@firebase/installations",Ir="0.6.19",Rr=1e4,Dr="w:".concat(Ir),Or="FIS_v2",Lr=36e5,Mr=new $s("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function zr(e){return e instanceof Ys&&e.code.includes("request-failed")}function Fr(e){let{projectId:t}=e;return"".concat("https://firebaseinstallations.googleapis.com/v1","/projects/").concat(t,"/installations")}function Ur(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}async function Br(e,t){const s=(await t.json()).error;return Mr.create("request-failed",{requestName:e,serverCode:s.code,serverMessage:s.message,serverStatus:s.status})}function qr(e){let{apiKey:t}=e;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function Vr(e,t){let{refreshToken:s}=t;const n=qr(e);return n.append("Authorization",function(e){return"".concat(Or," ").concat(e)}(s)),n}async function Hr(e){const t=await e();return t.status>=500&&t.status<600?e():t}function Wr(e){return new Promise(t=>{setTimeout(t,e)})}const Gr=/^[cdef][\w-]{21}$/;function Kr(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const t=function(e){const t=(s=e,btoa(String.fromCharCode(...s)).replace(/\+/g,"-").replace(/\//g,"_"));var s;return t.substr(0,22)}(e);return Gr.test(t)?t:""}catch(e){return""}}function Zr(e){return"".concat(e.appName,"!").concat(e.appId)}const Jr=new Map;function Qr(e,t){const s=Zr(e);Yr(s,t),function(e,t){const s=Xr();s&&s.postMessage({key:e,fid:t});ea()}(s,t)}function Yr(e,t){const s=Jr.get(e);if(s)for(const n of s)n(t)}let $r=null;function Xr(){return!$r&&"BroadcastChannel"in self&&($r=new BroadcastChannel("[Firebase] FID Change"),$r.onmessage=e=>{Yr(e.data.key,e.data.fid)}),$r}function ea(){0===Jr.size&&$r&&($r.close(),$r=null)}const ta="firebase-installations-store";let sa=null;function na(){return sa||(sa=An("firebase-installations-database",1,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(ta)}})),sa}async function ra(e,t){const s=Zr(e),n=(await na()).transaction(ta,"readwrite"),r=n.objectStore(ta),a=await r.get(s);return await r.put(t,s),await n.done,a&&a.fid===t.fid||Qr(e,t.fid),t}async function aa(e){const t=Zr(e),s=(await na()).transaction(ta,"readwrite");await s.objectStore(ta).delete(t),await s.done}async function ia(e,t){const s=Zr(e),n=(await na()).transaction(ta,"readwrite"),r=n.objectStore(ta),a=await r.get(s),i=t(a);return void 0===i?await r.delete(s):await r.put(i,s),await n.done,!i||a&&a.fid===i.fid||Qr(e,i.fid),i}async function oa(e){let t;const s=await ia(e.appConfig,s=>{const n=function(e){const t=e||{fid:Kr(),registrationStatus:0};return da(t)}(s),r=function(e,t){if(0===t.registrationStatus){if(!navigator.onLine){return{installationEntry:t,registrationPromise:Promise.reject(Mr.create("app-offline"))}}const s={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},n=async function(e,t){try{const s=await async function(e,t){let{appConfig:s,heartbeatServiceProvider:n}=e,{fid:r}=t;const a=Fr(s),i=qr(s),o=n.getImmediate({optional:!0});if(o){const e=await o.getHeartbeatsHeader();e&&i.append("x-firebase-client",e)}const l={fid:r,authVersion:Or,appId:s.appId,sdkVersion:Dr},c={method:"POST",headers:i,body:JSON.stringify(l)},d=await Hr(()=>fetch(a,c));if(d.ok){const e=await d.json();return{fid:e.fid||r,registrationStatus:2,refreshToken:e.refreshToken,authToken:Ur(e.authToken)}}throw await Br("Create Installation",d)}(e,t);return ra(e.appConfig,s)}catch(Nt){throw zr(Nt)&&409===Nt.customData.serverCode?await aa(e.appConfig):await ra(e.appConfig,{fid:t.fid,registrationStatus:0}),Nt}}(e,s);return{installationEntry:s,registrationPromise:n}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:la(e)}:{installationEntry:t}}(e,n);return t=r.registrationPromise,r.installationEntry});return""===s.fid?{installationEntry:await t}:{installationEntry:s,registrationPromise:t}}async function la(e){let t=await ca(e.appConfig);for(;1===t.registrationStatus;)await Wr(100),t=await ca(e.appConfig);if(0===t.registrationStatus){const{installationEntry:t,registrationPromise:s}=await oa(e);return s||t}return t}function ca(e){return ia(e,e=>{if(!e)throw Mr.create("installation-not-found");return da(e)})}function da(e){return 1===(t=e).registrationStatus&&t.registrationTime+Rr<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t}async function ua(e,t){let{appConfig:s,heartbeatServiceProvider:n}=e;const r=function(e,t){let{fid:s}=t;return"".concat(Fr(e),"/").concat(s,"/authTokens:generate")}(s,t),a=Vr(s,t),i=n.getImmediate({optional:!0});if(i){const e=await i.getHeartbeatsHeader();e&&a.append("x-firebase-client",e)}const o={installation:{sdkVersion:Dr,appId:s.appId}},l={method:"POST",headers:a,body:JSON.stringify(o)},c=await Hr(()=>fetch(r,l));if(c.ok){return Ur(await c.json())}throw await Br("Generate Auth Token",c)}async function ha(e){let t,s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=await ia(e.appConfig,n=>{if(!pa(n))throw Mr.create("not-registered");const r=n.authToken;if(!s&&function(e){return 2===e.requestStatus&&!function(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+Lr}(e)}(r))return n;if(1===r.requestStatus)return t=async function(e,t){let s=await ma(e.appConfig);for(;1===s.authToken.requestStatus;)await Wr(100),s=await ma(e.appConfig);const n=s.authToken;return 0===n.requestStatus?ha(e,t):n}(e,s),n;{if(!navigator.onLine)throw Mr.create("app-offline");const s=function(e){const t={requestStatus:1,requestTime:Date.now()};return(0,d.A)((0,d.A)({},e),{},{authToken:t})}(n);return t=async function(e,t){try{const s=await ua(e,t),n=(0,d.A)((0,d.A)({},t),{},{authToken:s});return await ra(e.appConfig,n),s}catch(Nt){if(!zr(Nt)||401!==Nt.customData.serverCode&&404!==Nt.customData.serverCode){const s=(0,d.A)((0,d.A)({},t),{},{authToken:{requestStatus:0}});await ra(e.appConfig,s)}else await aa(e.appConfig);throw Nt}}(e,s),s}});return t?await t:n.authToken}function ma(e){return ia(e,e=>{if(!pa(e))throw Mr.create("not-registered");const t=e.authToken;return 1===(s=t).requestStatus&&s.requestTime+Rr<Date.now()?(0,d.A)((0,d.A)({},e),{},{authToken:{requestStatus:0}}):e;var s})}function pa(e){return void 0!==e&&2===e.registrationStatus}async function fa(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const s=e;await async function(e){const{registrationPromise:t}=await oa(e);t&&await t}(s);return(await ha(s,t)).token}function ga(e){return Mr.create("missing-app-config-values",{valueName:e})}const xa="installations",va=e=>{const t=e.getProvider("app").getImmediate(),s=function(e){if(!e||!e.options)throw ga("App Configuration");if(!e.name)throw ga("App Name");const t=["projectId","apiKey","appId"];for(const s of t)if(!e.options[s])throw ga(s);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t);return{app:t,appConfig:s,heartbeatServiceProvider:gr(t,"heartbeat"),_delete:()=>Promise.resolve()}},ba=e=>{const t=gr(e.getProvider("app").getImmediate(),xa).getImmediate();return{getId:()=>async function(e){const t=e,{installationEntry:s,registrationPromise:n}=await oa(t);return n?n.catch(console.error):ha(t).catch(console.error),s.fid}(t),getToken:e=>fa(t,e)}};fr(new nn(xa,va,"PUBLIC")),fr(new nn("installations-internal",ba,"PRIVATE")),yr(Tr,Ir),yr(Tr,Ir,"esm2020");const ya="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",ja="google.c.a.c_id",wa=1e4;var Na,Sa;function ka(e){const t=new Uint8Array(e);return btoa(String.fromCharCode(...t)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Aa(e){const t=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),s=atob(t),n=new Uint8Array(s.length);for(let r=0;r<s.length;++r)n[r]=s.charCodeAt(r);return n}!function(e){e[e.DATA_MESSAGE=1]="DATA_MESSAGE",e[e.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"}(Na||(Na={})),function(e){e.PUSH_RECEIVED="push-received",e.NOTIFICATION_CLICKED="notification-clicked"}(Sa||(Sa={}));const _a="fcm_token_details_db",Ea="fcm_token_object_Store";const Ca="firebase-messaging-store";let Pa=null;function Ta(){return Pa||(Pa=An("firebase-messaging-database",1,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(Ca)}})),Pa}async function Ia(e){const t=Da(e),s=await Ta(),n=await s.transaction(Ca).objectStore(Ca).get(t);if(n)return n;{const t=await async function(e){if("databases"in indexedDB){const e=(await indexedDB.databases()).map(e=>e.name);if(!e.includes(_a))return null}let t=null;return(await An(_a,5,{upgrade:async(s,n,r,a)=>{if(n<2)return;if(!s.objectStoreNames.contains(Ea))return;const i=a.objectStore(Ea),o=await i.index("fcmSenderId").get(e);if(await i.clear(),o)if(2===n){var l;const e=o;if(!e.auth||!e.p256dh||!e.endpoint)return;t={token:e.fcmToken,createTime:null!==(l=e.createTime)&&void 0!==l?l:Date.now(),subscriptionOptions:{auth:e.auth,p256dh:e.p256dh,endpoint:e.endpoint,swScope:e.swScope,vapidKey:"string"===typeof e.vapidKey?e.vapidKey:ka(e.vapidKey)}}}else if(3===n){const e=o;t={token:e.fcmToken,createTime:e.createTime,subscriptionOptions:{auth:ka(e.auth),p256dh:ka(e.p256dh),endpoint:e.endpoint,swScope:e.swScope,vapidKey:ka(e.vapidKey)}}}else if(4===n){const e=o;t={token:e.fcmToken,createTime:e.createTime,subscriptionOptions:{auth:ka(e.auth),p256dh:ka(e.p256dh),endpoint:e.endpoint,swScope:e.swScope,vapidKey:ka(e.vapidKey)}}}}})).close(),await _n(_a),await _n("fcm_vapid_details_db"),await _n("undefined"),function(e){if(!e||!e.subscriptionOptions)return!1;const{subscriptionOptions:t}=e;return"number"===typeof e.createTime&&e.createTime>0&&"string"===typeof e.token&&e.token.length>0&&"string"===typeof t.auth&&t.auth.length>0&&"string"===typeof t.p256dh&&t.p256dh.length>0&&"string"===typeof t.endpoint&&t.endpoint.length>0&&"string"===typeof t.swScope&&t.swScope.length>0&&"string"===typeof t.vapidKey&&t.vapidKey.length>0}(t)?t:null}(e.appConfig.senderId);if(t)return await Ra(e,t),t}}async function Ra(e,t){const s=Da(e),n=(await Ta()).transaction(Ca,"readwrite");return await n.objectStore(Ca).put(t,s),await n.done,t}function Da(e){let{appConfig:t}=e;return t.appId}const Oa=new $s("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});async function La(e,t){const s={method:"DELETE",headers:await za(e)};try{const n=await fetch("".concat(Ma(e.appConfig),"/").concat(t),s),r=await n.json();if(r.error){const e=r.error.message;throw Oa.create("token-unsubscribe-failed",{errorInfo:e})}}catch(n){throw Oa.create("token-unsubscribe-failed",{errorInfo:null===n||void 0===n?void 0:n.toString()})}}function Ma(e){let{projectId:t}=e;return"".concat("https://fcmregistrations.googleapis.com/v1","/projects/").concat(t,"/registrations")}async function za(e){let{appConfig:t,installations:s}=e;const n=await s.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":"FIS ".concat(n)})}function Fa(e){let{p256dh:t,auth:s,endpoint:n,vapidKey:r}=e;const a={web:{endpoint:n,auth:s,p256dh:t}};return r!==ya&&(a.web.applicationPubKey=r),a}async function Ua(e){const t=await async function(e,t){const s=await e.pushManager.getSubscription();if(s)return s;return e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Aa(t)})}(e.swRegistration,e.vapidKey),s={vapidKey:e.vapidKey,swScope:e.swRegistration.scope,endpoint:t.endpoint,auth:ka(t.getKey("auth")),p256dh:ka(t.getKey("p256dh"))},n=await Ia(e.firebaseDependencies);if(n){if(function(e,t){const s=t.vapidKey===e.vapidKey,n=t.endpoint===e.endpoint,r=t.auth===e.auth,a=t.p256dh===e.p256dh;return s&&n&&r&&a}(n.subscriptionOptions,s))return Date.now()>=n.createTime+6048e5?async function(e,t){try{const s=await async function(e,t){const s=await za(e),n=Fa(t.subscriptionOptions),r={method:"PATCH",headers:s,body:JSON.stringify(n)};let a;try{const s=await fetch("".concat(Ma(e.appConfig),"/").concat(t.token),r);a=await s.json()}catch(i){throw Oa.create("token-update-failed",{errorInfo:null===i||void 0===i?void 0:i.toString()})}if(a.error){const e=a.error.message;throw Oa.create("token-update-failed",{errorInfo:e})}if(!a.token)throw Oa.create("token-update-no-token");return a.token}(e.firebaseDependencies,t),n=(0,d.A)((0,d.A)({},t),{},{token:s,createTime:Date.now()});return await Ra(e.firebaseDependencies,n),s}catch(Nt){throw Nt}}(e,{token:n.token,createTime:Date.now(),subscriptionOptions:s}):n.token;try{await La(e.firebaseDependencies,n.token)}catch(Nt){console.warn(Nt)}return Ba(e.firebaseDependencies,s)}return Ba(e.firebaseDependencies,s)}async function Ba(e,t){const s=await async function(e,t){const s=await za(e),n=Fa(t),r={method:"POST",headers:s,body:JSON.stringify(n)};let a;try{const t=await fetch(Ma(e.appConfig),r);a=await t.json()}catch(i){throw Oa.create("token-subscribe-failed",{errorInfo:null===i||void 0===i?void 0:i.toString()})}if(a.error){const e=a.error.message;throw Oa.create("token-subscribe-failed",{errorInfo:e})}if(!a.token)throw Oa.create("token-subscribe-no-token");return a.token}(e,t),n={token:s,createTime:Date.now(),subscriptionOptions:t};return await Ra(e,n),n.token}function qa(e){const t={from:e.from,collapseKey:e.collapse_key,messageId:e.fcmMessageId};return function(e,t){if(!t.notification)return;e.notification={};const s=t.notification.title;s&&(e.notification.title=s);const n=t.notification.body;n&&(e.notification.body=n);const r=t.notification.image;r&&(e.notification.image=r);const a=t.notification.icon;a&&(e.notification.icon=a)}(t,e),function(e,t){if(!t.data)return;e.data=t.data}(t,e),function(e,t){var s,n,r,a,i;if(!t.fcmOptions&&(null===(s=t.notification)||void 0===s||!s.click_action))return;e.fcmOptions={};const o=null!==(n=null===(r=t.fcmOptions)||void 0===r?void 0:r.link)&&void 0!==n?n:null===(a=t.notification)||void 0===a?void 0:a.click_action;o&&(e.fcmOptions.link=o);const l=null===(i=t.fcmOptions)||void 0===i?void 0:i.analytics_label;l&&(e.fcmOptions.analyticsLabel=l)}(t,e),t}function Va(e){return Oa.create("missing-app-config-values",{valueName:e})}!function(e,t){const s=[];for(let n=0;n<e.length;n++)s.push(e.charAt(n)),n<t.length&&s.push(t.charAt(n));s.join("")}("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Ha{constructor(e,t,s){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const n=function(e){if(!e||!e.options)throw Va("App Configuration Object");if(!e.name)throw Va("App Name");const t=["projectId","apiKey","appId","messagingSenderId"],{options:s}=e;for(const n of t)if(!s[n])throw Va(n);return{appName:e.name,projectId:s.projectId,apiKey:s.apiKey,appId:s.appId,senderId:s.messagingSenderId}}(e);this.firebaseDependencies={app:e,appConfig:n,installations:t,analyticsProvider:s}}_delete(){return Promise.resolve()}}async function Wa(e){try{e.swRegistration=await navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"}),e.swRegistration.update().catch(()=>{}),await async function(e){return new Promise((t,s)=>{const n=setTimeout(()=>s(new Error("Service worker not registered after ".concat(wa," ms"))),wa),r=e.installing||e.waiting;e.active?(clearTimeout(n),t()):r?r.onstatechange=e=>{var s;"activated"===(null===(s=e.target)||void 0===s?void 0:s.state)&&(r.onstatechange=null,clearTimeout(n),t())}:(clearTimeout(n),s(new Error("No incoming service worker found.")))})}(e.swRegistration)}catch(Nt){throw Oa.create("failed-service-worker-registration",{browserErrorMessage:null===Nt||void 0===Nt?void 0:Nt.message})}}async function Ga(e,t){if(!navigator)throw Oa.create("only-available-in-window");if("default"===Notification.permission&&await Notification.requestPermission(),"granted"!==Notification.permission)throw Oa.create("permission-blocked");return await async function(e,t){t?e.vapidKey=t:e.vapidKey||(e.vapidKey=ya)}(e,null===t||void 0===t?void 0:t.vapidKey),await async function(e,t){if(t||e.swRegistration||await Wa(e),t||!e.swRegistration){if(!(t instanceof ServiceWorkerRegistration))throw Oa.create("invalid-sw-registration");e.swRegistration=t}}(e,null===t||void 0===t?void 0:t.serviceWorkerRegistration),Ua(e)}async function Ka(e,t,s){const n=function(e){switch(e){case Sa.NOTIFICATION_CLICKED:return"notification_open";case Sa.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(t);(await e.firebaseDependencies.analyticsProvider.get()).logEvent(n,{message_id:s[ja],message_name:s["google.c.a.c_l"],message_time:s["google.c.a.ts"],message_device_time:Math.floor(Date.now()/1e3)})}async function Za(e,t){const s=t.data;if(!s.isFirebaseMessaging)return;e.onMessageHandler&&s.messageType===Sa.PUSH_RECEIVED&&("function"===typeof e.onMessageHandler?e.onMessageHandler(qa(s)):e.onMessageHandler.next(qa(s)));const n=s.data;var r;"object"===typeof(r=n)&&r&&ja in r&&"1"===n["google.c.a.e"]&&await Ka(e,s.messageType,n)}const Ja="@firebase/messaging",Qa="0.12.23",Ya=e=>{const t=new Ha(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),e.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",e=>Za(t,e)),t},$a=e=>{const t=e.getProvider("messaging").getImmediate();return{getToken:e=>Ga(t,e)}};async function Xa(){try{await Qs()}catch(Nt){return!1}return"undefined"!==typeof window&&Js()&&!("undefined"===typeof navigator||!navigator.cookieEnabled)&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}async function ei(e,t){return Ga(e=sn(e),t)}function ti(e,t){return function(e,t){if(!navigator)throw Oa.create("only-available-in-window");return e.onMessageHandler=t,()=>{e.onMessageHandler=null}}(e=sn(e),t)}fr(new nn("messaging",Ya,"PUBLIC")),fr(new nn("messaging-internal",$a,"PRIVATE")),yr(Ja,Qa),yr(Ja,Qa,"esm2020");const si=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:cr;const t=ur.get(e);if(!t&&e===cr&&Ks())return br();if(!t)throw xr.create("no-app",{appName:e});return t}();return Xa().then(e=>{if(!e)throw Oa.create("unsupported-browser")},e=>{throw Oa.create("indexed-db-unsupported")}),gr(sn(e),"messaging").getImmediate()}(br({apiKey:"AIzaSyBDWP7wZ1vx_2VjgHjNJ7AxaoRvs9Obf3Y",authDomain:"ab-campus-notif.firebaseapp.com",projectId:"ab-campus-notif",storageBucket:"ab-campus-notif.firebasestorage.app",messagingSenderId:"436866264113",appId:"1:436866264113:web:46f56ed7745a8c770df910"})),ni="BJfHsbhtQhWA-laTTi9Ffq36xHSO8ylv-T4aU5Db6xlN5xhGqXBKtDtzcAi8qdiXimz6S-M2PxjgxNNXFftfGvQ",ri=(0,pt.A)("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);var ai=s(4068);const ii=e=>{let{updateAvailable:t,newVersion:s,onUpdate:r,onIgnore:a,currentVersion:o}=e;const[l,c]=(0,n.useState)(!1),[d,u]=(0,n.useState)(!1);(0,n.useEffect)(()=>{t&&setTimeout(()=>{c(!0)},500)},[t]);const h=()=>{c(!1),setTimeout(()=>{a()},300)};if(!t||!l)return null;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"fixed inset-0 bg-black/20 backdrop-blur-sm z-[9998] transition-opacity duration-300 ".concat(l?"opacity-100":"opacity-0"),onClick:h}),(0,i.jsx)("div",{className:"fixed bottom-4 right-4 left-4 sm:left-auto sm:max-w-md z-[9999] transition-all duration-300 ".concat(l?"translate-y-0 opacity-100":"translate-y-full opacity-0"),children:(0,i.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl border border-gray-100 overflow-hidden",children:[(0,i.jsxs)("div",{className:"bg-gradient-to-r from-blue-500 via-indigo-500 to-purple-600 p-4 relative overflow-hidden",children:[(0,i.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-400/20 to-transparent"}),(0,i.jsxs)("div",{className:"relative flex items-center justify-between",children:[(0,i.jsxs)("div",{className:"flex items-center gap-3",children:[(0,i.jsx)("div",{className:"p-2 bg-white/20 rounded-xl backdrop-blur-sm",children:(0,i.jsx)(ri,{className:"w-5 h-5 text-white"})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{className:"text-white font-bold text-lg",children:"Mise \xe0 jour disponible"}),(0,i.jsxs)("p",{className:"text-white/90 text-xs",children:[s?(e=>e?"v".concat(e.version||e):"nouvelle version")(s):"Nouvelle version"," pr\xeate \xe0 \xeatre install\xe9e"]})]})]}),(0,i.jsx)("button",{onClick:h,className:"p-1.5 hover:bg-white/20 rounded-lg transition-colors","aria-label":"Fermer",children:(0,i.jsx)(xt,{className:"w-4 h-4 text-white"})})]})]}),(0,i.jsxs)("div",{className:"p-4 space-y-4",children:[(0,i.jsxs)("div",{className:"flex items-start gap-3",children:[(0,i.jsx)("div",{className:"p-2 bg-blue-50 rounded-lg",children:(0,i.jsx)(mt.A,{className:"w-5 h-5 text-blue-600"})}),(0,i.jsxs)("div",{className:"flex-1",children:[(0,i.jsx)("p",{className:"text-gray-700 text-sm font-medium",children:"Une nouvelle version de l'application est disponible"}),(0,i.jsx)("p",{className:"text-gray-500 text-xs mt-1",children:null!==s&&void 0!==s&&s.buildDate?"Mise \xe0 jour du ".concat(new Date(s.buildDate).toLocaleDateString("fr-FR",{day:"numeric",month:"long",year:"numeric"})):"Profitez des derni\xe8res am\xe9liorations et corrections"})]})]}),(0,i.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3 space-y-2",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2 text-xs text-gray-600",children:[(0,i.jsx)("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full"}),(0,i.jsx)("span",{children:"Nouvelles fonctionnalit\xe9s"})]}),(0,i.jsxs)("div",{className:"flex items-center gap-2 text-xs text-gray-600",children:[(0,i.jsx)("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full"}),(0,i.jsx)("span",{children:"Corrections de bugs"})]}),(0,i.jsxs)("div",{className:"flex items-center gap-2 text-xs text-gray-600",children:[(0,i.jsx)("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full"}),(0,i.jsx)("span",{children:"Am\xe9lioration des performances"})]})]}),(0,i.jsxs)("div",{className:"flex gap-3",children:[(0,i.jsx)("button",{onClick:h,className:"flex-1 px-4 py-2.5 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-xl transition-colors",children:"Plus tard"}),(0,i.jsx)("button",{onClick:async()=>{u(!0),setTimeout(()=>{r()},300)},disabled:d,className:"flex-1 flex items-center justify-center gap-2 px-4 py-2.5 text-sm font-semibold text-white bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700 rounded-xl transition-all shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed",children:d?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(ai.A,{className:"w-4 h-4 animate-spin"}),"Mise \xe0 jour..."]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(ai.A,{className:"w-4 h-4"}),"Mettre \xe0 jour"]})})]})]})]})})]})},oi="2.0.0",li="ab_app_version",ci=()=>{try{const e=localStorage.getItem(li);return e!==oi&&(console.log("[CACHE] Nouvelle version d\xe9tect\xe9e:",oi,"(ancienne:",e,")"),localStorage.setItem(li,oi),di(),console.log("[CACHE] Cache nettoy\xe9 pour la version",oi),!0)}catch(e){return console.error("[CACHE] Erreur lors de la v\xe9rification de version:",e),!1}},di=async()=>{try{const e=["ab_user_cache","supabase.auth.token"];if(Object.keys(localStorage).forEach(t=>{e.some(e=>t.includes(e))||localStorage.removeItem(t)}),console.log("[CACHE] localStorage nettoy\xe9 (sauf donn\xe9es essentielles)"),sessionStorage.clear(),console.log("[CACHE] sessionStorage nettoy\xe9"),"caches"in window){const e=await caches.keys();await Promise.all(e.map(e=>(console.log("[CACHE] Suppression du cache:",e),caches.delete(e)))),console.log("[CACHE] Cache Service Worker nettoy\xe9")}if("serviceWorker"in navigator){const e=await navigator.serviceWorker.getRegistrations();for(let t of e)await t.unregister(),console.log("[CACHE] Service Worker d\xe9sinscrit")}return!0}catch(e){return console.error("[CACHE] Erreur lors du nettoyage du cache:",e),!1}},ui=()=>ci()?(console.log("[CACHE] \u2705 Application mise \xe0 jour vers la version",oi),!0):(console.log("[CACHE] Application \xe0 jour (version",oi,")"),!1),hi=(0,pt.A)("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]),mi=(0,pt.A)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),pi=(0,pt.A)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),fi=(0,pt.A)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),gi=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],xi=(()=>new Set(gi))(),vi=e=>180*e/Math.PI,bi=e=>{const t=vi(Math.atan2(e[1],e[0]));return ji(t)},yi={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:bi,rotateZ:bi,skewX:e=>vi(Math.atan(e[1])),skewY:e=>vi(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},ji=e=>((e%=360)<0&&(e+=360),e),wi=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),Ni=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),Si={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:wi,scaleY:Ni,scale:e=>(wi(e)+Ni(e))/2,rotateX:e=>ji(vi(Math.atan2(e[6],e[5]))),rotateY:e=>ji(vi(Math.atan2(-e[2],e[0]))),rotateZ:bi,rotate:bi,skewX:e=>vi(Math.atan(e[4])),skewY:e=>vi(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function ki(e){return e.includes("scale")?1:0}function Ai(e,t){if(!e||"none"===e)return ki(t);const s=e.match(/^matrix3d\(([\t-\r ,-\.0-9e\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+)\)$/);let n,r;if(s)n=Si,r=s;else{const t=e.match(/^matrix\(([\t-\r ,-\.0-9e\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+)\)$/);n=yi,r=t}if(!r)return ki(t);const a=n[t],i=r[1].split(",").map(_i);return"function"===typeof a?a(i):i[a]}function _i(e){return parseFloat(e.trim())}const Ei=e=>t=>"string"===typeof t&&t.startsWith(e),Ci=Ei("--"),Pi=Ei("var(--"),Ti=e=>!!Pi(e)&&Ii.test(e.split("/*")[0].trim()),Ii=/var\(--(?:[\x2D0-9A-Z_a-z\u017F\u212A]+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*|[\x2D0-9A-Z_a-z\u017F\u212A]+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*,(?:[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(?:(?![\t-\r \(\)\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uD800-\uDFFF\uFEFF])[^]|[\uD800-\uDBFF][\uDC00-\uDFFF])|[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*\((?:(?:(?![\(\)\uD800-\uDFFF])[^]|[\uD800-\uDBFF][\uDC00-\uDFFF])|\((?:(?![\(\)\uD800-\uDFFF])[^]|[\uD800-\uDBFF][\uDC00-\uDFFF])*\))*\))+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*)\)$/i;function Ri(e){let{top:t,left:s,right:n,bottom:r}=e;return{x:{min:s,max:n},y:{min:t,max:r}}}const Di=(e,t,s)=>e+(t-e)*s;function Oi(e){return void 0===e||1===e}function Li(e){let{scale:t,scaleX:s,scaleY:n}=e;return!Oi(t)||!Oi(s)||!Oi(n)}function Mi(e){return Li(e)||zi(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function zi(e){return Fi(e.x)||Fi(e.y)}function Fi(e){return e&&"0%"!==e}function Ui(e,t,s){return s+t*(e-s)}function Bi(e,t,s,n,r){return void 0!==r&&(e=Ui(e,r,n)),Ui(e,s,n)+t}function qi(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0;e.min=Bi(e.min,t,s,n,r),e.max=Bi(e.max,t,s,n,r)}function Vi(e,t){let{x:s,y:n}=t;qi(e.x,s.translate,s.scale,s.originPoint),qi(e.y,n.translate,n.scale,n.originPoint)}const Hi=.999999999999,Wi=1.0000000000001;function Gi(e,t){e.min=e.min+t,e.max=e.max+t}function Ki(e,t,s,n){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.5;qi(e,t,s,Di(e.min,e.max,r),n)}function Zi(e,t){Ki(e.x,t.x,t.scaleX,t.scale,t.originX),Ki(e.y,t.y,t.scaleY,t.scale,t.originY)}function Ji(e,t){return Ri(function(e,t){if(!t)return e;const s=t({x:e.left,y:e.top}),n=t({x:e.right,y:e.bottom});return{top:s.y,left:s.x,bottom:n.y,right:n.x}}(e.getBoundingClientRect(),t))}const Qi=new Set(["width","height","top","left","right","bottom",...gi]),Yi=(e,t,s)=>s>t?t:s<e?e:s,$i={test:e=>"number"===typeof e,parse:parseFloat,transform:e=>e},Xi=(0,d.A)((0,d.A)({},$i),{},{transform:e=>Yi(0,1,e)}),eo=(0,d.A)((0,d.A)({},$i),{},{default:1}),to=e=>({test:t=>"string"===typeof t&&t.endsWith(e)&&1===t.split(" ").length,parse:parseFloat,transform:t=>"".concat(t).concat(e)}),so=to("deg"),no=to("%"),ro=to("px"),ao=to("vh"),io=to("vw"),oo=(()=>(0,d.A)((0,d.A)({},no),{},{parse:e=>no.parse(e)/100,transform:e=>no.transform(100*e)}))(),lo=e=>t=>t.test(e),co=[$i,ro,no,so,io,ao,{test:e=>"auto"===e,parse:e=>e}],uo=e=>co.find(lo(e));const ho=e=>/^-?(?:[0-9]+(?:\.[0-9]+)?|\.[0-9]+)$/.test(e),mo=/^var\(--(?:([\x2D0-9A-Z_a-z]+)|([\x2D0-9A-Z_a-z]+), ?([ #%\(\),-\.0-9A-Za-z]+))\)/;function po(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;'Max CSS variable fallback depth detected in property "'.concat(e,'". This may indicate a circular fallback dependency.');const[n,r]=function(e){const t=mo.exec(e);if(!t)return[,];const[,s,n,r]=t;return["--".concat(null!==s&&void 0!==s?s:n),r]}(e);if(!n)return;const a=window.getComputedStyle(t).getPropertyValue(n);if(a){const e=a.trim();return ho(e)?parseFloat(e):e}return Ti(r)?po(r,t,s+1):r}const fo=e=>e===$i||e===ro,go=new Set(["x","y","z"]),xo=gi.filter(e=>!go.has(e));const vo={width:(e,t)=>{let{x:s}=e,{paddingLeft:n="0",paddingRight:r="0"}=t;return s.max-s.min-parseFloat(n)-parseFloat(r)},height:(e,t)=>{let{y:s}=e,{paddingTop:n="0",paddingBottom:r="0"}=t;return s.max-s.min-parseFloat(n)-parseFloat(r)},top:(e,t)=>{let{top:s}=t;return parseFloat(s)},left:(e,t)=>{let{left:s}=t;return parseFloat(s)},bottom:(e,t)=>{let{y:s}=e,{top:n}=t;return parseFloat(n)+(s.max-s.min)},right:(e,t)=>{let{x:s}=e,{left:n}=t;return parseFloat(n)+(s.max-s.min)},x:(e,t)=>{let{transform:s}=t;return Ai(s,"x")},y:(e,t)=>{let{transform:s}=t;return Ai(s,"y")}};vo.translateX=vo.x,vo.translateY=vo.y;const bo=e=>e,yo={},jo=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],wo={value:null,addProjectionMetrics:null};function No(e,t){let s=!1,n=!0;const r={delta:0,timestamp:0,isProcessing:!1},a=()=>s=!0,i=jo.reduce((e,s)=>(e[s]=function(e,t){let s=new Set,n=new Set,r=!1,a=!1;const i=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1},l=0;function c(t){i.has(t)&&(d.schedule(t),e()),l++,t(o)}const d={schedule:function(e){const t=arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&r?s:n;return arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&i.add(e),t.has(e)||t.add(e),e},cancel:e=>{n.delete(e),i.delete(e)},process:e=>{o=e,r?a=!0:(r=!0,[s,n]=[n,s],s.forEach(c),t&&wo.value&&wo.value.frameloop[t].push(l),l=0,s.clear(),r=!1,a&&(a=!1,d.process(e)))}};return d}(a,t?s:void 0),e),{}),{setup:o,read:l,resolveKeyframes:c,preUpdate:d,update:u,preRender:h,render:m,postRender:p}=i,f=()=>{const a=yo.useManualTiming?r.timestamp:performance.now();s=!1,yo.useManualTiming||(r.delta=n?1e3/60:Math.max(Math.min(a-r.timestamp,40),1)),r.timestamp=a,r.isProcessing=!0,o.process(r),l.process(r),c.process(r),d.process(r),u.process(r),h.process(r),m.process(r),p.process(r),r.isProcessing=!1,s&&t&&(n=!1,e(f))},g=jo.reduce((t,a)=>{const o=i[a];return t[a]=function(t){let a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return s||(s=!0,n=!0,r.isProcessing||e(f)),o.schedule(t,a,i)},t},{});return{schedule:g,cancel:e=>{for(let t=0;t<jo.length;t++)i[jo[t]].cancel(e)},state:r,steps:i}}const{schedule:So,cancel:ko,state:Ao,steps:_o}=No("undefined"!==typeof requestAnimationFrame?requestAnimationFrame:bo,!0),Eo=new Set;let Co=!1,Po=!1,To=!1;function Io(){if(Po){const e=Array.from(Eo).filter(e=>e.needsMeasurement),t=new Set(e.map(e=>e.element)),s=new Map;t.forEach(e=>{const t=function(e){const t=[];return xo.forEach(s=>{const n=e.getValue(s);void 0!==n&&(t.push([s,n.get()]),n.set(s.startsWith("scale")?1:0))}),t}(e);t.length&&(s.set(e,t),e.render())}),e.forEach(e=>e.measureInitialState()),t.forEach(e=>{e.render();const t=s.get(e);t&&t.forEach(t=>{var s;let[n,r]=t;null===(s=e.getValue(n))||void 0===s||s.set(r)})}),e.forEach(e=>e.measureEndState()),e.forEach(e=>{void 0!==e.suspendedScrollY&&window.scrollTo(0,e.suspendedScrollY)})}Po=!1,Co=!1,Eo.forEach(e=>e.complete(To)),Eo.clear()}function Ro(){Eo.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(Po=!0)})}class Do{constructor(e,t,s,n,r){let a=arguments.length>5&&void 0!==arguments[5]&&arguments[5];this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=s,this.motionValue=n,this.element=r,this.isAsync=a}scheduleResolve(){this.state="scheduled",this.isAsync?(Eo.add(this),Co||(Co=!0,So.read(Ro),So.resolveKeyframes(Io))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:s,motionValue:n}=this;if(null===e[0]){const r=null===n||void 0===n?void 0:n.get(),a=e[e.length-1];if(void 0!==r)e[0]=r;else if(s&&t){const n=s.readValue(t,a);void 0!==n&&null!==n&&(e[0]=n)}void 0===e[0]&&(e[0]=a),n&&void 0===r&&n.set(e[0])}!function(e){for(let s=1;s<e.length;s++){var t;null!==(t=e[s])&&void 0!==t||(e[s]=e[s-1])}}(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Eo.delete(this)}cancel(){"scheduled"===this.state&&(Eo.delete(this),this.state="pending")}resume(){"pending"===this.state&&this.scheduleResolve()}}const Oo=e=>/^0(?:[\0-\x08\x0E-\x1F!-\x2D\/-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+$/.test(e);function Lo(e){return"number"===typeof e?0===e:null===e||("none"===e||"0"===e||Oo(e))}const Mo=e=>Math.round(1e5*e)/1e5,zo=/-?(?:[0-9]+(?:\.[0-9]+)?|\.[0-9]+)/g;const Fo=/^(?:#[0-9a-f]{3,8}|(?:rgb|h[s\u017F]l)a?\((?:-?[\.0-9]+%?[\t-\r ,\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+){2}-?[\.0-9]+%?[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(?:[,\/][\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*)?(?:\b[0-9]+(?:\.[0-9]+)?|\.[0-9]+)?%?\))$/i,Uo=(e,t)=>s=>Boolean("string"===typeof s&&Fo.test(s)&&s.startsWith(e)||t&&!function(e){return null==e}(s)&&Object.prototype.hasOwnProperty.call(s,t)),Bo=(e,t,s)=>n=>{if("string"!==typeof n)return n;const[r,a,i,o]=n.match(zo);return{[e]:parseFloat(r),[t]:parseFloat(a),[s]:parseFloat(i),alpha:void 0!==o?parseFloat(o):1}},qo=(0,d.A)((0,d.A)({},$i),{},{transform:e=>Math.round((e=>Yi(0,255,e))(e))}),Vo={test:Uo("rgb","red"),parse:Bo("red","green","blue"),transform:e=>{let{red:t,green:s,blue:n,alpha:r=1}=e;return"rgba("+qo.transform(t)+", "+qo.transform(s)+", "+qo.transform(n)+", "+Mo(Xi.transform(r))+")"}};const Ho={test:Uo("#"),parse:function(e){let t="",s="",n="",r="";return e.length>5?(t=e.substring(1,3),s=e.substring(3,5),n=e.substring(5,7),r=e.substring(7,9)):(t=e.substring(1,2),s=e.substring(2,3),n=e.substring(3,4),r=e.substring(4,5),t+=t,s+=s,n+=n,r+=r),{red:parseInt(t,16),green:parseInt(s,16),blue:parseInt(n,16),alpha:r?parseInt(r,16)/255:1}},transform:Vo.transform},Wo={test:Uo("hsl","hue"),parse:Bo("hue","saturation","lightness"),transform:e=>{let{hue:t,saturation:s,lightness:n,alpha:r=1}=e;return"hsla("+Math.round(t)+", "+no.transform(Mo(s))+", "+no.transform(Mo(n))+", "+Mo(Xi.transform(r))+")"}},Go={test:e=>Vo.test(e)||Ho.test(e)||Wo.test(e),parse:e=>Vo.test(e)?Vo.parse(e):Wo.test(e)?Wo.parse(e):Ho.parse(e),transform:e=>"string"===typeof e?e:e.hasOwnProperty("red")?Vo.transform(e):Wo.transform(e),getAnimatableNone:e=>{const t=Go.parse(e);return t.alpha=0,Go.transform(t)}},Ko=/(?:#[0-9a-f]{3,8}|(?:rgb|h[s\u017F]l)a?\((?:-?[\.0-9]+%?[\t-\r ,\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+){2}-?[\.0-9]+%?[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(?:[,\/][\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*)?(?:\b[0-9]+(?:\.[0-9]+)?|\.[0-9]+)?%?\))/gi;const Zo="number",Jo="color",Qo=/var[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*\([\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*--(?:[\x2D0-9A-Z_a-z\u017F\u212A]+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*|[\x2D0-9A-Z_a-z\u017F\u212A]+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*,(?:[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(?:(?![\t-\r \(\)\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uD800-\uDFFF\uFEFF])[^]|[\uD800-\uDBFF][\uDC00-\uDFFF])|[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*\((?:(?:(?![\(\)\uD800-\uDFFF])[^]|[\uD800-\uDBFF][\uDC00-\uDFFF])|\((?:(?![\(\)\uD800-\uDFFF])[^]|[\uD800-\uDBFF][\uDC00-\uDFFF])*\))*\))+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*)\)|#[0-9a-f]{3,8}|(?:rgb|h[s\u017F]l)a?\((?:-?[\.0-9]+%?[\t-\r ,\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+){2}-?[\.0-9]+%?[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(?:[,\/][\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*)?(?:\b[0-9]+(?:\.[0-9]+)?|\.[0-9]+)?%?\)|-?(?:[0-9]+(?:\.[0-9]+)?|\.[0-9]+)/gi;function Yo(e){const t=e.toString(),s=[],n={color:[],number:[],var:[]},r=[];let a=0;const i=t.replace(Qo,e=>(Go.test(e)?(n.color.push(a),r.push(Jo),s.push(Go.parse(e))):e.startsWith("var(")?(n.var.push(a),r.push("var"),s.push(e)):(n.number.push(a),r.push(Zo),s.push(parseFloat(e))),++a,"${}")).split("${}");return{values:s,split:i,indexes:n,types:r}}function $o(e){return Yo(e).values}function Xo(e){const{split:t,types:s}=Yo(e),n=t.length;return e=>{let r="";for(let a=0;a<n;a++)if(r+=t[a],void 0!==e[a]){const t=s[a];r+=t===Zo?Mo(e[a]):t===Jo?Go.transform(e[a]):e[a]}return r}}const el=e=>"number"===typeof e?0:Go.test(e)?Go.getAnimatableNone(e):e;const tl={test:function(e){var t,s;return isNaN(e)&&"string"===typeof e&&((null===(t=e.match(zo))||void 0===t?void 0:t.length)||0)+((null===(s=e.match(Ko))||void 0===s?void 0:s.length)||0)>0},parse:$o,createTransformer:Xo,getAnimatableNone:function(e){const t=$o(e);return Xo(e)(t.map(el))}},sl=new Set(["brightness","contrast","saturate","opacity"]);function nl(e){const[t,s]=e.slice(0,-1).split("(");if("drop-shadow"===t)return e;const[n]=s.match(zo)||[];if(!n)return e;const r=s.replace(n,"");let a=sl.has(t)?1:0;return n!==s&&(a*=100),t+"("+a+r+")"}const rl=/\b([\x2Da-z]*)\((?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?\)/g,al=(0,d.A)((0,d.A)({},tl),{},{getAnimatableNone:e=>{const t=e.match(rl);return t?t.map(nl).join(" "):e}}),il=(0,d.A)((0,d.A)({},$i),{},{transform:Math.round}),ol={rotate:so,rotateX:so,rotateY:so,rotateZ:so,scale:eo,scaleX:eo,scaleY:eo,scaleZ:eo,skew:so,skewX:so,skewY:so,distance:ro,translateX:ro,translateY:ro,translateZ:ro,x:ro,y:ro,z:ro,perspective:ro,transformPerspective:ro,opacity:Xi,originX:oo,originY:oo,originZ:ro},ll=(0,d.A)((0,d.A)({borderWidth:ro,borderTopWidth:ro,borderRightWidth:ro,borderBottomWidth:ro,borderLeftWidth:ro,borderRadius:ro,radius:ro,borderTopLeftRadius:ro,borderTopRightRadius:ro,borderBottomRightRadius:ro,borderBottomLeftRadius:ro,width:ro,maxWidth:ro,height:ro,maxHeight:ro,top:ro,right:ro,bottom:ro,left:ro,padding:ro,paddingTop:ro,paddingRight:ro,paddingBottom:ro,paddingLeft:ro,margin:ro,marginTop:ro,marginRight:ro,marginBottom:ro,marginLeft:ro,backgroundPositionX:ro,backgroundPositionY:ro},ol),{},{zIndex:il,fillOpacity:Xi,strokeOpacity:Xi,numOctaves:il}),cl=(0,d.A)((0,d.A)({},ll),{},{color:Go,backgroundColor:Go,outlineColor:Go,fill:Go,stroke:Go,borderColor:Go,borderTopColor:Go,borderRightColor:Go,borderBottomColor:Go,borderLeftColor:Go,filter:al,WebkitFilter:al}),dl=e=>cl[e];function ul(e,t){let s=dl(e);return s!==al&&(s=tl),s.getAnimatableNone?s.getAnimatableNone(t):void 0}const hl=new Set(["auto","none","0"]);class ml extends Do{constructor(e,t,s,n,r){super(e,t,s,n,r,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:s}=this;if(!t||!t.current)return;super.readKeyframes();for(let o=0;o<e.length;o++){let s=e[o];if("string"===typeof s&&(s=s.trim(),Ti(s))){const n=po(s,t.current);void 0!==n&&(e[o]=n),o===e.length-1&&(this.finalKeyframe=s)}}if(this.resolveNoneKeyframes(),!Qi.has(s)||2!==e.length)return;const[n,r]=e,a=uo(n),i=uo(r);if(a!==i)if(fo(a)&&fo(i))for(let o=0;o<e.length;o++){const t=e[o];"string"===typeof t&&(e[o]=parseFloat(t))}else vo[s]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,s=[];for(let n=0;n<e.length;n++)(null===e[n]||Lo(e[n]))&&s.push(n);s.length&&function(e,t,s){let n,r=0;for(;r<e.length&&!n;){const t=e[r];"string"===typeof t&&!hl.has(t)&&Yo(t).values.length&&(n=e[r]),r++}if(n&&s)for(const a of t)e[a]=ul(s,n)}(e,s,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:s}=this;if(!e||!e.current)return;"height"===s&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=vo[s](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const n=t[t.length-1];void 0!==n&&e.getValue(s,n).jump(n,!1)}measureEndState(){var e;const{element:t,name:s,unresolvedKeyframes:n}=this;if(!t||!t.current)return;const r=t.getValue(s);r&&r.jump(this.measuredOrigin,!1);const a=n.length-1,i=n[a];n[a]=vo[s](t.measureViewportBox(),window.getComputedStyle(t.current)),null!==i&&void 0===this.finalKeyframe&&(this.finalKeyframe=i),null!==(e=this.removedTransforms)&&void 0!==e&&e.length&&this.removedTransforms.forEach(e=>{let[s,n]=e;t.getValue(s).set(n)}),this.resolveNoneKeyframes()}}const pl=e=>Boolean(e&&e.getVelocity);var fl=s(3986);let gl;function xl(){gl=void 0}const vl={now:()=>(void 0===gl&&vl.set(Ao.isProcessing||yo.useManualTiming?Ao.timestamp:performance.now()),gl),set:e=>{gl=e,queueMicrotask(xl)}};function bl(e,t){-1===e.indexOf(t)&&e.push(t)}function yl(e,t){const s=e.indexOf(t);s>-1&&e.splice(s,1)}class jl{constructor(){this.subscriptions=[]}add(e){return bl(this.subscriptions,e),()=>yl(this.subscriptions,e)}notify(e,t,s){const n=this.subscriptions.length;if(n)if(1===n)this.subscriptions[0](e,t,s);else for(let r=0;r<n;r++){const n=this.subscriptions[r];n&&n(e,t,s)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function wl(e,t){return t?e*(1e3/t):0}const Nl={current:void 0};class Sl{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.canTrackVelocity=null,this.events={},this.updateAndNotify=e=>{const t=vl.now();var s;if((this.updatedAt!==t&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(e),this.current!==this.prev)&&(null===(s=this.events.change)||void 0===s||s.notify(this.current),this.dependents))for(const n of this.dependents)n.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){var t;this.current=e,this.updatedAt=vl.now(),null===this.canTrackVelocity&&void 0!==e&&(this.canTrackVelocity=(t=this.current,!isNaN(parseFloat(t))))}setPrevFrameValue(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.current;this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new jl);const s=this.events[e].add(t);return"change"===e?()=>{s(),So.read(()=>{this.events.change.getSize()||this.stop()})}:s}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,t,s){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-s}jump(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;null===(e=this.events.change)||void 0===e||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return Nl.current&&Nl.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const e=vl.now();if(!this.canTrackVelocity||void 0===this.prevFrameValue||e-this.updatedAt>30)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,30);return wl(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,t;null===(e=this.dependents)||void 0===e||e.clear(),null===(t=this.events.destroy)||void 0===t||t.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function kl(e,t){return new Sl(e,t)}const Al=[...co,Go,tl],{schedule:_l,cancel:El}=No(queueMicrotask,!1),Cl={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Pl={};for(const s in Cl)Pl[s]={isEnabled:e=>Cl[s].some(t=>!!e[t])};const Tl=()=>({x:{min:0,max:0},y:{min:0,max:0}}),Il="undefined"!==typeof window,Rl={current:null},Dl={current:!1};const Ol=new WeakMap;function Ll(e){return null!==e&&"object"===typeof e&&"function"===typeof e.start}function Ml(e){return"string"===typeof e||Array.isArray(e)}const zl=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Fl=["initial",...zl];function Ul(e){return Ll(e.animate)||Fl.some(t=>Ml(e[t]))}function Bl(e){return Boolean(Ul(e)||e.variants)}function ql(e){const t=[{},{}];return null===e||void 0===e||e.values.forEach((e,s)=>{t[0][s]=e.get(),t[1][s]=e.getVelocity()}),t}function Vl(e,t,s,n){if("function"===typeof t){const[r,a]=ql(n);t=t(void 0!==s?s:e.custom,r,a)}if("string"===typeof t&&(t=e.variants&&e.variants[t]),"function"===typeof t){const[r,a]=ql(n);t=t(void 0!==s?s:e.custom,r,a)}return t}const Hl=["willChange"],Wl=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class Gl{scrapeMotionValuesFromProps(e,t,s){return{}}constructor(e){let{parent:t,props:s,presenceContext:n,reducedMotionConfig:r,blockInitialAnimation:a,visualState:i}=e,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Do,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const e=vl.now();this.renderScheduledAt<e&&(this.renderScheduledAt=e,So.render(this.render,!1,!0))};const{latestValues:l,renderState:c}=i;this.latestValues=l,this.baseTarget=(0,d.A)({},l),this.initialValues=s.initial?(0,d.A)({},l):{},this.renderState=c,this.parent=t,this.props=s,this.presenceContext=n,this.depth=t?t.depth+1:0,this.reducedMotionConfig=r,this.options=o,this.blockInitialAnimation=Boolean(a),this.isControllingVariants=Ul(s),this.isVariantNode=Bl(s),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=Boolean(t&&t.current);const u=this.scrapeMotionValuesFromProps(s,{},this),{willChange:h}=u,m=(0,fl.A)(u,Hl);for(const d in m){const e=m[d];void 0!==l[d]&&pl(e)&&e.set(l[d])}}mount(e){var t;this.current=e,Ol.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((e,t)=>this.bindToMotionValue(t,e)),Dl.current||function(){if(Dl.current=!0,Il)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>Rl.current=e.matches;e.addEventListener("change",t),t()}else Rl.current=!1}(),this.shouldReduceMotion="never"!==this.reducedMotionConfig&&("always"===this.reducedMotionConfig||Rl.current),null===(t=this.parent)||void 0===t||t.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var e;this.projection&&this.projection.unmount(),ko(this.notifyUpdate),ko(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),null===(e=this.parent)||void 0===e||e.removeChild(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const e=this.features[t];e&&(e.unmount(),e.isMounted=!1)}this.current=null}addChild(e){var t;this.children.add(e),null!==(t=this.enteringChildren)&&void 0!==t||(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const s=xi.has(e);s&&this.onBindTransform&&this.onBindTransform();const n=t.on("change",t=>{this.latestValues[e]=t,this.props.onUpdate&&So.preRender(this.notifyUpdate),s&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let r;window.MotionCheckAppearSync&&(r=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{n(),r&&r(),t.owner&&t.stop()})}sortNodePosition(e){return this.current&&this.sortInstanceNodePosition&&this.type===e.type?this.sortInstanceNodePosition(this.current,e.current):0}updateFeatures(){let e="animation";for(e in Pl){const t=Pl[e];if(!t)continue;const{isEnabled:s,Feature:n}=t;if(!this.features[e]&&n&&s(this.props)&&(this.features[e]=new n(this)),this.features[e]){const t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):{x:{min:0,max:0},y:{min:0,max:0}}}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let s=0;s<Wl.length;s++){const t=Wl[s];this.propEventSubscriptions[t]&&(this.propEventSubscriptions[t](),delete this.propEventSubscriptions[t]);const n=e["on"+t];n&&(this.propEventSubscriptions[t]=this.on(t,n))}this.prevMotionValues=function(e,t,s){for(const n in t){const r=t[n],a=s[n];if(pl(r))e.addValue(n,r);else if(pl(a))e.addValue(n,kl(r,{owner:e}));else if(a!==r)if(e.hasValue(n)){const t=e.getValue(n);!0===t.liveStyle?t.jump(r):t.hasAnimated||t.set(r)}else{const t=e.getStaticValue(n);e.addValue(n,kl(void 0!==t?t:r,{owner:e}))}}for(const n in s)void 0===t[n]&&e.removeValue(n);return t}(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const s=this.values.get(e);t!==s&&(s&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let s=this.values.get(e);return void 0===s&&void 0!==t&&(s=kl(null===t?void 0:t,{owner:this}),this.addValue(e,s)),s}readValue(e,t){var s;let n=void 0===this.latestValues[e]&&this.current?null!==(s=this.getBaseTargetFromProps(this.props,e))&&void 0!==s?s:this.readValueFromInstance(this.current,e,this.options):this.latestValues[e];return void 0!==n&&null!==n&&("string"===typeof n&&(ho(n)||Oo(n))?n=parseFloat(n):!(e=>Al.find(lo(e)))(n)&&tl.test(t)&&(n=ul(e,t)),this.setBaseTarget(e,pl(n)?n.get():n)),pl(n)?n.get():n}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){const{initial:t}=this.props;let s;if("string"===typeof t||"object"===typeof t){var n;const r=Vl(this.props,t,null===(n=this.presenceContext)||void 0===n?void 0:n.custom);r&&(s=r[e])}if(t&&void 0!==s)return s;const r=this.getBaseTargetFromProps(this.props,e);return void 0===r||pl(r)?void 0!==this.initialValues[e]&&void 0===s?void 0:this.baseTarget[e]:r}on(e,t){return this.events[e]||(this.events[e]=new jl),this.events[e].add(t)}notify(e){if(this.events[e]){for(var t=arguments.length,s=new Array(t>1?t-1:0),n=1;n<t;n++)s[n-1]=arguments[n];this.events[e].notify(...s)}}scheduleRenderMicrotask(){_l.render(this.render)}}class Kl extends Gl{constructor(){super(...arguments),this.KeyframeResolver=ml}sortInstanceNodePosition(e,t){return 2&e.compareDocumentPosition(t)?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,t){let{vars:s,style:n}=t;delete s[e],delete n[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;pl(e)&&(this.childSubscription=e.on("change",e=>{this.current&&(this.current.textContent="".concat(e))}))}}const Zl=(e,t)=>t&&"number"===typeof e?t.transform(e):e,Jl={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Ql=gi.length;function Yl(e,t,s){const{style:n,vars:r,transformOrigin:a}=e;let i=!1,o=!1;for(const l in t){const e=t[l];if(xi.has(l))i=!0;else if(Ci(l))r[l]=e;else{const t=Zl(e,ll[l]);l.startsWith("origin")?(o=!0,a[l]=t):n[l]=t}}if(t.transform||(i||s?n.transform=function(e,t,s){let n="",r=!0;for(let a=0;a<Ql;a++){const i=gi[a],o=e[i];if(void 0===o)continue;let l=!0;if(l="number"===typeof o?o===(i.startsWith("scale")?1:0):0===parseFloat(o),!l||s){const e=Zl(o,ll[i]);l||(r=!1,n+="".concat(Jl[i]||i,"(").concat(e,") ")),s&&(t[i]=e)}}return n=n.trim(),s?n=s(t,r?"":n):r&&(n="none"),n}(t,e.transform,s):n.transform&&(n.transform="none")),o){const{originX:e="50%",originY:t="50%",originZ:s=0}=a;n.transformOrigin="".concat(e," ").concat(t," ").concat(s)}}function $l(e,t,s,n){let{style:r,vars:a}=t;const i=e.style;let o;for(o in r)i[o]=r[o];for(o in null===n||void 0===n||n.applyProjectionStyles(i,s),a)i.setProperty(o,a[o])}const Xl={};function ec(e,t){let{layout:s,layoutId:n}=t;return xi.has(e)||e.startsWith("origin")||(s||void 0!==n)&&(!!Xl[e]||"opacity"===e)}function tc(e,t,s){const{style:n}=e,r={};for(const i in n){var a;(pl(n[i])||t.style&&pl(t.style[i])||ec(i,e)||void 0!==(null===s||void 0===s||null===(a=s.getValue(i))||void 0===a?void 0:a.liveStyle))&&(r[i]=n[i])}return r}class sc extends Kl{constructor(){super(...arguments),this.type="html",this.renderInstance=$l}readValueFromInstance(e,t){var s,n;if(xi.has(t))return null!==(s=this.projection)&&void 0!==s&&s.isProjecting?ki(t):((e,t)=>{const{transform:s="none"}=getComputedStyle(e);return Ai(s,t)})(e,t);{const s=(n=e,window.getComputedStyle(n)),r=(Ci(t)?s.getPropertyValue(t):s[t])||0;return"string"===typeof r?r.trim():r}}measureInstanceViewportBox(e,t){let{transformPagePoint:s}=t;return Ji(e,s)}build(e,t,s){Yl(e,t,s.transformTemplate)}scrapeMotionValuesFromProps(e,t,s){return tc(e,t,s)}}const nc=e=>e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),rc={offset:"stroke-dashoffset",array:"stroke-dasharray"},ac={offset:"strokeDashoffset",array:"strokeDasharray"};const ic=["attrX","attrY","attrScale","pathLength","pathSpacing","pathOffset"];function oc(e,t,s,n,r){let{attrX:a,attrY:i,attrScale:o,pathLength:l,pathSpacing:c=1,pathOffset:d=0}=t;if(Yl(e,(0,fl.A)(t,ic),n),s)return void(e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox));e.attrs=e.style,e.style={};const{attrs:u,style:h}=e;var m,p;(u.transform&&(h.transform=u.transform,delete u.transform),h.transform||u.transformOrigin)&&(h.transformOrigin=null!==(m=u.transformOrigin)&&void 0!==m?m:"50% 50%",delete u.transformOrigin);h.transform&&(h.transformBox=null!==(p=null===r||void 0===r?void 0:r.transformBox)&&void 0!==p?p:"fill-box",delete u.transformBox);void 0!==a&&(u.x=a),void 0!==i&&(u.y=i),void 0!==o&&(u.scale=o),void 0!==l&&function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];e.pathLength=1;const a=r?rc:ac;e[a.offset]=ro.transform(-n);const i=ro.transform(t),o=ro.transform(s);e[a.array]="".concat(i," ").concat(o)}(u,l,c,d,!1)}const lc=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]),cc=e=>"string"===typeof e&&"svg"===e.toLowerCase();function dc(e,t,s){const n=tc(e,t,s);for(const r in e)if(pl(e[r])||pl(t[r])){n[-1!==gi.indexOf(r)?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r]=e[r]}return n}class uc extends Kl{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Tl}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(xi.has(t)){const e=dl(t);return e&&e.default||0}return t=lc.has(t)?t:nc(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,s){return dc(e,t,s)}build(e,t,s){oc(e,t,this.isSVGTag,s.transformTemplate,s.style)}renderInstance(e,t,s,n){!function(e,t,s,n){$l(e,t,void 0,n);for(const r in t.attrs)e.setAttribute(lc.has(r)?r:nc(r),t.attrs[r])}(e,t,0,n)}mount(e){this.isSVGTag=cc(e.tagName),super.mount(e)}}const hc=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function mc(e){return"string"===typeof e&&!e.includes("-")&&!!(hc.indexOf(e)>-1||/[A-Z]/.test(e))}const pc=(e,t)=>mc(e)?new uc(t):new sc(t,{allowProjection:e!==n.Fragment}),fc=(0,n.createContext)({}),gc=(0,n.createContext)({strict:!1}),xc=(0,n.createContext)({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),vc=(0,n.createContext)({});function bc(e){const{initial:t,animate:s}=function(e,t){if(Ul(e)){const{initial:t,animate:s}=e;return{initial:!1===t||Ml(t)?t:void 0,animate:Ml(s)?s:void 0}}return!1!==e.inherit?t:{}}(e,(0,n.useContext)(vc));return(0,n.useMemo)(()=>({initial:t,animate:s}),[yc(t),yc(s)])}function yc(e){return Array.isArray(e)?e.join(" "):e}const jc=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function wc(e,t,s){for(const n in t)pl(t[n])||ec(n,s)||(e[n]=t[n])}function Nc(e,t){const s={};return wc(s,e.style||{},e),Object.assign(s,function(e,t){let{transformTemplate:s}=e;return(0,n.useMemo)(()=>{const e={style:{},transform:{},transformOrigin:{},vars:{}};return Yl(e,t,s),Object.assign({},e.vars,e.style)},[t])}(e,t)),s}function Sc(e,t){const s={},n=Nc(e,t);return e.drag&&!1!==e.dragListener&&(s.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=!0===e.drag?"none":"pan-".concat("x"===e.drag?"y":"x")),void 0===e.tabIndex&&(e.onTap||e.onTapStart||e.whileTap)&&(s.tabIndex=0),s.style=n,s}const kc=()=>(0,d.A)((0,d.A)({},{style:{},transform:{},transformOrigin:{},vars:{}}),{},{attrs:{}});function Ac(e,t,s,r){const a=(0,n.useMemo)(()=>{const s=kc();return oc(s,t,cc(r),e.transformTemplate,e.style),(0,d.A)((0,d.A)({},s.attrs),{},{style:(0,d.A)({},s.style)})},[t]);if(e.style){const t={};wc(t,e.style,e),a.style=(0,d.A)((0,d.A)({},t),a.style)}return a}const _c=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Ec(e){return e.startsWith("while")||e.startsWith("drag")&&"draggable"!==e||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||_c.has(e)}let Cc=e=>!Ec(e);try{"function"===typeof(Pc=require("@emotion/is-prop-valid").default)&&(Cc=e=>e.startsWith("on")?!Ec(e):Pc(e))}catch(_v){}var Pc;function Tc(e,t,s,r,a){let{latestValues:i}=r,o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];const l=(mc(e)?Ac:Sc)(t,i,a,e),c=function(e,t,s){const n={};for(const r in e)"values"===r&&"object"===typeof e.values||(Cc(r)||!0===s&&Ec(r)||!t&&!Ec(r)||e.draggable&&r.startsWith("onDrag"))&&(n[r]=e[r]);return n}(t,"string"===typeof e,o),u=e!==n.Fragment?(0,d.A)((0,d.A)((0,d.A)({},c),l),{},{ref:s}):{},{children:h}=t,m=(0,n.useMemo)(()=>pl(h)?h.get():h,[h]);return(0,n.createElement)(e,(0,d.A)((0,d.A)({},u),{},{children:m}))}const Ic=(0,n.createContext)(null);function Rc(e){const t=(0,n.useRef)(null);return null===t.current&&(t.current=e()),t.current}function Dc(e){return pl(e)?e.get():e}const Oc=["transitionEnd","transition"];function Lc(e,t,s,n){const r={},a=n(e,{});for(const h in a)r[h]=Dc(a[h]);let{initial:i,animate:o}=e;const l=Ul(e),c=Bl(e);t&&c&&!l&&!1!==e.inherit&&(void 0===i&&(i=t.initial),void 0===o&&(o=t.animate));let d=!!s&&!1===s.initial;d=d||!1===i;const u=d?o:i;if(u&&"boolean"!==typeof u&&!Ll(u)){const t=Array.isArray(u)?u:[u];for(let s=0;s<t.length;s++){const n=Vl(e,t[s]);if(n){const{transitionEnd:e,transition:t}=n,s=(0,fl.A)(n,Oc);for(const n in s){let e=s[n];if(Array.isArray(e)){e=e[d?e.length-1:0]}null!==e&&(r[n]=e)}for(const n in e)r[n]=e[n]}}}return r}const Mc=e=>(t,s)=>{const r=(0,n.useContext)(vc),a=(0,n.useContext)(Ic),i=()=>function(e,t,s,n){let{scrapeMotionValuesFromProps:r,createRenderState:a}=e;return{latestValues:Lc(t,s,n,r),renderState:a()}}(e,t,r,a);return s?i():Rc(i)},zc=Mc({scrapeMotionValuesFromProps:tc,createRenderState:jc}),Fc=Mc({scrapeMotionValuesFromProps:dc,createRenderState:kc});const Uc=Symbol.for("motionComponentSymbol");function Bc(e){return e&&"object"===typeof e&&Object.prototype.hasOwnProperty.call(e,"current")}function qc(e,t,s){return(0,n.useCallback)(n=>{n&&e.onMount&&e.onMount(n),t&&(n?t.mount(n):t.unmount()),s&&("function"===typeof s?s(n):Bc(s)&&(s.current=n))},[t])}const Vc="data-"+nc("framerAppearId"),Hc=(0,n.createContext)({}),Wc=Il?n.useLayoutEffect:n.useEffect;function Gc(e,t,s,r,a){var i,o,l,c;const{visualElement:d}=(0,n.useContext)(vc),u=(0,n.useContext)(gc),h=(0,n.useContext)(Ic),m=(0,n.useContext)(xc).reducedMotion,p=(0,n.useRef)(null);r=r||u.renderer,!p.current&&r&&(p.current=r(e,{visualState:t,parent:d,props:s,presenceContext:h,blockInitialAnimation:!!h&&!1===h.initial,reducedMotionConfig:m}));const f=p.current,g=(0,n.useContext)(Hc);!f||f.projection||!a||"html"!==f.type&&"svg"!==f.type||function(e,t,s,n){const{layoutId:r,layout:a,drag:i,dragConstraints:o,layoutScroll:l,layoutRoot:c,layoutCrossfade:d}=t;e.projection=new s(e.latestValues,t["data-framer-portal-id"]?void 0:Kc(e.parent)),e.projection.setOptions({layoutId:r,layout:a,alwaysMeasureLayout:Boolean(i)||o&&Bc(o),visualElement:e,animationType:"string"===typeof a?a:"both",initialPromotionConfig:n,crossfade:d,layoutScroll:l,layoutRoot:c})}(p.current,s,a,g);const x=(0,n.useRef)(!1);(0,n.useInsertionEffect)(()=>{f&&x.current&&f.update(s,h)});const v=s[Vc],b=(0,n.useRef)(Boolean(v)&&!(null!==(i=(o=window).MotionHandoffIsComplete)&&void 0!==i&&i.call(o,v))&&(null===(l=(c=window).MotionHasOptimisedAnimation)||void 0===l?void 0:l.call(c,v)));return Wc(()=>{f&&(x.current=!0,window.MotionIsMounted=!0,f.updateFeatures(),f.scheduleRenderMicrotask(),b.current&&f.animationState&&f.animationState.animateChanges())}),(0,n.useEffect)(()=>{f&&(!b.current&&f.animationState&&f.animationState.animateChanges(),b.current&&(queueMicrotask(()=>{var e,t;null===(e=(t=window).MotionHandoffMarkAsComplete)||void 0===e||e.call(t,v)}),b.current=!1),f.enteringChildren=void 0)}),f}function Kc(e){if(e)return!1!==e.options.allowProjection?e.projection:Kc(e.parent)}function Zc(e){var t,s;let{forwardMotionProps:r=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0;a&&function(e){for(const t in e)Pl[t]=(0,d.A)((0,d.A)({},Pl[t]),e[t])}(a);const l=mc(e)?Fc:zc;function c(t,s){let a;const c=(0,d.A)((0,d.A)((0,d.A)({},(0,n.useContext)(xc)),t),{},{layoutId:Jc(t)}),{isStatic:u}=c,h=bc(t),m=l(t,u);if(!u&&Il){!function(){(0,n.useContext)(gc).strict;0}();const t=function(e){const{drag:t,layout:s}=Pl;if(!t&&!s)return{};const n=(0,d.A)((0,d.A)({},t),s);return{MeasureLayout:null!==t&&void 0!==t&&t.isEnabled(e)||null!==s&&void 0!==s&&s.isEnabled(e)?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}(c);a=t.MeasureLayout,h.visualElement=Gc(e,m,c,o,t.ProjectionNode)}return(0,i.jsxs)(vc.Provider,{value:h,children:[a&&h.visualElement?(0,i.jsx)(a,(0,d.A)({visualElement:h.visualElement},c)):null,Tc(e,t,qc(m,h.visualElement,s),m,u,r)]})}c.displayName="motion.".concat("string"===typeof e?e:"create(".concat(null!==(t=null!==(s=e.displayName)&&void 0!==s?s:e.name)&&void 0!==t?t:"",")"));const u=(0,n.forwardRef)(c);return u[Uc]=e,u}function Jc(e){let{layoutId:t}=e;const s=(0,n.useContext)(fc).id;return s&&void 0!==t?s+"-"+t:t}function Qc(e,t){if("undefined"===typeof Proxy)return Zc;const s=new Map,n=(s,n)=>Zc(s,n,e,t);return new Proxy((e,t)=>n(e,t),{get:(r,a)=>"create"===a?n:(s.has(a)||s.set(a,Zc(a,void 0,e,t)),s.get(a))})}function Yc(e,t,s){const n=e.getProps();return Vl(n,t,void 0!==s?s:n.custom,e)}function $c(e,t){var s,n;return null!==(s=null!==(n=null===e||void 0===e?void 0:e[t])&&void 0!==n?n:null===e||void 0===e?void 0:e.default)&&void 0!==s?s:e}const Xc=e=>Array.isArray(e),ed=["transitionEnd","transition"];function td(e,t,s){e.hasValue(t)?e.getValue(t).set(s):e.addValue(t,kl(s))}function sd(e){return Xc(e)?e[e.length-1]||0:e}function nd(e,t){const s=e.getValue("willChange");if(n=s,Boolean(pl(n)&&n.add))return s.add(t);if(!s&&yo.WillChange){const s=new yo.WillChange("auto");e.addValue("willChange",s),s.add(t)}var n}function rd(e){return e.props[Vc]}function ad(e){e.duration=0,e.type}const id=(e,t)=>s=>t(e(s)),od=function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.reduce(id)},ld=e=>1e3*e,cd=e=>e/1e3,dd={layout:0,mainThread:0,waapi:0};function ud(e,t,s){return s<0&&(s+=1),s>1&&(s-=1),s<1/6?e+6*(t-e)*s:s<.5?t:s<2/3?e+(t-e)*(2/3-s)*6:e}function hd(e,t){return s=>s>0?t:e}const md=(e,t,s)=>{const n=e*e,r=s*(t*t-n)+n;return r<0?0:Math.sqrt(r)},pd=[Ho,Vo,Wo];function fd(e){const t=(e=>pd.find(t=>t.test(e)))(e);if(Boolean(t),"'".concat(e,"' is not an animatable color. Use the equivalent color code instead."),!Boolean(t))return!1;let s=t.parse(e);return t===Wo&&(s=function(e){let{hue:t,saturation:s,lightness:n,alpha:r}=e;t/=360,s/=100,n/=100;let a=0,i=0,o=0;if(s){const e=n<.5?n*(1+s):n+s-n*s,r=2*n-e;a=ud(r,e,t+1/3),i=ud(r,e,t),o=ud(r,e,t-1/3)}else a=i=o=n;return{red:Math.round(255*a),green:Math.round(255*i),blue:Math.round(255*o),alpha:r}}(s)),s}const gd=(e,t)=>{const s=fd(e),n=fd(t);if(!s||!n)return hd(e,t);const r=(0,d.A)({},s);return e=>(r.red=md(s.red,n.red,e),r.green=md(s.green,n.green,e),r.blue=md(s.blue,n.blue,e),r.alpha=Di(s.alpha,n.alpha,e),Vo.transform(r))},xd=new Set(["none","hidden"]);function vd(e,t){return s=>Di(e,t,s)}function bd(e){return"number"===typeof e?vd:"string"===typeof e?Ti(e)?hd:Go.test(e)?gd:wd:Array.isArray(e)?yd:"object"===typeof e?Go.test(e)?gd:jd:hd}function yd(e,t){const s=[...e],n=s.length,r=e.map((e,s)=>bd(e)(e,t[s]));return e=>{for(let t=0;t<n;t++)s[t]=r[t](e);return s}}function jd(e,t){const s=(0,d.A)((0,d.A)({},e),t),n={};for(const r in s)void 0!==e[r]&&void 0!==t[r]&&(n[r]=bd(e[r])(e[r],t[r]));return e=>{for(const t in n)s[t]=n[t](e);return s}}const wd=(e,t)=>{const s=tl.createTransformer(t),n=Yo(e),r=Yo(t);return n.indexes.var.length===r.indexes.var.length&&n.indexes.color.length===r.indexes.color.length&&n.indexes.number.length>=r.indexes.number.length?xd.has(e)&&!r.values.length||xd.has(t)&&!n.values.length?function(e,t){return xd.has(e)?s=>s<=0?e:t:s=>s>=1?t:e}(e,t):od(yd(function(e,t){const s=[],n={color:0,var:0,number:0};for(let a=0;a<t.values.length;a++){var r;const i=t.types[a],o=e.indexes[i][n[i]],l=null!==(r=e.values[o])&&void 0!==r?r:0;s[a]=l,n[i]++}return s}(n,r),r.values),s):("Complex values '".concat(e,"' and '").concat(t,"' too different to mix. Ensure all colors are of the same type, and that each contains the same quantity of number and color values. Falling back to instant transition."),hd(e,t))};function Nd(e,t,s){if("number"===typeof e&&"number"===typeof t&&"number"===typeof s)return Di(e,t,s);return bd(e)(e,t)}const Sd=e=>{const t=t=>{let{timestamp:s}=t;return e(s)};return{start:function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return So.update(t,e)},stop:()=>ko(t),now:()=>Ao.isProcessing?Ao.timestamp:vl.now()}},kd=function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,n="";const r=Math.max(Math.round(t/s),2);for(let a=0;a<r;a++)n+=Math.round(1e4*e(a/(r-1)))/1e4+", ";return"linear(".concat(n.substring(0,n.length-2),")")},Ad=2e4;function _d(e){let t=0;let s=e.next(t);for(;!s.done&&t<Ad;)t+=50,s=e.next(t);return t>=Ad?1/0:t}function Ed(e,t,s){const n=Math.max(t-5,0);return wl(s-e(n),t-n)}const Cd={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Pd=.001;function Td(e){let t,s,{duration:n=Cd.duration,bounce:r=Cd.bounce,velocity:a=Cd.velocity,mass:i=Cd.mass}=e;ld(Cd.maxDuration);let o=1-r;o=Yi(Cd.minDamping,Cd.maxDamping,o),n=Yi(Cd.minDuration,Cd.maxDuration,cd(n)),o<1?(t=e=>{const t=e*o,s=t*n,r=t-a,i=Rd(e,o),l=Math.exp(-s);return Pd-r/i*l},s=e=>{const s=e*o*n,r=s*a+a,i=Math.pow(o,2)*Math.pow(e,2)*n,l=Math.exp(-s),c=Rd(Math.pow(e,2),o);return(-t(e)+Pd>0?-1:1)*((r-i)*l)/c}):(t=e=>Math.exp(-e*n)*((e-a)*n+1)-.001,s=e=>Math.exp(-e*n)*(n*n*(a-e)));const l=function(e,t,s){let n=s;for(let r=1;r<Id;r++)n-=e(n)/t(n);return n}(t,s,5/n);if(n=ld(n),isNaN(l))return{stiffness:Cd.stiffness,damping:Cd.damping,duration:n};{const e=Math.pow(l,2)*i;return{stiffness:e,damping:2*o*Math.sqrt(i*e),duration:n}}}const Id=12;function Rd(e,t){return e*Math.sqrt(1-t*t)}const Dd=["duration","bounce"],Od=["stiffness","damping","mass"];function Ld(e,t){return t.some(t=>void 0!==e[t])}function Md(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Cd.visualDuration,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Cd.bounce;const s="object"!==typeof e?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:n,restDelta:r}=s;const a=s.keyframes[0],i=s.keyframes[s.keyframes.length-1],o={done:!1,value:a},{stiffness:l,damping:c,mass:u,duration:h,velocity:m,isResolvedFromDuration:p}=function(e){let t=(0,d.A)({velocity:Cd.velocity,stiffness:Cd.stiffness,damping:Cd.damping,mass:Cd.mass,isResolvedFromDuration:!1},e);if(!Ld(e,Od)&&Ld(e,Dd))if(e.visualDuration){const s=e.visualDuration,n=2*Math.PI/(1.2*s),r=n*n,a=2*Yi(.05,1,1-(e.bounce||0))*Math.sqrt(r);t=(0,d.A)((0,d.A)({},t),{},{mass:Cd.mass,stiffness:r,damping:a})}else{const s=Td(e);t=(0,d.A)((0,d.A)((0,d.A)({},t),s),{},{mass:Cd.mass}),t.isResolvedFromDuration=!0}return t}((0,d.A)((0,d.A)({},s),{},{velocity:-cd(s.velocity||0)})),f=m||0,g=c/(2*Math.sqrt(l*u)),x=i-a,v=cd(Math.sqrt(l/u)),b=Math.abs(x)<5;let y;if(n||(n=b?Cd.restSpeed.granular:Cd.restSpeed.default),r||(r=b?Cd.restDelta.granular:Cd.restDelta.default),g<1){const e=Rd(v,g);y=t=>{const s=Math.exp(-g*v*t);return i-s*((f+g*v*x)/e*Math.sin(e*t)+x*Math.cos(e*t))}}else if(1===g)y=e=>i-Math.exp(-v*e)*(x+(f+v*x)*e);else{const e=v*Math.sqrt(g*g-1);y=t=>{const s=Math.exp(-g*v*t),n=Math.min(e*t,300);return i-s*((f+g*v*x)*Math.sinh(n)+e*x*Math.cosh(n))/e}}const j={calculatedDuration:p&&h||null,next:e=>{const t=y(e);if(p)o.done=e>=h;else{let s=0===e?f:0;g<1&&(s=0===e?ld(f):Ed(y,e,t));const a=Math.abs(s)<=n,l=Math.abs(i-t)<=r;o.done=a&&l}return o.value=o.done?i:t,o},toString:()=>{const e=Math.min(_d(j),Ad),t=kd(t=>j.next(e*t).value,e,30);return e+"ms "+t},toTransition:()=>{}};return j}function zd(e){let{keyframes:t,velocity:s=0,power:n=.8,timeConstant:r=325,bounceDamping:a=10,bounceStiffness:i=500,modifyTarget:o,min:l,max:c,restDelta:d=.5,restSpeed:u}=e;const h=t[0],m={done:!1,value:h},p=e=>void 0===l?c:void 0===c||Math.abs(l-e)<Math.abs(c-e)?l:c;let f=n*s;const g=h+f,x=void 0===o?g:o(g);x!==g&&(f=x-h);const v=e=>-f*Math.exp(-e/r),b=e=>x+v(e),y=e=>{const t=v(e),s=b(e);m.done=Math.abs(t)<=d,m.value=m.done?x:s};let j,w;const N=e=>{(e=>void 0!==l&&e<l||void 0!==c&&e>c)(m.value)&&(j=e,w=Md({keyframes:[m.value,p(m.value)],velocity:Ed(b,e,m.value),damping:a,stiffness:i,restDelta:d,restSpeed:u}))};return N(0),{calculatedDuration:null,next:e=>{let t=!1;return w||void 0!==j||(t=!0,y(e),N(e)),void 0!==j&&e>=j?w.next(e-j):(!t&&y(e),m)}}}Md.applyToOptions=e=>{const t=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;const s=(arguments.length>2?arguments[2]:void 0)((0,d.A)((0,d.A)({},e),{},{keyframes:[0,t]})),n=Math.min(_d(s),Ad);return{type:"keyframes",ease:e=>s.next(n*e).value/t,duration:cd(n)}}(e,100,Md);return e.ease=t.ease,e.duration=ld(t.duration),e.type="keyframes",e};const Fd=(e,t,s)=>(((1-3*s+3*t)*e+(3*s-6*t))*e+3*t)*e;function Ud(e,t,s,n){if(e===t&&s===n)return bo;const r=t=>function(e,t,s,n,r){let a,i,o=0;do{i=t+(s-t)/2,a=Fd(i,n,r)-e,a>0?s=i:t=i}while(Math.abs(a)>1e-7&&++o<12);return i}(t,0,1,e,s);return e=>0===e||1===e?e:Fd(r(e),t,n)}const Bd=Ud(.42,0,1,1),qd=Ud(0,0,.58,1),Vd=Ud(.42,0,.58,1),Hd=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,Wd=e=>t=>1-e(1-t),Gd=Ud(.33,1.53,.69,.99),Kd=Wd(Gd),Zd=Hd(Kd),Jd=e=>(e*=2)<1?.5*Kd(e):.5*(2-Math.pow(2,-10*(e-1))),Qd=e=>1-Math.sin(Math.acos(e)),Yd=Wd(Qd),$d=Hd(Qd),Xd=e=>Array.isArray(e)&&"number"===typeof e[0],eu={linear:bo,easeIn:Bd,easeInOut:Vd,easeOut:qd,circIn:Qd,circInOut:$d,circOut:Yd,backIn:Kd,backInOut:Zd,backOut:Gd,anticipate:Jd},tu=e=>{if(Xd(e)){e.length;const[t,s,n,r]=e;return Ud(t,s,n,r)}return"string"===typeof e?("Invalid easing type '".concat(e,"'"),eu[e]):e},su=(e,t,s)=>{const n=t-e;return 0===n?1:(s-e)/n};function nu(e,t){let{clamp:s=!0,ease:n,mixer:r}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=e.length;if(t.length,1===a)return()=>t[0];if(2===a&&t[0]===t[1])return()=>t[1];const i=e[0]===e[1];e[0]>e[a-1]&&(e=[...e].reverse(),t=[...t].reverse());const o=function(e,t,s){const n=[],r=s||yo.mix||Nd,a=e.length-1;for(let i=0;i<a;i++){let s=r(e[i],e[i+1]);if(t){const e=Array.isArray(t)?t[i]||bo:t;s=od(e,s)}n.push(s)}return n}(t,n,r),l=o.length,c=s=>{if(i&&s<e[0])return t[0];let n=0;if(l>1)for(;n<e.length-2&&!(s<e[n+1]);n++);const r=su(e[n],e[n+1],s);return o[n](r)};return s?t=>c(Yi(e[0],e[a-1],t)):c}function ru(e){const t=[0];return function(e,t){const s=e[e.length-1];for(let n=1;n<=t;n++){const r=su(0,t,n);e.push(Di(s,1,r))}}(t,e.length-1),t}function au(e){let{duration:t=300,keyframes:s,times:n,ease:r="easeInOut"}=e;const a=(e=>Array.isArray(e)&&"number"!==typeof e[0])(r)?r.map(tu):tu(r),i={done:!1,value:s[0]},o=function(e,t){return e.map(e=>e*t)}(n&&n.length===s.length?n:ru(s),t),l=nu(o,s,{ease:Array.isArray(a)?a:(c=s,d=a,c.map(()=>d||Vd).splice(0,c.length-1))});var c,d;return{calculatedDuration:t,next:e=>(i.value=l(e),i.done=e>=t,i)}}const iu=e=>null!==e;function ou(e,t,s){let{repeat:n,repeatType:r="loop"}=t,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;const i=e.filter(iu),o=a<0||n&&"loop"!==r&&n%2===1?0:i.length-1;return o&&void 0!==s?s:i[o]}const lu={decay:zd,inertia:zd,tween:au,keyframes:au,spring:Md};function cu(e){"string"===typeof e.type&&(e.type=lu[e.type])}class du{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const uu=e=>e/100;class hu extends du{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var e,t;const{motionValue:s}=this.options;s&&s.updatedAt!==vl.now()&&this.tick(vl.now()),this.isStopped=!0,"idle"!==this.state&&(this.teardown(),null===(e=(t=this.options).onStop)||void 0===e||e.call(t))},dd.mainThread++,this.options=e,this.initAnimation(),this.play(),!1===e.autoplay&&this.pause()}initAnimation(){const{options:e}=this;cu(e);const{type:t=au,repeat:s=0,repeatDelay:n=0,repeatType:r,velocity:a=0}=e;let{keyframes:i}=e;const o=t||au;o!==au&&"number"!==typeof i[0]&&(this.mixKeyframes=od(uu,Nd(i[0],i[1])),i=[0,100]);const l=o((0,d.A)((0,d.A)({},e),{},{keyframes:i}));"mirror"===r&&(this.mirroredGenerator=o((0,d.A)((0,d.A)({},e),{},{keyframes:[...i].reverse(),velocity:-a}))),null===l.calculatedDuration&&(l.calculatedDuration=_d(l));const{calculatedDuration:c}=l;this.calculatedDuration=c,this.resolvedDuration=c+n,this.totalDuration=this.resolvedDuration*(s+1)-n,this.generator=l}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;null!==this.holdTime?this.currentTime=this.holdTime:this.currentTime=t}tick(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{generator:s,totalDuration:n,mixKeyframes:r,mirroredGenerator:a,resolvedDuration:i,calculatedDuration:o}=this;if(null===this.startTime)return s.next(0);const{delay:l=0,keyframes:c,repeat:d,repeatType:u,repeatDelay:h,type:m,onUpdate:p,finalKeyframe:f}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-n/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const g=this.currentTime-l*(this.playbackSpeed>=0?1:-1),x=this.playbackSpeed>=0?g<0:g>n;this.currentTime=Math.max(g,0),"finished"===this.state&&null===this.holdTime&&(this.currentTime=n);let v=this.currentTime,b=s;if(d){const e=Math.min(this.currentTime,n)/i;let t=Math.floor(e),s=e%1;!s&&e>=1&&(s=1),1===s&&t--,t=Math.min(t,d+1);Boolean(t%2)&&("reverse"===u?(s=1-s,h&&(s-=h/i)):"mirror"===u&&(b=a)),v=Yi(0,1,s)*i}const y=x?{done:!1,value:c[0]}:b.next(v);r&&(y.value=r(y.value));let{done:j}=y;x||null===o||(j=this.playbackSpeed>=0?this.currentTime>=n:this.currentTime<=0);const w=null===this.holdTime&&("finished"===this.state||"running"===this.state&&j);return w&&m!==zd&&(y.value=ou(c,this.options,f,this.speed)),p&&p(y.value),w&&this.finish(),y}then(e,t){return this.finished.then(e,t)}get duration(){return cd(this.calculatedDuration)}get time(){return cd(this.currentTime)}set time(e){var t;e=ld(e),this.currentTime=e,null===this.startTime||null!==this.holdTime||0===this.playbackSpeed?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),null===(t=this.driver)||void 0===t||t.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(vl.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=cd(this.currentTime))}play(){var e,t;if(this.isStopped)return;const{driver:s=Sd,startTime:n}=this.options;this.driver||(this.driver=s(e=>this.tick(e))),null===(e=(t=this.options).onPlay)||void 0===e||e.call(t);const r=this.driver.now();"finished"===this.state?(this.updateFinished(),this.startTime=r):null!==this.holdTime?this.startTime=r-this.holdTime:this.startTime||(this.startTime=null!==n&&void 0!==n?n:r),"finished"===this.state&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(vl.now()),this.holdTime=this.currentTime}complete(){"running"!==this.state&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,t;this.notifyFinished(),this.teardown(),this.state="finished",null===(e=(t=this.options).onComplete)||void 0===e||e.call(t)}cancel(){var e,t;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),null===(e=(t=this.options).onCancel)||void 0===e||e.call(t)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null,dd.mainThread--}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var t;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),null===(t=this.driver)||void 0===t||t.stop(),e.observe(this)}}function mu(e){let t;return()=>(void 0===t&&(t=e()),t)}const pu=mu(()=>void 0!==window.ScrollTimeline),fu={};function gu(e,t){const s=mu(e);return()=>{var e;return null!==(e=fu[t])&&void 0!==e?e:s()}}const xu=gu(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch(Nt){return!1}return!0},"linearEasing"),vu=e=>{let[t,s,n,r]=e;return"cubic-bezier(".concat(t,", ").concat(s,", ").concat(n,", ").concat(r,")")},bu={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:vu([0,.65,.55,1]),circOut:vu([.55,0,1,.45]),backIn:vu([.31,.01,.66,-.59]),backOut:vu([.33,1.53,.69,.99])};function yu(e,t){return e?"function"===typeof e?xu()?kd(e,t):"ease-out":Xd(e)?vu(e):Array.isArray(e)?e.map(e=>yu(e,t)||bu.easeOut):bu[e]:void 0}function ju(e,t,s){let{delay:n=0,duration:r=300,repeat:a=0,repeatType:i="loop",ease:o="easeOut",times:l}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0;const d={[t]:s};l&&(d.offset=l);const u=yu(o,r);Array.isArray(u)&&(d.easing=u),wo.value&&dd.waapi++;const h={delay:n,duration:r,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:a+1,direction:"reverse"===i?"alternate":"normal"};c&&(h.pseudoElement=c);const m=e.animate(d,h);return wo.value&&m.finished.finally(()=>{dd.waapi--}),m}function wu(e){return"function"===typeof e&&"applyToOptions"in e}const Nu=["type"];class Su extends du{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:t,name:s,keyframes:n,pseudoElement:r,allowFlatten:a=!1,finalKeyframe:i,onComplete:o}=e;this.isPseudoElement=Boolean(r),this.allowFlatten=a,this.options=e,e.type;const l=function(e){let{type:t}=e,s=(0,fl.A)(e,Nu);return wu(t)&&xu()?t.applyToOptions(s):(null!==(n=s.duration)&&void 0!==n||(s.duration=300),null!==(r=s.ease)&&void 0!==r||(s.ease="easeOut"),s);var n,r}(e);this.animation=ju(t,s,n,l,r),!1===l.autoplay&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!r){const e=ou(n,this.options,i,this.speed);this.updateMotionValue?this.updateMotionValue(e):function(e,t,s){(e=>e.startsWith("--"))(t)?e.style.setProperty(t,s):e.style[t]=s}(t,s,e),this.animation.cancel()}null===o||void 0===o||o(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),"finished"===this.state&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,t;null===(e=(t=this.animation).finish)||void 0===e||e.call(t)}cancel(){try{this.animation.cancel()}catch(Nt){}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;"idle"!==e&&"finished"!==e&&(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,t;this.isPseudoElement||(null===(e=(t=this.animation).commitStyles)||void 0===e||e.call(t))}get duration(){var e,t;const s=(null===(e=this.animation.effect)||void 0===e||null===(t=e.getComputedTiming)||void 0===t?void 0:t.call(e).duration)||0;return cd(Number(s))}get time(){return cd(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=ld(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return null!==this.finishedTime?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline(e){let{timeline:t,observe:s}=e;var n;this.allowFlatten&&(null===(n=this.animation.effect)||void 0===n||n.updateTiming({easing:"linear"}));return this.animation.onfinish=null,t&&pu()?(this.animation.timeline=t,bo):s(this)}}const ku={anticipate:Jd,backInOut:Zd,circInOut:$d};function Au(e){"string"===typeof e.ease&&e.ease in ku&&(e.ease=ku[e.ease])}const _u=["motionValue","onUpdate","onComplete","element"];class Eu extends Su{constructor(e){Au(e),cu(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){var t;const s=this.options,{motionValue:n,onUpdate:r,onComplete:a,element:i}=s,o=(0,fl.A)(s,_u);if(!n)return;if(void 0!==e)return void n.set(e);const l=new hu((0,d.A)((0,d.A)({},o),{},{autoplay:!1})),c=ld(null!==(t=this.finishedTime)&&void 0!==t?t:this.time);n.setWithVelocity(l.sample(c-10).value,l.sample(c).value,10),l.stop()}}const Cu=(e,t)=>"zIndex"!==t&&(!("number"!==typeof e&&!Array.isArray(e))||!("string"!==typeof e||!tl.test(e)&&"0"!==e||e.startsWith("url(")));const Pu=new Set(["opacity","clipPath","filter","transform"]),Tu=mu(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));const Iu=["autoplay","delay","type","repeat","repeatDelay","repeatType","keyframes","name","motionValue","element"];class Ru extends du{constructor(e){var t;let{autoplay:s=!0,delay:n=0,type:r="keyframes",repeat:a=0,repeatDelay:i=0,repeatType:o="loop",keyframes:l,name:c,motionValue:u,element:h}=e,m=(0,fl.A)(e,Iu);super(),this.stop=()=>{var e,t;this._animation&&(this._animation.stop(),null===(t=this.stopTimeline)||void 0===t||t.call(this));null===(e=this.keyframeResolver)||void 0===e||e.cancel()},this.createdAt=vl.now();const p=(0,d.A)({autoplay:s,delay:n,type:r,repeat:a,repeatDelay:i,repeatType:o,name:c,motionValue:u,element:h},m),f=(null===h||void 0===h?void 0:h.KeyframeResolver)||Do;this.keyframeResolver=new f(l,(e,t,s)=>this.onKeyframesResolved(e,t,p,!s),c,u,h),null===(t=this.keyframeResolver)||void 0===t||t.scheduleResolve()}onKeyframesResolved(e,t,s,n){this.keyframeResolver=void 0;const{name:r,type:a,velocity:i,delay:o,isHandoff:l,onUpdate:c}=s;this.resolvedAt=vl.now(),function(e,t,s,n){const r=e[0];if(null===r)return!1;if("display"===t||"visibility"===t)return!0;const a=e[e.length-1],i=Cu(r,t),o=Cu(a,t);return"You are trying to animate ".concat(t,' from "').concat(r,'" to "').concat(a,'". "').concat(i?a:r,'" is not an animatable value.'),!(!i||!o)&&(function(e){const t=e[0];if(1===e.length)return!0;for(let s=0;s<e.length;s++)if(e[s]!==t)return!0}(e)||("spring"===s||wu(s))&&n)}(e,r,a,i)||(!yo.instantAnimations&&o||null===c||void 0===c||c(ou(e,s,t)),e[0]=e[e.length-1],ad(s),s.repeat=0);const u=n?this.resolvedAt&&this.resolvedAt-this.createdAt>40?this.resolvedAt:this.createdAt:void 0,h=(0,d.A)((0,d.A)({startTime:u,finalKeyframe:t},s),{},{keyframes:e}),m=!l&&function(e){var t;const{motionValue:s,name:n,repeatDelay:r,repeatType:a,damping:i,type:o}=e;if(!((null===s||void 0===s||null===(t=s.owner)||void 0===t?void 0:t.current)instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:c}=s.owner.getProps();return Tu()&&n&&Pu.has(n)&&("transform"!==n||!c)&&!l&&!r&&"mirror"!==a&&0!==i&&"inertia"!==o}(h)?new Eu((0,d.A)((0,d.A)({},h),{},{element:h.motionValue.owner.current})):new hu(h);m.finished.then(()=>this.notifyFinished()).catch(bo),this.pendingTimeline&&(this.stopTimeline=m.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=m}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){var e;this._animation||(null===(e=this.keyframeResolver)||void 0===e||e.resume(),To=!0,Ro(),Io(),To=!1);return this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),null===(e=this.keyframeResolver)||void 0===e||e.cancel()}}const Du=e=>null!==e;const Ou={type:"spring",stiffness:500,damping:25,restSpeed:10},Lu={type:"keyframes",duration:.8},Mu={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},zu=(e,t)=>{let{keyframes:s}=t;return s.length>2?Lu:xi.has(e)?e.startsWith("scale")?(e=>({type:"spring",stiffness:550,damping:0===e?2*Math.sqrt(550):30,restSpeed:10}))(s[1]):Ou:Mu},Fu=["when","delay","delayChildren","staggerChildren","staggerDirection","repeat","repeatType","repeatDelay","from","elapsed"];const Uu=function(e,t,s){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=arguments.length>4?arguments[4]:void 0,a=arguments.length>5?arguments[5]:void 0;return i=>{const o=$c(n,e)||{},l=o.delay||n.delay||0;let{elapsed:c=0}=n;c-=ld(l);const u=(0,d.A)((0,d.A)({keyframes:Array.isArray(s)?s:[null,s],ease:"easeOut",velocity:t.getVelocity()},o),{},{delay:-c,onUpdate:e=>{t.set(e),o.onUpdate&&o.onUpdate(e)},onComplete:()=>{i(),o.onComplete&&o.onComplete()},name:e,motionValue:t,element:a?void 0:r});(function(e){let{when:t,delay:s,delayChildren:n,staggerChildren:r,staggerDirection:a,repeat:i,repeatType:o,repeatDelay:l,from:c,elapsed:d}=e,u=(0,fl.A)(e,Fu);return!!Object.keys(u).length})(o)||Object.assign(u,zu(e,u)),u.duration&&(u.duration=ld(u.duration)),u.repeatDelay&&(u.repeatDelay=ld(u.repeatDelay)),void 0!==u.from&&(u.keyframes[0]=u.from);let h=!1;if((!1===u.type||0===u.duration&&!u.repeatDelay)&&(ad(u),0===u.delay&&(h=!0)),(yo.instantAnimations||yo.skipAnimations)&&(h=!0,ad(u),u.delay=0),u.allowFlatten=!o.type&&!o.ease,h&&!a&&void 0!==t.get()){const e=function(e,t,s){let{repeat:n,repeatType:r="loop"}=t;const a=e.filter(Du),i=n&&"loop"!==r&&n%2===1?0:a.length-1;return i&&void 0!==s?s:a[i]}(u.keyframes,o);if(void 0!==e)return void So.update(()=>{u.onUpdate(e),u.onComplete()})}return o.isSync?new hu(u):new Ru(u)}},Bu=["transition","transitionEnd"];function qu(e,t){let{protectedKeys:s,needsAnimating:n}=e;const r=s.hasOwnProperty(t)&&!0!==n[t];return n[t]=!1,r}function Vu(e,t){let{delay:s=0,transitionOverride:n,type:r}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{transition:a=e.getDefaultTransition(),transitionEnd:i}=t,o=(0,fl.A)(t,Bu);n&&(a=n);const l=[],c=r&&e.animationState&&e.animationState.getState()[r];for(const h in o){var u;const t=e.getValue(h,null!==(u=e.latestValues[h])&&void 0!==u?u:null),n=o[h];if(void 0===n||c&&qu(c,h))continue;const r=(0,d.A)({delay:s},$c(a||{},h)),i=t.get();if(void 0!==i&&!t.isAnimating&&!Array.isArray(n)&&n===i&&!r.velocity)continue;let m=!1;if(window.MotionHandoffAnimation){const t=rd(e);if(t){const e=window.MotionHandoffAnimation(t,h,So);null!==e&&(r.startTime=e,m=!0)}}nd(e,h),t.start(Uu(h,t,n,e.shouldReduceMotion&&Qi.has(h)?{type:!1}:r,e,m));const p=t.animation;p&&l.push(p)}return i&&Promise.all(l).then(()=>{So.update(()=>{i&&function(e,t){let s=Yc(e,t)||{},{transitionEnd:n={},transition:r={}}=s,a=(0,fl.A)(s,ed);a=(0,d.A)((0,d.A)({},a),n);for(const i in a)td(e,i,sd(a[i]))}(e,i)})}),l}function Hu(e,t,s){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;const a=Array.from(e).sort((e,t)=>e.sortNodePosition(t)).indexOf(t),i=e.size,o=(i-1)*n;return"function"===typeof s?s(a,i):1===r?a*n:o-a*n}function Wu(e,t){var s;let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=Yc(e,t,"exit"===n.type?null===(s=e.presenceContext)||void 0===s?void 0:s.custom:void 0);let{transition:a=e.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(a=n.transitionOverride);const i=r?()=>Promise.all(Vu(e,r,n)):()=>Promise.resolve(),o=e.variantChildren&&e.variantChildren.size?function(){let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const{delayChildren:r=0,staggerChildren:i,staggerDirection:o}=a;return function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,i=arguments.length>6?arguments[6]:void 0;const o=[];for(const l of e.variantChildren)l.notify("AnimationStart",t),o.push(Wu(l,t,(0,d.A)((0,d.A)({},i),{},{delay:s+("function"===typeof n?0:n)+Hu(e.variantChildren,l,n,r,a)})).then(()=>l.notify("AnimationComplete",t)));return Promise.all(o)}(e,t,s,r,i,o,n)}:()=>Promise.resolve(),{when:l}=a;if(l){const[e,t]="beforeChildren"===l?[i,o]:[o,i];return e().then(()=>t())}return Promise.all([i(),o(n.delay)])}function Gu(e,t){if(!Array.isArray(t))return!1;const s=t.length;if(s!==e.length)return!1;for(let n=0;n<s;n++)if(t[n]!==e[n])return!1;return!0}const Ku=Fl.length;function Zu(e){if(!e)return;if(!e.isControllingVariants){const t=e.parent&&Zu(e.parent)||{};return void 0!==e.props.initial&&(t.initial=e.props.initial),t}const t={};for(let s=0;s<Ku;s++){const n=Fl[s],r=e.props[n];(Ml(r)||!1===r)&&(t[n]=r)}return t}const Ju=["transition","transitionEnd"],Qu=[...zl].reverse(),Yu=zl.length;function $u(e){return t=>Promise.all(t.map(t=>{let{animation:s,options:n}=t;return function(e,t){let s,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e.notify("AnimationStart",t),Array.isArray(t)){const r=t.map(t=>Wu(e,t,n));s=Promise.all(r)}else if("string"===typeof t)s=Wu(e,t,n);else{const r="function"===typeof t?Yc(e,t,n.custom):t;s=Promise.all(Vu(e,r,n))}return s.then(()=>{e.notify("AnimationComplete",t)})}(e,s,n)}))}function Xu(e){let t=$u(e),s=sh(),n=!0;const r=t=>(s,n)=>{var r;const a=Yc(e,n,"exit"===t?null===(r=e.presenceContext)||void 0===r?void 0:r.custom:void 0);if(a){const{transition:e,transitionEnd:t}=a,n=(0,fl.A)(a,Ju);s=(0,d.A)((0,d.A)((0,d.A)({},s),n),t)}return s};function a(a){const{props:i}=e,o=Zu(e.parent)||{},l=[],c=new Set;let u={},h=1/0;for(let t=0;t<Yu;t++){const m=Qu[t],p=s[m],f=void 0!==i[m]?i[m]:o[m],g=Ml(f),x=m===a?p.isActive:null;!1===x&&(h=t);let v=f===o[m]&&f!==i[m]&&g;if(v&&n&&e.manuallyAnimateOnMount&&(v=!1),p.protectedKeys=(0,d.A)({},u),!p.isActive&&null===x||!f&&!p.prevProp||Ll(f)||"boolean"===typeof f)continue;const b=eh(p.prevProp,f);let y=b||m===a&&p.isActive&&!v&&g||t>h&&g,j=!1;const w=Array.isArray(f)?f:[f];let N=w.reduce(r(m),{});!1===x&&(N={});const{prevResolvedValues:S={}}=p,k=(0,d.A)((0,d.A)({},S),N),A=t=>{y=!0,c.has(t)&&(j=!0,c.delete(t)),p.needsAnimating[t]=!0;const s=e.getValue(t);s&&(s.liveStyle=!1)};for(const e in k){const t=N[e],s=S[e];if(u.hasOwnProperty(e))continue;let n=!1;n=Xc(t)&&Xc(s)?!Gu(t,s):t!==s,n?void 0!==t&&null!==t?A(e):c.add(e):void 0!==t&&c.has(e)?A(e):p.protectedKeys[e]=!0}p.prevProp=f,p.prevResolvedValues=N,p.isActive&&(u=(0,d.A)((0,d.A)({},u),N)),n&&e.blockInitialAnimation&&(y=!1);const _=v&&b;y&&(!_||j)&&l.push(...w.map(t=>{const s={type:m};if("string"===typeof t&&n&&!_&&e.manuallyAnimateOnMount&&e.parent){const{parent:n}=e,r=Yc(n,t);if(n.enteringChildren&&r){const{delayChildren:t}=r.transition||{};s.delay=Hu(n.enteringChildren,e,t)}}return{animation:t,options:s}}))}if(c.size){const t={};if("boolean"!==typeof i.initial){const s=Yc(e,Array.isArray(i.initial)?i.initial[0]:i.initial);s&&s.transition&&(t.transition=s.transition)}c.forEach(s=>{const n=e.getBaseTarget(s),r=e.getValue(s);r&&(r.liveStyle=!0),t[s]=null!==n&&void 0!==n?n:null}),l.push({animation:t})}let m=Boolean(l.length);return!n||!1!==i.initial&&i.initial!==i.animate||e.manuallyAnimateOnMount||(m=!1),n=!1,m?t(l):Promise.resolve()}return{animateChanges:a,setActive:function(t,n){var r;if(s[t].isActive===n)return Promise.resolve();null===(r=e.variantChildren)||void 0===r||r.forEach(e=>{var s;return null===(s=e.animationState)||void 0===s?void 0:s.setActive(t,n)}),s[t].isActive=n;const i=a(t);for(const e in s)s[e].protectedKeys={};return i},setAnimateFunction:function(s){t=s(e)},getState:()=>s,reset:()=>{s=sh(),n=!0}}}function eh(e,t){return"string"===typeof t?t!==e:!!Array.isArray(t)&&!Gu(t,e)}function th(){return{isActive:arguments.length>0&&void 0!==arguments[0]&&arguments[0],protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function sh(){return{animate:th(!0),whileInView:th(),whileHover:th(),whileTap:th(),whileDrag:th(),whileFocus:th(),exit:th()}}class nh{constructor(e){this.isMounted=!1,this.node=e}update(){}}let rh=0;const ah={animation:{Feature:class extends nh{constructor(e){super(e),e.animationState||(e.animationState=Xu(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Ll(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),null===(e=this.unmountControls)||void 0===e||e.call(this)}}},exit:{Feature:class extends nh{constructor(){super(...arguments),this.id=rh++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===s)return;const n=this.node.animationState.setActive("exit",!e);t&&!e&&n.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}}},ih={x:!1,y:!1};function oh(){return ih.x||ih.y}function lh(e,t,s){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{passive:!0};return e.addEventListener(t,s,n),()=>e.removeEventListener(t,s)}const ch=e=>"mouse"===e.pointerType?"number"!==typeof e.button||e.button<=0:!1!==e.isPrimary;function dh(e){return{point:{x:e.pageX,y:e.pageY}}}function uh(e,t,s,n){return lh(e,t,(e=>t=>ch(t)&&e(t,dh(t)))(s),n)}function hh(e){return e.max-e.min}function mh(e,t,s){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;e.origin=n,e.originPoint=Di(t.min,t.max,e.origin),e.scale=hh(s)/hh(t),e.translate=Di(s.min,s.max,e.origin)-e.originPoint,(e.scale>=.9999&&e.scale<=1.0001||isNaN(e.scale))&&(e.scale=1),(e.translate>=-.01&&e.translate<=.01||isNaN(e.translate))&&(e.translate=0)}function ph(e,t,s,n){mh(e.x,t.x,s.x,n?n.originX:void 0),mh(e.y,t.y,s.y,n?n.originY:void 0)}function fh(e,t,s){e.min=s.min+t.min,e.max=e.min+hh(t)}function gh(e,t,s){e.min=t.min-s.min,e.max=e.min+hh(t)}function xh(e,t,s){gh(e.x,t.x,s.x),gh(e.y,t.y,s.y)}function vh(e){return[e("x"),e("y")]}const bh=e=>{let{current:t}=e;return t?t.ownerDocument.defaultView:null},yh=(e,t)=>Math.abs(e-t);class jh{constructor(e,t){let{transformPagePoint:s,contextWindow:n=window,dragSnapToOrigin:r=!1,distanceThreshold:a=3}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!this.lastMoveEvent||!this.lastMoveEventInfo)return;const e=Sh(this.lastMoveEventInfo,this.history),t=null!==this.startEvent,s=function(e,t){const s=yh(e.x,t.x),n=yh(e.y,t.y);return Math.sqrt(s**2+n**2)}(e.offset,{x:0,y:0})>=this.distanceThreshold;if(!t&&!s)return;const{point:n}=e,{timestamp:r}=Ao;this.history.push((0,d.A)((0,d.A)({},n),{},{timestamp:r}));const{onStart:a,onMove:i}=this.handlers;t||(a&&a(this.lastMoveEvent,e),this.startEvent=this.lastMoveEvent),i&&i(this.lastMoveEvent,e)},this.handlePointerMove=(e,t)=>{this.lastMoveEvent=e,this.lastMoveEventInfo=wh(t,this.transformPagePoint),So.update(this.updatePoint,!0)},this.handlePointerUp=(e,t)=>{this.end();const{onEnd:s,onSessionEnd:n,resumeAnimation:r}=this.handlers;if(this.dragSnapToOrigin&&r&&r(),!this.lastMoveEvent||!this.lastMoveEventInfo)return;const a=Sh("pointercancel"===e.type?this.lastMoveEventInfo:wh(t,this.transformPagePoint),this.history);this.startEvent&&s&&s(e,a),n&&n(e,a)},!ch(e))return;this.dragSnapToOrigin=r,this.handlers=t,this.transformPagePoint=s,this.distanceThreshold=a,this.contextWindow=n||window;const i=wh(dh(e),this.transformPagePoint),{point:o}=i,{timestamp:l}=Ao;this.history=[(0,d.A)((0,d.A)({},o),{},{timestamp:l})];const{onSessionStart:c}=t;c&&c(e,Sh(i,this.history)),this.removeListeners=od(uh(this.contextWindow,"pointermove",this.handlePointerMove),uh(this.contextWindow,"pointerup",this.handlePointerUp),uh(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),ko(this.updatePoint)}}function wh(e,t){return t?{point:t(e.point)}:e}function Nh(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Sh(e,t){let{point:s}=e;return{point:s,delta:Nh(s,Ah(t)),offset:Nh(s,kh(t)),velocity:_h(t,.1)}}function kh(e){return e[0]}function Ah(e){return e[e.length-1]}function _h(e,t){if(e.length<2)return{x:0,y:0};let s=e.length-1,n=null;const r=Ah(e);for(;s>=0&&(n=e[s],!(r.timestamp-n.timestamp>ld(t)));)s--;if(!n)return{x:0,y:0};const a=cd(r.timestamp-n.timestamp);if(0===a)return{x:0,y:0};const i={x:(r.x-n.x)/a,y:(r.y-n.y)/a};return i.x===1/0&&(i.x=0),i.y===1/0&&(i.y=0),i}function Eh(e,t,s){return{min:void 0!==t?e.min+t:void 0,max:void 0!==s?e.max+s-(e.max-e.min):void 0}}function Ch(e,t){let s=t.min-e.min,n=t.max-e.max;return t.max-t.min<e.max-e.min&&([s,n]=[n,s]),{min:s,max:n}}const Ph=.35;function Th(e,t,s){return{min:Ih(e,t),max:Ih(e,s)}}function Ih(e,t){return"number"===typeof e?e:e[t]||0}const Rh=new WeakMap;class Dh{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic={x:{min:0,max:0},y:{min:0,max:0}},this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e){let{snapToCursor:t=!1,distanceThreshold:s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{presenceContext:n}=this.visualElement;if(n&&!1===n.isPresent)return;const{dragSnapToOrigin:r}=this.getProps();this.panSession=new jh(e,{onSessionStart:e=>{const{dragSnapToOrigin:s}=this.getProps();s?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(dh(e).point)},onStart:(e,t)=>{const{drag:s,dragPropagation:n,onDragStart:r}=this.getProps();if(s&&!n&&(this.openDragLock&&this.openDragLock(),this.openDragLock="x"===(a=s)||"y"===a?ih[a]?null:(ih[a]=!0,()=>{ih[a]=!1}):ih.x||ih.y?null:(ih.x=ih.y=!0,()=>{ih.x=ih.y=!1}),!this.openDragLock))return;var a;this.latestPointerEvent=e,this.latestPanInfo=t,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),vh(e=>{let t=this.getAxisMotionValue(e).get()||0;if(no.test(t)){const{projection:s}=this.visualElement;if(s&&s.layout){const n=s.layout.layoutBox[e];if(n){t=hh(n)*(parseFloat(t)/100)}}}this.originPoint[e]=t}),r&&So.postRender(()=>r(e,t)),nd(this.visualElement,"transform");const{animationState:i}=this.visualElement;i&&i.setActive("whileDrag",!0)},onMove:(e,t)=>{this.latestPointerEvent=e,this.latestPanInfo=t;const{dragPropagation:s,dragDirectionLock:n,onDirectionLock:r,onDrag:a}=this.getProps();if(!s&&!this.openDragLock)return;const{offset:i}=t;if(n&&null===this.currentDirection)return this.currentDirection=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,s=null;Math.abs(e.y)>t?s="y":Math.abs(e.x)>t&&(s="x");return s}(i),void(null!==this.currentDirection&&r&&r(this.currentDirection));this.updateAxis("x",t.point,i),this.updateAxis("y",t.point,i),this.visualElement.render(),a&&a(e,t)},onSessionEnd:(e,t)=>{this.latestPointerEvent=e,this.latestPanInfo=t,this.stop(e,t),this.latestPointerEvent=null,this.latestPanInfo=null},resumeAnimation:()=>vh(e=>{var t;return"paused"===this.getAnimationState(e)&&(null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.play())})},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:r,distanceThreshold:s,contextWindow:bh(this.visualElement)})}stop(e,t){const s=e||this.latestPointerEvent,n=t||this.latestPanInfo,r=this.isDragging;if(this.cancel(),!r||!n||!s)return;const{velocity:a}=n;this.startAnimation(a);const{onDragEnd:i}=this.getProps();i&&So.postRender(()=>i(s,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:s}=this.getProps();!s&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,s){const{drag:n}=this.getProps();if(!s||!Oh(e,n,this.currentDirection))return;const r=this.getAxisMotionValue(e);let a=this.originPoint[e]+s[e];this.constraints&&this.constraints[e]&&(a=function(e,t,s){let{min:n,max:r}=t;return void 0!==n&&e<n?e=s?Di(n,e,s.min):Math.max(e,n):void 0!==r&&e>r&&(e=s?Di(r,e,s.max):Math.min(e,r)),e}(a,this.constraints[e],this.elastic[e])),r.set(a)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:s}=this.getProps(),n=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):null===(e=this.visualElement.projection)||void 0===e?void 0:e.layout,r=this.constraints;t&&Bc(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):this.constraints=!(!t||!n)&&function(e,t){let{top:s,left:n,bottom:r,right:a}=t;return{x:Eh(e.x,n,a),y:Eh(e.y,s,r)}}(n.layoutBox,t),this.elastic=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ph;return!1===e?e=0:!0===e&&(e=Ph),{x:Th(e,"left","right"),y:Th(e,"top","bottom")}}(s),r!==this.constraints&&n&&this.constraints&&!this.hasMutatedConstraints&&vh(e=>{!1!==this.constraints&&this.getAxisMotionValue(e)&&(this.constraints[e]=function(e,t){const s={};return void 0!==t.min&&(s.min=t.min-e.min),void 0!==t.max&&(s.max=t.max-e.min),s}(n.layoutBox[e],this.constraints[e]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!Bc(e))return!1;const s=e.current,{projection:n}=this.visualElement;if(!n||!n.layout)return!1;const r=function(e,t,s){const n=Ji(e,s),{scroll:r}=t;return r&&(Gi(n.x,r.offset.x),Gi(n.y,r.offset.y)),n}(s,n.root,this.visualElement.getTransformPagePoint());let a=function(e,t){return{x:Ch(e.x,t.x),y:Ch(e.y,t.y)}}(n.layout.layoutBox,r);if(t){const e=t(function(e){let{x:t,y:s}=e;return{top:s.min,right:t.max,bottom:s.max,left:t.min}}(a));this.hasMutatedConstraints=!!e,e&&(a=Ri(e))}return a}startAnimation(e){const{drag:t,dragMomentum:s,dragElastic:n,dragTransition:r,dragSnapToOrigin:a,onDragTransitionEnd:i}=this.getProps(),o=this.constraints||{},l=vh(i=>{if(!Oh(i,t,this.currentDirection))return;let l=o&&o[i]||{};a&&(l={min:0,max:0});const c=n?200:1e6,u=n?40:1e7,h=(0,d.A)((0,d.A)({type:"inertia",velocity:s?e[i]:0,bounceStiffness:c,bounceDamping:u,timeConstant:750,restDelta:1,restSpeed:10},r),l);return this.startAxisValueAnimation(i,h)});return Promise.all(l).then(i)}startAxisValueAnimation(e,t){const s=this.getAxisMotionValue(e);return nd(this.visualElement,e),s.start(Uu(e,s,0,t,this.visualElement,!1))}stopAnimation(){vh(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){vh(e=>{var t;return null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.pause()})}getAnimationState(e){var t;return null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.state}getAxisMotionValue(e){const t="_drag".concat(e.toUpperCase()),s=this.visualElement.getProps(),n=s[t];return n||this.visualElement.getValue(e,(s.initial?s.initial[e]:void 0)||0)}snapToCursor(e){vh(t=>{const{drag:s}=this.getProps();if(!Oh(t,s,this.currentDirection))return;const{projection:n}=this.visualElement,r=this.getAxisMotionValue(t);if(n&&n.layout){const{min:s,max:a}=n.layout.layoutBox[t];r.set(e[t]-Di(s,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:s}=this.visualElement;if(!Bc(t)||!s||!this.constraints)return;this.stopAnimation();const n={x:0,y:0};vh(e=>{const t=this.getAxisMotionValue(e);if(t&&!1!==this.constraints){const s=t.get();n[e]=function(e,t){let s=.5;const n=hh(e),r=hh(t);return r>n?s=su(t.min,t.max-n,e.min):n>r&&(s=su(e.min,e.max-r,t.min)),Yi(0,1,s)}({min:s,max:s},this.constraints[e])}});const{transformTemplate:r}=this.visualElement.getProps();this.visualElement.current.style.transform=r?r({},""):"none",s.root&&s.root.updateScroll(),s.updateLayout(),this.resolveConstraints(),vh(t=>{if(!Oh(t,e,null))return;const s=this.getAxisMotionValue(t),{min:r,max:a}=this.constraints[t];s.set(Di(r,a,n[t]))})}addListeners(){if(!this.visualElement.current)return;Rh.set(this.visualElement,this);const e=uh(this.visualElement.current,"pointerdown",e=>{const{drag:t,dragListener:s=!0}=this.getProps();t&&s&&this.start(e)}),t=()=>{const{dragConstraints:e}=this.getProps();Bc(e)&&e.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,n=s.addEventListener("measure",t);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),So.read(t);const r=lh(window,"resize",()=>this.scalePositionWithinConstraints()),a=s.addEventListener("didUpdate",e=>{let{delta:t,hasLayoutChanged:s}=e;this.isDragging&&s&&(vh(e=>{const s=this.getAxisMotionValue(e);s&&(this.originPoint[e]+=t[e].translate,s.set(s.get()+t[e].translate))}),this.visualElement.render())});return()=>{r(),e(),n(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:s=!1,dragPropagation:n=!1,dragConstraints:r=!1,dragElastic:a=Ph,dragMomentum:i=!0}=e;return(0,d.A)((0,d.A)({},e),{},{drag:t,dragDirectionLock:s,dragPropagation:n,dragConstraints:r,dragElastic:a,dragMomentum:i})}}function Oh(e,t,s){return(!0===t||t===e)&&(null===s||s===e)}const Lh=e=>(t,s)=>{e&&So.postRender(()=>e(t,s))};function Mh(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=(0,n.useContext)(Ic);if(null===t)return[!0,null];const{isPresent:s,onExitComplete:r,register:a}=t,i=(0,n.useId)();(0,n.useEffect)(()=>{if(e)return a(i)},[e]);const o=(0,n.useCallback)(()=>e&&r&&r(i),[i,r,e]);return!s&&r?[!1,o]:[!0]}const zh={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Fh(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Uh={correct:(e,t)=>{if(!t.target)return e;if("string"===typeof e){if(!ro.test(e))return e;e=parseFloat(e)}const s=Fh(e,t.target.x),n=Fh(e,t.target.y);return"".concat(s,"% ").concat(n,"%")}},Bh={correct:(e,t)=>{let{treeScale:s,projectionDelta:n}=t;const r=e,a=tl.parse(e);if(a.length>5)return r;const i=tl.createTransformer(e),o="number"!==typeof a[0]?1:0,l=n.x.scale*s.x,c=n.y.scale*s.y;a[0+o]/=l,a[1+o]/=c;const d=Di(l,c,.5);return"number"===typeof a[2+o]&&(a[2+o]/=d),"number"===typeof a[3+o]&&(a[3+o]/=d),i(a)}};let qh=!1;class Vh extends n.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:s,layoutId:n}=this.props,{projection:r}=e;!function(e){for(const t in e)Xl[t]=e[t],Ci(t)&&(Xl[t].isCSSVariable=!0)}(Wh),r&&(t.group&&t.group.add(r),s&&s.register&&n&&s.register(r),qh&&r.root.didUpdate(),r.addEventListener("animationComplete",()=>{this.safeToRemove()}),r.setOptions((0,d.A)((0,d.A)({},r.options),{},{onExitComplete:()=>this.safeToRemove()}))),zh.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:s,drag:n,isPresent:r}=this.props,{projection:a}=s;return a?(a.isPresent=r,qh=!0,n||e.layoutDependency!==t||void 0===t||e.isPresent!==r?a.willUpdate():this.safeToRemove(),e.isPresent!==r&&(r?a.promote():a.relegate()||So.postRender(()=>{const e=a.getStack();e&&e.members.length||this.safeToRemove()})),null):null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),_l.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:s}=this.props,{projection:n}=e;qh=!0,n&&(n.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(n),s&&s.deregister&&s.deregister(n))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function Hh(e){const[t,s]=Mh(),r=(0,n.useContext)(fc);return(0,i.jsx)(Vh,(0,d.A)((0,d.A)({},e),{},{layoutGroup:r,switchLayoutGroup:(0,n.useContext)(Hc),isPresent:t,safeToRemove:s}))}const Wh={borderRadius:(0,d.A)((0,d.A)({},Uh),{},{applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]}),borderTopLeftRadius:Uh,borderTopRightRadius:Uh,borderBottomLeftRadius:Uh,borderBottomRightRadius:Uh,boxShadow:Bh};function Gh(e){return"object"===typeof e&&null!==e}function Kh(e){return Gh(e)&&"ownerSVGElement"in e}const Zh=(e,t)=>e.depth-t.depth;class Jh{constructor(){this.children=[],this.isDirty=!1}add(e){bl(this.children,e),this.isDirty=!0}remove(e){yl(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(Zh),this.isDirty=!1,this.children.forEach(e)}}function Qh(e,t){const s=vl.now(),n=r=>{let{timestamp:a}=r;const i=a-s;i>=t&&(ko(n),e(i-t))};return So.setup(n,!0),()=>ko(n)}const Yh=["TopLeft","TopRight","BottomLeft","BottomRight"],$h=Yh.length,Xh=e=>"string"===typeof e?parseFloat(e):e,em=e=>"number"===typeof e||ro.test(e);function tm(e,t){return void 0!==e[t]?e[t]:e.borderRadius}const sm=rm(0,.5,Yd),nm=rm(.5,.95,bo);function rm(e,t,s){return n=>n<e?0:n>t?1:s(su(e,t,n))}function am(e,t){e.min=t.min,e.max=t.max}function im(e,t){am(e.x,t.x),am(e.y,t.y)}function om(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function lm(e,t,s,n,r){return e=Ui(e-=t,1/s,n),void 0!==r&&(e=Ui(e,1/r,n)),e}function cm(e,t,s,n,r){let[a,i,o]=s;!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,r=arguments.length>4?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:e,i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:e;no.test(t)&&(t=parseFloat(t),t=Di(i.min,i.max,t/100)-i.min);if("number"!==typeof t)return;let o=Di(a.min,a.max,n);e===a&&(o-=t),e.min=lm(e.min,t,s,o,r),e.max=lm(e.max,t,s,o,r)}(e,t[a],t[i],t[o],t.scale,n,r)}const dm=["x","scaleX","originX"],um=["y","scaleY","originY"];function hm(e,t,s,n){cm(e.x,t,dm,s?s.x:void 0,n?n.x:void 0),cm(e.y,t,um,s?s.y:void 0,n?n.y:void 0)}function mm(e){return 0===e.translate&&1===e.scale}function pm(e){return mm(e.x)&&mm(e.y)}function fm(e,t){return e.min===t.min&&e.max===t.max}function gm(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function xm(e,t){return gm(e.x,t.x)&&gm(e.y,t.y)}function vm(e){return hh(e.x)/hh(e.y)}function bm(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class ym{constructor(){this.members=[]}add(e){bl(this.members,e),e.scheduleRender()}remove(e){if(yl(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(e){const t=this.members.findIndex(t=>e===t);if(0===t)return!1;let s;for(let n=t;n>=0;n--){const e=this.members[n];if(!1!==e.isPresent){s=e;break}}return!!s&&(this.promote(s),!0)}promote(e,t){const s=this.lead;if(e!==s&&(this.prevLead=s,this.lead=e,e.show(),s)){s.instance&&s.scheduleRender(),e.scheduleRender(),e.resumeFrom=s,t&&(e.resumeFrom.preserveOpacity=!0),s.snapshot&&(e.snapshot=s.snapshot,e.snapshot.latestValues=s.animationValues||s.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:n}=e.options;!1===n&&s.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:s}=e;t.onExitComplete&&t.onExitComplete(),s&&s.options.onExitComplete&&s.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const jm={nodes:0,calculatedTargetDeltas:0,calculatedProjections:0},wm=["","X","Y","Z"];let Nm=0;function Sm(e,t,s,n){const{latestValues:r}=t;r[e]&&(s[e]=r[e],t.setStaticValue(e,0),n&&(n[e]=0))}function km(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const s=rd(t);if(window.MotionHasOptimisedAnimation(s,"transform")){const{layout:t,layoutId:n}=e.options;window.MotionCancelOptimisedAnimation(s,"transform",So,!(t||n))}const{parent:n}=e;n&&!n.hasCheckedOptimisedAppear&&km(n)}function Am(e){let{attachResizeListener:t,defaultParent:s,measureScroll:n,checkIsScrollRoot:r,resetTransform:a}=e;return class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null===s||void 0===s?void 0:s();this.id=Nm++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,wo.value&&(jm.nodes=jm.calculatedTargetDeltas=jm.calculatedProjections=0),this.nodes.forEach(Cm),this.nodes.forEach(Lm),this.nodes.forEach(Mm),this.nodes.forEach(Pm),wo.addProjectionMetrics&&wo.addProjectionMetrics(jm)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=e,this.root=t?t.root||t:this,this.path=t?[...t.path,t]:[],this.parent=t,this.depth=t?t.depth+1:0;for(let s=0;s<this.path.length;s++)this.path[s].shouldResetTransform=!0;this.root===this&&(this.nodes=new Jh)}addEventListener(e,t){return this.eventHandlers.has(e)||this.eventHandlers.set(e,new jl),this.eventHandlers.get(e).add(t)}notifyListeners(e){const t=this.eventHandlers.get(e);for(var s=arguments.length,n=new Array(s>1?s-1:0),r=1;r<s;r++)n[r-1]=arguments[r];t&&t.notify(...n)}hasListeners(e){return this.eventHandlers.has(e)}mount(e){if(this.instance)return;var s;this.isSVG=Kh(e)&&!(Kh(s=e)&&"svg"===s.tagName),this.instance=e;const{layoutId:n,layout:r,visualElement:a}=this.options;if(a&&!a.current&&a.mount(e),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(r||n)&&(this.isLayoutDirty=!0),t){let s,n=0;const r=()=>this.root.updateBlockedByResize=!1;So.read(()=>{n=window.innerWidth}),t(e,()=>{const e=window.innerWidth;e!==n&&(n=e,this.root.updateBlockedByResize=!0,s&&s(),s=Qh(r,250),zh.hasAnimatedSinceResize&&(zh.hasAnimatedSinceResize=!1,this.nodes.forEach(Om)))})}n&&this.root.registerSharedNode(n,this),!1!==this.options.animate&&a&&(n||r)&&this.addEventListener("didUpdate",e=>{let{delta:t,hasLayoutChanged:s,hasRelativeLayoutChanged:n,layout:r}=e;if(this.isTreeAnimationBlocked())return this.target=void 0,void(this.relativeTarget=void 0);const i=this.options.transition||a.getDefaultTransition()||Vm,{onLayoutAnimationStart:o,onLayoutAnimationComplete:l}=a.getProps(),c=!this.targetLayout||!xm(this.targetLayout,r),u=!s&&n;if(this.options.layoutRoot||this.resumeFrom||u||s&&(c||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const e=(0,d.A)((0,d.A)({},$c(i,"layout")),{},{onPlay:o,onComplete:l});(a.shouldReduceMotion||this.options.layoutRoot)&&(e.delay=0,e.type=!1),this.startAnimation(e),this.setAnimationOrigin(t,u)}else s||Om(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=r})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const e=this.getStack();e&&e.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),ko(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(zm),this.animationId++)}getTransformTemplate(){const{visualElement:e}=this.options;return e&&e.getProps().transformTemplate}willUpdate(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked())return void(this.options.onExitComplete&&this.options.onExitComplete());if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&km(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let r=0;r<this.path.length;r++){const e=this.path[r];e.shouldResetTransform=!0,e.updateScroll("snapshot"),e.options.layoutRoot&&e.willUpdate(!1)}const{layoutId:t,layout:s}=this.options;if(void 0===t&&!s)return;const n=this.getTransformTemplate();this.prevTransformTemplateValue=n?n(this.latestValues,""):void 0,this.updateSnapshot(),e&&this.notifyListeners("willUpdate")}update(){this.updateScheduled=!1;if(this.isUpdateBlocked())return this.unblockUpdate(),this.clearAllSnapshots(),void this.nodes.forEach(Im);if(this.animationId<=this.animationCommitId)return void this.nodes.forEach(Rm);this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(Dm),this.nodes.forEach(_m),this.nodes.forEach(Em)):this.nodes.forEach(Rm),this.clearAllSnapshots();const e=vl.now();Ao.delta=Yi(0,1e3/60,e-Ao.timestamp),Ao.timestamp=e,Ao.isProcessing=!0,_o.update.process(Ao),_o.preRender.process(Ao),_o.render.process(Ao),Ao.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,_l.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Tm),this.sharedNodes.forEach(Fm)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,So.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){So.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){!this.snapshot&&this.instance&&(this.snapshot=this.measure(),!this.snapshot||hh(this.snapshot.measuredBox.x)||hh(this.snapshot.measuredBox.y)||(this.snapshot=void 0))}updateLayout(){if(!this.instance)return;if(this.updateScroll(),(!this.options.alwaysMeasureLayout||!this.isLead())&&!this.isLayoutDirty)return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let s=0;s<this.path.length;s++){this.path[s].updateScroll()}const e=this.layout;this.layout=this.measure(!1),this.layoutCorrected={x:{min:0,max:0},y:{min:0,max:0}},this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:t}=this.options;t&&t.notify("LayoutMeasure",this.layout.layoutBox,e?e.layoutBox:void 0)}updateScroll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"measure",t=Boolean(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===e&&(t=!1),t&&this.instance){const t=r(this.instance);this.scroll={animationId:this.root.animationId,phase:e,isRoot:t,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:t}}}resetTransform(){if(!a)return;const e=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,t=this.projectionDelta&&!pm(this.projectionDelta),s=this.getTransformTemplate(),n=s?s(this.latestValues,""):void 0,r=n!==this.prevTransformTemplateValue;e&&this.instance&&(t||Mi(this.latestValues)||r)&&(a(this.instance,n),this.shouldResetTransform=!1,this.scheduleRender())}measure(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=this.measurePageBox();let s=this.removeElementScroll(t);var n;return e&&(s=this.removeTransform(s)),Gm((n=s).x),Gm(n.y),{animationId:this.root.animationId,measuredBox:t,layoutBox:s,latestValues:{},source:this.id}}measurePageBox(){var e;const{visualElement:t}=this.options;if(!t)return{x:{min:0,max:0},y:{min:0,max:0}};const s=t.measureViewportBox();if(!((null===(e=this.scroll)||void 0===e?void 0:e.wasRoot)||this.path.some(Zm))){const{scroll:e}=this.root;e&&(Gi(s.x,e.offset.x),Gi(s.y,e.offset.y))}return s}removeElementScroll(e){var t;const s={x:{min:0,max:0},y:{min:0,max:0}};if(im(s,e),null!==(t=this.scroll)&&void 0!==t&&t.wasRoot)return s;for(let n=0;n<this.path.length;n++){const t=this.path[n],{scroll:r,options:a}=t;t!==this.root&&r&&a.layoutScroll&&(r.wasRoot&&im(s,e),Gi(s.x,r.offset.x),Gi(s.y,r.offset.y))}return s}applyTransform(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const s={x:{min:0,max:0},y:{min:0,max:0}};im(s,e);for(let n=0;n<this.path.length;n++){const e=this.path[n];!t&&e.options.layoutScroll&&e.scroll&&e!==e.root&&Zi(s,{x:-e.scroll.offset.x,y:-e.scroll.offset.y}),Mi(e.latestValues)&&Zi(s,e.latestValues)}return Mi(this.latestValues)&&Zi(s,this.latestValues),s}removeTransform(e){const t={x:{min:0,max:0},y:{min:0,max:0}};im(t,e);for(let s=0;s<this.path.length;s++){const e=this.path[s];if(!e.instance)continue;if(!Mi(e.latestValues))continue;Li(e.latestValues)&&e.updateSnapshot();const n=Tl();im(n,e.measurePageBox()),hm(t,e.latestValues,e.snapshot?e.snapshot.layoutBox:void 0,n)}return Mi(this.latestValues)&&hm(t,this.latestValues),t}setTargetDelta(e){this.targetDelta=e,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(e){this.options=(0,d.A)((0,d.A)((0,d.A)({},this.options),e),{},{crossfade:void 0===e.crossfade||e.crossfade})}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Ao.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(){var e;let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const s=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=s.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=s.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=s.isSharedProjectionDirty);const n=Boolean(this.resumingFrom)||this!==s;if(!(t||n&&this.isSharedProjectionDirty||this.isProjectionDirty||null!==(e=this.parent)&&void 0!==e&&e.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:r,layoutId:a}=this.options;if(this.layout&&(r||a)){if(this.resolvedRelativeTargetAt=Ao.timestamp,!this.targetDelta&&!this.relativeTarget){const e=this.getClosestProjectingParent();e&&e.layout&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},xh(this.relativeTargetOrigin,this.layout.layoutBox,e.layout.layoutBox),im(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(this.relativeTarget||this.targetDelta){if(this.target||(this.target={x:{min:0,max:0},y:{min:0,max:0}},this.targetWithTransforms={x:{min:0,max:0},y:{min:0,max:0}}),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),function(e,t,s){fh(e.x,t.x,s.x),fh(e.y,t.y,s.y)}(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(Boolean(this.resumingFrom)?this.target=this.applyTransform(this.layout.layoutBox):im(this.target,this.layout.layoutBox),Vi(this.target,this.targetDelta)):im(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const e=this.getClosestProjectingParent();e&&Boolean(e.resumingFrom)===Boolean(this.resumingFrom)&&!e.options.layoutScroll&&e.target&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},xh(this.relativeTargetOrigin,this.target,e.target),im(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}wo.value&&jm.calculatedTargetDeltas++}}}getClosestProjectingParent(){if(this.parent&&!Li(this.parent.latestValues)&&!zi(this.parent.latestValues))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return Boolean((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var e;const t=this.getLead(),s=Boolean(this.resumingFrom)||this!==t;let n=!0;if((this.isProjectionDirty||null!==(e=this.parent)&&void 0!==e&&e.isProjectionDirty)&&(n=!1),s&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(n=!1),this.resolvedRelativeTargetAt===Ao.timestamp&&(n=!1),n)return;const{layout:r,layoutId:a}=this.options;if(this.isTreeAnimating=Boolean(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!r&&!a)return;im(this.layoutCorrected,this.layout.layoutBox);const i=this.treeScale.x,o=this.treeScale.y;!function(e,t,s){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r=s.length;if(!r)return;let a,i;t.x=t.y=1;for(let o=0;o<r;o++){a=s[o],i=a.projectionDelta;const{visualElement:r}=a.options;r&&r.props.style&&"contents"===r.props.style.display||(n&&a.options.layoutScroll&&a.scroll&&a!==a.root&&Zi(e,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),i&&(t.x*=i.x.scale,t.y*=i.y.scale,Vi(e,i)),n&&Mi(a.latestValues)&&Zi(e,a.latestValues))}t.x<Wi&&t.x>Hi&&(t.x=1),t.y<Wi&&t.y>Hi&&(t.y=1)}(this.layoutCorrected,this.treeScale,this.path,s),!t.layout||t.target||1===this.treeScale.x&&1===this.treeScale.y||(t.target=t.layout.layoutBox,t.targetWithTransforms={x:{min:0,max:0},y:{min:0,max:0}});const{target:l}=t;l?(this.projectionDelta&&this.prevProjectionDelta?(om(this.prevProjectionDelta.x,this.projectionDelta.x),om(this.prevProjectionDelta.y,this.projectionDelta.y)):this.createProjectionDeltas(),ph(this.projectionDelta,this.layoutCorrected,l,this.latestValues),this.treeScale.x===i&&this.treeScale.y===o&&bm(this.projectionDelta.x,this.prevProjectionDelta.x)&&bm(this.projectionDelta.y,this.prevProjectionDelta.y)||(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",l)),wo.value&&jm.calculatedProjections++):this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender())}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(){var e;let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(null===(e=this.options.visualElement)||void 0===e||e.scheduleRender(),t){const e=this.getStack();e&&e.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionDeltaWithTransform={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}}}setAnimationOrigin(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const s=this.snapshot,n=s?s.latestValues:{},r=(0,d.A)({},this.latestValues),a={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};this.relativeParent&&this.relativeParent.options.layoutRoot||(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!t;const i={x:{min:0,max:0},y:{min:0,max:0}},o=(s?s.source:void 0)!==(this.layout?this.layout.source:void 0),l=this.getStack(),c=!l||l.members.length<=1,u=Boolean(o&&!c&&!0===this.options.crossfade&&!this.path.some(qm));let h;this.animationProgress=0,this.mixTargetDelta=t=>{const s=t/1e3;Um(a.x,e.x,s),Um(a.y,e.y,s),this.setTargetDelta(a),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(xh(i,this.layout.layoutBox,this.relativeParent.layout.layoutBox),function(e,t,s,n){Bm(e.x,t.x,s.x,n),Bm(e.y,t.y,s.y,n)}(this.relativeTarget,this.relativeTargetOrigin,i,s),h&&function(e,t){return fm(e.x,t.x)&&fm(e.y,t.y)}(this.relativeTarget,h)&&(this.isProjectionDirty=!1),h||(h={x:{min:0,max:0},y:{min:0,max:0}}),im(h,this.relativeTarget)),o&&(this.animationValues=r,function(e,t,s,n,r,a){var i,o;if(r)e.opacity=Di(0,null!==(i=s.opacity)&&void 0!==i?i:1,sm(n)),e.opacityExit=Di(null!==(o=t.opacity)&&void 0!==o?o:1,0,nm(n));else if(a){var l,c;e.opacity=Di(null!==(l=t.opacity)&&void 0!==l?l:1,null!==(c=s.opacity)&&void 0!==c?c:1,n)}for(let d=0;d<$h;d++){const r="border".concat(Yh[d],"Radius");let a=tm(t,r),i=tm(s,r);void 0===a&&void 0===i||(a||(a=0),i||(i=0),0===a||0===i||em(a)===em(i)?(e[r]=Math.max(Di(Xh(a),Xh(i),n),0),(no.test(i)||no.test(a))&&(e[r]+="%")):e[r]=i)}(t.rotate||s.rotate)&&(e.rotate=Di(t.rotate||0,s.rotate||0,n))}(r,n,this.latestValues,s,u,c)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=s},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(e){var t,s;this.notifyListeners("animationStart"),null===(t=this.currentAnimation)||void 0===t||t.stop(),null===(s=this.resumingFrom)||void 0===s||null===(s=s.currentAnimation)||void 0===s||s.stop(),this.pendingAnimation&&(ko(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=So.update(()=>{zh.hasAnimatedSinceResize=!0,dd.layout++,this.motionValue||(this.motionValue=kl(0)),this.currentAnimation=function(e,t,s){const n=pl(e)?e:kl(e);return n.start(Uu("",n,t,s)),n.animation}(this.motionValue,[0,1e3],(0,d.A)((0,d.A)({},e),{},{velocity:0,isSync:!0,onUpdate:t=>{this.mixTargetDelta(t),e.onUpdate&&e.onUpdate(t)},onStop:()=>{dd.layout--},onComplete:()=>{dd.layout--,e.onComplete&&e.onComplete(),this.completeAnimation()}})),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const e=this.getStack();e&&e.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(1e3),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const e=this.getLead();let{targetWithTransforms:t,target:s,layout:n,latestValues:r}=e;if(t&&s&&n){if(this!==e&&this.layout&&n&&Km(this.options.animationType,this.layout.layoutBox,n.layoutBox)){s=this.target||{x:{min:0,max:0},y:{min:0,max:0}};const t=hh(this.layout.layoutBox.x);s.x.min=e.target.x.min,s.x.max=s.x.min+t;const n=hh(this.layout.layoutBox.y);s.y.min=e.target.y.min,s.y.max=s.y.min+n}im(t,s),Zi(t,r),ph(this.projectionDeltaWithTransform,this.layoutCorrected,t,r)}}registerSharedNode(e,t){this.sharedNodes.has(e)||this.sharedNodes.set(e,new ym);this.sharedNodes.get(e).add(t);const s=t.options.initialPromotionConfig;t.promote({transition:s?s.transition:void 0,preserveFollowOpacity:s&&s.shouldPreserveFollowOpacity?s.shouldPreserveFollowOpacity(t):void 0})}isLead(){const e=this.getStack();return!e||e.lead===this}getLead(){var e;const{layoutId:t}=this.options;return t&&(null===(e=this.getStack())||void 0===e?void 0:e.lead)||this}getPrevLead(){var e;const{layoutId:t}=this.options;return t?null===(e=this.getStack())||void 0===e?void 0:e.prevLead:void 0}getStack(){const{layoutId:e}=this.options;if(e)return this.root.sharedNodes.get(e)}promote(){let{needsReset:e,transition:t,preserveFollowOpacity:s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=this.getStack();n&&n.promote(this,s),e&&(this.projectionDelta=void 0,this.needsReset=!0),t&&this.setOptions({transition:t})}relegate(){const e=this.getStack();return!!e&&e.relegate(this)}resetSkewAndRotation(){const{visualElement:e}=this.options;if(!e)return;let t=!1;const{latestValues:s}=e;if((s.z||s.rotate||s.rotateX||s.rotateY||s.rotateZ||s.skewX||s.skewY)&&(t=!0),!t)return;const n={};s.z&&Sm("z",e,n,this.animationValues);for(let r=0;r<wm.length;r++)Sm("rotate".concat(wm[r]),e,n,this.animationValues),Sm("skew".concat(wm[r]),e,n,this.animationValues);e.render();for(const r in n)e.setStaticValue(r,n[r]),this.animationValues&&(this.animationValues[r]=n[r]);e.scheduleRender()}applyProjectionStyles(e,t){if(!this.instance||this.isSVG)return;if(!this.isVisible)return void(e.visibility="hidden");const s=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,e.visibility="",e.opacity="",e.pointerEvents=Dc(null===t||void 0===t?void 0:t.pointerEvents)||"",void(e.transform=s?s(this.latestValues,""):"none");const n=this.getLead();if(!this.projectionDelta||!this.layout||!n.target)return this.options.layoutId&&(e.opacity=void 0!==this.latestValues.opacity?this.latestValues.opacity:1,e.pointerEvents=Dc(null===t||void 0===t?void 0:t.pointerEvents)||""),void(this.hasProjected&&!Mi(this.latestValues)&&(e.transform=s?s({},""):"none",this.hasProjected=!1));e.visibility="";const r=n.animationValues||n.latestValues;this.applyTransformsToTarget();let a=function(e,t,s){let n="";const r=e.x.translate/t.x,a=e.y.translate/t.y,i=(null===s||void 0===s?void 0:s.z)||0;if((r||a||i)&&(n="translate3d(".concat(r,"px, ").concat(a,"px, ").concat(i,"px) ")),1===t.x&&1===t.y||(n+="scale(".concat(1/t.x,", ").concat(1/t.y,") ")),s){const{transformPerspective:e,rotate:t,rotateX:r,rotateY:a,skewX:i,skewY:o}=s;e&&(n="perspective(".concat(e,"px) ").concat(n)),t&&(n+="rotate(".concat(t,"deg) ")),r&&(n+="rotateX(".concat(r,"deg) ")),a&&(n+="rotateY(".concat(a,"deg) ")),i&&(n+="skewX(".concat(i,"deg) ")),o&&(n+="skewY(".concat(o,"deg) "))}const o=e.x.scale*t.x,l=e.y.scale*t.y;return 1===o&&1===l||(n+="scale(".concat(o,", ").concat(l,")")),n||"none"}(this.projectionDeltaWithTransform,this.treeScale,r);s&&(a=s(r,a)),e.transform=a;const{x:i,y:o}=this.projectionDelta;var l,c;(e.transformOrigin="".concat(100*i.origin,"% ").concat(100*o.origin,"% 0"),n.animationValues)?e.opacity=n===this?null!==(l=null!==(c=r.opacity)&&void 0!==c?c:this.latestValues.opacity)&&void 0!==l?l:1:this.preserveOpacity?this.latestValues.opacity:r.opacityExit:e.opacity=n===this?void 0!==r.opacity?r.opacity:"":void 0!==r.opacityExit?r.opacityExit:0;for(const d in Xl){if(void 0===r[d])continue;const{correct:t,applyTo:s,isCSSVariable:i}=Xl[d],o="none"===a?r[d]:t(r[d],n);if(s){const t=s.length;for(let n=0;n<t;n++)e[s[n]]=o}else i?this.options.visualElement.renderState.vars[d]=o:e[d]=o}this.options.layoutId&&(e.pointerEvents=n===this?Dc(null===t||void 0===t?void 0:t.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(e=>{var t;return null===(t=e.currentAnimation)||void 0===t?void 0:t.stop()}),this.root.nodes.forEach(Im),this.root.sharedNodes.clear()}}}function _m(e){e.updateLayout()}function Em(e){var t;const s=(null===(t=e.resumeFrom)||void 0===t?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&s&&e.hasListeners("didUpdate")){const{layoutBox:t,measuredBox:n}=e.layout,{animationType:r}=e.options,a=s.source!==e.layout.source;"size"===r?vh(e=>{const n=a?s.measuredBox[e]:s.layoutBox[e],r=hh(n);n.min=t[e].min,n.max=n.min+r}):Km(r,s.layoutBox,t)&&vh(n=>{const r=a?s.measuredBox[n]:s.layoutBox[n],i=hh(t[n]);r.max=r.min+i,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[n].max=e.relativeTarget[n].min+i)});const i={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};ph(i,t,s.layoutBox);const o={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};a?ph(o,e.applyTransform(n,!0),s.measuredBox):ph(o,t,s.layoutBox);const l=!pm(i);let c=!1;if(!e.resumeFrom){const n=e.getClosestProjectingParent();if(n&&!n.resumeFrom){const{snapshot:r,layout:a}=n;if(r&&a){const i={x:{min:0,max:0},y:{min:0,max:0}};xh(i,s.layoutBox,r.layoutBox);const o={x:{min:0,max:0},y:{min:0,max:0}};xh(o,t,a.layoutBox),xm(i,o)||(c=!0),n.options.layoutRoot&&(e.relativeTarget=o,e.relativeTargetOrigin=i,e.relativeParent=n)}}}e.notifyListeners("didUpdate",{layout:t,snapshot:s,delta:o,layoutDelta:i,hasLayoutChanged:l,hasRelativeLayoutChanged:c})}else if(e.isLead()){const{onExitComplete:t}=e.options;t&&t()}e.options.transition=void 0}function Cm(e){wo.value&&jm.nodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=Boolean(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function Pm(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function Tm(e){e.clearSnapshot()}function Im(e){e.clearMeasurements()}function Rm(e){e.isLayoutDirty=!1}function Dm(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function Om(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function Lm(e){e.resolveTargetDelta()}function Mm(e){e.calcProjection()}function zm(e){e.resetSkewAndRotation()}function Fm(e){e.removeLeadSnapshot()}function Um(e,t,s){e.translate=Di(t.translate,0,s),e.scale=Di(t.scale,1,s),e.origin=t.origin,e.originPoint=t.originPoint}function Bm(e,t,s,n){e.min=Di(t.min,s.min,n),e.max=Di(t.max,s.max,n)}function qm(e){return e.animationValues&&void 0!==e.animationValues.opacityExit}const Vm={duration:.45,ease:[.4,0,.1,1]},Hm=e=>"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),Wm=Hm("applewebkit/")&&!Hm("chrome/")?Math.round:bo;function Gm(e){e.min=Wm(e.min),e.max=Wm(e.max)}function Km(e,t,s){return"position"===e||"preserve-aspect"===e&&!function(e,t,s){return Math.abs(e-t)<=s}(vm(t),vm(s),.2)}function Zm(e){var t;return e!==e.root&&(null===(t=e.scroll)||void 0===t?void 0:t.wasRoot)}const Jm=Am({attachResizeListener:(e,t)=>lh(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Qm={current:void 0},Ym=Am({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!Qm.current){const e=new Jm({});e.mount(window),e.setOptions({layoutScroll:!0}),Qm.current=e}return Qm.current},resetTransform:(e,t)=>{e.style.transform=void 0!==t?t:"none"},checkIsScrollRoot:e=>Boolean("fixed"===window.getComputedStyle(e).position)}),$m={pan:{Feature:class extends nh{constructor(){super(...arguments),this.removePointerDownListener=bo}onPointerDown(e){this.session=new jh(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:bh(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:s,onPanEnd:n}=this.node.getProps();return{onSessionStart:Lh(e),onStart:Lh(t),onMove:s,onEnd:(e,t)=>{delete this.session,n&&So.postRender(()=>n(e,t))}}}mount(){this.removePointerDownListener=uh(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}},drag:{Feature:class extends nh{constructor(e){super(e),this.removeGroupControls=bo,this.removeListeners=bo,this.controls=new Dh(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||bo}unmount(){this.removeGroupControls(),this.removeListeners()}},ProjectionNode:Ym,MeasureLayout:Hh}};function Xm(e,t){const s=function(e,t,s){if(e instanceof EventTarget)return[e];if("string"===typeof e){var n;let r=document;t&&(r=t.current);const a=null!==(n=null===s||void 0===s?void 0:s[e])&&void 0!==n?n:r.querySelectorAll(e);return a?Array.from(a):[]}return Array.from(e)}(e),n=new AbortController;return[s,(0,d.A)((0,d.A)({passive:!0},t),{},{signal:n.signal}),()=>n.abort()]}function ep(e){return!("touch"===e.pointerType||oh())}function tp(e,t,s){const{props:n}=e;e.animationState&&n.whileHover&&e.animationState.setActive("whileHover","Start"===s);const r=n["onHover"+s];r&&So.postRender(()=>r(t,dh(t)))}function sp(e){return Gh(e)&&"offsetHeight"in e}const np=(e,t)=>!!t&&(e===t||np(e,t.parentElement)),rp=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);const ap=new WeakSet;function ip(e){return t=>{"Enter"===t.key&&e(t)}}function op(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}function lp(e){return ch(e)&&!oh()}function cp(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const[n,r,a]=Xm(e,s),i=e=>{const n=e.currentTarget;if(!lp(e))return;ap.add(n);const a=t(n,e),i=(e,t)=>{window.removeEventListener("pointerup",o),window.removeEventListener("pointercancel",l),ap.has(n)&&ap.delete(n),lp(e)&&"function"===typeof a&&a(e,{success:t})},o=e=>{i(e,n===window||n===document||s.useGlobalTarget||np(n,e.target))},l=e=>{i(e,!1)};window.addEventListener("pointerup",o,r),window.addEventListener("pointercancel",l,r)};return n.forEach(e=>{var t;(s.useGlobalTarget?window:e).addEventListener("pointerdown",i,r),sp(e)&&(e.addEventListener("focus",e=>((e,t)=>{const s=e.currentTarget;if(!s)return;const n=ip(()=>{if(ap.has(s))return;op(s,"down");const e=ip(()=>{op(s,"up")});s.addEventListener("keyup",e,t),s.addEventListener("blur",()=>op(s,"cancel"),t)});s.addEventListener("keydown",n,t),s.addEventListener("blur",()=>s.removeEventListener("keydown",n),t)})(e,r)),t=e,rp.has(t.tagName)||-1!==t.tabIndex||e.hasAttribute("tabindex")||(e.tabIndex=0))}),a}function dp(e,t,s){const{props:n}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&n.whileTap&&e.animationState.setActive("whileTap","Start"===s);const r=n["onTap"+("End"===s?"":s)];r&&So.postRender(()=>r(t,dh(t)))}const up=["root"],hp=new WeakMap,mp=new WeakMap,pp=e=>{const t=hp.get(e.target);t&&t(e)},fp=e=>{e.forEach(pp)};function gp(e,t,s){const n=function(e){let{root:t}=e,s=(0,fl.A)(e,up);const n=t||document;mp.has(n)||mp.set(n,{});const r=mp.get(n),a=JSON.stringify(s);return r[a]||(r[a]=new IntersectionObserver(fp,(0,d.A)({root:t},s))),r[a]}(t);return hp.set(e,s),n.observe(e),()=>{hp.delete(e),n.unobserve(e)}}const xp={some:0,all:1};const vp={inView:{Feature:class extends nh{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:s,amount:n="some",once:r}=e,a={root:t?t.current:void 0,rootMargin:s,threshold:"number"===typeof n?n:xp[n]};return gp(this.node.current,a,e=>{const{isIntersecting:t}=e;if(this.isInView===t)return;if(this.isInView=t,r&&!t&&this.hasEnteredView)return;t&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",t);const{onViewportEnter:s,onViewportLeave:n}=this.node.getProps(),a=t?s:n;a&&a(e)})}mount(){this.startObserver()}update(){if("undefined"===typeof IntersectionObserver)return;const{props:e,prevProps:t}=this.node,s=["amount","margin","root"].some(function(e){let{viewport:t={}}=e,{viewport:s={}}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e=>t[e]!==s[e]}(e,t));s&&this.startObserver()}unmount(){}}},tap:{Feature:class extends nh{mount(){const{current:e}=this.node;e&&(this.unmount=cp(e,(e,t)=>(dp(this.node,t,"Start"),(e,t)=>{let{success:s}=t;return dp(this.node,e,s?"End":"Cancel")}),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}},focus:{Feature:class extends nh{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch(Nt){e=!0}e&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){this.isActive&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=od(lh(this.node.current,"focus",()=>this.onFocus()),lh(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}},hover:{Feature:class extends nh{mount(){const{current:e}=this.node;e&&(this.unmount=function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const[n,r,a]=Xm(e,s),i=e=>{if(!ep(e))return;const{target:s}=e,n=t(s,e);if("function"!==typeof n||!s)return;const a=e=>{ep(e)&&(n(e),s.removeEventListener("pointerleave",a))};s.addEventListener("pointerleave",a,r)};return n.forEach(e=>{e.addEventListener("pointerenter",i,r)}),a}(e,(e,t)=>(tp(this.node,t,"Start"),e=>tp(this.node,e,"End"))))}unmount(){}}}},bp={layout:{ProjectionNode:Ym,MeasureLayout:Hh}},yp=Qc((0,d.A)((0,d.A)((0,d.A)((0,d.A)({},ah),vp),$m),bp),pc),jp=e=>{let{text:t="",delay:s=200,className:r="",animateBy:a="words",direction:o="top",threshold:l=.1,rootMargin:c="0px",animationFrom:d,animationTo:u,easing:h=e=>e,onAnimationComplete:m,stepDuration:p=.35}=e;const f="words"===a?t.split(" "):t.split(""),[g,x]=(0,n.useState)(!1),v=(0,n.useRef)(null);(0,n.useEffect)(()=>{if(!v.current)return;const e=new IntersectionObserver(t=>{let[s]=t;s.isIntersecting&&(x(!0),v.current&&e.unobserve(v.current))},{threshold:l,rootMargin:c});return e.observe(v.current),()=>e.disconnect()},[l,c]);const b=(0,n.useMemo)(()=>"top"===o?{filter:"blur(10px)",opacity:0,y:-50}:{filter:"blur(10px)",opacity:0,y:50},[o]),y=(0,n.useMemo)(()=>[{filter:"blur(5px)",opacity:.5,y:"top"===o?5:-5},{filter:"blur(0px)",opacity:1,y:0}],[o]),j=null!==d&&void 0!==d?d:b,w=null!==u&&void 0!==u?u:y,N=w.length+1,S=p*(N-1),k=Array.from({length:N},(e,t)=>1===N?0:t/(N-1));return(0,i.jsx)("p",{ref:v,className:"blur-text ".concat(r," flex flex-wrap"),children:f.map((e,t)=>{const n=((e,t)=>{const s=new Set([...Object.keys(e),...t.flatMap(e=>Object.keys(e))]),n={};return s.forEach(s=>{n[s]=[e[s],...t.map(e=>e[s])]}),n})(j,w),r={duration:S,times:k,delay:t*s/1e3};return r.ease=h,(0,i.jsxs)(yp.span,{className:"inline-block will-change-[transform,filter,opacity]",initial:j,animate:g?n:j,transition:r,onAnimationComplete:t===f.length-1?m:void 0,children:[" "===e?"\xa0":e,"words"===a&&t<f.length-1&&"\xa0"]},t)})})},wp=e=>{let{className:t="",size:s="md",showText:n=!0}=e;return(0,i.jsxs)("div",{className:"flex items-center space-x-3 ".concat(t),children:[(0,i.jsx)("div",{className:"".concat({sm:"w-8 h-8",md:"w-12 h-12",lg:"w-16 h-16",xl:"w-20 h-20"}[s]," flex-shrink-0"),children:(0,i.jsx)("img",{src:"/logo-campus-finance.png",alt:"AB CAMPUS FINANCE Logo",className:"w-full h-full object-contain"})}),n&&(0,i.jsxs)("div",{className:"flex flex-col",children:[(0,i.jsx)(jp,{text:"AB CAMPUS FINANCE",delay:150,className:"font-semibold text-secondary-900 font-montserrat ".concat({sm:"text-xs",md:"text-sm",lg:"text-base",xl:"text-lg"}[s]),animateBy:"letters",direction:"top",onAnimationComplete:()=>{console.log("[UI] Animation logo termin\xe9e")}}),(0,i.jsx)("p",{className:"text-xs text-neutral-600 font-montserrat",children:"Votre succ\xe8s, notre mission"})]})]})},Np=(0,pt.A)("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]),Sp=(0,pt.A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),kp=(0,pt.A)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),Ap=(0,pt.A)("Wifi",[["path",{d:"M5 13a10 10 0 0 1 14 0",key:"6v8j51"}],["path",{d:"M8.5 16.5a5 5 0 0 1 7 0",key:"sej527"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["line",{x1:"12",x2:"12.01",y1:"20",y2:"20",key:"of4bc4"}]]),_p=(0,pt.A)("WifiOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M8.5 16.5a5 5 0 0 1 7 0",key:"sej527"}],["path",{d:"M2 8.82a15 15 0 0 1 4.17-2.65",key:"11utq1"}],["path",{d:"M10.66 5c4.01-.36 8.14.9 11.34 3.76",key:"hxefdu"}],["path",{d:"M16.85 11.25a10 10 0 0 1 2.22 1.68",key:"q734kn"}],["path",{d:"M5 13a10 10 0 0 1 5.24-2.76",key:"piq4yl"}],["line",{x1:"12",x2:"12.01",y1:"20",y2:"20",key:"of4bc4"}]]);var Ep=s(4139);const Cp=!0,Pp="/serviceWorker.js",Tp={scope:"/",updateViaCache:"none"};function Ip(e){const t=(e+"=".repeat((4-e.length%4)%4)).replace(/-/g,"+").replace(/_/g,"/"),s=window.atob(t);return Uint8Array.from([...s].map(e=>e.charCodeAt(0)))}const Rp=()=>{const{user:e}=ut(),[t,s]=(0,n.useState)(!1),[r,a]=(0,n.useState)(!1),[i,o]=(0,n.useState)(null),[l,c]=(0,n.useState)(null),[d,u]=(0,n.useState)(!1);(0,n.useEffect)(()=>{const e=setTimeout(()=>{(async()=>{try{const e=await fetch("".concat(Ep.f,"/api/push/vapid-public-key")),t=await e.json();c(t.publicKey)}catch(e){0}})()},800);return()=>clearTimeout(e)},[]),(0,n.useEffect)(()=>{(()=>{const e="serviceWorker"in navigator&&"PushManager"in window;s(e)})()},[]),(0,n.useEffect)(()=>{(async()=>{if(!t||!l)return void u(!0);if("true"!==localStorage.getItem("notification-prompt-declined"))try{const e=await navigator.serviceWorker.ready;let t=await e.pushManager.getSubscription();t?(o(t),a(!0),u(!0)):u(!0)}catch(e){u(!0)}else u(!0)})()},[t,l,e]),(0,n.useEffect)(()=>{if(null===e||void 0===e||!e.id||!l)return;let t;const s=setTimeout(()=>{const e=async()=>{try{const e=await navigator.serviceWorker.ready,t=await e.pushManager.getSubscription();if(!t)return a(!1),o(null),localStorage.setItem("subscription-inactive","true"),void localStorage.removeItem("notification-prompt-seen");if(await h(t))a(!0),o(t),localStorage.setItem("subscription-active","true"),localStorage.removeItem("subscription-inactive");else{const t=await m(e);t?(a(!0),o(t),localStorage.setItem("subscription-active","true"),localStorage.removeItem("subscription-inactive")):(a(!1),o(null),localStorage.setItem("subscription-inactive","true"),localStorage.removeItem("notification-prompt-seen"))}}catch(e){a(!1),o(null),localStorage.setItem("subscription-inactive","true")}};e(),t=setInterval(e,216e5)},1500);return()=>{clearTimeout(s),t&&clearInterval(t)}},[null===e||void 0===e?void 0:e.id,l]);const h=async e=>{try{return console.log("[PUSH HOOK] Validation du token d'abonnement..."),e&&e.endpoint&&e.keys?e.endpoint.startsWith("https://")?e.keys.p256dh&&e.keys.auth?(console.log("[PUSH HOOK] \u2705 Token valide (mode production)"),!0):(console.log("[PUSH HOOK] \u274c Cl\xe9s d'abonnement manquantes"),!1):(console.log("[PUSH HOOK] \u274c Endpoint invalide"),!1):(console.log("[PUSH HOOK] \u274c Abonnement invalide - propri\xe9t\xe9s manquantes"),!1)}catch(t){return console.error("[PUSH HOOK] Erreur validation token:",t),!1}},m=async t=>{try{console.log("[PUSH HOOK] Renouvellement silencieux de l'abonnement...");const s=await t.pushManager.getSubscription();s&&(await s.unsubscribe(),console.log("[PUSH HOOK] Ancien abonnement d\xe9sabonn\xe9"));const n=await t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Ip(l)});console.log("[PUSH HOOK] Nouvel abonnement cr\xe9\xe9");return(await fetch("".concat(Ep.f,"/api/save-subscription"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({subscription:n,userId:null===e||void 0===e?void 0:e.id})})).ok?(console.log("[PUSH HOOK] \u2705 Nouvel abonnement sauvegard\xe9"),n):(console.error("[PUSH HOOK] \u274c Erreur sauvegarde nouvel abonnement"),null)}catch(s){return console.error("[PUSH HOOK] Erreur renouvellement silencieux:",s),null}};return{isSupported:t,isSubscribed:r,subscription:i,vapidPublicKey:l,hasAskedPermission:d,subscribeUser:async()=>{if(console.log("[PUSH HOOK] D\xe9but de subscribeUser...",{isSupported:t,vapidPublicKey:!!l,user:!!e,userId:null===e||void 0===e?void 0:e.id}),!t||!l)return console.log("[PUSH HOOK] Notifications push non support\xe9es ou cl\xe9 VAPID manquante"),!1;try{console.log("[PUSH HOOK] Enregistrement du service worker...");const t=await(async()=>{if(!Cp)return console.log("[SW_CONFIG] Service Worker d\xe9sactiv\xe9 en d\xe9veloppement"),null;if(!("serviceWorker"in navigator))return console.log("[SW_CONFIG] Service Worker non support\xe9 par ce navigateur"),null;try{console.log("[SW_CONFIG] Enregistrement du Service Worker...");const e=await navigator.serviceWorker.register(Pp,Tp);return console.log("[SW_CONFIG] Service Worker enregistr\xe9 avec succ\xe8s:",e.scope),e.addEventListener("updatefound",()=>{const t=e.installing;t&&t.addEventListener("statechange",()=>{"installed"===t.state&&navigator.serviceWorker.controller&&console.log("[SW_CONFIG] Nouvelle version du Service Worker disponible")})}),e}catch(e){return console.warn("[SW_CONFIG] \xc9chec de l'enregistrement du Service Worker:",e),null}})();t||console.log("[PUSH HOOK] Service worker non disponible, continuation sans..."),console.log("[PUSH HOOK] Demande de permission...");const s=await Notification.requestPermission();if(console.log("[PUSH HOOK] Permission:",s),"granted"!==s)return console.log("[PUSH HOOK] Permission refus\xe9e"),!1;console.log("[PUSH HOOK] V\xe9rification de l'abonnement existant...");const n=t?await t.pushManager.getSubscription():null;if(n)return o(n),a(!0),console.log("[PUSH HOOK] \u2705 D\xe9j\xe0 abonn\xe9 aux notifications"),!0;if(console.log("[PUSH HOOK] Cr\xe9ation d'un nouvel abonnement..."),!t)return!1;const r=await t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Ip(l)});console.log("[PUSH HOOK] \u2705 Nouvelle subscription cr\xe9\xe9e:",r),console.log("[PUSH HOOK] Envoi au backend...",{url:"".concat(Ep.f,"/api/save-subscription"),userId:null===e||void 0===e?void 0:e.id});const i=await fetch("".concat(Ep.f,"/api/save-subscription"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({subscription:r,userId:null===e||void 0===e?void 0:e.id})});if(console.log("[PUSH HOOK] R\xe9ponse du backend:",i.status,i.ok),i.ok)return o(r),a(!0),console.log("[PUSH HOOK] \u2705 Abonnement enregistr\xe9 avec succ\xe8s !"),!0;{const e=await i.text();return console.error("[PUSH HOOK] Erreur lors de l'enregistrement de l'abonnement:",e),!1}}catch(s){return console.error("[PUSH HOOK] Erreur abonnement:",s),!1}},unsubscribeUser:async()=>{if(!i)return!1;try{await navigator.serviceWorker.ready;if(await i.unsubscribe())return o(null),a(!1),console.log("D\xe9sabonnement r\xe9ussi"),!0}catch(e){console.error("Erreur lors du d\xe9sabonnement:",e)}return!1}}};var Dp=s(6047);const Op=e=>{let{notifications:t,onNotificationClick:s,className:r="",fixed:a=!1}=e;const[o,l]=(0,n.useState)(!1),c=(0,n.useRef)(null),[d,u]=(0,n.useState)(!1),[h,m]=(0,n.useState)([]),[p,f]=(0,n.useState)(new Set),{user:g}=ut(),{notifications:x,unreadCount:v,markAllAsRead:b,clearReadNotifications:y,refreshNotifications:j,showSuccess:w}=yt(),{pendingRequests:N}=(()=>{const{user:e}=ut(),[t,s]=(0,n.useState)({total:0,pending:0,approved:0,rejected:0,active:0,completed:0}),[r,a]=(0,n.useState)(0),i=(0,n.useCallback)(async()=>{if(null!==e&&void 0!==e&&e.id)try{let t=lt.ND.from("loans").select("status, amount");"admin"!==e.role&&(t=t.eq("user_id",e.id));const{data:n,error:r}=await t;if(r)return void console.error("Erreur lors du chargement des compteurs:",r);const i={total:0,pending:0,approved:0,rejected:0,active:0,completed:0};if(null===n||void 0===n||n.forEach(e=>{i.total++,i[e.status]++}),s(i),"admin"===e.role){const{data:e,error:t}=await lt.ND.from("loans").select("id").eq("status","pending");!t&&e&&a(e.length)}}catch(t){console.error("Erreur lors du chargement des compteurs:",t)}},[null===e||void 0===e?void 0:e.id,null===e||void 0===e?void 0:e.role]);return(0,n.useEffect)(()=>{if(null===e||void 0===e||!e.id)return;const t=setTimeout(()=>i(),400);let s;const n=setTimeout(()=>{s=lt.ND.channel("loan_counters").on("postgres_changes",{event:"*",schema:"public",table:"loans"},()=>{setTimeout(i,100)}).subscribe(e=>{})},800);return()=>{clearTimeout(t),clearTimeout(n),s&&s.unsubscribe()}},[null===e||void 0===e?void 0:e.id,null===e||void 0===e?void 0:e.role,i]),{counters:t,pendingRequests:"admin"!==(null===e||void 0===e?void 0:e.role)?0:r,totalLoans:t.total,getCountByStatus:e=>t[e]||0,getAllCounters:()=>t,refresh:i}})(),{isSupported:S,isSubscribed:k,subscribeUser:A,unsubscribeUser:_}=Rp(),E=x&&x.length>0?x:t||[],C=E.filter(e=>!e.read),P=[...C];"admin"===(null===g||void 0===g?void 0:g.role)&&h.length>0&&h.forEach(e=>{var t,s;p.has(e.id)||P.push({id:"pending-loan-".concat(e.id),title:"Nouvelle demande de pr\xeat",message:"".concat((null===(t=e.users)||void 0===t?void 0:t.first_name)||"Utilisateur"," ").concat((null===(s=e.users)||void 0===s?void 0:s.last_name)||""," - ").concat((0,Dp.vv)(e.amount||0)),type:"warning",priority:"high",read:!1,timestamp:e.created_at,data:{loanId:e.id,userId:e.user_id},action:"Voir la demande",isPendingLoan:!0})});const T=P.sort((e,t)=>{const s=new Date(e.timestamp||0);return new Date(t.timestamp||0)-s}),I=E.filter(e=>!e.read).length,R=E.filter(e=>e.read).length,D=T.filter(e=>!e.read).length,O=h.filter(e=>!p.has(e.id)).length,L=T.length>0||O>0;(0,n.useEffect)(()=>{(async()=>{if("admin"===(null===g||void 0===g?void 0:g.role)&&o)try{const e=await(0,ct.Or)();if(e.success){const t=e.data.filter(e=>"pending"===e.status);m(t.slice(0,10)),console.log("[NOTIFICATION_BELL] Demandes en attente charg\xe9es:",t.length)}}catch(e){console.error("[NOTIFICATION_BELL] Erreur chargement demandes:",e)}})()},[o,null===g||void 0===g?void 0:g.role]),(0,n.useEffect)(()=>{o&&null!==g&&void 0!==g&&g.id&&(console.log("[NOTIFICATION_BELL] \ud83d\udd14 Dropdown ouvert, rafra\xeechissement des notifications pour user:",g.id),console.log("[NOTIFICATION_BELL] Notifications actuelles:",T.length),u(!0),j(g.id).then(()=>{u(!1),console.log("[NOTIFICATION_BELL] \u2705 Notifications rafra\xeechies")}).catch(e=>{console.error("[NOTIFICATION_BELL] \u274c Erreur rafra\xeechissement:",e),u(!1)}))},[o,null===g||void 0===g?void 0:g.id]),(0,n.useEffect)(()=>{const e=e=>{c.current&&!c.current.contains(e.target)&&M()};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);const M=()=>{l(!1)},z=I+O;return(0,i.jsxs)("div",{className:"relative ".concat(a?"fixed top-24 right-4 z-[9999] sm:top-4":"z-[9999]"," ").concat(r),ref:c,children:[(0,i.jsxs)("button",{onClick:()=>l(!o),className:"relative p-2 bg-white/80 backdrop-blur-sm rounded-full shadow-lg hover:shadow-xl transition-all duration-200 border border-gray-200/50",children:[(0,i.jsx)(hi,{size:20,className:"text-gray-700 w-5 h-5 sm:w-5 sm:h-5"}),z>0&&(0,i.jsx)("div",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center font-medium",children:z>99?"99+":z})]}),o&&(0,i.jsxs)("div",{className:"absolute right-0 mt-2 w-80 max-w-[calc(100vw-2rem)] sm:w-80 bg-white/95 backdrop-blur-sm rounded-xl shadow-2xl border border-gray-200/50 overflow-hidden",children:[(0,i.jsxs)("div",{className:"border-b border-gray-200/50 bg-gradient-to-r from-gray-50/50 to-white/50",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between p-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{className:"font-semibold text-gray-900",children:"Notifications"}),N>0&&(0,i.jsxs)("p",{className:"text-sm text-orange-600 font-medium",children:[N," demande",N>1?"s":""," en attente"]})]}),(0,i.jsx)("button",{onClick:M,className:"p-1 rounded-full hover:bg-gray-100 transition-colors duration-200","aria-label":"Fermer",children:(0,i.jsx)(xt,{size:16,className:"text-gray-500"})})]}),L&&(0,i.jsxs)("div",{className:"flex gap-2 px-4 pb-3 border-t border-gray-200/50 pt-3 bg-gray-50/30",children:[(D>0||O>0)&&(0,i.jsxs)("button",{onClick:async()=>{try{if(console.log("[NOTIFICATION_BELL] \ud83d\udfe6 Marquage de toutes les notifications comme lues..."),console.log("[NOTIFICATION_BELL] Notifications avant:",E.length,"non lues:",I),await b(),h.length>0){const e=new Set(p);h.forEach(t=>{e.add(t.id)}),f(e),console.log("[NOTIFICATION_BELL] Demandes en attente marqu\xe9es comme dismissed:",e.size)}null!==g&&void 0!==g&&g.id&&(console.log("[NOTIFICATION_BELL] \ud83d\udd04 Rafra\xeechissement des notifications..."),await j(g.id),console.log("[NOTIFICATION_BELL] \u2705 Notifications rafra\xeechies")),w("Toutes les notifications ont \xe9t\xe9 marqu\xe9es comme lues")}catch(e){console.error("[NOTIFICATION_BELL] \u274c Erreur lors du marquage:",e),w("Erreur lors du marquage des notifications")}},className:"flex-1 flex items-center justify-center gap-1.5 px-3 py-2.5 text-xs font-semibold text-blue-700 bg-blue-50 hover:bg-blue-100 active:bg-blue-200 rounded-lg transition-all duration-200 shadow-sm hover:shadow-md",title:"Marquer ".concat(D||O," notification").concat((D||O)>1?"s":""," comme lue").concat((D||O)>1?"s":""),children:[(0,i.jsx)(Np,{size:14,className:"flex-shrink-0"}),(0,i.jsx)("span",{children:"Tout marquer lu"}),(D||O)>0&&(0,i.jsx)("span",{className:"ml-1 px-1.5 py-0.5 bg-blue-200 text-blue-800 rounded-full text-[10px] font-bold",children:D||O})]}),R>0&&(0,i.jsxs)("button",{onClick:async()=>{try{await y((null===g||void 0===g?void 0:g.id)||null),w("Notifications lues supprim\xe9es"),null!==g&&void 0!==g&&g.id&&await j(g.id)}catch(e){console.error("[NOTIFICATION_BELL] Erreur lors du nettoyage:",e)}},className:"flex-1 flex items-center justify-center gap-1.5 px-3 py-2.5 text-xs font-semibold text-red-700 bg-red-50 hover:bg-red-100 active:bg-red-200 rounded-lg transition-all duration-200 shadow-sm hover:shadow-md",title:"Supprimer ".concat(R," notification").concat(R>1?"s":""," lue").concat(R>1?"s":""),children:[(0,i.jsx)(Sp,{size:14,className:"flex-shrink-0"}),(0,i.jsx)("span",{children:"Nettoyer"}),R>0&&(0,i.jsx)("span",{className:"ml-1 px-1.5 py-0.5 bg-red-200 text-red-800 rounded-full text-[10px] font-bold",children:R})]})]})]}),(0,i.jsx)("div",{className:"max-h-96 overflow-y-auto",children:d?(0,i.jsxs)("div",{className:"p-8 text-center text-gray-500",children:[(0,i.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600 mx-auto mb-4"}),(0,i.jsx)("p",{className:"text-sm",children:"Chargement des notifications..."})]}):0===T.length&&0===O?(0,i.jsxs)("div",{className:"p-8 text-center text-gray-500",children:[(0,i.jsx)(hi,{size:48,className:"mx-auto mb-4 text-gray-300"}),(0,i.jsx)("p",{className:"text-sm",children:"Aucune notification"})]}):(0,i.jsx)("div",{className:"p-2",children:T.map((e,t)=>(0,i.jsx)("div",{onClick:()=>(e=>{var t;if(e.isPendingLoan&&null!==(t=e.data)&&void 0!==t&&t.loanId)return M(),void setTimeout(()=>{window.location.href="/admin/loan-requests"},100);null===s||void 0===s||s(e),M()})(e),className:"p-3 rounded-lg cursor-pointer transition-all duration-200 hover:bg-gray-50/80 ".concat(!e.read||e.isPendingLoan?"bg-orange-50/50 border-l-4 border-orange-400":"bg-white"),children:(0,i.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,i.jsxs)("div",{className:"flex-shrink-0 mt-1",children:["success"===e.type&&(0,i.jsx)(mt.A,{size:16,className:"text-green-500"}),"error"===e.type&&(0,i.jsx)(ft,{size:16,className:"text-red-500"}),"info"===e.type&&(0,i.jsx)(gt,{size:16,className:"text-blue-500"}),"warning"===e.type&&(0,i.jsx)(kp,{size:16,className:"text-yellow-500"}),e.isPendingLoan&&(0,i.jsx)(kp,{size:16,className:"text-orange-500"})]}),(0,i.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,i.jsx)("p",{className:"text-sm font-medium text-gray-900 leading-5",children:e.title}),(0,i.jsx)("p",{className:"text-sm text-gray-600 leading-5 mt-1",children:e.message}),e.action&&(0,i.jsxs)("p",{className:"text-xs text-blue-600 font-medium mt-2",children:[e.action," \u2192"]})]})]})},e.id))})}),(0,i.jsxs)("div",{className:"p-3 border-t border-gray-200/50 bg-gray-50/30",children:[S&&(0,i.jsx)("div",{className:"mb-3",children:(0,i.jsx)("button",{onClick:async()=>{k?await _():await A()},className:"w-full flex items-center justify-center space-x-2 px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200 ".concat(k?"bg-green-100 text-green-700 hover:bg-green-200":"bg-blue-100 text-blue-700 hover:bg-blue-200"),children:k?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Ap,{size:16}),(0,i.jsx)("span",{children:"Notifications activ\xe9es"})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(_p,{size:16}),(0,i.jsx)("span",{children:"Activer les notifications"})]})})}),T.length>0&&(0,i.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[(0,i.jsxs)("span",{children:[v," non lue",v>1?"s":""]}),N>0&&(0,i.jsxs)("span",{className:"text-orange-600 font-medium",children:[N," en attente"]})]})]})]})]})},Lp=()=>{const{user:e,logout:t}=ut(),s=(0,Ge.Zp)(),r=(0,Ge.zy)(),{showInfo:a,notifications:o,markAsRead:l,refreshNotifications:c}=yt(),[d,u]=(0,n.useState)(!1),[h,m]=(0,n.useState)(0);(0,n.useEffect)(()=>{if(null===e||void 0===e||!e.id)return;const t=setTimeout(()=>{c(e.id)},300);return()=>clearTimeout(t)},[null===e||void 0===e?void 0:e.id,c]),(0,n.useEffect)(()=>{if("admin"===(null===e||void 0===e?void 0:e.role)){const e=()=>{const e=JSON.parse(localStorage.getItem("adminNotifications")||"[]").filter(e=>!e.read&&new Date(e.timestamp)>new Date(Date.now()-3e5));if(e.length>0){m(e.length);const t=e[0];"new_registration"===t.type&&a("Nouvelle inscription : ".concat(t.user.firstName," ").concat(t.user.lastName))}},t=setInterval(e,3e4);return e(),()=>clearInterval(t)}},[null===e||void 0===e?void 0:e.role,a]);const p=async()=>{try{console.log("[HEADER] Tentative de d\xe9connexion..."),await t(),console.log("[HEADER] \u2705 D\xe9connexion r\xe9ussie, redirection vers login"),s("/login")}catch(e){console.error("[HEADER] \u274c Erreur lors de la d\xe9connexion:",e);try{localStorage.removeItem("ab_user_cache")}catch(cs){}s("/login")}},f=()=>null!==e&&void 0!==e&&e.firstName&&null!==e&&void 0!==e&&e.lastName?"".concat(e.firstName," ").concat(e.lastName):(null===e||void 0===e?void 0:e.email)||"Utilisateur";return(0,i.jsx)("header",{className:"fixed top-0 left-0 right-0 bg-white shadow-soft border-b border-accent-200 w-full z-50",children:(0,i.jsxs)("div",{className:"w-full",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center py-4 w-full px-4 lg:px-8",children:[(0,i.jsx)("button",{onClick:()=>{"admin"===(null===e||void 0===e?void 0:e.role)&&r.pathname.startsWith("/admin")||"admin"===(null===e||void 0===e?void 0:e.role)?s("/admin"):s("/dashboard")},className:"flex items-center space-x-3 hover:opacity-80 transition-opacity duration-200",children:(0,i.jsx)(wp,{size:"md"})}),(0,i.jsx)("div",{className:"lg:hidden",children:(0,i.jsx)(Op,{notifications:o,onNotificationClick:e=>{l(e.id),"payment"===e.type?s("/repayment"):"loan"===e.type&&s("/loan-history")}})}),"admin"!==(null===e||void 0===e?void 0:e.role)&&(0,i.jsxs)("nav",{className:"hidden lg:flex items-center space-x-6",children:[(0,i.jsx)("a",{href:"/dashboard",className:"text-neutral-600 hover:text-secondary-900 font-montserrat transition-colors duration-200",children:"Accueil"}),(0,i.jsx)("a",{href:"/loan-request",className:"text-neutral-600 hover:text-secondary-900 font-montserrat transition-colors duration-200",children:"Demander un pr\xeat"}),(0,i.jsx)("a",{href:"/loan-history",className:"text-neutral-600 hover:text-secondary-900 font-montserrat transition-colors duration-200",children:"Historique"}),(0,i.jsx)("a",{href:"/repayment",className:"text-neutral-600 hover:text-secondary-900 font-montserrat transition-colors duration-200",children:"Remboursement"})]}),(0,i.jsxs)("div",{className:"hidden lg:flex items-center space-x-4",children:[(0,i.jsx)(Op,{notifications:o,onNotificationClick:e=>{l(e.id),"payment"===e.type?s("/repayment"):"loan"===e.type&&s("/loan-history")}}),"admin"===(null===e||void 0===e?void 0:e.role)&&h>0&&(0,i.jsxs)("button",{className:"relative p-2 text-neutral-400 hover:text-neutral-600 transition-colors duration-200",children:[(0,i.jsx)(hi,{size:20}),(0,i.jsx)("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:h})]}),(0,i.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,i.jsx)("div",{className:"w-8 h-8 bg-primary-100 rounded-full flex items-center justify-center",children:(0,i.jsx)(mi,{size:16,className:"text-primary-600"})}),(0,i.jsxs)("div",{className:"flex flex-col",children:[(0,i.jsx)("span",{className:"text-sm font-medium text-secondary-900 font-montserrat",children:f()}),(0,i.jsx)("span",{className:"text-xs text-neutral-600 font-montserrat",children:"admin"===(null===e||void 0===e?void 0:e.role)?"Administrateur":"Client AB CAMPUS FINANCE"})]}),(0,i.jsx)("button",{onClick:p,className:"p-2 text-neutral-400 hover:text-neutral-600 transition-colors duration-200",children:(0,i.jsx)(pi,{size:20})})]})]}),(0,i.jsx)("button",{onClick:()=>u(!d),className:"lg:hidden relative p-3 rounded-xl bg-white/80 backdrop-blur-sm border border-gray-200/50 hover:bg-white/90 transition-all duration-200 shadow-sm hover:shadow-md",children:(0,i.jsxs)("div",{className:"flex flex-col space-y-1.5",children:[(0,i.jsx)("span",{className:"w-6 h-0.5 bg-gray-700 rounded-full"}),(0,i.jsx)("span",{className:"w-6 h-0.5 bg-gray-700 rounded-full"}),(0,i.jsx)("span",{className:"w-6 h-0.5 bg-gray-700 rounded-full"})]})})]}),d&&(0,i.jsxs)("div",{className:"lg:hidden border-t border-accent-200 py-4 w-full overflow-hidden",children:[(0,i.jsx)("div",{className:"px-4 mb-4",children:(0,i.jsx)("h3",{className:"text-lg font-semibold text-secondary-900 font-montserrat mb-4",children:"Nous contacter"})}),(0,i.jsx)("div",{className:"px-4",children:(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsxs)("a",{href:"https://wa.me/22953463606",target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-3 px-4 py-3 rounded-xl hover:bg-green-50 transition-all duration-200 group",onClick:()=>u(!1),children:[(0,i.jsx)("div",{className:"w-8 h-8 bg-green-500 rounded-full flex items-center justify-center flex-shrink-0",children:(0,i.jsx)("svg",{className:"w-4 h-4 text-white",fill:"currentColor",viewBox:"0 0 24 24",children:(0,i.jsx)("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893A11.821 11.821 0 0020.885 3.488"})})}),(0,i.jsxs)("div",{className:"flex-1",children:[(0,i.jsx)("p",{className:"text-sm font-medium text-secondary-900 font-montserrat group-hover:text-green-600 transition-colors",children:"WhatsApp"}),(0,i.jsx)("p",{className:"text-xs text-neutral-600 font-montserrat",children:"+229 53 46 36 06"})]}),(0,i.jsx)(fi,{size:16,className:"text-neutral-400 group-hover:text-green-600 transition-colors"})]}),(0,i.jsxs)("a",{href:"mailto:abpret51@gmail.com",className:"flex items-center space-x-3 px-4 py-3 rounded-xl hover:bg-blue-50 transition-all duration-200 group",onClick:()=>u(!1),children:[(0,i.jsx)("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center flex-shrink-0",children:(0,i.jsx)("svg",{className:"w-4 h-4 text-white",fill:"currentColor",viewBox:"0 0 24 24",children:(0,i.jsx)("path",{d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"})})}),(0,i.jsxs)("div",{className:"flex-1",children:[(0,i.jsx)("p",{className:"text-sm font-medium text-secondary-900 font-montserrat group-hover:text-blue-600 transition-colors",children:"Email"}),(0,i.jsx)("p",{className:"text-xs text-neutral-600 font-montserrat",children:"abpret51@gmail.com"})]}),(0,i.jsx)(fi,{size:16,className:"text-neutral-400 group-hover:text-blue-600 transition-colors"})]}),(0,i.jsxs)("a",{href:"https://www.facebook.com/abpret.2024",target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-3 px-4 py-3 rounded-xl hover:bg-blue-50 transition-all duration-200 group",onClick:()=>u(!1),children:[(0,i.jsx)("div",{className:"w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center flex-shrink-0",children:(0,i.jsx)("svg",{className:"w-4 h-4 text-white",fill:"currentColor",viewBox:"0 0 24 24",children:(0,i.jsx)("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})})}),(0,i.jsxs)("div",{className:"flex-1",children:[(0,i.jsx)("p",{className:"text-sm font-medium text-secondary-900 font-montserrat group-hover:text-blue-600 transition-colors",children:"Facebook"}),(0,i.jsx)("p",{className:"text-xs text-neutral-600 font-montserrat",children:"AB Campus Finance"})]}),(0,i.jsx)(fi,{size:16,className:"text-neutral-400 group-hover:text-blue-600 transition-colors"})]})]})}),(0,i.jsx)("div",{className:"mt-6 pt-6 border-t border-accent-200",children:(0,i.jsxs)("div",{className:"flex items-center justify-between px-4",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,i.jsx)("div",{className:"w-8 h-8 bg-primary-100 rounded-full flex items-center justify-center",children:(0,i.jsx)(mi,{size:16,className:"text-primary-600"})}),(0,i.jsxs)("div",{className:"flex flex-col",children:[(0,i.jsx)("span",{className:"text-sm font-medium text-secondary-900 font-montserrat",children:f()}),(0,i.jsx)("span",{className:"text-xs text-neutral-600 font-montserrat",children:"admin"===(null===e||void 0===e?void 0:e.role)?"Administrateur":"Client"})]})]}),(0,i.jsx)("button",{onClick:p,className:"p-2 text-neutral-400 hover:text-neutral-600 transition-colors duration-200",children:(0,i.jsx)(pi,{size:20})})]})})]})]})})},Mp=(0,pt.A)("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]),zp=(0,pt.A)("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]),Fp=e=>{let{size:t=16,className:s=""}=e;return(0,i.jsx)("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"currentColor",className:s,children:(0,i.jsx)("path",{d:"M12.031 6.172c-3.181 0-5.767 2.586-5.768 5.766-.001 1.298.38 2.27 1.019 3.287l-.582 2.128 2.182-.573c.978.58 1.911.928 3.145.929 3.178 0 5.767-2.587 5.768-5.766.001-3.187-2.575-5.771-5.764-5.771zm3.392 8.244c-.144.405-.837.774-1.17.824-.299.045-.677.063-1.092-.069-.252-.08-.575-.187-.988-.365-1.739-.751-2.874-2.502-2.961-2.617-.087-.116-.708-.94-.708-1.793s.448-1.273.607-1.446c.159-.173.346-.217.462-.217l.332.006c.106.005.249-.04.39.298.144.347.491 1.2.534 1.287.043.087.072.188.014.304-.058.116-.087.188-.173.289l-.26.304c-.087.086-.177.18-.076.354.101.174.449.741.964 1.201.662.591 1.221.774 1.394.86s.274.072.376-.043c.101-.116.433-.506.549-.68.116-.173.231-.145.39-.087s1.011.477 1.184.564.289.13.332.202c.045.072.045.419-.1.824zm-3.423-14.416c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm.029 18.88c-1.161 0-2.305-.292-3.318-.844l-3.677.964.984-3.595c-.607-1.052-.927-2.246-.926-3.468.001-3.825 3.113-6.937 6.937-6.937 1.856 0 3.598.723 4.907 2.034 1.31 1.311 2.031 3.054 2.03 4.908-.001 3.825-3.113 6.938-6.937 6.938z"})})},Up=e=>{let{size:t=16,className:s=""}=e;return(0,i.jsx)("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"currentColor",className:s,children:(0,i.jsx)("path",{d:"M24 5.457v13.909c0 .904-.732 1.636-1.636 1.636h-3.819V11.73L12 16.64l-6.545-4.91v9.273H1.636A1.636 1.636 0 0 1 0 19.366V5.457c0-.904.732-1.636 1.636-1.636h.819L12 10.91l9.545-7.089h.819A1.636 1.636 0 0 1 24 5.457z"})})},Bp=()=>{const e=()=>{window.open("mailto:abpret51@gmail.com","_blank")},t=()=>{const e="https://wa.me/".concat("+22953463606","?text=").concat(encodeURIComponent("Bonjour, je souhaite avoir plus d'informations sur vos services de pr\xeat."));window.open(e,"_blank")},s=()=>{window.open("https://www.facebook.com/abpret.2024","_blank")};return(0,i.jsx)("footer",{className:"bg-white/80 backdrop-blur-sm border-t border-accent-200",children:(0,i.jsxs)("div",{className:"max-w-7xl mx-auto px-4 pt-2 pb-4",children:[(0,i.jsxs)("div",{className:"lg:hidden",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,i.jsx)("div",{className:"w-8 h-8 bg-primary-100 rounded-full flex items-center justify-center",children:(0,i.jsx)("span",{className:"text-primary-600 font-bold text-sm",children:"AB"})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-xs font-medium text-secondary-900 font-montserrat",children:"AB CAMPUS FINANCE"}),(0,i.jsx)("p",{className:"text-xs text-neutral-600 font-montserrat",children:"Cotonou, B\xe9nin"})]})]}),(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,i.jsx)("button",{onClick:e,className:"p-2 bg-red-100 rounded-full hover:bg-red-200 transition-colors duration-200",title:"Envoyer un email",children:(0,i.jsx)(Up,{size:14,className:"text-red-600"})}),(0,i.jsx)("button",{onClick:t,className:"p-2 bg-green-100 rounded-full hover:bg-green-200 transition-colors duration-200",title:"Contacter sur WhatsApp",children:(0,i.jsx)(Fp,{size:14,className:"text-green-600"})}),(0,i.jsx)("button",{onClick:s,className:"p-2 bg-blue-100 rounded-full hover:bg-blue-200 transition-colors duration-200",title:"Suivre sur Facebook",children:(0,i.jsx)(Mp,{size:14,className:"text-blue-600"})})]})]}),(0,i.jsx)("div",{className:"mt-3 pt-3 border-t border-accent-200",children:(0,i.jsxs)("div",{className:"flex items-center justify-between text-xs text-neutral-600 font-montserrat",children:[(0,i.jsx)("span",{children:"\xa9 2025 AB CAMPUS FINANCE"}),(0,i.jsx)("span",{className:"text-primary-600 font-semibold",children:"Made in B\xe9nin \ud83c\udde7\ud83c\uddef"})]})})]}),(0,i.jsx)("div",{className:"hidden lg:block",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,i.jsx)("div",{className:"w-10 h-10 bg-primary-100 rounded-full flex items-center justify-center",children:(0,i.jsx)("span",{className:"text-primary-600 font-bold",children:"AB"})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"font-semibold text-secondary-900 font-montserrat",children:"AB CAMPUS FINANCE"}),(0,i.jsx)("p",{className:"text-sm text-neutral-600 font-montserrat",children:"Votre succ\xe8s, notre mission"})]})]}),(0,i.jsxs)("div",{className:"flex items-center space-x-4 text-sm",children:[(0,i.jsxs)("button",{onClick:e,className:"flex items-center space-x-2 text-neutral-600 hover:text-red-600 transition-colors duration-200 font-montserrat",children:[(0,i.jsx)(Up,{size:16}),(0,i.jsx)("span",{children:"abpret51@gmail.com"}),(0,i.jsx)(zp,{size:12})]}),(0,i.jsxs)("button",{onClick:t,className:"flex items-center space-x-2 text-neutral-600 hover:text-green-600 transition-colors duration-200 font-montserrat",children:[(0,i.jsx)(Fp,{size:16}),(0,i.jsx)("span",{children:"+229 53463606"}),(0,i.jsx)(zp,{size:12})]}),(0,i.jsxs)("button",{onClick:s,className:"flex items-center space-x-2 text-neutral-600 hover:text-blue-600 transition-colors duration-200 font-montserrat",children:[(0,i.jsx)(Mp,{size:16}),(0,i.jsx)("span",{children:"Suivre sur Facebook"}),(0,i.jsx)(zp,{size:12})]})]})]}),(0,i.jsxs)("div",{className:"text-sm text-neutral-600 font-montserrat",children:["\xa9 2025 AB CAMPUS FINANCE. Tous droits r\xe9serv\xe9s. ",(0,i.jsx)("span",{className:"text-primary-600 font-semibold ml-2",children:"Made in B\xe9nin \ud83c\udde7\ud83c\uddef"})]})]})})]})})},qp=e=>{let{items:t,panelHeight:s=68,baseItemSize:r=50,magnification:a=70,className:o=""}=e;const[l,c]=(0,n.useState)(null),d=(0,Ge.Zp)(),u=(0,Ge.zy)();return(0,i.jsxs)(yp.div,{className:"fixed bottom-4 left-4 right-4 z-50 ".concat(o),initial:{y:0,opacity:1},animate:{y:0,opacity:1},transition:{type:"spring",stiffness:300,damping:30,duration:.3},children:[(0,i.jsx)("div",{className:"absolute inset-0 bg-white border border-accent-200 rounded-3xl shadow-2xl"}),(0,i.jsx)("div",{className:"relative flex items-center justify-center px-6 py-3",style:{height:s},children:(0,i.jsx)("div",{className:"flex items-center space-x-3",children:t.map((e,t)=>{const s=l===t,n=u.pathname===e.path,o=s?r+a:r;return(0,i.jsxs)(yp.div,{className:"relative",onHoverStart:()=>c(t),onHoverEnd:()=>c(null),onClick:()=>(e=>{e.path&&e.path!==u.pathname&&d(e.path)})(e),whileTap:{scale:.92},transition:{type:"spring",stiffness:400,damping:17},children:[(0,i.jsxs)(yp.div,{className:"\n                    flex flex-col items-center justify-center rounded-2xl cursor-pointer\n                    ".concat(n?"bg-primary-100 shadow-lg":s?"bg-accent-100 shadow-lg":"bg-transparent hover:bg-accent-50","\n                    transition-all duration-300 ease-out\n                  "),style:{width:o,height:o,minWidth:o,minHeight:o},animate:{scale:s?1.15:1,y:s?-12:0},transition:{type:"spring",stiffness:400,damping:17},children:[(0,i.jsx)(yp.div,{className:"\n                      transition-colors duration-200\n                      ".concat(n||s?"text-primary-600":"text-secondary-600","\n                    "),animate:{scale:s?1.1:1},transition:{duration:.2},children:e.icon}),(0,i.jsx)(yp.span,{className:"text-xs font-medium mt-1 transition-colors duration-200 ".concat(n||s?"text-primary-600":"text-secondary-600"),style:{fontSize:"10px"},animate:{scale:s?1.05:1},transition:{duration:.2},children:e.label})]}),s&&(0,i.jsx)(yp.div,{className:"absolute inset-0 rounded-2xl bg-primary-200/40 blur-2xl -z-10",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1.3},exit:{opacity:0,scale:.8},transition:{duration:.3}})]},t)})})}),(0,i.jsx)("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 w-32 h-1 bg-gradient-to-r from-transparent via-primary-200/50 to-transparent rounded-full"})]})},Vp=(0,pt.A)("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);var Hp=s(5722);const Wp=(0,pt.A)("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);var Gp=s(6852);const Kp=(0,pt.A)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Zp=(0,pt.A)("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),Jp=(0,pt.A)("Grid",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["line",{x1:"3",x2:"21",y1:"9",y2:"9",key:"1vqk6q"}],["line",{x1:"3",x2:"21",y1:"15",y2:"15",key:"o2sbyz"}],["line",{x1:"9",x2:"9",y1:"3",y2:"21",key:"13tij5"}],["line",{x1:"15",x2:"15",y1:"3",y2:"21",key:"1hpv9i"}]]),Qp=(0,pt.A)("Wallet",[["path",{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4",key:"195gfw"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h16v-5",key:"195n9w"}],["path",{d:"M18 12a2 2 0 0 0 0 4h4v-4Z",key:"vllfpd"}]]),Yp=(0,n.createContext)(),$p=e=>{let{children:t}=e;const{user:s}=ut(),n="admin"===(null===s||void 0===s?void 0:s.role)?[{icon:(0,i.jsx)(Vp,{size:20}),label:"Accueil",path:"/admin"},{icon:(0,i.jsx)(Hp.A,{size:20}),label:"Demandes",path:"/admin/loan-requests"},{icon:(0,i.jsx)(Wp,{size:20}),label:"Menu",path:"/admin/menu"},{icon:(0,i.jsx)(Gp.A,{size:20}),label:"Analytics",path:"/admin/analytics"},{icon:(0,i.jsx)(Kp,{size:20}),label:"Param\xe8tres",path:"/admin/settings"}]:[{icon:(0,i.jsx)(Vp,{size:20}),label:"Accueil",path:"/dashboard"},{icon:(0,i.jsx)(Zp,{size:20}),label:"Demandes",path:"/loan-request"},{icon:(0,i.jsx)(Jp,{size:20}),label:"Menu",path:"/menu"},{icon:(0,i.jsx)(Qp,{size:20}),label:"Rembourser",path:"/repayment"},{icon:(0,i.jsx)(mi,{size:20}),label:"Profil",path:"/profile"}];return(0,i.jsxs)(Yp.Provider,{value:{dockItems:n},children:[t,(0,i.jsx)(qp,{items:n,panelHeight:80,baseItemSize:60,magnification:80})]})},Xp=e=>{let{children:t}=e;return(0,i.jsx)($p,{children:(0,i.jsxs)("div",{className:"bg-gray-50 w-full overflow-x-hidden",children:[(0,i.jsx)(Lp,{}),(0,i.jsx)("main",{className:"w-full overflow-x-hidden pt-20",children:t}),(0,i.jsx)(Bp,{})]})})};function ef(e,t){if("function"===typeof e)return e(t);null!==e&&void 0!==e&&(e.current=t)}function tf(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return n.useCallback(function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return e=>{let s=!1;const n=t.map(t=>{const n=ef(t,e);return s||"function"!==typeof n||(s=!0),n});if(s)return()=>{for(let e=0;e<n.length;e++){const s=n[e];"function"===typeof s?s():ef(t[e],null)}}}}(...t),t)}class sf extends n.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const e=t.offsetParent,s=sp(e)&&e.offsetWidth||0,n=this.props.sizeRef.current;n.height=t.offsetHeight||0,n.width=t.offsetWidth||0,n.top=t.offsetTop,n.left=t.offsetLeft,n.right=s-n.width-n.left}return null}componentDidUpdate(){}render(){return this.props.children}}function nf(e){let{children:t,isPresent:s,anchorX:r,root:a}=e;const o=(0,n.useId)(),l=(0,n.useRef)(null),c=(0,n.useRef)({width:0,height:0,top:0,left:0,right:0}),{nonce:d}=(0,n.useContext)(xc),u=tf(l,null===t||void 0===t?void 0:t.ref);return(0,n.useInsertionEffect)(()=>{const{width:e,height:t,top:n,left:i,right:u}=c.current;if(s||!l.current||!e||!t)return;const h="left"===r?"left: ".concat(i):"right: ".concat(u);l.current.dataset.motionPopId=o;const m=document.createElement("style");d&&(m.nonce=d);const p=null!==a&&void 0!==a?a:document.head;return p.appendChild(m),m.sheet&&m.sheet.insertRule('\n          [data-motion-pop-id="'.concat(o,'"] {\n            position: absolute !important;\n            width: ').concat(e,"px !important;\n            height: ").concat(t,"px !important;\n            ").concat(h,"px !important;\n            top: ").concat(n,"px !important;\n          }\n        ")),()=>{p.contains(m)&&p.removeChild(m)}},[s]),(0,i.jsx)(sf,{isPresent:s,childRef:l,sizeRef:c,children:n.cloneElement(t,{ref:u})})}const rf=e=>{let{children:t,initial:s,isPresent:r,onExitComplete:a,custom:o,presenceAffectsLayout:l,mode:c,anchorX:u,root:h}=e;const m=Rc(af),p=(0,n.useId)();let f=!0,g=(0,n.useMemo)(()=>(f=!1,{id:p,initial:s,isPresent:r,custom:o,onExitComplete:e=>{m.set(e,!0);for(const t of m.values())if(!t)return;a&&a()},register:e=>(m.set(e,!1),()=>m.delete(e))}),[r,m,a]);return l&&f&&(g=(0,d.A)({},g)),(0,n.useMemo)(()=>{m.forEach((e,t)=>m.set(t,!1))},[r]),n.useEffect(()=>{!r&&!m.size&&a&&a()},[r]),"popLayout"===c&&(t=(0,i.jsx)(nf,{isPresent:r,anchorX:u,root:h,children:t})),(0,i.jsx)(Ic.Provider,{value:g,children:t})};function af(){return new Map}const of=e=>e.key||"";function lf(e){const t=[];return n.Children.forEach(e,e=>{(0,n.isValidElement)(e)&&t.push(e)}),t}const cf=e=>{let{children:t,custom:s,initial:r=!0,onExitComplete:a,presenceAffectsLayout:o=!0,mode:l="sync",propagate:c=!1,anchorX:d="left",root:u}=e;const[h,m]=Mh(c),p=(0,n.useMemo)(()=>lf(t),[t]),f=c&&!h?[]:p.map(of),g=(0,n.useRef)(!0),x=(0,n.useRef)(p),v=Rc(()=>new Map),[b,y]=(0,n.useState)(p),[j,w]=(0,n.useState)(p);Wc(()=>{g.current=!1,x.current=p;for(let e=0;e<j.length;e++){const t=of(j[e]);f.includes(t)?v.delete(t):!0!==v.get(t)&&v.set(t,!1)}},[j,f.length,f.join("-")]);const N=[];if(p!==b){let e=[...p];for(let t=0;t<j.length;t++){const s=j[t],n=of(s);f.includes(n)||(e.splice(t,0,s),N.push(s))}return"wait"===l&&N.length&&(e=N),w(lf(e)),y(p),null}const{forceRender:S}=(0,n.useContext)(fc);return(0,i.jsx)(i.Fragment,{children:j.map(e=>{const t=of(e),n=!(c&&!h)&&(p===j||f.includes(t));return(0,i.jsx)(rf,{isPresent:n,initial:!(g.current&&!r)&&void 0,custom:s,presenceAffectsLayout:o,mode:l,root:u,onExitComplete:n?void 0:()=>{if(!v.has(t))return;v.set(t,!0);let e=!0;v.forEach(t=>{t||(e=!1)}),e&&(null===S||void 0===S||S(),w(x.current),c&&(null===m||void 0===m||m()),a&&a())},anchorX:d,children:e},t)})})},df=()=>{const[e,t]=(0,n.useState)(!1),[s,r]=(0,n.useState)(!1),{isSupported:a,isSubscribed:o,hasAskedPermission:l,subscribeUser:c}=Rp();(0,n.useEffect)(()=>{if("true"===localStorage.getItem("notification-prompt-declined"))return;if(o)return;if("true"!==localStorage.getItem("subscription-inactive"))return;if("true"===localStorage.getItem("notification-prompt-seen")){const e=localStorage.getItem("notification-prompt-last-seen");if(e){if((Date.now()-parseInt(e))/36e5<24)return}}if(a&&l&&!o&&"denied"!==Notification.permission){const e=setTimeout(()=>t(!0),3e3);return()=>clearTimeout(e)}},[a,l,o]);return e?(0,i.jsx)(cf,{children:(0,i.jsx)(yp.div,{initial:{opacity:0,y:-50,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-50,scale:.9},transition:{duration:.3,ease:"easeOut"},className:"fixed top-4 right-4 z-[10000] max-w-sm",children:(0,i.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl border border-gray-200/50 p-4 backdrop-blur-sm",children:[(0,i.jsxs)("div",{className:"flex items-start space-x-3 mb-3",children:[(0,i.jsx)("div",{className:"flex-shrink-0",children:(0,i.jsx)("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:(0,i.jsx)(hi,{size:20,className:"text-blue-600"})})}),(0,i.jsxs)("div",{className:"flex-1",children:[(0,i.jsx)("h3",{className:"font-semibold text-gray-900 text-sm",children:"Notifications requises"}),(0,i.jsx)("p",{className:"text-xs text-gray-600 mt-1",children:"Activez les notifications pour recevoir les alertes importantes sur les nouveaut\xe9s et avantages"})]})]}),(0,i.jsx)("div",{className:"flex space-x-2",children:(0,i.jsx)("button",{onClick:async()=>{console.log("[PUSH PROMPT] D\xe9but de l'activation des notifications..."),r(!0);try{const e=await c();console.log("[PUSH PROMPT] R\xe9sultat de l'abonnement:",e),localStorage.setItem("notification-prompt-seen","true"),localStorage.setItem("notification-prompt-last-seen",Date.now().toString()),console.log("[PUSH PROMPT] Prompt marqu\xe9 comme vu dans localStorage"),e?(console.log("[PUSH PROMPT] Abonnement r\xe9ussi, fermeture du prompt"),localStorage.setItem("subscription-active","true"),localStorage.removeItem("subscription-inactive"),t(!1)):(console.log("[PUSH PROMPT] \xc9chec de l'abonnement, fermeture du prompt quand m\xeame"),t(!1))}catch(e){console.error("[PUSH PROMPT] Erreur lors de l'abonnement:",e),localStorage.setItem("notification-prompt-seen","true"),localStorage.setItem("notification-prompt-last-seen",Date.now().toString()),t(!1)}finally{r(!1)}},disabled:s,className:"w-full px-4 py-3 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 transition-colors duration-200 disabled:opacity-50 flex items-center justify-center space-x-2",children:s?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),(0,i.jsx)("span",{children:"Activation en cours..."})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(mt.A,{size:16}),(0,i.jsx)("span",{children:"Activer les notifications maintenant"})]})})}),(0,i.jsx)("div",{className:"mt-3 pt-3 border-t border-gray-100",children:(0,i.jsxs)("div",{className:"flex items-center space-x-2 text-xs text-gray-500",children:[(0,i.jsx)(ft,{size:12}),(0,i.jsx)("span",{children:"Les notifications sont essentielles pour votre exp\xe9rience utilisateur"})]})})]})})}):null},uf=(0,pt.A)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),hf=(0,pt.A)("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]),mf=(0,pt.A)("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),pf=(0,pt.A)("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",key:"3xmgem"}]]),ff=(0,pt.A)("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]),gf=()=>{const[e,t]=(0,n.useState)(null),[s,r]=(0,n.useState)(!1),[a,i]=(0,n.useState)(!1),[o,l]=(0,n.useState)(!1);(0,n.useEffect)(()=>{const e=localStorage.getItem("pwa-install-prompt-seen"),s=localStorage.getItem("pwa-install-prompt-dismissed");if("true"===localStorage.getItem("pwa-install-accepted"))return console.log("[PWA_INSTALL] App d\xe9j\xe0 accept\xe9e par l'utilisateur"),void i(!0);if("true"===e&&"true"===s)return void console.log("[PWA_INSTALL] Prompt d\xe9j\xe0 rejet\xe9 par l'utilisateur, pas d'affichage");if((window.matchMedia("(display-mode: standalone)").matches||!0===window.navigator.standalone)&&(i(!0),1))return void console.log("[PWA_INSTALL] App d\xe9j\xe0 install\xe9e");const n=e=>{console.log("[PWA_INSTALL] beforeinstallprompt d\xe9clench\xe9"),e.preventDefault();const s=localStorage.getItem("pwa-install-prompt-seen"),n=localStorage.getItem("pwa-install-prompt-dismissed");"true"===localStorage.getItem("pwa-install-accepted")||"true"===s&&"true"===n?console.log("[PWA_INSTALL] Prompt d\xe9j\xe0 g\xe9r\xe9 par l'utilisateur - pas d'affichage"):(t(e),r(!0),setTimeout(()=>{l(!0)},3e3))},a=()=>{console.log("[PWA_INSTALL] App install\xe9e avec succ\xe8s"),i(!0),r(!1),l(!1),t(null),localStorage.setItem("pwa-installed","true"),localStorage.setItem("pwa-install-date",Date.now().toString())};return window.addEventListener("beforeinstallprompt",n),window.addEventListener("appinstalled",a),()=>{window.removeEventListener("beforeinstallprompt",n),window.removeEventListener("appinstalled",a)}},[]);return{isInstallable:s,isInstalled:a,showInstallPrompt:o,canInstall:s&&!a&&null!==e,installApp:async()=>{if(!e)return console.log("[PWA_INSTALL] Pas de prompt d'installation disponible"),!1;try{console.log("[PWA_INSTALL] D\xe9clenchement de l'installation..."),e.prompt();const{outcome:s}=await e.userChoice;return console.log("[PWA_INSTALL] R\xe9sultat de l'installation:",s),"accepted"===s?(console.log("[PWA_INSTALL] \u2705 Installation accept\xe9e"),i(!0),l(!1),localStorage.setItem("pwa-install-accepted","true"),localStorage.setItem("pwa-install-date",Date.now().toString())):(console.log("[PWA_INSTALL] \u274c Installation refus\xe9e"),localStorage.setItem("pwa-install-declined","true"),localStorage.setItem("pwa-install-declined-date",Date.now().toString())),t(null),r(!1),"accepted"===s}catch(s){return console.error("[PWA_INSTALL] Erreur lors de l'installation:",s),!1}},dismissInstallPrompt:()=>{console.log("[PWA_INSTALL] Prompt d'installation ferm\xe9"),l(!1),localStorage.setItem("pwa-install-prompt-seen","true"),localStorage.setItem("pwa-install-prompt-dismissed","true"),console.log("[PWA_INSTALL] Prompt d'installation rejet\xe9 par l'utilisateur")}}},xf=()=>{const{showInstallPrompt:e,canInstall:t,installApp:s,dismissInstallPrompt:n}=gf();if(!e||!t)return null;return(0,i.jsx)(cf,{children:(0,i.jsx)(yp.div,{initial:{opacity:0,y:50,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:50,scale:.9},transition:{duration:.3,ease:"easeOut"},className:"fixed bottom-4 left-4 right-4 z-50 max-w-sm mx-auto",children:(0,i.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl border border-gray-200 overflow-hidden",children:[(0,i.jsx)("div",{className:"bg-gradient-to-r from-primary-500 to-secondary-500 p-4 text-white",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,i.jsx)("div",{className:"p-2 bg-white/20 rounded-lg",children:(0,i.jsx)(uf,{size:20})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{className:"font-bold text-lg",children:"Installer l'app"}),(0,i.jsx)("p",{className:"text-primary-100 text-sm",children:"Acc\xe8s rapide depuis votre \xe9cran d'accueil"})]})]}),(0,i.jsx)("button",{onClick:n,className:"p-1 hover:bg-white/20 rounded-lg transition-colors",children:(0,i.jsx)(xt,{size:20})})]})}),(0,i.jsxs)("div",{className:"p-4",children:[(0,i.jsxs)("div",{className:"space-y-3 mb-4",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,i.jsx)("div",{className:"p-2 bg-green-100 rounded-lg",children:(0,i.jsx)(hf,{size:16,className:"text-green-600"})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"font-medium text-gray-900 text-sm",children:"Acc\xe8s instantan\xe9"}),(0,i.jsx)("p",{className:"text-gray-500 text-xs",children:"Ouvrez l'app directement depuis votre \xe9cran d'accueil"})]})]}),(0,i.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,i.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,i.jsx)(mf,{size:16,className:"text-blue-600"})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"font-medium text-gray-900 text-sm",children:"Plus rapide"}),(0,i.jsx)("p",{className:"text-gray-500 text-xs",children:"Chargement plus rapide et navigation fluide"})]})]}),(0,i.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,i.jsx)("div",{className:"p-2 bg-purple-100 rounded-lg",children:(0,i.jsx)(pf,{size:16,className:"text-purple-600"})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"font-medium text-gray-900 text-sm",children:"S\xe9curis\xe9"}),(0,i.jsx)("p",{className:"text-gray-500 text-xs",children:"Vos donn\xe9es sont prot\xe9g\xe9es et synchronis\xe9es"})]})]})]}),(0,i.jsxs)("div",{className:"flex space-x-3",children:[(0,i.jsxs)("button",{onClick:async()=>{await s()&&console.log("[PWA_INSTALL_PROMPT] Installation r\xe9ussie")},className:"flex-1 bg-gradient-to-r from-primary-500 to-secondary-500 text-white font-semibold py-3 px-4 rounded-xl hover:from-primary-600 hover:to-secondary-600 transition-all duration-200 transform hover:scale-105 flex items-center justify-center space-x-2",children:[(0,i.jsx)(uf,{size:18}),(0,i.jsx)("span",{children:"Installer"})]}),(0,i.jsx)("button",{onClick:n,className:"px-4 py-3 text-gray-600 font-medium hover:bg-gray-100 rounded-xl transition-colors",children:"Plus tard"})]}),(0,i.jsx)("div",{className:"mt-3 p-3 bg-blue-50 rounded-lg",children:(0,i.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,i.jsx)(ff,{size:16,className:"text-blue-600 mt-0.5 flex-shrink-0"}),(0,i.jsxs)("p",{className:"text-blue-800 text-xs",children:[(0,i.jsx)("strong",{children:"Conseil :"})," Une fois install\xe9e, l'app appara\xeetra sur votre \xe9cran d'accueil comme une application native. Vous pourrez y acc\xe9der m\xeame sans connexion internet !"]})]})})]})]})})})},vf=(0,pt.A)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),bf=(0,pt.A)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),yf=(0,pt.A)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),jf=(0,pt.A)("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),wf=(0,pt.A)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Nf=(0,pt.A)("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]),Sf=(0,pt.A)("KeyRound",[["path",{d:"M2 18v3c0 .6.4 1 1 1h4v-3h3v-3h2l1.4-1.4a6.5 6.5 0 1 0-4-4Z",key:"167ctg"}],["circle",{cx:"16.5",cy:"7.5",r:".5",key:"1kog09"}]]),kf=(0,pt.A)("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),Af=()=>{const[e,t]=(0,n.useState)({identifier:"",password:""}),[s,r]=(0,n.useState)(!1),[a,o]=(0,n.useState)(!1),[l,c]=(0,n.useState)(""),{signIn:u,signInWithPhoneNumber:h}=ut(),m=(0,Ge.Zp)(),p=e=>{const t=e.replace(/[^0-9]/g,"");return t.length>=8&&t.length<=15},f=s=>{t((0,d.A)((0,d.A)({},e),{},{[s.target.name]:s.target.value})),c("")};return(0,i.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-yellow-50 to-slate-100 flex items-center justify-center p-4",children:(0,i.jsxs)("div",{className:"w-full max-w-md",children:[(0,i.jsxs)("div",{className:"bg-white rounded-3xl shadow-2xl border border-gray-100 overflow-hidden",children:[(0,i.jsxs)("div",{className:"bg-gradient-to-r from-slate-700 to-slate-800 p-8 text-center",children:[(0,i.jsx)("div",{className:"w-24 h-24 bg-white rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg p-2",children:(0,i.jsx)("img",{src:"/logo-campus-finance.png",alt:"AB Campus Finance",className:"w-full h-full object-contain"})}),(0,i.jsx)("h1",{className:"text-3xl font-bold text-white font-montserrat mb-2",children:"Bienvenue"}),(0,i.jsx)("p",{className:"text-slate-300 font-montserrat",children:"Connectez-vous \xe0 votre compte"})]}),(0,i.jsx)("div",{className:"p-8",children:(0,i.jsxs)("form",{onSubmit:async t=>{t.preventDefault(),o(!0),c("");try{const t=e.identifier.trim(),s=p(t);let n;console.log("[LOGIN] Tentative de connexion avec:",{identifier:t,type:s?"t\xe9l\xe9phone":"email"}),n=s?await h(t,e.password):await u(t,e.password),console.log("[LOGIN] R\xe9sultat:",n),n.success?n.user&&"admin"===n.user.role?m("/admin"):m("/dashboard"):c(n.error||"Identifiants incorrects")}catch(s){console.error("[LOGIN] Erreur:",s),c("Erreur de connexion")}finally{o(!1)}},className:"space-y-6",children:[l&&(0,i.jsx)("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 rounded-lg",children:(0,i.jsx)("p",{className:"text-sm text-red-700 font-medium",children:l})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email ou T\xe9l\xe9phone"}),(0,i.jsxs)("div",{className:"relative",children:[p(e.identifier)?(0,i.jsx)(vf,{size:18,className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400"}):(0,i.jsx)(bf,{size:18,className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,i.jsx)("input",{type:"text",name:"identifier",value:e.identifier,onChange:f,placeholder:"Entrez votre email ou t\xe9l\xe9phone",required:!0,className:"w-full pl-12 pr-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-yellow-500 focus:border-transparent transition-all"})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Mot de passe"}),(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsx)(yf,{size:18,className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,i.jsx)("input",{type:s?"text":"password",name:"password",value:e.password,onChange:f,placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",required:!0,className:"w-full pl-12 pr-12 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-yellow-500 focus:border-transparent transition-all"}),(0,i.jsx)("button",{type:"button",onClick:()=>r(!s),className:"absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors",children:s?(0,i.jsx)(jf,{size:18}):(0,i.jsx)(wf,{size:18})})]})]}),(0,i.jsxs)("button",{type:"submit",disabled:a,className:"w-full flex items-center justify-center gap-2 py-3 bg-gradient-to-r from-yellow-500 to-yellow-600 hover:from-yellow-600 hover:to-yellow-700 text-slate-900 rounded-xl font-bold transition-all duration-200 shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,i.jsx)(Nf,{size:20}),(0,i.jsx)("span",{children:a?"Connexion en cours...":"Se connecter"})]}),(0,i.jsxs)("div",{className:"space-y-3",children:[(0,i.jsx)("div",{className:"text-center",children:(0,i.jsxs)(rt,{to:"/forgot-password",className:"inline-flex items-center gap-2 text-sm text-gray-600 hover:text-yellow-600 font-medium transition-colors",children:[(0,i.jsx)(Sf,{size:16}),"Mot de passe oubli\xe9 ?"]})}),(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,i.jsx)("div",{className:"w-full border-t border-gray-200"})}),(0,i.jsx)("div",{className:"relative flex justify-center text-sm",children:(0,i.jsx)("span",{className:"px-4 bg-white text-gray-500",children:"ou"})})]}),(0,i.jsxs)(rt,{to:"/create-account",className:"w-full flex items-center justify-center gap-2 py-3 bg-slate-50 hover:bg-slate-100 text-slate-700 rounded-xl font-medium transition-all duration-200 border border-slate-200",children:[(0,i.jsx)(kf,{size:20}),(0,i.jsx)("span",{children:"Cr\xe9er un compte"})]})]})]})})]}),(0,i.jsxs)("div",{className:"text-center mt-6",children:[(0,i.jsx)("p",{className:"text-sm text-gray-600",children:"\xa9 2025 AB Campus Finance. Tous droits r\xe9serv\xe9s."}),(0,i.jsx)("p",{className:"text-sm text-primary-600 font-semibold mt-1",children:"Made in B\xe9nin \ud83c\udde7\ud83c\uddef"})]})]})})},_f=["children","variant","size","disabled","loading","onClick","type","className"],Ef=e=>{let{children:t,variant:s="primary",size:n="md",disabled:r=!1,loading:a=!1,onClick:o,type:l="button",className:c=""}=e,u=(0,fl.A)(e,_f);const h="".concat("font-medium rounded-xl transition-colors duration-200 flex items-center justify-center font-montserrat"," ").concat({primary:"bg-primary-500 text-white hover:bg-primary-600 disabled:bg-primary-300",secondary:"bg-secondary-900 text-white hover:bg-secondary-800 disabled:bg-secondary-300",outline:"border-2 border-primary-500 text-primary-600 hover:bg-primary-50 disabled:border-primary-300",danger:"bg-red-600 text-white hover:bg-red-700 disabled:bg-red-300",accent:"bg-accent-400 text-secondary-900 hover:bg-accent-500 disabled:bg-accent-300"}[s]," ").concat({sm:"px-3 py-2 text-sm",md:"px-6 py-3 text-base",lg:"px-8 py-4 text-lg"}[n]," ").concat(c);return(0,i.jsxs)("button",(0,d.A)((0,d.A)({type:l,disabled:r||a,onClick:o,className:h},u),{},{children:[a&&(0,i.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",fill:"none",viewBox:"0 0 24 24",children:[(0,i.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,i.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),t]}))},Cf=["label","type","placeholder","value","onChange","error","required","disabled","className","children"],Pf=e=>{let{label:t,type:s="text",placeholder:n,value:r,onChange:a,error:o,required:l=!1,disabled:c=!1,className:u="",children:h}=e,m=(0,fl.A)(e,Cf);const p="\n    w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-colors duration-200 font-montserrat\n    ".concat(o?"border-red-500":"border-accent-300","\n    ").concat(c?"bg-accent-100 cursor-not-allowed":"bg-white","\n    ").concat(u,"\n  ");return(0,i.jsxs)("div",{className:"mb-4",children:[t&&(0,i.jsxs)("label",{className:"block text-sm font-medium text-secondary-900 mb-2 font-montserrat",children:[t,l&&(0,i.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]}),(()=>{switch(s){case"select":return(0,i.jsx)("select",(0,d.A)((0,d.A)({value:r,onChange:a,disabled:c,className:p},m),{},{children:h}));case"textarea":return(0,i.jsx)("textarea",(0,d.A)({placeholder:n,value:r,onChange:a,disabled:c,className:"".concat(p," resize-vertical min-h-[100px]")},m));default:return(0,i.jsx)("input",(0,d.A)({type:s,placeholder:n,value:r,onChange:a,disabled:c,className:p},m))}})(),o&&(0,i.jsx)("p",{className:"mt-1 text-sm text-red-500 font-montserrat",children:o})]})},Tf=["as","className","color","speed","thickness","children"],If=e=>{let{as:t="button",className:s="",color:n="white",speed:r="6s",thickness:a=1,children:o}=e,l=(0,fl.A)(e,Tf);return(0,i.jsxs)(t,(0,d.A)((0,d.A)({className:"star-border-container ".concat(s),style:(0,d.A)({padding:"".concat(a,"px 0")},l.style)},l),{},{children:[(0,i.jsx)("div",{className:"border-gradient-bottom",style:{background:"radial-gradient(circle, ".concat(n,", transparent 10%)"),animationDuration:r}}),(0,i.jsx)("div",{className:"border-gradient-top",style:{background:"radial-gradient(circle, ".concat(n,", transparent 10%)"),animationDuration:r}}),(0,i.jsx)("div",{className:"inner-content",children:o})]}))},Rf=(0,pt.A)("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),Df=(0,pt.A)("GraduationCap",[["path",{d:"M22 10v6M2 10l10-5 10 5-10 5z",key:"1ef52a"}],["path",{d:"M6 12v5c3 3 9 3 12 0v-5",key:"1f75yj"}]]),Of=(0,pt.A)("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]),Lf=(0,pt.A)("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);var Mf=s(7607);const zf=async function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"user";const n=Date.now(),r="".concat(s,"_identity_").concat(t,"_").concat(n,".").concat(e.name.split(".").pop()),a="identity-cards/".concat(t,"/").concat(r);return await(async(e,t,s)=>{try{console.log("[UPLOAD] D\xe9but upload:",{fileName:e.name,bucket:t,path:s});const n=5242880;if(e.size>n)throw new Error("Le fichier est trop volumineux (max 5MB)");if(!["image/jpeg","image/png","image/jpg"].includes(e.type))throw new Error("Type de fichier non autoris\xe9 (JPG, PNG uniquement)");const{error:r}=await lt.ND.storage.from(t).upload(s,e,{cacheControl:"3600",upsert:!1});if(r)throw console.error("[UPLOAD] Erreur upload:",r),r;const{data:a}=lt.ND.storage.from(t).getPublicUrl(s);return console.log("[UPLOAD] \u2705 Upload r\xe9ussi:",a.publicUrl),{success:!0,url:a.publicUrl,path:s}}catch(n){return console.error("[UPLOAD] \u274c Erreur upload:",n.message),{success:!1,error:n.message}}})(e,"documents",a)},Ff=()=>{const e=(0,Ge.Zp)(),t=(0,Ge.zy)(),{basicInfo:s,fromCreateAccount:r}=t.state||{};console.log("[REGISTER] Donn\xe9es re\xe7ues:",{basicInfo:s,fromCreateAccount:r}),console.log("[REGISTER] Location state:",t.state),console.log("[REGISTER] basicInfo.firstName:",null===s||void 0===s?void 0:s.firstName),console.log("[REGISTER] basicInfo.lastName:",null===s||void 0===s?void 0:s.lastName),console.log("[REGISTER] basicInfo.phoneNumber:",null===s||void 0===s?void 0:s.phoneNumber);const[a,o]=(0,n.useState)(5),[l,c]=(0,n.useState)({firstName:"",lastName:"",email:"",phone:"",password:"",confirmPassword:"",address:"",facebookName:"",filiere:"",anneeEtude:"",entite:"",userIdentityCard:null,temoinIdentityCard:null,studentCard:null,temoinName:"",temoinQuartier:"",temoinPhone:"",temoinEmail:"",emergencyName:"",emergencyRelation:"",emergencyPhone:"",emergencyEmail:"",emergencyAddress:""}),[u,h]=(0,n.useState)(!1),[m,p]=(0,n.useState)(!1),[f,g]=(0,n.useState)({}),{showSuccess:x,showError:v}=yt();(0,n.useEffect)(()=>{s&&r&&(console.log("[REGISTER] Pr\xe9-remplissage du formulaire avec:",s),c(e=>(0,d.A)((0,d.A)({},e),{},{firstName:s.firstName||"",lastName:s.lastName||"",email:s.email||"",phone:s.phoneNumber||"",password:s.password||"",confirmPassword:s.confirmPassword||"",address:s.address||"",facebookName:s.facebookName||""})))},[s,r]);const b=[{id:5,title:"Informations personnelles",icon:mi},{id:6,title:"Informations du t\xe9moin",icon:pf},{id:7,title:"Contact d'urgence",icon:vf},{id:8,title:"Validation",icon:mt.A}],y=e=>{c((0,d.A)((0,d.A)({},l),{},{[e.target.name]:e.target.value})),f[e.target.name]&&g((0,d.A)((0,d.A)({},f),{},{[e.target.name]:""}))},j=(e,t)=>{const s=e.target.files[0];s&&c((0,d.A)((0,d.A)({},l),{},{[t]:s}))},w=()=>{const e={};switch(a){case 5:l.firstName.trim()||(e.firstName="Le pr\xe9nom est requis"),l.lastName.trim()||(e.lastName="Le nom est requis"),l.address.trim()||(e.address="L'adresse est requise"),l.facebookName.trim()||(e.facebookName="Le nom du profil Facebook est requis"),l.filiere.trim()||(e.filiere="La fili\xe8re est requise"),l.anneeEtude.trim()||(e.anneeEtude="L'ann\xe9e d'\xe9tude est requise"),l.entite.trim()||(e.entite="L'entit\xe9 est requise"),l.email.trim()||(e.email="L'adresse email est requise"),l.email&&!(0,Dp.DT)(l.email)&&(e.email="Email invalide"),(0,Dp.FY)(l.phone)||(e.phone="Num\xe9ro de t\xe9l\xe9phone invalide"),l.password.length<6&&(e.password="Le mot de passe doit contenir au moins 6 caract\xe8res"),l.password!==l.confirmPassword&&(e.confirmPassword="Les mots de passe ne correspondent pas"),l.userIdentityCard||(e.userIdentityCard="La photo de votre carte d'identit\xe9 est requise"),l.studentCard||(e.studentCard="La photo de votre carte d'\xe9tudiant est requise");break;case 6:l.temoinName.trim()||(e.temoinName="Le nom du t\xe9moin est requis"),l.temoinQuartier.trim()||(e.temoinQuartier="Le quartier du t\xe9moin est requis"),(0,Dp.FY)(l.temoinPhone)||(e.temoinPhone="Num\xe9ro de t\xe9l\xe9phone invalide"),(0,Dp.DT)(l.temoinEmail)||(e.temoinEmail="Email invalide"),l.temoinIdentityCard||(e.temoinIdentityCard="La photo de la carte d'identit\xe9 du t\xe9moin est requise");break;case 7:l.emergencyName.trim()||(e.emergencyName="Le nom du contact d'urgence est requis"),l.emergencyRelation.trim()||(e.emergencyRelation="La relation est requise"),(0,Dp.FY)(l.emergencyPhone)||(e.emergencyPhone="Num\xe9ro de t\xe9l\xe9phone invalide"),(0,Dp.DT)(l.emergencyEmail)||(e.emergencyEmail="Email invalide"),l.emergencyAddress.trim()||(e.emergencyAddress="L'adresse est requise")}return g(e),0===Object.keys(e).length},N=()=>{a>5&&o(a-1)};return(0,i.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8 relative overflow-hidden",children:[(0,i.jsxs)("div",{className:"absolute inset-0 overflow-hidden",children:[(0,i.jsx)("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-gradient-to-br from-primary-400/20 to-secondary-400/20 rounded-full blur-3xl"}),(0,i.jsx)("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-gradient-to-tr from-accent-400/20 to-primary-400/20 rounded-full blur-3xl"})]}),(0,i.jsxs)("div",{className:"max-w-4xl w-full space-y-8 relative z-10",children:[(0,i.jsxs)("div",{className:"text-center mb-8 animate-fade-in-up",children:[(0,i.jsx)("div",{className:"flex justify-center mb-6",children:(0,i.jsx)("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-soft",children:(0,i.jsx)(wp,{size:"xl",showText:!0})})}),(0,i.jsx)("h1",{className:"text-4xl font-bold text-secondary-900 font-montserrat mb-3 bg-gradient-to-r from-primary-600 to-secondary-600 bg-clip-text text-transparent",children:"Cr\xe9er votre compte \xe9tudiant"}),(0,i.jsx)("p",{className:"text-lg text-neutral-600 font-montserrat max-w-2xl mx-auto",children:"Rejoignez la communaut\xe9 AB CAMPUS FINANCE et acc\xe9dez \xe0 nos services de pr\xeat \xe9tudiant"})]}),(0,i.jsx)("div",{className:"flex justify-center mb-8",children:(0,i.jsx)("div",{className:"flex items-center space-x-4 bg-white/80 backdrop-blur-sm rounded-2xl p-4 shadow-soft",children:b.map((e,t)=>(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("div",{className:"flex items-center justify-center w-10 h-10 rounded-full border-2 transition-all duration-300 ".concat(a>=e.id?"bg-primary-500 border-primary-500 text-white":"bg-white border-accent-300 text-neutral-400"),children:a>e.id?(0,i.jsx)(mt.A,{size:20,className:"text-white"}):(0,i.jsx)(e.icon,{size:20})}),t<b.length-1&&(0,i.jsx)("div",{className:"w-8 h-0.5 mx-2 transition-all duration-300 ".concat(a>e.id?"bg-primary-500":"bg-accent-300")})]},e.id))})}),(0,i.jsxs)("div",{className:"bg-white/90 backdrop-blur-sm rounded-3xl shadow-2xl border border-white/20 p-8 lg:p-12",children:[(0,i.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),w()){p(!0);try{var s,n,r,a;console.log("[REGISTER] Donn\xe9es pour inscription:",{phone:l.phone,firstName:l.firstName,lastName:l.lastName,email:l.email,address:l.address,facebookName:l.facebookName,filiere:l.filiere,anneeEtude:l.anneeEtude,entite:l.entite});const t=await(0,ct.dl)(l.phone,l.password,{firstName:l.firstName,lastName:l.lastName,email:l.email});if(console.log("[REGISTER] R\xe9sultat signUp:",t),!t.success||null===(s=t.user)||void 0===s||!s.id)throw console.error("[REGISTER] Erreur signUp:",t.error),new Error(t.error||"Cr\xe9ation du compte \xe9chou\xe9e");let i=null,o=null,c=null;if(l.userIdentityCard){console.log("[REGISTER] Upload carte d'identit\xe9 utilisateur...");const e=await zf(l.userIdentityCard,t.user.id,"user");e.success?(i=e.url,console.log("[REGISTER] \u2705 Carte d'identit\xe9 utilisateur upload\xe9e")):console.error("[REGISTER] \u274c Erreur upload carte d'identit\xe9 utilisateur:",e.error)}if(l.temoinIdentityCard){console.log("[REGISTER] Upload carte d'identit\xe9 t\xe9moin...");const e=await zf(l.temoinIdentityCard,t.user.id,"temoin");e.success?(o=e.url,console.log("[REGISTER] \u2705 Carte d'identit\xe9 t\xe9moin upload\xe9e")):console.error("[REGISTER] \u274c Erreur upload carte d'identit\xe9 t\xe9moin:",e.error)}if(l.studentCard){console.log("[REGISTER] Upload carte d'\xe9tudiant...");const e=await zf(l.studentCard,t.user.id,"student");e.success?(c=e.url,console.log("[REGISTER] \u2705 Carte d'\xe9tudiant upload\xe9e")):console.error("[REGISTER] \u274c Erreur upload carte d'\xe9tudiant:",e.error)}console.log("[REGISTER] Mise \xe0 jour du profil avec les donn\xe9es:",{address:l.address,filiere:l.filiere,annee_etude:l.anneeEtude,entite:l.entite,facebook_name:l.facebookName});const d=await(0,ct.eg)(t.user.id,{address:l.address,filiere:l.filiere,annee_etude:l.anneeEtude,entite:l.entite,facebook_name:l.facebookName,temoin_name:l.temoinName,temoin_quartier:l.temoinQuartier,temoin_phone:l.temoinPhone,temoin_email:l.temoinEmail,emergency_name:l.emergencyName,emergency_relation:l.emergencyRelation,emergency_phone:l.emergencyPhone,emergency_email:l.emergencyEmail,emergency_address:l.emergencyAddress,user_identity_card_url:i,temoin_identity_card_url:o,student_card_url:c,user_identity_card_name:(null===(n=l.userIdentityCard)||void 0===n?void 0:n.name)||null,temoin_identity_card_name:(null===(r=l.temoinIdentityCard)||void 0===r?void 0:r.name)||null,student_card_name:(null===(a=l.studentCard)||void 0===a?void 0:a.name)||null});if(console.log("[REGISTER] R\xe9sultat mise \xe0 jour profil:",d),!d.success)throw console.error("[REGISTER] Erreur mise \xe0 jour profil:",d.error),new Error("Erreur mise \xe0 jour profil: ".concat(d.error));x("Inscription compl\xe9t\xe9e ! Votre compte a \xe9t\xe9 cr\xe9\xe9 avec succ\xe8s."),e("/dashboard")}catch(i){console.error("[REGISTER] Erreur d\xe9taill\xe9e lors de l'inscription:",{message:i.message,stack:i.stack,error:i}),g({general:"Erreur lors de l'inscription: ".concat(i.message)}),v("Inscription \xe9chou\xe9e","Une erreur est survenue: ".concat(i.message))}finally{p(!1)}}},className:"space-y-8",children:[f.general&&(0,i.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-6 py-4 rounded-2xl font-montserrat animate-fade-in-up",children:f.general}),(()=>{switch(a){case 5:return(0,i.jsxs)("div",{className:"space-y-6 animate-fade-in-up",children:[r&&(0,i.jsx)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-6",children:(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)(mt.A,{size:20,className:"text-green-600 mr-3"}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h4",{className:"text-sm font-medium text-green-800",children:"Informations pr\xe9-remplies"}),(0,i.jsx)("p",{className:"text-sm text-green-700 mt-1",children:"Vos informations de base ont \xe9t\xe9 automatiquement remplies depuis la cr\xe9ation de votre compte."})]})]})}),(0,i.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[(0,i.jsx)("div",{className:"w-10 h-10 bg-primary-100 rounded-xl flex items-center justify-center",children:(0,i.jsx)(mi,{size:20,className:"text-primary-600"})}),(0,i.jsx)("h3",{className:"text-xl font-semibold text-secondary-900 font-montserrat",children:"Informations personnelles"})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,i.jsx)("div",{className:"relative group",children:(0,i.jsx)(Pf,{label:"Pr\xe9nom",type:"text",name:"firstName",value:l.firstName,onChange:y,placeholder:"Votre pr\xe9nom",error:f.firstName,required:!0,readOnly:r,className:"group-hover:shadow-md transition-all duration-300 ".concat(r?"bg-gray-50 cursor-not-allowed":"")})}),(0,i.jsx)("div",{className:"relative group",children:(0,i.jsx)(Pf,{label:"Nom",type:"text",name:"lastName",value:l.lastName,onChange:y,placeholder:"Votre nom",error:f.lastName,required:!0,readOnly:r,className:"group-hover:shadow-md transition-all duration-300 ".concat(r?"bg-gray-50 cursor-not-allowed":"")})})]}),(0,i.jsx)("div",{className:"relative group",children:(0,i.jsx)(Pf,{label:"Nom du profil Facebook",type:"text",name:"facebookName",value:l.facebookName,onChange:y,placeholder:"Votre nom de profil Facebook",error:f.facebookName,required:!0,readOnly:r,className:"group-hover:shadow-md transition-all duration-300 ".concat(r?"bg-gray-50 cursor-not-allowed":"")})}),(0,i.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:(0,i.jsxs)("div",{className:"relative group",children:[(0,i.jsx)(Pf,{label:"Adresse",type:"text",name:"address",value:l.address,onChange:y,placeholder:"Votre adresse compl\xe8te",error:f.address,required:!0,readOnly:r,className:"group-hover:shadow-md transition-all duration-300 ".concat(r?"bg-gray-50 cursor-not-allowed":"")}),(0,i.jsx)(Rf,{size:20,className:"absolute right-4 top-12 text-neutral-400 group-hover:text-primary-500 transition-colors duration-300"})]})}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,i.jsxs)("div",{className:"relative group",children:[(0,i.jsx)(Pf,{label:"Fili\xe8re",type:"text",name:"filiere",value:l.filiere,onChange:y,placeholder:"Ex: Informatique",error:f.filiere,required:!0,className:"group-hover:shadow-md transition-all duration-300"}),(0,i.jsx)(Df,{size:20,className:"absolute right-4 top-12 text-neutral-400 group-hover:text-primary-500 transition-colors duration-300"})]}),(0,i.jsx)("div",{className:"relative group",children:(0,i.jsx)(Pf,{label:"Ann\xe9e d'\xe9tude",type:"text",name:"anneeEtude",value:l.anneeEtude,onChange:y,placeholder:"Ex: 2\xe8me ann\xe9e",error:f.anneeEtude,required:!0,className:"group-hover:shadow-md transition-all duration-300"})}),(0,i.jsxs)("div",{className:"relative group",children:[(0,i.jsxs)("select",{name:"entite",value:l.entite,onChange:y,className:"w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-transparent font-montserrat transition-all duration-300 group-hover:shadow-md ".concat(f.entite?"border-red-300":"border-accent-200"),required:!0,children:[(0,i.jsx)("option",{value:"",children:"S\xe9lectionner une entit\xe9"}),(0,i.jsx)("option",{value:"INSTI",children:"INSTI"}),(0,i.jsx)("option",{value:"ENSET",children:"ENSET"})]}),(0,i.jsx)(Of,{size:20,className:"absolute right-4 top-12 text-neutral-400 group-hover:text-primary-500 transition-colors duration-300"}),f.entite&&(0,i.jsx)("p",{className:"text-red-500 text-sm mt-1 font-montserrat",children:f.entite})]})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,i.jsxs)("div",{className:"relative group",children:[(0,i.jsx)(Pf,{label:"Adresse email (optionnel)",type:"email",name:"email",value:l.email,onChange:y,placeholder:"votre@email.com (optionnel)",error:f.email,className:"group-hover:shadow-md transition-all duration-300"}),(0,i.jsx)(bf,{size:20,className:"absolute right-4 top-12 text-neutral-400 group-hover:text-primary-500 transition-colors duration-300"})]}),(0,i.jsxs)("div",{className:"relative group",children:[(0,i.jsx)(Pf,{label:"Num\xe9ro de t\xe9l\xe9phone",type:"tel",name:"phone",value:l.phone,onChange:y,placeholder:"+229 12345678",error:f.phone,required:!0,className:"group-hover:shadow-md transition-all duration-300"}),(0,i.jsx)(vf,{size:20,className:"absolute right-4 top-12 text-neutral-400 group-hover:text-primary-500 transition-colors duration-300"})]})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,i.jsxs)("div",{className:"relative group",children:[(0,i.jsx)(Pf,{label:"Mot de passe",type:u?"text":"password",name:"password",value:l.password,onChange:y,placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",error:f.password,required:!0,className:"group-hover:shadow-md transition-all duration-300"}),(0,i.jsx)("button",{type:"button",onClick:()=>h(!u),className:"absolute right-4 top-12 text-neutral-400 hover:text-primary-500 transition-colors duration-300",children:u?(0,i.jsx)(jf,{size:20}):(0,i.jsx)(wf,{size:20})})]}),(0,i.jsxs)("div",{className:"relative group",children:[(0,i.jsx)(Pf,{label:"Confirmer le mot de passe",type:"password",name:"confirmPassword",value:l.confirmPassword,onChange:y,placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",error:f.confirmPassword,required:!0,className:"group-hover:shadow-md transition-all duration-300"}),(0,i.jsx)(yf,{size:20,className:"absolute right-4 top-12 text-neutral-400 group-hover:text-primary-500 transition-colors duration-300"})]})]}),(0,i.jsxs)("div",{className:"group",children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-secondary-900 font-montserrat mb-3",children:"Photo de votre carte d'identit\xe9 *"}),(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsx)("input",{type:"file",accept:"image/*",onChange:e=>j(e,"userIdentityCard"),className:"hidden",id:"userIdentityCard",required:!0}),(0,i.jsx)("label",{htmlFor:"userIdentityCard",className:"flex items-center justify-center w-full px-6 py-8 border-2 border-dashed border-accent-300 rounded-2xl cursor-pointer hover:border-primary-500 hover:bg-primary-50/50 transition-all duration-300 group-hover:shadow-md",children:(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)(Lf,{size:32,className:"text-neutral-400 group-hover:text-primary-500 transition-colors duration-300 mx-auto mb-2"}),(0,i.jsx)("span",{className:"text-neutral-600 font-montserrat block",children:l.userIdentityCard?l.userIdentityCard.name:"Choisir une photo"}),(0,i.jsx)("span",{className:"text-sm text-neutral-400 font-montserrat",children:l.userIdentityCard?"Fichier s\xe9lectionn\xe9":"Cliquez pour s\xe9lectionner"})]})})]}),f.userIdentityCard&&(0,i.jsx)("p",{className:"text-red-500 text-sm mt-2 font-montserrat",children:f.userIdentityCard})]}),(0,i.jsxs)("div",{className:"group",children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-secondary-900 font-montserrat mb-3",children:"Photo de votre carte d'\xe9tudiant *"}),(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsx)("input",{type:"file",accept:"image/*",onChange:e=>j(e,"studentCard"),className:"hidden",id:"studentCard",required:!0}),(0,i.jsx)("label",{htmlFor:"studentCard",className:"flex items-center justify-center w-full px-6 py-8 border-2 border-dashed border-accent-300 rounded-2xl cursor-pointer hover:border-primary-500 hover:bg-primary-50/50 transition-all duration-300 group-hover:shadow-md",children:(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)(Lf,{size:32,className:"text-neutral-400 group-hover:text-primary-500 transition-colors duration-300 mx-auto mb-2"}),(0,i.jsx)("span",{className:"text-neutral-600 font-montserrat block",children:l.studentCard?l.studentCard.name:"Choisir une photo"}),(0,i.jsx)("span",{className:"text-sm text-neutral-400 font-montserrat",children:l.studentCard?"Fichier s\xe9lectionn\xe9":"Cliquez pour s\xe9lectionner"})]})})]}),f.studentCard&&(0,i.jsx)("p",{className:"text-red-500 text-sm mt-2 font-montserrat",children:f.studentCard})]})]});case 6:return(0,i.jsxs)("div",{className:"space-y-6 animate-fade-in-up",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[(0,i.jsx)("div",{className:"w-10 h-10 bg-secondary-100 rounded-xl flex items-center justify-center",children:(0,i.jsx)(pf,{size:20,className:"text-secondary-600"})}),(0,i.jsx)("h3",{className:"text-xl font-semibold text-secondary-900 font-montserrat",children:"Informations du t\xe9moin"})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,i.jsx)("div",{className:"relative group",children:(0,i.jsx)(Pf,{label:"Nom complet du t\xe9moin",type:"text",name:"temoinName",value:l.temoinName,onChange:y,placeholder:"Nom et pr\xe9nom du t\xe9moin",error:f.temoinName,required:!0,className:"group-hover:shadow-md transition-all duration-300"})}),(0,i.jsx)("div",{className:"relative group",children:(0,i.jsx)(Pf,{label:"Quartier du t\xe9moin",type:"text",name:"temoinQuartier",value:l.temoinQuartier,onChange:y,placeholder:"Ex: Akpakpa, Cotonou",error:f.temoinQuartier,required:!0,className:"group-hover:shadow-md transition-all duration-300"})})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,i.jsxs)("div",{className:"relative group",children:[(0,i.jsx)(Pf,{label:"T\xe9l\xe9phone du t\xe9moin",type:"tel",name:"temoinPhone",value:l.temoinPhone,onChange:y,placeholder:"+229 12345678",error:f.temoinPhone,required:!0,className:"group-hover:shadow-md transition-all duration-300"}),(0,i.jsx)(vf,{size:20,className:"absolute right-4 top-12 text-neutral-400 group-hover:text-primary-500 transition-colors duration-300"})]}),(0,i.jsxs)("div",{className:"relative group",children:[(0,i.jsx)(Pf,{label:"Email du t\xe9moin",type:"email",name:"temoinEmail",value:l.temoinEmail,onChange:y,placeholder:"temoins@email.com",error:f.temoinEmail,required:!0,className:"group-hover:shadow-md transition-all duration-300"}),(0,i.jsx)(bf,{size:20,className:"absolute right-4 top-12 text-neutral-400 group-hover:text-primary-500 transition-colors duration-300"})]})]}),(0,i.jsxs)("div",{className:"group",children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-secondary-900 font-montserrat mb-3",children:"Photo de la carte d'identit\xe9 du t\xe9moin *"}),(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsx)("input",{type:"file",accept:"image/*",onChange:e=>j(e,"temoinIdentityCard"),className:"hidden",id:"temoinIdentityCard",required:!0}),(0,i.jsx)("label",{htmlFor:"temoinIdentityCard",className:"flex items-center justify-center w-full px-6 py-8 border-2 border-dashed border-accent-300 rounded-2xl cursor-pointer hover:border-primary-500 hover:bg-primary-50/50 transition-all duration-300 group-hover:shadow-md",children:(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)(Lf,{size:32,className:"text-neutral-400 group-hover:text-primary-500 transition-colors duration-300 mx-auto mb-2"}),(0,i.jsx)("span",{className:"text-neutral-600 font-montserrat block",children:l.temoinIdentityCard?l.temoinIdentityCard.name:"Choisir une photo"}),(0,i.jsx)("span",{className:"text-sm text-neutral-400 font-montserrat",children:l.temoinIdentityCard?"Fichier s\xe9lectionn\xe9":"Cliquez pour s\xe9lectionner"})]})})]}),f.temoinIdentityCard&&(0,i.jsx)("p",{className:"text-red-500 text-sm mt-2 font-montserrat",children:f.temoinIdentityCard})]})]});case 7:return(0,i.jsxs)("div",{className:"space-y-6 animate-fade-in-up",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[(0,i.jsx)("div",{className:"w-10 h-10 bg-accent-100 rounded-xl flex items-center justify-center",children:(0,i.jsx)(vf,{size:20,className:"text-accent-600"})}),(0,i.jsx)("h3",{className:"text-xl font-semibold text-secondary-900 font-montserrat",children:"Contact d'urgence"})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,i.jsx)("div",{className:"relative group",children:(0,i.jsx)(Pf,{label:"Nom complet du contact",type:"text",name:"emergencyName",value:l.emergencyName,onChange:y,placeholder:"Nom et pr\xe9nom",error:f.emergencyName,required:!0,className:"group-hover:shadow-md transition-all duration-300"})}),(0,i.jsx)("div",{className:"relative group",children:(0,i.jsx)(Pf,{label:"Relation avec vous",type:"text",name:"emergencyRelation",value:l.emergencyRelation,onChange:y,placeholder:"Ex: Parent, Fr\xe8re, S\u0153ur",error:f.emergencyRelation,required:!0,className:"group-hover:shadow-md transition-all duration-300"})})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,i.jsxs)("div",{className:"relative group",children:[(0,i.jsx)(Pf,{label:"T\xe9l\xe9phone d'urgence",type:"tel",name:"emergencyPhone",value:l.emergencyPhone,onChange:y,placeholder:"+229 12345678",error:f.emergencyPhone,required:!0,className:"group-hover:shadow-md transition-all duration-300"}),(0,i.jsx)(vf,{size:20,className:"absolute right-4 top-12 text-neutral-400 group-hover:text-primary-500 transition-colors duration-300"})]}),(0,i.jsxs)("div",{className:"relative group",children:[(0,i.jsx)(Pf,{label:"Email d'urgence",type:"email",name:"emergencyEmail",value:l.emergencyEmail,onChange:y,placeholder:"contact@email.com",error:f.emergencyEmail,required:!0,className:"group-hover:shadow-md transition-all duration-300"}),(0,i.jsx)(bf,{size:20,className:"absolute right-4 top-12 text-neutral-400 group-hover:text-primary-500 transition-colors duration-300"})]})]}),(0,i.jsx)("div",{className:"relative group",children:(0,i.jsx)(Pf,{label:"Adresse compl\xe8te",type:"textarea",name:"emergencyAddress",value:l.emergencyAddress,onChange:y,placeholder:"Adresse compl\xe8te du contact d'urgence",error:f.emergencyAddress,required:!0,className:"group-hover:shadow-md transition-all duration-300"})})]});case 8:return(0,i.jsxs)("div",{className:"space-y-6 animate-fade-in-up",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[(0,i.jsx)("div",{className:"w-10 h-10 bg-green-100 rounded-xl flex items-center justify-center",children:(0,i.jsx)(mt.A,{size:20,className:"text-green-600"})}),(0,i.jsx)("h3",{className:"text-xl font-semibold text-secondary-900 font-montserrat",children:"Validation et cr\xe9ation du compte"})]}),(0,i.jsxs)("div",{className:"bg-accent-50 rounded-2xl p-6 space-y-4",children:[(0,i.jsx)("h4",{className:"font-semibold text-secondary-900 font-montserrat",children:"R\xe9capitulatif de vos informations :"}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"font-medium text-secondary-900",children:"Informations personnelles :"}),(0,i.jsxs)("p",{className:"text-neutral-600",children:[l.firstName," ",l.lastName]}),(0,i.jsxs)("p",{className:"text-neutral-600",children:["Facebook: ",l.facebookName]}),(0,i.jsxs)("p",{className:"text-neutral-600",children:[l.filiere," - ",l.anneeEtude]}),(0,i.jsx)("p",{className:"text-neutral-600",children:l.entite})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"font-medium text-secondary-900",children:"Contact :"}),(0,i.jsx)("p",{className:"text-neutral-600",children:l.email}),(0,i.jsx)("p",{className:"text-neutral-600",children:l.phone})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"font-medium text-secondary-900",children:"T\xe9moin :"}),(0,i.jsx)("p",{className:"text-neutral-600",children:l.temoinName}),(0,i.jsx)("p",{className:"text-neutral-600",children:l.temoinQuartier})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"font-medium text-secondary-900",children:"Contact d'urgence :"}),(0,i.jsx)("p",{className:"text-neutral-600",children:l.emergencyName}),(0,i.jsx)("p",{className:"text-neutral-600",children:l.emergencyRelation})]})]})]}),(0,i.jsx)("div",{className:"bg-blue-50 rounded-2xl p-6",children:(0,i.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,i.jsx)("div",{className:"w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:(0,i.jsx)("span",{className:"text-white text-xs font-bold",children:"i"})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"font-medium text-blue-900 font-montserrat",children:"Important :"}),(0,i.jsx)("p",{className:"text-blue-700 text-sm font-montserrat",children:"Apr\xe8s la cr\xe9ation de votre compte, vous recevrez un code OTP par email pour finaliser l'inscription."})]})]})})]});default:return null}})(),(0,i.jsx)("div",{className:"flex justify-between pt-6",children:a<8?(0,i.jsxs)(i.Fragment,{children:[a>5&&(0,i.jsxs)(Ef,{type:"button",onClick:N,className:"flex items-center space-x-2 bg-neutral-100 hover:bg-neutral-200 text-neutral-700 font-montserrat px-6 py-3 rounded-xl transition-all duration-300",children:[(0,i.jsx)(Mf.A,{size:20}),(0,i.jsx)("span",{children:"Pr\xe9c\xe9dent"})]}),(0,i.jsx)("div",{className:"flex-1"}),(0,i.jsxs)(Ef,{type:"button",onClick:()=>{w()&&o(a+1)},className:"flex items-center space-x-2 bg-gradient-to-r from-primary-500 to-primary-600 hover:from-primary-600 hover:to-primary-700 text-white font-montserrat px-6 py-3 rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-[1.02]",children:[(0,i.jsx)("span",{children:"Suivant"}),(0,i.jsx)(fi,{size:20})]})]}):(0,i.jsxs)("div",{className:"flex items-center space-x-4 w-full",children:[(0,i.jsxs)(Ef,{type:"button",onClick:N,className:"flex items-center space-x-2 bg-neutral-100 hover:bg-neutral-200 text-neutral-700 font-montserrat px-6 py-3 rounded-xl transition-all duration-300 text-sm",children:[(0,i.jsx)(Mf.A,{size:18}),(0,i.jsx)("span",{children:"Pr\xe9c\xe9dent"})]}),(0,i.jsx)("div",{className:"flex-1"}),(0,i.jsx)(If,{color:"#FF6B35",speed:"2s",thickness:3,className:"w-auto",children:(0,i.jsx)(Ef,{type:"submit",loading:m,className:"bg-gradient-to-r from-primary-500 to-primary-600 hover:from-primary-600 hover:to-primary-700 text-white font-montserrat px-6 py-3 rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-[1.02] text-sm",children:m?"Cr\xe9ation...":"Cr\xe9er mon compte"})})]})})]}),(0,i.jsx)("div",{className:"mt-8 text-center pt-6 border-t border-accent-200",children:(0,i.jsxs)("p",{className:"text-neutral-600 font-montserrat",children:["D\xe9j\xe0 un compte ?"," ",(0,i.jsx)(rt,{to:"/login",className:"text-primary-600 hover:text-primary-700 font-semibold transition-colors duration-300",children:"Se connecter"})]})})]})]})]})},Uf=e=>{let t=e;if(!e.startsWith("+229")){const s=e.replace(/[\s\-()]/g,"");if(s.startsWith("0"))t="+229"+s.substring(1);else if(s.startsWith("229"))t="+"+s;else{if(8!==s.length)return{valid:!1,error:"Format de num\xe9ro invalide"};t="+229"+s}}return/^\+229[0-9]{8}$/.test(t)?{valid:!0,formattedNumber:t}:{valid:!1,error:"Num\xe9ro de t\xe9l\xe9phone b\xe9ninois invalide"}},Bf=()=>{const e=(0,Ge.Zp)();yt();const[t,s]=(0,n.useState)(1),[r]=(0,n.useState)(!1),[a,o]=(0,n.useState)(!1),[l,c]=(0,n.useState)({}),[u,h]=(0,n.useState)({firstName:"",lastName:"",email:"",facebookName:"",phoneNumber:"",address:"",password:"",confirmPassword:""}),[,m]=(0,n.useState)(!1),p=[{id:1,title:"Informations de base",icon:mi},{id:2,title:"Confirmation",icon:mt.A},{id:3,title:"Inscription compl\xe8te",icon:vf}],f=e=>{const{name:t,value:s}=e.target;h(e=>(0,d.A)((0,d.A)({},e),{},{[t]:s})),l[t]&&c(e=>(0,d.A)((0,d.A)({},e),{},{[t]:""}))};return(0,i.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-primary-50 via-accent-50 to-secondary-50 flex items-center justify-center p-4",children:(0,i.jsxs)("div",{className:"w-full max-w-md",children:[(0,i.jsx)("div",{className:"text-center mb-8",children:(0,i.jsx)(wp,{})}),(0,i.jsxs)("div",{className:"mb-8",children:[(0,i.jsx)("div",{className:"flex items-center justify-between mb-4",children:p.map((e,s)=>(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ".concat(t>=e.id?"bg-primary-500 text-white":"bg-gray-200 text-gray-600"),children:t>e.id?(0,i.jsx)(mt.A,{size:16}):e.id}),s<p.length-1&&(0,i.jsx)("div",{className:"flex-1 h-1 mx-2 ".concat(t>e.id?"bg-primary-500":"bg-gray-200")})]},e.id))}),(0,i.jsxs)("p",{className:"text-sm text-gray-600",children:["\xc9tape ",t," sur ",p.length," : ",p[t-1].title]})]}),(0,i.jsx)("div",{className:"bg-white rounded-2xl shadow-soft p-6 mb-6",children:(0,i.jsx)(cf,{mode:"wait",children:(()=>{switch(t){case 1:return(0,i.jsxs)(yp.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-6",children:[(0,i.jsxs)("div",{className:"text-center mb-8",children:[(0,i.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Cr\xe9er votre compte"}),(0,i.jsx)("p",{className:"text-gray-600",children:"Commen\xe7ons par vos informations de base"})]}),(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,i.jsx)(Pf,{label:"Pr\xe9nom",name:"firstName",value:u.firstName,onChange:f,error:l.firstName,icon:mi}),(0,i.jsx)(Pf,{label:"Nom",name:"lastName",value:u.lastName,onChange:f,error:l.lastName,icon:mi})]}),(0,i.jsx)(Pf,{label:"Adresse email",type:"email",name:"email",value:u.email,onChange:f,error:l.email,icon:bf,placeholder:"votre@email.com"}),(0,i.jsx)(Pf,{label:"Nom du profil Facebook",name:"facebookName",value:u.facebookName,onChange:f,error:l.facebookName,icon:mi,placeholder:"Votre nom de profil Facebook"}),(0,i.jsx)(Pf,{label:"Num\xe9ro de t\xe9l\xe9phone",type:"tel",name:"phoneNumber",value:u.phoneNumber,onChange:f,error:l.phoneNumber,icon:vf,placeholder:"Ex: 53448573"}),(0,i.jsx)(Pf,{label:"Adresse",name:"address",value:u.address,onChange:f,error:l.address,icon:Rf,placeholder:"Votre adresse compl\xe8te"}),(0,i.jsx)(Pf,{label:"Mot de passe",type:a?"text":"password",name:"password",value:u.password,onChange:f,error:l.password,icon:a?jf:wf,onIconClick:()=>o(!a)}),(0,i.jsx)(Pf,{label:"Confirmer le mot de passe",type:a?"text":"password",name:"confirmPassword",value:u.confirmPassword,onChange:f,error:l.confirmPassword,icon:a?jf:wf,onIconClick:()=>o(!a)})]})]});case 2:return(0,i.jsxs)(yp.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-6",children:[(0,i.jsxs)("div",{className:"text-center mb-8",children:[(0,i.jsx)("div",{className:"w-16 h-16 bg-primary-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,i.jsx)(mt.A,{size:24,className:"text-primary-600"})}),(0,i.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Confirmation"}),(0,i.jsx)("p",{className:"text-gray-600",children:"V\xe9rifiez vos informations avant de continuer"})]}),(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,i.jsx)("h3",{className:"font-semibold text-gray-900 mb-3",children:"Informations personnelles"}),(0,i.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,i.jsxs)("p",{children:[(0,i.jsx)("span",{className:"font-medium",children:"Nom complet:"})," ",u.firstName," ",u.lastName]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("span",{className:"font-medium",children:"Email:"})," ",u.email]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("span",{className:"font-medium",children:"Nom Facebook:"})," ",u.facebookName]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("span",{className:"font-medium",children:"T\xe9l\xe9phone:"})," ",u.phoneNumber]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("span",{className:"font-medium",children:"Adresse:"})," ",u.address]})]})]}),(0,i.jsx)("div",{className:"text-center",children:(0,i.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"En continuant, vous acceptez nos conditions d'utilisation et notre politique de confidentialit\xe9."})})]})]});case 3:return(0,i.jsxs)(yp.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"text-center space-y-6",children:[(0,i.jsx)(yp.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring",stiffness:200},className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto",children:(0,i.jsx)(mt.A,{size:32,className:"text-green-600"})}),(0,i.jsx)("div",{children:(0,i.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Compte cr\xe9\xe9 avec succ\xe8s !"})})]});default:return null}})()})}),(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[t>1&&(0,i.jsxs)(Ef,{onClick:()=>{t>1&&s(t-1)},variant:"outline",className:"flex items-center space-x-2",children:[(0,i.jsx)(Mf.A,{size:16}),(0,i.jsx)("span",{children:"Pr\xe9c\xe9dent"})]}),t<=p.length&&(0,i.jsxs)(Ef,{onClick:()=>{1===t?(()=>{const e={};u.firstName.trim()||(e.firstName="Le pr\xe9nom est requis"),u.lastName.trim()||(e.lastName="Le nom est requis"),u.address.trim()||(e.address="L'adresse est requise"),u.email.trim()?(0,Dp.DT)(u.email)||(e.email="Email invalide"):e.email="L'adresse email est requise",u.facebookName.trim()||(e.facebookName="Le nom du profil Facebook est requis");const t=Uf(u.phoneNumber);return t.valid||(e.phoneNumber=t.error),u.password.length<6&&(e.password="Le mot de passe doit contenir au moins 6 caract\xe8res"),u.password!==u.confirmPassword&&(e.confirmPassword="Les mots de passe ne correspondent pas"),c(e),0===Object.keys(e).length})()&&s(2):2===t?(m(!0),setTimeout(()=>{s(3)},2e3)):3===t&&setTimeout(()=>{console.log("[CREATEACCOUNT] Donn\xe9es transmises:",u),e("/register",{state:{basicInfo:{firstName:u.firstName,lastName:u.lastName,email:u.email,facebookName:u.facebookName,phoneNumber:u.phoneNumber,address:u.address,password:u.password,confirmPassword:u.confirmPassword},fromCreateAccount:!0}})},3e3)},disabled:r,className:"flex items-center space-x-2 ml-auto",children:[(0,i.jsx)("span",{children:1===t||2===t?"Continuer":3===t?"Continuer vers l'inscription compl\xe8te":"Suivant"}),(0,i.jsx)(fi,{size:16})]})]}),(0,i.jsx)("div",{className:"text-center mt-6",children:(0,i.jsxs)("p",{className:"text-sm text-gray-600",children:["D\xe9j\xe0 un compte ?"," ",(0,i.jsx)("button",{onClick:()=>e("/login"),className:"text-primary-600 hover:text-primary-700 font-medium",children:"Se connecter"})]})})]})})},qf=()=>(0,i.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-primary-50 to-secondary-50 flex items-center justify-center p-4",children:(0,i.jsxs)(yp.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"w-full max-w-md",children:[(0,i.jsx)("div",{className:"text-center mb-8",children:(0,i.jsx)(wp,{className:"mx-auto mb-4"})}),(0,i.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8 border border-gray-100",children:[(0,i.jsxs)("div",{className:"text-center mb-6",children:[(0,i.jsx)("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,i.jsx)(mt.A,{className:"w-8 h-8 text-green-600"})}),(0,i.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Inscription r\xe9ussie !"}),(0,i.jsx)("p",{className:"text-gray-600",children:"Votre compte a \xe9t\xe9 cr\xe9\xe9 avec succ\xe8s"})]}),(0,i.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-xl p-4 mb-6",children:(0,i.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,i.jsx)(kp,{className:"w-5 h-5 text-yellow-600"}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{className:"font-semibold text-yellow-800",children:"En attente d'approbation"}),(0,i.jsx)("p",{className:"text-sm text-yellow-700",children:"Votre compte sera activ\xe9 sous 24-48h"})]})]})}),(0,i.jsxs)("div",{className:"space-y-4 mb-6",children:[(0,i.jsx)("h3",{className:"font-semibold text-gray-900 mb-3",children:"Prochaines \xe9tapes :"}),(0,i.jsxs)("div",{className:"space-y-3",children:[(0,i.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,i.jsx)("div",{className:"w-6 h-6 bg-primary-100 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:(0,i.jsx)("span",{className:"text-xs font-semibold text-primary-600",children:"1"})}),(0,i.jsx)("div",{children:(0,i.jsxs)("p",{className:"text-sm text-gray-700",children:[(0,i.jsx)("strong",{children:"V\xe9rification des documents"})," - Nous v\xe9rifions vos informations"]})})]}),(0,i.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,i.jsx)("div",{className:"w-6 h-6 bg-primary-100 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:(0,i.jsx)("span",{className:"text-xs font-semibold text-primary-600",children:"2"})}),(0,i.jsx)("div",{children:(0,i.jsxs)("p",{className:"text-sm text-gray-700",children:[(0,i.jsx)("strong",{children:"Notification par SMS/Email"})," - Vous recevrez une confirmation"]})})]}),(0,i.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,i.jsx)("div",{className:"w-6 h-6 bg-primary-100 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:(0,i.jsx)("span",{className:"text-xs font-semibold text-primary-600",children:"3"})}),(0,i.jsx)("div",{children:(0,i.jsxs)("p",{className:"text-sm text-gray-700",children:[(0,i.jsx)("strong",{children:"Acc\xe8s \xe0 votre compte"})," - Vous pourrez vous connecter"]})})]})]})]}),(0,i.jsxs)("div",{className:"bg-gray-50 rounded-xl p-4 mb-6",children:[(0,i.jsx)("h3",{className:"font-semibold text-gray-900 mb-3",children:"Besoin d'aide ?"}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,i.jsx)(vf,{className:"w-4 h-4 text-gray-500"}),(0,i.jsx)("span",{className:"text-sm text-gray-600",children:"+229 90 00 00 00"})]}),(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,i.jsx)(bf,{className:"w-4 h-4 text-gray-500"}),(0,i.jsx)("span",{className:"text-sm text-gray-600",children:"support@abpret.com"})]})]})]}),(0,i.jsxs)("div",{className:"space-y-3",children:[(0,i.jsx)(Ef,{onClick:()=>window.location.href="/",className:"w-full",variant:"primary",children:"Retour \xe0 l'accueil"}),(0,i.jsx)(rt,{to:"/login",children:(0,i.jsxs)(Ef,{className:"w-full",variant:"outline",children:[(0,i.jsx)(Mf.A,{className:"w-4 h-4 mr-2"}),"Aller \xe0 la connexion"]})})]})]}),(0,i.jsxs)("div",{className:"text-center mt-6",children:[(0,i.jsx)("p",{className:"text-sm text-gray-500",children:"\xa9 2025 AB CAMPUS FINANCE. Tous droits r\xe9serv\xe9s."}),(0,i.jsx)("p",{className:"text-sm text-primary-600 font-semibold mt-1",children:"Made in B\xe9nin \ud83c\udde7\ud83c\uddef"})]})]})}),Vf=(0,pt.A)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),Hf=()=>{const[e,t]=(0,n.useState)(""),[s,r]=(0,n.useState)("idle"),[a,o]=(0,n.useState)(""),l=(0,Ge.Zp)(),c=async t=>{if(t.preventDefault(),!e)return o("Veuillez entrer votre adresse email"),void r("error");if(!e.includes("@"))return o("Veuillez entrer une adresse email valide"),void r("error");r("loading"),o("");try{const{error:t}=await lt.ND.auth.resetPasswordForEmail(e,{redirectTo:"".concat(window.location.origin,"/reset-password")});if(t)return console.error("[FORGOT_PASSWORD] Erreur Supabase:",t),r("error"),void o("Une erreur est survenue. Veuillez r\xe9essayer.");r("success")}catch(s){console.error("[FORGOT_PASSWORD] Erreur g\xe9n\xe9rale:",s),r("error"),o("Une erreur est survenue. Veuillez r\xe9essayer.")}},d=()=>{l("/login")};return"success"===s?(0,i.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-100 to-blue-50 flex items-center justify-center p-4",children:[(0,i.jsx)("div",{className:"absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZGVmcz48cGF0dGVybiBpZD0iZ3JpZCIgd2lkdGg9IjQwIiBoZWlnaHQ9IjQwIiBwYXR0ZXJuVW5pdHM9InVzZXJTcGFjZU9uVXNlIj48cGF0aCBkPSJNIDQwIDAgTCAwIDAgMCA0MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJyZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMDMpIiBzdHJva2Utd2lkdGg9IjEiLz48L3BhdHRlcm4+PC9kZWZzPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9InVybCgjZ3JpZCkiLz48L3N2Zz4=')] opacity-30"}),(0,i.jsx)("div",{className:"relative max-w-md w-full",children:(0,i.jsx)("div",{className:"bg-white/80 backdrop-blur-xl rounded-3xl p-8 border border-blue-200/50 shadow-2xl animate-in fade-in-0 zoom-in-95 duration-500",children:(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("div",{className:"mx-auto w-16 h-16 bg-gradient-to-r from-green-500 to-emerald-600 rounded-full flex items-center justify-center mb-6",children:(0,i.jsx)(mt.A,{className:"w-8 h-8 text-white"})}),(0,i.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Email envoy\xe9 !"}),(0,i.jsxs)("p",{className:"text-gray-600 mb-8 leading-relaxed",children:["Nous avons envoy\xe9 un lien de r\xe9initialisation \xe0"," ",(0,i.jsx)("span",{className:"font-semibold text-blue-600",children:e}),(0,i.jsx)("br",{}),"V\xe9rifiez votre bo\xeete mail et suivez les instructions."]}),(0,i.jsxs)("button",{onClick:d,className:"group flex items-center justify-center w-full bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white font-semibold py-4 px-6 rounded-xl transition-all duration-300 transform hover:scale-105 hover:shadow-lg",children:[(0,i.jsx)(Mf.A,{className:"w-5 h-5 mr-2 transition-transform group-hover:-translate-x-1"}),"Retour \xe0 la connexion"]})]})})})]}):(0,i.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-100 to-blue-50 flex items-center justify-center p-4",children:[(0,i.jsx)("div",{className:"absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZGVmcz48cGF0dGVybiBpZD0iZ3JpZCIgd2lkdGg9IjQwIiBoZWlnaHQ9IjQwIiBwYXR0ZXJuVW5pdHM9InVzZXJTcGFjZU9uVXNlIj48cGF0aCBkPSJNIDQwIDAgTCAwIDAgMCA0MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJyZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMDMpIiBzdHJva2Utd2lkdGg9IjEiLz48L3BhdHRlcm4+PC9kZWZzPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9InVybCgjZ3JpZCkiLz48L3N2Zz4=')] opacity-30"}),(0,i.jsx)("div",{className:"absolute top-20 left-20 w-32 h-32 bg-blue-500/20 rounded-full blur-xl animate-pulse"}),(0,i.jsx)("div",{className:"absolute bottom-20 right-20 w-40 h-40 bg-indigo-500/20 rounded-full blur-xl animate-pulse delay-1000"}),(0,i.jsx)("div",{className:"absolute top-1/2 left-10 w-24 h-24 bg-cyan-500/20 rounded-full blur-xl animate-pulse delay-500"}),(0,i.jsxs)("div",{className:"relative max-w-md w-full",children:[(0,i.jsxs)("div",{className:"bg-white/80 backdrop-blur-xl rounded-3xl p-8 border border-blue-200/50 shadow-2xl animate-in fade-in-0 slide-in-from-bottom-4 duration-700",children:[(0,i.jsxs)("div",{className:"text-center mb-8",children:[(0,i.jsx)("div",{className:"mx-auto w-16 h-16 bg-gradient-to-r from-blue-600 to-indigo-600 rounded-full flex items-center justify-center mb-6 animate-pulse",children:(0,i.jsx)(bf,{className:"w-8 h-8 text-white"})}),(0,i.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Mot de passe oubli\xe9 ?"}),(0,i.jsx)("p",{className:"text-gray-600 leading-relaxed",children:"Pas de souci ! Entrez votre adresse email et nous vous enverrons un lien pour r\xe9initialiser votre mot de passe."})]}),(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Adresse email"}),(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsx)("input",{id:"email",type:"email",value:e,onChange:e=>{t(e.target.value),"error"===s&&(r("idle"),o(""))},className:"w-full px-4 py-4 pl-12 bg-white/50 border border-blue-200/50 rounded-xl text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300 backdrop-blur-sm",placeholder:"votre@email.com",disabled:"loading"===s}),(0,i.jsx)(bf,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-500 w-5 h-5"})]})]}),"error"===s&&(0,i.jsxs)("div",{className:"flex items-center space-x-3 p-4 bg-red-50 border border-red-200 rounded-xl animate-in fade-in-0 slide-in-from-top-2 duration-300",children:[(0,i.jsx)(ft,{className:"w-5 h-5 text-red-500 flex-shrink-0"}),(0,i.jsx)("p",{className:"text-red-700 text-sm",children:a})]}),(0,i.jsxs)("button",{onClick:c,disabled:"loading"===s,className:"group relative w-full bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 disabled:from-gray-400 disabled:to-gray-500 text-white font-semibold py-4 px-6 rounded-xl transition-all duration-300 transform hover:scale-105 hover:shadow-lg disabled:scale-100 disabled:shadow-none overflow-hidden",children:[(0,i.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-white/0 via-white/20 to-white/0 transform -skew-x-12 -translate-x-full group-hover:translate-x-full transition-transform duration-1000"}),(0,i.jsx)("div",{className:"relative flex items-center justify-center",children:"loading"===s?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Vf,{className:"w-5 h-5 mr-2 animate-spin"}),"Envoi en cours..."]}):"Envoyer le lien de r\xe9initialisation"})]}),(0,i.jsx)("div",{className:"text-center pt-4",children:(0,i.jsxs)("button",{onClick:d,className:"group text-gray-600 hover:text-blue-600 font-medium transition-colors duration-200 flex items-center justify-center mx-auto",children:[(0,i.jsx)(Mf.A,{className:"w-4 h-4 mr-2 transition-transform group-hover:-translate-x-1"}),"Retour \xe0 la connexion"]})})]})]}),(0,i.jsx)("div",{className:"text-center mt-6",children:(0,i.jsxs)("p",{className:"text-gray-500 text-sm",children:["Vous n'avez pas re\xe7u l'email ? V\xe9rifiez vos spams ou"," ",(0,i.jsx)("button",{onClick:()=>{e&&"loading"!==s&&c({preventDefault:()=>{}})},className:"text-blue-600 hover:text-blue-700 font-medium transition-colors duration-200",children:"renvoyez-le"})]})})]})]})},Wf=()=>{const[e,t]=(0,n.useState)(""),[s,r]=(0,n.useState)(""),[a,o]=(0,n.useState)(!1),[l,c]=(0,n.useState)(!1),[d,u]=(0,n.useState)("idle"),[h,m]=(0,n.useState)(""),[p]=ot(),f=(0,Ge.Zp)();(0,n.useEffect)(()=>{const e=p.get("access_token"),t=p.get("refresh_token");e&&t||(u("error"),m("Lien de r\xe9initialisation invalide ou expir\xe9."))},[p]);return"success"===d?(0,i.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-100 to-blue-50 flex items-center justify-center p-4",children:[(0,i.jsx)("div",{className:"absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZGVmcz48cGF0dGVybiBpZD0iZ3JpZCIgd2lkdGg9IjQwIiBoZWlnaHQ9IjQwIiBwYXR0ZXJuVW5pdHM9InVzZXJTcGFjZU9uVXNlIj48cGF0aCBkPSJNIDQwIDAgTCAwIDAgMCA0MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJyZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMDMpIiBzdHJva2Utd2lkdGg9IjEiLz48L3BhdHRlcm4+PC9kZWZzPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9InVybCgjZ3JpZCkiLz48L3N2Zz4=')] opacity-30"}),(0,i.jsx)("div",{className:"relative max-w-md w-full",children:(0,i.jsx)("div",{className:"bg-white/80 backdrop-blur-xl rounded-3xl p-8 border border-blue-200/50 shadow-2xl animate-in fade-in-0 zoom-in-95 duration-500",children:(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("div",{className:"mx-auto w-16 h-16 bg-gradient-to-r from-green-500 to-emerald-600 rounded-full flex items-center justify-center mb-6",children:(0,i.jsx)(mt.A,{className:"w-8 h-8 text-white"})}),(0,i.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Mot de passe mis \xe0 jour !"}),(0,i.jsxs)("p",{className:"text-gray-600 mb-8 leading-relaxed",children:["Votre mot de passe a \xe9t\xe9 r\xe9initialis\xe9 avec succ\xe8s.",(0,i.jsx)("br",{}),"Vous allez \xeatre redirig\xe9 vers la page de connexion..."]}),(0,i.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2 mb-4",children:(0,i.jsx)("div",{className:"bg-gradient-to-r from-green-500 to-emerald-600 h-2 rounded-full animate-pulse",style:{width:"100%"}})})]})})})]}):(0,i.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-100 to-blue-50 flex items-center justify-center p-4",children:[(0,i.jsx)("div",{className:"absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZGVmcz48cGF0dGVybiBpZD0iZ3JpZCIgd2lkdGg9IjQwIiBoZWlnaHQ9IjQwIiBwYXR0ZXJuVW5pdHM9InVzZXJTcGFjZU9uVXNlIj48cGF0aCBkPSJNIDQwIDAgTCAwIDAgMCA0MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJyZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMDMpIiBzdHJva2Utd2lkdGg9IjEiLz48L3BhdHRlcm4+PC9kZWZzPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9InVybCgjZ3JpZCkiLz48L3N2Zz4=')] opacity-30"}),(0,i.jsx)("div",{className:"absolute top-20 left-20 w-32 h-32 bg-blue-500/20 rounded-full blur-xl animate-pulse"}),(0,i.jsx)("div",{className:"absolute bottom-20 right-20 w-40 h-40 bg-indigo-500/20 rounded-full blur-xl animate-pulse delay-1000"}),(0,i.jsx)("div",{className:"absolute top-1/2 left-10 w-24 h-24 bg-cyan-500/20 rounded-full blur-xl animate-pulse delay-500"}),(0,i.jsx)("div",{className:"relative max-w-md w-full",children:(0,i.jsxs)("div",{className:"bg-white/80 backdrop-blur-xl rounded-3xl p-8 border border-blue-200/50 shadow-2xl animate-in fade-in-0 slide-in-from-bottom-4 duration-700",children:[(0,i.jsxs)("div",{className:"text-center mb-8",children:[(0,i.jsx)("div",{className:"mx-auto w-16 h-16 bg-gradient-to-r from-blue-600 to-indigo-600 rounded-full flex items-center justify-center mb-6 animate-pulse",children:(0,i.jsx)(yf,{className:"w-8 h-8 text-white"})}),(0,i.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Nouveau mot de passe"}),(0,i.jsx)("p",{className:"text-gray-600 leading-relaxed",children:"Entrez votre nouveau mot de passe pour finaliser la r\xe9initialisation."})]}),(0,i.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),!e)return m("Veuillez entrer un mot de passe"),void u("error");if(!s)return m("Veuillez confirmer votre mot de passe"),void u("error");if(e!==s)return m("Les mots de passe ne correspondent pas"),void u("error");const n=(e=>e.length<6?"Le mot de passe doit contenir au moins 6 caract\xe8res":null)(e);if(n)return m(n),void u("error");u("loading"),m("");try{const{error:t}=await lt.ND.auth.updateUser({password:e});if(t)return console.error("[RESET_PASSWORD] Erreur Supabase:",t),u("error"),void m("Une erreur est survenue. Veuillez r\xe9essayer.");u("success"),setTimeout(()=>{f("/login")},3e3)}catch(r){console.error("[RESET_PASSWORD] Erreur g\xe9n\xe9rale:",r),u("error"),m("Une erreur est survenue. Veuillez r\xe9essayer.")}},className:"space-y-6",children:[(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Nouveau mot de passe"}),(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsx)("input",{id:"password",type:a?"text":"password",value:e,onChange:e=>{t(e.target.value),"error"===d&&(u("idle"),m(""))},className:"w-full px-4 py-4 pl-12 pr-12 bg-white/50 border border-blue-200/50 rounded-xl text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300 backdrop-blur-sm",placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",disabled:"loading"===d,required:!0}),(0,i.jsx)(yf,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-500 w-5 h-5"}),(0,i.jsx)("button",{type:"button",onClick:()=>o(!a),className:"absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700 transition-colors",children:a?(0,i.jsx)(jf,{size:20}):(0,i.jsx)(wf,{size:20})})]})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700",children:"Confirmer le mot de passe"}),(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsx)("input",{id:"confirmPassword",type:l?"text":"password",value:s,onChange:e=>{r(e.target.value),"error"===d&&(u("idle"),m(""))},className:"w-full px-4 py-4 pl-12 pr-12 bg-white/50 border border-blue-200/50 rounded-xl text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300 backdrop-blur-sm",placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",disabled:"loading"===d,required:!0}),(0,i.jsx)(yf,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-500 w-5 h-5"}),(0,i.jsx)("button",{type:"button",onClick:()=>c(!l),className:"absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700 transition-colors",children:l?(0,i.jsx)(jf,{size:20}):(0,i.jsx)(wf,{size:20})})]})]}),"error"===d&&(0,i.jsxs)("div",{className:"flex items-center space-x-3 p-4 bg-red-50 border border-red-200 rounded-xl animate-in fade-in-0 slide-in-from-top-2 duration-300",children:[(0,i.jsx)(ft,{className:"w-5 h-5 text-red-500 flex-shrink-0"}),(0,i.jsx)("p",{className:"text-red-700 text-sm",children:h})]}),(0,i.jsxs)("button",{type:"submit",disabled:"loading"===d,className:"group relative w-full bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 disabled:from-gray-400 disabled:to-gray-500 text-white font-semibold py-4 px-6 rounded-xl transition-all duration-300 transform hover:scale-105 hover:shadow-lg disabled:scale-100 disabled:shadow-none overflow-hidden",children:[(0,i.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-white/0 via-white/20 to-white/0 transform -skew-x-12 -translate-x-full group-hover:translate-x-full transition-transform duration-1000"}),(0,i.jsx)("div",{className:"relative flex items-center justify-center",children:"loading"===d?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Vf,{className:"w-5 h-5 mr-2 animate-spin"}),"Mise \xe0 jour en cours..."]}):"Mettre \xe0 jour le mot de passe"})]})]})]})})]})},Gf=(0,pt.A)("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]]),Kf=()=>{const[e,t]=(0,n.useState)(!1),s=[{name:"WhatsApp",icon:(0,i.jsx)("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24",children:(0,i.jsx)("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"})}),url:"https://wa.me/22953463606",color:"bg-green-500 hover:bg-green-600",description:"+229 53 46 36 06"},{name:"Facebook",icon:(0,i.jsx)("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24",children:(0,i.jsx)("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})}),url:"https://www.facebook.com/abpret.2024",color:"bg-blue-600 hover:bg-blue-700",description:"AB Campus Finance"},{name:"Email",icon:(0,i.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),url:"mailto:abpret51@gmail.com",color:"bg-gray-600 hover:bg-gray-700",description:"abpret51@gmail.com"}];return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("button",{onClick:()=>t(!e),className:"fixed bottom-28 right-6 z-40 p-4 bg-primary-500 hover:bg-primary-600 text-white rounded-full shadow-lg transition-all duration-300 transform hover:scale-110 focus:outline-none focus:ring-4 focus:ring-primary-300","aria-label":"Nous contacter",children:e?(0,i.jsx)(xt,{size:24}):(0,i.jsx)(Gf,{size:24})}),e&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"fixed inset-0 z-30",onClick:()=>t(!1)}),(0,i.jsxs)("div",{className:"fixed bottom-44 right-6 z-40 w-80 bg-white rounded-2xl shadow-2xl border border-gray-200 overflow-hidden animate-slide-up",children:[(0,i.jsx)("div",{className:"bg-gradient-to-r from-primary-500 to-primary-600 p-4 text-white",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{className:"text-lg font-bold font-montserrat",children:"Nous contacter"}),(0,i.jsx)("p",{className:"text-sm text-primary-100",children:"Choisissez votre canal pr\xe9f\xe9r\xe9"})]}),(0,i.jsx)("button",{onClick:()=>t(!1),className:"p-1 hover:bg-white/20 rounded-full transition-colors",children:(0,i.jsx)(xt,{size:20})})]})}),(0,i.jsx)("div",{className:"p-4 space-y-3",children:s.map(e=>(0,i.jsxs)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",onClick:()=>t(!1),className:"flex items-center space-x-4 p-4 rounded-xl ".concat(e.color," text-white transition-all duration-200 transform hover:scale-105 hover:shadow-lg"),children:[(0,i.jsx)("div",{className:"flex-shrink-0",children:e.icon}),(0,i.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,i.jsx)("p",{className:"font-semibold font-montserrat",children:e.name}),(0,i.jsx)("p",{className:"text-sm opacity-90 truncate",children:e.description})]}),(0,i.jsx)("svg",{className:"w-5 h-5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]},e.name))}),(0,i.jsx)("div",{className:"bg-gray-50 px-4 py-3 border-t border-gray-200",children:(0,i.jsx)("p",{className:"text-xs text-gray-600 text-center font-montserrat",children:"Nous sommes disponibles pour vous aider"})})]})]}),(0,i.jsx)("style",{jsx:!0,children:"\n        @keyframes slide-up {\n          from {\n            opacity: 0;\n            transform: translateY(20px);\n          }\n          to {\n            opacity: 1;\n            transform: translateY(0);\n          }\n        }\n\n        .animate-slide-up {\n          animation: slide-up 0.3s ease-out;\n        }\n      "})]})},Zf=(0,pt.A)("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]),Jf=(0,pt.A)("Gift",[["polyline",{points:"20 12 20 22 4 22 4 12",key:"nda8fc"}],["rect",{width:"20",height:"5",x:"2",y:"7",key:"wkgdzj"}],["line",{x1:"12",x2:"12",y1:"22",y2:"7",key:"1n8zgp"}],["path",{d:"M12 7H7.5a2.5 2.5 0 0 1 0-5C11 2 12 7 12 7z",key:"zighg4"}],["path",{d:"M12 7h4.5a2.5 2.5 0 0 0 0-5C13 2 12 7 12 7z",key:"1pa5tk"}]]),Qf=e=>{let{isOpen:t,onClose:s,userName:n,onViewBenefits:r,onContactAdmin:a}=e;if(!t)return null;return(0,i.jsx)(cf,{children:t&&(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(yp.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:s,children:(0,i.jsxs)(yp.div,{initial:{scale:.9,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:20},transition:{type:"spring",damping:25,stiffness:300},className:"bg-white rounded-3xl shadow-2xl max-w-md w-full overflow-hidden",onClick:e=>e.stopPropagation(),children:[(0,i.jsxs)("div",{className:"relative bg-gradient-to-br from-purple-600 via-pink-600 to-orange-500 p-6 pb-8",children:[(0,i.jsx)("button",{onClick:s,className:"absolute top-4 right-4 p-2 bg-white/20 hover:bg-white/30 rounded-full transition-colors","aria-label":"Fermer",children:(0,i.jsx)(xt,{size:20,className:"text-white"})}),(0,i.jsx)("div",{className:"flex justify-center mb-4",children:(0,i.jsxs)(yp.div,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{delay:.2,type:"spring",stiffness:200},className:"relative",children:[(0,i.jsx)("div",{className:"p-4 bg-white/20 backdrop-blur-sm rounded-full",children:(0,i.jsx)(Zf,{size:64,className:"text-white"})}),(0,i.jsx)(yp.div,{animate:{rotate:360},transition:{duration:20,repeat:1/0,ease:"linear"},className:"absolute -top-2 -right-2",children:(0,i.jsx)(ri,{size:32,className:"text-yellow-300"})})]})}),(0,i.jsx)("h2",{className:"text-3xl font-bold text-white text-center mb-2 font-montserrat",children:"F\xe9licitations !"}),(0,i.jsx)("p",{className:"text-white/90 text-center text-lg font-montserrat",children:n||"Cher client"})]}),(0,i.jsxs)("div",{className:"p-6 space-y-4",children:[(0,i.jsxs)("div",{className:"text-center space-y-3",children:[(0,i.jsx)("p",{className:"text-gray-800 text-lg font-semibold font-montserrat",children:"Vous avez accompli un exploit remarquable ! \ud83c\udf89"}),(0,i.jsx)("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 rounded-2xl p-4 border border-purple-100",children:(0,i.jsxs)("p",{className:"text-gray-700 text-sm leading-relaxed font-montserrat",children:["F\xe9licitations ",(0,i.jsx)("span",{className:"font-bold text-purple-700",children:n||"cher client"})," ! Vous avez atteint le ",(0,i.jsx)("span",{className:"font-bold text-purple-700",children:"score de fid\xe9lit\xe9 maximum (5/5)"})," gr\xe2ce \xe0 vos",(0,i.jsx)("span",{className:"font-bold text-purple-700",children:" 5 remboursements ponctuels"}),". Votre s\xe9rieux, votre ponctualit\xe9 et votre fid\xe9lit\xe9 sont remarquables !"]})}),(0,i.jsxs)("div",{className:"flex items-center justify-center gap-2 text-purple-600 mt-4",children:[(0,i.jsx)(Jf,{size:20}),(0,i.jsx)("p",{className:"font-semibold font-montserrat",children:"Votre r\xe9compense vous attend !"})]})]}),(0,i.jsxs)("div",{className:"space-y-3 pt-4",children:[(0,i.jsxs)("button",{onClick:()=>{null===r||void 0===r||r(),s()},className:"w-full flex items-center justify-center gap-2 px-6 py-4 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white rounded-xl font-semibold transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105 font-montserrat",children:[(0,i.jsx)(Jf,{size:20}),"Voir mes avantages"]}),(0,i.jsxs)("button",{onClick:()=>{const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_BACKEND_URL:"http://localhost:5000",REACT_APP_FIREBASE_VAPID_KEY:"BJfHsbhtQhWA-laTTi9Ffq36xHSO8ylv-T4aU5Db6xlN5xhGqXBKtDtzcAi8qdiXimz6S-M2PxjgxNNXFftfGvQ",REACT_APP_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRsZ2ZoZ2NjenFlZmJ1aGN5YXpoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ2MDM3NjQsImV4cCI6MjA3MDE3OTc2NH0.ILqv7fUAP8KAr0GzkqeqaRqDcbKcPhcHtIQR7PYFIgY",REACT_APP_SUPABASE_URL:"https://dlgfhgcczqefbuhcyazh.supabase.co"}.REACT_APP_ADMIN_WHATSAPP||"22953463606",t=encodeURIComponent("Bonjour, je viens d'atteindre le score de fid\xe9lit\xe9 maximum (5/5) et je souhaite recevoir ma r\xe9compense. Merci !");window.open("https://wa.me/".concat(e,"?text=").concat(t),"_blank"),a&&a()},className:"w-full flex items-center justify-center gap-2 px-6 py-4 bg-green-500 hover:bg-green-600 text-white rounded-xl font-semibold transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105 font-montserrat",children:[(0,i.jsx)(Gf,{size:20}),"Contacter les admins"]})]})]})]})})})})};var Yf,$f,Xf,eg,tg,sg,ng,rg,ag,ig,og,lg,cg,dg,ug,hg,mg=(Yf=new WeakMap,$f=new WeakMap,Xf=new WeakMap,eg=new WeakMap,tg=new WeakMap,sg=new WeakMap,ng=new WeakMap,rg=new WeakMap,ag=new WeakMap,ig=new WeakMap,og=new WeakMap,lg=new WeakMap,cg=new WeakMap,dg=new WeakMap,ug=new WeakMap,hg=new WeakSet,class extends Y{constructor(e,t){super(),q(this,hg),h(this,Yf,void 0),h(this,$f,void 0),h(this,Xf,void 0),h(this,eg,void 0),h(this,tg,void 0),h(this,sg,void 0),h(this,ng,void 0),h(this,rg,void 0),h(this,ag,void 0),h(this,ig,void 0),h(this,og,void 0),h(this,lg,void 0),h(this,cg,void 0),h(this,dg,void 0),h(this,ug,new Set),this.options=t,f(Yf,this,e),f(rg,this,null),f(ng,this,ee()),this.bindMethods(),this.setOptions(t)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){1===this.listeners.size&&(p($f,this).addObserver(this),Ng(p($f,this),this.options)?m(hg,this,pg).call(this):this.updateResult(),m(hg,this,vg).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Sg(p($f,this),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Sg(p($f,this),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,m(hg,this,bg).call(this),m(hg,this,yg).call(this),p($f,this).removeObserver(this)}setOptions(e){const t=this.options,s=p($f,this);if(this.options=p(Yf,this).defaultQueryOptions(e),void 0!==this.options.enabled&&"boolean"!==typeof this.options.enabled&&"function"!==typeof this.options.enabled&&"boolean"!==typeof S(this.options.enabled,p($f,this)))throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");m(hg,this,jg).call(this),p($f,this).setOptions(this.options),t._defaulted&&!I(this.options,t)&&p(Yf,this).getQueryCache().notify({type:"observerOptionsUpdated",query:p($f,this),observer:this});const n=this.hasListeners();n&&kg(p($f,this),s,this.options,t)&&m(hg,this,pg).call(this),this.updateResult(),!n||p($f,this)===s&&S(this.options.enabled,p($f,this))===S(t.enabled,p($f,this))&&N(this.options.staleTime,p($f,this))===N(t.staleTime,p($f,this))||m(hg,this,fg).call(this);const r=m(hg,this,gg).call(this);!n||p($f,this)===s&&S(this.options.enabled,p($f,this))===S(t.enabled,p($f,this))&&r===p(dg,this)||m(hg,this,xg).call(this,r)}getOptimisticResult(e){const t=p(Yf,this).getQueryCache().build(p(Yf,this),e),s=this.createResult(t,e);return function(e,t){if(!I(e.getCurrentResult(),t))return!0;return!1}(this,s)&&(f(eg,this,s),f(sg,this,this.options),f(tg,this,p($f,this).state)),s}getCurrentResult(){return p(eg,this)}trackResult(e,t){return new Proxy(e,{get:(e,s)=>(this.trackProp(s),null===t||void 0===t||t(s),"promise"===s&&(this.trackProp("data"),this.options.experimental_prefetchInRender||"pending"!==p(ng,this).status||p(ng,this).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(e,s))})}trackProp(e){p(ug,this).add(e)}getCurrentQuery(){return p($f,this)}refetch(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({},(function(e){if(null==e)throw new TypeError("Cannot destructure "+e)}(e),e));return this.fetch((0,d.A)({},t))}fetchOptimistic(e){const t=p(Yf,this).defaultQueryOptions(e),s=p(Yf,this).getQueryCache().build(p(Yf,this),t);return s.fetch().then(()=>this.createResult(s,t))}fetch(e){var t;return m(hg,this,pg).call(this,(0,d.A)((0,d.A)({},e),{},{cancelRefetch:null===(t=e.cancelRefetch)||void 0===t||t})).then(()=>(this.updateResult(),p(eg,this)))}createResult(e,t){const s=p($f,this),n=this.options,r=p(eg,this),a=p(tg,this),i=p(sg,this),o=e!==s?e.state:p(Xf,this),{state:l}=e;let c,u=(0,d.A)({},l),h=!1;if(t._optimisticResults){const r=this.hasListeners(),a=!r&&Ng(e,t),i=r&&kg(e,s,t,n);(a||i)&&(u=(0,d.A)((0,d.A)({},u),ve(l.data,e.options))),"isRestoring"===t._optimisticResults&&(u.fetchStatus="idle")}let{error:m,errorUpdatedAt:g,status:x}=u;c=u.data;let v=!1;if(void 0!==t.placeholderData&&void 0===c&&"pending"===x){let e;var b;if(null!==r&&void 0!==r&&r.isPlaceholderData&&t.placeholderData===(null===i||void 0===i?void 0:i.placeholderData))e=r.data,v=!0;else e="function"===typeof t.placeholderData?t.placeholderData(null===(b=p(og,this))||void 0===b?void 0:b.state.data,p(og,this)):t.placeholderData;void 0!==e&&(x="success",c=L(null===r||void 0===r?void 0:r.data,e,t),h=!0)}if(t.select&&void 0!==c&&!v)if(r&&c===(null===a||void 0===a?void 0:a.data)&&t.select===p(ag,this))c=p(ig,this);else try{f(ag,this,t.select),c=t.select(c),c=L(null===r||void 0===r?void 0:r.data,c,t),f(ig,this,c),f(rg,this,null)}catch(_){f(rg,this,_)}p(rg,this)&&(m=p(rg,this),c=p(ig,this),g=Date.now(),x="error");const y="fetching"===u.fetchStatus,j="pending"===x,w="error"===x,N=j&&y,k=void 0!==c,A={status:x,fetchStatus:u.fetchStatus,isPending:j,isSuccess:"success"===x,isError:w,isInitialLoading:N,isLoading:N,data:c,dataUpdatedAt:u.dataUpdatedAt,error:m,errorUpdatedAt:g,failureCount:u.fetchFailureCount,failureReason:u.fetchFailureReason,errorUpdateCount:u.errorUpdateCount,isFetched:u.dataUpdateCount>0||u.errorUpdateCount>0,isFetchedAfterMount:u.dataUpdateCount>o.dataUpdateCount||u.errorUpdateCount>o.errorUpdateCount,isFetching:y,isRefetching:y&&!j,isLoadingError:w&&!k,isPaused:"paused"===u.fetchStatus,isPlaceholderData:h,isRefetchError:w&&k,isStale:Ag(e,t),refetch:this.refetch,promise:p(ng,this),isEnabled:!1!==S(t.enabled,e)};if(this.options.experimental_prefetchInRender){const t=void 0!==A.data,n="error"===A.status&&!t,r=e=>{n?e.reject(A.error):t&&e.resolve(A.data)},a=()=>{const e=f(ng,this,A.promise=ee());r(e)},i=p(ng,this);switch(i.status){case"pending":e.queryHash===s.queryHash&&r(i);break;case"fulfilled":(n||A.data!==i.value)&&a();break;case"rejected":n&&A.error===i.reason||a()}}return A}updateResult(){const e=p(eg,this),t=this.createResult(p($f,this),this.options);if(f(tg,this,p($f,this).state),f(sg,this,this.options),void 0!==p(tg,this).data&&f(og,this,p($f,this)),I(t,e))return;f(eg,this,t);m(hg,this,wg).call(this,{listeners:(()=>{if(!e)return!0;const{notifyOnChangeProps:t}=this.options,s="function"===typeof t?t():t;if("all"===s||!s&&!p(ug,this).size)return!0;const n=new Set(null!==s&&void 0!==s?s:p(ug,this));return this.options.throwOnError&&n.add("error"),Object.keys(p(eg,this)).some(t=>{const s=t;return p(eg,this)[s]!==e[s]&&n.has(s)})})()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&m(hg,this,vg).call(this)}});function pg(e){m(hg,this,jg).call(this);let t=p($f,this).fetch(this.options,e);return null!==e&&void 0!==e&&e.throwOnError||(t=t.catch(y)),t}function fg(){m(hg,this,bg).call(this);const e=N(this.options.staleTime,p($f,this));if(b||p(eg,this).isStale||!j(e))return;const t=w(p(eg,this).dataUpdatedAt,e)+1;f(lg,this,v.setTimeout(()=>{p(eg,this).isStale||this.updateResult()},t))}function gg(){var e;return null!==(e="function"===typeof this.options.refetchInterval?this.options.refetchInterval(p($f,this)):this.options.refetchInterval)&&void 0!==e&&e}function xg(e){m(hg,this,yg).call(this),f(dg,this,e),!b&&!1!==S(this.options.enabled,p($f,this))&&j(p(dg,this))&&0!==p(dg,this)&&f(cg,this,v.setInterval(()=>{(this.options.refetchIntervalInBackground||$.isFocused())&&m(hg,this,pg).call(this)},p(dg,this)))}function vg(){m(hg,this,fg).call(this),m(hg,this,xg).call(this,m(hg,this,gg).call(this))}function bg(){p(lg,this)&&(v.clearTimeout(p(lg,this)),f(lg,this,void 0))}function yg(){p(cg,this)&&(v.clearInterval(p(cg,this)),f(cg,this,void 0))}function jg(){const e=p(Yf,this).getQueryCache().build(p(Yf,this),this.options);if(e===p($f,this))return;const t=p($f,this);f($f,this,e),f(Xf,this,e.state),this.hasListeners()&&(null===t||void 0===t||t.removeObserver(this),e.addObserver(this))}function wg(e){Q.batch(()=>{e.listeners&&this.listeners.forEach(e=>{e(p(eg,this))}),p(Yf,this).getQueryCache().notify({query:p($f,this),type:"observerResultsUpdated"})})}function Ng(e,t){return function(e,t){return!1!==S(t.enabled,e)&&void 0===e.state.data&&!("error"===e.state.status&&!1===t.retryOnMount)}(e,t)||void 0!==e.state.data&&Sg(e,t,t.refetchOnMount)}function Sg(e,t,s){if(!1!==S(t.enabled,e)&&"static"!==N(t.staleTime,e)){const n="function"===typeof s?s(e):s;return"always"===n||!1!==n&&Ag(e,t)}return!1}function kg(e,t,s,n){return(e!==t||!1===S(n.enabled,e))&&(!s.suspense||"error"!==e.state.status)&&Ag(e,s)}function Ag(e,t){return!1!==S(t.enabled,e)&&e.isStaleByTime(N(t.staleTime,e))}function _g(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var Eg=n.createContext(_g()),Cg=n.createContext(!1),Pg=(Cg.Provider,(e,t,s)=>t.fetchOptimistic(e).catch(()=>{s.clearReset()}));function Tg(e,t,s){var r,a,i,o;const c=n.useContext(Cg),d=n.useContext(Eg),u=l(s),h=u.defaultQueryOptions(e);null===(r=u.getDefaultOptions().queries)||void 0===r||null===(a=r._experimental_beforeQuery)||void 0===a||a.call(r,h);const m=u.getQueryCache().get(h.queryHash);h._optimisticResults=c?"isRestoring":"optimistic",(e=>{if(e.suspense){const t=1e3,s=e=>"static"===e?e:Math.max(null!==e&&void 0!==e?e:t,t),n=e.staleTime;e.staleTime="function"===typeof n?function(){return s(n(...arguments))}:s(n),"number"===typeof e.gcTime&&(e.gcTime=Math.max(e.gcTime,t))}})(h),((e,t,s)=>{const n=null!==s&&void 0!==s&&s.state.error&&"function"===typeof e.throwOnError?B(e.throwOnError,[s.state.error,s]):e.throwOnError;(e.suspense||e.experimental_prefetchInRender||n)&&(t.isReset()||(e.retryOnMount=!1))})(h,d,m),(e=>{n.useEffect(()=>{e.clearReset()},[e])})(d);const p=!u.getQueryCache().get(h.queryHash),[f]=n.useState(()=>new t(u,h)),g=f.getOptimisticResult(h),x=!c&&!1!==e.subscribed;if(n.useSyncExternalStore(n.useCallback(e=>{const t=x?f.subscribe(Q.batchCalls(e)):y;return f.updateResult(),t},[f,x]),()=>f.getCurrentResult(),()=>f.getCurrentResult()),n.useEffect(()=>{f.setOptions(h)},[h,f]),((e,t)=>(null===e||void 0===e?void 0:e.suspense)&&t.isPending)(h,g))throw Pg(h,f,d);if((e=>{let{result:t,errorResetBoundary:s,throwOnError:n,query:r,suspense:a}=e;return t.isError&&!s.isReset()&&!t.isFetching&&r&&(a&&void 0===t.data||B(n,[t.error,r]))})({result:g,errorResetBoundary:d,throwOnError:h.throwOnError,query:m,suspense:h.suspense}))throw g.error;if(null===(i=u.getDefaultOptions().queries)||void 0===i||null===(o=i._experimental_afterQuery)||void 0===o||o.call(i,h,g),h.experimental_prefetchInRender&&!b&&((e,t)=>e.isLoading&&e.isFetching&&!t)(g,c)){const e=p?Pg(h,f,d):null===m||void 0===m?void 0:m.promise;null===e||void 0===e||e.catch(y).finally(()=>{f.updateResult()})}return h.notifyOnChangeProps?g:f.trackResult(g)}async function Ig(e){const[t,s,n]=await Promise.all([(0,ct.Or)(e),(0,ct.k5)(e),lt.ND.from("savings_plans").select("current_balance").eq("user_id",e).eq("status","active").order("current_balance",{ascending:!1})]),r=t.success&&t.data||[],a=s.success&&s.data||[],i=(null===n||void 0===n?void 0:n.data)||[],o=i.length>0?Math.max(...i.map(e=>e.current_balance||0)):0,l=r.reduce((e,t)=>e+(t.amount||0),0),c=a.reduce((e,t)=>e+(t.amount||0),0),d=r.filter(e=>("active"===e.status||"overdue"===e.status||"approved"===e.status)&&(e=>{const t=(parseFloat(e.amount)||0)*(1+(parseFloat(e.interest_rate)||0)/100)+(parseFloat(e.total_penalty_amount)||0),s=a.filter(t=>t.loan_id===e.id).reduce((e,t)=>e+(parseFloat(t.amount)||0),0);return Math.max(0,t-s)})(e)>0),u=d.length,h=l-c;let m=0,p=0,f=null;const g=d[0]||null;if(g){const e=parseFloat(g.amount)||0,t=parseFloat(g.interest_rate)||0;if(e>0&&(m=Math.round(e*(1+t/100))),g.approved_at){const e=new Date(g.approved_at);let t=30;null!=g.duration_months&&void 0!==g.duration_months?t=Number(g.duration_months):null!=g.duration&&void 0!==g.duration&&(t=Number(g.duration)),f=new Date(e),f.setDate(f.getDate()+t);const s=new Date;s.setHours(0,0,0,0),f.setHours(0,0,0,0),p=Math.floor((f.getTime()-s.getTime())/864e5)}}const x=new Map(r.map(e=>[e.id,e])),v=a.filter(e=>"completed"===(e.status||"").toLowerCase()),b=new Set;v.forEach(e=>{const t=x.get(e.loan_id);if(null===t||void 0===t||!t.approved_at)return;const s=new Date(t.approved_at),n=parseInt(t.duration_months||t.duration||30,10),r=new Date(s.getTime()+24*n*60*60*1e3);r.setHours(23,59,59,999);const a=new Date(e.payment_date||e.created_at||new Date);a.setHours(0,0,0,0),a.getTime()<=r.getTime()&&b.add(e.loan_id)}),r.forEach(e=>{const t=(e.status||"").toLowerCase();"completed"!==t&&"rembours\xe9"!==t||b.has(e.id)||b.add(e.id)});const y=Math.max(0,Math.min(5,b.size));return{totalLoaned:l,totalRepaid:c,amountToRepay:h,activeLoans:u,hasLoanToRepay:d.length>0,nextPayment:m,daysUntilNextPayment:p,dueDate:f,loyaltyScore:y,savingsBalance:o}}function Rg(e){var t,s,n;const r=function(e,t){return Tg(e,mg,t)}({queryKey:["dashboardStats",e],queryFn:()=>Ig(e),enabled:!!e,staleTime:12e4,gcTime:3e5});return{stats:null!==(t=r.data)&&void 0!==t?t:{totalLoaned:0,totalRepaid:0,amountToRepay:0,activeLoans:0,hasLoanToRepay:!1,nextPayment:0,daysUntilNextPayment:0,dueDate:null,loyaltyScore:0,savingsBalance:0},loading:r.isLoading,error:null!==(s=null===(n=r.error)||void 0===n?void 0:n.message)&&void 0!==s?s:null,refetch:r.refetch,isFetching:r.isFetching}}function Dg(e){let{className:t=""}=e;return(0,i.jsxs)("div",{className:"rounded-2xl p-4 sm:p-6 border border-gray-100 bg-white animate-pulse ".concat(t),children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,i.jsx)("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-gray-200 rounded-xl"}),(0,i.jsx)("div",{className:"w-12 h-4 bg-gray-200 rounded"})]}),(0,i.jsx)("div",{className:"w-16 h-8 sm:w-20 sm:h-9 bg-gray-200 rounded mb-2"}),(0,i.jsx)("div",{className:"w-24 h-4 bg-gray-100 rounded"})]})}function Og(){return(0,i.jsx)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6 mb-8",children:[1,2,3,4].map(e=>(0,i.jsx)(Dg,{},e))})}function Lg(e){let{lines:t=3}=e;return(0,i.jsx)("div",{className:"border border-gray-200/50 rounded-2xl p-6 animate-pulse",children:(0,i.jsx)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0",children:(0,i.jsxs)("div",{className:"flex-1 space-y-3",children:[(0,i.jsxs)("div",{className:"flex gap-2",children:[(0,i.jsx)("div",{className:"h-5 w-24 bg-gray-200 rounded"}),(0,i.jsx)("div",{className:"h-5 w-16 bg-gray-100 rounded-full"})]}),(0,i.jsx)("div",{className:"h-4 w-3/4 bg-gray-100 rounded"}),(0,i.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[1,2,3].map(e=>(0,i.jsx)("div",{className:"h-14 bg-gray-50 rounded-xl"},e))})]})})})}function Mg(e){let{rows:t=5}=e;return(0,i.jsx)("div",{className:"space-y-4",children:Array.from({length:t}).map((e,t)=>(0,i.jsx)(Lg,{},t))})}var zg=s(5099);const Fg=(0,pt.A)("PiggyBank",[["path",{d:"M19 5c-1.5 0-2.8 1.4-3 2-3.5-1.5-11-.3-11 5 0 1.8 0 3 2 4.5V20h4v-2h3v2h4v-4c1-.5 1.7-1 2-2h2v-4h-2c0-1-.5-1.5-1-2h0V5z",key:"uf6l00"}],["path",{d:"M2 9v1c0 1.1.9 2 2 2h1",key:"nm575m"}],["path",{d:"M16 11h0",key:"k2aug8"}]]),Ug=(0,pt.A)("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]),Bg=(0,pt.A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),qg=()=>{var e;const t=(0,Ge.Zp)(),{user:s}=ut(),{stats:r,loading:a,error:o,refetch:l,isFetching:c}=Rg(null===s||void 0===s?void 0:s.id),[d,u]=(0,n.useState)(!1),[h,m]=(0,n.useState)(null);if((0,n.useEffect)(()=>{(async()=>{if(null!==s&&void 0!==s&&s.id)try{const e=await(0,ct.fI)(s.id,!1);e.success&&e.showPopup&&(m(e.notification),u(!0))}catch(o){console.error("[DASHBOARD] Erreur v\xe9rification popup fid\xe9lit\xe9:",o)}})()},[null===s||void 0===s?void 0:s.id]),o)return(0,i.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 flex items-center justify-center p-4",children:(0,i.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8 max-w-md w-full text-center",children:[(0,i.jsx)("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,i.jsx)(zg.A,{size:32,className:"text-red-600"})}),(0,i.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Erreur"}),(0,i.jsx)("p",{className:"text-gray-600 mb-6",children:o}),(0,i.jsxs)("button",{onClick:()=>l(),className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl transition-colors",children:[(0,i.jsx)(ai.A,{size:18}),"R\xe9essayer"]})]})});const p=[{id:"ab-pret",title:"AB Pr\xeat",description:"Demander un pr\xeat rapide",icon:Hp.A,color:"from-blue-500 to-purple-600",iconBg:"bg-blue-100",iconColor:"text-blue-600",path:"/loan-request",badge:r.activeLoans>0?"".concat(r.activeLoans," actif").concat(r.activeLoans>1?"s":""):null},{id:"ab-epargne",title:"AB \xc9pargne",description:"\xc9pargner intelligemment",icon:Fg,color:"from-green-500 to-emerald-600",iconBg:"bg-green-100",iconColor:"text-green-600",path:"/ab-epargne"},{id:"ab-logement",title:"AB Logement",description:"Votre maison de r\xeave",icon:Vp,color:"from-purple-500 to-indigo-600",iconBg:"bg-purple-100",iconColor:"text-purple-600",path:"/ab-logement"},{id:"coaching",title:"Coaching Finance",description:"D\xe9veloppez votre business",icon:Df,color:"from-orange-500 to-red-600",iconBg:"bg-orange-100",iconColor:"text-orange-600",path:"/coaching-finance"}];return(0,i.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 pb-24",children:[(0,i.jsx)("div",{className:"bg-white/80 backdrop-blur-lg shadow-lg border-b border-white/50 sticky top-0 z-30",children:(0,i.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{className:"flex items-center gap-4",children:[(0,i.jsx)("div",{className:"p-3 bg-gradient-to-br from-blue-500 to-purple-600 rounded-2xl shadow-lg",children:(0,i.jsx)(Vp,{size:32,className:"text-white"})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900 font-montserrat",children:"Tableau de bord"}),(0,i.jsxs)("p",{className:"text-sm sm:text-base text-gray-600 font-montserrat",children:["Bonjour ",(null===s||void 0===s?void 0:s.first_name)||(null===s||void 0===s||null===(e=s.user_metadata)||void 0===e?void 0:e.first_name)||"Utilisateur"," \ud83d\udc4b"]})]})]}),(0,i.jsxs)("button",{onClick:()=>l(),disabled:c,className:"flex items-center gap-2 px-3 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-xl transition-colors text-sm",children:[(0,i.jsx)(ai.A,{size:16,className:c?"animate-spin":""}),(0,i.jsx)("span",{className:"hidden sm:inline",children:"Actualiser"})]})]})})}),(0,i.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a?(0,i.jsx)(Og,{}):(0,i.jsxs)(i.Fragment,{children:[c&&(0,i.jsxs)("div",{className:"flex items-center justify-center gap-2 py-2 mb-4 text-gray-500 text-sm",children:[(0,i.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-blue-500 border-t-transparent"}),(0,i.jsx)("span",{children:"Mise \xe0 jour..."})]}),(0,i.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6 mb-8",children:[(0,i.jsxs)("div",{className:"bg-gradient-to-br from-yellow-500 to-orange-600 text-white rounded-2xl shadow-lg border border-yellow-400/50 p-4 sm:p-6 flex flex-col justify-between hover:shadow-xl transition-all duration-300",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,i.jsx)("div",{className:"p-2 sm:p-3 bg-white/20 rounded-xl",children:(0,i.jsx)(Ug,{size:20})}),(0,i.jsx)("span",{className:"text-xs font-medium text-yellow-100",children:"Score"})]}),(0,i.jsx)("p",{className:"text-2xl sm:text-3xl font-bold font-montserrat mb-1",children:r.loyaltyScore}),(0,i.jsx)("p",{className:"text-sm text-yellow-100 font-montserrat",children:"/ 5 points"}),(0,i.jsx)("div",{className:"flex mt-2",children:[...Array(5)].map((e,t)=>(0,i.jsx)(ff,{className:"w-3 h-3 sm:w-4 sm:h-4 ".concat(t<r.loyaltyScore?"text-white fill-current":"text-yellow-300/30")},t))})]}),(0,i.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 p-4 sm:p-6 flex flex-col justify-between hover:shadow-xl transition-all duration-300",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,i.jsx)("div",{className:"p-2 sm:p-3 bg-blue-100 rounded-xl",children:(0,i.jsx)(Hp.A,{size:20,className:"text-blue-600"})}),(0,i.jsx)("span",{className:"text-xs font-medium text-gray-500",children:"Actifs"})]}),(0,i.jsx)("p",{className:"text-2xl sm:text-3xl font-bold text-gray-900 font-montserrat mb-1",children:r.activeLoans}),(0,i.jsxs)("p",{className:"text-sm text-gray-600 font-montserrat",children:["Pr\xeat",r.activeLoans>1?"s":""," en cours"]})]}),(0,i.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 p-4 sm:p-6 flex flex-col justify-between hover:shadow-xl transition-all duration-300",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,i.jsx)("div",{className:"p-2 sm:p-3 bg-green-100 rounded-xl",children:(0,i.jsx)(Fg,{size:20,className:"text-green-600"})}),(0,i.jsx)("span",{className:"text-xs font-medium text-gray-500",children:"Compte \xc9pargne"})]}),(0,i.jsx)("p",{className:"text-2xl sm:text-3xl font-bold text-gray-900 font-montserrat mb-1",children:(0,Dp.vv)(r.savingsBalance)}),(0,i.jsx)("p",{className:"text-sm text-gray-600 font-montserrat",children:"Solde disponible"})]}),(0,i.jsxs)("div",{className:"bg-gradient-to-br from-orange-500 to-red-600 text-white rounded-2xl shadow-lg border border-orange-400/50 p-4 sm:p-6 flex flex-col justify-between hover:shadow-xl transition-all duration-300",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,i.jsx)("div",{className:"p-2 sm:p-3 bg-white/20 rounded-xl",children:(0,i.jsx)(kp,{size:20})}),r.activeLoans>0&&(0,i.jsx)("span",{className:"text-xs font-medium text-orange-100",children:r.daysUntilNextPayment<0?"Retard":0===r.daysUntilNextPayment?"Aujourd'hui":"".concat(r.daysUntilNextPayment,"j")})]}),(0,i.jsx)("p",{className:"text-2xl sm:text-3xl font-bold font-montserrat mb-1",children:(0,Dp.vv)(r.nextPayment)}),(0,i.jsx)("p",{className:"text-sm text-orange-100 font-montserrat",children:"Prochain paiement"})]})]})]}),(0,i.jsx)("h2",{className:"text-xl font-bold text-gray-900 font-montserrat mb-4",children:"Nos Services"}),(0,i.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6 mb-8",children:p.map(e=>(0,i.jsxs)("button",{onClick:()=>t(e.path),className:"relative flex flex-col items-start p-6 bg-white rounded-2xl shadow-lg border border-gray-100 hover:shadow-xl transition-all duration-300 group overflow-hidden text-left",children:[(0,i.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br ".concat(e.color," opacity-0 group-hover:opacity-10 transition-opacity duration-300")}),(0,i.jsxs)("div",{className:"relative z-10 flex items-center justify-between w-full mb-4",children:[(0,i.jsx)("div",{className:"p-3 ".concat(e.iconBg," rounded-xl group-hover:scale-110 transition-transform duration-300"),children:(0,i.jsx)(e.icon,{size:24,className:e.iconColor})}),e.badge&&(0,i.jsx)("span",{className:"px-3 py-1 bg-blue-500 text-white text-xs font-bold rounded-full shadow-sm",children:e.badge})]}),(0,i.jsx)("h3",{className:"relative z-10 text-lg font-bold text-gray-900 font-montserrat mb-1",children:e.title}),(0,i.jsx)("p",{className:"relative z-10 text-sm text-gray-600 font-montserrat mb-4",children:e.description}),(0,i.jsx)(fi,{size:20,className:"absolute bottom-6 right-6 text-gray-400 group-hover:text-blue-600 transition-all duration-300 group-hover:translate-x-1"})]},e.id))}),(0,i.jsx)("div",{className:"flex justify-center",children:(0,i.jsxs)("button",{onClick:()=>t("/loan-request"),className:"flex items-center gap-3 px-8 py-4 bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white rounded-2xl font-bold text-lg shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105",children:[(0,i.jsx)(Bg,{size:24}),(0,i.jsx)("span",{children:"Nouvelle demande de pr\xeat"})]})})]}),(0,i.jsx)(Kf,{}),(0,i.jsx)(Qf,{isOpen:d,onClose:()=>u(!1),userName:(null===h||void 0===h?void 0:h.userName)||(null===s||void 0===s?void 0:s.first_name)||"Cher client",onViewBenefits:()=>t("/loyalty-score"),onContactAdmin:()=>{}})]})};var Vg=s(5275);const Hg=e=>{let{isOpen:t,onClose:s,userName:n,userId:r,onContactUser:a}=e;const o=(0,Ge.Zp)();if(!t)return null;return(0,i.jsx)(cf,{children:t&&(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(yp.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:s,children:(0,i.jsxs)(yp.div,{initial:{scale:.9,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:20},transition:{type:"spring",damping:25,stiffness:300},className:"bg-white rounded-3xl shadow-2xl max-w-md w-full overflow-hidden",onClick:e=>e.stopPropagation(),children:[(0,i.jsxs)("div",{className:"relative bg-gradient-to-br from-blue-600 via-purple-600 to-pink-500 p-6 pb-8",children:[(0,i.jsx)("button",{onClick:s,className:"absolute top-4 right-4 p-2 bg-white/20 hover:bg-white/30 rounded-full transition-colors","aria-label":"Fermer",children:(0,i.jsx)(xt,{size:20,className:"text-white"})}),(0,i.jsx)("div",{className:"flex justify-center mb-4",children:(0,i.jsx)("div",{className:"p-4 bg-white/20 backdrop-blur-sm rounded-full",children:(0,i.jsx)(Zf,{size:64,className:"text-white"})})}),(0,i.jsx)("h2",{className:"text-2xl font-bold text-white text-center mb-2 font-montserrat",children:"Score de fid\xe9lit\xe9 atteint !"})]}),(0,i.jsxs)("div",{className:"p-6 space-y-4",children:[(0,i.jsxs)("div",{className:"text-center space-y-3",children:[(0,i.jsxs)("div",{className:"flex items-center justify-center gap-2 mb-3",children:[(0,i.jsx)(mi,{size:24,className:"text-purple-600"}),(0,i.jsx)("p",{className:"text-gray-800 text-lg font-semibold font-montserrat",children:n||"Un utilisateur"})]}),(0,i.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-purple-50 rounded-2xl p-4 border border-blue-100",children:[(0,i.jsxs)("p",{className:"text-gray-700 text-sm leading-relaxed font-montserrat",children:["L'utilisateur ",(0,i.jsx)("span",{className:"font-bold text-purple-700",children:n||"ce client"})," a atteint le",(0,i.jsx)("span",{className:"font-bold text-purple-700",children:" score de fid\xe9lit\xe9 maximum (5/5)"})," gr\xe2ce \xe0 ses",(0,i.jsx)("span",{className:"font-bold text-purple-700",children:" 5 remboursements ponctuels"}),"."]}),(0,i.jsxs)("div",{className:"mt-3 flex items-center justify-center gap-2 text-purple-600",children:[(0,i.jsx)(Vg.A,{size:16}),(0,i.jsx)("p",{className:"text-xs font-medium font-montserrat",children:"Il attend sa r\xe9compense !"})]})]})]}),(0,i.jsx)("div",{className:"pt-4",children:(0,i.jsxs)("button",{onClick:()=>{a&&a(r),o("/admin/user-management?userId=".concat(r,"&showStats=true")),s()},className:"w-full flex items-center justify-center gap-2 px-6 py-4 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white rounded-xl font-semibold transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105 font-montserrat",children:[(0,i.jsx)(mi,{size:20}),"Contacter l'utilisateur",(0,i.jsx)(fi,{size:20})]})})]})]})})})})},Wg=(0,pt.A)("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1-2-1Z",key:"wqdwcb"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17V7",key:"pyj7ub"}]]),Gg=()=>{const{user:e}=ut(),t=(0,Ge.Zp)(),{isConnected:s}=(()=>{const{addNotification:e}=yt(),{user:t}=ut(),[s,r]=(0,n.useState)(!1),[a]=(0,n.useState)(new Set);return(0,n.useEffect)(()=>{if(!t)return;const s="admin"===(null===t||void 0===t?void 0:t.role),n=null===t||void 0===t?void 0:t.id;console.log("[REALTIME] ".concat(s?"Admin":"Utilisateur"," connect\xe9, ID: ").concat(n));const i=lt.ND.channel("loans_changes").on("postgres_changes",{event:"INSERT",schema:"public",table:"loans"},t=>{console.log("[REALTIME] Nouvelle demande de pr\xeat:",t.new),a.has(t.new.id)||(a.add(t.new.id),s&&e({title:"\ud83d\udea8 Nouvelle demande de pr\xeat",message:"Demande de ".concat(new Intl.NumberFormat("fr-FR",{style:"currency",currency:"XOF"}).format(t.new.amount)," - ").concat(t.new.purpose||"Objectif non sp\xe9cifi\xe9"),type:"info",priority:"high",forAdmin:!0,data:{loan_id:t.new.id,amount:t.new.amount,purpose:t.new.purpose,status:t.new.status,created_at:t.new.created_at},action:"Voir la demande"}))}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"loans"},t=>{if(console.log("[REALTIME] Mise \xe0 jour de pr\xeat:",t.new),t.old.status!==t.new.status){let r="",a="info",i="";switch(t.new.status){case"approved":r="Pr\xeat approuv\xe9 pour ".concat(new Intl.NumberFormat("fr-FR",{style:"currency",currency:"XOF"}).format(t.new.amount)," FCFA"),a="success",i="\u2705 Pr\xeat approuv\xe9";break;case"rejected":r="Pr\xeat rejet\xe9 pour ".concat(new Intl.NumberFormat("fr-FR",{style:"currency",currency:"XOF"}).format(t.new.amount)," FCFA"),a="error",i="\u274c Pr\xeat rejet\xe9";break;case"active":r="Pr\xeat activ\xe9 pour ".concat(new Intl.NumberFormat("fr-FR",{style:"currency",currency:"XOF"}).format(t.new.amount)," FCFA"),a="success",i="\ud83d\ude80 Pr\xeat activ\xe9";break;default:return}s&&e({title:"Statut de pr\xeat mis \xe0 jour",message:"".concat(r," - Utilisateur: ").concat(t.new.user_id),type:a,priority:"medium",forAdmin:!0,data:t.new}),s||t.new.user_id!==n||e({title:i,message:r,type:a,priority:"high",forUser:!0,userId:n,data:t.new,action:"Voir les d\xe9tails"})}}).subscribe(e=>{console.log("[REALTIME] Statut de la connexion loans:",e),r("SUBSCRIBED"===e)});if(s){const t=lt.ND.channel("users_changes").on("postgres_changes",{event:"INSERT",schema:"public",table:"users"},t=>{console.log("[REALTIME] Nouvel utilisateur (admin):",t.new),a.has(t.new.id)||(a.add(t.new.id),e({title:"\ud83d\udc64 Nouvel utilisateur inscrit",message:"".concat(t.new.first_name," ").concat(t.new.last_name," - ").concat(t.new.phone_number),type:"info",priority:"medium",forAdmin:!0,data:{user_id:t.new.id,first_name:t.new.first_name,last_name:t.new.last_name,phone_number:t.new.phone_number,status:t.new.status,created_at:t.new.created_at},action:"Voir le profil"}))}).subscribe(e=>{console.log("[REALTIME] Statut de la connexion users (admin):",e)});return()=>{console.log("[REALTIME] Nettoyage des abonnements (admin)"),i.unsubscribe(),t.unsubscribe()}}return()=>{console.log("[REALTIME] Nettoyage des abonnements (utilisateur)"),i.unsubscribe()}},[e,null===t||void 0===t?void 0:t.role,null===t||void 0===t?void 0:t.id]),{isConnected:s}})(),[r,a]=(0,n.useState)(!1),[o,l]=(0,n.useState)(null),[c,d]=(0,n.useState)({totalUsers:0,totalLoans:0,totalAmount:0,totalInterestCollected:0,pendingRequests:0,activeLoans:0,completedLoans:0,totalSavings:0,activeSavingsPlans:0}),[u,h]=(0,n.useState)([]),[m,p]=(0,n.useState)(!1),[f,g]=(0,n.useState)(null);(0,n.useEffect)(()=>{v(),x()},[]);const x=async()=>{if(null!==e&&void 0!==e&&e.id)try{const t=await(0,ct.fI)(e.id,!0);t.success&&t.showPopup&&(g(t.notification),p(!0))}catch(o){console.error("[ADMIN_DASHBOARD] Erreur v\xe9rification popup fid\xe9lit\xe9:",o)}},v=async()=>{try{a(!0),l(null),console.log("[ADMIN_DASHBOARD] \ud83d\udce5 Chargement des donn\xe9es...");const[e,t,s]=await Promise.all([(0,ct.CF)(),(0,ct.Or)(),lt.ND.from("savings_plans").select("*")]);console.log("[ADMIN_DASHBOARD] \u2705 Donn\xe9es charg\xe9es");const n=e.success?e.data.length:0;let r=0,i=0,o=0,c=0,u=0,m=0,p=[];if(t.success){const e=t.data||[];r=e.length;const s=e=>e.approved_at&&"pending"!==e.status&&"rejected"!==e.status,n=e=>e.approved_at&&"completed"!==e.status&&"rejected"!==e.status&&"pending"!==e.status;u=e.filter(n).length,i=e.filter(s).reduce((e,t)=>e+(t.amount||0),0);const a=e.filter(e=>"completed"===e.status&&e.approved_at);o=a.reduce((e,t)=>e+Math.round((t.amount||0)*((t.interest_rate||0)/100)),0),c=e.filter(e=>"pending"===e.status).length,m=a.length,p=e.slice(0,5).map(e=>{var t,s;return{id:e.id,type:"loan",status:e.status,user:{firstName:(null===(t=e.users)||void 0===t?void 0:t.first_name)||"Utilisateur",lastName:(null===(s=e.users)||void 0===s?void 0:s.last_name)||"Inconnu"},amount:e.amount||0,date:e.created_at,description:e.purpose||"Pr\xeat"}})}let f=0,g=0,x=[];if(s.data){const e=s.data||[];f=e.reduce((e,t)=>e+(t.current_balance||0),0),g=e.filter(e=>"active"===e.status).length,x=e.slice(0,3).map(e=>({id:e.id,type:"savings",status:e.status,amount:e.current_balance||0,target:e.total_amount_target||0,date:e.created_at,description:"Plan d'\xe9pargne"}))}const v=[...p,...x].sort((e,t)=>new Date(t.date)-new Date(e.date)).slice(0,8);d({totalUsers:n,totalLoans:r,totalAmount:i,totalInterestCollected:o,pendingRequests:c,activeLoans:u,completedLoans:m,totalSavings:f,activeSavingsPlans:g}),h(v)}catch(o){console.error("[ADMIN_DASHBOARD] \u274c Erreur:",o),l(o.message||"Une erreur est survenue")}finally{a(!1)}},b=e=>{if("loan"===e.type){if("pending"===e.status)return(0,i.jsx)(kp,{size:16,className:"text-yellow-600"});if("active"===e.status||"approved"===e.status||"overdue"===e.status)return(0,i.jsx)(zg.A,{size:16,className:"text-blue-600"});if("completed"===e.status)return(0,i.jsx)(mt.A,{size:16,className:"text-green-600"})}return"savings"===e.type?(0,i.jsx)(Fg,{size:16,className:"text-purple-600"}):(0,i.jsx)(Hp.A,{size:16,className:"text-gray-600"})},y=e=>{if("loan"===e.type){if("pending"===e.status)return(0,i.jsx)("span",{className:"px-2 py-0.5 bg-yellow-100 text-yellow-700 rounded-full text-[10px] font-semibold",children:"En attente"});if("active"===e.status||"approved"===e.status||"overdue"===e.status)return(0,i.jsx)("span",{className:"px-2 py-0.5 bg-blue-100 text-blue-700 rounded-full text-[10px] font-semibold",children:"Actif"});if("completed"===e.status)return(0,i.jsx)("span",{className:"px-2 py-0.5 bg-green-100 text-green-700 rounded-full text-[10px] font-semibold",children:"Rembours\xe9"})}return"savings"===e.type?(0,i.jsx)("span",{className:"px-2 py-0.5 bg-purple-100 text-purple-700 rounded-full text-[10px] font-semibold",children:"\xc9pargne"}):null},j=[{title:"AB Pret",description:"G\xe9rer les demandes de pr\xeats",icon:Hp.A,color:"from-blue-500 to-purple-600",iconBg:"bg-blue-100",iconColor:"text-blue-600",path:"/admin/loan-requests",badge:c.pendingRequests>0?"".concat(c.pendingRequests," en attente"):null},{title:"AB Epargne",description:"G\xe9rer les comptes d'\xe9pargne",icon:Fg,color:"from-green-500 to-emerald-600",iconBg:"bg-green-100",iconColor:"text-green-600",path:"/admin/ab-epargne",badge:c.activeSavingsPlans>0?"".concat(c.activeSavingsPlans," actifs"):null},{title:"Analytics",description:"Voir les statistiques",icon:Vg.A,color:"from-orange-500 to-red-600",iconBg:"bg-orange-100",iconColor:"text-orange-600",path:"/admin/analytics"},{title:"Transactions",description:"Voir toutes les transactions",icon:Wg,color:"from-purple-500 to-pink-600",iconBg:"bg-purple-100",iconColor:"text-purple-600",path:"/admin/transactions"}];return o?(0,i.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 flex items-center justify-center p-4",children:(0,i.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8 max-w-md w-full text-center",children:[(0,i.jsx)("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,i.jsx)(ft,{size:32,className:"text-red-600"})}),(0,i.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Erreur de chargement"}),(0,i.jsx)("p",{className:"text-gray-600 mb-6",children:o}),(0,i.jsxs)("button",{onClick:v,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl transition-colors",children:[(0,i.jsx)(ai.A,{size:18}),"R\xe9essayer"]})]})}):(0,i.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 pb-24",children:[(0,i.jsx)("div",{className:"bg-white/80 backdrop-blur-lg shadow-lg border-b border-white/50 sticky top-0 z-30",children:(0,i.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{className:"flex items-center gap-4",children:[(0,i.jsx)("div",{className:"p-3 bg-gradient-to-br from-blue-500 to-purple-600 rounded-2xl shadow-lg",children:(0,i.jsx)(Vp,{size:32,className:"text-white"})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900 font-montserrat",children:"Tableau de bord"}),(0,i.jsxs)("p",{className:"text-sm sm:text-base text-gray-600 font-montserrat",children:["Bonjour ",(null===e||void 0===e?void 0:e.first_name)||"Admin"]})]})]}),(0,i.jsxs)("div",{className:"flex items-center gap-3",children:[s&&(0,i.jsxs)("div",{className:"hidden sm:flex items-center gap-2 px-3 py-1.5 bg-green-100 rounded-full",children:[(0,i.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),(0,i.jsx)("span",{className:"text-xs font-medium text-green-700",children:"En ligne"})]}),(0,i.jsxs)("button",{onClick:v,className:"flex items-center gap-2 px-3 sm:px-4 py-2 bg-white hover:bg-gray-50 border border-gray-200 rounded-xl transition-all duration-200 shadow-sm hover:shadow",children:[(0,i.jsx)(ai.A,{size:18,className:"text-gray-600"}),(0,i.jsx)("span",{className:"hidden sm:inline text-sm font-medium text-gray-700",children:"Actualiser"})]})]})]})})}),(0,i.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[r&&(0,i.jsxs)("div",{className:"flex items-center justify-center gap-2 py-2 mb-4 text-gray-500 text-sm",children:[(0,i.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-blue-500 border-t-transparent"}),(0,i.jsx)("span",{children:"Mise \xe0 jour des donn\xe9es..."})]}),(0,i.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6 mb-8 transition-opacity duration-200 ".concat(r?"opacity-75":""),children:[(0,i.jsxs)("button",{type:"button",onClick:()=>t("/admin/transactions"),className:"text-left bg-white rounded-2xl p-4 sm:p-6 shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-100 group cursor-pointer",children:[(0,i.jsxs)("div",{className:"flex items-start justify-between mb-3 sm:mb-4",children:[(0,i.jsx)("div",{className:"p-2 sm:p-3 bg-purple-100 rounded-xl group-hover:scale-110 transition-transform duration-300",children:(0,i.jsx)(Wg,{size:20,className:"sm:w-6 sm:h-6 text-purple-600"})}),(0,i.jsx)(fi,{size:18,className:"text-gray-400 group-hover:text-purple-600 transition-colors flex-shrink-0 mt-1"})]}),(0,i.jsx)("p",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:"Transactions"}),(0,i.jsx)("p",{className:"text-xs sm:text-sm text-gray-600 mt-1",children:"Voir toutes les transactions"})]}),(0,i.jsxs)("div",{className:"bg-gradient-to-br from-blue-500 to-purple-600 rounded-2xl p-4 sm:p-6 shadow-lg hover:shadow-xl transition-all duration-300 text-white group",children:[(0,i.jsx)("div",{className:"flex items-start justify-between mb-3 sm:mb-4",children:(0,i.jsx)("div",{className:"p-2 sm:p-3 bg-white/20 rounded-xl group-hover:scale-110 transition-transform duration-300",children:(0,i.jsx)(zg.A,{size:20,className:"sm:w-6 sm:h-6 text-white"})})}),(0,i.jsx)("p",{className:"text-2xl sm:text-3xl font-bold",children:c.activeLoans}),(0,i.jsx)("p",{className:"text-xs sm:text-sm text-blue-100 mt-1",children:"Pr\xeats actifs"})]}),(0,i.jsxs)("button",{type:"button",onClick:()=>t("/admin/analytics/detailed"),className:"w-full text-left bg-white rounded-2xl p-4 sm:p-6 shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-100 group cursor-pointer",children:[(0,i.jsxs)("div",{className:"flex items-start justify-between mb-3 sm:mb-4",children:[(0,i.jsx)("div",{className:"p-2 sm:p-3 bg-green-100 rounded-xl group-hover:scale-110 transition-transform duration-300",children:(0,i.jsx)(Qp,{size:20,className:"sm:w-6 sm:h-6 text-green-600"})}),(0,i.jsx)(Gp.A,{size:18,className:"text-gray-400 group-hover:text-green-600 transition-colors flex-shrink-0 mt-1"})]}),(0,i.jsx)("p",{className:"text-lg sm:text-xl font-bold text-gray-900",children:(0,Dp.vv)(c.totalInterestCollected)}),(0,i.jsx)("p",{className:"text-xs sm:text-sm text-gray-600 mt-1",children:"Int\xe9r\xeats collect\xe9s"}),(0,i.jsxs)("p",{className:"text-xs text-green-600 font-medium mt-2 flex items-center gap-1 group-hover:underline",children:["Voir les statistiques d\xe9taill\xe9es",(0,i.jsx)(fi,{size:14,className:"inline"})]})]}),(0,i.jsxs)("div",{className:"bg-white rounded-2xl p-4 sm:p-6 shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-100 group",children:[(0,i.jsx)("div",{className:"flex items-start justify-between mb-3 sm:mb-4",children:(0,i.jsx)("div",{className:"p-2 sm:p-3 bg-yellow-100 rounded-xl group-hover:scale-110 transition-transform duration-300",children:(0,i.jsx)(kp,{size:20,className:"sm:w-6 sm:h-6 text-yellow-600"})})}),(0,i.jsx)("p",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:c.pendingRequests}),(0,i.jsx)("p",{className:"text-xs sm:text-sm text-gray-600 mt-1",children:"En attente"})]})]}),(0,i.jsxs)("div",{className:"mb-8",children:[(0,i.jsx)("h2",{className:"text-xl font-bold text-gray-900 font-montserrat mb-4",children:"Actions rapides"}),(0,i.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:j.map((e,s)=>(0,i.jsxs)("button",{onClick:()=>t(e.path),className:"group relative bg-white rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-100 overflow-hidden text-left",children:[(0,i.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br ".concat(e.color," opacity-0 group-hover:opacity-5 transition-opacity duration-300")}),(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsx)("div",{className:"inline-flex p-3 rounded-xl ".concat(e.iconBg," mb-4 group-hover:scale-110 transition-transform duration-300"),children:(0,i.jsx)(e.icon,{size:24,className:e.iconColor})}),e.badge&&(0,i.jsx)("span",{className:"absolute top-0 right-0 px-2 py-1 bg-red-500 text-white text-[10px] font-bold rounded-full",children:e.badge}),(0,i.jsx)("h3",{className:"text-lg font-bold text-gray-900 font-montserrat mb-2",children:e.title}),(0,i.jsx)("p",{className:"text-sm text-gray-600 font-montserrat mb-4",children:e.description}),(0,i.jsxs)("div",{className:"flex items-center text-primary-600 font-semibold font-montserrat group-hover:translate-x-2 transition-transform duration-300",children:[(0,i.jsx)("span",{className:"text-sm",children:"Acc\xe9der"}),(0,i.jsx)(fi,{size:16,className:"ml-2"})]})]})]},s))})]}),(0,i.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden",children:[(0,i.jsx)("div",{className:"p-4 sm:p-6 border-b border-gray-100",children:(0,i.jsx)("h2",{className:"text-xl font-bold text-gray-900 font-montserrat",children:"Activit\xe9s r\xe9centes"})}),(0,i.jsx)("div",{className:"divide-y divide-gray-100",children:0===u.length?(0,i.jsxs)("div",{className:"p-8 sm:p-12 text-center",children:[(0,i.jsx)(zg.A,{size:48,className:"mx-auto text-gray-300 mb-4"}),(0,i.jsx)("p",{className:"text-gray-500 font-medium",children:"Aucune activit\xe9 r\xe9cente"})]}):u.map((e,s)=>{var n,r;return(0,i.jsx)("div",{className:"p-4 sm:p-6 hover:bg-gray-50 transition-colors cursor-pointer",onClick:()=>{"loan"===e.type&&t("/admin/loan-requests"),"savings"===e.type&&t("/admin/ab-epargne")},children:(0,i.jsxs)("div",{className:"flex items-start gap-3 sm:gap-4",children:[(0,i.jsx)("div",{className:"flex-shrink-0 w-10 h-10 bg-gray-100 rounded-full flex items-center justify-center",children:b(e)}),(0,i.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,i.jsxs)("div",{className:"flex items-start justify-between gap-2 mb-1",children:[(0,i.jsx)("p",{className:"text-sm sm:text-base font-semibold text-gray-900 truncate",children:"loan"===e.type?"".concat(null===(n=e.user)||void 0===n?void 0:n.firstName," ").concat(null===(r=e.user)||void 0===r?void 0:r.lastName):e.description}),y(e)]}),(0,i.jsx)("p",{className:"text-xs sm:text-sm text-gray-600 mb-2",children:"loan"===e.type?e.description:"".concat((0,Dp.vv)(e.amount)," / ").concat((0,Dp.vv)(e.target))}),(0,i.jsxs)("div",{className:"flex items-center gap-3 text-xs text-gray-500",children:[(0,i.jsx)("span",{className:"font-bold text-gray-900",children:(0,Dp.vv)(e.amount)}),(0,i.jsx)("span",{children:"\u2022"}),(0,i.jsx)("span",{children:new Date(e.date).toLocaleDateString("fr-FR")})]})]}),(0,i.jsx)(fi,{size:16,className:"flex-shrink-0 text-gray-400 group-hover:text-gray-600 transition-colors"})]})},s)})})]})]}),(0,i.jsx)(Hg,{isOpen:m,onClose:()=>p(!1),userName:(null===f||void 0===f?void 0:f.userName)||"Un utilisateur",userId:null===f||void 0===f?void 0:f.userId,onContactUser:async e=>{try{const s=await(0,ct.a3)(e);s.success&&(console.log("[ADMIN_DASHBOARD] Compteur r\xe9initialis\xe9, nouveau statut:",s.newStatus),t("/admin/user-management?userId=".concat(e,"&showStats=true")))}catch(o){console.error("[ADMIN_DASHBOARD] Erreur r\xe9initialisation compteur:",o),t("/admin/user-management?userId=".concat(e,"&showStats=true"))}}})]})},Kg=(0,pt.A)("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),Zg=(0,pt.A)("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),Jg=(0,pt.A)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),Qg=(0,pt.A)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);var Yg=s(2938);const $g=(0,pt.A)("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]),Xg=(0,pt.A)("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);const ex=()=>{var e,t;const{showSuccess:s,showError:r}=yt(),[a,o]=(0,n.useState)([]),[l,c]=(0,n.useState)(!1),[u,h]=(0,n.useState)(null),[m,p]=(0,n.useState)(""),[f,g]=(0,n.useState)("all"),[x,v]=(0,n.useState)(null),[b,y]=(0,n.useState)({totalRequests:0,pending:0,active:0,overdue:0,completed:0,rejected:0,totalAmount:0});(0,n.useEffect)(()=>{j()},[]);const j=async()=>{try{c(!0),h(null),console.log("[ADMIN_LOANS] \ud83d\udce5 Chargement des demandes de pr\xeats...");const[e,t]=await Promise.all([(0,ct.Or)(),(0,ct.k5)()]);if(e.success&&t.success){const s=e.data||[],n=t.data||[];console.log("[ADMIN_LOANS] \u2705 Pr\xeats charg\xe9s:",s.length),console.log("[ADMIN_LOANS] \u2705 Paiements charg\xe9s:",n.length);const r=s.map(e=>{var t,s,r,a,i,o,l,c,d,u,h,m,p,f,g,x,v,b,y;const j=n.filter(t=>t.loan_id===e.id).reduce((e,t)=>e+(t.amount||0),0),w=e.amount?e.amount*(1+(e.interest_rate||0)/100):0,N=w-j,S=e.approved_at?new Date(e.approved_at):null,k=e.duration_months||30,A=S?new Date(S.getTime()+24*k*60*60*1e3):null,{daysOverdue:_,penaltyAmount:E}=function(e){if(!e.approved_at||!e.amount)return{daysOverdue:0,penaltyAmount:0};const t=new Date(e.approved_at),s=e.duration_months||e.duration||30,n=new Date(t.getTime()+24*s*60*60*1e3),r=new Date;if(r<=n)return{daysOverdue:0,penaltyAmount:0};const a=Math.floor((r-n)/864e5),i=(e.amount||0)*((e.interest_rate||0)/100),o=(e.amount||0)+i,l=Math.floor(a/5);if(l<=0)return{daysOverdue:a,penaltyAmount:0};const c=o*Math.pow(1.02,l)-o;return{daysOverdue:a,penaltyAmount:Math.round(100*c)/100}}({approved_at:e.approved_at,duration_months:e.duration_months,duration:e.duration,amount:e.amount,interest_rate:e.interest_rate});return{id:e.id,userId:e.user_id,user:{id:e.user_id,firstName:(null===(t=e.users)||void 0===t?void 0:t.first_name)||"Utilisateur",lastName:(null===(s=e.users)||void 0===s?void 0:s.last_name)||"Inconnu",email:(null===(r=e.users)||void 0===r?void 0:r.email)||"email@inconnu.com",phone:(null===(a=e.users)||void 0===a?void 0:a.phone_number)||"Non sp\xe9cifi\xe9",dateOfBirth:null===(i=e.users)||void 0===i?void 0:i.date_of_birth,gender:null===(o=e.users)||void 0===o?void 0:o.gender,address:null===(l=e.users)||void 0===l?void 0:l.address,city:null===(c=e.users)||void 0===c?void 0:c.city,university:null===(d=e.users)||void 0===d?void 0:d.university,studentId:null===(u=e.users)||void 0===u?void 0:u.student_id,temoinName:null===(h=e.users)||void 0===h?void 0:h.temoin_name,temoinPhone:null===(m=e.users)||void 0===m?void 0:m.temoin_phone,temoinQuartier:null===(p=e.users)||void 0===p?void 0:p.temoin_quartier,identityCardUrl:null===(f=e.users)||void 0===f?void 0:f.identity_card_url,studentCardUrl:null===(g=e.users)||void 0===g?void 0:g.student_card_url,temoinIdentityCardUrl:null===(x=e.users)||void 0===x?void 0:x.temoin_identity_card_url,profileImageUrl:null===(v=e.users)||void 0===v?void 0:v.profile_image_url,status:null===(b=e.users)||void 0===b?void 0:b.status,createdAt:null===(y=e.users)||void 0===y?void 0:y.created_at},amount:e.amount||0,totalAmount:Math.round(w),paidAmount:Math.round(j),remainingAmount:Math.round(N),duration:e.duration_months||0,purpose:e.purpose||"Non sp\xe9cifi\xe9",status:e.status||"pending",requestDate:e.created_at||(new Date).toISOString(),dueDate:A?A.toISOString():null,guarantee:e.guarantee||"Non sp\xe9cifi\xe9e",employment_status:e.employment_status||"Non sp\xe9cifi\xe9",momoNumber:e.momo_number||"Non sp\xe9cifi\xe9",momoNetwork:e.momo_network||"Non sp\xe9cifi\xe9",momoName:e.momo_name||"Non sp\xe9cifi\xe9",interest_rate:e.interest_rate||0,monthly_payment:e.monthly_payment||0,approved_by:e.approved_by,approved_at:e.approved_at,daysOverdue:_,penaltyAmount:E}});o(r);const a=r.filter(e=>"pending"===e.status).length,i=r.filter(e=>"active"===e.status||"approved"===e.status||"overdue"===e.status).length,l=r.filter(e=>"overdue"===e.status).length,c=r.filter(e=>"completed"===e.status).length,d=r.filter(e=>"rejected"===e.status).length,u=r.reduce((e,t)=>e+t.amount,0);y({totalRequests:r.length,pending:a,active:i,overdue:l,completed:c,rejected:d,totalAmount:u})}else console.error("[ADMIN_LOANS] \u274c Erreur:",{loans:e.error,payments:t.error}),h("Erreur lors du chargement des demandes")}catch(u){console.error("[ADMIN_LOANS] \u274c Erreur:",u),h(u.message||"Une erreur est survenue")}finally{c(!1)}},w=a.reduce((e,t)=>{const s=t.userId;return e[s]||(e[s]={user:t.user,loans:[],stats:{newRequests:0,activeLoans:0,overdueLoans:0,completedLoans:0,rejectedLoans:0,totalBorrowed:0,totalPaid:0,activeLoanAmount:0,activeLoanInterest:0,dueDate:null,totalOverduePenalty:0,maxDaysOverdue:0}}),e[s].loans.push(t),"pending"===t.status&&e[s].stats.newRequests++,"active"!==t.status&&"approved"!==t.status&&"overdue"!==t.status||(e[s].stats.activeLoans++,("overdue"===t.status||t.daysOverdue>0&&"completed"!==t.status)&&(e[s].stats.overdueLoans++,e[s].stats.totalOverduePenalty+=t.penaltyAmount||0,e[s].stats.maxDaysOverdue=Math.max(e[s].stats.maxDaysOverdue||0,t.daysOverdue||0)),e[s].stats.activeLoanAmount+=t.amount||0,e[s].stats.activeLoanInterest+=Math.round((t.amount||0)*((t.interest_rate||0)/100)),t.dueDate&&(!e[s].stats.dueDate||new Date(t.dueDate)>new Date(e[s].stats.dueDate))&&(e[s].stats.dueDate=t.dueDate)),"completed"===t.status&&e[s].stats.completedLoans++,"rejected"===t.status&&e[s].stats.rejectedLoans++,e[s].stats.totalBorrowed+=t.amount,e[s].stats.totalPaid+=t.paidAmount,e},{}),N=Object.values(w).filter(e=>{const t=!m||((t,s,n,r)=>{const a=m.toLowerCase();return(null===(t=e.user.firstName)||void 0===t?void 0:t.toLowerCase().includes(a))||(null===(s=e.user.lastName)||void 0===s?void 0:s.toLowerCase().includes(a))||(null===(n=e.user.email)||void 0===n?void 0:n.toLowerCase().includes(a))||(null===(r=e.user.phone)||void 0===r?void 0:r.includes(a))})(),s="all"===f||("pending"===f?e.stats.newRequests>0:"active"===f?e.stats.activeLoans>0:"overdue"===f?e.stats.overdueLoans>0:"completed"===f?e.stats.completedLoans>0&&0===e.stats.newRequests&&0===e.stats.activeLoans:"rejected"!==f||e.stats.rejectedLoans>0);return t&&s}),S=e=>e.newRequests>0?(0,i.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 sm:px-3 py-1 rounded-full text-[10px] sm:text-xs font-semibold bg-yellow-100 text-yellow-700 whitespace-nowrap",children:[(0,i.jsx)(kp,{size:12,className:"sm:w-3.5 sm:h-3.5 flex-shrink-0"}),(0,i.jsxs)("span",{className:"hidden sm:inline",children:[e.newRequests," Nouvelle",e.newRequests>1?"s":""," demande",e.newRequests>1?"s":""]}),(0,i.jsxs)("span",{className:"sm:hidden",children:[e.newRequests," Nouv."]})]}):e.overdueLoans>0?(0,i.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 sm:px-3 py-1 rounded-full text-[10px] sm:text-xs font-semibold bg-orange-100 text-orange-700 whitespace-nowrap",children:[(0,i.jsx)(Kg,{size:12,className:"sm:w-3.5 sm:h-3.5 flex-shrink-0"}),(0,i.jsxs)("span",{className:"hidden sm:inline",children:[e.overdueLoans," Pr\xeat",e.overdueLoans>1?"s":""," en retard"]}),(0,i.jsxs)("span",{className:"sm:hidden",children:[e.overdueLoans," Retard"]})]}):e.activeLoans>0?(0,i.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 sm:px-3 py-1 rounded-full text-[10px] sm:text-xs font-semibold bg-blue-100 text-blue-700 whitespace-nowrap",children:[(0,i.jsx)(zg.A,{size:12,className:"sm:w-3.5 sm:h-3.5 flex-shrink-0"}),(0,i.jsxs)("span",{className:"hidden sm:inline",children:[e.activeLoans," Pr\xeat",e.activeLoans>1?"s":""," en cours"]}),(0,i.jsxs)("span",{className:"sm:hidden",children:[e.activeLoans," Actif",e.activeLoans>1?"s":""]})]}):e.completedLoans>0?(0,i.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 sm:px-3 py-1 rounded-full text-[10px] sm:text-xs font-semibold bg-green-100 text-green-700 whitespace-nowrap",children:[(0,i.jsx)(mt.A,{size:12,className:"sm:w-3.5 sm:h-3.5 flex-shrink-0"}),(0,i.jsxs)("span",{className:"hidden sm:inline",children:[e.completedLoans," Pr\xeat",e.completedLoans>1?"s":""," rembours\xe9",e.completedLoans>1?"s":""]}),(0,i.jsxs)("span",{className:"sm:hidden",children:[e.completedLoans," OK"]})]}):e.rejectedLoans>0?(0,i.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 sm:px-3 py-1 rounded-full text-[10px] sm:text-xs font-semibold bg-red-100 text-red-700 whitespace-nowrap",children:[(0,i.jsx)(Zg,{size:12,className:"sm:w-3.5 sm:h-3.5 flex-shrink-0"}),(0,i.jsxs)("span",{className:"hidden sm:inline",children:[e.rejectedLoans," Rejet\xe9",e.rejectedLoans>1?"s":""]}),(0,i.jsxs)("span",{className:"sm:hidden",children:[e.rejectedLoans," Rej."]})]}):null;return u?(0,i.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 flex items-center justify-center p-4",children:(0,i.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8 max-w-md w-full text-center",children:[(0,i.jsx)("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,i.jsx)(Kg,{size:32,className:"text-red-600"})}),(0,i.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Erreur de chargement"}),(0,i.jsx)("p",{className:"text-gray-600 mb-6",children:u}),(0,i.jsxs)("button",{onClick:j,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl transition-colors",children:[(0,i.jsx)(ai.A,{size:18}),"R\xe9essayer"]})]})}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 pb-24",children:[(0,i.jsx)("div",{className:"bg-white/80 backdrop-blur-lg shadow-lg border-b border-white/50 sticky top-0 z-30",children:(0,i.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{className:"flex items-center gap-4",children:[(0,i.jsx)("div",{className:"p-3 bg-gradient-to-br from-blue-500 to-purple-600 rounded-2xl shadow-lg",children:(0,i.jsx)(Hp.A,{size:32,className:"text-white"})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h1",{className:"text-3xl font-bold text-gray-900 font-montserrat",children:"AB Pret"}),(0,i.jsx)("p",{className:"text-gray-600 font-montserrat",children:"Gestion des demandes de pr\xeats"})]})]}),(0,i.jsxs)("button",{onClick:j,className:"flex items-center gap-2 px-4 py-2 bg-white hover:bg-gray-50 border border-gray-200 rounded-xl transition-all duration-200 shadow-sm hover:shadow",children:[(0,i.jsx)(ai.A,{size:18,className:"text-gray-600"}),(0,i.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Actualiser"})]})]})})}),(0,i.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[l&&(0,i.jsxs)("div",{className:"flex items-center justify-center gap-2 py-2 mb-4 text-gray-500 text-sm",children:[(0,i.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-blue-500 border-t-transparent"}),(0,i.jsx)("span",{children:"Chargement des demandes..."})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-6 mb-8 transition-opacity duration-200 ".concat(l?"opacity-75":""),children:[(0,i.jsxs)("div",{className:"bg-white rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-100 group",children:[(0,i.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,i.jsx)("div",{className:"p-3 bg-yellow-100 rounded-xl group-hover:scale-110 transition-transform duration-300",children:(0,i.jsx)(kp,{size:24,className:"text-yellow-600"})}),(0,i.jsxs)("div",{className:"text-right",children:[(0,i.jsx)("p",{className:"text-sm text-gray-600 font-medium",children:"En attente"}),(0,i.jsx)("p",{className:"text-3xl font-bold text-gray-900 mt-1",children:b.pending})]})]}),(0,i.jsx)("div",{className:"pt-4 border-t border-gray-100",children:(0,i.jsx)("span",{className:"text-xs text-gray-500",children:"Nouvelles demandes"})})]}),(0,i.jsxs)("div",{className:"bg-gradient-to-br from-blue-500 to-purple-600 rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 text-white group",children:[(0,i.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,i.jsx)("div",{className:"p-3 bg-white/20 rounded-xl group-hover:scale-110 transition-transform duration-300",children:(0,i.jsx)(zg.A,{size:24,className:"text-white"})}),(0,i.jsxs)("div",{className:"text-right",children:[(0,i.jsx)("p",{className:"text-sm text-blue-100 font-medium",children:"Pr\xeats actifs"}),(0,i.jsx)("p",{className:"text-3xl font-bold mt-1",children:b.active})]})]}),(0,i.jsxs)("div",{className:"flex items-center gap-2 pt-4 border-t border-white/20",children:[(0,i.jsx)(Vg.A,{size:16,className:"text-blue-200"}),(0,i.jsx)("span",{className:"text-sm text-blue-100",children:"En cours de remboursement"})]})]}),(0,i.jsxs)("div",{className:"bg-orange-50 rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 border border-orange-200 group",children:[(0,i.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,i.jsx)("div",{className:"p-3 bg-orange-100 rounded-xl group-hover:scale-110 transition-transform duration-300",children:(0,i.jsx)(Kg,{size:24,className:"text-orange-600"})}),(0,i.jsxs)("div",{className:"text-right",children:[(0,i.jsx)("p",{className:"text-sm text-orange-700 font-medium",children:"En retard"}),(0,i.jsx)("p",{className:"text-3xl font-bold text-orange-900 mt-1",children:b.overdue})]})]}),(0,i.jsx)("div",{className:"pt-4 border-t border-orange-200",children:(0,i.jsx)("span",{className:"text-xs text-orange-700",children:"Avec p\xe9nalit\xe9s"})})]}),(0,i.jsxs)("div",{className:"bg-white rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-100 group",children:[(0,i.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,i.jsx)("div",{className:"p-3 bg-green-100 rounded-xl group-hover:scale-110 transition-transform duration-300",children:(0,i.jsx)(mt.A,{size:24,className:"text-green-600"})}),(0,i.jsxs)("div",{className:"text-right",children:[(0,i.jsx)("p",{className:"text-sm text-gray-600 font-medium",children:"Rembours\xe9s"}),(0,i.jsx)("p",{className:"text-3xl font-bold text-gray-900 mt-1",children:b.completed})]})]}),(0,i.jsx)("div",{className:"pt-4 border-t border-gray-100",children:(0,i.jsx)("span",{className:"text-xs text-gray-500",children:"Pr\xeats termin\xe9s"})})]}),(0,i.jsxs)("div",{className:"bg-white rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-100 group",children:[(0,i.jsxs)("div",{className:"flex flex-col items-center text-center mb-4",children:[(0,i.jsx)("div",{className:"p-3 bg-purple-100 rounded-xl group-hover:scale-110 transition-transform duration-300 mb-3",children:(0,i.jsx)(Qp,{size:24,className:"text-purple-600"})}),(0,i.jsx)("p",{className:"text-sm text-gray-600 font-medium",children:"Montant total"}),(0,i.jsx)("p",{className:"text-xl font-bold text-gray-900 mt-1 w-full text-center",children:(0,Dp.vv)(b.totalAmount)})]}),(0,i.jsx)("div",{className:"pt-4 border-t border-gray-100 text-center",children:(0,i.jsx)("span",{className:"text-xs text-gray-500",children:"Capital total des pr\xeats"})})]})]}),(0,i.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 p-4 mb-6",children:[(0,i.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,i.jsxs)("div",{className:"flex-1 relative",children:[(0,i.jsx)(Jg,{size:20,className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,i.jsx)("input",{type:"text",placeholder:"Rechercher par nom, email ou t\xe9l\xe9phone...",value:m,onChange:e=>p(e.target.value),className:"w-full pl-12 pr-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent font-montserrat"})]}),(0,i.jsxs)("div",{className:"flex items-center gap-2 sm:min-w-[250px]",children:[(0,i.jsx)(Qg,{size:20,className:"text-gray-400 flex-shrink-0"}),(0,i.jsxs)("select",{value:f,onChange:e=>g(e.target.value),className:"flex-1 px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent font-montserrat bg-white cursor-pointer",children:[(0,i.jsx)("option",{value:"all",children:"Tous les statuts"}),(0,i.jsx)("option",{value:"pending",children:"\ud83d\udfe1 En attente"}),(0,i.jsx)("option",{value:"active",children:"\ud83d\udd35 En cours"}),(0,i.jsx)("option",{value:"overdue",children:"\ud83d\udfe0 En retard"}),(0,i.jsx)("option",{value:"completed",children:"\ud83d\udfe2 Rembours\xe9s"}),(0,i.jsx)("option",{value:"rejected",children:"\ud83d\udd34 Rejet\xe9s"})]})]})]}),(m||"all"!==f)&&(0,i.jsxs)("div",{className:"flex items-center gap-2 mt-3 pt-3 border-t border-gray-100",children:[(0,i.jsx)("span",{className:"text-sm text-gray-600",children:"Filtres actifs:"}),m&&(0,i.jsxs)("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-xs font-medium",children:['Recherche: "',m,'"',(0,i.jsx)("button",{onClick:()=>p(""),className:"hover:bg-blue-200 rounded-full p-0.5 transition-colors",children:(0,i.jsx)(xt,{size:12})})]}),"all"!==f&&(0,i.jsxs)("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-purple-100 text-purple-700 rounded-full text-xs font-medium",children:["Statut: ","pending"===f?"En attente":"active"===f?"En cours":"overdue"===f?"En retard":"completed"===f?"Rembours\xe9s":"Rejet\xe9s",(0,i.jsx)("button",{onClick:()=>g("all"),className:"hover:bg-purple-200 rounded-full p-0.5 transition-colors",children:(0,i.jsx)(xt,{size:12})})]}),(0,i.jsx)("button",{onClick:()=>{p(""),g("all")},className:"ml-auto text-xs text-gray-500 hover:text-gray-700 font-medium",children:"R\xe9initialiser tout"})]})]}),(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,i.jsxs)("h2",{className:"text-xl font-bold text-gray-900 font-montserrat",children:["Clients (",N.length,")"]})}),0===N.length?(0,i.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 p-12 text-center",children:[(0,i.jsx)(mi,{size:64,className:"mx-auto text-gray-300 mb-4"}),(0,i.jsx)("p",{className:"text-gray-500 font-medium",children:"Aucun client trouv\xe9"}),m&&(0,i.jsx)("button",{onClick:()=>p(""),className:"mt-4 text-blue-600 hover:text-blue-700 font-medium",children:"Effacer la recherche"})]}):(0,i.jsx)("div",{className:"grid grid-cols-1 gap-4",children:N.map(e=>{var t,s;return(0,i.jsx)("div",{className:"bg-white rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-100 overflow-hidden group cursor-pointer",onClick:()=>v(e),children:(0,i.jsxs)("div",{className:"p-4 sm:p-6",children:[(0,i.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-3 mb-4",children:[(0,i.jsxs)("div",{className:"flex items-start gap-3 min-w-0 flex-1",children:[(0,i.jsxs)("div",{className:"w-12 h-12 sm:w-14 sm:h-14 bg-gradient-to-br from-blue-400 to-purple-500 rounded-full flex items-center justify-center text-white font-bold text-lg sm:text-xl shadow-lg flex-shrink-0",children:[(null===(t=e.user.firstName)||void 0===t?void 0:t[0])||"?",(null===(s=e.user.lastName)||void 0===s?void 0:s[0])||""]}),(0,i.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,i.jsxs)("h3",{className:"text-base sm:text-lg font-bold text-gray-900 font-montserrat truncate",children:[e.user.firstName," ",e.user.lastName]}),(0,i.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-3 mt-1",children:[(0,i.jsxs)("div",{className:"flex items-center gap-1 text-xs sm:text-sm text-gray-500 min-w-0",children:[(0,i.jsx)(bf,{size:12,className:"flex-shrink-0"}),(0,i.jsx)("span",{className:"truncate",children:e.user.email})]}),e.user.phone&&(0,i.jsxs)("div",{className:"flex items-center gap-1 text-xs sm:text-sm text-gray-500",children:[(0,i.jsx)(vf,{size:12,className:"flex-shrink-0"}),(0,i.jsx)("span",{children:e.user.phone})]})]})]})]}),(0,i.jsx)("div",{className:"flex-shrink-0",children:S(e.stats)})]}),(0,i.jsxs)("div",{className:"grid grid-cols-3 gap-2 sm:gap-4 mb-4",children:[(0,i.jsxs)("div",{className:"bg-yellow-50 rounded-xl p-2 sm:p-3 text-center",children:[(0,i.jsx)("p",{className:"text-xl sm:text-2xl font-bold text-yellow-700",children:e.stats.newRequests}),(0,i.jsx)("p",{className:"text-[10px] sm:text-xs text-gray-600 mt-1",children:"Nouvelles"})]}),(0,i.jsxs)("div",{className:"bg-blue-50 rounded-xl p-2 sm:p-3 text-center",children:[(0,i.jsx)("p",{className:"text-xl sm:text-2xl font-bold text-blue-700",children:e.stats.activeLoans}),(0,i.jsx)("p",{className:"text-[10px] sm:text-xs text-gray-600 mt-1",children:"En cours"})]}),(0,i.jsxs)("div",{className:"bg-green-50 rounded-xl p-2 sm:p-3 text-center",children:[(0,i.jsx)("p",{className:"text-xl sm:text-2xl font-bold text-green-700",children:e.stats.completedLoans}),(0,i.jsx)("p",{className:"text-[10px] sm:text-xs text-gray-600 mt-1",children:"Rembours\xe9s"})]})]}),(0,i.jsxs)("div",{className:"flex flex-col gap-3 pt-4 border-t border-gray-100",children:[(0,i.jsxs)("div",{className:"flex flex-wrap items-center gap-x-4 gap-y-1 text-xs sm:text-sm text-gray-600",children:[(0,i.jsxs)("span",{className:"truncate",children:["Total emprunt\xe9: ",(0,i.jsx)("span",{className:"font-bold text-gray-900",children:(0,Dp.vv)(e.stats.totalBorrowed)})]}),(0,i.jsxs)("span",{className:"truncate",children:["Total pay\xe9: ",(0,i.jsx)("span",{className:"font-bold text-green-600",children:(0,Dp.vv)(e.stats.totalPaid)})]}),e.stats.activeLoans>0&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("span",{className:"truncate",children:["Pr\xeat en cours: ",(0,i.jsx)("span",{className:"font-bold text-blue-700",children:(0,Dp.vv)(e.stats.activeLoanAmount)})]}),(0,i.jsxs)("span",{className:"truncate",children:["Int\xe9r\xeat \xe0 rembourser: ",(0,i.jsx)("span",{className:"font-bold text-orange-600",children:(0,Dp.vv)(e.stats.activeLoanInterest)})]}),e.stats.dueDate&&(0,i.jsxs)("span",{className:"truncate flex items-center gap-1",children:[(0,i.jsx)(Yg.A,{size:14,className:"text-purple-600"}),"Date d'\xe9ch\xe9ance: ",(0,i.jsx)("span",{className:"font-bold text-purple-700",children:new Date(e.stats.dueDate).toLocaleDateString("fr-FR",{day:"numeric",month:"short",year:"numeric"})})]}),e.stats.overdueLoans>0&&(0,i.jsxs)("span",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-lg bg-orange-100 text-orange-800 border border-orange-200 text-xs font-semibold",children:[(0,i.jsx)(Kg,{size:14}),"En retard \u2014 ",e.stats.maxDaysOverdue," jour",e.stats.maxDaysOverdue>1?"s":"",e.stats.totalOverduePenalty>0&&(0,i.jsxs)("span",{className:"font-bold",children:["\u2022 P\xe9nalit\xe9 : ",(0,Dp.vv)(Math.round(100*e.stats.totalOverduePenalty)/100)]})]})]})]}),(0,i.jsxs)("button",{className:"flex items-center justify-center gap-2 px-3 sm:px-4 py-2 bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white rounded-xl transition-all duration-200 shadow-md hover:shadow-lg w-full sm:w-auto",children:[(0,i.jsx)(wf,{size:16}),(0,i.jsx)("span",{className:"text-sm font-medium",children:"Voir le profil"})]})]})]})},e.user.id)})})]})]})]}),x&&(0,i.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md z-50 flex items-center justify-center p-4 overflow-y-auto",children:(0,i.jsxs)("div",{className:"bg-white rounded-3xl shadow-2xl max-w-6xl w-full my-8 max-h-[95vh] overflow-hidden",children:[(0,i.jsx)("div",{className:"sticky top-0 bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-600 text-white p-6 rounded-t-3xl z-10",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{className:"flex items-center gap-4",children:[(0,i.jsxs)("div",{className:"w-16 h-16 bg-white/20 backdrop-blur-sm rounded-2xl flex items-center justify-center text-white font-bold text-2xl shadow-lg",children:[null===(e=x.user.firstName)||void 0===e?void 0:e[0],null===(t=x.user.lastName)||void 0===t?void 0:t[0]]}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("h3",{className:"text-2xl font-bold",children:[x.user.firstName," ",x.user.lastName]}),(0,i.jsxs)("p",{className:"text-indigo-100 flex items-center gap-2",children:[(0,i.jsx)(mi,{size:16}),x.loans.length," demande",x.loans.length>1?"s":""," de pr\xeat"]})]})]}),(0,i.jsx)("button",{onClick:()=>v(null),className:"p-3 hover:bg-white/20 rounded-2xl transition-all duration-200 hover:scale-105",children:(0,i.jsx)(xt,{size:24})})]})}),(0,i.jsxs)("div",{className:"p-6 pb-32 space-y-8 max-h-[calc(95vh-200px)] overflow-y-auto",children:[(0,i.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-2xl p-6 border border-blue-100",children:[(0,i.jsxs)("h4",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center gap-3",children:[(0,i.jsx)("div",{className:"p-2 bg-blue-100 rounded-xl",children:(0,i.jsx)(mi,{size:20,className:"text-blue-600"})}),"Informations Personnelles"]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"text-sm font-medium text-gray-600",children:"Nom complet"}),(0,i.jsxs)("p",{className:"text-lg font-semibold text-gray-900",children:[x.user.firstName," ",x.user.lastName]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"text-sm font-medium text-gray-600",children:"Email"}),(0,i.jsx)("p",{className:"text-gray-900",children:x.user.email})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"text-sm font-medium text-gray-600",children:"T\xe9l\xe9phone"}),(0,i.jsx)("p",{className:"text-gray-900",children:x.user.phone})]}),x.user.dateOfBirth&&(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"text-sm font-medium text-gray-600",children:"Date de naissance"}),(0,i.jsx)("p",{className:"text-gray-900",children:new Date(x.user.dateOfBirth).toLocaleDateString("fr-FR")})]})]}),(0,i.jsxs)("div",{className:"space-y-4",children:[x.user.university&&(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"text-sm font-medium text-gray-600",children:"Universit\xe9"}),(0,i.jsx)("p",{className:"text-gray-900",children:x.user.university})]}),x.user.studentId&&(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"text-sm font-medium text-gray-600",children:"Num\xe9ro \xe9tudiant"}),(0,i.jsx)("p",{className:"text-gray-900",children:x.user.studentId})]}),x.user.address&&(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"text-sm font-medium text-gray-600",children:"Adresse"}),(0,i.jsx)("p",{className:"text-gray-900",children:x.user.address})]}),x.user.city&&(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"text-sm font-medium text-gray-600",children:"Ville"}),(0,i.jsx)("p",{className:"text-gray-900",children:x.user.city})]})]}),(0,i.jsxs)("div",{className:"space-y-4",children:[x.user.temoinName&&(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"text-sm font-medium text-gray-600",children:"T\xe9moin"}),(0,i.jsx)("p",{className:"text-gray-900",children:x.user.temoinName})]}),x.user.temoinPhone&&(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"text-sm font-medium text-gray-600",children:"T\xe9l\xe9phone t\xe9moin"}),(0,i.jsx)("p",{className:"text-gray-900",children:x.user.temoinPhone})]}),x.user.temoinQuartier&&(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"text-sm font-medium text-gray-600",children:"Quartier t\xe9moin"}),(0,i.jsx)("p",{className:"text-gray-900",children:x.user.temoinQuartier})]})]})]})]}),(0,i.jsxs)("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 rounded-2xl p-6 border border-green-100",children:[(0,i.jsxs)("h4",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center gap-3",children:[(0,i.jsx)("div",{className:"p-2 bg-green-100 rounded-xl",children:(0,i.jsx)(Zp,{size:20,className:"text-green-600"})}),"Documents Fournis"]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[x.user.identityCardUrl&&(0,i.jsxs)("div",{className:"bg-white rounded-xl p-4 border border-green-200",children:[(0,i.jsx)("h5",{className:"font-semibold text-gray-900 mb-2",children:"Carte d'identit\xe9"}),(0,i.jsxs)("a",{href:x.user.identityCardUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 text-green-600 hover:text-green-700 font-medium",children:[(0,i.jsx)(wf,{size:16}),"Voir le document"]})]}),x.user.studentCardUrl&&(0,i.jsxs)("div",{className:"bg-white rounded-xl p-4 border border-green-200",children:[(0,i.jsx)("h5",{className:"font-semibold text-gray-900 mb-2",children:"Carte \xe9tudiante"}),(0,i.jsxs)("a",{href:x.user.studentCardUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 text-green-600 hover:text-green-700 font-medium",children:[(0,i.jsx)(wf,{size:16}),"Voir le document"]})]}),x.user.temoinIdentityCardUrl&&(0,i.jsxs)("div",{className:"bg-white rounded-xl p-4 border border-green-200",children:[(0,i.jsx)("h5",{className:"font-semibold text-gray-900 mb-2",children:"Carte d'identit\xe9 t\xe9moin"}),(0,i.jsxs)("a",{href:x.user.temoinIdentityCardUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 text-green-600 hover:text-green-700 font-medium",children:[(0,i.jsx)(wf,{size:16}),"Voir le document"]})]})]})]}),(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsxs)("h4",{className:"text-xl font-bold text-gray-900 flex items-center gap-3",children:[(0,i.jsx)("div",{className:"p-2 bg-purple-100 rounded-xl",children:(0,i.jsx)(Hp.A,{size:20,className:"text-purple-600"})}),"Demandes de Pr\xeat"]}),(0,i.jsx)("div",{className:"space-y-6",children:x.loans.map(e=>(0,i.jsxs)("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100 rounded-2xl p-6 border border-gray-200 shadow-sm",children:[(0,i.jsx)("div",{className:"flex items-start justify-between mb-6",children:(0,i.jsxs)("div",{className:"flex-1",children:[(0,i.jsxs)("div",{className:"flex items-center gap-4 mb-3",children:[(0,i.jsx)("div",{className:"text-3xl font-bold text-gray-900",children:(0,Dp.vv)(e.amount)}),(0,i.jsxs)("span",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full text-sm font-semibold ".concat("pending"===e.status?"bg-yellow-100 text-yellow-700 border border-yellow-200":"active"===e.status||"approved"===e.status||"overdue"===e.status?"bg-blue-100 text-blue-700 border border-blue-200":"completed"===e.status?"bg-green-100 text-green-700 border border-green-200":"bg-red-100 text-red-700 border border-red-200"),children:["pending"===e.status&&(0,i.jsx)(kp,{size:16}),("active"===e.status||"approved"===e.status||"overdue"===e.status)&&(0,i.jsx)(zg.A,{size:16}),"completed"===e.status&&(0,i.jsx)(mt.A,{size:16}),"rejected"===e.status&&(0,i.jsx)(Zg,{size:16}),"pending"===e.status?"En attente":"active"===e.status||"approved"===e.status||"overdue"===e.status?"overdue"===e.status?"En cours (retard)":"En cours":"completed"===e.status?"Rembours\xe9":"Rejet\xe9"]}),("overdue"===e.status||e.daysOverdue>0&&"completed"!==e.status)&&(0,i.jsxs)("span",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full text-sm font-semibold bg-orange-100 text-orange-800 border-2 border-orange-300",children:[(0,i.jsx)(Kg,{size:16}),"En retard \u2014 ",e.daysOverdue," jour",e.daysOverdue>1?"s":"",e.penaltyAmount>0&&(0,i.jsxs)("span",{className:"ml-1",children:["\u2022 P\xe9nalit\xe9 : ",(0,Dp.vv)(e.penaltyAmount)]})]})]}),(0,i.jsx)("p",{className:"text-gray-600 text-lg",children:e.purpose})]})}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[(0,i.jsxs)("div",{className:"bg-white rounded-xl p-4 border border-gray-200",children:[(0,i.jsx)("h5",{className:"font-semibold text-gray-900 mb-2",children:"Dur\xe9e"}),(0,i.jsxs)("p",{className:"text-2xl font-bold text-blue-600",children:[e.duration," jours"]})]}),(0,i.jsxs)("div",{className:"bg-white rounded-xl p-4 border border-gray-200",children:[(0,i.jsx)("h5",{className:"font-semibold text-gray-900 mb-2",children:"Taux d'int\xe9r\xeat"}),(0,i.jsxs)("p",{className:"text-2xl font-bold text-purple-600",children:[e.interest_rate,"%"]})]}),(0,i.jsxs)("div",{className:"bg-white rounded-xl p-4 border border-gray-200",children:[(0,i.jsx)("h5",{className:"font-semibold text-gray-900 mb-2",children:"Montant total"}),(0,i.jsx)("p",{className:"text-2xl font-bold text-green-600",children:(0,Dp.vv)(e.totalAmount)})]}),(0,i.jsxs)("div",{className:"bg-white rounded-xl p-4 border border-gray-200",children:[(0,i.jsx)("h5",{className:"font-semibold text-gray-900 mb-2",children:"Pay\xe9"}),(0,i.jsx)("p",{className:"text-2xl font-bold text-emerald-600",children:(0,Dp.vv)(e.paidAmount)})]}),("active"===e.status||"approved"===e.status||"overdue"===e.status)&&(e.interest_rate||0)>0&&(0,i.jsxs)("div",{className:"bg-amber-50 rounded-xl p-4 border border-amber-200 md:col-span-2 lg:col-span-4",children:[(0,i.jsx)("h5",{className:"font-semibold text-amber-900 mb-2",children:"Int\xe9r\xeats \xe0 rembourser"}),(0,i.jsx)("p",{className:"text-2xl font-bold text-amber-700",children:(0,Dp.vv)(Math.round((e.amount||0)*((e.interest_rate||0)/100)))}),(0,i.jsxs)("p",{className:"text-xs text-amber-700 mt-1",children:["Taux du pr\xeat : ",e.interest_rate,"% sur le capital"]})]}),("overdue"===e.status||e.daysOverdue>0)&&e.penaltyAmount>0&&(0,i.jsxs)("div",{className:"bg-orange-50 rounded-xl p-4 border border-orange-200 md:col-span-2 lg:col-span-4",children:[(0,i.jsxs)("h5",{className:"font-semibold text-orange-900 mb-2 flex items-center gap-2",children:[(0,i.jsx)(Kg,{size:18}),"P\xe9nalit\xe9 \xe0 rembourser (retard)"]}),(0,i.jsx)("p",{className:"text-2xl font-bold text-orange-700",children:(0,Dp.vv)(e.penaltyAmount)}),(0,i.jsxs)("p",{className:"text-xs text-orange-700 mt-1",children:[e.daysOverdue," jour",e.daysOverdue>1?"s":""," de retard \u2014 2% tous les 5 jours"]})]})]}),e.momoNumber&&"Non sp\xe9cifi\xe9"!==e.momoNumber&&(0,i.jsxs)("div",{className:"bg-blue-50 rounded-xl p-4 mb-6 border border-blue-200",children:[(0,i.jsxs)("h5",{className:"font-semibold text-blue-900 mb-4 flex items-center gap-2",children:[(0,i.jsx)(Hp.A,{size:18}),"Informations MoMo"]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"text-sm font-medium text-blue-700",children:"Num\xe9ro"}),(0,i.jsx)("p",{className:"text-lg font-bold text-blue-900",children:e.momoNumber})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"text-sm font-medium text-blue-700",children:"R\xe9seau"}),(0,i.jsx)("p",{className:"text-lg font-bold text-blue-900",children:e.momoNetwork})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"text-sm font-medium text-blue-700",children:"Nom sur le compte"}),(0,i.jsx)("p",{className:"text-lg font-bold text-blue-900",children:e.momoName})]})]})]}),e.guarantee&&"Non sp\xe9cifi\xe9e"!==e.guarantee&&(0,i.jsxs)("div",{className:"bg-orange-50 rounded-xl p-4 mb-6 border border-orange-200",children:[(0,i.jsxs)("h5",{className:"font-semibold text-orange-900 mb-2 flex items-center gap-2",children:[(0,i.jsx)(pf,{size:18}),"Garanties"]}),(0,i.jsx)("p",{className:"text-orange-900",children:e.guarantee})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[(0,i.jsxs)("div",{className:"bg-white rounded-xl p-4 border border-gray-200",children:[(0,i.jsx)("h5",{className:"font-semibold text-gray-900 mb-2",children:"Date de demande"}),(0,i.jsx)("p",{className:"text-gray-600",children:new Date(e.requestDate).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),(0,i.jsxs)("div",{className:"bg-white rounded-xl p-4 border border-gray-200",children:[(0,i.jsx)("h5",{className:"font-semibold text-gray-900 mb-2",children:"Date d'\xe9ch\xe9ance"}),(0,i.jsx)("p",{className:"text-gray-600",children:e.dueDate?new Date(e.dueDate).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric"}):"Non approuv\xe9"})]})]}),"pending"===e.status&&(0,i.jsxs)("div",{className:"flex gap-4 pt-6 border-t border-gray-200",children:[(0,i.jsxs)("button",{onClick:t=>{t.stopPropagation(),(async e=>{try{(await(0,ct.E$)(e,"approved")).success?(o(t=>t.map(t=>t.id===e?(0,d.A)((0,d.A)({},t),{},{status:"approved"}):t)),s("Demande approuv\xe9e avec succ\xe8s"),j()):r("Erreur lors de l'approbation")}catch(u){console.error("[ADMIN_LOANS] Erreur approbation:",u),r("Erreur lors de l'approbation")}})(e.id)},className:"flex-1 flex items-center justify-center gap-3 px-6 py-4 bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white rounded-xl transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105 font-semibold",children:[(0,i.jsx)($g,{size:20}),"Approuver la demande"]}),(0,i.jsxs)("button",{onClick:t=>{t.stopPropagation(),(async e=>{try{console.log("[ADMIN_LOANS] \u274c Tentative de rejet du pr\xeat:",e);const a=await(0,ct.E$)(e,"rejected");var t,n;a.success?(console.log("[ADMIN_LOANS] \u2705 Pr\xeat rejet\xe9 avec succ\xe8s"),o(t=>t.map(t=>t.id===e?(0,d.A)((0,d.A)({},t),{},{status:"rejected"}):t)),s("Demande rejet\xe9e avec succ\xe8s"),j()):(console.error("[ADMIN_LOANS] \u274c Erreur rejet:",a.error),null!==(t=a.error)&&void 0!==t&&t.includes("contrainte")||null!==(n=a.error)&&void 0!==n&&n.includes("constraint")?r("Erreur: La base de donn\xe9es doit \xeatre mise \xe0 jour. Veuillez contacter l'administrateur."):r(a.error||"Erreur lors du rejet de la demande"))}catch(u){console.error("[ADMIN_LOANS] \u274c Erreur rejet:",u),r(u.message||"Erreur lors du rejet")}})(e.id)},className:"flex-1 flex items-center justify-center gap-3 px-6 py-4 bg-gradient-to-r from-red-500 to-pink-600 hover:from-red-600 hover:to-pink-700 text-white rounded-xl transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105 font-semibold",children:[(0,i.jsx)(Xg,{size:20}),"Rejeter la demande"]})]})]},e.id))})]})]})]})})]})},tx=(0,pt.A)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),sx=(0,pt.A)("FileImage",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["circle",{cx:"10",cy:"13",r:"2",key:"6v46hv"}],["path",{d:"m20 17-1.09-1.09a2 2 0 0 0-2.82 0L10 22",key:"17vly1"}]]),nx=()=>{const e=(0,Ge.Zp)(),{showSuccess:t,showError:s}=yt(),[r,a]=(0,n.useState)([]),[o,l]=(0,n.useState)(!1),[c,d]=(0,n.useState)(""),[u,h]=(0,n.useState)("all"),[m,p]=(0,n.useState)(null),[f,g]=(0,n.useState)(!1),[x,v]=(0,n.useState)(!1),[b,y]=(0,n.useState)({url:"",title:""}),[j,w]=(0,n.useState)(!1),[N,S]=(0,n.useState)(!1);(0,n.useEffect)(()=>{k()},[]);const k=async()=>{try{l(!0);const e=await(0,ct.CF)();if(e.success){const t=e.data.map(e=>({id:e.id,firstName:e.first_name||"Utilisateur",lastName:e.last_name||"Inconnu",email:e.email||"email@inconnu.com",phone:e.phone_number||"Non renseign\xe9",status:e.status||"pending",registrationDate:e.created_at||(new Date).toISOString(),totalLoans:e.totalLoans||0,activeLoans:e.activeLoans||0,totalAmount:e.totalAmount||0,verified:"approved"===e.status,filiere:e.filiere||"Non sp\xe9cifi\xe9e",anneeEtude:e.annee_etude||"Non sp\xe9cifi\xe9e",entite:e.entite||"Non sp\xe9cifi\xe9e",address:e.address||"Non sp\xe9cifi\xe9e",facebookName:e.facebook_name||"Non sp\xe9cifi\xe9",temoinName:e.temoin_name||"Non sp\xe9cifi\xe9",temoinQuartier:e.temoin_quartier||"Non sp\xe9cifi\xe9",temoinPhone:e.temoin_phone||"Non sp\xe9cifi\xe9",temoinEmail:e.temoin_email||"Non sp\xe9cifi\xe9",emergencyName:e.emergency_name||"Non sp\xe9cifi\xe9",emergencyRelation:e.emergency_relation||"Non sp\xe9cifi\xe9",emergencyPhone:e.emergency_phone||"Non sp\xe9cifi\xe9",emergencyEmail:e.emergency_email||"Non sp\xe9cifi\xe9",emergencyAddress:e.emergency_address||"Non sp\xe9cifi\xe9",userIdentityCard:e.user_identity_card_name||"Non sp\xe9cifi\xe9",temoinIdentityCard:e.temoin_identity_card_name||"Non sp\xe9cifi\xe9",studentCard:e.student_card_name||"Non sp\xe9cifi\xe9",userIdentityCardUrl:e.user_identity_card_url||null,temoinIdentityCardUrl:e.temoin_identity_card_url||null,studentCardUrl:e.student_card_url||null}));a(t)}else s("Erreur lors du chargement des utilisateurs")}catch(e){console.error("[ADMIN] Erreur:",e),s("Erreur lors du chargement des utilisateurs")}finally{l(!1)}},A=(e,t)=>{e&&(y({url:e,title:t}),v(!0))},_=e=>{const t={approved:{bg:"bg-green-100",text:"text-green-700",label:"Approuv\xe9",icon:mt.A},pending:{bg:"bg-yellow-100",text:"text-yellow-700",label:"En attente",icon:Kg},rejected:{bg:"bg-red-100",text:"text-red-700",label:"Rejet\xe9",icon:Zg}},s=t[e]||t.pending,n=s.icon;return(0,i.jsxs)("span",{className:"inline-flex items-center gap-1.5 px-3 py-1 rounded-full text-xs font-medium ".concat(s.bg," ").concat(s.text),children:[(0,i.jsx)(n,{size:14}),s.label]})},E=r.filter(e=>{const t=e.firstName.toLowerCase().includes(c.toLowerCase())||e.lastName.toLowerCase().includes(c.toLowerCase())||e.email.toLowerCase().includes(c.toLowerCase())||e.phone.includes(c),s="all"===u||e.status===u;return t&&s}),C={total:r.length,approved:r.filter(e=>"approved"===e.status).length,pending:r.filter(e=>"pending"===e.status).length,rejected:r.filter(e=>"rejected"===e.status).length};return(0,i.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-yellow-50 to-slate-100 pb-24",children:[(0,i.jsx)("div",{className:"bg-white/80 backdrop-blur-lg shadow-lg border-b border-white/50 sticky top-0 z-30",children:(0,i.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,i.jsxs)("div",{className:"flex items-center justify-between py-6",children:[(0,i.jsxs)("div",{className:"flex items-center gap-4",children:[(0,i.jsx)("button",{onClick:()=>e("/admin/menu"),className:"p-2 hover:bg-gray-100 rounded-xl transition-colors",children:(0,i.jsx)(Mf.A,{size:24,className:"text-gray-600"})}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("h1",{className:"text-3xl font-bold text-secondary-900 font-montserrat flex items-center gap-3",children:[(0,i.jsx)(tx,{className:"text-primary-600",size:32}),"Gestion des Utilisateurs"]}),(0,i.jsxs)("p",{className:"text-gray-600 font-montserrat mt-1",children:[E.length," utilisateur",E.length>1?"s":""]})]})]}),(0,i.jsxs)("button",{onClick:k,className:"flex items-center gap-2 px-4 py-2 bg-primary-500 hover:bg-primary-600 text-white rounded-xl font-medium transition-all duration-200",children:[(0,i.jsx)(ai.A,{size:18}),(0,i.jsx)("span",{className:"hidden sm:inline",children:"Actualiser"})]})]})})}),(0,i.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[o&&(0,i.jsxs)("div",{className:"flex items-center justify-center gap-2 py-2 mb-4 text-gray-500 text-sm",children:[(0,i.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-purple-500 border-t-transparent"}),(0,i.jsx)("span",{children:"Chargement des utilisateurs..."})]}),(0,i.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8 transition-opacity duration-200 ".concat(o?"opacity-75":""),children:[(0,i.jsx)("div",{className:"bg-white rounded-2xl p-6 shadow-lg border border-gray-100",children:(0,i.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,i.jsx)("div",{className:"p-3 bg-secondary-100 rounded-xl",children:(0,i.jsx)(tx,{size:24,className:"text-secondary-700"})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-sm text-gray-600 font-medium",children:"Total"}),(0,i.jsx)("p",{className:"text-2xl font-bold text-secondary-900",children:C.total})]})]})}),(0,i.jsx)("div",{className:"bg-white rounded-2xl p-6 shadow-lg border border-gray-100",children:(0,i.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,i.jsx)("div",{className:"p-3 bg-green-100 rounded-xl",children:(0,i.jsx)(mt.A,{size:24,className:"text-green-600"})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-sm text-gray-600 font-medium",children:"Approuv\xe9s"}),(0,i.jsx)("p",{className:"text-2xl font-bold text-secondary-900",children:C.approved})]})]})}),(0,i.jsx)("div",{className:"bg-white rounded-2xl p-6 shadow-lg border border-gray-100",children:(0,i.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,i.jsx)("div",{className:"p-3 bg-primary-100 rounded-xl",children:(0,i.jsx)(Kg,{size:24,className:"text-primary-700"})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-sm text-gray-600 font-medium",children:"En attente"}),(0,i.jsx)("p",{className:"text-2xl font-bold text-secondary-900",children:C.pending})]})]})}),(0,i.jsx)("div",{className:"bg-white rounded-2xl p-6 shadow-lg border border-gray-100",children:(0,i.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,i.jsx)("div",{className:"p-3 bg-red-100 rounded-xl",children:(0,i.jsx)(Zg,{size:24,className:"text-red-600"})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-sm text-gray-600 font-medium",children:"Rejet\xe9s"}),(0,i.jsx)("p",{className:"text-2xl font-bold text-secondary-900",children:C.rejected})]})]})})]}),(0,i.jsx)("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 p-6 mb-8",children:(0,i.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,i.jsxs)("div",{className:"flex-1 relative",children:[(0,i.jsx)(Jg,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),(0,i.jsx)("input",{type:"text",placeholder:"Rechercher par nom, email ou t\xe9l\xe9phone...",value:c,onChange:e=>d(e.target.value),className:"w-full pl-12 pr-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all"})]}),(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsx)(Qg,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),(0,i.jsxs)("select",{value:u,onChange:e=>h(e.target.value),className:"pl-12 pr-8 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all appearance-none bg-white cursor-pointer min-w-[200px]",children:[(0,i.jsx)("option",{value:"all",children:"Tous les statuts"}),(0,i.jsx)("option",{value:"approved",children:"Approuv\xe9s"}),(0,i.jsx)("option",{value:"pending",children:"En attente"}),(0,i.jsx)("option",{value:"rejected",children:"Rejet\xe9s"})]})]})]})}),(0,i.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:E.map(e=>(0,i.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden hover:shadow-xl transition-all duration-300",children:[(0,i.jsx)("div",{className:"bg-gradient-to-r from-secondary-800 to-secondary-900 p-6",children:(0,i.jsxs)("div",{className:"flex items-center gap-4",children:[(0,i.jsx)("div",{className:"w-16 h-16 bg-white rounded-full flex items-center justify-center shadow-lg",children:(0,i.jsx)(mi,{size:32,className:"text-primary-600"})}),(0,i.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,i.jsxs)("h3",{className:"text-lg font-bold text-white truncate",children:[e.firstName," ",e.lastName]}),(0,i.jsx)("p",{className:"text-gray-200 text-sm truncate",children:e.email})]})]})}),(0,i.jsxs)("div",{className:"p-6 space-y-4",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[(0,i.jsx)(vf,{size:16,className:"text-gray-400"}),(0,i.jsx)("span",{children:e.phone})]}),(0,i.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[(0,i.jsx)(Hp.A,{size:16,className:"text-gray-400"}),(0,i.jsxs)("span",{children:[e.activeLoans," pr\xeat",e.activeLoans>1?"s":""," actif",e.activeLoans>1?"s":""]})]}),(0,i.jsxs)("div",{className:"flex items-center justify-between pt-4 border-t border-gray-100",children:[_(e.status),(0,i.jsxs)("button",{onClick:()=>{p(e),g(!0)},className:"flex items-center gap-2 px-4 py-2 bg-primary-500 hover:bg-primary-600 text-white rounded-xl font-medium transition-all duration-200 text-sm",children:[(0,i.jsx)(wf,{size:16}),"D\xe9tails"]})]})]})]},e.id))}),0===E.length&&(0,i.jsxs)("div",{className:"text-center py-12",children:[(0,i.jsx)(tx,{size:64,className:"text-gray-300 mx-auto mb-4"}),(0,i.jsx)("p",{className:"text-gray-500 text-lg font-medium",children:"Aucun utilisateur trouv\xe9"}),(0,i.jsx)("p",{className:"text-gray-400 text-sm mt-2",children:"Essayez de modifier vos crit\xe8res de recherche"})]})]}),f&&m&&(0,i.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4 overflow-y-auto",children:(0,i.jsxs)("div",{className:"bg-white rounded-3xl shadow-2xl max-w-4xl w-full my-8 flex flex-col max-h-[90vh]",children:[(0,i.jsxs)("div",{className:"sticky top-0 bg-gradient-to-r from-secondary-800 to-secondary-900 p-6 flex items-center justify-between z-10",children:[(0,i.jsxs)("div",{className:"flex items-center gap-4",children:[(0,i.jsx)("div",{className:"w-16 h-16 bg-white rounded-full flex items-center justify-center shadow-lg",children:(0,i.jsx)(mi,{size:32,className:"text-primary-600"})}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("h2",{className:"text-2xl font-bold text-white",children:[m.firstName," ",m.lastName]}),(0,i.jsx)("p",{className:"text-gray-200",children:m.email})]})]}),(0,i.jsx)("button",{onClick:()=>g(!1),className:"p-2 hover:bg-white/20 rounded-xl transition-colors",children:(0,i.jsx)(xt,{size:24,className:"text-white"})})]}),(0,i.jsxs)("div",{className:"p-6 pb-4 overflow-y-auto flex-1 space-y-6",children:[(0,i.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-2xl p-6 border border-blue-200",children:[(0,i.jsxs)("h3",{className:"text-lg font-semibold text-blue-900 font-montserrat mb-4 flex items-center",children:[(0,i.jsx)(bf,{className:"w-5 h-5 mr-2"}),"Informations de Contact"]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-sm text-blue-700 font-medium",children:"T\xe9l\xe9phone"}),(0,i.jsx)("p",{className:"text-blue-900 font-semibold",children:m.phone})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-sm text-blue-700 font-medium",children:"Email"}),(0,i.jsx)("p",{className:"text-blue-900 font-semibold break-all",children:m.email})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-sm text-blue-700 font-medium",children:"Adresse"}),(0,i.jsx)("p",{className:"text-blue-900",children:m.address})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-sm text-blue-700 font-medium",children:"Facebook"}),(0,i.jsx)("p",{className:"text-blue-900",children:m.facebookName})]})]})]}),(0,i.jsxs)("div",{className:"bg-gradient-to-br from-primary-50 to-primary-100 rounded-2xl p-6 border border-primary-200",children:[(0,i.jsxs)("h3",{className:"text-lg font-semibold text-primary-900 font-montserrat mb-4 flex items-center",children:[(0,i.jsx)(Df,{className:"w-5 h-5 mr-2"}),"Informations Acad\xe9miques"]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-sm text-primary-800 font-medium",children:"Fili\xe8re"}),(0,i.jsx)("p",{className:"text-secondary-900 font-semibold",children:m.filiere})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-sm text-primary-800 font-medium",children:"Ann\xe9e d'\xe9tude"}),(0,i.jsx)("p",{className:"text-secondary-900 font-semibold",children:m.anneeEtude})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-sm text-primary-800 font-medium",children:"Entit\xe9"}),(0,i.jsx)("p",{className:"text-secondary-900 font-semibold",children:m.entite})]})]})]}),(0,i.jsxs)("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-2xl p-6 border border-green-200",children:[(0,i.jsxs)("h3",{className:"text-lg font-semibold text-green-900 font-montserrat mb-4 flex items-center",children:[(0,i.jsx)(pf,{className:"w-5 h-5 mr-2"}),"Informations du T\xe9moin"]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-sm text-green-700 font-medium",children:"Nom"}),(0,i.jsx)("p",{className:"text-green-900 font-semibold",children:m.temoinName})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-sm text-green-700 font-medium",children:"T\xe9l\xe9phone"}),(0,i.jsx)("p",{className:"text-green-900",children:m.temoinPhone})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-sm text-green-700 font-medium",children:"Email"}),(0,i.jsx)("p",{className:"text-green-900 break-all",children:m.temoinEmail})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-sm text-green-700 font-medium",children:"Quartier"}),(0,i.jsx)("p",{className:"text-green-900",children:m.temoinQuartier})]})]})]}),(0,i.jsxs)("div",{className:"bg-gradient-to-br from-red-50 to-red-100 rounded-2xl p-6 border border-red-200",children:[(0,i.jsxs)("h3",{className:"text-lg font-semibold text-red-900 font-montserrat mb-4 flex items-center",children:[(0,i.jsx)(Kg,{className:"w-5 h-5 mr-2"}),"Contact d'Urgence"]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-sm text-red-700 font-medium",children:"Nom"}),(0,i.jsx)("p",{className:"text-red-900 font-semibold",children:m.emergencyName})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-sm text-red-700 font-medium",children:"Relation"}),(0,i.jsx)("p",{className:"text-red-900",children:m.emergencyRelation})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-sm text-red-700 font-medium",children:"T\xe9l\xe9phone"}),(0,i.jsx)("p",{className:"text-red-900",children:m.emergencyPhone})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-sm text-red-700 font-medium",children:"Email"}),(0,i.jsx)("p",{className:"text-red-900 break-all",children:m.emergencyEmail})]}),(0,i.jsxs)("div",{className:"md:col-span-2",children:[(0,i.jsx)("p",{className:"text-sm text-red-700 font-medium",children:"Adresse"}),(0,i.jsx)("p",{className:"text-red-900",children:m.emergencyAddress})]})]})]}),(0,i.jsxs)("div",{className:"bg-gradient-to-br from-secondary-50 to-secondary-100 rounded-2xl p-6 border border-secondary-200",children:[(0,i.jsxs)("h3",{className:"text-lg font-semibold text-secondary-900 font-montserrat mb-4 flex items-center",children:[(0,i.jsx)(sx,{className:"w-5 h-5 mr-2"}),"Documents"]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-sm text-secondary-700 font-medium mb-2",children:"Carte d'identit\xe9"}),(0,i.jsx)("button",{onClick:()=>A(m.userIdentityCardUrl,"Carte d'identit\xe9"),disabled:!m.userIdentityCardUrl,className:"w-full px-4 py-3 rounded-xl font-medium transition-all ".concat(m.userIdentityCardUrl?"bg-primary-500 hover:bg-primary-600 text-white cursor-pointer":"bg-gray-100 text-gray-400 cursor-not-allowed"),children:m.userIdentityCardUrl?"Voir":"Non disponible"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-sm text-secondary-700 font-medium mb-2",children:"Carte t\xe9moin"}),(0,i.jsx)("button",{onClick:()=>A(m.temoinIdentityCardUrl,"Carte d'identit\xe9 t\xe9moin"),disabled:!m.temoinIdentityCardUrl,className:"w-full px-4 py-3 rounded-xl font-medium transition-all ".concat(m.temoinIdentityCardUrl?"bg-primary-500 hover:bg-primary-600 text-white cursor-pointer":"bg-gray-100 text-gray-400 cursor-not-allowed"),children:m.temoinIdentityCardUrl?"Voir":"Non disponible"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-sm text-secondary-700 font-medium mb-2",children:"Carte \xe9tudiant"}),(0,i.jsx)("button",{onClick:()=>A(m.studentCardUrl,"Carte d'\xe9tudiant"),disabled:!m.studentCardUrl,className:"w-full px-4 py-3 rounded-xl font-medium transition-all ".concat(m.studentCardUrl?"bg-primary-500 hover:bg-primary-600 text-white cursor-pointer":"bg-gray-100 text-gray-400 cursor-not-allowed"),children:m.studentCardUrl?"Voir":"Non disponible"})]})]})]}),(0,i.jsxs)("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 rounded-2xl p-6 border border-orange-200",children:[(0,i.jsxs)("h3",{className:"text-lg font-semibold text-orange-900 font-montserrat mb-4 flex items-center",children:[(0,i.jsx)(Hp.A,{className:"w-5 h-5 mr-2"}),"Informations du Compte"]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-sm text-orange-700 font-medium",children:"Pr\xeats actifs"}),(0,i.jsx)("p",{className:"text-2xl font-bold text-orange-900",children:m.activeLoans})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-sm text-orange-700 font-medium",children:"Total pr\xeats"}),(0,i.jsx)("p",{className:"text-2xl font-bold text-orange-900",children:m.totalLoans})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-sm text-orange-700 font-medium",children:"Statut"}),(0,i.jsx)("div",{className:"mt-2",children:_(m.status)})]})]})]})]}),(0,i.jsxs)("div",{className:"p-6 pt-4 pb-6 bg-gray-50 border-t border-gray-200 flex gap-4",style:{paddingBottom:"max(1.5rem, env(safe-area-inset-bottom))"},children:["pending"===m.status&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("button",{onClick:()=>(async e=>{try{(await(0,ct.pU)(e,"approved")).success?(t("Utilisateur approuv\xe9 avec succ\xe8s"),k(),g(!1)):s("Erreur lors de l'approbation")}catch(n){s("Erreur lors de l'approbation")}})(m.id),className:"flex-1 flex items-center justify-center gap-2 px-6 py-3 bg-green-600 hover:bg-green-700 text-white rounded-xl font-medium transition-all duration-200",children:[(0,i.jsx)($g,{size:20}),"Approuver"]}),(0,i.jsxs)("button",{onClick:()=>(async e=>{try{(await(0,ct.pU)(e,"rejected")).success?(t("Utilisateur rejet\xe9"),k(),g(!1)):s("Erreur lors du rejet")}catch(n){s("Erreur lors du rejet")}})(m.id),className:"flex-1 flex items-center justify-center gap-2 px-6 py-3 bg-red-600 hover:bg-red-700 text-white rounded-xl font-medium transition-all duration-200",children:[(0,i.jsx)(Xg,{size:20}),"Rejeter"]})]}),"pending"!==m.status&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("button",{onClick:()=>g(!1),className:"flex-1 px-6 py-3 bg-gray-600 hover:bg-gray-700 text-white rounded-xl font-medium transition-all duration-200",children:"Fermer"}),(0,i.jsxs)("button",{onClick:()=>{w(!0)},className:"flex-1 flex items-center justify-center gap-2 px-6 py-3 bg-red-600 hover:bg-red-700 text-white rounded-xl font-medium transition-all duration-200",children:[(0,i.jsx)(Sp,{size:20}),"Supprimer d\xe9finitivement"]})]})]})]})}),j&&m&&(0,i.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:(0,i.jsx)("div",{className:"bg-white rounded-3xl shadow-2xl max-w-md w-full",children:(0,i.jsxs)("div",{className:"p-6",children:[(0,i.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[(0,i.jsx)("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center",children:(0,i.jsx)(Kg,{className:"text-red-600",size:24})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:"Confirmer la suppression"}),(0,i.jsx)("p",{className:"text-gray-600 text-sm",children:"Cette action est irr\xe9versible"})]})]}),(0,i.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4 mb-6",children:[(0,i.jsx)("p",{className:"text-gray-800 font-medium mb-2",children:"Vous \xeates sur le point de supprimer d\xe9finitivement :"}),(0,i.jsxs)("p",{className:"text-lg font-bold text-red-900",children:[m.firstName," ",m.lastName]}),(0,i.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:m.email})]}),(0,i.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-xl p-4 mb-6",children:[(0,i.jsxs)("p",{className:"text-sm text-yellow-900",children:["\u26a0\ufe0f ",(0,i.jsx)("strong",{children:"Toutes les donn\xe9es"})," de cet utilisateur seront supprim\xe9es :"]}),(0,i.jsxs)("ul",{className:"list-disc list-inside text-sm text-yellow-800 mt-2 space-y-1",children:[(0,i.jsx)("li",{children:"Compte utilisateur"}),(0,i.jsx)("li",{children:"Pr\xeats et historique"}),(0,i.jsx)("li",{children:"Paiements"}),(0,i.jsx)("li",{children:"Plans d'\xe9pargne"}),(0,i.jsx)("li",{children:"Notifications"})]})]}),(0,i.jsxs)("div",{className:"flex gap-4",children:[(0,i.jsx)("button",{onClick:()=>w(!1),disabled:N,className:"flex-1 px-6 py-3 bg-gray-200 hover:bg-gray-300 text-gray-800 rounded-xl font-medium transition-all duration-200 disabled:opacity-50",children:"Annuler"}),(0,i.jsx)("button",{onClick:async()=>{if(m)try{S(!0);const e=await(0,ct.kG)(m.id);e.success?(t(e.message||"Utilisateur supprim\xe9 d\xe9finitivement"),k(),w(!1),g(!1),p(null)):s(e.error||"Erreur lors de la suppression")}catch(e){console.error("[ADMIN] Erreur suppression:",e),s("Erreur lors de la suppression")}finally{S(!1)}},disabled:N,className:"flex-1 flex items-center justify-center gap-2 px-6 py-3 bg-red-600 hover:bg-red-700 text-white rounded-xl font-medium transition-all duration-200 disabled:opacity-50",children:N?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(ai.A,{size:20,className:"animate-spin"}),"Suppression..."]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Sp,{size:20}),"Supprimer d\xe9finitivement"]})})]})]})})}),x&&b.url&&(0,i.jsx)("div",{className:"fixed inset-0 bg-black/90 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:(0,i.jsxs)("div",{className:"relative max-w-4xl w-full",children:[(0,i.jsx)("button",{onClick:()=>v(!1),className:"absolute -top-12 right-0 p-2 bg-white/10 hover:bg-white/20 rounded-xl transition-colors",children:(0,i.jsx)(xt,{size:24,className:"text-white"})}),(0,i.jsxs)("div",{className:"bg-white rounded-3xl p-4",children:[(0,i.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-4 text-center",children:b.title}),(0,i.jsx)("img",{src:b.url,alt:b.title,className:"w-full h-auto rounded-2xl"})]})]})})]})};var rx=s(9120);const ax=(0,pt.A)("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]),ix=()=>{const e=(0,Ge.Zp)(),[t,s]=(0,n.useState)(!1),[r,a]=(0,n.useState)(null),[o,l]=(0,n.useState)({totalLoans:0,activeLoans:0,completedLoans:0,pendingLoans:0,totalLoanAmount:0,totalPaidAmount:0,totalInterestCollected:0,totalInterestNotCollected:0,totalRemainingAmount:0,totalSavingsPlans:0,activeSavingsPlans:0,completedSavingsPlans:0,totalSavingsAmount:0,totalUsers:0,activeUsers:0,pendingUsers:0,averageLoanAmount:0,averageRepaymentRate:0,topBorrowers:[]});(0,n.useEffect)(()=>{c()},[]),(0,n.useEffect)(()=>{let e=null;const t=()=>{e&&clearTimeout(e),e=setTimeout(()=>c(!0),500)},s=lt.ND.channel("analytics_realtime").on("postgres_changes",{event:"*",schema:"public",table:"loans"},t).on("postgres_changes",{event:"*",schema:"public",table:"users"},t).on("postgres_changes",{event:"*",schema:"public",table:"payments"},t).on("postgres_changes",{event:"*",schema:"public",table:"savings_plans"},t).subscribe(e=>{"SUBSCRIBED"===e&&console.log("[ANALYTICS] \ud83d\udd34 Temps r\xe9el actif")});return()=>{e&&clearTimeout(e),lt.ND.removeChannel(s)}},[]);const c=async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];try{e||(s(!0),a(null)),e||console.log("[ANALYTICS] \ud83d\udcca Chargement des analytics...");const[t,n,r,i]=await Promise.all([(0,ct.CF)(),(0,ct.Or)(),(0,ct.k5)(),lt.ND.from("savings_plans").select("*")]);e||console.log("[ANALYTICS] \u2705 Donn\xe9es charg\xe9es");const o=t.success?t.data:[],c=o.length,d=o.filter(e=>"approved"===e.status).length,u=o.filter(e=>"pending"===e.status).length,h=n.success?n.data:[],m=r.success?r.data:[],p=e=>e.approved_at&&"pending"!==e.status&&"rejected"!==e.status,f=h.filter(p),g=h.length,x=h.filter(e=>"active"===e.status||"approved"===e.status||"overdue"===e.status).length,v=h.filter(e=>"completed"===e.status).length,b=h.filter(e=>"pending"===e.status).length,y=f.reduce((e,t)=>e+(t.amount||0),0),j=m.reduce((e,t)=>e+(t.amount||0),0),w=y-j,N=f.filter(e=>"completed"===e.status),S=N.reduce((e,t)=>{const s=t.amount||0,n=(t.interest_rate||0)/100;return e+Math.round(s*n)},0),k=f.filter(e=>"completed"!==e.status),A=k.reduce((e,t)=>{const s=t.amount||0,n=(t.interest_rate||0)/100;return e+Math.round(s*n)},0),_=y>0?Math.round(j/y*100):0,E=f.length>0?Math.round(y/f.length):0,C={};f.forEach(e=>{const t=e.user_id;var s,n;C[t]||(C[t]={userId:t,userName:"".concat((null===(s=e.users)||void 0===s?void 0:s.first_name)||"Utilisateur"," ").concat((null===(n=e.users)||void 0===n?void 0:n.last_name)||"Inconnu"),totalBorrowed:0,loansCount:0,completedLoans:0});C[t].totalBorrowed+=e.amount||0,C[t].loansCount++,"completed"===e.status&&C[t].completedLoans++});const P=Object.values(C).sort((e,t)=>t.totalBorrowed-e.totalBorrowed).slice(0,5),T=i.data||[],I=T.length,R=T.filter(e=>"active"===e.status).length,D=T.filter(e=>"completed"===e.status).length,O=T.reduce((e,t)=>e+(t.current_balance||0),0);l({totalLoans:g,activeLoans:x,completedLoans:v,pendingLoans:b,totalLoanAmount:y,totalPaidAmount:j,totalInterestCollected:S,totalInterestNotCollected:A,totalRemainingAmount:w,totalSavingsPlans:I,activeSavingsPlans:R,completedSavingsPlans:D,totalSavingsAmount:O,totalUsers:c,activeUsers:d,pendingUsers:u,averageLoanAmount:E,averageRepaymentRate:_,topBorrowers:P})}catch(r){console.error("[ANALYTICS] \u274c Erreur:",r),a(r.message||"Une erreur est survenue")}finally{s(!1)}};return r?(0,i.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 via-red-50 to-pink-50 flex items-center justify-center p-4",children:(0,i.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8 max-w-md w-full text-center",children:[(0,i.jsx)("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,i.jsx)(ft,{size:32,className:"text-red-600"})}),(0,i.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Erreur de chargement"}),(0,i.jsx)("p",{className:"text-gray-600 mb-6",children:r}),(0,i.jsxs)("button",{onClick:c,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-orange-600 hover:bg-orange-700 text-white rounded-xl transition-colors",children:[(0,i.jsx)(ai.A,{size:18}),"R\xe9essayer"]})]})}):(0,i.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 via-red-50 to-pink-50 pb-24",children:[(0,i.jsx)("div",{className:"bg-white/80 backdrop-blur-lg shadow-lg border-b border-white/50 sticky top-0 z-30",children:(0,i.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{className:"flex items-center gap-4",children:[(0,i.jsx)("div",{className:"p-3 bg-gradient-to-br from-orange-500 to-red-600 rounded-2xl shadow-lg",children:(0,i.jsx)(Gp.A,{size:32,className:"text-white"})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900 font-montserrat",children:"Analytics"}),(0,i.jsx)("p",{className:"text-sm sm:text-base text-gray-600 font-montserrat",children:"Vue d'ensemble des performances"})]})]}),(0,i.jsxs)("button",{onClick:c,className:"flex items-center gap-2 px-3 sm:px-4 py-2 bg-white hover:bg-gray-50 border border-gray-200 rounded-xl transition-all duration-200 shadow-sm hover:shadow",children:[(0,i.jsx)(ai.A,{size:18,className:"text-gray-600"}),(0,i.jsx)("span",{className:"hidden sm:inline text-sm font-medium text-gray-700",children:"Actualiser"})]})]})})}),(0,i.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[t&&(0,i.jsxs)("div",{className:"flex items-center justify-center gap-2 py-2 mb-4 text-gray-500 text-sm",children:[(0,i.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-orange-500 border-t-transparent"}),(0,i.jsx)("span",{children:"Chargement des analytics..."})]}),(0,i.jsxs)("div",{className:"mb-6 transition-opacity duration-200 ".concat(t?"opacity-75":""),children:[(0,i.jsx)("h2",{className:"text-xl font-bold text-gray-900 font-montserrat mb-4",children:"\ud83d\udcca Pr\xeats"}),(0,i.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6",children:[(0,i.jsxs)("div",{className:"bg-white rounded-2xl p-4 sm:p-6 shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-100 group",children:[(0,i.jsx)("div",{className:"flex items-start justify-between mb-3 sm:mb-4",children:(0,i.jsx)("div",{className:"p-2 sm:p-3 bg-blue-100 rounded-xl group-hover:scale-110 transition-transform duration-300",children:(0,i.jsx)(Hp.A,{size:20,className:"sm:w-6 sm:h-6 text-blue-600"})})}),(0,i.jsx)("p",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:o.totalLoans}),(0,i.jsx)("p",{className:"text-xs sm:text-sm text-gray-600 mt-1",children:"Total pr\xeats"})]}),(0,i.jsxs)("div",{className:"bg-gradient-to-br from-blue-500 to-purple-600 rounded-2xl p-4 sm:p-6 shadow-lg hover:shadow-xl transition-all duration-300 text-white group",children:[(0,i.jsx)("div",{className:"flex items-start justify-between mb-3 sm:mb-4",children:(0,i.jsx)("div",{className:"p-2 sm:p-3 bg-white/20 rounded-xl group-hover:scale-110 transition-transform duration-300",children:(0,i.jsx)(zg.A,{size:20,className:"sm:w-6 sm:h-6 text-white"})})}),(0,i.jsx)("p",{className:"text-2xl sm:text-3xl font-bold",children:o.activeLoans}),(0,i.jsx)("p",{className:"text-xs sm:text-sm text-blue-100 mt-1",children:"Actifs"})]}),(0,i.jsxs)("div",{className:"bg-white rounded-2xl p-4 sm:p-6 shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-100 group",children:[(0,i.jsx)("div",{className:"flex items-start justify-between mb-3 sm:mb-4",children:(0,i.jsx)("div",{className:"p-2 sm:p-3 bg-green-100 rounded-xl group-hover:scale-110 transition-transform duration-300",children:(0,i.jsx)(mt.A,{size:20,className:"sm:w-6 sm:h-6 text-green-600"})})}),(0,i.jsx)("p",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:o.completedLoans}),(0,i.jsx)("p",{className:"text-xs sm:text-sm text-gray-600 mt-1",children:"Rembours\xe9s"})]}),(0,i.jsxs)("div",{className:"bg-white rounded-2xl p-4 sm:p-6 shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-100 group",children:[(0,i.jsx)("div",{className:"flex items-start justify-between mb-3 sm:mb-4",children:(0,i.jsx)("div",{className:"p-2 sm:p-3 bg-yellow-100 rounded-xl group-hover:scale-110 transition-transform duration-300",children:(0,i.jsx)(kp,{size:20,className:"sm:w-6 sm:h-6 text-yellow-600"})})}),(0,i.jsx)("p",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:o.pendingLoans}),(0,i.jsx)("p",{className:"text-xs sm:text-sm text-gray-600 mt-1",children:"En attente"})]})]})]}),(0,i.jsxs)("div",{className:"mb-6",children:[(0,i.jsx)("h2",{className:"text-xl font-bold text-gray-900 font-montserrat mb-4",children:"\ud83d\udcb0 Montants"}),(0,i.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6",children:[(0,i.jsxs)("div",{className:"bg-white rounded-2xl p-4 sm:p-6 shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-100",children:[(0,i.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,i.jsx)("div",{className:"p-2 bg-purple-100 rounded-lg",children:(0,i.jsx)(rx.A,{size:18,className:"text-purple-600"})}),(0,i.jsx)("p",{className:"text-xs sm:text-sm text-gray-600 font-medium",children:"Total pr\xeat\xe9"})]}),(0,i.jsx)("p",{className:"text-lg sm:text-xl font-bold text-gray-900",children:(0,Dp.vv)(o.totalLoanAmount)})]}),(0,i.jsxs)("div",{className:"bg-white rounded-2xl p-4 sm:p-6 shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-100",children:[(0,i.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,i.jsx)("div",{className:"p-2 bg-green-100 rounded-lg",children:(0,i.jsx)(mt.A,{size:18,className:"text-green-600"})}),(0,i.jsx)("p",{className:"text-xs sm:text-sm text-gray-600 font-medium",children:"Int\xe9r\xeats collect\xe9s"})]}),(0,i.jsx)("p",{className:"text-lg sm:text-xl font-bold text-green-600",children:(0,Dp.vv)(o.totalInterestCollected)})]}),(0,i.jsxs)("div",{className:"bg-white rounded-2xl p-4 sm:p-6 shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-100",children:[(0,i.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,i.jsx)("div",{className:"p-2 bg-orange-100 rounded-lg",children:(0,i.jsx)(ax,{size:18,className:"text-orange-600"})}),(0,i.jsx)("p",{className:"text-xs sm:text-sm text-gray-600 font-medium",children:"Int\xe9r\xeats \xe0 percevoir"})]}),(0,i.jsx)("p",{className:"text-lg sm:text-xl font-bold text-orange-600",children:(0,Dp.vv)(o.totalInterestNotCollected)})]}),(0,i.jsxs)("button",{type:"button",onClick:()=>e("/admin/analytics/detailed"),className:"w-full text-left bg-gradient-to-br from-green-500 to-emerald-600 rounded-2xl p-4 sm:p-6 shadow-lg hover:shadow-xl transition-all duration-300 text-white group border-0 cursor-pointer",children:[(0,i.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,i.jsx)("div",{className:"p-2 bg-white/20 rounded-lg group-hover:scale-110 transition-transform",children:(0,i.jsx)(Gp.A,{size:18,className:"text-white"})}),(0,i.jsx)("p",{className:"text-xs sm:text-sm text-green-100 font-medium",children:"Statistiques d\xe9taill\xe9es"})]}),(0,i.jsx)("p",{className:"text-sm sm:text-base font-semibold text-green-100",children:"Voir les statistiques d\xe9taill\xe9es"}),(0,i.jsx)("p",{className:"text-xs text-green-200/90 mt-1",children:"Graphiques, filtres par p\xe9riode, comptabilit\xe9"})]})]})]}),(0,i.jsxs)("div",{className:"mb-6",children:[(0,i.jsx)("h2",{className:"text-xl font-bold text-gray-900 font-montserrat mb-4",children:"\ud83c\udfe6 \xc9pargne"}),(0,i.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6",children:[(0,i.jsxs)("div",{className:"bg-white rounded-2xl p-4 sm:p-6 shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-100 group",children:[(0,i.jsx)("div",{className:"flex items-start justify-between mb-3 sm:mb-4",children:(0,i.jsx)("div",{className:"p-2 sm:p-3 bg-purple-100 rounded-xl group-hover:scale-110 transition-transform duration-300",children:(0,i.jsx)(Fg,{size:20,className:"sm:w-6 sm:h-6 text-purple-600"})})}),(0,i.jsx)("p",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:o.totalSavingsPlans}),(0,i.jsx)("p",{className:"text-xs sm:text-sm text-gray-600 mt-1",children:"Plans total"})]}),(0,i.jsxs)("div",{className:"bg-white rounded-2xl p-4 sm:p-6 shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-100 group",children:[(0,i.jsx)("div",{className:"flex items-start justify-between mb-3 sm:mb-4",children:(0,i.jsx)("div",{className:"p-2 sm:p-3 bg-green-100 rounded-xl group-hover:scale-110 transition-transform duration-300",children:(0,i.jsx)(zg.A,{size:20,className:"sm:w-6 sm:h-6 text-green-600"})})}),(0,i.jsx)("p",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:o.activeSavingsPlans}),(0,i.jsx)("p",{className:"text-xs sm:text-sm text-gray-600 mt-1",children:"Actifs"})]}),(0,i.jsxs)("div",{className:"bg-white rounded-2xl p-4 sm:p-6 shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-100 group",children:[(0,i.jsx)("div",{className:"flex items-start justify-between mb-3 sm:mb-4",children:(0,i.jsx)("div",{className:"p-2 sm:p-3 bg-blue-100 rounded-xl group-hover:scale-110 transition-transform duration-300",children:(0,i.jsx)(mt.A,{size:20,className:"sm:w-6 sm:h-6 text-blue-600"})})}),(0,i.jsx)("p",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:o.completedSavingsPlans}),(0,i.jsx)("p",{className:"text-xs sm:text-sm text-gray-600 mt-1",children:"Termin\xe9s"})]}),(0,i.jsxs)("div",{className:"bg-gradient-to-br from-purple-500 to-pink-600 rounded-2xl p-4 sm:p-6 shadow-lg hover:shadow-xl transition-all duration-300 text-white group",children:[(0,i.jsx)("div",{className:"flex items-start justify-between mb-3 sm:mb-4",children:(0,i.jsx)("div",{className:"p-2 sm:p-3 bg-white/20 rounded-xl group-hover:scale-110 transition-transform duration-300",children:(0,i.jsx)(Qp,{size:20,className:"sm:w-6 sm:h-6 text-white"})})}),(0,i.jsx)("p",{className:"text-lg sm:text-xl font-bold",children:(0,Dp.vv)(o.totalSavingsAmount)}),(0,i.jsx)("p",{className:"text-xs sm:text-sm text-purple-100 mt-1",children:"Total \xe9pargn\xe9"})]})]})]}),(0,i.jsxs)("div",{className:"mb-6",children:[(0,i.jsx)("h2",{className:"text-xl font-bold text-gray-900 font-montserrat mb-4",children:"\ud83d\udc65 Utilisateurs"}),(0,i.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 sm:gap-6",children:[(0,i.jsxs)("div",{className:"bg-white rounded-2xl p-4 sm:p-6 shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-100",children:[(0,i.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,i.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,i.jsx)(tx,{size:18,className:"text-blue-600"})}),(0,i.jsx)("p",{className:"text-xs sm:text-sm text-gray-600 font-medium",children:"Total"})]}),(0,i.jsx)("p",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:o.totalUsers})]}),(0,i.jsxs)("div",{className:"bg-white rounded-2xl p-4 sm:p-6 shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-100",children:[(0,i.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,i.jsx)("div",{className:"p-2 bg-green-100 rounded-lg",children:(0,i.jsx)(mt.A,{size:18,className:"text-green-600"})}),(0,i.jsx)("p",{className:"text-xs sm:text-sm text-gray-600 font-medium",children:"Actifs"})]}),(0,i.jsx)("p",{className:"text-2xl sm:text-3xl font-bold text-green-600",children:o.activeUsers})]}),(0,i.jsxs)("div",{className:"bg-white rounded-2xl p-4 sm:p-6 shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-100",children:[(0,i.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,i.jsx)("div",{className:"p-2 bg-yellow-100 rounded-lg",children:(0,i.jsx)(kp,{size:18,className:"text-yellow-600"})}),(0,i.jsx)("p",{className:"text-xs sm:text-sm text-gray-600 font-medium",children:"En attente"})]}),(0,i.jsx)("p",{className:"text-2xl sm:text-3xl font-bold text-yellow-600",children:o.pendingUsers})]})]})]}),o.topBorrowers.length>0&&(0,i.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden",children:[(0,i.jsx)("div",{className:"p-4 sm:p-6 border-b border-gray-100",children:(0,i.jsxs)("h2",{className:"text-xl font-bold text-gray-900 font-montserrat flex items-center gap-2",children:[(0,i.jsx)(Ug,{size:24,className:"text-orange-600"}),"Top 5 Emprunteurs"]})}),(0,i.jsx)("div",{className:"divide-y divide-gray-100",children:o.topBorrowers.map((e,t)=>(0,i.jsx)("div",{className:"p-4 sm:p-6 hover:bg-gray-50 transition-colors",children:(0,i.jsxs)("div",{className:"flex items-center gap-3 sm:gap-4",children:[(0,i.jsx)("div",{className:"flex-shrink-0 w-10 h-10 sm:w-12 sm:h-12 rounded-full flex items-center justify-center font-bold text-lg ".concat(0===t?"bg-yellow-100 text-yellow-700":1===t?"bg-gray-100 text-gray-700":2===t?"bg-orange-100 text-orange-700":"bg-blue-100 text-blue-700"),children:t+1}),(0,i.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,i.jsx)("p",{className:"text-sm sm:text-base font-bold text-gray-900 truncate",children:e.userName}),(0,i.jsxs)("p",{className:"text-xs sm:text-sm text-gray-600",children:[e.loansCount," pr\xeat",e.loansCount>1?"s":""," \u2022 ",e.completedLoans," rembours\xe9",e.completedLoans>1?"s":""]})]}),(0,i.jsxs)("div",{className:"text-right",children:[(0,i.jsx)("p",{className:"text-sm sm:text-base font-bold text-gray-900",children:(0,Dp.vv)(e.totalBorrowed)}),(0,i.jsx)("p",{className:"text-xs text-gray-500",children:"Total"})]})]})},t))})]})]})]})},ox=()=>{const e=(0,Ge.Zp)(),t=[{id:"ab-epargne",title:"AB Epargne",description:"Gestion des comptes d'\xe9pargne et des plans",icon:Fg,color:"from-green-500 to-emerald-600",bgColor:"bg-green-50",iconColor:"text-green-600",path:"/admin/ab-epargne"},{id:"ab-pret",title:"AB Pret",description:"Gestion des demandes de pr\xeats et remboursements",icon:Hp.A,color:"from-blue-500 to-indigo-600",bgColor:"bg-blue-50",iconColor:"text-blue-600",path:"/admin/loan-requests"},{id:"utilisateurs",title:"Utilisateurs",description:"G\xe9rer les clients et voir leurs informations",icon:tx,color:"from-purple-500 to-pink-600",bgColor:"bg-purple-50",iconColor:"text-purple-600",path:"/admin/user-management"}];return(0,i.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-blue-50 pb-24",children:[(0,i.jsx)("div",{className:"bg-white shadow-sm border-b border-gray-200",children:(0,i.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,i.jsxs)("div",{className:"py-6",children:[(0,i.jsx)("h1",{className:"text-3xl font-bold text-gray-900 font-montserrat",children:"Menu Admin"}),(0,i.jsx)("p",{className:"text-gray-600 font-montserrat mt-2",children:"S\xe9lectionnez une section pour g\xe9rer"})]})})}),(0,i.jsx)("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:(0,i.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(t=>(0,i.jsxs)("button",{onClick:()=>e(t.path),className:"group relative bg-white rounded-3xl p-8 shadow-lg hover:shadow-2xl transition-all duration-300 transform hover:scale-105 border border-gray-100 overflow-hidden",children:[(0,i.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br ".concat(t.color," opacity-0 group-hover:opacity-5 transition-opacity duration-300")}),(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsx)("div",{className:"inline-flex p-4 rounded-2xl ".concat(t.bgColor," mb-6 group-hover:scale-110 transition-transform duration-300"),children:(0,i.jsx)(t.icon,{size:40,className:t.iconColor})}),(0,i.jsx)("h2",{className:"text-2xl font-bold text-gray-900 font-montserrat mb-3",children:t.title}),(0,i.jsx)("p",{className:"text-gray-600 font-montserrat mb-6",children:t.description}),(0,i.jsxs)("div",{className:"flex items-center text-primary-600 font-semibold font-montserrat group-hover:translate-x-2 transition-transform duration-300",children:[(0,i.jsx)("span",{children:"Acc\xe9der"}),(0,i.jsx)(fi,{size:20,className:"ml-2"})]})]}),(0,i.jsx)("div",{className:"absolute -right-8 -bottom-8 w-32 h-32 rounded-full bg-gradient-to-br ".concat(t.color," opacity-10 group-hover:opacity-20 transition-opacity duration-300")})]},t.id))})})]})},lx=()=>{const{user:e,forceRefreshRole:t}=ut(),[s,r]=(0,n.useState)(!1),[a,o]=(0,n.useState)(!1),[l,c]=(0,n.useState)(null),[u,h]=(0,n.useState)(null);return e?(0,i.jsxs)("div",{className:"bg-white rounded-lg shadow-lg border border-gray-200 p-4 max-w-sm mx-auto",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,i.jsx)(mi,{size:20,className:"text-blue-600"}),(0,i.jsx)("h3",{className:"font-semibold text-gray-900",children:"Debug R\xf4le"})]}),(0,i.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsx)("span",{className:"text-gray-600",children:"R\xf4le actuel:"}),(0,i.jsx)("span",{className:"font-semibold ".concat("admin"===e.role?"text-green-600":"text-orange-600"),children:e.role||"Non d\xe9fini"})]}),(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsx)("span",{className:"text-gray-600",children:"Email:"}),(0,i.jsx)("span",{className:"text-gray-900",children:e.email})]}),l&&(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsx)("span",{className:"text-gray-600",children:"Dernier refresh:"}),(0,i.jsx)("span",{className:"text-gray-900",children:l})]}),u&&(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsx)("span",{className:"text-gray-600",children:"Coh\xe9rence:"}),(0,i.jsx)("span",{className:"font-semibold ".concat(u.consistent?"text-green-600":"text-red-600"),children:u.consistent?"OK":"INCOH\xc9RENT"})]})]}),(0,i.jsxs)("div",{className:"mt-4 space-y-2",children:[(0,i.jsxs)("button",{onClick:async()=>{r(!0);try{const e=await t();c((new Date).toLocaleTimeString()),e.success?console.log("[ROLE_DEBUGGER] \u2705 R\xf4le mis \xe0 jour:",e.role):console.error("[ROLE_DEBUGGER] \u274c Erreur:",e.error)}catch(e){console.error("[ROLE_DEBUGGER] \u274c Erreur:",e)}finally{r(!1)}},disabled:s,className:"w-full flex items-center justify-center gap-2 px-3 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white rounded-lg transition-colors text-sm",children:[(0,i.jsx)(ai.A,{size:16,className:s?"animate-spin":""}),s?"Actualisation...":"Forcer Refresh R\xf4le"]}),(0,i.jsxs)("button",{onClick:async()=>{o(!0);try{const t=await(async()=>{try{console.log("[FORCE_ROLE_REFRESH] \ud83d\udd04 D\xe9but du rafra\xeechissement forc\xe9 du r\xf4le..."),console.log("[FORCE_ROLE_REFRESH] \ud83e\uddf9 Nettoyage du cache..."),localStorage.removeItem("ab_user_cache"),localStorage.removeItem("ab_user_cache_time"),sessionStorage.clear();const{data:{session:e},error:t}=await lt.ND.auth.getSession();if(t)return console.error("[FORCE_ROLE_REFRESH] \u274c Erreur session:",t),{success:!1,error:t.message};if(null===e||void 0===e||!e.user)return console.log("[FORCE_ROLE_REFRESH] \u26a0\ufe0f Aucune session active"),{success:!1,error:"Aucune session active"};console.log("[FORCE_ROLE_REFRESH] \ud83d\udc64 Session trouv\xe9e:",e.user.email),console.log("[FORCE_ROLE_REFRESH] \ud83d\uddc4\ufe0f R\xe9cup\xe9ration du r\xf4le depuis la DB...");const{data:s,error:n}=await lt.ND.from("users").select("role, first_name, last_name, email").eq("id",e.user.id).single();if(n)return console.error("[FORCE_ROLE_REFRESH] \u274c Erreur DB:",n),{success:!1,error:n.message};if(!s)return console.error("[FORCE_ROLE_REFRESH] \u274c Utilisateur non trouv\xe9 en DB"),{success:!1,error:"Utilisateur non trouv\xe9"};console.log("[FORCE_ROLE_REFRESH] \u2705 R\xf4le r\xe9cup\xe9r\xe9:",s.role);const r={id:e.user.id,email:e.user.email,role:s.role,first_name:s.first_name||"",last_name:s.last_name||"",firstName:s.first_name,lastName:s.last_name};return localStorage.setItem("ab_user_cache",JSON.stringify(r)),localStorage.setItem("ab_user_cache_time",Date.now().toString()),console.log("[FORCE_ROLE_REFRESH] \u2705 Cache mis \xe0 jour avec le r\xf4le:",s.role),console.log("[FORCE_ROLE_REFRESH] \ud83d\udd04 Rechargement de la page..."),window.location.reload(),{success:!0,role:s.role,user:r}}catch(e){return console.error("[FORCE_ROLE_REFRESH] \u274c Erreur g\xe9n\xe9rale:",e),{success:!1,error:e.message}}})(e.id);t.success?console.log("[ROLE_DEBUGGER] \u2705 R\xf4le forc\xe9 mis \xe0 jour:",t.role):(console.error("[ROLE_DEBUGGER] \u274c Erreur force refresh:",t.error),alert("Erreur: ".concat(t.error)))}catch(t){console.error("[ROLE_DEBUGGER] \u274c Erreur force refresh:",t),alert("Erreur: ".concat(t.message))}finally{o(!1)}},disabled:a,className:"w-full flex items-center justify-center gap-2 px-3 py-2 bg-red-600 hover:bg-red-700 disabled:bg-red-400 text-white rounded-lg transition-colors text-sm",children:[(0,i.jsx)(mf,{size:16,className:a?"animate-pulse":""}),a?"Force Refresh...":"Force Refresh + Reload"]}),(0,i.jsxs)("button",{onClick:async()=>{try{const e=await(async()=>{try{const e=localStorage.getItem("ab_user_cache");if(!e)return{consistent:!1,reason:"Aucun cache trouv\xe9"};const t=JSON.parse(e),{data:{session:s}}=await lt.ND.auth.getSession();if(null===s||void 0===s||!s.user)return{consistent:!1,reason:"Aucune session active"};const{data:n,error:r}=await lt.ND.from("users").select("role").eq("id",s.user.id).single();if(r||!n)return{consistent:!1,reason:"Impossible de r\xe9cup\xe9rer le r\xf4le depuis la DB"};const a=t.role===n.role;return{consistent:a,cachedRole:t.role,dbRole:n.role,reason:a?"R\xf4les coh\xe9rents":"R\xf4les incoh\xe9rents"}}catch(e){return console.error("[CHECK_ROLE_CONSISTENCY] \u274c Erreur:",e),{consistent:!1,reason:e.message}}})();h(e),console.log("[ROLE_DEBUGGER] Coh\xe9rence des r\xf4les:",e)}catch(e){console.error("[ROLE_DEBUGGER] \u274c Erreur v\xe9rification:",e)}},className:"w-full flex items-center justify-center gap-2 px-3 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-lg transition-colors text-sm",children:[(0,i.jsx)(mt.A,{size:16}),"V\xe9rifier Coh\xe9rence"]}),(0,i.jsxs)("button",{onClick:()=>{window.confirm("\u26a0\ufe0f ATTENTION: Cette action va nettoyer TOUS les caches et recharger la page. Continuer ?")&&(console.log("[ROLE_DEBUGGER] \ud83e\uddf9 Nettoyage complet du cache..."),(()=>{console.log("[CLEAR_ALL_CACHE] \ud83e\uddf9 D\xe9but du nettoyage complet...");try{const e=["push_subscription"],t=(0,d.A)({},localStorage);for(const s in t)e.includes(s)||(localStorage.removeItem(s),console.log("[CLEAR_ALL_CACHE] \ud83d\uddd1\ufe0f Supprim\xe9 localStorage: ".concat(s)));sessionStorage.clear(),console.log("[CLEAR_ALL_CACHE] \ud83d\uddd1\ufe0f sessionStorage nettoy\xe9"),"caches"in window&&caches.keys().then(e=>{e.forEach(e=>{caches.delete(e),console.log("[CLEAR_ALL_CACHE] \ud83d\uddd1\ufe0f Cache supprim\xe9: ".concat(e))})}),console.log("[CLEAR_ALL_CACHE] \ud83d\udd04 Rechargement de la page..."),window.location.reload(!0)}catch(e){console.error("[CLEAR_ALL_CACHE] \u274c Erreur lors du nettoyage:",e),window.location.reload(!0)}})())},className:"w-full flex items-center justify-center gap-2 px-3 py-2 bg-red-800 hover:bg-red-900 text-white rounded-lg transition-colors text-sm",children:[(0,i.jsx)(Sp,{size:16}),"Nettoyer Tout + Reload"]}),(0,i.jsxs)("button",{onClick:async()=>{if(window.confirm("\u26a0\ufe0f ATTENTION: Cette action va nettoyer TOUS les Service Workers. Continuer ?")){console.log("[ROLE_DEBUGGER] \ud83e\uddf9 Nettoyage des Service Workers...");await(async()=>{if("serviceWorker"in navigator)try{console.log("[CLEAR_SW] \ud83e\uddf9 Nettoyage des Service Workers...");const e=await navigator.serviceWorker.getRegistrations();if(console.log("[CLEAR_SW] ".concat(e.length," Service Worker(s) trouv\xe9(s)")),await Promise.all(e.map(e=>(console.log("[CLEAR_SW] D\xe9senregistrement: ".concat(e.scope)),e.unregister()))),console.log("[CLEAR_SW] \u2705 Tous les Service Workers ont \xe9t\xe9 d\xe9senregistr\xe9s"),"caches"in window){const e=await caches.keys();console.log("[CLEAR_SW] ".concat(e.length," cache(s) trouv\xe9(s)")),await Promise.all(e.map(e=>(console.log("[CLEAR_SW] Suppression du cache: ".concat(e)),caches.delete(e)))),console.log("[CLEAR_SW] \u2705 Tous les caches ont \xe9t\xe9 supprim\xe9s")}return!0}catch(e){return console.error("[CLEAR_SW] \u274c Erreur lors du nettoyage:",e),!1}else console.log("[CLEAR_SW] Service Worker non support\xe9")})()?alert("\u2705 Service Workers nettoy\xe9s avec succ\xe8s !"):alert("\u274c Erreur lors du nettoyage des Service Workers")}},className:"w-full flex items-center justify-center gap-2 px-3 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg transition-colors text-sm",children:[(0,i.jsx)(Ap,{size:16}),"Nettoyer Service Workers"]}),"admin"!==e.role&&(0,i.jsxs)("div",{className:"flex items-center gap-2 p-2 bg-orange-50 border border-orange-200 rounded-lg",children:[(0,i.jsx)(Kg,{size:16,className:"text-orange-600"}),(0,i.jsx)("span",{className:"text-orange-800 text-xs",children:'R\xf4le incorrect d\xe9tect\xe9. Cliquez sur "Forcer Refresh R\xf4le".'})]}),"admin"===e.role&&(0,i.jsxs)("div",{className:"flex items-center gap-2 p-2 bg-green-50 border border-green-200 rounded-lg",children:[(0,i.jsx)(mt.A,{size:16,className:"text-green-600"}),(0,i.jsx)("span",{className:"text-green-800 text-xs",children:"R\xf4le admin correctement charg\xe9."})]})]})]}):null},cx=(0,pt.A)("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),dx=(0,pt.A)("Bug",[["rect",{width:"8",height:"14",x:"8",y:"6",rx:"4",key:"hq8nra"}],["path",{d:"m19 7-3 2",key:"fmg8ec"}],["path",{d:"m5 7 3 2",key:"dkxqes"}],["path",{d:"m19 19-3-2",key:"1hbhi4"}],["path",{d:"m5 19 3-2",key:"dvt2ee"}],["path",{d:"M20 13h-4",key:"1agfp2"}],["path",{d:"M4 13h4",key:"1bwh8b"}],["path",{d:"m10 4 1 2",key:"1pot59"}],["path",{d:"m14 4-1 2",key:"m8sn0o"}]]),ux=()=>{const{user:e}=ut(),{showSuccess:t,showError:s}=yt(),[r,a]=(0,n.useState)(!1),[o,l]=(0,n.useState)(!1),[c,u]=(0,n.useState)(!1),[h,m]=(0,n.useState)({firstName:(null===e||void 0===e?void 0:e.first_name)||"",lastName:(null===e||void 0===e?void 0:e.last_name)||"",email:(null===e||void 0===e?void 0:e.email)||"",phone:(null===e||void 0===e?void 0:e.phone_number)||""}),[p,f]=(0,n.useState)({currentPassword:"",newPassword:"",confirmPassword:""}),[g,x]=(0,n.useState)({emailNotifications:!0,loanAlerts:!0,savingsAlerts:!0,systemAlerts:!1});return(0,i.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50 pb-24",children:[(0,i.jsx)("div",{className:"bg-white/80 backdrop-blur-lg shadow-lg border-b border-white/50 sticky top-0 z-30",children:(0,i.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:(0,i.jsx)("div",{className:"flex items-center justify-between",children:(0,i.jsxs)("div",{className:"flex items-center gap-4",children:[(0,i.jsx)("div",{className:"p-3 bg-gradient-to-br from-purple-500 to-pink-600 rounded-2xl shadow-lg",children:(0,i.jsx)(Kp,{size:32,className:"text-white"})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900 font-montserrat",children:"Param\xe8tres"}),(0,i.jsx)("p",{className:"text-sm sm:text-base text-gray-600 font-montserrat",children:"Configuration de votre compte"})]})]})})})}),(0,i.jsxs)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,i.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden mb-6",children:[(0,i.jsx)("div",{className:"p-4 sm:p-6 bg-gradient-to-r from-blue-500 to-purple-600 text-white",children:(0,i.jsxs)("div",{className:"flex items-center gap-3",children:[(0,i.jsx)("div",{className:"p-2 bg-white/20 rounded-xl",children:(0,i.jsx)(mi,{size:24})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h2",{className:"text-xl font-bold font-montserrat",children:"Informations du profil"}),(0,i.jsx)("p",{className:"text-sm text-blue-100",children:"G\xe9rez vos informations personnelles"})]})]})}),(0,i.jsxs)("div",{className:"p-4 sm:p-6",children:[(0,i.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-6",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Pr\xe9nom"}),(0,i.jsx)("input",{type:"text",value:h.firstName,onChange:e=>m((0,d.A)((0,d.A)({},h),{},{firstName:e.target.value})),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nom"}),(0,i.jsx)("input",{type:"text",value:h.lastName,onChange:e=>m((0,d.A)((0,d.A)({},h),{},{lastName:e.target.value})),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsx)(bf,{size:18,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,i.jsx)("input",{type:"email",value:h.email,onChange:e=>m((0,d.A)((0,d.A)({},h),{},{email:e.target.value})),className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"T\xe9l\xe9phone"}),(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsx)(vf,{size:18,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,i.jsx)("input",{type:"tel",value:h.phone,onChange:e=>m((0,d.A)((0,d.A)({},h),{},{phone:e.target.value})),className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})]}),(0,i.jsxs)("button",{onClick:async()=>{try{a(!0),await new Promise(e=>setTimeout(e,1e3)),t("Profil mis \xe0 jour avec succ\xe8s")}catch(e){console.error("[SETTINGS] Erreur:",e),s("Erreur lors de la mise \xe0 jour")}finally{a(!1)}},disabled:r,className:"flex items-center justify-center gap-2 px-6 py-3 bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white rounded-xl transition-all duration-200 shadow-md hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,i.jsx)(cx,{size:18}),(0,i.jsx)("span",{className:"font-medium",children:r?"Enregistrement...":"Enregistrer les modifications"})]})]})]}),(0,i.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden mb-6",children:[(0,i.jsx)("div",{className:"p-4 sm:p-6 bg-gradient-to-r from-red-500 to-orange-600 text-white",children:(0,i.jsxs)("div",{className:"flex items-center gap-3",children:[(0,i.jsx)("div",{className:"p-2 bg-white/20 rounded-xl",children:(0,i.jsx)(pf,{size:24})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h2",{className:"text-xl font-bold font-montserrat",children:"S\xe9curit\xe9"}),(0,i.jsx)("p",{className:"text-sm text-red-100",children:"Changez votre mot de passe"})]})]})}),(0,i.jsxs)("div",{className:"p-4 sm:p-6",children:[(0,i.jsxs)("div",{className:"space-y-4 mb-6",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Mot de passe actuel"}),(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsx)(yf,{size:18,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,i.jsx)("input",{type:o?"text":"password",value:p.currentPassword,onChange:e=>f((0,d.A)((0,d.A)({},p),{},{currentPassword:e.target.value})),className:"w-full pl-10 pr-12 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-red-500 focus:border-transparent"}),(0,i.jsx)("button",{type:"button",onClick:()=>l(!o),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:o?(0,i.jsx)(jf,{size:18}):(0,i.jsx)(wf,{size:18})})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nouveau mot de passe"}),(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsx)(yf,{size:18,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,i.jsx)("input",{type:o?"text":"password",value:p.newPassword,onChange:e=>f((0,d.A)((0,d.A)({},p),{},{newPassword:e.target.value})),className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-red-500 focus:border-transparent"})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirmer le nouveau mot de passe"}),(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsx)(yf,{size:18,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,i.jsx)("input",{type:o?"text":"password",value:p.confirmPassword,onChange:e=>f((0,d.A)((0,d.A)({},p),{},{confirmPassword:e.target.value})),className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-red-500 focus:border-transparent"})]})]})]}),(0,i.jsxs)("button",{onClick:async()=>{try{if(p.newPassword!==p.confirmPassword)return void s("Les mots de passe ne correspondent pas");if(p.newPassword.length<6)return void s("Le mot de passe doit contenir au moins 6 caract\xe8res");a(!0),await new Promise(e=>setTimeout(e,1e3)),t("Mot de passe mis \xe0 jour avec succ\xe8s"),f({currentPassword:"",newPassword:"",confirmPassword:""})}catch(e){console.error("[SETTINGS] Erreur:",e),s("Erreur lors de la mise \xe0 jour")}finally{a(!1)}},disabled:r,className:"flex items-center justify-center gap-2 px-6 py-3 bg-gradient-to-r from-red-500 to-orange-600 hover:from-red-600 hover:to-orange-700 text-white rounded-xl transition-all duration-200 shadow-md hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,i.jsx)(pf,{size:18}),(0,i.jsx)("span",{className:"font-medium",children:r?"Mise \xe0 jour...":"Changer le mot de passe"})]})]})]}),(0,i.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden",children:[(0,i.jsx)("div",{className:"p-4 sm:p-6 bg-gradient-to-r from-green-500 to-emerald-600 text-white",children:(0,i.jsxs)("div",{className:"flex items-center gap-3",children:[(0,i.jsx)("div",{className:"p-2 bg-white/20 rounded-xl",children:(0,i.jsx)(hi,{size:24})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h2",{className:"text-xl font-bold font-montserrat",children:"Notifications"}),(0,i.jsx)("p",{className:"text-sm text-green-100",children:"G\xe9rez vos pr\xe9f\xe9rences de notification"})]})]})}),(0,i.jsxs)("div",{className:"p-4 sm:p-6",children:[(0,i.jsxs)("div",{className:"space-y-4 mb-6",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-xl",children:[(0,i.jsxs)("div",{className:"flex items-center gap-3",children:[(0,i.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,i.jsx)(bf,{size:18,className:"text-blue-600"})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"font-medium text-gray-900",children:"Notifications par email"}),(0,i.jsx)("p",{className:"text-sm text-gray-600",children:"Recevoir les notifications importantes par email"})]})]}),(0,i.jsx)("button",{onClick:()=>x((0,d.A)((0,d.A)({},g),{},{emailNotifications:!g.emailNotifications})),className:"relative w-12 h-6 rounded-full transition-colors ".concat(g.emailNotifications?"bg-green-500":"bg-gray-300"),children:(0,i.jsx)("div",{className:"absolute top-1 w-4 h-4 bg-white rounded-full transition-transform ".concat(g.emailNotifications?"translate-x-7":"translate-x-1")})})]}),(0,i.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-xl",children:[(0,i.jsxs)("div",{className:"flex items-center gap-3",children:[(0,i.jsx)("div",{className:"p-2 bg-purple-100 rounded-lg",children:(0,i.jsx)(zg.A,{size:18,className:"text-purple-600"})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"font-medium text-gray-900",children:"Alertes de pr\xeats"}),(0,i.jsx)("p",{className:"text-sm text-gray-600",children:"Notifications pour les nouvelles demandes de pr\xeat"})]})]}),(0,i.jsx)("button",{onClick:()=>x((0,d.A)((0,d.A)({},g),{},{loanAlerts:!g.loanAlerts})),className:"relative w-12 h-6 rounded-full transition-colors ".concat(g.loanAlerts?"bg-green-500":"bg-gray-300"),children:(0,i.jsx)("div",{className:"absolute top-1 w-4 h-4 bg-white rounded-full transition-transform ".concat(g.loanAlerts?"translate-x-7":"translate-x-1")})})]}),(0,i.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-xl",children:[(0,i.jsxs)("div",{className:"flex items-center gap-3",children:[(0,i.jsx)("div",{className:"p-2 bg-green-100 rounded-lg",children:(0,i.jsx)(mt.A,{size:18,className:"text-green-600"})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"font-medium text-gray-900",children:"Alertes d'\xe9pargne"}),(0,i.jsx)("p",{className:"text-sm text-gray-600",children:"Notifications pour les nouveaux plans d'\xe9pargne"})]})]}),(0,i.jsx)("button",{onClick:()=>x((0,d.A)((0,d.A)({},g),{},{savingsAlerts:!g.savingsAlerts})),className:"relative w-12 h-6 rounded-full transition-colors ".concat(g.savingsAlerts?"bg-green-500":"bg-gray-300"),children:(0,i.jsx)("div",{className:"absolute top-1 w-4 h-4 bg-white rounded-full transition-transform ".concat(g.savingsAlerts?"translate-x-7":"translate-x-1")})})]}),(0,i.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-xl",children:[(0,i.jsxs)("div",{className:"flex items-center gap-3",children:[(0,i.jsx)("div",{className:"p-2 bg-orange-100 rounded-lg",children:(0,i.jsx)(ft,{size:18,className:"text-orange-600"})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"font-medium text-gray-900",children:"Alertes syst\xe8me"}),(0,i.jsx)("p",{className:"text-sm text-gray-600",children:"Notifications pour les mises \xe0 jour syst\xe8me"})]})]}),(0,i.jsx)("button",{onClick:()=>x((0,d.A)((0,d.A)({},g),{},{systemAlerts:!g.systemAlerts})),className:"relative w-12 h-6 rounded-full transition-colors ".concat(g.systemAlerts?"bg-green-500":"bg-gray-300"),children:(0,i.jsx)("div",{className:"absolute top-1 w-4 h-4 bg-white rounded-full transition-transform ".concat(g.systemAlerts?"translate-x-7":"translate-x-1")})})]})]}),(0,i.jsxs)("button",{onClick:async()=>{try{a(!0),await new Promise(e=>setTimeout(e,1e3)),t("Pr\xe9f\xe9rences de notification mises \xe0 jour")}catch(e){console.error("[SETTINGS] Erreur:",e),s("Erreur lors de la mise \xe0 jour")}finally{a(!1)}},disabled:r,className:"flex items-center justify-center gap-2 px-6 py-3 bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white rounded-xl transition-all duration-200 shadow-md hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,i.jsx)(hi,{size:18}),(0,i.jsx)("span",{className:"font-medium",children:r?"Enregistrement...":"Enregistrer les pr\xe9f\xe9rences"})]})]})]}),(0,i.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden mb-6",children:[(0,i.jsx)("div",{className:"p-4 sm:p-6 bg-gradient-to-r from-orange-500 to-red-600 text-white",children:(0,i.jsxs)("div",{className:"flex items-center gap-3",children:[(0,i.jsx)("div",{className:"p-2 bg-white/20 rounded-xl",children:(0,i.jsx)(dx,{size:24})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h2",{className:"text-xl font-bold font-montserrat",children:"Outils de d\xe9veloppement"}),(0,i.jsx)("p",{className:"text-sm text-orange-100",children:"Outils de debug et diagnostic"})]})]})}),(0,i.jsxs)("div",{className:"p-4 sm:p-6",children:[(0,i.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-xl p-4 mb-4",children:(0,i.jsxs)("div",{className:"flex items-start gap-3",children:[(0,i.jsx)(ft,{size:20,className:"text-yellow-600 mt-0.5"}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{className:"font-semibold text-yellow-800 mb-1",children:"\u26a0\ufe0f Outils de Debug"}),(0,i.jsx)("p",{className:"text-sm text-yellow-700",children:"Ces outils sont destin\xe9s aux d\xe9veloppeurs et administrateurs techniques. Utilisez-les uniquement en cas de probl\xe8me avec les r\xf4les ou les notifications."})]})]})}),(0,i.jsxs)("button",{onClick:()=>u(!c),className:"flex items-center justify-center gap-2 px-6 py-3 bg-gradient-to-r from-orange-500 to-red-600 hover:from-orange-600 hover:to-red-700 text-white rounded-xl transition-all duration-200 shadow-md hover:shadow-lg",children:[(0,i.jsx)(dx,{size:18}),(0,i.jsx)("span",{className:"font-medium",children:c?"Masquer le panneau de debug":"Afficher le panneau de debug"})]})]})]})]}),c&&(0,i.jsx)(lx,{})]})};var hx=s(6487);const mx=()=>{var e,t,s,r,a,o;const l=(0,Ge.Zp)(),[c,u]=(0,n.useState)(!1),[h,m]=(0,n.useState)(null),[p,f]=(0,n.useState)([]),[g,x]=(0,n.useState)({totalPlans:0,totalSaved:0,activePlans:0,completedPlans:0,suspendedPlans:0,averageProgress:0}),[v,b]=(0,n.useState)(""),[y,j]=(0,n.useState)(null),[w,N]=(0,n.useState)([]),[S,k]=(0,n.useState)(null),[A,_]=(0,n.useState)("plans");(0,n.useEffect)(()=>{E(),C()},[]);const E=async()=>{try{u(!0),m(null),console.log("[ADMIN_AB_EPARGNE] \ud83d\udce5 Chargement des plans d'\xe9pargne...");const{data:e,error:t}=await lt.ND.from("savings_plans").select("*").order("created_at",{ascending:!1});if(t)throw console.error("[ADMIN_AB_EPARGNE] \u274c Erreur plans:",t),m(t.message||"Erreur lors du chargement des plans"),t;console.log("[ADMIN_AB_EPARGNE] \u2705 Plans charg\xe9s:",e),console.log("[ADMIN_AB_EPARGNE] \ud83d\udcca Nombre de plans:",(null===e||void 0===e?void 0:e.length)||0);const s=[...new Set(e.map(e=>e.user_id).filter(Boolean))];console.log("[ADMIN_AB_EPARGNE] \ud83d\udc65 IDs utilisateurs:",s);const{data:n,error:r}=await lt.ND.from("users").select("id, first_name, last_name, email, phone_number").in("id",s);r&&console.error("[ADMIN_AB_EPARGNE] \u26a0\ufe0f Erreur utilisateurs:",r),console.log("[ADMIN_AB_EPARGNE] \u2705 Utilisateurs charg\xe9s:",(null===n||void 0===n?void 0:n.length)||0);const a={};(n||[]).forEach(e=>{a[e.id]=e});const i=e.map(e=>(0,d.A)((0,d.A)({},e),{},{users:a[e.user_id]||null}));console.log("[ADMIN_AB_EPARGNE] \u2705 Plans avec utilisateurs:",i);const o=(i||[]).map(e=>{const t=e.total_amount_target||e.target_amount||0,s=e.current_balance||0,n=t>0?Math.round(s/t*100):0;return(0,d.A)((0,d.A)({},e),{},{user:e.users,target_amount:t,current_balance:s,monthly_amount:e.fixed_amount||e.monthly_amount||0,progress:Math.min(n,100),daysActive:Math.floor((new Date-new Date(e.created_at))/864e5),isOverdue:e.is_overdue||!1,isSuspended:e.is_suspended||!1})});console.log("[ADMIN_AB_EPARGNE] \ud83d\udccb Plans format\xe9s:",o),f(o);const l=o.filter(e=>"active"===e.status).length,c=o.filter(e=>"completed"===e.status).length,h=o.filter(e=>e.is_suspended).length,p=o.reduce((e,t)=>e+(t.current_balance||0),0),g=o.length>0?Math.round(o.reduce((e,t)=>e+t.progress,0)/o.length):0;x({totalPlans:o.length,totalSaved:p,activePlans:l,completedPlans:c,suspendedPlans:h,averageProgress:g})}catch(h){console.error("[ADMIN_AB_EPARGNE] \u274c Erreur lors du chargement:",h),m(h.message||"Une erreur est survenue"),f([]),x({totalPlans:0,totalSaved:0,activePlans:0,completedPlans:0,suspendedPlans:0,averageProgress:0})}finally{u(!1)}},C=async()=>{try{console.log("[ADMIN_AB_EPARGNE] \ud83d\udce5 Chargement des demandes de retrait...");const{data:e,error:t}=await lt.ND.from("withdrawal_requests").select("*").order("created_at",{ascending:!1});if(t)throw console.error("[ADMIN_AB_EPARGNE] \u274c Erreur demandes:",t),t;console.log("[ADMIN_AB_EPARGNE] \u2705 Demandes charg\xe9es:",e);const s=[...new Set(e.map(e=>e.user_id).filter(Boolean))],n=[...new Set(e.map(e=>e.savings_plan_id).filter(Boolean))],{data:r}=await lt.ND.from("users").select("id, first_name, last_name, email, phone_number").in("id",s),{data:a}=await lt.ND.from("savings_plans").select("id, target_amount, current_balance").in("id",n),i={};(r||[]).forEach(e=>{i[e.id]=e});const o={};(a||[]).forEach(e=>{o[e.id]=e});const l=e.map(e=>(0,d.A)((0,d.A)({},e),{},{user:i[e.user_id]||null,plan:o[e.savings_plan_id]||null}));N(l),console.log("[ADMIN_AB_EPARGNE] \u2705 Demandes format\xe9es:",l)}catch(h){console.error("[ADMIN_AB_EPARGNE] \u274c Erreur chargement demandes:",h)}},P=e=>{let{plan:t}=e;const s=(e=>{if(!e||!e.next_deposit_date)return!1;const t=new Date(e.next_deposit_date),s=new Date;return s.setHours(0,0,0,0),t.setHours(0,0,0,0),t<s})(t),n=(e=>{if(!e||!e.next_deposit_date)return 0;const t=new Date(e.next_deposit_date),s=new Date;s.setHours(0,0,0,0),t.setHours(0,0,0,0);const n=s.getTime()-t.getTime(),r=Math.floor(n/864e5);return Math.max(0,r)})(t);return s?(0,i.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-[10px] font-semibold bg-orange-50 text-orange-600 border border-orange-200 animate-pulse",children:[(0,i.jsx)(ft,{size:10}),"Retard ",n>0&&"".concat(n,"j")]}):(0,i.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-[10px] font-semibold bg-green-50 text-green-600 border border-green-200",children:[(0,i.jsx)(mt.A,{size:10}),"\xc0 jour"]})},T=e=>e.is_suspended?(0,i.jsxs)("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-semibold bg-red-100 text-red-700",children:[(0,i.jsx)(Zg,{size:14}),"Suspendu"]}):e.is_overdue?(0,i.jsxs)("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-semibold bg-orange-100 text-orange-700",children:[(0,i.jsx)(ft,{size:14}),"En retard"]}):"completed"===e.status?(0,i.jsxs)("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-semibold bg-green-100 text-green-700",children:[(0,i.jsx)(mt.A,{size:14}),"Termin\xe9"]}):"active"===e.status?(0,i.jsxs)("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-semibold bg-blue-100 text-blue-700",children:[(0,i.jsx)(zg.A,{size:14}),"Actif"]}):(0,i.jsxs)("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-semibold bg-gray-100 text-gray-700",children:[(0,i.jsx)(kp,{size:14}),e.status]}),I=p.filter(e=>{var t,s,n,r,a,i,o,l;if(!v)return!0;const c=v.toLowerCase();return(null===(t=e.user)||void 0===t||null===(s=t.first_name)||void 0===s?void 0:s.toLowerCase().includes(c))||(null===(n=e.user)||void 0===n||null===(r=n.last_name)||void 0===r?void 0:r.toLowerCase().includes(c))||(null===(a=e.user)||void 0===a||null===(i=a.email)||void 0===i?void 0:i.toLowerCase().includes(c))||(null===(o=e.user)||void 0===o||null===(l=o.phone_number)||void 0===l?void 0:l.includes(c))});return h?(0,i.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-green-50 via-blue-50 to-purple-50 flex items-center justify-center p-4",children:(0,i.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8 max-w-md w-full text-center",children:[(0,i.jsx)("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,i.jsx)(ft,{size:32,className:"text-red-600"})}),(0,i.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Erreur de chargement"}),(0,i.jsx)("p",{className:"text-gray-600 mb-6",children:h}),(0,i.jsxs)("div",{className:"space-y-3",children:[(0,i.jsxs)("button",{onClick:E,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-green-600 hover:bg-green-700 text-white rounded-xl transition-colors",children:[(0,i.jsx)(ai.A,{size:18}),"R\xe9essayer"]}),(0,i.jsx)("button",{onClick:()=>l("/admin"),className:"w-full px-4 py-3 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-xl transition-colors",children:"Retour au dashboard"})]}),(0,i.jsx)("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg text-left",children:(0,i.jsx)("p",{className:"text-xs text-gray-500 font-mono break-all",children:h})})]})}):(0,i.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-green-50 via-blue-50 to-purple-50 pb-24",children:[(0,i.jsx)("div",{className:"bg-white/80 backdrop-blur-lg shadow-lg border-b border-white/50 sticky top-0 z-30",children:(0,i.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{className:"flex items-center gap-4",children:[(0,i.jsx)("div",{className:"p-3 bg-gradient-to-br from-green-500 to-emerald-600 rounded-2xl shadow-lg",children:(0,i.jsx)(Fg,{size:32,className:"text-white"})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h1",{className:"text-3xl font-bold text-gray-900 font-montserrat",children:"AB Epargne"}),(0,i.jsx)("p",{className:"text-gray-600 font-montserrat",children:"Gestion des comptes d'\xe9pargne"})]})]}),(0,i.jsxs)("button",{onClick:E,className:"flex items-center gap-2 px-4 py-2 bg-white hover:bg-gray-50 border border-gray-200 rounded-xl transition-all duration-200 shadow-sm hover:shadow",children:[(0,i.jsx)(ai.A,{size:18,className:"text-gray-600"}),(0,i.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Actualiser"})]})]})})}),(0,i.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[c&&(0,i.jsxs)("div",{className:"flex items-center justify-center gap-2 py-2 mb-4 text-gray-500 text-sm",children:[(0,i.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-green-500 border-t-transparent"}),(0,i.jsx)("span",{children:"Chargement des donn\xe9es..."})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8 transition-opacity duration-200 ".concat(c?"opacity-75":""),children:[(0,i.jsxs)("div",{className:"bg-white rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-100 group",children:[(0,i.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,i.jsx)("div",{className:"p-3 bg-blue-100 rounded-xl group-hover:scale-110 transition-transform duration-300",children:(0,i.jsx)(zg.A,{size:24,className:"text-blue-600"})}),(0,i.jsxs)("div",{className:"text-right",children:[(0,i.jsx)("p",{className:"text-sm text-gray-600 font-medium",children:"Plans Actifs"}),(0,i.jsx)("p",{className:"text-3xl font-bold text-gray-900 mt-1",children:g.activePlans})]})]}),(0,i.jsxs)("div",{className:"flex items-center justify-between pt-4 border-t border-gray-100",children:[(0,i.jsx)("span",{className:"text-xs text-gray-500",children:"Total plans"}),(0,i.jsx)("span",{className:"text-sm font-semibold text-gray-700",children:g.totalPlans})]})]}),(0,i.jsxs)("div",{className:"bg-gradient-to-br from-green-500 to-emerald-600 rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 text-white group",children:[(0,i.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,i.jsx)("div",{className:"p-3 bg-white/20 rounded-xl group-hover:scale-110 transition-transform duration-300",children:(0,i.jsx)(Qp,{size:24,className:"text-white"})}),(0,i.jsxs)("div",{className:"text-right",children:[(0,i.jsx)("p",{className:"text-sm text-green-100 font-medium",children:"Total \xc9pargn\xe9"}),(0,i.jsx)("p",{className:"text-2xl font-bold mt-1",children:(0,Dp.vv)(g.totalSaved)})]})]}),(0,i.jsxs)("div",{className:"flex items-center gap-2 pt-4 border-t border-white/20",children:[(0,i.jsx)(Vg.A,{size:16,className:"text-green-200"}),(0,i.jsxs)("span",{className:"text-sm text-green-100",children:["Progression moyenne: ",g.averageProgress,"%"]})]})]}),(0,i.jsx)("div",{className:"bg-white rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-100",children:(0,i.jsxs)("div",{className:"space-y-3",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)(mt.A,{size:18,className:"text-green-600"}),(0,i.jsx)("span",{className:"text-sm text-gray-600",children:"Termin\xe9s"})]}),(0,i.jsx)("span",{className:"text-lg font-bold text-gray-900",children:g.completedPlans})]}),(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)(Zg,{size:18,className:"text-red-600"}),(0,i.jsx)("span",{className:"text-sm text-gray-600",children:"Suspendus"})]}),(0,i.jsx)("span",{className:"text-lg font-bold text-gray-900",children:g.suspendedPlans})]}),(0,i.jsxs)("div",{className:"flex items-center justify-between pt-3 border-t border-gray-100",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)(Ug,{size:18,className:"text-purple-600"}),(0,i.jsx)("span",{className:"text-sm text-gray-600",children:"Taux de r\xe9ussite"})]}),(0,i.jsxs)("span",{className:"text-lg font-bold text-purple-600",children:[g.totalPlans>0?Math.round(g.completedPlans/g.totalPlans*100):0,"%"]})]})]})})]}),(0,i.jsx)("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 p-2 mb-6",children:(0,i.jsxs)("div",{className:"flex gap-2",children:[(0,i.jsxs)("button",{onClick:()=>_("plans"),className:"flex-1 flex items-center justify-center gap-2 px-6 py-3 rounded-xl font-semibold transition-all duration-200 ".concat("plans"===A?"bg-gradient-to-r from-green-500 to-emerald-600 text-white shadow-lg":"bg-gray-50 text-gray-600 hover:bg-gray-100"),children:[(0,i.jsx)(Fg,{size:20}),(0,i.jsx)("span",{children:"Plans d'\xe9pargne"}),(0,i.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-bold ".concat("plans"===A?"bg-white/20":"bg-gray-200 text-gray-700"),children:p.length})]}),(0,i.jsxs)("button",{onClick:()=>_("withdrawals"),className:"flex-1 flex items-center justify-center gap-2 px-6 py-3 rounded-xl font-semibold transition-all duration-200 ".concat("withdrawals"===A?"bg-gradient-to-r from-green-500 to-emerald-600 text-white shadow-lg":"bg-gray-50 text-gray-600 hover:bg-gray-100"),children:[(0,i.jsx)(Hp.A,{size:20}),(0,i.jsx)("span",{children:"Demandes de retrait"}),(0,i.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-bold ".concat("withdrawals"===A?"bg-white/20":"bg-gray-200 text-gray-700"),children:w.filter(e=>"pending"===e.status).length})]})]})}),"plans"===A&&(0,i.jsx)("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 p-4 mb-6",children:(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsx)(Jg,{size:20,className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,i.jsx)("input",{type:"text",placeholder:"Rechercher par nom, email ou t\xe9l\xe9phone...",value:v,onChange:e=>b(e.target.value),className:"w-full pl-12 pr-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-transparent font-montserrat"})]})}),"plans"===A&&(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,i.jsxs)("h2",{className:"text-xl font-bold text-gray-900 font-montserrat",children:["Plans d'\xe9pargne (",I.length,")"]})}),0===I.length?(0,i.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 p-12 text-center",children:[(0,i.jsx)(Fg,{size:64,className:"mx-auto text-gray-300 mb-4"}),(0,i.jsx)("p",{className:"text-gray-500 font-medium",children:"Aucun plan d'\xe9pargne trouv\xe9"}),v&&(0,i.jsx)("button",{onClick:()=>b(""),className:"mt-4 text-green-600 hover:text-green-700 font-medium",children:"Effacer la recherche"})]}):(0,i.jsx)("div",{className:"grid grid-cols-1 gap-4",children:I.map(e=>{var t,s,n,r,a,o,l,c;return(0,i.jsx)("div",{className:"bg-white rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-100 overflow-hidden group",children:(0,i.jsxs)("div",{className:"p-6",children:[(0,i.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,i.jsxs)("div",{className:"flex items-center gap-4",children:[(0,i.jsxs)("div",{className:"w-12 h-12 bg-gradient-to-br from-green-400 to-blue-500 rounded-full flex items-center justify-center text-white font-bold text-lg shadow-lg",children:[(null===(t=e.user)||void 0===t||null===(s=t.first_name)||void 0===s?void 0:s[0])||"?",(null===(n=e.user)||void 0===n||null===(r=n.last_name)||void 0===r?void 0:r[0])||""]}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("h3",{className:"text-lg font-bold text-gray-900 font-montserrat",children:[(null===(a=e.user)||void 0===a?void 0:a.first_name)||"Inconnu"," ",(null===(o=e.user)||void 0===o?void 0:o.last_name)||""]}),(0,i.jsxs)("div",{className:"flex items-center gap-3 mt-1",children:[(0,i.jsxs)("div",{className:"flex items-center gap-1 text-sm text-gray-500",children:[(0,i.jsx)(bf,{size:14}),(null===(l=e.user)||void 0===l?void 0:l.email)||"N/A"]}),(null===(c=e.user)||void 0===c?void 0:c.phone_number)&&(0,i.jsxs)("div",{className:"flex items-center gap-1 text-sm text-gray-500",children:[(0,i.jsx)(vf,{size:14}),e.user.phone_number]})]})]})]}),T(e)]}),(0,i.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[(0,i.jsxs)("div",{className:"bg-gray-50 rounded-xl p-3",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,i.jsx)(hx.A,{size:16,className:"text-blue-600"}),(0,i.jsx)("p",{className:"text-xs text-gray-600 font-medium",children:"Objectif"})]}),(0,i.jsx)("p",{className:"text-lg font-bold text-gray-900",children:(0,Dp.vv)(e.target_amount)})]}),(0,i.jsxs)("div",{className:"bg-green-50 rounded-xl p-3",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,i.jsx)(Qp,{size:16,className:"text-green-600"}),(0,i.jsx)("p",{className:"text-xs text-gray-600 font-medium",children:"\xc9pargn\xe9"})]}),(0,i.jsx)("p",{className:"text-lg font-bold text-green-700",children:(0,Dp.vv)(e.current_balance||0)})]}),(0,i.jsxs)("div",{className:"bg-purple-50 rounded-xl p-3",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,i.jsx)(rx.A,{size:16,className:"text-purple-600"}),(0,i.jsx)("p",{className:"text-xs text-gray-600 font-medium",children:"Mensualit\xe9"})]}),(0,i.jsx)("p",{className:"text-lg font-bold text-purple-700",children:(0,Dp.vv)(e.monthly_amount||0)})]}),(0,i.jsxs)("div",{className:"bg-orange-50 rounded-xl p-3",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)(Yg.A,{size:16,className:"text-orange-600"}),(0,i.jsx)("p",{className:"text-xs text-gray-600 font-medium",children:"Prochain d\xe9p\xf4t"})]}),(0,i.jsx)(P,{plan:e})]}),(0,i.jsx)("p",{className:"text-sm font-bold text-orange-700",children:e.next_deposit_date?new Date(e.next_deposit_date).toLocaleDateString("fr-FR",{day:"2-digit",month:"short"}):"N/A"})]})]}),(0,i.jsxs)("div",{className:"mb-4",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,i.jsx)("span",{className:"text-sm font-medium text-gray-600",children:"Progression"}),(0,i.jsxs)("span",{className:"text-sm font-bold text-green-600",children:[e.progress,"%"]})]}),(0,i.jsx)("div",{className:"relative w-full h-3 bg-gray-200 rounded-full overflow-hidden",children:(0,i.jsx)("div",{className:"absolute top-0 left-0 h-full bg-gradient-to-r from-green-500 to-emerald-600 rounded-full transition-all duration-500",style:{width:"".concat(e.progress,"%")},children:(0,i.jsx)("div",{className:"absolute inset-0 bg-white/20 animate-pulse"})})})]}),(0,i.jsxs)("div",{className:"flex items-center justify-between pt-4 border-t border-gray-100",children:[(0,i.jsxs)("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[(0,i.jsxs)("span",{children:["Cr\xe9\xe9 il y a ",e.daysActive," jours"]}),e.is_overdue&&e.days_overdue>0&&(0,i.jsxs)("span",{className:"text-orange-600 font-medium",children:["\u26a0\ufe0f ",e.days_overdue," jour(s) de retard"]})]}),(0,i.jsxs)("button",{onClick:()=>j(e),className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white rounded-xl transition-all duration-200 shadow-md hover:shadow-lg group",children:[(0,i.jsx)(wf,{size:16}),(0,i.jsx)("span",{className:"text-sm font-medium",children:"D\xe9tails"})]})]})]})},e.id)})})]}),"withdrawals"===A&&(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,i.jsxs)("h2",{className:"text-xl font-bold text-gray-900 font-montserrat",children:["Demandes de retrait (",w.length,")"]})}),0===w.length?(0,i.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 p-12 text-center",children:[(0,i.jsx)(Hp.A,{size:64,className:"mx-auto text-gray-300 mb-4"}),(0,i.jsx)("p",{className:"text-gray-500 font-medium",children:"Aucune demande de retrait"})]}):(0,i.jsx)("div",{className:"grid gap-4",children:w.map(e=>{var t,s,n,r,a,o,l;return(0,i.jsx)("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 hover:shadow-xl transition-all duration-300 overflow-hidden",children:(0,i.jsxs)("div",{className:"p-6",children:[(0,i.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,i.jsxs)("div",{className:"flex items-center gap-3",children:[(0,i.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-green-100 to-emerald-100 rounded-xl flex items-center justify-center",children:(0,i.jsxs)("span",{className:"text-xl font-bold text-green-700",children:[null===(t=e.user)||void 0===t||null===(s=t.first_name)||void 0===s?void 0:s[0],null===(n=e.user)||void 0===n||null===(r=n.last_name)||void 0===r?void 0:r[0]]})}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("h3",{className:"text-lg font-bold text-gray-900",children:[null===(a=e.user)||void 0===a?void 0:a.first_name," ",null===(o=e.user)||void 0===o?void 0:o.last_name]}),(0,i.jsx)("p",{className:"text-sm text-gray-500",children:null===(l=e.user)||void 0===l?void 0:l.email})]})]}),(0,i.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-semibold ".concat("pending"===e.status?"bg-orange-100 text-orange-700":"approved"===e.status?"bg-green-100 text-green-700":"bg-red-100 text-red-700"),children:"pending"===e.status?"\u23f3 En attente":"approved"===e.status?"\u2705 Approuv\xe9":"\u274c Refus\xe9"})]}),(0,i.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[(0,i.jsxs)("div",{className:"bg-blue-50 rounded-xl p-3",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,i.jsx)(Qp,{size:16,className:"text-blue-600"}),(0,i.jsx)("p",{className:"text-xs text-gray-600 font-medium",children:"Montant"})]}),(0,i.jsx)("p",{className:"text-lg font-bold text-blue-700",children:(0,Dp.vv)(e.amount||0)})]}),(0,i.jsxs)("div",{className:"bg-purple-50 rounded-xl p-3",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,i.jsx)(vf,{size:16,className:"text-purple-600"}),(0,i.jsx)("p",{className:"text-xs text-gray-600 font-medium",children:"Num\xe9ro"})]}),(0,i.jsx)("p",{className:"text-sm font-bold text-purple-700",children:e.recipient_phone})]}),(0,i.jsxs)("div",{className:"bg-green-50 rounded-xl p-3",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,i.jsx)(tx,{size:16,className:"text-green-600"}),(0,i.jsx)("p",{className:"text-xs text-gray-600 font-medium",children:"Nom"})]}),(0,i.jsx)("p",{className:"text-sm font-bold text-green-700",children:e.recipient_name})]}),(0,i.jsxs)("div",{className:"bg-orange-50 rounded-xl p-3",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,i.jsx)(Yg.A,{size:16,className:"text-orange-600"}),(0,i.jsx)("p",{className:"text-xs text-gray-600 font-medium",children:"Date"})]}),(0,i.jsx)("p",{className:"text-xs font-bold text-orange-700",children:new Date(e.created_at).toLocaleDateString("fr-FR",{day:"2-digit",month:"short",year:"numeric"})})]})]}),"pending"===e.status&&(0,i.jsxs)("div",{className:"flex items-center gap-3 pt-4 border-t border-gray-100",children:[(0,i.jsxs)("button",{onClick:()=>(async e=>{try{console.log("[ADMIN_AB_EPARGNE] \u2705 Approbation retrait:",e.id);const{data:{user:t}}=await lt.ND.auth.getUser(),s=await fetch("".concat(Ep.f,"/api/savings/withdrawal-approve"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({withdrawalId:e.id,processedBy:(null===t||void 0===t?void 0:t.id)||null})}),n=await s.json().catch(()=>({}));if(!s.ok)throw new Error(n.error||"Erreur lors de l'approbation");Ms.success("Retrait approuv\xe9 avec succ\xe8s ! Le plan est pass\xe9 en historique."),k(null),C(),E()}catch(h){console.error("[ADMIN_AB_EPARGNE] \u274c Erreur approbation:",h),Ms.error(h.message||"Erreur lors de l'approbation du retrait")}})(e),className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white rounded-xl transition-all duration-200 shadow-md hover:shadow-lg font-semibold",children:[(0,i.jsx)(mt.A,{size:18}),(0,i.jsx)("span",{children:"Approuver"})]}),(0,i.jsxs)("button",{onClick:()=>k(e),className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 bg-red-500 hover:bg-red-600 text-white rounded-xl transition-all duration-200 shadow-md hover:shadow-lg font-semibold",children:[(0,i.jsx)(Zg,{size:18}),(0,i.jsx)("span",{children:"Refuser"})]})]}),"pending"!==e.status&&e.processed_at&&(0,i.jsxs)("div",{className:"pt-4 border-t border-gray-100",children:[(0,i.jsxs)("p",{className:"text-xs text-gray-500",children:["Trait\xe9 le ",new Date(e.processed_at).toLocaleDateString("fr-FR",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})]}),e.notes&&(0,i.jsxs)("p",{className:"text-sm text-gray-600 mt-2",children:[(0,i.jsx)("span",{className:"font-semibold",children:"Note:"})," ",e.notes]})]})]})},e.id)})})]})]}),S&&(0,i.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:(0,i.jsxs)("div",{className:"bg-white rounded-3xl shadow-2xl max-w-md w-full",children:[(0,i.jsx)("div",{className:"bg-gradient-to-r from-red-500 to-red-600 text-white p-6 rounded-t-3xl",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsx)("h3",{className:"text-2xl font-bold",children:"Refuser la demande"}),(0,i.jsx)("button",{onClick:()=>k(null),className:"p-2 hover:bg-white/20 rounded-full transition-colors",children:(0,i.jsx)(Zg,{size:24})})]})}),(0,i.jsxs)("div",{className:"p-6",children:[(0,i.jsxs)("p",{className:"text-gray-600 mb-4",children:["\xcates-vous s\xfbr de vouloir refuser la demande de retrait de ",(0,i.jsxs)("span",{className:"font-bold",children:[null===(e=S.user)||void 0===e?void 0:e.first_name," ",null===(t=S.user)||void 0===t?void 0:t.last_name]})," ?"]}),(0,i.jsxs)("div",{className:"mb-6",children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Raison du refus"}),(0,i.jsx)("textarea",{id:"rejection-reason",rows:"3",className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"Expliquez pourquoi vous refusez cette demande..."})]}),(0,i.jsxs)("div",{className:"flex gap-3",children:[(0,i.jsx)("button",{onClick:()=>k(null),className:"flex-1 px-4 py-3 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-xl transition-colors font-semibold",children:"Annuler"}),(0,i.jsx)("button",{onClick:()=>{const e=document.getElementById("rejection-reason").value;e.trim()?(async(e,t)=>{try{console.log("[ADMIN_AB_EPARGNE] \u274c Rejet retrait:",e.id);const{data:{user:s}}=await lt.ND.auth.getUser(),n=await fetch("".concat(Ep.f,"/api/savings/withdrawal-reject"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({withdrawalId:e.id,reason:t||"",processedBy:(null===s||void 0===s?void 0:s.id)||null})}),r=await n.json().catch(()=>({}));if(!n.ok)throw new Error(r.error||"Erreur lors du rejet");Ms.success("Demande rejet\xe9e"),k(null),C(),E()}catch(h){console.error("[ADMIN_AB_EPARGNE] \u274c Erreur rejet:",h),Ms.error("Erreur lors du rejet de la demande")}})(S,e):Ms.error("Veuillez indiquer une raison")},className:"flex-1 px-4 py-3 bg-red-500 hover:bg-red-600 text-white rounded-xl transition-colors font-semibold",children:"Confirmer le refus"})]})]})]})}),y&&(0,i.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4 overflow-y-auto",children:(0,i.jsxs)("div",{className:"bg-white rounded-3xl shadow-2xl max-w-2xl w-full my-8",children:[(0,i.jsx)("div",{className:"sticky top-0 bg-gradient-to-r from-green-500 to-emerald-600 text-white p-6 rounded-t-3xl z-10",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsx)("h3",{className:"text-2xl font-bold",children:"D\xe9tails du plan"}),(0,i.jsx)("button",{onClick:()=>j(null),className:"p-2 hover:bg-white/20 rounded-full transition-colors",children:(0,i.jsx)(Zg,{size:24})})]})}),(0,i.jsxs)("div",{className:"p-6 pb-32 space-y-6 max-h-[calc(90vh-80px)] overflow-y-auto",children:[(0,i.jsxs)("div",{className:"bg-gray-50 rounded-2xl p-4",children:[(0,i.jsxs)("h4",{className:"font-bold text-gray-900 mb-3 flex items-center gap-2",children:[(0,i.jsx)(tx,{size:18}),"Informations client"]}),(0,i.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,i.jsxs)("p",{children:[(0,i.jsx)("span",{className:"font-medium",children:"Nom:"})," ",null===(s=y.user)||void 0===s?void 0:s.first_name," ",null===(r=y.user)||void 0===r?void 0:r.last_name]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("span",{className:"font-medium",children:"Email:"})," ",null===(a=y.user)||void 0===a?void 0:a.email]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("span",{className:"font-medium",children:"T\xe9l\xe9phone:"})," ",(null===(o=y.user)||void 0===o?void 0:o.phone_number)||"N/A"]})]})]}),(0,i.jsxs)("div",{className:"bg-green-50 rounded-2xl p-4",children:[(0,i.jsxs)("h4",{className:"font-bold text-gray-900 mb-3 flex items-center gap-2",children:[(0,i.jsx)(rx.A,{size:18}),"D\xe9tails financiers"]}),(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-gray-600",children:"Objectif"}),(0,i.jsx)("p",{className:"font-bold text-lg",children:(0,Dp.vv)(y.target_amount)})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-gray-600",children:"\xc9pargn\xe9"}),(0,i.jsx)("p",{className:"font-bold text-lg text-green-600",children:(0,Dp.vv)(y.current_balance||0)})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-gray-600",children:"Mensualit\xe9"}),(0,i.jsx)("p",{className:"font-bold",children:(0,Dp.vv)(y.monthly_amount||0)})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-gray-600",children:"Fr\xe9quence"}),(0,i.jsx)("p",{className:"font-bold capitalize",children:y.deposit_frequency||"N/A"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-gray-600",children:"Taux d'int\xe9r\xeat"}),(0,i.jsxs)("p",{className:"font-bold",children:[y.interest_rate||0,"%"]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-gray-600",children:"Int\xe9r\xeats accumul\xe9s"}),(0,i.jsx)("p",{className:"font-bold text-purple-600",children:(0,Dp.vv)(y.accumulated_interest||0)})]})]})]}),(0,i.jsxs)("div",{className:"bg-blue-50 rounded-2xl p-4",children:[(0,i.jsxs)("h4",{className:"font-bold text-gray-900 mb-3 flex items-center gap-2",children:[(0,i.jsx)(Yg.A,{size:18}),"Dates importantes"]}),(0,i.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,i.jsxs)("p",{children:[(0,i.jsx)("span",{className:"font-medium",children:"Cr\xe9\xe9 le:"})," ",new Date(y.created_at).toLocaleDateString("fr-FR")]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("span",{className:"font-medium",children:"Prochain d\xe9p\xf4t:"})," ",y.next_deposit_date?new Date(y.next_deposit_date).toLocaleDateString("fr-FR"):"N/A"]}),y.is_overdue&&(0,i.jsxs)("p",{className:"text-orange-600 font-medium",children:["\u26a0\ufe0f En retard depuis ",y.days_overdue," jour(s)"]})]})]}),(0,i.jsxs)("div",{className:"bg-purple-50 rounded-2xl p-4",children:[(0,i.jsx)("h4",{className:"font-bold text-gray-900 mb-3",children:"Progression"}),(0,i.jsx)("div",{className:"relative w-full h-4 bg-gray-200 rounded-full overflow-hidden mb-2",children:(0,i.jsx)("div",{className:"absolute top-0 left-0 h-full bg-gradient-to-r from-green-500 to-emerald-600 rounded-full",style:{width:"".concat(y.progress,"%")}})}),(0,i.jsxs)("p",{className:"text-center font-bold text-2xl text-green-600",children:[y.progress,"%"]})]})]})]})})]})},px=(0,pt.A)("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),fx=["children","className","title"],gx=e=>{let{children:t,className:s="",title:n}=e,r=(0,fl.A)(e,fx);return(0,i.jsxs)("div",(0,d.A)((0,d.A)({className:"bg-white rounded-xl shadow-soft border border-accent-200 ".concat(s)},r),{},{children:[n&&(0,i.jsx)("div",{className:"px-6 py-4 border-b border-accent-200",children:(0,i.jsx)("h3",{className:"text-lg font-semibold text-secondary-900 font-montserrat",children:n})}),(0,i.jsx)("div",{className:"p-6",children:t})]}))},xx=()=>{const[e,t]=(0,n.useState)([]),[s,r]=(0,n.useState)(""),[a,o]=(0,n.useState)("approval"),[l,c]=(0,n.useState)(!1),[d,u]=(0,n.useState)(null),[h,m]=(0,n.useState)(!0);(0,n.useEffect)(()=>{p()},[]);const p=async()=>{try{m(!0);const e=await(0,ct.CF)();if(e.success){const s=e.data.filter(e=>"approved"===e.status);t(s),console.log("[TEST_NOTIFICATIONS] Utilisateurs charg\xe9s:",s.length)}else console.error("[TEST_NOTIFICATIONS] Erreur chargement utilisateurs:",e.error)}catch(e){console.error("[TEST_NOTIFICATIONS] Erreur:",e)}finally{m(!1)}},f=e.find(e=>e.id===s);return(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Test des Notifications"}),(0,i.jsx)("p",{className:"text-gray-600",children:"Envoyer des notifications de test aux utilisateurs"})]}),(0,i.jsxs)(Ef,{onClick:p,variant:"outline",size:"sm",className:"flex items-center space-x-2",disabled:h,children:[(0,i.jsx)(ai.A,{size:16,className:h?"animate-spin":""}),(0,i.jsx)("span",{children:"Actualiser"})]})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,i.jsx)(gx,{children:(0,i.jsxs)("div",{className:"p-6",children:[(0,i.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center space-x-2",children:[(0,i.jsx)(hi,{size:20,className:"text-primary-600"}),(0,i.jsx)("span",{children:"Configuration du test"})]}),(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Utilisateur cible"}),h?(0,i.jsxs)("div",{className:"flex items-center space-x-2 text-gray-500",children:[(0,i.jsx)(Vf,{size:16,className:"animate-spin"}),(0,i.jsx)("span",{children:"Chargement des utilisateurs..."})]}):(0,i.jsxs)("select",{value:s,onChange:e=>r(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[(0,i.jsx)("option",{value:"",children:"S\xe9lectionner un utilisateur"}),e.map(e=>(0,i.jsxs)("option",{value:e.id,children:[e.first_name," ",e.last_name," (",e.email,")"]},e.id))]}),f&&(0,i.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:[f.first_name," ",f.last_name," - ",f.email]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Type de notification"}),(0,i.jsx)("div",{className:"space-y-2",children:["approval","reminder","overdue"].map(e=>{const t=(e=>{const t={approval:{icon:(0,i.jsx)(mt.A,{size:20,className:"text-green-600"}),title:"Pr\xeat approuv\xe9",description:"Notification de validation de pr\xeat",color:"text-green-600 bg-green-100"},reminder:{icon:(0,i.jsx)(kp,{size:20,className:"text-blue-600"}),title:"Rappel de remboursement",description:"Notification de rappel avant \xe9ch\xe9ance",color:"text-blue-600 bg-blue-100"},overdue:{icon:(0,i.jsx)(Kg,{size:20,className:"text-red-600"}),title:"Pr\xeat en retard",description:"Notification de pr\xeat en retard avec p\xe9nalit\xe9s",color:"text-red-600 bg-red-100"}};return t[e]||t.approval})(e);return(0,i.jsxs)("label",{className:"flex items-center space-x-3 p-3 border rounded-lg cursor-pointer hover:bg-gray-50",children:[(0,i.jsx)("input",{type:"radio",name:"testType",value:e,checked:a===e,onChange:e=>o(e.target.value),className:"text-primary-600 focus:ring-primary-500"}),(0,i.jsx)("div",{className:"p-2 rounded-lg ".concat(t.color),children:t.icon}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"font-medium text-gray-900",children:t.title}),(0,i.jsx)("p",{className:"text-sm text-gray-500",children:t.description})]})]},e)})})]}),(0,i.jsx)(Ef,{onClick:async()=>{if(s)try{c(!0),u(null);const e=(()=>"https://ab-pret-back.onrender.com")();console.log("[TEST_NOTIFICATIONS] Envoi notification de test...",{userId:s,testType:a,backendUrl:e});const t=await fetch("".concat(e,"/api/test-loan-notification"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:s,testType:a})}),n=await t.json();n.success?(u({type:"success",message:"Notification envoy\xe9e avec succ\xe8s !",details:n.details}),console.log("[TEST_NOTIFICATIONS] \u2705 Notification envoy\xe9e:",n.details)):(u({type:"error",message:n.error||"Erreur lors de l'envoi de la notification",details:null}),console.error("[TEST_NOTIFICATIONS] \u274c Erreur:",n.error))}catch(e){console.error("[TEST_NOTIFICATIONS] Erreur r\xe9seau:",e),u({type:"error",message:"Erreur de connexion au serveur",details:null})}finally{c(!1)}else alert("Veuillez s\xe9lectionner un utilisateur")},disabled:!s||l,className:"w-full flex items-center justify-center space-x-2",children:l?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Vf,{size:16,className:"animate-spin"}),(0,i.jsx)("span",{children:"Envoi en cours..."})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(px,{size:16}),(0,i.jsx)("span",{children:"Envoyer la notification de test"})]})})]})]})}),(0,i.jsx)(gx,{children:(0,i.jsxs)("div",{className:"p-6",children:[(0,i.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center space-x-2",children:[(0,i.jsx)(Hp.A,{size:20,className:"text-primary-600"}),(0,i.jsx)("span",{children:"R\xe9sultat du test"})]}),d?(0,i.jsx)(yp.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"p-4 rounded-lg ".concat("success"===d.type?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"),children:(0,i.jsxs)("div",{className:"flex items-start space-x-3",children:["success"===d.type?(0,i.jsx)(mt.A,{size:20,className:"text-green-600 mt-0.5"}):(0,i.jsx)(ft,{size:20,className:"text-red-600 mt-0.5"}),(0,i.jsxs)("div",{className:"flex-1",children:[(0,i.jsx)("p",{className:"font-medium ".concat("success"===d.type?"text-green-800":"text-red-800"),children:d.message}),d.details&&(0,i.jsxs)("div",{className:"mt-3 space-y-2 text-sm",children:[(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:"font-medium text-gray-700",children:"Utilisateur:"}),(0,i.jsx)("p",{className:"text-gray-600",children:d.details.user})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:"font-medium text-gray-700",children:"Email:"}),(0,i.jsx)("p",{className:"text-gray-600",children:d.details.email})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:"font-medium text-gray-700",children:"Type:"}),(0,i.jsx)("p",{className:"text-gray-600",children:d.details.testType})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:"font-medium text-gray-700",children:"Abonnements:"}),(0,i.jsx)("p",{className:"text-gray-600",children:d.details.subscriptionsFound})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:"font-medium text-gray-700",children:"Envoy\xe9es:"}),(0,i.jsx)("p",{className:"text-gray-600",children:d.details.notificationsSent})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:"font-medium text-gray-700",children:"Erreurs:"}),(0,i.jsx)("p",{className:"text-gray-600",children:d.details.errors})]})]}),d.details.notificationData&&(0,i.jsxs)("div",{className:"mt-3 p-3 bg-gray-100 rounded-lg",children:[(0,i.jsx)("p",{className:"font-medium text-gray-700 mb-1",children:"Contenu de la notification:"}),(0,i.jsxs)("p",{className:"text-sm text-gray-600",children:[(0,i.jsx)("strong",{children:"Titre:"})," ",d.details.notificationData.title]}),(0,i.jsxs)("p",{className:"text-sm text-gray-600",children:[(0,i.jsx)("strong",{children:"Message:"})," ",d.details.notificationData.body]})]})]})]})]})}):(0,i.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,i.jsx)(hi,{size:48,className:"mx-auto mb-4 opacity-50"}),(0,i.jsx)("p",{children:"Aucun test effectu\xe9"}),(0,i.jsx)("p",{className:"text-sm",children:"S\xe9lectionnez un utilisateur et envoyez une notification de test"})]})]})})]}),(0,i.jsx)(gx,{children:(0,i.jsxs)("div",{className:"p-6",children:[(0,i.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Informations sur l'environnement"}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:"font-medium text-gray-700",children:"Environnement:"}),(0,i.jsx)("p",{className:"text-gray-600",children:"production"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:"font-medium text-gray-700",children:"Backend URL:"}),(0,i.jsx)("p",{className:"text-gray-600",children:"https://ab-pret-back.onrender.com"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:"font-medium text-gray-700",children:"Utilisateurs disponibles:"}),(0,i.jsxs)("p",{className:"text-gray-600",children:[e.length," utilisateurs approuv\xe9s"]})]})]})]})})]})},vx=(0,pt.A)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),bx=e=>{var t;let{transaction:s,isOpen:n,onClose:r}=e;if(!n||!s)return null;const a=s.users||(null===(t=s.loans)||void 0===t?void 0:t.users),o=s.loans,l=s.payment_date||s.created_at,c=new Date(l),d=c.toLocaleDateString("fr-FR",{day:"numeric",month:"long",year:"numeric"}),u=c.toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"}),h=(null===o||void 0===o?void 0:o.amount)||0,m=(null===o||void 0===o?void 0:o.interest_rate)||0,p=Math.round(h*(m/100)),f="failed"===s.status||"overdue"===s.status,g="completed"===s.status||"success"===s.status;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"fixed inset-0 bg-black/50 z-40 transition-opacity duration-300",onClick:r}),(0,i.jsxs)("div",{className:"fixed right-0 top-0 h-full w-full max-w-md bg-white shadow-2xl z-50 transform transition-transform duration-300 ease-out ".concat(n?"translate-x-0":"translate-x-full"),children:[(0,i.jsx)("div",{className:"sticky top-0 bg-gradient-to-r from-purple-600 to-purple-700 text-white p-6 pb-4 z-10",children:(0,i.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,i.jsxs)("div",{className:"flex items-center gap-3",children:[(0,i.jsx)("div",{className:"p-2 bg-white/20 rounded-lg",children:(0,i.jsx)(Wg,{size:24})}),(0,i.jsx)("h2",{className:"text-xl font-bold",children:"D\xe9tails de la transaction"})]}),(0,i.jsx)("button",{onClick:r,className:"p-2 hover:bg-white/20 rounded-lg transition-colors","aria-label":"Fermer",children:(0,i.jsx)(xt,{size:24})})]})}),(0,i.jsxs)("div",{className:"overflow-y-auto h-[calc(100vh-120px)] px-6 py-6",children:[(0,i.jsx)("div",{className:"mb-6",children:(0,i.jsxs)("div",{className:"flex items-center gap-3 p-4 rounded-2xl ".concat(g?"bg-green-50 border border-green-200":f?"bg-red-50 border border-red-200":"bg-yellow-50 border border-yellow-200"),children:[g?(0,i.jsx)(mt.A,{size:24,className:"text-green-600"}):f?(0,i.jsx)(Kg,{size:24,className:"text-red-600"}):(0,i.jsx)(kp,{size:24,className:"text-yellow-600"}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"font-semibold text-gray-900",children:g?"Transaction r\xe9ussie":f?"Transaction \xe9chou\xe9e":"En attente"}),(0,i.jsx)("p",{className:"text-sm text-gray-600 capitalize",children:s.status})]})]})}),(0,i.jsx)("div",{className:"mb-6",children:(0,i.jsxs)("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-2xl p-6 border border-purple-200",children:[(0,i.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,i.jsx)(rx.A,{size:24,className:"text-purple-600"}),(0,i.jsx)("span",{className:"text-sm font-medium text-gray-600",children:"Montant"})]}),(0,i.jsx)("p",{className:"text-3xl font-bold text-purple-900",children:(0,Dp.vv)(s.amount||0)})]})}),a&&(0,i.jsxs)("div",{className:"mb-6",children:[(0,i.jsxs)("h3",{className:"text-sm font-semibold text-gray-700 mb-3 flex items-center gap-2",children:[(0,i.jsx)(mi,{size:18,className:"text-purple-600"}),"Utilisateur"]}),(0,i.jsxs)("div",{className:"bg-gray-50 rounded-xl p-4 space-y-2",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-xs text-gray-500",children:"Nom complet"}),(0,i.jsxs)("p",{className:"font-semibold text-gray-900",children:[a.first_name," ",a.last_name]})]}),a.email&&(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-xs text-gray-500",children:"Email"}),(0,i.jsx)("p",{className:"text-gray-700",children:a.email})]}),a.phone_number&&(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-xs text-gray-500",children:"T\xe9l\xe9phone"}),(0,i.jsx)("p",{className:"text-gray-700",children:a.phone_number})]})]})]}),o&&(0,i.jsxs)("div",{className:"mb-6",children:[(0,i.jsxs)("h3",{className:"text-sm font-semibold text-gray-700 mb-3 flex items-center gap-2",children:[(0,i.jsx)(Hp.A,{size:18,className:"text-purple-600"}),"Pr\xeat associ\xe9"]}),(0,i.jsxs)("div",{className:"bg-gray-50 rounded-xl p-4 space-y-3",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-xs text-gray-500",children:"Montant du pr\xeat"}),(0,i.jsx)("p",{className:"font-semibold text-gray-900",children:(0,Dp.vv)(h)})]}),o.purpose&&(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-xs text-gray-500",children:"Objectif"}),(0,i.jsx)("p",{className:"text-gray-700",children:o.purpose})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-xs text-gray-500",children:"Taux d'int\xe9r\xeat"}),(0,i.jsxs)("p",{className:"text-gray-700",children:[m,"%"]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-xs text-gray-500",children:"Montant des int\xe9r\xeats"}),(0,i.jsx)("p",{className:"font-semibold text-purple-700",children:(0,Dp.vv)(p)})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-xs text-gray-500",children:"Statut du pr\xeat"}),(0,i.jsx)("span",{className:"inline-block px-2 py-1 rounded-lg text-xs font-medium ".concat("completed"===o.status?"bg-green-100 text-green-700":"active"===o.status||"approved"===o.status||"overdue"===o.status?"bg-blue-100 text-blue-700":"pending"===o.status?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"),children:"completed"===o.status?"Rembours\xe9":"active"===o.status||"approved"===o.status||"overdue"===o.status?"Actif":"pending"===o.status?"En attente":"Rejet\xe9"})]})]})]}),(0,i.jsxs)("div",{className:"mb-6",children:[(0,i.jsxs)("h3",{className:"text-sm font-semibold text-gray-700 mb-3 flex items-center gap-2",children:[(0,i.jsx)(Yg.A,{size:18,className:"text-purple-600"}),"Date et heure"]}),(0,i.jsxs)("div",{className:"bg-gray-50 rounded-xl p-4 space-y-2",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)(Yg.A,{size:16,className:"text-gray-400"}),(0,i.jsx)("p",{className:"text-gray-700",children:d})]}),(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)(kp,{size:16,className:"text-gray-400"}),(0,i.jsx)("p",{className:"text-gray-700",children:u})]})]})]}),(0,i.jsxs)("div",{className:"mb-6",children:[(0,i.jsx)("h3",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Informations transaction"}),(0,i.jsxs)("div",{className:"bg-gray-50 rounded-xl p-4 space-y-2",children:[s.payment_method&&(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-xs text-gray-500",children:"M\xe9thode de paiement"}),(0,i.jsx)("p",{className:"text-gray-700 capitalize",children:s.payment_method})]}),s.fedapay_transaction_id&&(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-xs text-gray-500",children:"ID Transaction FedaPay"}),(0,i.jsx)("p",{className:"text-gray-700 font-mono text-sm",children:s.fedapay_transaction_id})]}),s.id&&(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-xs text-gray-500",children:"ID Transaction"}),(0,i.jsx)("p",{className:"text-gray-700 font-mono text-sm",children:s.id})]})]})]}),f&&(0,i.jsx)("div",{className:"mb-6",children:(0,i.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,i.jsx)(Kg,{size:20,className:"text-red-600"}),(0,i.jsx)("p",{className:"font-semibold text-red-900",children:"Transaction en p\xe9nalit\xe9"})]}),(0,i.jsx)("p",{className:"text-sm text-red-700",children:"Cette transaction a \xe9chou\xe9 ou est en retard de paiement."})]})})]})]})]})},yx=[{id:"day",label:"Aujourd'hui"},{id:"week",label:"Cette semaine"},{id:"month",label:"Ce mois"},{id:"quarter",label:"Ce trimestre"},{id:"year",label:"Cette ann\xe9e"}];const jx=e=>e.toISOString().slice(0,10),wx=()=>{const e=(0,Ge.Zp)(),[t,s]=(0,n.useState)("month"),[r,a]=(0,n.useState)(!0),[o,l]=(0,n.useState)([]),[c,d]=(0,n.useState)(""),[u,h]=(0,n.useState)(null),[m,p]=(0,n.useState)(!1),f=(0,n.useMemo)(()=>new Date,[]),[g,x]=(0,n.useState)(()=>{const e=new Date(f);return e.setMonth(e.getMonth()-1),jx(e)}),[v,b]=(0,n.useState)(()=>jx(f)),y=(0,n.useMemo)(()=>{if("custom"===t&&g&&v){const e=new Date(g);e.setHours(0,0,0,0);const t=new Date(v);return t.setHours(23,59,59,999),{start:e,end:t}}return function(e){const t=new Date,s=new Date(t);s.setHours(23,59,59,999);let n=new Date(t);switch(e){case"day":n.setHours(0,0,0,0);break;case"week":n.setDate(n.getDate()-6),n.setHours(0,0,0,0);break;case"month":n.setDate(1),n.setHours(0,0,0,0);break;case"quarter":const e=Math.floor(t.getMonth()/3)+1;n.setMonth(3*(e-1),1),n.setHours(0,0,0,0);break;case"year":n.setMonth(0,1),n.setHours(0,0,0,0);break;default:n.setMonth(n.getMonth()-1)}return{start:n,end:s}}(t)},[t,g,v]);(0,n.useEffect)(()=>{j()},[]);const j=async()=>{try{a(!0);const e=await(0,ct.k5)();e.success&&l(e.data||[])}catch(e){console.error("[TRANSACTIONS] Erreur:",e)}finally{a(!1)}},w=(0,n.useMemo)(()=>{const{start:e,end:t}=y;let s=o.filter(s=>function(e,t,s){const n=new Date(e);return n>=t&&n<=s}(s.payment_date||s.created_at,e,t));if(c){const e=c.toLowerCase();s=s.filter(t=>{var s,n;const r=t.users||(null===(s=t.loans)||void 0===s?void 0:s.users),a=r?"".concat(r.first_name," ").concat(r.last_name).toLowerCase():"",i=(null===r||void 0===r||null===(n=r.email)||void 0===n?void 0:n.toLowerCase())||"",o=(0,Dp.vv)(t.amount||0).toLowerCase();return a.includes(e)||i.includes(e)||o.includes(e)})}return s.sort((e,t)=>{const s=new Date(e.payment_date||e.created_at);return new Date(t.payment_date||t.created_at)-s})},[o,y,c]),N=(0,n.useMemo)(()=>{const e=w.length,t=w.reduce((e,t)=>e+(t.amount||0),0),s=w.filter(e=>"completed"===e.status||"success"===e.status).length,n=w.filter(e=>"failed"===e.status||"overdue"===e.status).length,r=w.filter(e=>"pending"===e.status||"processing"===e.status).length;return{total:e,totalAmount:t,successCount:s,failedCount:n,pendingCount:r}},[w]),S=e=>"completed"===e||"success"===e?(0,i.jsx)("span",{className:"px-2 py-1 bg-green-100 text-green-700 rounded-lg text-xs font-medium",children:"R\xe9ussi"}):"failed"===e||"overdue"===e?(0,i.jsx)("span",{className:"px-2 py-1 bg-red-100 text-red-700 rounded-lg text-xs font-medium",children:"\xc9chou\xe9"}):(0,i.jsx)("span",{className:"px-2 py-1 bg-yellow-100 text-yellow-700 rounded-lg text-xs font-medium",children:"En attente"});return(0,i.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-white to-pink-50 pb-24",children:[(0,i.jsx)("div",{className:"bg-white/80 backdrop-blur-lg shadow-sm border-b border-gray-100 sticky top-0 z-30",children:(0,i.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:(0,i.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,i.jsxs)("div",{className:"flex items-center gap-3",children:[(0,i.jsx)("button",{type:"button",onClick:()=>e("/admin"),className:"p-2 rounded-xl bg-purple-100 text-purple-700 hover:bg-purple-200 transition-colors","aria-label":"Retour",children:(0,i.jsx)(Mf.A,{size:20})}),(0,i.jsx)("div",{className:"p-2.5 bg-purple-100 rounded-xl",children:(0,i.jsx)(Wg,{size:24,className:"text-purple-600"})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900 font-montserrat",children:"Transactions"}),(0,i.jsx)("p",{className:"text-sm text-gray-500",children:"Gestion et suivi des transactions"})]})]}),(0,i.jsxs)("button",{type:"button",onClick:j,className:"flex items-center gap-2 px-3 py-2 bg-white border border-gray-200 rounded-xl text-gray-700 hover:bg-gray-50 transition-colors shadow-sm",children:[(0,i.jsx)(ai.A,{size:18,className:r?"animate-spin":""}),(0,i.jsx)("span",{className:"hidden sm:inline text-sm font-medium",children:"Actualiser"})]})]})})}),(0,i.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:r?(0,i.jsxs)("div",{className:"flex flex-col items-center justify-center py-16 gap-4",children:[(0,i.jsx)("div",{className:"animate-spin rounded-full h-10 w-10 border-2 border-purple-500 border-t-transparent"}),(0,i.jsx)("p",{className:"text-gray-500 text-sm",children:"Chargement des transactions..."})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[(0,i.jsxs)("div",{className:"bg-white rounded-2xl p-4 shadow-lg border border-gray-100",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,i.jsx)("div",{className:"p-2 bg-purple-100 rounded-lg",children:(0,i.jsx)(Wg,{size:18,className:"text-purple-600"})}),(0,i.jsx)("span",{className:"text-xs font-medium text-gray-500",children:"Total"})]}),(0,i.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:N.total})]}),(0,i.jsxs)("div",{className:"bg-white rounded-2xl p-4 shadow-lg border border-gray-100",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,i.jsx)("div",{className:"p-2 bg-green-100 rounded-lg",children:(0,i.jsx)(rx.A,{size:18,className:"text-green-600"})}),(0,i.jsx)("span",{className:"text-xs font-medium text-gray-500",children:"Montant total"})]}),(0,i.jsx)("p",{className:"text-lg font-bold text-gray-900",children:(0,Dp.vv)(N.totalAmount)})]}),(0,i.jsxs)("div",{className:"bg-white rounded-2xl p-4 shadow-lg border border-gray-100",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,i.jsx)("div",{className:"p-2 bg-green-100 rounded-lg",children:(0,i.jsx)(mt.A,{size:18,className:"text-green-600"})}),(0,i.jsx)("span",{className:"text-xs font-medium text-gray-500",children:"R\xe9ussies"})]}),(0,i.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:N.successCount})]}),(0,i.jsxs)("div",{className:"bg-white rounded-2xl p-4 shadow-lg border border-gray-100",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,i.jsx)("div",{className:"p-2 bg-red-100 rounded-lg",children:(0,i.jsx)(Zg,{size:18,className:"text-red-600"})}),(0,i.jsx)("span",{className:"text-xs font-medium text-gray-500",children:"\xc9chou\xe9es"})]}),(0,i.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:N.failedCount})]})]}),(0,i.jsxs)("div",{className:"mb-6",children:[(0,i.jsxs)("p",{className:"text-sm font-medium text-gray-700 mb-2 flex items-center gap-2",children:[(0,i.jsx)(Yg.A,{size:16,className:"text-purple-600"}),"P\xe9riode"]}),(0,i.jsx)("div",{className:"flex flex-wrap gap-2 mb-4",children:yx.map(e=>(0,i.jsx)("button",{type:"button",onClick:()=>s(e.id),className:"px-4 py-2.5 rounded-xl text-sm font-medium transition-all ".concat(t===e.id&&"custom"!==t?"bg-purple-500 text-white shadow-md":"bg-white text-gray-600 border border-gray-200 hover:bg-purple-50 hover:border-purple-200"),children:e.label},e.id))}),(0,i.jsxs)("div",{className:"flex flex-wrap items-center gap-3 p-4 bg-white rounded-2xl border border-gray-100 shadow-sm",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2 text-gray-600",children:[(0,i.jsx)(Yg.A,{size:20,className:"text-purple-600 flex-shrink-0"}),(0,i.jsx)("span",{className:"text-sm font-medium",children:"Dates personnalis\xe9es"})]}),(0,i.jsxs)("div",{className:"flex flex-wrap items-center gap-2 sm:gap-4",children:[(0,i.jsxs)("label",{className:"flex items-center gap-2 text-sm",children:[(0,i.jsx)("span",{className:"text-gray-500 whitespace-nowrap",children:"Du"}),(0,i.jsx)("input",{type:"date",value:g,onChange:e=>{x(e.target.value),s("custom"),e.target.value>v&&b(e.target.value)},className:"px-3 py-2 rounded-xl border border-gray-200 focus:border-purple-500 focus:ring-2 focus:ring-purple-500/20 outline-none text-gray-900"})]}),(0,i.jsxs)("label",{className:"flex items-center gap-2 text-sm",children:[(0,i.jsx)("span",{className:"text-gray-500 whitespace-nowrap",children:"au"}),(0,i.jsx)("input",{type:"date",value:v,min:g,onChange:e=>{b(e.target.value),s("custom"),e.target.value<g&&x(e.target.value)},className:"px-3 py-2 rounded-xl border border-gray-200 focus:border-purple-500 focus:ring-2 focus:ring-purple-500/20 outline-none text-gray-900"})]}),"custom"===t&&(0,i.jsx)("span",{className:"text-xs text-purple-600 font-medium bg-purple-50 px-2 py-1 rounded-lg",children:"Personnalis\xe9"})]})]})]}),(0,i.jsx)("div",{className:"mb-6",children:(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsx)(Jg,{size:20,className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,i.jsx)("input",{type:"text",placeholder:"Rechercher par nom, email ou montant...",value:c,onChange:e=>d(e.target.value),className:"w-full pl-12 pr-4 py-3 bg-white border border-gray-200 rounded-xl focus:border-purple-500 focus:ring-2 focus:ring-purple-500/20 outline-none"})]})}),(0,i.jsx)("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden",children:0===w.length?(0,i.jsxs)("div",{className:"p-12 text-center",children:[(0,i.jsx)(Wg,{size:64,className:"text-gray-300 mx-auto mb-4"}),(0,i.jsx)("p",{className:"text-gray-500 font-medium",children:"Aucune transaction trouv\xe9e"}),(0,i.jsx)("p",{className:"text-sm text-gray-400 mt-2",children:"Essayez de modifier les filtres"})]}):(0,i.jsx)("div",{className:"divide-y divide-gray-100",children:w.map(e=>{var t;const s=e.users||(null===(t=e.loans)||void 0===t?void 0:t.users),n=e.payment_date||e.created_at,r=new Date(n),a=r.toLocaleDateString("fr-FR",{day:"numeric",month:"short",year:"numeric"}),o=r.toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"});return(0,i.jsx)("div",{onClick:()=>(e=>{h(e),p(!0)})(e),className:"p-4 sm:p-6 hover:bg-gray-50 transition-colors cursor-pointer",children:(0,i.jsxs)("div",{className:"flex items-start gap-4",children:[(0,i.jsx)("div",{className:"flex-shrink-0",children:(l=e.status,"completed"===l||"success"===l?(0,i.jsx)(mt.A,{size:20,className:"text-green-600"}):"failed"===l||"overdue"===l?(0,i.jsx)(Zg,{size:20,className:"text-red-600"}):(0,i.jsx)(kp,{size:20,className:"text-yellow-600"}))}),(0,i.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,i.jsxs)("div",{className:"flex items-start justify-between gap-2 mb-2",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"font-semibold text-gray-900",children:s?"".concat(s.first_name," ").concat(s.last_name):"Utilisateur inconnu"}),(null===s||void 0===s?void 0:s.email)&&(0,i.jsx)("p",{className:"text-sm text-gray-500",children:s.email})]}),S(e.status)]}),(0,i.jsxs)("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[(0,i.jsx)("span",{className:"font-bold text-purple-600",children:(0,Dp.vv)(e.amount||0)}),(0,i.jsx)("span",{children:"\u2022"}),(0,i.jsx)("span",{children:a}),(0,i.jsx)("span",{children:"\u2022"}),(0,i.jsx)("span",{children:o})]})]}),(0,i.jsx)(vx,{size:20,className:"text-gray-400 flex-shrink-0"})]})},e.id);var l})})})]})}),(0,i.jsx)(bx,{transaction:u,isOpen:m,onClose:()=>{p(!1),h(null)}})]})},Nx=(0,pt.A)("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]),Sx=(0,pt.A)("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]),kx=(0,pt.A)("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]),Ax=(0,pt.A)("Check",[["polyline",{points:"20 6 9 17 4 12",key:"10jjfj"}]]),_x={durations:[{value:5,label:"5 jours",days:5},{value:10,label:"10 jours",days:10},{value:15,label:"15 jours",days:15},{value:25,label:"25 jours",days:25},{value:30,label:"30 jours",days:30}],interestRates:{5:6,10:10,15:15,25:25,30:25},amounts:{min:1e3,max:5e5},monthlyIncome:{min:1e4,max:2e6},getInterestRate:function(e){return 25===e?25:30===e?(arguments.length>1&&void 0!==arguments[1]?arguments[1]:0)>=2e4?25:30:_x.interestRates[e]||25},calculateInterest:(e,t)=>e*_x.getInterestRate(t,e)/100,calculateTotalAmount:(e,t)=>e+_x.calculateInterest(e,t),calculatePaymentAmount:(e,t)=>e,validateLoan:(e,t)=>{const s=[];e<_x.amounts.min&&s.push("Le montant minimum est de ".concat(_x.amounts.min.toLocaleString()," FCFA")),e>_x.amounts.max&&s.push("Le montant maximum est de ".concat(_x.amounts.max.toLocaleString()," FCFA"));const n=_x.durations.map(e=>e.days);return n.includes(t)||s.push("Dur\xe9e de pr\xeat non valide"),{isValid:0===s.length,errors:s}},validateMonthlyIncome:e=>{const t=[];return e<_x.monthlyIncome.min&&t.push("Le revenu mensuel minimum est de ".concat(_x.monthlyIncome.min.toLocaleString()," FCFA")),e>_x.monthlyIncome.max&&t.push("Le revenu mensuel maximum est de ".concat(_x.monthlyIncome.max.toLocaleString()," FCFA")),{isValid:0===t.length,errors:t}}},Ex=()=>{const{user:e}=ut(),{showSuccess:t,showError:s}=yt(),r=(0,Ge.Zp)(),[a,o]=(0,n.useState)(1),[l,c]=(0,n.useState)({amount:"",duration:5,purpose:"",employmentStatus:"student",guarantee:"",momoNumber:"",momoNetwork:"",momoName:"",category:""}),[u,h]=(0,n.useState)(!1),[m,p]=(0,n.useState)(!1),[f,g]=(0,n.useState)(null),[x,v]=(0,n.useState)(!1),[b,y]=(0,n.useState)({}),[j,w]=(0,n.useState)(null),[N,S]=(0,n.useState)(!1),[k,A]=(0,n.useState)(!1);(0,n.useEffect)(()=>{_()},[null===e||void 0===e?void 0:e.id]);const _=async()=>{try{A(!0);const[t,n]=await Promise.all([(0,ct.Or)(e.id),(0,ct.k5)(e.id)]);if(!t.success)return;const r=t.data||[],a=n.success&&n.data||[],i=e=>{const t=(parseFloat(e.amount)||0)*(1+(parseFloat(e.interest_rate)||0)/100)+(parseFloat(e.total_penalty_amount)||0),s=a.filter(t=>t.loan_id===e.id).reduce((e,t)=>e+(parseFloat(t.amount)||0),0);return Math.max(0,t-s)},o=r.find(e=>("active"===e.status||"approved"===e.status||"overdue"===e.status)&&i(e)>0);S(!!o),o&&("overdue"===o.status?s("Vous ne pouvez pas demander un nouveau pr\xeat tant que votre pr\xeat en retard n'est pas rembours\xe9."):s("Vous avez d\xe9j\xe0 un pr\xeat en cours. Vous devez le rembourser avant de faire une nouvelle demande."))}catch(t){console.error("[LOAN_REQUEST] Erreur:",t)}finally{A(!1)}};(0,n.useEffect)(()=>{l.amount&&l.duration&&E()},[l.amount,l.duration]);const E=()=>{const e=parseFloat(l.amount),t=parseInt(l.duration);if(!e||e<_x.amounts.min||e>_x.amounts.max)return void w(null);const s=_x.getInterestRate(t,e),n=Math.round(_x.calculateInterest(e,t)),r=Math.round(_x.calculateTotalAmount(e,t));w({principal:e,interest:n,totalAmount:r,interestRate:s,duration:t})},C=[{id:"education",name:"\xc9ducation",icon:Nx,color:"from-blue-500 to-blue-600",bgColor:"bg-blue-50",iconColor:"text-blue-600"},{id:"business",name:"Entreprise",icon:Sx,color:"from-green-500 to-green-600",bgColor:"bg-green-50",iconColor:"text-green-600"},{id:"housing",name:"Logement",icon:Vp,color:"from-orange-500 to-orange-600",bgColor:"bg-orange-50",iconColor:"text-orange-600"},{id:"personal",name:"Personnel",icon:mi,color:"from-purple-500 to-purple-600",bgColor:"bg-purple-50",iconColor:"text-purple-600"},{id:"health",name:"Sant\xe9",icon:kx,color:"from-pink-500 to-pink-600",bgColor:"bg-pink-50",iconColor:"text-pink-600"}],P=e=>{const{name:t,value:s}=e.target;c((0,d.A)((0,d.A)({},l),{},{[t]:s})),b[t]&&y((0,d.A)((0,d.A)({},b),{},{[t]:""}))},T=e=>{const t={};if(1===e&&(l.category||(t.category="Veuillez s\xe9lectionner une cat\xe9gorie")),2===e){const e=parseFloat(l.amount);!e||e<_x.amounts.min?t.amount="Le montant minimum est ".concat((0,Dp.vv)(_x.amounts.min)):e>_x.amounts.max&&(t.amount="Le montant maximum est ".concat((0,Dp.vv)(_x.amounts.max)))}return 3===e&&((!l.purpose||l.purpose.trim().length<10)&&(t.purpose="Veuillez d\xe9crire l'utilisation du pr\xeat (min. 10 caract\xe8res)"),l.guarantee||(t.guarantee="Veuillez s\xe9lectionner une garantie")),4===e&&((!l.momoNumber||l.momoNumber.trim().length<8)&&(t.momoNumber="Num\xe9ro Mobile Money invalide"),l.momoNetwork||(t.momoNetwork="Veuillez s\xe9lectionner votre op\xe9rateur"),(!l.momoName||l.momoName.trim().length<3)&&(t.momoName="Veuillez entrer le nom du compte Mobile Money")),y(t),0===Object.keys(t).length},I=async()=>{if(f)try{const e=await fetch("".concat(Ep.f,"/api/generate-pdf/").concat(f));if(!e.ok)throw new Error("Erreur lors de la g\xe9n\xe9ration du PDF");const s=await e.blob(),n=window.URL.createObjectURL(s),r=document.createElement("a");r.href=n,r.download="engagement-pret-".concat(f,".pdf"),document.body.appendChild(r),r.click(),window.URL.revokeObjectURL(n),document.body.removeChild(r),v(!0),t("PDF t\xe9l\xe9charg\xe9 avec succ\xe8s !")}catch(e){console.error("[PDF] Erreur:",e),s("Erreur lors du t\xe9l\xe9chargement du PDF")}else s("ID de pr\xeat manquant")};if(m)return(0,i.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 flex items-center justify-center p-4",children:(0,i.jsxs)("div",{className:"bg-white rounded-3xl shadow-2xl p-8 max-w-md w-full text-center",children:[(0,i.jsx)("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,i.jsx)(mt.A,{size:40,className:"text-green-600"})}),(0,i.jsx)("h2",{className:"text-3xl font-bold text-gray-900 mb-4 font-montserrat",children:"Demande envoy\xe9e !"}),(0,i.jsx)("p",{className:"text-gray-600 mb-6 font-montserrat",children:"Votre demande de pr\xeat a \xe9t\xe9 soumise avec succ\xe8s. Nous l'examinerons dans les plus brefs d\xe9lais."}),!x&&(0,i.jsx)("div",{className:"bg-blue-50 border-l-4 border-blue-500 p-4 rounded-lg mb-6 text-left",children:(0,i.jsxs)("div",{className:"flex items-start gap-3",children:[(0,i.jsx)(Zp,{size:24,className:"text-blue-600 flex-shrink-0 mt-0.5"}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{className:"font-bold text-blue-900 mb-1",children:"Document d'engagement"}),(0,i.jsx)("p",{className:"text-sm text-blue-700 mb-3",children:"Veuillez t\xe9l\xe9charger et signer votre document d'engagement de pr\xeat."}),(0,i.jsxs)("button",{onClick:I,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-all duration-200 text-sm",children:[(0,i.jsx)(Zp,{size:18}),(0,i.jsx)("span",{children:"T\xe9l\xe9charger le PDF"})]})]})]})}),x&&(0,i.jsx)("div",{className:"bg-green-50 border-l-4 border-green-500 p-4 rounded-lg mb-6 text-left",children:(0,i.jsxs)("div",{className:"flex items-start gap-3",children:[(0,i.jsx)(mt.A,{size:24,className:"text-green-600 flex-shrink-0 mt-0.5"}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{className:"font-bold text-green-900 mb-1",children:"PDF t\xe9l\xe9charg\xe9"}),(0,i.jsx)("p",{className:"text-sm text-green-700",children:"Veuillez signer le document et le conserver pr\xe9cieusement."})]})]})}),(0,i.jsxs)("button",{onClick:()=>r("/dashboard"),className:"w-full flex items-center justify-center gap-2 px-6 py-3 bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white rounded-xl font-medium transition-all duration-200",children:[(0,i.jsx)(Mf.A,{size:20}),(0,i.jsx)("span",{children:"Retour au tableau de bord"})]})]})});const R=[{number:1,title:"Cat\xe9gorie",icon:Zp},{number:2,title:"Montant",icon:rx.A},{number:3,title:"D\xe9tails",icon:Zp},{number:4,title:"Paiement",icon:Hp.A}];return(0,i.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 pb-24",children:[k&&(0,i.jsxs)("div",{className:"sticky top-0 z-40 flex items-center justify-center gap-2 py-2 bg-blue-100/90 text-blue-800 text-sm font-medium",children:[(0,i.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-blue-600 border-t-transparent"}),(0,i.jsx)("span",{children:"V\xe9rification des pr\xeats en cours..."})]}),(0,i.jsx)("div",{className:"bg-white/80 backdrop-blur-lg shadow-lg border-b border-white/50 sticky top-0 z-30",children:(0,i.jsxs)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[(0,i.jsx)("div",{className:"flex items-center justify-between",children:(0,i.jsxs)("div",{className:"flex items-center gap-4",children:[(0,i.jsx)("button",{onClick:()=>r("/dashboard"),className:"p-2 hover:bg-gray-100 rounded-xl transition-colors",children:(0,i.jsx)(Mf.A,{size:24,className:"text-gray-700"})}),(0,i.jsxs)("div",{className:"flex items-center gap-3",children:[(0,i.jsx)("div",{className:"p-3 bg-gradient-to-br from-blue-500 to-purple-600 rounded-2xl shadow-lg",children:(0,i.jsx)(Hp.A,{size:32,className:"text-white"})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900 font-montserrat",children:"Demande de pr\xeat"}),(0,i.jsxs)("p",{className:"text-sm text-gray-600 font-montserrat",children:["\xc9tape ",a," sur ",4]})]})]})]})}),(0,i.jsx)("div",{className:"mt-6",children:(0,i.jsx)("div",{className:"flex items-center justify-between",children:R.map((e,t)=>(0,i.jsxs)(n.Fragment,{children:[(0,i.jsxs)("div",{className:"flex flex-col items-center",children:[(0,i.jsx)("div",{className:"w-12 h-12 rounded-full flex items-center justify-center transition-all duration-300 ".concat(a>e.number?"bg-green-500 text-white":a===e.number?"bg-gradient-to-br from-blue-500 to-purple-600 text-white":"bg-gray-200 text-gray-500"),children:a>e.number?(0,i.jsx)(Ax,{size:24}):(0,i.jsx)(e.icon,{size:24})}),(0,i.jsx)("p",{className:"text-xs mt-2 font-medium ".concat(a>=e.number?"text-gray-900":"text-gray-500"),children:e.title})]}),t<R.length-1&&(0,i.jsx)("div",{className:"flex-1 h-1 mx-2 transition-all duration-300 ".concat(a>e.number?"bg-green-500":"bg-gray-200")})]},e.number))})})]})}),(0,i.jsxs)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[N&&(0,i.jsx)("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 rounded-lg mb-6",children:(0,i.jsxs)("div",{className:"flex items-start gap-3",children:[(0,i.jsx)(ft,{size:24,className:"text-red-600 flex-shrink-0 mt-0.5"}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{className:"font-bold text-red-900 mb-1",children:"Pr\xeat actif d\xe9tect\xe9"}),(0,i.jsx)("p",{className:"text-sm text-red-700",children:"Vous avez d\xe9j\xe0 un pr\xeat en cours. Vous devez le rembourser avant de faire une nouvelle demande."})]})]})}),(0,i.jsxs)("form",{onSubmit:async n=>{if(n.preventDefault(),x)if(T(a))if(N)s("Vous avez d\xe9j\xe0 un pr\xeat en cours");else{h(!0);try{const s=parseFloat(l.amount),n=parseInt(l.duration),r=_x.getInterestRate(n,s),a={user_id:e.id,amount:s,duration:n,duration_months:n,interest_rate:r,purpose:l.purpose,employment_status:l.employmentStatus,guarantee:l.guarantee,momo_number:l.momoNumber,momo_network:l.momoNetwork,momo_name:l.momoName,status:"pending"};console.log("[LOAN_REQUEST] Cr\xe9ation du pr\xeat via Supabase"),console.log("[LOAN_REQUEST] Donn\xe9es:",a);const i=await(0,ct.DI)(a);if(console.log("[LOAN_REQUEST] R\xe9sultat:",i),!i.success||!i.data)throw new Error(i.error||"Erreur lors de la soumission");g(i.data.id),p(!0),t("Demande de pr\xeat soumise avec succ\xe8s !")}catch(r){console.error("[LOAN_REQUEST] Erreur:",r),s(r.message||"Erreur lors de la soumission de la demande")}finally{h(!1)}}else s("Veuillez corriger les erreurs dans le formulaire");else s("Veuillez t\xe9l\xe9charger le PDF d'engagement avant de soumettre")},children:[1===a&&(0,i.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 p-6",children:[(0,i.jsxs)("h2",{className:"text-xl font-bold text-gray-900 mb-4 font-montserrat flex items-center gap-2",children:[(0,i.jsx)(Zp,{size:24,className:"text-blue-600"}),"S\xe9lectionnez la cat\xe9gorie de votre pr\xeat"]}),(0,i.jsx)("p",{className:"text-gray-600 mb-6",children:"Choisissez la cat\xe9gorie qui correspond le mieux \xe0 votre besoin"}),(0,i.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-5 gap-4",children:C.map(e=>(0,i.jsxs)("button",{type:"button",onClick:()=>{return t=e.id,c(e=>(0,d.A)((0,d.A)({},e),{},{category:t})),void y(e=>(0,d.A)((0,d.A)({},e),{},{category:""}));var t},className:"p-6 rounded-xl border-2 transition-all duration-200 ".concat(l.category===e.id?"border-blue-500 bg-blue-50 shadow-md scale-105":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"),children:[(0,i.jsx)("div",{className:"w-16 h-16 ".concat(e.bgColor," rounded-xl flex items-center justify-center mx-auto mb-3"),children:(0,i.jsx)(e.icon,{size:32,className:e.iconColor})}),(0,i.jsx)("p",{className:"text-sm font-medium text-gray-900 text-center",children:e.name})]},e.id))}),b.category&&(0,i.jsx)("p",{className:"text-red-500 text-sm mt-4",children:b.category})]}),2===a&&(0,i.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 p-6",children:[(0,i.jsxs)("h2",{className:"text-xl font-bold text-gray-900 mb-4 font-montserrat flex items-center gap-2",children:[(0,i.jsx)(rx.A,{size:24,className:"text-green-600"}),"Montant et dur\xe9e du pr\xeat"]}),(0,i.jsx)("p",{className:"text-gray-600 mb-6",children:"Indiquez le montant souhait\xe9 et la dur\xe9e de remboursement"}),(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsxs)("div",{children:[(0,i.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Montant souhait\xe9 ",(0,i.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsx)(rx.A,{size:18,className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,i.jsx)("input",{type:"number",name:"amount",value:l.amount,onChange:P,placeholder:"Ex: 50000",min:_x.amounts.min,max:_x.amounts.max,className:"w-full pl-12 pr-4 py-3 border rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all ".concat(b.amount?"border-red-500 bg-red-50":"border-gray-200")})]}),b.amount&&(0,i.jsx)("p",{className:"text-red-500 text-sm mt-1",children:b.amount}),(0,i.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Min: ",(0,Dp.vv)(_x.amounts.min)," - Max: ",(0,Dp.vv)(_x.amounts.max)]})]}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Dur\xe9e ",(0,i.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsx)(Yg.A,{size:18,className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,i.jsx)("select",{name:"duration",value:l.duration,onChange:P,className:"w-full pl-12 pr-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all appearance-none bg-white",children:_x.durations.map(e=>(0,i.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,i.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Choisissez la dur\xe9e de remboursement"})]}),j&&(0,i.jsxs)("div",{className:"mt-6 p-6 bg-gradient-to-r from-blue-50 to-purple-50 rounded-xl border border-blue-200",children:[(0,i.jsx)("h3",{className:"font-bold text-gray-900 mb-4",children:"R\xe9capitulatif"}),(0,i.jsxs)("div",{className:"space-y-3",children:[(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsx)("span",{className:"text-gray-600",children:"Montant demand\xe9"}),(0,i.jsx)("span",{className:"font-bold text-gray-900",children:(0,Dp.vv)(j.principal)})]}),(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsxs)("span",{className:"text-gray-600",children:["Int\xe9r\xeats (",j.interestRate,"%)"]}),(0,i.jsx)("span",{className:"font-bold text-orange-600",children:(0,Dp.vv)(j.interest)})]}),(0,i.jsxs)("div",{className:"border-t border-gray-300 pt-3 flex justify-between",children:[(0,i.jsx)("span",{className:"font-bold text-gray-900",children:"Montant total \xe0 rembourser"}),(0,i.jsx)("span",{className:"font-bold text-2xl text-blue-600",children:(0,Dp.vv)(j.totalAmount)})]}),(0,i.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,i.jsx)("span",{className:"text-gray-600",children:"Dur\xe9e"}),(0,i.jsxs)("span",{className:"font-medium text-gray-900",children:[j.duration," jours"]})]})]})]})]})]}),3===a&&(0,i.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 p-6",children:[(0,i.jsxs)("h2",{className:"text-xl font-bold text-gray-900 mb-4 font-montserrat flex items-center gap-2",children:[(0,i.jsx)(Zp,{size:24,className:"text-purple-600"}),"D\xe9tails de la demande"]}),(0,i.jsx)("p",{className:"text-gray-600 mb-6",children:"Fournissez plus d'informations sur votre demande"}),(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsxs)("div",{children:[(0,i.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Utilisation du pr\xeat ",(0,i.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,i.jsx)("textarea",{name:"purpose",value:l.purpose,onChange:P,placeholder:"D\xe9crivez pr\xe9cis\xe9ment l'utilisation du pr\xeat...",rows:"4",className:"w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all ".concat(b.purpose?"border-red-500 bg-red-50":"border-gray-200")}),b.purpose&&(0,i.jsx)("p",{className:"text-red-500 text-sm mt-1",children:b.purpose})]}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Statut professionnel ",(0,i.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,i.jsxs)("select",{name:"employmentStatus",value:l.employmentStatus,onChange:P,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",children:[(0,i.jsx)("option",{value:"student",children:"\xc9tudiant"}),(0,i.jsx)("option",{value:"self-employed",children:"Ind\xe9pendant"}),(0,i.jsx)("option",{value:"employed",children:"Salari\xe9"}),(0,i.jsx)("option",{value:"unemployed",children:"Sans emploi"})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Garantie ",(0,i.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,i.jsxs)("select",{name:"guarantee",value:l.guarantee,onChange:P,className:"w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all ".concat(b.guarantee?"border-red-500 bg-red-50":"border-gray-200"),children:[(0,i.jsx)("option",{value:"",children:"S\xe9lectionnez votre garantie"}),(0,i.jsx)("option",{value:"\ud83e\udeaa Carte d'identit\xe9 / \xe9tudiante",children:"\ud83e\udeaa Carte d'identit\xe9 / \xe9tudiante"}),(0,i.jsx)("option",{value:"\ud83d\udcf1 T\xe9l\xe9phone portable",children:"\ud83d\udcf1 T\xe9l\xe9phone portable"}),(0,i.jsx)("option",{value:"\ud83d\udcbb Ordinateur portable",children:"\ud83d\udcbb Ordinateur portable"}),(0,i.jsx)("option",{value:"\ud83d\udd25 Bouteille de gaz",children:"\ud83d\udd25 Bouteille de gaz"}),(0,i.jsx)("option",{value:"\ud83e\ude99 Montre connect\xe9e ou classique de valeur",children:"\ud83e\ude99 Montre connect\xe9e ou classique de valeur"}),(0,i.jsx)("option",{value:"\ud83d\udcf7 Tablette",children:"\ud83d\udcf7 Tablette"}),(0,i.jsx)("option",{value:"\ud83c\udfa7 \xc9couteurs ou casque Bluetooth",children:"\ud83c\udfa7 \xc9couteurs ou casque Bluetooth"}),(0,i.jsx)("option",{value:"\ud83e\uddf3 Petit ventilateur ou cuisini\xe8re \xe9lectrique",children:"\ud83e\uddf3 Petit ventilateur ou cuisini\xe8re \xe9lectrique"}),(0,i.jsx)("option",{value:"\ud83d\udcbe Disque dur externe ou cl\xe9 USB haut de gamme",children:"\ud83d\udcbe Disque dur externe ou cl\xe9 USB haut de gamme"}),(0,i.jsx)("option",{value:"\ud83e\ude91 Petit appareil \xe9lectrom\xe9nager (fer \xe0 repasser, mixeur, etc.)",children:"\ud83e\ude91 Petit appareil \xe9lectrom\xe9nager (fer \xe0 repasser, mixeur, etc.)"})]}),b.guarantee&&(0,i.jsx)("p",{className:"text-red-500 text-sm mt-1",children:b.guarantee})]})]})]}),4===a&&(0,i.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 p-6",children:[(0,i.jsxs)("h2",{className:"text-xl font-bold text-gray-900 mb-4 font-montserrat flex items-center gap-2",children:[(0,i.jsx)(Hp.A,{size:24,className:"text-green-600"}),"Informations Mobile Money"]}),(0,i.jsx)("p",{className:"text-gray-600 mb-6",children:"Indiquez vos coordonn\xe9es de paiement Mobile Money"}),(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsxs)("div",{children:[(0,i.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Op\xe9rateur ",(0,i.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,i.jsxs)("select",{name:"momoNetwork",value:l.momoNetwork,onChange:P,className:"w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all ".concat(b.momoNetwork?"border-red-500 bg-red-50":"border-gray-200"),children:[(0,i.jsx)("option",{value:"",children:"S\xe9lectionnez votre op\xe9rateur"}),(0,i.jsx)("option",{value:"MTN",children:"MTN Mobile Money"}),(0,i.jsx)("option",{value:"Moov",children:"Moov Money"}),(0,i.jsx)("option",{value:"Celtiis",children:"Celtiis Cash"})]}),b.momoNetwork&&(0,i.jsx)("p",{className:"text-red-500 text-sm mt-1",children:b.momoNetwork})]}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Num\xe9ro Mobile Money ",(0,i.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,i.jsx)("input",{type:"tel",name:"momoNumber",value:l.momoNumber,onChange:P,placeholder:"Ex: 97123456",className:"w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all ".concat(b.momoNumber?"border-red-500 bg-red-50":"border-gray-200")}),b.momoNumber&&(0,i.jsx)("p",{className:"text-red-500 text-sm mt-1",children:b.momoNumber})]}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Nom du compte ",(0,i.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,i.jsx)("input",{type:"text",name:"momoName",value:l.momoName,onChange:P,placeholder:"Nom complet du titulaire",className:"w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all ".concat(b.momoName?"border-red-500 bg-red-50":"border-gray-200")}),b.momoName&&(0,i.jsx)("p",{className:"text-red-500 text-sm mt-1",children:b.momoName})]})]}),!x&&(0,i.jsx)("div",{className:"mt-6 bg-blue-50 border-l-4 border-blue-500 p-4 rounded-lg",children:(0,i.jsxs)("div",{className:"flex items-start gap-3",children:[(0,i.jsx)(Zp,{size:24,className:"text-blue-600 flex-shrink-0 mt-0.5"}),(0,i.jsxs)("div",{className:"flex-1",children:[(0,i.jsx)("h3",{className:"font-bold text-blue-900 mb-1",children:"Document d'engagement requis"}),(0,i.jsx)("p",{className:"text-sm text-blue-700 mb-3",children:"Avant de soumettre votre demande, vous devez t\xe9l\xe9charger et signer le document d'engagement de pr\xeat."}),(0,i.jsx)("button",{type:"button",onClick:async()=>{try{var n,r;if(h(!0),!lt.ND)throw new Error("Connexion \xe0 la base de donn\xe9es non disponible");const{data:s,error:a}=await lt.ND.from("users").select("*").eq("id",e.id).single();if(a)throw console.error("[PDF] Erreur r\xe9cup\xe9ration utilisateur:",a),new Error("Impossible de r\xe9cup\xe9rer vos informations");console.log("[PDF] Donn\xe9es utilisateur r\xe9cup\xe9r\xe9es:",{id:s.id,name:"".concat(s.first_name," ").concat(s.last_name),hasTemoinName:!!s.temoin_name,hasTemoinPhone:!!s.temoin_phone,hasTemoinQuartier:!!s.temoin_quartier});const i=parseFloat(l.amount),o=parseInt(l.duration),c=_x.getInterestRate(o,i),d=Math.round(_x.calculateInterest(i,o)),u=Math.round(_x.calculateTotalAmount(i,o)),m={user:{first_name:s.first_name||(null===(n=e.user_metadata)||void 0===n?void 0:n.first_name),last_name:s.last_name||(null===(r=e.user_metadata)||void 0===r?void 0:r.last_name),email:s.email||e.email,phone_number:s.phone_number||e.phone,temoin_name:s.temoin_name,temoin_phone:s.temoin_phone,temoin_quartier:s.temoin_quartier,temoin_email:s.temoin_email},loan:{amount:i,duration:o,interest_rate:c,purpose:l.purpose,guarantee:l.guarantee,category:l.category},calculation:{interest:d,totalAmount:u}};console.log("[PDF] Envoi des donn\xe9es:",m);const p=await fetch("".concat(Ep.f,"/api/generate-preview-pdf"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(m)});if(console.log("[PDF] Response status:",p.status),!p.ok){const e=await p.text();throw console.error("[PDF] Erreur serveur:",e),new Error("Erreur lors de la g\xe9n\xe9ration du PDF: ".concat(p.status," - ").concat(e))}const f=await p.blob(),g=window.URL.createObjectURL(f),x=document.createElement("a");x.href=g,x.download="engagement-pret-preview.pdf",document.body.appendChild(x),x.click(),window.URL.revokeObjectURL(g),document.body.removeChild(x),v(!0),t("PDF t\xe9l\xe9charg\xe9 avec succ\xe8s ! Vous pouvez maintenant soumettre votre demande.")}catch(a){console.error("[PDF] Erreur compl\xe8te:",a),console.error("[PDF] Message:",a.message),console.error("[PDF] Stack:",a.stack),s(a.message||"Erreur lors de la g\xe9n\xe9ration du PDF")}finally{h(!1)}},disabled:u,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-all duration-200 text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:u?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"}),(0,i.jsx)("span",{children:"G\xe9n\xe9ration..."})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Zp,{size:18}),(0,i.jsx)("span",{children:"T\xe9l\xe9charger le PDF d'engagement"})]})})]})]})}),x&&(0,i.jsx)("div",{className:"mt-6 bg-green-50 border-l-4 border-green-500 p-4 rounded-lg",children:(0,i.jsxs)("div",{className:"flex items-start gap-3",children:[(0,i.jsx)(mt.A,{size:24,className:"text-green-600 flex-shrink-0 mt-0.5"}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{className:"font-bold text-green-900 mb-1",children:"PDF t\xe9l\xe9charg\xe9 \u2713"}),(0,i.jsx)("p",{className:"text-sm text-green-700",children:"Vous pouvez maintenant soumettre votre demande. Veuillez signer le document et le conserver pr\xe9cieusement."})]})]})})]}),(0,i.jsxs)("div",{className:"flex justify-between items-center mt-8",children:[(0,i.jsxs)("button",{type:"button",onClick:()=>{o(e=>Math.max(e-1,1))},disabled:1===a,className:"flex items-center gap-2 px-6 py-3 rounded-xl font-medium transition-all duration-200 ".concat(1===a?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:[(0,i.jsx)(Mf.A,{size:20}),(0,i.jsx)("span",{children:"Pr\xe9c\xe9dent"})]}),a<4?(0,i.jsxs)("button",{type:"button",onClick:()=>{T(a)?o(e=>Math.min(e+1,4)):s("Veuillez corriger les erreurs avant de continuer")},className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white rounded-xl font-medium transition-all duration-200 shadow-lg hover:shadow-xl",children:[(0,i.jsx)("span",{children:"Suivant"}),(0,i.jsx)(fi,{size:20})]}):(0,i.jsx)("button",{type:"submit",disabled:u||N,className:"flex items-center gap-2 px-8 py-3 bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white rounded-xl font-bold transition-all duration-200 shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed",children:u?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-white border-t-transparent"}),(0,i.jsx)("span",{children:"Envoi en cours..."})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(px,{size:20}),(0,i.jsx)("span",{children:"Soumettre la demande"})]})})]})]})]})]})},Cx=()=>{yt();const{user:e}=ut(),t=(0,Ge.Zp)(),[s,r]=(0,n.useState)([]),[a,o]=(0,n.useState)(!1),[l,c]=(0,n.useState)(""),[d,u]=(0,n.useState)("all"),[h,m]=(0,n.useState)({totalLoans:0,totalBorrowed:0,totalRepaid:0,activeLoans:0,completedLoans:0,pendingLoans:0,rejectedLoans:0});(0,n.useEffect)(()=>{(async()=>{if(null!==e&&void 0!==e&&e.id)try{o(!0);const[t,s]=await Promise.all([(0,ct.Or)(e.id),(0,ct.k5)(e.id)]);if(t.success&&s.success){const e=t.data||[],n=s.data||[],a=e.map(e=>{const t=n.filter(t=>t.loan_id===e.id).reduce((e,t)=>e+(t.amount||0),0),s=e.amount?e.amount*(1+(e.interest_rate||0)/100):0;let r=null;if(("active"===e.status||"completed"===e.status)&&e.approved_at){const t=new Date(e.approved_at),s=e.duration||e.duration_months||30;r=new Date(t.getTime()+24*s*60*60*1e3)}return{id:e.id,amount:e.amount||0,status:e.status||"pending",requestDate:e.created_at,dueDate:r?r.toISOString().split("T")[0]:null,totalAmount:Math.round(s),paidAmount:Math.round(t),purpose:e.purpose||"Non sp\xe9cifi\xe9",category:e.loan_type||"other",interest_rate:e.interest_rate||0,duration:e.duration||12,monthly_payment:e.monthly_payment||0}});r(a);const i=a.reduce((e,t)=>e+t.amount,0),o=a.reduce((e,t)=>e+t.paidAmount,0),l=a.filter(e=>"active"===e.status).length,c=a.filter(e=>"completed"===e.status).length,d=a.filter(e=>"pending"===e.status).length,u=a.filter(e=>"rejected"===e.status).length;m({totalLoans:a.length,totalBorrowed:i,totalRepaid:o,activeLoans:l,completedLoans:c,pendingLoans:d,rejectedLoans:u})}else console.error("[LOAN HISTORY] Erreur lors du chargement des donn\xe9es:",{loans:t.error,payments:s.error})}catch(t){console.error("[LOAN HISTORY] Erreur lors du chargement de l'historique:",t.message)}finally{o(!1)}else o(!1)})()},[null===e||void 0===e?void 0:e.id]);const p=e=>{switch(e){case"active":return"text-blue-600 bg-blue-100";case"completed":return"text-green-600 bg-green-100";case"pending":return"text-yellow-600 bg-yellow-100";case"rejected":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}},f=e=>{switch(e){case"active":return"Actif";case"completed":return"Rembours\xe9";case"pending":return"En attente";case"rejected":return"Rejet\xe9";default:return"Inconnu"}},g=e=>{switch(e){case"education":return(0,i.jsx)(Nx,{size:16});case"business":return(0,i.jsx)(Vg.A,{size:16});case"health":return(0,i.jsx)(ft,{size:16});case"transport":return(0,i.jsx)(ax,{size:16});default:return(0,i.jsx)(Zp,{size:16})}},x=e=>{switch(e){case"education":return"text-blue-600 bg-blue-100";case"business":return"text-green-600 bg-green-100";case"health":return"text-pink-600 bg-pink-100";case"transport":return"text-orange-600 bg-orange-100";default:return"text-gray-600 bg-gray-100"}},v=e=>{switch(e){case"education":return"\xc9ducation";case"business":return"Entreprise";case"health":return"Sant\xe9";case"transport":return"Transport";default:return"Autre"}},b=s.filter(e=>{const t=e.id.toString().includes(l)||(0,Dp.vv)(e.amount).includes(l)||e.purpose&&e.purpose.toLowerCase().includes(l.toLowerCase()),s="all"===d||e.status===d;return t&&s});return(0,i.jsxs)("div",{className:"bg-gradient-to-br from-primary-50 via-accent-50 to-secondary-50",children:[(0,i.jsx)("style",{children:"\n    @keyframes gradient {\n      0% { background-position: 0% 50%; }\n      50% { background-position: 100% 50%; }\n      100% { background-position: 0% 50%; }\n    }\n    @keyframes pulse-glow {\n      0%, 100% { opacity: 0.3; transform: scale(1); }\n      50% { opacity: 0.6; transform: scale(1.05); }\n    }\n    @keyframes slide-in-right {\n      from { transform: translateX(100%); opacity: 0; }\n      to { transform: translateX(0); opacity: 1; }\n    }\n    @keyframes bounce-in {\n      0% { transform: scale(0.3); opacity: 0; }\n      50% { transform: scale(1.05); }\n      70% { transform: scale(0.9); }\n      100% { transform: scale(1); opacity: 1; }\n    }\n    @keyframes float {\n      0%, 100% { transform: translateY(0px); }\n      50% { transform: translateY(-10px); }\n    }\n    @keyframes shine {\n      0% { transform: translateX(-100%); }\n      100% { transform: translateX(100%); }\n    }\n    .animate-gradient {\n      background-size: 200% 200%;\n      animation: gradient 8s ease infinite;\n    }\n    .animate-pulse-glow {\n      animation: pulse-glow 2s ease-in-out infinite;\n    }\n    .animate-slide-in-right {\n      animation: slide-in-right 0.6s ease-out;\n    }\n    .animate-bounce-in {\n      animation: bounce-in 0.8s ease-out;\n    }\n    .animate-float {\n      animation: float 3s ease-in-out infinite;\n    }\n    .animate-shine {\n      animation: shine 2s ease-in-out infinite;\n    }\n  "}),(0,i.jsxs)("div",{className:"relative overflow-hidden",children:[(0,i.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-500 via-purple-600 to-indigo-600 opacity-15 animate-gradient"}),(0,i.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-white/20 via-transparent to-transparent"}),(0,i.jsxs)("div",{className:"absolute inset-0 opacity-8",children:[(0,i.jsx)("div",{animate:{scale:[1,1.2,1],rotate:[0,180,360],opacity:[.3,.6,.3]},transition:{duration:8,repeat:1/0,ease:"easeInOut"},className:"absolute top-0 left-0 w-72 h-72 bg-blue-400 rounded-full mix-blend-multiply filter blur-xl"}),(0,i.jsx)("div",{animate:{scale:[1.2,1,1.2],rotate:[360,180,0],opacity:[.6,.3,.6]},transition:{duration:10,repeat:1/0,ease:"easeInOut",delay:2},className:"absolute top-0 right-0 w-72 h-72 bg-purple-400 rounded-full mix-blend-multiply filter blur-xl"}),(0,i.jsx)("div",{animate:{scale:[1,1.3,1],rotate:[180,360,180],opacity:[.4,.7,.4]},transition:{duration:12,repeat:1/0,ease:"easeInOut",delay:4},className:"absolute -bottom-8 left-20 w-72 h-72 bg-indigo-400 rounded-full mix-blend-multiply filter blur-xl"}),(0,i.jsx)("div",{animate:{y:[0,-20,0],opacity:[.2,.6,.2]},transition:{duration:4,repeat:1/0,ease:"easeInOut"},className:"absolute top-1/4 left-1/4 w-4 h-4 bg-blue-300 rounded-full"}),(0,i.jsx)("div",{animate:{y:[0,15,0],opacity:[.3,.7,.3]},transition:{duration:5,repeat:1/0,ease:"easeInOut",delay:1},className:"absolute top-3/4 right-1/3 w-3 h-3 bg-purple-300 rounded-full"}),(0,i.jsx)("div",{animate:{x:[0,10,0],opacity:[.4,.8,.4]},transition:{duration:6,repeat:1/0,ease:"easeInOut",delay:2},className:"absolute bottom-1/4 left-1/2 w-2 h-2 bg-indigo-300 rounded-full"}),(0,i.jsx)("div",{animate:{x:[0,-15,0],y:[0,-10,0],opacity:[.3,.8,.3]},transition:{duration:7,repeat:1/0,ease:"easeInOut",delay:.5},className:"absolute top-1/3 right-1/4 w-2 h-2 bg-green-300 rounded-full"}),(0,i.jsx)("div",{animate:{x:[0,12,0],y:[0,-8,0],opacity:[.2,.7,.2]},transition:{duration:8,repeat:1/0,ease:"easeInOut",delay:1.5},className:"absolute bottom-1/3 right-1/3 w-3 h-3 bg-pink-300 rounded-full"}),(0,i.jsx)("div",{animate:{x:[0,-8,0],y:[0,12,0],opacity:[.4,.9,.4]},transition:{duration:9,repeat:1/0,ease:"easeInOut",delay:2.5},className:"absolute top-2/3 left-1/3 w-1 h-1 bg-yellow-300 rounded-full"})]}),(0,i.jsx)("div",{className:"relative px-4 lg:px-8 py-8 lg:py-12 backdrop-blur-sm",children:(0,i.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,i.jsxs)("div",{className:"text-center mb-8 lg:mb-12",children:[(0,i.jsxs)("h1",{className:"text-4xl lg:text-6xl font-bold text-secondary-900 font-montserrat mb-4",children:["Historique des"," ",(0,i.jsx)("span",{className:"bg-gradient-to-r from-blue-600 via-purple-600 to-indigo-600 bg-clip-text text-transparent",children:"Pr\xeat"})," ",(0,i.jsx)("span",{className:"inline-block",children:"\ud83d\udcc8"})]}),(0,i.jsx)("p",{className:"text-lg lg:text-xl text-neutral-600 font-montserrat max-w-3xl mx-auto leading-relaxed",children:"Consultez l'historique de votre pr\xeat et paiements"}),(0,i.jsxs)("div",{className:"flex items-center justify-center space-x-6 mt-6",children:[(0,i.jsxs)("div",{animate:{y:[0,-5,0],rotate:[0,5,0]},transition:{duration:3,repeat:1/0,ease:"easeInOut"},className:"flex items-center space-x-2 text-sm text-neutral-500",children:[(0,i.jsx)(Zp,{size:16,className:"text-green-500"}),(0,i.jsx)("span",{children:"Suivi complet"})]}),(0,i.jsxs)("div",{animate:{y:[0,-5,0],rotate:[0,-5,0]},transition:{duration:3,repeat:1/0,ease:"easeInOut",delay:1},className:"flex items-center space-x-2 text-sm text-neutral-500",children:[(0,i.jsx)(pf,{size:16,className:"text-blue-500"}),(0,i.jsx)("span",{children:"Donn\xe9es s\xe9curis\xe9es"})]}),(0,i.jsxs)("div",{animate:{y:[0,-5,0],rotate:[0,5,0]},transition:{duration:3,repeat:1/0,ease:"easeInOut",delay:2},className:"flex items-center space-x-2 text-sm text-neutral-500",children:[(0,i.jsx)(zg.A,{size:16,className:"text-purple-500"}),(0,i.jsx)("span",{children:"Analyses d\xe9taill\xe9es"})]})]})]}),(0,i.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[(0,i.jsxs)("div",{whileHover:{scale:1.05,y:-5,boxShadow:"0 20px 40px rgba(0,0,0,0.1)"},className:"bg-white/80 backdrop-blur-sm rounded-2xl p-4 border border-white/50 shadow-soft relative overflow-hidden",children:[(0,i.jsx)("div",{animate:{x:["-100%","100%"]},transition:{duration:3,repeat:1/0,ease:"linear",delay:.5},className:"absolute inset-0 bg-gradient-to-r from-transparent via-blue-200/20 to-transparent"}),(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("div",{animate:{scale:[1,1.1,1],rotate:[0,5,0]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},className:"flex items-center justify-center mb-2",children:(0,i.jsx)(Gp.A,{size:20,className:"text-primary-600"})}),(0,i.jsx)("p",{className:"text-lg sm:text-xl font-bold text-secondary-900",children:h.totalLoans}),(0,i.jsx)("p",{className:"text-xs sm:text-sm text-secondary-600",children:"Total pr\xeat"})]})]}),(0,i.jsxs)("div",{whileHover:{scale:1.05,y:-5,boxShadow:"0 20px 40px rgba(0,0,0,0.1)"},className:"bg-white/80 backdrop-blur-sm rounded-2xl p-4 border border-white/50 shadow-soft relative overflow-hidden",children:[(0,i.jsx)("div",{animate:{x:["-100%","100%"]},transition:{duration:3,repeat:1/0,ease:"linear",delay:1},className:"absolute inset-0 bg-gradient-to-r from-transparent via-green-200/20 to-transparent"}),(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("div",{animate:{scale:[1,1.1,1],rotate:[0,-5,0]},transition:{duration:2,repeat:1/0,ease:"easeInOut",delay:.5},className:"flex items-center justify-center mb-2",children:(0,i.jsx)(Vg.A,{size:20,className:"text-green-600"})}),(0,i.jsx)("p",{className:"text-lg sm:text-xl font-bold text-secondary-900 break-words leading-tight",children:(0,Dp.vv)(h.totalBorrowed)}),(0,i.jsx)("p",{className:"text-xs sm:text-sm text-secondary-600",children:"Total emprunt\xe9"})]})]}),(0,i.jsxs)("div",{whileHover:{scale:1.05,y:-5,boxShadow:"0 20px 40px rgba(0,0,0,0.1)"},className:"bg-white/80 backdrop-blur-sm rounded-2xl p-4 border border-white/50 shadow-soft relative overflow-hidden",children:[(0,i.jsx)("div",{animate:{x:["-100%","100%"]},transition:{duration:3,repeat:1/0,ease:"linear",delay:1.5},className:"absolute inset-0 bg-gradient-to-r from-transparent via-blue-200/20 to-transparent"}),(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("div",{animate:{scale:[1,1.1,1],rotate:[0,5,0]},transition:{duration:2,repeat:1/0,ease:"easeInOut",delay:1},className:"flex items-center justify-center mb-2",children:(0,i.jsx)(mt.A,{size:20,className:"text-blue-600"})}),(0,i.jsx)("p",{className:"text-lg sm:text-xl font-bold text-secondary-900 break-words leading-tight",children:(0,Dp.vv)(h.totalRepaid)}),(0,i.jsx)("p",{className:"text-xs sm:text-sm text-secondary-600",children:"Total rembours\xe9"})]})]}),(0,i.jsxs)("div",{whileHover:{scale:1.05,y:-5,boxShadow:"0 20px 40px rgba(0,0,0,0.1)"},className:"bg-white/80 backdrop-blur-sm rounded-2xl p-4 border border-white/50 shadow-soft relative overflow-hidden",children:[(0,i.jsx)("div",{animate:{x:["-100%","100%"]},transition:{duration:3,repeat:1/0,ease:"linear",delay:2},className:"absolute inset-0 bg-gradient-to-r from-transparent via-orange-200/20 to-transparent"}),(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("div",{animate:{scale:[1,1.1,1],rotate:[0,-5,0]},transition:{duration:2,repeat:1/0,ease:"easeInOut",delay:1.5},className:"flex items-center justify-center mb-2",children:(0,i.jsx)(kp,{size:20,className:"text-orange-600"})}),(0,i.jsx)("p",{className:"text-lg sm:text-xl font-bold text-secondary-900",children:h.activeLoans}),(0,i.jsx)("p",{className:"text-xs sm:text-sm text-secondary-600",children:"Pr\xeat actif"})]})]})]})]})})]}),(0,i.jsxs)("div",{className:"max-w-6xl mx-auto px-4 pb-8",children:[(0,i.jsx)("div",{className:"mb-8",children:(0,i.jsx)(gx,{className:"bg-white/90 backdrop-blur-sm border-white/20",children:(0,i.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,i.jsxs)("div",{className:"flex-1 relative",children:[(0,i.jsx)(Jg,{size:20,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,i.jsx)("input",{type:"text",placeholder:"Rechercher par ID, montant ou objet...",value:l,onChange:e=>c(e.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-2xl focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white/80 backdrop-blur-sm"})]}),(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,i.jsx)(Qg,{size:20,className:"text-gray-400"}),(0,i.jsxs)("select",{value:d,onChange:e=>u(e.target.value),className:"px-4 py-3 border border-gray-200 rounded-2xl focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white/80 backdrop-blur-sm",children:[(0,i.jsx)("option",{value:"all",children:"Tous les statuts"}),(0,i.jsx)("option",{value:"active",children:"Actifs"}),(0,i.jsx)("option",{value:"completed",children:"Rembours\xe9s"}),(0,i.jsx)("option",{value:"pending",children:"En attente"}),(0,i.jsx)("option",{value:"rejected",children:"Rejet\xe9s"})]})]})]})})}),(0,i.jsx)("div",{children:(0,i.jsx)(gx,{className:"bg-white/90 backdrop-blur-sm border-white/20",children:a?(0,i.jsx)(Mg,{rows:6}):b.length>0?(0,i.jsx)("div",{className:"space-y-4",children:b.map((e,s)=>(0,i.jsx)("div",{className:"border border-gray-200/50 rounded-2xl p-6 hover:shadow-lg transition-all duration-300 bg-white/60 backdrop-blur-sm",children:(0,i.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0",children:[(0,i.jsxs)("div",{className:"flex-1",children:[(0,i.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-3 mb-4",children:[(0,i.jsxs)("h3",{className:"text-lg sm:text-xl font-semibold text-gray-900 font-montserrat",children:["Pr\xeat #",e.id]}),(0,i.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-medium ".concat(p(e.status)),children:f(e.status)}),e.category&&(0,i.jsxs)("span",{className:"px-2 py-1 rounded-full text-xs font-medium flex items-center space-x-1 ".concat(x(e.category)),children:[g(e.category),(0,i.jsx)("span",{className:"hidden sm:inline",children:v(e.category)})]})]}),e.purpose&&(0,i.jsxs)("div",{className:"mb-4 p-3 bg-gray-50/80 rounded-xl",children:[(0,i.jsx)("span",{className:"text-gray-600 text-xs uppercase tracking-wide",children:"Objet du pr\xeat"}),(0,i.jsx)("p",{className:"font-medium text-gray-900",children:e.purpose})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 sm:gap-6 text-sm",children:[(0,i.jsxs)("div",{className:"p-3 bg-accent-50/50 rounded-xl",children:[(0,i.jsx)("span",{className:"text-gray-600 text-xs uppercase tracking-wide",children:"Montant demand\xe9"}),(0,i.jsx)("p",{className:"font-semibold text-base sm:text-lg text-gray-900 break-words leading-tight",children:(0,Dp.vv)(e.amount)})]}),(0,i.jsxs)("div",{className:"p-3 bg-accent-50/50 rounded-xl",children:[(0,i.jsx)("span",{className:"text-gray-600 text-xs uppercase tracking-wide",children:"Date de demande"}),(0,i.jsx)("p",{className:"font-semibold text-base sm:text-lg text-gray-900",children:(0,Dp.Yq)(e.requestDate)})]}),e.dueDate&&(0,i.jsxs)("div",{className:"p-3 bg-accent-50/50 rounded-xl",children:[(0,i.jsx)("span",{className:"text-gray-600 text-xs uppercase tracking-wide",children:"\xc9ch\xe9ance"}),(0,i.jsx)("p",{className:"font-semibold text-base sm:text-lg text-gray-900",children:(0,Dp.Yq)(e.dueDate)})]})]}),"active"===e.status&&(0,i.jsxs)("div",{className:"mt-6 p-6 bg-blue-50/80 rounded-2xl border border-blue-200/50",children:[(0,i.jsxs)("h4",{className:"font-semibold text-blue-900 mb-4 flex items-center space-x-2",children:[(0,i.jsx)(rx.A,{size:18,className:"sm:w-5 sm:h-5"}),(0,i.jsx)("span",{className:"text-sm sm:text-base",children:"D\xe9tails du pr\xeat"})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 sm:gap-6 text-sm",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:"text-blue-700 text-xs uppercase tracking-wide",children:"Montant total"}),(0,i.jsx)("p",{className:"font-semibold text-base sm:text-lg text-blue-900 break-words leading-tight",children:(0,Dp.vv)(e.totalAmount)})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:"text-blue-700 text-xs uppercase tracking-wide",children:"Montant rembours\xe9"}),(0,i.jsx)("p",{className:"font-semibold text-base sm:text-lg text-blue-900 break-words leading-tight",children:(0,Dp.vv)(e.paidAmount)})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:"text-blue-700 text-xs uppercase tracking-wide",children:"Statut"}),(0,i.jsx)("p",{className:"font-semibold text-base sm:text-lg text-blue-900 break-words leading-tight",children:e.paidAmount>=e.totalAmount?"Rembours\xe9":"En cours"})]})]})]}),"completed"===e.status&&(0,i.jsx)("div",{className:"mt-6 p-6 bg-green-50/80 rounded-2xl border border-green-200/50",children:(0,i.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:[(0,i.jsxs)("span",{className:"text-green-800 font-semibold text-base sm:text-lg flex items-center space-x-2",children:[(0,i.jsx)(mt.A,{size:18,className:"sm:w-5 sm:h-5"}),(0,i.jsx)("span",{children:"Pr\xeat enti\xe8rement rembours\xe9"})]}),(0,i.jsx)("span",{className:"text-green-600 font-bold text-base sm:text-lg break-words leading-tight",children:(0,Dp.vv)(e.paidAmount)})]})}),"pending"===e.status&&(0,i.jsx)("div",{className:"mt-6 p-6 bg-yellow-50/80 rounded-2xl border border-yellow-200/50",children:(0,i.jsx)("div",{className:"flex items-center",children:(0,i.jsxs)("span",{className:"text-yellow-800 font-semibold text-base sm:text-lg flex items-center space-x-2",children:[(0,i.jsx)(kp,{size:18,className:"sm:w-5 sm:h-5"}),(0,i.jsx)("span",{children:"En attente d'approbation"})]})})}),"rejected"===e.status&&(0,i.jsx)("div",{className:"mt-6 p-6 bg-red-50/80 rounded-2xl border border-red-200/50",children:(0,i.jsx)("div",{className:"flex items-center",children:(0,i.jsxs)("span",{className:"text-red-800 font-semibold text-base sm:text-lg flex items-center space-x-2",children:[(0,i.jsx)(Zg,{size:18,className:"sm:w-5 sm:h-5"}),(0,i.jsx)("span",{children:"Demande rejet\xe9e"})]})})})]}),(0,i.jsxs)("div",{className:"flex flex-col space-y-3",children:[(0,i.jsxs)(Ef,{variant:"outline",size:"sm",onClick:()=>t("/loan-details/".concat(e.id)),className:"px-6 py-3 rounded-2xl font-medium flex items-center space-x-2",children:[(0,i.jsx)(wf,{size:16}),(0,i.jsx)("span",{children:"Voir d\xe9tails"})]}),"active"===e.status&&(0,i.jsxs)(Ef,{size:"sm",onClick:()=>t("/repayment",{state:{loanId:e.id}}),className:"px-6 py-3 rounded-2xl font-medium bg-primary-500 hover:bg-primary-600 flex items-center space-x-2",children:[(0,i.jsx)(rx.A,{size:16}),(0,i.jsx)("span",{children:"Rembourser"})]})]})]})},e.id))}):(0,i.jsxs)("div",{className:"text-center py-16",children:[(0,i.jsx)("div",{className:"text-gray-400 mb-6",children:(0,i.jsx)(Jg,{size:80,className:"mx-auto"})}),(0,i.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-3 font-montserrat",children:"Aucun pr\xeat trouv\xe9"}),(0,i.jsx)("p",{className:"text-gray-500 mb-6 text-lg",children:l||"all"!==d?"Aucun pr\xeat ne correspond \xe0 vos crit\xe8res de recherche":"Vous n'avez pas encore de pr\xeat"}),!l&&"all"===d&&(0,i.jsx)(Ef,{onClick:()=>t("/loan-request"),className:"px-8 py-4 text-lg rounded-2xl bg-primary-500 hover:bg-primary-600",children:"Faire une demande"})]})})}),(0,i.jsx)("div",{className:"fixed bottom-24 right-6 z-10",children:(0,i.jsxs)(Ef,{variant:"outline",onClick:()=>{const e="data:text/csv;charset=utf-8,ID,Montant,Statut,Date de demande,\xc9ch\xe9ance,Montant total,Statut remboursement\n"+b.map(e=>"".concat(e.id,",").concat(e.amount,",").concat(f(e.status),",").concat((0,Dp.Yq)(e.requestDate),",").concat(e.dueDate?(0,Dp.Yq)(e.dueDate):"N/A",",").concat(e.totalAmount||"N/A",",").concat(e.paidAmount>=(e.totalAmount||0)?"Rembours\xe9":"En cours")).join("\n"),t=encodeURI(e),s=document.createElement("a");s.setAttribute("href",t),s.setAttribute("download","historique_prets.csv"),document.body.appendChild(s),s.click(),document.body.removeChild(s)},className:"flex items-center space-x-2 px-4 py-3 rounded-full bg-white/90 backdrop-blur-sm border-white/50 shadow-lg hover:shadow-xl",children:[(0,i.jsx)(uf,{size:20}),(0,i.jsx)("span",{className:"hidden sm:inline",children:"Exporter"})]})})]})]})},Px=e=>{let{loan:t,onSuccess:s}=e;const r=(0,n.useRef)(null),{user:a}=ut(),[o,l]=(0,n.useState)(!1);(0,n.useEffect)(()=>{const e=document.createElement("script");return e.src="https://cdn.fedapay.com/checkout.js?v=1.1.7",e.async=!0,e.onload=()=>{console.log("[FedaPay] \u2705 Script charg\xe9 pour remboursement")},e.onerror=()=>{console.error("[FedaPay] \u274c Erreur chargement script")},document.body.appendChild(e),()=>{document.body.contains(e)&&document.body.removeChild(e)}},[]);return(0,i.jsxs)("button",{ref:r,onClick:async()=>{if(window.FedaPay)if(a&&t){l(!0);try{const e=Ep.f,s=await fetch("".concat(e,"/api/create-loan-repayment"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:null===a||void 0===a?void 0:a.id,loan_id:t.id,amount:t.remainingAmount})}),n=await s.json();console.log("[FedaPayRemboursementButton] R\xe9ponse backend:",n),console.log("[FedaPayRemboursementButton] Status HTTP:",s.status),n.success&&n.transactionUrl?(n.transactionId&&sessionStorage.setItem("pending_repayment_transaction_id",n.transactionId),window.location.href=n.transactionUrl):(console.error("[FedaPayRemboursementButton] \u274c Erreur d\xe9taill\xe9e:",n),alert("Erreur lors de la cr\xe9ation de la transaction de remboursement: ".concat(n.error||"Erreur inconnue")))}catch(e){console.error("[FedaPayRemboursementButton] \u274c Erreur:",e),alert("Erreur de connexion. Veuillez r\xe9essayer.")}finally{l(!1)}}else alert("Informations utilisateur ou pr\xeat manquantes");else alert("FedaPay n'est pas encore charg\xe9 !")},disabled:o,className:"w-full bg-gradient-to-r from-blue-500 to-blue-600 text-white py-4 rounded-xl font-semibold shadow-lg flex items-center justify-center",children:[o?(0,i.jsx)("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}):(0,i.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})}),"Rembourser mon pr\xeat"]})},Tx=()=>{const{showSuccess:e,showError:t}=yt(),{user:s}=ut(),r=(0,Ge.Zp)(),a=l(),[o,c]=(0,n.useState)(null),[d,u]=(0,n.useState)(!1),h=async()=>{if(null!==s&&void 0!==s&&s.id)try{u(!0);const[e,t]=await Promise.all([(0,ct.Or)(s.id),(0,ct.k5)(s.id)]);if(e.success&&t.success){const n=e.data||[],r=t.data||[];console.log("[REPAYMENT] Tous les pr\xeats:",n.map(e=>({id:e.id,status:e.status})));const i=n.find(e=>"active"===e.status||"approved"===e.status||"overdue"===e.status);if(console.log("[REPAYMENT] Pr\xeat actif trouv\xe9:",i?{id:i.id,status:i.status}:"Aucun"),i){const e=r.filter(e=>e.loan_id===i.id).reduce((e,t)=>e+(t.amount||0),0),t=parseFloat(i.amount),n=t+t*(i.interest_rate||0)/100;let o=30;null!=i.duration_months&&void 0!==i.duration_months?o=Number(i.duration_months):null!=i.duration&&void 0!==i.duration&&(o=Number(i.duration));let l=null,d=null;if(i.approved_at){const e=new Date(i.approved_at);l=new Date(e),l.setDate(l.getDate()+o)}let u=parseFloat(i.total_penalty_amount||0),h=0;const m="overdue"===i.status;if(l){const e=new Date;e.setHours(0,0,0,0);const t=new Date(l);if(t.setHours(0,0,0,0),h=Math.max(0,Math.floor((e-t)/864e5)),(m||h>0)&&0===u){const e=parseFloat(i.daily_penalty_rate)||2,t=Math.floor(h/5);if(t>0){u=n*Math.pow(1+e/100,t)-n}else u=0}if(m&&0===u&&0===h){h=5;const e=parseFloat(i.daily_penalty_rate)||2;u=n*(1+e/100)-n}}const p=n+u,f=Math.max(0,p-e);if(i.approved_at){const e=new Date(i.approved_at),t=new Date,s=Math.floor((t-e)/864e5),n=30,r=s+n-s%n;d=new Date(e.getTime()+24*r*60*60*1e3)}console.log("[REPAYMENT] Calcul du montant \xe0 rembourser:",{loanId:i.id,originalAmount:i.amount,interestRate:i.interest_rate||0,totalOriginalAmount:n,paidAmount:e,remainingAmount:f,calculation:"".concat(i.amount," * (1 + ").concat(i.interest_rate||0,"/100) = ").concat(n)});const g={id:i.id,amount:i.amount,monthlyPayment:i.monthly_payment||Math.round(n/o),totalAmount:Math.round(n),paidAmount:Math.round(e),remainingAmount:Math.round(f),penaltyAmount:Math.round(u),daysOverdue:h,totalAmountWithPenalty:Math.round(p),dueDate:l?l.toISOString().split("T")[0]:null,nextPaymentDate:d?d.toISOString().split("T")[0]:null,interest_rate:i.interest_rate||0,duration:o,purpose:i.purpose||"Non sp\xe9cifi\xe9",status:i.status};g.remainingAmount<=0?(c(null),a.invalidateQueries({queryKey:["dashboardStats",null===s||void 0===s?void 0:s.id]})):c(g)}else c(null)}else console.error("[REPAYMENT] Erreur lors du chargement des donn\xe9es:",{loans:e.error,payments:t.error})}catch(e){console.error("[REPAYMENT] Erreur lors du chargement du pr\xeat actif:",e.message)}finally{u(!1)}};(0,n.useEffect)(()=>{h()},[null===s||void 0===s?void 0:s.id]);return(0,i.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-yellow-50 to-slate-100 pb-24",children:[(0,i.jsx)("div",{className:"bg-white/80 backdrop-blur-lg shadow-lg border-b border-white/50 sticky top-0 z-30",children:(0,i.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,i.jsxs)("div",{className:"flex items-center justify-between py-6",children:[(0,i.jsx)("button",{onClick:()=>r("/dashboard"),className:"p-2 hover:bg-gray-100 rounded-xl transition-colors",children:(0,i.jsx)(Mf.A,{size:24,className:"text-gray-600"})}),(0,i.jsx)("div",{className:"text-center flex-1",children:(0,i.jsxs)("h1",{className:"text-3xl font-bold text-secondary-900 font-montserrat flex items-center justify-center gap-3",children:[(0,i.jsx)(Hp.A,{className:"text-primary-600",size:32}),"Remboursement de Pr\xeat"]})}),(0,i.jsx)("div",{className:"w-10"})]})})}),(0,i.jsx)("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:d?(0,i.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,i.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-primary-600 border-t-transparent"})}):o?(0,i.jsx)("div",{className:"space-y-6",children:(0,i.jsxs)("div",{className:"bg-white rounded-3xl shadow-xl border border-gray-100 overflow-hidden",children:[(0,i.jsxs)("div",{className:"bg-gradient-to-r from-secondary-800 to-secondary-900 p-8",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,i.jsxs)("div",{className:"flex items-center gap-3",children:[(0,i.jsx)("div",{className:"p-3 bg-white rounded-xl",children:(0,i.jsx)(Qp,{size:28,className:"text-primary-600"})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Pr\xeat Actif"}),(0,i.jsxs)("p",{className:"text-gray-300 text-sm",children:["ID: #",o.id.substring(0,8)]})]})]}),(0,i.jsxs)("div",{className:"text-right",children:[(0,i.jsx)("p",{className:"text-gray-300 text-sm",children:"Objet du pr\xeat"}),(0,i.jsx)("p",{className:"text-white font-semibold",children:o.purpose})]})]}),(0,i.jsxs)("div",{className:"bg-white/10 backdrop-blur-sm rounded-2xl p-6 border border-white/20",children:[(0,i.jsx)("p",{className:"text-gray-200 text-sm mb-2",children:"Montant restant \xe0 rembourser"}),(0,i.jsx)("p",{className:"text-5xl font-bold text-white",children:(0,Dp.vv)(o.remainingAmount)})]})]}),(0,i.jsxs)("div",{className:"p-8",children:[(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4 mb-6",children:[(0,i.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-2xl p-5 border border-blue-200",children:[(0,i.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,i.jsx)("div",{className:"p-2 bg-blue-200 rounded-lg",children:(0,i.jsx)(rx.A,{size:20,className:"text-blue-700"})}),(0,i.jsx)("p",{className:"text-blue-900 font-medium text-sm",children:"Montant initial"})]}),(0,i.jsx)("p",{className:"text-2xl font-bold text-blue-900",children:(0,Dp.vv)(o.amount)})]}),(0,i.jsxs)("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-2xl p-5 border border-green-200",children:[(0,i.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,i.jsx)("div",{className:"p-2 bg-green-200 rounded-lg",children:(0,i.jsx)(mt.A,{size:20,className:"text-green-700"})}),(0,i.jsx)("p",{className:"text-green-900 font-medium text-sm",children:"D\xe9j\xe0 rembours\xe9"})]}),(0,i.jsx)("p",{className:"text-2xl font-bold text-green-900",children:(0,Dp.vv)(o.paidAmount)})]}),(0,i.jsxs)("div",{className:"bg-gradient-to-br from-primary-50 to-primary-100 rounded-2xl p-5 border border-primary-200",children:[(0,i.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,i.jsx)("div",{className:"p-2 bg-primary-200 rounded-lg",children:(0,i.jsx)(Vg.A,{size:20,className:"text-primary-700"})}),(0,i.jsx)("p",{className:"text-primary-900 font-medium text-sm",children:"Total avec int\xe9r\xeats"})]}),(0,i.jsx)("p",{className:"text-2xl font-bold text-primary-900",children:(0,Dp.vv)(o.totalAmount)}),(0,i.jsxs)("p",{className:"text-xs text-primary-700 mt-1",children:["Taux: ",o.interest_rate,"%"]})]}),(()=>{const e=o.penaltyAmount>0||o.daysOverdue>0||"overdue"===o.status;return(0,i.jsxs)("div",{className:"rounded-2xl p-5 border ".concat(e?"bg-gradient-to-br from-red-50 to-orange-100 border-red-200":"bg-gradient-to-br from-gray-50 to-gray-100 border-gray-200"),children:[(0,i.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,i.jsx)("div",{className:"p-2 rounded-lg ".concat(e?"bg-red-200":"bg-gray-200"),children:(0,i.jsx)(Kg,{size:20,className:e?"text-red-700":"text-gray-700"})}),(0,i.jsx)("p",{className:"font-medium text-sm ".concat(e?"text-red-900":"text-gray-900"),children:"P\xe9nalit\xe9s"})]}),e?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("p",{className:"text-2xl font-bold text-red-900",children:(0,Dp.vv)(o.penaltyAmount||0)}),(0,i.jsx)("p",{className:"text-xs text-red-700 mt-1",children:1===o.daysOverdue?"1 jour de retard":o.daysOverdue>1?"".concat(o.daysOverdue," jours de retard"):"En retard"})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:"0 FCFA"}),(0,i.jsx)("p",{className:"text-xs text-gray-700 mt-1",children:"Aucun retard"})]})]})})(),(0,i.jsxs)("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-2xl p-5 border border-purple-200",children:[(0,i.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,i.jsx)("div",{className:"p-2 bg-purple-200 rounded-lg",children:(0,i.jsx)(Yg.A,{size:20,className:"text-purple-700"})}),(0,i.jsx)("p",{className:"text-purple-900 font-medium text-sm",children:"Date d'\xe9ch\xe9ance"})]}),(0,i.jsx)("p",{className:"text-lg font-bold text-purple-900",children:o.dueDate?new Date(o.dueDate).toLocaleDateString("fr-FR",{day:"numeric",month:"long",year:"numeric"}):"Non d\xe9fini"}),(0,i.jsxs)("p",{className:"text-xs text-purple-700 mt-1",children:["Dur\xe9e: ",o.duration," jours"]})]})]}),o.penaltyAmount>0&&(0,i.jsx)("div",{className:"bg-gradient-to-r from-red-50 to-orange-50 border-l-4 border-red-500 rounded-xl p-6 mb-6",children:(0,i.jsxs)("div",{className:"flex items-start gap-4",children:[(0,i.jsx)("div",{className:"p-3 bg-red-100 rounded-xl",children:(0,i.jsx)(Kg,{size:24,className:"text-red-600"})}),(0,i.jsxs)("div",{className:"flex-1",children:[(0,i.jsx)("h3",{className:"font-bold text-red-900 text-lg mb-2",children:"\u26a0\ufe0f Pr\xeat en retard"}),(0,i.jsxs)("p",{className:"text-red-800 mb-3",children:["Votre pr\xeat a d\xe9pass\xe9 la date d'\xe9ch\xe9ance. Des p\xe9nalit\xe9s de ",(0,i.jsx)("strong",{children:"2% tous les 5 jours"})," sont appliqu\xe9es (compos\xe9es sur le solde total)."]}),(0,i.jsx)("div",{className:"bg-white/50 rounded-xl p-4 border border-red-200",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsx)("span",{className:"text-red-900 font-medium",children:"P\xe9nalit\xe9s accumul\xe9es"}),(0,i.jsx)("span",{className:"text-2xl font-bold text-red-700",children:(0,Dp.vv)(o.penaltyAmount)})]})})]})]})}),(0,i.jsx)("div",{className:"bg-gradient-to-r from-blue-50 to-cyan-50 rounded-2xl p-6 border border-blue-200 mb-6",children:(0,i.jsxs)("div",{className:"flex items-start gap-4",children:[(0,i.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,i.jsx)(gt,{size:20,className:"text-blue-600"})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{className:"font-semibold text-blue-900 mb-2",children:"Informations importantes"}),(0,i.jsxs)("ul",{className:"text-blue-800 text-sm space-y-1",children:[(0,i.jsx)("li",{children:"\u2022 Le remboursement se fait via Mobile Money (MTN, Moov)"}),(0,i.jsx)("li",{children:"\u2022 Vous pouvez rembourser partiellement ou totalement"}),(0,i.jsx)("li",{children:"\u2022 Le remboursement est instantan\xe9 et s\xe9curis\xe9"}),(0,i.jsx)("li",{children:"\u2022 \xc9vitez les p\xe9nalit\xe9s en remboursant avant l'\xe9ch\xe9ance"})]})]})]})}),(0,i.jsxs)("div",{className:"bg-gradient-to-br from-primary-50 to-yellow-50 rounded-2xl p-6 border-2 border-primary-300",children:[(0,i.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,i.jsx)("div",{className:"p-3 bg-primary-500 rounded-xl",children:(0,i.jsx)(Hp.A,{size:24,className:"text-white"})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{className:"font-bold text-secondary-900 text-lg",children:"Effectuer un remboursement"}),(0,i.jsx)("p",{className:"text-gray-600 text-sm",children:"Paiement s\xe9curis\xe9 via FedaPay"})]})]}),(0,i.jsx)(Px,{loan:o,onSuccess:t=>{e(t),a.invalidateQueries({queryKey:["dashboardStats",null===s||void 0===s?void 0:s.id]}),setTimeout(()=>{h()},1e3)}})]})]})]})}):(0,i.jsx)("div",{className:"bg-white rounded-3xl shadow-xl border border-gray-100 overflow-hidden",children:(0,i.jsxs)("div",{className:"p-16 text-center",children:[(0,i.jsx)("div",{className:"w-32 h-32 bg-gradient-to-br from-gray-100 to-gray-200 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,i.jsx)(Qp,{size:64,className:"text-gray-400"})}),(0,i.jsx)("h2",{className:"text-3xl font-bold text-gray-900 mb-4 font-montserrat",children:"Aucun pr\xeat en cours"}),(0,i.jsx)("p",{className:"text-gray-600 mb-2 max-w-md mx-auto",children:"Vous n'avez actuellement aucun pr\xeat actif \xe0 rembourser."}),(0,i.jsx)("p",{className:"text-gray-500 text-sm mb-8",children:"Un seul pr\xeat peut \xeatre actif \xe0 la fois"}),(0,i.jsxs)("button",{onClick:()=>r("/loan-request"),className:"inline-flex items-center gap-2 px-8 py-4 bg-primary-500 hover:bg-primary-600 text-white font-semibold rounded-xl transition-all duration-200 shadow-lg hover:shadow-xl",children:[(0,i.jsx)(Hp.A,{size:20}),"Demander un nouveau pr\xeat"]})]})})})]})},Ix=()=>{const e=(0,Ge.zy)(),t=(0,Ge.Zp)(),{user:s}=ut(),{showSuccess:r,showError:a,addNotification:o}=yt(),[l,c]=(0,n.useState)(null),[d,u]=(0,n.useState)(!1);(0,n.useEffect)(()=>{const t=new URLSearchParams(e.search),s=t.get("transaction_id"),n=t.get("amount"),r=t.get("loan_id");if(s&&n&&r){const e={transactionId:s,amount:parseInt(n),loanId:r};c(e),h(e)}},[e]);const h=async e=>{if(!d)try{u(!0),console.log("[REPAYMENT_SUCCESS] Traitement du remboursement:",e);const a={loan_id:e.loanId,user_id:s.id,amount:e.amount,payment_method:"fedapay",fedapay_transaction_id:e.transactionId,status:"completed",payment_date:(new Date).toISOString(),description:"Remboursement complet du pr\xeat #".concat(e.loanId),metadata:{fedapay_data:{transaction_id:e.transactionId,amount:e.amount,payment_date:(new Date).toISOString()},payment_type:"loan_repayment",app_source:"ab_pret_web"}},i=await(0,ct.Lb)(a);if(!i.success)throw new Error("Erreur lors de la cr\xe9ation du paiement: "+i.error);console.log("[REPAYMENT_SUCCESS] Paiement cr\xe9\xe9:",i.data);const o=await(0,ct.E$)(e.loanId,"completed");if(!o.success)throw new Error("Erreur lors de la mise \xe0 jour du pr\xeat: "+o.error);console.log("[REPAYMENT_SUCCESS] Pr\xeat mis \xe0 jour:",o.data);try{let t="http://localhost:5000";const s=await fetch("".concat(t,"/api/sync-loan-status"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({loanId:e.loanId})});if(s.ok){(await s.json()).updated?console.log("[REPAYMENT_SUCCESS] \u2705 Statut synchronis\xe9 et corrig\xe9 par le backend"):console.log("[REPAYMENT_SUCCESS] \u2139\ufe0f Statut v\xe9rifi\xe9 - pr\xeat pas encore enti\xe8rement rembours\xe9")}}catch(t){console.warn("[REPAYMENT_SUCCESS] \u26a0\ufe0f Erreur synchronisation statut:",t)}try{let t="http://localhost:5000";const n=window.location.hostname;if(n.includes("ngrok")||n.includes("ngrok-free")){window.location.protocol;console.log("[REPAYMENT_SUCCESS] \u26a0\ufe0f D\xe9tection ngrok, notifications g\xe9r\xe9es par webhook")}console.log("[REPAYMENT_SUCCESS] \ud83d\udce2 Tentative envoi notifications via:",t);const r=await fetch("".concat(t,"/api/notify-repayment"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({loanId:e.loanId,userId:s.id,amount:e.amount})});if(r.ok)console.log("[REPAYMENT_SUCCESS] \u2705 Notifications envoy\xe9es imm\xe9diatement");else{const e=await r.text();console.warn("[REPAYMENT_SUCCESS] \u26a0\ufe0f Erreur envoi notifications:",e),console.log("[REPAYMENT_SUCCESS] \u2139\ufe0f Les notifications seront g\xe9r\xe9es par le webhook FedaPay")}}catch(n){console.error("[REPAYMENT_SUCCESS] \u26a0\ufe0f Erreur d\xe9clenchement notifications:",n),console.log("[REPAYMENT_SUCCESS] \u2139\ufe0f Les notifications seront g\xe9r\xe9es par le webhook FedaPay (toutes les 30 secondes max)")}r("Remboursement trait\xe9 avec succ\xe8s ! Le pr\xeat a \xe9t\xe9 marqu\xe9 comme rembours\xe9.")}catch(i){console.error("[REPAYMENT_SUCCESS] Erreur lors du traitement:",i),a("Erreur lors du traitement du remboursement: "+i.message)}finally{u(!1)}};return(0,i.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-green-50 to-blue-50 flex items-center justify-center p-4",children:(0,i.jsxs)("div",{className:"max-w-md w-full",children:[(0,i.jsxs)("div",{className:"bg-white rounded-3xl shadow-xl p-8 text-center",children:[(0,i.jsx)("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,i.jsx)(mt.A,{className:"w-12 h-12 text-green-600"})}),(0,i.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Remboursement r\xe9ussi !"}),(0,i.jsx)("p",{className:"text-gray-600 mb-6",children:"Votre pr\xeat a \xe9t\xe9 rembours\xe9 avec succ\xe8s via FedaPay."}),l&&(0,i.jsx)("div",{className:"bg-gray-50 rounded-2xl p-6 mb-6",children:(0,i.jsxs)("div",{className:"space-y-3",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center",children:[(0,i.jsx)("span",{className:"text-gray-600",children:"Montant rembours\xe9 :"}),(0,i.jsx)("span",{className:"font-semibold text-gray-900",children:(m=l.amount,new Intl.NumberFormat("fr-CI",{style:"currency",currency:"XOF"}).format(m/100))})]}),(0,i.jsxs)("div",{className:"flex justify-between items-center",children:[(0,i.jsx)("span",{className:"text-gray-600",children:"ID Transaction :"}),(0,i.jsxs)("span",{className:"font-mono text-sm text-gray-500",children:[l.transactionId.substring(0,12),"..."]})]}),(0,i.jsxs)("div",{className:"flex justify-between items-center",children:[(0,i.jsx)("span",{className:"text-gray-600",children:"Pr\xeat # :"}),(0,i.jsx)("span",{className:"font-semibold text-gray-900",children:l.loanId})]})]})}),(0,i.jsx)("div",{className:"bg-green-50 border border-green-200 rounded-xl p-4 mb-6",children:(0,i.jsxs)("p",{className:"text-green-800 text-sm",children:[(0,i.jsx)("strong",{children:"Confirmation :"}),d?"Traitement du remboursement en cours...":"Votre pr\xeat a \xe9t\xe9 marqu\xe9 comme rembours\xe9 dans notre syst\xe8me. Vous recevrez bient\xf4t un email de confirmation."]})}),(0,i.jsxs)("div",{className:"space-y-3",children:[(0,i.jsxs)("button",{onClick:()=>{t("/loan-history")},className:"w-full bg-primary-500 hover:bg-primary-600 text-white font-semibold py-3 px-6 rounded-xl transition-colors flex items-center justify-center space-x-2",children:[(0,i.jsx)(Mf.A,{className:"w-5 h-5"}),(0,i.jsx)("span",{children:"Voir l'historique des pr\xeats"})]}),(0,i.jsxs)("button",{onClick:()=>{t("/dashboard")},className:"w-full bg-gray-100 hover:bg-gray-200 text-gray-700 font-semibold py-3 px-6 rounded-xl transition-colors flex items-center justify-center space-x-2",children:[(0,i.jsx)(Vp,{className:"w-5 h-5"}),(0,i.jsx)("span",{children:"Retour au tableau de bord"})]})]})]}),(0,i.jsx)("div",{className:"mt-6 text-center",children:(0,i.jsx)("p",{className:"text-sm text-gray-500",children:"Si vous avez des questions, contactez notre support client."})})]})});var m},Rx=()=>{const{showError:e}=yt();ut();const t=(0,Ge.Zp)(),[s]=ot(),[r,a]=(0,n.useState)(!1),o=s.get("transaction_id"),l=s.get("amount"),c=s.get("loan_id"),d=s.get("user_id");(0,n.useEffect)(()=>{e("Le paiement a \xe9chou\xe9. Veuillez r\xe9essayer.")},[e]);return(0,i.jsxs)("div",{className:"bg-gradient-to-br from-red-50 via-orange-50 to-yellow-50 min-h-screen",children:[(0,i.jsxs)("div",{className:"relative overflow-hidden",children:[(0,i.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-red-500 via-orange-600 to-yellow-500 opacity-10 animate-gradient"}),(0,i.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-white/20 via-transparent to-transparent"}),(0,i.jsx)("div",{className:"relative px-4 lg:px-8 py-8 lg:py-12 backdrop-blur-sm",children:(0,i.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,i.jsx)("div",{className:"flex items-center justify-between mb-8",children:(0,i.jsxs)(Ef,{variant:"outline",onClick:()=>t("/dashboard"),className:"flex items-center space-x-2 px-4 py-2 bg-white/20 backdrop-blur-sm border-white/30",children:[(0,i.jsx)(Mf.A,{size:20}),(0,i.jsx)("span",{children:"Retour au Dashboard"})]})}),(0,i.jsx)("div",{className:"text-center mb-8 lg:mb-12",children:(0,i.jsxs)("h1",{className:"text-4xl lg:text-6xl font-bold text-red-900 font-montserrat mb-4",children:["Paiement \xc9chou\xe9"," ",(0,i.jsx)("span",{className:"inline-block",children:"\u274c"})]})})]})})]}),(0,i.jsx)("div",{className:"max-w-2xl mx-auto px-4 pb-8",children:(0,i.jsx)(gx,{title:"D\xe9tails de l'\xe9chec",className:"bg-white/90 backdrop-blur-sm border-white/20",children:(0,i.jsxs)("div",{className:"text-center py-8",children:[(0,i.jsx)("div",{className:"w-24 h-24 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,i.jsx)(Zg,{className:"w-12 h-12 text-red-600"})}),(0,i.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Le paiement n'a pas pu \xeatre trait\xe9"}),(0,i.jsxs)("p",{className:"text-gray-600 mb-6 text-lg",children:["Nous n'avons pas pu traiter votre paiement de"," ",(0,i.jsx)("strong",{children:l?(0,Dp.vv)(parseInt(l)):"N/A"}),"."]}),(0,i.jsxs)("div",{className:"bg-gray-50 rounded-xl p-4 mb-6 text-left",children:[(0,i.jsx)("h3",{className:"font-semibold text-gray-900 mb-2",children:"D\xe9tails techniques :"}),(0,i.jsxs)("div",{className:"space-y-1 text-sm text-gray-600",children:[(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"Transaction ID :"})," ",o||"N/A"]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"Pr\xeat ID :"})," ",c||"N/A"]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"Utilisateur ID :"})," ",d||"N/A"]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"Montant :"})," ",l?(0,Dp.vv)(parseInt(l)):"N/A"]})]})]}),(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4",children:[(0,i.jsx)("h3",{className:"font-semibold text-blue-900 mb-2",children:"Que pouvez-vous faire ?"}),(0,i.jsxs)("ul",{className:"text-sm text-blue-800 space-y-1",children:[(0,i.jsx)("li",{children:"\u2022 V\xe9rifiez que votre compte Mobile Money a suffisamment de fonds"}),(0,i.jsx)("li",{children:"\u2022 Assurez-vous que votre num\xe9ro de t\xe9l\xe9phone est correct"}),(0,i.jsx)("li",{children:'\u2022 R\xe9essayez le paiement en cliquant sur "R\xe9essayer"'}),(0,i.jsx)("li",{children:"\u2022 Contactez le support si le probl\xe8me persiste"})]})]}),(0,i.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 pt-4",children:[(0,i.jsx)(Ef,{onClick:()=>{a(!0),setTimeout(()=>{t("/remboursement"),a(!1)},1e3)},disabled:r,className:"flex-1 bg-primary-500 hover:bg-primary-600 text-white font-semibold py-3 px-6 rounded-xl transition-colors flex items-center justify-center space-x-2",children:r?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(ai.A,{className:"w-5 h-5 animate-spin"}),(0,i.jsx)("span",{children:"Redirection..."})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(ai.A,{className:"w-5 h-5"}),(0,i.jsx)("span",{children:"R\xe9essayer le paiement"})]})}),(0,i.jsx)(Ef,{onClick:()=>{t("/dashboard")},variant:"outline",className:"flex-1 border-gray-300 text-gray-700 hover:bg-gray-50 font-semibold py-3 px-6 rounded-xl transition-colors",children:"Retour au Dashboard"})]})]}),(0,i.jsxs)("div",{className:"mt-8 pt-6 border-t border-gray-200",children:[(0,i.jsx)("p",{className:"text-sm text-gray-500 mb-2",children:"Besoin d'aide ? Contactez notre support :"}),(0,i.jsxs)("div",{className:"flex justify-center space-x-4 text-sm",children:[(0,i.jsx)("a",{href:"mailto:support@campusfinance.com",className:"text-primary-600 hover:text-primary-700",children:"support@campusfinance.com"}),(0,i.jsx)("span",{className:"text-gray-400",children:"|"}),(0,i.jsx)("a",{href:"tel:+2250700000000",className:"text-primary-600 hover:text-primary-700",children:"+225 07 00 00 00 00"})]})]})]})})})]})},Dx=()=>{const{showError:e}=yt();ut();const t=(0,Ge.Zp)(),[s]=ot(),[r,a]=(0,n.useState)(!1),o=s.get("transaction_id"),l=s.get("amount"),c=s.get("loan_id"),d=s.get("user_id");(0,n.useEffect)(()=>{e("Le paiement a \xe9t\xe9 annul\xe9.")},[e]);return(0,i.jsxs)("div",{className:"bg-gradient-to-br from-yellow-50 via-orange-50 to-red-50 min-h-screen",children:[(0,i.jsxs)("div",{className:"relative overflow-hidden",children:[(0,i.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-yellow-500 via-orange-600 to-red-500 opacity-10 animate-gradient"}),(0,i.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-white/20 via-transparent to-transparent"}),(0,i.jsx)("div",{className:"relative px-4 lg:px-8 py-8 lg:py-12 backdrop-blur-sm",children:(0,i.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,i.jsx)("div",{className:"flex items-center justify-between mb-8",children:(0,i.jsxs)(Ef,{variant:"outline",onClick:()=>t("/dashboard"),className:"flex items-center space-x-2 px-4 py-2 bg-white/20 backdrop-blur-sm border-white/30",children:[(0,i.jsx)(Mf.A,{size:20}),(0,i.jsx)("span",{children:"Retour au Dashboard"})]})}),(0,i.jsx)("div",{className:"text-center mb-8 lg:mb-12",children:(0,i.jsxs)("h1",{className:"text-4xl lg:text-6xl font-bold text-orange-900 font-montserrat mb-4",children:["Paiement Annul\xe9"," ",(0,i.jsx)("span",{className:"inline-block",children:"\u26a0\ufe0f"})]})})]})})]}),(0,i.jsx)("div",{className:"max-w-2xl mx-auto px-4 pb-8",children:(0,i.jsx)(gx,{title:"D\xe9tails de l'annulation",className:"bg-white/90 backdrop-blur-sm border-white/20",children:(0,i.jsxs)("div",{className:"text-center py-8",children:[(0,i.jsx)("div",{className:"w-24 h-24 bg-orange-100 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,i.jsx)(xt,{className:"w-12 h-12 text-orange-600"})}),(0,i.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Le paiement a \xe9t\xe9 annul\xe9"}),(0,i.jsxs)("p",{className:"text-gray-600 mb-6 text-lg",children:["Votre paiement de"," ",(0,i.jsx)("strong",{children:l?(0,Dp.vv)(parseInt(l)):"N/A"})," a \xe9t\xe9 annul\xe9. Aucun montant n'a \xe9t\xe9 d\xe9bit\xe9 de votre compte."]}),(0,i.jsxs)("div",{className:"bg-gray-50 rounded-xl p-4 mb-6 text-left",children:[(0,i.jsx)("h3",{className:"font-semibold text-gray-900 mb-2",children:"D\xe9tails techniques :"}),(0,i.jsxs)("div",{className:"space-y-1 text-sm text-gray-600",children:[(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"Transaction ID :"})," ",o||"N/A"]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"Pr\xeat ID :"})," ",c||"N/A"]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"Utilisateur ID :"})," ",d||"N/A"]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"Montant :"})," ",l?(0,Dp.vv)(parseInt(l)):"N/A"]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"Statut :"})," ",(0,i.jsx)("span",{className:"text-orange-600 font-medium",children:"Annul\xe9"})]})]})]}),(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4",children:[(0,i.jsx)("h3",{className:"font-semibold text-blue-900 mb-2",children:"Que pouvez-vous faire ?"}),(0,i.jsxs)("ul",{className:"text-sm text-blue-800 space-y-1",children:[(0,i.jsx)("li",{children:"\u2022 R\xe9essayer le paiement maintenant"}),(0,i.jsx)("li",{children:"\u2022 Retourner au dashboard pour plus tard"}),(0,i.jsx)("li",{children:"\u2022 V\xe9rifier les informations de votre compte Mobile Money"}),(0,i.jsx)("li",{children:"\u2022 Contacter le support si vous avez des questions"})]})]}),(0,i.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 pt-4",children:[(0,i.jsx)(Ef,{onClick:()=>{a(!0),setTimeout(()=>{t("/remboursement"),a(!1)},1e3)},disabled:r,className:"flex-1 bg-primary-500 hover:bg-primary-600 text-white font-semibold py-3 px-6 rounded-xl transition-colors flex items-center justify-center space-x-2",children:r?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(ai.A,{className:"w-5 h-5 animate-spin"}),(0,i.jsx)("span",{children:"Redirection..."})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(ai.A,{className:"w-5 h-5"}),(0,i.jsx)("span",{children:"R\xe9essayer le paiement"})]})}),(0,i.jsx)(Ef,{onClick:()=>{t("/dashboard")},variant:"outline",className:"flex-1 border-gray-300 text-gray-700 hover:bg-gray-50 font-semibold py-3 px-6 rounded-xl transition-colors",children:"Retour au Dashboard"})]})]}),(0,i.jsxs)("div",{className:"mt-6 bg-green-50 border border-green-200 rounded-xl p-4",children:[(0,i.jsx)("h3",{className:"font-semibold text-green-900 mb-2",children:"Information importante :"}),(0,i.jsx)("p",{className:"text-sm text-green-800",children:"Aucun montant n'a \xe9t\xe9 d\xe9bit\xe9 de votre compte. Vous pouvez r\xe9essayer le paiement \xe0 tout moment sans aucun frais suppl\xe9mentaire."})]}),(0,i.jsxs)("div",{className:"mt-8 pt-6 border-t border-gray-200",children:[(0,i.jsx)("p",{className:"text-sm text-gray-500 mb-2",children:"Besoin d'aide ? Contactez notre support :"}),(0,i.jsxs)("div",{className:"flex justify-center space-x-4 text-sm",children:[(0,i.jsx)("a",{href:"mailto:support@campusfinance.com",className:"text-primary-600 hover:text-primary-700",children:"support@campusfinance.com"}),(0,i.jsx)("span",{className:"text-gray-400",children:"|"}),(0,i.jsx)("a",{href:"tel:+2250700000000",className:"text-primary-600 hover:text-primary-700",children:"+225 07 00 00 00 00"})]})]})]})})})]})},Ox=(0,pt.A)("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]),Lx=()=>{var e,t,s;const{user:r,logout:a}=ut(),o=(0,Ge.Zp)(),{notifications:l,markAsRead:c}=yt(),[u,h]=(0,n.useState)(!1),[m,p]=(0,n.useState)(!1),[,f]=(0,n.useState)(null),[g,x]=(0,n.useState)(null),[v]=(0,n.useState)(!1),b=(0,n.useRef)(null),[y,j]=(0,n.useState)({firstName:(null===r||void 0===r?void 0:r.first_name)||(null===r||void 0===r||null===(e=r.user_metadata)||void 0===e?void 0:e.first_name)||"",lastName:(null===r||void 0===r?void 0:r.last_name)||(null===r||void 0===r||null===(t=r.user_metadata)||void 0===t?void 0:t.last_name)||"",email:(null===r||void 0===r?void 0:r.email)||"",phone:(null===r||void 0===r?void 0:r.phone_number)||(null===r||void 0===r||null===(s=r.user_metadata)||void 0===s?void 0:s.phone_number)||""});return r?(0,i.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-primary-50 via-accent-50 to-secondary-50",children:[(0,i.jsx)("div",{className:"bg-white/80 backdrop-blur-sm border-b border-white/20 sticky top-0 z-10",children:(0,i.jsx)("div",{className:"max-w-7xl mx-auto px-4 py-4",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,i.jsx)("button",{onClick:()=>o("/menu"),className:"text-gray-600 hover:text-gray-900 transition-colors",children:"\u2190 Retour au menu"}),(0,i.jsx)("h1",{className:"text-2xl font-bold text-gray-900 font-montserrat",children:"Mon Profil"})]}),(0,i.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,i.jsx)(Op,{notifications:l,onMarkAsRead:c}),(0,i.jsxs)(Ef,{onClick:async()=>{try{await a(),o("/login")}catch(e){console.error("Erreur lors de la d\xe9connexion:",e)}},variant:"outline",className:"flex items-center space-x-2 text-red-600 border-red-200 hover:bg-red-50",children:[(0,i.jsx)(pi,{size:16}),(0,i.jsx)("span",{children:"D\xe9connexion"})]})]})]})})}),(0,i.jsx)("div",{className:"max-w-7xl mx-auto px-4 py-8",children:(0,i.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,i.jsx)("div",{className:"lg:col-span-2 space-y-6",children:(0,i.jsxs)(gx,{className:"bg-white/90 backdrop-blur-sm border-white/20",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,i.jsx)("h2",{className:"text-2xl font-bold text-gray-900 font-montserrat",children:"Informations personnelles"}),u?(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,i.jsxs)(Ef,{onClick:async()=>{p(!0);try{console.log("[PROFILE] Sauvegarde du profil en cours...");try{const e=JSON.parse(localStorage.getItem("ab_user_cache")||"{}"),t=(0,d.A)((0,d.A)({},e),{},{first_name:y.firstName,last_name:y.lastName,email:y.email});localStorage.setItem("ab_user_cache",JSON.stringify(t)),console.log("[PROFILE] \u2705 Cache local mis \xe0 jour")}catch(e){console.warn("[PROFILE] Erreur lors de la mise \xe0 jour du cache:",e)}h(!1),console.log("[PROFILE] \u2705 Profil mis \xe0 jour avec succ\xe8s")}catch(t){console.error("[PROFILE] \u274c Erreur exceptionnelle:",t)}finally{p(!1)}},disabled:m,className:"flex items-center space-x-2 bg-green-600 hover:bg-green-700",children:[(0,i.jsx)(cx,{size:16}),(0,i.jsx)("span",{children:m?"Sauvegarde...":"Sauvegarder"})]}),(0,i.jsxs)(Ef,{onClick:()=>{var e,t,s;j({firstName:(null===r||void 0===r?void 0:r.first_name)||(null===r||void 0===r||null===(e=r.user_metadata)||void 0===e?void 0:e.first_name)||"",lastName:(null===r||void 0===r?void 0:r.last_name)||(null===r||void 0===r||null===(t=r.user_metadata)||void 0===t?void 0:t.last_name)||"",email:(null===r||void 0===r?void 0:r.email)||"",phone:(null===r||void 0===r?void 0:r.phone_number)||(null===r||void 0===r||null===(s=r.user_metadata)||void 0===s?void 0:s.phone_number)||""}),h(!1)},variant:"outline",className:"flex items-center space-x-2",children:[(0,i.jsx)(xt,{size:16}),(0,i.jsx)("span",{children:"Annuler"})]})]}):(0,i.jsxs)(Ef,{onClick:()=>{h(!0)},className:"flex items-center space-x-2 bg-primary-600 hover:bg-primary-700",children:[(0,i.jsx)(Ox,{size:16}),(0,i.jsx)("span",{children:"Modifier"})]})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Pr\xe9nom"}),(0,i.jsx)(Pf,{type:"text",value:y.firstName,onChange:e=>j(t=>(0,d.A)((0,d.A)({},t),{},{firstName:e.target.value})),disabled:!u,className:"w-full"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nom"}),(0,i.jsx)(Pf,{type:"text",value:y.lastName,onChange:e=>j(t=>(0,d.A)((0,d.A)({},t),{},{lastName:e.target.value})),disabled:!u,className:"w-full"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),(0,i.jsx)(Pf,{type:"email",value:y.email,onChange:e=>j(t=>(0,d.A)((0,d.A)({},t),{},{email:e.target.value})),disabled:!u,className:"w-full"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"T\xe9l\xe9phone"}),(0,i.jsx)(Pf,{type:"tel",value:y.phone,onChange:e=>j(t=>(0,d.A)((0,d.A)({},t),{},{phone:e.target.value})),disabled:!u,className:"w-full"})]})]})]})}),(0,i.jsx)("div",{className:"space-y-4",children:(0,i.jsx)("div",{children:(0,i.jsx)(gx,{className:"bg-white/90 backdrop-blur-sm border-white/20",children:(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsxs)("div",{className:"relative mx-auto mb-6",children:[(0,i.jsx)("input",{ref:b,type:"file",accept:"image/*",onChange:e=>{const t=e.target.files[0];if(t){f(t);const e=new FileReader;e.onload=e=>{x(e.target.result)},e.readAsDataURL(t)}},className:"hidden"}),(0,i.jsxs)("div",{className:"relative mx-auto w-28 h-28",children:[(0,i.jsx)("div",{className:"absolute inset-0 rounded-full bg-gradient-to-r from-blue-500 via-indigo-500 to-purple-500 p-1"}),(0,i.jsxs)("div",{className:"w-full h-full bg-gradient-to-br from-blue-400 via-indigo-500 to-purple-600 rounded-full flex items-center justify-center shadow-2xl overflow-hidden relative",children:[g?(0,i.jsx)("img",{src:g,alt:"Avatar",className:"w-full h-full object-cover relative z-10"}):(0,i.jsxs)("span",{className:"text-white text-4xl font-bold relative z-10",children:[y.firstName.charAt(0),y.lastName.charAt(0)]}),v&&(0,i.jsx)("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center rounded-full z-20",children:(0,i.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-3 border-white border-t-transparent"})}),(0,i.jsx)("button",{onClick:()=>{var e;null===(e=b.current)||void 0===e||e.click()},className:"absolute bottom-0 right-0 w-8 h-8 bg-white rounded-full shadow-lg flex items-center justify-center z-30 hover:bg-gray-100 transition-colors duration-200",children:(0,i.jsx)(Lf,{size:16,className:"text-gray-600"})}),g&&(0,i.jsx)("button",{onClick:()=>{f(null),x(null),b.current&&(b.current.value="")},className:"absolute top-0 right-0 w-8 h-8 bg-red-500 rounded-full shadow-lg flex items-center justify-center z-30 hover:bg-red-600 transition-colors duration-200",children:(0,i.jsx)(Sp,{size:16,className:"text-white"})})]})]})]}),(0,i.jsxs)("h3",{className:"text-2xl font-bold text-gray-900 font-montserrat mb-3 bg-gradient-to-r from-blue-600 via-indigo-600 to-purple-600 bg-clip-text text-transparent",children:[y.firstName," ",y.lastName]}),(0,i.jsx)("div",{className:"flex items-center justify-center space-x-2 text-sm text-gray-500",children:(0,i.jsx)("span",{className:"font-medium capitalize",children:r.role})})]})})})})]})})]}):(0,i.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-primary-50 via-accent-50 to-secondary-50 flex items-center justify-center",children:(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-primary-600 mx-auto mb-4"}),(0,i.jsx)("p",{className:"text-gray-600",children:"Chargement du profil..."})]})})},Mx=()=>{const e=(0,Ge.Zp)(),[,t]=(0,n.useState)({name:"Elise HASSI",email:"elise.hassi@example.com",role:"client",avatar:null}),s=[{icon:(0,i.jsx)(Fg,{size:24}),title:"AB \xc9pargne",subtitle:"\xc9pargne et investissement",description:"D\xe9couvrez nos solutions d'\xe9pargne et d'investissement personnalis\xe9es pour faire fructifier votre capital",action:()=>e("/ab-epargne"),color:"from-green-500 to-emerald-600",bgColor:"bg-gradient-to-br from-green-50 to-emerald-100",iconBg:"bg-gradient-to-r from-green-500 to-emerald-600"},{icon:(0,i.jsx)(Vp,{size:24}),title:"AB Logement",subtitle:"Solutions immobili\xe8res",description:"Acc\xe9dez \xe0 nos services de financement immobilier et de gestion locative personnalis\xe9s",action:()=>e("/ab-logement"),color:"from-blue-500 to-indigo-600",bgColor:"bg-gradient-to-br from-blue-50 to-indigo-100",iconBg:"bg-gradient-to-r from-blue-500 to-indigo-600"},{icon:(0,i.jsx)(Vg.A,{size:24}),title:"Coaching et Finance Entrepreneuriale",subtitle:"Accompagnement business",description:"D\xe9veloppez votre entreprise avec notre expertise en finance et notre accompagnement personnalis\xe9",action:()=>e("/coaching-finance"),color:"from-purple-500 to-violet-600",bgColor:"bg-gradient-to-br from-purple-50 to-violet-100",iconBg:"bg-gradient-to-r from-purple-500 to-violet-600"},{icon:(0,i.jsx)(Ug,{size:24}),title:"Score de Fid\xe9lit\xe9",subtitle:"Programme de r\xe9compenses",description:"D\xe9couvrez vos avantages et r\xe9compenses pour votre fid\xe9lit\xe9 \xe0 nos services",action:()=>e("/loyalty-score"),color:"from-yellow-500 to-orange-600",bgColor:"bg-gradient-to-br from-yellow-50 to-orange-100",iconBg:"bg-gradient-to-r from-yellow-500 to-orange-600"}];return(0,i.jsx)("div",{className:"bg-gradient-to-br from-primary-50 via-accent-50 to-secondary-50 pt-0",children:(0,i.jsxs)("div",{className:"relative overflow-hidden",children:[(0,i.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-500 via-purple-600 to-indigo-600 opacity-15"}),(0,i.jsx)("div",{className:"relative px-4 lg:px-8 py-8 lg:py-12 backdrop-blur-sm",children:(0,i.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,i.jsx)("div",{className:"text-center mb-8 lg:mb-12",children:(0,i.jsxs)("h1",{className:"text-4xl lg:text-6xl font-bold text-secondary-900 font-montserrat mb-4",children:["Menu"," ",(0,i.jsx)("span",{className:"bg-gradient-to-r from-blue-600 via-purple-600 to-indigo-600 bg-clip-text text-transparent",children:"Principal"})]})}),(0,i.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:s.map((e,t)=>(0,i.jsx)("div",{className:"group cursor-pointer",onClick:e.action,children:(0,i.jsxs)("div",{className:"".concat(e.bgColor," p-4 rounded-2xl border border-white/50 shadow-lg hover:shadow-xl transition-all duration-300 relative overflow-hidden"),children:[(0,i.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-700"}),(0,i.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,i.jsxs)("div",{className:"flex-1",children:[(0,i.jsx)("h3",{className:"text-lg font-bold bg-gradient-to-r ".concat(e.color," bg-clip-text text-transparent mb-1"),children:e.title}),(0,i.jsx)("p",{className:"text-xs text-gray-600 font-medium",children:e.subtitle})]}),(0,i.jsx)("div",{className:"p-2 rounded-xl ".concat(e.iconBg," text-white shadow-lg"),children:e.icon})]}),(0,i.jsx)("p",{className:"text-xs text-gray-600 leading-relaxed mb-3",children:e.description}),(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsx)("div",{className:"w-6 h-6 rounded-full ".concat(e.iconBg," flex items-center justify-center"),children:(0,i.jsx)(fi,{size:12,className:"text-white"})}),(0,i.jsx)("div",{className:"text-xs font-medium bg-gradient-to-r ".concat(e.color," bg-clip-text text-transparent"),children:"D\xe9couvrir"})]})]})},t))})]})})]})})},zx=()=>{const e=(0,Ge.Zp)();return(0,i.jsx)("div",{className:"bg-gradient-to-br from-blue-50 via-indigo-50 to-blue-100 min-h-screen",children:(0,i.jsxs)("div",{className:"relative overflow-hidden",children:[(0,i.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-500 via-indigo-600 to-blue-600 opacity-10"}),(0,i.jsx)("div",{className:"relative px-4 lg:px-8 py-6",children:(0,i.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,i.jsxs)(yp.button,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5},onClick:()=>e("/menu"),className:"inline-flex items-center space-x-2 px-4 py-2 bg-white/80 backdrop-blur-sm rounded-full border border-white/50 shadow-lg hover:bg-white/90 transition-all duration-300 mb-8",children:[(0,i.jsx)(Mf.A,{size:16,className:"text-blue-600"}),(0,i.jsx)("span",{className:"text-sm font-medium text-blue-700",children:"Retour au menu"})]}),(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)(yp.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.8,delay:.2},className:"mb-8",children:(0,i.jsx)("div",{className:"inline-flex p-8 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-full text-white shadow-2xl",children:(0,i.jsx)(Vp,{size:80})})}),(0,i.jsxs)(yp.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.3},className:"text-4xl lg:text-6xl font-bold text-gray-900 mb-6",children:["AB"," ",(0,i.jsx)("span",{className:"bg-gradient-to-r from-blue-600 via-indigo-600 to-blue-600 bg-clip-text text-transparent",children:"Logement"})]}),(0,i.jsx)(yp.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.4},className:"mb-8",children:(0,i.jsxs)("div",{className:"inline-flex items-center space-x-3 px-6 py-3 bg-yellow-100 border border-yellow-300 rounded-full",children:[(0,i.jsx)(kp,{size:20,className:"text-yellow-600"}),(0,i.jsx)("span",{className:"text-lg font-semibold text-yellow-800",children:"Bient\xf4t disponible"})]})}),(0,i.jsxs)(yp.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.5},className:"text-xl lg:text-2xl text-gray-600 mb-12 font-light max-w-2xl mx-auto",children:["Nos solutions immobili\xe8res et de financement logement sont en cours de d\xe9veloppement.",(0,i.jsx)("br",{}),(0,i.jsx)("span",{className:"text-blue-600 font-medium",children:"Revenez bient\xf4t !"})]}),(0,i.jsx)(yp.button,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.6},onClick:()=>e("/menu"),className:"bg-gradient-to-r from-blue-500 to-indigo-600 text-white px-8 py-4 rounded-2xl shadow-xl hover:shadow-2xl transition-all duration-300 hover:scale-105",children:"Retour au menu principal"})]})]})})]})})},Fx=(0,pt.A)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),Ux=(0,pt.A)("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]),Bx=e=>{let{planConfig:t}=e;const s=(0,n.useRef)(null),{user:r}=ut(),[a,o]=(0,n.useState)(!1),[l,c]=(0,n.useState)(!0),[d,u]=(0,n.useState)(null);(0,n.useEffect)(()=>{if(window.FedaPay)return console.log("[FedaPay] \u2705 D\xe9j\xe0 charg\xe9"),o(!0),void c(!1);if(document.querySelector('script[src*="fedapay.com/checkout.js"]')){console.log("[FedaPay] \u23f3 Script d\xe9j\xe0 en cours de chargement, attente...");const e=setInterval(()=>{window.FedaPay&&(console.log("[FedaPay] \u2705 Script charg\xe9 (d\xe9tection diff\xe9r\xe9e)"),o(!0),c(!1),clearInterval(e))},100);return setTimeout(()=>{clearInterval(e),window.FedaPay||(console.error("[FedaPay] \u274c Timeout - Script non charg\xe9 apr\xe8s 10 secondes"),u("Erreur de chargement de FedaPay. Veuillez actualiser la page."),c(!1))},1e4),()=>clearInterval(e)}console.log("[FedaPay] \ud83d\udce5 Chargement du script..."),c(!0),u(null);const e=document.createElement("script");return e.src="https://cdn.fedapay.com/checkout.js?v=1.1.7",e.async=!0,e.onload=()=>{console.log("[FedaPay] \u2705 Script charg\xe9 avec succ\xe8s"),window.FedaPay?(o(!0),c(!1)):setTimeout(()=>{window.FedaPay?(o(!0),c(!1)):(console.error("[FedaPay] \u274c Script charg\xe9 mais window.FedaPay non disponible"),u("Erreur d'initialisation de FedaPay. Veuillez actualiser la page."),c(!1))},500)},e.onerror=()=>{console.error("[FedaPay] \u274c Erreur lors du chargement du script"),u("Impossible de charger FedaPay. V\xe9rifiez votre connexion internet."),c(!1)},document.body.appendChild(e),()=>{if(e.parentNode){document.querySelectorAll('script[src*="fedapay.com/checkout.js"]').length}}},[]);const h=()=>{console.log("[FedaPay] \ud83d\udd0d D\xe9marrage du polling pour d\xe9tecter la cr\xe9ation du plan...");let e=0;const t=async()=>{try{e++,console.log("[FedaPay] \ud83d\udd0d Tentative ".concat(e,"/").concat(60," - V\xe9rification du plan..."));const s="http://localhost:5000",n=await fetch("".concat(s,"/api/savings/plan-status?userId=").concat(null===r||void 0===r?void 0:r.id)),a=await n.json();if(a.success&&a.plan)return console.log("[FedaPay] \u2705 Plan trouv\xe9 ! Redirection vers RetourEpargne..."),void(window.location.href="/ab-epargne/retour?planId=".concat(a.plan.id,"&status=approved"));if(e>=60)return console.log("[FedaPay] \u23f0 Timeout - Aucun plan trouv\xe9 apr\xe8s 2 minutes"),void alert("Le plan n'a pas \xe9t\xe9 cr\xe9\xe9 dans les temps. Veuillez r\xe9essayer.");setTimeout(t,2e3)}catch(d){if(console.error("[FedaPay] \u274c Erreur lors du polling:",d),e++,e>=60)return void alert("Erreur de connexion. Veuillez r\xe9essayer.");setTimeout(t,2e3)}};setTimeout(t,5e3)};return d?(0,i.jsxs)("div",{className:"w-full p-4 bg-red-50 border border-red-200 rounded-xl",children:[(0,i.jsx)("p",{className:"text-red-600 text-sm font-medium mb-2",children:d}),(0,i.jsx)("button",{onClick:()=>window.location.reload(),className:"w-full bg-red-500 hover:bg-red-600 text-white py-2 px-4 rounded-lg font-semibold transition-colors",children:"Actualiser la page"})]}):l?(0,i.jsxs)("button",{disabled:!0,className:"w-full bg-gray-400 text-white py-3 rounded-lg font-semibold text-base cursor-not-allowed flex items-center justify-center gap-2",children:[(0,i.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),"Chargement de FedaPay..."]}):(0,i.jsx)("button",{ref:s,onClick:()=>a?window.FedaPay?void(r?t?(console.log("[FedaPay] \ud83d\ude80 Initialisation du paiement..."),h(),window.FedaPay.init(s.current,{public_key:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_BACKEND_URL:"http://localhost:5000",REACT_APP_FIREBASE_VAPID_KEY:"BJfHsbhtQhWA-laTTi9Ffq36xHSO8ylv-T4aU5Db6xlN5xhGqXBKtDtzcAi8qdiXimz6S-M2PxjgxNNXFftfGvQ",REACT_APP_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRsZ2ZoZ2NjenFlZmJ1aGN5YXpoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ2MDM3NjQsImV4cCI6MjA3MDE3OTc2NH0.ILqv7fUAP8KAr0GzkqeqaRqDcbKcPhcHtIQR7PYFIgY",REACT_APP_SUPABASE_URL:"https://dlgfhgcczqefbuhcyazh.supabase.co"}.REACT_APP_FEDAPAY_PUBLIC_KEY||"pk_live_u0sqkP5Irt1BvqvnU5gh4FOC",transaction:{amount:1e3,description:"Cr\xe9ation plan \xe9pargne - ".concat(null===r||void 0===r?void 0:r.email),currency:{iso:"XOF"},callback_url:"".concat(window.location.origin,"/ab-epargne/retour"),custom_metadata:{paymentType:"savings_plan_creation",user_id:null===r||void 0===r?void 0:r.id,fixed_amount:t.montant,frequency_days:t.frequence,duration_months:t.nombreMois}},customer:{email:null===r||void 0===r?void 0:r.email,firstname:(null===r||void 0===r?void 0:r.first_name)||"Client",lastname:(null===r||void 0===r?void 0:r.last_name)||"Campus",phone_number:{number:(null===r||void 0===r?void 0:r.phone)||"97000000",country:"BJ"}},modal:!0})):alert("Configuration du plan manquante."):alert("Vous devez \xeatre connect\xe9 pour effectuer un paiement.")):(console.error("[FedaPay] \u274c window.FedaPay n'est pas disponible"),void alert("Erreur d'initialisation de FedaPay. Veuillez actualiser la page.")):(console.error("[FedaPay] \u274c FedaPay n'est pas charg\xe9 (fedaPayLoaded = false)"),void alert("FedaPay est en cours de chargement. Veuillez patienter quelques secondes.")),disabled:!a,className:"w-full py-3 rounded-lg font-semibold text-base transition-all ".concat(a?"bg-blue-600 hover:bg-blue-700 text-white shadow-md hover:shadow-lg":"bg-gray-400 text-white cursor-not-allowed"),children:a?"Payer 1000 F":"Chargement..."})},qx=()=>{const e=(0,Ge.Zp)(),{user:t}=ut(),[s,r]=(0,n.useState)("config"),[a,o]=(0,n.useState)({montant:500,frequence:"5",nombreMois:6}),[l,c]=(0,n.useState)(!1),[u,h]=(0,n.useState)(!1);(0,n.useEffect)(()=>{(()=>{const t=new URLSearchParams(window.location.search),s=t.get("reference"),n=t.get("status");if(s&&"approved"===n)console.log("[AB_EPARGNE] \ud83d\udd04 Paiement d\xe9tect\xe9, redirection vers RetourEpargne"),window.history.replaceState({},document.title,window.location.pathname),e("/ab-epargne/retour?reference=".concat(s,"&status=approved"))})()},[e]);const m=()=>{c(!0)},p=()=>{e("/dashboard")};(0,n.useEffect)(()=>{(async()=>{if(!t)return console.log("[AB_EPARGNE] \u23f3 Pas d'utilisateur connect\xe9"),void h(!1);try{h(!0),console.log("[AB_EPARGNE] \ud83d\udd0d Recherche du plan actif pour user:",t.id);const s=Ep.f,n="".concat(s,"/api/savings/plan-status?userId=").concat(t.id);console.log("[AB_EPARGNE] \ud83c\udf10 URL API:",n);const r=await fetch(n);console.log("[AB_EPARGNE] \ud83d\udce1 Status r\xe9ponse:",r.status);const a=await r.json();if(console.log("[AB_EPARGNE] \ud83d\udce1 R\xe9ponse API compl\xe8te:",a),a.success&&a.plan){console.log("[AB_EPARGNE] \u2705 Plan actif trouv\xe9:",a.plan);const t=a.plan.personalized_at&&null!==a.plan.personalized_at&&a.plan.plan_name&&""!==a.plan.plan_name.trim()&&"Plan \xc9pargne"!==a.plan.plan_name.trim()&&a.plan.goal;return console.log("[AB_EPARGNE] \ud83d\udd0d V\xe9rification personnalisation:",{personalized_at:a.plan.personalized_at,plan_name:a.plan.plan_name,goal:a.plan.goal,isPersonalized:t}),t?(console.log("[AB_EPARGNE] \u2705 Plan personnalis\xe9, redirection vers dashboard"),void e("/ab-epargne/plan/".concat(a.plan.id),{replace:!0})):(console.log("[AB_EPARGNE] \u26a0\ufe0f Plan non personnalis\xe9, redirection OBLIGATOIRE vers personnalisation"),void e("/ab-epargne/personalize/".concat(a.plan.id),{replace:!0}))}console.log("[AB_EPARGNE] \u2139\ufe0f Aucun plan actif trouv\xe9, affichage de la config")}catch(s){console.error("[AB_EPARGNE] \u274c Erreur:",s)}finally{h(!1)}})()},[t,e]);const f=()=>(0,i.jsxs)("div",{className:"min-h-screen bg-gray-50 sm:bg-gray-100",children:[(0,i.jsx)("div",{className:"bg-gray-100 sm:bg-white rounded-b-2xl sm:rounded-none mb-4 sm:mb-6",children:(0,i.jsxs)("div",{className:"flex items-center justify-between px-4 py-4 sm:px-6 sm:py-4",children:[(0,i.jsx)("button",{onClick:p,className:"w-10 h-10 rounded-full bg-white sm:bg-gray-50 flex items-center justify-center shadow-sm hover:bg-gray-50 transition-colors",children:(0,i.jsx)(Fx,{className:"w-5 h-5 text-gray-700"})}),(0,i.jsx)("h1",{className:"text-base sm:text-lg font-semibold text-gray-900",children:"Configuration du Plan"}),(0,i.jsx)("div",{className:"w-10"})," "]})}),(0,i.jsxs)("div",{className:"text-center mb-6 sm:mb-8 px-4",children:[(0,i.jsx)("p",{className:"text-sm text-gray-500 mb-2",children:"Total amount"}),(0,i.jsx)("p",{className:"text-4xl sm:text-5xl font-bold text-blue-600",children:"1 000 F CFA"})]}),(0,i.jsxs)("div",{className:"bg-white rounded-t-3xl sm:rounded-2xl shadow-lg sm:shadow-xl p-6 sm:p-8 mx-auto max-w-md sm:max-w-lg",children:[(0,i.jsxs)("div",{className:"mb-6",children:[(0,i.jsxs)("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:["Montant \xe0 d\xe9poser ",(0,i.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,i.jsxs)("div",{className:"flex items-center bg-gray-50 rounded-xl p-4 border border-blue-200",children:[(0,i.jsx)("button",{onClick:()=>o((0,d.A)((0,d.A)({},a),{},{montant:Math.max(500,a.montant-100)})),className:"w-10 h-10 bg-white rounded-full shadow-sm flex items-center justify-center hover:bg-gray-50 transition-colors",children:(0,i.jsx)(Ux,{className:"w-4 h-4 text-gray-600"})}),(0,i.jsxs)("div",{className:"flex-1 text-center",children:[(0,i.jsx)("input",{type:"number",min:"500",step:"100",value:a.montant,onChange:e=>{const t=parseInt(e.target.value)||500;o((0,d.A)((0,d.A)({},a),{},{montant:Math.max(500,t)}))},onFocus:e=>{e.target.select()},onClick:e=>{e.target.select()},className:"w-full text-xl font-semibold text-gray-900 text-center bg-transparent border-none outline-none focus:outline-none cursor-pointer",style:{width:"".concat(Math.max(a.montant.toString().length+2,6),"ch")},placeholder:"500"}),(0,i.jsx)("span",{className:"text-gray-600 ml-1",children:"F"})]}),(0,i.jsx)("button",{onClick:()=>o((0,d.A)((0,d.A)({},a),{},{montant:a.montant+100})),className:"w-10 h-10 bg-white rounded-full shadow-sm flex items-center justify-center hover:bg-gray-50 transition-colors",children:(0,i.jsx)(Bg,{className:"w-4 h-4 text-gray-600"})})]}),(0,i.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Minimum 500 F"})]}),(0,i.jsxs)("div",{className:"mb-6",children:[(0,i.jsxs)("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:["Fr\xe9quence de d\xe9p\xf4t ",(0,i.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,i.jsxs)("div",{className:"flex gap-3",children:[(0,i.jsx)("button",{onClick:()=>o((0,d.A)((0,d.A)({},a),{},{frequence:"5"})),className:"flex-1 py-3 px-4 rounded-lg font-medium text-sm transition-all ".concat("5"===a.frequence?"bg-blue-600 text-white shadow-md":"bg-gray-50 text-gray-700 border border-gray-200 hover:border-blue-300"),children:"Tous les 5 jours"}),(0,i.jsx)("button",{onClick:()=>o((0,d.A)((0,d.A)({},a),{},{frequence:"10"})),className:"flex-1 py-3 px-4 rounded-lg font-medium text-sm transition-all ".concat("10"===a.frequence?"bg-blue-600 text-white shadow-md":"bg-gray-50 text-gray-700 border border-gray-200 hover:border-blue-300"),children:"Tous les 10 jours"})]})]}),(0,i.jsxs)("div",{className:"mb-6",children:[(0,i.jsxs)("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:["Dur\xe9e (mois) ",(0,i.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,i.jsxs)("div",{className:"flex items-center bg-gray-50 rounded-xl p-4 border border-blue-200",children:[(0,i.jsx)("button",{onClick:()=>o((0,d.A)((0,d.A)({},a),{},{nombreMois:Math.max(1,a.nombreMois-1)})),className:"w-10 h-10 bg-white rounded-full shadow-sm flex items-center justify-center hover:bg-gray-50 transition-colors",children:(0,i.jsx)(Ux,{className:"w-4 h-4 text-gray-600"})}),(0,i.jsxs)("div",{className:"flex-1 text-center",children:[(0,i.jsx)("span",{className:"text-xl font-semibold text-gray-900",children:a.nombreMois}),(0,i.jsx)("span",{className:"text-gray-600 ml-1",children:"mois"})]}),(0,i.jsx)("button",{onClick:()=>o((0,d.A)((0,d.A)({},a),{},{nombreMois:a.nombreMois+1})),className:"w-10 h-10 bg-white rounded-full shadow-sm flex items-center justify-center hover:bg-gray-50 transition-colors",children:(0,i.jsx)(Bg,{className:"w-4 h-4 text-gray-600"})})]})]}),(0,i.jsxs)("div",{className:"bg-gray-50 rounded-xl p-4 mb-6 border border-gray-200",children:[(0,i.jsx)("h3",{className:"font-semibold text-gray-900 mb-3 text-sm",children:"R\xe9sum\xe9 de votre plan"}),(0,i.jsxs)("div",{className:"text-xs text-gray-600 space-y-2",children:[(0,i.jsxs)("p",{children:["\u2022 D\xe9p\xf4t : ",a.montant.toLocaleString()," F tous les ",a.frequence," jours"]}),(0,i.jsxs)("p",{children:["\u2022 Dur\xe9e : ",a.nombreMois," mois"]}),(0,i.jsx)("p",{children:"\u2022 Taux d'int\xe9r\xeats : 5% par mois"}),(0,i.jsxs)("p",{children:["\u2022 Total d\xe9pos\xe9 : ",(a.montant*(30/parseInt(a.frequence))*a.nombreMois).toLocaleString()," F"]}),(0,i.jsxs)("p",{children:["\u2022 Int\xe9r\xeats estim\xe9s : ",Math.round(a.montant*(30/parseInt(a.frequence))*a.nombreMois*.05*a.nombreMois).toLocaleString()," F"]}),(0,i.jsxs)("p",{className:"font-semibold text-blue-600 pt-2 border-t border-gray-200",children:["\u2022 Total avec int\xe9r\xeats : ",Math.round(a.montant*(30/parseInt(a.frequence))*a.nombreMois*(1+.05*a.nombreMois)).toLocaleString()," F"]})]})]}),(0,i.jsx)("button",{onClick:m,className:"w-full bg-blue-600 hover:bg-blue-700 text-white py-4 rounded-lg font-semibold text-base shadow-md hover:shadow-lg transition-all duration-200 mb-4",children:"Pay now"}),(0,i.jsx)("p",{className:"text-center mb-6",children:(0,i.jsx)("button",{type:"button",onClick:()=>e("/ab-epargne/historique"),className:"text-sm text-blue-600 hover:underline",children:"Voir mon historique des plans termin\xe9s"})}),(0,i.jsxs)("div",{className:"text-center pt-4 border-t border-gray-200",children:[(0,i.jsx)("p",{className:"text-xs text-gray-500 mb-2",children:"Powered by"}),(0,i.jsxs)("div",{className:"flex items-center justify-center gap-2 mb-2",children:[(0,i.jsx)("div",{className:"w-6 h-6 bg-gradient-to-r from-blue-600 to-indigo-600 rounded flex items-center justify-center",children:(0,i.jsx)(Qp,{className:"w-4 h-4 text-white"})}),(0,i.jsx)("span",{className:"text-sm font-semibold text-blue-600",children:"AB Campus Finance"})]}),(0,i.jsx)("p",{className:"text-xs text-gray-400 mt-2",children:"Offer your customers a tailor-made payment experience"})]})]}),l&&(0,i.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,i.jsxs)("div",{className:"bg-white rounded-2xl sm:rounded-3xl p-6 max-w-sm w-full shadow-2xl",children:[(0,i.jsxs)("div",{className:"text-center mb-6",children:[(0,i.jsx)(Hp.A,{className:"w-12 h-12 text-blue-600 mx-auto mb-3"}),(0,i.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Paiement requis"}),(0,i.jsx)("p",{className:"text-gray-600 text-sm",children:"Frais de cr\xe9ation du plan d'\xe9pargne"})]}),(0,i.jsx)("div",{className:"bg-gray-50 rounded-xl p-4 mb-6 text-center border border-gray-200",children:(0,i.jsx)("span",{className:"text-2xl font-bold text-gray-900",children:"1 000 F"})}),(0,i.jsxs)("div",{className:"flex gap-3",children:[(0,i.jsx)("button",{onClick:()=>c(!1),className:"flex-1 py-3 text-gray-600 font-medium hover:text-gray-800 transition-colors",children:"Annuler"}),(0,i.jsx)("div",{className:"flex-1",children:(0,i.jsx)(Bx,{planConfig:a})})]})]})})]}),g=()=>(0,i.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-4",children:[(0,i.jsx)("div",{className:"flex items-center justify-between mb-8 pt-4",children:(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("button",{onClick:p,className:"flex items-center",children:(0,i.jsx)(Fx,{className:"w-6 h-6 text-gray-600"})}),(0,i.jsx)("h1",{className:"text-xl font-semibold text-gray-800 ml-4",children:"Mon Plan d'\xc9pargne"})]})}),(0,i.jsxs)("div",{className:"bg-gradient-to-r from-blue-500 to-indigo-600 rounded-2xl p-6 mb-6 text-white shadow-xl",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-blue-100 text-sm",children:"Solde disponible"}),(0,i.jsx)("p",{className:"text-3xl font-bold",children:"0 F"})]}),(0,i.jsx)("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center",children:(0,i.jsx)(Qp,{className:"w-6 h-6"})})]}),(0,i.jsxs)("div",{className:"flex justify-between text-sm text-blue-100",children:[(0,i.jsx)("span",{children:"Plan actif depuis aujourd'hui"}),(0,i.jsxs)("span",{children:["Prochain d\xe9p\xf4t : ",a.frequence," jours"]})]})]}),(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[(0,i.jsxs)("div",{className:"bg-white rounded-xl p-4 shadow-md",children:[(0,i.jsx)("p",{className:"text-gray-600 text-sm",children:"D\xe9p\xf4t pr\xe9vu"}),(0,i.jsxs)("p",{className:"text-lg font-bold text-gray-800",children:[a.montant.toLocaleString()," F"]})]}),(0,i.jsxs)("div",{className:"bg-white rounded-xl p-4 shadow-md",children:[(0,i.jsx)("p",{className:"text-gray-600 text-sm",children:"Dur\xe9e restante"}),(0,i.jsxs)("p",{className:"text-lg font-bold text-gray-800",children:[a.nombreMois," mois"]})]})]}),(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsxs)("button",{className:"w-full bg-gradient-to-r from-green-500 to-green-600 text-white py-4 rounded-xl font-semibold shadow-lg flex items-center justify-center",children:[(0,i.jsx)(Bg,{className:"w-5 h-5 mr-2"}),"Effectuer un D\xe9p\xf4t"]}),(0,i.jsxs)("button",{className:"w-full bg-gradient-to-r from-orange-500 to-orange-600 text-white py-4 rounded-xl font-semibold shadow-lg flex items-center justify-center",children:[(0,i.jsx)(Ux,{className:"w-5 h-5 mr-2"}),"Effectuer un Retrait"]})]}),(0,i.jsxs)("div",{className:"bg-white rounded-xl p-6 mt-6 shadow-md",children:[(0,i.jsx)("h3",{className:"font-semibold text-gray-800 mb-4",children:"D\xe9tails du plan"}),(0,i.jsxs)("div",{className:"space-y-3 text-sm",children:[(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsx)("span",{className:"text-gray-600",children:"Montant par d\xe9p\xf4t"}),(0,i.jsxs)("span",{className:"font-medium",children:[a.montant.toLocaleString()," F"]})]}),(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsx)("span",{className:"text-gray-600",children:"Fr\xe9quence"}),(0,i.jsxs)("span",{className:"font-medium",children:["Tous les ",a.frequence," jours"]})]}),(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsx)("span",{className:"text-gray-600",children:"Dur\xe9e totale"}),(0,i.jsxs)("span",{className:"font-medium",children:[a.nombreMois," mois"]})]}),(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsx)("span",{className:"text-gray-600",children:"Taux d'int\xe9r\xeats"}),(0,i.jsx)("span",{className:"font-medium text-green-600",children:"5% par mois"})]}),(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsx)("span",{className:"text-gray-600",children:"Total d\xe9pos\xe9"}),(0,i.jsxs)("span",{className:"font-medium",children:[(a.montant*(30/parseInt(a.frequence))*a.nombreMois).toLocaleString()," F"]})]}),(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsx)("span",{className:"text-gray-600",children:"Int\xe9r\xeats estim\xe9s"}),(0,i.jsxs)("span",{className:"font-medium text-green-600",children:[Math.round(a.montant*(30/parseInt(a.frequence))*a.nombreMois*.05*a.nombreMois).toLocaleString()," F"]})]}),(0,i.jsxs)("div",{className:"border-t pt-3 flex justify-between",children:[(0,i.jsx)("span",{className:"text-gray-600",children:"Objectif d'\xe9pargne"}),(0,i.jsxs)("span",{className:"font-semibold text-blue-600",children:[Math.round(a.montant*(30/parseInt(a.frequence))*a.nombreMois*(1+.05*a.nombreMois)).toLocaleString()," F"]})]})]})]})]});return(0,i.jsxs)("div",{className:"max-w-sm mx-auto bg-white min-h-screen relative",children:[u&&(0,i.jsxs)("div",{className:"absolute top-4 left-1/2 -translate-x-1/2 z-10 flex items-center gap-2 px-4 py-2 bg-white/95 shadow-lg rounded-full border border-gray-200",children:[(0,i.jsx)("div",{className:"w-5 h-5 border-2 border-blue-600 border-t-transparent rounded-full animate-spin"}),(0,i.jsx)("span",{className:"text-sm text-gray-600",children:"V\xe9rification du plan..."})]}),"config"===s?(0,i.jsx)(f,{}):(0,i.jsx)(g,{})]})},Vx=(0,pt.A)("CheckCircle2",[["path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",key:"14v8dr"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),Hx=()=>{const e=(0,Ge.Zp)(),{user:t}=ut(),[s,r]=(0,n.useState)([]),[a,o]=(0,n.useState)(!0);return(0,n.useEffect)(()=>{(async()=>{if(t)try{const e=await fetch("".concat(Ep.f,"/api/savings/history?userId=").concat(t.id)),s=await e.json();s.success&&Array.isArray(s.plans)&&r(s.plans)}catch(Nt){console.error("[EPARGNE_HISTORIQUE]",Nt)}finally{o(!1)}else o(!1)})()},[t]),(0,i.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,i.jsx)("div",{className:"bg-white rounded-b-2xl shadow-sm mb-4",children:(0,i.jsxs)("div",{className:"flex items-center justify-between px-4 py-4",children:[(0,i.jsx)("button",{onClick:()=>e("/ab-epargne"),className:"p-2 rounded-full hover:bg-gray-100",children:(0,i.jsx)(Fx,{className:"w-5 h-5 text-gray-700"})}),(0,i.jsx)("h1",{className:"text-lg font-semibold text-gray-900",children:"Historique \xe9pargne"}),(0,i.jsx)("div",{className:"w-9"})]})}),(0,i.jsxs)("div",{className:"px-4 pb-8",children:[(0,i.jsx)("p",{className:"text-sm text-gray-500 mb-4",children:"Plans termin\xe9s (objectif atteint et retrait effectu\xe9). Pour \xe9pargner \xe0 nouveau, cr\xe9ez un nouveau plan depuis la page AB \xc9pargne."}),a?(0,i.jsx)("div",{className:"text-center py-8 text-gray-500",children:"Chargement..."}):0===s.length?(0,i.jsxs)("div",{className:"bg-white rounded-2xl p-8 text-center shadow-sm",children:[(0,i.jsx)(Qp,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),(0,i.jsx)("p",{className:"text-gray-600",children:"Aucun plan termin\xe9 pour le moment."}),(0,i.jsx)("button",{onClick:()=>e("/ab-epargne"),className:"mt-4 text-blue-600 font-medium",children:"Cr\xe9er un plan d'\xe9pargne"})]}):(0,i.jsx)("ul",{className:"space-y-4",children:s.map(e=>(0,i.jsx)("li",{className:"bg-white rounded-2xl p-4 shadow-sm border border-gray-100",children:(0,i.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,i.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,i.jsx)(Vx,{className:"w-5 h-5 text-green-500 shrink-0"}),(0,i.jsx)("span",{className:"font-medium text-gray-900 truncate",children:e.plan_name||e.goal_label||"Plan termin\xe9"})]}),e.goal&&(0,i.jsxs)("p",{className:"text-sm text-gray-500 flex items-center gap-1",children:[(0,i.jsx)(hx.A,{className:"w-4 h-4"})," ",e.goal]}),(0,i.jsxs)("p",{className:"text-xs text-gray-400 mt-2 flex items-center gap-1",children:[(0,i.jsx)(Yg.A,{className:"w-3.5 h-3.5"}),"Termin\xe9 le ",e.updated_at?new Date(e.updated_at).toLocaleDateString("fr-FR"):"\u2013"]})]}),(0,i.jsxs)("div",{className:"text-right shrink-0",children:[(0,i.jsx)("p",{className:"text-lg font-semibold text-gray-900",children:(0,Dp.vv)(e.total_amount_target||e.current_balance||0)}),(0,i.jsx)("p",{className:"text-xs text-gray-500",children:"objectif atteint"})]})]})},e.id))})]})]})},Wx=()=>{const e=(0,Ge.Zp)(),t=(0,Ge.zy)(),{user:s}=ut(),[r,a]=(0,n.useState)("loading"),[o,l]=(0,n.useState)(null),[c,d]=(0,n.useState)(null),[u,h]=(0,n.useState)(0),[m,p]=(0,n.useState)(0),f=Ep.f;(0,n.useEffect)(()=>{const n=async()=>{try{const r=new URLSearchParams(t.search),i=r.get("planId"),o=r.get("reference"),c=r.get("status");if(!i&&!o||"approved"!==c)return d("Paiement non confirm\xe9"),void a("error");let m;console.log("[RETOUR_EPARGNE] \ud83d\udd0d Polling pour planId:",i,"ou reference:",o),m=i?"".concat(f,"/api/savings/plan-status?planId=").concat(i):o&&o.startsWith("temp_")?"".concat(f,"/api/savings/plan-status?userId=").concat(null===s||void 0===s?void 0:s.id):"".concat(f,"/api/savings/plan-status?reference=").concat(o);const g=await fetch(m),x=await g.json();if(console.log("[RETOUR_EPARGNE] \ud83d\udce1 R\xe9ponse API:",x),x.success&&x.plan){console.log("[RETOUR_EPARGNE] \u2705 Plan trouv\xe9"),l(x.plan),a("success");const t=x.plan.personalized_at&&null!==x.plan.personalized_at&&x.plan.plan_name&&""!==x.plan.plan_name.trim()&&"Plan \xc9pargne"!==x.plan.plan_name.trim()&&x.plan.goal;console.log("[RETOUR_EPARGNE] \ud83d\udd0d V\xe9rification personnalisation:",{personalized_at:x.plan.personalized_at,plan_name:x.plan.plan_name,goal:x.plan.goal,isPersonalized:t}),setTimeout(()=>{t?(console.log("[RETOUR_EPARGNE] \ud83d\ude80 Plan d\xe9j\xe0 personnalis\xe9, redirection vers PlanEpargne..."),e("/ab-epargne/plan/".concat(x.plan.id),{replace:!0})):(console.log("[RETOUR_EPARGNE] \ud83d\ude80 Plan non personnalis\xe9, redirection OBLIGATOIRE vers PersonalizePlan..."),e("/ab-epargne/personalize/".concat(x.plan.id),{replace:!0}))},2e3)}else{const e=u+1;if(console.log("[RETOUR_EPARGNE] \u23f3 Plan pas encore cr\xe9\xe9, tentative:",e),h(e),p(Math.min(e/30*100,100)),e>=30)return d("Le plan n'a pas \xe9t\xe9 cr\xe9\xe9 dans les temps. Veuillez contacter le support."),void a("error");setTimeout(n,1e4)}}catch(c){if(console.error("[RETOUR_EPARGNE] \u274c Erreur lors du polling:",c),h(e=>e+1),u>=30)return d("Erreur de connexion persistante. Veuillez contacter le support."),void a("error");setTimeout(n,1e4)}};n()},[t.search,e]);const g=()=>{a("loading"),d(null),h(0),window.location.reload()},x=()=>{e("/dashboard")};return"loading"===r?(0,i.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:(0,i.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8 max-w-md w-full text-center",children:[(0,i.jsxs)("div",{className:"mb-6",children:[(0,i.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 bg-green-100 rounded-full flex items-center justify-center",children:(0,i.jsxs)("svg",{className:"w-8 h-8 text-green-600 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[(0,i.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,i.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}),(0,i.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Paiement confirm\xe9 !"}),(0,i.jsx)("p",{className:"text-gray-600 mb-4",children:"Cr\xe9ation de votre plan d'\xe9pargne en cours..."}),(0,i.jsxs)("div",{className:"text-sm text-gray-500",children:["Tentative ",u+1,"/30 \u2022 ",Math.round(m),"% compl\xe9t\xe9"]})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)("div",{className:"h-3 bg-gray-200 rounded-full overflow-hidden",children:(0,i.jsx)("div",{className:"h-full bg-gradient-to-r from-green-500 to-blue-500 rounded-full transition-all duration-500 ease-out",style:{width:"".concat(m,"%")}})}),(0,i.jsx)("div",{className:"text-xs text-gray-400 text-center",children:"V\xe9rification de la cr\xe9ation du plan..."}),(0,i.jsx)("p",{className:"text-xs text-gray-500",children:"Veuillez patienter, cela ne prendra que quelques instants..."})]})]})}):"error"===r?(0,i.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:(0,i.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8 max-w-md w-full text-center",children:[(0,i.jsxs)("div",{className:"mb-6",children:[(0,i.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 bg-red-100 rounded-full flex items-center justify-center",children:(0,i.jsx)("svg",{className:"w-8 h-8 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),(0,i.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Erreur de cr\xe9ation"}),(0,i.jsx)("p",{className:"text-gray-600 mb-4",children:c||"Une erreur est survenue lors de la cr\xe9ation de votre plan."})]}),(0,i.jsxs)("div",{className:"space-y-3",children:[(0,i.jsx)("button",{onClick:g,className:"w-full bg-blue-600 text-white py-3 px-4 rounded-lg font-medium hover:bg-blue-700 transition-colors",children:"R\xe9essayer"}),(0,i.jsx)("button",{onClick:x,className:"w-full bg-gray-200 text-gray-800 py-3 px-4 rounded-lg font-medium hover:bg-gray-300 transition-colors",children:"Retour au tableau de bord"})]})]})}):"success"===r&&o?(0,i.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:(0,i.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8 max-w-md w-full text-center",children:[(0,i.jsxs)("div",{className:"mb-6",children:[(0,i.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 bg-green-100 rounded-full flex items-center justify-center",children:(0,i.jsx)("svg",{className:"w-8 h-8 text-green-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),(0,i.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Plan cr\xe9\xe9 avec succ\xe8s !"}),(0,i.jsx)("p",{className:"text-gray-600 mb-4",children:"Votre plan d'\xe9pargne est maintenant actif."})]}),(0,i.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 mb-6 text-left",children:[(0,i.jsx)("h3",{className:"font-semibold text-gray-900 mb-2",children:"D\xe9tails du plan :"}),(0,i.jsxs)("div",{className:"space-y-1 text-sm text-gray-600",children:[(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsx)("span",{children:"Montant par d\xe9p\xf4t :"}),(0,i.jsxs)("span",{className:"font-medium",children:[null===(v=o.fixed_amount)||void 0===v?void 0:v.toLocaleString()," F"]})]}),(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsx)("span",{children:"Objectif total :"}),(0,i.jsxs)("span",{className:"font-medium",children:[null===(b=o.total_amount_target)||void 0===b?void 0:b.toLocaleString()," F"]})]}),(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsx)("span",{children:"Statut :"}),(0,i.jsx)("span",{className:"font-medium text-green-600 capitalize",children:o.status})]}),(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsx)("span",{children:"Progression :"}),(0,i.jsxs)("span",{className:"font-medium",children:[o.completion_percentage||0,"%"]})]})]})]}),(0,i.jsx)("div",{className:"text-sm text-gray-500 mb-4",children:"Redirection automatique vers votre plan..."}),(0,i.jsx)("button",{onClick:()=>e("/ab-epargne/plan/".concat(o.id)),className:"w-full bg-green-600 text-white py-3 px-4 rounded-lg font-medium hover:bg-green-700 transition-colors",children:"Voir mon plan maintenant"})]})}):null;var v,b},Gx=e=>{let{plan:t,onSuccess:s}=e;const r=(0,n.useRef)(null),a=(0,n.useRef)(null),{user:o}=ut(),[l,c]=(0,n.useState)(!1);(0,n.useEffect)(()=>{const e=document.createElement("script");return e.src="https://cdn.fedapay.com/checkout.js?v=1.1.7",e.async=!0,e.onload=()=>{console.log("[FedaPay] \u2705 Script charg\xe9 pour d\xe9p\xf4t")},e.onerror=()=>{console.error("[FedaPay] \u274c Erreur chargement script")},document.body.appendChild(e),()=>{document.body.contains(e)&&document.body.removeChild(e)}},[]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("button",{ref:a,style:{display:"none"},onClick:()=>{}}),(0,i.jsx)("button",{ref:r,onClick:async()=>{if(window.FedaPay)if(o&&t){c(!0);try{const e=Ep.f,s=await fetch("".concat(e,"/api/create-savings-deposit"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:o.id,plan_id:t.id,amount:t.fixed_amount})}),n=await s.json();console.log("[FedaPay] R\xe9ponse backend:",n),n.success&&n.transactionUrl?window.location.href=n.transactionUrl:(alert("Erreur de connexion. Veuillez r\xe9essayer."),c(!1))}catch(e){console.error("[FedaPay] \u274c Erreur:",e),alert("Erreur de connexion. Veuillez r\xe9essayer."),c(!1)}}else alert("Informations utilisateur ou plan manquantes");else alert("FedaPay n'est pas encore charg\xe9 !")},disabled:l,className:"w-full bg-blue-600 hover:bg-blue-700 text-white py-4 rounded-lg font-semibold text-sm shadow-md hover:shadow-lg transition-all duration-200 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed",children:l?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"..."]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Bg,{className:"w-5 h-5 mr-2"}),"D\xe9p\xf4t"]})})]})},Kx=e=>{let{plan:t,onClose:s,onSuccess:r}=e;const[a,o]=(0,n.useState)(1),[l,c]=(0,n.useState)(!1),[u,h]=(0,n.useState)(""),[m,p]=(0,n.useState)({phoneNumber:"",recipientName:""}),f=e=>{p((0,d.A)((0,d.A)({},m),{},{[e.target.name]:e.target.value})),h("")};return(0,i.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:(0,i.jsxs)("div",{className:"bg-white rounded-3xl shadow-2xl max-w-md w-full overflow-hidden",children:[(0,i.jsxs)("div",{className:"bg-gradient-to-r from-green-500 to-emerald-600 text-white p-6",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,i.jsx)("h3",{className:"text-2xl font-bold",children:"Demande de retrait"}),(0,i.jsx)("button",{onClick:s,className:"p-2 hover:bg-white/20 rounded-full transition-colors",children:(0,i.jsx)(xt,{size:24})})]}),(0,i.jsx)("p",{className:"text-green-100 text-sm",children:1===a?"\xc9tape 1/2 : Informations de transfert":"\xc9tape 2/2 : Confirmation"})]}),(0,i.jsx)("div",{className:"p-6",children:1===a?(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsxs)("div",{className:"bg-green-50 rounded-2xl p-4 border border-green-200",children:[(0,i.jsx)("p",{className:"text-sm text-green-800 mb-2",children:"Montant disponible"}),(0,i.jsx)("p",{className:"text-3xl font-bold text-green-600",children:(0,Dp.vv)(t.current_balance)})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)(Hp.A,{size:18}),"Num\xe9ro de t\xe9l\xe9phone Mobile Money"]})}),(0,i.jsx)("input",{type:"tel",name:"phoneNumber",value:m.phoneNumber,onChange:f,placeholder:"+229 XX XX XX XX",className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all"}),(0,i.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Le num\xe9ro qui recevra le transfert"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)(mi,{size:18}),"Nom sur le num\xe9ro"]})}),(0,i.jsx)("input",{type:"text",name:"recipientName",value:m.recipientName,onChange:f,placeholder:"Nom complet du b\xe9n\xe9ficiaire",className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all"}),(0,i.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Le nom associ\xe9 au num\xe9ro Mobile Money"})]}),u&&(0,i.jsx)("div",{className:"bg-red-50 border-l-4 border-red-500 rounded-lg p-4",children:(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)(ft,{size:20,className:"text-red-600"}),(0,i.jsx)("p",{className:"text-sm text-red-800",children:u})]})}),(0,i.jsx)("button",{onClick:()=>{if(!m.phoneNumber||!m.recipientName)return void h("Veuillez remplir tous les champs");/^[\d\s+\-()]+$/.test(m.phoneNumber)?o(2):h("Num\xe9ro de t\xe9l\xe9phone invalide")},className:"w-full py-3 bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white font-semibold rounded-xl transition-all duration-200 shadow-lg hover:shadow-xl",children:"Suivant"})]}):(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsxs)("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 rounded-2xl p-6 border-2 border-green-200",children:[(0,i.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,i.jsx)("div",{className:"p-3 bg-green-500 rounded-xl",children:(0,i.jsx)(mt.A,{size:24,className:"text-white"})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h4",{className:"font-bold text-gray-900",children:"R\xe9capitulatif"}),(0,i.jsx)("p",{className:"text-sm text-gray-600",children:"V\xe9rifiez les informations"})]})]}),(0,i.jsxs)("div",{className:"space-y-3",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center py-2 border-b border-green-200",children:[(0,i.jsx)("span",{className:"text-sm text-gray-600",children:"Montant"}),(0,i.jsx)("span",{className:"text-lg font-bold text-green-600",children:(0,Dp.vv)(t.current_balance)})]}),(0,i.jsxs)("div",{className:"flex justify-between items-center py-2 border-b border-green-200",children:[(0,i.jsx)("span",{className:"text-sm text-gray-600",children:"Num\xe9ro"}),(0,i.jsx)("span",{className:"font-semibold text-gray-900",children:m.phoneNumber})]}),(0,i.jsxs)("div",{className:"flex justify-between items-center py-2",children:[(0,i.jsx)("span",{className:"text-sm text-gray-600",children:"B\xe9n\xe9ficiaire"}),(0,i.jsx)("span",{className:"font-semibold text-gray-900",children:m.recipientName})]})]})]}),(0,i.jsx)("div",{className:"bg-blue-50 rounded-xl p-4 border border-blue-200",children:(0,i.jsx)("p",{className:"text-sm text-blue-800",children:"\u2139\ufe0f Votre demande sera trait\xe9e par un administrateur. Vous recevrez une notification une fois le transfert effectu\xe9."})}),u&&(0,i.jsx)("div",{className:"bg-red-50 border-l-4 border-red-500 rounded-lg p-4",children:(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)(ft,{size:20,className:"text-red-600"}),(0,i.jsx)("p",{className:"text-sm text-red-800",children:u})]})}),(0,i.jsxs)("div",{className:"flex gap-3",children:[(0,i.jsx)("button",{onClick:()=>o(1),disabled:l,className:"flex-1 py-3 bg-gray-100 hover:bg-gray-200 text-gray-700 font-semibold rounded-xl transition-all duration-200 disabled:opacity-50",children:"Retour"}),(0,i.jsx)("button",{onClick:async()=>{try{c(!0),h(""),console.log("[WITHDRAWAL] Cr\xe9ation de la demande de retrait...");const{data:i,error:o}=await lt.ND.from("withdrawal_requests").insert([{user_id:t.user_id,savings_plan_id:t.id,amount:t.current_balance,phone_number:m.phoneNumber,recipient_name:m.recipientName,status:"pending"}]).select().single();if(o)throw console.error("[WITHDRAWAL] Erreur cr\xe9ation demande:",o),new Error("Erreur lors de la cr\xe9ation de la demande");console.log("[WITHDRAWAL] Demande cr\xe9\xe9e:",i);const{error:l}=await lt.ND.from("savings_plans").update({status:"withdrawal_pending",updated_at:(new Date).toISOString()}).eq("id",t.id);l&&console.error("[WITHDRAWAL] Erreur mise \xe0 jour plan:",l);try{var e,n;const s="http://localhost:5000",r=await fetch("".concat(s,"/api/notify-admin-withdrawal"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({withdrawalId:i.id,clientName:"".concat(null===(e=t.user)||void 0===e?void 0:e.first_name," ").concat(null===(n=t.user)||void 0===n?void 0:n.last_name),amount:t.current_balance,userId:t.user_id,planId:t.id})});r.ok?console.log("[WITHDRAWAL] \u2705 Notification envoy\xe9e \xe0 l'admin (cloche + push)"):console.error("[WITHDRAWAL] \u26a0\ufe0f Erreur notification admin:",await r.text())}catch(a){console.error("[WITHDRAWAL] \u26a0\ufe0f Erreur envoi notification admin:",a)}console.log("[WITHDRAWAL] \u2705 Demande de retrait envoy\xe9e avec succ\xe8s"),r&&r("Demande de retrait envoy\xe9e avec succ\xe8s !"),s()}catch(i){console.error("[WITHDRAWAL] Erreur:",i),h(i.message||"Erreur lors de l'envoi de la demande")}finally{c(!1)}},disabled:l,className:"flex-1 py-3 bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white font-semibold rounded-xl transition-all duration-200 shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed",children:l?(0,i.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,i.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-white border-t-transparent"}),(0,i.jsx)("span",{children:"Envoi..."})]}):"Confirmer le retrait"})]})]})})]})})},Zx=()=>{var e;const{id:t}=(0,Ge.g)(),s=(0,Ge.Zp)(),{user:r}=ut(),[a,o]=(0,n.useState)(null),[l,c]=(0,n.useState)(!1),[d,u]=(0,n.useState)(null),[h,m]=(0,n.useState)(!1),[p,f]=(0,n.useState)(!1),[g,x]=(0,n.useState)(0);(0,n.useEffect)(()=>{r&&t&&(async()=>{try{c(!0);const e=Ep.f,n=await fetch("".concat(e,"/api/savings/plan-status?planId=").concat(t)),r=await n.json();if(!r.success)return console.error("[PLAN_EPARGNE] \u274c Erreur r\xe9cup\xe9ration plan:",r.error),void u("Plan non trouv\xe9 ou acc\xe8s refus\xe9");const a=r.plan.personalized_at&&null!==r.plan.personalized_at&&r.plan.plan_name&&""!==r.plan.plan_name.trim()&&"Plan \xc9pargne"!==r.plan.plan_name.trim()&&r.plan.goal;if(console.log("[PLAN_EPARGNE] \ud83d\udd0d V\xe9rification personnalisation:",{personalized_at:r.plan.personalized_at,plan_name:r.plan.plan_name,goal:r.plan.goal,isPersonalized:a}),!a)return console.log("[PLAN_EPARGNE] \u26a0\ufe0f Acc\xe8s bloqu\xe9 : Plan non personnalis\xe9, redirection vers personnalisation"),void s("/ab-epargne/personalize/".concat(r.plan.id),{replace:!0});o(r.plan);const i=r.plan.current_balance||0,l=r.plan.total_amount_target||r.plan.target_amount||1,d=Math.min(i/l*100,100);x(d),d>=100&&!p&&(f(!0),setTimeout(()=>f(!1),5e3))}catch(d){console.error("[PLAN_EPARGNE] \u274c Erreur:",d),u("Erreur de chargement du plan")}finally{c(!1)}})()},[r,t]);const v=e=>{let{percentage:t,size:s=200}=e;const n=(s-20)/2,r=2*Math.PI*n,a=r-t/100*r,o=()=>t>=100?"#10b981":t>=75?"#3b82f6":t>=50?"#f59e0b":"#ef4444";return(0,i.jsxs)("div",{className:"relative",style:{width:s,height:s},children:[(0,i.jsxs)("svg",{className:"transform -rotate-90",width:s,height:s,children:[(0,i.jsx)("circle",{cx:s/2,cy:s/2,r:n,stroke:"#e5e7eb",strokeWidth:"12",fill:"none"}),(0,i.jsx)("circle",{cx:s/2,cy:s/2,r:n,stroke:o(),strokeWidth:"12",fill:"none",strokeDasharray:r,strokeDashoffset:a,strokeLinecap:"round",className:"transition-all duration-1000 ease-out"})]}),(0,i.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[(0,i.jsxs)("span",{className:"text-4xl font-bold",style:{color:o()},children:[Math.round(t),"%"]}),(0,i.jsx)("span",{className:"text-xs text-gray-500 mt-1",children:"compl\xe9t\xe9"})]})]})};if(d)return(0,i.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:(0,i.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-8 max-w-md w-full text-center",children:[(0,i.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 bg-red-100 rounded-full flex items-center justify-center",children:(0,i.jsx)("svg",{className:"w-8 h-8 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,i.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Erreur"}),(0,i.jsx)("p",{className:"text-gray-600 mb-6",children:d}),(0,i.jsx)("button",{onClick:()=>s("/ab-epargne"),className:"w-full bg-blue-600 text-white py-3 rounded-xl font-semibold",children:"Retour \xe0 l'\xe9pargne"})]})});if(!a)return(0,i.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:l?(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,i.jsx)("p",{className:"text-gray-600",children:"Chargement du plan..."})]}):(0,i.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-8 max-w-md w-full text-center",children:[(0,i.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center",children:(0,i.jsx)("svg",{className:"w-8 h-8 text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),(0,i.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Plan non trouv\xe9"}),(0,i.jsx)("p",{className:"text-gray-600 mb-6",children:"Ce plan d'\xe9pargne n'existe pas ou vous n'y avez pas acc\xe8s."}),(0,i.jsx)("button",{onClick:()=>s("/ab-epargne"),className:"w-full bg-blue-600 text-white py-3 rounded-xl font-semibold",children:"Retour \xe0 l'\xe9pargne"})]})});const b=e=>e?new Date(e).toLocaleDateString("fr-FR",{day:"numeric",month:"long",year:"numeric"}):"N/A",y=()=>{const e=(()=>{if(!a||!a.next_deposit_date)return!1;const e=new Date(a.next_deposit_date),t=new Date;return t.setHours(0,0,0,0),e.setHours(0,0,0,0),e<t})(),t=(()=>{if(!a||!a.next_deposit_date)return 0;const e=new Date(a.next_deposit_date),t=new Date;t.setHours(0,0,0,0),e.setHours(0,0,0,0);const s=t.getTime()-e.getTime(),n=Math.floor(s/864e5);return Math.max(0,n)})();return e?(0,i.jsxs)("span",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-semibold bg-orange-50 text-orange-700 border border-orange-200 animate-pulse",children:[(0,i.jsx)(Kg,{size:12,className:"text-orange-600"}),"En retard ",t>0&&"(".concat(t,"j)")]}):(0,i.jsxs)("span",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-semibold bg-green-50 text-green-700 border border-green-200",children:[(0,i.jsx)(Vx,{size:12,className:"text-green-600"}),"\xc0 jour"]})},j=()=>{if(!a)return!1;const e="active"===a.status,t=a.total_amount_target||a.target_amount||0,s=a.current_balance>=t,n=!a.is_overdue,r="withdrawal_pending"!==a.status;return e&&s&&n&&r},w=a.plan_name||"Mon Plan d'\xc9pargne",N=a.total_amount_target||a.target_amount||0,S=a.current_balance||0;return(0,i.jsxs)("div",{className:"min-h-screen bg-gray-50 sm:bg-gray-100",children:[(0,i.jsx)("div",{className:"bg-gray-100 sm:bg-white rounded-b-2xl sm:rounded-none",children:(0,i.jsxs)("div",{className:"flex items-center justify-between px-4 py-4 sm:px-6 sm:py-4",children:[(0,i.jsx)("button",{onClick:()=>s("/ab-epargne"),className:"w-10 h-10 rounded-full bg-white sm:bg-gray-50 flex items-center justify-center shadow-sm hover:bg-gray-50 transition-colors",children:(0,i.jsx)(Fx,{className:"w-5 h-5 text-gray-700"})}),(0,i.jsx)("h1",{className:"text-base sm:text-lg font-semibold text-gray-900",children:w}),(0,i.jsx)("div",{className:"w-10"})]})}),(0,i.jsxs)("div",{className:"px-4 sm:px-6 pb-6",children:[(0,i.jsxs)("div",{className:"text-center mb-6 mt-6",children:[(0,i.jsx)("p",{className:"text-sm text-gray-500 mb-1",children:"Solde actuel"}),(0,i.jsxs)("p",{className:"text-4xl sm:text-5xl font-bold text-blue-600",children:[S.toLocaleString()," F CFA"]})]}),(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-3 mb-6",children:[(0,i.jsx)(Gx,{plan:a}),(0,i.jsxs)("button",{onClick:()=>{if(j())m(!0);else if("withdrawal_pending"===a.status)Ms.info("Votre demande de retrait est en cours de traitement");else if(a.is_overdue)Ms.error("Vous ne pouvez pas effectuer de retrait car vous avez des retards de d\xe9p\xf4t");else{const e=a.total_amount_target||a.target_amount||0;a.current_balance<e?Ms.error("Vous devez atteindre votre objectif d'\xe9pargne avant de pouvoir retirer"):Ms.error("Retrait non disponible pour ce plan")}},disabled:!j(),className:"py-4 rounded-lg font-semibold text-sm shadow-md hover:shadow-lg transition-all duration-200 flex items-center justify-center ".concat(j()?"bg-orange-600 hover:bg-orange-700 text-white":"bg-gray-300 text-gray-500 cursor-not-allowed"),children:[(0,i.jsx)(Ux,{className:"w-5 h-5 mr-2"}),"Retrait"]})]}),(0,i.jsxs)("div",{className:"bg-white rounded-t-3xl sm:rounded-2xl shadow-lg p-6 sm:p-8 mb-6 flex flex-col items-center",children:[(0,i.jsx)(v,{percentage:g,size:180}),g>=100&&(0,i.jsxs)("div",{className:"mt-4 flex items-center gap-2 text-green-600",children:[(0,i.jsx)(Vx,{className:"w-5 h-5"}),(0,i.jsx)("span",{className:"font-semibold",children:"Objectif atteint ! \ud83c\udf89"})]})]}),(0,i.jsxs)("div",{className:"bg-white rounded-2xl sm:rounded-2xl shadow-lg p-6 sm:p-8 mb-6",children:[(0,i.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"D\xe9tails du plan"}),(0,i.jsxs)("div",{className:"space-y-3",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[(0,i.jsx)("span",{className:"text-sm text-gray-600",children:"Montant total pr\xe9vu"}),(0,i.jsxs)("span",{className:"text-sm font-semibold text-gray-900",children:[N.toLocaleString()," F"]})]}),(0,i.jsxs)("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[(0,i.jsx)("span",{className:"text-sm text-gray-600",children:"Montant d\xe9j\xe0 \xe9pargn\xe9"}),(0,i.jsxs)("span",{className:"text-sm font-semibold text-blue-600",children:[S.toLocaleString()," F"]})]}),(0,i.jsxs)("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[(0,i.jsx)("span",{className:"text-sm text-gray-600",children:"Prochain d\xe9p\xf4t \xe0 effectuer"}),(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsxs)("span",{className:"text-sm font-semibold text-gray-900",children:[null===(e=a.fixed_amount)||void 0===e?void 0:e.toLocaleString()," F"]}),(0,i.jsx)(y,{})]})]}),(0,i.jsxs)("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[(0,i.jsx)("span",{className:"text-sm text-gray-600",children:"Date du dernier d\xe9p\xf4t"}),(0,i.jsx)("span",{className:"text-sm font-medium text-gray-700",children:b(a.last_deposit_date||a.start_date)})]}),(0,i.jsxs)("div",{className:"flex justify-between items-center py-2",children:[(0,i.jsx)("span",{className:"text-sm text-gray-600",children:"Statut du plan"}),(0,i.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-semibold ".concat("active"===a.status?"bg-green-100 text-green-700":"completed"===a.status?"bg-blue-100 text-blue-700":"interrupted"===a.status?"bg-red-100 text-red-700":"bg-gray-100 text-gray-700"),children:"active"===a.status?"En cours":"completed"===a.status?"R\xe9ussi":"interrupted"===a.status?"Interrompu":a.status})]})]})]}),(0,i.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-6 sm:p-8",children:[(0,i.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"D\xe9tails du plan"}),(0,i.jsxs)("div",{className:"space-y-3 text-sm",children:[(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsx)("span",{className:"text-gray-600",children:"Fr\xe9quence"}),(0,i.jsxs)("span",{className:"font-medium",children:["Tous les ",a.frequency_days," jours"]})]}),(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsx)("span",{className:"text-gray-600",children:"Dur\xe9e totale"}),(0,i.jsxs)("span",{className:"font-medium",children:[a.duration_months," mois"]})]}),(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsx)("span",{className:"text-gray-600",children:"Taux d'int\xe9r\xeat"}),(0,i.jsxs)("span",{className:"font-medium text-green-600",children:[a.interest_rate||5,"% par mois"]})]}),(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsx)("span",{className:"text-gray-600",children:"D\xe9p\xf4ts effectu\xe9s"}),(0,i.jsxs)("span",{className:"font-medium",children:[a.completed_deposits||0," / ",a.total_deposits_required||0]})]}),(0,i.jsxs)("div",{className:"flex justify-between items-center",children:[(0,i.jsx)("span",{className:"text-gray-600",children:"Prochain d\xe9p\xf4t"}),(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)("span",{className:"font-medium text-blue-600",children:b(a.next_deposit_date)}),(0,i.jsx)(y,{})]})]})]})]})]}),p&&(0,i.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center pointer-events-none",children:(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("div",{className:"text-6xl mb-4 animate-bounce",children:"\ud83c\udf89"}),(0,i.jsx)("h2",{className:"text-3xl font-bold text-blue-600 mb-2",children:"F\xe9licitations !"}),(0,i.jsx)("p",{className:"text-xl text-gray-700",children:"Objectif atteint ! \ud83c\udf8a"})]})}),h&&(0,i.jsx)(Kx,{plan:a,onClose:()=>m(!1),onSuccess:e=>{Ms.success(e),m(!1),setTimeout(()=>{window.location.reload()},1500)}})]})},Jx=(0,pt.A)("Bike",[["circle",{cx:"18.5",cy:"17.5",r:"3.5",key:"15x4ox"}],["circle",{cx:"5.5",cy:"17.5",r:"3.5",key:"1noe27"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["path",{d:"M12 17.5V14l-3-3 4-3 2 3h2",key:"1npguv"}]]),Qx=(0,pt.A)("Shirt",[["path",{d:"M20.38 3.46 16 2a4 4 0 0 1-8 0L3.62 3.46a2 2 0 0 0-1.34 2.23l.58 3.47a1 1 0 0 0 .99.84H6v10c0 1.1.9 2 2 2h8a2 2 0 0 0 2-2V10h2.15a1 1 0 0 0 .99-.84l.58-3.47a2 2 0 0 0-1.34-2.23z",key:"1wgbhj"}]]),Yx=(0,pt.A)("PartyPopper",[["path",{d:"M5.8 11.3 2 22l10.7-3.79",key:"gwxi1d"}],["path",{d:"M4 3h.01",key:"1vcuye"}],["path",{d:"M22 8h.01",key:"1mrtc2"}],["path",{d:"M15 2h.01",key:"1cjtqr"}],["path",{d:"M22 20h.01",key:"1mrys2"}],["path",{d:"m22 2-2.24.75a2.9 2.9 0 0 0-1.96 3.12v0c.1.86-.57 1.63-1.45 1.63h-.38c-.86 0-1.6.6-1.76 1.44L14 10",key:"bpx1uq"}],["path",{d:"m22 13-.82-.33c-.86-.34-1.82.2-1.98 1.11v0c-.11.7-.72 1.22-1.43 1.22H17",key:"1pd0s7"}],["path",{d:"m11 2 .33.82c.34.86-.2 1.82-1.11 1.98v0C9.52 4.9 9 5.52 9 6.23V7",key:"zq5xbz"}],["path",{d:"M11 13c1.93 1.93 2.83 4.17 2 5-.83.83-3.07-.07-5-2-1.93-1.93-2.83-4.17-2-5 .83-.83 3.07.07 5 2Z",key:"4kbmks"}]]),$x=(0,pt.A)("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]),Xx=(0,pt.A)("UtensilsCrossed",[["path",{d:"m16 2-2.3 2.3a3 3 0 0 0 0 4.2l1.8 1.8a3 3 0 0 0 4.2 0L22 8",key:"n7qcjb"}],["path",{d:"M15 15 3.3 3.3a4.2 4.2 0 0 0 0 6l7.3 7.3c.7.7 2 .7 2.8 0L15 15Zm0 0 7 7",key:"d0u48b"}],["path",{d:"m2.1 21.8 6.4-6.3",key:"yn04lh"}],["path",{d:"m19 5-7 7",key:"194lzd"}]]),ev=(0,pt.A)("Laptop",[["path",{d:"M20 16V7a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v9m16 0H4m16 0 1.28 2.55a1 1 0 0 1-.9 1.45H3.62a1 1 0 0 1-.9-1.45L4 16",key:"tarvll"}]]),tv=(0,pt.A)("Plane",[["path",{d:"M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2z",key:"1v9wt8"}]]),sv=[{id:"graduation",label:"Pr\xe9paration / Soutenance",icon:Df,emoji:"\ud83c\udf93",color:"from-blue-500 to-indigo-600"},{id:"rent",label:"Loyer ou h\xe9bergement",icon:Vp,emoji:"\ud83c\udfe0",color:"from-green-500 to-emerald-600"},{id:"motorcycle",label:"Achat de moto",icon:Jx,emoji:"\ud83d\udeb4",color:"from-orange-500 to-red-600"},{id:"phone",label:"Achat de t\xe9l\xe9phone",icon:hf,emoji:"\ud83d\udcf1",color:"from-purple-500 to-pink-600"},{id:"clothes",label:"Achat de v\xeatements / Accessoires",icon:Qx,emoji:"\ud83d\udc55",color:"from-pink-500 to-rose-600"},{id:"party",label:"Achat de ticket de f\xeate ou \xe9v\xe9nement",icon:Yx,emoji:"\ud83c\udf89",color:"from-yellow-500 to-orange-600"},{id:"project",label:"Projet personnel",icon:$x,emoji:"\ud83d\udcbc",color:"from-indigo-500 to-blue-600"},{id:"nutrition",label:"Nutrition / Cantine",icon:Xx,emoji:"\ud83c\udf7d\ufe0f",color:"from-red-500 to-pink-600"},{id:"laptop",label:"Achat d'ordinateur / Mat\xe9riel scolaire",icon:ev,emoji:"\ud83d\udcbb",color:"from-gray-600 to-gray-800"},{id:"travel",label:"Voyage ou sortie",icon:tv,emoji:"\u2708\ufe0f",color:"from-cyan-500 to-blue-600"},{id:"gift",label:"Cadeau ou surprise",icon:Jf,emoji:"\ud83c\udf81",color:"from-purple-500 to-indigo-600"},{id:"custom",label:"Autre (personnalis\xe9)",icon:kx,emoji:"\ud83d\udcb0",color:"from-blue-500 to-purple-600"}],nv=()=>{const e=(0,Ge.Zp)(),{planId:t}=(0,Ge.g)(),{user:s}=ut(),[r,a]=(0,n.useState)(null),[o,l]=(0,n.useState)(""),[c,d]=(0,n.useState)(""),[u,h]=(0,n.useState)(!1),[,m]=(0,n.useState)(null);(0,n.useEffect)(()=>{(async()=>{if(t&&s)try{const s=Ep.f,n=await fetch("".concat(s,"/api/savings/plan-status?planId=").concat(t)),r=await n.json();if(r.success&&r.plan){const s=r.plan.personalized_at&&null!==r.plan.personalized_at&&r.plan.plan_name&&""!==r.plan.plan_name.trim()&&"Plan \xc9pargne"!==r.plan.plan_name.trim()&&r.plan.goal;if(console.log("[PERSONALIZE_PLAN] \ud83d\udd0d V\xe9rification personnalisation:",{personalized_at:r.plan.personalized_at,plan_name:r.plan.plan_name,goal:r.plan.goal,isPersonalized:s}),s)return console.log("[PERSONALIZE_PLAN] \u26a0\ufe0f Plan d\xe9j\xe0 personnalis\xe9, redirection vers dashboard"),void e("/ab-epargne/plan/".concat(t),{replace:!0});if(m(r.plan),r.plan.plan_name&&"Plan \xc9pargne"!==r.plan.plan_name.trim()){d(r.plan.plan_name);const e=sv.find(e=>r.plan.plan_name.includes(e.label)||r.plan.goal===e.id);e&&a(e.id)}}else console.error("[PERSONALIZE_PLAN] Plan non trouv\xe9"),Ms.error("Plan non trouv\xe9"),e("/ab-epargne",{replace:!0})}catch(n){console.error("[PERSONALIZE_PLAN] Erreur:",n),Ms.error("Erreur de chargement du plan"),e("/ab-epargne",{replace:!0})}})()},[t,s,e]);return(0,i.jsxs)("div",{className:"min-h-screen bg-gray-50 sm:bg-gray-100",children:[(0,i.jsx)("div",{className:"bg-gray-100 sm:bg-white rounded-b-2xl sm:rounded-none mb-4 sm:mb-6",children:(0,i.jsxs)("div",{className:"flex items-center justify-between px-4 py-4 sm:px-6 sm:py-4",children:[(0,i.jsx)("button",{onClick:()=>e(-1),className:"w-10 h-10 rounded-full bg-white sm:bg-gray-50 flex items-center justify-center shadow-sm hover:bg-gray-50 transition-colors",children:(0,i.jsx)(Fx,{className:"w-5 h-5 text-gray-700"})}),(0,i.jsx)("h1",{className:"text-base sm:text-lg font-semibold text-gray-900",children:"Personnalisez votre plan"}),(0,i.jsx)("div",{className:"w-10"})]})}),(0,i.jsxs)("div",{className:"bg-white rounded-t-3xl sm:rounded-2xl shadow-lg sm:shadow-xl p-6 sm:p-8 mx-auto max-w-md sm:max-w-lg",children:[(0,i.jsxs)("div",{className:"text-center mb-8",children:[(0,i.jsx)("div",{className:"w-16 h-16 bg-gradient-to-r from-blue-600 to-indigo-600 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,i.jsx)(ri,{className:"w-8 h-8 text-white"})}),(0,i.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Choisissez votre objectif"}),(0,i.jsx)("p",{className:"text-gray-600 text-sm",children:"Donnez un nom \xe0 votre plan d'\xe9pargne"})]}),(0,i.jsxs)("div",{className:"mb-6",children:[(0,i.jsxs)("label",{className:"block text-sm font-medium text-gray-900 mb-3",children:["Objectif d'\xe9pargne ",(0,i.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,i.jsx)("div",{className:"grid grid-cols-2 gap-3",children:sv.map(e=>{const t=e.icon,s=r===e.id;return(0,i.jsxs)("button",{onClick:()=>(e=>{a(e);const t=sv.find(t=>t.id===e);if(t&&"custom"!==e){const e="graduation"===t.id?"Ma Soutenance ".concat((new Date).getFullYear()):"motorcycle"===t.id?"Ma Moto":"rent"===t.id?"Mon Loyer":"phone"===t.id?"Mon T\xe9l\xe9phone":"laptop"===t.id?"Mon Ordinateur":"Mon ".concat(t.label.replace("Achat de ","").replace(" ou ","/").split(" ")[0]);d(e)}else"custom"===e&&d("")})(e.id),className:"p-4 rounded-xl border-2 transition-all text-left ".concat(s?"border-blue-600 bg-blue-50 shadow-md":"border-gray-200 bg-white hover:border-blue-300 hover:bg-gray-50"),children:[(0,i.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,i.jsx)("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-r ".concat(e.color," flex items-center justify-center text-white text-lg"),children:e.emoji}),"custom"!==e.id&&(0,i.jsx)(t,{className:"w-4 h-4 ".concat(s?"text-blue-600":"text-gray-400")})]}),(0,i.jsx)("p",{className:"text-xs font-medium ".concat(s?"text-blue-900":"text-gray-700"),children:e.label})]},e.id)})})]}),"custom"===r&&(0,i.jsxs)("div",{className:"mb-6",children:[(0,i.jsxs)("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:["Votre objectif personnalis\xe9 ",(0,i.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,i.jsx)("input",{type:"text",value:o,onChange:e=>l(e.target.value),placeholder:"Ex: \xc9pargner pour un \xe9v\xe9nement sp\xe9cial...",className:"w-full px-4 py-3 border border-blue-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none bg-gray-50"})]}),(0,i.jsxs)("div",{className:"mb-6",children:[(0,i.jsxs)("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:["Nom de votre plan ",(0,i.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,i.jsx)("input",{type:"text",value:c,onChange:e=>d(e.target.value),placeholder:"Ex: Ma Moto, Ma Soutenance 2025...",className:"w-full px-4 py-3 border border-blue-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none bg-gray-50"}),(0,i.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Ce nom s'affichera sur votre tableau de bord"})]}),(0,i.jsx)("button",{onClick:async()=>{if(r)if("custom"!==r||o.trim())if(c.trim())try{var s;h(!0);const a="custom"===r?o:null===(s=sv.find(e=>e.id===r))||void 0===s?void 0:s.label,i="custom"===r?"custom":r;console.log("[PERSONALIZE_PLAN] \ud83d\udcdd Envoi de la personnalisation au backend...",{planId:t,planName:c.trim(),goal:i,goalLabel:a});const l=Ep.f,d=new AbortController,u=setTimeout(()=>d.abort(),3e4);try{const s=await fetch("".concat(l,"/api/savings/personalize-plan"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({planId:t,planName:c.trim(),goal:i,goalLabel:a}),signal:d.signal});clearTimeout(u);const n=await s.json();if(!s.ok||!n.success)return console.error("[PERSONALIZE_PLAN] \u274c Erreur API:",n),void Ms.error(n.error||"Erreur lors de la sauvegarde");console.log("[PERSONALIZE_PLAN] \u2705 Plan personnalis\xe9 avec succ\xe8s:",n.plan),Ms.success("Plan personnalis\xe9 avec succ\xe8s ! \ud83c\udf89"),setTimeout(()=>{e("/ab-epargne/plan/".concat(t),{replace:!0})},500)}catch(n){clearTimeout(u),"AbortError"===n.name?(console.error("[PERSONALIZE_PLAN] \u274c Timeout: La requ\xeate a pris trop de temps"),Ms.error("La requ\xeate a pris trop de temps. Veuillez v\xe9rifier votre connexion et r\xe9essayer.")):n instanceof TypeError&&n.message.includes("fetch")?(console.error("[PERSONALIZE_PLAN] \u274c Erreur r\xe9seau:",n),Ms.error("Erreur de connexion au serveur. V\xe9rifiez votre connexion internet.")):(console.error("[PERSONALIZE_PLAN] \u274c Erreur:",n),Ms.error("Erreur lors de la personnalisation. Veuillez r\xe9essayer."))}}catch(a){console.error("[PERSONALIZE_PLAN] \u274c Erreur inattendue:",a),Ms.error("Une erreur inattendue est survenue. Veuillez r\xe9essayer.")}finally{h(!1)}else Ms.error("Veuillez donner un nom \xe0 votre plan");else Ms.error("Veuillez saisir votre objectif personnalis\xe9");else Ms.error("Veuillez s\xe9lectionner un objectif")},disabled:u||!r||!c.trim(),className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed text-white py-4 rounded-lg font-semibold text-base shadow-md hover:shadow-lg transition-all duration-200 mb-6",children:u?"Enregistrement...":"Continuer"}),(0,i.jsx)("div",{className:"text-center pt-4 border-t border-gray-200",children:(0,i.jsx)("p",{className:"text-xs text-gray-500",children:"Personnalisez votre exp\xe9rience d'\xe9pargne"})})]})]})},rv=()=>{const e=(0,Ge.zy)(),t=(0,Ge.Zp)(),[s,r]=(0,n.useState)("loading"),[a,o]=(0,n.useState)("V\xe9rification du d\xe9p\xf4t..."),[l,c]=(0,n.useState)(null);(0,n.useEffect)(()=>{const s=new URLSearchParams(e.search),n=s.get("id")||s.get("reference")||s.get("txId"),a=s.get("status");if(console.log("[DEPOT_RETOUR] Param\xe8tres URL:",{transactionId:n,status:a,allParams:Object.fromEntries(s.entries())}),!n)return r("success"),o("D\xe9p\xf4t confirm\xe9 ! Le solde sera mis \xe0 jour sous peu."),void setTimeout(()=>{t("/ab-epargne")},3e3);"approved"===a||"transferred"===a?d(n):(r("error"),o("D\xe9p\xf4t non approuv\xe9"))},[e.search]);const d=async e=>{try{o("V\xe9rification du d\xe9p\xf4t...");const s="https://ab-pret-back.onrender.com";let n=0;const a=10,i=async()=>{n++,console.log("[DEPOT_RETOUR] Tentative ".concat(n,"/").concat(a," pour r\xe9f\xe9rence: ").concat(e));try{const l=await fetch("".concat(s,"/api/savings/deposit-status?reference=").concat(e)),d=await l.json();if(d.success&&d.plan)return r("success"),o("D\xe9p\xf4t confirm\xe9, solde mis \xe0 jour !"),c(d.plan),void setTimeout(()=>{t("/ab-epargne/plan/".concat(d.plan.id))},3e3);if(n<a)return o("V\xe9rification du d\xe9p\xf4t... (".concat(n,"/").concat(a,")")),void setTimeout(i,2e3);r("success"),o("D\xe9p\xf4t confirm\xe9 ! Le solde sera mis \xe0 jour sous peu."),setTimeout(()=>{t("/ab-epargne")},3e3)}catch(l){console.error("[DEPOT_RETOUR] \u274c Erreur tentative ".concat(n,":"),l),n<a?setTimeout(i,2e3):(r("error"),o("Erreur de connexion"))}};i()}catch(s){console.error("[DEPOT_RETOUR] \u274c Erreur:",s),r("error"),o("Erreur de connexion")}};return(0,i.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-green-50 to-emerald-100 flex items-center justify-center p-4",children:(0,i.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8 max-w-md w-full text-center",children:["loading"===s&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 bg-blue-100 rounded-full flex items-center justify-center",children:(0,i.jsx)("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"})}),(0,i.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"V\xe9rification en cours"}),(0,i.jsx)("p",{className:"text-gray-600",children:a})]}),"success"===s&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 bg-green-100 rounded-full flex items-center justify-center",children:(0,i.jsx)(mt.A,{className:"w-8 h-8 text-green-600"})}),(0,i.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"D\xe9p\xf4t confirm\xe9 !"}),(0,i.jsx)("p",{className:"text-gray-600 mb-6",children:a}),l&&(0,i.jsxs)("div",{className:"bg-gray-50 rounded-xl p-4 mb-6",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,i.jsx)("span",{className:"text-gray-600",children:"Nouveau solde"}),(0,i.jsxs)("span",{className:"font-bold text-green-600",children:[(l.current_balance||0).toLocaleString()," F"]})]}),(0,i.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,i.jsx)("span",{className:"text-gray-600",children:"Total d\xe9pos\xe9"}),(0,i.jsxs)("span",{className:"font-bold text-gray-900",children:[(l.total_deposited||0).toLocaleString()," F"]})]}),(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsx)("span",{className:"text-gray-600",children:"Progression"}),(0,i.jsxs)("span",{className:"font-bold text-blue-600",children:[l.completion_percentage||0,"%"]})]})]}),(0,i.jsxs)("div",{className:"space-y-3",children:[(0,i.jsx)("button",{onClick:()=>{t(l?"/ab-epargne/plan/".concat(l.id):"/ab-epargne")},className:"w-full bg-gradient-to-r from-blue-500 to-blue-600 text-white py-3 rounded-xl font-semibold",children:"Voir mon plan"}),(0,i.jsx)("p",{className:"text-sm text-gray-500",children:"Redirection automatique dans 3 secondes..."})]})]}),"error"===s&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 bg-red-100 rounded-full flex items-center justify-center",children:(0,i.jsx)("svg",{className:"w-8 h-8 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,i.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Erreur"}),(0,i.jsx)("p",{className:"text-gray-600 mb-6",children:a}),(0,i.jsx)("button",{onClick:()=>t("/ab-epargne"),className:"w-full bg-blue-600 text-white py-3 rounded-xl font-semibold",children:"Retour \xe0 l'\xe9pargne"})]})]})})},av=()=>{const e=(0,Ge.Zp)(),t=(0,Ge.zy)(),{user:s}=ut(),r=l(),[a,o]=(0,n.useState)("loading"),[c,d]=(0,n.useState)("V\xe9rification du remboursement...");(0,n.useEffect)(()=>{const n=new URLSearchParams(t.search);let a=n.get("id")||n.get("reference")||n.get("txId")||n.get("transaction_id");a||(a=sessionStorage.getItem("pending_repayment_transaction_id")||null,a&&sessionStorage.removeItem("pending_repayment_transaction_id"));const i=n.get("status");if(console.log("[REMBOURSEMENT_RETOUR] Param\xe8tres URL:",{transactionId:a,status:i,allParams:Object.fromEntries(n.entries())}),!a)return o("success"),d("Remboursement confirm\xe9 ! Votre pr\xeat sera mis \xe0 jour sous peu."),null!==s&&void 0!==s&&s.id&&r.invalidateQueries({queryKey:["dashboardStats",s.id]}),void setTimeout(()=>{e("/dashboard")},3e3);"failure"===i||"cancel"===i?(o("error"),d("cancel"===i?"Paiement annul\xe9":"Remboursement non abouti")):"approved"===i||"transferred"===i||"success"===i||null===i||void 0===i?u(a):(o("error"),d("Remboursement non approuv\xe9"))},[t.search,e,s]);const u=async t=>{const n=async()=>{const e=await fetch("".concat("https://ab-pret-back.onrender.com","/api/loans/repayment-status?id=").concat(encodeURIComponent(t))),s=await e.json();return s.success&&s.loan?s:null};try{d("V\xe9rification du remboursement...");for(let t=1;t<=10;t++){const a=await n();if(a&&a.loan)return o("success"),d("Remboursement confirm\xe9, pr\xeat mis \xe0 jour !"),r.invalidateQueries({queryKey:["dashboardStats",null===s||void 0===s?void 0:s.id]}),void setTimeout(()=>e("/dashboard"),3e3);t<10&&(d("V\xe9rification du remboursement... (".concat(t,"/").concat(10,")")),await new Promise(e=>setTimeout(e,2e3)))}o("success"),d("Remboursement en cours de traitement. Rechargez la page d'accueil dans quelques instants pour voir le pr\xeat \xe0 jour."),r.invalidateQueries({queryKey:["dashboardStats",null===s||void 0===s?void 0:s.id]}),setTimeout(()=>e("/dashboard"),4e3)}catch(a){console.error("[REMBOURSEMENT_RETOUR] \u274c Erreur:",a),o("error"),d("Erreur de connexion au serveur. V\xe9rifiez que le backend est d\xe9marr\xe9.")}};return(0,i.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:(0,i.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8 max-w-md w-full text-center",children:[(0,i.jsxs)("div",{className:"mb-6",children:["loading"===a&&(0,i.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 bg-blue-100 rounded-full flex items-center justify-center",children:(0,i.jsxs)("svg",{className:"w-8 h-8 text-blue-600 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[(0,i.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,i.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}),"success"===a&&(0,i.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 bg-green-100 rounded-full flex items-center justify-center",children:(0,i.jsx)("svg",{className:"w-8 h-8 text-green-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),"error"===a&&(0,i.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 bg-red-100 rounded-full flex items-center justify-center",children:(0,i.jsx)("svg",{className:"w-8 h-8 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,i.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"success"===a?"Remboursement effectu\xe9 !":"error"===a?"Erreur":"V\xe9rification..."}),(0,i.jsx)("p",{className:"text-gray-600 mb-4",children:c})]}),(0,i.jsx)("button",{onClick:()=>{e("/dashboard")},className:"bg-blue-600 text-white py-3 px-6 rounded-lg font-medium hover:bg-blue-700 transition-colors",children:"Retour au tableau de bord"})]})})},iv=()=>{const{id:e}=(0,Ge.g)();return(0,i.jsx)("div",{className:"min-h-screen bg-gray-50 p-8",children:(0,i.jsxs)("div",{className:"max-w-2xl mx-auto",children:[(0,i.jsxs)("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:["Test Plan \xc9pargne - ID: ",e]}),(0,i.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[(0,i.jsx)("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Plan d'\xe9pargne cr\xe9\xe9 avec succ\xe8s !"}),(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsx)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:(0,i.jsxs)("p",{className:"text-green-800",children:["\u2705 Le plan d'\xe9pargne a \xe9t\xe9 cr\xe9\xe9 avec l'ID: ",(0,i.jsx)("strong",{children:e})]})}),(0,i.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,i.jsx)("p",{className:"text-blue-800",children:"\ud83c\udf89 La redirection fonctionne correctement !"})}),(0,i.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:(0,i.jsxs)("p",{className:"text-yellow-800",children:["\ud83d\udcdd Cette page de test confirme que le flux complet fonctionne :",(0,i.jsx)("br",{}),"1. Paiement FedaPay \u2705",(0,i.jsx)("br",{}),"2. Redirection vers RetourEpargne \u2705",(0,i.jsx)("br",{}),"3. Polling du backend \u2705",(0,i.jsx)("br",{}),"4. Redirection vers PlanEpargne \u2705"]})})]})]})]})})},ov=()=>{const e=(0,Ge.Zp)();return(0,i.jsx)("div",{className:"bg-gradient-to-br from-purple-50 via-violet-50 to-indigo-50 min-h-screen",children:(0,i.jsxs)("div",{className:"relative overflow-hidden",children:[(0,i.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-500 via-violet-600 to-indigo-600 opacity-10"}),(0,i.jsx)("div",{className:"relative px-4 lg:px-8 py-6",children:(0,i.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,i.jsxs)(yp.button,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5},onClick:()=>e("/menu"),className:"inline-flex items-center space-x-2 px-4 py-2 bg-white/80 backdrop-blur-sm rounded-full border border-white/50 shadow-lg hover:bg-white/90 transition-all duration-300 mb-8",children:[(0,i.jsx)(Mf.A,{size:16,className:"text-purple-600"}),(0,i.jsx)("span",{className:"text-sm font-medium text-purple-700",children:"Retour au menu"})]}),(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)(yp.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.8,delay:.2},className:"mb-8",children:(0,i.jsx)("div",{className:"inline-flex p-8 bg-gradient-to-r from-purple-500 to-violet-600 rounded-full text-white shadow-2xl",children:(0,i.jsx)(Vg.A,{size:80})})}),(0,i.jsxs)(yp.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.3},className:"text-4xl lg:text-6xl font-bold text-gray-900 mb-6",children:["Coaching et"," ",(0,i.jsx)("span",{className:"bg-gradient-to-r from-purple-600 via-violet-600 to-indigo-600 bg-clip-text text-transparent",children:"Finance Entrepreneuriale"})]}),(0,i.jsx)(yp.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.4},className:"mb-8",children:(0,i.jsxs)("div",{className:"inline-flex items-center space-x-3 px-6 py-3 bg-yellow-100 border border-yellow-300 rounded-full",children:[(0,i.jsx)(kp,{size:20,className:"text-yellow-600"}),(0,i.jsx)("span",{className:"text-lg font-semibold text-yellow-800",children:"Bient\xf4t disponible"})]})}),(0,i.jsxs)(yp.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.5},className:"text-xl lg:text-2xl text-gray-600 mb-12 font-light max-w-2xl mx-auto",children:["Nos services de coaching et de finance entrepreneuriale sont en cours de d\xe9veloppement.",(0,i.jsx)("br",{}),(0,i.jsx)("span",{className:"text-purple-600 font-medium",children:"Revenez bient\xf4t !"})]}),(0,i.jsx)(yp.button,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.6},onClick:()=>e("/menu"),className:"bg-gradient-to-r from-purple-500 to-violet-600 text-white px-8 py-4 rounded-2xl shadow-xl hover:shadow-2xl transition-all duration-300 hover:scale-105",children:"Retour au menu principal"})]})]})})]})})},lv=(0,pt.A)("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]),cv=(0,pt.A)("Diamond",[["path",{d:"M2.7 10.3a2.41 2.41 0 0 0 0 3.41l7.59 7.59a2.41 2.41 0 0 0 3.41 0l7.59-7.59a2.41 2.41 0 0 0 0-3.41l-7.59-7.59a2.41 2.41 0 0 0-3.41 0Z",key:"1f1r0c"}]]),dv=(0,pt.A)("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]),uv=(0,pt.A)("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]),hv=()=>{const e=(0,Ge.Zp)(),{user:t}=ut(),{showError:s}=yt(),[r,a]=(0,n.useState)("overview"),[o,l]=(0,n.useState)(!1),[c,d]=(0,n.useState)(!0),[u,h]=(0,n.useState)({currentScore:0,maxScore:5,level:"Bronze",nextLevel:"Silver",pointsToNextLevel:1,completedLoans:0,loansForNextBonus:1,totalSavings:0,phoneCreditEarned:0,nextReward:"Premier bonus apr\xe8s 1 remboursement",history:[]}),m=[{name:"Bronze",minScore:0,maxScore:1,color:"from-amber-600 to-amber-800",icon:ff},{name:"Silver",minScore:2,maxScore:2,color:"from-gray-400 to-gray-600",icon:Ug},{name:"Gold",minScore:3,maxScore:3,color:"from-yellow-400 to-yellow-600",icon:Zf},{name:"Platinum",minScore:4,maxScore:4,color:"from-blue-400 to-blue-600",icon:lv},{name:"Diamond",minScore:5,maxScore:5,color:"from-purple-400 to-purple-600",icon:cv}],p=m.find(e=>u.currentScore>=e.minScore&&u.currentScore<=e.maxScore),f=e=>{const t=m.find(t=>e>=t.minScore&&e<=t.maxScore);return t?t.color:"from-gray-400 to-gray-600"},g=(0,n.useCallback)(async()=>{if(null!==t&&void 0!==t&&t.id)try{d(!0);const[s,r]=await Promise.all([(0,ct.Or)(t.id),(0,ct.k5)(t.id)]);if(s.success&&r.success){var e,n;const t=s.data||[],a=r.data||[],i=new Map(t.map(e=>[e.id,e])),o=a.filter(e=>"completed"===(e.status||"").toLowerCase()),l=new Set,c=new Map;o.forEach(e=>{const t=i.get(e.loan_id);if(!t)return;const s=t.approved_at?new Date(t.approved_at):null;if(!s)return;const n=parseInt(t.duration_months||t.duration||30,10),r=new Date(s.getTime()+24*n*60*60*1e3),a=new Date(e.payment_date||e.created_at||new Date);if(a.getTime()<=r.getTime()){l.add(e.loan_id);const t=c.get(e.loan_id);(!t||a.getTime()<t.paymentDate.getTime())&&c.set(e.loan_id,{id:e.id,paymentDate:a})}});const d=Math.max(0,Math.min(5,l.size)),u=Array.from(c.entries()).map(e=>{let[t,s]=e;return{id:s.id,date:s.paymentDate.toISOString(),points:1,action:"Remboursement \xe0 temps du pr\xeat #".concat(t)}}),p=t.filter(e=>{const t=(e.status||"").toLowerCase();return"completed"===t||"rembours\xe9"===t}).length,f=m.find(e=>e.minScore>d)||m[m.length-1],g=Math.max(0,(null!==(e=f.minScore)&&void 0!==e?e:d)-d),x=d>=5?"Score maximum atteint":"1 remboursement \xe0 temps = +1 point";h({currentScore:d,maxScore:5,level:(null===(n=m.find(e=>d>=e.minScore&&d<=e.maxScore))||void 0===n?void 0:n.name)||"Bronze",nextLevel:f.name,pointsToNextLevel:g,completedLoans:p,loansForNextBonus:Math.max(0,1),totalSavings:0,phoneCreditEarned:0,nextReward:x,history:u})}}catch(r){console.error("[LOYALTY] Erreur lors du calcul du score:",r),s("Erreur lors du chargement du score de fid\xe9lit\xe9")}finally{d(!1)}else d(!1)},[null===t||void 0===t?void 0:t.id,s]);(0,n.useEffect)(()=>{g()},[g]);const x=[{title:"R\xe9duction de 2% sur les frais",description:"\xc9conomisez sur tous vos pr\xeats futurs",icon:dv,color:"text-green-600",bgColor:"bg-green-100"},{title:"Forfait d'internet",description:"Recevez un forfait internet sur le num\xe9ro de votre choix",icon:vf,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Traitement prioritaire",description:"Vos demandes sont trait\xe9es en priorit\xe9",icon:mf,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Taux d'int\xe9r\xeat pr\xe9f\xe9rentiels",description:"B\xe9n\xe9ficiez de taux r\xe9duits sur vos pr\xeats",icon:Vg.A,color:"text-orange-600",bgColor:"bg-orange-100"}],v=[{step:1,title:"Remboursez un pr\xeat",description:"Remboursez votre pr\xeat dans les d\xe9lais impartis",icon:hx.A,color:"from-blue-500 to-blue-600"},{step:2,title:"Gagnez 1 point",description:"Votre score de fid\xe9lit\xe9 augmente de 1 point",icon:mt.A,color:"from-green-500 to-green-600"},{step:3,title:"Progressez vers le niveau sup\xe9rieur",description:"Atteignez le niveau suivant avec plus de remboursements",icon:Vg.A,color:"from-purple-500 to-purple-600"},{step:4,title:"D\xe9bloquez les avantages",description:"Profitez de r\xe9ductions et de forfaits gratuits",icon:Jf,color:"from-orange-500 to-orange-600"}];return(0,i.jsxs)("div",{className:"bg-gradient-to-br from-gray-50 to-blue-50",children:[(0,i.jsx)("div",{className:"bg-white shadow-sm border-b border-gray-200",children:(0,i.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,i.jsxs)("div",{className:"flex items-center justify-between h-16",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,i.jsx)(Ef,{variant:"ghost",onClick:()=>e("/dashboard"),className:"p-2 hover:bg-gray-100 rounded-lg",children:(0,i.jsx)(Mf.A,{size:20})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h1",{className:"text-xl font-bold text-gray-900 font-montserrat",children:"Score de Fid\xe9lit\xe9"}),(0,i.jsx)("p",{className:"text-sm text-gray-600 font-montserrat",children:"Programme de r\xe9compenses et avantages"})]})]}),(0,i.jsx)(Ef,{variant:"ghost",onClick:()=>l(!0),className:"p-2 hover:bg-gray-100 rounded-lg",children:(0,i.jsx)(gt,{size:20})})]})})}),(0,i.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,i.jsx)(yp.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"mb-8",children:c?(0,i.jsx)(gx,{className:"bg-gradient-to-br from-white to-gray-50 border-0 shadow-xl",children:(0,i.jsxs)("div",{className:"p-8 text-center",children:[(0,i.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,i.jsx)("p",{className:"text-gray-600",children:"Chargement du score de fid\xe9lit\xe9..."})]})}):(0,i.jsx)(gx,{className:"bg-gradient-to-br from-white to-gray-50 border-0 shadow-xl",children:(0,i.jsxs)("div",{className:"p-8 text-center",children:[(0,i.jsx)("div",{className:"flex justify-center mb-6",children:(0,i.jsx)("div",{className:"p-6 rounded-full bg-gradient-to-br ".concat(f(u.currentScore)),children:n.createElement((e=>{const t=m.find(t=>e>=t.minScore&&e<=t.maxScore);return t?t.icon:ff})(u.currentScore),{size:48,className:"text-white"})})}),(0,i.jsxs)("h2",{className:"text-4xl font-bold text-gray-900 font-montserrat mb-2",children:[u.currentScore,"/5"]}),(0,i.jsxs)("p",{className:"text-xl font-semibold text-gray-700 font-montserrat mb-4",children:["Niveau ",null===p||void 0===p?void 0:p.name]}),(0,i.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4 mb-6 max-w-md mx-auto",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,i.jsx)(gt,{size:16,className:"text-blue-600"}),(0,i.jsx)("p",{className:"text-sm font-medium text-blue-800",children:"Syst\xe8me mis \xe0 jour"})]}),(0,i.jsx)("p",{className:"text-xs text-blue-700",children:"Le syst\xe8me de score de fid\xe9lit\xe9 a \xe9t\xe9 mis \xe0 jour. Tous les comptes commencent maintenant \xe0 0/5 points. Votre progression se fera \xe0 partir de vos prochains remboursements."})]}),(0,i.jsxs)("div",{className:"w-full max-w-md mx-auto mb-6",children:[(0,i.jsxs)("div",{className:"flex justify-between text-sm text-gray-600 mb-2",children:[(0,i.jsxs)("span",{children:["Progression vers ",u.nextLevel]}),(0,i.jsxs)("span",{children:[u.pointsToNextLevel," point",u.pointsToNextLevel>1?"s":""," restant",u.pointsToNextLevel>1?"s":""]})]}),(0,i.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-3",children:(0,i.jsx)(yp.div,{className:"h-3 rounded-full bg-gradient-to-r ".concat(f(u.currentScore)),initial:{width:0},animate:{width:"".concat(u.currentScore/u.maxScore*100,"%")},transition:{duration:1,delay:.5}})}),(0,i.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[Math.round(u.currentScore/u.maxScore*100),"% du score maximum atteint"]})]}),(0,i.jsxs)("div",{className:"grid grid-cols-3 gap-4 max-w-md mx-auto",children:[(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:u.completedLoans}),(0,i.jsx)("p",{className:"text-sm text-gray-600",children:"Pr\xeats termin\xe9s"})]}),(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("p",{className:"text-2xl font-bold text-green-600",children:u.loansForNextBonus}),(0,i.jsx)("p",{className:"text-sm text-gray-600",children:"Pour le bonus"})]}),(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:(0,Dp.vv)(u.totalSavings)}),(0,i.jsx)("p",{className:"text-sm text-gray-600",children:"\xc9conomies"})]})]})]})})}),(0,i.jsx)(yp.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:"mb-8",children:(0,i.jsx)("div",{className:"flex space-x-1 bg-white rounded-xl p-1 shadow-sm",children:[{id:"overview",label:"Vue d'ensemble",icon:hx.A},{id:"benefits",label:"Avantages",icon:Jf},{id:"how-it-works",label:"Comment \xe7a marche",icon:Nx},{id:"history",label:"Historique",icon:kp}].map(e=>(0,i.jsxs)("button",{onClick:()=>a(e.id),className:"flex-1 flex items-center justify-center space-x-2 py-3 px-4 rounded-lg font-medium transition-all duration-200 ".concat(r===e.id?"bg-primary-500 text-white shadow-sm":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"),children:[n.createElement(e.icon,{size:16}),(0,i.jsx)("span",{className:"font-montserrat",children:e.label})]},e.id))})}),(0,i.jsxs)(cf,{mode:"wait",children:["overview"===r&&(0,i.jsxs)(yp.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},className:"space-y-4",children:[(0,i.jsx)(gx,{className:"bg-gradient-to-br from-blue-500 to-blue-600 text-white",children:(0,i.jsxs)("div",{className:"p-6",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{className:"text-xl font-bold font-montserrat mb-2",children:"Prochain objectif"}),(0,i.jsx)("p",{className:"text-blue-100",children:"Terminez votre 4\xe8me pr\xeat pour d\xe9bloquer le bonus"})]}),(0,i.jsx)("div",{className:"p-3 bg-white/20 rounded-full",children:(0,i.jsx)(hx.A,{size:24})})]}),(0,i.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,i.jsxs)("div",{className:"flex-1",children:[(0,i.jsxs)("div",{className:"flex justify-between text-sm mb-2",children:[(0,i.jsx)("span",{children:"Progression"}),(0,i.jsxs)("span",{children:[u.completedLoans,"/4 pr\xeats"]})]}),(0,i.jsx)("div",{className:"w-full bg-white/20 rounded-full h-2",children:(0,i.jsx)("div",{className:"bg-white h-2 rounded-full transition-all duration-500",style:{width:"".concat(u.completedLoans/4*100,"%")}})})]}),(0,i.jsx)(Ef,{variant:"white",onClick:()=>e("/loan-request"),className:"whitespace-nowrap",children:"Demander un pr\xeat"})]})]})}),(0,i.jsx)("div",{className:"grid grid-cols-1 gap-6",children:(0,i.jsx)(gx,{className:"bg-gradient-to-br from-purple-500 to-purple-600 text-white",children:(0,i.jsxs)("div",{className:"p-6",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{className:"text-lg font-bold font-montserrat mb-1",children:"Forfait internet"}),(0,i.jsx)("p",{className:"text-purple-100 text-sm",children:"Prochaine r\xe9compense"})]}),(0,i.jsx)("div",{className:"p-2 bg-white/20 rounded-full",children:(0,i.jsx)(vf,{size:20})})]}),(0,i.jsx)("p",{className:"text-lg font-semibold",children:u.nextReward})]})})})]},"overview"),"benefits"===r&&(0,i.jsx)(yp.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},children:(0,i.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:x.map((e,t)=>(0,i.jsx)(yp.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*t},children:(0,i.jsx)(gx,{className:"hover:shadow-lg transition-all duration-200 transform hover:scale-105",children:(0,i.jsx)("div",{className:"p-6",children:(0,i.jsxs)("div",{className:"flex items-start space-x-4",children:[(0,i.jsx)("div",{className:"p-3 rounded-lg ".concat(e.bgColor),children:n.createElement(e.icon,{size:24,className:e.color})}),(0,i.jsxs)("div",{className:"flex-1",children:[(0,i.jsx)("h3",{className:"text-lg font-semibold text-gray-900 font-montserrat mb-2",children:e.title}),(0,i.jsx)("p",{className:"text-gray-600 font-montserrat",children:e.description})]})]})})})},e.title))})},"benefits"),"how-it-works"===r&&(0,i.jsx)(yp.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},children:(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsx)(gx,{className:"bg-gradient-to-br from-blue-50 to-indigo-50 border-blue-200",children:(0,i.jsxs)("div",{className:"p-6",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,i.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,i.jsx)(uv,{size:20,className:"text-blue-600"})}),(0,i.jsx)("h3",{className:"text-xl font-bold text-gray-900 font-montserrat",children:"Comment fonctionne le programme de fid\xe9lit\xe9 ?"})]}),(0,i.jsx)("p",{className:"text-gray-700 font-montserrat",children:"Notre programme de fid\xe9lit\xe9 r\xe9compense les clients qui remboursent leurs pr\xeats dans les d\xe9lais. Plus vous \xeates fid\xe8le, plus vous b\xe9n\xe9ficiez d'avantages exclusifs."})]})}),(0,i.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:v.map((e,t)=>(0,i.jsx)(yp.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*t},children:(0,i.jsx)(gx,{className:"text-center hover:shadow-lg transition-all duration-200",children:(0,i.jsxs)("div",{className:"p-6",children:[(0,i.jsx)("div",{className:"inline-flex items-center justify-center w-12 h-12 rounded-full bg-gradient-to-br ".concat(e.color," text-white font-bold text-lg mb-4"),children:e.step}),(0,i.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-gradient-to-br ".concat(e.color," text-white mb-4"),children:n.createElement(e.icon,{size:24})}),(0,i.jsx)("h4",{className:"text-lg font-semibold text-gray-900 font-montserrat mb-2",children:e.title}),(0,i.jsx)("p",{className:"text-gray-600 font-montserrat text-sm",children:e.description})]})})},e.step))}),(0,i.jsx)(gx,{className:"bg-gradient-to-br from-green-50 to-emerald-50 border-green-200",children:(0,i.jsxs)("div",{className:"p-6",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,i.jsx)("div",{className:"p-2 bg-green-100 rounded-lg",children:(0,i.jsx)(ri,{size:20,className:"text-green-600"})}),(0,i.jsx)("h3",{className:"text-lg font-bold text-gray-900 font-montserrat",children:"Avantages cumulatifs"})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,i.jsx)(mt.A,{size:16,className:"text-green-600"}),(0,i.jsx)("span",{className:"text-sm font-montserrat",children:"Score de fid\xe9lit\xe9 +1 point"})]}),(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,i.jsx)(mt.A,{size:16,className:"text-green-600"}),(0,i.jsx)("span",{className:"text-sm font-montserrat",children:"R\xe9duction de 2% sur les frais"})]})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,i.jsx)(mt.A,{size:16,className:"text-green-600"}),(0,i.jsx)("span",{className:"text-sm font-montserrat",children:"Forfait internet gratuit"})]}),(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,i.jsx)(mt.A,{size:16,className:"text-green-600"}),(0,i.jsx)("span",{className:"text-sm font-montserrat",children:"Traitement prioritaire"})]})]})]})]})})]})},"how-it-works"),"history"===r&&(0,i.jsx)(yp.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},children:(0,i.jsx)(gx,{children:(0,i.jsxs)("div",{className:"p-6",children:[(0,i.jsx)("h3",{className:"text-lg font-semibold text-gray-900 font-montserrat mb-4",children:"Historique des points"}),(0,i.jsx)("div",{className:"space-y-4",children:u.history.map((e,t)=>(0,i.jsxs)(yp.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*t},className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,i.jsx)("div",{className:"p-2 bg-green-100 rounded-full",children:(0,i.jsx)(Vg.A,{size:16,className:"text-green-600"})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"font-medium text-gray-900 font-montserrat",children:e.action}),(0,i.jsx)("p",{className:"text-sm text-gray-600 font-montserrat",children:new Date(e.date).toLocaleDateString("fr-FR")})]})]}),(0,i.jsx)("div",{className:"text-right",children:(0,i.jsxs)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:["+",e.points," points"]})})]},e.id))})]})})},"history")]})]}),(0,i.jsx)(cf,{children:o&&(0,i.jsx)(yp.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:()=>l(!1),children:(0,i.jsxs)(yp.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-2xl p-6 max-w-md w-full max-h-[80vh] overflow-y-auto",onClick:e=>e.stopPropagation(),children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,i.jsx)("h3",{className:"text-lg font-bold text-gray-900 font-montserrat",children:"\xc0 propos du score de fid\xe9lit\xe9"}),(0,i.jsx)("button",{onClick:()=>l(!1),className:"p-1 hover:bg-gray-100 rounded-full",children:(0,i.jsx)(xt,{size:20})})]}),(0,i.jsxs)("div",{className:"space-y-4 text-sm text-gray-700 font-montserrat",children:[(0,i.jsx)("p",{children:"Le score de fid\xe9lit\xe9 est un programme de r\xe9compenses qui vous permet de b\xe9n\xe9ficier d'avantages exclusifs en fonction de votre historique de remboursement."}),(0,i.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg",children:[(0,i.jsx)("h4",{className:"font-semibold text-blue-900 mb-2",children:"Comment gagner des points :"}),(0,i.jsxs)("ul",{className:"space-y-1 text-blue-800",children:[(0,i.jsx)("li",{children:"\u2022 Rembourser un pr\xeat dans les d\xe9lais impartis"}),(0,i.jsx)("li",{children:"\u2022 +1 point par remboursement \xe0 temps"}),(0,i.jsx)("li",{children:"\u2022 Score maximum : 5 points"})]})]}),(0,i.jsxs)("div",{className:"bg-green-50 p-4 rounded-lg",children:[(0,i.jsx)("h4",{className:"font-semibold text-green-900 mb-2",children:"Avantages d\xe9bloqu\xe9s :"}),(0,i.jsxs)("ul",{className:"space-y-1 text-green-800",children:[(0,i.jsx)("li",{children:"\u2022 R\xe9duction de 2% sur les frais"}),(0,i.jsx)("li",{children:"\u2022 Forfait internet gratuit"}),(0,i.jsx)("li",{children:"\u2022 Traitement prioritaire"}),(0,i.jsx)("li",{children:"\u2022 Taux d'int\xe9r\xeat pr\xe9f\xe9rentiels"})]})]}),(0,i.jsx)("p",{className:"text-xs text-gray-500",children:"Les avantages sont cumulatifs et s'appliquent automatiquement une fois les conditions remplies."})]})]})})})]})},mv=()=>{const[e,t]=(0,n.useState)(""),[s,r]=(0,n.useState)(null),[a,o]=(0,n.useState)(!1),[l,c]=(0,n.useState)("");return(0,i.jsx)("div",{className:"min-h-screen bg-gray-50 py-12 px-4",children:(0,i.jsx)("div",{className:"max-w-4xl mx-auto",children:(0,i.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-8",children:[(0,i.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-8 text-center",children:"\ud83d\udd0d Diagnostic des Utilisateurs"}),(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Num\xe9ro de t\xe9l\xe9phone \xe0 v\xe9rifier"}),(0,i.jsxs)("div",{className:"flex space-x-2",children:[(0,i.jsx)("input",{type:"text",value:e,onChange:e=>t(e.target.value),placeholder:"22912345678",className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),(0,i.jsx)("button",{onClick:async()=>{if(e.trim()){o(!0),c(""),r(null);try{console.log("[DIAGNOSTIC] V\xe9rification de l'utilisateur:",e);const{data:s,error:n}=await lt.ND.from("users").select("*").eq("phone_number",e).single();if(n)return console.error("[DIAGNOSTIC] Erreur table users:",n),void c("Utilisateur non trouv\xe9 dans la table users: ".concat(n.message));console.log("[DIAGNOSTIC] Utilisateur trouv\xe9 dans users:",s);let a=null;try{const{data:e,error:t}=await lt.ND.auth.admin.getUserById(s.id);!t&&e&&(a=e.user,console.log("[DIAGNOSTIC] Utilisateur trouv\xe9 dans auth.users:",a))}catch(t){console.log("[DIAGNOSTIC] Impossible d'acc\xe9der \xe0 auth.users (pas de droits admin)")}const i=e.replace(/[^0-9]/g,""),o=new Date(s.created_at).getTime(),l="user.".concat(i,".").concat(o,"@gmail.com");r({user:s,authUser:a,tempEmail:l,cleanPhone:i})}catch(l){console.error("[DIAGNOSTIC] Erreur:",l),c("Erreur lors de la v\xe9rification: ".concat(l.message))}finally{o(!1)}}else c("Veuillez entrer un num\xe9ro de t\xe9l\xe9phone")},disabled:a,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:a?"V\xe9rification...":"V\xe9rifier"})]})]}),l&&(0,i.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:l}),s&&(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"\ud83d\udccb Informations Utilisateur"}),(0,i.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,i.jsx)("h3",{className:"font-semibold text-gray-800 mb-3",children:"Table users"}),(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:"ID:"})," ",s.user.id]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:"Email:"})," ",s.user.email||"Non d\xe9fini"]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:"T\xe9l\xe9phone:"})," ",s.user.phone_number]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:"Pr\xe9nom:"})," ",s.user.first_name]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:"Nom:"})," ",s.user.last_name]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:"R\xf4le:"})," ",s.user.role]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:"Statut:"})," ",s.user.status]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:"Cr\xe9\xe9 le:"})," ",new Date(s.user.created_at).toLocaleString()]})]})]}),s.authUser?(0,i.jsxs)("div",{className:"bg-green-50 rounded-lg p-4",children:[(0,i.jsx)("h3",{className:"font-semibold text-green-800 mb-3",children:"\u2705 Table auth.users"}),(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:"ID:"})," ",s.authUser.id]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:"Email:"})," ",s.authUser.email]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:"Email v\xe9rifi\xe9:"})," ",s.authUser.email_confirmed_at?"Oui":"Non"]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:"Derni\xe8re connexion:"})," ",s.authUser.last_sign_in_at?new Date(s.authUser.last_sign_in_at).toLocaleString():"Jamais"]})]})]}):(0,i.jsxs)("div",{className:"bg-yellow-50 rounded-lg p-4",children:[(0,i.jsx)("h3",{className:"font-semibold text-yellow-800 mb-3",children:"\u26a0\ufe0f Table auth.users"}),(0,i.jsx)("p",{className:"text-yellow-700",children:"Utilisateur non trouv\xe9 dans auth.users. Cela explique pourquoi la connexion \xe9choue."})]}),(0,i.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4",children:[(0,i.jsx)("h3",{className:"font-semibold text-blue-800 mb-3",children:"\ud83d\udce7 Email temporaire reconstruit"}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)("div",{children:(0,i.jsx)("strong",{children:"Email utilis\xe9 pour la connexion:"})}),(0,i.jsx)("code",{className:"bg-blue-100 px-2 py-1 rounded text-sm",children:s.tempEmail}),(0,i.jsx)("div",{className:"text-sm text-blue-600",children:"Cet email est reconstruit \xe0 partir du t\xe9l\xe9phone et de la date de cr\xe9ation."})]})]}),(0,i.jsxs)("div",{className:"bg-purple-50 rounded-lg p-4",children:[(0,i.jsx)("h3",{className:"font-semibold text-purple-800 mb-3",children:"\ud83d\udca1 Recommandations"}),(0,i.jsxs)("ul",{className:"text-sm text-purple-700 space-y-1",children:[!s.authUser&&(0,i.jsx)("li",{children:"\u2022 L\\'utilisateur n\\'existe pas dans auth.users - il faut le recr\xe9er avec signUpWithPhone"}),"approved"!==s.user.status&&(0,i.jsx)("li",{children:'\u2022 Le statut n\\\'est pas "approved" - mettre \xe0 jour le statut'}),(0,i.jsx)("li",{children:"\u2022 V\xe9rifier que le mot de passe correspond \xe0 l\\'email temporaire"}),(0,i.jsx)("li",{children:"\u2022 Essayer de se connecter avec l\\'email temporaire directement"})]})]})]})]})]})})})},pv=()=>{const[e,t]=(0,n.useState)(null),[s,r]=(0,n.useState)(!1),[a,o]=(0,n.useState)(null),l=async()=>{r(!0),o(null);try{console.log("\ud83d\udd0d Test de la route /api/health...");const e=await fetch("/api/health");if(console.log("\ud83d\udce1 R\xe9ponse re\xe7ue:",e.status,e.statusText),!e.ok)throw new Error("HTTP ".concat(e.status,": ").concat(e.statusText));const s=e.headers.get("content-type");if(!s||!s.includes("application/json"))throw new Error("Type de contenu invalide: ".concat(s));const n=await e.text();if(console.log("\ud83d\udcc4 Contenu brut:",n),!n||""===n.trim())throw new Error("R\xe9ponse vide du serveur");const r=JSON.parse(n);console.log("\u2705 JSON pars\xe9:",r),t(r)}catch(e){console.error("\u274c Erreur lors du test:",e);let t=e.message;e.message.includes("Failed to fetch")?t="Impossible de se connecter au serveur API. V\xe9rifiez que le serveur est d\xe9marr\xe9 (npm run start:api)":e.message.includes("Unexpected end of JSON input")?t="R\xe9ponse invalide du serveur. Le serveur API pourrait ne pas \xeatre d\xe9marr\xe9.":e.message.includes("HTTP")&&(t="Erreur HTTP: ".concat(e.message)),o(t)}finally{r(!1)}};return(0,n.useEffect)(()=>{l()},[]),(0,i.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:(0,i.jsxs)("div",{className:"max-w-md w-full bg-white rounded-2xl shadow-xl p-8 text-center",children:[(0,i.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-6",children:"Test API Health"}),s&&(0,i.jsxs)("div",{className:"mb-4",children:[(0,i.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),(0,i.jsx)("p",{className:"text-gray-600 mt-2",children:"Test en cours..."})]}),a&&(0,i.jsxs)("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:[(0,i.jsx)("p",{className:"text-red-700 font-semibold",children:"\u274c Erreur:"}),(0,i.jsx)("p",{className:"text-red-600 text-sm",children:a}),(0,i.jsxs)("div",{className:"mt-3 text-xs text-red-500",children:[(0,i.jsx)("p",{children:"\ud83d\udca1 Solutions possibles:"}),(0,i.jsxs)("ul",{className:"list-disc list-inside mt-1 space-y-1",children:[(0,i.jsxs)("li",{children:["D\xe9marrer le serveur API: ",(0,i.jsx)("code",{children:"npm run start:api"})]}),(0,i.jsx)("li",{children:"V\xe9rifier que le port 5000 est libre"}),(0,i.jsx)("li",{children:"Red\xe9marrer l'application React"})]})]})]}),e&&(0,i.jsxs)("div",{className:"mb-4 p-4 bg-green-50 border border-green-200 rounded-lg",children:[(0,i.jsx)("p",{className:"text-green-700 font-semibold",children:"\u2705 API fonctionnelle"}),(0,i.jsx)("pre",{className:"text-sm text-green-600 mt-2",children:JSON.stringify(e,null,2)})]}),(0,i.jsx)("button",{onClick:l,disabled:s,className:"bg-blue-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:s?"Test en cours...":"Tester \xe0 nouveau"}),(0,i.jsxs)("div",{className:"mt-6 text-sm text-gray-500",children:[(0,i.jsxs)("p",{children:["Cette page teste la route ",(0,i.jsx)("code",{children:"/api/health"})]}),(0,i.jsx)("p",{children:"via le proxy de d\xe9veloppement."}),(0,i.jsxs)("p",{className:"mt-2 text-xs",children:["Serveur API: localhost:5000",(0,i.jsx)("br",{}),"Frontend: localhost:3001"]})]})]})})},fv=(0,pt.A)("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]),gv=()=>{const[e]=ot(),t=(0,Ge.Zp)(),[s,r]=(0,n.useState)("loading"),[a,o]=(0,n.useState)(""),[l,c]=(0,n.useState)("");(0,n.useEffect)(()=>{const t=setTimeout(()=>{r("loading"),o(e.get("amount")||"50000"),c(e.get("transaction_id")||"mock_123")},1e3);return()=>clearTimeout(t)},[e]);const d=async()=>{r("success");try{const s=e.get("loan_id"),n=e.get("user_id");console.log("\ud83d\udd04 Traitement du remboursement simul\xe9...",{loanId:s,userId:n,amount:a,transactionId:l});const r=await fetch("/api/fedapay/webhook",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({transaction:{id:l,status:"approved",amount:parseInt(a),payment_method:"mobile_money",paid_at:(new Date).toISOString(),metadata:{loan_id:s,user_id:n,type:"loan_repayment"}}})}),i=await r.json();console.log("\u2705 Webhook trait\xe9:",i),setTimeout(()=>{const e="/remboursement/success?transaction_id=".concat(l,"&amount=").concat(a,"&loan_id=").concat(s);t(e)},2e3)}catch(s){console.error("\u274c Erreur traitement remboursement:",s),r("failed")}},u=async()=>{r("failed");try{const s=e.get("loan_id"),n=e.get("user_id");console.log("\ud83d\udd04 Traitement de l'\xe9chec de paiement simul\xe9...",{loanId:s,userId:n,amount:a,transactionId:l});const r=await fetch("/api/fedapay/webhook",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({transaction:{id:l,status:"failed",amount:parseInt(a),failure_reason:"Paiement refus\xe9 par l'utilisateur",failed_at:(new Date).toISOString(),metadata:{loan_id:s,user_id:n,type:"loan_repayment"}}})}),i=await r.json();console.log("\u274c Webhook \xe9chec trait\xe9:",i),setTimeout(()=>{const e="/remboursement/failure?transaction_id=".concat(l,"&amount=").concat(a,"&loan_id=").concat(s);t(e)},2e3)}catch(s){console.error("\u274c Erreur traitement \xe9chec:",s)}},h=e=>new Intl.NumberFormat("fr-CI",{style:"currency",currency:"XOF"}).format(e/100);return"loading"===s?(0,i.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:(0,i.jsxs)(yp.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"max-w-md w-full bg-white rounded-2xl shadow-xl p-8 text-center",children:[(0,i.jsxs)("div",{className:"mb-6",children:[(0,i.jsx)("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,i.jsx)(Hp.A,{className:"w-8 h-8 text-blue-600"})}),(0,i.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"FedaPay Simulation"}),(0,i.jsx)("p",{className:"text-gray-600",children:"Page de paiement simul\xe9e pour les tests"})]}),(0,i.jsx)("div",{className:"bg-gray-50 rounded-xl p-6 mb-6",children:(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"Montant \xe0 payer"}),(0,i.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:h(a)}),(0,i.jsxs)("p",{className:"text-xs text-gray-500 mt-2",children:["Transaction: ",l]})]})}),(0,i.jsxs)("div",{className:"space-y-3",children:[(0,i.jsxs)("button",{onClick:d,className:"w-full bg-green-600 hover:bg-green-700 text-white font-semibold py-3 px-6 rounded-xl transition-colors flex items-center justify-center space-x-2",children:[(0,i.jsx)(mt.A,{className:"w-5 h-5"}),(0,i.jsx)("span",{children:"Simuler Paiement R\xe9ussi"})]}),(0,i.jsxs)("button",{onClick:u,className:"w-full bg-red-600 hover:bg-red-700 text-white font-semibold py-3 px-6 rounded-xl transition-colors flex items-center justify-center space-x-2",children:[(0,i.jsx)(Zg,{className:"w-5 h-5"}),(0,i.jsx)("span",{children:"Simuler Paiement \xc9chou\xe9"})]})]}),(0,i.jsxs)("div",{className:"mt-6 text-xs text-gray-500",children:[(0,i.jsx)("p",{children:"\u26a0\ufe0f Cette page simule FedaPay pour les tests"}),(0,i.jsx)("p",{children:"En production, vous seriez redirig\xe9 vers FedaPay r\xe9el"})]})]})}):(0,i.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:(0,i.jsxs)(yp.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"max-w-md w-full bg-white rounded-2xl shadow-xl p-8 text-center",children:["success"===s?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,i.jsx)(mt.A,{className:"w-8 h-8 text-green-600"})}),(0,i.jsx)("h2",{className:"text-2xl font-bold text-green-900 mb-2",children:"Paiement R\xe9ussi !"}),(0,i.jsx)("p",{className:"text-green-700 mb-4",children:"Redirection en cours..."})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,i.jsx)(Zg,{className:"w-8 h-8 text-red-600"})}),(0,i.jsx)("h2",{className:"text-2xl font-bold text-red-900 mb-2",children:"Paiement \xc9chou\xe9"}),(0,i.jsx)("p",{className:"text-red-700 mb-4",children:"Redirection en cours..."})]}),(0,i.jsx)("div",{className:"flex items-center justify-center",children:(0,i.jsx)(fv,{className:"w-6 h-6 animate-spin text-gray-600"})})]})})};setTimeout(()=>{try{s(6146)}catch(Nt){}},100),setTimeout(()=>{try{s(3381)}catch(Nt){}},100),setTimeout(()=>{try{s(1155)}catch(Nt){}},100);const xv=(0,n.lazy)(()=>Promise.all([s.e(521),s.e(407)]).then(s.bind(s,9407))),vv=()=>(0,i.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:(0,i.jsxs)("div",{className:"max-w-2xl w-full bg-white rounded-2xl shadow-xl p-8 text-center",children:[(0,i.jsxs)("div",{className:"mb-8",children:[(0,i.jsx)("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"AB Campus Finance"}),(0,i.jsx)("div",{className:"w-24 h-24 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-full mx-auto flex items-center justify-center",children:(0,i.jsx)("svg",{className:"w-12 h-12 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})})]}),(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[(0,i.jsx)("h3",{className:"text-lg font-semibold text-yellow-800 mb-2",children:"Configuration requise"}),(0,i.jsx)("p",{className:"text-yellow-700",children:"L'application n\xe9cessite une configuration Supabase pour fonctionner."})]}),(0,i.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 text-left",children:[(0,i.jsx)("h4",{className:"font-semibold text-gray-800 mb-2",children:"\xc9tapes de configuration :"}),(0,i.jsxs)("ol",{className:"list-decimal list-inside space-y-2 text-gray-600 text-sm",children:[(0,i.jsxs)("li",{children:["Cr\xe9ez un projet sur ",(0,i.jsx)("a",{href:"https://supabase.com",className:"text-blue-600 hover:underline",target:"_blank",rel:"noopener noreferrer",children:"Supabase.com"})]}),(0,i.jsx)("li",{children:"Copiez l'URL et la cl\xe9 anonyme depuis Settings \u2192 API"}),(0,i.jsxs)("li",{children:["Cr\xe9ez un fichier ",(0,i.jsx)("code",{className:"bg-gray-200 px-1 rounded",children:".env.local"})," \xe0 la racine du projet"]}),(0,i.jsx)("li",{children:"Ajoutez vos cl\xe9s Supabase"}),(0,i.jsx)("li",{children:"Red\xe9marrez l'application"})]})]}),(0,i.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,i.jsx)("h4",{className:"font-semibold text-blue-800 mb-2",children:"Exemple de fichier .env.local :"}),(0,i.jsx)("pre",{className:"text-xs text-blue-700 bg-blue-100 p-3 rounded overflow-x-auto",children:"REACT_APP_SUPABASE_URL=https://your-project.supabase.co\nREACT_APP_SUPABASE_ANON_KEY=your_anon_key_here\nREACT_APP_BACKEND_URL=http://localhost:5000"})]}),(0,i.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[(0,i.jsx)("h4",{className:"font-semibold text-red-800 mb-2",children:"Diagnostic de la configuration :"}),(0,i.jsxs)("div",{className:"text-sm text-red-700 space-y-1",children:[(0,i.jsxs)("p",{children:["\u2022 URL Supabase: ","\u2705 D\xe9finie"]}),(0,i.jsxs)("p",{children:["\u2022 Cl\xe9 Supabase: ","\u2705 D\xe9finie"]}),(0,i.jsxs)("p",{children:["\u2022 Backend URL: ","\u2705 D\xe9finie"]}),(0,i.jsxs)("p",{children:["\u2022 Mode: ","production"]})]}),(0,i.jsx)("p",{className:"text-xs text-red-600 mt-2",children:"\ud83d\udca1 Ouvrez la console du navigateur (F12) pour voir les logs d\xe9taill\xe9s"})]}),(0,i.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[(0,i.jsx)("button",{onClick:()=>{console.log("[CONFIG] Tentative de rechargement..."),console.log("[CONFIG] Variables d'environnement:",{hasUrl:!0,hasKey:!0,url:"D\xe9finie",key:"D\xe9finie"}),window.location.reload()},className:"bg-gradient-to-r from-blue-500 to-indigo-600 text-white px-8 py-3 rounded-lg font-semibold hover:from-blue-600 hover:to-indigo-700 transition-all duration-200 shadow-lg hover:shadow-xl",children:"Recharger apr\xe8s configuration"}),(0,i.jsx)("button",{onClick:()=>{console.log("[CONFIG] Test de connexion manuel..."),(0,ct.$h)().then(e=>{console.log("[CONFIG] R\xe9sultat du test:",e),alert("Test de configuration: ".concat(e.success?"SUCC\xc8S":"\xc9CHEC","\nD\xe9tails: ").concat(e.error||e.message||"Aucun d\xe9tail"))}).catch(e=>{console.error("[CONFIG] Erreur du test:",e),alert("Erreur du test: ".concat(e.message))})},className:"bg-gradient-to-r from-green-500 to-emerald-600 text-white px-8 py-3 rounded-lg font-semibold hover:from-green-600 hover:to-emerald-700 transition-all duration-200 shadow-lg hover:shadow-xl",children:"Tester la configuration"})]})]})]})}),bv=e=>{let{children:t,adminOnly:s=!1}=e;const{isAuthenticated:n,user:r,loading:a}=ut();return a?(0,i.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,i.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary-600"})}):n?s&&"admin"!==(null===r||void 0===r?void 0:r.role)?(0,i.jsx)(Ge.C5,{to:"/dashboard",replace:!0}):t:(0,i.jsx)(Ge.C5,{to:"/login",replace:!0})},yv=()=>{const{updateAvailable:e,currentVersion:t,newVersion:s,applyUpdate:r,ignoreUpdate:a}=(()=>{const[e,t]=(0,n.useState)(!1),[s,r]=(0,n.useState)(!1),[a,i]=(0,n.useState)(null),[o,l]=(0,n.useState)(null),[c,d]=(0,n.useState)(null),u=(0,n.useCallback)(e=>{e.addEventListener("updatefound",()=>{const s=e.installing;s&&s.addEventListener("statechange",()=>{"installed"===s.state&&navigator.serviceWorker.controller&&(console.log("[APP_UPDATE] Nouveau Service Worker disponible"),t(!0))})})},[]),h=(0,n.useCallback)(e=>{if(e)try{navigator.serviceWorker.getRegistration(e.scope).then(e=>{e&&e.update().catch(e=>{var t;null!==(t=e.message)&&void 0!==t&&t.includes("uninstalled")})}).catch(()=>{})}catch(t){}},[]);(0,n.useEffect)(()=>{"serviceWorker"in navigator&&navigator.serviceWorker.getRegistration().then(e=>e?(console.log("[APP_UPDATE] Service Worker d\xe9j\xe0 enregistr\xe9:",e.scope),d(e),u(e),e):navigator.serviceWorker.register("/serviceWorker.js")).then(e=>{e&&(console.log("[APP_UPDATE] Service Worker enregistr\xe9:",e.scope),d(t=>(t&&t===e||u(e),e)),h(e))}).catch(e=>{console.error("[APP_UPDATE] Erreur enregistrement Service Worker:",e)})},[u,h]);const m=(0,n.useCallback)(async()=>{try{r(!0);const e=localStorage.getItem("app-version"),s=localStorage.getItem("app-build-number"),n=await fetch("".concat("/version.json","?t=").concat(Date.now()),{cache:"no-cache",headers:{"Cache-Control":"no-cache",Pragma:"no-cache"}});if(!n.ok)return void console.log("[APP_UPDATE] Fichier version.json non trouv\xe9, utilisation de la d\xe9tection Service Worker uniquement");const a=await n.json(),{version:o,buildNumber:c,buildDate:d}=a;console.log("[APP_UPDATE] Version serveur:",{version:o,buildNumber:c,buildDate:d}),console.log("[APP_UPDATE] Version stock\xe9e:",{version:e,buildNumber:s}),e&&s?(c>parseInt(s)||o!==e)&&(console.log("[APP_UPDATE] \u2705 Nouvelle version d\xe9tect\xe9e !"),l(a),t(!0)):(localStorage.setItem("app-version",o),localStorage.setItem("app-build-number",c.toString()),i(a)),o&&(localStorage.setItem("app-version",o),localStorage.setItem("app-build-number",c.toString()))}catch(e){console.error("[APP_UPDATE] Erreur lors de la v\xe9rification:",e)}finally{r(!1)}},[]);(0,n.useEffect)(()=>{m();const e=setInterval(m,zs),t=()=>{m()};if(window.addEventListener("focus",t),c){const s=setInterval(()=>{navigator.serviceWorker.getRegistration(c.scope).then(e=>{e&&e.update().catch(e=>{var t;null!==(t=e.message)&&void 0!==t&&t.includes("uninstalled")||console.log("[APP_UPDATE] Service Worker mise \xe0 jour:",e.message)})}).catch(()=>{})},zs);return()=>{clearInterval(e),clearInterval(s),window.removeEventListener("focus",t)}}return()=>{clearInterval(e),window.removeEventListener("focus",t)}},[m,c]);const p=(0,n.useCallback)(()=>{c?navigator.serviceWorker.getRegistration(c.scope).then(e=>{null!==e&&void 0!==e&&e.waiting?(e.waiting.postMessage({type:"SKIP_WAITING"}),e.waiting.addEventListener("statechange",e=>{"activated"===e.target.state&&window.location.reload()})):window.location.reload()}).catch(()=>{window.location.reload()}):window.location.reload()},[c]),f=(0,n.useCallback)(()=>{t(!1),sessionStorage.setItem("update-ignored","true")},[]);return{updateAvailable:e&&!sessionStorage.getItem("update-ignored"),isChecking:s,currentVersion:a,newVersion:o,checkVersion:m,applyUpdate:p,ignoreUpdate:f}})(),{token:o,notification:l}=(()=>{const{user:e}=ut(),[t,s]=(0,n.useState)(null),[r,a]=(0,n.useState)(null);(0,n.useEffect)(()=>{if(null===e||void 0===e||!e.id)return;i();const t=ti(si,e=>{console.log("Message re\xe7u (foreground):",e),a(e.notification||null)});return()=>t&&t()},[null===e||void 0===e?void 0:e.id]);const i=async()=>{try{const{data:n,error:r}=await lt.ND.from("users").select("fcm_token").eq("id",e.id).single();if(r)console.error("[FCM] Erreur r\xe9cup\xe9ration token existant:",r);else if(null!==n&&void 0!==n&&n.fcm_token){if(console.log("[FCM] Token FCM existant trouv\xe9 dans la DB"),s(n.fcm_token),"granted"===Notification.permission)try{const e=await ei(si,{vapidKey:ni});e&&e!==n.fcm_token?(console.log("[FCM] Token FCM mis \xe0 jour"),await l(e),s(e)):e&&console.log("[FCM] Token FCM toujours valide")}catch(t){console.warn("[FCM] Erreur v\xe9rification token:",t),await o()}return}"default"===Notification.permission?(console.log("[FCM] Demande de permission pour la premi\xe8re fois"),await o()):"granted"===Notification.permission?(console.log("[FCM] Permission d\xe9j\xe0 accord\xe9e, obtention du token"),await o()):console.log("[FCM] Permission refus\xe9e par l'utilisateur")}catch(n){console.error("[FCM] Erreur checkExistingTokenAndRequestPermission:",n)}},o=async()=>{try{let e=Notification.permission;if("default"===e&&(e=await Notification.requestPermission()),"granted"===e){console.log("[FCM] Permission accord\xe9e");const e=await ei(si,{vapidKey:ni});e?(console.log("[FCM] Token obtenu"),s(e),await l(e)):console.warn("[FCM] Aucun token re\xe7u (v\xe9rifiez le service worker firebase-messaging-sw.js)")}else console.log("[FCM] Permission refus\xe9e:",e)}catch(e){console.error("[FCM] Erreur:",e)}},l=async t=>{if(null!==e&&void 0!==e&&e.id)try{const{error:s}=await lt.ND.from("users").update({fcm_token:t,updated_at:(new Date).toISOString()}).eq("id",e.id);if(s)return void console.error("[FCM] Erreur sauvegarde token:",s.message);console.log("[FCM] Token sauvegard\xe9 pour l'utilisateur")}catch(s){console.error("[FCM] saveTokenToDatabase:",s)}};return{token:t,notification:r,requestPermission:o}})();return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(tt,{children:(0,i.jsxs)(Ge.BV,{children:[(0,i.jsx)(Ge.qh,{path:"/login",element:(0,i.jsx)(Af,{})}),(0,i.jsx)(Ge.qh,{path:"/register",element:(0,i.jsx)(Ff,{})}),(0,i.jsx)(Ge.qh,{path:"/create-account",element:(0,i.jsx)(Bf,{})}),(0,i.jsx)(Ge.qh,{path:"/pending-approval",element:(0,i.jsx)(qf,{})}),(0,i.jsx)(Ge.qh,{path:"/forgot-password",element:(0,i.jsx)(Hf,{})}),(0,i.jsx)(Ge.qh,{path:"/reset-password",element:(0,i.jsx)(Wf,{})}),(0,i.jsx)(Ge.qh,{path:"/dashboard",element:(0,i.jsx)(bv,{children:(0,i.jsx)(Xp,{children:(0,i.jsx)(qg,{})})})}),(0,i.jsx)(Ge.qh,{path:"/admin",element:(0,i.jsx)(bv,{adminOnly:!0,children:(0,i.jsx)(Xp,{children:(0,i.jsx)(Gg,{})})})}),(0,i.jsx)(Ge.qh,{path:"/admin/loan-requests",element:(0,i.jsx)(bv,{adminOnly:!0,children:(0,i.jsx)(Xp,{children:(0,i.jsx)(ex,{})})})}),(0,i.jsx)(Ge.qh,{path:"/admin/users",element:(0,i.jsx)(bv,{adminOnly:!0,children:(0,i.jsx)(Xp,{children:(0,i.jsx)(nx,{})})})}),(0,i.jsx)(Ge.qh,{path:"/admin/user-management",element:(0,i.jsx)(bv,{adminOnly:!0,children:(0,i.jsx)(Xp,{children:(0,i.jsx)(nx,{})})})}),(0,i.jsx)(Ge.qh,{path:"/admin/menu",element:(0,i.jsx)(bv,{adminOnly:!0,children:(0,i.jsx)(Xp,{children:(0,i.jsx)(ox,{})})})}),(0,i.jsx)(Ge.qh,{path:"/admin/analytics",element:(0,i.jsx)(bv,{adminOnly:!0,children:(0,i.jsx)(Xp,{children:(0,i.jsx)(ix,{})})})}),(0,i.jsx)(Ge.qh,{path:"/admin/analytics/detailed",element:(0,i.jsx)(bv,{adminOnly:!0,children:(0,i.jsx)(Xp,{children:(0,i.jsx)(n.Suspense,{fallback:(0,i.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-green-50",children:(0,i.jsx)("div",{className:"animate-spin rounded-full h-10 w-10 border-2 border-green-500 border-t-transparent"})}),children:(0,i.jsx)(xv,{})})})})}),(0,i.jsx)(Ge.qh,{path:"/admin/settings",element:(0,i.jsx)(bv,{adminOnly:!0,children:(0,i.jsx)(Xp,{children:(0,i.jsx)(ux,{})})})}),(0,i.jsx)(Ge.qh,{path:"/admin/ab-epargne",element:(0,i.jsx)(bv,{adminOnly:!0,children:(0,i.jsx)(Xp,{children:(0,i.jsx)(mx,{})})})}),(0,i.jsx)(Ge.qh,{path:"/admin/test-notifications",element:(0,i.jsx)(bv,{adminOnly:!0,children:(0,i.jsx)(Xp,{children:(0,i.jsx)(xx,{})})})}),(0,i.jsx)(Ge.qh,{path:"/admin/transactions",element:(0,i.jsx)(bv,{adminOnly:!0,children:(0,i.jsx)(Xp,{children:(0,i.jsx)(wx,{})})})}),(0,i.jsx)(Ge.qh,{path:"/loan-request",element:(0,i.jsx)(bv,{children:(0,i.jsx)(Xp,{children:(0,i.jsx)(Ex,{})})})}),(0,i.jsx)(Ge.qh,{path:"/loan-history",element:(0,i.jsx)(bv,{children:(0,i.jsx)(Xp,{children:(0,i.jsx)(Cx,{})})})}),(0,i.jsx)(Ge.qh,{path:"/repayment",element:(0,i.jsx)(bv,{children:(0,i.jsx)(Xp,{children:(0,i.jsx)(Tx,{})})})}),(0,i.jsx)(Ge.qh,{path:"/repayment/success",element:(0,i.jsx)(bv,{children:(0,i.jsx)(Xp,{children:(0,i.jsx)(Ix,{})})})}),(0,i.jsx)(Ge.qh,{path:"/remboursement/success",element:(0,i.jsx)(bv,{children:(0,i.jsx)(Xp,{children:(0,i.jsx)(Ix,{})})})}),(0,i.jsx)(Ge.qh,{path:"/repayment/failure",element:(0,i.jsx)(bv,{children:(0,i.jsx)(Xp,{children:(0,i.jsx)(Rx,{})})})}),(0,i.jsx)(Ge.qh,{path:"/remboursement/failure",element:(0,i.jsx)(bv,{children:(0,i.jsx)(Xp,{children:(0,i.jsx)(Rx,{})})})}),(0,i.jsx)(Ge.qh,{path:"/repayment/cancel",element:(0,i.jsx)(bv,{children:(0,i.jsx)(Xp,{children:(0,i.jsx)(Dx,{})})})}),(0,i.jsx)(Ge.qh,{path:"/remboursement/cancel",element:(0,i.jsx)(bv,{children:(0,i.jsx)(Xp,{children:(0,i.jsx)(Dx,{})})})}),(0,i.jsx)(Ge.qh,{path:"/profile",element:(0,i.jsx)(bv,{children:(0,i.jsx)(Xp,{children:(0,i.jsx)(Lx,{})})})}),(0,i.jsx)(Ge.qh,{path:"/menu",element:(0,i.jsx)(bv,{children:(0,i.jsx)(Xp,{children:(0,i.jsx)(Mx,{})})})}),(0,i.jsx)(Ge.qh,{path:"/ab-logement",element:(0,i.jsx)(bv,{children:(0,i.jsx)(Xp,{children:(0,i.jsx)(zx,{})})})}),(0,i.jsx)(Ge.qh,{path:"/ab-epargne",element:(0,i.jsx)(bv,{children:(0,i.jsx)(Xp,{children:(0,i.jsx)(qx,{})})})}),(0,i.jsx)(Ge.qh,{path:"/ab-epargne/historique",element:(0,i.jsx)(bv,{children:(0,i.jsx)(Xp,{children:(0,i.jsx)(Hx,{})})})}),(0,i.jsx)(Ge.qh,{path:"/ab-epargne/retour",element:(0,i.jsx)(bv,{children:(0,i.jsx)(Xp,{children:(0,i.jsx)(Wx,{})})})}),(0,i.jsx)(Ge.qh,{path:"/ab-epargne/personalize/:planId",element:(0,i.jsx)(bv,{children:(0,i.jsx)(Xp,{children:(0,i.jsx)(nv,{})})})}),(0,i.jsx)(Ge.qh,{path:"/ab-epargne/plan/:id",element:(0,i.jsx)(bv,{children:(0,i.jsx)(Xp,{children:(0,i.jsx)(Zx,{})})})}),(0,i.jsx)(Ge.qh,{path:"/ab-epargne/depot-retour",element:(0,i.jsx)(bv,{children:(0,i.jsx)(Xp,{children:(0,i.jsx)(rv,{})})})}),(0,i.jsx)(Ge.qh,{path:"/remboursement-retour",element:(0,i.jsx)(bv,{children:(0,i.jsx)(Xp,{children:(0,i.jsx)(av,{})})})}),(0,i.jsx)(Ge.qh,{path:"/coaching-finance",element:(0,i.jsx)(bv,{children:(0,i.jsx)(Xp,{children:(0,i.jsx)(ov,{})})})}),(0,i.jsx)(Ge.qh,{path:"/loyalty-score",element:(0,i.jsx)(bv,{children:(0,i.jsx)(Xp,{children:(0,i.jsx)(hv,{})})})}),(0,i.jsx)(Ge.qh,{path:"/test-otp",element:(0,i.jsx)(mv,{})}),(0,i.jsx)(Ge.qh,{path:"/test-health",element:(0,i.jsx)(pv,{})}),(0,i.jsx)(Ge.qh,{path:"/test-fedapay",element:(0,i.jsx)(gv,{})}),(0,i.jsx)(Ge.qh,{path:"/test-plan-epargne/:id",element:(0,i.jsx)(iv,{})}),(0,i.jsx)(Ge.qh,{path:"/",element:(0,i.jsx)(Ge.C5,{to:"/dashboard",replace:!0})})]})}),(0,i.jsx)(ii,{updateAvailable:e,newVersion:s,currentVersion:t,onUpdate:r,onIgnore:a})]})},jv=()=>{const[e,t]=(0,n.useState)(!1),[s,r]=(0,n.useState)(!0);return(0,n.useEffect)(()=>{const e=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream;setTimeout(()=>{(()=>{try{console.log("[APP] V\xe9rification des variables d'environnement...");const e=!0,s=!0,n=!0;console.log("[APP] Variables d'environnement:",{hasSupabaseUrl:e,hasSupabaseKey:s,hasBackendUrl:n,url:"D\xe9finie",key:"D\xe9finie",backend:"D\xe9finie"});const r=e&&s&&n;t(r),r?console.log("[APP] \u2705 Configuration d\xe9tect\xe9e, d\xe9marrage de l'application"):(console.error("[APP] \u274c Configuration manquante, affichage de la page de configuration"),console.error("[APP] Variables manquantes:",{url:!e,key:!s,backend:!n}))}catch(e){console.error("[APP] \u274c Erreur lors de la v\xe9rification de la configuration:",e),console.error("[APP] Stack:",e.stack),t(!1)}finally{r(!1)}})();try{console.log("[APP] Initialisation de la gestion du cache..."),ui()}catch(e){console.error("[APP] Erreur lors de l'initialisation du cache:",e)}},e?100:0)},[]),s?(0,i.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center",children:(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("div",{className:"w-16 h-16 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,i.jsx)("p",{className:"text-gray-600",children:"V\xe9rification de la configuration..."})]})}):e?(0,i.jsx)(ht,{children:(0,i.jsxs)(jt,{children:[(0,i.jsx)(yv,{}),(0,i.jsx)(df,{}),(0,i.jsx)(xf,{}),(0,i.jsx)(Ls,{position:"top-right"})]})}):(0,i.jsx)(vv,{})};class wv extends n.Component{constructor(){super(...arguments),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("[AppErrorBoundary] Erreur captur\xe9e:",e,t),"function"===typeof window.hideAppLoadingScreen&&window.hideAppLoadingScreen()}render(){return this.state.hasError?(0,i.jsxs)("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:24,fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',background:"linear-gradient(135deg, #f5f7fa 0%, #e4e8ec 100%)",textAlign:"center"},children:[(0,i.jsx)("div",{style:{fontSize:48,marginBottom:16},children:"\u26a0\ufe0f"}),(0,i.jsx)("h1",{style:{color:"#1a1a2e",fontSize:22,marginBottom:8},children:"Une erreur s'est produite"}),(0,i.jsx)("p",{style:{color:"#666",fontSize:16,marginBottom:24,maxWidth:360},children:"L'application a rencontr\xe9 un probl\xe8me. V\xe9rifiez votre connexion internet ou r\xe9essayez plus tard."}),(0,i.jsx)("button",{type:"button",onClick:()=>window.location.reload(),style:{padding:"12px 24px",background:"#667eea",color:"white",border:"none",borderRadius:8,fontSize:16,fontWeight:600,cursor:"pointer"},children:"Recharger la page"})]}):this.props.children}}const Nv=wv,Sv=e=>{e&&e instanceof Function&&s.e(453).then(s.bind(s,6453)).then(t=>{let{getCLS:s,getFID:n,getFCP:r,getLCP:a,getTTFB:i}=t;s(e),n(e),r(e),a(e),i(e)})},kv=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream;function Av(){try{const e=document.getElementById("root");if(!e)throw new Error("Root element not found");const t=a.createRoot(e),s=(0,i.jsx)(Nv,{children:(0,i.jsx)(c,{client:We,children:(0,i.jsx)(jv,{})})});kv?t.render(s):t.render((0,i.jsx)(n.StrictMode,{children:s})),"function"===typeof window.hideAppLoadingScreen&&requestAnimationFrame(()=>{setTimeout(window.hideAppLoadingScreen,100)}),console.log("[REACT] \u2705 Application React mont\xe9e avec succ\xe8s")}catch(e){console.error("[REACT] \u274c Erreur lors du montage de React:",e);const t=document.getElementById("root");t&&(t.innerHTML='\n        <div style="padding: 20px; text-align: center; font-family: -apple-system, BlinkMacSystemFont, sans-serif;">\n          <h1 style="color: #e74c3c;">Erreur de chargement</h1>\n          <p style="color: #666; margin: 20px 0;">Une erreur s\'est produite lors du chargement de l\'application.</p>\n          <p style="color: #999; font-size: 14px; margin-top: 10px;">'.concat(e.message,'</p>\n          <button onclick="window.location.reload()" style="margin-top: 20px; padding: 12px 24px; background: #667eea; color: white; border: none; border-radius: 8px; font-size: 16px; cursor: pointer;">\n            Recharger la page\n          </button>\n        </div>\n      '));const s=document.getElementById("error-screen");s&&s.classList.add("show")}}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",Av):Av(),Sv()})()})();
//# sourceMappingURL=main.daf3152d.js.map