/*! For license information please see main.5f094280.js.LICENSE.txt */
(()=>{var e={43:(e,t,n)=>{"use strict";e.exports=n(202)},153:(e,t,n)=>{"use strict";var s=n(43),r=Symbol.for("react.element"),a=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var s,a={},c=null,d=null;for(s in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)i.call(t,s)&&!l.hasOwnProperty(s)&&(a[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps)void 0===a[s]&&(a[s]=t[s]);return{$$typeof:r,type:e,key:c,ref:d,props:a,_owner:o.current}}t.Fragment=a,t.jsx=c,t.jsxs=c},197:(e,t,n)=>{"use strict";n.d(t,{supabase:()=>sn,LC:()=>rn});class s extends Error{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"FunctionsError",n=arguments.length>2?arguments[2]:void 0;super(e),this.name=t,this.context=n}}class r extends s{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class a extends s{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class i extends s{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var o;!function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"}(o||(o={}));var l=function(e,t,n,s){return new(n||(n=Promise))(function(r,a){function i(e){try{l(s.next(e))}catch(t){a(t)}}function o(e){try{l(s.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,o)}l((s=s.apply(e,t||[])).next())})};class c{constructor(e){let{headers:t={},customFetch:s,region:r=o.Any}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.url=e,this.headers=t,this.region=r,this.fetch=(e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return Promise.resolve().then(n.bind(n,630)).then(e=>{let{default:n}=e;return n(...t)})}:fetch),function(){return t(...arguments)}})(s)}setAuth(e){this.headers.Authorization="Bearer ".concat(e)}invoke(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n;return l(this,void 0,void 0,function*(){try{const{headers:s,method:o,body:l}=t;let c={},{region:d}=t;d||(d=this.region);const u=new URL("".concat(this.url,"/").concat(e));let h;d&&"any"!==d&&(c["x-region"]=d,u.searchParams.set("forceFunctionRegion",d)),l&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&("undefined"!==typeof Blob&&l instanceof Blob||l instanceof ArrayBuffer?(c["Content-Type"]="application/octet-stream",h=l):"string"===typeof l?(c["Content-Type"]="text/plain",h=l):"undefined"!==typeof FormData&&l instanceof FormData?h=l:(c["Content-Type"]="application/json",h=JSON.stringify(l)));const m=yield this.fetch(u.toString(),{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},c),this.headers),s),body:h}).catch(e=>{throw new r(e)}),p=m.headers.get("x-relay-error");if(p&&"true"===p)throw new a(m);if(!m.ok)throw new i(m);let f,x=(null!==(n=m.headers.get("Content-Type"))&&void 0!==n?n:"text/plain").split(";")[0].trim();return f="application/json"===x?yield m.json():"application/octet-stream"===x?yield m.blob():"text/event-stream"===x?m:"multipart/form-data"===x?yield m.formData():yield m.text(),{data:f,error:null,response:m}}catch(s){return{data:null,error:s,response:s instanceof i||s instanceof a?s.context:void 0}}})}}var d=n(980);const{PostgrestClient:u,PostgrestQueryBuilder:h,PostgrestFilterBuilder:m,PostgrestTransformBuilder:p,PostgrestBuilder:f,PostgrestError:x}=d;var g=n(285);const v=class{static detectEnvironment(){var e;if("undefined"!==typeof WebSocket)return{type:"native",constructor:WebSocket};if("undefined"!==typeof globalThis&&"undefined"!==typeof globalThis.WebSocket)return{type:"native",constructor:globalThis.WebSocket};if("undefined"!==typeof n.g&&"undefined"!==typeof n.g.WebSocket)return{type:"native",constructor:n.g.WebSocket};if("undefined"!==typeof globalThis&&"undefined"!==typeof globalThis.WebSocketPair&&"undefined"===typeof globalThis.WebSocket)return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if("undefined"!==typeof globalThis&&globalThis.EdgeRuntime||"undefined"!==typeof navigator&&(null===(e=navigator.userAgent)||void 0===e?void 0:e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if("undefined"!==typeof g){const e=g.versions;if(e&&e.node){const t=e.node,n=parseInt(t.replace(/^v/,"").split(".")[0]);return n>=22?"undefined"!==typeof globalThis.WebSocket?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:"Node.js ".concat(n," detected but native WebSocket not found."),workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:"Node.js ".concat(n," detected without native WebSocket support."),workaround:'For Node.js < 22, install "ws" package and provide it via the transport option:\nimport ws from "ws"\nnew RealtimeClient(url, { transport: ws })'}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+="\n\nSuggested solution: ".concat(e.workaround)),new Error(t)}static createWebSocket(e,t){return new(this.getWebSocketConstructor())(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return"native"===e.type||"ws"===e.type}catch(e){return!1}}},y="realtime-js/".concat("2.15.5"),b=1e4;var j,w,N,k,S,E;!function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"}(j||(j={})),function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"}(w||(w={})),function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"}(N||(N={})),function(e){e.websocket="websocket"}(k||(k={})),function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"}(S||(S={}));class _{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t("string"===typeof e?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,t,n)}_decodeBroadcast(e,t,n){const s=t.getUint8(1),r=t.getUint8(2);let a=this.HEADER_LENGTH+2;const i=n.decode(e.slice(a,a+s));a+=s;const o=n.decode(e.slice(a,a+r));a+=r;return{ref:null,topic:i,event:o,payload:JSON.parse(n.decode(e.slice(a,e.byteLength)))}}}class C{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}!function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"}(E||(E={}));const P=function(e,t){var n;const s=null!==(n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).skipTypes)&&void 0!==n?n:[];return Object.keys(t).reduce((n,r)=>(n[r]=T(r,e,t,s),n),{})},T=(e,t,n,s)=>{const r=t.find(t=>t.name===e),a=null===r||void 0===r?void 0:r.type,i=n[e];return a&&!s.includes(a)?A(a,i):I(i)},A=(e,t)=>{if("_"===e.charAt(0)){const n=e.slice(1,e.length);return z(t,n)}switch(e){case E.bool:return R(t);case E.float4:case E.float8:case E.int2:case E.int4:case E.int8:case E.numeric:case E.oid:return O(t);case E.json:case E.jsonb:return L(t);case E.timestamp:return D(t);case E.abstime:case E.date:case E.daterange:case E.int4range:case E.int8range:case E.money:case E.reltime:case E.text:case E.time:case E.timestamptz:case E.timetz:case E.tsrange:case E.tstzrange:default:return I(t)}},I=e=>e,R=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},O=e=>{if("string"===typeof e){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},L=e=>{if("string"===typeof e)try{return JSON.parse(e)}catch(t){return console.log("JSON parse error: ".concat(t)),e}return e},z=(e,t)=>{if("string"!==typeof e)return e;const n=e.length-1,s=e[n];if("{"===e[0]&&"}"===s){let s;const a=e.slice(1,n);try{s=JSON.parse("["+a+"]")}catch(r){s=a?a.split(","):[]}return s.map(e=>A(t,e))}return e},D=e=>"string"===typeof e?e.replace(" ","T"):e,M=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class F{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:b;this.channel=e,this.event=t,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var n;return this._hasReceived(e)&&t(null===(n=this.receivedResp)||void 0===n?void 0:n.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);this.channel._on(this.refEvent,{},e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)}),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive(e){let{status:t,response:n}=e;this.recHooks.filter(e=>e.status===t).forEach(e=>e.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var U,B,V,q;!function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"}(U||(U={}));class H{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(null===t||void 0===t?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},e=>{const{onJoin:t,onLeave:n,onSync:s}=this.caller;this.joinRef=this.channel._joinRef(),this.state=H.syncState(this.state,e,t,n),this.pendingDiffs.forEach(e=>{this.state=H.syncDiff(this.state,e,t,n)}),this.pendingDiffs=[],s()}),this.channel._on(n.diff,{},e=>{const{onJoin:t,onLeave:n,onSync:s}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(e):(this.state=H.syncDiff(this.state,e,t,n),s())}),this.onJoin((e,t,n)=>{this.channel._trigger("presence",{event:"join",key:e,currentPresences:t,newPresences:n})}),this.onLeave((e,t,n)=>{this.channel._trigger("presence",{event:"leave",key:e,currentPresences:t,leftPresences:n})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,n,s){const r=this.cloneDeep(e),a=this.transformState(t),i={},o={};return this.map(r,(e,t)=>{a[e]||(o[e]=t)}),this.map(a,(e,t)=>{const n=r[e];if(n){const s=t.map(e=>e.presence_ref),r=n.map(e=>e.presence_ref),a=t.filter(e=>r.indexOf(e.presence_ref)<0),l=n.filter(e=>s.indexOf(e.presence_ref)<0);a.length>0&&(i[e]=a),l.length>0&&(o[e]=l)}else i[e]=t}),this.syncDiff(r,{joins:i,leaves:o},n,s)}static syncDiff(e,t,n,s){const{joins:r,leaves:a}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(r,(t,s)=>{var r;const a=null!==(r=e[t])&&void 0!==r?r:[];if(e[t]=this.cloneDeep(s),a.length>0){const n=e[t].map(e=>e.presence_ref),s=a.filter(e=>n.indexOf(e.presence_ref)<0);e[t].unshift(...s)}n(t,a,s)}),this.map(a,(t,n)=>{let r=e[t];if(!r)return;const a=n.map(e=>e.presence_ref);r=r.filter(e=>a.indexOf(e.presence_ref)<0),e[t]=r,s(t,r,n),0===r.length&&delete e[t]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(n=>t(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,n)=>{const s=e[n];return t[n]="metas"in s?s.metas.map(e=>(e.presence_ref=e.phx_ref,delete e.phx_ref,delete e.phx_ref_prev,e)):s,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}!function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"}(B||(B={})),function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"}(V||(V={})),function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"}(q||(q={}));class W{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}},n=arguments.length>2?arguments[2]:void 0;this.topic=e,this.params=t,this.socket=n,this.bindings={},this.state=w.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new F(this,N.join,this.params,this.timeout),this.rejoinTimer=new C(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=w.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(e=>e.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel","close ".concat(this.topic," ").concat(this._joinRef())),this.state=w.closed,this.socket._remove(this)}),this._onError(e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel","error ".concat(this.topic),e),this.state=w.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel","timeout ".concat(this.topic),this.joinPush.timeout),this.state=w.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel","error ".concat(this.topic),e),this.state=w.errored,this.rejoinTimer.scheduleTimeout())}),this._on(N.reply,{},(e,t)=>{this._trigger(this._replyEventName(t),e)}),this.presence=new H(this),this.broadcastEndpointURL=M(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.timeout;var n,s,r;if(this.socket.isConnected()||this.socket.connect(),this.state==w.closed){const{config:{broadcast:a,presence:i,private:o}}=this.params,l=null!==(s=null===(n=this.bindings.postgres_changes)||void 0===n?void 0:n.map(e=>e.filter))&&void 0!==s?s:[],c=!!this.bindings[V.PRESENCE]&&this.bindings[V.PRESENCE].length>0||!0===(null===(r=this.params.config.presence)||void 0===r?void 0:r.enabled),d={},u={broadcast:a,presence:Object.assign(Object.assign({},i),{enabled:c}),postgres_changes:l,private:o};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this._onError(t=>null===e||void 0===e?void 0:e(q.CHANNEL_ERROR,t)),this._onClose(()=>null===e||void 0===e?void 0:e(q.CLOSED)),this.updateJoinPayload(Object.assign({config:u},d)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async t=>{let{postgres_changes:n}=t;var s;if(this.socket.setAuth(),void 0!==n){const t=this.bindings.postgres_changes,r=null!==(s=null===t||void 0===t?void 0:t.length)&&void 0!==s?s:0,a=[];for(let s=0;s<r;s++){const r=t[s],{filter:{event:i,schema:o,table:l,filter:c}}=r,d=n&&n[s];if(!d||d.event!==i||d.schema!==o||d.table!==l||d.filter!==c)return this.unsubscribe(),this.state=w.errored,void(null===e||void 0===e||e(q.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes")));a.push(Object.assign(Object.assign({},r),{id:d.id}))}return this.bindings.postgres_changes=a,void(e&&e(q.SUBSCRIBED))}null===e||void 0===e||e(q.SUBSCRIBED)}).receive("error",t=>{this.state=w.errored,null===e||void 0===e||e(q.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(t).join(", ")||"error")))}).receive("timeout",()=>{null===e||void 0===e||e(q.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return await this.send({type:"presence",event:"untrack"},e)}on(e,t,n){return this.state===w.joined&&e===V.PRESENCE&&(this.socket.log("channel","resubscribe to ".concat(this.topic," due to change in presence callbacks on joined channel")),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,n)}async send(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n,s;if(this._canPush()||"broadcast"!==e.type)return new Promise(n=>{var s,r,a;const i=this._push(e.type,e,t.timeout||this.timeout);"broadcast"!==e.type||(null===(a=null===(r=null===(s=this.params)||void 0===s?void 0:s.config)||void 0===r?void 0:r.broadcast)||void 0===a?void 0:a.ack)||n("ok"),i.receive("ok",()=>n("ok")),i.receive("error",()=>n("error")),i.receive("timeout",()=>n("timed out"))});{const{event:a,payload:i}=e,o={method:"POST",headers:{Authorization:this.socket.accessTokenValue?"Bearer ".concat(this.socket.accessTokenValue):"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:i,private:this.private}]})};try{const e=await this._fetchWithTimeout(this.broadcastEndpointURL,o,null!==(n=t.timeout)&&void 0!==n?n:this.timeout);return await(null===(s=e.body)||void 0===s?void 0:s.cancel()),e.ok?"ok":"error"}catch(r){return"AbortError"===r.name?"timed out":"error"}}}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this.state=w.leaving;const t=()=>{this.socket.log("channel","leave ".concat(this.topic)),this._trigger(N.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(s=>{n=new F(this,N.leave,{},e),n.receive("ok",()=>{t(),s("ok")}).receive("timeout",()=>{t(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{null===n||void 0===n||n.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=w.closed,this.bindings={}}async _fetchWithTimeout(e,t,n){const s=new AbortController,r=setTimeout(()=>s.abort(),n),a=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:s.signal}));return clearTimeout(r),a}_push(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.timeout;if(!this.joinedOnce)throw"tried to push '".concat(e,"' to '").concat(this.topic,"' before joining. Use channel.subscribe() before pushing events");let s=new F(this,e,t,n);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>100){const e=this.pushBuffer.shift();e&&(e.destroy(),this.socket.log("channel","discarded push due to buffer overflow: ".concat(e.event),e.payload))}}_onMessage(e,t,n){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,n){var s,r;const a=e.toLocaleLowerCase(),{close:i,error:o,leave:l,join:c}=N;if(n&&[i,o,l,c].indexOf(a)>=0&&n!==this._joinRef())return;let d=this._onMessage(a,t,n);if(t&&!d)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?null===(s=this.bindings.postgres_changes)||void 0===s||s.filter(e=>{var t,n,s;return"*"===(null===(t=e.filter)||void 0===t?void 0:t.event)||(null===(s=null===(n=e.filter)||void 0===n?void 0:n.event)||void 0===s?void 0:s.toLocaleLowerCase())===a}).map(e=>e.callback(d,n)):null===(r=this.bindings[a])||void 0===r||r.filter(e=>{var n,s,r,i,o,l;if(["broadcast","presence","postgres_changes"].includes(a)){if("id"in e){const a=e.id,i=null===(n=e.filter)||void 0===n?void 0:n.event;return a&&(null===(s=t.ids)||void 0===s?void 0:s.includes(a))&&("*"===i||(null===i||void 0===i?void 0:i.toLocaleLowerCase())===(null===(r=t.data)||void 0===r?void 0:r.type.toLocaleLowerCase()))}{const n=null===(o=null===(i=null===e||void 0===e?void 0:e.filter)||void 0===i?void 0:i.event)||void 0===o?void 0:o.toLocaleLowerCase();return"*"===n||n===(null===(l=null===t||void 0===t?void 0:t.event)||void 0===l?void 0:l.toLocaleLowerCase())}}return e.type.toLocaleLowerCase()===a}).map(e=>{if("object"===typeof d&&"ids"in d){const e=d.data,{schema:t,table:n,commit_timestamp:s,type:r,errors:a}=e,i={schema:t,table:n,commit_timestamp:s,eventType:r,new:{},old:{},errors:a};d=Object.assign(Object.assign({},i),this._getPayloadRecords(e))}e.callback(d,n)})}_isClosed(){return this.state===w.closed}_isJoined(){return this.state===w.joined}_isJoining(){return this.state===w.joining}_isLeaving(){return this.state===w.leaving}_replyEventName(e){return"chan_reply_".concat(e)}_on(e,t,n){const s=e.toLocaleLowerCase(),r={type:s,filter:t,callback:n};return this.bindings[s]?this.bindings[s].push(r):this.bindings[s]=[r],this}_off(e,t){const n=e.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(e=>{var s;return!((null===(s=e.type)||void 0===s?void 0:s.toLocaleLowerCase())===n&&W.isEqual(e.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(N.close,{},e)}_onError(e){this._on(N.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=w.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return"INSERT"!==e.type&&"UPDATE"!==e.type||(t.new=P(e.columns,e.record)),"UPDATE"!==e.type&&"DELETE"!==e.type||(t.old=P(e.columns,e.old_record)),t}}const G=()=>{},K=25e3,J=10,Z=100,$=[1e3,2e3,5e3,1e4];class Q{constructor(e,t){var s;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=b,this.transport=null,this.heartbeatIntervalMs=K,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=G,this.ref=0,this.reconnectTimer=null,this.logger=G,this.conn=null,this.sendBuffer=[],this.serializer=new _,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return Promise.resolve().then(n.bind(n,630)).then(e=>{let{default:n}=e;return n(...t)}).catch(e=>{throw new Error("Failed to load @supabase/node-fetch: ".concat(e.message,". ")+"This is required for HTTP requests in Node.js environments without native fetch.")})}:fetch),function(){return t(...arguments)}},!(null===(s=null===t||void 0===t?void 0:t.params)||void 0===s?void 0:s.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint="".concat(e,"/").concat(k.websocket),this.httpEndpoint=M(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(null===t||void 0===t?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||null!==this.conn&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=v.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;if(t.includes("Node.js"))throw new Error("".concat(t,"\n\n")+'To use Realtime in Node.js, you need to provide a WebSocket implementation:\n\nOption 1: Use Node.js 22+ which has native WebSocket support\nOption 2: Install and provide the "ws" package:\n\n  npm install ws\n\n  import ws from "ws"\n  const client = new RealtimeClient(url, {\n    ...options,\n    transport: ws\n  })');throw new Error("WebSocket not available: ".concat(t))}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:"1.0.0"}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},e?this.conn.close(e,null!==t&&void 0!==t?t:""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return 0===this.channels.length&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(e=>e.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,n){this.logger(e,t,n)}connectionState(){switch(this.conn&&this.conn.readyState){case j.connecting:return S.Connecting;case j.open:return S.Open;case j.closing:return S.Closing;default:return S.Closed}}isConnected(){return this.connectionState()===S.Open}isConnecting(){return"connecting"===this._connectionState}isDisconnecting(){return"disconnecting"===this._connectionState}channel(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}};const n="realtime:".concat(e),s=this.getChannels().find(e=>e.topic===n);if(s)return s;{const n=new W("realtime:".concat(e),t,this);return this.channels.push(n),n}}push(e){const{topic:t,event:n,payload:s,ref:r}=e,a=()=>{this.encode(e,e=>{var t;null===(t=this.conn)||void 0===t||t.send(e)})};this.log("push","".concat(t," ").concat(n," (").concat(r,")"),s),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(t){this.log("error","error in heartbeat callback",t)}return this._wasManualDisconnect=!1,null===(e=this.conn)||void 0===e||e.close(1e3,"heartbeat timeout"),void setTimeout(()=>{var e;this.isConnected()||null===(e=this.reconnectTimer)||void 0===e||e.scheduleTimeout()},Z)}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(t){this.log("error","error in heartbeat callback",t)}this._setAuthSafely("heartbeat")}else try{this.heartbeatCallback("disconnected")}catch(t){this.log("error","error in heartbeat callback",t)}}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(t=>t.topic===e&&(t._isJoined()||t._isJoining()));t&&(this.log("transport",'leaving duplicate topic "'.concat(e,'"')),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,e=>{if("phoenix"===e.topic&&"phx_reply"===e.event)try{this.heartbeatCallback("ok"===e.payload.status?"ok":"error")}catch(o){this.log("error","error in heartbeat callback",o)}e.ref&&e.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:t,event:n,payload:s,ref:r}=e,a=r?"(".concat(r,")"):"",i=s.status||"";this.log("receive","".concat(i," ").concat(t," ").concat(n," ").concat(a).trim(),s),this.channels.filter(e=>e._isMember(t)).forEach(e=>e._trigger(n,s,r)),this._triggerStateCallbacks("message",e)})}_clearTimer(e){var t;"heartbeat"===e&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):"reconnect"===e&&(null===(t=this.reconnectTimer)||void 0===t||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport","connected to ".concat(this.endpointURL())),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker","starting worker for from ".concat(this.workerUrl)):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this.workerRef.terminate()},this.workerRef.onmessage=e=>{"keepAlive"===e.data.event&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||null===(t=this.reconnectTimer)||void 0===t||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport","".concat(e)),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(N.error))}_appendParams(e,t){if(0===Object.keys(t).length)return e;const n=e.match(/\?/)?"&":"?",s=new URLSearchParams(t);return"".concat(e).concat(n).concat(s)}_workerObjectUrl(e){let t;if(e)t=e;else{const e=new Blob(['\n  addEventListener("message", (e) => {\n    if (e.data.event === "start") {\n      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);\n    }\n  });'],{type:"application/javascript"});t=URL.createObjectURL(e)}return t}_setConnectionState(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._connectionState=e,"connecting"===e?this._wasManualDisconnect=!1:"disconnecting"===e&&(this._wasManualDisconnect=t)}async _performAuth(){let e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e=t||(this.accessToken?await this.accessToken():this.accessTokenValue),this.accessTokenValue!=e&&(this.accessTokenValue=e,this.channels.forEach(t=>{const n={access_token:e,version:y};e&&t.updateJoinPayload(n),t.joinedOnce&&t._isJoined()&&t._push(N.access_token,{access_token:e})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"general";this.setAuth().catch(t=>{this.log("error","error setting auth in ".concat(e),t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(n=>{try{n(t)}catch(s){this.log("error","error in ".concat(e," callback"),s)}})}catch(n){this.log("error","error triggering ".concat(e," callbacks"),n)}}_setupReconnectionTimer(){this.reconnectTimer=new C(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},J)},this.reconnectAfterMs)}_initializeOptions(e){var t,n,s,r,a,i,o,l,c;if(this.transport=null!==(t=null===e||void 0===e?void 0:e.transport)&&void 0!==t?t:null,this.timeout=null!==(n=null===e||void 0===e?void 0:e.timeout)&&void 0!==n?n:b,this.heartbeatIntervalMs=null!==(s=null===e||void 0===e?void 0:e.heartbeatIntervalMs)&&void 0!==s?s:K,this.worker=null!==(r=null===e||void 0===e?void 0:e.worker)&&void 0!==r&&r,this.accessToken=null!==(a=null===e||void 0===e?void 0:e.accessToken)&&void 0!==a?a:null,this.heartbeatCallback=null!==(i=null===e||void 0===e?void 0:e.heartbeatCallback)&&void 0!==i?i:G,(null===e||void 0===e?void 0:e.params)&&(this.params=e.params),(null===e||void 0===e?void 0:e.logger)&&(this.logger=e.logger),((null===e||void 0===e?void 0:e.logLevel)||(null===e||void 0===e?void 0:e.log_level))&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=null!==(o=null===e||void 0===e?void 0:e.reconnectAfterMs)&&void 0!==o?o:e=>$[e-1]||1e4,this.encode=null!==(l=null===e||void 0===e?void 0:e.encode)&&void 0!==l?l:(e,t)=>t(JSON.stringify(e)),this.decode=null!==(c=null===e||void 0===e?void 0:e.decode)&&void 0!==c?c:this.serializer.decode.bind(this.serializer),this.worker){if("undefined"!==typeof window&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=null===e||void 0===e?void 0:e.workerUrl}}}class Y extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function X(e){return"object"===typeof e&&null!==e&&"__isStorageError"in e}class ee extends Y{constructor(e,t,n){super(e),this.name="StorageApiError",this.status=t,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class te extends Y{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var ne=function(e,t,n,s){return new(n||(n=Promise))(function(r,a){function i(e){try{l(s.next(e))}catch(t){a(t)}}function o(e){try{l(s.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,o)}l((s=s.apply(e,t||[])).next())})};const se=e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return Promise.resolve().then(n.bind(n,630)).then(e=>{let{default:n}=e;return n(...t)})}:fetch),function(){return t(...arguments)}},re=e=>{if(Array.isArray(e))return e.map(e=>re(e));if("function"===typeof e||e!==Object(e))return e;const t={};return Object.entries(e).forEach(e=>{let[n,s]=e;const r=n.replace(/([-_][a-z])/gi,e=>e.toUpperCase().replace(/[-_]/g,""));t[r]=re(s)}),t};var ae=function(e,t,n,s){return new(n||(n=Promise))(function(r,a){function i(e){try{l(s.next(e))}catch(t){a(t)}}function o(e){try{l(s.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,o)}l((s=s.apply(e,t||[])).next())})};const ie=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),oe=(e,t,s)=>ae(void 0,void 0,void 0,function*(){const r=yield ne(void 0,void 0,void 0,function*(){return"undefined"===typeof Response?(yield Promise.resolve().then(n.bind(n,630))).Response:Response});e instanceof r&&!(null===s||void 0===s?void 0:s.noResolveJson)?e.json().then(n=>{const s=e.status||500,r=(null===n||void 0===n?void 0:n.statusCode)||s+"";t(new ee(ie(n),s,r))}).catch(e=>{t(new te(ie(e),e))}):t(new te(ie(e),e))}),le=(e,t,n,s)=>{const r={method:e,headers:(null===t||void 0===t?void 0:t.headers)||{}};return"GET"!==e&&s?((e=>{if("object"!==typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)})(s)?(r.headers=Object.assign({"Content-Type":"application/json"},null===t||void 0===t?void 0:t.headers),r.body=JSON.stringify(s)):r.body=s,(null===t||void 0===t?void 0:t.duplex)&&(r.duplex=t.duplex),Object.assign(Object.assign({},r),n)):r};function ce(e,t,n,s,r,a){return ae(this,void 0,void 0,function*(){return new Promise((i,o)=>{e(n,le(t,s,r,a)).then(e=>{if(!e.ok)throw e;return(null===s||void 0===s?void 0:s.noResolveJson)?e:e.json()}).then(e=>i(e)).catch(e=>oe(e,o,s))})})}function de(e,t,n,s){return ae(this,void 0,void 0,function*(){return ce(e,"GET",t,n,s)})}function ue(e,t,n,s,r){return ae(this,void 0,void 0,function*(){return ce(e,"POST",t,s,r,n)})}function he(e,t,n,s,r){return ae(this,void 0,void 0,function*(){return ce(e,"PUT",t,s,r,n)})}function me(e,t,n,s,r){return ae(this,void 0,void 0,function*(){return ce(e,"DELETE",t,s,r,n)})}var pe=n(382).hp,fe=function(e,t,n,s){return new(n||(n=Promise))(function(r,a){function i(e){try{l(s.next(e))}catch(t){a(t)}}function o(e){try{l(s.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,o)}l((s=s.apply(e,t||[])).next())})};const xe={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},ge={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class ve{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0;this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=n,this.fetch=se(s)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,t,n,s){return fe(this,void 0,void 0,function*(){try{let r;const a=Object.assign(Object.assign({},ge),s);let i=Object.assign(Object.assign({},this.headers),"POST"===e&&{"x-upsert":String(a.upsert)});const o=a.metadata;"undefined"!==typeof Blob&&n instanceof Blob?(r=new FormData,r.append("cacheControl",a.cacheControl),o&&r.append("metadata",this.encodeMetadata(o)),r.append("",n)):"undefined"!==typeof FormData&&n instanceof FormData?(r=n,r.append("cacheControl",a.cacheControl),o&&r.append("metadata",this.encodeMetadata(o))):(r=n,i["cache-control"]="max-age=".concat(a.cacheControl),i["content-type"]=a.contentType,o&&(i["x-metadata"]=this.toBase64(this.encodeMetadata(o)))),(null===s||void 0===s?void 0:s.headers)&&(i=Object.assign(Object.assign({},i),s.headers));const l=this._removeEmptyFolders(t),c=this._getFinalPath(l),d=yield("PUT"==e?he:ue)(this.fetch,"".concat(this.url,"/object/").concat(c),r,Object.assign({headers:i},(null===a||void 0===a?void 0:a.duplex)?{duplex:a.duplex}:{}));return{data:{path:l,id:d.Id,fullPath:d.Key},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(X(r))return{data:null,error:r};throw r}})}upload(e,t,n){return fe(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,n)})}uploadToSignedUrl(e,t,n,s){return fe(this,void 0,void 0,function*(){const r=this._removeEmptyFolders(e),a=this._getFinalPath(r),i=new URL(this.url+"/object/upload/sign/".concat(a));i.searchParams.set("token",t);try{let e;const t=Object.assign({upsert:ge.upsert},s),a=Object.assign(Object.assign({},this.headers),{"x-upsert":String(t.upsert)});"undefined"!==typeof Blob&&n instanceof Blob?(e=new FormData,e.append("cacheControl",t.cacheControl),e.append("",n)):"undefined"!==typeof FormData&&n instanceof FormData?(e=n,e.append("cacheControl",t.cacheControl)):(e=n,a["cache-control"]="max-age=".concat(t.cacheControl),a["content-type"]=t.contentType);return{data:{path:r,fullPath:(yield he(this.fetch,i.toString(),e,{headers:a})).Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(X(o))return{data:null,error:o};throw o}})}createSignedUploadUrl(e,t){return fe(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const s=Object.assign({},this.headers);(null===t||void 0===t?void 0:t.upsert)&&(s["x-upsert"]="true");const r=yield ue(this.fetch,"".concat(this.url,"/object/upload/sign/").concat(n),{},{headers:s}),a=new URL(this.url+r.url),i=a.searchParams.get("token");if(!i)throw new Y("No token returned by API");return{data:{signedUrl:a.toString(),path:e,token:i},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(X(n))return{data:null,error:n};throw n}})}update(e,t,n){return fe(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,n)})}move(e,t,n){return fe(this,void 0,void 0,function*(){try{return{data:yield ue(this.fetch,"".concat(this.url,"/object/move"),{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null===n||void 0===n?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(X(s))return{data:null,error:s};throw s}})}copy(e,t,n){return fe(this,void 0,void 0,function*(){try{return{data:{path:(yield ue(this.fetch,"".concat(this.url,"/object/copy"),{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null===n||void 0===n?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(X(s))return{data:null,error:s};throw s}})}createSignedUrl(e,t,n){return fe(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),r=yield ue(this.fetch,"".concat(this.url,"/object/sign/").concat(s),Object.assign({expiresIn:t},(null===n||void 0===n?void 0:n.transform)?{transform:n.transform}:{}),{headers:this.headers});const a=(null===n||void 0===n?void 0:n.download)?"&download=".concat(!0===n.download?"":n.download):"";return r={signedUrl:encodeURI("".concat(this.url).concat(r.signedURL).concat(a))},{data:r,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(X(s))return{data:null,error:s};throw s}})}createSignedUrls(e,t,n){return fe(this,void 0,void 0,function*(){try{const s=yield ue(this.fetch,"".concat(this.url,"/object/sign/").concat(this.bucketId),{expiresIn:t,paths:e},{headers:this.headers}),r=(null===n||void 0===n?void 0:n.download)?"&download=".concat(!0===n.download?"":n.download):"";return{data:s.map(e=>Object.assign(Object.assign({},e),{signedUrl:e.signedURL?encodeURI("".concat(this.url).concat(e.signedURL).concat(r)):null})),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(X(s))return{data:null,error:s};throw s}})}download(e,t){return fe(this,void 0,void 0,function*(){const n="undefined"!==typeof(null===t||void 0===t?void 0:t.transform)?"render/image/authenticated":"object",s=this.transformOptsToQueryString((null===t||void 0===t?void 0:t.transform)||{}),r=s?"?".concat(s):"";try{const t=this._getFinalPath(e),s=yield de(this.fetch,"".concat(this.url,"/").concat(n,"/").concat(t).concat(r),{headers:this.headers,noResolveJson:!0});return{data:yield s.blob(),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(X(a))return{data:null,error:a};throw a}})}info(e){return fe(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const e=yield de(this.fetch,"".concat(this.url,"/object/info/").concat(t),{headers:this.headers});return{data:re(e),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(X(n))return{data:null,error:n};throw n}})}exists(e){return fe(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield function(e,t,n,s){return ae(this,void 0,void 0,function*(){return ce(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),s)})}(this.fetch,"".concat(this.url,"/object/").concat(t),{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(X(n)&&n instanceof te){const e=n.originalError;if([400,404].includes(null===e||void 0===e?void 0:e.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,t){const n=this._getFinalPath(e),s=[],r=(null===t||void 0===t?void 0:t.download)?"download=".concat(!0===t.download?"":t.download):"";""!==r&&s.push(r);const a="undefined"!==typeof(null===t||void 0===t?void 0:t.transform)?"render/image":"object",i=this.transformOptsToQueryString((null===t||void 0===t?void 0:t.transform)||{});""!==i&&s.push(i);let o=s.join("&");return""!==o&&(o="?".concat(o)),{data:{publicUrl:encodeURI("".concat(this.url,"/").concat(a,"/public/").concat(n).concat(o))}}}remove(e){return fe(this,void 0,void 0,function*(){try{return{data:yield me(this.fetch,"".concat(this.url,"/object/").concat(this.bucketId),{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(X(t))return{data:null,error:t};throw t}})}list(e,t,n){return fe(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},xe),t),{prefix:e||""});return{data:yield ue(this.fetch,"".concat(this.url,"/object/list/").concat(this.bucketId),s,{headers:this.headers},n),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(X(s))return{data:null,error:s};throw s}})}listV2(e,t){return fe(this,void 0,void 0,function*(){try{const n=Object.assign({},e);return{data:yield ue(this.fetch,"".concat(this.url,"/object/list-v2/").concat(this.bucketId),n,{headers:this.headers},t),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(X(n))return{data:null,error:n};throw n}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return"undefined"!==typeof pe?pe.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return"".concat(this.bucketId,"/").concat(e.replace(/^\/+/,""))}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push("width=".concat(e.width)),e.height&&t.push("height=".concat(e.height)),e.resize&&t.push("resize=".concat(e.resize)),e.format&&t.push("format=".concat(e.format)),e.quality&&t.push("quality=".concat(e.quality)),t.join("&")}}const ye={"X-Client-Info":"storage-js/".concat("2.12.1")};var be=function(e,t,n,s){return new(n||(n=Promise))(function(r,a){function i(e){try{l(s.next(e))}catch(t){a(t)}}function o(e){try{l(s.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,o)}l((s=s.apply(e,t||[])).next())})};class je{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0;this.shouldThrowOnError=!1;const r=new URL(e);if(null===s||void 0===s?void 0:s.useNewHostname){/supabase\.(co|in|red)$/.test(r.hostname)&&!r.hostname.includes("storage.supabase.")&&(r.hostname=r.hostname.replace("supabase.","storage.supabase."))}this.url=r.href,this.headers=Object.assign(Object.assign({},ye),t),this.fetch=se(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return be(this,void 0,void 0,function*(){try{return{data:yield de(this.fetch,"".concat(this.url,"/bucket"),{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(X(e))return{data:null,error:e};throw e}})}getBucket(e){return be(this,void 0,void 0,function*(){try{return{data:yield de(this.fetch,"".concat(this.url,"/bucket/").concat(e),{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(X(t))return{data:null,error:t};throw t}})}createBucket(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{public:!1};return be(this,void 0,void 0,function*(){try{return{data:yield ue(this.fetch,"".concat(this.url,"/bucket"),{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(X(n))return{data:null,error:n};throw n}})}updateBucket(e,t){return be(this,void 0,void 0,function*(){try{return{data:yield he(this.fetch,"".concat(this.url,"/bucket/").concat(e),{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(X(n))return{data:null,error:n};throw n}})}emptyBucket(e){return be(this,void 0,void 0,function*(){try{return{data:yield ue(this.fetch,"".concat(this.url,"/bucket/").concat(e,"/empty"),{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(X(t))return{data:null,error:t};throw t}})}deleteBucket(e){return be(this,void 0,void 0,function*(){try{return{data:yield me(this.fetch,"".concat(this.url,"/bucket/").concat(e),{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(X(t))return{data:null,error:t};throw t}})}}class we extends je{constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},arguments.length>2?arguments[2]:void 0,arguments.length>3?arguments[3]:void 0)}from(e){return new ve(this.url,this.headers,e,this.fetch)}}let Ne="";Ne="undefined"!==typeof Deno?"deno":"undefined"!==typeof document?"web":"undefined"!==typeof navigator&&"ReactNative"===navigator.product?"react-native":"node";const ke={headers:{"X-Client-Info":"supabase-js-".concat(Ne,"/").concat("2.57.4")}},Se={schema:"public"},Ee={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},_e={};var Ce=n(630),Pe=function(e,t,n,s){return new(n||(n=Promise))(function(r,a){function i(e){try{l(s.next(e))}catch(t){a(t)}}function o(e){try{l(s.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,o)}l((s=s.apply(e,t||[])).next())})};const Te=e=>{let t;return t=e||("undefined"===typeof fetch?Ce.default:fetch),function(){return t(...arguments)}},Ae=(e,t,n)=>{const s=Te(n),r="undefined"===typeof Headers?Ce.Headers:Headers;return(n,a)=>Pe(void 0,void 0,void 0,function*(){var i;const o=null!==(i=yield t())&&void 0!==i?i:e;let l=new r(null===a||void 0===a?void 0:a.headers);return l.has("apikey")||l.set("apikey",e),l.has("Authorization")||l.set("Authorization","Bearer ".concat(o)),s(n,Object.assign(Object.assign({},a),{headers:l}))})};var Ie=function(e,t,n,s){return new(n||(n=Promise))(function(r,a){function i(e){try{l(s.next(e))}catch(t){a(t)}}function o(e){try{l(s.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,o)}l((s=s.apply(e,t||[])).next())})};const Re="2.71.1",Oe=3e4,Le=9e4,ze={"X-Client-Info":"gotrue-js/".concat(Re)},De="X-Supabase-Api-Version",Me={timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"},Fe=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i;class Ue extends Error{constructor(e,t,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=n}}function Be(e){return"object"===typeof e&&null!==e&&"__isAuthError"in e}class Ve extends Ue{constructor(e,t,n){super(e,t,n),this.name="AuthApiError",this.status=t,this.code=n}}class qe extends Ue{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class He extends Ue{constructor(e,t,n,s){super(e,n,s),this.name=t,this.status=n}}class We extends He{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class Ge extends He{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ke extends He{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Je extends He{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Ze extends He{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class $e extends He{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Qe(e){return Be(e)&&"AuthRetryableFetchError"===e.name}class Ye extends He{constructor(e,t,n){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=n}}class Xe extends He{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const et="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),tt=" \t\n\r=".split(""),nt=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<tt.length;t+=1)e[tt[t].charCodeAt(0)]=-2;for(let t=0;t<et.length;t+=1)e[et[t].charCodeAt(0)]=t;return e})();function st(e,t,n){if(null!==e)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;n(et[e]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;n(et[e]),t.queuedBits-=6}}function rt(e,t,n){const s=nt[e];if(!(s>-1)){if(-2===s)return;throw new Error('Invalid Base64-URL character "'.concat(String.fromCharCode(e),'"'))}for(t.queue=t.queue<<6|s,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8}function at(e){const t=[],n=e=>{t.push(String.fromCodePoint(e))},s={utf8seq:0,codepoint:0},r={queue:0,queuedBits:0},a=e=>{!function(e,t,n){if(0===t.utf8seq){if(e<=127)return void n(e);for(let n=1;n<6;n+=1)if(0===(e>>7-n&1)){t.utf8seq=n;break}if(2===t.utf8seq)t.codepoint=31&e;else if(3===t.utf8seq)t.codepoint=15&e;else{if(4!==t.utf8seq)throw new Error("Invalid UTF-8 sequence");t.codepoint=7&e}t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|63&e,t.utf8seq-=1,0===t.utf8seq&&n(t.codepoint)}}(e,s,n)};for(let i=0;i<e.length;i+=1)rt(e.charCodeAt(i),r,a);return t.join("")}function it(e,t){if(!(e<=127)){if(e<=2047)return t(192|e>>6),void t(128|63&e);if(e<=65535)return t(224|e>>12),t(128|e>>6&63),void t(128|63&e);if(e<=1114111)return t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),void t(128|63&e);throw new Error("Unrecognized Unicode codepoint: ".concat(e.toString(16)))}t(e)}function ot(e,t){for(let n=0;n<e.length;n+=1){let s=e.charCodeAt(n);if(s>55295&&s<=56319){const t=1024*(s-55296)&65535;s=65536+(e.charCodeAt(n+1)-56320&65535|t),n+=1}it(s,t)}}function lt(e){const t=[],n={queue:0,queuedBits:0},s=e=>{t.push(e)};for(let r=0;r<e.length;r+=1)rt(e.charCodeAt(r),n,s);return new Uint8Array(t)}function ct(e){const t=[],n={queue:0,queuedBits:0},s=e=>{t.push(e)};return e.forEach(e=>st(e,n,s)),st(null,n,s),t.join("")}const dt=()=>"undefined"!==typeof window&&"undefined"!==typeof document,ut={tested:!1,writable:!1},ht=()=>{if(!dt())return!1;try{if("object"!==typeof globalThis.localStorage)return!1}catch(t){return!1}if(ut.tested)return ut.writable;const e="lswt-".concat(Math.random()).concat(Math.random());try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),ut.tested=!0,ut.writable=!0}catch(t){ut.tested=!0,ut.writable=!1}return ut.writable};const mt=e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return Promise.resolve().then(n.bind(n,630)).then(e=>{let{default:n}=e;return n(...t)})}:fetch),function(){return t(...arguments)}},pt=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},ft=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch(s){return n}},xt=async(e,t)=>{await e.removeItem(t)};class gt{constructor(){this.promise=new gt.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}function vt(e){const t=e.split(".");if(3!==t.length)throw new Xe("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!Fe.test(t[n]))throw new Xe("JWT not in base64url format");return{header:JSON.parse(at(t[0])),payload:JSON.parse(at(t[1])),signature:lt(t[2]),raw:{header:t[0],payload:t[1]}}}function yt(e){return("0"+e.toString(16)).substr(-2)}async function bt(e){if(!("undefined"!==typeof crypto&&"undefined"!==typeof crypto.subtle&&"undefined"!==typeof TextEncoder))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const t=await async function(e){const t=(new TextEncoder).encode(e),n=await crypto.subtle.digest("SHA-256",t),s=new Uint8Array(n);return Array.from(s).map(e=>String.fromCharCode(e)).join("")}(e);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function jt(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const s=function(){const e=new Uint32Array(56);if("undefined"===typeof crypto){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",t=e.length;let n="";for(let s=0;s<56;s++)n+=e.charAt(Math.floor(Math.random()*t));return n}return crypto.getRandomValues(e),Array.from(e,yt).join("")}();let r=s;n&&(r+="/PASSWORD_RECOVERY"),await pt(e,"".concat(t,"-code-verifier"),r);const a=await bt(s);return[a,s===a?"plain":"s256"]}gt.promiseConstructor=Promise;const wt=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;const Nt=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function kt(e){if(!Nt.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function St(){return new Proxy({},{get:(e,t)=>{if("__isUserNotAvailableProxy"===t)return!0;if("symbol"===typeof t){const e=t.toString();if("Symbol(Symbol.toPrimitive)"===e||"Symbol(Symbol.toStringTag)"===e||"Symbol(util.inspect.custom)"===e)return}throw new Error('@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "'.concat(t,'" property of the session object is not supported. Please use getUser() instead.'))},set:(e,t)=>{throw new Error('@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "'.concat(t,'" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.'))},deleteProperty:(e,t)=>{throw new Error('@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "'.concat(t,'" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.'))}})}function Et(e){return JSON.parse(JSON.stringify(e))}var _t=function(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(s=Object.getOwnPropertySymbols(e);r<s.length;r++)t.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(e,s[r])&&(n[s[r]]=e[s[r]])}return n};const Ct=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Pt=[502,503,504];async function Tt(e){var t,n;if(!("object"===typeof(n=e)&&null!==n&&"status"in n&&"ok"in n&&"json"in n&&"function"===typeof n.json))throw new $e(Ct(e),0);if(Pt.includes(e.status))throw new $e(Ct(e),e.status);let s,r;try{s=await e.json()}catch(i){throw new qe(Ct(i),i)}const a=function(e){const t=e.headers.get(De);if(!t)return null;if(!t.match(wt))return null;try{return new Date("".concat(t,"T00:00:00.0Z"))}catch(i){return null}}(e);if(a&&a.getTime()>=Me.timestamp&&"object"===typeof s&&s&&"string"===typeof s.code?r=s.code:"object"===typeof s&&s&&"string"===typeof s.error_code&&(r=s.error_code),r){if("weak_password"===r)throw new Ye(Ct(s),e.status,(null===(t=s.weak_password)||void 0===t?void 0:t.reasons)||[]);if("session_not_found"===r)throw new We}else if("object"===typeof s&&s&&"object"===typeof s.weak_password&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((e,t)=>e&&"string"===typeof t,!0))throw new Ye(Ct(s),e.status,s.weak_password.reasons);throw new Ve(Ct(s),e.status||500,r)}async function At(e,t,n,s){var r;const a=Object.assign({},null===s||void 0===s?void 0:s.headers);a[De]||(a[De]=Me.name),(null===s||void 0===s?void 0:s.jwt)&&(a.Authorization="Bearer ".concat(s.jwt));const i=null!==(r=null===s||void 0===s?void 0:s.query)&&void 0!==r?r:{};(null===s||void 0===s?void 0:s.redirectTo)&&(i.redirect_to=s.redirectTo);const o=Object.keys(i).length?"?"+new URLSearchParams(i).toString():"",l=await async function(e,t,n,s,r,a){const i=((e,t,n,s)=>{const r={method:e,headers:(null===t||void 0===t?void 0:t.headers)||{}};return"GET"===e?r:(r.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},null===t||void 0===t?void 0:t.headers),r.body=JSON.stringify(s),Object.assign(Object.assign({},r),n))})(t,s,r,a);let o;try{o=await e(n,Object.assign({},i))}catch(l){throw console.error(l),new $e(Ct(l),0)}o.ok||await Tt(o);if(null===s||void 0===s?void 0:s.noResolveJson)return o;try{return await o.json()}catch(l){await Tt(l)}}(e,t,n+o,{headers:a,noResolveJson:null===s||void 0===s?void 0:s.noResolveJson},{},null===s||void 0===s?void 0:s.body);return(null===s||void 0===s?void 0:s.xform)?null===s||void 0===s?void 0:s.xform(l):{data:Object.assign({},l),error:null}}function It(e){var t;let n=null;var s;(function(e){return e.access_token&&e.refresh_token&&e.expires_in})(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=(s=e.expires_in,Math.round(Date.now()/1e3)+s)));return{data:{session:n,user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function Rt(e){const t=It(e);return!t.error&&e.weak_password&&"object"===typeof e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&"string"===typeof e.weak_password.message&&e.weak_password.reasons.reduce((e,t)=>e&&"string"===typeof t,!0)&&(t.data.weak_password=e.weak_password),t}function Ot(e){var t;return{data:{user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function Lt(e){return{data:e,error:null}}function zt(e){const{action_link:t,email_otp:n,hashed_token:s,redirect_to:r,verification_type:a}=e,i=_t(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]);return{data:{properties:{action_link:t,email_otp:n,hashed_token:s,redirect_to:r,verification_type:a},user:Object.assign({},i)},error:null}}function Dt(e){return e}const Mt=["global","local","others"];var Ft=function(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(s=Object.getOwnPropertySymbols(e);r<s.length;r++)t.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(e,s[r])&&(n[s[r]]=e[s[r]])}return n};class Ut{constructor(e){let{url:t="",headers:n={},fetch:s}=e;this.url=t,this.headers=n,this.fetch=mt(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Mt[0];if(Mt.indexOf(t)<0)throw new Error("@supabase/auth-js: Parameter scope must be one of ".concat(Mt.join(", ")));try{return await At(this.fetch,"POST","".concat(this.url,"/logout?scope=").concat(t),{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Be(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{return await At(this.fetch,"POST","".concat(this.url,"/invite"),{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:Ot})}catch(n){if(Be(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:t}=e,n=Ft(e,["options"]),s=Object.assign(Object.assign({},n),t);return"newEmail"in n&&(s.new_email=null===n||void 0===n?void 0:n.newEmail,delete s.newEmail),await At(this.fetch,"POST","".concat(this.url,"/admin/generate_link"),{body:s,headers:this.headers,xform:zt,redirectTo:null===t||void 0===t?void 0:t.redirectTo})}catch(t){if(Be(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await At(this.fetch,"POST","".concat(this.url,"/admin/users"),{body:e,headers:this.headers,xform:Ot})}catch(t){if(Be(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,n,s,r,a,i,o;try{const l={nextPage:null,lastPage:0,total:0},c=await At(this.fetch,"GET","".concat(this.url,"/admin/users"),{headers:this.headers,noResolveJson:!0,query:{page:null!==(n=null===(t=null===e||void 0===e?void 0:e.page)||void 0===t?void 0:t.toString())&&void 0!==n?n:"",per_page:null!==(r=null===(s=null===e||void 0===e?void 0:e.perPage)||void 0===s?void 0:s.toString())&&void 0!==r?r:""},xform:Dt});if(c.error)throw c.error;const d=await c.json(),u=null!==(a=c.headers.get("x-total-count"))&&void 0!==a?a:0,h=null!==(o=null===(i=c.headers.get("link"))||void 0===i?void 0:i.split(","))&&void 0!==o?o:[];return h.length>0&&(h.forEach(e=>{const t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),n=JSON.parse(e.split(";")[1].split("=")[1]);l["".concat(n,"Page")]=t}),l.total=parseInt(u)),{data:Object.assign(Object.assign({},d),l),error:null}}catch(l){if(Be(l))return{data:{users:[]},error:l};throw l}}async getUserById(e){kt(e);try{return await At(this.fetch,"GET","".concat(this.url,"/admin/users/").concat(e),{headers:this.headers,xform:Ot})}catch(t){if(Be(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){kt(e);try{return await At(this.fetch,"PUT","".concat(this.url,"/admin/users/").concat(e),{body:t,headers:this.headers,xform:Ot})}catch(n){if(Be(n))return{data:{user:null},error:n};throw n}}async deleteUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];kt(e);try{return await At(this.fetch,"DELETE","".concat(this.url,"/admin/users/").concat(e),{headers:this.headers,body:{should_soft_delete:t},xform:Ot})}catch(n){if(Be(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){kt(e.userId);try{const{data:t,error:n}=await At(this.fetch,"GET","".concat(this.url,"/admin/users/").concat(e.userId,"/factors"),{headers:this.headers,xform:e=>({data:{factors:e},error:null})});return{data:t,error:n}}catch(t){if(Be(t))return{data:null,error:t};throw t}}async _deleteFactor(e){kt(e.userId),kt(e.id);try{return{data:await At(this.fetch,"DELETE","".concat(this.url,"/admin/users/").concat(e.userId,"/factors/").concat(e.id),{headers:this.headers}),error:null}}catch(t){if(Be(t))return{data:null,error:t};throw t}}}function Bt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}const Vt=!!(globalThis&&ht()&&globalThis.localStorage&&"true"===globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug"));class qt extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Ht extends qt{}async function Wt(e,t,n){Vt&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const s=new globalThis.AbortController;return t>0&&setTimeout(()=>{s.abort(),Vt&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,0===t?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async s=>{if(!s){if(0===t)throw Vt&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new Ht('Acquiring an exclusive Navigator LockManager lock "'.concat(e,'" immediately failed'));if(Vt)try{const e=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(e,null,"  "))}catch(r){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",r)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}Vt&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await n()}finally{Vt&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}))}!function(){if("object"!==typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(e){"undefined"!==typeof self&&(self.globalThis=self)}}();const Gt={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:ze,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Kt(e,t,n){return await n()}const Jt={};class Zt{constructor(e){var t,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Zt.nextInstanceID,Zt.nextInstanceID+=1,this.instanceID>0&&dt()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},Gt),e);if(this.logDebugMessages=!!s.debug,"function"===typeof s.debug&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new Ut({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=mt(s.fetch),this.lock=s.lock||Kt,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:dt()&&(null===(t=null===globalThis||void 0===globalThis?void 0:globalThis.navigator)||void 0===t?void 0:t.locks)?this.lock=Wt:this.lock=Kt,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:ht()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Bt(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=Bt(this.memoryStorage)),dt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(r){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",r)}null===(n=this.broadcastChannel)||void 0===n||n.addEventListener("message",async e=>{this._debug("received broadcast notification from other tab or client",e),await this._notifyAllSubscribers(e.data.event,e.data.session,!1)})}this.initialize()}get jwks(){var e,t;return null!==(t=null===(e=Jt[this.storageKey])||void 0===e?void 0:e.jwks)&&void 0!==t?t:{keys:[]}}set jwks(e){Jt[this.storageKey]=Object.assign(Object.assign({},Jt[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return null!==(t=null===(e=Jt[this.storageKey])||void 0===e?void 0:e.cachedAt)&&void 0!==t?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Jt[this.storageKey]=Object.assign(Object.assign({},Jt[this.storageKey]),{cachedAt:e})}_debug(){if(this.logDebugMessages){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.logger("GoTrueClient@".concat(this.instanceID," (").concat(Re,") ").concat((new Date).toISOString()),...t)}return this}async initialize(){return this.initializePromise||(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))()),await this.initializePromise}async _initialize(){var e;try{const t=function(e){const t={},n=new URL(e);if(n.hash&&"#"===n.hash[0])try{new URLSearchParams(n.hash.substring(1)).forEach((e,n)=>{t[n]=e})}catch(s){}return n.searchParams.forEach((e,n)=>{t[n]=e}),t}(window.location.href);let n="none";if(this._isImplicitGrantCallback(t)?n="implicit":await this._isPKCECallback(t)&&(n="pkce"),dt()&&this.detectSessionInUrl&&"none"!==n){const{data:s,error:r}=await this._getSessionFromURL(t,n);if(r){if(this._debug("#_initialize()","error detecting session from URL",r),function(e){return Be(e)&&"AuthImplicitGrantRedirectError"===e.name}(r)){const t=null===(e=r.details)||void 0===e?void 0:e.code;if("identity_already_exists"===t||"identity_not_found"===t||"single_identity_not_deletable"===t)return{error:r}}return await this._removeSession(),{error:r}}const{session:a,redirectType:i}=s;return this._debug("#_initialize()","detected session in URL",a,"redirect type",i),await this._saveSession(a),setTimeout(async()=>{"recovery"===i?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return Be(t)?{error:t}:{error:new qe("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,n,s;try{const r=await At(this.fetch,"POST","".concat(this.url,"/signup"),{headers:this.headers,body:{data:null!==(n=null===(t=null===e||void 0===e?void 0:e.options)||void 0===t?void 0:t.data)&&void 0!==n?n:{},gotrue_meta_security:{captcha_token:null===(s=null===e||void 0===e?void 0:e.options)||void 0===s?void 0:s.captchaToken}},xform:It}),{data:a,error:i}=r;if(i||!a)return{data:{user:null,session:null},error:i};const o=a.session,l=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:l,session:o},error:null}}catch(r){if(Be(r))return{data:{user:null,session:null},error:r};throw r}}async signUp(e){var t,n,s;try{let r;if("email"in e){const{email:n,password:s,options:a}=e;let i=null,o=null;"pkce"===this.flowType&&([i,o]=await jt(this.storage,this.storageKey)),r=await At(this.fetch,"POST","".concat(this.url,"/signup"),{headers:this.headers,redirectTo:null===a||void 0===a?void 0:a.emailRedirectTo,body:{email:n,password:s,data:null!==(t=null===a||void 0===a?void 0:a.data)&&void 0!==t?t:{},gotrue_meta_security:{captcha_token:null===a||void 0===a?void 0:a.captchaToken},code_challenge:i,code_challenge_method:o},xform:It})}else{if(!("phone"in e))throw new Ke("You must provide either an email or phone number and a password");{const{phone:t,password:a,options:i}=e;r=await At(this.fetch,"POST","".concat(this.url,"/signup"),{headers:this.headers,body:{phone:t,password:a,data:null!==(n=null===i||void 0===i?void 0:i.data)&&void 0!==n?n:{},channel:null!==(s=null===i||void 0===i?void 0:i.channel)&&void 0!==s?s:"sms",gotrue_meta_security:{captcha_token:null===i||void 0===i?void 0:i.captchaToken}},xform:It})}}const{data:a,error:i}=r;if(i||!a)return{data:{user:null,session:null},error:i};const o=a.session,l=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:l,session:o},error:null}}catch(r){if(Be(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithPassword(e){try{let t;if("email"in e){const{email:n,password:s,options:r}=e;t=await At(this.fetch,"POST","".concat(this.url,"/token?grant_type=password"),{headers:this.headers,body:{email:n,password:s,gotrue_meta_security:{captcha_token:null===r||void 0===r?void 0:r.captchaToken}},xform:Rt})}else{if(!("phone"in e))throw new Ke("You must provide either an email or phone number and a password");{const{phone:n,password:s,options:r}=e;t=await At(this.fetch,"POST","".concat(this.url,"/token?grant_type=password"),{headers:this.headers,body:{phone:n,password:s,gotrue_meta_security:{captcha_token:null===r||void 0===r?void 0:r.captchaToken}},xform:Rt})}}const{data:n,error:s}=t;return s?{data:{user:null,session:null},error:s}:n&&n.session&&n.user?(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s}):{data:{user:null,session:null},error:new Ge}}catch(t){if(Be(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,n,s,r;return await this._handleProviderSignIn(e.provider,{redirectTo:null===(t=e.options)||void 0===t?void 0:t.redirectTo,scopes:null===(n=e.options)||void 0===n?void 0:n.scopes,queryParams:null===(s=e.options)||void 0===s?void 0:s.queryParams,skipBrowserRedirect:null===(r=e.options)||void 0===r?void 0:r.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;if("solana"===t)return await this.signInWithSolana(e);throw new Error('@supabase/auth-js: Unsupported chain "'.concat(t,'"'))}async signInWithSolana(e){var t,n,s,r,a,i,o,l,c,d,u,h;let m,p;if("message"in e)m=e.message,p=e.signature;else{const{chain:u,wallet:h,statement:f,options:x}=e;let g;if(dt())if("object"===typeof h)g=h;else{const e=window;if(!("solana"in e)||"object"!==typeof e.solana||!("signIn"in e.solana&&"function"===typeof e.solana.signIn||"signMessage"in e.solana&&"function"===typeof e.solana.signMessage))throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.");g=e.solana}else{if("object"!==typeof h||!(null===x||void 0===x?void 0:x.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");g=h}const v=new URL(null!==(t=null===x||void 0===x?void 0:x.url)&&void 0!==t?t:window.location.href);if("signIn"in g&&g.signIn){const e=await g.signIn(Object.assign(Object.assign(Object.assign({issuedAt:(new Date).toISOString()},null===x||void 0===x?void 0:x.signInWithSolana),{version:"1",domain:v.host,uri:v.href}),f?{statement:f}:null));let t;if(Array.isArray(e)&&e[0]&&"object"===typeof e[0])t=e[0];else{if(!(e&&"object"===typeof e&&"signedMessage"in e&&"signature"in e))throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");t=e}if(!("signedMessage"in t&&"signature"in t&&("string"===typeof t.signedMessage||t.signedMessage instanceof Uint8Array)&&t.signature instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields");m="string"===typeof t.signedMessage?t.signedMessage:(new TextDecoder).decode(t.signedMessage),p=t.signature}else{if(!("signMessage"in g)||"function"!==typeof g.signMessage||!("publicKey"in g)||"object"!==typeof g||!g.publicKey||!("toBase58"in g.publicKey)||"function"!==typeof g.publicKey.toBase58)throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");m=["".concat(v.host," wants you to sign in with your Solana account:"),g.publicKey.toBase58(),...f?["",f,""]:[""],"Version: 1","URI: ".concat(v.href),"Issued At: ".concat(null!==(s=null===(n=null===x||void 0===x?void 0:x.signInWithSolana)||void 0===n?void 0:n.issuedAt)&&void 0!==s?s:(new Date).toISOString()),...(null===(r=null===x||void 0===x?void 0:x.signInWithSolana)||void 0===r?void 0:r.notBefore)?["Not Before: ".concat(x.signInWithSolana.notBefore)]:[],...(null===(a=null===x||void 0===x?void 0:x.signInWithSolana)||void 0===a?void 0:a.expirationTime)?["Expiration Time: ".concat(x.signInWithSolana.expirationTime)]:[],...(null===(i=null===x||void 0===x?void 0:x.signInWithSolana)||void 0===i?void 0:i.chainId)?["Chain ID: ".concat(x.signInWithSolana.chainId)]:[],...(null===(o=null===x||void 0===x?void 0:x.signInWithSolana)||void 0===o?void 0:o.nonce)?["Nonce: ".concat(x.signInWithSolana.nonce)]:[],...(null===(l=null===x||void 0===x?void 0:x.signInWithSolana)||void 0===l?void 0:l.requestId)?["Request ID: ".concat(x.signInWithSolana.requestId)]:[],...(null===(d=null===(c=null===x||void 0===x?void 0:x.signInWithSolana)||void 0===c?void 0:c.resources)||void 0===d?void 0:d.length)?["Resources",...x.signInWithSolana.resources.map(e=>"- ".concat(e))]:[]].join("\n");const e=await g.signMessage((new TextEncoder).encode(m),"utf8");if(!e||!(e instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");p=e}}try{const{data:t,error:n}=await At(this.fetch,"POST","".concat(this.url,"/token?grant_type=web3"),{headers:this.headers,body:Object.assign({chain:"solana",message:m,signature:ct(p)},(null===(u=e.options)||void 0===u?void 0:u.captchaToken)?{gotrue_meta_security:{captcha_token:null===(h=e.options)||void 0===h?void 0:h.captchaToken}}:null),xform:It});if(n)throw n;return t&&t.session&&t.user?(t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign({},t),error:n}):{data:{user:null,session:null},error:new Ge}}catch(f){if(Be(f))return{data:{user:null,session:null},error:f};throw f}}async _exchangeCodeForSession(e){const t=await ft(this.storage,"".concat(this.storageKey,"-code-verifier")),[n,s]=(null!==t&&void 0!==t?t:"").split("/");try{const{data:t,error:r}=await At(this.fetch,"POST","".concat(this.url,"/token?grant_type=pkce"),{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:It});if(await xt(this.storage,"".concat(this.storageKey,"-code-verifier")),r)throw r;return t&&t.session&&t.user?(t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign(Object.assign({},t),{redirectType:null!==s&&void 0!==s?s:null}),error:r}):{data:{user:null,session:null,redirectType:null},error:new Ge}}catch(r){if(Be(r))return{data:{user:null,session:null,redirectType:null},error:r};throw r}}async signInWithIdToken(e){try{const{options:t,provider:n,token:s,access_token:r,nonce:a}=e,i=await At(this.fetch,"POST","".concat(this.url,"/token?grant_type=id_token"),{headers:this.headers,body:{provider:n,id_token:s,access_token:r,nonce:a,gotrue_meta_security:{captcha_token:null===t||void 0===t?void 0:t.captchaToken}},xform:It}),{data:o,error:l}=i;return l?{data:{user:null,session:null},error:l}:o&&o.session&&o.user?(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:o,error:l}):{data:{user:null,session:null},error:new Ge}}catch(t){if(Be(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,n,s,r,a;try{if("email"in e){const{email:s,options:r}=e;let a=null,i=null;"pkce"===this.flowType&&([a,i]=await jt(this.storage,this.storageKey));const{error:o}=await At(this.fetch,"POST","".concat(this.url,"/otp"),{headers:this.headers,body:{email:s,data:null!==(t=null===r||void 0===r?void 0:r.data)&&void 0!==t?t:{},create_user:null===(n=null===r||void 0===r?void 0:r.shouldCreateUser)||void 0===n||n,gotrue_meta_security:{captcha_token:null===r||void 0===r?void 0:r.captchaToken},code_challenge:a,code_challenge_method:i},redirectTo:null===r||void 0===r?void 0:r.emailRedirectTo});return{data:{user:null,session:null},error:o}}if("phone"in e){const{phone:t,options:n}=e,{data:i,error:o}=await At(this.fetch,"POST","".concat(this.url,"/otp"),{headers:this.headers,body:{phone:t,data:null!==(s=null===n||void 0===n?void 0:n.data)&&void 0!==s?s:{},create_user:null===(r=null===n||void 0===n?void 0:n.shouldCreateUser)||void 0===r||r,gotrue_meta_security:{captcha_token:null===n||void 0===n?void 0:n.captchaToken},channel:null!==(a=null===n||void 0===n?void 0:n.channel)&&void 0!==a?a:"sms"}});return{data:{user:null,session:null,messageId:null===i||void 0===i?void 0:i.message_id},error:o}}throw new Ke("You must provide either an email or phone number.")}catch(i){if(Be(i))return{data:{user:null,session:null},error:i};throw i}}async verifyOtp(e){var t,n;try{let s,r;"options"in e&&(s=null===(t=e.options)||void 0===t?void 0:t.redirectTo,r=null===(n=e.options)||void 0===n?void 0:n.captchaToken);const{data:a,error:i}=await At(this.fetch,"POST","".concat(this.url,"/verify"),{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:r}}),redirectTo:s,xform:It});if(i)throw i;if(!a)throw new Error("An error occurred on token verification.");const o=a.session,l=a.user;return(null===o||void 0===o?void 0:o.access_token)&&(await this._saveSession(o),await this._notifyAllSubscribers("recovery"==e.type?"PASSWORD_RECOVERY":"SIGNED_IN",o)),{data:{user:l,session:o},error:null}}catch(s){if(Be(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var t,n,s;try{let r=null,a=null;return"pkce"===this.flowType&&([r,a]=await jt(this.storage,this.storageKey)),await At(this.fetch,"POST","".concat(this.url,"/sso"),{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:null!==(n=null===(t=e.options)||void 0===t?void 0:t.redirectTo)&&void 0!==n?n:void 0}),(null===(s=null===e||void 0===e?void 0:e.options)||void 0===s?void 0:s.captchaToken)?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:r,code_challenge_method:a}),headers:this.headers,xform:Lt})}catch(r){if(Be(r))return{data:null,error:r};throw r}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:n}=e;if(n)throw n;if(!t)throw new We;const{error:s}=await At(this.fetch,"GET","".concat(this.url,"/reauthenticate"),{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(Be(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t="".concat(this.url,"/resend");if("email"in e){const{email:n,type:s,options:r}=e,{error:a}=await At(this.fetch,"POST",t,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:null===r||void 0===r?void 0:r.captchaToken}},redirectTo:null===r||void 0===r?void 0:r.emailRedirectTo});return{data:{user:null,session:null},error:a}}if("phone"in e){const{phone:n,type:s,options:r}=e,{data:a,error:i}=await At(this.fetch,"POST",t,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:null===r||void 0===r?void 0:r.captchaToken}}});return{data:{user:null,session:null,messageId:null===a||void 0===a?void 0:a.message_id},error:i}}throw new Ke("You must provide either an email or phone number and a type")}catch(t){if(Be(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){await this.initializePromise;return await this._acquireLock(-1,async()=>this._useSession(async e=>e))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const e=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await e,await t()))();return this.pendingInLock.push((async()=>{try{await n}catch(e){}})()),n}return await this.lock("lock:".concat(this.storageKey),e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const e=t();for(this.pendingInLock.push((async()=>{try{await e}catch(t){}})()),await e;this.pendingInLock.length;){const e=[...this.pendingInLock];await Promise.all(e),this.pendingInLock.splice(0,e.length)}return await e}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",(new Error).stack);try{let e=null;const t=await ft(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),null!==t&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=!!e.expires_at&&1e3*e.expires_at-Date.now()<Le;if(this._debug("#__loadSession()","session has".concat(n?"":" not"," expired"),"expires_at",e.expires_at),!n){if(this.userStorage){const t=await ft(this.userStorage,this.storageKey+"-user");(null===t||void 0===t?void 0:t.user)?e.user=t.user:e.user=St()}if(this.storage.isServer&&e.user){let t=this.suppressGetSessionWarning;e=new Proxy(e,{get:(e,n,s)=>(t||"user"!==n||(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t=!0,this.suppressGetSessionWarning=!0),Reflect.get(e,n,s))})}return{data:{session:e},error:null}}const{session:s,error:r}=await this._callRefreshToken(e.refresh_token);return r?{data:{session:null},error:r}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;return await this._acquireLock(-1,async()=>await this._getUser())}async _getUser(e){try{return e?await At(this.fetch,"GET","".concat(this.url,"/user"),{headers:this.headers,jwt:e,xform:Ot}):await this._useSession(async e=>{var t,n,s;const{data:r,error:a}=e;if(a)throw a;return(null===(t=r.session)||void 0===t?void 0:t.access_token)||this.hasCustomAuthorizationHeader?await At(this.fetch,"GET","".concat(this.url,"/user"),{headers:this.headers,jwt:null!==(s=null===(n=r.session)||void 0===n?void 0:n.access_token)&&void 0!==s?s:void 0,xform:Ot}):{data:{user:null},error:new We}})}catch(t){if(Be(t))return function(e){return Be(e)&&"AuthSessionMissingError"===e.name}(t)&&(await this._removeSession(),await xt(this.storage,"".concat(this.storageKey,"-code-verifier"))),{data:{user:null},error:t};throw t}}async updateUser(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{return await this._useSession(async n=>{const{data:s,error:r}=n;if(r)throw r;if(!s.session)throw new We;const a=s.session;let i=null,o=null;"pkce"===this.flowType&&null!=e.email&&([i,o]=await jt(this.storage,this.storageKey));const{data:l,error:c}=await At(this.fetch,"PUT","".concat(this.url,"/user"),{headers:this.headers,redirectTo:null===t||void 0===t?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:i,code_challenge_method:o}),jwt:a.access_token,xform:Ot});if(c)throw c;return a.user=l.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(n){if(Be(n))return{data:{user:null},error:n};throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new We;const t=Date.now()/1e3;let n=t,s=!0,r=null;const{payload:a}=vt(e.access_token);if(a.exp&&(n=a.exp,s=n<=t),s){const{session:t,error:n}=await this._callRefreshToken(e.refresh_token);if(n)return{data:{user:null,session:null},error:n};if(!t)return{data:{user:null,session:null},error:null};r=t}else{const{data:s,error:a}=await this._getUser(e.access_token);if(a)throw a;r={access_token:e.access_token,refresh_token:e.refresh_token,user:s.user,token_type:"bearer",expires_in:n-t,expires_at:n},await this._saveSession(r),await this._notifyAllSubscribers("SIGNED_IN",r)}return{data:{user:r.user,session:r},error:null}}catch(t){if(Be(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var n;if(!e){const{data:s,error:r}=t;if(r)throw r;e=null!==(n=s.session)&&void 0!==n?n:void 0}if(!(null===e||void 0===e?void 0:e.refresh_token))throw new We;const{session:s,error:r}=await this._callRefreshToken(e.refresh_token);return r?{data:{user:null,session:null},error:r}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(Be(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!dt())throw new Je("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Je(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if("pkce"===this.flowType)throw new Ze("Not a valid PKCE flow url.");break;case"pkce":if("implicit"===this.flowType)throw new Je("Not a valid implicit grant flow url.")}if("pkce"===t){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Ze("No code detected.");const{data:t,error:n}=await this._exchangeCodeForSession(e.code);if(n)throw n;const s=new URL(window.location.href);return s.searchParams.delete("code"),window.history.replaceState(window.history.state,"",s.toString()),{data:{session:t.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:r,refresh_token:a,expires_in:i,expires_at:o,token_type:l}=e;if(!r||!i||!a||!l)throw new Je("No session defined in URL");const c=Math.round(Date.now()/1e3),d=parseInt(i);let u=c+d;o&&(u=parseInt(o));const h=u-c;1e3*h<=Oe&&console.warn("@supabase/gotrue-js: Session as retrieved from URL expires in ".concat(h,"s, should have been closer to ").concat(d,"s"));const m=u-d;c-m>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",m,u,c):c-m<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",m,u,c);const{data:p,error:f}=await this._getUser(r);if(f)throw f;const x={provider_token:n,provider_refresh_token:s,access_token:r,expires_in:d,expires_at:u,refresh_token:a,token_type:l,user:p.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:x,redirectType:e.type},error:null}}catch(n){if(Be(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(e){return Boolean(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await ft(this.storage,"".concat(this.storageKey,"-code-verifier"));return!(!e.code||!t)}async signOut(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{scope:"global"};return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut(){let{scope:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{scope:"global"};return await this._useSession(async t=>{var n;const{data:s,error:r}=t;if(r)return{error:r};const a=null===(n=s.session)||void 0===n?void 0:n.access_token;if(a){const{error:t}=await this.admin.signOut(a,e);if(t&&(!function(e){return Be(e)&&"AuthApiError"===e.name}(t)||404!==t.status&&401!==t.status&&403!==t.status))return{error:t}}return"others"!==e&&(await this._removeSession(),await xt(this.storage,"".concat(this.storageKey,"-code-verifier"))),{error:null}})}onAuthStateChange(e){const t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}),n={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,n),(async()=>{await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})})(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async t=>{var n,s;try{const{data:{session:s},error:r}=t;if(r)throw r;await(null===(n=this.stateChangeEmitters.get(e))||void 0===n?void 0:n.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(r){await(null===(s=this.stateChangeEmitters.get(e))||void 0===s?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",r),console.error(r)}})}async resetPasswordForEmail(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=null,s=null;"pkce"===this.flowType&&([n,s]=await jt(this.storage,this.storageKey,!0));try{return await At(this.fetch,"POST","".concat(this.url,"/recover"),{body:{email:e,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(r){if(Be(r))return{data:null,error:r};throw r}}async getUserIdentities(){var e;try{const{data:t,error:n}=await this.getUser();if(n)throw n;return{data:{identities:null!==(e=t.user.identities)&&void 0!==e?e:[]},error:null}}catch(t){if(Be(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:n,error:s}=await this._useSession(async t=>{var n,s,r,a,i;const{data:o,error:l}=t;if(l)throw l;const c=await this._getUrlForProvider("".concat(this.url,"/user/identities/authorize"),e.provider,{redirectTo:null===(n=e.options)||void 0===n?void 0:n.redirectTo,scopes:null===(s=e.options)||void 0===s?void 0:s.scopes,queryParams:null===(r=e.options)||void 0===r?void 0:r.queryParams,skipBrowserRedirect:!0});return await At(this.fetch,"GET",c,{headers:this.headers,jwt:null!==(i=null===(a=o.session)||void 0===a?void 0:a.access_token)&&void 0!==i?i:void 0})});if(s)throw s;return dt()&&!(null===(t=e.options)||void 0===t?void 0:t.skipBrowserRedirect)&&window.location.assign(null===n||void 0===n?void 0:n.url),{data:{provider:e.provider,url:null===n||void 0===n?void 0:n.url},error:null}}catch(n){if(Be(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var n,s;const{data:r,error:a}=t;if(a)throw a;return await At(this.fetch,"DELETE","".concat(this.url,"/user/identities/").concat(e.identity_id),{headers:this.headers,jwt:null!==(s=null===(n=r.session)||void 0===n?void 0:n.access_token)&&void 0!==s?s:void 0})})}catch(t){if(Be(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t="#_refreshAccessToken(".concat(e.substring(0,5),"...)");this._debug(t,"begin");try{const r=Date.now();return await(n=async n=>(n>0&&await async function(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}(200*Math.pow(2,n-1)),this._debug(t,"refreshing attempt",n),await At(this.fetch,"POST","".concat(this.url,"/token?grant_type=refresh_token"),{body:{refresh_token:e},headers:this.headers,xform:It})),s=(e,t)=>{const n=200*Math.pow(2,e);return t&&Qe(t)&&Date.now()+n-r<Oe},new Promise((e,t)=>{(async()=>{for(let a=0;a<1/0;a++)try{const t=await n(a);if(!s(a,null,t))return void e(t)}catch(r){if(!s(a,r))return void t(r)}})()}))}catch(r){if(this._debug(t,"error",r),Be(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(t,"end")}var n,s}_isValidSession(e){return"object"===typeof e&&null!==e&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const n=await this._getUrlForProvider("".concat(this.url,"/authorize"),e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",n),dt()&&!t.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,t;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const r=await ft(this.storage,this.storageKey);if(r&&this.userStorage){let t=await ft(this.userStorage,this.storageKey+"-user");this.storage.isServer||!Object.is(this.storage,this.userStorage)||t||(t={user:r.user},await pt(this.userStorage,this.storageKey+"-user",t)),r.user=null!==(e=null===t||void 0===t?void 0:t.user)&&void 0!==e?e:St()}else if(r&&!r.user&&!r.user){const e=await ft(this.storage,this.storageKey+"-user");e&&(null===e||void 0===e?void 0:e.user)?(r.user=e.user,await xt(this.storage,this.storageKey+"-user"),await pt(this.storage,this.storageKey,r)):r.user=St()}if(this._debug(n,"session from storage",r),!this._isValidSession(r))return this._debug(n,"session is not valid"),void(null!==r&&await this._removeSession());const a=1e3*(null!==(t=r.expires_at)&&void 0!==t?t:1/0)-Date.now()<Le;if(this._debug(n,"session has".concat(a?"":" not"," expired with margin of ").concat(Le,"s")),a){if(this.autoRefreshToken&&r.refresh_token){const{error:e}=await this._callRefreshToken(r.refresh_token);e&&(console.error(e),Qe(e)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",e),await this._removeSession()))}}else if(r.user&&!0===r.user.__isUserNotAvailableProxy)try{const{data:e,error:t}=await this._getUser(r.access_token);!t&&(null===e||void 0===e?void 0:e.user)?(r.user=e.user,await this._saveSession(r),await this._notifyAllSubscribers("SIGNED_IN",r)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(s){console.error("Error getting user data:",s),this._debug(n,"error getting user data, skipping SIGNED_IN notification",s)}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){return this._debug(n,"error",r),void console.error(r)}finally{this._debug(n,"end")}}async _callRefreshToken(e){var t,n;if(!e)throw new We;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s="#_callRefreshToken(".concat(e.substring(0,5),"...)");this._debug(s,"begin");try{this.refreshingDeferred=new gt;const{data:t,error:n}=await this._refreshAccessToken(e);if(n)throw n;if(!t.session)throw new We;await this._saveSession(t.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",t.session);const s={session:t.session,error:null};return this.refreshingDeferred.resolve(s),s}catch(r){if(this._debug(s,"error",r),Be(r)){const e={session:null,error:r};return Qe(r)||await this._removeSession(),null===(t=this.refreshingDeferred)||void 0===t||t.resolve(e),e}throw null===(n=this.refreshingDeferred)||void 0===n||n.reject(r),r}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const s="#_notifyAllSubscribers(".concat(e,")");this._debug(s,"begin",t,"broadcast = ".concat(n));try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:t});const s=[],r=Array.from(this.stateChangeEmitters.values()).map(async n=>{try{await n.callback(e,t)}catch(r){s.push(r)}});if(await Promise.all(r),s.length>0){for(let e=0;e<s.length;e+=1)console.error(s[e]);throw s[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),n=t.user&&!0===t.user.__isUserNotAvailableProxy;if(this.userStorage){!n&&t.user&&await pt(this.userStorage,this.storageKey+"-user",{user:t.user});const e=Object.assign({},t);delete e.user;const s=Et(e);await pt(this.storage,this.storageKey,s)}else{const e=Et(t);await pt(this.storage,this.storageKey,e)}}async _removeSession(){this._debug("#_removeSession()"),await xt(this.storage,this.storageKey),await xt(this.storage,this.storageKey+"-code-verifier"),await xt(this.storage,this.storageKey+"-user"),this.userStorage&&await xt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&dt()&&(null===window||void 0===window?void 0:window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Oe);this.autoRefreshTicker=e,e&&"object"===typeof e&&"function"===typeof e.unref?e.unref():"undefined"!==typeof Deno&&"function"===typeof Deno.unrefTimer&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async e=>{const{data:{session:n}}=e;if(!n||!n.refresh_token||!n.expires_at)return void this._debug("#_autoRefreshTokenTick()","no session");const s=Math.floor((1e3*n.expires_at-t)/Oe);this._debug("#_autoRefreshTokenTick()","access token expires in ".concat(s," ticks, a tick lasts ").concat(Oe,"ms, refresh threshold is ").concat(3," ticks")),s<=3&&await this._callRefreshToken(n.refresh_token)})}catch(e){console.error("Auto refresh tick failed with error. This is likely a transient error.",e)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(!(e.isAcquireTimeout||e instanceof qt))throw e;this._debug("auto refresh token tick lock not available")}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!dt()||!(null===window||void 0===window?void 0:window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),null===window||void 0===window||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t="#_onVisibilityChanged(".concat(e,")");this._debug(t,"visibilityState",document.visibilityState),"visible"===document.visibilityState?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{"visible"===document.visibilityState?await this._recoverAndRefresh():this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting")}))):"hidden"===document.visibilityState&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,n){const s=["provider=".concat(encodeURIComponent(t))];if((null===n||void 0===n?void 0:n.redirectTo)&&s.push("redirect_to=".concat(encodeURIComponent(n.redirectTo))),(null===n||void 0===n?void 0:n.scopes)&&s.push("scopes=".concat(encodeURIComponent(n.scopes))),"pkce"===this.flowType){const[e,t]=await jt(this.storage,this.storageKey),n=new URLSearchParams({code_challenge:"".concat(encodeURIComponent(e)),code_challenge_method:"".concat(encodeURIComponent(t))});s.push(n.toString())}if(null===n||void 0===n?void 0:n.queryParams){const e=new URLSearchParams(n.queryParams);s.push(e.toString())}return(null===n||void 0===n?void 0:n.skipBrowserRedirect)&&s.push("skip_http_redirect=".concat(n.skipBrowserRedirect)),"".concat(e,"?").concat(s.join("&"))}async _unenroll(e){try{return await this._useSession(async t=>{var n;const{data:s,error:r}=t;return r?{data:null,error:r}:await At(this.fetch,"DELETE","".concat(this.url,"/factors/").concat(e.factorId),{headers:this.headers,jwt:null===(n=null===s||void 0===s?void 0:s.session)||void 0===n?void 0:n.access_token})})}catch(t){if(Be(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var n,s;const{data:r,error:a}=t;if(a)return{data:null,error:a};const i=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},"phone"===e.factorType?{phone:e.phone}:{issuer:e.issuer}),{data:o,error:l}=await At(this.fetch,"POST","".concat(this.url,"/factors"),{body:i,headers:this.headers,jwt:null===(n=null===r||void 0===r?void 0:r.session)||void 0===n?void 0:n.access_token});return l?{data:null,error:l}:("totp"===e.factorType&&(null===(s=null===o||void 0===o?void 0:o.totp)||void 0===s?void 0:s.qr_code)&&(o.totp.qr_code="data:image/svg+xml;utf-8,".concat(o.totp.qr_code)),{data:o,error:null})})}catch(t){if(Be(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:s,error:r}=t;if(r)return{data:null,error:r};const{data:a,error:i}=await At(this.fetch,"POST","".concat(this.url,"/factors/").concat(e.factorId,"/verify"),{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:null===(n=null===s||void 0===s?void 0:s.session)||void 0===n?void 0:n.access_token});return i?{data:null,error:i}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:i})})}catch(t){if(Be(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:s,error:r}=t;return r?{data:null,error:r}:await At(this.fetch,"POST","".concat(this.url,"/factors/").concat(e.factorId,"/challenge"),{body:{channel:e.channel},headers:this.headers,jwt:null===(n=null===s||void 0===s?void 0:s.session)||void 0===n?void 0:n.access_token})})}catch(t){if(Be(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const n=(null===e||void 0===e?void 0:e.factors)||[],s=n.filter(e=>"totp"===e.factor_type&&"verified"===e.status),r=n.filter(e=>"phone"===e.factor_type&&"verified"===e.status);return{data:{all:n,totp:s,phone:r},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,n;const{data:{session:s},error:r}=e;if(r)return{data:null,error:r};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=vt(s.access_token);let i=null;a.aal&&(i=a.aal);let o=i;(null!==(n=null===(t=s.user.factors)||void 0===t?void 0:t.filter(e=>"verified"===e.status))&&void 0!==n?n:[]).length>0&&(o="aal2");return{data:{currentLevel:i,nextLevel:o,currentAuthenticationMethods:a.amr||[]},error:null}}))}async fetchJwk(e){let t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{keys:[]}).keys.find(t=>t.kid===e);if(t)return t;const n=Date.now();if(t=this.jwks.keys.find(t=>t.kid===e),t&&this.jwks_cached_at+6e5>n)return t;const{data:s,error:r}=await At(this.fetch,"GET","".concat(this.url,"/.well-known/jwks.json"),{headers:this.headers});if(r)throw r;return s.keys&&0!==s.keys.length?(this.jwks=s,this.jwks_cached_at=n,t=s.keys.find(t=>t.kid===e),t||null):null}async getClaims(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{let n=e;if(!n){const{data:e,error:t}=await this.getSession();if(t||!e.session)return{data:null,error:t};n=e.session.access_token}const{header:s,payload:r,signature:a,raw:{header:i,payload:o}}=vt(n);(null===t||void 0===t?void 0:t.allowExpired)||function(e){if(!e)throw new Error("Missing exp claim");if(e<=Math.floor(Date.now()/1e3))throw new Error("JWT has expired")}(r.exp);const l=s.alg&&!s.alg.startsWith("HS")&&s.kid&&"crypto"in globalThis&&"subtle"in globalThis.crypto?await this.fetchJwk(s.kid,(null===t||void 0===t?void 0:t.keys)?{keys:t.keys}:null===t||void 0===t?void 0:t.jwks):null;if(!l){const{error:e}=await this.getUser(n);if(e)throw e;return{data:{claims:r,header:s,signature:a},error:null}}const c=function(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}(s.alg),d=await crypto.subtle.importKey("jwk",l,c,!0,["verify"]);if(!await crypto.subtle.verify(c,d,a,function(e){const t=[];return ot(e,e=>t.push(e)),new Uint8Array(t)}("".concat(i,".").concat(o))))throw new Xe("Invalid JWT signature");return{data:{claims:r,header:s,signature:a},error:null}}catch(n){if(Be(n))return{data:null,error:n};throw n}}}Zt.nextInstanceID=0;const $t=Zt;class Qt extends $t{constructor(e){super(e)}}var Yt=function(e,t,n,s){return new(n||(n=Promise))(function(r,a){function i(e){try{l(s.next(e))}catch(t){a(t)}}function o(e){try{l(s.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,o)}l((s=s.apply(e,t||[])).next())})};class Xt{constructor(e,t,n){var s,r,a;this.supabaseUrl=e,this.supabaseKey=t;const i=function(e){const t=null===e||void 0===e?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL((n=t).endsWith("/")?n:n+"/")}catch(s){throw Error("Invalid supabaseUrl: Provided URL is malformed.")}var n}(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",i),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",i),this.storageUrl=new URL("storage/v1",i),this.functionsUrl=new URL("functions/v1",i);const o="sb-".concat(i.hostname.split(".")[0],"-auth-token"),l=function(e,t){var n,s;const{db:r,auth:a,realtime:i,global:o}=e,{db:l,auth:c,realtime:d,global:u}=t,h={db:Object.assign(Object.assign({},l),r),auth:Object.assign(Object.assign({},c),a),realtime:Object.assign(Object.assign({},d),i),storage:{},global:Object.assign(Object.assign(Object.assign({},u),o),{headers:Object.assign(Object.assign({},null!==(n=null===u||void 0===u?void 0:u.headers)&&void 0!==n?n:{}),null!==(s=null===o||void 0===o?void 0:o.headers)&&void 0!==s?s:{})}),accessToken:()=>Ie(this,void 0,void 0,function*(){return""})};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}(null!==n&&void 0!==n?n:{},{db:Se,realtime:_e,auth:Object.assign(Object.assign({},Ee),{storageKey:o}),global:ke});this.storageKey=null!==(s=l.auth.storageKey)&&void 0!==s?s:"",this.headers=null!==(r=l.global.headers)&&void 0!==r?r:{},l.accessToken?(this.accessToken=l.accessToken,this.auth=new Proxy({},{get:(e,t)=>{throw new Error("@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.".concat(String(t)," is not possible"))}})):this.auth=this._initSupabaseAuthClient(null!==(a=l.auth)&&void 0!==a?a:{},this.headers,l.global.fetch),this.fetch=Ae(t,this._getAccessToken.bind(this),l.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},l.realtime)),this.rest=new u(new URL("rest/v1",i).href,{headers:this.headers,schema:l.db.schema,fetch:this.fetch}),this.storage=new we(this.storageUrl.href,this.headers,this.fetch,null===n||void 0===n?void 0:n.storage),l.accessToken||this._listenForAuthEvents()}get functions(){return new c(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.rest.rpc(e,t,n)}channel(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}};return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return Yt(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return null!==(t=null===(e=n.session)||void 0===e?void 0:e.access_token)&&void 0!==t?t:this.supabaseKey})}_initSupabaseAuthClient(e,t,n){let{autoRefreshToken:s,persistSession:r,detectSessionInUrl:a,storage:i,userStorage:o,storageKey:l,flowType:c,lock:d,debug:u}=e;const h={Authorization:"Bearer ".concat(this.supabaseKey),apikey:"".concat(this.supabaseKey)};return new Qt({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),t),storageKey:l,autoRefreshToken:s,persistSession:r,detectSessionInUrl:a,storage:i,userStorage:o,flowType:c,lock:d,debug:u,fetch:n,hasCustomAuthorizationHeader:Object.keys(this.headers).some(e=>"authorization"===e.toLowerCase())})}_initRealtimeClient(e){return new Q(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},null===e||void 0===e?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",null===t||void 0===t?void 0:t.access_token)})}_handleTokenChanged(e,t,n){"TOKEN_REFRESHED"!==e&&"SIGNED_IN"!==e||this.changedAccessToken===n?"SIGNED_OUT"===e&&(this.realtime.setAuth(),"STORAGE"==t&&this.auth.signOut(),this.changedAccessToken=void 0):this.changedAccessToken=n}}var en=n(285);(function(){if("undefined"!==typeof window)return!1;if("undefined"===typeof en)return!1;const e=en.version;if(void 0===e||null===e)return!1;const t=e.match(/^v(\d+)\./);return!!t&&parseInt(t[1],10)<=18})()&&console.warn("\u26a0\ufe0f  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const tn="https://dlgfhgcczqefbuhcyazh.supabase.co",nn="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRsZ2ZoZ2NjenFlZmJ1aGN5YXpoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ2MDM3NjQsImV4cCI6MjA3MDE3OTc2NH0.ILqv7fUAP8KAr0GzkqeqaRqDcbKcPhcHtIQR7PYFIgY";const sn=tn&&nn?((e,t,n)=>new Xt(e,t,n))(tn,nn):null,rn=async()=>{if(!sn)return console.error("[SUPABASE] Client non initialis\xe9 - configuration manquante"),{success:!1,error:"Configuration Supabase manquante"};try{const{data:e,error:t}=await sn.from("users").select("count").limit(1);return t?(console.error("[SUPABASE] Erreur de connexion:",t.message),{success:!1,error:t.message}):(console.log("[SUPABASE] Connexion r\xe9ussie"),{success:!0})}catch(e){return console.error("[SUPABASE] Erreur de connexion:",e.message),{success:!1,error:e.message}}}},202:(e,t)=>{"use strict";var n=Symbol.for("react.element"),s=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),m=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},f=Object.assign,x={};function g(e,t,n){this.props=e,this.context=t,this.refs=x,this.updater=n||p}function v(){}function y(e,t,n){this.props=e,this.context=t,this.refs=x,this.updater=n||p}g.prototype.isReactComponent={},g.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},g.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=g.prototype;var b=y.prototype=new v;b.constructor=y,f(b,g.prototype),b.isPureReactComponent=!0;var j=Array.isArray,w=Object.prototype.hasOwnProperty,N={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,s){var r,a={},i=null,o=null;if(null!=t)for(r in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(i=""+t.key),t)w.call(t,r)&&!k.hasOwnProperty(r)&&(a[r]=t[r]);var l=arguments.length-2;if(1===l)a.children=s;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];a.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps)void 0===a[r]&&(a[r]=l[r]);return{$$typeof:n,type:e,key:i,ref:o,props:a,_owner:N.current}}function E(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var _=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function P(e,t,r,a,i){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l=!1;if(null===e)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case s:l=!0}}if(l)return i=i(l=e),e=""===a?"."+C(l,0):a,j(i)?(r="",null!=e&&(r=e.replace(_,"$&/")+"/"),P(i,t,r,"",function(e){return e})):null!=i&&(E(i)&&(i=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(i,r+(!i.key||l&&l.key===i.key?"":(""+i.key).replace(_,"$&/")+"/")+e)),t.push(i)),1;if(l=0,a=""===a?".":a+":",j(e))for(var c=0;c<e.length;c++){var d=a+C(o=e[c],c);l+=P(o,t,r,d,i)}else if(d=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=m&&e[m]||e["@@iterator"])?e:null}(e),"function"===typeof d)for(e=d.call(e),c=0;!(o=e.next()).done;)l+=P(o=o.value,t,r,d=a+C(o,c++),i);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function T(e,t,n){if(null==e)return e;var s=[],r=0;return P(e,s,"","",function(e){return t.call(n,e,r++)}),s}function A(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var I={current:null},R={transition:null},O={ReactCurrentDispatcher:I,ReactCurrentBatchConfig:R,ReactCurrentOwner:N};function L(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:T,forEach:function(e,t,n){T(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return T(e,function(){t++}),t},toArray:function(e){return T(e,function(e){return e})||[]},only:function(e){if(!E(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=g,t.Fragment=r,t.Profiler=i,t.PureComponent=y,t.StrictMode=a,t.Suspense=d,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.act=L,t.cloneElement=function(e,t,s){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=f({},e.props),a=e.key,i=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(i=t.ref,o=N.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)w.call(t,c)&&!k.hasOwnProperty(c)&&(r[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)r.children=s;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];r.children=l}return{$$typeof:n,type:e.type,key:a,ref:i,props:r,_owner:o}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=E,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:A}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=R.transition;R.transition={};try{e()}finally{R.transition=t}},t.unstable_act=L,t.useCallback=function(e,t){return I.current.useCallback(e,t)},t.useContext=function(e){return I.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return I.current.useDeferredValue(e)},t.useEffect=function(e,t){return I.current.useEffect(e,t)},t.useId=function(){return I.current.useId()},t.useImperativeHandle=function(e,t,n){return I.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return I.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return I.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return I.current.useMemo(e,t)},t.useReducer=function(e,t,n){return I.current.useReducer(e,t,n)},t.useRef=function(e){return I.current.useRef(e)},t.useState=function(e){return I.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return I.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return I.current.useTransition()},t.version="18.3.1"},210:function(e,t,n){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=s(n(829)),a=s(n(736));class i{constructor(e){let{headers:t={},schema:n,fetch:s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.url=e,this.headers=new Headers(t),this.schemaName=n,this.fetch=s}from(e){const t=new URL("".concat(this.url,"/").concat(e));return new r.default(t,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new i(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{head:n=!1,get:s=!1,count:r}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var i;let o;const l=new URL("".concat(this.url,"/rpc/").concat(e));let c;n||s?(o=n?"HEAD":"GET",Object.entries(t).filter(e=>{let[t,n]=e;return void 0!==n}).map(e=>{let[t,n]=e;return[t,Array.isArray(n)?"{".concat(n.join(","),"}"):"".concat(n)]}).forEach(e=>{let[t,n]=e;l.searchParams.append(t,n)})):(o="POST",c=t);const d=new Headers(this.headers);return r&&d.set("Prefer","count=".concat(r)),new a.default({method:o,url:l,headers:d,schema:this.schemaName,body:c,fetch:null!==(i=this.fetch)&&void 0!==i?i:fetch})}}t.default=i},234:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var s=n-1>>>1,r=e[s];if(!(0<a(r,t)))break e;e[s]=t,e[n]=r,n=s}}function s(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var s=0,r=e.length,i=r>>>1;s<i;){var o=2*(s+1)-1,l=e[o],c=o+1,d=e[c];if(0>a(l,n))c<r&&0>a(d,l)?(e[s]=d,e[c]=n,s=c):(e[s]=l,e[o]=n,s=o);else{if(!(c<r&&0>a(d,n)))break e;e[s]=d,e[c]=n,s=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],d=[],u=1,h=null,m=3,p=!1,f=!1,x=!1,g="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,y="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=s(d);null!==t;){if(null===t.callback)r(d);else{if(!(t.startTime<=e))break;r(d),t.sortIndex=t.expirationTime,n(c,t)}t=s(d)}}function j(e){if(x=!1,b(e),!f)if(null!==s(c))f=!0,R(w);else{var t=s(d);null!==t&&O(j,t.startTime-e)}}function w(e,n){f=!1,x&&(x=!1,v(E),E=-1),p=!0;var a=m;try{for(b(n),h=s(c);null!==h&&(!(h.expirationTime>n)||e&&!P());){var i=h.callback;if("function"===typeof i){h.callback=null,m=h.priorityLevel;var o=i(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof o?h.callback=o:h===s(c)&&r(c),b(n)}else r(c);h=s(c)}if(null!==h)var l=!0;else{var u=s(d);null!==u&&O(j,u.startTime-n),l=!1}return l}finally{h=null,m=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var N,k=!1,S=null,E=-1,_=5,C=-1;function P(){return!(t.unstable_now()-C<_)}function T(){if(null!==S){var e=t.unstable_now();C=e;var n=!0;try{n=S(!0,e)}finally{n?N():(k=!1,S=null)}}else k=!1}if("function"===typeof y)N=function(){y(T)};else if("undefined"!==typeof MessageChannel){var A=new MessageChannel,I=A.port2;A.port1.onmessage=T,N=function(){I.postMessage(null)}}else N=function(){g(T,0)};function R(e){S=e,k||(k=!0,N())}function O(e,n){E=g(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){f||p||(f=!0,R(w))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return s(c)},t.unstable_next=function(e){switch(m){case 1:case 2:case 3:var t=3;break;default:t=m}var n=m;m=t;try{return e()}finally{m=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=m;m=e;try{return t()}finally{m=n}},t.unstable_scheduleCallback=function(e,r,a){var i=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?i+a:i:a=i,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:u++,callback:r,priorityLevel:e,startTime:a,expirationTime:o=a+o,sortIndex:-1},a>i?(e.sortIndex=a,n(d,e),null===s(c)&&e===s(d)&&(x?(v(E),E=-1):x=!0,O(j,a-i))):(e.sortIndex=o,n(c,e),f||p||(f=!0,R(w))),e},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(e){var t=m;return function(){var n=m;m=t;try{return e.apply(this,arguments)}finally{m=n}}}},285:e=>{var t,n,s=e.exports={};function r(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function i(e){if(t===setTimeout)return setTimeout(e,0);if((t===r||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"===typeof setTimeout?setTimeout:r}catch(e){t=r}try{n="function"===typeof clearTimeout?clearTimeout:a}catch(e){n=a}}();var o,l=[],c=!1,d=-1;function u(){c&&o&&(c=!1,o.length?l=o.concat(l):d=-1,l.length&&h())}function h(){if(!c){var e=i(u);c=!0;for(var t=l.length;t;){for(o=l,l=[];++d<t;)o&&o[d].run();d=-1,t=l.length}o=null,c=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===a||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{return n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function m(e,t){this.fun=e,this.array=t}function p(){}s.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new m(e,t)),1!==l.length||c||i(h)},m.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=p,s.addListener=p,s.once=p,s.off=p,s.removeListener=p,s.removeAllListeners=p,s.emit=p,s.prependListener=p,s.prependOnceListener=p,s.listeners=function(e){return[]},s.binding=function(e){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(e){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}},286:function(e,t,n){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=s(n(630)),a=s(n(611));t.default=class{constructor(e){var t,n;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=null!==(t=e.shouldThrowOnError)&&void 0!==t&&t,this.signal=e.signal,this.isMaybeSingle=null!==(n=e.isMaybeSingle)&&void 0!==n&&n,e.fetch?this.fetch=e.fetch:"undefined"===typeof fetch?this.fetch=r.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),"GET"!==this.method&&"HEAD"!==this.method&&this.headers.set("Content-Type","application/json");let n=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async e=>{var t,n,s,r;let i=null,o=null,l=null,c=e.status,d=e.statusText;if(e.ok){if("HEAD"!==this.method){const n=await e.text();""===n||(o="text/csv"===this.headers.get("Accept")||this.headers.get("Accept")&&(null===(t=this.headers.get("Accept"))||void 0===t?void 0:t.includes("application/vnd.pgrst.plan+text"))?n:JSON.parse(n))}const r=null===(n=this.headers.get("Prefer"))||void 0===n?void 0:n.match(/count=(exact|planned|estimated)/),a=null===(s=e.headers.get("content-range"))||void 0===s?void 0:s.split("/");r&&a&&a.length>1&&(l=parseInt(a[1])),this.isMaybeSingle&&"GET"===this.method&&Array.isArray(o)&&(o.length>1?(i={code:"PGRST116",details:"Results contain ".concat(o.length," rows, application/vnd.pgrst.object+json requires 1 row"),hint:null,message:"JSON object requested, multiple (or no) rows returned"},o=null,l=null,c=406,d="Not Acceptable"):o=1===o.length?o[0]:null)}else{const t=await e.text();try{i=JSON.parse(t),Array.isArray(i)&&404===e.status&&(o=[],i=null,c=200,d="OK")}catch(u){404===e.status&&""===t?(c=204,d="No Content"):i={message:t}}if(i&&this.isMaybeSingle&&(null===(r=null===i||void 0===i?void 0:i.details)||void 0===r?void 0:r.includes("0 rows"))&&(i=null,c=200,d="OK"),i&&this.shouldThrowOnError)throw new a.default(i)}return{error:i,data:o,count:l,status:c,statusText:d}});return this.shouldThrowOnError||(n=n.catch(e=>{var t,n,s;return{error:{message:"".concat(null!==(t=null===e||void 0===e?void 0:e.name)&&void 0!==t?t:"FetchError",": ").concat(null===e||void 0===e?void 0:e.message),details:"".concat(null!==(n=null===e||void 0===e?void 0:e.stack)&&void 0!==n?n:""),hint:"",code:"".concat(null!==(s=null===e||void 0===e?void 0:e.code)&&void 0!==s?s:"")},data:null,count:null,status:0,statusText:""}})),n.then(e,t)}returns(){return this}overrideTypes(){return this}}},374:function(e,t,n){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=s(n(286));class a extends r.default{select(e){let t=!1;const n=(null!==e&&void 0!==e?e:"*").split("").map(e=>/\s/.test(e)&&!t?"":('"'===e&&(t=!t),e)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(e){let{ascending:t=!0,nullsFirst:n,foreignTable:s,referencedTable:r=s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const a=r?"".concat(r,".order"):"order",i=this.url.searchParams.get(a);return this.url.searchParams.set(a,"".concat(i?"".concat(i,","):"").concat(e,".").concat(t?"asc":"desc").concat(void 0===n?"":n?".nullsfirst":".nullslast")),this}limit(e){let{foreignTable:t,referencedTable:n=t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s="undefined"===typeof n?"limit":"".concat(n,".limit");return this.url.searchParams.set(s,"".concat(e)),this}range(e,t){let{foreignTable:n,referencedTable:s=n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r="undefined"===typeof s?"offset":"".concat(s,".offset"),a="undefined"===typeof s?"limit":"".concat(s,".limit");return this.url.searchParams.set(r,"".concat(e)),this.url.searchParams.set(a,"".concat(t-e+1)),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return"GET"===this.method?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain(){let{analyze:e=!1,verbose:t=!1,settings:n=!1,buffers:s=!1,wal:r=!1,format:a="text"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var i;const o=[e?"analyze":null,t?"verbose":null,n?"settings":null,s?"buffers":null,r?"wal":null].filter(Boolean).join("|"),l=null!==(i=this.headers.get("Accept"))&&void 0!==i?i:"application/json";return this.headers.set("Accept","application/vnd.pgrst.plan+".concat(a,'; for="').concat(l,'"; options=').concat(o,";")),this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer","max-affected=".concat(e)),this}}t.default=a},382:(e,t,n)=>{"use strict";const s=n(445),r=n(900),a="function"===typeof Symbol&&"function"===typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.hp=l,t.IS=50;const i=2147483647;function o(e){if(e>i)throw new RangeError('The value "'+e+'" is invalid for option "size"');const t=new Uint8Array(e);return Object.setPrototypeOf(t,l.prototype),t}function l(e,t,n){if("number"===typeof e){if("string"===typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return u(e)}return c(e,t,n)}function c(e,t,n){if("string"===typeof e)return function(e,t){"string"===typeof t&&""!==t||(t="utf8");if(!l.isEncoding(t))throw new TypeError("Unknown encoding: "+t);const n=0|f(e,t);let s=o(n);const r=s.write(e,t);r!==n&&(s=s.slice(0,r));return s}(e,t);if(ArrayBuffer.isView(e))return function(e){if(Z(e,Uint8Array)){const t=new Uint8Array(e);return m(t.buffer,t.byteOffset,t.byteLength)}return h(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(Z(e,ArrayBuffer)||e&&Z(e.buffer,ArrayBuffer))return m(e,t,n);if("undefined"!==typeof SharedArrayBuffer&&(Z(e,SharedArrayBuffer)||e&&Z(e.buffer,SharedArrayBuffer)))return m(e,t,n);if("number"===typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');const s=e.valueOf&&e.valueOf();if(null!=s&&s!==e)return l.from(s,t,n);const r=function(e){if(l.isBuffer(e)){const t=0|p(e.length),n=o(t);return 0===n.length||e.copy(n,0,0,t),n}if(void 0!==e.length)return"number"!==typeof e.length||$(e.length)?o(0):h(e);if("Buffer"===e.type&&Array.isArray(e.data))return h(e.data)}(e);if(r)return r;if("undefined"!==typeof Symbol&&null!=Symbol.toPrimitive&&"function"===typeof e[Symbol.toPrimitive])return l.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function d(e){if("number"!==typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function u(e){return d(e),o(e<0?0:0|p(e))}function h(e){const t=e.length<0?0:0|p(e.length),n=o(t);for(let s=0;s<t;s+=1)n[s]=255&e[s];return n}function m(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');let s;return s=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n),Object.setPrototypeOf(s,l.prototype),s}function p(e){if(e>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return 0|e}function f(e,t){if(l.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||Z(e,ArrayBuffer))return e.byteLength;if("string"!==typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);const n=e.length,s=arguments.length>2&&!0===arguments[2];if(!s&&0===n)return 0;let r=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return G(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return K(e).length;default:if(r)return s?-1:G(e).length;t=(""+t).toLowerCase(),r=!0}}function x(e,t,n){let s=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return T(this,t,n);case"utf8":case"utf-8":return E(this,t,n);case"ascii":return C(this,t,n);case"latin1":case"binary":return P(this,t,n);case"base64":return S(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,t,n);default:if(s)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),s=!0}}function g(e,t,n){const s=e[t];e[t]=e[n],e[n]=s}function v(e,t,n,s,r){if(0===e.length)return-1;if("string"===typeof n?(s=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),$(n=+n)&&(n=r?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(r)return-1;n=e.length-1}else if(n<0){if(!r)return-1;n=0}if("string"===typeof t&&(t=l.from(t,s)),l.isBuffer(t))return 0===t.length?-1:y(e,t,n,s,r);if("number"===typeof t)return t&=255,"function"===typeof Uint8Array.prototype.indexOf?r?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):y(e,[t],n,s,r);throw new TypeError("val must be string, number or Buffer")}function y(e,t,n,s,r){let a,i=1,o=e.length,l=t.length;if(void 0!==s&&("ucs2"===(s=String(s).toLowerCase())||"ucs-2"===s||"utf16le"===s||"utf-16le"===s)){if(e.length<2||t.length<2)return-1;i=2,o/=2,l/=2,n/=2}function c(e,t){return 1===i?e[t]:e.readUInt16BE(t*i)}if(r){let s=-1;for(a=n;a<o;a++)if(c(e,a)===c(t,-1===s?0:a-s)){if(-1===s&&(s=a),a-s+1===l)return s*i}else-1!==s&&(a-=a-s),s=-1}else for(n+l>o&&(n=o-l),a=n;a>=0;a--){let n=!0;for(let s=0;s<l;s++)if(c(e,a+s)!==c(t,s)){n=!1;break}if(n)return a}return-1}function b(e,t,n,s){n=Number(n)||0;const r=e.length-n;s?(s=Number(s))>r&&(s=r):s=r;const a=t.length;let i;for(s>a/2&&(s=a/2),i=0;i<s;++i){const s=parseInt(t.substr(2*i,2),16);if($(s))return i;e[n+i]=s}return i}function j(e,t,n,s){return J(G(t,e.length-n),e,n,s)}function w(e,t,n,s){return J(function(e){const t=[];for(let n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,s)}function N(e,t,n,s){return J(K(t),e,n,s)}function k(e,t,n,s){return J(function(e,t){let n,s,r;const a=[];for(let i=0;i<e.length&&!((t-=2)<0);++i)n=e.charCodeAt(i),s=n>>8,r=n%256,a.push(r),a.push(s);return a}(t,e.length-n),e,n,s)}function S(e,t,n){return 0===t&&n===e.length?s.fromByteArray(e):s.fromByteArray(e.slice(t,n))}function E(e,t,n){n=Math.min(e.length,n);const s=[];let r=t;for(;r<n;){const t=e[r];let a=null,i=t>239?4:t>223?3:t>191?2:1;if(r+i<=n){let n,s,o,l;switch(i){case 1:t<128&&(a=t);break;case 2:n=e[r+1],128===(192&n)&&(l=(31&t)<<6|63&n,l>127&&(a=l));break;case 3:n=e[r+1],s=e[r+2],128===(192&n)&&128===(192&s)&&(l=(15&t)<<12|(63&n)<<6|63&s,l>2047&&(l<55296||l>57343)&&(a=l));break;case 4:n=e[r+1],s=e[r+2],o=e[r+3],128===(192&n)&&128===(192&s)&&128===(192&o)&&(l=(15&t)<<18|(63&n)<<12|(63&s)<<6|63&o,l>65535&&l<1114112&&(a=l))}}null===a?(a=65533,i=1):a>65535&&(a-=65536,s.push(a>>>10&1023|55296),a=56320|1023&a),s.push(a),r+=i}return function(e){const t=e.length;if(t<=_)return String.fromCharCode.apply(String,e);let n="",s=0;for(;s<t;)n+=String.fromCharCode.apply(String,e.slice(s,s+=_));return n}(s)}l.TYPED_ARRAY_SUPPORT=function(){try{const e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),l.TYPED_ARRAY_SUPPORT||"undefined"===typeof console||"function"!==typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(l.prototype,"parent",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.buffer}}),Object.defineProperty(l.prototype,"offset",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.byteOffset}}),l.poolSize=8192,l.from=function(e,t,n){return c(e,t,n)},Object.setPrototypeOf(l.prototype,Uint8Array.prototype),Object.setPrototypeOf(l,Uint8Array),l.alloc=function(e,t,n){return function(e,t,n){return d(e),e<=0?o(e):void 0!==t?"string"===typeof n?o(e).fill(t,n):o(e).fill(t):o(e)}(e,t,n)},l.allocUnsafe=function(e){return u(e)},l.allocUnsafeSlow=function(e){return u(e)},l.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==l.prototype},l.compare=function(e,t){if(Z(e,Uint8Array)&&(e=l.from(e,e.offset,e.byteLength)),Z(t,Uint8Array)&&(t=l.from(t,t.offset,t.byteLength)),!l.isBuffer(e)||!l.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let n=e.length,s=t.length;for(let r=0,a=Math.min(n,s);r<a;++r)if(e[r]!==t[r]){n=e[r],s=t[r];break}return n<s?-1:s<n?1:0},l.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return l.alloc(0);let n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;const s=l.allocUnsafe(t);let r=0;for(n=0;n<e.length;++n){let t=e[n];if(Z(t,Uint8Array))r+t.length>s.length?(l.isBuffer(t)||(t=l.from(t)),t.copy(s,r)):Uint8Array.prototype.set.call(s,t,r);else{if(!l.isBuffer(t))throw new TypeError('"list" argument must be an Array of Buffers');t.copy(s,r)}r+=t.length}return s},l.byteLength=f,l.prototype._isBuffer=!0,l.prototype.swap16=function(){const e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)g(this,t,t+1);return this},l.prototype.swap32=function(){const e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)g(this,t,t+3),g(this,t+1,t+2);return this},l.prototype.swap64=function(){const e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)g(this,t,t+7),g(this,t+1,t+6),g(this,t+2,t+5),g(this,t+3,t+4);return this},l.prototype.toString=function(){const e=this.length;return 0===e?"":0===arguments.length?E(this,0,e):x.apply(this,arguments)},l.prototype.toLocaleString=l.prototype.toString,l.prototype.equals=function(e){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===l.compare(this,e)},l.prototype.inspect=function(){let e="";const n=t.IS;return e=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(e+=" ... "),"<Buffer "+e+">"},a&&(l.prototype[a]=l.prototype.inspect),l.prototype.compare=function(e,t,n,s,r){if(Z(e,Uint8Array)&&(e=l.from(e,e.offset,e.byteLength)),!l.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===s&&(s=0),void 0===r&&(r=this.length),t<0||n>e.length||s<0||r>this.length)throw new RangeError("out of range index");if(s>=r&&t>=n)return 0;if(s>=r)return-1;if(t>=n)return 1;if(this===e)return 0;let a=(r>>>=0)-(s>>>=0),i=(n>>>=0)-(t>>>=0);const o=Math.min(a,i),c=this.slice(s,r),d=e.slice(t,n);for(let l=0;l<o;++l)if(c[l]!==d[l]){a=c[l],i=d[l];break}return a<i?-1:i<a?1:0},l.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},l.prototype.indexOf=function(e,t,n){return v(this,e,t,n,!0)},l.prototype.lastIndexOf=function(e,t,n){return v(this,e,t,n,!1)},l.prototype.write=function(e,t,n,s){if(void 0===t)s="utf8",n=this.length,t=0;else if(void 0===n&&"string"===typeof t)s=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===s&&(s="utf8")):(s=n,n=void 0)}const r=this.length-t;if((void 0===n||n>r)&&(n=r),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");s||(s="utf8");let a=!1;for(;;)switch(s){case"hex":return b(this,e,t,n);case"utf8":case"utf-8":return j(this,e,t,n);case"ascii":case"latin1":case"binary":return w(this,e,t,n);case"base64":return N(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,e,t,n);default:if(a)throw new TypeError("Unknown encoding: "+s);s=(""+s).toLowerCase(),a=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const _=4096;function C(e,t,n){let s="";n=Math.min(e.length,n);for(let r=t;r<n;++r)s+=String.fromCharCode(127&e[r]);return s}function P(e,t,n){let s="";n=Math.min(e.length,n);for(let r=t;r<n;++r)s+=String.fromCharCode(e[r]);return s}function T(e,t,n){const s=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>s)&&(n=s);let r="";for(let a=t;a<n;++a)r+=Q[e[a]];return r}function A(e,t,n){const s=e.slice(t,n);let r="";for(let a=0;a<s.length-1;a+=2)r+=String.fromCharCode(s[a]+256*s[a+1]);return r}function I(e,t,n){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function R(e,t,n,s,r,a){if(!l.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>r||t<a)throw new RangeError('"value" argument is out of bounds');if(n+s>e.length)throw new RangeError("Index out of range")}function O(e,t,n,s,r){V(t,s,r,e,n,7);let a=Number(t&BigInt(4294967295));e[n++]=a,a>>=8,e[n++]=a,a>>=8,e[n++]=a,a>>=8,e[n++]=a;let i=Number(t>>BigInt(32)&BigInt(4294967295));return e[n++]=i,i>>=8,e[n++]=i,i>>=8,e[n++]=i,i>>=8,e[n++]=i,n}function L(e,t,n,s,r){V(t,s,r,e,n,7);let a=Number(t&BigInt(4294967295));e[n+7]=a,a>>=8,e[n+6]=a,a>>=8,e[n+5]=a,a>>=8,e[n+4]=a;let i=Number(t>>BigInt(32)&BigInt(4294967295));return e[n+3]=i,i>>=8,e[n+2]=i,i>>=8,e[n+1]=i,i>>=8,e[n]=i,n+8}function z(e,t,n,s,r,a){if(n+s>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function D(e,t,n,s,a){return t=+t,n>>>=0,a||z(e,0,n,4),r.write(e,t,n,s,23,4),n+4}function M(e,t,n,s,a){return t=+t,n>>>=0,a||z(e,0,n,8),r.write(e,t,n,s,52,8),n+8}l.prototype.slice=function(e,t){const n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);const s=this.subarray(e,t);return Object.setPrototypeOf(s,l.prototype),s},l.prototype.readUintLE=l.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||I(e,t,this.length);let s=this[e],r=1,a=0;for(;++a<t&&(r*=256);)s+=this[e+a]*r;return s},l.prototype.readUintBE=l.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||I(e,t,this.length);let s=this[e+--t],r=1;for(;t>0&&(r*=256);)s+=this[e+--t]*r;return s},l.prototype.readUint8=l.prototype.readUInt8=function(e,t){return e>>>=0,t||I(e,1,this.length),this[e]},l.prototype.readUint16LE=l.prototype.readUInt16LE=function(e,t){return e>>>=0,t||I(e,2,this.length),this[e]|this[e+1]<<8},l.prototype.readUint16BE=l.prototype.readUInt16BE=function(e,t){return e>>>=0,t||I(e,2,this.length),this[e]<<8|this[e+1]},l.prototype.readUint32LE=l.prototype.readUInt32LE=function(e,t){return e>>>=0,t||I(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},l.prototype.readUint32BE=l.prototype.readUInt32BE=function(e,t){return e>>>=0,t||I(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},l.prototype.readBigUInt64LE=Y(function(e){q(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||H(e,this.length-8);const s=t+256*this[++e]+65536*this[++e]+this[++e]*2**24,r=this[++e]+256*this[++e]+65536*this[++e]+n*2**24;return BigInt(s)+(BigInt(r)<<BigInt(32))}),l.prototype.readBigUInt64BE=Y(function(e){q(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||H(e,this.length-8);const s=t*2**24+65536*this[++e]+256*this[++e]+this[++e],r=this[++e]*2**24+65536*this[++e]+256*this[++e]+n;return(BigInt(s)<<BigInt(32))+BigInt(r)}),l.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||I(e,t,this.length);let s=this[e],r=1,a=0;for(;++a<t&&(r*=256);)s+=this[e+a]*r;return r*=128,s>=r&&(s-=Math.pow(2,8*t)),s},l.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||I(e,t,this.length);let s=t,r=1,a=this[e+--s];for(;s>0&&(r*=256);)a+=this[e+--s]*r;return r*=128,a>=r&&(a-=Math.pow(2,8*t)),a},l.prototype.readInt8=function(e,t){return e>>>=0,t||I(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},l.prototype.readInt16LE=function(e,t){e>>>=0,t||I(e,2,this.length);const n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt16BE=function(e,t){e>>>=0,t||I(e,2,this.length);const n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt32LE=function(e,t){return e>>>=0,t||I(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},l.prototype.readInt32BE=function(e,t){return e>>>=0,t||I(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},l.prototype.readBigInt64LE=Y(function(e){q(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||H(e,this.length-8);const s=this[e+4]+256*this[e+5]+65536*this[e+6]+(n<<24);return(BigInt(s)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*2**24)}),l.prototype.readBigInt64BE=Y(function(e){q(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||H(e,this.length-8);const s=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(s)<<BigInt(32))+BigInt(this[++e]*2**24+65536*this[++e]+256*this[++e]+n)}),l.prototype.readFloatLE=function(e,t){return e>>>=0,t||I(e,4,this.length),r.read(this,e,!0,23,4)},l.prototype.readFloatBE=function(e,t){return e>>>=0,t||I(e,4,this.length),r.read(this,e,!1,23,4)},l.prototype.readDoubleLE=function(e,t){return e>>>=0,t||I(e,8,this.length),r.read(this,e,!0,52,8)},l.prototype.readDoubleBE=function(e,t){return e>>>=0,t||I(e,8,this.length),r.read(this,e,!1,52,8)},l.prototype.writeUintLE=l.prototype.writeUIntLE=function(e,t,n,s){if(e=+e,t>>>=0,n>>>=0,!s){R(this,e,t,n,Math.pow(2,8*n)-1,0)}let r=1,a=0;for(this[t]=255&e;++a<n&&(r*=256);)this[t+a]=e/r&255;return t+n},l.prototype.writeUintBE=l.prototype.writeUIntBE=function(e,t,n,s){if(e=+e,t>>>=0,n>>>=0,!s){R(this,e,t,n,Math.pow(2,8*n)-1,0)}let r=n-1,a=1;for(this[t+r]=255&e;--r>=0&&(a*=256);)this[t+r]=e/a&255;return t+n},l.prototype.writeUint8=l.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,1,255,0),this[t]=255&e,t+1},l.prototype.writeUint16LE=l.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},l.prototype.writeUint16BE=l.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},l.prototype.writeUint32LE=l.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},l.prototype.writeUint32BE=l.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},l.prototype.writeBigUInt64LE=Y(function(e){return O(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeBigUInt64BE=Y(function(e){return L(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeIntLE=function(e,t,n,s){if(e=+e,t>>>=0,!s){const s=Math.pow(2,8*n-1);R(this,e,t,n,s-1,-s)}let r=0,a=1,i=0;for(this[t]=255&e;++r<n&&(a*=256);)e<0&&0===i&&0!==this[t+r-1]&&(i=1),this[t+r]=(e/a|0)-i&255;return t+n},l.prototype.writeIntBE=function(e,t,n,s){if(e=+e,t>>>=0,!s){const s=Math.pow(2,8*n-1);R(this,e,t,n,s-1,-s)}let r=n-1,a=1,i=0;for(this[t+r]=255&e;--r>=0&&(a*=256);)e<0&&0===i&&0!==this[t+r+1]&&(i=1),this[t+r]=(e/a|0)-i&255;return t+n},l.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},l.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},l.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},l.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},l.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},l.prototype.writeBigInt64LE=Y(function(e){return O(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),l.prototype.writeBigInt64BE=Y(function(e){return L(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),l.prototype.writeFloatLE=function(e,t,n){return D(this,e,t,!0,n)},l.prototype.writeFloatBE=function(e,t,n){return D(this,e,t,!1,n)},l.prototype.writeDoubleLE=function(e,t,n){return M(this,e,t,!0,n)},l.prototype.writeDoubleBE=function(e,t,n){return M(this,e,t,!1,n)},l.prototype.copy=function(e,t,n,s){if(!l.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),s||0===s||(s=this.length),t>=e.length&&(t=e.length),t||(t=0),s>0&&s<n&&(s=n),s===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(s<0)throw new RangeError("sourceEnd out of bounds");s>this.length&&(s=this.length),e.length-t<s-n&&(s=e.length-t+n);const r=s-n;return this===e&&"function"===typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,n,s):Uint8Array.prototype.set.call(e,this.subarray(n,s),t),r},l.prototype.fill=function(e,t,n,s){if("string"===typeof e){if("string"===typeof t?(s=t,t=0,n=this.length):"string"===typeof n&&(s=n,n=this.length),void 0!==s&&"string"!==typeof s)throw new TypeError("encoding must be a string");if("string"===typeof s&&!l.isEncoding(s))throw new TypeError("Unknown encoding: "+s);if(1===e.length){const t=e.charCodeAt(0);("utf8"===s&&t<128||"latin1"===s)&&(e=t)}}else"number"===typeof e?e&=255:"boolean"===typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;let r;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"===typeof e)for(r=t;r<n;++r)this[r]=e;else{const a=l.isBuffer(e)?e:l.from(e,s),i=a.length;if(0===i)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(r=0;r<n-t;++r)this[r+t]=a[r%i]}return this};const F={};function U(e,t,n){F[e]=class extends n{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name="".concat(this.name," [").concat(e,"]"),this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return"".concat(this.name," [").concat(e,"]: ").concat(this.message)}}}function B(e){let t="",n=e.length;const s="-"===e[0]?1:0;for(;n>=s+4;n-=3)t="_".concat(e.slice(n-3,n)).concat(t);return"".concat(e.slice(0,n)).concat(t)}function V(e,t,n,s,r,a){if(e>n||e<t){const s="bigint"===typeof t?"n":"";let r;throw r=a>3?0===t||t===BigInt(0)?">= 0".concat(s," and < 2").concat(s," ** ").concat(8*(a+1)).concat(s):">= -(2".concat(s," ** ").concat(8*(a+1)-1).concat(s,") and < 2 ** ")+"".concat(8*(a+1)-1).concat(s):">= ".concat(t).concat(s," and <= ").concat(n).concat(s),new F.ERR_OUT_OF_RANGE("value",r,e)}!function(e,t,n){q(t,"offset"),void 0!==e[t]&&void 0!==e[t+n]||H(t,e.length-(n+1))}(s,r,a)}function q(e,t){if("number"!==typeof e)throw new F.ERR_INVALID_ARG_TYPE(t,"number",e)}function H(e,t,n){if(Math.floor(e)!==e)throw q(e,n),new F.ERR_OUT_OF_RANGE(n||"offset","an integer",e);if(t<0)throw new F.ERR_BUFFER_OUT_OF_BOUNDS;throw new F.ERR_OUT_OF_RANGE(n||"offset",">= ".concat(n?1:0," and <= ").concat(t),e)}U("ERR_BUFFER_OUT_OF_BOUNDS",function(e){return e?"".concat(e," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"},RangeError),U("ERR_INVALID_ARG_TYPE",function(e,t){return'The "'.concat(e,'" argument must be of type number. Received type ').concat(typeof t)},TypeError),U("ERR_OUT_OF_RANGE",function(e,t,n){let s='The value of "'.concat(e,'" is out of range.'),r=n;return Number.isInteger(n)&&Math.abs(n)>2**32?r=B(String(n)):"bigint"===typeof n&&(r=String(n),(n>BigInt(2)**BigInt(32)||n<-(BigInt(2)**BigInt(32)))&&(r=B(r)),r+="n"),s+=" It must be ".concat(t,". Received ").concat(r),s},RangeError);const W=/[^+/0-9A-Za-z-_]/g;function G(e,t){let n;t=t||1/0;const s=e.length;let r=null;const a=[];for(let i=0;i<s;++i){if(n=e.charCodeAt(i),n>55295&&n<57344){if(!r){if(n>56319){(t-=3)>-1&&a.push(239,191,189);continue}if(i+1===s){(t-=3)>-1&&a.push(239,191,189);continue}r=n;continue}if(n<56320){(t-=3)>-1&&a.push(239,191,189),r=n;continue}n=65536+(r-55296<<10|n-56320)}else r&&(t-=3)>-1&&a.push(239,191,189);if(r=null,n<128){if((t-=1)<0)break;a.push(n)}else if(n<2048){if((t-=2)<0)break;a.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;a.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return a}function K(e){return s.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(W,"")).length<2)return"";for(;e.length%4!==0;)e+="=";return e}(e))}function J(e,t,n,s){let r;for(r=0;r<s&&!(r+n>=t.length||r>=e.length);++r)t[r+n]=e[r];return r}function Z(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function $(e){return e!==e}const Q=function(){const e="0123456789abcdef",t=new Array(256);for(let n=0;n<16;++n){const s=16*n;for(let r=0;r<16;++r)t[s+r]=e[n]+e[r]}return t}();function Y(e){return"undefined"===typeof BigInt?X:e}function X(){throw new Error("BigInt not supported")}},391:(e,t,n)=>{"use strict";var s=n(950);t.createRoot=s.createRoot,t.hydrateRoot=s.hydrateRoot},445:(e,t)=>{"use strict";t.byteLength=function(e){var t=o(e),n=t[0],s=t[1];return 3*(n+s)/4-s},t.toByteArray=function(e){var t,n,a=o(e),i=a[0],l=a[1],c=new r(function(e,t,n){return 3*(t+n)/4-n}(0,i,l)),d=0,u=l>0?i-4:i;for(n=0;n<u;n+=4)t=s[e.charCodeAt(n)]<<18|s[e.charCodeAt(n+1)]<<12|s[e.charCodeAt(n+2)]<<6|s[e.charCodeAt(n+3)],c[d++]=t>>16&255,c[d++]=t>>8&255,c[d++]=255&t;2===l&&(t=s[e.charCodeAt(n)]<<2|s[e.charCodeAt(n+1)]>>4,c[d++]=255&t);1===l&&(t=s[e.charCodeAt(n)]<<10|s[e.charCodeAt(n+1)]<<4|s[e.charCodeAt(n+2)]>>2,c[d++]=t>>8&255,c[d++]=255&t);return c},t.fromByteArray=function(e){for(var t,s=e.length,r=s%3,a=[],i=16383,o=0,l=s-r;o<l;o+=i)a.push(c(e,o,o+i>l?l:o+i));1===r?(t=e[s-1],a.push(n[t>>2]+n[t<<4&63]+"==")):2===r&&(t=(e[s-2]<<8)+e[s-1],a.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"="));return a.join("")};for(var n=[],s=[],r="undefined"!==typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0;i<64;++i)n[i]=a[i],s[a.charCodeAt(i)]=i;function o(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function l(e){return n[e>>18&63]+n[e>>12&63]+n[e>>6&63]+n[63&e]}function c(e,t,n){for(var s,r=[],a=t;a<n;a+=3)s=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),r.push(l(s));return r.join("")}s["-".charCodeAt(0)]=62,s["_".charCodeAt(0)]=63},579:(e,t,n)=>{"use strict";e.exports=n(153)},611:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}}t.default=n},630:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Headers:()=>i,Request:()=>o,Response:()=>l,default:()=>a,fetch:()=>r});var s=function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("unable to locate global object")}();const r=s.fetch,a=s.fetch.bind(s),i=s.Headers,o=s.Request,l=s.Response},730:(e,t,n)=>{"use strict";var s=n(43),r=n(853);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(o[e]=t,e=0;e<t.length;e++)i.add(t[e])}var d=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),u=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},p={};function f(e,t,n,s,r,a,i){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=s,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=i}var x={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){x[e]=new f(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];x[t]=new f(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){x[e]=new f(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){x[e]=new f(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){x[e]=new f(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){x[e]=new f(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){x[e]=new f(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){x[e]=new f(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){x[e]=new f(e,5,!1,e.toLowerCase(),null,!1,!1)});var g=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function y(e,t,n,s){var r=x.hasOwnProperty(t)?x[t]:null;(null!==r?0!==r.type:s||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,s){if(null===t||"undefined"===typeof t||function(e,t,n,s){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!s&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,s))return!0;if(s)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,r,s)&&(n=null),s||null===r?function(e){return!!u.call(p,e)||!u.call(m,e)&&(h.test(e)?p[e]=!0:(m[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):r.mustUseProperty?e[r.propertyName]=null===n?3!==r.type&&"":n:(t=r.attributeName,s=r.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(r=r.type)||4===r&&!0===n?"":""+n,s?e.setAttributeNS(s,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(g,v);x[t]=new f(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(g,v);x[t]=new f(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(g,v);x[t]=new f(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){x[e]=new f(e,1,!1,e.toLowerCase(),null,!1,!1)}),x.xlinkHref=new f("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){x[e]=new f(e,1,!1,e.toLowerCase(),null,!0,!0)});var b=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,j=Symbol.for("react.element"),w=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),_=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),T=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),I=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var R=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var z,D=Object.assign;function M(e){if(void 0===z)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);z=t&&t[1]||""}return"\n"+z+e}var F=!1;function U(e,t){if(!e||F)return"";F=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var s=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){s=c}e.call(t.prototype)}else{try{throw Error()}catch(c){s=c}e()}}catch(c){if(c&&s&&"string"===typeof c.stack){for(var r=c.stack.split("\n"),a=s.stack.split("\n"),i=r.length-1,o=a.length-1;1<=i&&0<=o&&r[i]!==a[o];)o--;for(;1<=i&&0<=o;i--,o--)if(r[i]!==a[o]){if(1!==i||1!==o)do{if(i--,0>--o||r[i]!==a[o]){var l="\n"+r[i].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=i&&0<=o);break}}}finally{F=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?M(e):""}function B(e){switch(e.tag){case 5:return M(e.type);case 16:return M("Lazy");case 13:return M("Suspense");case 19:return M("SuspenseList");case 0:case 2:case 15:return e=U(e.type,!1);case 11:return e=U(e.type.render,!1);case 1:return e=U(e.type,!0);default:return""}}function V(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case N:return"Fragment";case w:return"Portal";case S:return"Profiler";case k:return"StrictMode";case P:return"Suspense";case T:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case _:return(e.displayName||"Context")+".Consumer";case E:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case A:return null!==(t=e.displayName||null)?t:V(e.type)||"Memo";case I:t=e._payload,e=e._init;try{return V(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return V(t);case 8:return t===k?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function W(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function G(e){e._valueTracker||(e._valueTracker=function(e){var t=W(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var r=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(e){s=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return s},setValue:function(e){s=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function K(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),s="";return e&&(s=W(e)?e.checked?"true":"false":e.value),(e=s)!==n&&(t.setValue(e),!0)}function J(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Z(e,t){var n=t.checked;return D({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function $(e,t){var n=null==t.defaultValue?"":t.defaultValue,s=null!=t.checked?t.checked:t.defaultChecked;n=H(null!=t.value?t.value:n),e._wrapperState={initialChecked:s,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Q(e,t){null!=(t=t.checked)&&y(e,"checked",t,!1)}function Y(e,t){Q(e,t);var n=H(t.value),s=t.type;if(null!=n)"number"===s?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===s||"reset"===s)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function X(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!("submit"!==s&&"reset"!==s||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&J(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,s){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&s&&(e[n].defaultSelected=!0)}else{for(n=""+H(n),t=null,r=0;r<e.length;r++){if(e[r].value===n)return e[r].selected=!0,void(s&&(e[r].defaultSelected=!0));null!==t||e[r].disabled||(t=e[r])}null!==t&&(t.selected=!0)}}function se(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return D({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function re(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:H(n)}}function ae(e,t){var n=H(t.value),s=H(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=s&&(e.defaultValue=""+s)}function ie(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,de,ue=(de=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,s){MSApp.execUnsafeLocalFunction(function(){return de(e,t)})}:de);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var me={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function fe(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||me.hasOwnProperty(e)&&me[e]?(""+t).trim():t+"px"}function xe(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var s=0===n.indexOf("--"),r=fe(n,t[n],s);"float"===n&&(n="cssFloat"),s?e.setProperty(n,r):e[n]=r}}Object.keys(me).forEach(function(e){pe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),me[t]=me[e]})});var ge=D({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(ge[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ye(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function je(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var we=null,Ne=null,ke=null;function Se(e){if(e=yr(e)){if("function"!==typeof we)throw Error(a(280));var t=e.stateNode;t&&(t=jr(t),we(e.stateNode,e.type,t))}}function Ee(e){Ne?ke?ke.push(e):ke=[e]:Ne=e}function _e(){if(Ne){var e=Ne,t=ke;if(ke=Ne=null,Se(e),t)for(e=0;e<t.length;e++)Se(t[e])}}function Ce(e,t){return e(t)}function Pe(){}var Te=!1;function Ae(e,t,n){if(Te)return e(t,n);Te=!0;try{return Ce(e,t,n)}finally{Te=!1,(null!==Ne||null!==ke)&&(Pe(),_e())}}function Ie(e,t){var n=e.stateNode;if(null===n)return null;var s=jr(n);if(null===s)return null;n=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(s=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!s;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Re=!1;if(d)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){Re=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(de){Re=!1}function Le(e,t,n,s,r,a,i,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(d){this.onError(d)}}var ze=!1,De=null,Me=!1,Fe=null,Ue={onError:function(e){ze=!0,De=e}};function Be(e,t,n,s,r,a,i,o,l){ze=!1,De=null,Le.apply(Ue,arguments)}function Ve(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function He(e){if(Ve(e)!==e)throw Error(a(188))}function We(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ve(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,s=t;;){var r=n.return;if(null===r)break;var i=r.alternate;if(null===i){if(null!==(s=r.return)){n=s;continue}break}if(r.child===i.child){for(i=r.child;i;){if(i===n)return He(r),e;if(i===s)return He(r),t;i=i.sibling}throw Error(a(188))}if(n.return!==s.return)n=r,s=i;else{for(var o=!1,l=r.child;l;){if(l===n){o=!0,n=r,s=i;break}if(l===s){o=!0,s=r,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,s=r;break}if(l===s){o=!0,s=i,n=r;break}l=l.sibling}if(!o)throw Error(a(189))}}if(n.alternate!==s)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?Ge(e):null}function Ge(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ge(e);if(null!==t)return t;e=e.sibling}return null}var Ke=r.unstable_scheduleCallback,Je=r.unstable_cancelCallback,Ze=r.unstable_shouldYield,$e=r.unstable_requestPaint,Qe=r.unstable_now,Ye=r.unstable_getCurrentPriorityLevel,Xe=r.unstable_ImmediatePriority,et=r.unstable_UserBlockingPriority,tt=r.unstable_NormalPriority,nt=r.unstable_LowPriority,st=r.unstable_IdlePriority,rt=null,at=null;var it=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ot(e)/lt|0)|0},ot=Math.log,lt=Math.LN2;var ct=64,dt=4194304;function ut(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var s=0,r=e.suspendedLanes,a=e.pingedLanes,i=268435455&n;if(0!==i){var o=i&~r;0!==o?s=ut(o):0!==(a&=i)&&(s=ut(a))}else 0!==(i=n&~r)?s=ut(i):0!==a&&(s=ut(a));if(0===s)return 0;if(0!==t&&t!==s&&0===(t&r)&&((r=s&-s)>=(a=t&-t)||16===r&&0!==(4194240&a)))return t;if(0!==(4&s)&&(s|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=s;0<t;)r=1<<(n=31-it(t)),s|=e[n],t&=~r;return s}function mt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function ft(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function xt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function gt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-it(t)]=n}function vt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var s=31-it(n),r=1<<s;r&t|e[s]&t&&(e[s]|=t),n&=~r}}var yt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var jt,wt,Nt,kt,St,Et=!1,_t=[],Ct=null,Pt=null,Tt=null,At=new Map,It=new Map,Rt=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":Pt=null;break;case"mouseover":case"mouseout":Tt=null;break;case"pointerover":case"pointerout":At.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":It.delete(t.pointerId)}}function zt(e,t,n,s,r,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:s,nativeEvent:a,targetContainers:[r]},null!==t&&(null!==(t=yr(t))&&wt(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,null!==r&&-1===t.indexOf(r)&&t.push(r),e)}function Dt(e){var t=vr(e.target);if(null!==t){var n=Ve(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void St(e.priority,function(){Nt(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Mt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Zt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=yr(n))&&wt(t),e.blockedOn=n,!1;var s=new(n=e.nativeEvent).constructor(n.type,n);be=s,n.target.dispatchEvent(s),be=null,t.shift()}return!0}function Ft(e,t,n){Mt(e)&&n.delete(t)}function Ut(){Et=!1,null!==Ct&&Mt(Ct)&&(Ct=null),null!==Pt&&Mt(Pt)&&(Pt=null),null!==Tt&&Mt(Tt)&&(Tt=null),At.forEach(Ft),It.forEach(Ft)}function Bt(e,t){e.blockedOn===t&&(e.blockedOn=null,Et||(Et=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Ut)))}function Vt(e){function t(t){return Bt(t,e)}if(0<_t.length){Bt(_t[0],e);for(var n=1;n<_t.length;n++){var s=_t[n];s.blockedOn===e&&(s.blockedOn=null)}}for(null!==Ct&&Bt(Ct,e),null!==Pt&&Bt(Pt,e),null!==Tt&&Bt(Tt,e),At.forEach(t),It.forEach(t),n=0;n<Rt.length;n++)(s=Rt[n]).blockedOn===e&&(s.blockedOn=null);for(;0<Rt.length&&null===(n=Rt[0]).blockedOn;)Dt(n),null===n.blockedOn&&Rt.shift()}var qt=b.ReactCurrentBatchConfig,Ht=!0;function Wt(e,t,n,s){var r=yt,a=qt.transition;qt.transition=null;try{yt=1,Kt(e,t,n,s)}finally{yt=r,qt.transition=a}}function Gt(e,t,n,s){var r=yt,a=qt.transition;qt.transition=null;try{yt=4,Kt(e,t,n,s)}finally{yt=r,qt.transition=a}}function Kt(e,t,n,s){if(Ht){var r=Zt(e,t,n,s);if(null===r)Hs(e,t,s,Jt,n),Lt(e,s);else if(function(e,t,n,s,r){switch(t){case"focusin":return Ct=zt(Ct,e,t,n,s,r),!0;case"dragenter":return Pt=zt(Pt,e,t,n,s,r),!0;case"mouseover":return Tt=zt(Tt,e,t,n,s,r),!0;case"pointerover":var a=r.pointerId;return At.set(a,zt(At.get(a)||null,e,t,n,s,r)),!0;case"gotpointercapture":return a=r.pointerId,It.set(a,zt(It.get(a)||null,e,t,n,s,r)),!0}return!1}(r,e,t,n,s))s.stopPropagation();else if(Lt(e,s),4&t&&-1<Ot.indexOf(e)){for(;null!==r;){var a=yr(r);if(null!==a&&jt(a),null===(a=Zt(e,t,n,s))&&Hs(e,t,s,Jt,n),a===r)break;r=a}null!==r&&s.stopPropagation()}else Hs(e,t,s,null,n)}}var Jt=null;function Zt(e,t,n,s){if(Jt=null,null!==(e=vr(e=je(s))))if(null===(t=Ve(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Jt=e,null}function $t(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ye()){case Xe:return 1;case et:return 4;case tt:case nt:return 16;case st:return 536870912;default:return 16}default:return 16}}var Qt=null,Yt=null,Xt=null;function en(){if(Xt)return Xt;var e,t,n=Yt,s=n.length,r="value"in Qt?Qt.value:Qt.textContent,a=r.length;for(e=0;e<s&&n[e]===r[e];e++);var i=s-e;for(t=1;t<=i&&n[s-t]===r[a-t];t++);return Xt=r.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function sn(){return!1}function rn(e){function t(t,n,s,r,a){for(var i in this._reactName=t,this._targetInst=s,this.type=n,this.nativeEvent=r,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(i)&&(t=e[i],this[i]=t?t(r):r[i]);return this.isDefaultPrevented=(null!=r.defaultPrevented?r.defaultPrevented:!1===r.returnValue)?nn:sn,this.isPropagationStopped=sn,this}return D(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var an,on,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dn=rn(cn),un=D({},cn,{view:0,detail:0}),hn=rn(un),mn=D({},un,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(an=e.screenX-ln.screenX,on=e.screenY-ln.screenY):on=an=0,ln=e),an)},movementY:function(e){return"movementY"in e?e.movementY:on}}),pn=rn(mn),fn=rn(D({},mn,{dataTransfer:0})),xn=rn(D({},un,{relatedTarget:0})),gn=rn(D({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),vn=D({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),yn=rn(vn),bn=rn(D({},cn,{data:0})),jn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Nn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Nn[e])&&!!t[e]}function Sn(){return kn}var En=D({},un,{key:function(e){if(e.key){var t=jn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?wn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),_n=rn(En),Cn=rn(D({},mn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Pn=rn(D({},un,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sn})),Tn=rn(D({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),An=D({},mn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),In=rn(An),Rn=[9,13,27,32],On=d&&"CompositionEvent"in window,Ln=null;d&&"documentMode"in document&&(Ln=document.documentMode);var zn=d&&"TextEvent"in window&&!Ln,Dn=d&&(!On||Ln&&8<Ln&&11>=Ln),Mn=String.fromCharCode(32),Fn=!1;function Un(e,t){switch(e){case"keyup":return-1!==Rn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Vn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Wn(e,t,n,s){Ee(s),0<(t=Gs(t,"onChange")).length&&(n=new dn("onChange","change",null,n,s),e.push({event:n,listeners:t}))}var Gn=null,Kn=null;function Jn(e){Ms(e,0)}function Zn(e){if(K(br(e)))return e}function $n(e,t){if("change"===e)return t}var Qn=!1;if(d){var Yn;if(d){var Xn="oninput"in document;if(!Xn){var es=document.createElement("div");es.setAttribute("oninput","return;"),Xn="function"===typeof es.oninput}Yn=Xn}else Yn=!1;Qn=Yn&&(!document.documentMode||9<document.documentMode)}function ts(){Gn&&(Gn.detachEvent("onpropertychange",ns),Kn=Gn=null)}function ns(e){if("value"===e.propertyName&&Zn(Kn)){var t=[];Wn(t,Kn,e,je(e)),Ae(Jn,t)}}function ss(e,t,n){"focusin"===e?(ts(),Kn=n,(Gn=t).attachEvent("onpropertychange",ns)):"focusout"===e&&ts()}function rs(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Zn(Kn)}function as(e,t){if("click"===e)return Zn(t)}function is(e,t){if("input"===e||"change"===e)return Zn(t)}var os="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function ls(e,t){if(os(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),s=Object.keys(t);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var r=n[s];if(!u.call(t,r)||!os(e[r],t[r]))return!1}return!0}function cs(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ds(e,t){var n,s=cs(e);for(e=0;s;){if(3===s.nodeType){if(n=e+s.textContent.length,e<=t&&n>=t)return{node:s,offset:t-e};e=n}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=cs(s)}}function us(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?us(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hs(){for(var e=window,t=J();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(s){n=!1}if(!n)break;t=J((e=t.contentWindow).document)}return t}function ms(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function ps(e){var t=hs(),n=e.focusedElem,s=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&us(n.ownerDocument.documentElement,n)){if(null!==s&&ms(n))if(t=s.start,void 0===(e=s.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var r=n.textContent.length,a=Math.min(s.start,r);s=void 0===s.end?a:Math.min(s.end,r),!e.extend&&a>s&&(r=s,s=a,a=r),r=ds(n,a);var i=ds(n,s);r&&i&&(1!==e.rangeCount||e.anchorNode!==r.node||e.anchorOffset!==r.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&((t=t.createRange()).setStart(r.node,r.offset),e.removeAllRanges(),a>s?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var fs=d&&"documentMode"in document&&11>=document.documentMode,xs=null,gs=null,vs=null,ys=!1;function bs(e,t,n){var s=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;ys||null==xs||xs!==J(s)||("selectionStart"in(s=xs)&&ms(s)?s={start:s.selectionStart,end:s.selectionEnd}:s={anchorNode:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset},vs&&ls(vs,s)||(vs=s,0<(s=Gs(gs,"onSelect")).length&&(t=new dn("onSelect","select",null,t,n),e.push({event:t,listeners:s}),t.target=xs)))}function js(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var ws={animationend:js("Animation","AnimationEnd"),animationiteration:js("Animation","AnimationIteration"),animationstart:js("Animation","AnimationStart"),transitionend:js("Transition","TransitionEnd")},Ns={},ks={};function Ss(e){if(Ns[e])return Ns[e];if(!ws[e])return e;var t,n=ws[e];for(t in n)if(n.hasOwnProperty(t)&&t in ks)return Ns[e]=n[t];return e}d&&(ks=document.createElement("div").style,"AnimationEvent"in window||(delete ws.animationend.animation,delete ws.animationiteration.animation,delete ws.animationstart.animation),"TransitionEvent"in window||delete ws.transitionend.transition);var Es=Ss("animationend"),_s=Ss("animationiteration"),Cs=Ss("animationstart"),Ps=Ss("transitionend"),Ts=new Map,As="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Is(e,t){Ts.set(e,t),l(t,[e])}for(var Rs=0;Rs<As.length;Rs++){var Os=As[Rs];Is(Os.toLowerCase(),"on"+(Os[0].toUpperCase()+Os.slice(1)))}Is(Es,"onAnimationEnd"),Is(_s,"onAnimationIteration"),Is(Cs,"onAnimationStart"),Is("dblclick","onDoubleClick"),Is("focusin","onFocus"),Is("focusout","onBlur"),Is(Ps,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ls="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),zs=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ls));function Ds(e,t,n){var s=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,s,r,i,o,l,c){if(Be.apply(this,arguments),ze){if(!ze)throw Error(a(198));var d=De;ze=!1,De=null,Me||(Me=!0,Fe=d)}}(s,t,void 0,e),e.currentTarget=null}function Ms(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var s=e[n],r=s.event;s=s.listeners;e:{var a=void 0;if(t)for(var i=s.length-1;0<=i;i--){var o=s[i],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==a&&r.isPropagationStopped())break e;Ds(r,o,c),a=l}else for(i=0;i<s.length;i++){if(l=(o=s[i]).instance,c=o.currentTarget,o=o.listener,l!==a&&r.isPropagationStopped())break e;Ds(r,o,c),a=l}}}if(Me)throw e=Fe,Me=!1,Fe=null,e}function Fs(e,t){var n=t[fr];void 0===n&&(n=t[fr]=new Set);var s=e+"__bubble";n.has(s)||(qs(t,e,2,!1),n.add(s))}function Us(e,t,n){var s=0;t&&(s|=4),qs(n,e,s,t)}var Bs="_reactListening"+Math.random().toString(36).slice(2);function Vs(e){if(!e[Bs]){e[Bs]=!0,i.forEach(function(t){"selectionchange"!==t&&(zs.has(t)||Us(t,!1,e),Us(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Bs]||(t[Bs]=!0,Us("selectionchange",!1,t))}}function qs(e,t,n,s){switch($t(t)){case 1:var r=Wt;break;case 4:r=Gt;break;default:r=Kt}n=r.bind(null,t,n,e),r=void 0,!Re||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(r=!0),s?void 0!==r?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):void 0!==r?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function Hs(e,t,n,s,r){var a=s;if(0===(1&t)&&0===(2&t)&&null!==s)e:for(;;){if(null===s)return;var i=s.tag;if(3===i||4===i){var o=s.stateNode.containerInfo;if(o===r||8===o.nodeType&&o.parentNode===r)break;if(4===i)for(i=s.return;null!==i;){var l=i.tag;if((3===l||4===l)&&((l=i.stateNode.containerInfo)===r||8===l.nodeType&&l.parentNode===r))return;i=i.return}for(;null!==o;){if(null===(i=vr(o)))return;if(5===(l=i.tag)||6===l){s=a=i;continue e}o=o.parentNode}}s=s.return}Ae(function(){var s=a,r=je(n),i=[];e:{var o=Ts.get(e);if(void 0!==o){var l=dn,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=_n;break;case"focusin":c="focus",l=xn;break;case"focusout":c="blur",l=xn;break;case"beforeblur":case"afterblur":l=xn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=fn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Pn;break;case Es:case _s:case Cs:l=gn;break;case Ps:l=Tn;break;case"scroll":l=hn;break;case"wheel":l=In;break;case"copy":case"cut":case"paste":l=yn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Cn}var d=0!==(4&t),u=!d&&"scroll"===e,h=d?null!==o?o+"Capture":null:o;d=[];for(var m,p=s;null!==p;){var f=(m=p).stateNode;if(5===m.tag&&null!==f&&(m=f,null!==h&&(null!=(f=Ie(p,h))&&d.push(Ws(p,f,m)))),u)break;p=p.return}0<d.length&&(o=new l(o,c,null,n,r),i.push({event:o,listeners:d}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!vr(c)&&!c[pr])&&(l||o)&&(o=r.window===r?r:(o=r.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=s,null!==(c=(c=n.relatedTarget||n.toElement)?vr(c):null)&&(c!==(u=Ve(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=s),l!==c)){if(d=pn,f="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(d=Cn,f="onPointerLeave",h="onPointerEnter",p="pointer"),u=null==l?o:br(l),m=null==c?o:br(c),(o=new d(f,p+"leave",l,n,r)).target=u,o.relatedTarget=m,f=null,vr(r)===s&&((d=new d(h,p+"enter",c,n,r)).target=m,d.relatedTarget=u,f=d),u=f,l&&c)e:{for(h=c,p=0,m=d=l;m;m=Ks(m))p++;for(m=0,f=h;f;f=Ks(f))m++;for(;0<p-m;)d=Ks(d),p--;for(;0<m-p;)h=Ks(h),m--;for(;p--;){if(d===h||null!==h&&d===h.alternate)break e;d=Ks(d),h=Ks(h)}d=null}else d=null;null!==l&&Js(i,o,l,d,!1),null!==c&&null!==u&&Js(i,u,c,d,!0)}if("select"===(l=(o=s?br(s):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var x=$n;else if(Hn(o))if(Qn)x=is;else{x=rs;var g=ss}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(x=as);switch(x&&(x=x(e,s))?Wn(i,x,n,r):(g&&g(e,o,s),"focusout"===e&&(g=o._wrapperState)&&g.controlled&&"number"===o.type&&ee(o,"number",o.value)),g=s?br(s):window,e){case"focusin":(Hn(g)||"true"===g.contentEditable)&&(xs=g,gs=s,vs=null);break;case"focusout":vs=gs=xs=null;break;case"mousedown":ys=!0;break;case"contextmenu":case"mouseup":case"dragend":ys=!1,bs(i,n,r);break;case"selectionchange":if(fs)break;case"keydown":case"keyup":bs(i,n,r)}var v;if(On)e:{switch(e){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else Vn?Un(e,n)&&(y="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(y="onCompositionStart");y&&(Dn&&"ko"!==n.locale&&(Vn||"onCompositionStart"!==y?"onCompositionEnd"===y&&Vn&&(v=en()):(Yt="value"in(Qt=r)?Qt.value:Qt.textContent,Vn=!0)),0<(g=Gs(s,y)).length&&(y=new bn(y,e,null,n,r),i.push({event:y,listeners:g}),v?y.data=v:null!==(v=Bn(n))&&(y.data=v))),(v=zn?function(e,t){switch(e){case"compositionend":return Bn(t);case"keypress":return 32!==t.which?null:(Fn=!0,Mn);case"textInput":return(e=t.data)===Mn&&Fn?null:e;default:return null}}(e,n):function(e,t){if(Vn)return"compositionend"===e||!On&&Un(e,t)?(e=en(),Xt=Yt=Qt=null,Vn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Dn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(s=Gs(s,"onBeforeInput")).length&&(r=new bn("onBeforeInput","beforeinput",null,n,r),i.push({event:r,listeners:s}),r.data=v))}Ms(i,t)})}function Ws(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Gs(e,t){for(var n=t+"Capture",s=[];null!==e;){var r=e,a=r.stateNode;5===r.tag&&null!==a&&(r=a,null!=(a=Ie(e,n))&&s.unshift(Ws(e,a,r)),null!=(a=Ie(e,t))&&s.push(Ws(e,a,r))),e=e.return}return s}function Ks(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Js(e,t,n,s,r){for(var a=t._reactName,i=[];null!==n&&n!==s;){var o=n,l=o.alternate,c=o.stateNode;if(null!==l&&l===s)break;5===o.tag&&null!==c&&(o=c,r?null!=(l=Ie(n,a))&&i.unshift(Ws(n,l,o)):r||null!=(l=Ie(n,a))&&i.push(Ws(n,l,o))),n=n.return}0!==i.length&&e.push({event:t,listeners:i})}var Zs=/\r\n?/g,$s=/\u0000|\uFFFD/g;function Qs(e){return("string"===typeof e?e:""+e).replace(Zs,"\n").replace($s,"")}function Ys(e,t,n){if(t=Qs(t),Qs(e)!==t&&n)throw Error(a(425))}function Xs(){}var er=null,tr=null;function nr(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var sr="function"===typeof setTimeout?setTimeout:void 0,rr="function"===typeof clearTimeout?clearTimeout:void 0,ar="function"===typeof Promise?Promise:void 0,ir="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ar?function(e){return ar.resolve(null).then(e).catch(or)}:sr;function or(e){setTimeout(function(){throw e})}function lr(e,t){var n=t,s=0;do{var r=n.nextSibling;if(e.removeChild(n),r&&8===r.nodeType)if("/$"===(n=r.data)){if(0===s)return e.removeChild(r),void Vt(t);s--}else"$"!==n&&"$?"!==n&&"$!"!==n||s++;n=r}while(n);Vt(t)}function cr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function dr(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var ur=Math.random().toString(36).slice(2),hr="__reactFiber$"+ur,mr="__reactProps$"+ur,pr="__reactContainer$"+ur,fr="__reactEvents$"+ur,xr="__reactListeners$"+ur,gr="__reactHandles$"+ur;function vr(e){var t=e[hr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pr]||n[hr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=dr(e);null!==e;){if(n=e[hr])return n;e=dr(e)}return t}n=(e=n).parentNode}return null}function yr(e){return!(e=e[hr]||e[pr])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function br(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function jr(e){return e[mr]||null}var wr=[],Nr=-1;function kr(e){return{current:e}}function Sr(e){0>Nr||(e.current=wr[Nr],wr[Nr]=null,Nr--)}function Er(e,t){Nr++,wr[Nr]=e.current,e.current=t}var _r={},Cr=kr(_r),Pr=kr(!1),Tr=_r;function Ar(e,t){var n=e.type.contextTypes;if(!n)return _r;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var r,a={};for(r in n)a[r]=t[r];return s&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Ir(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Rr(){Sr(Pr),Sr(Cr)}function Or(e,t,n){if(Cr.current!==_r)throw Error(a(168));Er(Cr,t),Er(Pr,n)}function Lr(e,t,n){var s=e.stateNode;if(t=t.childContextTypes,"function"!==typeof s.getChildContext)return n;for(var r in s=s.getChildContext())if(!(r in t))throw Error(a(108,q(e)||"Unknown",r));return D({},n,s)}function zr(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||_r,Tr=Cr.current,Er(Cr,e),Er(Pr,Pr.current),!0}function Dr(e,t,n){var s=e.stateNode;if(!s)throw Error(a(169));n?(e=Lr(e,t,Tr),s.__reactInternalMemoizedMergedChildContext=e,Sr(Pr),Sr(Cr),Er(Cr,e)):Sr(Pr),Er(Pr,n)}var Mr=null,Fr=!1,Ur=!1;function Br(e){null===Mr?Mr=[e]:Mr.push(e)}function Vr(){if(!Ur&&null!==Mr){Ur=!0;var e=0,t=yt;try{var n=Mr;for(yt=1;e<n.length;e++){var s=n[e];do{s=s(!0)}while(null!==s)}Mr=null,Fr=!1}catch(r){throw null!==Mr&&(Mr=Mr.slice(e+1)),Ke(Xe,Vr),r}finally{yt=t,Ur=!1}}return null}var qr=[],Hr=0,Wr=null,Gr=0,Kr=[],Jr=0,Zr=null,$r=1,Qr="";function Yr(e,t){qr[Hr++]=Gr,qr[Hr++]=Wr,Wr=e,Gr=t}function Xr(e,t,n){Kr[Jr++]=$r,Kr[Jr++]=Qr,Kr[Jr++]=Zr,Zr=e;var s=$r;e=Qr;var r=32-it(s)-1;s&=~(1<<r),n+=1;var a=32-it(t)+r;if(30<a){var i=r-r%5;a=(s&(1<<i)-1).toString(32),s>>=i,r-=i,$r=1<<32-it(t)+r|n<<r|s,Qr=a+e}else $r=1<<a|n<<r|s,Qr=e}function ea(e){null!==e.return&&(Yr(e,1),Xr(e,1,0))}function ta(e){for(;e===Wr;)Wr=qr[--Hr],qr[Hr]=null,Gr=qr[--Hr],qr[Hr]=null;for(;e===Zr;)Zr=Kr[--Jr],Kr[Jr]=null,Qr=Kr[--Jr],Kr[Jr]=null,$r=Kr[--Jr],Kr[Jr]=null}var na=null,sa=null,ra=!1,aa=null;function ia(e,t){var n=Ac(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function oa(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,sa=cr(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,sa=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Zr?{id:$r,overflow:Qr}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Ac(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,sa=null,!0);default:return!1}}function la(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ca(e){if(ra){var t=sa;if(t){var n=t;if(!oa(e,t)){if(la(e))throw Error(a(418));t=cr(n.nextSibling);var s=na;t&&oa(e,t)?ia(s,n):(e.flags=-4097&e.flags|2,ra=!1,na=e)}}else{if(la(e))throw Error(a(418));e.flags=-4097&e.flags|2,ra=!1,na=e}}}function da(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function ua(e){if(e!==na)return!1;if(!ra)return da(e),ra=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!nr(e.type,e.memoizedProps)),t&&(t=sa)){if(la(e))throw ha(),Error(a(418));for(;t;)ia(e,t),t=cr(t.nextSibling)}if(da(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){sa=cr(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}sa=null}}else sa=na?cr(e.stateNode.nextSibling):null;return!0}function ha(){for(var e=sa;e;)e=cr(e.nextSibling)}function ma(){sa=na=null,ra=!1}function pa(e){null===aa?aa=[e]:aa.push(e)}var fa=b.ReactCurrentBatchConfig;function xa(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var s=n.stateNode}if(!s)throw Error(a(147,e));var r=s,i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=r.refs;null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function ga(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function va(e){return(0,e._init)(e._payload)}function ya(e){function t(t,n){if(e){var s=t.deletions;null===s?(t.deletions=[n],t.flags|=16):s.push(n)}}function n(n,s){if(!e)return null;for(;null!==s;)t(n,s),s=s.sibling;return null}function s(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function r(e,t){return(e=Rc(e,t)).index=0,e.sibling=null,e}function i(t,n,s){return t.index=s,e?null!==(s=t.alternate)?(s=s.index)<n?(t.flags|=2,n):s:(t.flags|=2,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,s){return null===t||6!==t.tag?((t=Dc(n,e.mode,s)).return=e,t):((t=r(t,n)).return=e,t)}function c(e,t,n,s){var a=n.type;return a===N?u(e,t,n.props.children,s,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===I&&va(a)===t.type)?((s=r(t,n.props)).ref=xa(e,t,n),s.return=e,s):((s=Oc(n.type,n.key,n.props,null,e.mode,s)).ref=xa(e,t,n),s.return=e,s)}function d(e,t,n,s){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Mc(n,e.mode,s)).return=e,t):((t=r(t,n.children||[])).return=e,t)}function u(e,t,n,s,a){return null===t||7!==t.tag?((t=Lc(n,e.mode,s,a)).return=e,t):((t=r(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Dc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case j:return(n=Oc(t.type,t.key,t.props,null,e.mode,n)).ref=xa(e,null,t),n.return=e,n;case w:return(t=Mc(t,e.mode,n)).return=e,t;case I:return h(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Lc(t,e.mode,n,null)).return=e,t;ga(e,t)}return null}function m(e,t,n,s){var r=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==r?null:l(e,t,""+n,s);if("object"===typeof n&&null!==n){switch(n.$$typeof){case j:return n.key===r?c(e,t,n,s):null;case w:return n.key===r?d(e,t,n,s):null;case I:return m(e,t,(r=n._init)(n._payload),s)}if(te(n)||L(n))return null!==r?null:u(e,t,n,s,null);ga(e,n)}return null}function p(e,t,n,s,r){if("string"===typeof s&&""!==s||"number"===typeof s)return l(t,e=e.get(n)||null,""+s,r);if("object"===typeof s&&null!==s){switch(s.$$typeof){case j:return c(t,e=e.get(null===s.key?n:s.key)||null,s,r);case w:return d(t,e=e.get(null===s.key?n:s.key)||null,s,r);case I:return p(e,t,n,(0,s._init)(s._payload),r)}if(te(s)||L(s))return u(t,e=e.get(n)||null,s,r,null);ga(t,s)}return null}function f(r,a,o,l){for(var c=null,d=null,u=a,f=a=0,x=null;null!==u&&f<o.length;f++){u.index>f?(x=u,u=null):x=u.sibling;var g=m(r,u,o[f],l);if(null===g){null===u&&(u=x);break}e&&u&&null===g.alternate&&t(r,u),a=i(g,a,f),null===d?c=g:d.sibling=g,d=g,u=x}if(f===o.length)return n(r,u),ra&&Yr(r,f),c;if(null===u){for(;f<o.length;f++)null!==(u=h(r,o[f],l))&&(a=i(u,a,f),null===d?c=u:d.sibling=u,d=u);return ra&&Yr(r,f),c}for(u=s(r,u);f<o.length;f++)null!==(x=p(u,r,f,o[f],l))&&(e&&null!==x.alternate&&u.delete(null===x.key?f:x.key),a=i(x,a,f),null===d?c=x:d.sibling=x,d=x);return e&&u.forEach(function(e){return t(r,e)}),ra&&Yr(r,f),c}function x(r,o,l,c){var d=L(l);if("function"!==typeof d)throw Error(a(150));if(null==(l=d.call(l)))throw Error(a(151));for(var u=d=null,f=o,x=o=0,g=null,v=l.next();null!==f&&!v.done;x++,v=l.next()){f.index>x?(g=f,f=null):g=f.sibling;var y=m(r,f,v.value,c);if(null===y){null===f&&(f=g);break}e&&f&&null===y.alternate&&t(r,f),o=i(y,o,x),null===u?d=y:u.sibling=y,u=y,f=g}if(v.done)return n(r,f),ra&&Yr(r,x),d;if(null===f){for(;!v.done;x++,v=l.next())null!==(v=h(r,v.value,c))&&(o=i(v,o,x),null===u?d=v:u.sibling=v,u=v);return ra&&Yr(r,x),d}for(f=s(r,f);!v.done;x++,v=l.next())null!==(v=p(f,r,x,v.value,c))&&(e&&null!==v.alternate&&f.delete(null===v.key?x:v.key),o=i(v,o,x),null===u?d=v:u.sibling=v,u=v);return e&&f.forEach(function(e){return t(r,e)}),ra&&Yr(r,x),d}return function e(s,a,i,l){if("object"===typeof i&&null!==i&&i.type===N&&null===i.key&&(i=i.props.children),"object"===typeof i&&null!==i){switch(i.$$typeof){case j:e:{for(var c=i.key,d=a;null!==d;){if(d.key===c){if((c=i.type)===N){if(7===d.tag){n(s,d.sibling),(a=r(d,i.props.children)).return=s,s=a;break e}}else if(d.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===I&&va(c)===d.type){n(s,d.sibling),(a=r(d,i.props)).ref=xa(s,d,i),a.return=s,s=a;break e}n(s,d);break}t(s,d),d=d.sibling}i.type===N?((a=Lc(i.props.children,s.mode,l,i.key)).return=s,s=a):((l=Oc(i.type,i.key,i.props,null,s.mode,l)).ref=xa(s,a,i),l.return=s,s=l)}return o(s);case w:e:{for(d=i.key;null!==a;){if(a.key===d){if(4===a.tag&&a.stateNode.containerInfo===i.containerInfo&&a.stateNode.implementation===i.implementation){n(s,a.sibling),(a=r(a,i.children||[])).return=s,s=a;break e}n(s,a);break}t(s,a),a=a.sibling}(a=Mc(i,s.mode,l)).return=s,s=a}return o(s);case I:return e(s,a,(d=i._init)(i._payload),l)}if(te(i))return f(s,a,i,l);if(L(i))return x(s,a,i,l);ga(s,i)}return"string"===typeof i&&""!==i||"number"===typeof i?(i=""+i,null!==a&&6===a.tag?(n(s,a.sibling),(a=r(a,i)).return=s,s=a):(n(s,a),(a=Dc(i,s.mode,l)).return=s,s=a),o(s)):n(s,a)}}var ba=ya(!0),ja=ya(!1),wa=kr(null),Na=null,ka=null,Sa=null;function Ea(){Sa=ka=Na=null}function _a(e){var t=wa.current;Sr(wa),e._currentValue=t}function Ca(e,t,n){for(;null!==e;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==s&&(s.childLanes|=t)):null!==s&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===n)break;e=e.return}}function Pa(e,t){Na=e,Sa=ka=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(yo=!0),e.firstContext=null)}function Ta(e){var t=e._currentValue;if(Sa!==e)if(e={context:e,memoizedValue:t,next:null},null===ka){if(null===Na)throw Error(a(308));ka=e,Na.dependencies={lanes:0,firstContext:e}}else ka=ka.next=e;return t}var Aa=null;function Ia(e){null===Aa?Aa=[e]:Aa.push(e)}function Ra(e,t,n,s){var r=t.interleaved;return null===r?(n.next=n,Ia(t)):(n.next=r.next,r.next=n),t.interleaved=n,Oa(e,s)}function Oa(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var La=!1;function za(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Da(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ma(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Fa(e,t,n){var s=e.updateQueue;if(null===s)return null;if(s=s.shared,0!==(2&Cl)){var r=s.pending;return null===r?t.next=t:(t.next=r.next,r.next=t),s.pending=t,Oa(e,n)}return null===(r=s.interleaved)?(t.next=t,Ia(s)):(t.next=r.next,r.next=t),s.interleaved=t,Oa(e,n)}function Ua(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var s=t.lanes;n|=s&=e.pendingLanes,t.lanes=n,vt(e,n)}}function Ba(e,t){var n=e.updateQueue,s=e.alternate;if(null!==s&&n===(s=s.updateQueue)){var r=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?r=a=i:a=a.next=i,n=n.next}while(null!==n);null===a?r=a=t:a=a.next=t}else r=a=t;return n={baseState:s.baseState,firstBaseUpdate:r,lastBaseUpdate:a,shared:s.shared,effects:s.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Va(e,t,n,s){var r=e.updateQueue;La=!1;var a=r.firstBaseUpdate,i=r.lastBaseUpdate,o=r.shared.pending;if(null!==o){r.shared.pending=null;var l=o,c=l.next;l.next=null,null===i?a=c:i.next=c,i=l;var d=e.alternate;null!==d&&((o=(d=d.updateQueue).lastBaseUpdate)!==i&&(null===o?d.firstBaseUpdate=c:o.next=c,d.lastBaseUpdate=l))}if(null!==a){var u=r.baseState;for(i=0,d=c=l=null,o=a;;){var h=o.lane,m=o.eventTime;if((s&h)===h){null!==d&&(d=d.next={eventTime:m,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,f=o;switch(h=t,m=n,f.tag){case 1:if("function"===typeof(p=f.payload)){u=p.call(m,u,h);break e}u=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=f.payload)?p.call(m,u,h):p)||void 0===h)break e;u=D({},u,h);break e;case 2:La=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(h=r.effects)?r.effects=[o]:h.push(o))}else m={eventTime:m,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===d?(c=d=m,l=u):d=d.next=m,i|=h;if(null===(o=o.next)){if(null===(o=r.shared.pending))break;o=(h=o).next,h.next=null,r.lastBaseUpdate=h,r.shared.pending=null}}if(null===d&&(l=u),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=d,null!==(t=r.shared.interleaved)){r=t;do{i|=r.lane,r=r.next}while(r!==t)}else null===a&&(r.shared.lanes=0);zl|=i,e.lanes=i,e.memoizedState=u}}function qa(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var s=e[t],r=s.callback;if(null!==r){if(s.callback=null,s=n,"function"!==typeof r)throw Error(a(191,r));r.call(s)}}}var Ha={},Wa=kr(Ha),Ga=kr(Ha),Ka=kr(Ha);function Ja(e){if(e===Ha)throw Error(a(174));return e}function Za(e,t){switch(Er(Ka,t),Er(Ga,e),Er(Wa,Ha),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Sr(Wa),Er(Wa,t)}function $a(){Sr(Wa),Sr(Ga),Sr(Ka)}function Qa(e){Ja(Ka.current);var t=Ja(Wa.current),n=le(t,e.type);t!==n&&(Er(Ga,e),Er(Wa,n))}function Ya(e){Ga.current===e&&(Sr(Wa),Sr(Ga))}var Xa=kr(0);function ei(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ti=[];function ni(){for(var e=0;e<ti.length;e++)ti[e]._workInProgressVersionPrimary=null;ti.length=0}var si=b.ReactCurrentDispatcher,ri=b.ReactCurrentBatchConfig,ai=0,ii=null,oi=null,li=null,ci=!1,di=!1,ui=0,hi=0;function mi(){throw Error(a(321))}function pi(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!os(e[n],t[n]))return!1;return!0}function fi(e,t,n,s,r,i){if(ai=i,ii=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,si.current=null===e||null===e.memoizedState?Yi:Xi,e=n(s,r),di){i=0;do{if(di=!1,ui=0,25<=i)throw Error(a(301));i+=1,li=oi=null,t.updateQueue=null,si.current=eo,e=n(s,r)}while(di)}if(si.current=Qi,t=null!==oi&&null!==oi.next,ai=0,li=oi=ii=null,ci=!1,t)throw Error(a(300));return e}function xi(){var e=0!==ui;return ui=0,e}function gi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===li?ii.memoizedState=li=e:li=li.next=e,li}function vi(){if(null===oi){var e=ii.alternate;e=null!==e?e.memoizedState:null}else e=oi.next;var t=null===li?ii.memoizedState:li.next;if(null!==t)li=t,oi=e;else{if(null===e)throw Error(a(310));e={memoizedState:(oi=e).memoizedState,baseState:oi.baseState,baseQueue:oi.baseQueue,queue:oi.queue,next:null},null===li?ii.memoizedState=li=e:li=li.next=e}return li}function yi(e,t){return"function"===typeof t?t(e):t}function bi(e){var t=vi(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var s=oi,r=s.baseQueue,i=n.pending;if(null!==i){if(null!==r){var o=r.next;r.next=i.next,i.next=o}s.baseQueue=r=i,n.pending=null}if(null!==r){i=r.next,s=s.baseState;var l=o=null,c=null,d=i;do{var u=d.lane;if((ai&u)===u)null!==c&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),s=d.hasEagerState?d.eagerState:e(s,d.action);else{var h={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};null===c?(l=c=h,o=s):c=c.next=h,ii.lanes|=u,zl|=u}d=d.next}while(null!==d&&d!==i);null===c?o=s:c.next=l,os(s,t.memoizedState)||(yo=!0),t.memoizedState=s,t.baseState=o,t.baseQueue=c,n.lastRenderedState=s}if(null!==(e=n.interleaved)){r=e;do{i=r.lane,ii.lanes|=i,zl|=i,r=r.next}while(r!==e)}else null===r&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function ji(e){var t=vi(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var s=n.dispatch,r=n.pending,i=t.memoizedState;if(null!==r){n.pending=null;var o=r=r.next;do{i=e(i,o.action),o=o.next}while(o!==r);os(i,t.memoizedState)||(yo=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),n.lastRenderedState=i}return[i,s]}function wi(){}function Ni(e,t){var n=ii,s=vi(),r=t(),i=!os(s.memoizedState,r);if(i&&(s.memoizedState=r,yo=!0),s=s.queue,Li(Ei.bind(null,n,s,e),[e]),s.getSnapshot!==t||i||null!==li&&1&li.memoizedState.tag){if(n.flags|=2048,Ti(9,Si.bind(null,n,s,r,t),void 0,null),null===Pl)throw Error(a(349));0!==(30&ai)||ki(n,t,r)}return r}function ki(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=ii.updateQueue)?(t={lastEffect:null,stores:null},ii.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Si(e,t,n,s){t.value=n,t.getSnapshot=s,_i(t)&&Ci(e)}function Ei(e,t,n){return n(function(){_i(t)&&Ci(e)})}function _i(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!os(e,n)}catch(s){return!0}}function Ci(e){var t=Oa(e,1);null!==t&&nc(t,e,1,-1)}function Pi(e){var t=gi();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:yi,lastRenderedState:e},t.queue=e,e=e.dispatch=Ki.bind(null,ii,e),[t.memoizedState,e]}function Ti(e,t,n,s){return e={tag:e,create:t,destroy:n,deps:s,next:null},null===(t=ii.updateQueue)?(t={lastEffect:null,stores:null},ii.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(s=n.next,n.next=e,e.next=s,t.lastEffect=e),e}function Ai(){return vi().memoizedState}function Ii(e,t,n,s){var r=gi();ii.flags|=e,r.memoizedState=Ti(1|t,n,void 0,void 0===s?null:s)}function Ri(e,t,n,s){var r=vi();s=void 0===s?null:s;var a=void 0;if(null!==oi){var i=oi.memoizedState;if(a=i.destroy,null!==s&&pi(s,i.deps))return void(r.memoizedState=Ti(t,n,a,s))}ii.flags|=e,r.memoizedState=Ti(1|t,n,a,s)}function Oi(e,t){return Ii(8390656,8,e,t)}function Li(e,t){return Ri(2048,8,e,t)}function zi(e,t){return Ri(4,2,e,t)}function Di(e,t){return Ri(4,4,e,t)}function Mi(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Fi(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ri(4,4,Mi.bind(null,t,e),n)}function Ui(){}function Bi(e,t){var n=vi();t=void 0===t?null:t;var s=n.memoizedState;return null!==s&&null!==t&&pi(t,s[1])?s[0]:(n.memoizedState=[e,t],e)}function Vi(e,t){var n=vi();t=void 0===t?null:t;var s=n.memoizedState;return null!==s&&null!==t&&pi(t,s[1])?s[0]:(e=e(),n.memoizedState=[e,t],e)}function qi(e,t,n){return 0===(21&ai)?(e.baseState&&(e.baseState=!1,yo=!0),e.memoizedState=n):(os(n,t)||(n=ft(),ii.lanes|=n,zl|=n,e.baseState=!0),t)}function Hi(e,t){var n=yt;yt=0!==n&&4>n?n:4,e(!0);var s=ri.transition;ri.transition={};try{e(!1),t()}finally{yt=n,ri.transition=s}}function Wi(){return vi().memoizedState}function Gi(e,t,n){var s=tc(e);if(n={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null},Ji(e))Zi(t,n);else if(null!==(n=Ra(e,t,n,s))){nc(n,e,s,ec()),$i(n,t,s)}}function Ki(e,t,n){var s=tc(e),r={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ji(e))Zi(t,r);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var i=t.lastRenderedState,o=a(i,n);if(r.hasEagerState=!0,r.eagerState=o,os(o,i)){var l=t.interleaved;return null===l?(r.next=r,Ia(t)):(r.next=l.next,l.next=r),void(t.interleaved=r)}}catch(c){}null!==(n=Ra(e,t,r,s))&&(nc(n,e,s,r=ec()),$i(n,t,s))}}function Ji(e){var t=e.alternate;return e===ii||null!==t&&t===ii}function Zi(e,t){di=ci=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function $i(e,t,n){if(0!==(4194240&n)){var s=t.lanes;n|=s&=e.pendingLanes,t.lanes=n,vt(e,n)}}var Qi={readContext:Ta,useCallback:mi,useContext:mi,useEffect:mi,useImperativeHandle:mi,useInsertionEffect:mi,useLayoutEffect:mi,useMemo:mi,useReducer:mi,useRef:mi,useState:mi,useDebugValue:mi,useDeferredValue:mi,useTransition:mi,useMutableSource:mi,useSyncExternalStore:mi,useId:mi,unstable_isNewReconciler:!1},Yi={readContext:Ta,useCallback:function(e,t){return gi().memoizedState=[e,void 0===t?null:t],e},useContext:Ta,useEffect:Oi,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ii(4194308,4,Mi.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ii(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ii(4,2,e,t)},useMemo:function(e,t){var n=gi();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var s=gi();return t=void 0!==n?n(t):t,s.memoizedState=s.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},s.queue=e,e=e.dispatch=Gi.bind(null,ii,e),[s.memoizedState,e]},useRef:function(e){return e={current:e},gi().memoizedState=e},useState:Pi,useDebugValue:Ui,useDeferredValue:function(e){return gi().memoizedState=e},useTransition:function(){var e=Pi(!1),t=e[0];return e=Hi.bind(null,e[1]),gi().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var s=ii,r=gi();if(ra){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Pl)throw Error(a(349));0!==(30&ai)||ki(s,t,n)}r.memoizedState=n;var i={value:n,getSnapshot:t};return r.queue=i,Oi(Ei.bind(null,s,i,e),[e]),s.flags|=2048,Ti(9,Si.bind(null,s,i,n,t),void 0,null),n},useId:function(){var e=gi(),t=Pl.identifierPrefix;if(ra){var n=Qr;t=":"+t+"R"+(n=($r&~(1<<32-it($r)-1)).toString(32)+n),0<(n=ui++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=hi++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Xi={readContext:Ta,useCallback:Bi,useContext:Ta,useEffect:Li,useImperativeHandle:Fi,useInsertionEffect:zi,useLayoutEffect:Di,useMemo:Vi,useReducer:bi,useRef:Ai,useState:function(){return bi(yi)},useDebugValue:Ui,useDeferredValue:function(e){return qi(vi(),oi.memoizedState,e)},useTransition:function(){return[bi(yi)[0],vi().memoizedState]},useMutableSource:wi,useSyncExternalStore:Ni,useId:Wi,unstable_isNewReconciler:!1},eo={readContext:Ta,useCallback:Bi,useContext:Ta,useEffect:Li,useImperativeHandle:Fi,useInsertionEffect:zi,useLayoutEffect:Di,useMemo:Vi,useReducer:ji,useRef:Ai,useState:function(){return ji(yi)},useDebugValue:Ui,useDeferredValue:function(e){var t=vi();return null===oi?t.memoizedState=e:qi(t,oi.memoizedState,e)},useTransition:function(){return[ji(yi)[0],vi().memoizedState]},useMutableSource:wi,useSyncExternalStore:Ni,useId:Wi,unstable_isNewReconciler:!1};function to(e,t){if(e&&e.defaultProps){for(var n in t=D({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function no(e,t,n,s){n=null===(n=n(s,t=e.memoizedState))||void 0===n?t:D({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var so={isMounted:function(e){return!!(e=e._reactInternals)&&Ve(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var s=ec(),r=tc(e),a=Ma(s,r);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Fa(e,a,r))&&(nc(t,e,r,s),Ua(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var s=ec(),r=tc(e),a=Ma(s,r);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Fa(e,a,r))&&(nc(t,e,r,s),Ua(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),s=tc(e),r=Ma(n,s);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),null!==(t=Fa(e,r,s))&&(nc(t,e,s,n),Ua(t,e,s))}};function ro(e,t,n,s,r,a,i){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(s,a,i):!t.prototype||!t.prototype.isPureReactComponent||(!ls(n,s)||!ls(r,a))}function ao(e,t,n){var s=!1,r=_r,a=t.contextType;return"object"===typeof a&&null!==a?a=Ta(a):(r=Ir(t)?Tr:Cr.current,a=(s=null!==(s=t.contextTypes)&&void 0!==s)?Ar(e,r):_r),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=so,e.stateNode=t,t._reactInternals=e,s&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=a),t}function io(e,t,n,s){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,s),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,s),t.state!==e&&so.enqueueReplaceState(t,t.state,null)}function oo(e,t,n,s){var r=e.stateNode;r.props=n,r.state=e.memoizedState,r.refs={},za(e);var a=t.contextType;"object"===typeof a&&null!==a?r.context=Ta(a):(a=Ir(t)?Tr:Cr.current,r.context=Ar(e,a)),r.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(no(e,t,a,n),r.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof r.getSnapshotBeforeUpdate||"function"!==typeof r.UNSAFE_componentWillMount&&"function"!==typeof r.componentWillMount||(t=r.state,"function"===typeof r.componentWillMount&&r.componentWillMount(),"function"===typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),t!==r.state&&so.enqueueReplaceState(r,r.state,null),Va(e,n,r,s),r.state=e.memoizedState),"function"===typeof r.componentDidMount&&(e.flags|=4194308)}function lo(e,t){try{var n="",s=t;do{n+=B(s),s=s.return}while(s);var r=n}catch(a){r="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:r,digest:null}}function co(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function uo(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var ho="function"===typeof WeakMap?WeakMap:Map;function mo(e,t,n){(n=Ma(-1,n)).tag=3,n.payload={element:null};var s=t.value;return n.callback=function(){Hl||(Hl=!0,Wl=s),uo(0,t)},n}function po(e,t,n){(n=Ma(-1,n)).tag=3;var s=e.type.getDerivedStateFromError;if("function"===typeof s){var r=t.value;n.payload=function(){return s(r)},n.callback=function(){uo(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){uo(0,t),"function"!==typeof s&&(null===Gl?Gl=new Set([this]):Gl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function fo(e,t,n){var s=e.pingCache;if(null===s){s=e.pingCache=new ho;var r=new Set;s.set(t,r)}else void 0===(r=s.get(t))&&(r=new Set,s.set(t,r));r.has(n)||(r.add(n),e=Sc.bind(null,e,t,n),t.then(e,e))}function xo(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function go(e,t,n,s,r){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Ma(-1,1)).tag=2,Fa(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=r,e)}var vo=b.ReactCurrentOwner,yo=!1;function bo(e,t,n,s){t.child=null===e?ja(t,null,n,s):ba(t,e.child,n,s)}function jo(e,t,n,s,r){n=n.render;var a=t.ref;return Pa(t,r),s=fi(e,t,n,s,a,r),n=xi(),null===e||yo?(ra&&n&&ea(t),t.flags|=1,bo(e,t,s,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Ho(e,t,r))}function wo(e,t,n,s,r){if(null===e){var a=n.type;return"function"!==typeof a||Ic(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Oc(n.type,null,s,t,t.mode,r)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,No(e,t,a,s,r))}if(a=e.child,0===(e.lanes&r)){var i=a.memoizedProps;if((n=null!==(n=n.compare)?n:ls)(i,s)&&e.ref===t.ref)return Ho(e,t,r)}return t.flags|=1,(e=Rc(a,s)).ref=t.ref,e.return=t,t.child=e}function No(e,t,n,s,r){if(null!==e){var a=e.memoizedProps;if(ls(a,s)&&e.ref===t.ref){if(yo=!1,t.pendingProps=s=a,0===(e.lanes&r))return t.lanes=e.lanes,Ho(e,t,r);0!==(131072&e.flags)&&(yo=!0)}}return Eo(e,t,n,s,r)}function ko(e,t,n){var s=t.pendingProps,r=s.children,a=null!==e?e.memoizedState:null;if("hidden"===s.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Er(Rl,Il),Il|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Er(Rl,Il),Il|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=null!==a?a.baseLanes:n,Er(Rl,Il),Il|=s}else null!==a?(s=a.baseLanes|n,t.memoizedState=null):s=n,Er(Rl,Il),Il|=s;return bo(e,t,r,n),t.child}function So(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Eo(e,t,n,s,r){var a=Ir(n)?Tr:Cr.current;return a=Ar(t,a),Pa(t,r),n=fi(e,t,n,s,a,r),s=xi(),null===e||yo?(ra&&s&&ea(t),t.flags|=1,bo(e,t,n,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Ho(e,t,r))}function _o(e,t,n,s,r){if(Ir(n)){var a=!0;zr(t)}else a=!1;if(Pa(t,r),null===t.stateNode)qo(e,t),ao(t,n,s),oo(t,n,s,r),s=!0;else if(null===e){var i=t.stateNode,o=t.memoizedProps;i.props=o;var l=i.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ta(c):c=Ar(t,c=Ir(n)?Tr:Cr.current);var d=n.getDerivedStateFromProps,u="function"===typeof d||"function"===typeof i.getSnapshotBeforeUpdate;u||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(o!==s||l!==c)&&io(t,i,s,c),La=!1;var h=t.memoizedState;i.state=h,Va(t,s,i,r),l=t.memoizedState,o!==s||h!==l||Pr.current||La?("function"===typeof d&&(no(t,n,d,s),l=t.memoizedState),(o=La||ro(t,n,o,s,h,l,c))?(u||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||("function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"===typeof i.componentDidMount&&(t.flags|=4194308)):("function"===typeof i.componentDidMount&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=l),i.props=s,i.state=l,i.context=c,s=o):("function"===typeof i.componentDidMount&&(t.flags|=4194308),s=!1)}else{i=t.stateNode,Da(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:to(t.type,o),i.props=c,u=t.pendingProps,h=i.context,"object"===typeof(l=n.contextType)&&null!==l?l=Ta(l):l=Ar(t,l=Ir(n)?Tr:Cr.current);var m=n.getDerivedStateFromProps;(d="function"===typeof m||"function"===typeof i.getSnapshotBeforeUpdate)||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(o!==u||h!==l)&&io(t,i,s,l),La=!1,h=t.memoizedState,i.state=h,Va(t,s,i,r);var p=t.memoizedState;o!==u||h!==p||Pr.current||La?("function"===typeof m&&(no(t,n,m,s),p=t.memoizedState),(c=La||ro(t,n,c,s,h,p,l)||!1)?(d||"function"!==typeof i.UNSAFE_componentWillUpdate&&"function"!==typeof i.componentWillUpdate||("function"===typeof i.componentWillUpdate&&i.componentWillUpdate(s,p,l),"function"===typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(s,p,l)),"function"===typeof i.componentDidUpdate&&(t.flags|=4),"function"===typeof i.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof i.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=p),i.props=s,i.state=p,i.context=l,s=c):("function"!==typeof i.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),s=!1)}return Co(e,t,n,s,a,r)}function Co(e,t,n,s,r,a){So(e,t);var i=0!==(128&t.flags);if(!s&&!i)return r&&Dr(t,n,!1),Ho(e,t,a);s=t.stateNode,vo.current=t;var o=i&&"function"!==typeof n.getDerivedStateFromError?null:s.render();return t.flags|=1,null!==e&&i?(t.child=ba(t,e.child,null,a),t.child=ba(t,null,o,a)):bo(e,t,o,a),t.memoizedState=s.state,r&&Dr(t,n,!0),t.child}function Po(e){var t=e.stateNode;t.pendingContext?Or(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Or(0,t.context,!1),Za(e,t.containerInfo)}function To(e,t,n,s,r){return ma(),pa(r),t.flags|=256,bo(e,t,n,s),t.child}var Ao,Io,Ro,Oo,Lo={dehydrated:null,treeContext:null,retryLane:0};function zo(e){return{baseLanes:e,cachePool:null,transitions:null}}function Do(e,t,n){var s,r=t.pendingProps,i=Xa.current,o=!1,l=0!==(128&t.flags);if((s=l)||(s=(null===e||null!==e.memoizedState)&&0!==(2&i)),s?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(i|=1),Er(Xa,1&i),null===e)return ca(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=r.children,e=r.fallback,o?(r=t.mode,o=t.child,l={mode:"hidden",children:l},0===(1&r)&&null!==o?(o.childLanes=0,o.pendingProps=l):o=zc(l,r,0,null),e=Lc(e,r,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=zo(n),t.memoizedState=Lo,e):Mo(t,l));if(null!==(i=e.memoizedState)&&null!==(s=i.dehydrated))return function(e,t,n,s,r,i,o){if(n)return 256&t.flags?(t.flags&=-257,Fo(e,t,o,s=co(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(i=s.fallback,r=t.mode,s=zc({mode:"visible",children:s.children},r,0,null),(i=Lc(i,r,o,null)).flags|=2,s.return=t,i.return=t,s.sibling=i,t.child=s,0!==(1&t.mode)&&ba(t,e.child,null,o),t.child.memoizedState=zo(o),t.memoizedState=Lo,i);if(0===(1&t.mode))return Fo(e,t,o,null);if("$!"===r.data){if(s=r.nextSibling&&r.nextSibling.dataset)var l=s.dgst;return s=l,Fo(e,t,o,s=co(i=Error(a(419)),s,void 0))}if(l=0!==(o&e.childLanes),yo||l){if(null!==(s=Pl)){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}0!==(r=0!==(r&(s.suspendedLanes|o))?0:r)&&r!==i.retryLane&&(i.retryLane=r,Oa(e,r),nc(s,e,r,-1))}return fc(),Fo(e,t,o,s=co(Error(a(421))))}return"$?"===r.data?(t.flags|=128,t.child=e.child,t=_c.bind(null,e),r._reactRetry=t,null):(e=i.treeContext,sa=cr(r.nextSibling),na=t,ra=!0,aa=null,null!==e&&(Kr[Jr++]=$r,Kr[Jr++]=Qr,Kr[Jr++]=Zr,$r=e.id,Qr=e.overflow,Zr=t),t=Mo(t,s.children),t.flags|=4096,t)}(e,t,l,r,s,i,n);if(o){o=r.fallback,l=t.mode,s=(i=e.child).sibling;var c={mode:"hidden",children:r.children};return 0===(1&l)&&t.child!==i?((r=t.child).childLanes=0,r.pendingProps=c,t.deletions=null):(r=Rc(i,c)).subtreeFlags=14680064&i.subtreeFlags,null!==s?o=Rc(s,o):(o=Lc(o,l,n,null)).flags|=2,o.return=t,r.return=t,r.sibling=o,t.child=r,r=o,o=t.child,l=null===(l=e.child.memoizedState)?zo(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~n,t.memoizedState=Lo,r}return e=(o=e.child).sibling,r=Rc(o,{mode:"visible",children:r.children}),0===(1&t.mode)&&(r.lanes=n),r.return=t,r.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Mo(e,t){return(t=zc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Fo(e,t,n,s){return null!==s&&pa(s),ba(t,e.child,null,n),(e=Mo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Uo(e,t,n){e.lanes|=t;var s=e.alternate;null!==s&&(s.lanes|=t),Ca(e.return,t,n)}function Bo(e,t,n,s,r){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:r}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=s,a.tail=n,a.tailMode=r)}function Vo(e,t,n){var s=t.pendingProps,r=s.revealOrder,a=s.tail;if(bo(e,t,s.children,n),0!==(2&(s=Xa.current)))s=1&s|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Uo(e,n,t);else if(19===e.tag)Uo(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(Er(Xa,s),0===(1&t.mode))t.memoizedState=null;else switch(r){case"forwards":for(n=t.child,r=null;null!==n;)null!==(e=n.alternate)&&null===ei(e)&&(r=n),n=n.sibling;null===(n=r)?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),Bo(t,!1,r,n,a);break;case"backwards":for(n=null,r=t.child,t.child=null;null!==r;){if(null!==(e=r.alternate)&&null===ei(e)){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}Bo(t,!0,n,null,a);break;case"together":Bo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function qo(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ho(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),zl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Rc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Rc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Wo(e,t){if(!ra)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var s=null;null!==n;)null!==n.alternate&&(s=n),n=n.sibling;null===s?t||null===e.tail?e.tail=null:e.tail.sibling=null:s.sibling=null}}function Go(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,s=0;if(t)for(var r=e.child;null!==r;)n|=r.lanes|r.childLanes,s|=14680064&r.subtreeFlags,s|=14680064&r.flags,r.return=e,r=r.sibling;else for(r=e.child;null!==r;)n|=r.lanes|r.childLanes,s|=r.subtreeFlags,s|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=s,e.childLanes=n,t}function Ko(e,t,n){var s=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Go(t),null;case 1:case 17:return Ir(t.type)&&Rr(),Go(t),null;case 3:return s=t.stateNode,$a(),Sr(Pr),Sr(Cr),ni(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),null!==e&&null!==e.child||(ua(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(ic(aa),aa=null))),Io(e,t),Go(t),null;case 5:Ya(t);var r=Ja(Ka.current);if(n=t.type,null!==e&&null!=t.stateNode)Ro(e,t,n,s,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(null===t.stateNode)throw Error(a(166));return Go(t),null}if(e=Ja(Wa.current),ua(t)){s=t.stateNode,n=t.type;var i=t.memoizedProps;switch(s[hr]=t,s[mr]=i,e=0!==(1&t.mode),n){case"dialog":Fs("cancel",s),Fs("close",s);break;case"iframe":case"object":case"embed":Fs("load",s);break;case"video":case"audio":for(r=0;r<Ls.length;r++)Fs(Ls[r],s);break;case"source":Fs("error",s);break;case"img":case"image":case"link":Fs("error",s),Fs("load",s);break;case"details":Fs("toggle",s);break;case"input":$(s,i),Fs("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!i.multiple},Fs("invalid",s);break;case"textarea":re(s,i),Fs("invalid",s)}for(var l in ve(n,i),r=null,i)if(i.hasOwnProperty(l)){var c=i[l];"children"===l?"string"===typeof c?s.textContent!==c&&(!0!==i.suppressHydrationWarning&&Ys(s.textContent,c,e),r=["children",c]):"number"===typeof c&&s.textContent!==""+c&&(!0!==i.suppressHydrationWarning&&Ys(s.textContent,c,e),r=["children",""+c]):o.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Fs("scroll",s)}switch(n){case"input":G(s),X(s,i,!0);break;case"textarea":G(s),ie(s);break;case"select":case"option":break;default:"function"===typeof i.onClick&&(s.onclick=Xs)}s=r,t.updateQueue=s,null!==s&&(t.flags|=4)}else{l=9===r.nodeType?r:r.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof s.is?e=l.createElement(n,{is:s.is}):(e=l.createElement(n),"select"===n&&(l=e,s.multiple?l.multiple=!0:s.size&&(l.size=s.size))):e=l.createElementNS(e,n),e[hr]=t,e[mr]=s,Ao(e,t,!1,!1),t.stateNode=e;e:{switch(l=ye(n,s),n){case"dialog":Fs("cancel",e),Fs("close",e),r=s;break;case"iframe":case"object":case"embed":Fs("load",e),r=s;break;case"video":case"audio":for(r=0;r<Ls.length;r++)Fs(Ls[r],e);r=s;break;case"source":Fs("error",e),r=s;break;case"img":case"image":case"link":Fs("error",e),Fs("load",e),r=s;break;case"details":Fs("toggle",e),r=s;break;case"input":$(e,s),r=Z(e,s),Fs("invalid",e);break;case"option":default:r=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},r=D({},s,{value:void 0}),Fs("invalid",e);break;case"textarea":re(e,s),r=se(e,s),Fs("invalid",e)}for(i in ve(n,r),c=r)if(c.hasOwnProperty(i)){var d=c[i];"style"===i?xe(e,d):"dangerouslySetInnerHTML"===i?null!=(d=d?d.__html:void 0)&&ue(e,d):"children"===i?"string"===typeof d?("textarea"!==n||""!==d)&&he(e,d):"number"===typeof d&&he(e,""+d):"suppressContentEditableWarning"!==i&&"suppressHydrationWarning"!==i&&"autoFocus"!==i&&(o.hasOwnProperty(i)?null!=d&&"onScroll"===i&&Fs("scroll",e):null!=d&&y(e,i,d,l))}switch(n){case"input":G(e),X(e,s,!1);break;case"textarea":G(e),ie(e);break;case"option":null!=s.value&&e.setAttribute("value",""+H(s.value));break;case"select":e.multiple=!!s.multiple,null!=(i=s.value)?ne(e,!!s.multiple,i,!1):null!=s.defaultValue&&ne(e,!!s.multiple,s.defaultValue,!0);break;default:"function"===typeof r.onClick&&(e.onclick=Xs)}switch(n){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Go(t),null;case 6:if(e&&null!=t.stateNode)Oo(e,t,e.memoizedProps,s);else{if("string"!==typeof s&&null===t.stateNode)throw Error(a(166));if(n=Ja(Ka.current),Ja(Wa.current),ua(t)){if(s=t.stateNode,n=t.memoizedProps,s[hr]=t,(i=s.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:Ys(s.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Ys(s.nodeValue,n,0!==(1&e.mode))}i&&(t.flags|=4)}else(s=(9===n.nodeType?n:n.ownerDocument).createTextNode(s))[hr]=t,t.stateNode=s}return Go(t),null;case 13:if(Sr(Xa),s=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ra&&null!==sa&&0!==(1&t.mode)&&0===(128&t.flags))ha(),ma(),t.flags|=98560,i=!1;else if(i=ua(t),null!==s&&null!==s.dehydrated){if(null===e){if(!i)throw Error(a(318));if(!(i=null!==(i=t.memoizedState)?i.dehydrated:null))throw Error(a(317));i[hr]=t}else ma(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Go(t),i=!1}else null!==aa&&(ic(aa),aa=null),i=!0;if(!i)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((s=null!==s)!==(null!==e&&null!==e.memoizedState)&&s&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Xa.current)?0===Ol&&(Ol=3):fc())),null!==t.updateQueue&&(t.flags|=4),Go(t),null);case 4:return $a(),Io(e,t),null===e&&Vs(t.stateNode.containerInfo),Go(t),null;case 10:return _a(t.type._context),Go(t),null;case 19:if(Sr(Xa),null===(i=t.memoizedState))return Go(t),null;if(s=0!==(128&t.flags),null===(l=i.rendering))if(s)Wo(i,!1);else{if(0!==Ol||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ei(e))){for(t.flags|=128,Wo(i,!1),null!==(s=l.updateQueue)&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=n,n=t.child;null!==n;)e=s,(i=n).flags&=14680066,null===(l=i.alternate)?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,e=l.dependencies,i.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Er(Xa,1&Xa.current|2),t.child}e=e.sibling}null!==i.tail&&Qe()>Vl&&(t.flags|=128,s=!0,Wo(i,!1),t.lanes=4194304)}else{if(!s)if(null!==(e=ei(l))){if(t.flags|=128,s=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Wo(i,!0),null===i.tail&&"hidden"===i.tailMode&&!l.alternate&&!ra)return Go(t),null}else 2*Qe()-i.renderingStartTime>Vl&&1073741824!==n&&(t.flags|=128,s=!0,Wo(i,!1),t.lanes=4194304);i.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=i.last)?n.sibling=l:t.child=l,i.last=l)}return null!==i.tail?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Qe(),t.sibling=null,n=Xa.current,Er(Xa,s?1&n|2:1&n),t):(Go(t),null);case 22:case 23:return uc(),s=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==s&&(t.flags|=8192),s&&0!==(1&t.mode)?0!==(1073741824&Il)&&(Go(t),6&t.subtreeFlags&&(t.flags|=8192)):Go(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Jo(e,t){switch(ta(t),t.tag){case 1:return Ir(t.type)&&Rr(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return $a(),Sr(Pr),Sr(Cr),ni(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Ya(t),null;case 13:if(Sr(Xa),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));ma()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Sr(Xa),null;case 4:return $a(),null;case 10:return _a(t.type._context),null;case 22:case 23:return uc(),null;default:return null}}Ao=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Io=function(){},Ro=function(e,t,n,s){var r=e.memoizedProps;if(r!==s){e=t.stateNode,Ja(Wa.current);var a,i=null;switch(n){case"input":r=Z(e,r),s=Z(e,s),i=[];break;case"select":r=D({},r,{value:void 0}),s=D({},s,{value:void 0}),i=[];break;case"textarea":r=se(e,r),s=se(e,s),i=[];break;default:"function"!==typeof r.onClick&&"function"===typeof s.onClick&&(e.onclick=Xs)}for(d in ve(n,s),n=null,r)if(!s.hasOwnProperty(d)&&r.hasOwnProperty(d)&&null!=r[d])if("style"===d){var l=r[d];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==d&&"children"!==d&&"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&"autoFocus"!==d&&(o.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in s){var c=s[d];if(l=null!=r?r[d]:void 0,s.hasOwnProperty(d)&&c!==l&&(null!=c||null!=l))if("style"===d)if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(i||(i=[]),i.push(d,n)),n=c;else"dangerouslySetInnerHTML"===d?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(i=i||[]).push(d,c)):"children"===d?"string"!==typeof c&&"number"!==typeof c||(i=i||[]).push(d,""+c):"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&(o.hasOwnProperty(d)?(null!=c&&"onScroll"===d&&Fs("scroll",e),i||l===c||(i=[])):(i=i||[]).push(d,c))}n&&(i=i||[]).push("style",n);var d=i;(t.updateQueue=d)&&(t.flags|=4)}},Oo=function(e,t,n,s){n!==s&&(t.flags|=4)};var Zo=!1,$o=!1,Qo="function"===typeof WeakSet?WeakSet:Set,Yo=null;function Xo(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(s){kc(e,t,s)}else n.current=null}function el(e,t,n){try{n()}catch(s){kc(e,t,s)}}var tl=!1;function nl(e,t,n){var s=t.updateQueue;if(null!==(s=null!==s?s.lastEffect:null)){var r=s=s.next;do{if((r.tag&e)===e){var a=r.destroy;r.destroy=void 0,void 0!==a&&el(t,n,a)}r=r.next}while(r!==s)}}function sl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var s=n.create;n.destroy=s()}n=n.next}while(n!==t)}}function rl(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function al(e){var t=e.alternate;null!==t&&(e.alternate=null,al(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hr],delete t[mr],delete t[fr],delete t[xr],delete t[gr])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function il(e){return 5===e.tag||3===e.tag||4===e.tag}function ol(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||il(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var s=e.tag;if(5===s||6===s)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Xs));else if(4!==s&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function cl(e,t,n){var s=e.tag;if(5===s||6===s)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==s&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var dl=null,ul=!1;function hl(e,t,n){for(n=n.child;null!==n;)ml(e,t,n),n=n.sibling}function ml(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(rt,n)}catch(o){}switch(n.tag){case 5:$o||Xo(n,t);case 6:var s=dl,r=ul;dl=null,hl(e,t,n),ul=r,null!==(dl=s)&&(ul?(e=dl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):dl.removeChild(n.stateNode));break;case 18:null!==dl&&(ul?(e=dl,n=n.stateNode,8===e.nodeType?lr(e.parentNode,n):1===e.nodeType&&lr(e,n),Vt(e)):lr(dl,n.stateNode));break;case 4:s=dl,r=ul,dl=n.stateNode.containerInfo,ul=!0,hl(e,t,n),dl=s,ul=r;break;case 0:case 11:case 14:case 15:if(!$o&&(null!==(s=n.updateQueue)&&null!==(s=s.lastEffect))){r=s=s.next;do{var a=r,i=a.destroy;a=a.tag,void 0!==i&&(0!==(2&a)||0!==(4&a))&&el(n,t,i),r=r.next}while(r!==s)}hl(e,t,n);break;case 1:if(!$o&&(Xo(n,t),"function"===typeof(s=n.stateNode).componentWillUnmount))try{s.props=n.memoizedProps,s.state=n.memoizedState,s.componentWillUnmount()}catch(o){kc(n,t,o)}hl(e,t,n);break;case 21:hl(e,t,n);break;case 22:1&n.mode?($o=(s=$o)||null!==n.memoizedState,hl(e,t,n),$o=s):hl(e,t,n);break;default:hl(e,t,n)}}function pl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Qo),t.forEach(function(t){var s=Cc.bind(null,e,t);n.has(t)||(n.add(t),t.then(s,s))})}}function fl(e,t){var n=t.deletions;if(null!==n)for(var s=0;s<n.length;s++){var r=n[s];try{var i=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 5:dl=l.stateNode,ul=!1;break e;case 3:case 4:dl=l.stateNode.containerInfo,ul=!0;break e}l=l.return}if(null===dl)throw Error(a(160));ml(i,o,r),dl=null,ul=!1;var c=r.alternate;null!==c&&(c.return=null),r.return=null}catch(d){kc(r,t,d)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)xl(t,e),t=t.sibling}function xl(e,t){var n=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(fl(t,e),gl(e),4&s){try{nl(3,e,e.return),sl(3,e)}catch(x){kc(e,e.return,x)}try{nl(5,e,e.return)}catch(x){kc(e,e.return,x)}}break;case 1:fl(t,e),gl(e),512&s&&null!==n&&Xo(n,n.return);break;case 5:if(fl(t,e),gl(e),512&s&&null!==n&&Xo(n,n.return),32&e.flags){var r=e.stateNode;try{he(r,"")}catch(x){kc(e,e.return,x)}}if(4&s&&null!=(r=e.stateNode)){var i=e.memoizedProps,o=null!==n?n.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===i.type&&null!=i.name&&Q(r,i),ye(l,o);var d=ye(l,i);for(o=0;o<c.length;o+=2){var u=c[o],h=c[o+1];"style"===u?xe(r,h):"dangerouslySetInnerHTML"===u?ue(r,h):"children"===u?he(r,h):y(r,u,h,d)}switch(l){case"input":Y(r,i);break;case"textarea":ae(r,i);break;case"select":var m=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!i.multiple;var p=i.value;null!=p?ne(r,!!i.multiple,p,!1):m!==!!i.multiple&&(null!=i.defaultValue?ne(r,!!i.multiple,i.defaultValue,!0):ne(r,!!i.multiple,i.multiple?[]:"",!1))}r[mr]=i}catch(x){kc(e,e.return,x)}}break;case 6:if(fl(t,e),gl(e),4&s){if(null===e.stateNode)throw Error(a(162));r=e.stateNode,i=e.memoizedProps;try{r.nodeValue=i}catch(x){kc(e,e.return,x)}}break;case 3:if(fl(t,e),gl(e),4&s&&null!==n&&n.memoizedState.isDehydrated)try{Vt(t.containerInfo)}catch(x){kc(e,e.return,x)}break;case 4:default:fl(t,e),gl(e);break;case 13:fl(t,e),gl(e),8192&(r=e.child).flags&&(i=null!==r.memoizedState,r.stateNode.isHidden=i,!i||null!==r.alternate&&null!==r.alternate.memoizedState||(Bl=Qe())),4&s&&pl(e);break;case 22:if(u=null!==n&&null!==n.memoizedState,1&e.mode?($o=(d=$o)||u,fl(t,e),$o=d):fl(t,e),gl(e),8192&s){if(d=null!==e.memoizedState,(e.stateNode.isHidden=d)&&!u&&0!==(1&e.mode))for(Yo=e,u=e.child;null!==u;){for(h=Yo=u;null!==Yo;){switch(p=(m=Yo).child,m.tag){case 0:case 11:case 14:case 15:nl(4,m,m.return);break;case 1:Xo(m,m.return);var f=m.stateNode;if("function"===typeof f.componentWillUnmount){s=m,n=m.return;try{t=s,f.props=t.memoizedProps,f.state=t.memoizedState,f.componentWillUnmount()}catch(x){kc(s,n,x)}}break;case 5:Xo(m,m.return);break;case 22:if(null!==m.memoizedState){jl(h);continue}}null!==p?(p.return=m,Yo=p):jl(h)}u=u.sibling}e:for(u=null,h=e;;){if(5===h.tag){if(null===u){u=h;try{r=h.stateNode,d?"function"===typeof(i=r.style).setProperty?i.setProperty("display","none","important"):i.display="none":(l=h.stateNode,o=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=fe("display",o))}catch(x){kc(e,e.return,x)}}}else if(6===h.tag){if(null===u)try{h.stateNode.nodeValue=d?"":h.memoizedProps}catch(x){kc(e,e.return,x)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:fl(t,e),gl(e),4&s&&pl(e);case 21:}}function gl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(il(n)){var s=n;break e}n=n.return}throw Error(a(160))}switch(s.tag){case 5:var r=s.stateNode;32&s.flags&&(he(r,""),s.flags&=-33),cl(e,ol(e),r);break;case 3:case 4:var i=s.stateNode.containerInfo;ll(e,ol(e),i);break;default:throw Error(a(161))}}catch(o){kc(e,e.return,o)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function vl(e,t,n){Yo=e,yl(e,t,n)}function yl(e,t,n){for(var s=0!==(1&e.mode);null!==Yo;){var r=Yo,a=r.child;if(22===r.tag&&s){var i=null!==r.memoizedState||Zo;if(!i){var o=r.alternate,l=null!==o&&null!==o.memoizedState||$o;o=Zo;var c=$o;if(Zo=i,($o=l)&&!c)for(Yo=r;null!==Yo;)l=(i=Yo).child,22===i.tag&&null!==i.memoizedState?wl(r):null!==l?(l.return=i,Yo=l):wl(r);for(;null!==a;)Yo=a,yl(a,t,n),a=a.sibling;Yo=r,Zo=o,$o=c}bl(e)}else 0!==(8772&r.subtreeFlags)&&null!==a?(a.return=r,Yo=a):bl(e)}}function bl(e){for(;null!==Yo;){var t=Yo;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:$o||sl(5,t);break;case 1:var s=t.stateNode;if(4&t.flags&&!$o)if(null===n)s.componentDidMount();else{var r=t.elementType===t.type?n.memoizedProps:to(t.type,n.memoizedProps);s.componentDidUpdate(r,n.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;null!==i&&qa(t,i,s);break;case 3:var o=t.updateQueue;if(null!==o){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}qa(t,o,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var d=t.alternate;if(null!==d){var u=d.memoizedState;if(null!==u){var h=u.dehydrated;null!==h&&Vt(h)}}}break;default:throw Error(a(163))}$o||512&t.flags&&rl(t)}catch(m){kc(t,t.return,m)}}if(t===e){Yo=null;break}if(null!==(n=t.sibling)){n.return=t.return,Yo=n;break}Yo=t.return}}function jl(e){for(;null!==Yo;){var t=Yo;if(t===e){Yo=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Yo=n;break}Yo=t.return}}function wl(e){for(;null!==Yo;){var t=Yo;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{sl(4,t)}catch(l){kc(t,n,l)}break;case 1:var s=t.stateNode;if("function"===typeof s.componentDidMount){var r=t.return;try{s.componentDidMount()}catch(l){kc(t,r,l)}}var a=t.return;try{rl(t)}catch(l){kc(t,a,l)}break;case 5:var i=t.return;try{rl(t)}catch(l){kc(t,i,l)}}}catch(l){kc(t,t.return,l)}if(t===e){Yo=null;break}var o=t.sibling;if(null!==o){o.return=t.return,Yo=o;break}Yo=t.return}}var Nl,kl=Math.ceil,Sl=b.ReactCurrentDispatcher,El=b.ReactCurrentOwner,_l=b.ReactCurrentBatchConfig,Cl=0,Pl=null,Tl=null,Al=0,Il=0,Rl=kr(0),Ol=0,Ll=null,zl=0,Dl=0,Ml=0,Fl=null,Ul=null,Bl=0,Vl=1/0,ql=null,Hl=!1,Wl=null,Gl=null,Kl=!1,Jl=null,Zl=0,$l=0,Ql=null,Yl=-1,Xl=0;function ec(){return 0!==(6&Cl)?Qe():-1!==Yl?Yl:Yl=Qe()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Cl)&&0!==Al?Al&-Al:null!==fa.transition?(0===Xl&&(Xl=ft()),Xl):0!==(e=yt)?e:e=void 0===(e=window.event)?16:$t(e.type)}function nc(e,t,n,s){if(50<$l)throw $l=0,Ql=null,Error(a(185));gt(e,n,s),0!==(2&Cl)&&e===Pl||(e===Pl&&(0===(2&Cl)&&(Dl|=n),4===Ol&&oc(e,Al)),sc(e,s),1===n&&0===Cl&&0===(1&t.mode)&&(Vl=Qe()+500,Fr&&Vr()))}function sc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,s=e.pingedLanes,r=e.expirationTimes,a=e.pendingLanes;0<a;){var i=31-it(a),o=1<<i,l=r[i];-1===l?0!==(o&n)&&0===(o&s)||(r[i]=mt(o,t)):l<=t&&(e.expiredLanes|=o),a&=~o}}(e,t);var s=ht(e,e===Pl?Al:0);if(0===s)null!==n&&Je(n),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(null!=n&&Je(n),1===t)0===e.tag?function(e){Fr=!0,Br(e)}(lc.bind(null,e)):Br(lc.bind(null,e)),ir(function(){0===(6&Cl)&&Vr()}),n=null;else{switch(bt(s)){case 1:n=Xe;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=st}n=Pc(n,rc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function rc(e,t){if(Yl=-1,Xl=0,0!==(6&Cl))throw Error(a(327));var n=e.callbackNode;if(wc()&&e.callbackNode!==n)return null;var s=ht(e,e===Pl?Al:0);if(0===s)return null;if(0!==(30&s)||0!==(s&e.expiredLanes)||t)t=xc(e,s);else{t=s;var r=Cl;Cl|=2;var i=pc();for(Pl===e&&Al===t||(ql=null,Vl=Qe()+500,hc(e,t));;)try{vc();break}catch(l){mc(e,l)}Ea(),Sl.current=i,Cl=r,null!==Tl?t=0:(Pl=null,Al=0,t=Ol)}if(0!==t){if(2===t&&(0!==(r=pt(e))&&(s=r,t=ac(e,r))),1===t)throw n=Ll,hc(e,0),oc(e,s),sc(e,Qe()),n;if(6===t)oc(e,s);else{if(r=e.current.alternate,0===(30&s)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var s=0;s<n.length;s++){var r=n[s],a=r.getSnapshot;r=r.value;try{if(!os(a(),r))return!1}catch(o){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(r)&&(2===(t=xc(e,s))&&(0!==(i=pt(e))&&(s=i,t=ac(e,i))),1===t))throw n=Ll,hc(e,0),oc(e,s),sc(e,Qe()),n;switch(e.finishedWork=r,e.finishedLanes=s,t){case 0:case 1:throw Error(a(345));case 2:case 5:jc(e,Ul,ql);break;case 3:if(oc(e,s),(130023424&s)===s&&10<(t=Bl+500-Qe())){if(0!==ht(e,0))break;if(((r=e.suspendedLanes)&s)!==s){ec(),e.pingedLanes|=e.suspendedLanes&r;break}e.timeoutHandle=sr(jc.bind(null,e,Ul,ql),t);break}jc(e,Ul,ql);break;case 4:if(oc(e,s),(4194240&s)===s)break;for(t=e.eventTimes,r=-1;0<s;){var o=31-it(s);i=1<<o,(o=t[o])>r&&(r=o),s&=~i}if(s=r,10<(s=(120>(s=Qe()-s)?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*kl(s/1960))-s)){e.timeoutHandle=sr(jc.bind(null,e,Ul,ql),s);break}jc(e,Ul,ql);break;default:throw Error(a(329))}}}return sc(e,Qe()),e.callbackNode===n?rc.bind(null,e):null}function ac(e,t){var n=Fl;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=xc(e,t))&&(t=Ul,Ul=n,null!==t&&ic(t)),e}function ic(e){null===Ul?Ul=e:Ul.push.apply(Ul,e)}function oc(e,t){for(t&=~Ml,t&=~Dl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-it(t),s=1<<n;e[n]=-1,t&=~s}}function lc(e){if(0!==(6&Cl))throw Error(a(327));wc();var t=ht(e,0);if(0===(1&t))return sc(e,Qe()),null;var n=xc(e,t);if(0!==e.tag&&2===n){var s=pt(e);0!==s&&(t=s,n=ac(e,s))}if(1===n)throw n=Ll,hc(e,0),oc(e,t),sc(e,Qe()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,jc(e,Ul,ql),sc(e,Qe()),null}function cc(e,t){var n=Cl;Cl|=1;try{return e(t)}finally{0===(Cl=n)&&(Vl=Qe()+500,Fr&&Vr())}}function dc(e){null!==Jl&&0===Jl.tag&&0===(6&Cl)&&wc();var t=Cl;Cl|=1;var n=_l.transition,s=yt;try{if(_l.transition=null,yt=1,e)return e()}finally{yt=s,_l.transition=n,0===(6&(Cl=t))&&Vr()}}function uc(){Il=Rl.current,Sr(Rl)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,rr(n)),null!==Tl)for(n=Tl.return;null!==n;){var s=n;switch(ta(s),s.tag){case 1:null!==(s=s.type.childContextTypes)&&void 0!==s&&Rr();break;case 3:$a(),Sr(Pr),Sr(Cr),ni();break;case 5:Ya(s);break;case 4:$a();break;case 13:case 19:Sr(Xa);break;case 10:_a(s.type._context);break;case 22:case 23:uc()}n=n.return}if(Pl=e,Tl=e=Rc(e.current,null),Al=Il=t,Ol=0,Ll=null,Ml=Dl=zl=0,Ul=Fl=null,null!==Aa){for(t=0;t<Aa.length;t++)if(null!==(s=(n=Aa[t]).interleaved)){n.interleaved=null;var r=s.next,a=n.pending;if(null!==a){var i=a.next;a.next=r,s.next=i}n.pending=s}Aa=null}return e}function mc(e,t){for(;;){var n=Tl;try{if(Ea(),si.current=Qi,ci){for(var s=ii.memoizedState;null!==s;){var r=s.queue;null!==r&&(r.pending=null),s=s.next}ci=!1}if(ai=0,li=oi=ii=null,di=!1,ui=0,El.current=null,null===n||null===n.return){Ol=1,Ll=t,Tl=null;break}e:{var i=e,o=n.return,l=n,c=t;if(t=Al,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var d=c,u=l,h=u.tag;if(0===(1&u.mode)&&(0===h||11===h||15===h)){var m=u.alternate;m?(u.updateQueue=m.updateQueue,u.memoizedState=m.memoizedState,u.lanes=m.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=xo(o);if(null!==p){p.flags&=-257,go(p,o,l,0,t),1&p.mode&&fo(i,d,t),c=d;var f=(t=p).updateQueue;if(null===f){var x=new Set;x.add(c),t.updateQueue=x}else f.add(c);break e}if(0===(1&t)){fo(i,d,t),fc();break e}c=Error(a(426))}else if(ra&&1&l.mode){var g=xo(o);if(null!==g){0===(65536&g.flags)&&(g.flags|=256),go(g,o,l,0,t),pa(lo(c,l));break e}}i=c=lo(c,l),4!==Ol&&(Ol=2),null===Fl?Fl=[i]:Fl.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t,Ba(i,mo(0,c,t));break e;case 1:l=c;var v=i.type,y=i.stateNode;if(0===(128&i.flags)&&("function"===typeof v.getDerivedStateFromError||null!==y&&"function"===typeof y.componentDidCatch&&(null===Gl||!Gl.has(y)))){i.flags|=65536,t&=-t,i.lanes|=t,Ba(i,po(i,l,t));break e}}i=i.return}while(null!==i)}bc(n)}catch(b){t=b,Tl===n&&null!==n&&(Tl=n=n.return);continue}break}}function pc(){var e=Sl.current;return Sl.current=Qi,null===e?Qi:e}function fc(){0!==Ol&&3!==Ol&&2!==Ol||(Ol=4),null===Pl||0===(268435455&zl)&&0===(268435455&Dl)||oc(Pl,Al)}function xc(e,t){var n=Cl;Cl|=2;var s=pc();for(Pl===e&&Al===t||(ql=null,hc(e,t));;)try{gc();break}catch(r){mc(e,r)}if(Ea(),Cl=n,Sl.current=s,null!==Tl)throw Error(a(261));return Pl=null,Al=0,Ol}function gc(){for(;null!==Tl;)yc(Tl)}function vc(){for(;null!==Tl&&!Ze();)yc(Tl)}function yc(e){var t=Nl(e.alternate,e,Il);e.memoizedProps=e.pendingProps,null===t?bc(e):Tl=t,El.current=null}function bc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Ko(n,t,Il)))return void(Tl=n)}else{if(null!==(n=Jo(n,t)))return n.flags&=32767,void(Tl=n);if(null===e)return Ol=6,void(Tl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Tl=t);Tl=t=e}while(null!==t);0===Ol&&(Ol=5)}function jc(e,t,n){var s=yt,r=_l.transition;try{_l.transition=null,yt=1,function(e,t,n,s){do{wc()}while(null!==Jl);if(0!==(6&Cl))throw Error(a(327));n=e.finishedWork;var r=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<n;){var r=31-it(n),a=1<<r;t[r]=0,s[r]=-1,e[r]=-1,n&=~a}}(e,i),e===Pl&&(Tl=Pl=null,Al=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Kl||(Kl=!0,Pc(tt,function(){return wc(),null})),i=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||i){i=_l.transition,_l.transition=null;var o=yt;yt=1;var l=Cl;Cl|=4,El.current=null,function(e,t){if(er=Ht,ms(e=hs())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var s=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(s&&0!==s.rangeCount){n=s.anchorNode;var r=s.anchorOffset,i=s.focusNode;s=s.focusOffset;try{n.nodeType,i.nodeType}catch(j){n=null;break e}var o=0,l=-1,c=-1,d=0,u=0,h=e,m=null;t:for(;;){for(var p;h!==n||0!==r&&3!==h.nodeType||(l=o+r),h!==i||0!==s&&3!==h.nodeType||(c=o+s),3===h.nodeType&&(o+=h.nodeValue.length),null!==(p=h.firstChild);)m=h,h=p;for(;;){if(h===e)break t;if(m===n&&++d===r&&(l=o),m===i&&++u===s&&(c=o),null!==(p=h.nextSibling))break;m=(h=m).parentNode}h=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(tr={focusedElem:e,selectionRange:n},Ht=!1,Yo=t;null!==Yo;)if(e=(t=Yo).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Yo=e;else for(;null!==Yo;){t=Yo;try{var f=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==f){var x=f.memoizedProps,g=f.memoizedState,v=t.stateNode,y=v.getSnapshotBeforeUpdate(t.elementType===t.type?x:to(t.type,x),g);v.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(a(163))}}catch(j){kc(t,t.return,j)}if(null!==(e=t.sibling)){e.return=t.return,Yo=e;break}Yo=t.return}f=tl,tl=!1}(e,n),xl(n,e),ps(tr),Ht=!!er,tr=er=null,e.current=n,vl(n,e,r),$e(),Cl=l,yt=o,_l.transition=i}else e.current=n;if(Kl&&(Kl=!1,Jl=e,Zl=r),i=e.pendingLanes,0===i&&(Gl=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(rt,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),sc(e,Qe()),null!==t)for(s=e.onRecoverableError,n=0;n<t.length;n++)r=t[n],s(r.value,{componentStack:r.stack,digest:r.digest});if(Hl)throw Hl=!1,e=Wl,Wl=null,e;0!==(1&Zl)&&0!==e.tag&&wc(),i=e.pendingLanes,0!==(1&i)?e===Ql?$l++:($l=0,Ql=e):$l=0,Vr()}(e,t,n,s)}finally{_l.transition=r,yt=s}return null}function wc(){if(null!==Jl){var e=bt(Zl),t=_l.transition,n=yt;try{if(_l.transition=null,yt=16>e?16:e,null===Jl)var s=!1;else{if(e=Jl,Jl=null,Zl=0,0!==(6&Cl))throw Error(a(331));var r=Cl;for(Cl|=4,Yo=e.current;null!==Yo;){var i=Yo,o=i.child;if(0!==(16&Yo.flags)){var l=i.deletions;if(null!==l){for(var c=0;c<l.length;c++){var d=l[c];for(Yo=d;null!==Yo;){var u=Yo;switch(u.tag){case 0:case 11:case 15:nl(8,u,i)}var h=u.child;if(null!==h)h.return=u,Yo=h;else for(;null!==Yo;){var m=(u=Yo).sibling,p=u.return;if(al(u),u===d){Yo=null;break}if(null!==m){m.return=p,Yo=m;break}Yo=p}}}var f=i.alternate;if(null!==f){var x=f.child;if(null!==x){f.child=null;do{var g=x.sibling;x.sibling=null,x=g}while(null!==x)}}Yo=i}}if(0!==(2064&i.subtreeFlags)&&null!==o)o.return=i,Yo=o;else e:for(;null!==Yo;){if(0!==(2048&(i=Yo).flags))switch(i.tag){case 0:case 11:case 15:nl(9,i,i.return)}var v=i.sibling;if(null!==v){v.return=i.return,Yo=v;break e}Yo=i.return}}var y=e.current;for(Yo=y;null!==Yo;){var b=(o=Yo).child;if(0!==(2064&o.subtreeFlags)&&null!==b)b.return=o,Yo=b;else e:for(o=y;null!==Yo;){if(0!==(2048&(l=Yo).flags))try{switch(l.tag){case 0:case 11:case 15:sl(9,l)}}catch(w){kc(l,l.return,w)}if(l===o){Yo=null;break e}var j=l.sibling;if(null!==j){j.return=l.return,Yo=j;break e}Yo=l.return}}if(Cl=r,Vr(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(rt,e)}catch(w){}s=!0}return s}finally{yt=n,_l.transition=t}}return!1}function Nc(e,t,n){e=Fa(e,t=mo(0,t=lo(n,t),1),1),t=ec(),null!==e&&(gt(e,1,t),sc(e,t))}function kc(e,t,n){if(3===e.tag)Nc(e,e,n);else for(;null!==t;){if(3===t.tag){Nc(t,e,n);break}if(1===t.tag){var s=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof s.componentDidCatch&&(null===Gl||!Gl.has(s))){t=Fa(t,e=po(t,e=lo(n,e),1),1),e=ec(),null!==t&&(gt(t,1,e),sc(t,e));break}}t=t.return}}function Sc(e,t,n){var s=e.pingCache;null!==s&&s.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Pl===e&&(Al&n)===n&&(4===Ol||3===Ol&&(130023424&Al)===Al&&500>Qe()-Bl?hc(e,0):Ml|=n),sc(e,t)}function Ec(e,t){0===t&&(0===(1&e.mode)?t=1:(t=dt,0===(130023424&(dt<<=1))&&(dt=4194304)));var n=ec();null!==(e=Oa(e,t))&&(gt(e,t,n),sc(e,n))}function _c(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Ec(e,n)}function Cc(e,t){var n=0;switch(e.tag){case 13:var s=e.stateNode,r=e.memoizedState;null!==r&&(n=r.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(a(314))}null!==s&&s.delete(t),Ec(e,n)}function Pc(e,t){return Ke(e,t)}function Tc(e,t,n,s){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ac(e,t,n,s){return new Tc(e,t,n,s)}function Ic(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Rc(e,t){var n=e.alternate;return null===n?((n=Ac(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Oc(e,t,n,s,r,i){var o=2;if(s=e,"function"===typeof e)Ic(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case N:return Lc(n.children,r,i,t);case k:o=8,r|=8;break;case S:return(e=Ac(12,n,t,2|r)).elementType=S,e.lanes=i,e;case P:return(e=Ac(13,n,t,r)).elementType=P,e.lanes=i,e;case T:return(e=Ac(19,n,t,r)).elementType=T,e.lanes=i,e;case R:return zc(n,r,i,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case E:o=10;break e;case _:o=9;break e;case C:o=11;break e;case A:o=14;break e;case I:o=16,s=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Ac(o,n,t,r)).elementType=e,t.type=s,t.lanes=i,t}function Lc(e,t,n,s){return(e=Ac(7,e,s,t)).lanes=n,e}function zc(e,t,n,s){return(e=Ac(22,e,s,t)).elementType=R,e.lanes=n,e.stateNode={isHidden:!1},e}function Dc(e,t,n){return(e=Ac(6,e,null,t)).lanes=n,e}function Mc(e,t,n){return(t=Ac(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Fc(e,t,n,s,r){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=xt(0),this.expirationTimes=xt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=xt(0),this.identifierPrefix=s,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Uc(e,t,n,s,r,a,i,o,l){return e=new Fc(e,t,n,o,l),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Ac(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:s,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},za(a),e}function Bc(e){if(!e)return _r;e:{if(Ve(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ir(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Ir(n))return Lr(e,n,t)}return t}function Vc(e,t,n,s,r,a,i,o,l){return(e=Uc(n,s,!0,e,0,a,0,o,l)).context=Bc(null),n=e.current,(a=Ma(s=ec(),r=tc(n))).callback=void 0!==t&&null!==t?t:null,Fa(n,a,r),e.current.lanes=r,gt(e,r,s),sc(e,s),e}function qc(e,t,n,s){var r=t.current,a=ec(),i=tc(r);return n=Bc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Ma(a,i)).payload={element:e},null!==(s=void 0===s?null:s)&&(t.callback=s),null!==(e=Fa(r,t,i))&&(nc(e,r,i,a),Ua(e,r,i)),i}function Hc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Wc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Gc(e,t){Wc(e,t),(e=e.alternate)&&Wc(e,t)}Nl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Pr.current)yo=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return yo=!1,function(e,t,n){switch(t.tag){case 3:Po(t),ma();break;case 5:Qa(t);break;case 1:Ir(t.type)&&zr(t);break;case 4:Za(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,r=t.memoizedProps.value;Er(wa,s._currentValue),s._currentValue=r;break;case 13:if(null!==(s=t.memoizedState))return null!==s.dehydrated?(Er(Xa,1&Xa.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Do(e,t,n):(Er(Xa,1&Xa.current),null!==(e=Ho(e,t,n))?e.sibling:null);Er(Xa,1&Xa.current);break;case 19:if(s=0!==(n&t.childLanes),0!==(128&e.flags)){if(s)return Vo(e,t,n);t.flags|=128}if(null!==(r=t.memoizedState)&&(r.rendering=null,r.tail=null,r.lastEffect=null),Er(Xa,Xa.current),s)break;return null;case 22:case 23:return t.lanes=0,ko(e,t,n)}return Ho(e,t,n)}(e,t,n);yo=0!==(131072&e.flags)}else yo=!1,ra&&0!==(1048576&t.flags)&&Xr(t,Gr,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;qo(e,t),e=t.pendingProps;var r=Ar(t,Cr.current);Pa(t,n),r=fi(null,t,s,e,r,n);var i=xi();return t.flags|=1,"object"===typeof r&&null!==r&&"function"===typeof r.render&&void 0===r.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ir(s)?(i=!0,zr(t)):i=!1,t.memoizedState=null!==r.state&&void 0!==r.state?r.state:null,za(t),r.updater=so,t.stateNode=r,r._reactInternals=t,oo(t,s,e,n),t=Co(null,t,s,!0,i,n)):(t.tag=0,ra&&i&&ea(t),bo(null,t,r,n),t=t.child),t;case 16:s=t.elementType;e:{switch(qo(e,t),e=t.pendingProps,s=(r=s._init)(s._payload),t.type=s,r=t.tag=function(e){if("function"===typeof e)return Ic(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===A)return 14}return 2}(s),e=to(s,e),r){case 0:t=Eo(null,t,s,e,n);break e;case 1:t=_o(null,t,s,e,n);break e;case 11:t=jo(null,t,s,e,n);break e;case 14:t=wo(null,t,s,to(s.type,e),n);break e}throw Error(a(306,s,""))}return t;case 0:return s=t.type,r=t.pendingProps,Eo(e,t,s,r=t.elementType===s?r:to(s,r),n);case 1:return s=t.type,r=t.pendingProps,_o(e,t,s,r=t.elementType===s?r:to(s,r),n);case 3:e:{if(Po(t),null===e)throw Error(a(387));s=t.pendingProps,r=(i=t.memoizedState).element,Da(e,t),Va(t,s,null,n);var o=t.memoizedState;if(s=o.element,i.isDehydrated){if(i={element:s,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,256&t.flags){t=To(e,t,s,n,r=lo(Error(a(423)),t));break e}if(s!==r){t=To(e,t,s,n,r=lo(Error(a(424)),t));break e}for(sa=cr(t.stateNode.containerInfo.firstChild),na=t,ra=!0,aa=null,n=ja(t,null,s,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(ma(),s===r){t=Ho(e,t,n);break e}bo(e,t,s,n)}t=t.child}return t;case 5:return Qa(t),null===e&&ca(t),s=t.type,r=t.pendingProps,i=null!==e?e.memoizedProps:null,o=r.children,nr(s,r)?o=null:null!==i&&nr(s,i)&&(t.flags|=32),So(e,t),bo(e,t,o,n),t.child;case 6:return null===e&&ca(t),null;case 13:return Do(e,t,n);case 4:return Za(t,t.stateNode.containerInfo),s=t.pendingProps,null===e?t.child=ba(t,null,s,n):bo(e,t,s,n),t.child;case 11:return s=t.type,r=t.pendingProps,jo(e,t,s,r=t.elementType===s?r:to(s,r),n);case 7:return bo(e,t,t.pendingProps,n),t.child;case 8:case 12:return bo(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(s=t.type._context,r=t.pendingProps,i=t.memoizedProps,o=r.value,Er(wa,s._currentValue),s._currentValue=o,null!==i)if(os(i.value,o)){if(i.children===r.children&&!Pr.current){t=Ho(e,t,n);break e}}else for(null!==(i=t.child)&&(i.return=t);null!==i;){var l=i.dependencies;if(null!==l){o=i.child;for(var c=l.firstContext;null!==c;){if(c.context===s){if(1===i.tag){(c=Ma(-1,n&-n)).tag=2;var d=i.updateQueue;if(null!==d){var u=(d=d.shared).pending;null===u?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}i.lanes|=n,null!==(c=i.alternate)&&(c.lanes|=n),Ca(i.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===i.tag)o=i.type===t.type?null:i.child;else if(18===i.tag){if(null===(o=i.return))throw Error(a(341));o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),Ca(o,n,t),o=i.sibling}else o=i.child;if(null!==o)o.return=i;else for(o=i;null!==o;){if(o===t){o=null;break}if(null!==(i=o.sibling)){i.return=o.return,o=i;break}o=o.return}i=o}bo(e,t,r.children,n),t=t.child}return t;case 9:return r=t.type,s=t.pendingProps.children,Pa(t,n),s=s(r=Ta(r)),t.flags|=1,bo(e,t,s,n),t.child;case 14:return r=to(s=t.type,t.pendingProps),wo(e,t,s,r=to(s.type,r),n);case 15:return No(e,t,t.type,t.pendingProps,n);case 17:return s=t.type,r=t.pendingProps,r=t.elementType===s?r:to(s,r),qo(e,t),t.tag=1,Ir(s)?(e=!0,zr(t)):e=!1,Pa(t,n),ao(t,s,r),oo(t,s,r,n),Co(null,t,s,!0,e,n);case 19:return Vo(e,t,n);case 22:return ko(e,t,n)}throw Error(a(156,t.tag))};var Kc="function"===typeof reportError?reportError:function(e){console.error(e)};function Jc(e){this._internalRoot=e}function Zc(e){this._internalRoot=e}function $c(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Qc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Yc(){}function Xc(e,t,n,s,r){var a=n._reactRootContainer;if(a){var i=a;if("function"===typeof r){var o=r;r=function(){var e=Hc(i);o.call(e)}}qc(t,i,e,r)}else i=function(e,t,n,s,r){if(r){if("function"===typeof s){var a=s;s=function(){var e=Hc(i);a.call(e)}}var i=Vc(t,s,e,0,null,!1,0,"",Yc);return e._reactRootContainer=i,e[pr]=i.current,Vs(8===e.nodeType?e.parentNode:e),dc(),i}for(;r=e.lastChild;)e.removeChild(r);if("function"===typeof s){var o=s;s=function(){var e=Hc(l);o.call(e)}}var l=Uc(e,0,!1,null,0,!1,0,"",Yc);return e._reactRootContainer=l,e[pr]=l.current,Vs(8===e.nodeType?e.parentNode:e),dc(function(){qc(t,l,n,s)}),l}(n,t,e,r,s);return Hc(i)}Zc.prototype.render=Jc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));qc(e,t,null,null)},Zc.prototype.unmount=Jc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;dc(function(){qc(null,e,null,null)}),t[pr]=null}},Zc.prototype.unstable_scheduleHydration=function(e){if(e){var t=kt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Rt.length&&0!==t&&t<Rt[n].priority;n++);Rt.splice(n,0,e),0===n&&Dt(e)}},jt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ut(t.pendingLanes);0!==n&&(vt(t,1|n),sc(t,Qe()),0===(6&Cl)&&(Vl=Qe()+500,Vr()))}break;case 13:dc(function(){var t=Oa(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}}),Gc(e,1)}},wt=function(e){if(13===e.tag){var t=Oa(e,134217728);if(null!==t)nc(t,e,134217728,ec());Gc(e,134217728)}},Nt=function(e){if(13===e.tag){var t=tc(e),n=Oa(e,t);if(null!==n)nc(n,e,t,ec());Gc(e,t)}},kt=function(){return yt},St=function(e,t){var n=yt;try{return yt=e,t()}finally{yt=n}},we=function(e,t,n){switch(t){case"input":if(Y(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var s=n[t];if(s!==e&&s.form===e.form){var r=jr(s);if(!r)throw Error(a(90));K(s),Y(s,r)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=cc,Pe=dc;var ed={usingClientEntryPoint:!1,Events:[yr,br,jr,Ee,_e,cc]},td={findFiberByHostInstance:vr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nd={bundleType:td.bundleType,version:td.version,rendererPackageName:td.rendererPackageName,rendererConfig:td.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=We(e))?null:e.stateNode},findFiberByHostInstance:td.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var sd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sd.isDisabled&&sd.supportsFiber)try{rt=sd.inject(nd),at=sd}catch(de){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ed,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!$c(t))throw Error(a(200));return function(e,t,n){var s=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:w,key:null==s?null:""+s,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!$c(e))throw Error(a(299));var n=!1,s="",r=Kc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(s=t.identifierPrefix),void 0!==t.onRecoverableError&&(r=t.onRecoverableError)),t=Uc(e,1,!1,null,0,n,0,s,r),e[pr]=t.current,Vs(8===e.nodeType?e.parentNode:e),new Jc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=We(t))?null:e.stateNode},t.flushSync=function(e){return dc(e)},t.hydrate=function(e,t,n){if(!Qc(t))throw Error(a(200));return Xc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!$c(e))throw Error(a(405));var s=null!=n&&n.hydratedSources||null,r=!1,i="",o=Kc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(i=n.identifierPrefix),void 0!==n.onRecoverableError&&(o=n.onRecoverableError)),t=Vc(t,null,e,1,null!=n?n:null,r,0,i,o),e[pr]=t.current,Vs(e),s)for(e=0;e<s.length;e++)r=(r=(n=s[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,r]:t.mutableSourceEagerHydrationData.push(n,r);return new Zc(t)},t.render=function(e,t,n){if(!Qc(t))throw Error(a(200));return Xc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Qc(e))throw Error(a(40));return!!e._reactRootContainer&&(dc(function(){Xc(null,null,e,!1,function(){e._reactRootContainer=null,e[pr]=null})}),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,s){if(!Qc(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return Xc(e,t,n,!1,s)},t.version="18.3.1-next-f1338f8080-20240426"},736:function(e,t,n){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=s(n(374));class a extends r.default{eq(e,t){return this.url.searchParams.append(e,"eq.".concat(t)),this}neq(e,t){return this.url.searchParams.append(e,"neq.".concat(t)),this}gt(e,t){return this.url.searchParams.append(e,"gt.".concat(t)),this}gte(e,t){return this.url.searchParams.append(e,"gte.".concat(t)),this}lt(e,t){return this.url.searchParams.append(e,"lt.".concat(t)),this}lte(e,t){return this.url.searchParams.append(e,"lte.".concat(t)),this}like(e,t){return this.url.searchParams.append(e,"like.".concat(t)),this}likeAllOf(e,t){return this.url.searchParams.append(e,"like(all).{".concat(t.join(","),"}")),this}likeAnyOf(e,t){return this.url.searchParams.append(e,"like(any).{".concat(t.join(","),"}")),this}ilike(e,t){return this.url.searchParams.append(e,"ilike.".concat(t)),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,"ilike(all).{".concat(t.join(","),"}")),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,"ilike(any).{".concat(t.join(","),"}")),this}is(e,t){return this.url.searchParams.append(e,"is.".concat(t)),this}in(e,t){const n=Array.from(new Set(t)).map(e=>"string"===typeof e&&new RegExp("[,()]").test(e)?'"'.concat(e,'"'):"".concat(e)).join(",");return this.url.searchParams.append(e,"in.(".concat(n,")")),this}contains(e,t){return"string"===typeof t?this.url.searchParams.append(e,"cs.".concat(t)):Array.isArray(t)?this.url.searchParams.append(e,"cs.{".concat(t.join(","),"}")):this.url.searchParams.append(e,"cs.".concat(JSON.stringify(t))),this}containedBy(e,t){return"string"===typeof t?this.url.searchParams.append(e,"cd.".concat(t)):Array.isArray(t)?this.url.searchParams.append(e,"cd.{".concat(t.join(","),"}")):this.url.searchParams.append(e,"cd.".concat(JSON.stringify(t))),this}rangeGt(e,t){return this.url.searchParams.append(e,"sr.".concat(t)),this}rangeGte(e,t){return this.url.searchParams.append(e,"nxl.".concat(t)),this}rangeLt(e,t){return this.url.searchParams.append(e,"sl.".concat(t)),this}rangeLte(e,t){return this.url.searchParams.append(e,"nxr.".concat(t)),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,"adj.".concat(t)),this}overlaps(e,t){return"string"===typeof t?this.url.searchParams.append(e,"ov.".concat(t)):this.url.searchParams.append(e,"ov.{".concat(t.join(","),"}")),this}textSearch(e,t){let{config:n,type:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r="";"plain"===s?r="pl":"phrase"===s?r="ph":"websearch"===s&&(r="w");const a=void 0===n?"":"(".concat(n,")");return this.url.searchParams.append(e,"".concat(r,"fts").concat(a,".").concat(t)),this}match(e){return Object.entries(e).forEach(e=>{let[t,n]=e;this.url.searchParams.append(t,"eq.".concat(n))}),this}not(e,t,n){return this.url.searchParams.append(e,"not.".concat(t,".").concat(n)),this}or(e){let{foreignTable:t,referencedTable:n=t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=n?"".concat(n,".or"):"or";return this.url.searchParams.append(s,"(".concat(e,")")),this}filter(e,t,n){return this.url.searchParams.append(e,"".concat(t,".").concat(n)),this}}t.default=a},829:function(e,t,n){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=s(n(736));t.default=class{constructor(e,t){let{headers:n={},schema:s,fetch:r}=t;this.url=e,this.headers=new Headers(n),this.schema=s,this.fetch=r}select(e){let{head:t=!1,count:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=t?"HEAD":"GET";let a=!1;const i=(null!==e&&void 0!==e?e:"*").split("").map(e=>/\s/.test(e)&&!a?"":('"'===e&&(a=!a),e)).join("");return this.url.searchParams.set("select",i),n&&this.headers.append("Prefer","count=".concat(n)),new r.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e){let{count:t,defaultToNull:n=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var s;if(t&&this.headers.append("Prefer","count=".concat(t)),n||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){const e=[...new Set(t)].map(e=>'"'.concat(e,'"'));this.url.searchParams.set("columns",e.join(","))}}return new r.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!==(s=this.fetch)&&void 0!==s?s:fetch})}upsert(e){let{onConflict:t,ignoreDuplicates:n=!1,count:s,defaultToNull:a=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var i;if(this.headers.append("Prefer","resolution=".concat(n?"ignore":"merge","-duplicates")),void 0!==t&&this.url.searchParams.set("on_conflict",t),s&&this.headers.append("Prefer","count=".concat(s)),a||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){const e=[...new Set(t)].map(e=>'"'.concat(e,'"'));this.url.searchParams.set("columns",e.join(","))}}return new r.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!==(i=this.fetch)&&void 0!==i?i:fetch})}update(e){let{count:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n;return t&&this.headers.append("Prefer","count=".concat(t)),new r.default({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!==(n=this.fetch)&&void 0!==n?n:fetch})}delete(){let{count:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t;return e&&this.headers.append("Prefer","count=".concat(e)),new r.default({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:null!==(t=this.fetch)&&void 0!==t?t:fetch})}}},853:(e,t,n)=>{"use strict";e.exports=n(234)},900:(e,t)=>{t.read=function(e,t,n,s,r){var a,i,o=8*r-s-1,l=(1<<o)-1,c=l>>1,d=-7,u=n?r-1:0,h=n?-1:1,m=e[t+u];for(u+=h,a=m&(1<<-d)-1,m>>=-d,d+=o;d>0;a=256*a+e[t+u],u+=h,d-=8);for(i=a&(1<<-d)-1,a>>=-d,d+=s;d>0;i=256*i+e[t+u],u+=h,d-=8);if(0===a)a=1-c;else{if(a===l)return i?NaN:1/0*(m?-1:1);i+=Math.pow(2,s),a-=c}return(m?-1:1)*i*Math.pow(2,a-s)},t.write=function(e,t,n,s,r,a){var i,o,l,c=8*a-r-1,d=(1<<c)-1,u=d>>1,h=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,m=s?0:a-1,p=s?1:-1,f=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(o=isNaN(t)?1:0,i=d):(i=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-i))<1&&(i--,l*=2),(t+=i+u>=1?h/l:h*Math.pow(2,1-u))*l>=2&&(i++,l/=2),i+u>=d?(o=0,i=d):i+u>=1?(o=(t*l-1)*Math.pow(2,r),i+=u):(o=t*Math.pow(2,u-1)*Math.pow(2,r),i=0));r>=8;e[n+m]=255&o,m+=p,o/=256,r-=8);for(i=i<<r|o,c+=r;c>0;e[n+m]=255&i,m+=p,i/=256,c-=8);e[n+m-p]|=128*f}},950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)},980:function(e,t,n){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.PostgrestError=t.PostgrestBuilder=t.PostgrestTransformBuilder=t.PostgrestFilterBuilder=t.PostgrestQueryBuilder=t.PostgrestClient=void 0;const r=s(n(210));t.PostgrestClient=r.default;const a=s(n(829));t.PostgrestQueryBuilder=a.default;const i=s(n(736));t.PostgrestFilterBuilder=i.default;const o=s(n(374));t.PostgrestTransformBuilder=o.default;const l=s(n(286));t.PostgrestBuilder=l.default;const c=s(n(611));t.PostgrestError=c.default,t.default={PostgrestClient:r.default,PostgrestQueryBuilder:a.default,PostgrestFilterBuilder:i.default,PostgrestTransformBuilder:o.default,PostgrestBuilder:l.default,PostgrestError:c.default}}},t={};function n(s){var r=t[s];if(void 0!==r)return r.exports;var a=t[s]={exports:{}};return e[s].call(a.exports,a,a.exports,n),a.exports}n.m=e,(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(s,r){if(1&r&&(s=this(s)),8&r)return s;if("object"===typeof s&&s){if(4&r&&s.__esModule)return s;if(16&r&&"function"===typeof s.then)return s}var a=Object.create(null);n.r(a);var i={};e=e||[null,t({}),t([]),t(t)];for(var o=2&r&&s;("object"==typeof o||"function"==typeof o)&&!~e.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach(e=>i[e]=()=>s[e]);return i.default=()=>s,n.d(a,i),a}})(),n.d=(e,t)=>{for(var s in t)n.o(t,s)&&!n.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce((t,s)=>(n.f[s](e,t),t),[])),n.u=e=>"static/js/"+e+".79000009.chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="ab-campus-finance-frontend:";n.l=(s,r,a,i)=>{if(e[s])e[s].push(r);else{var o,l;if(void 0!==a)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var u=c[d];if(u.getAttribute("src")==s||u.getAttribute("data-webpack")==t+a){o=u;break}}o||(l=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,n.nc&&o.setAttribute("nonce",n.nc),o.setAttribute("data-webpack",t+a),o.src=s),e[s]=[r];var h=(t,n)=>{o.onerror=o.onload=null,clearTimeout(m);var r=e[s];if(delete e[s],o.parentNode&&o.parentNode.removeChild(o),r&&r.forEach(e=>e(n)),t)return t(n)},m=setTimeout(h.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=h.bind(null,o.onerror),o.onload=h.bind(null,o.onload),l&&document.head.appendChild(o)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/",(()=>{var e={792:0};n.f.j=(t,s)=>{var r=n.o(e,t)?e[t]:void 0;if(0!==r)if(r)s.push(r[2]);else{var a=new Promise((n,s)=>r=e[t]=[n,s]);s.push(r[2]=a);var i=n.p+n.u(t),o=new Error;n.l(i,s=>{if(n.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var a=s&&("load"===s.type?"missing":s.type),i=s&&s.target&&s.target.src;o.message="Loading chunk "+t+" failed.\n("+a+": "+i+")",o.name="ChunkLoadError",o.type=a,o.request=i,r[1](o)}},"chunk-"+t,t)}};var t=(t,s)=>{var r,a,i=s[0],o=s[1],l=s[2],c=0;if(i.some(t=>0!==e[t])){for(r in o)n.o(o,r)&&(n.m[r]=o[r]);if(l)l(n)}for(t&&t(s);c<i.length;c++)a=i[c],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0},s=self.webpackChunkab_campus_finance_frontend=self.webpackChunkab_campus_finance_frontend||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))})(),(()=>{"use strict";var e,t=n(43),s=n.t(t,2),r=n(391);function a(){return a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},a.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(e||(e={}));const i="popstate";function o(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function l(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(bt){}}}function c(e,t){return{usr:e.state,key:e.key,idx:t}}function d(e,t,n,s){return void 0===n&&(n=null),a({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?h(t):t,{state:n,key:t&&t.key||s||Math.random().toString(36).substr(2,8)})}function u(e){let{pathname:t="/",search:n="",hash:s=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),s&&"#"!==s&&(t+="#"===s.charAt(0)?s:"#"+s),t}function h(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let s=e.indexOf("?");s>=0&&(t.search=e.substr(s),e=e.substr(0,s)),e&&(t.pathname=e)}return t}function m(t,n,s,r){void 0===r&&(r={});let{window:l=document.defaultView,v5Compat:h=!1}=r,m=l.history,p=e.Pop,f=null,x=g();function g(){return(m.state||{idx:null}).idx}function v(){p=e.Pop;let t=g(),n=null==t?null:t-x;x=t,f&&f({action:p,location:b.location,delta:n})}function y(e){let t="null"!==l.location.origin?l.location.origin:l.location.href,n="string"===typeof e?e:u(e);return n=n.replace(/ $/,"%20"),o(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==x&&(x=0,m.replaceState(a({},m.state,{idx:x}),""));let b={get action(){return p},get location(){return t(l,m)},listen(e){if(f)throw new Error("A history only accepts one active listener");return l.addEventListener(i,v),f=e,()=>{l.removeEventListener(i,v),f=null}},createHref:e=>n(l,e),createURL:y,encodeLocation(e){let t=y(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(t,n){p=e.Push;let r=d(b.location,t,n);s&&s(r,t),x=g()+1;let a=c(r,x),i=b.createHref(r);try{m.pushState(a,"",i)}catch(o){if(o instanceof DOMException&&"DataCloneError"===o.name)throw o;l.location.assign(i)}h&&f&&f({action:p,location:b.location,delta:1})},replace:function(t,n){p=e.Replace;let r=d(b.location,t,n);s&&s(r,t),x=g();let a=c(r,x),i=b.createHref(r);m.replaceState(a,"",i),h&&f&&f({action:p,location:b.location,delta:0})},go:e=>m.go(e)};return b}var p;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(p||(p={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function f(e,t,n){return void 0===n&&(n="/"),x(e,t,n,!1)}function x(e,t,n,s){let r=T(("string"===typeof t?h(t):t).pathname||"/",n);if(null==r)return null;let a=g(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n]);return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(a);let i=null;for(let o=0;null==i&&o<a.length;++o){let e=P(r);i=_(a[o],e,s)}return i}function g(e,t,n,s){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===s&&(s="");let r=(e,r,a)=>{let i={relativePath:void 0===a?e.path||"":a,caseSensitive:!0===e.caseSensitive,childrenIndex:r,route:e};i.relativePath.startsWith("/")&&(o(i.relativePath.startsWith(s),'Absolute route path "'+i.relativePath+'" nested under path "'+s+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),i.relativePath=i.relativePath.slice(s.length));let l=L([s,i.relativePath]),c=n.concat(i);e.children&&e.children.length>0&&(o(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+l+'".'),g(e.children,t,c,l)),(null!=e.path||e.index)&&t.push({path:l,score:E(l,e.index),routesMeta:c})};return e.forEach((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let s of v(e.path))r(e,t,s);else r(e,t)}),t}function v(e){let t=e.split("/");if(0===t.length)return[];let[n,...s]=t,r=n.endsWith("?"),a=n.replace(/\?$/,"");if(0===s.length)return r?[a,""]:[a];let i=v(s.join("/")),o=[];return o.push(...i.map(e=>""===e?a:[a,e].join("/"))),r&&o.push(...i),o.map(t=>e.startsWith("/")&&""===t?"/":t)}const y=/^:[\w-]+$/,b=3,j=2,w=1,N=10,k=-2,S=e=>"*"===e;function E(e,t){let n=e.split("/"),s=n.length;return n.some(S)&&(s+=k),t&&(s+=j),n.filter(e=>!S(e)).reduce((e,t)=>e+(y.test(t)?b:""===t?w:N),s)}function _(e,t,n){void 0===n&&(n=!1);let{routesMeta:s}=e,r={},a="/",i=[];for(let o=0;o<s.length;++o){let e=s[o],l=o===s.length-1,c="/"===a?t:t.slice(a.length)||"/",d=C({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),u=e.route;if(!d&&l&&n&&!s[s.length-1].route.index&&(d=C({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!d)return null;Object.assign(r,d.params),i.push({params:r,pathname:L([a,d.pathname]),pathnameBase:z(L([a,d.pathnameBase])),route:u}),"/"!==d.pathnameBase&&(a=L([a,d.pathnameBase]))}return i}function C(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,s]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);l("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let s=[],r="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,n)=>(s.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)"));e.endsWith("*")?(s.push({paramName:"*"}),r+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":""!==e&&"/"!==e&&(r+="(?:(?=\\/|$))");let a=new RegExp(r,t?void 0:"i");return[a,s]}(e.path,e.caseSensitive,e.end),r=t.match(n);if(!r)return null;let a=r[0],i=a.replace(/(.)\/+$/,"$1"),o=r.slice(1),c=s.reduce((e,t,n)=>{let{paramName:s,isOptional:r}=t;if("*"===s){let e=o[n]||"";i=a.slice(0,a.length-e.length).replace(/(.)\/+$/,"$1")}const l=o[n];return e[s]=r&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{});return{params:c,pathname:a,pathnameBase:i,pattern:e}}function P(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return l(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function T(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,s=e.charAt(n);return s&&"/"!==s?null:e.slice(n)||"/"}function A(e,t,n,s){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(s)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function I(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function R(e,t){let n=I(e);return t?n.map((e,t)=>t===n.length-1?e.pathname:e.pathnameBase):n.map(e=>e.pathnameBase)}function O(e,t,n,s){let r;void 0===s&&(s=!1),"string"===typeof e?r=h(e):(r=a({},e),o(!r.pathname||!r.pathname.includes("?"),A("?","pathname","search",r)),o(!r.pathname||!r.pathname.includes("#"),A("#","pathname","hash",r)),o(!r.search||!r.search.includes("#"),A("#","search","hash",r)));let i,l=""===e||""===r.pathname,c=l?"/":r.pathname;if(null==c)i=n;else{let e=t.length-1;if(!s&&c.startsWith("..")){let t=c.split("/");for(;".."===t[0];)t.shift(),e-=1;r.pathname=t.join("/")}i=e>=0?t[e]:"/"}let d=function(e,t){void 0===t&&(t="/");let{pathname:n,search:s="",hash:r=""}="string"===typeof e?h(e):e,a=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:a,search:D(s),hash:M(r)}}(r,i),u=c&&"/"!==c&&c.endsWith("/"),m=(l||"."===c)&&n.endsWith("/");return d.pathname.endsWith("/")||!u&&!m||(d.pathname+="/"),d}const L=e=>e.join("/").replace(/\/\/+/g,"/"),z=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),D=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",M=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function F(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const U=["post","put","patch","delete"],B=(new Set(U),["get",...U]);new Set(B),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function V(){return V=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},V.apply(this,arguments)}const q=t.createContext(null);const H=t.createContext(null);const W=t.createContext(null);const G=t.createContext(null);const K=t.createContext({outlet:null,matches:[],isDataRoute:!1});const J=t.createContext(null);function Z(){return null!=t.useContext(G)}function $(){return Z()||o(!1),t.useContext(G).location}function Q(e){t.useContext(W).static||t.useLayoutEffect(e)}function Y(){let{isDataRoute:e}=t.useContext(K);return e?function(){let{router:e}=ce(oe.UseNavigateStable),n=ue(le.UseNavigateStable),s=t.useRef(!1);Q(()=>{s.current=!0});let r=t.useCallback(function(t,r){void 0===r&&(r={}),s.current&&("number"===typeof t?e.navigate(t):e.navigate(t,V({fromRouteId:n},r)))},[e,n]);return r}():function(){Z()||o(!1);let e=t.useContext(q),{basename:n,future:s,navigator:r}=t.useContext(W),{matches:a}=t.useContext(K),{pathname:i}=$(),l=JSON.stringify(R(a,s.v7_relativeSplatPath)),c=t.useRef(!1);return Q(()=>{c.current=!0}),t.useCallback(function(t,s){if(void 0===s&&(s={}),!c.current)return;if("number"===typeof t)return void r.go(t);let a=O(t,JSON.parse(l),i,"path"===s.relative);null==e&&"/"!==n&&(a.pathname="/"===a.pathname?n:L([n,a.pathname])),(s.replace?r.replace:r.push)(a,s.state,s)},[n,r,l,i,e])}()}function X(){let{matches:e}=t.useContext(K),n=e[e.length-1];return n?n.params:{}}function ee(e,n){let{relative:s}=void 0===n?{}:n,{future:r}=t.useContext(W),{matches:a}=t.useContext(K),{pathname:i}=$(),o=JSON.stringify(R(a,r.v7_relativeSplatPath));return t.useMemo(()=>O(e,JSON.parse(o),i,"path"===s),[e,o,i,s])}function te(n,s,r,a){Z()||o(!1);let{navigator:i}=t.useContext(W),{matches:l}=t.useContext(K),c=l[l.length-1],d=c?c.params:{},u=(c&&c.pathname,c?c.pathnameBase:"/");c&&c.route;let m,p=$();if(s){var x;let e="string"===typeof s?h(s):s;"/"===u||(null==(x=e.pathname)?void 0:x.startsWith(u))||o(!1),m=e}else m=p;let g=m.pathname||"/",v=g;if("/"!==u){let e=u.replace(/^\//,"").split("/");v="/"+g.replace(/^\//,"").split("/").slice(e.length).join("/")}let y=f(n,{pathname:v});let b=ie(y&&y.map(e=>Object.assign({},e,{params:Object.assign({},d,e.params),pathname:L([u,i.encodeLocation?i.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?u:L([u,i.encodeLocation?i.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),l,r,a);return s&&b?t.createElement(G.Provider,{value:{location:V({pathname:"/",search:"",hash:"",state:null,key:"default"},m),navigationType:e.Pop}},b):b}function ne(){let e=function(){var e;let n=t.useContext(J),s=de(le.UseRouteError),r=ue(le.UseRouteError);if(void 0!==n)return n;return null==(e=s.errors)?void 0:e[r]}(),n=F(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),s=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:r};return t.createElement(t.Fragment,null,t.createElement("h2",null,"Unexpected Application Error!"),t.createElement("h3",{style:{fontStyle:"italic"}},n),s?t.createElement("pre",{style:a},s):null,null)}const se=t.createElement(ne,null);class re extends t.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?t.createElement(K.Provider,{value:this.props.routeContext},t.createElement(J.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ae(e){let{routeContext:n,match:s,children:r}=e,a=t.useContext(q);return a&&a.static&&a.staticContext&&(s.route.errorElement||s.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=s.route.id),t.createElement(K.Provider,{value:n},r)}function ie(e,n,s,r){var a;if(void 0===n&&(n=[]),void 0===s&&(s=null),void 0===r&&(r=null),null==e){var i;if(!s)return null;if(s.errors)e=s.matches;else{if(!(null!=(i=r)&&i.v7_partialHydration&&0===n.length&&!s.initialized&&s.matches.length>0))return null;e=s.matches}}let l=e,c=null==(a=s)?void 0:a.errors;if(null!=c){let e=l.findIndex(e=>e.route.id&&void 0!==(null==c?void 0:c[e.route.id]));e>=0||o(!1),l=l.slice(0,Math.min(l.length,e+1))}let d=!1,u=-1;if(s&&r&&r.v7_partialHydration)for(let t=0;t<l.length;t++){let e=l[t];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(u=t),e.route.id){let{loaderData:t,errors:n}=s,r=e.route.loader&&void 0===t[e.route.id]&&(!n||void 0===n[e.route.id]);if(e.route.lazy||r){d=!0,l=u>=0?l.slice(0,u+1):[l[0]];break}}}return l.reduceRight((e,r,a)=>{let i,o=!1,h=null,m=null;var p;s&&(i=c&&r.route.id?c[r.route.id]:void 0,h=r.route.errorElement||se,d&&(u<0&&0===a?(p="route-fallback",!1||he[p]||(he[p]=!0),o=!0,m=null):u===a&&(o=!0,m=r.route.hydrateFallbackElement||null)));let f=n.concat(l.slice(0,a+1)),x=()=>{let n;return n=i?h:o?m:r.route.Component?t.createElement(r.route.Component,null):r.route.element?r.route.element:e,t.createElement(ae,{match:r,routeContext:{outlet:e,matches:f,isDataRoute:null!=s},children:n})};return s&&(r.route.ErrorBoundary||r.route.errorElement||0===a)?t.createElement(re,{location:s.location,revalidation:s.revalidation,component:h,error:i,children:x(),routeContext:{outlet:null,matches:f,isDataRoute:!0}}):x()},null)}var oe=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(oe||{}),le=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(le||{});function ce(e){let n=t.useContext(q);return n||o(!1),n}function de(e){let n=t.useContext(H);return n||o(!1),n}function ue(e){let n=function(){let e=t.useContext(K);return e||o(!1),e}(),s=n.matches[n.matches.length-1];return s.route.id||o(!1),s.route.id}const he={};function me(e,t){null==e||e.v7_startTransition,void 0===(null==e?void 0:e.v7_relativeSplatPath)&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}s.startTransition;function pe(e){let{to:n,replace:s,state:r,relative:a}=e;Z()||o(!1);let{future:i,static:l}=t.useContext(W),{matches:c}=t.useContext(K),{pathname:d}=$(),u=Y(),h=O(n,R(c,i.v7_relativeSplatPath),d,"path"===a),m=JSON.stringify(h);return t.useEffect(()=>u(JSON.parse(m),{replace:s,state:r,relative:a}),[u,m,a,s,r]),null}function fe(e){o(!1)}function xe(n){let{basename:s="/",children:r=null,location:a,navigationType:i=e.Pop,navigator:l,static:c=!1,future:d}=n;Z()&&o(!1);let u=s.replace(/^\/*/,"/"),m=t.useMemo(()=>({basename:u,navigator:l,static:c,future:V({v7_relativeSplatPath:!1},d)}),[u,d,l,c]);"string"===typeof a&&(a=h(a));let{pathname:p="/",search:f="",hash:x="",state:g=null,key:v="default"}=a,y=t.useMemo(()=>{let e=T(p,u);return null==e?null:{location:{pathname:e,search:f,hash:x,state:g,key:v},navigationType:i}},[u,p,f,x,g,v,i]);return null==y?null:t.createElement(W.Provider,{value:m},t.createElement(G.Provider,{children:r,value:y}))}function ge(e){let{children:t,location:n}=e;return te(ve(t),n)}new Promise(()=>{});t.Component;function ve(e,n){void 0===n&&(n=[]);let s=[];return t.Children.forEach(e,(e,r)=>{if(!t.isValidElement(e))return;let a=[...n,r];if(e.type===t.Fragment)return void s.push.apply(s,ve(e.props.children,a));e.type!==fe&&o(!1),e.props.index&&e.props.children&&o(!1);let i={id:e.props.id||a.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(i.children=ve(e.props.children,a)),s.push(i)}),s}var ye=n(950),be=n.t(ye,2);function je(){return je=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},je.apply(this,arguments)}function we(e,t){if(null==e)return{};var n,s,r={},a=Object.keys(e);for(s=0;s<a.length;s++)n=a[s],t.indexOf(n)>=0||(r[n]=e[n]);return r}function Ne(e){return void 0===e&&(e=""),new URLSearchParams("string"===typeof e||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let s=e[n];return t.concat(Array.isArray(s)?s.map(e=>[n,e]):[[n,s]])},[]))}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const ke=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"];try{window.__reactRouterVersion="6"}catch(bt){}new Map;const Se=s.startTransition;be.flushSync,s.useId;function Ee(e){let{basename:n,children:s,future:r,window:a}=e,i=t.useRef();var o;null==i.current&&(i.current=(void 0===(o={window:a,v5Compat:!0})&&(o={}),m(function(e,t){let{pathname:n,search:s,hash:r}=e.location;return d("",{pathname:n,search:s,hash:r},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"===typeof t?t:u(t)},null,o)));let l=i.current,[c,h]=t.useState({action:l.action,location:l.location}),{v7_startTransition:p}=r||{},f=t.useCallback(e=>{p&&Se?Se(()=>h(e)):h(e)},[h,p]);return t.useLayoutEffect(()=>l.listen(f),[l,f]),t.useEffect(()=>me(r),[r]),t.createElement(xe,{basename:n,children:s,location:c.location,navigationType:c.action,navigator:l,future:r})}const _e="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,Ce=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Pe=t.forwardRef(function(e,n){let s,{onClick:r,relative:a,reloadDocument:i,replace:l,state:c,target:d,to:h,preventScrollReset:m,viewTransition:p}=e,f=we(e,ke),{basename:x}=t.useContext(W),g=!1;if("string"===typeof h&&Ce.test(h)&&(s=h,_e))try{let e=new URL(window.location.href),t=h.startsWith("//")?new URL(e.protocol+h):new URL(h),n=T(t.pathname,x);t.origin===e.origin&&null!=n?h=n+t.search+t.hash:g=!0}catch(bt){}let v=function(e,n){let{relative:s}=void 0===n?{}:n;Z()||o(!1);let{basename:r,navigator:a}=t.useContext(W),{hash:i,pathname:l,search:c}=ee(e,{relative:s}),d=l;return"/"!==r&&(d="/"===l?r:L([r,l])),a.createHref({pathname:d,search:c,hash:i})}(h,{relative:a}),y=function(e,n){let{target:s,replace:r,state:a,preventScrollReset:i,relative:o,viewTransition:l}=void 0===n?{}:n,c=Y(),d=$(),h=ee(e,{relative:o});return t.useCallback(t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,s)){t.preventDefault();let n=void 0!==r?r:u(d)===u(h);c(e,{replace:n,state:a,preventScrollReset:i,relative:o,viewTransition:l})}},[d,c,h,r,a,s,e,i,o,l])}(h,{replace:l,state:c,target:d,preventScrollReset:m,relative:a,viewTransition:p});return t.createElement("a",je({},f,{href:s||v,onClick:g||i?r:function(e){r&&r(e),e.defaultPrevented||y(e)},ref:n,target:d}))});var Te,Ae;function Ie(e){let n=t.useRef(Ne(e)),s=t.useRef(!1),r=$(),a=t.useMemo(()=>function(e,t){let n=Ne(e);return t&&t.forEach((e,s)=>{n.has(s)||t.getAll(s).forEach(e=>{n.append(s,e)})}),n}(r.search,s.current?null:n.current),[r.search]),i=Y(),o=t.useCallback((e,t)=>{const n=Ne("function"===typeof e?e(a):e);s.current=!0,i("?"+n,t)},[i,a]);return[a,o]}(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Te||(Te={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Ae||(Ae={}));function Re(e){return Re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Re(e)}function Oe(e){var t=function(e,t){if("object"!=Re(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var s=n.call(e,t||"default");if("object"!=Re(s))return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Re(t)?t:t+""}function Le(e,t,n){return(t=Oe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ze(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,s)}return n}function De(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ze(Object(n),!0).forEach(function(t){Le(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ze(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Me=n(197);const Fe="https://ab-pret-back.onrender.com";console.log("[CONFIG] Backend URL:",Fe),console.log("[CONFIG] Environment:","production");const Ue=e=>{const t=e.message||e,n=e.details||"",s=e.hint||"",r="".concat(t," ").concat(n," ").concat(s).toLowerCase();return r.includes("phone_number")&&(r.includes("duplicate")||r.includes("unique"))?"Ce num\xe9ro de t\xe9l\xe9phone est d\xe9j\xe0 utilis\xe9 pour cr\xe9er un compte. Veuillez utiliser un autre num\xe9ro de t\xe9l\xe9phone.":r.includes("email")&&(r.includes("duplicate")||r.includes("unique"))?"Cette adresse email est d\xe9j\xe0 utilis\xe9e. Veuillez utiliser une autre adresse email.":r.includes("password")?r.includes("weak")?"Le mot de passe est trop faible. Il doit contenir au moins 6 caract\xe8res.":"Erreur avec le mot de passe. Veuillez v\xe9rifier votre saisie.":r.includes("invalid")?r.includes("email")?"Adresse email invalide. Veuillez v\xe9rifier votre saisie.":r.includes("phone")?"Num\xe9ro de t\xe9l\xe9phone invalide. Veuillez v\xe9rifier votre saisie.":"Donn\xe9es invalides. Veuillez v\xe9rifier vos informations.":r.includes("network")||r.includes("fetch")?"Erreur de connexion. Veuillez v\xe9rifier votre connexion internet et r\xe9essayer.":r.includes("server")||r.includes("500")?"Erreur du serveur. Veuillez r\xe9essayer dans quelques minutes.":r.includes("quota")||r.includes("limit")?"Limite de tentatives atteinte. Veuillez r\xe9essayer plus tard.":r.includes("already registered")?r.includes("phone")?"Un compte existe d\xe9j\xe0 avec ce num\xe9ro de t\xe9l\xe9phone.":r.includes("email")?"Un compte existe d\xe9j\xe0 avec cette adresse email.":"Un compte existe d\xe9j\xe0 avec ces informations.":r.includes("user already registered")?r.includes("phone")?"Un utilisateur existe d\xe9j\xe0 avec ce num\xe9ro de t\xe9l\xe9phone.":r.includes("email")?"Un utilisateur existe d\xe9j\xe0 avec cette adresse email.":"Un utilisateur avec ces informations existe d\xe9j\xe0.":t},Be=async()=>{try{const{data:e,error:t}=await Me.supabase.from("users").select("*").order("created_at",{ascending:!1});if(t)throw t;const{data:n,error:s}=await Me.supabase.from("loans").select("id, user_id, status, amount").order("created_at",{ascending:!1});if(s)throw s;return{success:!0,data:e.map(e=>{const t=n.filter(t=>t.user_id===e.id),s=t.length,r=t.filter(e=>"approved"===e.status||"active"===e.status).length,a=t.reduce((e,t)=>e+(t.amount||0),0);return De(De({},e),{},{totalLoans:s,activeLoans:r,totalAmount:a})})}}catch(e){return console.error("[SUPABASE] Erreur lors de la r\xe9cup\xe9ration des utilisateurs:",e.message),{success:!1,error:e.message}}},Ve=async(e,t)=>{try{const{data:n,error:s}=await Me.supabase.from("users").update({status:t,updated_at:(new Date).toISOString()}).eq("id",e).select().single();if(s)throw s;return{success:!0,data:n}}catch(n){return console.error("[SUPABASE] Erreur lors de la mise \xe0 jour du statut utilisateur:",n.message),{success:!1,error:n.message}}},qe=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;try{let t=Me.supabase.from("loans").select("\n        *,\n        users (\n          id,\n          first_name,\n          last_name,\n          email,\n          phone_number,\n          filiere,\n          annee_etude,\n          entite,\n          address,\n          facebook_name,\n          temoin_name,\n          temoin_quartier,\n          temoin_phone,\n          temoin_email,\n          emergency_name,\n          emergency_relation,\n          emergency_phone,\n          emergency_email,\n          emergency_address,\n          user_identity_card_name,\n          temoin_identity_card_name,\n          student_card_name,\n          user_identity_card_url,\n          temoin_identity_card_url,\n          student_card_url\n        )\n      ").order("created_at",{ascending:!1});e&&(t=t.eq("user_id",e));const{data:n,error:s}=await t;if(s)throw s;return{success:!0,data:n}}catch(t){return console.error("[SUPABASE] Erreur lors de la r\xe9cup\xe9ration des pr\xeats:",t.message),{success:!1,error:t.message}}},He=async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;try{const r={status:t};"approved"===t&&(r.status="active",r.approved_by=n,r.approved_at=(new Date).toISOString());const{data:a,error:i}=await Me.supabase.from("loans").update(r).eq("id",e).select("\n        *,\n        users!inner(id, first_name, last_name)\n      ").single();if(i)throw i;if("approved"===t&&a)try{console.log("[LOAN_APPROVAL] Envoi notification d'approbation...");const e=await fetch("".concat(Fe,"/api/notify-loan-approval"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:a.user_id,loanAmount:a.amount,loanId:a.id})});e.ok?console.log("[LOAN_APPROVAL] \u2705 Notification d'approbation envoy\xe9e avec succ\xe8s"):console.error("[LOAN_APPROVAL] \u274c Erreur envoi notification:",await e.text())}catch(s){console.error("[LOAN_APPROVAL] \u274c Erreur lors de l'envoi de la notification:",s)}return{success:!0,data:a}}catch(r){return console.error("[SUPABASE] Erreur lors de la mise \xe0 jour du pr\xeat:",r.message),{success:!1,error:r.message}}},We=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;try{let t=Me.supabase.from("payments").select("\n        *,\n        loans (\n          id,\n          amount,\n          purpose\n        )\n      ").order("created_at",{ascending:!1});e&&(t=t.eq("user_id",e));const{data:n,error:s}=await t;if(s)throw s;return{success:!0,data:n}}catch(t){return console.error("[SUPABASE] Erreur lors de la r\xe9cup\xe9ration des paiements:",t.message),{success:!1,error:t.message}}};var Ge=n(579);const Ke=(0,t.createContext)(),Je=()=>{const e=(0,t.useContext)(Ke);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e},Ze=e=>{let{children:n}=e;const[s,r]=(0,t.useState)(null),[a,i]=(0,t.useState)(!0);(0,t.useEffect)(()=>{console.log("[AUTH] Initialisation du contexte d'authentification...");const e=setTimeout(()=>{console.log("[AUTH] \u26a0\ufe0f Timeout de s\xe9curit\xe9 - arr\xeat du loader"),i(!1)},3e3);if(!Me.supabase)return console.warn("[AUTH] Supabase non initialis\xe9 - skip auth subscription"),void i(!1);let t,n=!1;return(async()=>{try{console.log("[AUTH] V\xe9rification de la session actuelle...");const{data:{session:e}}=await Me.supabase.auth.getSession();if(null!==e&&void 0!==e&&e.user){var s,a,o,l;console.log("[AUTH] Session trouv\xe9e:",e.user.email);const t=(null===(s=e.user)||void 0===s||null===(a=s.user_metadata)||void 0===a?void 0:a.role)||(null===(o=e.user)||void 0===o||null===(l=o.app_metadata)||void 0===l?void 0:l.role)||"client",n=De(De({},e.user),{},{role:t});r(n);try{var c,d;localStorage.setItem("ab_user_cache",JSON.stringify({id:n.id,email:n.email,role:t,first_name:(null===(c=n.user_metadata)||void 0===c?void 0:c.first_name)||"",last_name:(null===(d=n.user_metadata)||void 0===d?void 0:d.last_name)||""}))}catch(u){console.warn("[AUTH] Erreur cache:",u)}}else{console.log("[AUTH] Aucune session active");try{const e=localStorage.getItem("ab_user_cache");if(e){const t=JSON.parse(e);t&&t.id&&(console.log("[AUTH] Utilisateur r\xe9cup\xe9r\xe9 depuis le cache"),r(t))}}catch(u){console.warn("[AUTH] Erreur lecture cache:",u)}}console.log("[AUTH] Configuration de l'\xe9couteur d'\xe9v\xe9nements...");const i=Me.supabase.auth.onAuthStateChange(async(e,t)=>{var n;if(console.log("[AUTH] \xc9v\xe9nement auth:",e,null===t||void 0===t||null===(n=t.user)||void 0===n?void 0:n.email),"SIGNED_IN"===e&&t){var s,a,i,o;const e=(null===(s=t.user)||void 0===s||null===(a=s.user_metadata)||void 0===a?void 0:a.role)||(null===(i=t.user)||void 0===i||null===(o=i.app_metadata)||void 0===o?void 0:o.role)||"client",n=De(De({},t.user),{},{role:e});r(n);try{var l,c;localStorage.setItem("ab_user_cache",JSON.stringify({id:n.id,email:n.email,role:e,first_name:(null===(l=n.user_metadata)||void 0===l?void 0:l.first_name)||"",last_name:(null===(c=n.user_metadata)||void 0===c?void 0:c.last_name)||""}))}catch(u){console.warn("[AUTH] Erreur cache:",u)}}else if("SIGNED_OUT"===e){console.log("[AUTH] Utilisateur d\xe9connect\xe9"),r(null);try{localStorage.removeItem("ab_user_cache")}catch(u){console.warn("[AUTH] Erreur suppression cache:",u)}}else if("TOKEN_REFRESHED"===e&&t){var d,h,m,p;console.log("[AUTH] Token rafra\xeechi");const e=(null===(d=t.user)||void 0===d||null===(h=d.user_metadata)||void 0===h?void 0:h.role)||(null===(m=t.user)||void 0===m||null===(p=m.app_metadata)||void 0===p?void 0:p.role)||"client",n=De(De({},t.user),{},{role:e});r(n)}});t=i.data.subscription,n=!0,console.log("[AUTH] \u2705 Contexte d'authentification initialis\xe9")}catch(h){console.error("[AUTH] \u274c Erreur lors de l'initialisation:",h.message)}finally{clearTimeout(e),i(!1)}})(),()=>{clearTimeout(e),t&&t.unsubscribe()}},[]);const o={user:s,loading:a,isAuthenticated:!!s,signUp:async(e,t,n)=>{if(!Me.supabase)return console.error("[AUTH] Supabase non configur\xe9 - impossible de s'inscrire"),{success:!1,error:"Configuration Supabase manquante. V\xe9rifiez vos variables d'environnement."};try{const s=await(async(e,t,n)=>{if(!Me.supabase)return console.error("[SUPABASE] Client non initialis\xe9 - configuration manquante"),{success:!1,error:"Configuration Supabase manquante"};try{const{data:s,error:r}=await Me.supabase.auth.signUp({email:e,password:t,options:{data:{first_name:n.firstName,last_name:n.lastName,phone_number:n.phoneNumber||"",role:"client"}}});if(r)throw console.error("[SUPABASE] Erreur Auth:",r),new Error(Ue(r));const{error:a}=await Me.supabase.from("users").insert([{id:s.user.id,email:e,phone_number:n.phoneNumber||"",first_name:n.firstName,last_name:n.lastName,role:"client",status:"approved"}]);if(a)throw console.error("[SUPABASE] Erreur insertion utilisateur:",a),new Error(Ue(a));return n.phoneNumber&&console.log("[SUPABASE] \u2705 Utilisateur cr\xe9\xe9: ".concat(n.firstName," ").concat(n.lastName," (").concat(n.phoneNumber,")")),{success:!0,user:s.user}}catch(s){return console.error("[SUPABASE] Erreur lors de l'inscription:",s.message),{success:!1,error:Ue(s)}}})(e,t,n);return s}catch(s){return console.error("[AUTH] Erreur lors de l'inscription:",s.message),{success:!1,error:s.message}}},signIn:async(e,t)=>{if(!Me.supabase)return console.error("[AUTH] Supabase non configur\xe9 - impossible de se connecter"),{success:!1,error:"Configuration Supabase manquante. V\xe9rifiez vos variables d'environnement."};try{console.log("[AUTH] Tentative de connexion avec Supabase...");const n=await(async(e,t)=>{if(!Me.supabase)return console.error("[SUPABASE] Client non initialis\xe9 - configuration manquante"),{success:!1,error:"Configuration Supabase manquante"};try{var n,s,r;console.log("[SUPABASE] Tentative de connexion avec email:",e);const{data:l,error:c}=await Me.supabase.auth.signInWithPassword({email:e,password:t});if(c)throw console.error("[SUPABASE] Erreur d'authentification:",c.message),new Error(Ue(c));if(!l.user)throw new Error("Aucun utilisateur retourn\xe9 apr\xe8s authentification");console.log("[SUPABASE] Authentification r\xe9ussie pour:",l.user.email);const{data:d,error:u}=await Me.supabase.from("users").select("*").eq("id",l.user.id).single();var a,i,o;if(u)return console.warn("[SUPABASE] Utilisateur non trouv\xe9 dans la table users:",u.message),{success:!0,user:De(De({},l.user),{},{role:(null===(a=l.user.user_metadata)||void 0===a?void 0:a.role)||"client",first_name:(null===(i=l.user.user_metadata)||void 0===i?void 0:i.first_name)||"",last_name:(null===(o=l.user.user_metadata)||void 0===o?void 0:o.last_name)||""})};const h=De(De({},l.user),{},{role:d.role||(null===(n=l.user.user_metadata)||void 0===n?void 0:n.role)||"client",first_name:d.first_name||(null===(s=l.user.user_metadata)||void 0===s?void 0:s.first_name)||"",last_name:d.last_name||(null===(r=l.user.user_metadata)||void 0===r?void 0:r.last_name)||"",phone_number:d.phone_number||"",status:d.status||"approved"});return console.log("[SUPABASE] Utilisateur complet r\xe9cup\xe9r\xe9:",{id:h.id,email:h.email,role:h.role,status:h.status}),{success:!0,user:h}}catch(l){return console.error("[SUPABASE] Erreur lors de la connexion:",l.message),{success:!1,error:l.message}}})(e,t);return console.log("[AUTH] R\xe9sultat Supabase:",n),n}catch(n){return console.error("[AUTH] Erreur lors de la connexion:",n.message),{success:!1,error:n.message}}},signInWithPhoneNumber:async(e,t)=>{if(!Me.supabase)return{success:!1,error:"Supabase non configur\xe9"};try{const n=await(async(e,t)=>{if(!Me.supabase)return console.error("[SUPABASE] Client non initialis\xe9 - configuration manquante"),{success:!1,error:"Configuration Supabase manquante"};try{console.log("[SUPABASE] Tentative de connexion avec t\xe9l\xe9phone:",e);const{data:n,error:s}=await Me.supabase.from("users").select("*").eq("phone_number",e).single();if(s||!n)return console.error("[SUPABASE] Utilisateur non trouv\xe9 pour le t\xe9l\xe9phone:",e,s),{success:!1,error:"Aucun utilisateur trouv\xe9 avec ce num\xe9ro de t\xe9l\xe9phone"};if(console.log("[SUPABASE] Utilisateur trouv\xe9 dans la table users:",{id:n.id,email:n.email,phone_number:n.phone_number,role:n.role,status:n.status}),"approved"!==n.status)return console.error("[SUPABASE] Utilisateur non approuv\xe9, statut:",n.status),{success:!1,error:"Votre compte n'est pas encore approuv\xe9"};if(!n.email)return console.error("[SUPABASE] Utilisateur sans email"),{success:!1,error:"Votre compte n'a pas d'email configur\xe9. Contactez l'administrateur."};console.log("[SUPABASE] Tentative de connexion avec email:",n.email);const{data:r,error:a}=await Me.supabase.auth.signInWithPassword({email:n.email,password:t});if(a){if(console.error("[SUPABASE] Erreur d'authentification:",a.message),a.message.includes("Invalid login credentials"))return{success:!1,error:"Identifiants incorrects. V\xe9rifiez votre num\xe9ro de t\xe9l\xe9phone et mot de passe."};throw new Error(Ue(a))}if(!r.user)throw new Error("Aucun utilisateur retourn\xe9 apr\xe8s authentification");return console.log("[SUPABASE] \u2705 Connexion r\xe9ussie"),{success:!0,user:De(De({},r.user),{},{role:n.role||"client",first_name:n.first_name||"",last_name:n.last_name||"",phone_number:n.phone_number||"",status:n.status||"approved"})}}catch(n){return console.error("[SUPABASE] Erreur lors de la connexion (t\xe9l\xe9phone):",n.message),{success:!1,error:Ue(n)}}})(e,t);return n}catch(n){return console.error("[AUTH] Erreur lors de la connexion par t\xe9l\xe9phone:",n.message),{success:!1,error:n.message}}},logout:async()=>{if(!Me.supabase){r(null);try{localStorage.removeItem("ab_user_cache")}catch(e){console.warn("[AUTH] Erreur lors de la suppression du cache:",e)}return{success:!0}}try{const t=await(async()=>{try{const{error:e}=await Me.supabase.auth.signOut();if(e)throw new Error(Ue(e));return{success:!0}}catch(e){return console.error("[SUPABASE] Erreur lors de la d\xe9connexion:",e.message),{success:!1,error:Ue(e)}}})();if(t.success){r(null);try{localStorage.removeItem("ab_user_cache")}catch(e){console.warn("[AUTH] Erreur lors de la suppression du cache:",e)}}return t}catch(e){return console.error("[AUTH] Erreur lors de la d\xe9connexion:",e.message),{success:!1,error:e.message}}},refreshUser:async()=>{if(!Me.supabase)return{success:!1,error:"Supabase non configur\xe9"};try{const e=await(async()=>{try{var e,t;const{data:{user:s},error:r}=await Me.supabase.auth.getUser();if(r)throw r;if(!s)return{success:!1,error:"Utilisateur non connect\xe9"};let a=null;try{const{data:e,error:t}=await Me.supabase.from("users").select("*").eq("id",s.id).single();if(t)throw t;a=e}catch(n){console.warn("[SUPABASE] Lecture de public.users indisponible pour cet utilisateur:",n.message)}return{success:!0,user:De(De(De({},s),a||{}),{},{role:a&&a.role||(null===s||void 0===s||null===(e=s.user_metadata)||void 0===e?void 0:e.role)||(null===s||void 0===s||null===(t=s.app_metadata)||void 0===t?void 0:t.role)||"client"})}}catch(s){return console.error("[SUPABASE] Erreur lors de la r\xe9cup\xe9ration utilisateur:",s.message),{success:!1,error:s.message}}})();return e.success&&e.user&&r(e.user),e}catch(e){return console.error("[AUTH] Erreur lors du rafra\xeechissement:",e.message),{success:!1,error:e.message}}},setUser:r};return(0,Ge.jsx)(Ke.Provider,{value:o,children:n})};function $e(e,t){if(null==e)return{};var n,s,r=function(e,t){if(null==e)return{};var n={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(-1!==t.indexOf(s))continue;n[s]=e[s]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(s=0;s<a.length;s++)n=a[s],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var Qe={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Ye=["color","size","strokeWidth","absoluteStrokeWidth","children"];var Xe=(e,n)=>{const s=(0,t.forwardRef)((s,r)=>{let{color:a="currentColor",size:i=24,strokeWidth:o=2,absoluteStrokeWidth:l,children:c}=s,d=$e(s,Ye);return(0,t.createElement)("svg",De(De({ref:r},Qe),{},{width:i,height:i,stroke:a,strokeWidth:l?24*Number(o)/Number(i):o,className:"lucide lucide-".concat((u=e,u.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()))},d),[...n.map(e=>{let[n,s]=e;return(0,t.createElement)(n,s)}),...(Array.isArray(c)?c:[c])||[]]);var u});return s.displayName="".concat(e),s};const et=Xe("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]]),tt=Xe("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),nt=Xe("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),st=Xe("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),rt=e=>{let{message:n,type:s="info",duration:r=5e3,onClose:a}=e;(0,t.useEffect)(()=>{const e=setTimeout(()=>{a()},r);return()=>clearTimeout(e)},[r,a]);return(0,Ge.jsxs)("div",{className:"fixed top-4 right-4 z-50 max-w-sm w-full ".concat((()=>{switch(s){case"success":return"bg-green-50 border-green-200";case"error":return"bg-red-50 border-red-200";case"warning":return"bg-yellow-50 border-yellow-200";default:return"bg-blue-50 border-blue-200"}})()," border rounded-2xl shadow-2xl backdrop-blur-xl"),children:[(0,Ge.jsxs)("div",{className:"flex items-start p-4",children:[(0,Ge.jsx)("div",{className:"flex-shrink-0 mr-3 mt-0.5",children:(()=>{switch(s){case"success":return(0,Ge.jsx)(et,{size:20,className:"text-green-600"});case"error":return(0,Ge.jsx)(tt,{size:20,className:"text-red-600"});case"warning":return(0,Ge.jsx)(tt,{size:20,className:"text-yellow-600"});default:return(0,Ge.jsx)(nt,{size:20,className:"text-blue-600"})}})()}),(0,Ge.jsx)("div",{className:"flex-1 min-w-0",children:(0,Ge.jsx)("p",{className:"text-sm font-medium text-gray-900",children:n})}),(0,Ge.jsx)("div",{className:"flex-shrink-0 ml-3",children:(0,Ge.jsx)("button",{onClick:a,className:"inline-flex text-gray-400 hover:text-gray-600 transition-colors duration-200",children:(0,Ge.jsx)(st,{size:16})})})]}),(0,Ge.jsx)("div",{className:"h-1 bg-gray-200 rounded-b-2xl overflow-hidden",children:(0,Ge.jsx)("div",{className:"h-full ".concat("success"===s?"bg-green-500":"error"===s?"bg-red-500":"warning"===s?"bg-yellow-500":"bg-blue-500")})})]})},at=(0,t.createContext)(),it=()=>{const e=(0,t.useContext)(at);if(!e)throw new Error("useNotifications must be used within a NotificationProvider");return e},ot=e=>{let{children:n}=e;const[s,r]=(0,t.useState)([]),[a,i]=(0,t.useState)(0),[o,l]=(0,t.useState)([]);(0,t.useEffect)(()=>{const e=s.filter(e=>!e.read).length;i(e)},[s]);const c=(0,t.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;try{if(!Me.supabase)return void console.log("[NOTIFICATIONS] Supabase non configur\xe9 - skip chargement");let t=Me.supabase.from("notifications").select("*").order("created_at",{ascending:!1}).limit(50);e&&(t=t.eq("user_id",e));const{data:n,error:s}=await t;if(s)return void console.error("[NOTIFICATIONS] Erreur lors du chargement:",s);if(n){const e=n.map(e=>({id:e.id,title:e.title,message:e.message,type:e.type||"info",priority:e.priority||"medium",read:e.read||!1,timestamp:e.created_at,data:e.data||{},action:e.action||null}));r(e)}}catch(t){console.error("[NOTIFICATIONS] Erreur lors du chargement:",t)}},[]),d=(0,t.useCallback)(async e=>{try{if(!Me.supabase){console.log("[NOTIFICATIONS] Supabase non configur\xe9 - notification locale seulement");const t={id:Date.now()+Math.random(),title:e.title,message:e.message,type:e.type||"info",priority:e.priority||"medium",read:!1,data:e.data||{},action:e.action||null,user_id:e.userId||null,created_at:(new Date).toISOString(),timestamp:(new Date).toISOString()};return void r(n=>n.some(t=>t.title===e.title&&t.message===e.message&&Date.now()-new Date(t.timestamp).getTime()<6e4)?n:[t,...n.slice(0,49)])}const t={title:e.title,message:e.message,type:e.type||"info",priority:e.priority||"medium",read:!1,data:e.data||{},action:e.action||null,user_id:e.userId||null,created_at:(new Date).toISOString()},{data:n,error:s}=await Me.supabase.from("notifications").insert([t]).select().single();if(s)return void console.error("[NOTIFICATIONS] Erreur lors de la sauvegarde:",s);const a=De(De({id:n.id},t),{},{timestamp:n.created_at});r(t=>t.some(t=>t.title===e.title&&t.message===e.message&&Date.now()-new Date(t.timestamp).getTime()<6e4)?t:[a,...t.slice(0,49)])}catch(t){console.error("[NOTIFICATIONS] Erreur lors de l'ajout:",t)}},[]),u=(0,t.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;await c(e)},[c]),h=(0,t.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5e3;const s=Date.now()+Math.random(),r={id:s,message:e,type:t,duration:n};l(e=>[...e,r]),setTimeout(()=>{g(s)},n)},[]),m=(0,t.useCallback)(e=>{h(e,"success")},[h]),p=(0,t.useCallback)(e=>{h(e,"error")},[h]),f=(0,t.useCallback)(e=>{h(e,"warning")},[h]),x=(0,t.useCallback)(e=>{h(e,"info")},[h]),g=(0,t.useCallback)(e=>{l(t=>t.filter(t=>t.id!==e))},[]),v={notifications:s,unreadCount:a,addNotification:d,markAsRead:async e=>{try{if(!Me.supabase)return void r(t=>t.map(t=>t.id===e?De(De({},t),{},{read:!0}):t));const{error:t}=await Me.supabase.from("notifications").update({read:!0}).eq("id",e);if(t)return void console.error("[NOTIFICATIONS] Erreur lors de la mise \xe0 jour:",t);r(t=>t.map(t=>t.id===e?De(De({},t),{},{read:!0}):t))}catch(t){console.error("[NOTIFICATIONS] Erreur lors de la mise \xe0 jour:",t)}},markAllAsRead:async()=>{try{if(!Me.supabase)return void r(e=>e.map(e=>De(De({},e),{},{read:!0})));const{error:e}=await Me.supabase.from("notifications").update({read:!0}).eq("read",!1);if(e)return void console.error("[NOTIFICATIONS] Erreur lors de la mise \xe0 jour globale:",e);r(e=>e.map(e=>De(De({},e),{},{read:!0})))}catch(e){console.error("[NOTIFICATIONS] Erreur lors de la mise \xe0 jour globale:",e)}},removeNotification:async e=>{try{if(!Me.supabase)return void r(t=>t.filter(t=>t.id!==e));const{error:t}=await Me.supabase.from("notifications").delete().eq("id",e);if(t)return void console.error("[NOTIFICATIONS] Erreur lors de la suppression:",t);r(t=>t.filter(t=>t.id!==e))}catch(t){console.error("[NOTIFICATIONS] Erreur lors de la suppression:",t)}},clearAllNotifications:async()=>{try{if(!Me.supabase)return void r([]);const{error:e}=await Me.supabase.from("notifications").delete().neq("id",0);if(e)return void console.error("[NOTIFICATIONS] Erreur lors de la suppression globale:",e);r([])}catch(e){console.error("[NOTIFICATIONS] Erreur lors de la suppression globale:",e)}},refreshNotifications:u,showToast:h,showSuccess:m,showError:p,showWarning:f,showInfo:x};return(0,Ge.jsxs)(at.Provider,{value:v,children:[n,(0,Ge.jsx)("div",{className:"fixed top-4 right-4 z-50 space-y-2",children:o.map(e=>(0,Ge.jsx)(rt,{message:e.message,type:e.type,duration:e.duration,onClose:()=>g(e.id)},e.id))})]})},lt=()=>{console.log("\ud83d\udd0d Test de la configuration PWA..."),"serviceWorker"in navigator?console.log("\u2705 Service Worker support\xe9"):console.log("\u274c Service Worker non support\xe9"),"beforeinstallprompt"in window?console.log("\u2705 API d'installation PWA disponible"):console.log("\u274c API d'installation PWA non disponible"),window.matchMedia("(display-mode: standalone)").matches?console.log("\u2705 App en mode standalone (install\xe9e)"):console.log("\u2139\ufe0f App en mode navigateur");const e=document.querySelector('link[rel="manifest"]');e?console.log("\u2705 Manifest.json trouv\xe9:",e.href):console.log("\u274c Manifest.json non trouv\xe9");const t=document.querySelector('meta[name="theme-color"]');t?console.log("\u2705 Theme color d\xe9fini:",t.content):console.log("\u274c Theme color non d\xe9fini");const n=document.querySelector('link[rel="apple-touch-icon"]');n?console.log("\u2705 Apple touch icon d\xe9fini:",n.href):console.log("\u274c Apple touch icon non d\xe9fini"),"caches"in window?(console.log("\u2705 Cache API disponible"),caches.keys().then(e=>{console.log("\ud83d\udce6 Caches disponibles:",e)})):console.log("\u274c Cache API non disponible"),console.log("\ud83c\udfaf Test PWA termin\xe9")},ct=()=>{console.log("\ud83d\udd27 For\xe7age de l'affichage du prompt d'installation...");const e=new Event("beforeinstallprompt");e.preventDefault=()=>{},e.prompt=()=>Promise.resolve({outcome:"accepted"}),e.userChoice=Promise.resolve({outcome:"accepted"}),window.dispatchEvent(e),console.log("\u2705 \xc9v\xe9nement beforeinstallprompt simul\xe9")},dt=()=>{const e=window.matchMedia("(display-mode: standalone)").matches||!0===window.navigator.standalone,t=localStorage.getItem("pwa-install-prompt-seen"),n=localStorage.getItem("pwa-install-accepted"),s=localStorage.getItem("pwa-install-declined");return console.log("\ud83d\udcca \xc9tat d'installation:",{isInstalled:e,hasSeenPrompt:!!t,hasAccepted:!!n,hasDeclined:!!s}),{isInstalled:e,hasSeenPrompt:!!t,hasAccepted:!!n,hasDeclined:!!s}},ut=()=>{console.log("\ud83d\udd04 R\xe9initialisation de l'\xe9tat d'installation..."),localStorage.removeItem("pwa-install-prompt-seen"),localStorage.removeItem("pwa-install-prompt-last-seen"),localStorage.removeItem("pwa-install-accepted"),localStorage.removeItem("pwa-install-declined"),localStorage.removeItem("pwa-install-declined-date"),localStorage.removeItem("pwa-installed"),localStorage.removeItem("pwa-install-date"),console.log("\u2705 \xc9tat d'installation r\xe9initialis\xe9")};"undefined"!==typeof window&&(window.testPWA={testConfiguration:lt,forceInstallPrompt:ct,checkInstallationStatus:dt,resetInstallationState:ut},console.log("\ud83d\udee0\ufe0f Fonctions de test PWA disponibles dans window.testPWA"));const ht=()=>{localStorage.removeItem("notification-prompt-seen"),localStorage.removeItem("notification-prompt-last-seen"),console.log("\ud83e\uddea [TEST] Prompt de notification r\xe9initialis\xe9 pour les tests")},mt=()=>{ht(),console.log("\ud83e\uddea [TEST] Simulation d'un utilisateur non abonn\xe9")},pt=()=>{const e=localStorage.getItem("notification-prompt-seen"),t=localStorage.getItem("notification-prompt-last-seen");if(console.log("\ud83e\uddea [TEST] \xc9tat du prompt:"),console.log("   - A vu le prompt:",e),console.log("   - Derni\xe8re fois vu:",t?new Date(parseInt(t)).toLocaleString():"Jamais"),t){const e=(Date.now()-parseInt(t))/864e5;console.log("   - Jours depuis la derni\xe8re fois:",Math.round(e))}return{hasSeenPrompt:!!e,lastSeen:t?parseInt(t):null,daysSinceLastSeen:t?(Date.now()-parseInt(t))/864e5:null}},ft=()=>{console.log("\ud83e\uddea [TEST] Test des conditions d'affichage du prompt:");const e="serviceWorker"in navigator&&"PushManager"in window,t=Notification.permission;console.log("   - Notifications support\xe9es:",e),console.log("   - Permission actuelle:",t),console.log("   - Service Worker disponible:","serviceWorker"in navigator),console.log("   - PushManager disponible:","PushManager"in window);const n=pt(),s=e&&"denied"!==t&&(!n.hasSeenPrompt||n.daysSinceLastSeen&&n.daysSinceLastSeen>=3);return console.log("   - Devrait afficher le prompt:",s),{isSupported:e,permission:t,shouldShow:s,promptState:n}},xt=()=>{ht(),console.log("\ud83e\uddea [TEST] Prompt forc\xe9 pour les tests - rechargez la page")},gt=()=>{ht(),console.log("\ud83e\uddea [TEST] Simulation d'un utilisateur qui a refus\xe9"),console.log("   - Pour tester, refusez manuellement les notifications dans votre navigateur")},vt=async()=>{console.log("\ud83e\uddea [TEST] Test du cycle complet de notifications..."),console.log("\n1. \xc9tat initial:");const e=ft();console.log("\n2. R\xe9initialisation pour le test:"),ht(),console.log("\n3. \xc9tat apr\xe8s r\xe9initialisation:");const t=ft();return console.log("\n\u2705 Test termin\xe9. Rechargez la page pour voir le prompt."),{initialState:e,resetState:t}};function yt(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}"undefined"!==typeof window&&(window.testNotificationPrompt={resetNotificationPromptForTesting:ht,simulateUnsubscribedUser:mt,checkPromptState:pt,testPromptConditions:ft,forceShowPromptForTesting:xt,simulateDeniedUser:gt,testCompleteNotificationFlow:vt},console.log("\ud83e\uddea [TEST] Utilitaires de test charg\xe9s. Utilisez:"),console.log("   - testNotificationPrompt.testCompleteNotificationFlow()"),console.log("   - testNotificationPrompt.checkPromptState()"),console.log("   - testNotificationPrompt.forceShowPromptForTesting()"));let bt={data:""},jt=e=>"object"==typeof window?((e?e.querySelector("#_goober"):window._goober)||Object.assign((e||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:e||bt,wt=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,Nt=/\/\*[^]*?\*\/|  +/g,kt=/\n+/g,St=(e,t)=>{let n="",s="",r="";for(let a in e){let i=e[a];"@"==a[0]?"i"==a[1]?n=a+" "+i+";":s+="f"==a[1]?St(i,a):a+"{"+St(i,"k"==a[1]?"":t)+"}":"object"==typeof i?s+=St(i,t?t.replace(/([^,])+/g,e=>a.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,t=>/&/.test(t)?t.replace(/&/g,e):e?e+" "+t:t)):a):null!=i&&(a=/^--/.test(a)?a:a.replace(/[A-Z]/g,"-$&").toLowerCase(),r+=St.p?St.p(a,i):a+":"+i+";")}return n+(t&&r?t+"{"+r+"}":r)+s},Et={},_t=e=>{if("object"==typeof e){let t="";for(let n in e)t+=n+_t(e[n]);return t}return e},Ct=(e,t,n,s,r)=>{let a=_t(e),i=Et[a]||(Et[a]=(e=>{let t=0,n=11;for(;t<e.length;)n=101*n+e.charCodeAt(t++)>>>0;return"go"+n})(a));if(!Et[i]){let t=a!==e?e:(e=>{let t,n,s=[{}];for(;t=wt.exec(e.replace(Nt,""));)t[4]?s.shift():t[3]?(n=t[3].replace(kt," ").trim(),s.unshift(s[0][n]=s[0][n]||{})):s[0][t[1]]=t[2].replace(kt," ").trim();return s[0]})(e);Et[i]=St(r?{["@keyframes "+i]:t}:t,n?"":"."+i)}let o=n&&Et.g?Et.g:null;return n&&(Et.g=Et[i]),((e,t,n,s)=>{s?t.data=t.data.replace(s,e):-1===t.data.indexOf(e)&&(t.data=n?e+t.data:t.data+e)})(Et[i],t,s,o),i};function Pt(e){let t=this||{},n=e.call?e(t.p):e;return Ct(n.unshift?n.raw?((e,t,n)=>e.reduce((e,s,r)=>{let a=t[r];if(a&&a.call){let e=a(n),t=e&&e.props&&e.props.className||/^go/.test(e)&&e;a=t?"."+t:e&&"object"==typeof e?e.props?"":St(e,""):!1===e?"":e}return e+s+(null==a?"":a)},""))(n,[].slice.call(arguments,1),t.p):n.reduce((e,n)=>Object.assign(e,n&&n.call?n(t.p):n),{}):n,jt(t.target),t.g,t.o,t.k)}Pt.bind({g:1});let Tt,At,It,Rt=Pt.bind({k:1});function Ot(e,t){let n=this||{};return function(){let s=arguments;function r(a,i){let o=Object.assign({},a),l=o.className||r.className;n.p=Object.assign({theme:At&&At()},o),n.o=/ *go\d+/.test(l),o.className=Pt.apply(n,s)+(l?" "+l:""),t&&(o.ref=i);let c=e;return e[0]&&(c=o.as||e,delete o.as),It&&c[0]&&It(o),Tt(c,o)}return t?t(r):r}}var Lt,zt,Dt,Mt,Ft,Ut,Bt,Vt,qt,Ht,Wt,Gt,Kt,Jt,Zt,$t,Qt=(e,t)=>(e=>"function"==typeof e)(e)?e(t):e,Yt=(()=>{let e=0;return()=>(++e).toString()})(),Xt=(()=>{let e;return()=>{if(void 0===e&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),en="default",tn=(e,t)=>{let{toastLimit:n}=e.settings;switch(t.type){case 0:return De(De({},e),{},{toasts:[t.toast,...e.toasts].slice(0,n)});case 1:return De(De({},e),{},{toasts:e.toasts.map(e=>e.id===t.toast.id?De(De({},e),t.toast):e)});case 2:let{toast:s}=t;return tn(e,{type:e.toasts.find(e=>e.id===s.id)?1:0,toast:s});case 3:let{toastId:r}=t;return De(De({},e),{},{toasts:e.toasts.map(e=>e.id===r||void 0===r?De(De({},e),{},{dismissed:!0,visible:!1}):e)});case 4:return void 0===t.toastId?De(De({},e),{},{toasts:[]}):De(De({},e),{},{toasts:e.toasts.filter(e=>e.id!==t.toastId)});case 5:return De(De({},e),{},{pausedAt:t.time});case 6:let a=t.time-(e.pausedAt||0);return De(De({},e),{},{pausedAt:void 0,toasts:e.toasts.map(e=>De(De({},e),{},{pauseDuration:e.pauseDuration+a}))})}},nn=[],sn={toasts:[],pausedAt:void 0,settings:{toastLimit:20}},rn={},an=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:en;rn[t]=tn(rn[t]||sn,e),nn.forEach(e=>{let[n,s]=e;n===t&&s(rn[t])})},on=e=>Object.keys(rn).forEach(t=>an(e,t)),ln=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:en;return t=>{an(t,e)}},cn={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},dn=e=>(t,n)=>{let s=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"blank",n=arguments.length>2?arguments[2]:void 0;return De(De({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0},n),{},{id:(null==n?void 0:n.id)||Yt()})}(t,e,n);return ln(s.toasterId||(e=>Object.keys(rn).find(t=>rn[t].toasts.some(t=>t.id===e)))(s.id))({type:2,toast:s}),s.id},un=(e,t)=>dn("blank")(e,t);un.error=dn("error"),un.success=dn("success"),un.loading=dn("loading"),un.custom=dn("custom"),un.dismiss=(e,t)=>{let n={type:3,toastId:e};t?ln(t)(n):on(n)},un.dismissAll=e=>un.dismiss(void 0,e),un.remove=(e,t)=>{let n={type:4,toastId:e};t?ln(t)(n):on(n)},un.removeAll=e=>un.remove(void 0,e),un.promise=(e,t,n)=>{let s=un.loading(t.loading,De(De({},n),null==n?void 0:n.loading));return"function"==typeof e&&(e=e()),e.then(e=>{let r=t.success?Qt(t.success,e):void 0;return r?un.success(r,De(De({id:s},n),null==n?void 0:n.success)):un.dismiss(s),e}).catch(e=>{let r=t.error?Qt(t.error,e):void 0;r?un.error(r,De(De({id:s},n),null==n?void 0:n.error)):un.dismiss(s)}),e};var hn=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",{toasts:s,pausedAt:r}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:en,[s,r]=(0,t.useState)(rn[n]||sn),a=(0,t.useRef)(rn[n]);(0,t.useEffect)(()=>(a.current!==rn[n]&&r(rn[n]),nn.push([n,r]),()=>{let e=nn.findIndex(e=>{let[t]=e;return t===n});e>-1&&nn.splice(e,1)}),[n]);let i=s.toasts.map(t=>{var n,s,r;return De(De(De(De({},e),e[t.type]),t),{},{removeDelay:t.removeDelay||(null==(n=e[t.type])?void 0:n.removeDelay)||(null==e?void 0:e.removeDelay),duration:t.duration||(null==(s=e[t.type])?void 0:s.duration)||(null==e?void 0:e.duration)||cn[t.type],style:De(De(De({},e.style),null==(r=e[t.type])?void 0:r.style),t.style)})});return De(De({},s),{},{toasts:i})}(e,n),a=(0,t.useRef)(new Map).current,i=(0,t.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;if(a.has(e))return;let n=setTimeout(()=>{a.delete(e),o({type:4,toastId:e})},t);a.set(e,n)},[]);(0,t.useEffect)(()=>{if(r)return;let e=Date.now(),t=s.map(t=>{if(t.duration===1/0)return;let s=(t.duration||0)+t.pauseDuration-(e-t.createdAt);if(!(s<0))return setTimeout(()=>un.dismiss(t.id,n),s);t.visible&&un.dismiss(t.id)});return()=>{t.forEach(e=>e&&clearTimeout(e))}},[s,r,n]);let o=(0,t.useCallback)(ln(n),[n]),l=(0,t.useCallback)(()=>{o({type:5,time:Date.now()})},[o]),c=(0,t.useCallback)((e,t)=>{o({type:1,toast:{id:e,height:t}})},[o]),d=(0,t.useCallback)(()=>{r&&o({type:6,time:Date.now()})},[r,o]),u=(0,t.useCallback)((e,t)=>{let{reverseOrder:n=!1,gutter:r=8,defaultPosition:a}=t||{},i=s.filter(t=>(t.position||a)===(e.position||a)&&t.height),o=i.findIndex(t=>t.id===e.id),l=i.filter((e,t)=>t<o&&e.visible).length;return i.filter(e=>e.visible).slice(...n?[l+1]:[0,l]).reduce((e,t)=>e+(t.height||0)+r,0)},[s]);return(0,t.useEffect)(()=>{s.forEach(e=>{if(e.dismissed)i(e.id,e.removeDelay);else{let t=a.get(e.id);t&&(clearTimeout(t),a.delete(e.id))}})},[s,i]),{toasts:s,handlers:{updateHeight:c,startPause:l,endPause:d,calculateOffset:u}}},mn=Rt(Lt||(Lt=yt(["\nfrom {\n  transform: scale(0) rotate(45deg);\n\topacity: 0;\n}\nto {\n transform: scale(1) rotate(45deg);\n  opacity: 1;\n}"]))),pn=Rt(zt||(zt=yt(["\nfrom {\n  transform: scale(0);\n  opacity: 0;\n}\nto {\n  transform: scale(1);\n  opacity: 1;\n}"]))),fn=Rt(Dt||(Dt=yt(["\nfrom {\n  transform: scale(0) rotate(90deg);\n\topacity: 0;\n}\nto {\n  transform: scale(1) rotate(90deg);\n\topacity: 1;\n}"]))),xn=Ot("div")(Mt||(Mt=yt(["\n  width: 20px;\n  opacity: 0;\n  height: 20px;\n  border-radius: 10px;\n  background: ",";\n  position: relative;\n  transform: rotate(45deg);\n\n  animation: "," 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)\n    forwards;\n  animation-delay: 100ms;\n\n  &:after,\n  &:before {\n    content: '';\n    animation: "," 0.15s ease-out forwards;\n    animation-delay: 150ms;\n    position: absolute;\n    border-radius: 3px;\n    opacity: 0;\n    background: ",";\n    bottom: 9px;\n    left: 4px;\n    height: 2px;\n    width: 12px;\n  }\n\n  &:before {\n    animation: "," 0.15s ease-out forwards;\n    animation-delay: 180ms;\n    transform: rotate(90deg);\n  }\n"])),e=>e.primary||"#ff4b4b",mn,pn,e=>e.secondary||"#fff",fn),gn=Rt(Ft||(Ft=yt(["\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n"]))),vn=Ot("div")(Ut||(Ut=yt(["\n  width: 12px;\n  height: 12px;\n  box-sizing: border-box;\n  border: 2px solid;\n  border-radius: 100%;\n  border-color: ",";\n  border-right-color: ",";\n  animation: "," 1s linear infinite;\n"])),e=>e.secondary||"#e0e0e0",e=>e.primary||"#616161",gn),yn=Rt(Bt||(Bt=yt(["\nfrom {\n  transform: scale(0) rotate(45deg);\n\topacity: 0;\n}\nto {\n  transform: scale(1) rotate(45deg);\n\topacity: 1;\n}"]))),bn=Rt(Vt||(Vt=yt(["\n0% {\n\theight: 0;\n\twidth: 0;\n\topacity: 0;\n}\n40% {\n  height: 0;\n\twidth: 6px;\n\topacity: 1;\n}\n100% {\n  opacity: 1;\n  height: 10px;\n}"]))),jn=Ot("div")(qt||(qt=yt(["\n  width: 20px;\n  opacity: 0;\n  height: 20px;\n  border-radius: 10px;\n  background: ",";\n  position: relative;\n  transform: rotate(45deg);\n\n  animation: "," 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)\n    forwards;\n  animation-delay: 100ms;\n  &:after {\n    content: '';\n    box-sizing: border-box;\n    animation: "," 0.2s ease-out forwards;\n    opacity: 0;\n    animation-delay: 200ms;\n    position: absolute;\n    border-right: 2px solid;\n    border-bottom: 2px solid;\n    border-color: ",";\n    bottom: 6px;\n    left: 6px;\n    height: 10px;\n    width: 6px;\n  }\n"])),e=>e.primary||"#61d345",yn,bn,e=>e.secondary||"#fff"),wn=Ot("div")(Ht||(Ht=yt(["\n  position: absolute;\n"]))),Nn=Ot("div")(Wt||(Wt=yt(["\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  min-width: 20px;\n  min-height: 20px;\n"]))),kn=Rt(Gt||(Gt=yt(["\nfrom {\n  transform: scale(0.6);\n  opacity: 0.4;\n}\nto {\n  transform: scale(1);\n  opacity: 1;\n}"]))),Sn=Ot("div")(Kt||(Kt=yt(["\n  position: relative;\n  transform: scale(0.6);\n  opacity: 0.4;\n  min-width: 20px;\n  animation: "," 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)\n    forwards;\n"])),kn),En=e=>{let{toast:n}=e,{icon:s,type:r,iconTheme:a}=n;return void 0!==s?"string"==typeof s?t.createElement(Sn,null,s):s:"blank"===r?null:t.createElement(Nn,null,t.createElement(vn,De({},a)),"loading"!==r&&t.createElement(wn,null,"error"===r?t.createElement(xn,De({},a)):t.createElement(jn,De({},a))))},_n=e=>"\n0% {transform: translate3d(0,".concat(-200*e,"%,0) scale(.6); opacity:.5;}\n100% {transform: translate3d(0,0,0) scale(1); opacity:1;}\n"),Cn=e=>"\n0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}\n100% {transform: translate3d(0,".concat(-150*e,"%,-1px) scale(.6); opacity:0;}\n"),Pn=Ot("div")(Jt||(Jt=yt(["\n  display: flex;\n  align-items: center;\n  background: #fff;\n  color: #363636;\n  line-height: 1.3;\n  will-change: transform;\n  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);\n  max-width: 350px;\n  pointer-events: auto;\n  padding: 8px 10px;\n  border-radius: 8px;\n"]))),Tn=Ot("div")(Zt||(Zt=yt(["\n  display: flex;\n  justify-content: center;\n  margin: 4px 10px;\n  color: inherit;\n  flex: 1 1 auto;\n  white-space: pre-line;\n"]))),An=t.memo(e=>{let{toast:n,position:s,style:r,children:a}=e,i=n.height?((e,t)=>{let n=e.includes("top")?1:-1,[s,r]=Xt()?["0%{opacity:0;} 100%{opacity:1;}","0%{opacity:1;} 100%{opacity:0;}"]:[_n(n),Cn(n)];return{animation:t?"".concat(Rt(s)," 0.35s cubic-bezier(.21,1.02,.73,1) forwards"):"".concat(Rt(r)," 0.4s forwards cubic-bezier(.06,.71,.55,1)")}})(n.position||s||"top-center",n.visible):{opacity:0},o=t.createElement(En,{toast:n}),l=t.createElement(Tn,De({},n.ariaProps),Qt(n.message,n));return t.createElement(Pn,{className:n.className,style:De(De(De({},i),r),n.style)},"function"==typeof a?a({icon:o,message:l}):t.createElement(t.Fragment,null,o,l))});!function(e,t,n,s){St.p=t,Tt=e,At=n,It=s}(t.createElement);var In=e=>{let{id:n,className:s,style:r,onHeightUpdate:a,children:i}=e,o=t.useCallback(e=>{if(e){let t=()=>{let t=e.getBoundingClientRect().height;a(n,t)};t(),new MutationObserver(t).observe(e,{subtree:!0,childList:!0,characterData:!0})}},[n,a]);return t.createElement("div",{ref:o,className:s,style:r},i)},Rn=Pt($t||($t=yt(["\n  z-index: 9999;\n  > * {\n    pointer-events: auto;\n  }\n"]))),On=e=>{let{reverseOrder:n,position:s="top-center",toastOptions:r,gutter:a,children:i,toasterId:o,containerStyle:l,containerClassName:c}=e,{toasts:d,handlers:u}=hn(r,o);return t.createElement("div",{"data-rht-toaster":o||"",style:De({position:"fixed",zIndex:9999,top:16,left:16,right:16,bottom:16,pointerEvents:"none"},l),className:c,onMouseEnter:u.startPause,onMouseLeave:u.endPause},d.map(e=>{let r=e.position||s,o=((e,t)=>{let n=e.includes("top"),s=n?{top:0}:{bottom:0},r=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return De(De({left:0,right:0,display:"flex",position:"absolute",transition:Xt()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:"translateY(".concat(t*(n?1:-1),"px)")},s),r)})(r,u.calculateOffset(e,{reverseOrder:n,gutter:a,defaultPosition:s}));return t.createElement(In,{id:e.id,key:e.id,onHeightUpdate:u.updateHeight,className:e.visible?Rn:"",style:o},"custom"===e.type?Qt(e.message,e):i?i(e):t.createElement(An,{toast:e,position:r}))}))};const Ln=new class{constructor(){this.updateAvailable=!1,this.updateCallback=null,this.checkInterval=null}startChecking(e){this.updateCallback=e,this.checkInterval=setInterval(()=>{this.checkForUpdates()},3e5),this.checkForUpdates()}checkForUpdates(){"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(e=>{e.update()}),fetch("/index.html",{cache:"no-cache"}).then(e=>e.text()).then(e=>{const t=this.getHash(e),n=localStorage.getItem("app-version-hash");n&&n!==t&&(this.updateAvailable=!0,this.updateCallback&&this.updateCallback()),localStorage.setItem("app-version-hash",t)}).catch(e=>{console.log("Erreur lors de la v\xe9rification des mises \xe0 jour:",e)})}getHash(e){let t=0;for(let n=0;n<e.length;n++){t=(t<<5)-t+e.charCodeAt(n),t&=t}return t.toString()}applyUpdate(){this.updateAvailable&&window.location.reload()}stopChecking(){this.checkInterval&&(clearInterval(this.checkInterval),this.checkInterval=null)}showUpdateNotification(){this.updateAvailable&&this.updateCallback&&this.updateCallback()}},zn=Xe("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]),Dn=Xe("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),Mn=Xe("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),Fn=Xe("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),Un=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Bn=(()=>new Set(Un))(),Vn=e=>180*e/Math.PI,qn=e=>{const t=Vn(Math.atan2(e[1],e[0]));return Wn(t)},Hn={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:qn,rotateZ:qn,skewX:e=>Vn(Math.atan(e[1])),skewY:e=>Vn(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},Wn=e=>((e%=360)<0&&(e+=360),e),Gn=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),Kn=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),Jn={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:Gn,scaleY:Kn,scale:e=>(Gn(e)+Kn(e))/2,rotateX:e=>Wn(Vn(Math.atan2(e[6],e[5]))),rotateY:e=>Wn(Vn(Math.atan2(-e[2],e[0]))),rotateZ:qn,rotate:qn,skewX:e=>Vn(Math.atan(e[4])),skewY:e=>Vn(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function Zn(e){return e.includes("scale")?1:0}function $n(e,t){if(!e||"none"===e)return Zn(t);const n=e.match(/^matrix3d\(([\t-\r ,-\.0-9e\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+)\)$/);let s,r;if(n)s=Jn,r=n;else{const t=e.match(/^matrix\(([\t-\r ,-\.0-9e\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+)\)$/);s=Hn,r=t}if(!r)return Zn(t);const a=s[t],i=r[1].split(",").map(Qn);return"function"===typeof a?a(i):i[a]}function Qn(e){return parseFloat(e.trim())}const Yn=e=>t=>"string"===typeof t&&t.startsWith(e),Xn=Yn("--"),es=Yn("var(--"),ts=e=>!!es(e)&&ns.test(e.split("/*")[0].trim()),ns=/var\(--(?:[\x2D0-9A-Z_a-z\u017F\u212A]+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*|[\x2D0-9A-Z_a-z\u017F\u212A]+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*,(?:[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(?:(?![\t-\r \(\)\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uD800-\uDFFF\uFEFF])[^]|[\uD800-\uDBFF][\uDC00-\uDFFF])|[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*\((?:(?:(?![\(\)\uD800-\uDFFF])[^]|[\uD800-\uDBFF][\uDC00-\uDFFF])|\((?:(?![\(\)\uD800-\uDFFF])[^]|[\uD800-\uDBFF][\uDC00-\uDFFF])*\))*\))+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*)\)$/i;function ss(e){let{top:t,left:n,right:s,bottom:r}=e;return{x:{min:n,max:s},y:{min:t,max:r}}}const rs=(e,t,n)=>e+(t-e)*n;function as(e){return void 0===e||1===e}function is(e){let{scale:t,scaleX:n,scaleY:s}=e;return!as(t)||!as(n)||!as(s)}function os(e){return is(e)||ls(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function ls(e){return cs(e.x)||cs(e.y)}function cs(e){return e&&"0%"!==e}function ds(e,t,n){return n+t*(e-n)}function us(e,t,n,s,r){return void 0!==r&&(e=ds(e,r,s)),ds(e,n,s)+t}function hs(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,s=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0;e.min=us(e.min,t,n,s,r),e.max=us(e.max,t,n,s,r)}function ms(e,t){let{x:n,y:s}=t;hs(e.x,n.translate,n.scale,n.originPoint),hs(e.y,s.translate,s.scale,s.originPoint)}const ps=.999999999999,fs=1.0000000000001;function xs(e,t){e.min=e.min+t,e.max=e.max+t}function gs(e,t,n,s){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.5;hs(e,t,n,rs(e.min,e.max,r),s)}function vs(e,t){gs(e.x,t.x,t.scaleX,t.scale,t.originX),gs(e.y,t.y,t.scaleY,t.scale,t.originY)}function ys(e,t){return ss(function(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),s=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:s.y,right:s.x}}(e.getBoundingClientRect(),t))}const bs=new Set(["width","height","top","left","right","bottom",...Un]),js=(e,t,n)=>n>t?t:n<e?e:n,ws={test:e=>"number"===typeof e,parse:parseFloat,transform:e=>e},Ns=De(De({},ws),{},{transform:e=>js(0,1,e)}),ks=De(De({},ws),{},{default:1}),Ss=e=>({test:t=>"string"===typeof t&&t.endsWith(e)&&1===t.split(" ").length,parse:parseFloat,transform:t=>"".concat(t).concat(e)}),Es=Ss("deg"),_s=Ss("%"),Cs=Ss("px"),Ps=Ss("vh"),Ts=Ss("vw"),As=(()=>De(De({},_s),{},{parse:e=>_s.parse(e)/100,transform:e=>_s.transform(100*e)}))(),Is=e=>t=>t.test(e),Rs=[ws,Cs,_s,Es,Ts,Ps,{test:e=>"auto"===e,parse:e=>e}],Os=e=>Rs.find(Is(e));const Ls=e=>/^-?(?:[0-9]+(?:\.[0-9]+)?|\.[0-9]+)$/.test(e),zs=/^var\(--(?:([\x2D0-9A-Z_a-z]+)|([\x2D0-9A-Z_a-z]+), ?([ #%\(\),-\.0-9A-Za-z]+))\)/;function Ds(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;'Max CSS variable fallback depth detected in property "'.concat(e,'". This may indicate a circular fallback dependency.');const[s,r]=function(e){const t=zs.exec(e);if(!t)return[,];const[,n,s,r]=t;return["--".concat(null!==n&&void 0!==n?n:s),r]}(e);if(!s)return;const a=window.getComputedStyle(t).getPropertyValue(s);if(a){const e=a.trim();return Ls(e)?parseFloat(e):e}return ts(r)?Ds(r,t,n+1):r}const Ms=e=>e===ws||e===Cs,Fs=new Set(["x","y","z"]),Us=Un.filter(e=>!Fs.has(e));const Bs={width:(e,t)=>{let{x:n}=e,{paddingLeft:s="0",paddingRight:r="0"}=t;return n.max-n.min-parseFloat(s)-parseFloat(r)},height:(e,t)=>{let{y:n}=e,{paddingTop:s="0",paddingBottom:r="0"}=t;return n.max-n.min-parseFloat(s)-parseFloat(r)},top:(e,t)=>{let{top:n}=t;return parseFloat(n)},left:(e,t)=>{let{left:n}=t;return parseFloat(n)},bottom:(e,t)=>{let{y:n}=e,{top:s}=t;return parseFloat(s)+(n.max-n.min)},right:(e,t)=>{let{x:n}=e,{left:s}=t;return parseFloat(s)+(n.max-n.min)},x:(e,t)=>{let{transform:n}=t;return $n(n,"x")},y:(e,t)=>{let{transform:n}=t;return $n(n,"y")}};Bs.translateX=Bs.x,Bs.translateY=Bs.y;const Vs=e=>e,qs={},Hs=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],Ws={value:null,addProjectionMetrics:null};function Gs(e,t){let n=!1,s=!0;const r={delta:0,timestamp:0,isProcessing:!1},a=()=>n=!0,i=Hs.reduce((e,n)=>(e[n]=function(e,t){let n=new Set,s=new Set,r=!1,a=!1;const i=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1},l=0;function c(t){i.has(t)&&(d.schedule(t),e()),l++,t(o)}const d={schedule:function(e){const t=arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&r?n:s;return arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&i.add(e),t.has(e)||t.add(e),e},cancel:e=>{s.delete(e),i.delete(e)},process:e=>{o=e,r?a=!0:(r=!0,[n,s]=[s,n],n.forEach(c),t&&Ws.value&&Ws.value.frameloop[t].push(l),l=0,n.clear(),r=!1,a&&(a=!1,d.process(e)))}};return d}(a,t?n:void 0),e),{}),{setup:o,read:l,resolveKeyframes:c,preUpdate:d,update:u,preRender:h,render:m,postRender:p}=i,f=()=>{const a=qs.useManualTiming?r.timestamp:performance.now();n=!1,qs.useManualTiming||(r.delta=s?1e3/60:Math.max(Math.min(a-r.timestamp,40),1)),r.timestamp=a,r.isProcessing=!0,o.process(r),l.process(r),c.process(r),d.process(r),u.process(r),h.process(r),m.process(r),p.process(r),r.isProcessing=!1,n&&t&&(s=!1,e(f))},x=Hs.reduce((t,a)=>{const o=i[a];return t[a]=function(t){let a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return n||(n=!0,s=!0,r.isProcessing||e(f)),o.schedule(t,a,i)},t},{});return{schedule:x,cancel:e=>{for(let t=0;t<Hs.length;t++)i[Hs[t]].cancel(e)},state:r,steps:i}}const{schedule:Ks,cancel:Js,state:Zs,steps:$s}=Gs("undefined"!==typeof requestAnimationFrame?requestAnimationFrame:Vs,!0),Qs=new Set;let Ys=!1,Xs=!1,er=!1;function tr(){if(Xs){const e=Array.from(Qs).filter(e=>e.needsMeasurement),t=new Set(e.map(e=>e.element)),n=new Map;t.forEach(e=>{const t=function(e){const t=[];return Us.forEach(n=>{const s=e.getValue(n);void 0!==s&&(t.push([n,s.get()]),s.set(n.startsWith("scale")?1:0))}),t}(e);t.length&&(n.set(e,t),e.render())}),e.forEach(e=>e.measureInitialState()),t.forEach(e=>{e.render();const t=n.get(e);t&&t.forEach(t=>{var n;let[s,r]=t;null===(n=e.getValue(s))||void 0===n||n.set(r)})}),e.forEach(e=>e.measureEndState()),e.forEach(e=>{void 0!==e.suspendedScrollY&&window.scrollTo(0,e.suspendedScrollY)})}Xs=!1,Ys=!1,Qs.forEach(e=>e.complete(er)),Qs.clear()}function nr(){Qs.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(Xs=!0)})}class sr{constructor(e,t,n,s,r){let a=arguments.length>5&&void 0!==arguments[5]&&arguments[5];this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=n,this.motionValue=s,this.element=r,this.isAsync=a}scheduleResolve(){this.state="scheduled",this.isAsync?(Qs.add(this),Ys||(Ys=!0,Ks.read(nr),Ks.resolveKeyframes(tr))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:n,motionValue:s}=this;if(null===e[0]){const r=null===s||void 0===s?void 0:s.get(),a=e[e.length-1];if(void 0!==r)e[0]=r;else if(n&&t){const s=n.readValue(t,a);void 0!==s&&null!==s&&(e[0]=s)}void 0===e[0]&&(e[0]=a),s&&void 0===r&&s.set(e[0])}!function(e){for(let n=1;n<e.length;n++){var t;null!==(t=e[n])&&void 0!==t||(e[n]=e[n-1])}}(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Qs.delete(this)}cancel(){"scheduled"===this.state&&(Qs.delete(this),this.state="pending")}resume(){"pending"===this.state&&this.scheduleResolve()}}const rr=e=>/^0(?:[\0-\x08\x0E-\x1F!-\x2D\/-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+$/.test(e);function ar(e){return"number"===typeof e?0===e:null===e||("none"===e||"0"===e||rr(e))}const ir=e=>Math.round(1e5*e)/1e5,or=/-?(?:[0-9]+(?:\.[0-9]+)?|\.[0-9]+)/g;const lr=/^(?:#[0-9a-f]{3,8}|(?:rgb|h[s\u017F]l)a?\((?:-?[\.0-9]+%?[\t-\r ,\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+){2}-?[\.0-9]+%?[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(?:[,\/][\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*)?(?:\b[0-9]+(?:\.[0-9]+)?|\.[0-9]+)?%?\))$/i,cr=(e,t)=>n=>Boolean("string"===typeof n&&lr.test(n)&&n.startsWith(e)||t&&!function(e){return null==e}(n)&&Object.prototype.hasOwnProperty.call(n,t)),dr=(e,t,n)=>s=>{if("string"!==typeof s)return s;const[r,a,i,o]=s.match(or);return{[e]:parseFloat(r),[t]:parseFloat(a),[n]:parseFloat(i),alpha:void 0!==o?parseFloat(o):1}},ur=De(De({},ws),{},{transform:e=>Math.round((e=>js(0,255,e))(e))}),hr={test:cr("rgb","red"),parse:dr("red","green","blue"),transform:e=>{let{red:t,green:n,blue:s,alpha:r=1}=e;return"rgba("+ur.transform(t)+", "+ur.transform(n)+", "+ur.transform(s)+", "+ir(Ns.transform(r))+")"}};const mr={test:cr("#"),parse:function(e){let t="",n="",s="",r="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),s=e.substring(5,7),r=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),s=e.substring(3,4),r=e.substring(4,5),t+=t,n+=n,s+=s,r+=r),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(s,16),alpha:r?parseInt(r,16)/255:1}},transform:hr.transform},pr={test:cr("hsl","hue"),parse:dr("hue","saturation","lightness"),transform:e=>{let{hue:t,saturation:n,lightness:s,alpha:r=1}=e;return"hsla("+Math.round(t)+", "+_s.transform(ir(n))+", "+_s.transform(ir(s))+", "+ir(Ns.transform(r))+")"}},fr={test:e=>hr.test(e)||mr.test(e)||pr.test(e),parse:e=>hr.test(e)?hr.parse(e):pr.test(e)?pr.parse(e):mr.parse(e),transform:e=>"string"===typeof e?e:e.hasOwnProperty("red")?hr.transform(e):pr.transform(e),getAnimatableNone:e=>{const t=fr.parse(e);return t.alpha=0,fr.transform(t)}},xr=/(?:#[0-9a-f]{3,8}|(?:rgb|h[s\u017F]l)a?\((?:-?[\.0-9]+%?[\t-\r ,\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+){2}-?[\.0-9]+%?[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(?:[,\/][\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*)?(?:\b[0-9]+(?:\.[0-9]+)?|\.[0-9]+)?%?\))/gi;const gr="number",vr="color",yr=/var[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*\([\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*--(?:[\x2D0-9A-Z_a-z\u017F\u212A]+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*|[\x2D0-9A-Z_a-z\u017F\u212A]+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*,(?:[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(?:(?![\t-\r \(\)\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uD800-\uDFFF\uFEFF])[^]|[\uD800-\uDBFF][\uDC00-\uDFFF])|[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*\((?:(?:(?![\(\)\uD800-\uDFFF])[^]|[\uD800-\uDBFF][\uDC00-\uDFFF])|\((?:(?![\(\)\uD800-\uDFFF])[^]|[\uD800-\uDBFF][\uDC00-\uDFFF])*\))*\))+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*)\)|#[0-9a-f]{3,8}|(?:rgb|h[s\u017F]l)a?\((?:-?[\.0-9]+%?[\t-\r ,\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+){2}-?[\.0-9]+%?[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(?:[,\/][\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*)?(?:\b[0-9]+(?:\.[0-9]+)?|\.[0-9]+)?%?\)|-?(?:[0-9]+(?:\.[0-9]+)?|\.[0-9]+)/gi;function br(e){const t=e.toString(),n=[],s={color:[],number:[],var:[]},r=[];let a=0;const i=t.replace(yr,e=>(fr.test(e)?(s.color.push(a),r.push(vr),n.push(fr.parse(e))):e.startsWith("var(")?(s.var.push(a),r.push("var"),n.push(e)):(s.number.push(a),r.push(gr),n.push(parseFloat(e))),++a,"${}")).split("${}");return{values:n,split:i,indexes:s,types:r}}function jr(e){return br(e).values}function wr(e){const{split:t,types:n}=br(e),s=t.length;return e=>{let r="";for(let a=0;a<s;a++)if(r+=t[a],void 0!==e[a]){const t=n[a];r+=t===gr?ir(e[a]):t===vr?fr.transform(e[a]):e[a]}return r}}const Nr=e=>"number"===typeof e?0:fr.test(e)?fr.getAnimatableNone(e):e;const kr={test:function(e){var t,n;return isNaN(e)&&"string"===typeof e&&((null===(t=e.match(or))||void 0===t?void 0:t.length)||0)+((null===(n=e.match(xr))||void 0===n?void 0:n.length)||0)>0},parse:jr,createTransformer:wr,getAnimatableNone:function(e){const t=jr(e);return wr(e)(t.map(Nr))}},Sr=new Set(["brightness","contrast","saturate","opacity"]);function Er(e){const[t,n]=e.slice(0,-1).split("(");if("drop-shadow"===t)return e;const[s]=n.match(or)||[];if(!s)return e;const r=n.replace(s,"");let a=Sr.has(t)?1:0;return s!==n&&(a*=100),t+"("+a+r+")"}const _r=/\b([\x2Da-z]*)\((?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?\)/g,Cr=De(De({},kr),{},{getAnimatableNone:e=>{const t=e.match(_r);return t?t.map(Er).join(" "):e}}),Pr=De(De({},ws),{},{transform:Math.round}),Tr=De(De({borderWidth:Cs,borderTopWidth:Cs,borderRightWidth:Cs,borderBottomWidth:Cs,borderLeftWidth:Cs,borderRadius:Cs,radius:Cs,borderTopLeftRadius:Cs,borderTopRightRadius:Cs,borderBottomRightRadius:Cs,borderBottomLeftRadius:Cs,width:Cs,maxWidth:Cs,height:Cs,maxHeight:Cs,top:Cs,right:Cs,bottom:Cs,left:Cs,padding:Cs,paddingTop:Cs,paddingRight:Cs,paddingBottom:Cs,paddingLeft:Cs,margin:Cs,marginTop:Cs,marginRight:Cs,marginBottom:Cs,marginLeft:Cs,backgroundPositionX:Cs,backgroundPositionY:Cs},{rotate:Es,rotateX:Es,rotateY:Es,rotateZ:Es,scale:ks,scaleX:ks,scaleY:ks,scaleZ:ks,skew:Es,skewX:Es,skewY:Es,distance:Cs,translateX:Cs,translateY:Cs,translateZ:Cs,x:Cs,y:Cs,z:Cs,perspective:Cs,transformPerspective:Cs,opacity:Ns,originX:As,originY:As,originZ:Cs}),{},{zIndex:Pr,fillOpacity:Ns,strokeOpacity:Ns,numOctaves:Pr}),Ar=De(De({},Tr),{},{color:fr,backgroundColor:fr,outlineColor:fr,fill:fr,stroke:fr,borderColor:fr,borderTopColor:fr,borderRightColor:fr,borderBottomColor:fr,borderLeftColor:fr,filter:Cr,WebkitFilter:Cr}),Ir=e=>Ar[e];function Rr(e,t){let n=Ir(e);return n!==Cr&&(n=kr),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const Or=new Set(["auto","none","0"]);class Lr extends sr{constructor(e,t,n,s,r){super(e,t,n,s,r,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:n}=this;if(!t||!t.current)return;super.readKeyframes();for(let o=0;o<e.length;o++){let n=e[o];if("string"===typeof n&&(n=n.trim(),ts(n))){const s=Ds(n,t.current);void 0!==s&&(e[o]=s),o===e.length-1&&(this.finalKeyframe=n)}}if(this.resolveNoneKeyframes(),!bs.has(n)||2!==e.length)return;const[s,r]=e,a=Os(s),i=Os(r);if(a!==i)if(Ms(a)&&Ms(i))for(let o=0;o<e.length;o++){const t=e[o];"string"===typeof t&&(e[o]=parseFloat(t))}else Bs[n]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,n=[];for(let s=0;s<e.length;s++)(null===e[s]||ar(e[s]))&&n.push(s);n.length&&function(e,t,n){let s,r=0;for(;r<e.length&&!s;){const t=e[r];"string"===typeof t&&!Or.has(t)&&br(t).values.length&&(s=e[r]),r++}if(s&&n)for(const a of t)e[a]=Rr(n,s)}(e,n,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:n}=this;if(!e||!e.current)return;"height"===n&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Bs[n](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const s=t[t.length-1];void 0!==s&&e.getValue(n,s).jump(s,!1)}measureEndState(){var e;const{element:t,name:n,unresolvedKeyframes:s}=this;if(!t||!t.current)return;const r=t.getValue(n);r&&r.jump(this.measuredOrigin,!1);const a=s.length-1,i=s[a];s[a]=Bs[n](t.measureViewportBox(),window.getComputedStyle(t.current)),null!==i&&void 0===this.finalKeyframe&&(this.finalKeyframe=i),null!==(e=this.removedTransforms)&&void 0!==e&&e.length&&this.removedTransforms.forEach(e=>{let[n,s]=e;t.getValue(n).set(s)}),this.resolveNoneKeyframes()}}const zr=e=>Boolean(e&&e.getVelocity);let Dr;function Mr(){Dr=void 0}const Fr={now:()=>(void 0===Dr&&Fr.set(Zs.isProcessing||qs.useManualTiming?Zs.timestamp:performance.now()),Dr),set:e=>{Dr=e,queueMicrotask(Mr)}};function Ur(e,t){-1===e.indexOf(t)&&e.push(t)}function Br(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class Vr{constructor(){this.subscriptions=[]}add(e){return Ur(this.subscriptions,e),()=>Br(this.subscriptions,e)}notify(e,t,n){const s=this.subscriptions.length;if(s)if(1===s)this.subscriptions[0](e,t,n);else for(let r=0;r<s;r++){const s=this.subscriptions[r];s&&s(e,t,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function qr(e,t){return t?e*(1e3/t):0}const Hr={current:void 0};class Wr{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.canTrackVelocity=null,this.events={},this.updateAndNotify=e=>{const t=Fr.now();var n;if((this.updatedAt!==t&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(e),this.current!==this.prev)&&(null===(n=this.events.change)||void 0===n||n.notify(this.current),this.dependents))for(const s of this.dependents)s.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){var t;this.current=e,this.updatedAt=Fr.now(),null===this.canTrackVelocity&&void 0!==e&&(this.canTrackVelocity=(t=this.current,!isNaN(parseFloat(t))))}setPrevFrameValue(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.current;this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new Vr);const n=this.events[e].add(t);return"change"===e?()=>{n(),Ks.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,t,n){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-n}jump(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;null===(e=this.events.change)||void 0===e||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return Hr.current&&Hr.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const e=Fr.now();if(!this.canTrackVelocity||void 0===this.prevFrameValue||e-this.updatedAt>30)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,30);return qr(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,t;null===(e=this.dependents)||void 0===e||e.clear(),null===(t=this.events.destroy)||void 0===t||t.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Gr(e,t){return new Wr(e,t)}const Kr=[...Rs,fr,kr],{schedule:Jr,cancel:Zr}=Gs(queueMicrotask,!1),$r={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Qr={};for(const n in $r)Qr[n]={isEnabled:e=>$r[n].some(t=>!!e[t])};const Yr=()=>({x:{min:0,max:0},y:{min:0,max:0}}),Xr="undefined"!==typeof window,ea={current:null},ta={current:!1};const na=new WeakMap;function sa(e){return null!==e&&"object"===typeof e&&"function"===typeof e.start}function ra(e){return"string"===typeof e||Array.isArray(e)}const aa=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],ia=["initial",...aa];function oa(e){return sa(e.animate)||ia.some(t=>ra(e[t]))}function la(e){return Boolean(oa(e)||e.variants)}function ca(e){const t=[{},{}];return null===e||void 0===e||e.values.forEach((e,n)=>{t[0][n]=e.get(),t[1][n]=e.getVelocity()}),t}function da(e,t,n,s){if("function"===typeof t){const[r,a]=ca(s);t=t(void 0!==n?n:e.custom,r,a)}if("string"===typeof t&&(t=e.variants&&e.variants[t]),"function"===typeof t){const[r,a]=ca(s);t=t(void 0!==n?n:e.custom,r,a)}return t}const ua=["willChange"],ha=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class ma{scrapeMotionValuesFromProps(e,t,n){return{}}constructor(e){let{parent:t,props:n,presenceContext:s,reducedMotionConfig:r,blockInitialAnimation:a,visualState:i}=e,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=sr,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const e=Fr.now();this.renderScheduledAt<e&&(this.renderScheduledAt=e,Ks.render(this.render,!1,!0))};const{latestValues:l,renderState:c}=i;this.latestValues=l,this.baseTarget=De({},l),this.initialValues=n.initial?De({},l):{},this.renderState=c,this.parent=t,this.props=n,this.presenceContext=s,this.depth=t?t.depth+1:0,this.reducedMotionConfig=r,this.options=o,this.blockInitialAnimation=Boolean(a),this.isControllingVariants=oa(n),this.isVariantNode=la(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=Boolean(t&&t.current);const d=this.scrapeMotionValuesFromProps(n,{},this),{willChange:u}=d,h=$e(d,ua);for(const m in h){const e=h[m];void 0!==l[m]&&zr(e)&&e.set(l[m])}}mount(e){var t;this.current=e,na.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((e,t)=>this.bindToMotionValue(t,e)),ta.current||function(){if(ta.current=!0,Xr)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>ea.current=e.matches;e.addEventListener("change",t),t()}else ea.current=!1}(),this.shouldReduceMotion="never"!==this.reducedMotionConfig&&("always"===this.reducedMotionConfig||ea.current),null===(t=this.parent)||void 0===t||t.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var e;this.projection&&this.projection.unmount(),Js(this.notifyUpdate),Js(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),null===(e=this.parent)||void 0===e||e.removeChild(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const e=this.features[t];e&&(e.unmount(),e.isMounted=!1)}this.current=null}addChild(e){var t;this.children.add(e),null!==(t=this.enteringChildren)&&void 0!==t||(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const n=Bn.has(e);n&&this.onBindTransform&&this.onBindTransform();const s=t.on("change",t=>{this.latestValues[e]=t,this.props.onUpdate&&Ks.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let r;window.MotionCheckAppearSync&&(r=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{s(),r&&r(),t.owner&&t.stop()})}sortNodePosition(e){return this.current&&this.sortInstanceNodePosition&&this.type===e.type?this.sortInstanceNodePosition(this.current,e.current):0}updateFeatures(){let e="animation";for(e in Qr){const t=Qr[e];if(!t)continue;const{isEnabled:n,Feature:s}=t;if(!this.features[e]&&s&&n(this.props)&&(this.features[e]=new s(this)),this.features[e]){const t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):{x:{min:0,max:0},y:{min:0,max:0}}}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let n=0;n<ha.length;n++){const t=ha[n];this.propEventSubscriptions[t]&&(this.propEventSubscriptions[t](),delete this.propEventSubscriptions[t]);const s=e["on"+t];s&&(this.propEventSubscriptions[t]=this.on(t,s))}this.prevMotionValues=function(e,t,n){for(const s in t){const r=t[s],a=n[s];if(zr(r))e.addValue(s,r);else if(zr(a))e.addValue(s,Gr(r,{owner:e}));else if(a!==r)if(e.hasValue(s)){const t=e.getValue(s);!0===t.liveStyle?t.jump(r):t.hasAnimated||t.set(r)}else{const t=e.getStaticValue(s);e.addValue(s,Gr(void 0!==t?t:r,{owner:e}))}}for(const s in n)void 0===t[s]&&e.removeValue(s);return t}(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const n=this.values.get(e);t!==n&&(n&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return void 0===n&&void 0!==t&&(n=Gr(null===t?void 0:t,{owner:this}),this.addValue(e,n)),n}readValue(e,t){var n;let s=void 0===this.latestValues[e]&&this.current?null!==(n=this.getBaseTargetFromProps(this.props,e))&&void 0!==n?n:this.readValueFromInstance(this.current,e,this.options):this.latestValues[e];return void 0!==s&&null!==s&&("string"===typeof s&&(Ls(s)||rr(s))?s=parseFloat(s):!(e=>Kr.find(Is(e)))(s)&&kr.test(t)&&(s=Rr(e,t)),this.setBaseTarget(e,zr(s)?s.get():s)),zr(s)?s.get():s}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){const{initial:t}=this.props;let n;if("string"===typeof t||"object"===typeof t){var s;const r=da(this.props,t,null===(s=this.presenceContext)||void 0===s?void 0:s.custom);r&&(n=r[e])}if(t&&void 0!==n)return n;const r=this.getBaseTargetFromProps(this.props,e);return void 0===r||zr(r)?void 0!==this.initialValues[e]&&void 0===n?void 0:this.baseTarget[e]:r}on(e,t){return this.events[e]||(this.events[e]=new Vr),this.events[e].add(t)}notify(e){if(this.events[e]){for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];this.events[e].notify(...n)}}scheduleRenderMicrotask(){Jr.render(this.render)}}class pa extends ma{constructor(){super(...arguments),this.KeyframeResolver=Lr}sortInstanceNodePosition(e,t){return 2&e.compareDocumentPosition(t)?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,t){let{vars:n,style:s}=t;delete n[e],delete s[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;zr(e)&&(this.childSubscription=e.on("change",e=>{this.current&&(this.current.textContent="".concat(e))}))}}const fa=(e,t)=>t&&"number"===typeof e?t.transform(e):e,xa={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},ga=Un.length;function va(e,t,n){const{style:s,vars:r,transformOrigin:a}=e;let i=!1,o=!1;for(const l in t){const e=t[l];if(Bn.has(l))i=!0;else if(Xn(l))r[l]=e;else{const t=fa(e,Tr[l]);l.startsWith("origin")?(o=!0,a[l]=t):s[l]=t}}if(t.transform||(i||n?s.transform=function(e,t,n){let s="",r=!0;for(let a=0;a<ga;a++){const i=Un[a],o=e[i];if(void 0===o)continue;let l=!0;if(l="number"===typeof o?o===(i.startsWith("scale")?1:0):0===parseFloat(o),!l||n){const e=fa(o,Tr[i]);l||(r=!1,s+="".concat(xa[i]||i,"(").concat(e,") ")),n&&(t[i]=e)}}return s=s.trim(),n?s=n(t,r?"":s):r&&(s="none"),s}(t,e.transform,n):s.transform&&(s.transform="none")),o){const{originX:e="50%",originY:t="50%",originZ:n=0}=a;s.transformOrigin="".concat(e," ").concat(t," ").concat(n)}}function ya(e,t,n,s){let{style:r,vars:a}=t;const i=e.style;let o;for(o in r)i[o]=r[o];for(o in null===s||void 0===s||s.applyProjectionStyles(i,n),a)i.setProperty(o,a[o])}const ba={};function ja(e,t){let{layout:n,layoutId:s}=t;return Bn.has(e)||e.startsWith("origin")||(n||void 0!==s)&&(!!ba[e]||"opacity"===e)}function wa(e,t,n){const{style:s}=e,r={};for(const i in s){var a;(zr(s[i])||t.style&&zr(t.style[i])||ja(i,e)||void 0!==(null===n||void 0===n||null===(a=n.getValue(i))||void 0===a?void 0:a.liveStyle))&&(r[i]=s[i])}return r}class Na extends pa{constructor(){super(...arguments),this.type="html",this.renderInstance=ya}readValueFromInstance(e,t){var n,s;if(Bn.has(t))return null!==(n=this.projection)&&void 0!==n&&n.isProjecting?Zn(t):((e,t)=>{const{transform:n="none"}=getComputedStyle(e);return $n(n,t)})(e,t);{const n=(s=e,window.getComputedStyle(s)),r=(Xn(t)?n.getPropertyValue(t):n[t])||0;return"string"===typeof r?r.trim():r}}measureInstanceViewportBox(e,t){let{transformPagePoint:n}=t;return ys(e,n)}build(e,t,n){va(e,t,n.transformTemplate)}scrapeMotionValuesFromProps(e,t,n){return wa(e,t,n)}}const ka=e=>e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),Sa={offset:"stroke-dashoffset",array:"stroke-dasharray"},Ea={offset:"strokeDashoffset",array:"strokeDasharray"};const _a=["attrX","attrY","attrScale","pathLength","pathSpacing","pathOffset"];function Ca(e,t,n,s,r){let{attrX:a,attrY:i,attrScale:o,pathLength:l,pathSpacing:c=1,pathOffset:d=0}=t;if(va(e,$e(t,_a),s),n)return void(e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox));e.attrs=e.style,e.style={};const{attrs:u,style:h}=e;var m,p;(u.transform&&(h.transform=u.transform,delete u.transform),h.transform||u.transformOrigin)&&(h.transformOrigin=null!==(m=u.transformOrigin)&&void 0!==m?m:"50% 50%",delete u.transformOrigin);h.transform&&(h.transformBox=null!==(p=null===r||void 0===r?void 0:r.transformBox)&&void 0!==p?p:"fill-box",delete u.transformBox);void 0!==a&&(u.x=a),void 0!==i&&(u.y=i),void 0!==o&&(u.scale=o),void 0!==l&&function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];e.pathLength=1;const a=r?Sa:Ea;e[a.offset]=Cs.transform(-s);const i=Cs.transform(t),o=Cs.transform(n);e[a.array]="".concat(i," ").concat(o)}(u,l,c,d,!1)}const Pa=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]),Ta=e=>"string"===typeof e&&"svg"===e.toLowerCase();function Aa(e,t,n){const s=wa(e,t,n);for(const r in e)if(zr(e[r])||zr(t[r])){s[-1!==Un.indexOf(r)?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r]=e[r]}return s}class Ia extends pa{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Yr}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(Bn.has(t)){const e=Ir(t);return e&&e.default||0}return t=Pa.has(t)?t:ka(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,n){return Aa(e,t,n)}build(e,t,n){Ca(e,t,this.isSVGTag,n.transformTemplate,n.style)}renderInstance(e,t,n,s){!function(e,t,n,s){ya(e,t,void 0,s);for(const r in t.attrs)e.setAttribute(Pa.has(r)?r:ka(r),t.attrs[r])}(e,t,0,s)}mount(e){this.isSVGTag=Ta(e.tagName),super.mount(e)}}const Ra=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Oa(e){return"string"===typeof e&&!e.includes("-")&&!!(Ra.indexOf(e)>-1||/[A-Z]/.test(e))}const La=(e,n)=>Oa(e)?new Ia(n):new Na(n,{allowProjection:e!==t.Fragment}),za=(0,t.createContext)({}),Da=(0,t.createContext)({strict:!1}),Ma=(0,t.createContext)({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),Fa=(0,t.createContext)({});function Ua(e){const{initial:n,animate:s}=function(e,t){if(oa(e)){const{initial:t,animate:n}=e;return{initial:!1===t||ra(t)?t:void 0,animate:ra(n)?n:void 0}}return!1!==e.inherit?t:{}}(e,(0,t.useContext)(Fa));return(0,t.useMemo)(()=>({initial:n,animate:s}),[Ba(n),Ba(s)])}function Ba(e){return Array.isArray(e)?e.join(" "):e}const Va=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function qa(e,t,n){for(const s in t)zr(t[s])||ja(s,n)||(e[s]=t[s])}function Ha(e,n){const s={};return qa(s,e.style||{},e),Object.assign(s,function(e,n){let{transformTemplate:s}=e;return(0,t.useMemo)(()=>{const e={style:{},transform:{},transformOrigin:{},vars:{}};return va(e,n,s),Object.assign({},e.vars,e.style)},[n])}(e,n)),s}function Wa(e,t){const n={},s=Ha(e,t);return e.drag&&!1!==e.dragListener&&(n.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=!0===e.drag?"none":"pan-".concat("x"===e.drag?"y":"x")),void 0===e.tabIndex&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=s,n}const Ga=()=>De(De({},{style:{},transform:{},transformOrigin:{},vars:{}}),{},{attrs:{}});function Ka(e,n,s,r){const a=(0,t.useMemo)(()=>{const t=Ga();return Ca(t,n,Ta(r),e.transformTemplate,e.style),De(De({},t.attrs),{},{style:De({},t.style)})},[n]);if(e.style){const t={};qa(t,e.style,e),a.style=De(De({},t),a.style)}return a}const Ja=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Za(e){return e.startsWith("while")||e.startsWith("drag")&&"draggable"!==e||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||Ja.has(e)}let $a=e=>!Za(e);try{"function"===typeof(Qa=require("@emotion/is-prop-valid").default)&&($a=e=>e.startsWith("on")?!Za(e):Qa(e))}catch(Lm){}var Qa;function Ya(e,n,s,r,a){let{latestValues:i}=r,o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];const l=(Oa(e)?Ka:Wa)(n,i,a,e),c=function(e,t,n){const s={};for(const r in e)"values"===r&&"object"===typeof e.values||($a(r)||!0===n&&Za(r)||!t&&!Za(r)||e.draggable&&r.startsWith("onDrag"))&&(s[r]=e[r]);return s}(n,"string"===typeof e,o),d=e!==t.Fragment?De(De(De({},c),l),{},{ref:s}):{},{children:u}=n,h=(0,t.useMemo)(()=>zr(u)?u.get():u,[u]);return(0,t.createElement)(e,De(De({},d),{},{children:h}))}const Xa=(0,t.createContext)(null);function ei(e){const n=(0,t.useRef)(null);return null===n.current&&(n.current=e()),n.current}function ti(e){return zr(e)?e.get():e}const ni=["transitionEnd","transition"];function si(e,t,n,s){const r={},a=s(e,{});for(const h in a)r[h]=ti(a[h]);let{initial:i,animate:o}=e;const l=oa(e),c=la(e);t&&c&&!l&&!1!==e.inherit&&(void 0===i&&(i=t.initial),void 0===o&&(o=t.animate));let d=!!n&&!1===n.initial;d=d||!1===i;const u=d?o:i;if(u&&"boolean"!==typeof u&&!sa(u)){const t=Array.isArray(u)?u:[u];for(let n=0;n<t.length;n++){const s=da(e,t[n]);if(s){const{transitionEnd:e,transition:t}=s,n=$e(s,ni);for(const s in n){let e=n[s];if(Array.isArray(e)){e=e[d?e.length-1:0]}null!==e&&(r[s]=e)}for(const s in e)r[s]=e[s]}}}return r}const ri=e=>(n,s)=>{const r=(0,t.useContext)(Fa),a=(0,t.useContext)(Xa),i=()=>function(e,t,n,s){let{scrapeMotionValuesFromProps:r,createRenderState:a}=e;return{latestValues:si(t,n,s,r),renderState:a()}}(e,n,r,a);return s?i():ei(i)},ai=ri({scrapeMotionValuesFromProps:wa,createRenderState:Va}),ii=ri({scrapeMotionValuesFromProps:Aa,createRenderState:Ga});const oi=Symbol.for("motionComponentSymbol");function li(e){return e&&"object"===typeof e&&Object.prototype.hasOwnProperty.call(e,"current")}function ci(e,n,s){return(0,t.useCallback)(t=>{t&&e.onMount&&e.onMount(t),n&&(t?n.mount(t):n.unmount()),s&&("function"===typeof s?s(t):li(s)&&(s.current=t))},[n])}const di="data-"+ka("framerAppearId"),ui=(0,t.createContext)({}),hi=Xr?t.useLayoutEffect:t.useEffect;function mi(e,n,s,r,a){var i,o,l,c;const{visualElement:d}=(0,t.useContext)(Fa),u=(0,t.useContext)(Da),h=(0,t.useContext)(Xa),m=(0,t.useContext)(Ma).reducedMotion,p=(0,t.useRef)(null);r=r||u.renderer,!p.current&&r&&(p.current=r(e,{visualState:n,parent:d,props:s,presenceContext:h,blockInitialAnimation:!!h&&!1===h.initial,reducedMotionConfig:m}));const f=p.current,x=(0,t.useContext)(ui);!f||f.projection||!a||"html"!==f.type&&"svg"!==f.type||function(e,t,n,s){const{layoutId:r,layout:a,drag:i,dragConstraints:o,layoutScroll:l,layoutRoot:c,layoutCrossfade:d}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:pi(e.parent)),e.projection.setOptions({layoutId:r,layout:a,alwaysMeasureLayout:Boolean(i)||o&&li(o),visualElement:e,animationType:"string"===typeof a?a:"both",initialPromotionConfig:s,crossfade:d,layoutScroll:l,layoutRoot:c})}(p.current,s,a,x);const g=(0,t.useRef)(!1);(0,t.useInsertionEffect)(()=>{f&&g.current&&f.update(s,h)});const v=s[di],y=(0,t.useRef)(Boolean(v)&&!(null!==(i=(o=window).MotionHandoffIsComplete)&&void 0!==i&&i.call(o,v))&&(null===(l=(c=window).MotionHasOptimisedAnimation)||void 0===l?void 0:l.call(c,v)));return hi(()=>{f&&(g.current=!0,window.MotionIsMounted=!0,f.updateFeatures(),f.scheduleRenderMicrotask(),y.current&&f.animationState&&f.animationState.animateChanges())}),(0,t.useEffect)(()=>{f&&(!y.current&&f.animationState&&f.animationState.animateChanges(),y.current&&(queueMicrotask(()=>{var e,t;null===(e=(t=window).MotionHandoffMarkAsComplete)||void 0===e||e.call(t,v)}),y.current=!1),f.enteringChildren=void 0)}),f}function pi(e){if(e)return!1!==e.options.allowProjection?e.projection:pi(e.parent)}function fi(e){var n,s;let{forwardMotionProps:r=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;a&&function(e){for(const t in e)Qr[t]=De(De({},Qr[t]),e[t])}(a);const o=Oa(e)?ii:ai;function l(n,s){let a;const l=De(De(De({},(0,t.useContext)(Ma)),n),{},{layoutId:xi(n)}),{isStatic:c}=l,d=Ua(n),u=o(n,c);if(!c&&Xr){!function(){(0,t.useContext)(Da).strict;0}();const n=function(e){const{drag:t,layout:n}=Qr;if(!t&&!n)return{};const s=De(De({},t),n);return{MeasureLayout:null!==t&&void 0!==t&&t.isEnabled(e)||null!==n&&void 0!==n&&n.isEnabled(e)?s.MeasureLayout:void 0,ProjectionNode:s.ProjectionNode}}(l);a=n.MeasureLayout,d.visualElement=mi(e,u,l,i,n.ProjectionNode)}return(0,Ge.jsxs)(Fa.Provider,{value:d,children:[a&&d.visualElement?(0,Ge.jsx)(a,De({visualElement:d.visualElement},l)):null,Ya(e,n,ci(u,d.visualElement,s),u,c,r)]})}l.displayName="motion.".concat("string"===typeof e?e:"create(".concat(null!==(n=null!==(s=e.displayName)&&void 0!==s?s:e.name)&&void 0!==n?n:"",")"));const c=(0,t.forwardRef)(l);return c[oi]=e,c}function xi(e){let{layoutId:n}=e;const s=(0,t.useContext)(za).id;return s&&void 0!==n?s+"-"+n:n}function gi(e,t){if("undefined"===typeof Proxy)return fi;const n=new Map,s=(n,s)=>fi(n,s,e,t);return new Proxy((e,t)=>s(e,t),{get:(r,a)=>"create"===a?s:(n.has(a)||n.set(a,fi(a,void 0,e,t)),n.get(a))})}function vi(e,t,n){const s=e.getProps();return da(s,t,void 0!==n?n:s.custom,e)}function yi(e,t){var n,s;return null!==(n=null!==(s=null===e||void 0===e?void 0:e[t])&&void 0!==s?s:null===e||void 0===e?void 0:e.default)&&void 0!==n?n:e}const bi=e=>Array.isArray(e),ji=["transitionEnd","transition"];function wi(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,Gr(n))}function Ni(e){return bi(e)?e[e.length-1]||0:e}function ki(e,t){const n=e.getValue("willChange");if(s=n,Boolean(zr(s)&&s.add))return n.add(t);if(!n&&qs.WillChange){const n=new qs.WillChange("auto");e.addValue("willChange",n),n.add(t)}var s}function Si(e){return e.props[di]}function Ei(e){e.duration=0,e.type}const _i=(e,t)=>n=>t(e(n)),Ci=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(_i)},Pi=e=>1e3*e,Ti=e=>e/1e3,Ai={layout:0,mainThread:0,waapi:0};function Ii(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function Ri(e,t){return n=>n>0?t:e}const Oi=(e,t,n)=>{const s=e*e,r=n*(t*t-s)+s;return r<0?0:Math.sqrt(r)},Li=[mr,hr,pr];function zi(e){const t=(e=>Li.find(t=>t.test(e)))(e);if(Boolean(t),"'".concat(e,"' is not an animatable color. Use the equivalent color code instead."),!Boolean(t))return!1;let n=t.parse(e);return t===pr&&(n=function(e){let{hue:t,saturation:n,lightness:s,alpha:r}=e;t/=360,n/=100,s/=100;let a=0,i=0,o=0;if(n){const e=s<.5?s*(1+n):s+n-s*n,r=2*s-e;a=Ii(r,e,t+1/3),i=Ii(r,e,t),o=Ii(r,e,t-1/3)}else a=i=o=s;return{red:Math.round(255*a),green:Math.round(255*i),blue:Math.round(255*o),alpha:r}}(n)),n}const Di=(e,t)=>{const n=zi(e),s=zi(t);if(!n||!s)return Ri(e,t);const r=De({},n);return e=>(r.red=Oi(n.red,s.red,e),r.green=Oi(n.green,s.green,e),r.blue=Oi(n.blue,s.blue,e),r.alpha=rs(n.alpha,s.alpha,e),hr.transform(r))},Mi=new Set(["none","hidden"]);function Fi(e,t){return n=>rs(e,t,n)}function Ui(e){return"number"===typeof e?Fi:"string"===typeof e?ts(e)?Ri:fr.test(e)?Di:qi:Array.isArray(e)?Bi:"object"===typeof e?fr.test(e)?Di:Vi:Ri}function Bi(e,t){const n=[...e],s=n.length,r=e.map((e,n)=>Ui(e)(e,t[n]));return e=>{for(let t=0;t<s;t++)n[t]=r[t](e);return n}}function Vi(e,t){const n=De(De({},e),t),s={};for(const r in n)void 0!==e[r]&&void 0!==t[r]&&(s[r]=Ui(e[r])(e[r],t[r]));return e=>{for(const t in s)n[t]=s[t](e);return n}}const qi=(e,t)=>{const n=kr.createTransformer(t),s=br(e),r=br(t);return s.indexes.var.length===r.indexes.var.length&&s.indexes.color.length===r.indexes.color.length&&s.indexes.number.length>=r.indexes.number.length?Mi.has(e)&&!r.values.length||Mi.has(t)&&!s.values.length?function(e,t){return Mi.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}(e,t):Ci(Bi(function(e,t){const n=[],s={color:0,var:0,number:0};for(let a=0;a<t.values.length;a++){var r;const i=t.types[a],o=e.indexes[i][s[i]],l=null!==(r=e.values[o])&&void 0!==r?r:0;n[a]=l,s[i]++}return n}(s,r),r.values),n):("Complex values '".concat(e,"' and '").concat(t,"' too different to mix. Ensure all colors are of the same type, and that each contains the same quantity of number and color values. Falling back to instant transition."),Ri(e,t))};function Hi(e,t,n){if("number"===typeof e&&"number"===typeof t&&"number"===typeof n)return rs(e,t,n);return Ui(e)(e,t)}const Wi=e=>{const t=t=>{let{timestamp:n}=t;return e(n)};return{start:function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return Ks.update(t,e)},stop:()=>Js(t),now:()=>Zs.isProcessing?Zs.timestamp:Fr.now()}},Gi=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,s="";const r=Math.max(Math.round(t/n),2);for(let a=0;a<r;a++)s+=Math.round(1e4*e(a/(r-1)))/1e4+", ";return"linear(".concat(s.substring(0,s.length-2),")")},Ki=2e4;function Ji(e){let t=0;let n=e.next(t);for(;!n.done&&t<Ki;)t+=50,n=e.next(t);return t>=Ki?1/0:t}function Zi(e,t,n){const s=Math.max(t-5,0);return qr(n-e(s),t-s)}const $i={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Qi=.001;function Yi(e){let t,n,{duration:s=$i.duration,bounce:r=$i.bounce,velocity:a=$i.velocity,mass:i=$i.mass}=e;Pi($i.maxDuration);let o=1-r;o=js($i.minDamping,$i.maxDamping,o),s=js($i.minDuration,$i.maxDuration,Ti(s)),o<1?(t=e=>{const t=e*o,n=t*s,r=t-a,i=eo(e,o),l=Math.exp(-n);return Qi-r/i*l},n=e=>{const n=e*o*s,r=n*a+a,i=Math.pow(o,2)*Math.pow(e,2)*s,l=Math.exp(-n),c=eo(Math.pow(e,2),o);return(-t(e)+Qi>0?-1:1)*((r-i)*l)/c}):(t=e=>Math.exp(-e*s)*((e-a)*s+1)-.001,n=e=>Math.exp(-e*s)*(s*s*(a-e)));const l=function(e,t,n){let s=n;for(let r=1;r<Xi;r++)s-=e(s)/t(s);return s}(t,n,5/s);if(s=Pi(s),isNaN(l))return{stiffness:$i.stiffness,damping:$i.damping,duration:s};{const e=Math.pow(l,2)*i;return{stiffness:e,damping:2*o*Math.sqrt(i*e),duration:s}}}const Xi=12;function eo(e,t){return e*Math.sqrt(1-t*t)}const to=["duration","bounce"],no=["stiffness","damping","mass"];function so(e,t){return t.some(t=>void 0!==e[t])}function ro(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$i.visualDuration,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$i.bounce;const n="object"!==typeof e?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:s,restDelta:r}=n;const a=n.keyframes[0],i=n.keyframes[n.keyframes.length-1],o={done:!1,value:a},{stiffness:l,damping:c,mass:d,duration:u,velocity:h,isResolvedFromDuration:m}=function(e){let t=De({velocity:$i.velocity,stiffness:$i.stiffness,damping:$i.damping,mass:$i.mass,isResolvedFromDuration:!1},e);if(!so(e,no)&&so(e,to))if(e.visualDuration){const n=e.visualDuration,s=2*Math.PI/(1.2*n),r=s*s,a=2*js(.05,1,1-(e.bounce||0))*Math.sqrt(r);t=De(De({},t),{},{mass:$i.mass,stiffness:r,damping:a})}else{const n=Yi(e);t=De(De(De({},t),n),{},{mass:$i.mass}),t.isResolvedFromDuration=!0}return t}(De(De({},n),{},{velocity:-Ti(n.velocity||0)})),p=h||0,f=c/(2*Math.sqrt(l*d)),x=i-a,g=Ti(Math.sqrt(l/d)),v=Math.abs(x)<5;let y;if(s||(s=v?$i.restSpeed.granular:$i.restSpeed.default),r||(r=v?$i.restDelta.granular:$i.restDelta.default),f<1){const e=eo(g,f);y=t=>{const n=Math.exp(-f*g*t);return i-n*((p+f*g*x)/e*Math.sin(e*t)+x*Math.cos(e*t))}}else if(1===f)y=e=>i-Math.exp(-g*e)*(x+(p+g*x)*e);else{const e=g*Math.sqrt(f*f-1);y=t=>{const n=Math.exp(-f*g*t),s=Math.min(e*t,300);return i-n*((p+f*g*x)*Math.sinh(s)+e*x*Math.cosh(s))/e}}const b={calculatedDuration:m&&u||null,next:e=>{const t=y(e);if(m)o.done=e>=u;else{let n=0===e?p:0;f<1&&(n=0===e?Pi(p):Zi(y,e,t));const a=Math.abs(n)<=s,l=Math.abs(i-t)<=r;o.done=a&&l}return o.value=o.done?i:t,o},toString:()=>{const e=Math.min(Ji(b),Ki),t=Gi(t=>b.next(e*t).value,e,30);return e+"ms "+t},toTransition:()=>{}};return b}function ao(e){let{keyframes:t,velocity:n=0,power:s=.8,timeConstant:r=325,bounceDamping:a=10,bounceStiffness:i=500,modifyTarget:o,min:l,max:c,restDelta:d=.5,restSpeed:u}=e;const h=t[0],m={done:!1,value:h},p=e=>void 0===l?c:void 0===c||Math.abs(l-e)<Math.abs(c-e)?l:c;let f=s*n;const x=h+f,g=void 0===o?x:o(x);g!==x&&(f=g-h);const v=e=>-f*Math.exp(-e/r),y=e=>g+v(e),b=e=>{const t=v(e),n=y(e);m.done=Math.abs(t)<=d,m.value=m.done?g:n};let j,w;const N=e=>{(e=>void 0!==l&&e<l||void 0!==c&&e>c)(m.value)&&(j=e,w=ro({keyframes:[m.value,p(m.value)],velocity:Zi(y,e,m.value),damping:a,stiffness:i,restDelta:d,restSpeed:u}))};return N(0),{calculatedDuration:null,next:e=>{let t=!1;return w||void 0!==j||(t=!0,b(e),N(e)),void 0!==j&&e>=j?w.next(e-j):(!t&&b(e),m)}}}ro.applyToOptions=e=>{const t=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;const n=(arguments.length>2?arguments[2]:void 0)(De(De({},e),{},{keyframes:[0,t]})),s=Math.min(Ji(n),Ki);return{type:"keyframes",ease:e=>n.next(s*e).value/t,duration:Ti(s)}}(e,100,ro);return e.ease=t.ease,e.duration=Pi(t.duration),e.type="keyframes",e};const io=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e;function oo(e,t,n,s){if(e===t&&n===s)return Vs;const r=t=>function(e,t,n,s,r){let a,i,o=0;do{i=t+(n-t)/2,a=io(i,s,r)-e,a>0?n=i:t=i}while(Math.abs(a)>1e-7&&++o<12);return i}(t,0,1,e,n);return e=>0===e||1===e?e:io(r(e),t,s)}const lo=oo(.42,0,1,1),co=oo(0,0,.58,1),uo=oo(.42,0,.58,1),ho=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,mo=e=>t=>1-e(1-t),po=oo(.33,1.53,.69,.99),fo=mo(po),xo=ho(fo),go=e=>(e*=2)<1?.5*fo(e):.5*(2-Math.pow(2,-10*(e-1))),vo=e=>1-Math.sin(Math.acos(e)),yo=mo(vo),bo=ho(vo),jo=e=>Array.isArray(e)&&"number"===typeof e[0],wo={linear:Vs,easeIn:lo,easeInOut:uo,easeOut:co,circIn:vo,circInOut:bo,circOut:yo,backIn:fo,backInOut:xo,backOut:po,anticipate:go},No=e=>{if(jo(e)){e.length;const[t,n,s,r]=e;return oo(t,n,s,r)}return"string"===typeof e?("Invalid easing type '".concat(e,"'"),wo[e]):e},ko=(e,t,n)=>{const s=t-e;return 0===s?1:(n-e)/s};function So(e,t){let{clamp:n=!0,ease:s,mixer:r}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=e.length;if(t.length,1===a)return()=>t[0];if(2===a&&t[0]===t[1])return()=>t[1];const i=e[0]===e[1];e[0]>e[a-1]&&(e=[...e].reverse(),t=[...t].reverse());const o=function(e,t,n){const s=[],r=n||qs.mix||Hi,a=e.length-1;for(let i=0;i<a;i++){let n=r(e[i],e[i+1]);if(t){const e=Array.isArray(t)?t[i]||Vs:t;n=Ci(e,n)}s.push(n)}return s}(t,s,r),l=o.length,c=n=>{if(i&&n<e[0])return t[0];let s=0;if(l>1)for(;s<e.length-2&&!(n<e[s+1]);s++);const r=ko(e[s],e[s+1],n);return o[s](r)};return n?t=>c(js(e[0],e[a-1],t)):c}function Eo(e){const t=[0];return function(e,t){const n=e[e.length-1];for(let s=1;s<=t;s++){const r=ko(0,t,s);e.push(rs(n,1,r))}}(t,e.length-1),t}function _o(e){let{duration:t=300,keyframes:n,times:s,ease:r="easeInOut"}=e;const a=(e=>Array.isArray(e)&&"number"!==typeof e[0])(r)?r.map(No):No(r),i={done:!1,value:n[0]},o=function(e,t){return e.map(e=>e*t)}(s&&s.length===n.length?s:Eo(n),t),l=So(o,n,{ease:Array.isArray(a)?a:(c=n,d=a,c.map(()=>d||uo).splice(0,c.length-1))});var c,d;return{calculatedDuration:t,next:e=>(i.value=l(e),i.done=e>=t,i)}}const Co=e=>null!==e;function Po(e,t,n){let{repeat:s,repeatType:r="loop"}=t,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;const i=e.filter(Co),o=a<0||s&&"loop"!==r&&s%2===1?0:i.length-1;return o&&void 0!==n?n:i[o]}const To={decay:ao,inertia:ao,tween:_o,keyframes:_o,spring:ro};function Ao(e){"string"===typeof e.type&&(e.type=To[e.type])}class Io{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const Ro=e=>e/100;class Oo extends Io{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var e,t;const{motionValue:n}=this.options;n&&n.updatedAt!==Fr.now()&&this.tick(Fr.now()),this.isStopped=!0,"idle"!==this.state&&(this.teardown(),null===(e=(t=this.options).onStop)||void 0===e||e.call(t))},Ai.mainThread++,this.options=e,this.initAnimation(),this.play(),!1===e.autoplay&&this.pause()}initAnimation(){const{options:e}=this;Ao(e);const{type:t=_o,repeat:n=0,repeatDelay:s=0,repeatType:r,velocity:a=0}=e;let{keyframes:i}=e;const o=t||_o;o!==_o&&"number"!==typeof i[0]&&(this.mixKeyframes=Ci(Ro,Hi(i[0],i[1])),i=[0,100]);const l=o(De(De({},e),{},{keyframes:i}));"mirror"===r&&(this.mirroredGenerator=o(De(De({},e),{},{keyframes:[...i].reverse(),velocity:-a}))),null===l.calculatedDuration&&(l.calculatedDuration=Ji(l));const{calculatedDuration:c}=l;this.calculatedDuration=c,this.resolvedDuration=c+s,this.totalDuration=this.resolvedDuration*(n+1)-s,this.generator=l}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;null!==this.holdTime?this.currentTime=this.holdTime:this.currentTime=t}tick(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{generator:n,totalDuration:s,mixKeyframes:r,mirroredGenerator:a,resolvedDuration:i,calculatedDuration:o}=this;if(null===this.startTime)return n.next(0);const{delay:l=0,keyframes:c,repeat:d,repeatType:u,repeatDelay:h,type:m,onUpdate:p,finalKeyframe:f}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-s/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const x=this.currentTime-l*(this.playbackSpeed>=0?1:-1),g=this.playbackSpeed>=0?x<0:x>s;this.currentTime=Math.max(x,0),"finished"===this.state&&null===this.holdTime&&(this.currentTime=s);let v=this.currentTime,y=n;if(d){const e=Math.min(this.currentTime,s)/i;let t=Math.floor(e),n=e%1;!n&&e>=1&&(n=1),1===n&&t--,t=Math.min(t,d+1);Boolean(t%2)&&("reverse"===u?(n=1-n,h&&(n-=h/i)):"mirror"===u&&(y=a)),v=js(0,1,n)*i}const b=g?{done:!1,value:c[0]}:y.next(v);r&&(b.value=r(b.value));let{done:j}=b;g||null===o||(j=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const w=null===this.holdTime&&("finished"===this.state||"running"===this.state&&j);return w&&m!==ao&&(b.value=Po(c,this.options,f,this.speed)),p&&p(b.value),w&&this.finish(),b}then(e,t){return this.finished.then(e,t)}get duration(){return Ti(this.calculatedDuration)}get time(){return Ti(this.currentTime)}set time(e){var t;e=Pi(e),this.currentTime=e,null===this.startTime||null!==this.holdTime||0===this.playbackSpeed?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),null===(t=this.driver)||void 0===t||t.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Fr.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=Ti(this.currentTime))}play(){var e,t;if(this.isStopped)return;const{driver:n=Wi,startTime:s}=this.options;this.driver||(this.driver=n(e=>this.tick(e))),null===(e=(t=this.options).onPlay)||void 0===e||e.call(t);const r=this.driver.now();"finished"===this.state?(this.updateFinished(),this.startTime=r):null!==this.holdTime?this.startTime=r-this.holdTime:this.startTime||(this.startTime=null!==s&&void 0!==s?s:r),"finished"===this.state&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Fr.now()),this.holdTime=this.currentTime}complete(){"running"!==this.state&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,t;this.notifyFinished(),this.teardown(),this.state="finished",null===(e=(t=this.options).onComplete)||void 0===e||e.call(t)}cancel(){var e,t;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),null===(e=(t=this.options).onCancel)||void 0===e||e.call(t)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null,Ai.mainThread--}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var t;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),null===(t=this.driver)||void 0===t||t.stop(),e.observe(this)}}function Lo(e){let t;return()=>(void 0===t&&(t=e()),t)}const zo=Lo(()=>void 0!==window.ScrollTimeline),Do={};function Mo(e,t){const n=Lo(e);return()=>{var e;return null!==(e=Do[t])&&void 0!==e?e:n()}}const Fo=Mo(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch(bt){return!1}return!0},"linearEasing"),Uo=e=>{let[t,n,s,r]=e;return"cubic-bezier(".concat(t,", ").concat(n,", ").concat(s,", ").concat(r,")")},Bo={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Uo([0,.65,.55,1]),circOut:Uo([.55,0,1,.45]),backIn:Uo([.31,.01,.66,-.59]),backOut:Uo([.33,1.53,.69,.99])};function Vo(e,t){return e?"function"===typeof e?Fo()?Gi(e,t):"ease-out":jo(e)?Uo(e):Array.isArray(e)?e.map(e=>Vo(e,t)||Bo.easeOut):Bo[e]:void 0}function qo(e,t,n){let{delay:s=0,duration:r=300,repeat:a=0,repeatType:i="loop",ease:o="easeOut",times:l}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0;const d={[t]:n};l&&(d.offset=l);const u=Vo(o,r);Array.isArray(u)&&(d.easing=u),Ws.value&&Ai.waapi++;const h={delay:s,duration:r,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:a+1,direction:"reverse"===i?"alternate":"normal"};c&&(h.pseudoElement=c);const m=e.animate(d,h);return Ws.value&&m.finished.finally(()=>{Ai.waapi--}),m}function Ho(e){return"function"===typeof e&&"applyToOptions"in e}const Wo=["type"];class Go extends Io{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:t,name:n,keyframes:s,pseudoElement:r,allowFlatten:a=!1,finalKeyframe:i,onComplete:o}=e;this.isPseudoElement=Boolean(r),this.allowFlatten=a,this.options=e,e.type;const l=function(e){let{type:t}=e,n=$e(e,Wo);return Ho(t)&&Fo()?t.applyToOptions(n):(null!==(s=n.duration)&&void 0!==s||(n.duration=300),null!==(r=n.ease)&&void 0!==r||(n.ease="easeOut"),n);var s,r}(e);this.animation=qo(t,n,s,l,r),!1===l.autoplay&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!r){const e=Po(s,this.options,i,this.speed);this.updateMotionValue?this.updateMotionValue(e):function(e,t,n){(e=>e.startsWith("--"))(t)?e.style.setProperty(t,n):e.style[t]=n}(t,n,e),this.animation.cancel()}null===o||void 0===o||o(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),"finished"===this.state&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,t;null===(e=(t=this.animation).finish)||void 0===e||e.call(t)}cancel(){try{this.animation.cancel()}catch(bt){}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;"idle"!==e&&"finished"!==e&&(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,t;this.isPseudoElement||(null===(e=(t=this.animation).commitStyles)||void 0===e||e.call(t))}get duration(){var e,t;const n=(null===(e=this.animation.effect)||void 0===e||null===(t=e.getComputedTiming)||void 0===t?void 0:t.call(e).duration)||0;return Ti(Number(n))}get time(){return Ti(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=Pi(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return null!==this.finishedTime?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline(e){let{timeline:t,observe:n}=e;var s;this.allowFlatten&&(null===(s=this.animation.effect)||void 0===s||s.updateTiming({easing:"linear"}));return this.animation.onfinish=null,t&&zo()?(this.animation.timeline=t,Vs):n(this)}}const Ko={anticipate:go,backInOut:xo,circInOut:bo};function Jo(e){"string"===typeof e.ease&&e.ease in Ko&&(e.ease=Ko[e.ease])}const Zo=["motionValue","onUpdate","onComplete","element"];class $o extends Go{constructor(e){Jo(e),Ao(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){var t;const n=this.options,{motionValue:s,onUpdate:r,onComplete:a,element:i}=n,o=$e(n,Zo);if(!s)return;if(void 0!==e)return void s.set(e);const l=new Oo(De(De({},o),{},{autoplay:!1})),c=Pi(null!==(t=this.finishedTime)&&void 0!==t?t:this.time);s.setWithVelocity(l.sample(c-10).value,l.sample(c).value,10),l.stop()}}const Qo=(e,t)=>"zIndex"!==t&&(!("number"!==typeof e&&!Array.isArray(e))||!("string"!==typeof e||!kr.test(e)&&"0"!==e||e.startsWith("url(")));const Yo=new Set(["opacity","clipPath","filter","transform"]),Xo=Lo(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));const el=["autoplay","delay","type","repeat","repeatDelay","repeatType","keyframes","name","motionValue","element"];class tl extends Io{constructor(e){var t;let{autoplay:n=!0,delay:s=0,type:r="keyframes",repeat:a=0,repeatDelay:i=0,repeatType:o="loop",keyframes:l,name:c,motionValue:d,element:u}=e,h=$e(e,el);super(),this.stop=()=>{var e,t;this._animation&&(this._animation.stop(),null===(t=this.stopTimeline)||void 0===t||t.call(this));null===(e=this.keyframeResolver)||void 0===e||e.cancel()},this.createdAt=Fr.now();const m=De({autoplay:n,delay:s,type:r,repeat:a,repeatDelay:i,repeatType:o,name:c,motionValue:d,element:u},h),p=(null===u||void 0===u?void 0:u.KeyframeResolver)||sr;this.keyframeResolver=new p(l,(e,t,n)=>this.onKeyframesResolved(e,t,m,!n),c,d,u),null===(t=this.keyframeResolver)||void 0===t||t.scheduleResolve()}onKeyframesResolved(e,t,n,s){this.keyframeResolver=void 0;const{name:r,type:a,velocity:i,delay:o,isHandoff:l,onUpdate:c}=n;this.resolvedAt=Fr.now(),function(e,t,n,s){const r=e[0];if(null===r)return!1;if("display"===t||"visibility"===t)return!0;const a=e[e.length-1],i=Qo(r,t),o=Qo(a,t);return"You are trying to animate ".concat(t,' from "').concat(r,'" to "').concat(a,'". "').concat(i?a:r,'" is not an animatable value.'),!(!i||!o)&&(function(e){const t=e[0];if(1===e.length)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}(e)||("spring"===n||Ho(n))&&s)}(e,r,a,i)||(!qs.instantAnimations&&o||null===c||void 0===c||c(Po(e,n,t)),e[0]=e[e.length-1],Ei(n),n.repeat=0);const d=De(De({startTime:s?this.resolvedAt&&this.resolvedAt-this.createdAt>40?this.resolvedAt:this.createdAt:void 0,finalKeyframe:t},n),{},{keyframes:e}),u=!l&&function(e){var t;const{motionValue:n,name:s,repeatDelay:r,repeatType:a,damping:i,type:o}=e;if(!((null===n||void 0===n||null===(t=n.owner)||void 0===t?void 0:t.current)instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:c}=n.owner.getProps();return Xo()&&s&&Yo.has(s)&&("transform"!==s||!c)&&!l&&!r&&"mirror"!==a&&0!==i&&"inertia"!==o}(d)?new $o(De(De({},d),{},{element:d.motionValue.owner.current})):new Oo(d);u.finished.then(()=>this.notifyFinished()).catch(Vs),this.pendingTimeline&&(this.stopTimeline=u.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=u}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){var e;this._animation||(null===(e=this.keyframeResolver)||void 0===e||e.resume(),er=!0,nr(),tr(),er=!1);return this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),null===(e=this.keyframeResolver)||void 0===e||e.cancel()}}const nl=e=>null!==e;const sl={type:"spring",stiffness:500,damping:25,restSpeed:10},rl={type:"keyframes",duration:.8},al={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},il=(e,t)=>{let{keyframes:n}=t;return n.length>2?rl:Bn.has(e)?e.startsWith("scale")?{type:"spring",stiffness:550,damping:0===n[1]?2*Math.sqrt(550):30,restSpeed:10}:sl:al},ol=["when","delay","delayChildren","staggerChildren","staggerDirection","repeat","repeatType","repeatDelay","from","elapsed"];const ll=function(e,t,n){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=arguments.length>4?arguments[4]:void 0,a=arguments.length>5?arguments[5]:void 0;return i=>{const o=yi(s,e)||{},l=o.delay||s.delay||0;let{elapsed:c=0}=s;c-=Pi(l);const d=De(De({keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity()},o),{},{delay:-c,onUpdate:e=>{t.set(e),o.onUpdate&&o.onUpdate(e)},onComplete:()=>{i(),o.onComplete&&o.onComplete()},name:e,motionValue:t,element:a?void 0:r});(function(e){let{when:t,delay:n,delayChildren:s,staggerChildren:r,staggerDirection:a,repeat:i,repeatType:o,repeatDelay:l,from:c,elapsed:d}=e,u=$e(e,ol);return!!Object.keys(u).length})(o)||Object.assign(d,il(e,d)),d.duration&&(d.duration=Pi(d.duration)),d.repeatDelay&&(d.repeatDelay=Pi(d.repeatDelay)),void 0!==d.from&&(d.keyframes[0]=d.from);let u=!1;if((!1===d.type||0===d.duration&&!d.repeatDelay)&&(Ei(d),0===d.delay&&(u=!0)),(qs.instantAnimations||qs.skipAnimations)&&(u=!0,Ei(d),d.delay=0),d.allowFlatten=!o.type&&!o.ease,u&&!a&&void 0!==t.get()){const e=function(e,t,n){let{repeat:s,repeatType:r="loop"}=t;const a=e.filter(nl),i=s&&"loop"!==r&&s%2===1?0:a.length-1;return i&&void 0!==n?n:a[i]}(d.keyframes,o);if(void 0!==e)return void Ks.update(()=>{d.onUpdate(e),d.onComplete()})}return o.isSync?new Oo(d):new tl(d)}},cl=["transition","transitionEnd"];function dl(e,t){let{protectedKeys:n,needsAnimating:s}=e;const r=n.hasOwnProperty(t)&&!0!==s[t];return s[t]=!1,r}function ul(e,t){let{delay:n=0,transitionOverride:s,type:r}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{transition:a=e.getDefaultTransition(),transitionEnd:i}=t,o=$e(t,cl);s&&(a=s);const l=[],c=r&&e.animationState&&e.animationState.getState()[r];for(const u in o){var d;const t=e.getValue(u,null!==(d=e.latestValues[u])&&void 0!==d?d:null),s=o[u];if(void 0===s||c&&dl(c,u))continue;const r=De({delay:n},yi(a||{},u)),i=t.get();if(void 0!==i&&!t.isAnimating&&!Array.isArray(s)&&s===i&&!r.velocity)continue;let h=!1;if(window.MotionHandoffAnimation){const t=Si(e);if(t){const e=window.MotionHandoffAnimation(t,u,Ks);null!==e&&(r.startTime=e,h=!0)}}ki(e,u),t.start(ll(u,t,s,e.shouldReduceMotion&&bs.has(u)?{type:!1}:r,e,h));const m=t.animation;m&&l.push(m)}return i&&Promise.all(l).then(()=>{Ks.update(()=>{i&&function(e,t){let n=vi(e,t)||{},{transitionEnd:s={},transition:r={}}=n,a=$e(n,ji);a=De(De({},a),s);for(const i in a)wi(e,i,Ni(a[i]))}(e,i)})}),l}function hl(e,t,n){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;const a=Array.from(e).sort((e,t)=>e.sortNodePosition(t)).indexOf(t),i=e.size,o=(i-1)*s;return"function"===typeof n?n(a,i):1===r?a*s:o-a*s}function ml(e,t){var n;let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=vi(e,t,"exit"===s.type?null===(n=e.presenceContext)||void 0===n?void 0:n.custom:void 0);let{transition:a=e.getDefaultTransition()||{}}=r||{};s.transitionOverride&&(a=s.transitionOverride);const i=r?()=>Promise.all(ul(e,r,s)):()=>Promise.resolve(),o=e.variantChildren&&e.variantChildren.size?function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const{delayChildren:r=0,staggerChildren:i,staggerDirection:o}=a;return function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,i=arguments.length>6?arguments[6]:void 0;const o=[];for(const l of e.variantChildren)l.notify("AnimationStart",t),o.push(ml(l,t,De(De({},i),{},{delay:n+("function"===typeof s?0:s)+hl(e.variantChildren,l,s,r,a)})).then(()=>l.notify("AnimationComplete",t)));return Promise.all(o)}(e,t,n,r,i,o,s)}:()=>Promise.resolve(),{when:l}=a;if(l){const[e,t]="beforeChildren"===l?[i,o]:[o,i];return e().then(()=>t())}return Promise.all([i(),o(s.delay)])}function pl(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let s=0;s<n;s++)if(t[s]!==e[s])return!1;return!0}const fl=ia.length;function xl(e){if(!e)return;if(!e.isControllingVariants){const t=e.parent&&xl(e.parent)||{};return void 0!==e.props.initial&&(t.initial=e.props.initial),t}const t={};for(let n=0;n<fl;n++){const s=ia[n],r=e.props[s];(ra(r)||!1===r)&&(t[s]=r)}return t}const gl=["transition","transitionEnd"],vl=[...aa].reverse(),yl=aa.length;function bl(e){return t=>Promise.all(t.map(t=>{let{animation:n,options:s}=t;return function(e,t){let n,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e.notify("AnimationStart",t),Array.isArray(t)){const r=t.map(t=>ml(e,t,s));n=Promise.all(r)}else if("string"===typeof t)n=ml(e,t,s);else{const r="function"===typeof t?vi(e,t,s.custom):t;n=Promise.all(ul(e,r,s))}return n.then(()=>{e.notify("AnimationComplete",t)})}(e,n,s)}))}function jl(e){let t=bl(e),n=kl(),s=!0;const r=t=>(n,s)=>{var r;const a=vi(e,s,"exit"===t?null===(r=e.presenceContext)||void 0===r?void 0:r.custom:void 0);if(a){const{transition:e,transitionEnd:t}=a,s=$e(a,gl);n=De(De(De({},n),s),t)}return n};function a(a){const{props:i}=e,o=xl(e.parent)||{},l=[],c=new Set;let d={},u=1/0;for(let t=0;t<yl;t++){const h=vl[t],m=n[h],p=void 0!==i[h]?i[h]:o[h],f=ra(p),x=h===a?m.isActive:null;!1===x&&(u=t);let g=p===o[h]&&p!==i[h]&&f;if(g&&s&&e.manuallyAnimateOnMount&&(g=!1),m.protectedKeys=De({},d),!m.isActive&&null===x||!p&&!m.prevProp||sa(p)||"boolean"===typeof p)continue;const v=wl(m.prevProp,p);let y=v||h===a&&m.isActive&&!g&&f||t>u&&f,b=!1;const j=Array.isArray(p)?p:[p];let w=j.reduce(r(h),{});!1===x&&(w={});const{prevResolvedValues:N={}}=m,k=De(De({},N),w),S=t=>{y=!0,c.has(t)&&(b=!0,c.delete(t)),m.needsAnimating[t]=!0;const n=e.getValue(t);n&&(n.liveStyle=!1)};for(const e in k){const t=w[e],n=N[e];if(d.hasOwnProperty(e))continue;let s=!1;s=bi(t)&&bi(n)?!pl(t,n):t!==n,s?void 0!==t&&null!==t?S(e):c.add(e):void 0!==t&&c.has(e)?S(e):m.protectedKeys[e]=!0}m.prevProp=p,m.prevResolvedValues=w,m.isActive&&(d=De(De({},d),w)),s&&e.blockInitialAnimation&&(y=!1);const E=g&&v;y&&(!E||b)&&l.push(...j.map(t=>{const n={type:h};if("string"===typeof t&&s&&!E&&e.manuallyAnimateOnMount&&e.parent){const{parent:s}=e,r=vi(s,t);if(s.enteringChildren&&r){const{delayChildren:t}=r.transition||{};n.delay=hl(s.enteringChildren,e,t)}}return{animation:t,options:n}}))}if(c.size){const t={};if("boolean"!==typeof i.initial){const n=vi(e,Array.isArray(i.initial)?i.initial[0]:i.initial);n&&n.transition&&(t.transition=n.transition)}c.forEach(n=>{const s=e.getBaseTarget(n),r=e.getValue(n);r&&(r.liveStyle=!0),t[n]=null!==s&&void 0!==s?s:null}),l.push({animation:t})}let h=Boolean(l.length);return!s||!1!==i.initial&&i.initial!==i.animate||e.manuallyAnimateOnMount||(h=!1),s=!1,h?t(l):Promise.resolve()}return{animateChanges:a,setActive:function(t,s){var r;if(n[t].isActive===s)return Promise.resolve();null===(r=e.variantChildren)||void 0===r||r.forEach(e=>{var n;return null===(n=e.animationState)||void 0===n?void 0:n.setActive(t,s)}),n[t].isActive=s;const i=a(t);for(const e in n)n[e].protectedKeys={};return i},setAnimateFunction:function(n){t=n(e)},getState:()=>n,reset:()=>{n=kl(),s=!0}}}function wl(e,t){return"string"===typeof t?t!==e:!!Array.isArray(t)&&!pl(t,e)}function Nl(){return{isActive:arguments.length>0&&void 0!==arguments[0]&&arguments[0],protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function kl(){return{animate:Nl(!0),whileInView:Nl(),whileHover:Nl(),whileTap:Nl(),whileDrag:Nl(),whileFocus:Nl(),exit:Nl()}}class Sl{constructor(e){this.isMounted=!1,this.node=e}update(){}}let El=0;const _l={animation:{Feature:class extends Sl{constructor(e){super(e),e.animationState||(e.animationState=jl(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();sa(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),null===(e=this.unmountControls)||void 0===e||e.call(this)}}},exit:{Feature:class extends Sl{constructor(){super(...arguments),this.id=El++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===n)return;const s=this.node.animationState.setActive("exit",!e);t&&!e&&s.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}}},Cl={x:!1,y:!1};function Pl(){return Cl.x||Cl.y}function Tl(e,t,n){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{passive:!0};return e.addEventListener(t,n,s),()=>e.removeEventListener(t,n)}const Al=e=>"mouse"===e.pointerType?"number"!==typeof e.button||e.button<=0:!1!==e.isPrimary;function Il(e){return{point:{x:e.pageX,y:e.pageY}}}function Rl(e,t,n,s){return Tl(e,t,(e=>t=>Al(t)&&e(t,Il(t)))(n),s)}function Ol(e){return e.max-e.min}function Ll(e,t,n){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;e.origin=s,e.originPoint=rs(t.min,t.max,e.origin),e.scale=Ol(n)/Ol(t),e.translate=rs(n.min,n.max,e.origin)-e.originPoint,(e.scale>=.9999&&e.scale<=1.0001||isNaN(e.scale))&&(e.scale=1),(e.translate>=-.01&&e.translate<=.01||isNaN(e.translate))&&(e.translate=0)}function zl(e,t,n,s){Ll(e.x,t.x,n.x,s?s.originX:void 0),Ll(e.y,t.y,n.y,s?s.originY:void 0)}function Dl(e,t,n){e.min=n.min+t.min,e.max=e.min+Ol(t)}function Ml(e,t,n){e.min=t.min-n.min,e.max=e.min+Ol(t)}function Fl(e,t,n){Ml(e.x,t.x,n.x),Ml(e.y,t.y,n.y)}function Ul(e){return[e("x"),e("y")]}const Bl=e=>{let{current:t}=e;return t?t.ownerDocument.defaultView:null},Vl=(e,t)=>Math.abs(e-t);class ql{constructor(e,t){let{transformPagePoint:n,contextWindow:s=window,dragSnapToOrigin:r=!1,distanceThreshold:a=3}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!this.lastMoveEvent||!this.lastMoveEventInfo)return;const e=Gl(this.lastMoveEventInfo,this.history),t=null!==this.startEvent,n=function(e,t){const n=Vl(e.x,t.x),s=Vl(e.y,t.y);return Math.sqrt(n**2+s**2)}(e.offset,{x:0,y:0})>=this.distanceThreshold;if(!t&&!n)return;const{point:s}=e,{timestamp:r}=Zs;this.history.push(De(De({},s),{},{timestamp:r}));const{onStart:a,onMove:i}=this.handlers;t||(a&&a(this.lastMoveEvent,e),this.startEvent=this.lastMoveEvent),i&&i(this.lastMoveEvent,e)},this.handlePointerMove=(e,t)=>{this.lastMoveEvent=e,this.lastMoveEventInfo=Hl(t,this.transformPagePoint),Ks.update(this.updatePoint,!0)},this.handlePointerUp=(e,t)=>{this.end();const{onEnd:n,onSessionEnd:s,resumeAnimation:r}=this.handlers;if(this.dragSnapToOrigin&&r&&r(),!this.lastMoveEvent||!this.lastMoveEventInfo)return;const a=Gl("pointercancel"===e.type?this.lastMoveEventInfo:Hl(t,this.transformPagePoint),this.history);this.startEvent&&n&&n(e,a),s&&s(e,a)},!Al(e))return;this.dragSnapToOrigin=r,this.handlers=t,this.transformPagePoint=n,this.distanceThreshold=a,this.contextWindow=s||window;const i=Hl(Il(e),this.transformPagePoint),{point:o}=i,{timestamp:l}=Zs;this.history=[De(De({},o),{},{timestamp:l})];const{onSessionStart:c}=t;c&&c(e,Gl(i,this.history)),this.removeListeners=Ci(Rl(this.contextWindow,"pointermove",this.handlePointerMove),Rl(this.contextWindow,"pointerup",this.handlePointerUp),Rl(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Js(this.updatePoint)}}function Hl(e,t){return t?{point:t(e.point)}:e}function Wl(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Gl(e,t){let{point:n}=e;return{point:n,delta:Wl(n,Jl(t)),offset:Wl(n,Kl(t)),velocity:Zl(t,.1)}}function Kl(e){return e[0]}function Jl(e){return e[e.length-1]}function Zl(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,s=null;const r=Jl(e);for(;n>=0&&(s=e[n],!(r.timestamp-s.timestamp>Pi(t)));)n--;if(!s)return{x:0,y:0};const a=Ti(r.timestamp-s.timestamp);if(0===a)return{x:0,y:0};const i={x:(r.x-s.x)/a,y:(r.y-s.y)/a};return i.x===1/0&&(i.x=0),i.y===1/0&&(i.y=0),i}function $l(e,t,n){return{min:void 0!==t?e.min+t:void 0,max:void 0!==n?e.max+n-(e.max-e.min):void 0}}function Ql(e,t){let n=t.min-e.min,s=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,s]=[s,n]),{min:n,max:s}}const Yl=.35;function Xl(e,t,n){return{min:ec(e,t),max:ec(e,n)}}function ec(e,t){return"number"===typeof e?e:e[t]||0}const tc=new WeakMap;class nc{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic={x:{min:0,max:0},y:{min:0,max:0}},this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e){let{snapToCursor:t=!1,distanceThreshold:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{presenceContext:s}=this.visualElement;if(s&&!1===s.isPresent)return;const{dragSnapToOrigin:r}=this.getProps();this.panSession=new ql(e,{onSessionStart:e=>{const{dragSnapToOrigin:n}=this.getProps();n?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(Il(e).point)},onStart:(e,t)=>{const{drag:n,dragPropagation:s,onDragStart:r}=this.getProps();if(n&&!s&&(this.openDragLock&&this.openDragLock(),this.openDragLock="x"===(a=n)||"y"===a?Cl[a]?null:(Cl[a]=!0,()=>{Cl[a]=!1}):Cl.x||Cl.y?null:(Cl.x=Cl.y=!0,()=>{Cl.x=Cl.y=!1}),!this.openDragLock))return;var a;this.latestPointerEvent=e,this.latestPanInfo=t,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ul(e=>{let t=this.getAxisMotionValue(e).get()||0;if(_s.test(t)){const{projection:n}=this.visualElement;if(n&&n.layout){const s=n.layout.layoutBox[e];if(s){t=Ol(s)*(parseFloat(t)/100)}}}this.originPoint[e]=t}),r&&Ks.postRender(()=>r(e,t)),ki(this.visualElement,"transform");const{animationState:i}=this.visualElement;i&&i.setActive("whileDrag",!0)},onMove:(e,t)=>{this.latestPointerEvent=e,this.latestPanInfo=t;const{dragPropagation:n,dragDirectionLock:s,onDirectionLock:r,onDrag:a}=this.getProps();if(!n&&!this.openDragLock)return;const{offset:i}=t;if(s&&null===this.currentDirection)return this.currentDirection=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=null;Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x");return n}(i),void(null!==this.currentDirection&&r&&r(this.currentDirection));this.updateAxis("x",t.point,i),this.updateAxis("y",t.point,i),this.visualElement.render(),a&&a(e,t)},onSessionEnd:(e,t)=>{this.latestPointerEvent=e,this.latestPanInfo=t,this.stop(e,t),this.latestPointerEvent=null,this.latestPanInfo=null},resumeAnimation:()=>Ul(e=>{var t;return"paused"===this.getAnimationState(e)&&(null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.play())})},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:r,distanceThreshold:n,contextWindow:Bl(this.visualElement)})}stop(e,t){const n=e||this.latestPointerEvent,s=t||this.latestPanInfo,r=this.isDragging;if(this.cancel(),!r||!s||!n)return;const{velocity:a}=s;this.startAnimation(a);const{onDragEnd:i}=this.getProps();i&&Ks.postRender(()=>i(n,s))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,n){const{drag:s}=this.getProps();if(!n||!sc(e,s,this.currentDirection))return;const r=this.getAxisMotionValue(e);let a=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(a=function(e,t,n){let{min:s,max:r}=t;return void 0!==s&&e<s?e=n?rs(s,e,n.min):Math.max(e,s):void 0!==r&&e>r&&(e=n?rs(r,e,n.max):Math.min(e,r)),e}(a,this.constraints[e],this.elastic[e])),r.set(a)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:n}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):null===(e=this.visualElement.projection)||void 0===e?void 0:e.layout,r=this.constraints;t&&li(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):this.constraints=!(!t||!s)&&function(e,t){let{top:n,left:s,bottom:r,right:a}=t;return{x:$l(e.x,s,a),y:$l(e.y,n,r)}}(s.layoutBox,t),this.elastic=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Yl;return!1===e?e=0:!0===e&&(e=Yl),{x:Xl(e,"left","right"),y:Xl(e,"top","bottom")}}(n),r!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&Ul(e=>{!1!==this.constraints&&this.getAxisMotionValue(e)&&(this.constraints[e]=function(e,t){const n={};return void 0!==t.min&&(n.min=t.min-e.min),void 0!==t.max&&(n.max=t.max-e.min),n}(s.layoutBox[e],this.constraints[e]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!li(e))return!1;const n=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const r=function(e,t,n){const s=ys(e,n),{scroll:r}=t;return r&&(xs(s.x,r.offset.x),xs(s.y,r.offset.y)),s}(n,s.root,this.visualElement.getTransformPagePoint());let a=function(e,t){return{x:Ql(e.x,t.x),y:Ql(e.y,t.y)}}(s.layout.layoutBox,r);if(t){const e=t(function(e){let{x:t,y:n}=e;return{top:n.min,right:t.max,bottom:n.max,left:t.min}}(a));this.hasMutatedConstraints=!!e,e&&(a=ss(e))}return a}startAnimation(e){const{drag:t,dragMomentum:n,dragElastic:s,dragTransition:r,dragSnapToOrigin:a,onDragTransitionEnd:i}=this.getProps(),o=this.constraints||{},l=Ul(i=>{if(!sc(i,t,this.currentDirection))return;let l=o&&o[i]||{};a&&(l={min:0,max:0});const c=s?200:1e6,d=s?40:1e7,u=De(De({type:"inertia",velocity:n?e[i]:0,bounceStiffness:c,bounceDamping:d,timeConstant:750,restDelta:1,restSpeed:10},r),l);return this.startAxisValueAnimation(i,u)});return Promise.all(l).then(i)}startAxisValueAnimation(e,t){const n=this.getAxisMotionValue(e);return ki(this.visualElement,e),n.start(ll(e,n,0,t,this.visualElement,!1))}stopAnimation(){Ul(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Ul(e=>{var t;return null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.pause()})}getAnimationState(e){var t;return null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.state}getAxisMotionValue(e){const t="_drag".concat(e.toUpperCase()),n=this.visualElement.getProps(),s=n[t];return s||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}snapToCursor(e){Ul(t=>{const{drag:n}=this.getProps();if(!sc(t,n,this.currentDirection))return;const{projection:s}=this.visualElement,r=this.getAxisMotionValue(t);if(s&&s.layout){const{min:n,max:a}=s.layout.layoutBox[t];r.set(e[t]-rs(n,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:n}=this.visualElement;if(!li(t)||!n||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};Ul(e=>{const t=this.getAxisMotionValue(e);if(t&&!1!==this.constraints){const n=t.get();s[e]=function(e,t){let n=.5;const s=Ol(e),r=Ol(t);return r>s?n=ko(t.min,t.max-s,e.min):s>r&&(n=ko(e.min,e.max-r,t.min)),js(0,1,n)}({min:n,max:n},this.constraints[e])}});const{transformTemplate:r}=this.visualElement.getProps();this.visualElement.current.style.transform=r?r({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),Ul(t=>{if(!sc(t,e,null))return;const n=this.getAxisMotionValue(t),{min:r,max:a}=this.constraints[t];n.set(rs(r,a,s[t]))})}addListeners(){if(!this.visualElement.current)return;tc.set(this.visualElement,this);const e=Rl(this.visualElement.current,"pointerdown",e=>{const{drag:t,dragListener:n=!0}=this.getProps();t&&n&&this.start(e)}),t=()=>{const{dragConstraints:e}=this.getProps();li(e)&&e.current&&(this.constraints=this.resolveRefConstraints())},{projection:n}=this.visualElement,s=n.addEventListener("measure",t);n&&!n.layout&&(n.root&&n.root.updateScroll(),n.updateLayout()),Ks.read(t);const r=Tl(window,"resize",()=>this.scalePositionWithinConstraints()),a=n.addEventListener("didUpdate",e=>{let{delta:t,hasLayoutChanged:n}=e;this.isDragging&&n&&(Ul(e=>{const n=this.getAxisMotionValue(e);n&&(this.originPoint[e]+=t[e].translate,n.set(n.get()+t[e].translate))}),this.visualElement.render())});return()=>{r(),e(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:n=!1,dragPropagation:s=!1,dragConstraints:r=!1,dragElastic:a=Yl,dragMomentum:i=!0}=e;return De(De({},e),{},{drag:t,dragDirectionLock:n,dragPropagation:s,dragConstraints:r,dragElastic:a,dragMomentum:i})}}function sc(e,t,n){return(!0===t||t===e)&&(null===n||n===e)}const rc=e=>(t,n)=>{e&&Ks.postRender(()=>e(t,n))};function ac(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const n=(0,t.useContext)(Xa);if(null===n)return[!0,null];const{isPresent:s,onExitComplete:r,register:a}=n,i=(0,t.useId)();(0,t.useEffect)(()=>{if(e)return a(i)},[e]);const o=(0,t.useCallback)(()=>e&&r&&r(i),[i,r,e]);return!s&&r?[!1,o]:[!0]}const ic={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function oc(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const lc={correct:(e,t)=>{if(!t.target)return e;if("string"===typeof e){if(!Cs.test(e))return e;e=parseFloat(e)}const n=oc(e,t.target.x),s=oc(e,t.target.y);return"".concat(n,"% ").concat(s,"%")}},cc={correct:(e,t)=>{let{treeScale:n,projectionDelta:s}=t;const r=e,a=kr.parse(e);if(a.length>5)return r;const i=kr.createTransformer(e),o="number"!==typeof a[0]?1:0,l=s.x.scale*n.x,c=s.y.scale*n.y;a[0+o]/=l,a[1+o]/=c;const d=rs(l,c,.5);return"number"===typeof a[2+o]&&(a[2+o]/=d),"number"===typeof a[3+o]&&(a[3+o]/=d),i(a)}};let dc=!1;class uc extends t.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n,layoutId:s}=this.props,{projection:r}=e;!function(e){for(const t in e)ba[t]=e[t],Xn(t)&&(ba[t].isCSSVariable=!0)}(mc),r&&(t.group&&t.group.add(r),n&&n.register&&s&&n.register(r),dc&&r.root.didUpdate(),r.addEventListener("animationComplete",()=>{this.safeToRemove()}),r.setOptions(De(De({},r.options),{},{onExitComplete:()=>this.safeToRemove()}))),ic.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:n,drag:s,isPresent:r}=this.props,{projection:a}=n;return a?(a.isPresent=r,dc=!0,s||e.layoutDependency!==t||void 0===t||e.isPresent!==r?a.willUpdate():this.safeToRemove(),e.isPresent!==r&&(r?a.promote():a.relegate()||Ks.postRender(()=>{const e=a.getStack();e&&e.members.length||this.safeToRemove()})),null):null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Jr.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n}=this.props,{projection:s}=e;dc=!0,s&&(s.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(s),n&&n.deregister&&n.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function hc(e){const[n,s]=ac(),r=(0,t.useContext)(za);return(0,Ge.jsx)(uc,De(De({},e),{},{layoutGroup:r,switchLayoutGroup:(0,t.useContext)(ui),isPresent:n,safeToRemove:s}))}const mc={borderRadius:De(De({},lc),{},{applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]}),borderTopLeftRadius:lc,borderTopRightRadius:lc,borderBottomLeftRadius:lc,borderBottomRightRadius:lc,boxShadow:cc};function pc(e){return"object"===typeof e&&null!==e}function fc(e){return pc(e)&&"ownerSVGElement"in e}const xc=(e,t)=>e.depth-t.depth;class gc{constructor(){this.children=[],this.isDirty=!1}add(e){Ur(this.children,e),this.isDirty=!0}remove(e){Br(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(xc),this.isDirty=!1,this.children.forEach(e)}}function vc(e,t){const n=Fr.now(),s=r=>{let{timestamp:a}=r;const i=a-n;i>=t&&(Js(s),e(i-t))};return Ks.setup(s,!0),()=>Js(s)}const yc=["TopLeft","TopRight","BottomLeft","BottomRight"],bc=yc.length,jc=e=>"string"===typeof e?parseFloat(e):e,wc=e=>"number"===typeof e||Cs.test(e);function Nc(e,t){return void 0!==e[t]?e[t]:e.borderRadius}const kc=Ec(0,.5,yo),Sc=Ec(.5,.95,Vs);function Ec(e,t,n){return s=>s<e?0:s>t?1:n(ko(e,t,s))}function _c(e,t){e.min=t.min,e.max=t.max}function Cc(e,t){_c(e.x,t.x),_c(e.y,t.y)}function Pc(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function Tc(e,t,n,s,r){return e=ds(e-=t,1/n,s),void 0!==r&&(e=ds(e,1/r,s)),e}function Ac(e,t,n,s,r){let[a,i,o]=n;!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,r=arguments.length>4?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:e,i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:e;_s.test(t)&&(t=parseFloat(t),t=rs(i.min,i.max,t/100)-i.min);if("number"!==typeof t)return;let o=rs(a.min,a.max,s);e===a&&(o-=t),e.min=Tc(e.min,t,n,o,r),e.max=Tc(e.max,t,n,o,r)}(e,t[a],t[i],t[o],t.scale,s,r)}const Ic=["x","scaleX","originX"],Rc=["y","scaleY","originY"];function Oc(e,t,n,s){Ac(e.x,t,Ic,n?n.x:void 0,s?s.x:void 0),Ac(e.y,t,Rc,n?n.y:void 0,s?s.y:void 0)}function Lc(e){return 0===e.translate&&1===e.scale}function zc(e){return Lc(e.x)&&Lc(e.y)}function Dc(e,t){return e.min===t.min&&e.max===t.max}function Mc(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function Fc(e,t){return Mc(e.x,t.x)&&Mc(e.y,t.y)}function Uc(e){return Ol(e.x)/Ol(e.y)}function Bc(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class Vc{constructor(){this.members=[]}add(e){Ur(this.members,e),e.scheduleRender()}remove(e){if(Br(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(e){const t=this.members.findIndex(t=>e===t);if(0===t)return!1;let n;for(let s=t;s>=0;s--){const e=this.members[s];if(!1!==e.isPresent){n=e;break}}return!!n&&(this.promote(n),!0)}promote(e,t){const n=this.lead;if(e!==n&&(this.prevLead=n,this.lead=e,e.show(),n)){n.instance&&n.scheduleRender(),e.scheduleRender(),e.resumeFrom=n,t&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;!1===s&&n.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:n}=e;t.onExitComplete&&t.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const qc={nodes:0,calculatedTargetDeltas:0,calculatedProjections:0},Hc=["","X","Y","Z"];let Wc=0;function Gc(e,t,n,s){const{latestValues:r}=t;r[e]&&(n[e]=r[e],t.setStaticValue(e,0),s&&(s[e]=0))}function Kc(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=Si(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:t,layoutId:s}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",Ks,!(t||s))}const{parent:s}=e;s&&!s.hasCheckedOptimisedAppear&&Kc(s)}function Jc(e){let{attachResizeListener:t,defaultParent:n,measureScroll:s,checkIsScrollRoot:r,resetTransform:a}=e;return class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null===n||void 0===n?void 0:n();this.id=Wc++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Ws.value&&(qc.nodes=qc.calculatedTargetDeltas=qc.calculatedProjections=0),this.nodes.forEach(Qc),this.nodes.forEach(rd),this.nodes.forEach(ad),this.nodes.forEach(Yc),Ws.addProjectionMetrics&&Ws.addProjectionMetrics(qc)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=e,this.root=t?t.root||t:this,this.path=t?[...t.path,t]:[],this.parent=t,this.depth=t?t.depth+1:0;for(let n=0;n<this.path.length;n++)this.path[n].shouldResetTransform=!0;this.root===this&&(this.nodes=new gc)}addEventListener(e,t){return this.eventHandlers.has(e)||this.eventHandlers.set(e,new Vr),this.eventHandlers.get(e).add(t)}notifyListeners(e){const t=this.eventHandlers.get(e);for(var n=arguments.length,s=new Array(n>1?n-1:0),r=1;r<n;r++)s[r-1]=arguments[r];t&&t.notify(...s)}hasListeners(e){return this.eventHandlers.has(e)}mount(e){if(this.instance)return;var n;this.isSVG=fc(e)&&!(fc(n=e)&&"svg"===n.tagName),this.instance=e;const{layoutId:s,layout:r,visualElement:a}=this.options;if(a&&!a.current&&a.mount(e),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(r||s)&&(this.isLayoutDirty=!0),t){let n,s=0;const r=()=>this.root.updateBlockedByResize=!1;Ks.read(()=>{s=window.innerWidth}),t(e,()=>{const e=window.innerWidth;e!==s&&(s=e,this.root.updateBlockedByResize=!0,n&&n(),n=vc(r,250),ic.hasAnimatedSinceResize&&(ic.hasAnimatedSinceResize=!1,this.nodes.forEach(sd)))})}s&&this.root.registerSharedNode(s,this),!1!==this.options.animate&&a&&(s||r)&&this.addEventListener("didUpdate",e=>{let{delta:t,hasLayoutChanged:n,hasRelativeLayoutChanged:s,layout:r}=e;if(this.isTreeAnimationBlocked())return this.target=void 0,void(this.relativeTarget=void 0);const i=this.options.transition||a.getDefaultTransition()||ud,{onLayoutAnimationStart:o,onLayoutAnimationComplete:l}=a.getProps(),c=!this.targetLayout||!Fc(this.targetLayout,r),d=!n&&s;if(this.options.layoutRoot||this.resumeFrom||d||n&&(c||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const e=De(De({},yi(i,"layout")),{},{onPlay:o,onComplete:l});(a.shouldReduceMotion||this.options.layoutRoot)&&(e.delay=0,e.type=!1),this.startAnimation(e),this.setAnimationOrigin(t,d)}else n||sd(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=r})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const e=this.getStack();e&&e.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Js(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(id),this.animationId++)}getTransformTemplate(){const{visualElement:e}=this.options;return e&&e.getProps().transformTemplate}willUpdate(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked())return void(this.options.onExitComplete&&this.options.onExitComplete());if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Kc(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let r=0;r<this.path.length;r++){const e=this.path[r];e.shouldResetTransform=!0,e.updateScroll("snapshot"),e.options.layoutRoot&&e.willUpdate(!1)}const{layoutId:t,layout:n}=this.options;if(void 0===t&&!n)return;const s=this.getTransformTemplate();this.prevTransformTemplateValue=s?s(this.latestValues,""):void 0,this.updateSnapshot(),e&&this.notifyListeners("willUpdate")}update(){this.updateScheduled=!1;if(this.isUpdateBlocked())return this.unblockUpdate(),this.clearAllSnapshots(),void this.nodes.forEach(ed);if(this.animationId<=this.animationCommitId)return void this.nodes.forEach(td);this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(nd),this.nodes.forEach(Zc),this.nodes.forEach($c)):this.nodes.forEach(td),this.clearAllSnapshots();const e=Fr.now();Zs.delta=js(0,1e3/60,e-Zs.timestamp),Zs.timestamp=e,Zs.isProcessing=!0,$s.update.process(Zs),$s.preRender.process(Zs),$s.render.process(Zs),Zs.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Jr.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Xc),this.sharedNodes.forEach(od)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ks.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ks.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){!this.snapshot&&this.instance&&(this.snapshot=this.measure(),!this.snapshot||Ol(this.snapshot.measuredBox.x)||Ol(this.snapshot.measuredBox.y)||(this.snapshot=void 0))}updateLayout(){if(!this.instance)return;if(this.updateScroll(),(!this.options.alwaysMeasureLayout||!this.isLead())&&!this.isLayoutDirty)return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let n=0;n<this.path.length;n++){this.path[n].updateScroll()}const e=this.layout;this.layout=this.measure(!1),this.layoutCorrected={x:{min:0,max:0},y:{min:0,max:0}},this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:t}=this.options;t&&t.notify("LayoutMeasure",this.layout.layoutBox,e?e.layoutBox:void 0)}updateScroll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"measure",t=Boolean(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===e&&(t=!1),t&&this.instance){const t=r(this.instance);this.scroll={animationId:this.root.animationId,phase:e,isRoot:t,offset:s(this.instance),wasRoot:this.scroll?this.scroll.isRoot:t}}}resetTransform(){if(!a)return;const e=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,t=this.projectionDelta&&!zc(this.projectionDelta),n=this.getTransformTemplate(),s=n?n(this.latestValues,""):void 0,r=s!==this.prevTransformTemplateValue;e&&this.instance&&(t||os(this.latestValues)||r)&&(a(this.instance,s),this.shouldResetTransform=!1,this.scheduleRender())}measure(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=this.measurePageBox();let n=this.removeElementScroll(t);var s;return e&&(n=this.removeTransform(n)),pd((s=n).x),pd(s.y),{animationId:this.root.animationId,measuredBox:t,layoutBox:n,latestValues:{},source:this.id}}measurePageBox(){var e;const{visualElement:t}=this.options;if(!t)return{x:{min:0,max:0},y:{min:0,max:0}};const n=t.measureViewportBox();if(!((null===(e=this.scroll)||void 0===e?void 0:e.wasRoot)||this.path.some(xd))){const{scroll:e}=this.root;e&&(xs(n.x,e.offset.x),xs(n.y,e.offset.y))}return n}removeElementScroll(e){var t;const n={x:{min:0,max:0},y:{min:0,max:0}};if(Cc(n,e),null!==(t=this.scroll)&&void 0!==t&&t.wasRoot)return n;for(let s=0;s<this.path.length;s++){const t=this.path[s],{scroll:r,options:a}=t;t!==this.root&&r&&a.layoutScroll&&(r.wasRoot&&Cc(n,e),xs(n.x,r.offset.x),xs(n.y,r.offset.y))}return n}applyTransform(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n={x:{min:0,max:0},y:{min:0,max:0}};Cc(n,e);for(let s=0;s<this.path.length;s++){const e=this.path[s];!t&&e.options.layoutScroll&&e.scroll&&e!==e.root&&vs(n,{x:-e.scroll.offset.x,y:-e.scroll.offset.y}),os(e.latestValues)&&vs(n,e.latestValues)}return os(this.latestValues)&&vs(n,this.latestValues),n}removeTransform(e){const t={x:{min:0,max:0},y:{min:0,max:0}};Cc(t,e);for(let n=0;n<this.path.length;n++){const e=this.path[n];if(!e.instance)continue;if(!os(e.latestValues))continue;is(e.latestValues)&&e.updateSnapshot();const s=Yr();Cc(s,e.measurePageBox()),Oc(t,e.latestValues,e.snapshot?e.snapshot.layoutBox:void 0,s)}return os(this.latestValues)&&Oc(t,this.latestValues),t}setTargetDelta(e){this.targetDelta=e,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(e){this.options=De(De(De({},this.options),e),{},{crossfade:void 0===e.crossfade||e.crossfade})}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Zs.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(){var e;let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const n=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=n.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=n.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=n.isSharedProjectionDirty);const s=Boolean(this.resumingFrom)||this!==n;if(!(t||s&&this.isSharedProjectionDirty||this.isProjectionDirty||null!==(e=this.parent)&&void 0!==e&&e.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:r,layoutId:a}=this.options;if(this.layout&&(r||a)){if(this.resolvedRelativeTargetAt=Zs.timestamp,!this.targetDelta&&!this.relativeTarget){const e=this.getClosestProjectingParent();e&&e.layout&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},Fl(this.relativeTargetOrigin,this.layout.layoutBox,e.layout.layoutBox),Cc(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(this.relativeTarget||this.targetDelta){var i,o,l;if(this.target||(this.target={x:{min:0,max:0},y:{min:0,max:0}},this.targetWithTransforms={x:{min:0,max:0},y:{min:0,max:0}}),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),i=this.target,o=this.relativeTarget,l=this.relativeParent.target,Dl(i.x,o.x,l.x),Dl(i.y,o.y,l.y)):this.targetDelta?(Boolean(this.resumingFrom)?this.target=this.applyTransform(this.layout.layoutBox):Cc(this.target,this.layout.layoutBox),ms(this.target,this.targetDelta)):Cc(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const e=this.getClosestProjectingParent();e&&Boolean(e.resumingFrom)===Boolean(this.resumingFrom)&&!e.options.layoutScroll&&e.target&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},Fl(this.relativeTargetOrigin,this.target,e.target),Cc(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Ws.value&&qc.calculatedTargetDeltas++}}}getClosestProjectingParent(){if(this.parent&&!is(this.parent.latestValues)&&!ls(this.parent.latestValues))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return Boolean((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var e;const t=this.getLead(),n=Boolean(this.resumingFrom)||this!==t;let s=!0;if((this.isProjectionDirty||null!==(e=this.parent)&&void 0!==e&&e.isProjectionDirty)&&(s=!1),n&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(s=!1),this.resolvedRelativeTargetAt===Zs.timestamp&&(s=!1),s)return;const{layout:r,layoutId:a}=this.options;if(this.isTreeAnimating=Boolean(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!r&&!a)return;Cc(this.layoutCorrected,this.layout.layoutBox);const i=this.treeScale.x,o=this.treeScale.y;!function(e,t,n){let s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r=n.length;if(!r)return;let a,i;t.x=t.y=1;for(let o=0;o<r;o++){a=n[o],i=a.projectionDelta;const{visualElement:r}=a.options;r&&r.props.style&&"contents"===r.props.style.display||(s&&a.options.layoutScroll&&a.scroll&&a!==a.root&&vs(e,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),i&&(t.x*=i.x.scale,t.y*=i.y.scale,ms(e,i)),s&&os(a.latestValues)&&vs(e,a.latestValues))}t.x<fs&&t.x>ps&&(t.x=1),t.y<fs&&t.y>ps&&(t.y=1)}(this.layoutCorrected,this.treeScale,this.path,n),!t.layout||t.target||1===this.treeScale.x&&1===this.treeScale.y||(t.target=t.layout.layoutBox,t.targetWithTransforms={x:{min:0,max:0},y:{min:0,max:0}});const{target:l}=t;l?(this.projectionDelta&&this.prevProjectionDelta?(Pc(this.prevProjectionDelta.x,this.projectionDelta.x),Pc(this.prevProjectionDelta.y,this.projectionDelta.y)):this.createProjectionDeltas(),zl(this.projectionDelta,this.layoutCorrected,l,this.latestValues),this.treeScale.x===i&&this.treeScale.y===o&&Bc(this.projectionDelta.x,this.prevProjectionDelta.x)&&Bc(this.projectionDelta.y,this.prevProjectionDelta.y)||(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",l)),Ws.value&&qc.calculatedProjections++):this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender())}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(){var e;let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(null===(e=this.options.visualElement)||void 0===e||e.scheduleRender(),t){const e=this.getStack();e&&e.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionDeltaWithTransform={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}}}setAnimationOrigin(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=this.snapshot,s=n?n.latestValues:{},r=De({},this.latestValues),a={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};this.relativeParent&&this.relativeParent.options.layoutRoot||(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!t;const i={x:{min:0,max:0},y:{min:0,max:0}},o=(n?n.source:void 0)!==(this.layout?this.layout.source:void 0),l=this.getStack(),c=!l||l.members.length<=1,d=Boolean(o&&!c&&!0===this.options.crossfade&&!this.path.some(dd));let u;this.animationProgress=0,this.mixTargetDelta=t=>{const n=t/1e3;ld(a.x,e.x,n),ld(a.y,e.y,n),this.setTargetDelta(a),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Fl(i,this.layout.layoutBox,this.relativeParent.layout.layoutBox),function(e,t,n,s){cd(e.x,t.x,n.x,s),cd(e.y,t.y,n.y,s)}(this.relativeTarget,this.relativeTargetOrigin,i,n),u&&function(e,t){return Dc(e.x,t.x)&&Dc(e.y,t.y)}(this.relativeTarget,u)&&(this.isProjectionDirty=!1),u||(u={x:{min:0,max:0},y:{min:0,max:0}}),Cc(u,this.relativeTarget)),o&&(this.animationValues=r,function(e,t,n,s,r,a){var i,o;if(r)e.opacity=rs(0,null!==(i=n.opacity)&&void 0!==i?i:1,kc(s)),e.opacityExit=rs(null!==(o=t.opacity)&&void 0!==o?o:1,0,Sc(s));else if(a){var l,c;e.opacity=rs(null!==(l=t.opacity)&&void 0!==l?l:1,null!==(c=n.opacity)&&void 0!==c?c:1,s)}for(let d=0;d<bc;d++){const r="border".concat(yc[d],"Radius");let a=Nc(t,r),i=Nc(n,r);void 0===a&&void 0===i||(a||(a=0),i||(i=0),0===a||0===i||wc(a)===wc(i)?(e[r]=Math.max(rs(jc(a),jc(i),s),0),(_s.test(i)||_s.test(a))&&(e[r]+="%")):e[r]=i)}(t.rotate||n.rotate)&&(e.rotate=rs(t.rotate||0,n.rotate||0,s))}(r,s,this.latestValues,n,d,c)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=n},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(e){var t,n;this.notifyListeners("animationStart"),null===(t=this.currentAnimation)||void 0===t||t.stop(),null===(n=this.resumingFrom)||void 0===n||null===(n=n.currentAnimation)||void 0===n||n.stop(),this.pendingAnimation&&(Js(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ks.update(()=>{ic.hasAnimatedSinceResize=!0,Ai.layout++,this.motionValue||(this.motionValue=Gr(0)),this.currentAnimation=function(e,t,n){const s=zr(e)?e:Gr(e);return s.start(ll("",s,t,n)),s.animation}(this.motionValue,[0,1e3],De(De({},e),{},{velocity:0,isSync:!0,onUpdate:t=>{this.mixTargetDelta(t),e.onUpdate&&e.onUpdate(t)},onStop:()=>{Ai.layout--},onComplete:()=>{Ai.layout--,e.onComplete&&e.onComplete(),this.completeAnimation()}})),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const e=this.getStack();e&&e.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(1e3),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const e=this.getLead();let{targetWithTransforms:t,target:n,layout:s,latestValues:r}=e;if(t&&n&&s){if(this!==e&&this.layout&&s&&fd(this.options.animationType,this.layout.layoutBox,s.layoutBox)){n=this.target||{x:{min:0,max:0},y:{min:0,max:0}};const t=Ol(this.layout.layoutBox.x);n.x.min=e.target.x.min,n.x.max=n.x.min+t;const s=Ol(this.layout.layoutBox.y);n.y.min=e.target.y.min,n.y.max=n.y.min+s}Cc(t,n),vs(t,r),zl(this.projectionDeltaWithTransform,this.layoutCorrected,t,r)}}registerSharedNode(e,t){this.sharedNodes.has(e)||this.sharedNodes.set(e,new Vc);this.sharedNodes.get(e).add(t);const n=t.options.initialPromotionConfig;t.promote({transition:n?n.transition:void 0,preserveFollowOpacity:n&&n.shouldPreserveFollowOpacity?n.shouldPreserveFollowOpacity(t):void 0})}isLead(){const e=this.getStack();return!e||e.lead===this}getLead(){var e;const{layoutId:t}=this.options;return t&&(null===(e=this.getStack())||void 0===e?void 0:e.lead)||this}getPrevLead(){var e;const{layoutId:t}=this.options;return t?null===(e=this.getStack())||void 0===e?void 0:e.prevLead:void 0}getStack(){const{layoutId:e}=this.options;if(e)return this.root.sharedNodes.get(e)}promote(){let{needsReset:e,transition:t,preserveFollowOpacity:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const s=this.getStack();s&&s.promote(this,n),e&&(this.projectionDelta=void 0,this.needsReset=!0),t&&this.setOptions({transition:t})}relegate(){const e=this.getStack();return!!e&&e.relegate(this)}resetSkewAndRotation(){const{visualElement:e}=this.options;if(!e)return;let t=!1;const{latestValues:n}=e;if((n.z||n.rotate||n.rotateX||n.rotateY||n.rotateZ||n.skewX||n.skewY)&&(t=!0),!t)return;const s={};n.z&&Gc("z",e,s,this.animationValues);for(let r=0;r<Hc.length;r++)Gc("rotate".concat(Hc[r]),e,s,this.animationValues),Gc("skew".concat(Hc[r]),e,s,this.animationValues);e.render();for(const r in s)e.setStaticValue(r,s[r]),this.animationValues&&(this.animationValues[r]=s[r]);e.scheduleRender()}applyProjectionStyles(e,t){if(!this.instance||this.isSVG)return;if(!this.isVisible)return void(e.visibility="hidden");const n=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,e.visibility="",e.opacity="",e.pointerEvents=ti(null===t||void 0===t?void 0:t.pointerEvents)||"",void(e.transform=n?n(this.latestValues,""):"none");const s=this.getLead();if(!this.projectionDelta||!this.layout||!s.target)return this.options.layoutId&&(e.opacity=void 0!==this.latestValues.opacity?this.latestValues.opacity:1,e.pointerEvents=ti(null===t||void 0===t?void 0:t.pointerEvents)||""),void(this.hasProjected&&!os(this.latestValues)&&(e.transform=n?n({},""):"none",this.hasProjected=!1));e.visibility="";const r=s.animationValues||s.latestValues;this.applyTransformsToTarget();let a=function(e,t,n){let s="";const r=e.x.translate/t.x,a=e.y.translate/t.y,i=(null===n||void 0===n?void 0:n.z)||0;if((r||a||i)&&(s="translate3d(".concat(r,"px, ").concat(a,"px, ").concat(i,"px) ")),1===t.x&&1===t.y||(s+="scale(".concat(1/t.x,", ").concat(1/t.y,") ")),n){const{transformPerspective:e,rotate:t,rotateX:r,rotateY:a,skewX:i,skewY:o}=n;e&&(s="perspective(".concat(e,"px) ").concat(s)),t&&(s+="rotate(".concat(t,"deg) ")),r&&(s+="rotateX(".concat(r,"deg) ")),a&&(s+="rotateY(".concat(a,"deg) ")),i&&(s+="skewX(".concat(i,"deg) ")),o&&(s+="skewY(".concat(o,"deg) "))}const o=e.x.scale*t.x,l=e.y.scale*t.y;return 1===o&&1===l||(s+="scale(".concat(o,", ").concat(l,")")),s||"none"}(this.projectionDeltaWithTransform,this.treeScale,r);n&&(a=n(r,a)),e.transform=a;const{x:i,y:o}=this.projectionDelta;var l,c;(e.transformOrigin="".concat(100*i.origin,"% ").concat(100*o.origin,"% 0"),s.animationValues)?e.opacity=s===this?null!==(l=null!==(c=r.opacity)&&void 0!==c?c:this.latestValues.opacity)&&void 0!==l?l:1:this.preserveOpacity?this.latestValues.opacity:r.opacityExit:e.opacity=s===this?void 0!==r.opacity?r.opacity:"":void 0!==r.opacityExit?r.opacityExit:0;for(const d in ba){if(void 0===r[d])continue;const{correct:t,applyTo:n,isCSSVariable:i}=ba[d],o="none"===a?r[d]:t(r[d],s);if(n){const t=n.length;for(let s=0;s<t;s++)e[n[s]]=o}else i?this.options.visualElement.renderState.vars[d]=o:e[d]=o}this.options.layoutId&&(e.pointerEvents=s===this?ti(null===t||void 0===t?void 0:t.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(e=>{var t;return null===(t=e.currentAnimation)||void 0===t?void 0:t.stop()}),this.root.nodes.forEach(ed),this.root.sharedNodes.clear()}}}function Zc(e){e.updateLayout()}function $c(e){var t;const n=(null===(t=e.resumeFrom)||void 0===t?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){const{layoutBox:t,measuredBox:s}=e.layout,{animationType:r}=e.options,a=n.source!==e.layout.source;"size"===r?Ul(e=>{const s=a?n.measuredBox[e]:n.layoutBox[e],r=Ol(s);s.min=t[e].min,s.max=s.min+r}):fd(r,n.layoutBox,t)&&Ul(s=>{const r=a?n.measuredBox[s]:n.layoutBox[s],i=Ol(t[s]);r.max=r.min+i,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[s].max=e.relativeTarget[s].min+i)});const i={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};zl(i,t,n.layoutBox);const o={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};a?zl(o,e.applyTransform(s,!0),n.measuredBox):zl(o,t,n.layoutBox);const l=!zc(i);let c=!1;if(!e.resumeFrom){const s=e.getClosestProjectingParent();if(s&&!s.resumeFrom){const{snapshot:r,layout:a}=s;if(r&&a){const i={x:{min:0,max:0},y:{min:0,max:0}};Fl(i,n.layoutBox,r.layoutBox);const o={x:{min:0,max:0},y:{min:0,max:0}};Fl(o,t,a.layoutBox),Fc(i,o)||(c=!0),s.options.layoutRoot&&(e.relativeTarget=o,e.relativeTargetOrigin=i,e.relativeParent=s)}}}e.notifyListeners("didUpdate",{layout:t,snapshot:n,delta:o,layoutDelta:i,hasLayoutChanged:l,hasRelativeLayoutChanged:c})}else if(e.isLead()){const{onExitComplete:t}=e.options;t&&t()}e.options.transition=void 0}function Qc(e){Ws.value&&qc.nodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=Boolean(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function Yc(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function Xc(e){e.clearSnapshot()}function ed(e){e.clearMeasurements()}function td(e){e.isLayoutDirty=!1}function nd(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function sd(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function rd(e){e.resolveTargetDelta()}function ad(e){e.calcProjection()}function id(e){e.resetSkewAndRotation()}function od(e){e.removeLeadSnapshot()}function ld(e,t,n){e.translate=rs(t.translate,0,n),e.scale=rs(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function cd(e,t,n,s){e.min=rs(t.min,n.min,s),e.max=rs(t.max,n.max,s)}function dd(e){return e.animationValues&&void 0!==e.animationValues.opacityExit}const ud={duration:.45,ease:[.4,0,.1,1]},hd=e=>"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),md=hd("applewebkit/")&&!hd("chrome/")?Math.round:Vs;function pd(e){e.min=md(e.min),e.max=md(e.max)}function fd(e,t,n){return"position"===e||"preserve-aspect"===e&&(s=Uc(t),r=Uc(n),a=.2,!(Math.abs(s-r)<=a));var s,r,a}function xd(e){var t;return e!==e.root&&(null===(t=e.scroll)||void 0===t?void 0:t.wasRoot)}const gd=Jc({attachResizeListener:(e,t)=>Tl(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),vd={current:void 0},yd=Jc({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!vd.current){const e=new gd({});e.mount(window),e.setOptions({layoutScroll:!0}),vd.current=e}return vd.current},resetTransform:(e,t)=>{e.style.transform=void 0!==t?t:"none"},checkIsScrollRoot:e=>Boolean("fixed"===window.getComputedStyle(e).position)}),bd={pan:{Feature:class extends Sl{constructor(){super(...arguments),this.removePointerDownListener=Vs}onPointerDown(e){this.session=new ql(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Bl(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:n,onPanEnd:s}=this.node.getProps();return{onSessionStart:rc(e),onStart:rc(t),onMove:n,onEnd:(e,t)=>{delete this.session,s&&Ks.postRender(()=>s(e,t))}}}mount(){this.removePointerDownListener=Rl(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}},drag:{Feature:class extends Sl{constructor(e){super(e),this.removeGroupControls=Vs,this.removeListeners=Vs,this.controls=new nc(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Vs}unmount(){this.removeGroupControls(),this.removeListeners()}},ProjectionNode:yd,MeasureLayout:hc}};function jd(e,t){const n=function(e,t,n){if(e instanceof EventTarget)return[e];if("string"===typeof e){var s;let r=document;t&&(r=t.current);const a=null!==(s=null===n||void 0===n?void 0:n[e])&&void 0!==s?s:r.querySelectorAll(e);return a?Array.from(a):[]}return Array.from(e)}(e),s=new AbortController;return[n,De(De({passive:!0},t),{},{signal:s.signal}),()=>s.abort()]}function wd(e){return!("touch"===e.pointerType||Pl())}function Nd(e,t,n){const{props:s}=e;e.animationState&&s.whileHover&&e.animationState.setActive("whileHover","Start"===n);const r=s["onHover"+n];r&&Ks.postRender(()=>r(t,Il(t)))}function kd(e){return pc(e)&&"offsetHeight"in e}const Sd=(e,t)=>!!t&&(e===t||Sd(e,t.parentElement)),Ed=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);const _d=new WeakSet;function Cd(e){return t=>{"Enter"===t.key&&e(t)}}function Pd(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}function Td(e){return Al(e)&&!Pl()}function Ad(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const[s,r,a]=jd(e,n),i=e=>{const s=e.currentTarget;if(!Td(e))return;_d.add(s);const a=t(s,e),i=(e,t)=>{window.removeEventListener("pointerup",o),window.removeEventListener("pointercancel",l),_d.has(s)&&_d.delete(s),Td(e)&&"function"===typeof a&&a(e,{success:t})},o=e=>{i(e,s===window||s===document||n.useGlobalTarget||Sd(s,e.target))},l=e=>{i(e,!1)};window.addEventListener("pointerup",o,r),window.addEventListener("pointercancel",l,r)};return s.forEach(e=>{var t;(n.useGlobalTarget?window:e).addEventListener("pointerdown",i,r),kd(e)&&(e.addEventListener("focus",e=>((e,t)=>{const n=e.currentTarget;if(!n)return;const s=Cd(()=>{if(_d.has(n))return;Pd(n,"down");const e=Cd(()=>{Pd(n,"up")});n.addEventListener("keyup",e,t),n.addEventListener("blur",()=>Pd(n,"cancel"),t)});n.addEventListener("keydown",s,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",s),t)})(e,r)),t=e,Ed.has(t.tagName)||-1!==t.tabIndex||e.hasAttribute("tabindex")||(e.tabIndex=0))}),a}function Id(e,t,n){const{props:s}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&s.whileTap&&e.animationState.setActive("whileTap","Start"===n);const r=s["onTap"+("End"===n?"":n)];r&&Ks.postRender(()=>r(t,Il(t)))}const Rd=["root"],Od=new WeakMap,Ld=new WeakMap,zd=e=>{const t=Od.get(e.target);t&&t(e)},Dd=e=>{e.forEach(zd)};function Md(e,t,n){const s=function(e){let{root:t}=e,n=$e(e,Rd);const s=t||document;Ld.has(s)||Ld.set(s,{});const r=Ld.get(s),a=JSON.stringify(n);return r[a]||(r[a]=new IntersectionObserver(Dd,De({root:t},n))),r[a]}(t);return Od.set(e,n),s.observe(e),()=>{Od.delete(e),s.unobserve(e)}}const Fd={some:0,all:1};const Ud={inView:{Feature:class extends Sl{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:n,amount:s="some",once:r}=e,a={root:t?t.current:void 0,rootMargin:n,threshold:"number"===typeof s?s:Fd[s]};return Md(this.node.current,a,e=>{const{isIntersecting:t}=e;if(this.isInView===t)return;if(this.isInView=t,r&&!t&&this.hasEnteredView)return;t&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",t);const{onViewportEnter:n,onViewportLeave:s}=this.node.getProps(),a=t?n:s;a&&a(e)})}mount(){this.startObserver()}update(){if("undefined"===typeof IntersectionObserver)return;const{props:e,prevProps:t}=this.node,n=["amount","margin","root"].some(function(e){let{viewport:t={}}=e,{viewport:n={}}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e=>t[e]!==n[e]}(e,t));n&&this.startObserver()}unmount(){}}},tap:{Feature:class extends Sl{mount(){const{current:e}=this.node;e&&(this.unmount=Ad(e,(e,t)=>(Id(this.node,t,"Start"),(e,t)=>{let{success:n}=t;return Id(this.node,e,n?"End":"Cancel")}),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}},focus:{Feature:class extends Sl{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch(bt){e=!0}e&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){this.isActive&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Ci(Tl(this.node.current,"focus",()=>this.onFocus()),Tl(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}},hover:{Feature:class extends Sl{mount(){const{current:e}=this.node;e&&(this.unmount=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const[s,r,a]=jd(e,n),i=e=>{if(!wd(e))return;const{target:n}=e,s=t(n,e);if("function"!==typeof s||!n)return;const a=e=>{wd(e)&&(s(e),n.removeEventListener("pointerleave",a))};n.addEventListener("pointerleave",a,r)};return s.forEach(e=>{e.addEventListener("pointerenter",i,r)}),a}(e,(e,t)=>(Nd(this.node,t,"Start"),e=>Nd(this.node,e,"End"))))}unmount(){}}}},Bd={layout:{ProjectionNode:yd,MeasureLayout:hc}},Vd=gi(De(De(De(De({},_l),Ud),bd),Bd),La),qd=e=>{let{text:n="",delay:s=200,className:r="",animateBy:a="words",direction:i="top",threshold:o=.1,rootMargin:l="0px",animationFrom:c,animationTo:d,easing:u=e=>e,onAnimationComplete:h,stepDuration:m=.35}=e;const p="words"===a?n.split(" "):n.split(""),[f,x]=(0,t.useState)(!1),g=(0,t.useRef)(null);(0,t.useEffect)(()=>{if(!g.current)return;const e=new IntersectionObserver(t=>{let[n]=t;n.isIntersecting&&(x(!0),g.current&&e.unobserve(g.current))},{threshold:o,rootMargin:l});return e.observe(g.current),()=>e.disconnect()},[o,l]);const v=(0,t.useMemo)(()=>"top"===i?{filter:"blur(10px)",opacity:0,y:-50}:{filter:"blur(10px)",opacity:0,y:50},[i]),y=(0,t.useMemo)(()=>[{filter:"blur(5px)",opacity:.5,y:"top"===i?5:-5},{filter:"blur(0px)",opacity:1,y:0}],[i]),b=null!==c&&void 0!==c?c:v,j=null!==d&&void 0!==d?d:y,w=j.length+1,N=m*(w-1),k=Array.from({length:w},(e,t)=>1===w?0:t/(w-1));return(0,Ge.jsx)("p",{ref:g,className:"blur-text ".concat(r," flex flex-wrap"),children:p.map((e,t)=>{const n=((e,t)=>{const n=new Set([...Object.keys(e),...t.flatMap(e=>Object.keys(e))]),s={};return n.forEach(n=>{s[n]=[e[n],...t.map(e=>e[n])]}),s})(b,j),r={duration:N,times:k,delay:t*s/1e3};return r.ease=u,(0,Ge.jsxs)(Vd.span,{className:"inline-block will-change-[transform,filter,opacity]",initial:b,animate:f?n:b,transition:r,onAnimationComplete:t===p.length-1?h:void 0,children:[" "===e?"\xa0":e,"words"===a&&t<p.length-1&&"\xa0"]},t)})})},Hd=e=>{let{className:t="",size:n="md",showText:s=!0}=e;return(0,Ge.jsxs)("div",{className:"flex items-center space-x-3 ".concat(t),children:[(0,Ge.jsx)("div",{className:"".concat({sm:"w-8 h-8",md:"w-12 h-12",lg:"w-16 h-16",xl:"w-20 h-20"}[n]," flex-shrink-0"),children:(0,Ge.jsx)("img",{src:"/logo-campus-finance.png",alt:"AB CAMPUS FINANCE Logo",className:"w-full h-full object-contain"})}),s&&(0,Ge.jsxs)("div",{className:"flex flex-col",children:[(0,Ge.jsx)(qd,{text:"AB CAMPUS FINANCE",delay:150,className:"font-semibold text-secondary-900 font-montserrat ".concat({sm:"text-xs",md:"text-sm",lg:"text-base",xl:"text-lg"}[n]),animateBy:"letters",direction:"top",onAnimationComplete:()=>{console.log("[UI] Animation logo termin\xe9e")}}),(0,Ge.jsx)("p",{className:"text-xs text-neutral-600 font-montserrat",children:"Votre succ\xe8s, notre mission"})]})]})},Wd=Xe("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),Gd=Xe("Wifi",[["path",{d:"M5 13a10 10 0 0 1 14 0",key:"6v8j51"}],["path",{d:"M8.5 16.5a5 5 0 0 1 7 0",key:"sej527"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["line",{x1:"12",x2:"12.01",y1:"20",y2:"20",key:"of4bc4"}]]),Kd=Xe("WifiOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M8.5 16.5a5 5 0 0 1 7 0",key:"sej527"}],["path",{d:"M2 8.82a15 15 0 0 1 4.17-2.65",key:"11utq1"}],["path",{d:"M10.66 5c4.01-.36 8.14.9 11.34 3.76",key:"hxefdu"}],["path",{d:"M16.85 11.25a10 10 0 0 1 2.22 1.68",key:"q734kn"}],["path",{d:"M5 13a10 10 0 0 1 5.24-2.76",key:"piq4yl"}],["line",{x1:"12",x2:"12.01",y1:"20",y2:"20",key:"of4bc4"}]]);function Jd(e){const t=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=window.atob(t);return Uint8Array.from([...n].map(e=>e.charCodeAt(0)))}const Zd=()=>{const{user:e}=Je(),[n,s]=(0,t.useState)(!1),[r,a]=(0,t.useState)(!1),[i,o]=(0,t.useState)(null),[l,c]=(0,t.useState)(null),[d,u]=(0,t.useState)(!1);(0,t.useEffect)(()=>{(async()=>{try{const e=await fetch("".concat(Fe,"/api/push/vapid-public-key")),t=await e.json();c(t.publicKey)}catch(e){console.error("Erreur lors de la r\xe9cup\xe9ration de la cl\xe9 VAPID:",e)}})()},[]),(0,t.useEffect)(()=>{(()=>{const e="serviceWorker"in navigator&&"PushManager"in window;s(e)})()},[]),(0,t.useEffect)(()=>{(async()=>{if(console.log("[PUSH HOOK] V\xe9rification et renouvellement de l'abonnement...",{isSupported:n,vapidPublicKey:!!l,user:!!e}),!n||!l)return console.log("[PUSH HOOK] Notifications non support\xe9es ou cl\xe9 VAPID manquante"),void u(!0);try{const e=await navigator.serviceWorker.ready;let t=await e.pushManager.getSubscription();console.log("[PUSH HOOK] Subscription existante:",!!t),t?(console.log("[PUSH HOOK] Mode production - abonnement consid\xe9r\xe9 comme valide"),o(t),a(!0),u(!0)):(console.log("[PUSH HOOK] Pas d'abonnement - prompt peut s'afficher"),u(!0))}catch(t){console.error("Erreur lors de la v\xe9rification de l'abonnement:",t),u(!0)}})()},[n,l,e]),(0,t.useEffect)(()=>{if(!r||!i)return;const e=setInterval(async()=>{console.log("[PUSH HOOK] V\xe9rification p\xe9riodique de l'abonnement...");try{const e=await navigator.serviceWorker.ready;if(await e.pushManager.getSubscription())return void console.log("[PUSH HOOK] Mode production - validation silencieuse");{console.log("[PUSH HOOK] \u26a0\ufe0f Abonnement perdu, renouvellement...");const t=await h(e);t?(o(t),console.log("[PUSH HOOK] \u2705 Abonnement renouvel\xe9 automatiquement")):(a(!1),o(null),console.log("[PUSH HOOK] \u274c \xc9chec du renouvellement automatique"))}}catch(e){console.error("[PUSH HOOK] Erreur v\xe9rification p\xe9riodique:",e)}},6048e5);return()=>clearInterval(e)},[r,i]);const h=async t=>{try{console.log("[PUSH HOOK] Renouvellement de l'abonnement...");const n=await t.pushManager.getSubscription();n&&(await n.unsubscribe(),console.log("[PUSH HOOK] Ancien abonnement d\xe9sabonn\xe9"));const s=await t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Jd(l)});console.log("[PUSH HOOK] Nouvel abonnement cr\xe9\xe9");return(await fetch("".concat(Fe,"/api/save-subscription"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({subscription:s,userId:null===e||void 0===e?void 0:e.id})})).ok?(console.log("[PUSH HOOK] \u2705 Nouvel abonnement sauvegard\xe9"),s):(console.error("[PUSH HOOK] \u274c Erreur sauvegarde nouvel abonnement"),null)}catch(n){return console.error("[PUSH HOOK] Erreur renouvellement abonnement:",n),null}};return{isSupported:n,isSubscribed:r,subscription:i,vapidPublicKey:l,hasAskedPermission:d,subscribeUser:async()=>{if(console.log("[PUSH HOOK] D\xe9but de subscribeUser...",{isSupported:n,vapidPublicKey:!!l,user:!!e,userId:null===e||void 0===e?void 0:e.id}),!n||!l)return console.log("[PUSH HOOK] Notifications push non support\xe9es ou cl\xe9 VAPID manquante"),!1;try{console.log("[PUSH HOOK] Enregistrement du service worker...");const t=await navigator.serviceWorker.register("/serviceWorker.js");console.log("[PUSH HOOK] Service worker enregistr\xe9:",t),console.log("[PUSH HOOK] Attente de l'activation du service worker..."),await navigator.serviceWorker.ready,console.log("[PUSH HOOK] Service worker pr\xeat !"),console.log("[PUSH HOOK] Demande de permission...");const n=await Notification.requestPermission();if(console.log("[PUSH HOOK] Permission:",n),"granted"!==n)return console.log("[PUSH HOOK] Permission refus\xe9e"),!1;console.log("[PUSH HOOK] V\xe9rification de l'abonnement existant...");const s=await t.pushManager.getSubscription();if(s)return o(s),a(!0),console.log("[PUSH HOOK] \u2705 D\xe9j\xe0 abonn\xe9 aux notifications"),!0;console.log("[PUSH HOOK] Cr\xe9ation d'un nouvel abonnement...");const r=await t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Jd(l)});console.log("[PUSH HOOK] \u2705 Nouvelle subscription cr\xe9\xe9e:",r),console.log("[PUSH HOOK] Envoi au backend...",{url:"".concat(Fe,"/api/save-subscription"),userId:null===e||void 0===e?void 0:e.id});const i=await fetch("".concat(Fe,"/api/save-subscription"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({subscription:r,userId:null===e||void 0===e?void 0:e.id})});if(console.log("[PUSH HOOK] R\xe9ponse du backend:",i.status,i.ok),i.ok)return o(r),a(!0),console.log("[PUSH HOOK] \u2705 Abonnement enregistr\xe9 avec succ\xe8s !"),!0;{const e=await i.text();return console.error("[PUSH HOOK] Erreur lors de l'enregistrement de l'abonnement:",e),!1}}catch(t){return console.error("[PUSH HOOK] Erreur abonnement:",t),!1}},unsubscribeUser:async()=>{if(!i)return!1;try{await navigator.serviceWorker.ready;if(await i.unsubscribe())return o(null),a(!1),console.log("D\xe9sabonnement r\xe9ussi"),!0}catch(e){console.error("Erreur lors du d\xe9sabonnement:",e)}return!1}}},$d=e=>{let{notifications:n=[],onNotificationClick:s,className:r="",fixed:a=!1}=e;const[i,o]=(0,t.useState)(!1),l=(0,t.useRef)(null),{unreadCount:c,markAllAsRead:d}=it(),{pendingRequests:u}=(()=>{const{user:e}=Je(),[n,s]=(0,t.useState)({total:0,pending:0,approved:0,rejected:0,active:0,completed:0}),[r,a]=(0,t.useState)(0),i=async()=>{if(null!==e&&void 0!==e&&e.id)try{let t=Me.supabase.from("loans").select("status, amount");"admin"!==e.role&&(t=t.eq("user_id",e.id));const{data:n,error:r}=await t;if(r)return void console.error("Erreur lors du chargement des compteurs:",r);const i={total:0,pending:0,approved:0,rejected:0,active:0,completed:0};if(null===n||void 0===n||n.forEach(e=>{i.total++,i[e.status]++}),s(i),"admin"===e.role){const{data:e,error:t}=await Me.supabase.from("loans").select("id").eq("status","pending");!t&&e&&a(e.length)}}catch(t){console.error("Erreur lors du chargement des compteurs:",t)}};return(0,t.useEffect)(()=>{if(null===e||void 0===e||!e.id)return;i();const t=Me.supabase.channel("loan_counters").on("postgres_changes",{event:"*",schema:"public",table:"loans"},e=>{console.log("[COUNTERS] Changement d\xe9tect\xe9:",e),setTimeout(()=>{i()},100)}).subscribe(e=>{console.log("[COUNTERS] Statut de la connexion:",e)});return()=>{t.unsubscribe()}},[null===e||void 0===e?void 0:e.id,null===e||void 0===e?void 0:e.role]),{counters:n,pendingRequests:"admin"!==(null===e||void 0===e?void 0:e.role)?0:r,totalLoans:n.total,getCountByStatus:e=>n[e]||0,getAllCounters:()=>n,refresh:i}})(),{isSupported:h,isSubscribed:m,subscribeUser:p,unsubscribeUser:f}=Zd();(0,t.useEffect)(()=>{const e=e=>{l.current&&!l.current.contains(e.target)&&x()};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);const x=()=>{o(!1),c>0&&d()},g=c+u;return(0,Ge.jsxs)("div",{className:"relative ".concat(a?"fixed top-24 right-4 z-[9999] sm:top-4":"z-[9999]"," ").concat(r),ref:l,children:[(0,Ge.jsxs)("button",{onClick:()=>o(!i),className:"relative p-2 bg-white/80 backdrop-blur-sm rounded-full shadow-lg hover:shadow-xl transition-all duration-200 border border-gray-200/50",children:[(0,Ge.jsx)(zn,{size:20,className:"text-gray-700 w-5 h-5 sm:w-5 sm:h-5"}),g>0&&(0,Ge.jsx)("div",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center font-medium",children:g>99?"99+":g})]}),i&&(0,Ge.jsxs)("div",{className:"absolute right-0 mt-2 w-80 max-w-[calc(100vw-2rem)] sm:w-80 bg-white/95 backdrop-blur-sm rounded-xl shadow-2xl border border-gray-200/50 overflow-hidden",children:[(0,Ge.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-200/50 bg-gradient-to-r from-gray-50/50 to-white/50",children:[(0,Ge.jsxs)("div",{children:[(0,Ge.jsx)("h3",{className:"font-semibold text-gray-900",children:"Notifications"}),u>0&&(0,Ge.jsxs)("p",{className:"text-sm text-orange-600 font-medium",children:[u," demande",u>1?"s":""," en attente"]})]}),(0,Ge.jsx)("button",{onClick:x,className:"p-1 rounded-full hover:bg-gray-100 transition-colors duration-200",children:(0,Ge.jsx)(st,{size:16,className:"text-gray-500"})})]}),(0,Ge.jsx)("div",{className:"max-h-96 overflow-y-auto",children:0===n.length?(0,Ge.jsxs)("div",{className:"p-8 text-center text-gray-500",children:[(0,Ge.jsx)(zn,{size:48,className:"mx-auto mb-4 text-gray-300"}),(0,Ge.jsx)("p",{className:"text-sm",children:"Aucune notification"}),u>0&&(0,Ge.jsxs)("p",{className:"text-xs text-orange-600 mt-2",children:[u," demande",u>1?"s":""," en attente de validation"]})]}):(0,Ge.jsx)("div",{className:"p-2",children:n.map((e,t)=>(0,Ge.jsx)("div",{onClick:()=>(e=>{null===s||void 0===s||s(e),x()})(e),className:"p-3 rounded-lg cursor-pointer transition-all duration-200 hover:bg-gray-50/80 ".concat(e.read?"bg-white":"bg-blue-50/50 border-l-4 border-blue-400"),children:(0,Ge.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,Ge.jsxs)("div",{className:"flex-shrink-0 mt-1",children:["success"===e.type&&(0,Ge.jsx)(et,{size:16,className:"text-green-500"}),"error"===e.type&&(0,Ge.jsx)(tt,{size:16,className:"text-red-500"}),"info"===e.type&&(0,Ge.jsx)(nt,{size:16,className:"text-blue-500"}),"warning"===e.type&&(0,Ge.jsx)(Wd,{size:16,className:"text-yellow-500"})]}),(0,Ge.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Ge.jsx)("p",{className:"text-sm font-medium text-gray-900 leading-5",children:e.title}),(0,Ge.jsx)("p",{className:"text-sm text-gray-600 leading-5 mt-1",children:e.message}),e.action&&(0,Ge.jsxs)("p",{className:"text-xs text-blue-600 font-medium mt-2",children:[e.action," \u2192"]})]})]})},e.id))})}),(0,Ge.jsxs)("div",{className:"p-3 border-t border-gray-200/50 bg-gray-50/30",children:[h&&(0,Ge.jsx)("div",{className:"mb-3",children:(0,Ge.jsx)("button",{onClick:async()=>{m?await f():await p()},className:"w-full flex items-center justify-center space-x-2 px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200 ".concat(m?"bg-green-100 text-green-700 hover:bg-green-200":"bg-blue-100 text-blue-700 hover:bg-blue-200"),children:m?(0,Ge.jsxs)(Ge.Fragment,{children:[(0,Ge.jsx)(Gd,{size:16}),(0,Ge.jsx)("span",{children:"Notifications activ\xe9es"})]}):(0,Ge.jsxs)(Ge.Fragment,{children:[(0,Ge.jsx)(Kd,{size:16}),(0,Ge.jsx)("span",{children:"Activer les notifications"})]})})}),n.length>0&&(0,Ge.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[(0,Ge.jsxs)("span",{children:[c," non lue",c>1?"s":""]}),u>0&&(0,Ge.jsxs)("span",{className:"text-orange-600 font-medium",children:[u," en attente"]})]})]})]})]})},Qd=()=>{const{user:e,logout:n}=Je(),s=Y(),r=$(),{showInfo:a,notifications:i,markAsRead:o,refreshNotifications:l}=it(),[c,d]=(0,t.useState)(!1),[u,h]=(0,t.useState)(0);(0,t.useEffect)(()=>{null!==e&&void 0!==e&&e.id&&l(e.id)},[null===e||void 0===e?void 0:e.id,l]),(0,t.useEffect)(()=>{if("admin"===(null===e||void 0===e?void 0:e.role)){const e=()=>{const e=JSON.parse(localStorage.getItem("adminNotifications")||"[]").filter(e=>!e.read&&new Date(e.timestamp)>new Date(Date.now()-3e5));if(e.length>0){h(e.length);const t=e[0];"new_registration"===t.type&&a("Nouvelle inscription : ".concat(t.user.firstName," ").concat(t.user.lastName))}},t=setInterval(e,3e4);return e(),()=>clearInterval(t)}},[null===e||void 0===e?void 0:e.role,a]);const m=async()=>{try{console.log("[HEADER] Tentative de d\xe9connexion..."),await n(),console.log("[HEADER] \u2705 D\xe9connexion r\xe9ussie, redirection vers login"),s("/login")}catch(e){console.error("[HEADER] \u274c Erreur lors de la d\xe9connexion:",e);try{localStorage.removeItem("ab_user_cache")}catch(on){}s("/login")}},p=()=>null!==e&&void 0!==e&&e.firstName&&null!==e&&void 0!==e&&e.lastName?"".concat(e.firstName," ").concat(e.lastName):(null===e||void 0===e?void 0:e.email)||"Utilisateur";return(0,Ge.jsx)("header",{className:"fixed top-0 left-0 right-0 bg-white shadow-soft border-b border-accent-200 w-full z-50",children:(0,Ge.jsxs)("div",{className:"w-full",children:[(0,Ge.jsxs)("div",{className:"flex justify-between items-center py-4 w-full px-4 lg:px-8",children:[(0,Ge.jsx)("button",{onClick:()=>{"admin"===(null===e||void 0===e?void 0:e.role)&&r.pathname.startsWith("/admin")||"admin"===(null===e||void 0===e?void 0:e.role)?s("/admin"):s("/dashboard")},className:"flex items-center space-x-3 hover:opacity-80 transition-opacity duration-200",children:(0,Ge.jsx)(Hd,{size:"md"})}),(0,Ge.jsx)("div",{className:"lg:hidden",children:(0,Ge.jsx)($d,{notifications:i,onNotificationClick:e=>{o(e.id),"payment"===e.type?s("/repayment"):"loan"===e.type&&s("/loan-history")}})}),(0,Ge.jsxs)("nav",{className:"hidden lg:flex items-center space-x-6",children:[(0,Ge.jsx)("a",{href:"/dashboard",className:"text-neutral-600 hover:text-secondary-900 font-montserrat transition-colors duration-200",children:"Accueil"}),"admin"===(null===e||void 0===e?void 0:e.role)?(0,Ge.jsxs)(Ge.Fragment,{children:[(0,Ge.jsx)("a",{href:"/admin/loan-requests",className:"text-neutral-600 hover:text-secondary-900 font-montserrat transition-colors duration-200",children:"Demandes de pr\xeat"}),(0,Ge.jsx)("a",{href:"/admin/user-management",className:"text-neutral-600 hover:text-secondary-900 font-montserrat transition-colors duration-200",children:"Gestion utilisateur"}),(0,Ge.jsx)("a",{href:"/admin/analytics",className:"text-neutral-600 hover:text-secondary-900 font-montserrat transition-colors duration-200",children:"Analytiques"})]}):(0,Ge.jsxs)(Ge.Fragment,{children:[(0,Ge.jsx)("a",{href:"/loan-request",className:"text-neutral-600 hover:text-secondary-900 font-montserrat transition-colors duration-200",children:"Demander un pr\xeat"}),(0,Ge.jsx)("a",{href:"/loan-history",className:"text-neutral-600 hover:text-secondary-900 font-montserrat transition-colors duration-200",children:"Historique"}),(0,Ge.jsx)("a",{href:"/repayment",className:"text-neutral-600 hover:text-secondary-900 font-montserrat transition-colors duration-200",children:"Remboursement"})]})]}),(0,Ge.jsxs)("div",{className:"hidden lg:flex items-center space-x-4",children:[(0,Ge.jsx)($d,{notifications:i,onNotificationClick:e=>{o(e.id),"payment"===e.type?s("/repayment"):"loan"===e.type&&s("/loan-history")}}),"admin"===(null===e||void 0===e?void 0:e.role)&&u>0&&(0,Ge.jsxs)("button",{className:"relative p-2 text-neutral-400 hover:text-neutral-600 transition-colors duration-200",children:[(0,Ge.jsx)(zn,{size:20}),(0,Ge.jsx)("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:u})]}),(0,Ge.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Ge.jsx)("div",{className:"w-8 h-8 bg-primary-100 rounded-full flex items-center justify-center",children:(0,Ge.jsx)(Dn,{size:16,className:"text-primary-600"})}),(0,Ge.jsxs)("div",{className:"flex flex-col",children:[(0,Ge.jsx)("span",{className:"text-sm font-medium text-secondary-900 font-montserrat",children:p()}),(0,Ge.jsx)("span",{className:"text-xs text-neutral-600 font-montserrat",children:"admin"===(null===e||void 0===e?void 0:e.role)?"Administrateur":"Client AB CAMPUS FINANCE"})]}),(0,Ge.jsx)("button",{onClick:m,className:"p-2 text-neutral-400 hover:text-neutral-600 transition-colors duration-200",children:(0,Ge.jsx)(Mn,{size:20})})]})]}),(0,Ge.jsx)("button",{onClick:()=>d(!c),className:"lg:hidden relative p-3 rounded-xl bg-white/80 backdrop-blur-sm border border-gray-200/50 hover:bg-white/90 transition-all duration-200 shadow-sm hover:shadow-md",children:(0,Ge.jsxs)("div",{className:"flex flex-col space-y-1.5",children:[(0,Ge.jsx)("span",{className:"w-6 h-0.5 bg-gray-700 rounded-full"}),(0,Ge.jsx)("span",{className:"w-6 h-0.5 bg-gray-700 rounded-full"}),(0,Ge.jsx)("span",{className:"w-6 h-0.5 bg-gray-700 rounded-full"})]})})]}),c&&(0,Ge.jsxs)("div",{className:"lg:hidden border-t border-accent-200 py-4 w-full overflow-hidden",children:[(0,Ge.jsx)("div",{className:"px-4 mb-4",children:(0,Ge.jsx)("h3",{className:"text-lg font-semibold text-secondary-900 font-montserrat mb-4",children:"Nous contacter"})}),(0,Ge.jsx)("div",{className:"px-4",children:(0,Ge.jsxs)("div",{className:"space-y-2",children:[(0,Ge.jsxs)("a",{href:"https://wa.me/22953463606",target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-3 px-4 py-3 rounded-xl hover:bg-green-50 transition-all duration-200 group",onClick:()=>d(!1),children:[(0,Ge.jsx)("div",{className:"w-8 h-8 bg-green-500 rounded-full flex items-center justify-center flex-shrink-0",children:(0,Ge.jsx)("svg",{className:"w-4 h-4 text-white",fill:"currentColor",viewBox:"0 0 24 24",children:(0,Ge.jsx)("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893A11.821 11.821 0 0020.885 3.488"})})}),(0,Ge.jsxs)("div",{className:"flex-1",children:[(0,Ge.jsx)("p",{className:"text-sm font-medium text-secondary-900 font-montserrat group-hover:text-green-600 transition-colors",children:"WhatsApp"}),(0,Ge.jsx)("p",{className:"text-xs text-neutral-600 font-montserrat",children:"+229 53 46 36 06"})]}),(0,Ge.jsx)(Fn,{size:16,className:"text-neutral-400 group-hover:text-green-600 transition-colors"})]}),(0,Ge.jsxs)("a",{href:"mailto:abpret51@gmail.com",className:"flex items-center space-x-3 px-4 py-3 rounded-xl hover:bg-blue-50 transition-all duration-200 group",onClick:()=>d(!1),children:[(0,Ge.jsx)("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center flex-shrink-0",children:(0,Ge.jsx)("svg",{className:"w-4 h-4 text-white",fill:"currentColor",viewBox:"0 0 24 24",children:(0,Ge.jsx)("path",{d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"})})}),(0,Ge.jsxs)("div",{className:"flex-1",children:[(0,Ge.jsx)("p",{className:"text-sm font-medium text-secondary-900 font-montserrat group-hover:text-blue-600 transition-colors",children:"Email"}),(0,Ge.jsx)("p",{className:"text-xs text-neutral-600 font-montserrat",children:"abpret51@gmail.com"})]}),(0,Ge.jsx)(Fn,{size:16,className:"text-neutral-400 group-hover:text-blue-600 transition-colors"})]}),(0,Ge.jsxs)("a",{href:"https://www.facebook.com/abpret.2024",target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-3 px-4 py-3 rounded-xl hover:bg-blue-50 transition-all duration-200 group",onClick:()=>d(!1),children:[(0,Ge.jsx)("div",{className:"w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center flex-shrink-0",children:(0,Ge.jsx)("svg",{className:"w-4 h-4 text-white",fill:"currentColor",viewBox:"0 0 24 24",children:(0,Ge.jsx)("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})})}),(0,Ge.jsxs)("div",{className:"flex-1",children:[(0,Ge.jsx)("p",{className:"text-sm font-medium text-secondary-900 font-montserrat group-hover:text-blue-600 transition-colors",children:"Facebook"}),(0,Ge.jsx)("p",{className:"text-xs text-neutral-600 font-montserrat",children:"AB Campus Finance"})]}),(0,Ge.jsx)(Fn,{size:16,className:"text-neutral-400 group-hover:text-blue-600 transition-colors"})]})]})}),(0,Ge.jsx)("div",{className:"mt-6 pt-6 border-t border-accent-200",children:(0,Ge.jsxs)("div",{className:"flex items-center justify-between px-4",children:[(0,Ge.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Ge.jsx)("div",{className:"w-8 h-8 bg-primary-100 rounded-full flex items-center justify-center",children:(0,Ge.jsx)(Dn,{size:16,className:"text-primary-600"})}),(0,Ge.jsxs)("div",{className:"flex flex-col",children:[(0,Ge.jsx)("span",{className:"text-sm font-medium text-secondary-900 font-montserrat",children:p()}),(0,Ge.jsx)("span",{className:"text-xs text-neutral-600 font-montserrat",children:"admin"===(null===e||void 0===e?void 0:e.role)?"Administrateur":"Client"})]})]}),(0,Ge.jsx)("button",{onClick:m,className:"p-2 text-neutral-400 hover:text-neutral-600 transition-colors duration-200",children:(0,Ge.jsx)(Mn,{size:20})})]})})]})]})})},Yd=Xe("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]),Xd=Xe("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]),eu=e=>{let{size:t=16,className:n=""}=e;return(0,Ge.jsx)("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"currentColor",className:n,children:(0,Ge.jsx)("path",{d:"M12.031 6.172c-3.181 0-5.767 2.586-5.768 5.766-.001 1.298.38 2.27 1.019 3.287l-.582 2.128 2.182-.573c.978.58 1.911.928 3.145.929 3.178 0 5.767-2.587 5.768-5.766.001-3.187-2.575-5.771-5.764-5.771zm3.392 8.244c-.144.405-.837.774-1.17.824-.299.045-.677.063-1.092-.069-.252-.08-.575-.187-.988-.365-1.739-.751-2.874-2.502-2.961-2.617-.087-.116-.708-.94-.708-1.793s.448-1.273.607-1.446c.159-.173.346-.217.462-.217l.332.006c.106.005.249-.04.39.298.144.347.491 1.2.534 1.287.043.087.072.188.014.304-.058.116-.087.188-.173.289l-.26.304c-.087.086-.177.18-.076.354.101.174.449.741.964 1.201.662.591 1.221.774 1.394.86s.274.072.376-.043c.101-.116.433-.506.549-.68.116-.173.231-.145.39-.087s1.011.477 1.184.564.289.13.332.202c.045.072.045.419-.1.824zm-3.423-14.416c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm.029 18.88c-1.161 0-2.305-.292-3.318-.844l-3.677.964.984-3.595c-.607-1.052-.927-2.246-.926-3.468.001-3.825 3.113-6.937 6.937-6.937 1.856 0 3.598.723 4.907 2.034 1.31 1.311 2.031 3.054 2.03 4.908-.001 3.825-3.113 6.938-6.937 6.938z"})})},tu=e=>{let{size:t=16,className:n=""}=e;return(0,Ge.jsx)("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"currentColor",className:n,children:(0,Ge.jsx)("path",{d:"M24 5.457v13.909c0 .904-.732 1.636-1.636 1.636h-3.819V11.73L12 16.64l-6.545-4.91v9.273H1.636A1.636 1.636 0 0 1 0 19.366V5.457c0-.904.732-1.636 1.636-1.636h.819L12 10.91l9.545-7.089h.819A1.636 1.636 0 0 1 24 5.457z"})})},nu=()=>{const e=()=>{window.open("mailto:abpret51@gmail.com","_blank")},t=()=>{const e="https://wa.me/".concat("+22953463606","?text=").concat(encodeURIComponent("Bonjour, je souhaite avoir plus d'informations sur vos services de pr\xeat."));window.open(e,"_blank")},n=()=>{window.open("https://www.facebook.com/abpret.2024","_blank")};return(0,Ge.jsx)("footer",{className:"bg-white/80 backdrop-blur-sm border-t border-accent-200",children:(0,Ge.jsxs)("div",{className:"max-w-7xl mx-auto px-4 pt-2 pb-4",children:[(0,Ge.jsxs)("div",{className:"lg:hidden",children:[(0,Ge.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Ge.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Ge.jsx)("div",{className:"w-8 h-8 bg-primary-100 rounded-full flex items-center justify-center",children:(0,Ge.jsx)("span",{className:"text-primary-600 font-bold text-sm",children:"AB"})}),(0,Ge.jsxs)("div",{children:[(0,Ge.jsx)("p",{className:"text-xs font-medium text-secondary-900 font-montserrat",children:"AB CAMPUS FINANCE"}),(0,Ge.jsx)("p",{className:"text-xs text-neutral-600 font-montserrat",children:"Cotonou, B\xe9nin"})]})]}),(0,Ge.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Ge.jsx)("button",{onClick:e,className:"p-2 bg-red-100 rounded-full hover:bg-red-200 transition-colors duration-200",title:"Envoyer un email",children:(0,Ge.jsx)(tu,{size:14,className:"text-red-600"})}),(0,Ge.jsx)("button",{onClick:t,className:"p-2 bg-green-100 rounded-full hover:bg-green-200 transition-colors duration-200",title:"Contacter sur WhatsApp",children:(0,Ge.jsx)(eu,{size:14,className:"text-green-600"})}),(0,Ge.jsx)("button",{onClick:n,className:"p-2 bg-blue-100 rounded-full hover:bg-blue-200 transition-colors duration-200",title:"Suivre sur Facebook",children:(0,Ge.jsx)(Yd,{size:14,className:"text-blue-600"})})]})]}),(0,Ge.jsx)("div",{className:"mt-3 pt-3 border-t border-accent-200",children:(0,Ge.jsxs)("div",{className:"flex items-center justify-between text-xs text-neutral-600 font-montserrat",children:[(0,Ge.jsx)("span",{children:"\xa9 2025 AB CAMPUS FINANCE"}),(0,Ge.jsx)("span",{className:"text-primary-600",children:"Votre succ\xe8s, notre mission"})]})})]}),(0,Ge.jsx)("div",{className:"hidden lg:block",children:(0,Ge.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Ge.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,Ge.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Ge.jsx)("div",{className:"w-10 h-10 bg-primary-100 rounded-full flex items-center justify-center",children:(0,Ge.jsx)("span",{className:"text-primary-600 font-bold",children:"AB"})}),(0,Ge.jsxs)("div",{children:[(0,Ge.jsx)("p",{className:"font-semibold text-secondary-900 font-montserrat",children:"AB CAMPUS FINANCE"}),(0,Ge.jsx)("p",{className:"text-sm text-neutral-600 font-montserrat",children:"Votre succ\xe8s, notre mission"})]})]}),(0,Ge.jsxs)("div",{className:"flex items-center space-x-4 text-sm",children:[(0,Ge.jsxs)("button",{onClick:e,className:"flex items-center space-x-2 text-neutral-600 hover:text-red-600 transition-colors duration-200 font-montserrat",children:[(0,Ge.jsx)(tu,{size:16}),(0,Ge.jsx)("span",{children:"abpret51@gmail.com"}),(0,Ge.jsx)(Xd,{size:12})]}),(0,Ge.jsxs)("button",{onClick:t,className:"flex items-center space-x-2 text-neutral-600 hover:text-green-600 transition-colors duration-200 font-montserrat",children:[(0,Ge.jsx)(eu,{size:16}),(0,Ge.jsx)("span",{children:"+229 53463606"}),(0,Ge.jsx)(Xd,{size:12})]}),(0,Ge.jsxs)("button",{onClick:n,className:"flex items-center space-x-2 text-neutral-600 hover:text-blue-600 transition-colors duration-200 font-montserrat",children:[(0,Ge.jsx)(Yd,{size:16}),(0,Ge.jsx)("span",{children:"Suivre sur Facebook"}),(0,Ge.jsx)(Xd,{size:12})]})]})]}),(0,Ge.jsx)("div",{className:"text-sm text-neutral-600 font-montserrat",children:"\xa9 2025 AB CAMPUS FINANCE. Tous droits r\xe9serv\xe9s."})]})})]})})},su=e=>{let{items:n,panelHeight:s=68,baseItemSize:r=50,magnification:a=70,className:i=""}=e;const[o,l]=(0,t.useState)(null),c=Y(),d=$();return(0,Ge.jsxs)(Vd.div,{className:"fixed bottom-4 left-4 right-4 z-50 ".concat(i),initial:{y:0,opacity:1},animate:{y:0,opacity:1},transition:{type:"spring",stiffness:300,damping:30,duration:.3},children:[(0,Ge.jsx)("div",{className:"absolute inset-0 bg-white border border-accent-200 rounded-3xl shadow-2xl"}),(0,Ge.jsx)("div",{className:"relative flex items-center justify-center px-6 py-3",style:{height:s},children:(0,Ge.jsx)("div",{className:"flex items-center space-x-3",children:n.map((e,t)=>{const n=o===t,s=d.pathname===e.path,i=n?r+a:r;return(0,Ge.jsxs)(Vd.div,{className:"relative",onHoverStart:()=>l(t),onHoverEnd:()=>l(null),onClick:()=>(e=>{e.path&&e.path!==d.pathname&&c(e.path)})(e),whileTap:{scale:.92},transition:{type:"spring",stiffness:400,damping:17},children:[(0,Ge.jsxs)(Vd.div,{className:"\n                    flex flex-col items-center justify-center rounded-2xl cursor-pointer\n                    ".concat(s?"bg-primary-100 shadow-lg":n?"bg-accent-100 shadow-lg":"bg-transparent hover:bg-accent-50","\n                    transition-all duration-300 ease-out\n                  "),style:{width:i,height:i,minWidth:i,minHeight:i},animate:{scale:n?1.15:1,y:n?-12:0},transition:{type:"spring",stiffness:400,damping:17},children:[(0,Ge.jsx)(Vd.div,{className:"\n                      transition-colors duration-200\n                      ".concat(s||n?"text-primary-600":"text-secondary-600","\n                    "),animate:{scale:n?1.1:1},transition:{duration:.2},children:e.icon}),(0,Ge.jsx)(Vd.span,{className:"text-xs font-medium mt-1 transition-colors duration-200 ".concat(s||n?"text-primary-600":"text-secondary-600"),style:{fontSize:"10px"},animate:{scale:n?1.05:1},transition:{duration:.2},children:e.label})]}),n&&(0,Ge.jsx)(Vd.div,{className:"absolute inset-0 rounded-2xl bg-primary-200/40 blur-2xl -z-10",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1.3},exit:{opacity:0,scale:.8},transition:{duration:.3}})]},t)})})}),(0,Ge.jsx)("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 w-32 h-1 bg-gradient-to-r from-transparent via-primary-200/50 to-transparent rounded-full"})]})},ru=Xe("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),au=Xe("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),iu=Xe("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),ou=Xe("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),lu=Xe("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),cu=Xe("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),du=Xe("Grid",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["line",{x1:"3",x2:"21",y1:"9",y2:"9",key:"1vqk6q"}],["line",{x1:"3",x2:"21",y1:"15",y2:"15",key:"o2sbyz"}],["line",{x1:"9",x2:"9",y1:"3",y2:"21",key:"13tij5"}],["line",{x1:"15",x2:"15",y1:"3",y2:"21",key:"1hpv9i"}]]),uu=Xe("Wallet",[["path",{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4",key:"195gfw"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h16v-5",key:"195n9w"}],["path",{d:"M18 12a2 2 0 0 0 0 4h4v-4Z",key:"vllfpd"}]]),hu=(0,t.createContext)(),mu=e=>{let{children:t}=e;const{user:n}=Je(),s="admin"===(null===n||void 0===n?void 0:n.role)?[{icon:(0,Ge.jsx)(ru,{size:20}),label:"Accueil",path:"/admin"},{icon:(0,Ge.jsx)(au,{size:20}),label:"Demandes",path:"/admin/loan-requests"},{icon:(0,Ge.jsx)(iu,{size:20}),label:"Menu",path:"/admin/menu"},{icon:(0,Ge.jsx)(ou,{size:20}),label:"Analytics",path:"/admin/analytics"},{icon:(0,Ge.jsx)(lu,{size:20}),label:"Param\xe8tres",path:"/admin/settings"}]:[{icon:(0,Ge.jsx)(ru,{size:20}),label:"Accueil",path:"/dashboard"},{icon:(0,Ge.jsx)(cu,{size:20}),label:"Demandes",path:"/loan-request"},{icon:(0,Ge.jsx)(du,{size:20}),label:"Menu",path:"/menu"},{icon:(0,Ge.jsx)(uu,{size:20}),label:"Rembourser",path:"/repayment"},{icon:(0,Ge.jsx)(Dn,{size:20}),label:"Profil",path:"/profile"}];return(0,Ge.jsxs)(hu.Provider,{value:{dockItems:s},children:[t,(0,Ge.jsx)(su,{items:s,panelHeight:80,baseItemSize:60,magnification:80})]})},pu=e=>{let{children:t}=e;return(0,Ge.jsx)(mu,{children:(0,Ge.jsxs)("div",{className:"bg-gray-50 w-full overflow-x-hidden",children:[(0,Ge.jsx)(Qd,{}),(0,Ge.jsx)("main",{className:"w-full overflow-x-hidden pt-20",children:t}),(0,Ge.jsx)(nu,{})]})})};function fu(e,t){if("function"===typeof e)return e(t);null!==e&&void 0!==e&&(e.current=t)}function xu(){for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];return t.useCallback(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>{let n=!1;const s=t.map(t=>{const s=fu(t,e);return n||"function"!==typeof s||(n=!0),s});if(n)return()=>{for(let e=0;e<s.length;e++){const n=s[e];"function"===typeof n?n():fu(t[e],null)}}}}(...n),n)}class gu extends t.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const e=t.offsetParent,n=kd(e)&&e.offsetWidth||0,s=this.props.sizeRef.current;s.height=t.offsetHeight||0,s.width=t.offsetWidth||0,s.top=t.offsetTop,s.left=t.offsetLeft,s.right=n-s.width-s.left}return null}componentDidUpdate(){}render(){return this.props.children}}function vu(e){let{children:n,isPresent:s,anchorX:r,root:a}=e;const i=(0,t.useId)(),o=(0,t.useRef)(null),l=(0,t.useRef)({width:0,height:0,top:0,left:0,right:0}),{nonce:c}=(0,t.useContext)(Ma),d=xu(o,null===n||void 0===n?void 0:n.ref);return(0,t.useInsertionEffect)(()=>{const{width:e,height:t,top:n,left:d,right:u}=l.current;if(s||!o.current||!e||!t)return;const h="left"===r?"left: ".concat(d):"right: ".concat(u);o.current.dataset.motionPopId=i;const m=document.createElement("style");c&&(m.nonce=c);const p=null!==a&&void 0!==a?a:document.head;return p.appendChild(m),m.sheet&&m.sheet.insertRule('\n          [data-motion-pop-id="'.concat(i,'"] {\n            position: absolute !important;\n            width: ').concat(e,"px !important;\n            height: ").concat(t,"px !important;\n            ").concat(h,"px !important;\n            top: ").concat(n,"px !important;\n          }\n        ")),()=>{p.contains(m)&&p.removeChild(m)}},[s]),(0,Ge.jsx)(gu,{isPresent:s,childRef:o,sizeRef:l,children:t.cloneElement(n,{ref:d})})}const yu=e=>{let{children:n,initial:s,isPresent:r,onExitComplete:a,custom:i,presenceAffectsLayout:o,mode:l,anchorX:c,root:d}=e;const u=ei(bu),h=(0,t.useId)();let m=!0,p=(0,t.useMemo)(()=>(m=!1,{id:h,initial:s,isPresent:r,custom:i,onExitComplete:e=>{u.set(e,!0);for(const t of u.values())if(!t)return;a&&a()},register:e=>(u.set(e,!1),()=>u.delete(e))}),[r,u,a]);return o&&m&&(p=De({},p)),(0,t.useMemo)(()=>{u.forEach((e,t)=>u.set(t,!1))},[r]),t.useEffect(()=>{!r&&!u.size&&a&&a()},[r]),"popLayout"===l&&(n=(0,Ge.jsx)(vu,{isPresent:r,anchorX:c,root:d,children:n})),(0,Ge.jsx)(Xa.Provider,{value:p,children:n})};function bu(){return new Map}const ju=e=>e.key||"";function wu(e){const n=[];return t.Children.forEach(e,e=>{(0,t.isValidElement)(e)&&n.push(e)}),n}const Nu=e=>{let{children:n,custom:s,initial:r=!0,onExitComplete:a,presenceAffectsLayout:i=!0,mode:o="sync",propagate:l=!1,anchorX:c="left",root:d}=e;const[u,h]=ac(l),m=(0,t.useMemo)(()=>wu(n),[n]),p=l&&!u?[]:m.map(ju),f=(0,t.useRef)(!0),x=(0,t.useRef)(m),g=ei(()=>new Map),[v,y]=(0,t.useState)(m),[b,j]=(0,t.useState)(m);hi(()=>{f.current=!1,x.current=m;for(let e=0;e<b.length;e++){const t=ju(b[e]);p.includes(t)?g.delete(t):!0!==g.get(t)&&g.set(t,!1)}},[b,p.length,p.join("-")]);const w=[];if(m!==v){let e=[...m];for(let t=0;t<b.length;t++){const n=b[t],s=ju(n);p.includes(s)||(e.splice(t,0,n),w.push(n))}return"wait"===o&&w.length&&(e=w),j(wu(e)),y(m),null}const{forceRender:N}=(0,t.useContext)(za);return(0,Ge.jsx)(Ge.Fragment,{children:b.map(e=>{const t=ju(e),n=!(l&&!u)&&(m===b||p.includes(t));return(0,Ge.jsx)(yu,{isPresent:n,initial:!(f.current&&!r)&&void 0,custom:s,presenceAffectsLayout:i,mode:o,root:d,onExitComplete:n?void 0:()=>{if(!g.has(t))return;g.set(t,!0);let e=!0;g.forEach(t=>{t||(e=!1)}),e&&(null===N||void 0===N||N(),j(x.current),l&&(null===h||void 0===h||h()),a&&a())},anchorX:c,children:e},t)})})},ku=()=>{const[e,n]=(0,t.useState)(!1),[s,r]=(0,t.useState)(!1),{isSupported:a,isSubscribed:i,hasAskedPermission:o,subscribeUser:l}=Zd();console.log("[PUSH PROMPT] Composant rendu"),(0,t.useEffect)(()=>{const e=localStorage.getItem("notification-prompt-seen");if(e&&i)console.log("[PUSH PROMPT] L'utilisateur a d\xe9j\xe0 vu le prompt et est abonn\xe9 - pas d'affichage");else{if(e&&!i){const e=localStorage.getItem("notification-prompt-last-seen");if(e){const t=(Date.now()-parseInt(e))/864e5;if(t<3)return void console.log("[PUSH PROMPT] L'utilisateur a vu le prompt r\xe9cemment (il y a",Math.round(t),"jours) - pas d'affichage")}}if(console.log("[PUSH PROMPT] \xc9tats:",{isSupported:a,hasAskedPermission:o,isSubscribed:i,permission:Notification.permission}),a&&o&&!i&&"denied"!==Notification.permission){console.log("[PUSH PROMPT] \u2705 Affichage du prompt dans 3 secondes...");const e=setTimeout(()=>{console.log("[PUSH PROMPT] \ud83c\udfaf Affichage du prompt maintenant !"),n(!0)},3e3);return()=>clearTimeout(e)}console.log("[PUSH PROMPT] Conditions non remplies pour afficher le prompt:",{isSupported:a,hasAskedPermission:o,isSubscribed:i,permission:Notification.permission})}},[a,o,i]);return e?(0,Ge.jsx)(Nu,{children:(0,Ge.jsx)(Vd.div,{initial:{opacity:0,y:-50,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-50,scale:.9},transition:{duration:.3,ease:"easeOut"},className:"fixed top-4 right-4 z-[10000] max-w-sm",children:(0,Ge.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl border border-gray-200/50 p-4 backdrop-blur-sm",children:[(0,Ge.jsxs)("div",{className:"flex items-start space-x-3 mb-3",children:[(0,Ge.jsx)("div",{className:"flex-shrink-0",children:(0,Ge.jsx)("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:(0,Ge.jsx)(zn,{size:20,className:"text-blue-600"})})}),(0,Ge.jsxs)("div",{className:"flex-1",children:[(0,Ge.jsx)("h3",{className:"font-semibold text-gray-900 text-sm",children:"Notifications requises"}),(0,Ge.jsx)("p",{className:"text-xs text-gray-600 mt-1",children:"Activez les notifications pour recevoir les alertes importantes sur les nouveaut\xe9s et avantages"})]})]}),(0,Ge.jsx)("div",{className:"flex space-x-2",children:(0,Ge.jsx)("button",{onClick:async()=>{console.log("[PUSH PROMPT] D\xe9but de l'activation des notifications..."),r(!0);try{const e=await l();console.log("[PUSH PROMPT] R\xe9sultat de l'abonnement:",e),localStorage.setItem("notification-prompt-seen","true"),localStorage.setItem("notification-prompt-last-seen",Date.now().toString()),console.log("[PUSH PROMPT] Prompt marqu\xe9 comme vu dans localStorage"),e?(console.log("[PUSH PROMPT] Abonnement r\xe9ussi, fermeture du prompt"),n(!1)):(console.log("[PUSH PROMPT] \xc9chec de l'abonnement, fermeture du prompt quand m\xeame"),n(!1))}catch(e){console.error("[PUSH PROMPT] Erreur lors de l'abonnement:",e),localStorage.setItem("notification-prompt-seen","true"),localStorage.setItem("notification-prompt-last-seen",Date.now().toString()),n(!1)}finally{r(!1)}},disabled:s,className:"w-full px-4 py-3 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 transition-colors duration-200 disabled:opacity-50 flex items-center justify-center space-x-2",children:s?(0,Ge.jsxs)(Ge.Fragment,{children:[(0,Ge.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),(0,Ge.jsx)("span",{children:"Activation en cours..."})]}):(0,Ge.jsxs)(Ge.Fragment,{children:[(0,Ge.jsx)(et,{size:16}),(0,Ge.jsx)("span",{children:"Activer les notifications maintenant"})]})})}),(0,Ge.jsx)("div",{className:"mt-3 pt-3 border-t border-gray-100",children:(0,Ge.jsxs)("div",{className:"flex items-center space-x-2 text-xs text-gray-500",children:[(0,Ge.jsx)(tt,{size:12}),(0,Ge.jsx)("span",{children:"Les notifications sont essentielles pour votre exp\xe9rience utilisateur"})]})})]})})}):null},Su=Xe("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),Eu=Xe("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]),_u=Xe("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),Cu=Xe("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",key:"3xmgem"}]]),Pu=Xe("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]),Tu=()=>{const[e,n]=(0,t.useState)(null),[s,r]=(0,t.useState)(!1),[a,i]=(0,t.useState)(!1),[o,l]=(0,t.useState)(!1);(0,t.useEffect)(()=>{const e=localStorage.getItem("pwa-install-prompt-seen"),t=localStorage.getItem("pwa-install-prompt-last-seen");if(e&&t){if((Date.now()-parseInt(t))/864e5<7)return void console.log("[PWA_INSTALL] Prompt d\xe9j\xe0 vu r\xe9cemment, pas d'affichage")}if((window.matchMedia("(display-mode: standalone)").matches||!0===window.navigator.standalone)&&(i(!0),1))return void console.log("[PWA_INSTALL] App d\xe9j\xe0 install\xe9e");const s=e=>{console.log("[PWA_INSTALL] beforeinstallprompt d\xe9clench\xe9"),e.preventDefault(),n(e),r(!0),setTimeout(()=>{l(!0)},3e3)},a=()=>{console.log("[PWA_INSTALL] App install\xe9e avec succ\xe8s"),i(!0),r(!1),l(!1),n(null),localStorage.setItem("pwa-installed","true"),localStorage.setItem("pwa-install-date",Date.now().toString())};return window.addEventListener("beforeinstallprompt",s),window.addEventListener("appinstalled",a),()=>{window.removeEventListener("beforeinstallprompt",s),window.removeEventListener("appinstalled",a)}},[]);return{isInstallable:s,isInstalled:a,showInstallPrompt:o,canInstall:s&&!a&&null!==e,installApp:async()=>{if(!e)return console.log("[PWA_INSTALL] Pas de prompt d'installation disponible"),!1;try{console.log("[PWA_INSTALL] D\xe9clenchement de l'installation..."),e.prompt();const{outcome:t}=await e.userChoice;return console.log("[PWA_INSTALL] R\xe9sultat de l'installation:",t),"accepted"===t?(console.log("[PWA_INSTALL] \u2705 Installation accept\xe9e"),i(!0),l(!1),localStorage.setItem("pwa-install-accepted","true"),localStorage.setItem("pwa-install-date",Date.now().toString())):(console.log("[PWA_INSTALL] \u274c Installation refus\xe9e"),localStorage.setItem("pwa-install-declined","true"),localStorage.setItem("pwa-install-declined-date",Date.now().toString())),n(null),r(!1),"accepted"===t}catch(t){return console.error("[PWA_INSTALL] Erreur lors de l'installation:",t),!1}},dismissInstallPrompt:()=>{console.log("[PWA_INSTALL] Prompt d'installation ferm\xe9"),l(!1),localStorage.setItem("pwa-install-prompt-seen","true"),localStorage.setItem("pwa-install-prompt-last-seen",Date.now().toString())}}},Au=()=>{const{showInstallPrompt:e,canInstall:t,installApp:n,dismissInstallPrompt:s}=Tu();if(!e||!t)return null;return(0,Ge.jsx)(Nu,{children:(0,Ge.jsx)(Vd.div,{initial:{opacity:0,y:50,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:50,scale:.9},transition:{duration:.3,ease:"easeOut"},className:"fixed bottom-4 left-4 right-4 z-50 max-w-sm mx-auto",children:(0,Ge.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl border border-gray-200 overflow-hidden",children:[(0,Ge.jsx)("div",{className:"bg-gradient-to-r from-primary-500 to-secondary-500 p-4 text-white",children:(0,Ge.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Ge.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Ge.jsx)("div",{className:"p-2 bg-white/20 rounded-lg",children:(0,Ge.jsx)(Su,{size:20})}),(0,Ge.jsxs)("div",{children:[(0,Ge.jsx)("h3",{className:"font-bold text-lg",children:"Installer l'app"}),(0,Ge.jsx)("p",{className:"text-primary-100 text-sm",children:"Acc\xe8s rapide depuis votre \xe9cran d'accueil"})]})]}),(0,Ge.jsx)("button",{onClick:s,className:"p-1 hover:bg-white/20 rounded-lg transition-colors",children:(0,Ge.jsx)(st,{size:20})})]})}),(0,Ge.jsxs)("div",{className:"p-4",children:[(0,Ge.jsxs)("div",{className:"space-y-3 mb-4",children:[(0,Ge.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Ge.jsx)("div",{className:"p-2 bg-green-100 rounded-lg",children:(0,Ge.jsx)(Eu,{size:16,className:"text-green-600"})}),(0,Ge.jsxs)("div",{children:[(0,Ge.jsx)("p",{className:"font-medium text-gray-900 text-sm",children:"Acc\xe8s instantan\xe9"}),(0,Ge.jsx)("p",{className:"text-gray-500 text-xs",children:"Ouvrez l'app directement depuis votre \xe9cran d'accueil"})]})]}),(0,Ge.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Ge.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,Ge.jsx)(_u,{size:16,className:"text-blue-600"})}),(0,Ge.jsxs)("div",{children:[(0,Ge.jsx)("p",{className:"font-medium text-gray-900 text-sm",children:"Plus rapide"}),(0,Ge.jsx)("p",{className:"text-gray-500 text-xs",children:"Chargement plus rapide et navigation fluide"})]})]}),(0,Ge.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Ge.jsx)("div",{className:"p-2 bg-purple-100 rounded-lg",children:(0,Ge.jsx)(Cu,{size:16,className:"text-purple-600"})}),(0,Ge.jsxs)("div",{children:[(0,Ge.jsx)("p",{className:"font-medium text-gray-900 text-sm",children:"S\xe9curis\xe9"}),(0,Ge.jsx)("p",{className:"text-gray-500 text-xs",children:"Vos donn\xe9es sont prot\xe9g\xe9es et synchronis\xe9es"})]})]})]}),(0,Ge.jsxs)("div",{className:"flex space-x-3",children:[(0,Ge.jsxs)("button",{onClick:async()=>{await n()&&console.log("[PWA_INSTALL_PROMPT] Installation r\xe9ussie")},className:"flex-1 bg-gradient-to-r from-primary-500 to-secondary-500 text-white font-semibold py-3 px-4 rounded-xl hover:from-primary-600 hover:to-secondary-600 transition-all duration-200 transform hover:scale-105 flex items-center justify-center space-x-2",children:[(0,Ge.jsx)(Su,{size:18}),(0,Ge.jsx)("span",{children:"Installer"})]}),(0,Ge.jsx)("button",{onClick:s,className:"px-4 py-3 text-gray-600 font-medium hover:bg-gray-100 rounded-xl transition-colors",children:"Plus tard"})]}),(0,Ge.jsx)("div",{className:"mt-3 p-3 bg-blue-50 rounded-lg",children:(0,Ge.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,Ge.jsx)(Pu,{size:16,className:"text-blue-600 mt-0.5 flex-shrink-0"}),(0,Ge.jsxs)("p",{className:"text-blue-800 text-xs",children:[(0,Ge.jsx)("strong",{children:"Conseil :"})," Une fois install\xe9e, l'app appara\xeetra sur votre \xe9cran d'accueil comme une application native. Vous pourrez y acc\xe9der m\xeame sans connexion internet !"]})]})})]})]})})})},Iu=Xe("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),Ru=Xe("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),Ou=Xe("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),Lu=Xe("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),zu=Xe("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Du=Xe("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]),Mu=Xe("KeyRound",[["path",{d:"M2 18v3c0 .6.4 1 1 1h4v-3h3v-3h2l1.4-1.4a6.5 6.5 0 1 0-4-4Z",key:"167ctg"}],["circle",{cx:"16.5",cy:"7.5",r:".5",key:"1kog09"}]]),Fu=Xe("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),Uu=()=>{const[e,n]=(0,t.useState)({identifier:"",password:""}),[s,r]=(0,t.useState)(!1),[a,i]=(0,t.useState)(!1),[o,l]=(0,t.useState)(""),{signIn:c,signInWithPhoneNumber:d}=Je(),u=Y(),h=e=>{const t=e.replace(/[^0-9]/g,"");return t.length>=8&&t.length<=15},m=t=>{n(De(De({},e),{},{[t.target.name]:t.target.value})),l("")};return(0,Ge.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-yellow-50 to-slate-100 flex items-center justify-center p-4",children:(0,Ge.jsxs)("div",{className:"w-full max-w-md",children:[(0,Ge.jsxs)("div",{className:"bg-white rounded-3xl shadow-2xl border border-gray-100 overflow-hidden",children:[(0,Ge.jsxs)("div",{className:"bg-gradient-to-r from-slate-700 to-slate-800 p-8 text-center",children:[(0,Ge.jsx)("div",{className:"w-24 h-24 bg-white rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg p-2",children:(0,Ge.jsx)("img",{src:"/logo-campus-finance.png",alt:"AB Campus Finance",className:"w-full h-full object-contain"})}),(0,Ge.jsx)("h1",{className:"text-3xl font-bold text-white font-montserrat mb-2",children:"Bienvenue"}),(0,Ge.jsx)("p",{className:"text-slate-300 font-montserrat",children:"Connectez-vous \xe0 votre compte"})]}),(0,Ge.jsx)("div",{className:"p-8",children:(0,Ge.jsxs)("form",{onSubmit:async t=>{t.preventDefault(),i(!0),l("");try{const t=e.identifier.trim(),n=h(t);let s;console.log("[LOGIN] Tentative de connexion avec:",{identifier:t,type:n?"t\xe9l\xe9phone":"email"}),s=n?await d(t,e.password):await c(t,e.password),console.log("[LOGIN] R\xe9sultat:",s),s.success?s.user&&"admin"===s.user.role?u("/admin"):u("/dashboard"):l(s.error||"Identifiants incorrects")}catch(n){console.error("[LOGIN] Erreur:",n),l("Erreur de connexion")}finally{i(!1)}},className:"space-y-6",children:[o&&(0,Ge.jsx)("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 rounded-lg",children:(0,Ge.jsx)("p",{className:"text-sm text-red-700 font-medium",children:o})}),(0,Ge.jsxs)("div",{children:[(0,Ge.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email ou T\xe9l\xe9phone"}),(0,Ge.jsxs)("div",{className:"relative",children:[h(e.identifier)?(0,Ge.jsx)(Iu,{size:18,className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400"}):(0,Ge.jsx)(Ru,{size:18,className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,Ge.jsx)("input",{type:"text",name:"identifier",value:e.identifier,onChange:m,placeholder:"Entrez votre email ou t\xe9l\xe9phone",required:!0,className:"w-full pl-12 pr-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-yellow-500 focus:border-transparent transition-all"})]})]}),(0,Ge.jsxs)("div",{children:[(0,Ge.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Mot de passe"}),(0,Ge.jsxs)("div",{className:"relative",children:[(0,Ge.jsx)(Ou,{size:18,className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,Ge.jsx)("input",{type:s?"text":"password",name:"password",value:e.password,onChange:m,placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",required:!0,className:"w-full pl-12 pr-12 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-yellow-500 focus:border-transparent transition-all"}),(0,Ge.jsx)("button",{type:"button",onClick:()=>r(!s),className:"absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors",children:s?(0,Ge.jsx)(Lu,{size:18}):(0,Ge.jsx)(zu,{size:18})})]})]}),(0,Ge.jsxs)("button",{type:"submit",disabled:a,className:"w-full flex items-center justify-center gap-2 py-3 bg-gradient-to-r from-yellow-500 to-yellow-600 hover:from-yellow-600 hover:to-yellow-700 text-slate-900 rounded-xl font-bold transition-all duration-200 shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,Ge.jsx)(Du,{size:20}),(0,Ge.jsx)("span",{children:a?"Connexion en cours...":"Se connecter"})]}),(0,Ge.jsxs)("div",{className:"space-y-3",children:[(0,Ge.jsx)("div",{className:"text-center",children:(0,Ge.jsxs)(Pe,{to:"/forgot-password",className:"inline-flex items-center gap-2 text-sm text-gray-600 hover:text-yellow-600 font-medium transition-colors",children:[(0,Ge.jsx)(Mu,{size:16}),"Mot de passe oubli\xe9 ?"]})}),(0,Ge.jsxs)("div",{className:"relative",children:[(0,Ge.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,Ge.jsx)("div",{className:"w-full border-t border-gray-200"})}),(0,Ge.jsx)("div",{className:"relative flex justify-center text-sm",children:(0,Ge.jsx)("span",{className:"px-4 bg-white text-gray-500",children:"ou"})})]}),(0,Ge.jsxs)(Pe,{to:"/create-account",className:"w-full flex items-center justify-center gap-2 py-3 bg-slate-50 hover:bg-slate-100 text-slate-700 rounded-xl font-medium transition-all duration-200 border border-slate-200",children:[(0,Ge.jsx)(Fu,{size:20}),(0,Ge.jsx)("span",{children:"Cr\xe9er un compte"})]})]})]})})]}),(0,Ge.jsx)("div",{className:"text-center mt-6",children:(0,Ge.jsx)("p",{className:"text-sm text-gray-600",children:"\xa9 2024 AB Campus Finance. Tous droits r\xe9serv\xe9s."})})]})})},Bu=["children","variant","size","disabled","loading","onClick","type","className"],Vu=e=>{let{children:t,variant:n="primary",size:s="md",disabled:r=!1,loading:a=!1,onClick:i,type:o="button",className:l=""}=e,c=$e(e,Bu);const d="".concat("font-medium rounded-xl transition-colors duration-200 flex items-center justify-center font-montserrat"," ").concat({primary:"bg-primary-500 text-white hover:bg-primary-600 disabled:bg-primary-300",secondary:"bg-secondary-900 text-white hover:bg-secondary-800 disabled:bg-secondary-300",outline:"border-2 border-primary-500 text-primary-600 hover:bg-primary-50 disabled:border-primary-300",danger:"bg-red-600 text-white hover:bg-red-700 disabled:bg-red-300",accent:"bg-accent-400 text-secondary-900 hover:bg-accent-500 disabled:bg-accent-300"}[n]," ").concat({sm:"px-3 py-2 text-sm",md:"px-6 py-3 text-base",lg:"px-8 py-4 text-lg"}[s]," ").concat(l);return(0,Ge.jsxs)("button",De(De({type:o,disabled:r||a,onClick:i,className:d},c),{},{children:[a&&(0,Ge.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",fill:"none",viewBox:"0 0 24 24",children:[(0,Ge.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,Ge.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),t]}))},qu=["label","type","placeholder","value","onChange","error","required","disabled","className","children"],Hu=e=>{let{label:t,type:n="text",placeholder:s,value:r,onChange:a,error:i,required:o=!1,disabled:l=!1,className:c="",children:d}=e,u=$e(e,qu);const h="\n    w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-colors duration-200 font-montserrat\n    ".concat(i?"border-red-500":"border-accent-300","\n    ").concat(l?"bg-accent-100 cursor-not-allowed":"bg-white","\n    ").concat(c,"\n  ");return(0,Ge.jsxs)("div",{className:"mb-4",children:[t&&(0,Ge.jsxs)("label",{className:"block text-sm font-medium text-secondary-900 mb-2 font-montserrat",children:[t,o&&(0,Ge.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]}),(()=>{switch(n){case"select":return(0,Ge.jsx)("select",De(De({value:r,onChange:a,disabled:l,className:h},u),{},{children:d}));case"textarea":return(0,Ge.jsx)("textarea",De({placeholder:s,value:r,onChange:a,disabled:l,className:"".concat(h," resize-vertical min-h-[100px]")},u));default:return(0,Ge.jsx)("input",De({type:n,placeholder:s,value:r,onChange:a,disabled:l,className:h},u))}})(),i&&(0,Ge.jsx)("p",{className:"mt-1 text-sm text-red-500 font-montserrat",children:i})]})},Wu=["as","className","color","speed","thickness","children"],Gu=e=>{let{as:t="button",className:n="",color:s="white",speed:r="6s",thickness:a=1,children:i}=e,o=$e(e,Wu);return(0,Ge.jsxs)(t,De(De({className:"star-border-container ".concat(n),style:De({padding:"".concat(a,"px 0")},o.style)},o),{},{children:[(0,Ge.jsx)("div",{className:"border-gradient-bottom",style:{background:"radial-gradient(circle, ".concat(s,", transparent 10%)"),animationDuration:r}}),(0,Ge.jsx)("div",{className:"border-gradient-top",style:{background:"radial-gradient(circle, ".concat(s,", transparent 10%)"),animationDuration:r}}),(0,Ge.jsx)("div",{className:"inner-content",children:i})]}))},Ku=Xe("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),Ju=Xe("GraduationCap",[["path",{d:"M22 10v6M2 10l10-5 10 5-10 5z",key:"1ef52a"}],["path",{d:"M6 12v5c3 3 9 3 12 0v-5",key:"1f75yj"}]]),Zu=Xe("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]),$u=Xe("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),Qu=Xe("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),Yu=e=>new Intl.NumberFormat("fr-BJ",{style:"currency",currency:"XOF",minimumFractionDigits:0}).format(e),Xu=e=>new Intl.DateTimeFormat("fr-BJ",{year:"numeric",month:"long",day:"numeric"}).format(new Date(e)),eh=e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e),th=e=>/^(\+229|229)?[0-9]{8}$/.test(e.replace(/\s/g,"")),nh=async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"user";const s=Date.now(),r="".concat(n,"_identity_").concat(t,"_").concat(s,".").concat(e.name.split(".").pop()),a="identity-cards/".concat(t,"/").concat(r);return await(async(e,t,n)=>{try{console.log("[UPLOAD] D\xe9but upload:",{fileName:e.name,bucket:t,path:n});const s=5242880;if(e.size>s)throw new Error("Le fichier est trop volumineux (max 5MB)");if(!["image/jpeg","image/png","image/jpg"].includes(e.type))throw new Error("Type de fichier non autoris\xe9 (JPG, PNG uniquement)");const{data:r,error:a}=await Me.supabase.storage.from(t).upload(n,e,{cacheControl:"3600",upsert:!1});if(a)throw console.error("[UPLOAD] Erreur upload:",a),a;const{data:i}=Me.supabase.storage.from(t).getPublicUrl(n);return console.log("[UPLOAD] \u2705 Upload r\xe9ussi:",i.publicUrl),{success:!0,url:i.publicUrl,path:n}}catch(s){return console.error("[UPLOAD] \u274c Erreur upload:",s.message),{success:!1,error:s.message}}})(e,"documents",a)},sh=()=>{const e=Y(),n=$(),{basicInfo:s,fromCreateAccount:r}=n.state||{};console.log("[REGISTER] Donn\xe9es re\xe7ues:",{basicInfo:s,fromCreateAccount:r}),console.log("[REGISTER] Location state:",n.state),console.log("[REGISTER] basicInfo.firstName:",null===s||void 0===s?void 0:s.firstName),console.log("[REGISTER] basicInfo.lastName:",null===s||void 0===s?void 0:s.lastName),console.log("[REGISTER] basicInfo.phoneNumber:",null===s||void 0===s?void 0:s.phoneNumber);const[a,i]=(0,t.useState)(5),[o,l]=(0,t.useState)({firstName:"",lastName:"",email:"",phone:"",password:"",confirmPassword:"",address:"",facebookName:"",filiere:"",anneeEtude:"",entite:"",userIdentityCard:null,temoinIdentityCard:null,studentCard:null,temoinName:"",temoinQuartier:"",temoinPhone:"",temoinEmail:"",emergencyName:"",emergencyRelation:"",emergencyPhone:"",emergencyEmail:"",emergencyAddress:""}),[c,d]=(0,t.useState)(!1),[u,h]=(0,t.useState)(!1),[m,p]=(0,t.useState)({}),{showSuccess:f,showError:x}=it();(0,t.useEffect)(()=>{s&&r&&(console.log("[REGISTER] Pr\xe9-remplissage du formulaire avec:",s),l(e=>De(De({},e),{},{firstName:s.firstName||"",lastName:s.lastName||"",email:s.email||"",phone:s.phoneNumber||"",password:s.password||"",confirmPassword:s.confirmPassword||"",address:s.address||"",facebookName:s.facebookName||""})))},[s,r]);const g=[{id:5,title:"Informations personnelles",icon:Dn},{id:6,title:"Informations du t\xe9moin",icon:Cu},{id:7,title:"Contact d'urgence",icon:Iu},{id:8,title:"Validation",icon:et}],v=e=>{l(De(De({},o),{},{[e.target.name]:e.target.value})),m[e.target.name]&&p(De(De({},m),{},{[e.target.name]:""}))},y=(e,t)=>{const n=e.target.files[0];n&&l(De(De({},o),{},{[t]:n}))},b=()=>{const e={};switch(a){case 5:o.firstName.trim()||(e.firstName="Le pr\xe9nom est requis"),o.lastName.trim()||(e.lastName="Le nom est requis"),o.address.trim()||(e.address="L'adresse est requise"),o.facebookName.trim()||(e.facebookName="Le nom du profil Facebook est requis"),o.filiere.trim()||(e.filiere="La fili\xe8re est requise"),o.anneeEtude.trim()||(e.anneeEtude="L'ann\xe9e d'\xe9tude est requise"),o.entite.trim()||(e.entite="L'entit\xe9 est requise"),o.email.trim()||(e.email="L'adresse email est requise"),o.email&&!eh(o.email)&&(e.email="Email invalide"),th(o.phone)||(e.phone="Num\xe9ro de t\xe9l\xe9phone invalide"),o.password.length<6&&(e.password="Le mot de passe doit contenir au moins 6 caract\xe8res"),o.password!==o.confirmPassword&&(e.confirmPassword="Les mots de passe ne correspondent pas"),o.userIdentityCard||(e.userIdentityCard="La photo de votre carte d'identit\xe9 est requise"),o.studentCard||(e.studentCard="La photo de votre carte d'\xe9tudiant est requise");break;case 6:o.temoinName.trim()||(e.temoinName="Le nom du t\xe9moin est requis"),o.temoinQuartier.trim()||(e.temoinQuartier="Le quartier du t\xe9moin est requis"),th(o.temoinPhone)||(e.temoinPhone="Num\xe9ro de t\xe9l\xe9phone invalide"),eh(o.temoinEmail)||(e.temoinEmail="Email invalide"),o.temoinIdentityCard||(e.temoinIdentityCard="La photo de la carte d'identit\xe9 du t\xe9moin est requise");break;case 7:o.emergencyName.trim()||(e.emergencyName="Le nom du contact d'urgence est requis"),o.emergencyRelation.trim()||(e.emergencyRelation="La relation est requise"),th(o.emergencyPhone)||(e.emergencyPhone="Num\xe9ro de t\xe9l\xe9phone invalide"),eh(o.emergencyEmail)||(e.emergencyEmail="Email invalide"),o.emergencyAddress.trim()||(e.emergencyAddress="L'adresse est requise")}return p(e),0===Object.keys(e).length},j=()=>{a>5&&i(a-1)};return(0,Ge.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8 relative overflow-hidden",children:[(0,Ge.jsxs)("div",{className:"absolute inset-0 overflow-hidden",children:[(0,Ge.jsx)("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-gradient-to-br from-primary-400/20 to-secondary-400/20 rounded-full blur-3xl"}),(0,Ge.jsx)("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-gradient-to-tr from-accent-400/20 to-primary-400/20 rounded-full blur-3xl"})]}),(0,Ge.jsxs)("div",{className:"max-w-4xl w-full space-y-8 relative z-10",children:[(0,Ge.jsxs)("div",{className:"text-center mb-8 animate-fade-in-up",children:[(0,Ge.jsx)("div",{className:"flex justify-center mb-6",children:(0,Ge.jsx)("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-soft",children:(0,Ge.jsx)(Hd,{size:"xl",showText:!0})})}),(0,Ge.jsx)("h1",{className:"text-4xl font-bold text-secondary-900 font-montserrat mb-3 bg-gradient-to-r from-primary-600 to-secondary-600 bg-clip-text text-transparent",children:"Cr\xe9er votre compte \xe9tudiant"}),(0,Ge.jsx)("p",{className:"text-lg text-neutral-600 font-montserrat max-w-2xl mx-auto",children:"Rejoignez la communaut\xe9 AB CAMPUS FINANCE et acc\xe9dez \xe0 nos services de pr\xeat \xe9tudiant"})]}),(0,Ge.jsx)("div",{className:"flex justify-center mb-8",children:(0,Ge.jsx)("div",{className:"flex items-center space-x-4 bg-white/80 backdrop-blur-sm rounded-2xl p-4 shadow-soft",children:g.map((e,t)=>(0,Ge.jsxs)("div",{className:"flex items-center",children:[(0,Ge.jsx)("div",{className:"flex items-center justify-center w-10 h-10 rounded-full border-2 transition-all duration-300 ".concat(a>=e.id?"bg-primary-500 border-primary-500 text-white":"bg-white border-accent-300 text-neutral-400"),children:a>e.id?(0,Ge.jsx)(et,{size:20,className:"text-white"}):(0,Ge.jsx)(e.icon,{size:20})}),t<g.length-1&&(0,Ge.jsx)("div",{className:"w-8 h-0.5 mx-2 transition-all duration-300 ".concat(a>e.id?"bg-primary-500":"bg-accent-300")})]},e.id))})}),(0,Ge.jsxs)("div",{className:"bg-white/90 backdrop-blur-sm rounded-3xl shadow-2xl border border-white/20 p-8 lg:p-12",children:[(0,Ge.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),b()){h(!0);try{var n,s,r,a;console.log("[REGISTER] Donn\xe9es pour inscription:",{phone:o.phone,firstName:o.firstName,lastName:o.lastName,email:o.email,address:o.address,facebookName:o.facebookName,filiere:o.filiere,anneeEtude:o.anneeEtude,entite:o.entite});const t=await(async(e,t,n)=>{if(!Me.supabase)return console.error("[SUPABASE] Client non initialis\xe9 - configuration manquante"),{success:!1,error:"Configuration Supabase manquante"};try{const s=e.replace(/[^0-9]/g,"");if(s.length<8)throw new Error("Num\xe9ro de t\xe9l\xe9phone invalide");let r;if(console.log("[SUPABASE] userData re\xe7u:",n),console.log("[SUPABASE] Email fourni:",n.email),n.email&&n.email.trim())r=n.email.trim(),console.log("[SUPABASE] \u2705 Utilisation email fourni: ".concat(r));else{const e=Date.now();r="user.".concat(s,".").concat(e,"@gmail.com"),console.log("[SUPABASE] \u26a0\ufe0f Cr\xe9ation email temporaire: ".concat(r))}console.log("[SUPABASE] Cr\xe9ation utilisateur avec email: ".concat(r));const{data:a,error:i}=await Me.supabase.auth.signUp({email:r,password:t,options:{data:{first_name:n.firstName,last_name:n.lastName,phone_number:e,role:"client"}}});if(i)throw console.error("[SUPABASE] Erreur Auth:",i),new Error(Ue(i));const{error:o}=await Me.supabase.from("users").insert([{id:a.user.id,phone_number:e,email:r,first_name:n.firstName,last_name:n.lastName,role:"client",status:"approved"}]);if(o)throw console.error("[SUPABASE] Erreur insertion utilisateur:",o),new Error(Ue(o));return console.log("[SUPABASE] \u2705 Utilisateur cr\xe9\xe9: ".concat(n.firstName," ").concat(n.lastName," (").concat(e,")")),{success:!0,user:a.user}}catch(s){return console.error("[SUPABASE] Erreur lors de l'inscription:",s.message),{success:!1,error:Ue(s)}}})(o.phone,o.password,{firstName:o.firstName,lastName:o.lastName,email:o.email});if(console.log("[REGISTER] R\xe9sultat signUp:",t),!t.success||null===(n=t.user)||void 0===n||!n.id)throw console.error("[REGISTER] Erreur signUp:",t.error),new Error(t.error||"Cr\xe9ation du compte \xe9chou\xe9e");let i=null,l=null,c=null;if(o.userIdentityCard){console.log("[REGISTER] Upload carte d'identit\xe9 utilisateur...");const e=await nh(o.userIdentityCard,t.user.id,"user");e.success?(i=e.url,console.log("[REGISTER] \u2705 Carte d'identit\xe9 utilisateur upload\xe9e")):console.error("[REGISTER] \u274c Erreur upload carte d'identit\xe9 utilisateur:",e.error)}if(o.temoinIdentityCard){console.log("[REGISTER] Upload carte d'identit\xe9 t\xe9moin...");const e=await nh(o.temoinIdentityCard,t.user.id,"temoin");e.success?(l=e.url,console.log("[REGISTER] \u2705 Carte d'identit\xe9 t\xe9moin upload\xe9e")):console.error("[REGISTER] \u274c Erreur upload carte d'identit\xe9 t\xe9moin:",e.error)}if(o.studentCard){console.log("[REGISTER] Upload carte d'\xe9tudiant...");const e=await nh(o.studentCard,t.user.id,"student");e.success?(c=e.url,console.log("[REGISTER] \u2705 Carte d'\xe9tudiant upload\xe9e")):console.error("[REGISTER] \u274c Erreur upload carte d'\xe9tudiant:",e.error)}console.log("[REGISTER] Mise \xe0 jour du profil avec les donn\xe9es:",{address:o.address,filiere:o.filiere,annee_etude:o.anneeEtude,entite:o.entite,facebook_name:o.facebookName});const d=await(async(e,t)=>{try{console.log("[PROFILE] Mise \xe0 jour du profil utilisateur:",e,t);const n={updated_at:(new Date).toISOString()};t.firstName&&(n.first_name=t.firstName),t.lastName&&(n.last_name=t.lastName),t.phone&&(n.phone_number=t.phone),t.email&&(n.email=t.email),t.filiere&&(n.filiere=t.filiere),t.annee_etude&&(n.annee_etude=t.annee_etude),t.entite&&(n.entite=t.entite),t.facebook_name&&(n.facebook_name=t.facebook_name),t.temoin_name&&(n.temoin_name=t.temoin_name),t.temoin_quartier&&(n.temoin_quartier=t.temoin_quartier),t.temoin_phone&&(n.temoin_phone=t.temoin_phone),t.temoin_email&&(n.temoin_email=t.temoin_email),t.emergency_name&&(n.emergency_name=t.emergency_name),t.emergency_relation&&(n.emergency_relation=t.emergency_relation),t.emergency_phone&&(n.emergency_phone=t.emergency_phone),t.emergency_email&&(n.emergency_email=t.emergency_email),t.emergency_address&&(n.emergency_address=t.emergency_address),t.user_identity_card_name&&(n.user_identity_card_name=t.user_identity_card_name),t.temoin_identity_card_name&&(n.temoin_identity_card_name=t.temoin_identity_card_name),t.student_card_name&&(n.student_card_name=t.student_card_name),t.user_identity_card_url&&(n.user_identity_card_url=t.user_identity_card_url),t.temoin_identity_card_url&&(n.temoin_identity_card_url=t.temoin_identity_card_url),t.student_card_url&&(n.student_card_url=t.student_card_url);const{error:s}=await Me.supabase.from("users").update(n).eq("id",e);if(s)throw console.error("[PROFILE] Erreur mise \xe0 jour table users:",s),s;if(t.firstName||t.lastName||t.phone){const e={};t.firstName&&(e.first_name=t.firstName),t.lastName&&(e.last_name=t.lastName),t.phone&&(e.phone_number=t.phone);const{error:n}=await Me.supabase.auth.updateUser({data:e});if(n)throw console.error("[PROFILE] Erreur mise \xe0 jour m\xe9tadonn\xe9es auth:",n),n}return console.log("[PROFILE] \u2705 Profil mis \xe0 jour avec succ\xe8s"),{success:!0}}catch(n){return console.error("[PROFILE] \u274c Erreur lors de la mise \xe0 jour du profil:",n.message),{success:!1,error:n.message}}})(t.user.id,{address:o.address,filiere:o.filiere,annee_etude:o.anneeEtude,entite:o.entite,facebook_name:o.facebookName,temoin_name:o.temoinName,temoin_quartier:o.temoinQuartier,temoin_phone:o.temoinPhone,temoin_email:o.temoinEmail,emergency_name:o.emergencyName,emergency_relation:o.emergencyRelation,emergency_phone:o.emergencyPhone,emergency_email:o.emergencyEmail,emergency_address:o.emergencyAddress,user_identity_card_url:i,temoin_identity_card_url:l,student_card_url:c,user_identity_card_name:(null===(s=o.userIdentityCard)||void 0===s?void 0:s.name)||null,temoin_identity_card_name:(null===(r=o.temoinIdentityCard)||void 0===r?void 0:r.name)||null,student_card_name:(null===(a=o.studentCard)||void 0===a?void 0:a.name)||null});if(console.log("[REGISTER] R\xe9sultat mise \xe0 jour profil:",d),!d.success)throw console.error("[REGISTER] Erreur mise \xe0 jour profil:",d.error),new Error("Erreur mise \xe0 jour profil: ".concat(d.error));f("Inscription compl\xe9t\xe9e ! Votre compte a \xe9t\xe9 cr\xe9\xe9 avec succ\xe8s."),e("/dashboard")}catch(i){console.error("[REGISTER] Erreur d\xe9taill\xe9e lors de l'inscription:",{message:i.message,stack:i.stack,error:i}),p({general:"Erreur lors de l'inscription: ".concat(i.message)}),x("Inscription \xe9chou\xe9e","Une erreur est survenue: ".concat(i.message))}finally{h(!1)}}},className:"space-y-8",children:[m.general&&(0,Ge.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-6 py-4 rounded-2xl font-montserrat animate-fade-in-up",children:m.general}),(()=>{switch(a){case 5:return(0,Ge.jsxs)("div",{className:"space-y-6 animate-fade-in-up",children:[r&&(0,Ge.jsx)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-6",children:(0,Ge.jsxs)("div",{className:"flex items-center",children:[(0,Ge.jsx)(et,{size:20,className:"text-green-600 mr-3"}),(0,Ge.jsxs)("div",{children:[(0,Ge.jsx)("h4",{className:"text-sm font-medium text-green-800",children:"Informations pr\xe9-remplies"}),(0,Ge.jsx)("p",{className:"text-sm text-green-700 mt-1",children:"Vos informations de base ont \xe9t\xe9 automatiquement remplies depuis la cr\xe9ation de votre compte."})]})]})}),(0,Ge.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[(0,Ge.jsx)("div",{className:"w-10 h-10 bg-primary-100 rounded-xl flex items-center justify-center",children:(0,Ge.jsx)(Dn,{size:20,className:"text-primary-600"})}),(0,Ge.jsx)("h3",{className:"text-xl font-semibold text-secondary-900 font-montserrat",children:"Informations personnelles"})]}),(0,Ge.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,Ge.jsx)("div",{className:"relative group",children:(0,Ge.jsx)(Hu,{label:"Pr\xe9nom",type:"text",name:"firstName",value:o.firstName,onChange:v,placeholder:"Votre pr\xe9nom",error:m.firstName,required:!0,readOnly:r,className:"group-hover:shadow-md transition-all duration-300 ".concat(r?"bg-gray-50 cursor-not-allowed":"")})}),(0,Ge.jsx)("div",{className:"relative group",children:(0,Ge.jsx)(Hu,{label:"Nom",type:"text",name:"lastName",value:o.lastName,onChange:v,placeholder:"Votre nom",error:m.lastName,required:!0,readOnly:r,className:"group-hover:shadow-md transition-all duration-300 ".concat(r?"bg-gray-50 cursor-not-allowed":"")})})]}),(0,Ge.jsx)("div",{className:"relative group",children:(0,Ge.jsx)(Hu,{label:"Nom du profil Facebook",type:"text",name:"facebookName",value:o.facebookName,onChange:v,placeholder:"Votre nom de profil Facebook",error:m.facebookName,required:!0,readOnly:r,className:"group-hover:shadow-md transition-all duration-300 ".concat(r?"bg-gray-50 cursor-not-allowed":"")})}),(0,Ge.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:(0,Ge.jsxs)("div",{className:"relative group",children:[(0,Ge.jsx)(Hu,{label:"Adresse",type:"text",name:"address",value:o.address,onChange:v,placeholder:"Votre adresse compl\xe8te",error:m.address,required:!0,readOnly:r,className:"group-hover:shadow-md transition-all duration-300 ".concat(r?"bg-gray-50 cursor-not-allowed":"")}),(0,Ge.jsx)(Ku,{size:20,className:"absolute right-4 top-12 text-neutral-400 group-hover:text-primary-500 transition-colors duration-300"})]})}),(0,Ge.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,Ge.jsxs)("div",{className:"relative group",children:[(0,Ge.jsx)(Hu,{label:"Fili\xe8re",type:"text",name:"filiere",value:o.filiere,onChange:v,placeholder:"Ex: Informatique",error:m.filiere,required:!0,className:"group-hover:shadow-md transition-all duration-300"}),(0,Ge.jsx)(Ju,{size:20,className:"absolute right-4 top-12 text-neutral-400 group-hover:text-primary-500 transition-colors duration-300"})]}),(0,Ge.jsx)("div",{className:"relative group",children:(0,Ge.jsx)(Hu,{label:"Ann\xe9e d'\xe9tude",type:"text",name:"anneeEtude",value:o.anneeEtude,onChange:v,placeholder:"Ex: 2\xe8me ann\xe9e",error:m.anneeEtude,required:!0,className:"group-hover:shadow-md transition-all duration-300"})}),(0,Ge.jsxs)("div",{className:"relative group",children:[(0,Ge.jsxs)("select",{name:"entite",value:o.entite,onChange:v,className:"w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-transparent font-montserrat transition-all duration-300 group-hover:shadow-md ".concat(m.entite?"border-red-300":"border-accent-200"),required:!0,children:[(0,Ge.jsx)("option",{value:"",children:"S\xe9lectionner une entit\xe9"}),(0,Ge.jsx)("option",{value:"INSTI",children:"INSTI"}),(0,Ge.jsx)("option",{value:"ENSET",children:"ENSET"})]}),(0,Ge.jsx)(Zu,{size:20,className:"absolute right-4 top-12 text-neutral-400 group-hover:text-primary-500 transition-colors duration-300"}),m.entite&&(0,Ge.jsx)("p",{className:"text-red-500 text-sm mt-1 font-montserrat",children:m.entite})]})]}),(0,Ge.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,Ge.jsxs)("div",{className:"relative group",children:[(0,Ge.jsx)(Hu,{label:"Adresse email (optionnel)",type:"email",name:"email",value:o.email,onChange:v,placeholder:"votre@email.com (optionnel)",error:m.email,className:"group-hover:shadow-md transition-all duration-300"}),(0,Ge.jsx)(Ru,{size:20,className:"absolute right-4 top-12 text-neutral-400 group-hover:text-primary-500 transition-colors duration-300"})]}),(0,Ge.jsxs)("div",{className:"relative group",children:[(0,Ge.jsx)(Hu,{label:"Num\xe9ro de t\xe9l\xe9phone",type:"tel",name:"phone",value:o.phone,onChange:v,placeholder:"+229 12345678",error:m.phone,required:!0,className:"group-hover:shadow-md transition-all duration-300"}),(0,Ge.jsx)(Iu,{size:20,className:"absolute right-4 top-12 text-neutral-400 group-hover:text-primary-500 transition-colors duration-300"})]})]}),(0,Ge.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,Ge.jsxs)("div",{className:"relative group",children:[(0,Ge.jsx)(Hu,{label:"Mot de passe",type:c?"text":"password",name:"password",value:o.password,onChange:v,placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",error:m.password,required:!0,className:"group-hover:shadow-md transition-all duration-300"}),(0,Ge.jsx)("button",{type:"button",onClick:()=>d(!c),className:"absolute right-4 top-12 text-neutral-400 hover:text-primary-500 transition-colors duration-300",children:c?(0,Ge.jsx)(Lu,{size:20}):(0,Ge.jsx)(zu,{size:20})})]}),(0,Ge.jsxs)("div",{className:"relative group",children:[(0,Ge.jsx)(Hu,{label:"Confirmer le mot de passe",type:"password",name:"confirmPassword",value:o.confirmPassword,onChange:v,placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",error:m.confirmPassword,required:!0,className:"group-hover:shadow-md transition-all duration-300"}),(0,Ge.jsx)(Ou,{size:20,className:"absolute right-4 top-12 text-neutral-400 group-hover:text-primary-500 transition-colors duration-300"})]})]}),(0,Ge.jsxs)("div",{className:"group",children:[(0,Ge.jsx)("label",{className:"block text-sm font-medium text-secondary-900 font-montserrat mb-3",children:"Photo de votre carte d'identit\xe9 *"}),(0,Ge.jsxs)("div",{className:"relative",children:[(0,Ge.jsx)("input",{type:"file",accept:"image/*",onChange:e=>y(e,"userIdentityCard"),className:"hidden",id:"userIdentityCard",required:!0}),(0,Ge.jsx)("label",{htmlFor:"userIdentityCard",className:"flex items-center justify-center w-full px-6 py-8 border-2 border-dashed border-accent-300 rounded-2xl cursor-pointer hover:border-primary-500 hover:bg-primary-50/50 transition-all duration-300 group-hover:shadow-md",children:(0,Ge.jsxs)("div",{className:"text-center",children:[(0,Ge.jsx)($u,{size:32,className:"text-neutral-400 group-hover:text-primary-500 transition-colors duration-300 mx-auto mb-2"}),(0,Ge.jsx)("span",{className:"text-neutral-600 font-montserrat block",children:o.userIdentityCard?o.userIdentityCard.name:"Choisir une photo"}),(0,Ge.jsx)("span",{className:"text-sm text-neutral-400 font-montserrat",children:o.userIdentityCard?"Fichier s\xe9lectionn\xe9":"Cliquez pour s\xe9lectionner"})]})})]}),m.userIdentityCard&&(0,Ge.jsx)("p",{className:"text-red-500 text-sm mt-2 font-montserrat",children:m.userIdentityCard})]}),(0,Ge.jsxs)("div",{className:"group",children:[(0,Ge.jsx)("label",{className:"block text-sm font-medium text-secondary-900 font-montserrat mb-3",children:"Photo de votre carte d'\xe9tudiant *"}),(0,Ge.jsxs)("div",{className:"relative",children:[(0,Ge.jsx)("input",{type:"file",accept:"image/*",onChange:e=>y(e,"studentCard"),className:"hidden",id:"studentCard",required:!0}),(0,Ge.jsx)("label",{htmlFor:"studentCard",className:"flex items-center justify-center w-full px-6 py-8 border-2 border-dashed border-accent-300 rounded-2xl cursor-pointer hover:border-primary-500 hover:bg-primary-50/50 transition-all duration-300 group-hover:shadow-md",children:(0,Ge.jsxs)("div",{className:"text-center",children:[(0,Ge.jsx)($u,{size:32,className:"text-neutral-400 group-hover:text-primary-500 transition-colors duration-300 mx-auto mb-2"}),(0,Ge.jsx)("span",{className:"text-neutral-600 font-montserrat block",children:o.studentCard?o.studentCard.name:"Choisir une photo"}),(0,Ge.jsx)("span",{className:"text-sm text-neutral-400 font-montserrat",children:o.studentCard?"Fichier s\xe9lectionn\xe9":"Cliquez pour s\xe9lectionner"})]})})]}),m.studentCard&&(0,Ge.jsx)("p",{className:"text-red-500 text-sm mt-2 font-montserrat",children:m.studentCard})]})]});case 6:return(0,Ge.jsxs)("div",{className:"space-y-6 animate-fade-in-up",children:[(0,Ge.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[(0,Ge.jsx)("div",{className:"w-10 h-10 bg-secondary-100 rounded-xl flex items-center justify-center",children:(0,Ge.jsx)(Cu,{size:20,className:"text-secondary-600"})}),(0,Ge.jsx)("h3",{className:"text-xl font-semibold text-secondary-900 font-montserrat",children:"Informations du t\xe9moin"})]}),(0,Ge.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,Ge.jsx)("div",{className:"relative group",children:(0,Ge.jsx)(Hu,{label:"Nom complet du t\xe9moin",type:"text",name:"temoinName",value:o.temoinName,onChange:v,placeholder:"Nom et pr\xe9nom du t\xe9moin",error:m.temoinName,required:!0,className:"group-hover:shadow-md transition-all duration-300"})}),(0,Ge.jsx)("div",{className:"relative group",children:(0,Ge.jsx)(Hu,{label:"Quartier du t\xe9moin",type:"text",name:"temoinQuartier",value:o.temoinQuartier,onChange:v,placeholder:"Ex: Akpakpa, Cotonou",error:m.temoinQuartier,required:!0,className:"group-hover:shadow-md transition-all duration-300"})})]}),(0,Ge.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,Ge.jsxs)("div",{className:"relative group",children:[(0,Ge.jsx)(Hu,{label:"T\xe9l\xe9phone du t\xe9moin",type:"tel",name:"temoinPhone",value:o.temoinPhone,onChange:v,placeholder:"+229 12345678",error:m.temoinPhone,required:!0,className:"group-hover:shadow-md transition-all duration-300"}),(0,Ge.jsx)(Iu,{size:20,className:"absolute right-4 top-12 text-neutral-400 group-hover:text-primary-500 transition-colors duration-300"})]}),(0,Ge.jsxs)("div",{className:"relative group",children:[(0,Ge.jsx)(Hu,{label:"Email du t\xe9moin",type:"email",name:"temoinEmail",value:o.temoinEmail,onChange:v,placeholder:"temoins@email.com",error:m.temoinEmail,required:!0,className:"group-hover:shadow-md transition-all duration-300"}),(0,Ge.jsx)(Ru,{size:20,className:"absolute right-4 top-12 text-neutral-400 group-hover:text-primary-500 transition-colors duration-300"})]})]}),(0,Ge.jsxs)("div",{className:"group",children:[(0,Ge.jsx)("label",{className:"block text-sm font-medium text-secondary-900 font-montserrat mb-3",children:"Photo de la carte d'identit\xe9 du t\xe9moin *"}),(0,Ge.jsxs)("div",{className:"relative",children:[(0,Ge.jsx)("input",{type:"file",accept:"image/*",onChange:e=>y(e,"temoinIdentityCard"),className:"hidden",id:"temoinIdentityCard",required:!0}),(0,Ge.jsx)("label",{htmlFor:"temoinIdentityCard",className:"flex items-center justify-center w-full px-6 py-8 border-2 border-dashed border-accent-300 rounded-2xl cursor-pointer hover:border-primary-500 hover:bg-primary-50/50 transition-all duration-300 group-hover:shadow-md",children:(0,Ge.jsxs)("div",{className:"text-center",children:[(0,Ge.jsx)($u,{size:32,className:"text-neutral-400 group-hover:text-primary-500 transition-colors duration-300 mx-auto mb-2"}),(0,Ge.jsx)("span",{className:"text-neutral-600 font-montserrat block",children:o.temoinIdentityCard?o.temoinIdentityCard.name:"Choisir une photo"}),(0,Ge.jsx)("span",{className:"text-sm text-neutral-400 font-montserrat",children:o.temoinIdentityCard?"Fichier s\xe9lectionn\xe9":"Cliquez pour s\xe9lectionner"})]})})]}),m.temoinIdentityCard&&(0,Ge.jsx)("p",{className:"text-red-500 text-sm mt-2 font-montserrat",children:m.temoinIdentityCard})]})]});case 7:return(0,Ge.jsxs)("div",{className:"space-y-6 animate-fade-in-up",children:[(0,Ge.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[(0,Ge.jsx)("div",{className:"w-10 h-10 bg-accent-100 rounded-xl flex items-center justify-center",children:(0,Ge.jsx)(Iu,{size:20,className:"text-accent-600"})}),(0,Ge.jsx)("h3",{className:"text-xl font-semibold text-secondary-900 font-montserrat",children:"Contact d'urgence"})]}),(0,Ge.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,Ge.jsx)("div",{className:"relative group",children:(0,Ge.jsx)(Hu,{label:"Nom complet du contact",type:"text",name:"emergencyName",value:o.emergencyName,onChange:v,placeholder:"Nom et pr\xe9nom",error:m.emergencyName,required:!0,className:"group-hover:shadow-md transition-all duration-300"})}),(0,Ge.jsx)("div",{className:"relative group",children:(0,Ge.jsx)(Hu,{label:"Relation avec vous",type:"text",name:"emergencyRelation",value:o.emergencyRelation,onChange:v,placeholder:"Ex: Parent, Fr\xe8re, S\u0153ur",error:m.emergencyRelation,required:!0,className:"group-hover:shadow-md transition-all duration-300"})})]}),(0,Ge.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,Ge.jsxs)("div",{className:"relative group",children:[(0,Ge.jsx)(Hu,{label:"T\xe9l\xe9phone d'urgence",type:"tel",name:"emergencyPhone",value:o.emergencyPhone,onChange:v,placeholder:"+229 12345678",error:m.emergencyPhone,required:!0,className:"group-hover:shadow-md transition-all duration-300"}),(0,Ge.jsx)(Iu,{size:20,className:"absolute right-4 top-12 text-neutral-400 group-hover:text-primary-500 transition-colors duration-300"})]}),(0,Ge.jsxs)("div",{className:"relative group",children:[(0,Ge.jsx)(Hu,{label:"Email d'urgence",type:"email",name:"emergencyEmail",value:o.emergencyEmail,onChange:v,placeholder:"contact@email.com",error:m.emergencyEmail,required:!0,className:"group-hover:shadow-md transition-all duration-300"}),(0,Ge.jsx)(Ru,{size:20,className:"absolute right-4 top-12 text-neutral-400 group-hover:text-primary-500 transition-colors duration-300"})]})]}),(0,Ge.jsx)("div",{className:"relative group",children:(0,Ge.jsx)(Hu,{label:"Adresse compl\xe8te",type:"textarea",name:"emergencyAddress",value:o.emergencyAddress,onChange:v,placeholder:"Adresse compl\xe8te du contact d'urgence",error:m.emergencyAddress,required:!0,className:"group-hover:shadow-md transition-all duration-300"})})]});case 8:return(0,Ge.jsxs)("div",{className:"space-y-6 animate-fade-in-up",children:[(0,Ge.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[(0,Ge.jsx)("div",{className:"w-10 h-10 bg-green-100 rounded-xl flex items-center justify-center",children:(0,Ge.jsx)(et,{size:20,className:"text-green-600"})}),(0,Ge.jsx)("h3",{className:"text-xl font-semibold text-secondary-900 font-montserrat",children:"Validation et cr\xe9ation du compte"})]}),(0,Ge.jsxs)("div",{className:"bg-accent-50 rounded-2xl p-6 space-y-4",children:[(0,Ge.jsx)("h4",{className:"font-semibold text-secondary-900 font-montserrat",children:"R\xe9capitulatif de vos informations :"}),(0,Ge.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[(0,Ge.jsxs)("div",{children:[(0,Ge.jsx)("p",{className:"font-medium text-secondary-900",children:"Informations personnelles :"}),(0,Ge.jsxs)("p",{className:"text-neutral-600",children:[o.firstName," ",o.lastName]}),(0,Ge.jsxs)("p",{className:"text-neutral-600",children:["Facebook: ",o.facebookName]}),(0,Ge.jsxs)("p",{className:"text-neutral-600",children:[o.filiere," - ",o.anneeEtude]}),(0,Ge.jsx)("p",{className:"text-neutral-600",children:o.entite})]}),(0,Ge.jsxs)("div",{children:[(0,Ge.jsx)("p",{className:"font-medium text-secondary-900",children:"Contact :"}),(0,Ge.jsx)("p",{className:"text-neutral-600",children:o.email}),(0,Ge.jsx)("p",{className:"text-neutral-600",children:o.phone})]}),(0,Ge.jsxs)("div",{children:[(0,Ge.jsx)("p",{className:"font-medium text-secondary-900",children:"T\xe9moin :"}),(0,Ge.jsx)("p",{className:"text-neutral-600",children:o.temoinName}),(0,Ge.jsx)("p",{className:"text-neutral-600",children:o.temoinQuartier})]}),(0,Ge.jsxs)("div",{children:[(0,Ge.jsx)("p",{className:"font-medium text-secondary-900",children:"Contact d'urgence :"}),(0,Ge.jsx)("p",{className:"text-neutral-600",children:o.emergencyName}),(0,Ge.jsx)("p",{className:"text-neutral-600",children:o.emergencyRelation})]})]})]}),(0,Ge.jsx)("div",{className:"bg-blue-50 rounded-2xl p-6",children:(0,Ge.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,Ge.jsx)("div",{className:"w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:(0,Ge.jsx)("span",{className:"text-white text-xs font-bold",children:"i"})}),(0,Ge.jsxs)("div",{children:[(0,Ge.jsx)("p",{className:"font-medium text-blue-900 font-montserrat",children:"Important :"}),(0,Ge.jsx)("p",{className:"text-blue-700 text-sm font-montserrat",children:"Apr\xe8s la cr\xe9ation de votre compte, vous recevrez un code OTP par email pour finaliser l'inscription."})]})]})})]});default:return null}})(),(0,Ge.jsx)("div",{className:"flex justify-between pt-6",children:a<8?(0,Ge.jsxs)(Ge.Fragment,{children:[a>5&&(0,Ge.jsxs)(Vu,{type:"button",onClick:j,className:"flex items-center space-x-2 bg-neutral-100 hover:bg-neutral-200 text-neutral-700 font-montserrat px-6 py-3 rounded-xl transition-all duration-300",children:[(0,Ge.jsx)(Qu,{size:20}),(0,Ge.jsx)("span",{children:"Pr\xe9c\xe9dent"})]}),(0,Ge.jsx)("div",{className:"flex-1"}),(0,Ge.jsxs)(Vu,{type:"button",onClick:()=>{b()&&i(a+1)},className:"flex items-center space-x-2 bg-gradient-to-r from-primary-500 to-primary-600 hover:from-primary-600 hover:to-primary-700 text-white font-montserrat px-6 py-3 rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-[1.02]",children:[(0,Ge.jsx)("span",{children:"Suivant"}),(0,Ge.jsx)(Fn,{size:20})]})]}):(0,Ge.jsxs)("div",{className:"flex items-center space-x-4 w-full",children:[(0,Ge.jsxs)(Vu,{type:"button",onClick:j,className:"flex items-center space-x-2 bg-neutral-100 hover:bg-neutral-200 text-neutral-700 font-montserrat px-6 py-3 rounded-xl transition-all duration-300 text-sm",children:[(0,Ge.jsx)(Qu,{size:18}),(0,Ge.jsx)("span",{children:"Pr\xe9c\xe9dent"})]}),(0,Ge.jsx)("div",{className:"flex-1"}),(0,Ge.jsx)(Gu,{color:"#FF6B35",speed:"2s",thickness:3,className:"w-auto",children:(0,Ge.jsx)(Vu,{type:"submit",loading:u,className:"bg-gradient-to-r from-primary-500 to-primary-600 hover:from-primary-600 hover:to-primary-700 text-white font-montserrat px-6 py-3 rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-[1.02] text-sm",children:u?"Cr\xe9ation...":"Cr\xe9er mon compte"})})]})})]}),(0,Ge.jsx)("div",{className:"mt-8 text-center pt-6 border-t border-accent-200",children:(0,Ge.jsxs)("p",{className:"text-neutral-600 font-montserrat",children:["D\xe9j\xe0 un compte ?"," ",(0,Ge.jsx)(Pe,{to:"/login",className:"text-primary-600 hover:text-primary-700 font-semibold transition-colors duration-300",children:"Se connecter"})]})})]})]})]})},rh=e=>{let t=e;if(!e.startsWith("+229")){const n=e.replace(/[\s\-\(\)]/g,"");if(n.startsWith("0"))t="+229"+n.substring(1);else if(n.startsWith("229"))t="+"+n;else{if(8!==n.length)return{valid:!1,error:"Format de num\xe9ro invalide"};t="+229"+n}}return/^\+229[0-9]{8}$/.test(t)?{valid:!0,formattedNumber:t}:{valid:!1,error:"Num\xe9ro de t\xe9l\xe9phone b\xe9ninois invalide"}},ah=()=>{const e=Y(),{showSuccess:n,showError:s}=it(),[r,a]=(0,t.useState)(1),[i,o]=(0,t.useState)(!1),[l,c]=(0,t.useState)(!1),[d,u]=(0,t.useState)({}),[h,m]=(0,t.useState)({firstName:"",lastName:"",email:"",facebookName:"",phoneNumber:"",address:"",password:"",confirmPassword:""}),[p,f]=(0,t.useState)(!1),x=[{id:1,title:"Informations de base",icon:Dn},{id:2,title:"Confirmation",icon:et},{id:3,title:"Inscription compl\xe8te",icon:Iu}],g=e=>{const{name:t,value:n}=e.target;m(e=>De(De({},e),{},{[t]:n})),d[t]&&u(e=>De(De({},e),{},{[t]:""}))};return(0,Ge.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-primary-50 via-accent-50 to-secondary-50 flex items-center justify-center p-4",children:(0,Ge.jsxs)("div",{className:"w-full max-w-md",children:[(0,Ge.jsx)("div",{className:"text-center mb-8",children:(0,Ge.jsx)(Hd,{})}),(0,Ge.jsxs)("div",{className:"mb-8",children:[(0,Ge.jsx)("div",{className:"flex items-center justify-between mb-4",children:x.map((e,t)=>(0,Ge.jsxs)("div",{className:"flex items-center",children:[(0,Ge.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ".concat(r>=e.id?"bg-primary-500 text-white":"bg-gray-200 text-gray-600"),children:r>e.id?(0,Ge.jsx)(et,{size:16}):e.id}),t<x.length-1&&(0,Ge.jsx)("div",{className:"flex-1 h-1 mx-2 ".concat(r>e.id?"bg-primary-500":"bg-gray-200")})]},e.id))}),(0,Ge.jsxs)("p",{className:"text-sm text-gray-600",children:["\xc9tape ",r," sur ",x.length," : ",x[r-1].title]})]}),(0,Ge.jsx)("div",{className:"bg-white rounded-2xl shadow-soft p-6 mb-6",children:(0,Ge.jsx)(Nu,{mode:"wait",children:(()=>{switch(r){case 1:return(0,Ge.jsxs)(Vd.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-6",children:[(0,Ge.jsxs)("div",{className:"text-center mb-8",children:[(0,Ge.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Cr\xe9er votre compte"}),(0,Ge.jsx)("p",{className:"text-gray-600",children:"Commen\xe7ons par vos informations de base"})]}),(0,Ge.jsxs)("div",{className:"space-y-4",children:[(0,Ge.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,Ge.jsx)(Hu,{label:"Pr\xe9nom",name:"firstName",value:h.firstName,onChange:g,error:d.firstName,icon:Dn}),(0,Ge.jsx)(Hu,{label:"Nom",name:"lastName",value:h.lastName,onChange:g,error:d.lastName,icon:Dn})]}),(0,Ge.jsx)(Hu,{label:"Adresse email",type:"email",name:"email",value:h.email,onChange:g,error:d.email,icon:Ru,placeholder:"votre@email.com"}),(0,Ge.jsx)(Hu,{label:"Nom du profil Facebook",name:"facebookName",value:h.facebookName,onChange:g,error:d.facebookName,icon:Dn,placeholder:"Votre nom de profil Facebook"}),(0,Ge.jsx)(Hu,{label:"Num\xe9ro de t\xe9l\xe9phone",type:"tel",name:"phoneNumber",value:h.phoneNumber,onChange:g,error:d.phoneNumber,icon:Iu,placeholder:"Ex: 53448573"}),(0,Ge.jsx)(Hu,{label:"Adresse",name:"address",value:h.address,onChange:g,error:d.address,icon:Ku,placeholder:"Votre adresse compl\xe8te"}),(0,Ge.jsx)(Hu,{label:"Mot de passe",type:l?"text":"password",name:"password",value:h.password,onChange:g,error:d.password,icon:l?Lu:zu,onIconClick:()=>c(!l)}),(0,Ge.jsx)(Hu,{label:"Confirmer le mot de passe",type:l?"text":"password",name:"confirmPassword",value:h.confirmPassword,onChange:g,error:d.confirmPassword,icon:l?Lu:zu,onIconClick:()=>c(!l)})]})]});case 2:return(0,Ge.jsxs)(Vd.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-6",children:[(0,Ge.jsxs)("div",{className:"text-center mb-8",children:[(0,Ge.jsx)("div",{className:"w-16 h-16 bg-primary-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,Ge.jsx)(et,{size:24,className:"text-primary-600"})}),(0,Ge.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Confirmation"}),(0,Ge.jsx)("p",{className:"text-gray-600",children:"V\xe9rifiez vos informations avant de continuer"})]}),(0,Ge.jsxs)("div",{className:"space-y-4",children:[(0,Ge.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,Ge.jsx)("h3",{className:"font-semibold text-gray-900 mb-3",children:"Informations personnelles"}),(0,Ge.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,Ge.jsxs)("p",{children:[(0,Ge.jsx)("span",{className:"font-medium",children:"Nom complet:"})," ",h.firstName," ",h.lastName]}),(0,Ge.jsxs)("p",{children:[(0,Ge.jsx)("span",{className:"font-medium",children:"Email:"})," ",h.email]}),(0,Ge.jsxs)("p",{children:[(0,Ge.jsx)("span",{className:"font-medium",children:"Nom Facebook:"})," ",h.facebookName]}),(0,Ge.jsxs)("p",{children:[(0,Ge.jsx)("span",{className:"font-medium",children:"T\xe9l\xe9phone:"})," ",h.phoneNumber]}),(0,Ge.jsxs)("p",{children:[(0,Ge.jsx)("span",{className:"font-medium",children:"Adresse:"})," ",h.address]})]})]}),(0,Ge.jsx)("div",{className:"text-center",children:(0,Ge.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"En continuant, vous acceptez nos conditions d'utilisation et notre politique de confidentialit\xe9."})})]})]});case 3:return(0,Ge.jsxs)(Vd.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"text-center space-y-6",children:[(0,Ge.jsx)(Vd.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring",stiffness:200},className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto",children:(0,Ge.jsx)(et,{size:32,className:"text-green-600"})}),(0,Ge.jsx)("div",{children:(0,Ge.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Compte cr\xe9\xe9 avec succ\xe8s !"})})]});default:return null}})()})}),(0,Ge.jsxs)("div",{className:"flex items-center justify-between",children:[r>1&&(0,Ge.jsxs)(Vu,{onClick:()=>{r>1&&a(r-1)},variant:"outline",className:"flex items-center space-x-2",children:[(0,Ge.jsx)(Qu,{size:16}),(0,Ge.jsx)("span",{children:"Pr\xe9c\xe9dent"})]}),r<=x.length&&(0,Ge.jsxs)(Vu,{onClick:()=>{1===r?(()=>{const e={};h.firstName.trim()||(e.firstName="Le pr\xe9nom est requis"),h.lastName.trim()||(e.lastName="Le nom est requis"),h.address.trim()||(e.address="L'adresse est requise"),h.email.trim()?eh(h.email)||(e.email="Email invalide"):e.email="L'adresse email est requise",h.facebookName.trim()||(e.facebookName="Le nom du profil Facebook est requis");const t=rh(h.phoneNumber);return t.valid||(e.phoneNumber=t.error),h.password.length<6&&(e.password="Le mot de passe doit contenir au moins 6 caract\xe8res"),h.password!==h.confirmPassword&&(e.confirmPassword="Les mots de passe ne correspondent pas"),u(e),0===Object.keys(e).length})()&&a(2):2===r?(f(!0),setTimeout(()=>{a(3)},2e3)):3===r&&setTimeout(()=>{console.log("[CREATEACCOUNT] Donn\xe9es transmises:",h),e("/register",{state:{basicInfo:{firstName:h.firstName,lastName:h.lastName,email:h.email,facebookName:h.facebookName,phoneNumber:h.phoneNumber,address:h.address,password:h.password,confirmPassword:h.confirmPassword},fromCreateAccount:!0}})},3e3)},disabled:i,className:"flex items-center space-x-2 ml-auto",children:[(0,Ge.jsx)("span",{children:1===r||2===r?"Continuer":3===r?"Continuer vers l'inscription compl\xe8te":"Suivant"}),(0,Ge.jsx)(Fn,{size:16})]})]}),(0,Ge.jsx)("div",{className:"text-center mt-6",children:(0,Ge.jsxs)("p",{className:"text-sm text-gray-600",children:["D\xe9j\xe0 un compte ?"," ",(0,Ge.jsx)("button",{onClick:()=>e("/login"),className:"text-primary-600 hover:text-primary-700 font-medium",children:"Se connecter"})]})})]})})},ih=()=>(0,Ge.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-primary-50 to-secondary-50 flex items-center justify-center p-4",children:(0,Ge.jsxs)(Vd.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"w-full max-w-md",children:[(0,Ge.jsx)("div",{className:"text-center mb-8",children:(0,Ge.jsx)(Hd,{className:"mx-auto mb-4"})}),(0,Ge.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8 border border-gray-100",children:[(0,Ge.jsxs)("div",{className:"text-center mb-6",children:[(0,Ge.jsx)("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,Ge.jsx)(et,{className:"w-8 h-8 text-green-600"})}),(0,Ge.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Inscription r\xe9ussie !"}),(0,Ge.jsx)("p",{className:"text-gray-600",children:"Votre compte a \xe9t\xe9 cr\xe9\xe9 avec succ\xe8s"})]}),(0,Ge.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-xl p-4 mb-6",children:(0,Ge.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Ge.jsx)(Wd,{className:"w-5 h-5 text-yellow-600"}),(0,Ge.jsxs)("div",{children:[(0,Ge.jsx)("h3",{className:"font-semibold text-yellow-800",children:"En attente d'approbation"}),(0,Ge.jsx)("p",{className:"text-sm text-yellow-700",children:"Votre compte sera activ\xe9 sous 24-48h"})]})]})}),(0,Ge.jsxs)("div",{className:"space-y-4 mb-6",children:[(0,Ge.jsx)("h3",{className:"font-semibold text-gray-900 mb-3",children:"Prochaines \xe9tapes :"}),(0,Ge.jsxs)("div",{className:"space-y-3",children:[(0,Ge.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,Ge.jsx)("div",{className:"w-6 h-6 bg-primary-100 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:(0,Ge.jsx)("span",{className:"text-xs font-semibold text-primary-600",children:"1"})}),(0,Ge.jsx)("div",{children:(0,Ge.jsxs)("p",{className:"text-sm text-gray-700",children:[(0,Ge.jsx)("strong",{children:"V\xe9rification des documents"})," - Nous v\xe9rifions vos informations"]})})]}),(0,Ge.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,Ge.jsx)("div",{className:"w-6 h-6 bg-primary-100 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:(0,Ge.jsx)("span",{className:"text-xs font-semibold text-primary-600",children:"2"})}),(0,Ge.jsx)("div",{children:(0,Ge.jsxs)("p",{className:"text-sm text-gray-700",children:[(0,Ge.jsx)("strong",{children:"Notification par SMS/Email"})," - Vous recevrez une confirmation"]})})]}),(0,Ge.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,Ge.jsx)("div",{className:"w-6 h-6 bg-primary-100 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:(0,Ge.jsx)("span",{className:"text-xs font-semibold text-primary-600",children:"3"})}),(0,Ge.jsx)("div",{children:(0,Ge.jsxs)("p",{className:"text-sm text-gray-700",children:[(0,Ge.jsx)("strong",{children:"Acc\xe8s \xe0 votre compte"})," - Vous pourrez vous connecter"]})})]})]})]}),(0,Ge.jsxs)("div",{className:"bg-gray-50 rounded-xl p-4 mb-6",children:[(0,Ge.jsx)("h3",{className:"font-semibold text-gray-900 mb-3",children:"Besoin d'aide ?"}),(0,Ge.jsxs)("div",{className:"space-y-2",children:[(0,Ge.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Ge.jsx)(Iu,{className:"w-4 h-4 text-gray-500"}),(0,Ge.jsx)("span",{className:"text-sm text-gray-600",children:"+229 90 00 00 00"})]}),(0,Ge.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Ge.jsx)(Ru,{className:"w-4 h-4 text-gray-500"}),(0,Ge.jsx)("span",{className:"text-sm text-gray-600",children:"support@abpret.com"})]})]})]}),(0,Ge.jsxs)("div",{className:"space-y-3",children:[(0,Ge.jsx)(Vu,{onClick:()=>window.location.href="/",className:"w-full",variant:"primary",children:"Retour \xe0 l'accueil"}),(0,Ge.jsx)(Pe,{to:"/login",children:(0,Ge.jsxs)(Vu,{className:"w-full",variant:"outline",children:[(0,Ge.jsx)(Qu,{className:"w-4 h-4 mr-2"}),"Aller \xe0 la connexion"]})})]})]}),(0,Ge.jsx)("div",{className:"text-center mt-6",children:(0,Ge.jsx)("p",{className:"text-sm text-gray-500",children:"\xa9 2024 AB CAMPUS FINANCE. Tous droits r\xe9serv\xe9s."})})]})}),oh=Xe("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),lh=()=>{const[e,n]=(0,t.useState)(""),[s,r]=(0,t.useState)("idle"),[a,i]=(0,t.useState)(""),o=Y(),l=async t=>{if(t.preventDefault(),!e)return i("Veuillez entrer votre adresse email"),void r("error");if(!e.includes("@"))return i("Veuillez entrer une adresse email valide"),void r("error");r("loading"),i("");try{const{error:t}=await Me.supabase.auth.resetPasswordForEmail(e,{redirectTo:"".concat(window.location.origin,"/reset-password")});if(t)return console.error("[FORGOT_PASSWORD] Erreur Supabase:",t),r("error"),void i("Une erreur est survenue. Veuillez r\xe9essayer.");r("success")}catch(n){console.error("[FORGOT_PASSWORD] Erreur g\xe9n\xe9rale:",n),r("error"),i("Une erreur est survenue. Veuillez r\xe9essayer.")}},c=()=>{o("/login")};return"success"===s?(0,Ge.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-100 to-blue-50 flex items-center justify-center p-4",children:[(0,Ge.jsx)("div",{className:"absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZGVmcz48cGF0dGVybiBpZD0iZ3JpZCIgd2lkdGg9IjQwIiBoZWlnaHQ9IjQwIiBwYXR0ZXJuVW5pdHM9InVzZXJTcGFjZU9uVXNlIj48cGF0aCBkPSJNIDQwIDAgTCAwIDAgMCA0MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJyZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMDMpIiBzdHJva2Utd2lkdGg9IjEiLz48L3BhdHRlcm4+PC9kZWZzPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9InVybCgjZ3JpZCkiLz48L3N2Zz4=')] opacity-30"}),(0,Ge.jsx)("div",{className:"relative max-w-md w-full",children:(0,Ge.jsx)("div",{className:"bg-white/80 backdrop-blur-xl rounded-3xl p-8 border border-blue-200/50 shadow-2xl animate-in fade-in-0 zoom-in-95 duration-500",children:(0,Ge.jsxs)("div",{className:"text-center",children:[(0,Ge.jsx)("div",{className:"mx-auto w-16 h-16 bg-gradient-to-r from-green-500 to-emerald-600 rounded-full flex items-center justify-center mb-6",children:(0,Ge.jsx)(et,{className:"w-8 h-8 text-white"})}),(0,Ge.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Email envoy\xe9 !"}),(0,Ge.jsxs)("p",{className:"text-gray-600 mb-8 leading-relaxed",children:["Nous avons envoy\xe9 un lien de r\xe9initialisation \xe0"," ",(0,Ge.jsx)("span",{className:"font-semibold text-blue-600",children:e}),(0,Ge.jsx)("br",{}),"V\xe9rifiez votre bo\xeete mail et suivez les instructions."]}),(0,Ge.jsxs)("button",{onClick:c,className:"group flex items-center justify-center w-full bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white font-semibold py-4 px-6 rounded-xl transition-all duration-300 transform hover:scale-105 hover:shadow-lg",children:[(0,Ge.jsx)(Qu,{className:"w-5 h-5 mr-2 transition-transform group-hover:-translate-x-1"}),"Retour \xe0 la connexion"]})]})})})]}):(0,Ge.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-100 to-blue-50 flex items-center justify-center p-4",children:[(0,Ge.jsx)("div",{className:"absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZGVmcz48cGF0dGVybiBpZD0iZ3JpZCIgd2lkdGg9IjQwIiBoZWlnaHQ9IjQwIiBwYXR0ZXJuVW5pdHM9InVzZXJTcGFjZU9uVXNlIj48cGF0aCBkPSJNIDQwIDAgTCAwIDAgMCA0MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJyZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMDMpIiBzdHJva2Utd2lkdGg9IjEiLz48L3BhdHRlcm4+PC9kZWZzPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9InVybCgjZ3JpZCkiLz48L3N2Zz4=')] opacity-30"}),(0,Ge.jsx)("div",{className:"absolute top-20 left-20 w-32 h-32 bg-blue-500/20 rounded-full blur-xl animate-pulse"}),(0,Ge.jsx)("div",{className:"absolute bottom-20 right-20 w-40 h-40 bg-indigo-500/20 rounded-full blur-xl animate-pulse delay-1000"}),(0,Ge.jsx)("div",{className:"absolute top-1/2 left-10 w-24 h-24 bg-cyan-500/20 rounded-full blur-xl animate-pulse delay-500"}),(0,Ge.jsxs)("div",{className:"relative max-w-md w-full",children:[(0,Ge.jsxs)("div",{className:"bg-white/80 backdrop-blur-xl rounded-3xl p-8 border border-blue-200/50 shadow-2xl animate-in fade-in-0 slide-in-from-bottom-4 duration-700",children:[(0,Ge.jsxs)("div",{className:"text-center mb-8",children:[(0,Ge.jsx)("div",{className:"mx-auto w-16 h-16 bg-gradient-to-r from-blue-600 to-indigo-600 rounded-full flex items-center justify-center mb-6 animate-pulse",children:(0,Ge.jsx)(Ru,{className:"w-8 h-8 text-white"})}),(0,Ge.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Mot de passe oubli\xe9 ?"}),(0,Ge.jsx)("p",{className:"text-gray-600 leading-relaxed",children:"Pas de souci ! Entrez votre adresse email et nous vous enverrons un lien pour r\xe9initialiser votre mot de passe."})]}),(0,Ge.jsxs)("div",{className:"space-y-6",children:[(0,Ge.jsxs)("div",{className:"space-y-2",children:[(0,Ge.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Adresse email"}),(0,Ge.jsxs)("div",{className:"relative",children:[(0,Ge.jsx)("input",{id:"email",type:"email",value:e,onChange:e=>{n(e.target.value),"error"===s&&(r("idle"),i(""))},className:"w-full px-4 py-4 pl-12 bg-white/50 border border-blue-200/50 rounded-xl text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300 backdrop-blur-sm",placeholder:"votre@email.com",disabled:"loading"===s}),(0,Ge.jsx)(Ru,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-500 w-5 h-5"})]})]}),"error"===s&&(0,Ge.jsxs)("div",{className:"flex items-center space-x-3 p-4 bg-red-50 border border-red-200 rounded-xl animate-in fade-in-0 slide-in-from-top-2 duration-300",children:[(0,Ge.jsx)(tt,{className:"w-5 h-5 text-red-500 flex-shrink-0"}),(0,Ge.jsx)("p",{className:"text-red-700 text-sm",children:a})]}),(0,Ge.jsxs)("button",{onClick:l,disabled:"loading"===s,className:"group relative w-full bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 disabled:from-gray-400 disabled:to-gray-500 text-white font-semibold py-4 px-6 rounded-xl transition-all duration-300 transform hover:scale-105 hover:shadow-lg disabled:scale-100 disabled:shadow-none overflow-hidden",children:[(0,Ge.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-white/0 via-white/20 to-white/0 transform -skew-x-12 -translate-x-full group-hover:translate-x-full transition-transform duration-1000"}),(0,Ge.jsx)("div",{className:"relative flex items-center justify-center",children:"loading"===s?(0,Ge.jsxs)(Ge.Fragment,{children:[(0,Ge.jsx)(oh,{className:"w-5 h-5 mr-2 animate-spin"}),"Envoi en cours..."]}):"Envoyer le lien de r\xe9initialisation"})]}),(0,Ge.jsx)("div",{className:"text-center pt-4",children:(0,Ge.jsxs)("button",{onClick:c,className:"group text-gray-600 hover:text-blue-600 font-medium transition-colors duration-200 flex items-center justify-center mx-auto",children:[(0,Ge.jsx)(Qu,{className:"w-4 h-4 mr-2 transition-transform group-hover:-translate-x-1"}),"Retour \xe0 la connexion"]})})]})]}),(0,Ge.jsx)("div",{className:"text-center mt-6",children:(0,Ge.jsxs)("p",{className:"text-gray-500 text-sm",children:["Vous n'avez pas re\xe7u l'email ? V\xe9rifiez vos spams ou"," ",(0,Ge.jsx)("button",{onClick:()=>{e&&"loading"!==s&&l({preventDefault:()=>{}})},className:"text-blue-600 hover:text-blue-700 font-medium transition-colors duration-200",children:"renvoyez-le"})]})})]})]})},ch=()=>{const[e,n]=(0,t.useState)(""),[s,r]=(0,t.useState)(""),[a,i]=(0,t.useState)(!1),[o,l]=(0,t.useState)(!1),[c,d]=(0,t.useState)("idle"),[u,h]=(0,t.useState)(""),[m]=Ie(),p=Y();(0,t.useEffect)(()=>{const e=m.get("access_token"),t=m.get("refresh_token");e&&t||(d("error"),h("Lien de r\xe9initialisation invalide ou expir\xe9."))},[m]);return"success"===c?(0,Ge.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-100 to-blue-50 flex items-center justify-center p-4",children:[(0,Ge.jsx)("div",{className:"absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZGVmcz48cGF0dGVybiBpZD0iZ3JpZCIgd2lkdGg9IjQwIiBoZWlnaHQ9IjQwIiBwYXR0ZXJuVW5pdHM9InVzZXJTcGFjZU9uVXNlIj48cGF0aCBkPSJNIDQwIDAgTCAwIDAgMCA0MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJyZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMDMpIiBzdHJva2Utd2lkdGg9IjEiLz48L3BhdHRlcm4+PC9kZWZzPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9InVybCgjZ3JpZCkiLz48L3N2Zz4=')] opacity-30"}),(0,Ge.jsx)("div",{className:"relative max-w-md w-full",children:(0,Ge.jsx)("div",{className:"bg-white/80 backdrop-blur-xl rounded-3xl p-8 border border-blue-200/50 shadow-2xl animate-in fade-in-0 zoom-in-95 duration-500",children:(0,Ge.jsxs)("div",{className:"text-center",children:[(0,Ge.jsx)("div",{className:"mx-auto w-16 h-16 bg-gradient-to-r from-green-500 to-emerald-600 rounded-full flex items-center justify-center mb-6",children:(0,Ge.jsx)(et,{className:"w-8 h-8 text-white"})}),(0,Ge.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Mot de passe mis \xe0 jour !"}),(0,Ge.jsxs)("p",{className:"text-gray-600 mb-8 leading-relaxed",children:["Votre mot de passe a \xe9t\xe9 r\xe9initialis\xe9 avec succ\xe8s.",(0,Ge.jsx)("br",{}),"Vous allez \xeatre redirig\xe9 vers la page de connexion..."]}),(0,Ge.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2 mb-4",children:(0,Ge.jsx)("div",{className:"bg-gradient-to-r from-green-500 to-emerald-600 h-2 rounded-full animate-pulse",style:{width:"100%"}})})]})})})]}):(0,Ge.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-100 to-blue-50 flex items-center justify-center p-4",children:[(0,Ge.jsx)("div",{className:"absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZGVmcz48cGF0dGVybiBpZD0iZ3JpZCIgd2lkdGg9IjQwIiBoZWlnaHQ9IjQwIiBwYXR0ZXJuVW5pdHM9InVzZXJTcGFjZU9uVXNlIj48cGF0aCBkPSJNIDQwIDAgTCAwIDAgMCA0MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJyZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMDMpIiBzdHJva2Utd2lkdGg9IjEiLz48L3BhdHRlcm4+PC9kZWZzPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9InVybCgjZ3JpZCkiLz48L3N2Zz4=')] opacity-30"}),(0,Ge.jsx)("div",{className:"absolute top-20 left-20 w-32 h-32 bg-blue-500/20 rounded-full blur-xl animate-pulse"}),(0,Ge.jsx)("div",{className:"absolute bottom-20 right-20 w-40 h-40 bg-indigo-500/20 rounded-full blur-xl animate-pulse delay-1000"}),(0,Ge.jsx)("div",{className:"absolute top-1/2 left-10 w-24 h-24 bg-cyan-500/20 rounded-full blur-xl animate-pulse delay-500"}),(0,Ge.jsx)("div",{className:"relative max-w-md w-full",children:(0,Ge.jsxs)("div",{className:"bg-white/80 backdrop-blur-xl rounded-3xl p-8 border border-blue-200/50 shadow-2xl animate-in fade-in-0 slide-in-from-bottom-4 duration-700",children:[(0,Ge.jsxs)("div",{className:"text-center mb-8",children:[(0,Ge.jsx)("div",{className:"mx-auto w-16 h-16 bg-gradient-to-r from-blue-600 to-indigo-600 rounded-full flex items-center justify-center mb-6 animate-pulse",children:(0,Ge.jsx)(Ou,{className:"w-8 h-8 text-white"})}),(0,Ge.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Nouveau mot de passe"}),(0,Ge.jsx)("p",{className:"text-gray-600 leading-relaxed",children:"Entrez votre nouveau mot de passe pour finaliser la r\xe9initialisation."})]}),(0,Ge.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),!e)return h("Veuillez entrer un mot de passe"),void d("error");if(!s)return h("Veuillez confirmer votre mot de passe"),void d("error");if(e!==s)return h("Les mots de passe ne correspondent pas"),void d("error");const n=(e=>e.length<6?"Le mot de passe doit contenir au moins 6 caract\xe8res":null)(e);if(n)return h(n),void d("error");d("loading"),h("");try{const{error:t}=await Me.supabase.auth.updateUser({password:e});if(t)return console.error("[RESET_PASSWORD] Erreur Supabase:",t),d("error"),void h("Une erreur est survenue. Veuillez r\xe9essayer.");d("success"),setTimeout(()=>{p("/login")},3e3)}catch(r){console.error("[RESET_PASSWORD] Erreur g\xe9n\xe9rale:",r),d("error"),h("Une erreur est survenue. Veuillez r\xe9essayer.")}},className:"space-y-6",children:[(0,Ge.jsxs)("div",{className:"space-y-2",children:[(0,Ge.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Nouveau mot de passe"}),(0,Ge.jsxs)("div",{className:"relative",children:[(0,Ge.jsx)("input",{id:"password",type:a?"text":"password",value:e,onChange:e=>{n(e.target.value),"error"===c&&(d("idle"),h(""))},className:"w-full px-4 py-4 pl-12 pr-12 bg-white/50 border border-blue-200/50 rounded-xl text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300 backdrop-blur-sm",placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",disabled:"loading"===c,required:!0}),(0,Ge.jsx)(Ou,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-500 w-5 h-5"}),(0,Ge.jsx)("button",{type:"button",onClick:()=>i(!a),className:"absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700 transition-colors",children:a?(0,Ge.jsx)(Lu,{size:20}):(0,Ge.jsx)(zu,{size:20})})]})]}),(0,Ge.jsxs)("div",{className:"space-y-2",children:[(0,Ge.jsx)("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700",children:"Confirmer le mot de passe"}),(0,Ge.jsxs)("div",{className:"relative",children:[(0,Ge.jsx)("input",{id:"confirmPassword",type:o?"text":"password",value:s,onChange:e=>{r(e.target.value),"error"===c&&(d("idle"),h(""))},className:"w-full px-4 py-4 pl-12 pr-12 bg-white/50 border border-blue-200/50 rounded-xl text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300 backdrop-blur-sm",placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",disabled:"loading"===c,required:!0}),(0,Ge.jsx)(Ou,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-500 w-5 h-5"}),(0,Ge.jsx)("button",{type:"button",onClick:()=>l(!o),className:"absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700 transition-colors",children:o?(0,Ge.jsx)(Lu,{size:20}):(0,Ge.jsx)(zu,{size:20})})]})]}),"error"===c&&(0,Ge.jsxs)("div",{className:"flex items-center space-x-3 p-4 bg-red-50 border border-red-200 rounded-xl animate-in fade-in-0 slide-in-from-top-2 duration-300",children:[(0,Ge.jsx)(tt,{className:"w-5 h-5 text-red-500 flex-shrink-0"}),(0,Ge.jsx)("p",{className:"text-red-700 text-sm",children:u})]}),(0,Ge.jsxs)("button",{type:"submit",disabled:"loading"===c,className:"group relative w-full bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 disabled:from-gray-400 disabled:to-gray-500 text-white font-semibold py-4 px-6 rounded-xl transition-all duration-300 transform hover:scale-105 hover:shadow-lg disabled:scale-100 disabled:shadow-none overflow-hidden",children:[(0,Ge.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-white/0 via-white/20 to-white/0 transform -skew-x-12 -translate-x-full group-hover:translate-x-full transition-transform duration-1000"}),(0,Ge.jsx)("div",{className:"relative flex items-center justify-center",children:"loading"===c?(0,Ge.jsxs)(Ge.Fragment,{children:[(0,Ge.jsx)(oh,{className:"w-5 h-5 mr-2 animate-spin"}),"Mise \xe0 jour en cours..."]}):"Mettre \xe0 jour le mot de passe"})]})]})]})})]})},dh=Xe("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]]),uh=()=>{const[e,n]=(0,t.useState)(!1),s=[{name:"WhatsApp",icon:(0,Ge.jsx)("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24",children:(0,Ge.jsx)("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"})}),url:"https://wa.me/22953463606",color:"bg-green-500 hover:bg-green-600",description:"+229 53 46 36 06"},{name:"Facebook",icon:(0,Ge.jsx)("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24",children:(0,Ge.jsx)("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})}),url:"https://www.facebook.com/abpret.2024",color:"bg-blue-600 hover:bg-blue-700",description:"AB Campus Finance"},{name:"Email",icon:(0,Ge.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Ge.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),url:"mailto:abpret51@gmail.com",color:"bg-gray-600 hover:bg-gray-700",description:"abpret51@gmail.com"}];return(0,Ge.jsxs)(Ge.Fragment,{children:[(0,Ge.jsx)("button",{onClick:()=>n(!e),className:"fixed bottom-28 right-6 z-40 p-4 bg-primary-500 hover:bg-primary-600 text-white rounded-full shadow-lg transition-all duration-300 transform hover:scale-110 focus:outline-none focus:ring-4 focus:ring-primary-300","aria-label":"Nous contacter",children:e?(0,Ge.jsx)(st,{size:24}):(0,Ge.jsx)(dh,{size:24})}),e&&(0,Ge.jsxs)(Ge.Fragment,{children:[(0,Ge.jsx)("div",{className:"fixed inset-0 z-30",onClick:()=>n(!1)}),(0,Ge.jsxs)("div",{className:"fixed bottom-44 right-6 z-40 w-80 bg-white rounded-2xl shadow-2xl border border-gray-200 overflow-hidden animate-slide-up",children:[(0,Ge.jsx)("div",{className:"bg-gradient-to-r from-primary-500 to-primary-600 p-4 text-white",children:(0,Ge.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Ge.jsxs)("div",{children:[(0,Ge.jsx)("h3",{className:"text-lg font-bold font-montserrat",children:"Nous contacter"}),(0,Ge.jsx)("p",{className:"text-sm text-primary-100",children:"Choisissez votre canal pr\xe9f\xe9r\xe9"})]}),(0,Ge.jsx)("button",{onClick:()=>n(!1),className:"p-1 hover:bg-white/20 rounded-full transition-colors",children:(0,Ge.jsx)(st,{size:20})})]})}),(0,Ge.jsx)("div",{className:"p-4 space-y-3",children:s.map(e=>(0,Ge.jsxs)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",onClick:()=>n(!1),className:"flex items-center space-x-4 p-4 rounded-xl ".concat(e.color," text-white transition-all duration-200 transform hover:scale-105 hover:shadow-lg"),children:[(0,Ge.jsx)("div",{className:"flex-shrink-0",children:e.icon}),(0,Ge.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Ge.jsx)("p",{className:"font-semibold font-montserrat",children:e.name}),(0,Ge.jsx)("p",{className:"text-sm opacity-90 truncate",children:e.description})]}),(0,Ge.jsx)("svg",{className:"w-5 h-5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Ge.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]},e.name))}),(0,Ge.jsx)("div",{className:"bg-gray-50 px-4 py-3 border-t border-gray-200",children:(0,Ge.jsx)("p",{className:"text-xs text-gray-600 text-center font-montserrat",children:"Nous sommes disponibles pour vous aider"})})]})]}),(0,Ge.jsx)("style",{jsx:!0,children:"\n        @keyframes slide-up {\n          from {\n            opacity: 0;\n            transform: translateY(20px);\n          }\n          to {\n            opacity: 1;\n            transform: translateY(0);\n          }\n        }\n\n        .animate-slide-up {\n          animation: slide-up 0.3s ease-out;\n        }\n      "})]})},hh=Xe("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]),mh=Xe("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),ph=Xe("PiggyBank",[["path",{d:"M19 5c-1.5 0-2.8 1.4-3 2-3.5-1.5-11-.3-11 5 0 1.8 0 3 2 4.5V20h4v-2h3v2h4v-4c1-.5 1.7-1 2-2h2v-4h-2c0-1-.5-1.5-1-2h0V5z",key:"uf6l00"}],["path",{d:"M2 9v1c0 1.1.9 2 2 2h1",key:"nm575m"}],["path",{d:"M16 11h0",key:"k2aug8"}]]),fh=Xe("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]),xh=Xe("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),gh=Xe("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),vh=()=>{var e;const n=Y(),{user:s}=Je(),[r,a]=(0,t.useState)({totalLoaned:0,totalRepaid:0,amountToRepay:0,activeLoans:0,nextPayment:0,daysUntilNextPayment:0,dueDate:null,loyaltyScore:0}),[i,o]=(0,t.useState)(!0),[l,c]=(0,t.useState)(null);(0,t.useEffect)(()=>{d()},[null===s||void 0===s?void 0:s.id]);const d=async()=>{if(null!==s&&void 0!==s&&s.id)try{o(!0),c(null);const e=await qe(s.id),t=await We(s.id);if(e.success&&t.success){const n=e.data||[],s=t.data||[],r=n.reduce((e,t)=>e+(t.amount||0),0),i=s.reduce((e,t)=>e+(t.amount||0),0),o=n.filter(e=>"active"===e.status).length,l=r-i;let c=0,d=0,u=null;const h=n.find(e=>"active"===e.status);if(h){const e=parseFloat(h.amount)||0,t=parseFloat(h.interest_rate)||0;if(e>0){c=Math.round(e*(1+t/100))}const n=new Date(h.created_at),s=parseInt(h.duration_months||h.duration,10)||30;u=new Date(n),u.setDate(u.getDate()+s);const r=new Date;r.setHours(0,0,0,0),u.setHours(0,0,0,0);const a=u.getTime()-r.getTime();d=Math.floor(a/864e5)}const m=new Map(n.map(e=>[e.id,e])),p=s.filter(e=>"completed"===(e.status||"").toLowerCase()),f=new Set;p.forEach(e=>{const t=m.get(e.loan_id);if(!t)return;const n=new Date(t.created_at||new Date),s=parseInt(t.duration_months||t.duration||30,10),r=new Date(n.getTime()+24*s*60*60*1e3);r.setHours(23,59,59,999);const a=new Date(e.payment_date||e.created_at||new Date),i=new Date(a);i.setHours(0,0,0,0);i.getTime()<=r.getTime()&&f.add(e.loan_id)}),n.forEach(e=>{const t=(e.status||"").toLowerCase();"completed"!==t&&"rembours\xe9"!==t||f.has(e.id)||f.add(e.id)});const x=Math.max(0,Math.min(5,f.size));a({totalLoaned:r,totalRepaid:i,amountToRepay:l,activeLoans:o,nextPayment:c,daysUntilNextPayment:d,dueDate:u,loyaltyScore:x})}}catch(l){console.error("[DASHBOARD] Erreur:",l),c("Erreur lors du chargement des donn\xe9es")}finally{o(!1)}else o(!1)};if(i)return(0,Ge.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 flex items-center justify-center",children:(0,Ge.jsxs)("div",{className:"text-center",children:[(0,Ge.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-blue-500 border-t-transparent mx-auto mb-4"}),(0,Ge.jsx)("p",{className:"text-gray-600 font-medium",children:"Chargement..."})]})});if(l)return(0,Ge.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 flex items-center justify-center p-4",children:(0,Ge.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8 max-w-md w-full text-center",children:[(0,Ge.jsx)("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,Ge.jsx)(hh,{size:32,className:"text-red-600"})}),(0,Ge.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Erreur"}),(0,Ge.jsx)("p",{className:"text-gray-600 mb-6",children:l}),(0,Ge.jsxs)("button",{onClick:d,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl transition-colors",children:[(0,Ge.jsx)(mh,{size:18}),"R\xe9essayer"]})]})});const u=[{id:"ab-pret",title:"AB Pr\xeat",description:"Demander un pr\xeat rapide",icon:au,color:"from-blue-500 to-purple-600",iconBg:"bg-blue-100",iconColor:"text-blue-600",path:"/loan-request",badge:r.activeLoans>0?"".concat(r.activeLoans," actif").concat(r.activeLoans>1?"s":""):null},{id:"ab-epargne",title:"AB \xc9pargne",description:"\xc9pargner intelligemment",icon:ph,color:"from-green-500 to-emerald-600",iconBg:"bg-green-100",iconColor:"text-green-600",path:"/ab-epargne"},{id:"ab-logement",title:"AB Logement",description:"Votre maison de r\xeave",icon:ru,color:"from-purple-500 to-indigo-600",iconBg:"bg-purple-100",iconColor:"text-purple-600",path:"/ab-logement"},{id:"coaching",title:"Coaching Finance",description:"D\xe9veloppez votre business",icon:Ju,color:"from-orange-500 to-red-600",iconBg:"bg-orange-100",iconColor:"text-orange-600",path:"/coaching-finance"}];return(0,Ge.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 pb-24",children:[(0,Ge.jsx)("div",{className:"bg-white/80 backdrop-blur-lg shadow-lg border-b border-white/50 sticky top-0 z-30",children:(0,Ge.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:(0,Ge.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Ge.jsxs)("div",{className:"flex items-center gap-4",children:[(0,Ge.jsx)("div",{className:"p-3 bg-gradient-to-br from-blue-500 to-purple-600 rounded-2xl shadow-lg",children:(0,Ge.jsx)(ru,{size:32,className:"text-white"})}),(0,Ge.jsxs)("div",{children:[(0,Ge.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900 font-montserrat",children:"Tableau de bord"}),(0,Ge.jsxs)("p",{className:"text-sm sm:text-base text-gray-600 font-montserrat",children:["Bonjour ",(null===s||void 0===s?void 0:s.first_name)||(null===s||void 0===s||null===(e=s.user_metadata)||void 0===e?void 0:e.first_name)||"Utilisateur"," \ud83d\udc4b"]})]})]}),(0,Ge.jsxs)("button",{onClick:d,disabled:i,className:"flex items-center gap-2 px-3 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-xl transition-colors text-sm",children:[(0,Ge.jsx)(mh,{size:16,className:i?"animate-spin":""}),(0,Ge.jsx)("span",{className:"hidden sm:inline",children:"Actualiser"})]})]})})}),(0,Ge.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,Ge.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6 mb-8",children:[(0,Ge.jsxs)("div",{className:"bg-gradient-to-br from-yellow-500 to-orange-600 text-white rounded-2xl shadow-lg border border-yellow-400/50 p-4 sm:p-6 flex flex-col justify-between hover:shadow-xl transition-all duration-300",children:[(0,Ge.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,Ge.jsx)("div",{className:"p-2 sm:p-3 bg-white/20 rounded-xl",children:(0,Ge.jsx)(fh,{size:20})}),(0,Ge.jsx)("span",{className:"text-xs font-medium text-yellow-100",children:"Score"})]}),(0,Ge.jsx)("p",{className:"text-2xl sm:text-3xl font-bold font-montserrat mb-1",children:r.loyaltyScore}),(0,Ge.jsx)("p",{className:"text-sm text-yellow-100 font-montserrat",children:"/ 5 points"}),(0,Ge.jsx)("div",{className:"flex mt-2",children:[...Array(5)].map((e,t)=>(0,Ge.jsx)(Pu,{className:"w-3 h-3 sm:w-4 sm:h-4 ".concat(t<r.loyaltyScore?"text-white fill-current":"text-yellow-300/30")},t))})]}),(0,Ge.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 p-4 sm:p-6 flex flex-col justify-between hover:shadow-xl transition-all duration-300",children:[(0,Ge.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,Ge.jsx)("div",{className:"p-2 sm:p-3 bg-blue-100 rounded-xl",children:(0,Ge.jsx)(au,{size:20,className:"text-blue-600"})}),(0,Ge.jsx)("span",{className:"text-xs font-medium text-gray-500",children:"Actifs"})]}),(0,Ge.jsx)("p",{className:"text-2xl sm:text-3xl font-bold text-gray-900 font-montserrat mb-1",children:r.activeLoans}),(0,Ge.jsxs)("p",{className:"text-sm text-gray-600 font-montserrat",children:["Pr\xeat",r.activeLoans>1?"s":""," en cours"]})]}),(0,Ge.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 p-4 sm:p-6 flex flex-col justify-between hover:shadow-xl transition-all duration-300",children:[(0,Ge.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,Ge.jsx)("div",{className:"p-2 sm:p-3 bg-purple-100 rounded-xl",children:(0,Ge.jsx)(xh,{size:20,className:"text-purple-600"})}),(0,Ge.jsx)("span",{className:"text-xs font-medium text-gray-500",children:"Emprunt\xe9"})]}),(0,Ge.jsx)("p",{className:"text-2xl sm:text-3xl font-bold text-gray-900 font-montserrat mb-1",children:Yu(r.totalLoaned)}),(0,Ge.jsx)("p",{className:"text-sm text-gray-600 font-montserrat",children:"Montant total"})]}),(0,Ge.jsxs)("div",{className:"bg-gradient-to-br from-orange-500 to-red-600 text-white rounded-2xl shadow-lg border border-orange-400/50 p-4 sm:p-6 flex flex-col justify-between hover:shadow-xl transition-all duration-300",children:[(0,Ge.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,Ge.jsx)("div",{className:"p-2 sm:p-3 bg-white/20 rounded-xl",children:(0,Ge.jsx)(Wd,{size:20})}),(0,Ge.jsx)("span",{className:"text-xs font-medium text-orange-100",children:r.daysUntilNextPayment<0?"Retard":0===r.daysUntilNextPayment?"Aujourd'hui":"".concat(r.daysUntilNextPayment,"j")})]}),(0,Ge.jsx)("p",{className:"text-2xl sm:text-3xl font-bold font-montserrat mb-1",children:Yu(r.nextPayment)}),(0,Ge.jsx)("p",{className:"text-sm text-orange-100 font-montserrat",children:"Prochain paiement"})]})]}),(0,Ge.jsx)("h2",{className:"text-xl font-bold text-gray-900 font-montserrat mb-4",children:"Nos Services"}),(0,Ge.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6 mb-8",children:u.map(e=>(0,Ge.jsxs)("button",{onClick:()=>n(e.path),className:"relative flex flex-col items-start p-6 bg-white rounded-2xl shadow-lg border border-gray-100 hover:shadow-xl transition-all duration-300 group overflow-hidden text-left",children:[(0,Ge.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br ".concat(e.color," opacity-0 group-hover:opacity-10 transition-opacity duration-300")}),(0,Ge.jsxs)("div",{className:"relative z-10 flex items-center justify-between w-full mb-4",children:[(0,Ge.jsx)("div",{className:"p-3 ".concat(e.iconBg," rounded-xl group-hover:scale-110 transition-transform duration-300"),children:(0,Ge.jsx)(e.icon,{size:24,className:e.iconColor})}),e.badge&&(0,Ge.jsx)("span",{className:"px-3 py-1 bg-blue-500 text-white text-xs font-bold rounded-full shadow-sm",children:e.badge})]}),(0,Ge.jsx)("h3",{className:"relative z-10 text-lg font-bold text-gray-900 font-montserrat mb-1",children:e.title}),(0,Ge.jsx)("p",{className:"relative z-10 text-sm text-gray-600 font-montserrat mb-4",children:e.description}),(0,Ge.jsx)(Fn,{size:20,className:"absolute bottom-6 right-6 text-gray-400 group-hover:text-blue-600 transition-all duration-300 group-hover:translate-x-1"})]},e.id))}),(0,Ge.jsx)("div",{className:"flex justify-center",children:(0,Ge.jsxs)("button",{onClick:()=>n("/loan-request"),className:"flex items-center gap-3 px-8 py-4 bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white rounded-2xl font-bold text-lg shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105",children:[(0,Ge.jsx)(gh,{size:24}),(0,Ge.jsx)("span",{children:"Nouvelle demande de pr\xeat"})]})})]}),(0,Ge.jsx)(uh,{})]})},yh=Xe("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),bh=Xe("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),jh=()=>{const{user:e}=Je(),n=Y(),{isConnected:s}=(()=>{const{addNotification:e}=it(),{user:n}=Je(),[s,r]=(0,t.useState)(!1),[a]=(0,t.useState)(new Set);return(0,t.useEffect)(()=>{if(!n)return;const t="admin"===(null===n||void 0===n?void 0:n.role),s=null===n||void 0===n?void 0:n.id;console.log("[REALTIME] ".concat(t?"Admin":"Utilisateur"," connect\xe9, ID: ").concat(s));const i=Me.supabase.channel("loans_changes").on("postgres_changes",{event:"INSERT",schema:"public",table:"loans"},n=>{console.log("[REALTIME] Nouvelle demande de pr\xeat:",n.new),a.has(n.new.id)||(a.add(n.new.id),t&&e({title:"\ud83d\udea8 Nouvelle demande de pr\xeat",message:"Demande de ".concat(new Intl.NumberFormat("fr-FR",{style:"currency",currency:"XOF"}).format(n.new.amount)," - ").concat(n.new.purpose||"Objectif non sp\xe9cifi\xe9"),type:"info",priority:"high",forAdmin:!0,data:{loan_id:n.new.id,amount:n.new.amount,purpose:n.new.purpose,status:n.new.status,created_at:n.new.created_at},action:"Voir la demande"}))}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"loans"},n=>{if(console.log("[REALTIME] Mise \xe0 jour de pr\xeat:",n.new),n.old.status!==n.new.status){let r="",a="info",i="";switch(n.new.status){case"approved":r="Pr\xeat approuv\xe9 pour ".concat(new Intl.NumberFormat("fr-FR",{style:"currency",currency:"XOF"}).format(n.new.amount)," FCFA"),a="success",i="\u2705 Pr\xeat approuv\xe9";break;case"rejected":r="Pr\xeat rejet\xe9 pour ".concat(new Intl.NumberFormat("fr-FR",{style:"currency",currency:"XOF"}).format(n.new.amount)," FCFA"),a="error",i="\u274c Pr\xeat rejet\xe9";break;case"active":r="Pr\xeat activ\xe9 pour ".concat(new Intl.NumberFormat("fr-FR",{style:"currency",currency:"XOF"}).format(n.new.amount)," FCFA"),a="success",i="\ud83d\ude80 Pr\xeat activ\xe9";break;default:return}t&&e({title:"Statut de pr\xeat mis \xe0 jour",message:"".concat(r," - Utilisateur: ").concat(n.new.user_id),type:a,priority:"medium",forAdmin:!0,data:n.new}),t||n.new.user_id!==s||e({title:i,message:r,type:a,priority:"high",forUser:!0,userId:s,data:n.new,action:"Voir les d\xe9tails"})}}).subscribe(e=>{console.log("[REALTIME] Statut de la connexion loans:",e),r("SUBSCRIBED"===e)});if(t){const t=Me.supabase.channel("users_changes").on("postgres_changes",{event:"INSERT",schema:"public",table:"users"},t=>{console.log("[REALTIME] Nouvel utilisateur (admin):",t.new),a.has(t.new.id)||(a.add(t.new.id),e({title:"\ud83d\udc64 Nouvel utilisateur inscrit",message:"".concat(t.new.first_name," ").concat(t.new.last_name," - ").concat(t.new.phone_number),type:"info",priority:"medium",forAdmin:!0,data:{user_id:t.new.id,first_name:t.new.first_name,last_name:t.new.last_name,phone_number:t.new.phone_number,status:t.new.status,created_at:t.new.created_at},action:"Voir le profil"}))}).subscribe(e=>{console.log("[REALTIME] Statut de la connexion users (admin):",e)});return()=>{console.log("[REALTIME] Nettoyage des abonnements (admin)"),i.unsubscribe(),t.unsubscribe()}}return()=>{console.log("[REALTIME] Nettoyage des abonnements (utilisateur)"),i.unsubscribe()}},[e,null===n||void 0===n?void 0:n.role,null===n||void 0===n?void 0:n.id]),{isConnected:s}})(),[r,a]=(0,t.useState)(!0),[i,o]=(0,t.useState)(null),[l,c]=(0,t.useState)({totalUsers:0,totalLoans:0,totalAmount:0,pendingRequests:0,activeLoans:0,completedLoans:0,totalSavings:0,activeSavingsPlans:0}),[d,u]=(0,t.useState)([]);(0,t.useEffect)(()=>{h()},[]);const h=async()=>{try{a(!0),o(null),console.log("[ADMIN_DASHBOARD] \ud83d\udce5 Chargement des donn\xe9es...");const[e,t,n]=await Promise.all([Be(),qe(),Me.supabase.from("savings_plans").select("*")]);console.log("[ADMIN_DASHBOARD] \u2705 Donn\xe9es charg\xe9es");const s=e.success?e.data.length:0;let r=0,i=0,l=0,d=0,h=0,m=[];if(t.success){const e=t.data||[];r=e.length,i=e.reduce((e,t)=>e+(t.amount||0),0),l=e.filter(e=>"pending"===e.status).length,d=e.filter(e=>"active"===e.status||"approved"===e.status).length,h=e.filter(e=>"completed"===e.status).length,m=e.slice(0,5).map(e=>{var t,n;return{id:e.id,type:"loan",status:e.status,user:{firstName:(null===(t=e.users)||void 0===t?void 0:t.first_name)||"Utilisateur",lastName:(null===(n=e.users)||void 0===n?void 0:n.last_name)||"Inconnu"},amount:e.amount||0,date:e.created_at,description:e.purpose||"Pr\xeat"}})}let p=0,f=0,x=[];if(n.data){const e=n.data||[];p=e.reduce((e,t)=>e+(t.current_balance||0),0),f=e.filter(e=>"active"===e.status).length,x=e.slice(0,3).map(e=>({id:e.id,type:"savings",status:e.status,amount:e.current_balance||0,target:e.total_amount_target||0,date:e.created_at,description:"Plan d'\xe9pargne"}))}const g=[...m,...x].sort((e,t)=>new Date(t.date)-new Date(e.date)).slice(0,8);c({totalUsers:s,totalLoans:r,totalAmount:i,pendingRequests:l,activeLoans:d,completedLoans:h,totalSavings:p,activeSavingsPlans:f}),u(g)}catch(i){console.error("[ADMIN_DASHBOARD] \u274c Erreur:",i),o(i.message||"Une erreur est survenue")}finally{a(!1)}},m=e=>{if("loan"===e.type){if("pending"===e.status)return(0,Ge.jsx)(Wd,{size:16,className:"text-yellow-600"});if("active"===e.status||"approved"===e.status)return(0,Ge.jsx)(hh,{size:16,className:"text-blue-600"});if("completed"===e.status)return(0,Ge.jsx)(et,{size:16,className:"text-green-600"})}return"savings"===e.type?(0,Ge.jsx)(ph,{size:16,className:"text-purple-600"}):(0,Ge.jsx)(au,{size:16,className:"text-gray-600"})},p=e=>{if("loan"===e.type){if("pending"===e.status)return(0,Ge.jsx)("span",{className:"px-2 py-0.5 bg-yellow-100 text-yellow-700 rounded-full text-[10px] font-semibold",children:"En attente"});if("active"===e.status||"approved"===e.status)return(0,Ge.jsx)("span",{className:"px-2 py-0.5 bg-blue-100 text-blue-700 rounded-full text-[10px] font-semibold",children:"Actif"});if("completed"===e.status)return(0,Ge.jsx)("span",{className:"px-2 py-0.5 bg-green-100 text-green-700 rounded-full text-[10px] font-semibold",children:"Rembours\xe9"})}return"savings"===e.type?(0,Ge.jsx)("span",{className:"px-2 py-0.5 bg-purple-100 text-purple-700 rounded-full text-[10px] font-semibold",children:"\xc9pargne"}):null},f=[{title:"AB Pret",description:"G\xe9rer les demandes de pr\xeats",icon:au,color:"from-blue-500 to-purple-600",iconBg:"bg-blue-100",iconColor:"text-blue-600",path:"/admin/loan-requests",badge:l.pendingRequests>0?"".concat(l.pendingRequests," en attente"):null},{title:"AB Epargne",description:"G\xe9rer les comptes d'\xe9pargne",icon:ph,color:"from-green-500 to-emerald-600",iconBg:"bg-green-100",iconColor:"text-green-600",path:"/admin/ab-epargne",badge:l.activeSavingsPlans>0?"".concat(l.activeSavingsPlans," actifs"):null},{title:"Analytics",description:"Voir les statistiques",icon:yh,color:"from-orange-500 to-red-600",iconBg:"bg-orange-100",iconColor:"text-orange-600",path:"/admin/analytics"},{title:"Utilisateurs",description:"G\xe9rer les clients",icon:bh,color:"from-purple-500 to-pink-600",iconBg:"bg-purple-100",iconColor:"text-purple-600",path:"/admin/user-management"}];return r?(0,Ge.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 flex items-center justify-center",children:(0,Ge.jsxs)("div",{className:"text-center",children:[(0,Ge.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-blue-500 border-t-transparent mx-auto mb-4"}),(0,Ge.jsx)("p",{className:"text-gray-600 font-medium",children:"Chargement du tableau de bord..."})]})}):i?(0,Ge.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 flex items-center justify-center p-4",children:(0,Ge.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8 max-w-md w-full text-center",children:[(0,Ge.jsx)("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,Ge.jsx)(tt,{size:32,className:"text-red-600"})}),(0,Ge.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Erreur de chargement"}),(0,Ge.jsx)("p",{className:"text-gray-600 mb-6",children:i}),(0,Ge.jsxs)("button",{onClick:h,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl transition-colors",children:[(0,Ge.jsx)(mh,{size:18}),"R\xe9essayer"]})]})}):(0,Ge.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 pb-24",children:[(0,Ge.jsx)("div",{className:"bg-white/80 backdrop-blur-lg shadow-lg border-b border-white/50 sticky top-0 z-30",children:(0,Ge.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:(0,Ge.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Ge.jsxs)("div",{className:"flex items-center gap-4",children:[(0,Ge.jsx)("div",{className:"p-3 bg-gradient-to-br from-blue-500 to-purple-600 rounded-2xl shadow-lg",children:(0,Ge.jsx)(ru,{size:32,className:"text-white"})}),(0,Ge.jsxs)("div",{children:[(0,Ge.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900 font-montserrat",children:"Tableau de bord"}),(0,Ge.jsxs)("p",{className:"text-sm sm:text-base text-gray-600 font-montserrat",children:["Bonjour ",(null===e||void 0===e?void 0:e.first_name)||"Admin"]})]})]}),(0,Ge.jsxs)("div",{className:"flex items-center gap-3",children:[s&&(0,Ge.jsxs)("div",{className:"hidden sm:flex items-center gap-2 px-3 py-1.5 bg-green-100 rounded-full",children:[(0,Ge.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),(0,Ge.jsx)("span",{className:"text-xs font-medium text-green-700",children:"En ligne"})]}),(0,Ge.jsxs)("button",{onClick:h,className:"flex items-center gap-2 px-3 sm:px-4 py-2 bg-white hover:bg-gray-50 border border-gray-200 rounded-xl transition-all duration-200 shadow-sm hover:shadow",children:[(0,Ge.jsx)(mh,{size:18,className:"text-gray-600"}),(0,Ge.jsx)("span",{className:"hidden sm:inline text-sm font-medium text-gray-700",children:"Actualiser"})]})]})]})})}),(0,Ge.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,Ge.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6 mb-8",children:[(0,Ge.jsxs)("div",{className:"bg-white rounded-2xl p-4 sm:p-6 shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-100 group",children:[(0,Ge.jsx)("div",{className:"flex items-start justify-between mb-3 sm:mb-4",children:(0,Ge.jsx)("div",{className:"p-2 sm:p-3 bg-purple-100 rounded-xl group-hover:scale-110 transition-transform duration-300",children:(0,Ge.jsx)(bh,{size:20,className:"sm:w-6 sm:h-6 text-purple-600"})})}),(0,Ge.jsx)("p",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:l.totalUsers}),(0,Ge.jsx)("p",{className:"text-xs sm:text-sm text-gray-600 mt-1",children:"Utilisateurs"})]}),(0,Ge.jsxs)("div",{className:"bg-gradient-to-br from-blue-500 to-purple-600 rounded-2xl p-4 sm:p-6 shadow-lg hover:shadow-xl transition-all duration-300 text-white group",children:[(0,Ge.jsx)("div",{className:"flex items-start justify-between mb-3 sm:mb-4",children:(0,Ge.jsx)("div",{className:"p-2 sm:p-3 bg-white/20 rounded-xl group-hover:scale-110 transition-transform duration-300",children:(0,Ge.jsx)(hh,{size:20,className:"sm:w-6 sm:h-6 text-white"})})}),(0,Ge.jsx)("p",{className:"text-2xl sm:text-3xl font-bold",children:l.activeLoans}),(0,Ge.jsx)("p",{className:"text-xs sm:text-sm text-blue-100 mt-1",children:"Pr\xeats actifs"})]}),(0,Ge.jsxs)("div",{className:"bg-white rounded-2xl p-4 sm:p-6 shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-100 group",children:[(0,Ge.jsx)("div",{className:"flex items-start justify-between mb-3 sm:mb-4",children:(0,Ge.jsx)("div",{className:"p-2 sm:p-3 bg-green-100 rounded-xl group-hover:scale-110 transition-transform duration-300",children:(0,Ge.jsx)(uu,{size:20,className:"sm:w-6 sm:h-6 text-green-600"})})}),(0,Ge.jsx)("p",{className:"text-lg sm:text-xl font-bold text-gray-900",children:Yu(l.totalAmount)}),(0,Ge.jsx)("p",{className:"text-xs sm:text-sm text-gray-600 mt-1",children:"Pr\xeats total"})]}),(0,Ge.jsxs)("div",{className:"bg-white rounded-2xl p-4 sm:p-6 shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-100 group",children:[(0,Ge.jsx)("div",{className:"flex items-start justify-between mb-3 sm:mb-4",children:(0,Ge.jsx)("div",{className:"p-2 sm:p-3 bg-yellow-100 rounded-xl group-hover:scale-110 transition-transform duration-300",children:(0,Ge.jsx)(Wd,{size:20,className:"sm:w-6 sm:h-6 text-yellow-600"})})}),(0,Ge.jsx)("p",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:l.pendingRequests}),(0,Ge.jsx)("p",{className:"text-xs sm:text-sm text-gray-600 mt-1",children:"En attente"})]})]}),(0,Ge.jsxs)("div",{className:"mb-8",children:[(0,Ge.jsx)("h2",{className:"text-xl font-bold text-gray-900 font-montserrat mb-4",children:"Actions rapides"}),(0,Ge.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:f.map((e,t)=>(0,Ge.jsxs)("button",{onClick:()=>n(e.path),className:"group relative bg-white rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-100 overflow-hidden text-left",children:[(0,Ge.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br ".concat(e.color," opacity-0 group-hover:opacity-5 transition-opacity duration-300")}),(0,Ge.jsxs)("div",{className:"relative",children:[(0,Ge.jsx)("div",{className:"inline-flex p-3 rounded-xl ".concat(e.iconBg," mb-4 group-hover:scale-110 transition-transform duration-300"),children:(0,Ge.jsx)(e.icon,{size:24,className:e.iconColor})}),e.badge&&(0,Ge.jsx)("span",{className:"absolute top-0 right-0 px-2 py-1 bg-red-500 text-white text-[10px] font-bold rounded-full",children:e.badge}),(0,Ge.jsx)("h3",{className:"text-lg font-bold text-gray-900 font-montserrat mb-2",children:e.title}),(0,Ge.jsx)("p",{className:"text-sm text-gray-600 font-montserrat mb-4",children:e.description}),(0,Ge.jsxs)("div",{className:"flex items-center text-primary-600 font-semibold font-montserrat group-hover:translate-x-2 transition-transform duration-300",children:[(0,Ge.jsx)("span",{className:"text-sm",children:"Acc\xe9der"}),(0,Ge.jsx)(Fn,{size:16,className:"ml-2"})]})]})]},t))})]}),(0,Ge.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden",children:[(0,Ge.jsx)("div",{className:"p-4 sm:p-6 border-b border-gray-100",children:(0,Ge.jsx)("h2",{className:"text-xl font-bold text-gray-900 font-montserrat",children:"Activit\xe9s r\xe9centes"})}),(0,Ge.jsx)("div",{className:"divide-y divide-gray-100",children:0===d.length?(0,Ge.jsxs)("div",{className:"p-8 sm:p-12 text-center",children:[(0,Ge.jsx)(hh,{size:48,className:"mx-auto text-gray-300 mb-4"}),(0,Ge.jsx)("p",{className:"text-gray-500 font-medium",children:"Aucune activit\xe9 r\xe9cente"})]}):d.map((e,t)=>{var s,r;return(0,Ge.jsx)("div",{className:"p-4 sm:p-6 hover:bg-gray-50 transition-colors cursor-pointer",onClick:()=>{"loan"===e.type&&n("/admin/loan-requests"),"savings"===e.type&&n("/admin/ab-epargne")},children:(0,Ge.jsxs)("div",{className:"flex items-start gap-3 sm:gap-4",children:[(0,Ge.jsx)("div",{className:"flex-shrink-0 w-10 h-10 bg-gray-100 rounded-full flex items-center justify-center",children:m(e)}),(0,Ge.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Ge.jsxs)("div",{className:"flex items-start justify-between gap-2 mb-1",children:[(0,Ge.jsx)("p",{className:"text-sm sm:text-base font-semibold text-gray-900 truncate",children:"loan"===e.type?"".concat(null===(s=e.user)||void 0===s?void 0:s.firstName," ").concat(null===(r=e.user)||void 0===r?void 0:r.lastName):e.description}),p(e)]}),(0,Ge.jsx)("p",{className:"text-xs sm:text-sm text-gray-600 mb-2",children:"loan"===e.type?e.description:"".concat(Yu(e.amount)," / ").concat(Yu(e.target))}),(0,Ge.jsxs)("div",{className:"flex items-center gap-3 text-xs text-gray-500",children:[(0,Ge.jsx)("span",{className:"font-bold text-gray-900",children:Yu(e.amount)}),(0,Ge.jsx)("span",{children:"\u2022"}),(0,Ge.jsx)("span",{children:new Date(e.date).toLocaleDateString("fr-FR")})]})]}),(0,Ge.jsx)(Fn,{size:16,className:"flex-shrink-0 text-gray-400 group-hover:text-gray-600 transition-colors"})]})},t)})})]})]})]})},wh=Xe("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),Nh=Xe("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),kh=Xe("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),Sh=Xe("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),Eh=Xe("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]),_h=Xe("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]),Ch=()=>{var e,n;Y();const{showSuccess:s,showError:r}=it(),[a,i]=(0,t.useState)([]),[o,l]=(0,t.useState)(!0),[c,d]=(0,t.useState)(null),[u,h]=(0,t.useState)(""),[m,p]=(0,t.useState)("all"),[f,x]=(0,t.useState)(null),[g,v]=(0,t.useState)({totalRequests:0,pending:0,active:0,completed:0,totalAmount:0});(0,t.useEffect)(()=>{y()},[]);const y=async()=>{try{l(!0),d(null),console.log("[ADMIN_LOANS] \ud83d\udce5 Chargement des demandes de pr\xeats...");const[e,t]=await Promise.all([qe(),We()]);if(e.success&&t.success){const n=e.data||[],s=t.data||[];console.log("[ADMIN_LOANS] \u2705 Pr\xeats charg\xe9s:",n.length),console.log("[ADMIN_LOANS] \u2705 Paiements charg\xe9s:",s.length);const r=n.map(e=>{var t,n,r,a;const i=s.filter(t=>t.loan_id===e.id).reduce((e,t)=>e+(t.amount||0),0),o=e.amount?e.amount*(1+(e.interest_rate||0)/100):0,l=o-i,c=new Date(e.created_at||new Date),d=e.duration_months||30,u=new Date(c.getTime()+24*d*60*60*1e3);return{id:e.id,userId:e.user_id,user:{id:e.user_id,firstName:(null===(t=e.users)||void 0===t?void 0:t.first_name)||"Utilisateur",lastName:(null===(n=e.users)||void 0===n?void 0:n.last_name)||"Inconnu",email:(null===(r=e.users)||void 0===r?void 0:r.email)||"email@inconnu.com",phone:(null===(a=e.users)||void 0===a?void 0:a.phone_number)||"Non sp\xe9cifi\xe9"},amount:e.amount||0,totalAmount:Math.round(o),paidAmount:Math.round(i),remainingAmount:Math.round(l),duration:e.duration_months||0,purpose:e.purpose||"Non sp\xe9cifi\xe9",status:e.status||"pending",requestDate:e.created_at||(new Date).toISOString(),dueDate:u.toISOString(),guarantee:e.guarantee||"Non sp\xe9cifi\xe9e",employment_status:e.employment_status||"Non sp\xe9cifi\xe9",momoNumber:e.momo_number||"Non sp\xe9cifi\xe9",momoNetwork:e.momo_network||"Non sp\xe9cifi\xe9",interest_rate:e.interest_rate||0}});i(r);const a=r.filter(e=>"pending"===e.status).length,o=r.filter(e=>"active"===e.status||"approved"===e.status).length,l=r.filter(e=>"completed"===e.status).length,c=r.reduce((e,t)=>e+t.amount,0);v({totalRequests:r.length,pending:a,active:o,completed:l,totalAmount:c})}else console.error("[ADMIN_LOANS] \u274c Erreur:",{loans:e.error,payments:t.error}),d("Erreur lors du chargement des demandes")}catch(c){console.error("[ADMIN_LOANS] \u274c Erreur:",c),d(c.message||"Une erreur est survenue")}finally{l(!1)}},b=a.reduce((e,t)=>{const n=t.userId;return e[n]||(e[n]={user:t.user,loans:[],stats:{newRequests:0,activeLoans:0,completedLoans:0,totalBorrowed:0,totalPaid:0}}),e[n].loans.push(t),"pending"===t.status&&e[n].stats.newRequests++,"active"!==t.status&&"approved"!==t.status||e[n].stats.activeLoans++,"completed"===t.status&&e[n].stats.completedLoans++,e[n].stats.totalBorrowed+=t.amount,e[n].stats.totalPaid+=t.paidAmount,e},{}),j=Object.values(b).filter(e=>{const t=!u||((t,n,s,r)=>{const a=u.toLowerCase();return(null===(t=e.user.firstName)||void 0===t?void 0:t.toLowerCase().includes(a))||(null===(n=e.user.lastName)||void 0===n?void 0:n.toLowerCase().includes(a))||(null===(s=e.user.email)||void 0===s?void 0:s.toLowerCase().includes(a))||(null===(r=e.user.phone)||void 0===r?void 0:r.includes(a))})(),n="all"===m||("pending"===m?e.stats.newRequests>0:"active"===m?e.stats.activeLoans>0:"completed"!==m||e.stats.completedLoans>0&&0===e.stats.newRequests&&0===e.stats.activeLoans);return t&&n}),w=e=>e.newRequests>0?(0,Ge.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 sm:px-3 py-1 rounded-full text-[10px] sm:text-xs font-semibold bg-yellow-100 text-yellow-700 whitespace-nowrap",children:[(0,Ge.jsx)(Wd,{size:12,className:"sm:w-3.5 sm:h-3.5 flex-shrink-0"}),(0,Ge.jsxs)("span",{className:"hidden sm:inline",children:[e.newRequests," Nouvelle",e.newRequests>1?"s":""," demande",e.newRequests>1?"s":""]}),(0,Ge.jsxs)("span",{className:"sm:hidden",children:[e.newRequests," Nouv."]})]}):e.activeLoans>0?(0,Ge.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 sm:px-3 py-1 rounded-full text-[10px] sm:text-xs font-semibold bg-blue-100 text-blue-700 whitespace-nowrap",children:[(0,Ge.jsx)(hh,{size:12,className:"sm:w-3.5 sm:h-3.5 flex-shrink-0"}),(0,Ge.jsxs)("span",{className:"hidden sm:inline",children:[e.activeLoans," Pr\xeat",e.activeLoans>1?"s":""," en cours"]}),(0,Ge.jsxs)("span",{className:"sm:hidden",children:[e.activeLoans," Actif",e.activeLoans>1?"s":""]})]}):e.completedLoans>0?(0,Ge.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 sm:px-3 py-1 rounded-full text-[10px] sm:text-xs font-semibold bg-green-100 text-green-700 whitespace-nowrap",children:[(0,Ge.jsx)(et,{size:12,className:"sm:w-3.5 sm:h-3.5 flex-shrink-0"}),(0,Ge.jsxs)("span",{className:"hidden sm:inline",children:[e.completedLoans," Pr\xeat",e.completedLoans>1?"s":""," rembours\xe9",e.completedLoans>1?"s":""]}),(0,Ge.jsxs)("span",{className:"sm:hidden",children:[e.completedLoans," OK"]})]}):null;return o?(0,Ge.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 flex items-center justify-center",children:(0,Ge.jsxs)("div",{className:"text-center",children:[(0,Ge.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-blue-500 border-t-transparent mx-auto mb-4"}),(0,Ge.jsx)("p",{className:"text-gray-600 font-medium",children:"Chargement des demandes..."})]})}):c?(0,Ge.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 flex items-center justify-center p-4",children:(0,Ge.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8 max-w-md w-full text-center",children:[(0,Ge.jsx)("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,Ge.jsx)(wh,{size:32,className:"text-red-600"})}),(0,Ge.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Erreur de chargement"}),(0,Ge.jsx)("p",{className:"text-gray-600 mb-6",children:c}),(0,Ge.jsxs)("button",{onClick:y,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl transition-colors",children:[(0,Ge.jsx)(mh,{size:18}),"R\xe9essayer"]})]})}):(0,Ge.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 pb-24",children:[(0,Ge.jsx)("div",{className:"bg-white/80 backdrop-blur-lg shadow-lg border-b border-white/50 sticky top-0 z-30",children:(0,Ge.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:(0,Ge.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Ge.jsxs)("div",{className:"flex items-center gap-4",children:[(0,Ge.jsx)("div",{className:"p-3 bg-gradient-to-br from-blue-500 to-purple-600 rounded-2xl shadow-lg",children:(0,Ge.jsx)(au,{size:32,className:"text-white"})}),(0,Ge.jsxs)("div",{children:[(0,Ge.jsx)("h1",{className:"text-3xl font-bold text-gray-900 font-montserrat",children:"AB Pret"}),(0,Ge.jsx)("p",{className:"text-gray-600 font-montserrat",children:"Gestion des demandes de pr\xeats"})]})]}),(0,Ge.jsxs)("button",{onClick:y,className:"flex items-center gap-2 px-4 py-2 bg-white hover:bg-gray-50 border border-gray-200 rounded-xl transition-all duration-200 shadow-sm hover:shadow",children:[(0,Ge.jsx)(mh,{size:18,className:"text-gray-600"}),(0,Ge.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Actualiser"})]})]})})}),(0,Ge.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,Ge.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[(0,Ge.jsxs)("div",{className:"bg-white rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-100 group",children:[(0,Ge.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,Ge.jsx)("div",{className:"p-3 bg-yellow-100 rounded-xl group-hover:scale-110 transition-transform duration-300",children:(0,Ge.jsx)(Wd,{size:24,className:"text-yellow-600"})}),(0,Ge.jsxs)("div",{className:"text-right",children:[(0,Ge.jsx)("p",{className:"text-sm text-gray-600 font-medium",children:"En attente"}),(0,Ge.jsx)("p",{className:"text-3xl font-bold text-gray-900 mt-1",children:g.pending})]})]}),(0,Ge.jsx)("div",{className:"pt-4 border-t border-gray-100",children:(0,Ge.jsx)("span",{className:"text-xs text-gray-500",children:"Nouvelles demandes"})})]}),(0,Ge.jsxs)("div",{className:"bg-gradient-to-br from-blue-500 to-purple-600 rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 text-white group",children:[(0,Ge.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,Ge.jsx)("div",{className:"p-3 bg-white/20 rounded-xl group-hover:scale-110 transition-transform duration-300",children:(0,Ge.jsx)(hh,{size:24,className:"text-white"})}),(0,Ge.jsxs)("div",{className:"text-right",children:[(0,Ge.jsx)("p",{className:"text-sm text-blue-100 font-medium",children:"Pr\xeats actifs"}),(0,Ge.jsx)("p",{className:"text-3xl font-bold mt-1",children:g.active})]})]}),(0,Ge.jsxs)("div",{className:"flex items-center gap-2 pt-4 border-t border-white/20",children:[(0,Ge.jsx)(yh,{size:16,className:"text-blue-200"}),(0,Ge.jsx)("span",{className:"text-sm text-blue-100",children:"En cours de remboursement"})]})]}),(0,Ge.jsxs)("div",{className:"bg-white rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-100 group",children:[(0,Ge.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,Ge.jsx)("div",{className:"p-3 bg-green-100 rounded-xl group-hover:scale-110 transition-transform duration-300",children:(0,Ge.jsx)(et,{size:24,className:"text-green-600"})}),(0,Ge.jsxs)("div",{className:"text-right",children:[(0,Ge.jsx)("p",{className:"text-sm text-gray-600 font-medium",children:"Rembours\xe9s"}),(0,Ge.jsx)("p",{className:"text-3xl font-bold text-gray-900 mt-1",children:g.completed})]})]}),(0,Ge.jsx)("div",{className:"pt-4 border-t border-gray-100",children:(0,Ge.jsx)("span",{className:"text-xs text-gray-500",children:"Pr\xeats termin\xe9s"})})]}),(0,Ge.jsxs)("div",{className:"bg-white rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-100 group",children:[(0,Ge.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,Ge.jsx)("div",{className:"p-3 bg-purple-100 rounded-xl group-hover:scale-110 transition-transform duration-300",children:(0,Ge.jsx)(uu,{size:24,className:"text-purple-600"})}),(0,Ge.jsxs)("div",{className:"text-right",children:[(0,Ge.jsx)("p",{className:"text-sm text-gray-600 font-medium",children:"Montant total"}),(0,Ge.jsx)("p",{className:"text-xl font-bold text-gray-900 mt-1",children:Yu(g.totalAmount)})]})]}),(0,Ge.jsx)("div",{className:"pt-4 border-t border-gray-100",children:(0,Ge.jsx)("span",{className:"text-xs text-gray-500",children:"Tous les pr\xeats"})})]})]}),(0,Ge.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 p-4 mb-6",children:[(0,Ge.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,Ge.jsxs)("div",{className:"flex-1 relative",children:[(0,Ge.jsx)(Nh,{size:20,className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,Ge.jsx)("input",{type:"text",placeholder:"Rechercher par nom, email ou t\xe9l\xe9phone...",value:u,onChange:e=>h(e.target.value),className:"w-full pl-12 pr-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent font-montserrat"})]}),(0,Ge.jsxs)("div",{className:"flex items-center gap-2 sm:min-w-[250px]",children:[(0,Ge.jsx)(kh,{size:20,className:"text-gray-400 flex-shrink-0"}),(0,Ge.jsxs)("select",{value:m,onChange:e=>p(e.target.value),className:"flex-1 px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent font-montserrat bg-white cursor-pointer",children:[(0,Ge.jsx)("option",{value:"all",children:"Tous les statuts"}),(0,Ge.jsx)("option",{value:"pending",children:"\ud83d\udfe1 Demandes en attente"}),(0,Ge.jsx)("option",{value:"active",children:"\ud83d\udd35 Pr\xeats en cours"}),(0,Ge.jsx)("option",{value:"completed",children:"\ud83d\udfe2 Pr\xeats rembours\xe9s"})]})]})]}),(u||"all"!==m)&&(0,Ge.jsxs)("div",{className:"flex items-center gap-2 mt-3 pt-3 border-t border-gray-100",children:[(0,Ge.jsx)("span",{className:"text-sm text-gray-600",children:"Filtres actifs:"}),u&&(0,Ge.jsxs)("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-xs font-medium",children:['Recherche: "',u,'"',(0,Ge.jsx)("button",{onClick:()=>h(""),className:"hover:bg-blue-200 rounded-full p-0.5 transition-colors",children:(0,Ge.jsx)(st,{size:12})})]}),"all"!==m&&(0,Ge.jsxs)("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-purple-100 text-purple-700 rounded-full text-xs font-medium",children:["Statut: ","pending"===m?"En attente":"active"===m?"En cours":"Rembours\xe9s",(0,Ge.jsx)("button",{onClick:()=>p("all"),className:"hover:bg-purple-200 rounded-full p-0.5 transition-colors",children:(0,Ge.jsx)(st,{size:12})})]}),(0,Ge.jsx)("button",{onClick:()=>{h(""),p("all")},className:"ml-auto text-xs text-gray-500 hover:text-gray-700 font-medium",children:"R\xe9initialiser tout"})]})]}),(0,Ge.jsxs)("div",{className:"space-y-4",children:[(0,Ge.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,Ge.jsxs)("h2",{className:"text-xl font-bold text-gray-900 font-montserrat",children:["Clients (",j.length,")"]})}),0===j.length?(0,Ge.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 p-12 text-center",children:[(0,Ge.jsx)(Dn,{size:64,className:"mx-auto text-gray-300 mb-4"}),(0,Ge.jsx)("p",{className:"text-gray-500 font-medium",children:"Aucun client trouv\xe9"}),u&&(0,Ge.jsx)("button",{onClick:()=>h(""),className:"mt-4 text-blue-600 hover:text-blue-700 font-medium",children:"Effacer la recherche"})]}):(0,Ge.jsx)("div",{className:"grid grid-cols-1 gap-4",children:j.map(e=>{var t,n;return(0,Ge.jsx)("div",{className:"bg-white rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-100 overflow-hidden group cursor-pointer",onClick:()=>x(e),children:(0,Ge.jsxs)("div",{className:"p-4 sm:p-6",children:[(0,Ge.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-3 mb-4",children:[(0,Ge.jsxs)("div",{className:"flex items-start gap-3 min-w-0 flex-1",children:[(0,Ge.jsxs)("div",{className:"w-12 h-12 sm:w-14 sm:h-14 bg-gradient-to-br from-blue-400 to-purple-500 rounded-full flex items-center justify-center text-white font-bold text-lg sm:text-xl shadow-lg flex-shrink-0",children:[(null===(t=e.user.firstName)||void 0===t?void 0:t[0])||"?",(null===(n=e.user.lastName)||void 0===n?void 0:n[0])||""]}),(0,Ge.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,Ge.jsxs)("h3",{className:"text-base sm:text-lg font-bold text-gray-900 font-montserrat truncate",children:[e.user.firstName," ",e.user.lastName]}),(0,Ge.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-3 mt-1",children:[(0,Ge.jsxs)("div",{className:"flex items-center gap-1 text-xs sm:text-sm text-gray-500 min-w-0",children:[(0,Ge.jsx)(Ru,{size:12,className:"flex-shrink-0"}),(0,Ge.jsx)("span",{className:"truncate",children:e.user.email})]}),e.user.phone&&(0,Ge.jsxs)("div",{className:"flex items-center gap-1 text-xs sm:text-sm text-gray-500",children:[(0,Ge.jsx)(Iu,{size:12,className:"flex-shrink-0"}),(0,Ge.jsx)("span",{children:e.user.phone})]})]})]})]}),(0,Ge.jsx)("div",{className:"flex-shrink-0",children:w(e.stats)})]}),(0,Ge.jsxs)("div",{className:"grid grid-cols-3 gap-2 sm:gap-4 mb-4",children:[(0,Ge.jsxs)("div",{className:"bg-yellow-50 rounded-xl p-2 sm:p-3 text-center",children:[(0,Ge.jsx)("p",{className:"text-xl sm:text-2xl font-bold text-yellow-700",children:e.stats.newRequests}),(0,Ge.jsx)("p",{className:"text-[10px] sm:text-xs text-gray-600 mt-1",children:"Nouvelles"})]}),(0,Ge.jsxs)("div",{className:"bg-blue-50 rounded-xl p-2 sm:p-3 text-center",children:[(0,Ge.jsx)("p",{className:"text-xl sm:text-2xl font-bold text-blue-700",children:e.stats.activeLoans}),(0,Ge.jsx)("p",{className:"text-[10px] sm:text-xs text-gray-600 mt-1",children:"En cours"})]}),(0,Ge.jsxs)("div",{className:"bg-green-50 rounded-xl p-2 sm:p-3 text-center",children:[(0,Ge.jsx)("p",{className:"text-xl sm:text-2xl font-bold text-green-700",children:e.stats.completedLoans}),(0,Ge.jsx)("p",{className:"text-[10px] sm:text-xs text-gray-600 mt-1",children:"Rembours\xe9s"})]})]}),(0,Ge.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 pt-4 border-t border-gray-100",children:[(0,Ge.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-4 text-xs sm:text-sm text-gray-600",children:[(0,Ge.jsxs)("span",{className:"truncate",children:["Total emprunt\xe9: ",(0,Ge.jsx)("span",{className:"font-bold text-gray-900",children:Yu(e.stats.totalBorrowed)})]}),(0,Ge.jsxs)("span",{className:"truncate",children:["Total pay\xe9: ",(0,Ge.jsx)("span",{className:"font-bold text-green-600",children:Yu(e.stats.totalPaid)})]})]}),(0,Ge.jsxs)("button",{className:"flex items-center justify-center gap-2 px-3 sm:px-4 py-2 bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white rounded-xl transition-all duration-200 shadow-md hover:shadow-lg w-full sm:w-auto",children:[(0,Ge.jsx)(zu,{size:16}),(0,Ge.jsx)("span",{className:"text-sm font-medium",children:"Voir le profil"})]})]})]})},e.user.id)})})]})]}),f&&(0,Ge.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4 overflow-y-auto",children:(0,Ge.jsxs)("div",{className:"bg-white rounded-3xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto my-8",children:[(0,Ge.jsx)("div",{className:"sticky top-0 bg-gradient-to-r from-blue-500 to-purple-600 text-white p-6 rounded-t-3xl z-10",children:(0,Ge.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Ge.jsxs)("div",{className:"flex items-center gap-4",children:[(0,Ge.jsxs)("div",{className:"w-16 h-16 bg-white/20 rounded-full flex items-center justify-center text-white font-bold text-2xl",children:[null===(e=f.user.firstName)||void 0===e?void 0:e[0],null===(n=f.user.lastName)||void 0===n?void 0:n[0]]}),(0,Ge.jsxs)("div",{children:[(0,Ge.jsxs)("h3",{className:"text-2xl font-bold",children:[f.user.firstName," ",f.user.lastName]}),(0,Ge.jsxs)("p",{className:"text-blue-100",children:[f.loans.length," demande",f.loans.length>1?"s":""," de pr\xeat"]})]})]}),(0,Ge.jsx)("button",{onClick:()=>x(null),className:"p-2 hover:bg-white/20 rounded-full transition-colors",children:(0,Ge.jsx)(st,{size:24})})]})}),(0,Ge.jsxs)("div",{className:"p-6 space-y-6",children:[(0,Ge.jsxs)("div",{className:"bg-gray-50 rounded-2xl p-4",children:[(0,Ge.jsxs)("h4",{className:"font-bold text-gray-900 mb-3 flex items-center gap-2",children:[(0,Ge.jsx)(Dn,{size:18}),"Informations de contact"]}),(0,Ge.jsxs)("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[(0,Ge.jsxs)("div",{children:[(0,Ge.jsx)("p",{className:"text-gray-600",children:"Email"}),(0,Ge.jsx)("p",{className:"font-medium",children:f.user.email})]}),(0,Ge.jsxs)("div",{children:[(0,Ge.jsx)("p",{className:"text-gray-600",children:"T\xe9l\xe9phone"}),(0,Ge.jsx)("p",{className:"font-medium",children:f.user.phone})]})]})]}),(0,Ge.jsxs)("div",{children:[(0,Ge.jsxs)("h4",{className:"font-bold text-gray-900 mb-4 flex items-center gap-2",children:[(0,Ge.jsx)(cu,{size:18}),"Historique des pr\xeats"]}),(0,Ge.jsx)("div",{className:"space-y-3",children:f.loans.map(e=>(0,Ge.jsxs)("div",{className:"bg-gray-50 rounded-xl p-4 border-l-4 border-blue-500",children:[(0,Ge.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,Ge.jsxs)("div",{children:[(0,Ge.jsx)("p",{className:"font-bold text-gray-900",children:Yu(e.amount)}),(0,Ge.jsx)("p",{className:"text-sm text-gray-600",children:e.purpose})]}),(0,Ge.jsxs)("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-semibold ".concat("pending"===e.status?"bg-yellow-100 text-yellow-700":"active"===e.status||"approved"===e.status?"bg-blue-100 text-blue-700":"completed"===e.status?"bg-green-100 text-green-700":"bg-red-100 text-red-700"),children:["pending"===e.status&&(0,Ge.jsx)(Wd,{size:14}),("active"===e.status||"approved"===e.status)&&(0,Ge.jsx)(hh,{size:14}),"completed"===e.status&&(0,Ge.jsx)(et,{size:14}),"rejected"===e.status&&(0,Ge.jsx)(Sh,{size:14}),"pending"===e.status?"En attente":"active"===e.status||"approved"===e.status?"En cours":"completed"===e.status?"Rembours\xe9":"Rejet\xe9"]})]}),(0,Ge.jsxs)("div",{className:"grid grid-cols-3 gap-3 text-xs mb-3",children:[(0,Ge.jsxs)("div",{children:[(0,Ge.jsx)("p",{className:"text-gray-600",children:"Dur\xe9e"}),(0,Ge.jsxs)("p",{className:"font-medium",children:[e.duration," jours"]})]}),(0,Ge.jsxs)("div",{children:[(0,Ge.jsx)("p",{className:"text-gray-600",children:"Pay\xe9"}),(0,Ge.jsx)("p",{className:"font-medium text-green-600",children:Yu(e.paidAmount)})]}),(0,Ge.jsxs)("div",{children:[(0,Ge.jsx)("p",{className:"text-gray-600",children:"Restant"}),(0,Ge.jsx)("p",{className:"font-medium text-orange-600",children:Yu(e.remainingAmount)})]})]}),"pending"===e.status&&(0,Ge.jsxs)("div",{className:"flex gap-2 pt-3 border-t border-gray-200",children:[(0,Ge.jsxs)("button",{onClick:t=>{t.stopPropagation(),(async e=>{try{(await He(e,"approved")).success?(i(t=>t.map(t=>t.id===e?De(De({},t),{},{status:"approved"}):t)),s("Demande approuv\xe9e avec succ\xe8s"),y()):r("Erreur lors de l'approbation")}catch(c){console.error("[ADMIN_LOANS] Erreur approbation:",c),r("Erreur lors de l'approbation")}})(e.id)},className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors text-sm",children:[(0,Ge.jsx)(Eh,{size:16}),"Approuver"]}),(0,Ge.jsxs)("button",{onClick:t=>{t.stopPropagation(),(async e=>{try{(await He(e,"rejected")).success?(i(t=>t.map(t=>t.id===e?De(De({},t),{},{status:"rejected"}):t)),s("Demande rejet\xe9e"),y()):r("Erreur lors du rejet")}catch(c){console.error("[ADMIN_LOANS] Erreur rejet:",c),r("Erreur lors du rejet")}})(e.id)},className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors text-sm",children:[(0,Ge.jsx)(_h,{size:16}),"Refuser"]})]})]},e.id))})]})]})]})})]})},Ph=Xe("FileImage",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["circle",{cx:"10",cy:"13",r:"2",key:"6v46hv"}],["path",{d:"m20 17-1.09-1.09a2 2 0 0 0-2.82 0L10 22",key:"17vly1"}]]),Th=["children","className","title"],Ah=e=>{let{children:t,className:n="",title:s}=e,r=$e(e,Th);return(0,Ge.jsxs)("div",De(De({className:"bg-white rounded-xl shadow-soft border border-accent-200 ".concat(n)},r),{},{children:[s&&(0,Ge.jsx)("div",{className:"px-6 py-4 border-b border-accent-200",children:(0,Ge.jsx)("h3",{className:"text-lg font-semibold text-secondary-900 font-montserrat",children:s})}),(0,Ge.jsx)("div",{className:"p-6",children:t})]}))},Ih=()=>{const e=Y(),{showSuccess:n,showError:s}=it(),[r,a]=(0,t.useState)([]),[i,o]=(0,t.useState)(!0),[l,c]=(0,t.useState)(""),[d,u]=(0,t.useState)("all"),[h,m]=(0,t.useState)(null),[p,f]=(0,t.useState)(!1),[x,g]=(0,t.useState)(!1),[v,y]=(0,t.useState)({url:"",title:""});(0,t.useEffect)(()=>{b()},[]);const b=async()=>{try{o(!0);const e=await Be();if(e.success){const t=e.data.map(e=>({id:e.id,firstName:e.first_name||"Utilisateur",lastName:e.last_name||"Inconnu",email:e.email||"email@inconnu.com",phone:e.phone_number||"Non renseign\xe9",status:e.status||"pending",registrationDate:e.created_at||(new Date).toISOString(),totalLoans:e.totalLoans||0,activeLoans:e.activeLoans||0,totalAmount:e.totalAmount||0,verified:"approved"===e.status,filiere:e.filiere||"Non sp\xe9cifi\xe9e",anneeEtude:e.annee_etude||"Non sp\xe9cifi\xe9e",entite:e.entite||"Non sp\xe9cifi\xe9e",address:e.address||"Non sp\xe9cifi\xe9e",facebookName:e.facebook_name||"Non sp\xe9cifi\xe9",temoinName:e.temoin_name||"Non sp\xe9cifi\xe9",temoinQuartier:e.temoin_quartier||"Non sp\xe9cifi\xe9",temoinPhone:e.temoin_phone||"Non sp\xe9cifi\xe9",temoinEmail:e.temoin_email||"Non sp\xe9cifi\xe9",emergencyName:e.emergency_name||"Non sp\xe9cifi\xe9",emergencyRelation:e.emergency_relation||"Non sp\xe9cifi\xe9",emergencyPhone:e.emergency_phone||"Non sp\xe9cifi\xe9",emergencyEmail:e.emergency_email||"Non sp\xe9cifi\xe9",emergencyAddress:e.emergency_address||"Non sp\xe9cifi\xe9",userIdentityCard:e.user_identity_card_name||"Non sp\xe9cifi\xe9",temoinIdentityCard:e.temoin_identity_card_name||"Non sp\xe9cifi\xe9",studentCard:e.student_card_name||"Non sp\xe9cifi\xe9",userIdentityCardUrl:e.user_identity_card_url||null,temoinIdentityCardUrl:e.temoin_identity_card_url||null,studentCardUrl:e.student_card_url||null}));a(t)}else console.error("[ADMIN] Erreur lors du chargement des utilisateurs:",e.error),s("Erreur lors du chargement des utilisateurs")}catch(e){console.error("[ADMIN] Erreur lors du chargement des utilisateurs:",e.message),s("Erreur lors du chargement des utilisateurs")}finally{o(!1)}},j=async e=>{try{(await Ve(e,"approved")).success?(a(t=>t.map(t=>t.id===e?De(De({},t),{},{status:"approved",verified:!0}):t)),n("Utilisateur approuv\xe9 avec succ\xe8s")):s("Erreur lors de l'approbation")}catch(t){console.error("[ADMIN] Erreur lors de l'approbation:",t.message),s("Erreur lors de l'approbation")}},w=async e=>{try{(await Ve(e,"rejected")).success?(a(t=>t.map(t=>t.id===e?De(De({},t),{},{status:"rejected",verified:!1}):t)),n("Utilisateur rejet\xe9")):s("Erreur lors du rejet")}catch(t){console.error("[ADMIN] Erreur lors du rejet:",t.message),s("Erreur lors du rejet")}},N=()=>{f(!1),m(null)},k=(e,t)=>{e&&(y({url:e,title:t}),g(!0))},S=()=>{g(!1),y({url:"",title:""})},E=e=>{switch(e){case"approved":return"bg-green-100 text-green-700";case"pending":return"bg-yellow-100 text-yellow-700";case"rejected":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},_=e=>{switch(e){case"approved":return(0,Ge.jsx)(et,{size:16});case"pending":default:return(0,Ge.jsx)(Wd,{size:16});case"rejected":return(0,Ge.jsx)(Sh,{size:16})}},C=e=>{switch(e){case"approved":return"Approuv\xe9";case"pending":return"En attente";case"rejected":return"Rejet\xe9";default:return"Inconnu"}},P=r.filter(e=>{const t=e.firstName.toLowerCase().includes(l.toLowerCase())||e.lastName.toLowerCase().includes(l.toLowerCase())||e.email.toLowerCase().includes(l.toLowerCase()),n="all"===d||e.status===d;return console.log("[USER_MANAGEMENT] Filtrage:",{userId:e.id,firstName:e.firstName,lastName:e.lastName,status:e.status,statusFilter:d,matchesSearch:t,matchesStatus:n,finalResult:t&&n}),t&&n});return(0,Ge.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-primary-50 via-accent-50 to-secondary-50",children:[(0,Ge.jsx)("div",{className:"bg-white/80 backdrop-blur-sm border-b border-accent-200",children:(0,Ge.jsx)("div",{className:"max-w-7xl mx-auto px-4 py-4",children:(0,Ge.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Ge.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,Ge.jsx)("button",{onClick:()=>e("/admin"),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,Ge.jsx)(Qu,{size:20})}),(0,Ge.jsxs)("div",{children:[(0,Ge.jsx)("h1",{className:"text-2xl font-bold text-gray-900 font-montserrat",children:"Gestion des Utilisateurs"}),(0,Ge.jsxs)("p",{className:"text-sm text-gray-600",children:[P.length," utilisateur",P.length>1?"s":""," trouv\xe9",P.length>1?"s":""]})]})]}),(0,Ge.jsxs)("button",{onClick:b,disabled:i,className:"flex items-center space-x-2 px-4 py-2 bg-primary-500 text-white rounded-lg hover:bg-primary-600 transition-colors",children:[(0,Ge.jsx)(mh,{size:16,className:i?"animate-spin":""}),(0,Ge.jsx)("span",{children:"Actualiser"})]})]})})}),(0,Ge.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-6",children:[(0,Ge.jsx)(Ah,{className:"bg-white/90 backdrop-blur-sm mb-6",children:(0,Ge.jsx)("div",{className:"p-6",children:(0,Ge.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,Ge.jsxs)("div",{className:"flex-1 relative",children:[(0,Ge.jsx)(Nh,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),(0,Ge.jsx)("input",{type:"text",placeholder:"Rechercher par nom ou email...",value:l,onChange:e=>c(e.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]}),(0,Ge.jsxs)("select",{value:d,onChange:e=>u(e.target.value),className:"px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[(0,Ge.jsx)("option",{value:"all",children:"Tous les statuts"}),(0,Ge.jsx)("option",{value:"approved",children:"Approuv\xe9s"}),(0,Ge.jsx)("option",{value:"pending",children:"En attente"}),(0,Ge.jsx)("option",{value:"rejected",children:"Rejet\xe9s"})]})]})})}),(0,Ge.jsxs)("div",{className:"space-y-4",children:[P.map(e=>{return(0,Ge.jsx)("div",{className:"bg-white/90 backdrop-blur-sm rounded-xl border border-white/50 shadow-soft hover:shadow-lg transition-all duration-300",children:(0,Ge.jsxs)("div",{className:"p-6",children:[(0,Ge.jsx)("div",{className:"flex items-start justify-between",children:(0,Ge.jsxs)("div",{className:"flex-1",children:[(0,Ge.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,Ge.jsx)("div",{className:"w-12 h-12 bg-primary-100 rounded-full flex items-center justify-center",children:(0,Ge.jsx)(Dn,{size:24,className:"text-primary-600"})}),(0,Ge.jsxs)("div",{className:"flex-1",children:[(0,Ge.jsxs)("div",{className:"flex items-center space-x-3 mb-1",children:[(0,Ge.jsxs)("h3",{className:"font-semibold text-gray-900",children:[e.firstName," ",e.lastName]}),(0,Ge.jsxs)("span",{className:"px-3 py-1 rounded-full text-xs font-medium flex items-center space-x-1 ".concat(E(e.status)),children:[_(e.status),(0,Ge.jsx)("span",{children:C(e.status)})]})]}),(0,Ge.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[(0,Ge.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,Ge.jsx)(Ru,{size:14}),(0,Ge.jsx)("span",{children:e.email})]}),(0,Ge.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,Ge.jsx)(Iu,{size:14}),(0,Ge.jsx)("span",{children:e.phone})]})]})]})]}),(0,Ge.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4",children:[(0,Ge.jsxs)("div",{children:[(0,Ge.jsx)("p",{className:"text-sm text-gray-600",children:"Pr\xeats totaux"}),(0,Ge.jsx)("p",{className:"font-semibold text-gray-900",children:e.totalLoans})]}),(0,Ge.jsxs)("div",{children:[(0,Ge.jsx)("p",{className:"text-sm text-gray-600",children:"Pr\xeats actifs"}),(0,Ge.jsx)("p",{className:"font-semibold text-gray-900",children:e.activeLoans})]}),(0,Ge.jsxs)("div",{children:[(0,Ge.jsx)("p",{className:"text-sm text-gray-600",children:"Montant total"}),(0,Ge.jsx)("p",{className:"font-semibold text-gray-900",children:(n=e.totalAmount,new Intl.NumberFormat("fr-FR",{style:"currency",currency:"XOF",minimumFractionDigits:0}).format(n))})]}),(0,Ge.jsxs)("div",{children:[(0,Ge.jsx)("p",{className:"text-sm text-gray-600",children:"Inscription"}),(0,Ge.jsx)("p",{className:"font-semibold text-gray-900",children:(t=e.registrationDate,new Date(t).toLocaleDateString("fr-FR"))})]})]})]})}),(0,Ge.jsxs)("div",{className:"flex items-center space-x-3 pt-4 border-t border-gray-100",children:["pending"===e.status&&(0,Ge.jsxs)(Vu,{onClick:()=>j(e.id),className:"flex items-center space-x-2 bg-green-500 hover:bg-green-600",children:[(0,Ge.jsx)(Eh,{size:16}),(0,Ge.jsx)("span",{children:"Approuver"})]}),"approved"===e.status&&(0,Ge.jsxs)(Vu,{onClick:()=>w(e.id),variant:"outline",className:"flex items-center space-x-2 border-red-200 text-red-600 hover:bg-red-50",children:[(0,Ge.jsx)(_h,{size:16}),(0,Ge.jsx)("span",{children:"Rejeter"})]}),(0,Ge.jsxs)(Vu,{variant:"outline",className:"flex items-center space-x-2",onClick:()=>(e=>{m(e),f(!0)})(e),children:[(0,Ge.jsx)(zu,{size:16}),(0,Ge.jsx)("span",{children:"Voir d\xe9tails"})]})]})]})},e.id);var t,n}),0===P.length&&!i&&(0,Ge.jsx)(Ah,{className:"bg-white/90 backdrop-blur-sm",children:(0,Ge.jsxs)("div",{className:"p-12 text-center",children:[(0,Ge.jsx)("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,Ge.jsx)(bh,{size:24,className:"text-gray-400"})}),(0,Ge.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Aucun utilisateur trouv\xe9"}),(0,Ge.jsx)("p",{className:"text-gray-600",children:l||"all"!==d?"Aucun utilisateur ne correspond \xe0 vos crit\xe8res":"Aucun utilisateur pour le moment"})]})})]})]}),p&&h&&(0,Ge.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 z-50",onClick:N,children:(0,Ge.jsxs)("div",{className:"bg-white rounded-3xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden",onClick:e=>e.stopPropagation(),children:[(0,Ge.jsx)("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 text-white p-6",children:(0,Ge.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Ge.jsxs)("div",{children:[(0,Ge.jsx)("h2",{className:"text-2xl font-bold font-montserrat",children:"Profil Utilisateur"}),(0,Ge.jsxs)("p",{className:"text-blue-100 text-sm mt-1",children:[h.firstName," ",h.lastName]})]}),(0,Ge.jsx)("button",{onClick:N,className:"p-2 hover:bg-white/20 rounded-full transition-colors",children:(0,Ge.jsx)(st,{size:24})})]})}),(0,Ge.jsx)("div",{className:"overflow-y-auto max-h-[calc(90vh-120px)]",children:(0,Ge.jsxs)("div",{className:"p-6 space-y-6",children:[(0,Ge.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-2xl p-6 border border-blue-200",children:[(0,Ge.jsxs)("h3",{className:"text-lg font-semibold text-blue-900 font-montserrat mb-4 flex items-center",children:[(0,Ge.jsx)(Dn,{className:"w-5 h-5 mr-2"}),"Informations Personnelles"]}),(0,Ge.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Ge.jsxs)("div",{className:"space-y-3",children:[(0,Ge.jsxs)("div",{children:[(0,Ge.jsx)("p",{className:"text-sm text-blue-700 font-medium",children:"Nom complet"}),(0,Ge.jsxs)("p",{className:"text-blue-900 font-semibold text-lg",children:[h.firstName," ",h.lastName]})]}),(0,Ge.jsxs)("div",{children:[(0,Ge.jsxs)("p",{className:"text-sm text-blue-700 font-medium flex items-center",children:[(0,Ge.jsx)(Ru,{className:"w-4 h-4 mr-1"}),"Email"]}),(0,Ge.jsx)("p",{className:"text-blue-900",children:h.email})]}),(0,Ge.jsxs)("div",{children:[(0,Ge.jsxs)("p",{className:"text-sm text-blue-700 font-medium flex items-center",children:[(0,Ge.jsx)(Iu,{className:"w-4 h-4 mr-1"}),"T\xe9l\xe9phone"]}),(0,Ge.jsx)("p",{className:"text-blue-900",children:h.phone})]}),(0,Ge.jsxs)("div",{children:[(0,Ge.jsxs)("p",{className:"text-sm text-blue-700 font-medium flex items-center",children:[(0,Ge.jsx)(ru,{className:"w-4 h-4 mr-1"}),"Adresse"]}),(0,Ge.jsx)("p",{className:"text-blue-900",children:h.address})]})]}),(0,Ge.jsxs)("div",{className:"space-y-3",children:[(0,Ge.jsxs)("div",{children:[(0,Ge.jsxs)("p",{className:"text-sm text-blue-700 font-medium flex items-center",children:[(0,Ge.jsx)(Ju,{className:"w-4 h-4 mr-1"}),"Fili\xe8re"]}),(0,Ge.jsx)("p",{className:"text-blue-900",children:h.filiere})]}),(0,Ge.jsxs)("div",{children:[(0,Ge.jsx)("p",{className:"text-sm text-blue-700 font-medium",children:"Ann\xe9e d'\xe9tude"}),(0,Ge.jsx)("p",{className:"text-blue-900",children:h.anneeEtude})]}),(0,Ge.jsxs)("div",{children:[(0,Ge.jsxs)("p",{className:"text-sm text-blue-700 font-medium flex items-center",children:[(0,Ge.jsx)(Zu,{className:"w-4 h-4 mr-1"}),"Entit\xe9"]}),(0,Ge.jsx)("p",{className:"text-blue-900",children:h.entite})]}),(0,Ge.jsxs)("div",{children:[(0,Ge.jsx)("p",{className:"text-sm text-blue-700 font-medium",children:"Nom Facebook"}),(0,Ge.jsx)("p",{className:"text-blue-900",children:h.facebookName})]})]})]})]}),(0,Ge.jsxs)("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-2xl p-6 border border-green-200",children:[(0,Ge.jsxs)("h3",{className:"text-lg font-semibold text-green-900 font-montserrat mb-4 flex items-center",children:[(0,Ge.jsx)(Cu,{className:"w-5 h-5 mr-2"}),"Informations du T\xe9moin"]}),(0,Ge.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Ge.jsxs)("div",{className:"space-y-3",children:[(0,Ge.jsxs)("div",{children:[(0,Ge.jsx)("p",{className:"text-sm text-green-700 font-medium",children:"Nom du t\xe9moin"}),(0,Ge.jsx)("p",{className:"text-green-900 font-semibold",children:h.temoinName})]}),(0,Ge.jsxs)("div",{children:[(0,Ge.jsxs)("p",{className:"text-sm text-green-700 font-medium flex items-center",children:[(0,Ge.jsx)(Ku,{className:"w-4 h-4 mr-1"}),"Quartier"]}),(0,Ge.jsx)("p",{className:"text-green-900",children:h.temoinQuartier})]})]}),(0,Ge.jsxs)("div",{className:"space-y-3",children:[(0,Ge.jsxs)("div",{children:[(0,Ge.jsxs)("p",{className:"text-sm text-green-700 font-medium flex items-center",children:[(0,Ge.jsx)(Iu,{className:"w-4 h-4 mr-1"}),"T\xe9l\xe9phone"]}),(0,Ge.jsx)("p",{className:"text-green-900",children:h.temoinPhone})]}),(0,Ge.jsxs)("div",{children:[(0,Ge.jsxs)("p",{className:"text-sm text-green-700 font-medium flex items-center",children:[(0,Ge.jsx)(Ru,{className:"w-4 h-4 mr-1"}),"Email"]}),(0,Ge.jsx)("p",{className:"text-green-900",children:h.temoinEmail})]})]})]})]}),(0,Ge.jsxs)("div",{className:"bg-gradient-to-br from-red-50 to-red-100 rounded-2xl p-6 border border-red-200",children:[(0,Ge.jsxs)("h3",{className:"text-lg font-semibold text-red-900 font-montserrat mb-4 flex items-center",children:[(0,Ge.jsx)(wh,{className:"w-5 h-5 mr-2"}),"Contact d'Urgence"]}),(0,Ge.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Ge.jsxs)("div",{className:"space-y-3",children:[(0,Ge.jsxs)("div",{children:[(0,Ge.jsx)("p",{className:"text-sm text-red-700 font-medium",children:"Nom du contact"}),(0,Ge.jsx)("p",{className:"text-red-900 font-semibold",children:h.emergencyName})]}),(0,Ge.jsxs)("div",{children:[(0,Ge.jsx)("p",{className:"text-sm text-red-700 font-medium",children:"Relation"}),(0,Ge.jsx)("p",{className:"text-red-900",children:h.emergencyRelation})]}),(0,Ge.jsxs)("div",{children:[(0,Ge.jsxs)("p",{className:"text-sm text-red-700 font-medium flex items-center",children:[(0,Ge.jsx)(Iu,{className:"w-4 h-4 mr-1"}),"T\xe9l\xe9phone"]}),(0,Ge.jsx)("p",{className:"text-red-900",children:h.emergencyPhone})]})]}),(0,Ge.jsxs)("div",{className:"space-y-3",children:[(0,Ge.jsxs)("div",{children:[(0,Ge.jsxs)("p",{className:"text-sm text-red-700 font-medium flex items-center",children:[(0,Ge.jsx)(Ru,{className:"w-4 h-4 mr-1"}),"Email"]}),(0,Ge.jsx)("p",{className:"text-red-900",children:h.emergencyEmail})]}),(0,Ge.jsxs)("div",{children:[(0,Ge.jsxs)("p",{className:"text-sm text-red-700 font-medium flex items-center",children:[(0,Ge.jsx)(ru,{className:"w-4 h-4 mr-1"}),"Adresse"]}),(0,Ge.jsx)("p",{className:"text-red-900",children:h.emergencyAddress})]})]})]})]}),(0,Ge.jsxs)("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-2xl p-6 border border-purple-200",children:[(0,Ge.jsxs)("h3",{className:"text-lg font-semibold text-purple-900 font-montserrat mb-4 flex items-center",children:[(0,Ge.jsx)(Ph,{className:"w-5 h-5 mr-2"}),"Documents"]}),(0,Ge.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,Ge.jsxs)("div",{children:[(0,Ge.jsx)("p",{className:"text-sm text-purple-700 font-medium",children:"Carte d'identit\xe9"}),(0,Ge.jsxs)("button",{onClick:()=>k(h.userIdentityCardUrl,"Carte d'identit\xe9"),className:"text-purple-900 font-semibold hover:text-purple-700 transition-colors ".concat(h.userIdentityCardUrl?"cursor-pointer underline":"cursor-default"),disabled:!h.userIdentityCardUrl,children:[h.userIdentityCard,h.userIdentityCardUrl&&(0,Ge.jsx)("span",{className:"ml-2 text-xs text-purple-600",children:"(Cliquer pour voir)"})]})]}),(0,Ge.jsxs)("div",{children:[(0,Ge.jsx)("p",{className:"text-sm text-purple-700 font-medium",children:"Carte d'identit\xe9 t\xe9moin"}),(0,Ge.jsxs)("button",{onClick:()=>k(h.temoinIdentityCardUrl,"Carte d'identit\xe9 t\xe9moin"),className:"text-purple-900 font-semibold hover:text-purple-700 transition-colors ".concat(h.temoinIdentityCardUrl?"cursor-pointer underline":"cursor-default"),disabled:!h.temoinIdentityCardUrl,children:[h.temoinIdentityCard,h.temoinIdentityCardUrl&&(0,Ge.jsx)("span",{className:"ml-2 text-xs text-purple-600",children:"(Cliquer pour voir)"})]})]}),(0,Ge.jsxs)("div",{children:[(0,Ge.jsx)("p",{className:"text-sm text-purple-700 font-medium",children:"Carte d'\xe9tudiant"}),(0,Ge.jsxs)("button",{onClick:()=>k(h.studentCardUrl,"Carte d'\xe9tudiant"),className:"text-purple-900 font-semibold hover:text-purple-700 transition-colors ".concat(h.studentCardUrl?"cursor-pointer underline":"cursor-default"),disabled:!h.studentCardUrl,children:[h.studentCard,h.studentCardUrl&&(0,Ge.jsx)("span",{className:"ml-2 text-xs text-purple-600",children:"(Cliquer pour voir)"})]})]})]})]}),(0,Ge.jsxs)("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 rounded-2xl p-6 border border-orange-200",children:[(0,Ge.jsxs)("h3",{className:"text-lg font-semibold text-orange-900 font-montserrat mb-4 flex items-center",children:[(0,Ge.jsx)(au,{className:"w-5 h-5 mr-2"}),"Informations du Compte"]}),(0,Ge.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Ge.jsxs)("div",{className:"space-y-3",children:[(0,Ge.jsxs)("div",{children:[(0,Ge.jsx)("p",{className:"text-sm text-orange-700 font-medium",children:"Statut du compte"}),(0,Ge.jsxs)("span",{className:"px-3 py-1 rounded-full text-xs font-medium flex items-center justify-center space-x-1 w-fit ".concat(E(h.status)),children:[_(h.status),(0,Ge.jsx)("span",{children:C(h.status)})]})]}),(0,Ge.jsxs)("div",{children:[(0,Ge.jsx)("p",{className:"text-sm text-orange-700 font-medium",children:"Date d'inscription"}),(0,Ge.jsx)("p",{className:"text-orange-900",children:new Date(h.registrationDate).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})})]})]}),(0,Ge.jsxs)("div",{className:"space-y-3",children:[(0,Ge.jsxs)("div",{children:[(0,Ge.jsx)("p",{className:"text-sm text-orange-700 font-medium",children:"Pr\xeats totaux"}),(0,Ge.jsx)("p",{className:"text-orange-900 font-semibold text-xl",children:h.totalLoans})]}),(0,Ge.jsxs)("div",{children:[(0,Ge.jsx)("p",{className:"text-sm text-orange-700 font-medium",children:"Pr\xeats actifs"}),(0,Ge.jsx)("p",{className:"text-orange-900 font-semibold text-xl",children:h.activeLoans})]})]})]})]})]})}),(0,Ge.jsx)("div",{className:"bg-gray-50 border-t border-gray-200 p-6",children:(0,Ge.jsxs)("div",{className:"flex items-center justify-end space-x-3",children:[(0,Ge.jsxs)(Vu,{variant:"outline",onClick:N,className:"flex items-center space-x-2",children:[(0,Ge.jsx)(st,{size:16}),(0,Ge.jsx)("span",{children:"Fermer"})]}),"pending"===h.status&&(0,Ge.jsxs)(Vu,{onClick:()=>{j(h.id),N()},className:"flex items-center space-x-2 bg-green-500 hover:bg-green-600",children:[(0,Ge.jsx)(Eh,{size:16}),(0,Ge.jsx)("span",{children:"Approuver"})]}),"active"===h.status&&(0,Ge.jsxs)(Vu,{onClick:()=>{w(h.id),N()},variant:"outline",className:"flex items-center space-x-2 border-red-200 text-red-600 hover:bg-red-50",children:[(0,Ge.jsx)(_h,{size:16}),(0,Ge.jsx)("span",{children:"Suspendre"})]})]})})]})}),x&&(0,Ge.jsx)("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:S,children:(0,Ge.jsxs)("div",{className:"bg-white rounded-2xl max-w-4xl max-h-[90vh] overflow-hidden shadow-2xl",onClick:e=>e.stopPropagation(),children:[(0,Ge.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,Ge.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Ge.jsx)("h3",{className:"text-xl font-semibold text-gray-900",children:v.title}),(0,Ge.jsx)("button",{onClick:S,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:(0,Ge.jsx)(st,{size:24,className:"text-gray-500"})})]})}),(0,Ge.jsx)("div",{className:"p-6",children:(0,Ge.jsxs)("div",{className:"flex items-center justify-center",children:[(0,Ge.jsx)("img",{src:v.url,alt:v.title,className:"max-w-full max-h-[60vh] object-contain rounded-lg shadow-lg",onError:e=>{e.target.style.display="none",e.target.nextSibling.style.display="block"}}),(0,Ge.jsxs)("div",{className:"hidden text-center text-gray-500 p-8",style:{display:"none"},children:[(0,Ge.jsx)(Ph,{size:48,className:"mx-auto mb-4 text-gray-400"}),(0,Ge.jsx)("p",{children:"Impossible de charger l'image"}),(0,Ge.jsx)("p",{className:"text-sm",children:"L'URL de l'image pourrait \xeatre invalide ou expir\xe9e"})]})]})})]})})]})},Rh=Xe("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]),Oh=Xe("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),Lh=()=>{Y();const[e,n]=(0,t.useState)(!0),[s,r]=(0,t.useState)(null),[a,i]=(0,t.useState)({totalLoans:0,activeLoans:0,completedLoans:0,pendingLoans:0,totalLoanAmount:0,totalPaidAmount:0,totalRemainingAmount:0,totalSavingsPlans:0,activeSavingsPlans:0,completedSavingsPlans:0,totalSavingsAmount:0,totalUsers:0,activeUsers:0,pendingUsers:0,averageLoanAmount:0,averageRepaymentRate:0,topBorrowers:[]});(0,t.useEffect)(()=>{o()},[]);const o=async()=>{try{n(!0),r(null),console.log("[ANALYTICS] \ud83d\udcca Chargement des analytics...");const[e,t,s,a]=await Promise.all([Be(),qe(),We(),Me.supabase.from("savings_plans").select("*")]);console.log("[ANALYTICS] \u2705 Donn\xe9es charg\xe9es");const o=e.success?e.data:[],l=o.length,c=o.filter(e=>"approved"===e.status).length,d=o.filter(e=>"pending"===e.status).length,u=t.success?t.data:[],h=s.success?s.data:[],m=u.length,p=u.filter(e=>"active"===e.status||"approved"===e.status).length,f=u.filter(e=>"completed"===e.status).length,x=u.filter(e=>"pending"===e.status).length,g=u.reduce((e,t)=>e+(t.amount||0),0),v=h.reduce((e,t)=>e+(t.amount||0),0),y=g-v,b=g>0?Math.round(v/g*100):0,j=m>0?Math.round(g/m):0,w={};u.forEach(e=>{const t=e.user_id;var n,s;w[t]||(w[t]={userId:t,userName:"".concat((null===(n=e.users)||void 0===n?void 0:n.first_name)||"Utilisateur"," ").concat((null===(s=e.users)||void 0===s?void 0:s.last_name)||"Inconnu"),totalBorrowed:0,loansCount:0,completedLoans:0});w[t].totalBorrowed+=e.amount||0,w[t].loansCount++,"completed"===e.status&&w[t].completedLoans++});const N=Object.values(w).sort((e,t)=>t.totalBorrowed-e.totalBorrowed).slice(0,5),k=a.data||[],S=k.length,E=k.filter(e=>"active"===e.status).length,_=k.filter(e=>"completed"===e.status).length,C=k.reduce((e,t)=>e+(t.current_balance||0),0);i({totalLoans:m,activeLoans:p,completedLoans:f,pendingLoans:x,totalLoanAmount:g,totalPaidAmount:v,totalRemainingAmount:y,totalSavingsPlans:S,activeSavingsPlans:E,completedSavingsPlans:_,totalSavingsAmount:C,totalUsers:l,activeUsers:c,pendingUsers:d,averageLoanAmount:j,averageRepaymentRate:b,topBorrowers:N})}catch(s){console.error("[ANALYTICS] \u274c Erreur:",s),r(s.message||"Une erreur est survenue")}finally{n(!1)}};return e?(0,Ge.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 via-red-50 to-pink-50 flex items-center justify-center",children:(0,Ge.jsxs)("div",{className:"text-center",children:[(0,Ge.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-orange-500 border-t-transparent mx-auto mb-4"}),(0,Ge.jsx)("p",{className:"text-gray-600 font-medium",children:"Chargement des analytics..."})]})}):s?(0,Ge.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 via-red-50 to-pink-50 flex items-center justify-center p-4",children:(0,Ge.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8 max-w-md w-full text-center",children:[(0,Ge.jsx)("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,Ge.jsx)(tt,{size:32,className:"text-red-600"})}),(0,Ge.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Erreur de chargement"}),(0,Ge.jsx)("p",{className:"text-gray-600 mb-6",children:s}),(0,Ge.jsxs)("button",{onClick:o,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-orange-600 hover:bg-orange-700 text-white rounded-xl transition-colors",children:[(0,Ge.jsx)(mh,{size:18}),"R\xe9essayer"]})]})}):(0,Ge.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 via-red-50 to-pink-50 pb-24",children:[(0,Ge.jsx)("div",{className:"bg-white/80 backdrop-blur-lg shadow-lg border-b border-white/50 sticky top-0 z-30",children:(0,Ge.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:(0,Ge.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Ge.jsxs)("div",{className:"flex items-center gap-4",children:[(0,Ge.jsx)("div",{className:"p-3 bg-gradient-to-br from-orange-500 to-red-600 rounded-2xl shadow-lg",children:(0,Ge.jsx)(ou,{size:32,className:"text-white"})}),(0,Ge.jsxs)("div",{children:[(0,Ge.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900 font-montserrat",children:"Analytics"}),(0,Ge.jsx)("p",{className:"text-sm sm:text-base text-gray-600 font-montserrat",children:"Vue d'ensemble des performances"})]})]}),(0,Ge.jsxs)("button",{onClick:o,className:"flex items-center gap-2 px-3 sm:px-4 py-2 bg-white hover:bg-gray-50 border border-gray-200 rounded-xl transition-all duration-200 shadow-sm hover:shadow",children:[(0,Ge.jsx)(mh,{size:18,className:"text-gray-600"}),(0,Ge.jsx)("span",{className:"hidden sm:inline text-sm font-medium text-gray-700",children:"Actualiser"})]})]})})}),(0,Ge.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,Ge.jsxs)("div",{className:"mb-6",children:[(0,Ge.jsx)("h2",{className:"text-xl font-bold text-gray-900 font-montserrat mb-4",children:"\ud83d\udcca Pr\xeats"}),(0,Ge.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6",children:[(0,Ge.jsxs)("div",{className:"bg-white rounded-2xl p-4 sm:p-6 shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-100 group",children:[(0,Ge.jsx)("div",{className:"flex items-start justify-between mb-3 sm:mb-4",children:(0,Ge.jsx)("div",{className:"p-2 sm:p-3 bg-blue-100 rounded-xl group-hover:scale-110 transition-transform duration-300",children:(0,Ge.jsx)(au,{size:20,className:"sm:w-6 sm:h-6 text-blue-600"})})}),(0,Ge.jsx)("p",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:a.totalLoans}),(0,Ge.jsx)("p",{className:"text-xs sm:text-sm text-gray-600 mt-1",children:"Total pr\xeats"})]}),(0,Ge.jsxs)("div",{className:"bg-gradient-to-br from-blue-500 to-purple-600 rounded-2xl p-4 sm:p-6 shadow-lg hover:shadow-xl transition-all duration-300 text-white group",children:[(0,Ge.jsx)("div",{className:"flex items-start justify-between mb-3 sm:mb-4",children:(0,Ge.jsx)("div",{className:"p-2 sm:p-3 bg-white/20 rounded-xl group-hover:scale-110 transition-transform duration-300",children:(0,Ge.jsx)(hh,{size:20,className:"sm:w-6 sm:h-6 text-white"})})}),(0,Ge.jsx)("p",{className:"text-2xl sm:text-3xl font-bold",children:a.activeLoans}),(0,Ge.jsx)("p",{className:"text-xs sm:text-sm text-blue-100 mt-1",children:"Actifs"})]}),(0,Ge.jsxs)("div",{className:"bg-white rounded-2xl p-4 sm:p-6 shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-100 group",children:[(0,Ge.jsx)("div",{className:"flex items-start justify-between mb-3 sm:mb-4",children:(0,Ge.jsx)("div",{className:"p-2 sm:p-3 bg-green-100 rounded-xl group-hover:scale-110 transition-transform duration-300",children:(0,Ge.jsx)(et,{size:20,className:"sm:w-6 sm:h-6 text-green-600"})})}),(0,Ge.jsx)("p",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:a.completedLoans}),(0,Ge.jsx)("p",{className:"text-xs sm:text-sm text-gray-600 mt-1",children:"Rembours\xe9s"})]}),(0,Ge.jsxs)("div",{className:"bg-white rounded-2xl p-4 sm:p-6 shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-100 group",children:[(0,Ge.jsx)("div",{className:"flex items-start justify-between mb-3 sm:mb-4",children:(0,Ge.jsx)("div",{className:"p-2 sm:p-3 bg-yellow-100 rounded-xl group-hover:scale-110 transition-transform duration-300",children:(0,Ge.jsx)(Wd,{size:20,className:"sm:w-6 sm:h-6 text-yellow-600"})})}),(0,Ge.jsx)("p",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:a.pendingLoans}),(0,Ge.jsx)("p",{className:"text-xs sm:text-sm text-gray-600 mt-1",children:"En attente"})]})]})]}),(0,Ge.jsxs)("div",{className:"mb-6",children:[(0,Ge.jsx)("h2",{className:"text-xl font-bold text-gray-900 font-montserrat mb-4",children:"\ud83d\udcb0 Montants"}),(0,Ge.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6",children:[(0,Ge.jsxs)("div",{className:"bg-white rounded-2xl p-4 sm:p-6 shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-100",children:[(0,Ge.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,Ge.jsx)("div",{className:"p-2 bg-purple-100 rounded-lg",children:(0,Ge.jsx)(xh,{size:18,className:"text-purple-600"})}),(0,Ge.jsx)("p",{className:"text-xs sm:text-sm text-gray-600 font-medium",children:"Total pr\xeat\xe9"})]}),(0,Ge.jsx)("p",{className:"text-lg sm:text-xl font-bold text-gray-900",children:Yu(a.totalLoanAmount)})]}),(0,Ge.jsxs)("div",{className:"bg-white rounded-2xl p-4 sm:p-6 shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-100",children:[(0,Ge.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,Ge.jsx)("div",{className:"p-2 bg-green-100 rounded-lg",children:(0,Ge.jsx)(et,{size:18,className:"text-green-600"})}),(0,Ge.jsx)("p",{className:"text-xs sm:text-sm text-gray-600 font-medium",children:"Total pay\xe9"})]}),(0,Ge.jsx)("p",{className:"text-lg sm:text-xl font-bold text-green-600",children:Yu(a.totalPaidAmount)})]}),(0,Ge.jsxs)("div",{className:"bg-white rounded-2xl p-4 sm:p-6 shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-100",children:[(0,Ge.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,Ge.jsx)("div",{className:"p-2 bg-orange-100 rounded-lg",children:(0,Ge.jsx)(Rh,{size:18,className:"text-orange-600"})}),(0,Ge.jsx)("p",{className:"text-xs sm:text-sm text-gray-600 font-medium",children:"Restant"})]}),(0,Ge.jsx)("p",{className:"text-lg sm:text-xl font-bold text-orange-600",children:Yu(a.totalRemainingAmount)})]}),(0,Ge.jsxs)("div",{className:"bg-gradient-to-br from-green-500 to-emerald-600 rounded-2xl p-4 sm:p-6 shadow-lg hover:shadow-xl transition-all duration-300 text-white",children:[(0,Ge.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,Ge.jsx)("div",{className:"p-2 bg-white/20 rounded-lg",children:(0,Ge.jsx)(Oh,{size:18,className:"text-white"})}),(0,Ge.jsx)("p",{className:"text-xs sm:text-sm text-green-100 font-medium",children:"Taux remboursement"})]}),(0,Ge.jsxs)("p",{className:"text-2xl sm:text-3xl font-bold",children:[a.averageRepaymentRate,"%"]})]})]})]}),(0,Ge.jsxs)("div",{className:"mb-6",children:[(0,Ge.jsx)("h2",{className:"text-xl font-bold text-gray-900 font-montserrat mb-4",children:"\ud83c\udfe6 \xc9pargne"}),(0,Ge.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6",children:[(0,Ge.jsxs)("div",{className:"bg-white rounded-2xl p-4 sm:p-6 shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-100 group",children:[(0,Ge.jsx)("div",{className:"flex items-start justify-between mb-3 sm:mb-4",children:(0,Ge.jsx)("div",{className:"p-2 sm:p-3 bg-purple-100 rounded-xl group-hover:scale-110 transition-transform duration-300",children:(0,Ge.jsx)(ph,{size:20,className:"sm:w-6 sm:h-6 text-purple-600"})})}),(0,Ge.jsx)("p",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:a.totalSavingsPlans}),(0,Ge.jsx)("p",{className:"text-xs sm:text-sm text-gray-600 mt-1",children:"Plans total"})]}),(0,Ge.jsxs)("div",{className:"bg-white rounded-2xl p-4 sm:p-6 shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-100 group",children:[(0,Ge.jsx)("div",{className:"flex items-start justify-between mb-3 sm:mb-4",children:(0,Ge.jsx)("div",{className:"p-2 sm:p-3 bg-green-100 rounded-xl group-hover:scale-110 transition-transform duration-300",children:(0,Ge.jsx)(hh,{size:20,className:"sm:w-6 sm:h-6 text-green-600"})})}),(0,Ge.jsx)("p",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:a.activeSavingsPlans}),(0,Ge.jsx)("p",{className:"text-xs sm:text-sm text-gray-600 mt-1",children:"Actifs"})]}),(0,Ge.jsxs)("div",{className:"bg-white rounded-2xl p-4 sm:p-6 shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-100 group",children:[(0,Ge.jsx)("div",{className:"flex items-start justify-between mb-3 sm:mb-4",children:(0,Ge.jsx)("div",{className:"p-2 sm:p-3 bg-blue-100 rounded-xl group-hover:scale-110 transition-transform duration-300",children:(0,Ge.jsx)(et,{size:20,className:"sm:w-6 sm:h-6 text-blue-600"})})}),(0,Ge.jsx)("p",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:a.completedSavingsPlans}),(0,Ge.jsx)("p",{className:"text-xs sm:text-sm text-gray-600 mt-1",children:"Termin\xe9s"})]}),(0,Ge.jsxs)("div",{className:"bg-gradient-to-br from-purple-500 to-pink-600 rounded-2xl p-4 sm:p-6 shadow-lg hover:shadow-xl transition-all duration-300 text-white group",children:[(0,Ge.jsx)("div",{className:"flex items-start justify-between mb-3 sm:mb-4",children:(0,Ge.jsx)("div",{className:"p-2 sm:p-3 bg-white/20 rounded-xl group-hover:scale-110 transition-transform duration-300",children:(0,Ge.jsx)(uu,{size:20,className:"sm:w-6 sm:h-6 text-white"})})}),(0,Ge.jsx)("p",{className:"text-lg sm:text-xl font-bold",children:Yu(a.totalSavingsAmount)}),(0,Ge.jsx)("p",{className:"text-xs sm:text-sm text-purple-100 mt-1",children:"Total \xe9pargn\xe9"})]})]})]}),(0,Ge.jsxs)("div",{className:"mb-6",children:[(0,Ge.jsx)("h2",{className:"text-xl font-bold text-gray-900 font-montserrat mb-4",children:"\ud83d\udc65 Utilisateurs"}),(0,Ge.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 sm:gap-6",children:[(0,Ge.jsxs)("div",{className:"bg-white rounded-2xl p-4 sm:p-6 shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-100",children:[(0,Ge.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,Ge.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,Ge.jsx)(bh,{size:18,className:"text-blue-600"})}),(0,Ge.jsx)("p",{className:"text-xs sm:text-sm text-gray-600 font-medium",children:"Total"})]}),(0,Ge.jsx)("p",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:a.totalUsers})]}),(0,Ge.jsxs)("div",{className:"bg-white rounded-2xl p-4 sm:p-6 shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-100",children:[(0,Ge.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,Ge.jsx)("div",{className:"p-2 bg-green-100 rounded-lg",children:(0,Ge.jsx)(et,{size:18,className:"text-green-600"})}),(0,Ge.jsx)("p",{className:"text-xs sm:text-sm text-gray-600 font-medium",children:"Actifs"})]}),(0,Ge.jsx)("p",{className:"text-2xl sm:text-3xl font-bold text-green-600",children:a.activeUsers})]}),(0,Ge.jsxs)("div",{className:"bg-white rounded-2xl p-4 sm:p-6 shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-100",children:[(0,Ge.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,Ge.jsx)("div",{className:"p-2 bg-yellow-100 rounded-lg",children:(0,Ge.jsx)(Wd,{size:18,className:"text-yellow-600"})}),(0,Ge.jsx)("p",{className:"text-xs sm:text-sm text-gray-600 font-medium",children:"En attente"})]}),(0,Ge.jsx)("p",{className:"text-2xl sm:text-3xl font-bold text-yellow-600",children:a.pendingUsers})]})]})]}),a.topBorrowers.length>0&&(0,Ge.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden",children:[(0,Ge.jsx)("div",{className:"p-4 sm:p-6 border-b border-gray-100",children:(0,Ge.jsxs)("h2",{className:"text-xl font-bold text-gray-900 font-montserrat flex items-center gap-2",children:[(0,Ge.jsx)(fh,{size:24,className:"text-orange-600"}),"Top 5 Emprunteurs"]})}),(0,Ge.jsx)("div",{className:"divide-y divide-gray-100",children:a.topBorrowers.map((e,t)=>(0,Ge.jsx)("div",{className:"p-4 sm:p-6 hover:bg-gray-50 transition-colors",children:(0,Ge.jsxs)("div",{className:"flex items-center gap-3 sm:gap-4",children:[(0,Ge.jsx)("div",{className:"flex-shrink-0 w-10 h-10 sm:w-12 sm:h-12 rounded-full flex items-center justify-center font-bold text-lg ".concat(0===t?"bg-yellow-100 text-yellow-700":1===t?"bg-gray-100 text-gray-700":2===t?"bg-orange-100 text-orange-700":"bg-blue-100 text-blue-700"),children:t+1}),(0,Ge.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Ge.jsx)("p",{className:"text-sm sm:text-base font-bold text-gray-900 truncate",children:e.userName}),(0,Ge.jsxs)("p",{className:"text-xs sm:text-sm text-gray-600",children:[e.loansCount," pr\xeat",e.loansCount>1?"s":""," \u2022 ",e.completedLoans," rembours\xe9",e.completedLoans>1?"s":""]})]}),(0,Ge.jsxs)("div",{className:"text-right",children:[(0,Ge.jsx)("p",{className:"text-sm sm:text-base font-bold text-gray-900",children:Yu(e.totalBorrowed)}),(0,Ge.jsx)("p",{className:"text-xs text-gray-500",children:"Total"})]})]})},t))})]})]})]})},zh=()=>{const e=Y(),t=[{id:"ab-epargne",title:"AB Epargne",description:"Gestion des comptes d'\xe9pargne et des plans",icon:ph,color:"from-green-500 to-emerald-600",bgColor:"bg-green-50",iconColor:"text-green-600",path:"/admin/ab-epargne"},{id:"ab-pret",title:"AB Pret",description:"Gestion des demandes de pr\xeats et remboursements",icon:au,color:"from-blue-500 to-indigo-600",bgColor:"bg-blue-50",iconColor:"text-blue-600",path:"/admin/loan-requests"}];return(0,Ge.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-blue-50 pb-24",children:[(0,Ge.jsx)("div",{className:"bg-white shadow-sm border-b border-gray-200",children:(0,Ge.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,Ge.jsxs)("div",{className:"py-6",children:[(0,Ge.jsx)("h1",{className:"text-3xl font-bold text-gray-900 font-montserrat",children:"Menu Admin"}),(0,Ge.jsx)("p",{className:"text-gray-600 font-montserrat mt-2",children:"S\xe9lectionnez une section pour g\xe9rer"})]})})}),(0,Ge.jsx)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:(0,Ge.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:t.map(t=>(0,Ge.jsxs)("button",{onClick:()=>e(t.path),className:"group relative bg-white rounded-3xl p-8 shadow-lg hover:shadow-2xl transition-all duration-300 transform hover:scale-105 border border-gray-100 overflow-hidden",children:[(0,Ge.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br ".concat(t.color," opacity-0 group-hover:opacity-5 transition-opacity duration-300")}),(0,Ge.jsxs)("div",{className:"relative",children:[(0,Ge.jsx)("div",{className:"inline-flex p-4 rounded-2xl ".concat(t.bgColor," mb-6 group-hover:scale-110 transition-transform duration-300"),children:(0,Ge.jsx)(t.icon,{size:40,className:t.iconColor})}),(0,Ge.jsx)("h2",{className:"text-2xl font-bold text-gray-900 font-montserrat mb-3",children:t.title}),(0,Ge.jsx)("p",{className:"text-gray-600 font-montserrat mb-6",children:t.description}),(0,Ge.jsxs)("div",{className:"flex items-center text-primary-600 font-semibold font-montserrat group-hover:translate-x-2 transition-transform duration-300",children:[(0,Ge.jsx)("span",{children:"Acc\xe9der"}),(0,Ge.jsx)(Fn,{size:20,className:"ml-2"})]})]}),(0,Ge.jsx)("div",{className:"absolute -right-8 -bottom-8 w-32 h-32 rounded-full bg-gradient-to-br ".concat(t.color," opacity-10 group-hover:opacity-20 transition-opacity duration-300")})]},t.id))})})]})},Dh=Xe("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),Mh=()=>{Y();const{user:e}=Je(),{showSuccess:n,showError:s}=it(),[r,a]=(0,t.useState)(!1),[i,o]=(0,t.useState)(null),[l,c]=(0,t.useState)(!1),[d,u]=(0,t.useState)({firstName:(null===e||void 0===e?void 0:e.first_name)||"",lastName:(null===e||void 0===e?void 0:e.last_name)||"",email:(null===e||void 0===e?void 0:e.email)||"",phone:(null===e||void 0===e?void 0:e.phone_number)||""}),[h,m]=(0,t.useState)({currentPassword:"",newPassword:"",confirmPassword:""}),[p,f]=(0,t.useState)({emailNotifications:!0,loanAlerts:!0,savingsAlerts:!0,systemAlerts:!1});return(0,Ge.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50 pb-24",children:[(0,Ge.jsx)("div",{className:"bg-white/80 backdrop-blur-lg shadow-lg border-b border-white/50 sticky top-0 z-30",children:(0,Ge.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:(0,Ge.jsx)("div",{className:"flex items-center justify-between",children:(0,Ge.jsxs)("div",{className:"flex items-center gap-4",children:[(0,Ge.jsx)("div",{className:"p-3 bg-gradient-to-br from-purple-500 to-pink-600 rounded-2xl shadow-lg",children:(0,Ge.jsx)(lu,{size:32,className:"text-white"})}),(0,Ge.jsxs)("div",{children:[(0,Ge.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900 font-montserrat",children:"Param\xe8tres"}),(0,Ge.jsx)("p",{className:"text-sm sm:text-base text-gray-600 font-montserrat",children:"Configuration de votre compte"})]})]})})})}),(0,Ge.jsxs)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,Ge.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden mb-6",children:[(0,Ge.jsx)("div",{className:"p-4 sm:p-6 bg-gradient-to-r from-blue-500 to-purple-600 text-white",children:(0,Ge.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Ge.jsx)("div",{className:"p-2 bg-white/20 rounded-xl",children:(0,Ge.jsx)(Dn,{size:24})}),(0,Ge.jsxs)("div",{children:[(0,Ge.jsx)("h2",{className:"text-xl font-bold font-montserrat",children:"Informations du profil"}),(0,Ge.jsx)("p",{className:"text-sm text-blue-100",children:"G\xe9rez vos informations personnelles"})]})]})}),(0,Ge.jsxs)("div",{className:"p-4 sm:p-6",children:[(0,Ge.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-6",children:[(0,Ge.jsxs)("div",{children:[(0,Ge.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Pr\xe9nom"}),(0,Ge.jsx)("input",{type:"text",value:d.firstName,onChange:e=>u(De(De({},d),{},{firstName:e.target.value})),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,Ge.jsxs)("div",{children:[(0,Ge.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nom"}),(0,Ge.jsx)("input",{type:"text",value:d.lastName,onChange:e=>u(De(De({},d),{},{lastName:e.target.value})),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,Ge.jsxs)("div",{children:[(0,Ge.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),(0,Ge.jsxs)("div",{className:"relative",children:[(0,Ge.jsx)(Ru,{size:18,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,Ge.jsx)("input",{type:"email",value:d.email,onChange:e=>u(De(De({},d),{},{email:e.target.value})),className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),(0,Ge.jsxs)("div",{children:[(0,Ge.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"T\xe9l\xe9phone"}),(0,Ge.jsxs)("div",{className:"relative",children:[(0,Ge.jsx)(Iu,{size:18,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,Ge.jsx)("input",{type:"tel",value:d.phone,onChange:e=>u(De(De({},d),{},{phone:e.target.value})),className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})]}),(0,Ge.jsxs)("button",{onClick:async()=>{try{a(!0),await new Promise(e=>setTimeout(e,1e3)),n("Profil mis \xe0 jour avec succ\xe8s")}catch(i){console.error("[SETTINGS] Erreur:",i),s("Erreur lors de la mise \xe0 jour")}finally{a(!1)}},disabled:r,className:"flex items-center justify-center gap-2 px-6 py-3 bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white rounded-xl transition-all duration-200 shadow-md hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,Ge.jsx)(Dh,{size:18}),(0,Ge.jsx)("span",{className:"font-medium",children:r?"Enregistrement...":"Enregistrer les modifications"})]})]})]}),(0,Ge.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden mb-6",children:[(0,Ge.jsx)("div",{className:"p-4 sm:p-6 bg-gradient-to-r from-red-500 to-orange-600 text-white",children:(0,Ge.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Ge.jsx)("div",{className:"p-2 bg-white/20 rounded-xl",children:(0,Ge.jsx)(Cu,{size:24})}),(0,Ge.jsxs)("div",{children:[(0,Ge.jsx)("h2",{className:"text-xl font-bold font-montserrat",children:"S\xe9curit\xe9"}),(0,Ge.jsx)("p",{className:"text-sm text-red-100",children:"Changez votre mot de passe"})]})]})}),(0,Ge.jsxs)("div",{className:"p-4 sm:p-6",children:[(0,Ge.jsxs)("div",{className:"space-y-4 mb-6",children:[(0,Ge.jsxs)("div",{children:[(0,Ge.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Mot de passe actuel"}),(0,Ge.jsxs)("div",{className:"relative",children:[(0,Ge.jsx)(Ou,{size:18,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,Ge.jsx)("input",{type:l?"text":"password",value:h.currentPassword,onChange:e=>m(De(De({},h),{},{currentPassword:e.target.value})),className:"w-full pl-10 pr-12 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-red-500 focus:border-transparent"}),(0,Ge.jsx)("button",{type:"button",onClick:()=>c(!l),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:l?(0,Ge.jsx)(Lu,{size:18}):(0,Ge.jsx)(zu,{size:18})})]})]}),(0,Ge.jsxs)("div",{children:[(0,Ge.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nouveau mot de passe"}),(0,Ge.jsxs)("div",{className:"relative",children:[(0,Ge.jsx)(Ou,{size:18,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,Ge.jsx)("input",{type:l?"text":"password",value:h.newPassword,onChange:e=>m(De(De({},h),{},{newPassword:e.target.value})),className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-red-500 focus:border-transparent"})]})]}),(0,Ge.jsxs)("div",{children:[(0,Ge.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirmer le nouveau mot de passe"}),(0,Ge.jsxs)("div",{className:"relative",children:[(0,Ge.jsx)(Ou,{size:18,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,Ge.jsx)("input",{type:l?"text":"password",value:h.confirmPassword,onChange:e=>m(De(De({},h),{},{confirmPassword:e.target.value})),className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-red-500 focus:border-transparent"})]})]})]}),(0,Ge.jsxs)("button",{onClick:async()=>{try{if(h.newPassword!==h.confirmPassword)return void s("Les mots de passe ne correspondent pas");if(h.newPassword.length<6)return void s("Le mot de passe doit contenir au moins 6 caract\xe8res");a(!0),await new Promise(e=>setTimeout(e,1e3)),n("Mot de passe mis \xe0 jour avec succ\xe8s"),m({currentPassword:"",newPassword:"",confirmPassword:""})}catch(i){console.error("[SETTINGS] Erreur:",i),s("Erreur lors de la mise \xe0 jour")}finally{a(!1)}},disabled:r,className:"flex items-center justify-center gap-2 px-6 py-3 bg-gradient-to-r from-red-500 to-orange-600 hover:from-red-600 hover:to-orange-700 text-white rounded-xl transition-all duration-200 shadow-md hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,Ge.jsx)(Cu,{size:18}),(0,Ge.jsx)("span",{className:"font-medium",children:r?"Mise \xe0 jour...":"Changer le mot de passe"})]})]})]}),(0,Ge.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden",children:[(0,Ge.jsx)("div",{className:"p-4 sm:p-6 bg-gradient-to-r from-green-500 to-emerald-600 text-white",children:(0,Ge.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Ge.jsx)("div",{className:"p-2 bg-white/20 rounded-xl",children:(0,Ge.jsx)(zn,{size:24})}),(0,Ge.jsxs)("div",{children:[(0,Ge.jsx)("h2",{className:"text-xl font-bold font-montserrat",children:"Notifications"}),(0,Ge.jsx)("p",{className:"text-sm text-green-100",children:"G\xe9rez vos pr\xe9f\xe9rences de notification"})]})]})}),(0,Ge.jsxs)("div",{className:"p-4 sm:p-6",children:[(0,Ge.jsxs)("div",{className:"space-y-4 mb-6",children:[(0,Ge.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-xl",children:[(0,Ge.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Ge.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,Ge.jsx)(Ru,{size:18,className:"text-blue-600"})}),(0,Ge.jsxs)("div",{children:[(0,Ge.jsx)("p",{className:"font-medium text-gray-900",children:"Notifications par email"}),(0,Ge.jsx)("p",{className:"text-sm text-gray-600",children:"Recevoir les notifications importantes par email"})]})]}),(0,Ge.jsx)("button",{onClick:()=>f(De(De({},p),{},{emailNotifications:!p.emailNotifications})),className:"relative w-12 h-6 rounded-full transition-colors ".concat(p.emailNotifications?"bg-green-500":"bg-gray-300"),children:(0,Ge.jsx)("div",{className:"absolute top-1 w-4 h-4 bg-white rounded-full transition-transform ".concat(p.emailNotifications?"translate-x-7":"translate-x-1")})})]}),(0,Ge.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-xl",children:[(0,Ge.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Ge.jsx)("div",{className:"p-2 bg-purple-100 rounded-lg",children:(0,Ge.jsx)(hh,{size:18,className:"text-purple-600"})}),(0,Ge.jsxs)("div",{children:[(0,Ge.jsx)("p",{className:"font-medium text-gray-900",children:"Alertes de pr\xeats"}),(0,Ge.jsx)("p",{className:"text-sm text-gray-600",children:"Notifications pour les nouvelles demandes de pr\xeat"})]})]}),(0,Ge.jsx)("button",{onClick:()=>f(De(De({},p),{},{loanAlerts:!p.loanAlerts})),className:"relative w-12 h-6 rounded-full transition-colors ".concat(p.loanAlerts?"bg-green-500":"bg-gray-300"),children:(0,Ge.jsx)("div",{className:"absolute top-1 w-4 h-4 bg-white rounded-full transition-transform ".concat(p.loanAlerts?"translate-x-7":"translate-x-1")})})]}),(0,Ge.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-xl",children:[(0,Ge.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Ge.jsx)("div",{className:"p-2 bg-green-100 rounded-lg",children:(0,Ge.jsx)(et,{size:18,className:"text-green-600"})}),(0,Ge.jsxs)("div",{children:[(0,Ge.jsx)("p",{className:"font-medium text-gray-900",children:"Alertes d'\xe9pargne"}),(0,Ge.jsx)("p",{className:"text-sm text-gray-600",children:"Notifications pour les nouveaux plans d'\xe9pargne"})]})]}),(0,Ge.jsx)("button",{onClick:()=>f(De(De({},p),{},{savingsAlerts:!p.savingsAlerts})),className:"relative w-12 h-6 rounded-full transition-colors ".concat(p.savingsAlerts?"bg-green-500":"bg-gray-300"),children:(0,Ge.jsx)("div",{className:"absolute top-1 w-4 h-4 bg-white rounded-full transition-transform ".concat(p.savingsAlerts?"translate-x-7":"translate-x-1")})})]}),(0,Ge.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-xl",children:[(0,Ge.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Ge.jsx)("div",{className:"p-2 bg-orange-100 rounded-lg",children:(0,Ge.jsx)(tt,{size:18,className:"text-orange-600"})}),(0,Ge.jsxs)("div",{children:[(0,Ge.jsx)("p",{className:"font-medium text-gray-900",children:"Alertes syst\xe8me"}),(0,Ge.jsx)("p",{className:"text-sm text-gray-600",children:"Notifications pour les mises \xe0 jour syst\xe8me"})]})]}),(0,Ge.jsx)("button",{onClick:()=>f(De(De({},p),{},{systemAlerts:!p.systemAlerts})),className:"relative w-12 h-6 rounded-full transition-colors ".concat(p.systemAlerts?"bg-green-500":"bg-gray-300"),children:(0,Ge.jsx)("div",{className:"absolute top-1 w-4 h-4 bg-white rounded-full transition-transform ".concat(p.systemAlerts?"translate-x-7":"translate-x-1")})})]})]}),(0,Ge.jsxs)("button",{onClick:async()=>{try{a(!0),await new Promise(e=>setTimeout(e,1e3)),n("Pr\xe9f\xe9rences de notification mises \xe0 jour")}catch(i){console.error("[SETTINGS] Erreur:",i),s("Erreur lors de la mise \xe0 jour")}finally{a(!1)}},disabled:r,className:"flex items-center justify-center gap-2 px-6 py-3 bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white rounded-xl transition-all duration-200 shadow-md hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,Ge.jsx)(zn,{size:18}),(0,Ge.jsx)("span",{className:"font-medium",children:r?"Enregistrement...":"Enregistrer les pr\xe9f\xe9rences"})]})]})]})]})]})},Fh=Xe("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),Uh=()=>{var e,n,s,r;const a=Y(),[i,o]=(0,t.useState)(!0),[l,c]=(0,t.useState)(null),[d,u]=(0,t.useState)([]),[h,m]=(0,t.useState)({totalPlans:0,totalSaved:0,activePlans:0,completedPlans:0,suspendedPlans:0,averageProgress:0}),[p,f]=(0,t.useState)(""),[x,g]=(0,t.useState)(null);(0,t.useEffect)(()=>{v()},[]);const v=async()=>{try{o(!0),c(null),console.log("[ADMIN_AB_EPARGNE] \ud83d\udce5 Chargement des plans d'\xe9pargne...");const{data:e,error:t}=await Me.supabase.from("savings_plans").select("*").order("created_at",{ascending:!1});if(t)throw console.error("[ADMIN_AB_EPARGNE] \u274c Erreur plans:",t),c(t.message||"Erreur lors du chargement des plans"),t;console.log("[ADMIN_AB_EPARGNE] \u2705 Plans charg\xe9s:",e),console.log("[ADMIN_AB_EPARGNE] \ud83d\udcca Nombre de plans:",(null===e||void 0===e?void 0:e.length)||0);const n=[...new Set(e.map(e=>e.user_id).filter(Boolean))];console.log("[ADMIN_AB_EPARGNE] \ud83d\udc65 IDs utilisateurs:",n);const{data:s,error:r}=await Me.supabase.from("users").select("id, first_name, last_name, email, phone_number").in("id",n);r&&console.error("[ADMIN_AB_EPARGNE] \u26a0\ufe0f Erreur utilisateurs:",r),console.log("[ADMIN_AB_EPARGNE] \u2705 Utilisateurs charg\xe9s:",(null===s||void 0===s?void 0:s.length)||0);const a={};(s||[]).forEach(e=>{a[e.id]=e});const i=e.map(e=>De(De({},e),{},{users:a[e.user_id]||null}));console.log("[ADMIN_AB_EPARGNE] \u2705 Plans avec utilisateurs:",i);const l=(i||[]).map(e=>{const t=e.total_amount_target||e.target_amount||0,n=e.current_balance||0,s=t>0?Math.round(n/t*100):0;return De(De({},e),{},{user:e.users,target_amount:t,current_balance:n,monthly_amount:e.fixed_amount||e.monthly_amount||0,progress:Math.min(s,100),daysActive:Math.floor((new Date-new Date(e.created_at))/864e5),isOverdue:e.is_overdue||!1,isSuspended:e.is_suspended||!1})});console.log("[ADMIN_AB_EPARGNE] \ud83d\udccb Plans format\xe9s:",l),u(l);const d=l.filter(e=>"active"===e.status).length,h=l.filter(e=>"completed"===e.status).length,p=l.filter(e=>e.is_suspended).length,f=l.reduce((e,t)=>e+(t.current_balance||0),0),x=l.length>0?Math.round(l.reduce((e,t)=>e+t.progress,0)/l.length):0;m({totalPlans:l.length,totalSaved:f,activePlans:d,completedPlans:h,suspendedPlans:p,averageProgress:x})}catch(l){console.error("[ADMIN_AB_EPARGNE] \u274c Erreur lors du chargement:",l),c(l.message||"Une erreur est survenue"),u([]),m({totalPlans:0,totalSaved:0,activePlans:0,completedPlans:0,suspendedPlans:0,averageProgress:0})}finally{o(!1)}},y=e=>e.is_suspended?(0,Ge.jsxs)("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-semibold bg-red-100 text-red-700",children:[(0,Ge.jsx)(Sh,{size:14}),"Suspendu"]}):e.is_overdue?(0,Ge.jsxs)("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-semibold bg-orange-100 text-orange-700",children:[(0,Ge.jsx)(tt,{size:14}),"En retard"]}):"completed"===e.status?(0,Ge.jsxs)("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-semibold bg-green-100 text-green-700",children:[(0,Ge.jsx)(et,{size:14}),"Termin\xe9"]}):"active"===e.status?(0,Ge.jsxs)("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-semibold bg-blue-100 text-blue-700",children:[(0,Ge.jsx)(hh,{size:14}),"Actif"]}):(0,Ge.jsxs)("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-semibold bg-gray-100 text-gray-700",children:[(0,Ge.jsx)(Wd,{size:14}),e.status]}),b=d.filter(e=>{var t,n,s,r,a,i,o,l;if(!p)return!0;const c=p.toLowerCase();return(null===(t=e.user)||void 0===t||null===(n=t.first_name)||void 0===n?void 0:n.toLowerCase().includes(c))||(null===(s=e.user)||void 0===s||null===(r=s.last_name)||void 0===r?void 0:r.toLowerCase().includes(c))||(null===(a=e.user)||void 0===a||null===(i=a.email)||void 0===i?void 0:i.toLowerCase().includes(c))||(null===(o=e.user)||void 0===o||null===(l=o.phone_number)||void 0===l?void 0:l.includes(c))});return i?(0,Ge.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-green-50 via-blue-50 to-purple-50 flex items-center justify-center",children:(0,Ge.jsxs)("div",{className:"text-center",children:[(0,Ge.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-green-500 border-t-transparent mx-auto mb-4"}),(0,Ge.jsx)("p",{className:"text-gray-600 font-medium",children:"Chargement des donn\xe9es..."})]})}):l?(0,Ge.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-green-50 via-blue-50 to-purple-50 flex items-center justify-center p-4",children:(0,Ge.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8 max-w-md w-full text-center",children:[(0,Ge.jsx)("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,Ge.jsx)(tt,{size:32,className:"text-red-600"})}),(0,Ge.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Erreur de chargement"}),(0,Ge.jsx)("p",{className:"text-gray-600 mb-6",children:l}),(0,Ge.jsxs)("div",{className:"space-y-3",children:[(0,Ge.jsxs)("button",{onClick:v,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-green-600 hover:bg-green-700 text-white rounded-xl transition-colors",children:[(0,Ge.jsx)(mh,{size:18}),"R\xe9essayer"]}),(0,Ge.jsx)("button",{onClick:()=>a("/admin"),className:"w-full px-4 py-3 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-xl transition-colors",children:"Retour au dashboard"})]}),(0,Ge.jsx)("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg text-left",children:(0,Ge.jsx)("p",{className:"text-xs text-gray-500 font-mono break-all",children:l})})]})}):(0,Ge.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-green-50 via-blue-50 to-purple-50 pb-24",children:[(0,Ge.jsx)("div",{className:"bg-white/80 backdrop-blur-lg shadow-lg border-b border-white/50 sticky top-0 z-30",children:(0,Ge.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:(0,Ge.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Ge.jsxs)("div",{className:"flex items-center gap-4",children:[(0,Ge.jsx)("div",{className:"p-3 bg-gradient-to-br from-green-500 to-emerald-600 rounded-2xl shadow-lg",children:(0,Ge.jsx)(ph,{size:32,className:"text-white"})}),(0,Ge.jsxs)("div",{children:[(0,Ge.jsx)("h1",{className:"text-3xl font-bold text-gray-900 font-montserrat",children:"AB Epargne"}),(0,Ge.jsx)("p",{className:"text-gray-600 font-montserrat",children:"Gestion des comptes d'\xe9pargne"})]})]}),(0,Ge.jsxs)("button",{onClick:v,className:"flex items-center gap-2 px-4 py-2 bg-white hover:bg-gray-50 border border-gray-200 rounded-xl transition-all duration-200 shadow-sm hover:shadow",children:[(0,Ge.jsx)(mh,{size:18,className:"text-gray-600"}),(0,Ge.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Actualiser"})]})]})})}),(0,Ge.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,Ge.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:[(0,Ge.jsxs)("div",{className:"bg-white rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-100 group",children:[(0,Ge.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,Ge.jsx)("div",{className:"p-3 bg-blue-100 rounded-xl group-hover:scale-110 transition-transform duration-300",children:(0,Ge.jsx)(hh,{size:24,className:"text-blue-600"})}),(0,Ge.jsxs)("div",{className:"text-right",children:[(0,Ge.jsx)("p",{className:"text-sm text-gray-600 font-medium",children:"Plans Actifs"}),(0,Ge.jsx)("p",{className:"text-3xl font-bold text-gray-900 mt-1",children:h.activePlans})]})]}),(0,Ge.jsxs)("div",{className:"flex items-center justify-between pt-4 border-t border-gray-100",children:[(0,Ge.jsx)("span",{className:"text-xs text-gray-500",children:"Total plans"}),(0,Ge.jsx)("span",{className:"text-sm font-semibold text-gray-700",children:h.totalPlans})]})]}),(0,Ge.jsxs)("div",{className:"bg-gradient-to-br from-green-500 to-emerald-600 rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 text-white group",children:[(0,Ge.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,Ge.jsx)("div",{className:"p-3 bg-white/20 rounded-xl group-hover:scale-110 transition-transform duration-300",children:(0,Ge.jsx)(uu,{size:24,className:"text-white"})}),(0,Ge.jsxs)("div",{className:"text-right",children:[(0,Ge.jsx)("p",{className:"text-sm text-green-100 font-medium",children:"Total \xc9pargn\xe9"}),(0,Ge.jsx)("p",{className:"text-2xl font-bold mt-1",children:Yu(h.totalSaved)})]})]}),(0,Ge.jsxs)("div",{className:"flex items-center gap-2 pt-4 border-t border-white/20",children:[(0,Ge.jsx)(yh,{size:16,className:"text-green-200"}),(0,Ge.jsxs)("span",{className:"text-sm text-green-100",children:["Progression moyenne: ",h.averageProgress,"%"]})]})]}),(0,Ge.jsx)("div",{className:"bg-white rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-100",children:(0,Ge.jsxs)("div",{className:"space-y-3",children:[(0,Ge.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Ge.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Ge.jsx)(et,{size:18,className:"text-green-600"}),(0,Ge.jsx)("span",{className:"text-sm text-gray-600",children:"Termin\xe9s"})]}),(0,Ge.jsx)("span",{className:"text-lg font-bold text-gray-900",children:h.completedPlans})]}),(0,Ge.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Ge.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Ge.jsx)(Sh,{size:18,className:"text-red-600"}),(0,Ge.jsx)("span",{className:"text-sm text-gray-600",children:"Suspendus"})]}),(0,Ge.jsx)("span",{className:"text-lg font-bold text-gray-900",children:h.suspendedPlans})]}),(0,Ge.jsxs)("div",{className:"flex items-center justify-between pt-3 border-t border-gray-100",children:[(0,Ge.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Ge.jsx)(fh,{size:18,className:"text-purple-600"}),(0,Ge.jsx)("span",{className:"text-sm text-gray-600",children:"Taux de r\xe9ussite"})]}),(0,Ge.jsxs)("span",{className:"text-lg font-bold text-purple-600",children:[h.totalPlans>0?Math.round(h.completedPlans/h.totalPlans*100):0,"%"]})]})]})})]}),(0,Ge.jsx)("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 p-4 mb-6",children:(0,Ge.jsxs)("div",{className:"relative",children:[(0,Ge.jsx)(Nh,{size:20,className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,Ge.jsx)("input",{type:"text",placeholder:"Rechercher par nom, email ou t\xe9l\xe9phone...",value:p,onChange:e=>f(e.target.value),className:"w-full pl-12 pr-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-transparent font-montserrat"})]})}),(0,Ge.jsxs)("div",{className:"space-y-4",children:[(0,Ge.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,Ge.jsxs)("h2",{className:"text-xl font-bold text-gray-900 font-montserrat",children:["Plans d'\xe9pargne (",b.length,")"]})}),0===b.length?(0,Ge.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 p-12 text-center",children:[(0,Ge.jsx)(ph,{size:64,className:"mx-auto text-gray-300 mb-4"}),(0,Ge.jsx)("p",{className:"text-gray-500 font-medium",children:"Aucun plan d'\xe9pargne trouv\xe9"}),p&&(0,Ge.jsx)("button",{onClick:()=>f(""),className:"mt-4 text-green-600 hover:text-green-700 font-medium",children:"Effacer la recherche"})]}):(0,Ge.jsx)("div",{className:"grid grid-cols-1 gap-4",children:b.map(e=>{var t,n,s,r,a,i,o,l;return(0,Ge.jsx)("div",{className:"bg-white rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-100 overflow-hidden group",children:(0,Ge.jsxs)("div",{className:"p-6",children:[(0,Ge.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,Ge.jsxs)("div",{className:"flex items-center gap-4",children:[(0,Ge.jsxs)("div",{className:"w-12 h-12 bg-gradient-to-br from-green-400 to-blue-500 rounded-full flex items-center justify-center text-white font-bold text-lg shadow-lg",children:[(null===(t=e.user)||void 0===t||null===(n=t.first_name)||void 0===n?void 0:n[0])||"?",(null===(s=e.user)||void 0===s||null===(r=s.last_name)||void 0===r?void 0:r[0])||""]}),(0,Ge.jsxs)("div",{children:[(0,Ge.jsxs)("h3",{className:"text-lg font-bold text-gray-900 font-montserrat",children:[(null===(a=e.user)||void 0===a?void 0:a.first_name)||"Inconnu"," ",(null===(i=e.user)||void 0===i?void 0:i.last_name)||""]}),(0,Ge.jsxs)("div",{className:"flex items-center gap-3 mt-1",children:[(0,Ge.jsxs)("div",{className:"flex items-center gap-1 text-sm text-gray-500",children:[(0,Ge.jsx)(Ru,{size:14}),(null===(o=e.user)||void 0===o?void 0:o.email)||"N/A"]}),(null===(l=e.user)||void 0===l?void 0:l.phone_number)&&(0,Ge.jsxs)("div",{className:"flex items-center gap-1 text-sm text-gray-500",children:[(0,Ge.jsx)(Iu,{size:14}),e.user.phone_number]})]})]})]}),y(e)]}),(0,Ge.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[(0,Ge.jsxs)("div",{className:"bg-gray-50 rounded-xl p-3",children:[(0,Ge.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,Ge.jsx)(Oh,{size:16,className:"text-blue-600"}),(0,Ge.jsx)("p",{className:"text-xs text-gray-600 font-medium",children:"Objectif"})]}),(0,Ge.jsx)("p",{className:"text-lg font-bold text-gray-900",children:Yu(e.target_amount)})]}),(0,Ge.jsxs)("div",{className:"bg-green-50 rounded-xl p-3",children:[(0,Ge.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,Ge.jsx)(uu,{size:16,className:"text-green-600"}),(0,Ge.jsx)("p",{className:"text-xs text-gray-600 font-medium",children:"\xc9pargn\xe9"})]}),(0,Ge.jsx)("p",{className:"text-lg font-bold text-green-700",children:Yu(e.current_balance||0)})]}),(0,Ge.jsxs)("div",{className:"bg-purple-50 rounded-xl p-3",children:[(0,Ge.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,Ge.jsx)(xh,{size:16,className:"text-purple-600"}),(0,Ge.jsx)("p",{className:"text-xs text-gray-600 font-medium",children:"Mensualit\xe9"})]}),(0,Ge.jsx)("p",{className:"text-lg font-bold text-purple-700",children:Yu(e.monthly_amount||0)})]}),(0,Ge.jsxs)("div",{className:"bg-orange-50 rounded-xl p-3",children:[(0,Ge.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,Ge.jsx)(Fh,{size:16,className:"text-orange-600"}),(0,Ge.jsx)("p",{className:"text-xs text-gray-600 font-medium",children:"Prochain d\xe9p\xf4t"})]}),(0,Ge.jsx)("p",{className:"text-sm font-bold text-orange-700",children:e.next_deposit_date?new Date(e.next_deposit_date).toLocaleDateString("fr-FR",{day:"2-digit",month:"short"}):"N/A"})]})]}),(0,Ge.jsxs)("div",{className:"mb-4",children:[(0,Ge.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,Ge.jsx)("span",{className:"text-sm font-medium text-gray-600",children:"Progression"}),(0,Ge.jsxs)("span",{className:"text-sm font-bold text-green-600",children:[e.progress,"%"]})]}),(0,Ge.jsx)("div",{className:"relative w-full h-3 bg-gray-200 rounded-full overflow-hidden",children:(0,Ge.jsx)("div",{className:"absolute top-0 left-0 h-full bg-gradient-to-r from-green-500 to-emerald-600 rounded-full transition-all duration-500",style:{width:"".concat(e.progress,"%")},children:(0,Ge.jsx)("div",{className:"absolute inset-0 bg-white/20 animate-pulse"})})})]}),(0,Ge.jsxs)("div",{className:"flex items-center justify-between pt-4 border-t border-gray-100",children:[(0,Ge.jsxs)("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[(0,Ge.jsxs)("span",{children:["Cr\xe9\xe9 il y a ",e.daysActive," jours"]}),e.is_overdue&&e.days_overdue>0&&(0,Ge.jsxs)("span",{className:"text-orange-600 font-medium",children:["\u26a0\ufe0f ",e.days_overdue," jour(s) de retard"]})]}),(0,Ge.jsxs)("button",{onClick:()=>g(e),className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white rounded-xl transition-all duration-200 shadow-md hover:shadow-lg group",children:[(0,Ge.jsx)(zu,{size:16}),(0,Ge.jsx)("span",{className:"text-sm font-medium",children:"D\xe9tails"})]})]})]})},e.id)})})]})]}),x&&(0,Ge.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:(0,Ge.jsxs)("div",{className:"bg-white rounded-3xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,Ge.jsx)("div",{className:"sticky top-0 bg-gradient-to-r from-green-500 to-emerald-600 text-white p-6 rounded-t-3xl",children:(0,Ge.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Ge.jsx)("h3",{className:"text-2xl font-bold",children:"D\xe9tails du plan"}),(0,Ge.jsx)("button",{onClick:()=>g(null),className:"p-2 hover:bg-white/20 rounded-full transition-colors",children:(0,Ge.jsx)(Sh,{size:24})})]})}),(0,Ge.jsxs)("div",{className:"p-6 space-y-6",children:[(0,Ge.jsxs)("div",{className:"bg-gray-50 rounded-2xl p-4",children:[(0,Ge.jsxs)("h4",{className:"font-bold text-gray-900 mb-3 flex items-center gap-2",children:[(0,Ge.jsx)(bh,{size:18}),"Informations client"]}),(0,Ge.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,Ge.jsxs)("p",{children:[(0,Ge.jsx)("span",{className:"font-medium",children:"Nom:"})," ",null===(e=x.user)||void 0===e?void 0:e.first_name," ",null===(n=x.user)||void 0===n?void 0:n.last_name]}),(0,Ge.jsxs)("p",{children:[(0,Ge.jsx)("span",{className:"font-medium",children:"Email:"})," ",null===(s=x.user)||void 0===s?void 0:s.email]}),(0,Ge.jsxs)("p",{children:[(0,Ge.jsx)("span",{className:"font-medium",children:"T\xe9l\xe9phone:"})," ",(null===(r=x.user)||void 0===r?void 0:r.phone_number)||"N/A"]})]})]}),(0,Ge.jsxs)("div",{className:"bg-green-50 rounded-2xl p-4",children:[(0,Ge.jsxs)("h4",{className:"font-bold text-gray-900 mb-3 flex items-center gap-2",children:[(0,Ge.jsx)(xh,{size:18}),"D\xe9tails financiers"]}),(0,Ge.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,Ge.jsxs)("div",{children:[(0,Ge.jsx)("p",{className:"text-gray-600",children:"Objectif"}),(0,Ge.jsx)("p",{className:"font-bold text-lg",children:Yu(x.target_amount)})]}),(0,Ge.jsxs)("div",{children:[(0,Ge.jsx)("p",{className:"text-gray-600",children:"\xc9pargn\xe9"}),(0,Ge.jsx)("p",{className:"font-bold text-lg text-green-600",children:Yu(x.current_balance||0)})]}),(0,Ge.jsxs)("div",{children:[(0,Ge.jsx)("p",{className:"text-gray-600",children:"Mensualit\xe9"}),(0,Ge.jsx)("p",{className:"font-bold",children:Yu(x.monthly_amount||0)})]}),(0,Ge.jsxs)("div",{children:[(0,Ge.jsx)("p",{className:"text-gray-600",children:"Fr\xe9quence"}),(0,Ge.jsx)("p",{className:"font-bold capitalize",children:x.deposit_frequency||"N/A"})]}),(0,Ge.jsxs)("div",{children:[(0,Ge.jsx)("p",{className:"text-gray-600",children:"Taux d'int\xe9r\xeat"}),(0,Ge.jsxs)("p",{className:"font-bold",children:[x.interest_rate||0,"%"]})]}),(0,Ge.jsxs)("div",{children:[(0,Ge.jsx)("p",{className:"text-gray-600",children:"Int\xe9r\xeats accumul\xe9s"}),(0,Ge.jsx)("p",{className:"font-bold text-purple-600",children:Yu(x.accumulated_interest||0)})]})]})]}),(0,Ge.jsxs)("div",{className:"bg-blue-50 rounded-2xl p-4",children:[(0,Ge.jsxs)("h4",{className:"font-bold text-gray-900 mb-3 flex items-center gap-2",children:[(0,Ge.jsx)(Fh,{size:18}),"Dates importantes"]}),(0,Ge.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,Ge.jsxs)("p",{children:[(0,Ge.jsx)("span",{className:"font-medium",children:"Cr\xe9\xe9 le:"})," ",new Date(x.created_at).toLocaleDateString("fr-FR")]}),(0,Ge.jsxs)("p",{children:[(0,Ge.jsx)("span",{className:"font-medium",children:"Prochain d\xe9p\xf4t:"})," ",x.next_deposit_date?new Date(x.next_deposit_date).toLocaleDateString("fr-FR"):"N/A"]}),x.is_overdue&&(0,Ge.jsxs)("p",{className:"text-orange-600 font-medium",children:["\u26a0\ufe0f En retard depuis ",x.days_overdue," jour(s)"]})]})]}),(0,Ge.jsxs)("div",{className:"bg-purple-50 rounded-2xl p-4",children:[(0,Ge.jsx)("h4",{className:"font-bold text-gray-900 mb-3",children:"Progression"}),(0,Ge.jsx)("div",{className:"relative w-full h-4 bg-gray-200 rounded-full overflow-hidden mb-2",children:(0,Ge.jsx)("div",{className:"absolute top-0 left-0 h-full bg-gradient-to-r from-green-500 to-emerald-600 rounded-full",style:{width:"".concat(x.progress,"%")}})}),(0,Ge.jsxs)("p",{className:"text-center font-bold text-2xl text-green-600",children:[x.progress,"%"]})]})]})]})})]})},Bh=Xe("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),Vh=()=>{const[e,n]=(0,t.useState)([]),[s,r]=(0,t.useState)(""),[a,i]=(0,t.useState)("approval"),[o,l]=(0,t.useState)(!1),[c,d]=(0,t.useState)(null),[u,h]=(0,t.useState)(!0);(0,t.useEffect)(()=>{m()},[]);const m=async()=>{try{h(!0);const e=await Be();if(e.success){const t=e.data.filter(e=>"approved"===e.status);n(t),console.log("[TEST_NOTIFICATIONS] Utilisateurs charg\xe9s:",t.length)}else console.error("[TEST_NOTIFICATIONS] Erreur chargement utilisateurs:",e.error)}catch(e){console.error("[TEST_NOTIFICATIONS] Erreur:",e)}finally{h(!1)}},p=e.find(e=>e.id===s);return(0,Ge.jsxs)("div",{className:"space-y-6",children:[(0,Ge.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Ge.jsxs)("div",{children:[(0,Ge.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Test des Notifications"}),(0,Ge.jsx)("p",{className:"text-gray-600",children:"Envoyer des notifications de test aux utilisateurs"})]}),(0,Ge.jsxs)(Vu,{onClick:m,variant:"outline",size:"sm",className:"flex items-center space-x-2",disabled:u,children:[(0,Ge.jsx)(mh,{size:16,className:u?"animate-spin":""}),(0,Ge.jsx)("span",{children:"Actualiser"})]})]}),(0,Ge.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,Ge.jsx)(Ah,{children:(0,Ge.jsxs)("div",{className:"p-6",children:[(0,Ge.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center space-x-2",children:[(0,Ge.jsx)(zn,{size:20,className:"text-primary-600"}),(0,Ge.jsx)("span",{children:"Configuration du test"})]}),(0,Ge.jsxs)("div",{className:"space-y-4",children:[(0,Ge.jsxs)("div",{children:[(0,Ge.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Utilisateur cible"}),u?(0,Ge.jsxs)("div",{className:"flex items-center space-x-2 text-gray-500",children:[(0,Ge.jsx)(oh,{size:16,className:"animate-spin"}),(0,Ge.jsx)("span",{children:"Chargement des utilisateurs..."})]}):(0,Ge.jsxs)("select",{value:s,onChange:e=>r(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[(0,Ge.jsx)("option",{value:"",children:"S\xe9lectionner un utilisateur"}),e.map(e=>(0,Ge.jsxs)("option",{value:e.id,children:[e.first_name," ",e.last_name," (",e.email,")"]},e.id))]}),p&&(0,Ge.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:[p.first_name," ",p.last_name," - ",p.email]})]}),(0,Ge.jsxs)("div",{children:[(0,Ge.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Type de notification"}),(0,Ge.jsx)("div",{className:"space-y-2",children:["approval","reminder","overdue"].map(e=>{const t=(e=>{const t={approval:{icon:(0,Ge.jsx)(et,{size:20,className:"text-green-600"}),title:"Pr\xeat approuv\xe9",description:"Notification de validation de pr\xeat",color:"text-green-600 bg-green-100"},reminder:{icon:(0,Ge.jsx)(Wd,{size:20,className:"text-blue-600"}),title:"Rappel de remboursement",description:"Notification de rappel avant \xe9ch\xe9ance",color:"text-blue-600 bg-blue-100"},overdue:{icon:(0,Ge.jsx)(wh,{size:20,className:"text-red-600"}),title:"Pr\xeat en retard",description:"Notification de pr\xeat en retard avec p\xe9nalit\xe9s",color:"text-red-600 bg-red-100"}};return t[e]||t.approval})(e);return(0,Ge.jsxs)("label",{className:"flex items-center space-x-3 p-3 border rounded-lg cursor-pointer hover:bg-gray-50",children:[(0,Ge.jsx)("input",{type:"radio",name:"testType",value:e,checked:a===e,onChange:e=>i(e.target.value),className:"text-primary-600 focus:ring-primary-500"}),(0,Ge.jsx)("div",{className:"p-2 rounded-lg ".concat(t.color),children:t.icon}),(0,Ge.jsxs)("div",{children:[(0,Ge.jsx)("p",{className:"font-medium text-gray-900",children:t.title}),(0,Ge.jsx)("p",{className:"text-sm text-gray-500",children:t.description})]})]},e)})})]}),(0,Ge.jsx)(Vu,{onClick:async()=>{if(s)try{l(!0),d(null);const e=(()=>"https://ab-pret-back.onrender.com")();console.log("[TEST_NOTIFICATIONS] Envoi notification de test...",{userId:s,testType:a,backendUrl:e});const t=await fetch("".concat(e,"/api/test-loan-notification"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:s,testType:a})}),n=await t.json();n.success?(d({type:"success",message:"Notification envoy\xe9e avec succ\xe8s !",details:n.details}),console.log("[TEST_NOTIFICATIONS] \u2705 Notification envoy\xe9e:",n.details)):(d({type:"error",message:n.error||"Erreur lors de l'envoi de la notification",details:null}),console.error("[TEST_NOTIFICATIONS] \u274c Erreur:",n.error))}catch(e){console.error("[TEST_NOTIFICATIONS] Erreur r\xe9seau:",e),d({type:"error",message:"Erreur de connexion au serveur",details:null})}finally{l(!1)}else alert("Veuillez s\xe9lectionner un utilisateur")},disabled:!s||o,className:"w-full flex items-center justify-center space-x-2",children:o?(0,Ge.jsxs)(Ge.Fragment,{children:[(0,Ge.jsx)(oh,{size:16,className:"animate-spin"}),(0,Ge.jsx)("span",{children:"Envoi en cours..."})]}):(0,Ge.jsxs)(Ge.Fragment,{children:[(0,Ge.jsx)(Bh,{size:16}),(0,Ge.jsx)("span",{children:"Envoyer la notification de test"})]})})]})]})}),(0,Ge.jsx)(Ah,{children:(0,Ge.jsxs)("div",{className:"p-6",children:[(0,Ge.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center space-x-2",children:[(0,Ge.jsx)(au,{size:20,className:"text-primary-600"}),(0,Ge.jsx)("span",{children:"R\xe9sultat du test"})]}),c?(0,Ge.jsx)(Vd.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"p-4 rounded-lg ".concat("success"===c.type?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"),children:(0,Ge.jsxs)("div",{className:"flex items-start space-x-3",children:["success"===c.type?(0,Ge.jsx)(et,{size:20,className:"text-green-600 mt-0.5"}):(0,Ge.jsx)(tt,{size:20,className:"text-red-600 mt-0.5"}),(0,Ge.jsxs)("div",{className:"flex-1",children:[(0,Ge.jsx)("p",{className:"font-medium ".concat("success"===c.type?"text-green-800":"text-red-800"),children:c.message}),c.details&&(0,Ge.jsxs)("div",{className:"mt-3 space-y-2 text-sm",children:[(0,Ge.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,Ge.jsxs)("div",{children:[(0,Ge.jsx)("span",{className:"font-medium text-gray-700",children:"Utilisateur:"}),(0,Ge.jsx)("p",{className:"text-gray-600",children:c.details.user})]}),(0,Ge.jsxs)("div",{children:[(0,Ge.jsx)("span",{className:"font-medium text-gray-700",children:"Email:"}),(0,Ge.jsx)("p",{className:"text-gray-600",children:c.details.email})]}),(0,Ge.jsxs)("div",{children:[(0,Ge.jsx)("span",{className:"font-medium text-gray-700",children:"Type:"}),(0,Ge.jsx)("p",{className:"text-gray-600",children:c.details.testType})]}),(0,Ge.jsxs)("div",{children:[(0,Ge.jsx)("span",{className:"font-medium text-gray-700",children:"Abonnements:"}),(0,Ge.jsx)("p",{className:"text-gray-600",children:c.details.subscriptionsFound})]}),(0,Ge.jsxs)("div",{children:[(0,Ge.jsx)("span",{className:"font-medium text-gray-700",children:"Envoy\xe9es:"}),(0,Ge.jsx)("p",{className:"text-gray-600",children:c.details.notificationsSent})]}),(0,Ge.jsxs)("div",{children:[(0,Ge.jsx)("span",{className:"font-medium text-gray-700",children:"Erreurs:"}),(0,Ge.jsx)("p",{className:"text-gray-600",children:c.details.errors})]})]}),c.details.notificationData&&(0,Ge.jsxs)("div",{className:"mt-3 p-3 bg-gray-100 rounded-lg",children:[(0,Ge.jsx)("p",{className:"font-medium text-gray-700 mb-1",children:"Contenu de la notification:"}),(0,Ge.jsxs)("p",{className:"text-sm text-gray-600",children:[(0,Ge.jsx)("strong",{children:"Titre:"})," ",c.details.notificationData.title]}),(0,Ge.jsxs)("p",{className:"text-sm text-gray-600",children:[(0,Ge.jsx)("strong",{children:"Message:"})," ",c.details.notificationData.body]})]})]})]})]})}):(0,Ge.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,Ge.jsx)(zn,{size:48,className:"mx-auto mb-4 opacity-50"}),(0,Ge.jsx)("p",{children:"Aucun test effectu\xe9"}),(0,Ge.jsx)("p",{className:"text-sm",children:"S\xe9lectionnez un utilisateur et envoyez une notification de test"})]})]})})]}),(0,Ge.jsx)(Ah,{children:(0,Ge.jsxs)("div",{className:"p-6",children:[(0,Ge.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Informations sur l'environnement"}),(0,Ge.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[(0,Ge.jsxs)("div",{children:[(0,Ge.jsx)("span",{className:"font-medium text-gray-700",children:"Environnement:"}),(0,Ge.jsx)("p",{className:"text-gray-600",children:"production"})]}),(0,Ge.jsxs)("div",{children:[(0,Ge.jsx)("span",{className:"font-medium text-gray-700",children:"Backend URL:"}),(0,Ge.jsx)("p",{className:"text-gray-600",children:"https://ab-pret-back.onrender.com"})]}),(0,Ge.jsxs)("div",{children:[(0,Ge.jsx)("span",{className:"font-medium text-gray-700",children:"Utilisateurs disponibles:"}),(0,Ge.jsxs)("p",{className:"text-gray-600",children:[e.length," utilisateurs approuv\xe9s"]})]})]})]})})]})},qh=Xe("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]),Hh=Xe("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]),Wh=Xe("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]),Gh=Xe("Check",[["polyline",{points:"20 6 9 17 4 12",key:"10jjfj"}]]),Kh={durations:[{value:5,label:"5 jours",days:5},{value:10,label:"10 jours",days:10},{value:15,label:"15 jours",days:15},{value:25,label:"25 jours",days:25},{value:30,label:"30 jours",days:30}],interestRates:{5:6,10:10,15:15,25:25,30:25},amounts:{min:1e3,max:5e5},monthlyIncome:{min:1e4,max:2e6},getInterestRate:function(e){return 25===e?25:30===e?(arguments.length>1&&void 0!==arguments[1]?arguments[1]:0)>=2e4?25:30:Kh.interestRates[e]||25},calculateInterest:(e,t)=>e*Kh.getInterestRate(t,e)/100,calculateTotalAmount:(e,t)=>e+Kh.calculateInterest(e,t),calculatePaymentAmount:(e,t)=>e,validateLoan:(e,t)=>{const n=[];e<Kh.amounts.min&&n.push("Le montant minimum est de ".concat(Kh.amounts.min.toLocaleString()," FCFA")),e>Kh.amounts.max&&n.push("Le montant maximum est de ".concat(Kh.amounts.max.toLocaleString()," FCFA"));const s=Kh.durations.map(e=>e.days);return s.includes(t)||n.push("Dur\xe9e de pr\xeat non valide"),{isValid:0===n.length,errors:n}},validateMonthlyIncome:e=>{const t=[];return e<Kh.monthlyIncome.min&&t.push("Le revenu mensuel minimum est de ".concat(Kh.monthlyIncome.min.toLocaleString()," FCFA")),e>Kh.monthlyIncome.max&&t.push("Le revenu mensuel maximum est de ".concat(Kh.monthlyIncome.max.toLocaleString()," FCFA")),{isValid:0===t.length,errors:t}}},Jh=()=>{const{user:e}=Je(),{showSuccess:s,showError:r}=it(),a=Y(),[i,o]=(0,t.useState)(1),[l,c]=(0,t.useState)({amount:"",duration:5,purpose:"",employmentStatus:"student",guarantee:"",momoNumber:"",momoNetwork:"",momoName:"",category:""}),[d,u]=(0,t.useState)(!1),[h,m]=(0,t.useState)(!1),[p,f]=(0,t.useState)(null),[x,g]=(0,t.useState)(!1),[v,y]=(0,t.useState)(!1),[b,j]=(0,t.useState)({}),[w,N]=(0,t.useState)(null),[k,S]=(0,t.useState)(!1),[E,_]=(0,t.useState)(!0);(0,t.useEffect)(()=>{C()},[null===e||void 0===e?void 0:e.id]);const C=async()=>{try{_(!0);const t=await qe(e.id);if(t.success){const e=(t.data||[]).find(e=>"active"===e.status||"approved"===e.status||"overdue"===e.status);S(!!e),e&&("overdue"===e.status?r("Vous ne pouvez pas demander un nouveau pr\xeat tant que votre pr\xeat en retard n'est pas rembours\xe9."):r("Vous avez d\xe9j\xe0 un pr\xeat en cours. Vous devez le rembourser avant de faire une nouvelle demande."))}}catch(t){console.error("[LOAN_REQUEST] Erreur:",t)}finally{_(!1)}};(0,t.useEffect)(()=>{l.amount&&l.duration&&P()},[l.amount,l.duration]);const P=()=>{const e=parseFloat(l.amount),t=parseInt(l.duration);if(!e||e<Kh.amounts.min||e>Kh.amounts.max)return void N(null);const n=Kh.getInterestRate(t,e),s=Math.round(Kh.calculateInterest(e,t)),r=Math.round(Kh.calculateTotalAmount(e,t));N({principal:e,interest:s,totalAmount:r,interestRate:n,duration:t})},T=[{id:"education",name:"\xc9ducation",icon:qh,color:"from-blue-500 to-blue-600",bgColor:"bg-blue-50",iconColor:"text-blue-600"},{id:"business",name:"Entreprise",icon:Hh,color:"from-green-500 to-green-600",bgColor:"bg-green-50",iconColor:"text-green-600"},{id:"housing",name:"Logement",icon:ru,color:"from-orange-500 to-orange-600",bgColor:"bg-orange-50",iconColor:"text-orange-600"},{id:"personal",name:"Personnel",icon:Dn,color:"from-purple-500 to-purple-600",bgColor:"bg-purple-50",iconColor:"text-purple-600"},{id:"health",name:"Sant\xe9",icon:Wh,color:"from-pink-500 to-pink-600",bgColor:"bg-pink-50",iconColor:"text-pink-600"}],A=e=>{const{name:t,value:n}=e.target;c(De(De({},l),{},{[t]:n})),b[t]&&j(De(De({},b),{},{[t]:""}))},I=e=>{const t={};if(1===e&&(l.category||(t.category="Veuillez s\xe9lectionner une cat\xe9gorie")),2===e){const e=parseFloat(l.amount);!e||e<Kh.amounts.min?t.amount="Le montant minimum est ".concat(Yu(Kh.amounts.min)):e>Kh.amounts.max&&(t.amount="Le montant maximum est ".concat(Yu(Kh.amounts.max)))}return 3===e&&((!l.purpose||l.purpose.trim().length<10)&&(t.purpose="Veuillez d\xe9crire l'utilisation du pr\xeat (min. 10 caract\xe8res)"),l.guarantee||(t.guarantee="Veuillez s\xe9lectionner une garantie")),4===e&&((!l.momoNumber||l.momoNumber.trim().length<8)&&(t.momoNumber="Num\xe9ro Mobile Money invalide"),l.momoNetwork||(t.momoNetwork="Veuillez s\xe9lectionner votre op\xe9rateur"),(!l.momoName||l.momoName.trim().length<3)&&(t.momoName="Veuillez entrer le nom du compte Mobile Money")),j(t),0===Object.keys(t).length},R=async()=>{if(p)try{const e=await fetch("".concat(Fe,"/api/generate-pdf/").concat(p));if(!e.ok)throw new Error("Erreur lors de la g\xe9n\xe9ration du PDF");const t=await e.blob(),n=window.URL.createObjectURL(t),r=document.createElement("a");r.href=n,r.download="engagement-pret-".concat(p,".pdf"),document.body.appendChild(r),r.click(),window.URL.revokeObjectURL(n),document.body.removeChild(r),g(!0),s("PDF t\xe9l\xe9charg\xe9 avec succ\xe8s !")}catch(e){console.error("[PDF] Erreur:",e),r("Erreur lors du t\xe9l\xe9chargement du PDF")}else r("ID de pr\xeat manquant")};if(E)return(0,Ge.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 flex items-center justify-center",children:(0,Ge.jsxs)("div",{className:"text-center",children:[(0,Ge.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-blue-500 border-t-transparent mx-auto mb-4"}),(0,Ge.jsx)("p",{className:"text-gray-600 font-medium",children:"V\xe9rification..."})]})});if(h)return(0,Ge.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 flex items-center justify-center p-4",children:(0,Ge.jsxs)("div",{className:"bg-white rounded-3xl shadow-2xl p-8 max-w-md w-full text-center",children:[(0,Ge.jsx)("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,Ge.jsx)(et,{size:40,className:"text-green-600"})}),(0,Ge.jsx)("h2",{className:"text-3xl font-bold text-gray-900 mb-4 font-montserrat",children:"Demande envoy\xe9e !"}),(0,Ge.jsx)("p",{className:"text-gray-600 mb-6 font-montserrat",children:"Votre demande de pr\xeat a \xe9t\xe9 soumise avec succ\xe8s. Nous l'examinerons dans les plus brefs d\xe9lais."}),!x&&(0,Ge.jsx)("div",{className:"bg-blue-50 border-l-4 border-blue-500 p-4 rounded-lg mb-6 text-left",children:(0,Ge.jsxs)("div",{className:"flex items-start gap-3",children:[(0,Ge.jsx)(cu,{size:24,className:"text-blue-600 flex-shrink-0 mt-0.5"}),(0,Ge.jsxs)("div",{children:[(0,Ge.jsx)("h3",{className:"font-bold text-blue-900 mb-1",children:"Document d'engagement"}),(0,Ge.jsx)("p",{className:"text-sm text-blue-700 mb-3",children:"Veuillez t\xe9l\xe9charger et signer votre document d'engagement de pr\xeat."}),(0,Ge.jsxs)("button",{onClick:R,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-all duration-200 text-sm",children:[(0,Ge.jsx)(cu,{size:18}),(0,Ge.jsx)("span",{children:"T\xe9l\xe9charger le PDF"})]})]})]})}),x&&(0,Ge.jsx)("div",{className:"bg-green-50 border-l-4 border-green-500 p-4 rounded-lg mb-6 text-left",children:(0,Ge.jsxs)("div",{className:"flex items-start gap-3",children:[(0,Ge.jsx)(et,{size:24,className:"text-green-600 flex-shrink-0 mt-0.5"}),(0,Ge.jsxs)("div",{children:[(0,Ge.jsx)("h3",{className:"font-bold text-green-900 mb-1",children:"PDF t\xe9l\xe9charg\xe9"}),(0,Ge.jsx)("p",{className:"text-sm text-green-700",children:"Veuillez signer le document et le conserver pr\xe9cieusement."})]})]})}),(0,Ge.jsxs)("button",{onClick:()=>a("/dashboard"),className:"w-full flex items-center justify-center gap-2 px-6 py-3 bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white rounded-xl font-medium transition-all duration-200",children:[(0,Ge.jsx)(Qu,{size:20}),(0,Ge.jsx)("span",{children:"Retour au tableau de bord"})]})]})});const O=[{number:1,title:"Cat\xe9gorie",icon:cu},{number:2,title:"Montant",icon:xh},{number:3,title:"D\xe9tails",icon:cu},{number:4,title:"Paiement",icon:au}];return(0,Ge.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 pb-24",children:[(0,Ge.jsx)("div",{className:"bg-white/80 backdrop-blur-lg shadow-lg border-b border-white/50 sticky top-0 z-30",children:(0,Ge.jsxs)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[(0,Ge.jsx)("div",{className:"flex items-center justify-between",children:(0,Ge.jsxs)("div",{className:"flex items-center gap-4",children:[(0,Ge.jsx)("button",{onClick:()=>a("/dashboard"),className:"p-2 hover:bg-gray-100 rounded-xl transition-colors",children:(0,Ge.jsx)(Qu,{size:24,className:"text-gray-700"})}),(0,Ge.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Ge.jsx)("div",{className:"p-3 bg-gradient-to-br from-blue-500 to-purple-600 rounded-2xl shadow-lg",children:(0,Ge.jsx)(au,{size:32,className:"text-white"})}),(0,Ge.jsxs)("div",{children:[(0,Ge.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900 font-montserrat",children:"Demande de pr\xeat"}),(0,Ge.jsxs)("p",{className:"text-sm text-gray-600 font-montserrat",children:["\xc9tape ",i," sur ",4]})]})]})]})}),(0,Ge.jsx)("div",{className:"mt-6",children:(0,Ge.jsx)("div",{className:"flex items-center justify-between",children:O.map((e,n)=>(0,Ge.jsxs)(t.Fragment,{children:[(0,Ge.jsxs)("div",{className:"flex flex-col items-center",children:[(0,Ge.jsx)("div",{className:"w-12 h-12 rounded-full flex items-center justify-center transition-all duration-300 ".concat(i>e.number?"bg-green-500 text-white":i===e.number?"bg-gradient-to-br from-blue-500 to-purple-600 text-white":"bg-gray-200 text-gray-500"),children:i>e.number?(0,Ge.jsx)(Gh,{size:24}):(0,Ge.jsx)(e.icon,{size:24})}),(0,Ge.jsx)("p",{className:"text-xs mt-2 font-medium ".concat(i>=e.number?"text-gray-900":"text-gray-500"),children:e.title})]}),n<O.length-1&&(0,Ge.jsx)("div",{className:"flex-1 h-1 mx-2 transition-all duration-300 ".concat(i>e.number?"bg-green-500":"bg-gray-200")})]},e.number))})})]})}),(0,Ge.jsxs)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[k&&(0,Ge.jsx)("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 rounded-lg mb-6",children:(0,Ge.jsxs)("div",{className:"flex items-start gap-3",children:[(0,Ge.jsx)(tt,{size:24,className:"text-red-600 flex-shrink-0 mt-0.5"}),(0,Ge.jsxs)("div",{children:[(0,Ge.jsx)("h3",{className:"font-bold text-red-900 mb-1",children:"Pr\xeat actif d\xe9tect\xe9"}),(0,Ge.jsx)("p",{className:"text-sm text-red-700",children:"Vous avez d\xe9j\xe0 un pr\xeat en cours. Vous devez le rembourser avant de faire une nouvelle demande."})]})]})}),(0,Ge.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),x)if(I(i))if(k)r("Vous avez d\xe9j\xe0 un pr\xeat en cours");else{u(!0);try{const t=parseFloat(l.amount),n=parseInt(l.duration),r=Kh.getInterestRate(n,t),a={user_id:e.id,amount:t,duration:n,duration_months:n,interest_rate:r,purpose:l.purpose,employment_status:l.employmentStatus,guarantee:l.guarantee,momo_number:l.momoNumber,momo_network:l.momoNetwork,momo_name:l.momoName,loan_type:l.category,status:"pending"};console.log("[LOAN_REQUEST] Envoi vers:","".concat(Fe,"/api/loans")),console.log("[LOAN_REQUEST] Donn\xe9es:",a);const i=await fetch("".concat(Fe,"/api/loans"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(console.log("[LOAN_REQUEST] Status:",i.status),!i.ok){const e=await i.text();throw console.error("[LOAN_REQUEST] Erreur r\xe9ponse:",e),new Error("Erreur serveur: ".concat(i.status))}const o=await i.json();if(console.log("[LOAN_REQUEST] R\xe9ponse:",o),!o.success||!o.loan)throw new Error(o.error||"Erreur lors de la soumission");f(o.loan.id),m(!0),s("Demande de pr\xeat soumise avec succ\xe8s !")}catch(n){console.error("[LOAN_REQUEST] Erreur:",n),r(n.message||"Erreur lors de la soumission de la demande")}finally{u(!1)}}else r("Veuillez corriger les erreurs dans le formulaire");else r("Veuillez t\xe9l\xe9charger le PDF d'engagement avant de soumettre")},children:[1===i&&(0,Ge.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 p-6",children:[(0,Ge.jsxs)("h2",{className:"text-xl font-bold text-gray-900 mb-4 font-montserrat flex items-center gap-2",children:[(0,Ge.jsx)(cu,{size:24,className:"text-blue-600"}),"S\xe9lectionnez la cat\xe9gorie de votre pr\xeat"]}),(0,Ge.jsx)("p",{className:"text-gray-600 mb-6",children:"Choisissez la cat\xe9gorie qui correspond le mieux \xe0 votre besoin"}),(0,Ge.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-5 gap-4",children:T.map(e=>(0,Ge.jsxs)("button",{type:"button",onClick:()=>{return t=e.id,c(e=>De(De({},e),{},{category:t})),void j(e=>De(De({},e),{},{category:""}));var t},className:"p-6 rounded-xl border-2 transition-all duration-200 ".concat(l.category===e.id?"border-blue-500 bg-blue-50 shadow-md scale-105":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"),children:[(0,Ge.jsx)("div",{className:"w-16 h-16 ".concat(e.bgColor," rounded-xl flex items-center justify-center mx-auto mb-3"),children:(0,Ge.jsx)(e.icon,{size:32,className:e.iconColor})}),(0,Ge.jsx)("p",{className:"text-sm font-medium text-gray-900 text-center",children:e.name})]},e.id))}),b.category&&(0,Ge.jsx)("p",{className:"text-red-500 text-sm mt-4",children:b.category})]}),2===i&&(0,Ge.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 p-6",children:[(0,Ge.jsxs)("h2",{className:"text-xl font-bold text-gray-900 mb-4 font-montserrat flex items-center gap-2",children:[(0,Ge.jsx)(xh,{size:24,className:"text-green-600"}),"Montant et dur\xe9e du pr\xeat"]}),(0,Ge.jsx)("p",{className:"text-gray-600 mb-6",children:"Indiquez le montant souhait\xe9 et la dur\xe9e de remboursement"}),(0,Ge.jsxs)("div",{className:"space-y-6",children:[(0,Ge.jsxs)("div",{children:[(0,Ge.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Montant souhait\xe9 ",(0,Ge.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Ge.jsxs)("div",{className:"relative",children:[(0,Ge.jsx)(xh,{size:18,className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,Ge.jsx)("input",{type:"number",name:"amount",value:l.amount,onChange:A,placeholder:"Ex: 50000",min:Kh.amounts.min,max:Kh.amounts.max,className:"w-full pl-12 pr-4 py-3 border rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all ".concat(b.amount?"border-red-500 bg-red-50":"border-gray-200")})]}),b.amount&&(0,Ge.jsx)("p",{className:"text-red-500 text-sm mt-1",children:b.amount}),(0,Ge.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Min: ",Yu(Kh.amounts.min)," - Max: ",Yu(Kh.amounts.max)]})]}),(0,Ge.jsxs)("div",{children:[(0,Ge.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Dur\xe9e ",(0,Ge.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Ge.jsxs)("div",{className:"relative",children:[(0,Ge.jsx)(Fh,{size:18,className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,Ge.jsx)("select",{name:"duration",value:l.duration,onChange:A,className:"w-full pl-12 pr-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all appearance-none bg-white",children:Kh.durations.map(e=>(0,Ge.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,Ge.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Choisissez la dur\xe9e de remboursement"})]}),w&&(0,Ge.jsxs)("div",{className:"mt-6 p-6 bg-gradient-to-r from-blue-50 to-purple-50 rounded-xl border border-blue-200",children:[(0,Ge.jsx)("h3",{className:"font-bold text-gray-900 mb-4",children:"R\xe9capitulatif"}),(0,Ge.jsxs)("div",{className:"space-y-3",children:[(0,Ge.jsxs)("div",{className:"flex justify-between",children:[(0,Ge.jsx)("span",{className:"text-gray-600",children:"Montant demand\xe9"}),(0,Ge.jsx)("span",{className:"font-bold text-gray-900",children:Yu(w.principal)})]}),(0,Ge.jsxs)("div",{className:"flex justify-between",children:[(0,Ge.jsxs)("span",{className:"text-gray-600",children:["Int\xe9r\xeats (",w.interestRate,"%)"]}),(0,Ge.jsx)("span",{className:"font-bold text-orange-600",children:Yu(w.interest)})]}),(0,Ge.jsxs)("div",{className:"border-t border-gray-300 pt-3 flex justify-between",children:[(0,Ge.jsx)("span",{className:"font-bold text-gray-900",children:"Montant total \xe0 rembourser"}),(0,Ge.jsx)("span",{className:"font-bold text-2xl text-blue-600",children:Yu(w.totalAmount)})]}),(0,Ge.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,Ge.jsx)("span",{className:"text-gray-600",children:"Dur\xe9e"}),(0,Ge.jsxs)("span",{className:"font-medium text-gray-900",children:[w.duration," jours"]})]})]})]})]})]}),3===i&&(0,Ge.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 p-6",children:[(0,Ge.jsxs)("h2",{className:"text-xl font-bold text-gray-900 mb-4 font-montserrat flex items-center gap-2",children:[(0,Ge.jsx)(cu,{size:24,className:"text-purple-600"}),"D\xe9tails de la demande"]}),(0,Ge.jsx)("p",{className:"text-gray-600 mb-6",children:"Fournissez plus d'informations sur votre demande"}),(0,Ge.jsxs)("div",{className:"space-y-6",children:[(0,Ge.jsxs)("div",{children:[(0,Ge.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Utilisation du pr\xeat ",(0,Ge.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Ge.jsx)("textarea",{name:"purpose",value:l.purpose,onChange:A,placeholder:"D\xe9crivez pr\xe9cis\xe9ment l'utilisation du pr\xeat...",rows:"4",className:"w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all ".concat(b.purpose?"border-red-500 bg-red-50":"border-gray-200")}),b.purpose&&(0,Ge.jsx)("p",{className:"text-red-500 text-sm mt-1",children:b.purpose})]}),(0,Ge.jsxs)("div",{children:[(0,Ge.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Statut professionnel ",(0,Ge.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Ge.jsxs)("select",{name:"employmentStatus",value:l.employmentStatus,onChange:A,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",children:[(0,Ge.jsx)("option",{value:"student",children:"\xc9tudiant"}),(0,Ge.jsx)("option",{value:"self-employed",children:"Ind\xe9pendant"}),(0,Ge.jsx)("option",{value:"employed",children:"Salari\xe9"}),(0,Ge.jsx)("option",{value:"unemployed",children:"Sans emploi"})]})]}),(0,Ge.jsxs)("div",{children:[(0,Ge.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Garantie ",(0,Ge.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Ge.jsxs)("select",{name:"guarantee",value:l.guarantee,onChange:A,className:"w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all ".concat(b.guarantee?"border-red-500 bg-red-50":"border-gray-200"),children:[(0,Ge.jsx)("option",{value:"",children:"S\xe9lectionnez votre garantie"}),(0,Ge.jsx)("option",{value:"\ud83d\udcf1 T\xe9l\xe9phone portable",children:"\ud83d\udcf1 T\xe9l\xe9phone portable"}),(0,Ge.jsx)("option",{value:"\ud83d\udcbb Ordinateur portable",children:"\ud83d\udcbb Ordinateur portable"}),(0,Ge.jsx)("option",{value:"\ud83d\udd25 Bouteille de gaz",children:"\ud83d\udd25 Bouteille de gaz"}),(0,Ge.jsx)("option",{value:"\ud83e\ude99 Montre connect\xe9e ou classique de valeur",children:"\ud83e\ude99 Montre connect\xe9e ou classique de valeur"}),(0,Ge.jsx)("option",{value:"\ud83d\udcf7 Tablette",children:"\ud83d\udcf7 Tablette"}),(0,Ge.jsx)("option",{value:"\ud83c\udfa7 \xc9couteurs ou casque Bluetooth",children:"\ud83c\udfa7 \xc9couteurs ou casque Bluetooth"}),(0,Ge.jsx)("option",{value:"\ud83e\uddf3 Petit ventilateur ou cuisini\xe8re \xe9lectrique",children:"\ud83e\uddf3 Petit ventilateur ou cuisini\xe8re \xe9lectrique"}),(0,Ge.jsx)("option",{value:"\ud83d\udcbe Disque dur externe ou cl\xe9 USB haut de gamme",children:"\ud83d\udcbe Disque dur externe ou cl\xe9 USB haut de gamme"}),(0,Ge.jsx)("option",{value:"\ud83e\ude91 Petit appareil \xe9lectrom\xe9nager (fer \xe0 repasser, mixeur, etc.)",children:"\ud83e\ude91 Petit appareil \xe9lectrom\xe9nager (fer \xe0 repasser, mixeur, etc.)"})]}),b.guarantee&&(0,Ge.jsx)("p",{className:"text-red-500 text-sm mt-1",children:b.guarantee})]})]})]}),4===i&&(0,Ge.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 p-6",children:[(0,Ge.jsxs)("h2",{className:"text-xl font-bold text-gray-900 mb-4 font-montserrat flex items-center gap-2",children:[(0,Ge.jsx)(au,{size:24,className:"text-green-600"}),"Informations Mobile Money"]}),(0,Ge.jsx)("p",{className:"text-gray-600 mb-6",children:"Indiquez vos coordonn\xe9es de paiement Mobile Money"}),(0,Ge.jsxs)("div",{className:"space-y-6",children:[(0,Ge.jsxs)("div",{children:[(0,Ge.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Op\xe9rateur ",(0,Ge.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Ge.jsxs)("select",{name:"momoNetwork",value:l.momoNetwork,onChange:A,className:"w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all ".concat(b.momoNetwork?"border-red-500 bg-red-50":"border-gray-200"),children:[(0,Ge.jsx)("option",{value:"",children:"S\xe9lectionnez votre op\xe9rateur"}),(0,Ge.jsx)("option",{value:"MTN",children:"MTN Mobile Money"}),(0,Ge.jsx)("option",{value:"Moov",children:"Moov Money"}),(0,Ge.jsx)("option",{value:"Celtiis",children:"Celtiis Cash"})]}),b.momoNetwork&&(0,Ge.jsx)("p",{className:"text-red-500 text-sm mt-1",children:b.momoNetwork})]}),(0,Ge.jsxs)("div",{children:[(0,Ge.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Num\xe9ro Mobile Money ",(0,Ge.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Ge.jsx)("input",{type:"tel",name:"momoNumber",value:l.momoNumber,onChange:A,placeholder:"Ex: 97123456",className:"w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all ".concat(b.momoNumber?"border-red-500 bg-red-50":"border-gray-200")}),b.momoNumber&&(0,Ge.jsx)("p",{className:"text-red-500 text-sm mt-1",children:b.momoNumber})]}),(0,Ge.jsxs)("div",{children:[(0,Ge.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Nom du compte ",(0,Ge.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Ge.jsx)("input",{type:"text",name:"momoName",value:l.momoName,onChange:A,placeholder:"Nom complet du titulaire",className:"w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all ".concat(b.momoName?"border-red-500 bg-red-50":"border-gray-200")}),b.momoName&&(0,Ge.jsx)("p",{className:"text-red-500 text-sm mt-1",children:b.momoName})]})]}),!x&&(0,Ge.jsx)("div",{className:"mt-6 bg-blue-50 border-l-4 border-blue-500 p-4 rounded-lg",children:(0,Ge.jsxs)("div",{className:"flex items-start gap-3",children:[(0,Ge.jsx)(cu,{size:24,className:"text-blue-600 flex-shrink-0 mt-0.5"}),(0,Ge.jsxs)("div",{className:"flex-1",children:[(0,Ge.jsx)("h3",{className:"font-bold text-blue-900 mb-1",children:"Document d'engagement requis"}),(0,Ge.jsx)("p",{className:"text-sm text-blue-700 mb-3",children:"Avant de soumettre votre demande, vous devez t\xe9l\xe9charger et signer le document d'engagement de pr\xeat."}),(0,Ge.jsx)("button",{type:"button",onClick:async()=>{try{var t,a;u(!0);const{supabase:r}=await Promise.resolve().then(n.bind(n,197)),{data:i,error:o}=await r.from("users").select("*").eq("id",e.id).single();if(o)throw console.error("[PDF] Erreur r\xe9cup\xe9ration utilisateur:",o),new Error("Impossible de r\xe9cup\xe9rer vos informations");const c=parseFloat(l.amount),d=parseInt(l.duration),h=Kh.getInterestRate(d,c),m=Math.round(Kh.calculateInterest(c,d)),p=Math.round(Kh.calculateTotalAmount(c,d)),f={user:{first_name:i.first_name||(null===(t=e.user_metadata)||void 0===t?void 0:t.first_name),last_name:i.last_name||(null===(a=e.user_metadata)||void 0===a?void 0:a.last_name),email:i.email||e.email,phone_number:i.phone_number||e.phone,temoin_name:i.temoin_name,temoin_phone:i.temoin_phone,temoin_quartier:i.temoin_quartier,temoin_email:i.temoin_email},loan:{amount:c,duration:d,interest_rate:h,purpose:l.purpose,guarantee:l.guarantee,category:l.category},calculation:{interest:m,totalAmount:p}},x=await fetch("".concat(Fe,"/api/generate-preview-pdf"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(f)});if(!x.ok)throw new Error("Erreur lors de la g\xe9n\xe9ration du PDF");const v=await x.blob(),y=window.URL.createObjectURL(v),b=document.createElement("a");b.href=y,b.download="engagement-pret-preview.pdf",document.body.appendChild(b),b.click(),window.URL.revokeObjectURL(y),document.body.removeChild(b),g(!0),s("PDF t\xe9l\xe9charg\xe9 avec succ\xe8s ! Vous pouvez maintenant soumettre votre demande.")}catch(i){console.error("[PDF] Erreur:",i),r("Erreur lors de la g\xe9n\xe9ration du PDF")}finally{u(!1)}},disabled:d,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-all duration-200 text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:d?(0,Ge.jsxs)(Ge.Fragment,{children:[(0,Ge.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"}),(0,Ge.jsx)("span",{children:"G\xe9n\xe9ration..."})]}):(0,Ge.jsxs)(Ge.Fragment,{children:[(0,Ge.jsx)(cu,{size:18}),(0,Ge.jsx)("span",{children:"T\xe9l\xe9charger le PDF d'engagement"})]})})]})]})}),x&&(0,Ge.jsx)("div",{className:"mt-6 bg-green-50 border-l-4 border-green-500 p-4 rounded-lg",children:(0,Ge.jsxs)("div",{className:"flex items-start gap-3",children:[(0,Ge.jsx)(et,{size:24,className:"text-green-600 flex-shrink-0 mt-0.5"}),(0,Ge.jsxs)("div",{children:[(0,Ge.jsx)("h3",{className:"font-bold text-green-900 mb-1",children:"PDF t\xe9l\xe9charg\xe9 \u2713"}),(0,Ge.jsx)("p",{className:"text-sm text-green-700",children:"Vous pouvez maintenant soumettre votre demande. Veuillez signer le document et le conserver pr\xe9cieusement."})]})]})})]}),(0,Ge.jsxs)("div",{className:"flex justify-between items-center mt-8",children:[(0,Ge.jsxs)("button",{type:"button",onClick:()=>{o(e=>Math.max(e-1,1))},disabled:1===i,className:"flex items-center gap-2 px-6 py-3 rounded-xl font-medium transition-all duration-200 ".concat(1===i?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:[(0,Ge.jsx)(Qu,{size:20}),(0,Ge.jsx)("span",{children:"Pr\xe9c\xe9dent"})]}),i<4?(0,Ge.jsxs)("button",{type:"button",onClick:()=>{I(i)?o(e=>Math.min(e+1,4)):r("Veuillez corriger les erreurs avant de continuer")},className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white rounded-xl font-medium transition-all duration-200 shadow-lg hover:shadow-xl",children:[(0,Ge.jsx)("span",{children:"Suivant"}),(0,Ge.jsx)(Fn,{size:20})]}):(0,Ge.jsx)("button",{type:"submit",disabled:d||k,className:"flex items-center gap-2 px-8 py-3 bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white rounded-xl font-bold transition-all duration-200 shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed",children:d?(0,Ge.jsxs)(Ge.Fragment,{children:[(0,Ge.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-white border-t-transparent"}),(0,Ge.jsx)("span",{children:"Envoi en cours..."})]}):(0,Ge.jsxs)(Ge.Fragment,{children:[(0,Ge.jsx)(Bh,{size:20}),(0,Ge.jsx)("span",{children:"Soumettre la demande"})]})})]})]})]})]})},Zh=()=>{const{notifications:e,markAsRead:n}=it(),{user:s}=Je(),r=Y(),[a,i]=(0,t.useState)([]),[o,l]=(0,t.useState)(!0),[c,d]=(0,t.useState)(""),[u,h]=(0,t.useState)("all"),[m,p]=(0,t.useState)({totalLoans:0,totalBorrowed:0,totalRepaid:0,activeLoans:0,completedLoans:0,pendingLoans:0,rejectedLoans:0});(0,t.useEffect)(()=>{(async()=>{if(null!==s&&void 0!==s&&s.id)try{l(!0);const[e,t]=await Promise.all([qe(s.id),We(s.id)]);if(e.success&&t.success){const n=e.data||[],s=t.data||[],r=n.map(e=>{const t=s.filter(t=>t.loan_id===e.id).reduce((e,t)=>e+(t.amount||0),0),n=e.amount?e.amount*(1+(e.interest_rate||0)/100):0;let r=null;if("active"===e.status||"completed"===e.status){const t=new Date(e.created_at),n=e.duration||12;r=new Date(t.getTime()+30*n*24*60*60*1e3)}return{id:e.id,amount:e.amount||0,status:e.status||"pending",requestDate:e.created_at,dueDate:r?r.toISOString().split("T")[0]:null,totalAmount:Math.round(n),paidAmount:Math.round(t),purpose:e.purpose||"Non sp\xe9cifi\xe9",category:e.loan_type||"other",interest_rate:e.interest_rate||0,duration:e.duration||12,monthly_payment:e.monthly_payment||0}});i(r);const a=r.reduce((e,t)=>e+t.amount,0),o=r.reduce((e,t)=>e+t.paidAmount,0),l=r.filter(e=>"active"===e.status).length,c=r.filter(e=>"completed"===e.status).length,d=r.filter(e=>"pending"===e.status).length,u=r.filter(e=>"rejected"===e.status).length;p({totalLoans:r.length,totalBorrowed:a,totalRepaid:o,activeLoans:l,completedLoans:c,pendingLoans:d,rejectedLoans:u})}else console.error("[LOAN HISTORY] Erreur lors du chargement des donn\xe9es:",{loans:e.error,payments:t.error})}catch(e){console.error("[LOAN HISTORY] Erreur lors du chargement de l'historique:",e.message)}finally{l(!1)}else l(!1)})()},[null===s||void 0===s?void 0:s.id]);const f=e=>{switch(e){case"active":return"text-blue-600 bg-blue-100";case"completed":return"text-green-600 bg-green-100";case"pending":return"text-yellow-600 bg-yellow-100";case"rejected":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}},x=e=>{switch(e){case"active":return"Actif";case"completed":return"Rembours\xe9";case"pending":return"En attente";case"rejected":return"Rejet\xe9";default:return"Inconnu"}},g=e=>{switch(e){case"education":return(0,Ge.jsx)(qh,{size:16});case"business":return(0,Ge.jsx)(yh,{size:16});case"health":return(0,Ge.jsx)(tt,{size:16});case"transport":return(0,Ge.jsx)(Rh,{size:16});default:return(0,Ge.jsx)(cu,{size:16})}},v=e=>{switch(e){case"education":return"text-blue-600 bg-blue-100";case"business":return"text-green-600 bg-green-100";case"health":return"text-pink-600 bg-pink-100";case"transport":return"text-orange-600 bg-orange-100";default:return"text-gray-600 bg-gray-100"}},y=e=>{switch(e){case"education":return"\xc9ducation";case"business":return"Entreprise";case"health":return"Sant\xe9";case"transport":return"Transport";default:return"Autre"}},b=a.filter(e=>{const t=e.id.toString().includes(c)||Yu(e.amount).includes(c)||e.purpose&&e.purpose.toLowerCase().includes(c.toLowerCase()),n="all"===u||e.status===u;return t&&n});return o?(0,Ge.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,Ge.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary-600"})}):(0,Ge.jsxs)("div",{className:"bg-gradient-to-br from-primary-50 via-accent-50 to-secondary-50",children:[(0,Ge.jsx)("style",{children:"\n    @keyframes gradient {\n      0% { background-position: 0% 50%; }\n      50% { background-position: 100% 50%; }\n      100% { background-position: 0% 50%; }\n    }\n    @keyframes pulse-glow {\n      0%, 100% { opacity: 0.3; transform: scale(1); }\n      50% { opacity: 0.6; transform: scale(1.05); }\n    }\n    @keyframes slide-in-right {\n      from { transform: translateX(100%); opacity: 0; }\n      to { transform: translateX(0); opacity: 1; }\n    }\n    @keyframes bounce-in {\n      0% { transform: scale(0.3); opacity: 0; }\n      50% { transform: scale(1.05); }\n      70% { transform: scale(0.9); }\n      100% { transform: scale(1); opacity: 1; }\n    }\n    @keyframes float {\n      0%, 100% { transform: translateY(0px); }\n      50% { transform: translateY(-10px); }\n    }\n    @keyframes shine {\n      0% { transform: translateX(-100%); }\n      100% { transform: translateX(100%); }\n    }\n    .animate-gradient {\n      background-size: 200% 200%;\n      animation: gradient 8s ease infinite;\n    }\n    .animate-pulse-glow {\n      animation: pulse-glow 2s ease-in-out infinite;\n    }\n    .animate-slide-in-right {\n      animation: slide-in-right 0.6s ease-out;\n    }\n    .animate-bounce-in {\n      animation: bounce-in 0.8s ease-out;\n    }\n    .animate-float {\n      animation: float 3s ease-in-out infinite;\n    }\n    .animate-shine {\n      animation: shine 2s ease-in-out infinite;\n    }\n  "}),(0,Ge.jsxs)("div",{className:"relative overflow-hidden",children:[(0,Ge.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-500 via-purple-600 to-indigo-600 opacity-15 animate-gradient"}),(0,Ge.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-white/20 via-transparent to-transparent"}),(0,Ge.jsxs)("div",{className:"absolute inset-0 opacity-8",children:[(0,Ge.jsx)("div",{animate:{scale:[1,1.2,1],rotate:[0,180,360],opacity:[.3,.6,.3]},transition:{duration:8,repeat:1/0,ease:"easeInOut"},className:"absolute top-0 left-0 w-72 h-72 bg-blue-400 rounded-full mix-blend-multiply filter blur-xl"}),(0,Ge.jsx)("div",{animate:{scale:[1.2,1,1.2],rotate:[360,180,0],opacity:[.6,.3,.6]},transition:{duration:10,repeat:1/0,ease:"easeInOut",delay:2},className:"absolute top-0 right-0 w-72 h-72 bg-purple-400 rounded-full mix-blend-multiply filter blur-xl"}),(0,Ge.jsx)("div",{animate:{scale:[1,1.3,1],rotate:[180,360,180],opacity:[.4,.7,.4]},transition:{duration:12,repeat:1/0,ease:"easeInOut",delay:4},className:"absolute -bottom-8 left-20 w-72 h-72 bg-indigo-400 rounded-full mix-blend-multiply filter blur-xl"}),(0,Ge.jsx)("div",{animate:{y:[0,-20,0],opacity:[.2,.6,.2]},transition:{duration:4,repeat:1/0,ease:"easeInOut"},className:"absolute top-1/4 left-1/4 w-4 h-4 bg-blue-300 rounded-full"}),(0,Ge.jsx)("div",{animate:{y:[0,15,0],opacity:[.3,.7,.3]},transition:{duration:5,repeat:1/0,ease:"easeInOut",delay:1},className:"absolute top-3/4 right-1/3 w-3 h-3 bg-purple-300 rounded-full"}),(0,Ge.jsx)("div",{animate:{x:[0,10,0],opacity:[.4,.8,.4]},transition:{duration:6,repeat:1/0,ease:"easeInOut",delay:2},className:"absolute bottom-1/4 left-1/2 w-2 h-2 bg-indigo-300 rounded-full"}),(0,Ge.jsx)("div",{animate:{x:[0,-15,0],y:[0,-10,0],opacity:[.3,.8,.3]},transition:{duration:7,repeat:1/0,ease:"easeInOut",delay:.5},className:"absolute top-1/3 right-1/4 w-2 h-2 bg-green-300 rounded-full"}),(0,Ge.jsx)("div",{animate:{x:[0,12,0],y:[0,-8,0],opacity:[.2,.7,.2]},transition:{duration:8,repeat:1/0,ease:"easeInOut",delay:1.5},className:"absolute bottom-1/3 right-1/3 w-3 h-3 bg-pink-300 rounded-full"}),(0,Ge.jsx)("div",{animate:{x:[0,-8,0],y:[0,12,0],opacity:[.4,.9,.4]},transition:{duration:9,repeat:1/0,ease:"easeInOut",delay:2.5},className:"absolute top-2/3 left-1/3 w-1 h-1 bg-yellow-300 rounded-full"})]}),(0,Ge.jsx)("div",{className:"relative px-4 lg:px-8 py-8 lg:py-12 backdrop-blur-sm",children:(0,Ge.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,Ge.jsxs)("div",{className:"text-center mb-8 lg:mb-12",children:[(0,Ge.jsxs)("h1",{className:"text-4xl lg:text-6xl font-bold text-secondary-900 font-montserrat mb-4",children:["Historique des"," ",(0,Ge.jsx)("span",{className:"bg-gradient-to-r from-blue-600 via-purple-600 to-indigo-600 bg-clip-text text-transparent",children:"Pr\xeat"})," ",(0,Ge.jsx)("span",{className:"inline-block",children:"\ud83d\udcc8"})]}),(0,Ge.jsx)("p",{className:"text-lg lg:text-xl text-neutral-600 font-montserrat max-w-3xl mx-auto leading-relaxed",children:"Consultez l'historique de votre pr\xeat et paiements"}),(0,Ge.jsxs)("div",{className:"flex items-center justify-center space-x-6 mt-6",children:[(0,Ge.jsxs)("div",{animate:{y:[0,-5,0],rotate:[0,5,0]},transition:{duration:3,repeat:1/0,ease:"easeInOut"},className:"flex items-center space-x-2 text-sm text-neutral-500",children:[(0,Ge.jsx)(cu,{size:16,className:"text-green-500"}),(0,Ge.jsx)("span",{children:"Suivi complet"})]}),(0,Ge.jsxs)("div",{animate:{y:[0,-5,0],rotate:[0,-5,0]},transition:{duration:3,repeat:1/0,ease:"easeInOut",delay:1},className:"flex items-center space-x-2 text-sm text-neutral-500",children:[(0,Ge.jsx)(Cu,{size:16,className:"text-blue-500"}),(0,Ge.jsx)("span",{children:"Donn\xe9es s\xe9curis\xe9es"})]}),(0,Ge.jsxs)("div",{animate:{y:[0,-5,0],rotate:[0,5,0]},transition:{duration:3,repeat:1/0,ease:"easeInOut",delay:2},className:"flex items-center space-x-2 text-sm text-neutral-500",children:[(0,Ge.jsx)(hh,{size:16,className:"text-purple-500"}),(0,Ge.jsx)("span",{children:"Analyses d\xe9taill\xe9es"})]})]})]}),(0,Ge.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[(0,Ge.jsxs)("div",{whileHover:{scale:1.05,y:-5,boxShadow:"0 20px 40px rgba(0,0,0,0.1)"},className:"bg-white/80 backdrop-blur-sm rounded-2xl p-4 border border-white/50 shadow-soft relative overflow-hidden",children:[(0,Ge.jsx)("div",{animate:{x:["-100%","100%"]},transition:{duration:3,repeat:1/0,ease:"linear",delay:.5},className:"absolute inset-0 bg-gradient-to-r from-transparent via-blue-200/20 to-transparent"}),(0,Ge.jsxs)("div",{className:"text-center",children:[(0,Ge.jsx)("div",{animate:{scale:[1,1.1,1],rotate:[0,5,0]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},className:"flex items-center justify-center mb-2",children:(0,Ge.jsx)(ou,{size:20,className:"text-primary-600"})}),(0,Ge.jsx)("p",{className:"text-lg sm:text-xl font-bold text-secondary-900",children:m.totalLoans}),(0,Ge.jsx)("p",{className:"text-xs sm:text-sm text-secondary-600",children:"Total pr\xeat"})]})]}),(0,Ge.jsxs)("div",{whileHover:{scale:1.05,y:-5,boxShadow:"0 20px 40px rgba(0,0,0,0.1)"},className:"bg-white/80 backdrop-blur-sm rounded-2xl p-4 border border-white/50 shadow-soft relative overflow-hidden",children:[(0,Ge.jsx)("div",{animate:{x:["-100%","100%"]},transition:{duration:3,repeat:1/0,ease:"linear",delay:1},className:"absolute inset-0 bg-gradient-to-r from-transparent via-green-200/20 to-transparent"}),(0,Ge.jsxs)("div",{className:"text-center",children:[(0,Ge.jsx)("div",{animate:{scale:[1,1.1,1],rotate:[0,-5,0]},transition:{duration:2,repeat:1/0,ease:"easeInOut",delay:.5},className:"flex items-center justify-center mb-2",children:(0,Ge.jsx)(yh,{size:20,className:"text-green-600"})}),(0,Ge.jsx)("p",{className:"text-lg sm:text-xl font-bold text-secondary-900 break-words leading-tight",children:Yu(m.totalBorrowed)}),(0,Ge.jsx)("p",{className:"text-xs sm:text-sm text-secondary-600",children:"Total emprunt\xe9"})]})]}),(0,Ge.jsxs)("div",{whileHover:{scale:1.05,y:-5,boxShadow:"0 20px 40px rgba(0,0,0,0.1)"},className:"bg-white/80 backdrop-blur-sm rounded-2xl p-4 border border-white/50 shadow-soft relative overflow-hidden",children:[(0,Ge.jsx)("div",{animate:{x:["-100%","100%"]},transition:{duration:3,repeat:1/0,ease:"linear",delay:1.5},className:"absolute inset-0 bg-gradient-to-r from-transparent via-blue-200/20 to-transparent"}),(0,Ge.jsxs)("div",{className:"text-center",children:[(0,Ge.jsx)("div",{animate:{scale:[1,1.1,1],rotate:[0,5,0]},transition:{duration:2,repeat:1/0,ease:"easeInOut",delay:1},className:"flex items-center justify-center mb-2",children:(0,Ge.jsx)(et,{size:20,className:"text-blue-600"})}),(0,Ge.jsx)("p",{className:"text-lg sm:text-xl font-bold text-secondary-900 break-words leading-tight",children:Yu(m.totalRepaid)}),(0,Ge.jsx)("p",{className:"text-xs sm:text-sm text-secondary-600",children:"Total rembours\xe9"})]})]}),(0,Ge.jsxs)("div",{whileHover:{scale:1.05,y:-5,boxShadow:"0 20px 40px rgba(0,0,0,0.1)"},className:"bg-white/80 backdrop-blur-sm rounded-2xl p-4 border border-white/50 shadow-soft relative overflow-hidden",children:[(0,Ge.jsx)("div",{animate:{x:["-100%","100%"]},transition:{duration:3,repeat:1/0,ease:"linear",delay:2},className:"absolute inset-0 bg-gradient-to-r from-transparent via-orange-200/20 to-transparent"}),(0,Ge.jsxs)("div",{className:"text-center",children:[(0,Ge.jsx)("div",{animate:{scale:[1,1.1,1],rotate:[0,-5,0]},transition:{duration:2,repeat:1/0,ease:"easeInOut",delay:1.5},className:"flex items-center justify-center mb-2",children:(0,Ge.jsx)(Wd,{size:20,className:"text-orange-600"})}),(0,Ge.jsx)("p",{className:"text-lg sm:text-xl font-bold text-secondary-900",children:m.activeLoans}),(0,Ge.jsx)("p",{className:"text-xs sm:text-sm text-secondary-600",children:"Pr\xeat actif"})]})]})]})]})})]}),(0,Ge.jsxs)("div",{className:"max-w-6xl mx-auto px-4 pb-8",children:[(0,Ge.jsx)("div",{className:"mb-8",children:(0,Ge.jsx)(Ah,{className:"bg-white/90 backdrop-blur-sm border-white/20",children:(0,Ge.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,Ge.jsxs)("div",{className:"flex-1 relative",children:[(0,Ge.jsx)(Nh,{size:20,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,Ge.jsx)("input",{type:"text",placeholder:"Rechercher par ID, montant ou objet...",value:c,onChange:e=>d(e.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-2xl focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white/80 backdrop-blur-sm"})]}),(0,Ge.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Ge.jsx)(kh,{size:20,className:"text-gray-400"}),(0,Ge.jsxs)("select",{value:u,onChange:e=>h(e.target.value),className:"px-4 py-3 border border-gray-200 rounded-2xl focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white/80 backdrop-blur-sm",children:[(0,Ge.jsx)("option",{value:"all",children:"Tous les statuts"}),(0,Ge.jsx)("option",{value:"active",children:"Actifs"}),(0,Ge.jsx)("option",{value:"completed",children:"Rembours\xe9s"}),(0,Ge.jsx)("option",{value:"pending",children:"En attente"}),(0,Ge.jsx)("option",{value:"rejected",children:"Rejet\xe9s"})]})]})]})})}),(0,Ge.jsx)("div",{children:(0,Ge.jsx)(Ah,{className:"bg-white/90 backdrop-blur-sm border-white/20",children:b.length>0?(0,Ge.jsx)("div",{className:"space-y-4",children:b.map((e,t)=>(0,Ge.jsx)("div",{className:"border border-gray-200/50 rounded-2xl p-6 hover:shadow-lg transition-all duration-300 bg-white/60 backdrop-blur-sm",children:(0,Ge.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0",children:[(0,Ge.jsxs)("div",{className:"flex-1",children:[(0,Ge.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-3 mb-4",children:[(0,Ge.jsxs)("h3",{className:"text-lg sm:text-xl font-semibold text-gray-900 font-montserrat",children:["Pr\xeat #",e.id]}),(0,Ge.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-medium ".concat(f(e.status)),children:x(e.status)}),e.category&&(0,Ge.jsxs)("span",{className:"px-2 py-1 rounded-full text-xs font-medium flex items-center space-x-1 ".concat(v(e.category)),children:[g(e.category),(0,Ge.jsx)("span",{className:"hidden sm:inline",children:y(e.category)})]})]}),e.purpose&&(0,Ge.jsxs)("div",{className:"mb-4 p-3 bg-gray-50/80 rounded-xl",children:[(0,Ge.jsx)("span",{className:"text-gray-600 text-xs uppercase tracking-wide",children:"Objet du pr\xeat"}),(0,Ge.jsx)("p",{className:"font-medium text-gray-900",children:e.purpose})]}),(0,Ge.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 sm:gap-6 text-sm",children:[(0,Ge.jsxs)("div",{className:"p-3 bg-accent-50/50 rounded-xl",children:[(0,Ge.jsx)("span",{className:"text-gray-600 text-xs uppercase tracking-wide",children:"Montant demand\xe9"}),(0,Ge.jsx)("p",{className:"font-semibold text-base sm:text-lg text-gray-900 break-words leading-tight",children:Yu(e.amount)})]}),(0,Ge.jsxs)("div",{className:"p-3 bg-accent-50/50 rounded-xl",children:[(0,Ge.jsx)("span",{className:"text-gray-600 text-xs uppercase tracking-wide",children:"Date de demande"}),(0,Ge.jsx)("p",{className:"font-semibold text-base sm:text-lg text-gray-900",children:Xu(e.requestDate)})]}),e.dueDate&&(0,Ge.jsxs)("div",{className:"p-3 bg-accent-50/50 rounded-xl",children:[(0,Ge.jsx)("span",{className:"text-gray-600 text-xs uppercase tracking-wide",children:"\xc9ch\xe9ance"}),(0,Ge.jsx)("p",{className:"font-semibold text-base sm:text-lg text-gray-900",children:Xu(e.dueDate)})]})]}),"active"===e.status&&(0,Ge.jsxs)("div",{className:"mt-6 p-6 bg-blue-50/80 rounded-2xl border border-blue-200/50",children:[(0,Ge.jsxs)("h4",{className:"font-semibold text-blue-900 mb-4 flex items-center space-x-2",children:[(0,Ge.jsx)(xh,{size:18,className:"sm:w-5 sm:h-5"}),(0,Ge.jsx)("span",{className:"text-sm sm:text-base",children:"D\xe9tails du pr\xeat"})]}),(0,Ge.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 sm:gap-6 text-sm",children:[(0,Ge.jsxs)("div",{children:[(0,Ge.jsx)("span",{className:"text-blue-700 text-xs uppercase tracking-wide",children:"Montant total"}),(0,Ge.jsx)("p",{className:"font-semibold text-base sm:text-lg text-blue-900 break-words leading-tight",children:Yu(e.totalAmount)})]}),(0,Ge.jsxs)("div",{children:[(0,Ge.jsx)("span",{className:"text-blue-700 text-xs uppercase tracking-wide",children:"Montant rembours\xe9"}),(0,Ge.jsx)("p",{className:"font-semibold text-base sm:text-lg text-blue-900 break-words leading-tight",children:Yu(e.paidAmount)})]}),(0,Ge.jsxs)("div",{children:[(0,Ge.jsx)("span",{className:"text-blue-700 text-xs uppercase tracking-wide",children:"Statut"}),(0,Ge.jsx)("p",{className:"font-semibold text-base sm:text-lg text-blue-900 break-words leading-tight",children:e.paidAmount>=e.totalAmount?"Rembours\xe9":"En cours"})]})]})]}),"completed"===e.status&&(0,Ge.jsx)("div",{className:"mt-6 p-6 bg-green-50/80 rounded-2xl border border-green-200/50",children:(0,Ge.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:[(0,Ge.jsxs)("span",{className:"text-green-800 font-semibold text-base sm:text-lg flex items-center space-x-2",children:[(0,Ge.jsx)(et,{size:18,className:"sm:w-5 sm:h-5"}),(0,Ge.jsx)("span",{children:"Pr\xeat enti\xe8rement rembours\xe9"})]}),(0,Ge.jsx)("span",{className:"text-green-600 font-bold text-base sm:text-lg break-words leading-tight",children:Yu(e.paidAmount)})]})}),"pending"===e.status&&(0,Ge.jsx)("div",{className:"mt-6 p-6 bg-yellow-50/80 rounded-2xl border border-yellow-200/50",children:(0,Ge.jsx)("div",{className:"flex items-center",children:(0,Ge.jsxs)("span",{className:"text-yellow-800 font-semibold text-base sm:text-lg flex items-center space-x-2",children:[(0,Ge.jsx)(Wd,{size:18,className:"sm:w-5 sm:h-5"}),(0,Ge.jsx)("span",{children:"En attente d'approbation"})]})})}),"rejected"===e.status&&(0,Ge.jsx)("div",{className:"mt-6 p-6 bg-red-50/80 rounded-2xl border border-red-200/50",children:(0,Ge.jsx)("div",{className:"flex items-center",children:(0,Ge.jsxs)("span",{className:"text-red-800 font-semibold text-base sm:text-lg flex items-center space-x-2",children:[(0,Ge.jsx)(Sh,{size:18,className:"sm:w-5 sm:h-5"}),(0,Ge.jsx)("span",{children:"Demande rejet\xe9e"})]})})})]}),(0,Ge.jsxs)("div",{className:"flex flex-col space-y-3",children:[(0,Ge.jsxs)(Vu,{variant:"outline",size:"sm",onClick:()=>r("/loan-details/".concat(e.id)),className:"px-6 py-3 rounded-2xl font-medium flex items-center space-x-2",children:[(0,Ge.jsx)(zu,{size:16}),(0,Ge.jsx)("span",{children:"Voir d\xe9tails"})]}),"active"===e.status&&(0,Ge.jsxs)(Vu,{size:"sm",onClick:()=>r("/repayment",{state:{loanId:e.id}}),className:"px-6 py-3 rounded-2xl font-medium bg-primary-500 hover:bg-primary-600 flex items-center space-x-2",children:[(0,Ge.jsx)(xh,{size:16}),(0,Ge.jsx)("span",{children:"Rembourser"})]})]})]})},e.id))}):(0,Ge.jsxs)("div",{className:"text-center py-16",children:[(0,Ge.jsx)("div",{className:"text-gray-400 mb-6",children:(0,Ge.jsx)(Nh,{size:80,className:"mx-auto"})}),(0,Ge.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-3 font-montserrat",children:"Aucun pr\xeat trouv\xe9"}),(0,Ge.jsx)("p",{className:"text-gray-500 mb-6 text-lg",children:c||"all"!==u?"Aucun pr\xeat ne correspond \xe0 vos crit\xe8res de recherche":"Vous n'avez pas encore de pr\xeat"}),!c&&"all"===u&&(0,Ge.jsx)(Vu,{onClick:()=>r("/loan-request"),className:"px-8 py-4 text-lg rounded-2xl bg-primary-500 hover:bg-primary-600",children:"Faire une demande"})]})})}),(0,Ge.jsx)("div",{className:"fixed bottom-24 right-6 z-10",children:(0,Ge.jsxs)(Vu,{variant:"outline",onClick:()=>{const e="data:text/csv;charset=utf-8,ID,Montant,Statut,Date de demande,\xc9ch\xe9ance,Montant total,Statut remboursement\n"+b.map(e=>"".concat(e.id,",").concat(e.amount,",").concat(x(e.status),",").concat(Xu(e.requestDate),",").concat(e.dueDate?Xu(e.dueDate):"N/A",",").concat(e.totalAmount||"N/A",",").concat(e.paidAmount>=(e.totalAmount||0)?"Rembours\xe9":"En cours")).join("\n"),t=encodeURI(e),n=document.createElement("a");n.setAttribute("href",t),n.setAttribute("download","historique_prets.csv"),document.body.appendChild(n),n.click(),document.body.removeChild(n)},className:"flex items-center space-x-2 px-4 py-3 rounded-full bg-white/90 backdrop-blur-sm border-white/50 shadow-lg hover:shadow-xl",children:[(0,Ge.jsx)(Su,{size:20}),(0,Ge.jsx)("span",{className:"hidden sm:inline",children:"Exporter"})]})})]})]})},$h=e=>{let{loan:n,onSuccess:s}=e;const r=(0,t.useRef)(null),{user:a}=Je(),[i,o]=(0,t.useState)(!1);(0,t.useEffect)(()=>{const e=document.createElement("script");return e.src="https://cdn.fedapay.com/checkout.js?v=1.1.7",e.async=!0,e.onload=()=>{console.log("[FedaPay] \u2705 Script charg\xe9 pour remboursement")},e.onerror=()=>{console.error("[FedaPay] \u274c Erreur chargement script")},document.body.appendChild(e),()=>{document.body.contains(e)&&document.body.removeChild(e)}},[]);return(0,Ge.jsxs)("button",{ref:r,onClick:async()=>{if(window.FedaPay)if(a&&n){o(!0);try{const e=Fe,t=await fetch("".concat(e,"/api/create-loan-repayment"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:null===a||void 0===a?void 0:a.id,loan_id:n.id,amount:n.remainingAmount})}),s=await t.json();console.log("[FedaPayRemboursementButton] R\xe9ponse backend:",s),console.log("[FedaPayRemboursementButton] Status HTTP:",t.status),s.success&&s.transactionUrl?window.location.href=s.transactionUrl:(console.error("[FedaPayRemboursementButton] \u274c Erreur d\xe9taill\xe9e:",s),alert("Erreur lors de la cr\xe9ation de la transaction de remboursement: ".concat(s.error||"Erreur inconnue")))}catch(e){console.error("[FedaPayRemboursementButton] \u274c Erreur:",e),alert("Erreur de connexion. Veuillez r\xe9essayer.")}finally{o(!1)}}else alert("Informations utilisateur ou pr\xeat manquantes");else alert("FedaPay n'est pas encore charg\xe9 !")},disabled:i,className:"w-full bg-gradient-to-r from-blue-500 to-blue-600 text-white py-4 rounded-xl font-semibold shadow-lg flex items-center justify-center",children:[i?(0,Ge.jsx)("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}):(0,Ge.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Ge.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})}),"Rembourser mon pr\xeat"]})},Qh=()=>{const{showSuccess:e,showError:n}=it(),{user:s}=Je(),r=Y(),[a,i]=(0,t.useState)(null),[o,l]=(0,t.useState)(!1),c=async()=>{if(null!==s&&void 0!==s&&s.id)try{l(!0);const[e,t]=await Promise.all([qe(s.id),We(s.id)]);if(e.success&&t.success){const n=e.data||[],s=t.data||[];console.log("[REPAYMENT] Tous les pr\xeats:",n.map(e=>({id:e.id,status:e.status})));const r=n.find(e=>"active"===e.status||"approved"===e.status);if(console.log("[REPAYMENT] Pr\xeat actif trouv\xe9:",r?{id:r.id,status:r.status}:"Aucun"),r){const e=s.filter(e=>e.loan_id===r.id).reduce((e,t)=>e+(t.amount||0),0),t=parseFloat(r.amount),n=t*(r.interest_rate||0)/100,a=t+n,o=parseFloat(r.total_penalty_amount||0),l=a+o,c=Math.max(0,l-e);console.log("[REPAYMENT] Calculs d\xe9taill\xe9s:",{principalAmount:t,interestAmount:n,totalOriginalAmount:a,penaltyAmount:o,totalAmountWithPenalty:l,paidAmount:e,remainingAmount:c,remainingAmountRounded:Math.round(c),loanStatus:r.status});const d=new Date(r.created_at),u=r.duration||30,h=new Date(d.getTime()+24*u*60*60*1e3),m=new Date,p=Math.floor((m-d)/864e5),f=30,x=p+f-p%f,g=new Date(d.getTime()+24*x*60*60*1e3);console.log("[REPAYMENT] Calcul du montant \xe0 rembourser:",{loanId:r.id,originalAmount:r.amount,interestRate:r.interest_rate||0,totalOriginalAmount:a,paidAmount:e,remainingAmount:c,calculation:"".concat(r.amount," * (1 + ").concat(r.interest_rate||0,"/100) = ").concat(a)});const v={id:r.id,amount:r.amount,monthlyPayment:r.monthly_payment||Math.round(a/u),totalAmount:Math.round(a),paidAmount:Math.round(e),remainingAmount:Math.round(c),penaltyAmount:Math.round(o),totalAmountWithPenalty:Math.round(l),dueDate:h.toISOString().split("T")[0],nextPaymentDate:g.toISOString().split("T")[0],interest_rate:r.interest_rate||0,duration:r.duration||30,purpose:r.purpose||"Non sp\xe9cifi\xe9",status:r.status};i(v)}else i(null)}else console.error("[REPAYMENT] Erreur lors du chargement des donn\xe9es:",{loans:e.error,payments:t.error})}catch(e){console.error("[REPAYMENT] Erreur lors du chargement du pr\xeat actif:",e.message)}finally{l(!1)}};(0,t.useEffect)(()=>{c()},[null===s||void 0===s?void 0:s.id]);return(0,Ge.jsxs)("div",{className:"bg-gradient-to-br from-primary-50 via-accent-50 to-secondary-50",children:[(0,Ge.jsxs)("div",{className:"relative overflow-hidden",children:[(0,Ge.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-green-500 via-emerald-600 to-orange-500 opacity-15 animate-gradient"}),(0,Ge.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-white/20 via-transparent to-transparent"}),(0,Ge.jsx)("div",{className:"relative px-4 lg:px-8 py-8 lg:py-12 backdrop-blur-sm",children:(0,Ge.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,Ge.jsx)("div",{className:"flex items-center justify-between mb-8",children:(0,Ge.jsxs)(Vu,{variant:"outline",onClick:()=>r("/dashboard"),className:"flex items-center space-x-2 px-4 py-2 bg-white/20 backdrop-blur-sm border-white/30",children:[(0,Ge.jsx)(Qu,{size:20}),(0,Ge.jsx)("span",{children:"Retour"})]})}),(0,Ge.jsx)("div",{className:"text-center mb-8 lg:mb-12",children:(0,Ge.jsxs)("h1",{className:"text-4xl lg:text-6xl font-bold text-secondary-900 font-montserrat mb-4",children:["Remboursement de Pr\xeat"," ",(0,Ge.jsx)("span",{className:"inline-block",children:"\ud83d\udcb3"})]})})]})})]}),(0,Ge.jsx)("div",{className:"max-w-4xl mx-auto px-4 pb-8",children:(0,Ge.jsx)("div",{className:"grid grid-cols-1 gap-8",children:a?(0,Ge.jsxs)(Ah,{title:"Votre pr\xeat",className:"bg-white/90 backdrop-blur-sm border-white/20",children:[(0,Ge.jsxs)("div",{className:"border rounded-2xl p-6 bg-gradient-to-r from-primary-50/80 to-accent-50/80 border-primary-200/50 shadow-lg",children:[(0,Ge.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,Ge.jsxs)("h3",{className:"font-semibold text-gray-900 text-xl font-montserrat",children:["Pr\xeat #",a.id]}),(0,Ge.jsxs)("span",{className:"text-sm text-primary-600 font-medium bg-primary-100/80 px-4 py-2 rounded-full",children:[Yu(a.remainingAmount)," \xe0 rembourser"]})]}),(0,Ge.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 text-sm",children:[(0,Ge.jsxs)("div",{className:"p-4 bg-white/60 rounded-xl border border-white/50",children:[(0,Ge.jsx)("span",{className:"text-gray-600 text-xs uppercase tracking-wide",children:"Montant du pr\xeat"}),(0,Ge.jsx)("p",{className:"font-semibold text-xl text-gray-900",children:Yu(a.amount)})]}),(0,Ge.jsxs)("div",{className:"p-4 bg-white/60 rounded-xl border border-white/50",children:[(0,Ge.jsx)("span",{className:"text-gray-600 text-xs uppercase tracking-wide",children:"Montant pay\xe9"}),(0,Ge.jsx)("p",{className:"font-semibold text-xl text-gray-900",children:Yu(a.paidAmount)})]}),a.penaltyAmount>0&&(0,Ge.jsxs)("div",{className:"p-4 bg-red-50/80 rounded-xl border border-red-200/50",children:[(0,Ge.jsx)("span",{className:"text-red-600 text-xs uppercase tracking-wide",children:"P\xe9nalit\xe9s de retard"}),(0,Ge.jsx)("p",{className:"font-semibold text-xl text-red-700",children:Yu(a.penaltyAmount)}),(0,Ge.jsx)("p",{className:"text-xs text-red-600 mt-1",children:"2% par jour"})]}),(0,Ge.jsxs)("div",{className:"p-4 bg-white/60 rounded-xl border border-white/50",children:[(0,Ge.jsx)("span",{className:"text-gray-600 text-xs uppercase tracking-wide",children:"Montant \xe0 rembourser"}),(0,Ge.jsx)("p",{className:"font-semibold text-xl text-gray-900",children:Yu(a.remainingAmount)})]})]}),a.penaltyAmount>0&&(0,Ge.jsxs)("div",{className:"mt-4 p-4 bg-red-50/80 rounded-xl border border-red-200/50",children:[(0,Ge.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Ge.jsx)(wh,{className:"w-5 h-5 text-red-600"}),(0,Ge.jsx)("span",{className:"text-red-800 font-medium",children:"Pr\xeat en retard"})]}),(0,Ge.jsx)("p",{className:"text-red-700 text-sm mt-2",children:"Votre pr\xeat est en retard. Des p\xe9nalit\xe9s de 2% par jour sont appliqu\xe9es jusqu'au remboursement complet."})]})]}),(0,Ge.jsx)("div",{className:"mt-6",children:(0,Ge.jsx)($h,{loan:a,onSuccess:t=>{e(t),setTimeout(()=>{c()},1e3)}})})]}):(0,Ge.jsx)(Ah,{title:"Aucun pr\xeat",className:"bg-white/90 backdrop-blur-sm border-white/20",children:(0,Ge.jsxs)("div",{className:"text-center py-12",children:[(0,Ge.jsx)(uu,{size:64,className:"mx-auto mb-6 text-gray-300"}),(0,Ge.jsx)("p",{className:"text-gray-500 mb-6 text-lg",children:"Vous n'avez actuellement aucun pr\xeat en cours"}),(0,Ge.jsx)("p",{className:"text-gray-400 mb-6 text-sm",children:"Un seul pr\xeat autoris\xe9 \xe0 la fois"}),(0,Ge.jsx)(Vu,{onClick:()=>r("/loan-request"),className:"px-8 py-4 text-lg rounded-2xl bg-primary-500 hover:bg-primary-600",children:"Demander un pr\xeat"})]})})})})]})},Yh=()=>{const e=$(),n=Y(),{user:s}=Je(),{showSuccess:r,showError:a,addNotification:i}=it(),[o,l]=(0,t.useState)(null),[c,d]=(0,t.useState)(!1);(0,t.useEffect)(()=>{const t=new URLSearchParams(e.search),n=t.get("transaction_id"),s=t.get("amount"),r=t.get("loan_id");if(n&&s&&r){const e={transactionId:n,amount:parseInt(s),loanId:r};l(e),u(e)}},[e]);const u=async e=>{if(!c)try{d(!0),console.log("[REPAYMENT_SUCCESS] Traitement du remboursement:",e);const t={loan_id:e.loanId,user_id:s.id,amount:e.amount,payment_method:"fedapay",fedapay_transaction_id:e.transactionId,status:"completed",payment_date:(new Date).toISOString(),description:"Remboursement complet du pr\xeat #".concat(e.loanId),metadata:{fedapay_data:{transaction_id:e.transactionId,amount:e.amount,payment_date:(new Date).toISOString()},payment_type:"loan_repayment",app_source:"ab_pret_web"}},n=await(async e=>{try{const{data:t,error:n}=await Me.supabase.from("payments").insert([e]).select().single();if(n)throw n;return{success:!0,data:t}}catch(t){return console.error("[SUPABASE] Erreur lors de la cr\xe9ation du paiement:",t.message),{success:!1,error:t.message}}})(t);if(!n.success)throw new Error("Erreur lors de la cr\xe9ation du paiement: "+n.error);console.log("[REPAYMENT_SUCCESS] Paiement cr\xe9\xe9:",n.data);const a=await He(e.loanId,"completed");if(!a.success)throw new Error("Erreur lors de la mise \xe0 jour du pr\xeat: "+a.error);console.log("[REPAYMENT_SUCCESS] Pr\xeat mis \xe0 jour:",a.data);const o={title:"Remboursement de pr\xeat effectu\xe9",message:"Le client ".concat(s.first_name||s.fullName," a rembours\xe9 son pr\xeat #").concat(e.loanId," d'un montant de ").concat(e.amount," FCFA"),type:"success",priority:"high",data:{loanId:e.loanId,userId:s.id,amount:e.amount,transactionId:e.transactionId,action:"view_loan_details"}};i(o),r("Remboursement trait\xe9 avec succ\xe8s ! Le pr\xeat a \xe9t\xe9 marqu\xe9 comme rembours\xe9.")}catch(t){console.error("[REPAYMENT_SUCCESS] Erreur lors du traitement:",t),a("Erreur lors du traitement du remboursement: "+t.message)}finally{d(!1)}};return(0,Ge.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-green-50 to-blue-50 flex items-center justify-center p-4",children:(0,Ge.jsxs)("div",{className:"max-w-md w-full",children:[(0,Ge.jsxs)("div",{className:"bg-white rounded-3xl shadow-xl p-8 text-center",children:[(0,Ge.jsx)("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,Ge.jsx)(et,{className:"w-12 h-12 text-green-600"})}),(0,Ge.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Remboursement r\xe9ussi !"}),(0,Ge.jsx)("p",{className:"text-gray-600 mb-6",children:"Votre pr\xeat a \xe9t\xe9 rembours\xe9 avec succ\xe8s via FedaPay."}),o&&(0,Ge.jsx)("div",{className:"bg-gray-50 rounded-2xl p-6 mb-6",children:(0,Ge.jsxs)("div",{className:"space-y-3",children:[(0,Ge.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Ge.jsx)("span",{className:"text-gray-600",children:"Montant rembours\xe9 :"}),(0,Ge.jsx)("span",{className:"font-semibold text-gray-900",children:(h=o.amount,new Intl.NumberFormat("fr-CI",{style:"currency",currency:"XOF"}).format(h/100))})]}),(0,Ge.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Ge.jsx)("span",{className:"text-gray-600",children:"ID Transaction :"}),(0,Ge.jsxs)("span",{className:"font-mono text-sm text-gray-500",children:[o.transactionId.substring(0,12),"..."]})]}),(0,Ge.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Ge.jsx)("span",{className:"text-gray-600",children:"Pr\xeat # :"}),(0,Ge.jsx)("span",{className:"font-semibold text-gray-900",children:o.loanId})]})]})}),(0,Ge.jsx)("div",{className:"bg-green-50 border border-green-200 rounded-xl p-4 mb-6",children:(0,Ge.jsxs)("p",{className:"text-green-800 text-sm",children:[(0,Ge.jsx)("strong",{children:"Confirmation :"}),c?"Traitement du remboursement en cours...":"Votre pr\xeat a \xe9t\xe9 marqu\xe9 comme rembours\xe9 dans notre syst\xe8me. Vous recevrez bient\xf4t un email de confirmation."]})}),(0,Ge.jsxs)("div",{className:"space-y-3",children:[(0,Ge.jsxs)("button",{onClick:()=>{n("/loan-history")},className:"w-full bg-primary-500 hover:bg-primary-600 text-white font-semibold py-3 px-6 rounded-xl transition-colors flex items-center justify-center space-x-2",children:[(0,Ge.jsx)(Qu,{className:"w-5 h-5"}),(0,Ge.jsx)("span",{children:"Voir l'historique des pr\xeats"})]}),(0,Ge.jsxs)("button",{onClick:()=>{n("/dashboard")},className:"w-full bg-gray-100 hover:bg-gray-200 text-gray-700 font-semibold py-3 px-6 rounded-xl transition-colors flex items-center justify-center space-x-2",children:[(0,Ge.jsx)(ru,{className:"w-5 h-5"}),(0,Ge.jsx)("span",{children:"Retour au tableau de bord"})]})]})]}),(0,Ge.jsx)("div",{className:"mt-6 text-center",children:(0,Ge.jsx)("p",{className:"text-sm text-gray-500",children:"Si vous avez des questions, contactez notre support client."})})]})});var h},Xh=()=>{const{showError:e}=it(),{user:n}=Je(),s=Y(),[r]=Ie(),[a,i]=(0,t.useState)(!1),o=r.get("transaction_id"),l=r.get("amount"),c=r.get("loan_id"),d=r.get("user_id");(0,t.useEffect)(()=>{e("Le paiement a \xe9chou\xe9. Veuillez r\xe9essayer.")},[e]);return(0,Ge.jsxs)("div",{className:"bg-gradient-to-br from-red-50 via-orange-50 to-yellow-50 min-h-screen",children:[(0,Ge.jsxs)("div",{className:"relative overflow-hidden",children:[(0,Ge.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-red-500 via-orange-600 to-yellow-500 opacity-10 animate-gradient"}),(0,Ge.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-white/20 via-transparent to-transparent"}),(0,Ge.jsx)("div",{className:"relative px-4 lg:px-8 py-8 lg:py-12 backdrop-blur-sm",children:(0,Ge.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,Ge.jsx)("div",{className:"flex items-center justify-between mb-8",children:(0,Ge.jsxs)(Vu,{variant:"outline",onClick:()=>s("/dashboard"),className:"flex items-center space-x-2 px-4 py-2 bg-white/20 backdrop-blur-sm border-white/30",children:[(0,Ge.jsx)(Qu,{size:20}),(0,Ge.jsx)("span",{children:"Retour au Dashboard"})]})}),(0,Ge.jsx)("div",{className:"text-center mb-8 lg:mb-12",children:(0,Ge.jsxs)("h1",{className:"text-4xl lg:text-6xl font-bold text-red-900 font-montserrat mb-4",children:["Paiement \xc9chou\xe9"," ",(0,Ge.jsx)("span",{className:"inline-block",children:"\u274c"})]})})]})})]}),(0,Ge.jsx)("div",{className:"max-w-2xl mx-auto px-4 pb-8",children:(0,Ge.jsx)(Ah,{title:"D\xe9tails de l'\xe9chec",className:"bg-white/90 backdrop-blur-sm border-white/20",children:(0,Ge.jsxs)("div",{className:"text-center py-8",children:[(0,Ge.jsx)("div",{className:"w-24 h-24 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,Ge.jsx)(Sh,{className:"w-12 h-12 text-red-600"})}),(0,Ge.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Le paiement n'a pas pu \xeatre trait\xe9"}),(0,Ge.jsxs)("p",{className:"text-gray-600 mb-6 text-lg",children:["Nous n'avons pas pu traiter votre paiement de"," ",(0,Ge.jsx)("strong",{children:l?Yu(parseInt(l)):"N/A"}),"."]}),(0,Ge.jsxs)("div",{className:"bg-gray-50 rounded-xl p-4 mb-6 text-left",children:[(0,Ge.jsx)("h3",{className:"font-semibold text-gray-900 mb-2",children:"D\xe9tails techniques :"}),(0,Ge.jsxs)("div",{className:"space-y-1 text-sm text-gray-600",children:[(0,Ge.jsxs)("p",{children:[(0,Ge.jsx)("strong",{children:"Transaction ID :"})," ",o||"N/A"]}),(0,Ge.jsxs)("p",{children:[(0,Ge.jsx)("strong",{children:"Pr\xeat ID :"})," ",c||"N/A"]}),(0,Ge.jsxs)("p",{children:[(0,Ge.jsx)("strong",{children:"Utilisateur ID :"})," ",d||"N/A"]}),(0,Ge.jsxs)("p",{children:[(0,Ge.jsx)("strong",{children:"Montant :"})," ",l?Yu(parseInt(l)):"N/A"]})]})]}),(0,Ge.jsxs)("div",{className:"space-y-4",children:[(0,Ge.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4",children:[(0,Ge.jsx)("h3",{className:"font-semibold text-blue-900 mb-2",children:"Que pouvez-vous faire ?"}),(0,Ge.jsxs)("ul",{className:"text-sm text-blue-800 space-y-1",children:[(0,Ge.jsx)("li",{children:"\u2022 V\xe9rifiez que votre compte Mobile Money a suffisamment de fonds"}),(0,Ge.jsx)("li",{children:"\u2022 Assurez-vous que votre num\xe9ro de t\xe9l\xe9phone est correct"}),(0,Ge.jsx)("li",{children:'\u2022 R\xe9essayez le paiement en cliquant sur "R\xe9essayer"'}),(0,Ge.jsx)("li",{children:"\u2022 Contactez le support si le probl\xe8me persiste"})]})]}),(0,Ge.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 pt-4",children:[(0,Ge.jsx)(Vu,{onClick:()=>{i(!0),setTimeout(()=>{s("/remboursement"),i(!1)},1e3)},disabled:a,className:"flex-1 bg-primary-500 hover:bg-primary-600 text-white font-semibold py-3 px-6 rounded-xl transition-colors flex items-center justify-center space-x-2",children:a?(0,Ge.jsxs)(Ge.Fragment,{children:[(0,Ge.jsx)(mh,{className:"w-5 h-5 animate-spin"}),(0,Ge.jsx)("span",{children:"Redirection..."})]}):(0,Ge.jsxs)(Ge.Fragment,{children:[(0,Ge.jsx)(mh,{className:"w-5 h-5"}),(0,Ge.jsx)("span",{children:"R\xe9essayer le paiement"})]})}),(0,Ge.jsx)(Vu,{onClick:()=>{s("/dashboard")},variant:"outline",className:"flex-1 border-gray-300 text-gray-700 hover:bg-gray-50 font-semibold py-3 px-6 rounded-xl transition-colors",children:"Retour au Dashboard"})]})]}),(0,Ge.jsxs)("div",{className:"mt-8 pt-6 border-t border-gray-200",children:[(0,Ge.jsx)("p",{className:"text-sm text-gray-500 mb-2",children:"Besoin d'aide ? Contactez notre support :"}),(0,Ge.jsxs)("div",{className:"flex justify-center space-x-4 text-sm",children:[(0,Ge.jsx)("a",{href:"mailto:support@campusfinance.com",className:"text-primary-600 hover:text-primary-700",children:"support@campusfinance.com"}),(0,Ge.jsx)("span",{className:"text-gray-400",children:"|"}),(0,Ge.jsx)("a",{href:"tel:+2250700000000",className:"text-primary-600 hover:text-primary-700",children:"+225 07 00 00 00 00"})]})]})]})})})]})},em=()=>{const{showError:e}=it(),{user:n}=Je(),s=Y(),[r]=Ie(),[a,i]=(0,t.useState)(!1),o=r.get("transaction_id"),l=r.get("amount"),c=r.get("loan_id"),d=r.get("user_id");(0,t.useEffect)(()=>{e("Le paiement a \xe9t\xe9 annul\xe9.")},[e]);return(0,Ge.jsxs)("div",{className:"bg-gradient-to-br from-yellow-50 via-orange-50 to-red-50 min-h-screen",children:[(0,Ge.jsxs)("div",{className:"relative overflow-hidden",children:[(0,Ge.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-yellow-500 via-orange-600 to-red-500 opacity-10 animate-gradient"}),(0,Ge.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-white/20 via-transparent to-transparent"}),(0,Ge.jsx)("div",{className:"relative px-4 lg:px-8 py-8 lg:py-12 backdrop-blur-sm",children:(0,Ge.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,Ge.jsx)("div",{className:"flex items-center justify-between mb-8",children:(0,Ge.jsxs)(Vu,{variant:"outline",onClick:()=>s("/dashboard"),className:"flex items-center space-x-2 px-4 py-2 bg-white/20 backdrop-blur-sm border-white/30",children:[(0,Ge.jsx)(Qu,{size:20}),(0,Ge.jsx)("span",{children:"Retour au Dashboard"})]})}),(0,Ge.jsx)("div",{className:"text-center mb-8 lg:mb-12",children:(0,Ge.jsxs)("h1",{className:"text-4xl lg:text-6xl font-bold text-orange-900 font-montserrat mb-4",children:["Paiement Annul\xe9"," ",(0,Ge.jsx)("span",{className:"inline-block",children:"\u26a0\ufe0f"})]})})]})})]}),(0,Ge.jsx)("div",{className:"max-w-2xl mx-auto px-4 pb-8",children:(0,Ge.jsx)(Ah,{title:"D\xe9tails de l'annulation",className:"bg-white/90 backdrop-blur-sm border-white/20",children:(0,Ge.jsxs)("div",{className:"text-center py-8",children:[(0,Ge.jsx)("div",{className:"w-24 h-24 bg-orange-100 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,Ge.jsx)(st,{className:"w-12 h-12 text-orange-600"})}),(0,Ge.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Le paiement a \xe9t\xe9 annul\xe9"}),(0,Ge.jsxs)("p",{className:"text-gray-600 mb-6 text-lg",children:["Votre paiement de"," ",(0,Ge.jsx)("strong",{children:l?Yu(parseInt(l)):"N/A"})," a \xe9t\xe9 annul\xe9. Aucun montant n'a \xe9t\xe9 d\xe9bit\xe9 de votre compte."]}),(0,Ge.jsxs)("div",{className:"bg-gray-50 rounded-xl p-4 mb-6 text-left",children:[(0,Ge.jsx)("h3",{className:"font-semibold text-gray-900 mb-2",children:"D\xe9tails techniques :"}),(0,Ge.jsxs)("div",{className:"space-y-1 text-sm text-gray-600",children:[(0,Ge.jsxs)("p",{children:[(0,Ge.jsx)("strong",{children:"Transaction ID :"})," ",o||"N/A"]}),(0,Ge.jsxs)("p",{children:[(0,Ge.jsx)("strong",{children:"Pr\xeat ID :"})," ",c||"N/A"]}),(0,Ge.jsxs)("p",{children:[(0,Ge.jsx)("strong",{children:"Utilisateur ID :"})," ",d||"N/A"]}),(0,Ge.jsxs)("p",{children:[(0,Ge.jsx)("strong",{children:"Montant :"})," ",l?Yu(parseInt(l)):"N/A"]}),(0,Ge.jsxs)("p",{children:[(0,Ge.jsx)("strong",{children:"Statut :"})," ",(0,Ge.jsx)("span",{className:"text-orange-600 font-medium",children:"Annul\xe9"})]})]})]}),(0,Ge.jsxs)("div",{className:"space-y-4",children:[(0,Ge.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4",children:[(0,Ge.jsx)("h3",{className:"font-semibold text-blue-900 mb-2",children:"Que pouvez-vous faire ?"}),(0,Ge.jsxs)("ul",{className:"text-sm text-blue-800 space-y-1",children:[(0,Ge.jsx)("li",{children:"\u2022 R\xe9essayer le paiement maintenant"}),(0,Ge.jsx)("li",{children:"\u2022 Retourner au dashboard pour plus tard"}),(0,Ge.jsx)("li",{children:"\u2022 V\xe9rifier les informations de votre compte Mobile Money"}),(0,Ge.jsx)("li",{children:"\u2022 Contacter le support si vous avez des questions"})]})]}),(0,Ge.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 pt-4",children:[(0,Ge.jsx)(Vu,{onClick:()=>{i(!0),setTimeout(()=>{s("/remboursement"),i(!1)},1e3)},disabled:a,className:"flex-1 bg-primary-500 hover:bg-primary-600 text-white font-semibold py-3 px-6 rounded-xl transition-colors flex items-center justify-center space-x-2",children:a?(0,Ge.jsxs)(Ge.Fragment,{children:[(0,Ge.jsx)(mh,{className:"w-5 h-5 animate-spin"}),(0,Ge.jsx)("span",{children:"Redirection..."})]}):(0,Ge.jsxs)(Ge.Fragment,{children:[(0,Ge.jsx)(mh,{className:"w-5 h-5"}),(0,Ge.jsx)("span",{children:"R\xe9essayer le paiement"})]})}),(0,Ge.jsx)(Vu,{onClick:()=>{s("/dashboard")},variant:"outline",className:"flex-1 border-gray-300 text-gray-700 hover:bg-gray-50 font-semibold py-3 px-6 rounded-xl transition-colors",children:"Retour au Dashboard"})]})]}),(0,Ge.jsxs)("div",{className:"mt-6 bg-green-50 border border-green-200 rounded-xl p-4",children:[(0,Ge.jsx)("h3",{className:"font-semibold text-green-900 mb-2",children:"Information importante :"}),(0,Ge.jsx)("p",{className:"text-sm text-green-800",children:"Aucun montant n'a \xe9t\xe9 d\xe9bit\xe9 de votre compte. Vous pouvez r\xe9essayer le paiement \xe0 tout moment sans aucun frais suppl\xe9mentaire."})]}),(0,Ge.jsxs)("div",{className:"mt-8 pt-6 border-t border-gray-200",children:[(0,Ge.jsx)("p",{className:"text-sm text-gray-500 mb-2",children:"Besoin d'aide ? Contactez notre support :"}),(0,Ge.jsxs)("div",{className:"flex justify-center space-x-4 text-sm",children:[(0,Ge.jsx)("a",{href:"mailto:support@campusfinance.com",className:"text-primary-600 hover:text-primary-700",children:"support@campusfinance.com"}),(0,Ge.jsx)("span",{className:"text-gray-400",children:"|"}),(0,Ge.jsx)("a",{href:"tel:+2250700000000",className:"text-primary-600 hover:text-primary-700",children:"+225 07 00 00 00 00"})]})]})]})})})]})},tm=Xe("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]),nm=Xe("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),sm=()=>{var e,n,s;const{user:r,logout:a}=Je(),i=Y(),{notifications:o,markAsRead:l}=it(),[c,d]=(0,t.useState)(!1),[u,h]=(0,t.useState)(!1),[m,p]=(0,t.useState)(null),[f,x]=(0,t.useState)(null),[g,v]=(0,t.useState)(!1),y=(0,t.useRef)(null),[b,j]=(0,t.useState)({firstName:(null===r||void 0===r?void 0:r.first_name)||(null===r||void 0===r||null===(e=r.user_metadata)||void 0===e?void 0:e.first_name)||"",lastName:(null===r||void 0===r?void 0:r.last_name)||(null===r||void 0===r||null===(n=r.user_metadata)||void 0===n?void 0:n.last_name)||"",email:(null===r||void 0===r?void 0:r.email)||"",phone:(null===r||void 0===r?void 0:r.phone_number)||(null===r||void 0===r||null===(s=r.user_metadata)||void 0===s?void 0:s.phone_number)||""});return r?(0,Ge.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-primary-50 via-accent-50 to-secondary-50",children:[(0,Ge.jsx)("div",{className:"bg-white/80 backdrop-blur-sm border-b border-white/20 sticky top-0 z-10",children:(0,Ge.jsx)("div",{className:"max-w-7xl mx-auto px-4 py-4",children:(0,Ge.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Ge.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,Ge.jsx)("button",{onClick:()=>i("/menu"),className:"text-gray-600 hover:text-gray-900 transition-colors",children:"\u2190 Retour au menu"}),(0,Ge.jsx)("h1",{className:"text-2xl font-bold text-gray-900 font-montserrat",children:"Mon Profil"})]}),(0,Ge.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,Ge.jsx)($d,{notifications:o,onMarkAsRead:l}),(0,Ge.jsxs)(Vu,{onClick:async()=>{try{await a(),i("/login")}catch(e){console.error("Erreur lors de la d\xe9connexion:",e)}},variant:"outline",className:"flex items-center space-x-2 text-red-600 border-red-200 hover:bg-red-50",children:[(0,Ge.jsx)(Mn,{size:16}),(0,Ge.jsx)("span",{children:"D\xe9connexion"})]})]})]})})}),(0,Ge.jsx)("div",{className:"max-w-7xl mx-auto px-4 py-8",children:(0,Ge.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,Ge.jsx)("div",{className:"lg:col-span-2 space-y-6",children:(0,Ge.jsxs)(Ah,{className:"bg-white/90 backdrop-blur-sm border-white/20",children:[(0,Ge.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,Ge.jsx)("h2",{className:"text-2xl font-bold text-gray-900 font-montserrat",children:"Informations personnelles"}),c?(0,Ge.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Ge.jsxs)(Vu,{onClick:async()=>{h(!0);try{console.log("[PROFILE] Sauvegarde du profil en cours...");b.firstName,b.lastName,b.email,b.phone;try{const e=De(De({},JSON.parse(localStorage.getItem("ab_user_cache")||"{}")),{},{first_name:b.firstName,last_name:b.lastName,email:b.email});localStorage.setItem("ab_user_cache",JSON.stringify(e)),console.log("[PROFILE] \u2705 Cache local mis \xe0 jour")}catch(e){console.warn("[PROFILE] Erreur lors de la mise \xe0 jour du cache:",e)}d(!1),console.log("[PROFILE] \u2705 Profil mis \xe0 jour avec succ\xe8s")}catch(t){console.error("[PROFILE] \u274c Erreur exceptionnelle:",t)}finally{h(!1)}},disabled:u,className:"flex items-center space-x-2 bg-green-600 hover:bg-green-700",children:[(0,Ge.jsx)(Dh,{size:16}),(0,Ge.jsx)("span",{children:u?"Sauvegarde...":"Sauvegarder"})]}),(0,Ge.jsxs)(Vu,{onClick:()=>{var e,t,n;j({firstName:(null===r||void 0===r?void 0:r.first_name)||(null===r||void 0===r||null===(e=r.user_metadata)||void 0===e?void 0:e.first_name)||"",lastName:(null===r||void 0===r?void 0:r.last_name)||(null===r||void 0===r||null===(t=r.user_metadata)||void 0===t?void 0:t.last_name)||"",email:(null===r||void 0===r?void 0:r.email)||"",phone:(null===r||void 0===r?void 0:r.phone_number)||(null===r||void 0===r||null===(n=r.user_metadata)||void 0===n?void 0:n.phone_number)||""}),d(!1)},variant:"outline",className:"flex items-center space-x-2",children:[(0,Ge.jsx)(st,{size:16}),(0,Ge.jsx)("span",{children:"Annuler"})]})]}):(0,Ge.jsxs)(Vu,{onClick:()=>{d(!0)},className:"flex items-center space-x-2 bg-primary-600 hover:bg-primary-700",children:[(0,Ge.jsx)(tm,{size:16}),(0,Ge.jsx)("span",{children:"Modifier"})]})]}),(0,Ge.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,Ge.jsxs)("div",{children:[(0,Ge.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Pr\xe9nom"}),(0,Ge.jsx)(Hu,{type:"text",value:b.firstName,onChange:e=>j(t=>De(De({},t),{},{firstName:e.target.value})),disabled:!c,className:"w-full"})]}),(0,Ge.jsxs)("div",{children:[(0,Ge.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nom"}),(0,Ge.jsx)(Hu,{type:"text",value:b.lastName,onChange:e=>j(t=>De(De({},t),{},{lastName:e.target.value})),disabled:!c,className:"w-full"})]}),(0,Ge.jsxs)("div",{children:[(0,Ge.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),(0,Ge.jsx)(Hu,{type:"email",value:b.email,onChange:e=>j(t=>De(De({},t),{},{email:e.target.value})),disabled:!c,className:"w-full"})]}),(0,Ge.jsxs)("div",{children:[(0,Ge.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"T\xe9l\xe9phone"}),(0,Ge.jsx)(Hu,{type:"tel",value:b.phone,onChange:e=>j(t=>De(De({},t),{},{phone:e.target.value})),disabled:!c,className:"w-full"})]})]})]})}),(0,Ge.jsx)("div",{className:"space-y-4",children:(0,Ge.jsx)("div",{children:(0,Ge.jsx)(Ah,{className:"bg-white/90 backdrop-blur-sm border-white/20",children:(0,Ge.jsxs)("div",{className:"text-center",children:[(0,Ge.jsxs)("div",{className:"relative mx-auto mb-6",children:[(0,Ge.jsx)("input",{ref:y,type:"file",accept:"image/*",onChange:e=>{const t=e.target.files[0];if(t){p(t);const e=new FileReader;e.onload=e=>{x(e.target.result)},e.readAsDataURL(t)}},className:"hidden"}),(0,Ge.jsxs)("div",{className:"relative mx-auto w-28 h-28",children:[(0,Ge.jsx)("div",{className:"absolute inset-0 rounded-full bg-gradient-to-r from-blue-500 via-indigo-500 to-purple-500 p-1"}),(0,Ge.jsxs)("div",{className:"w-full h-full bg-gradient-to-br from-blue-400 via-indigo-500 to-purple-600 rounded-full flex items-center justify-center shadow-2xl overflow-hidden relative",children:[f?(0,Ge.jsx)("img",{src:f,alt:"Photo de profil",className:"w-full h-full object-cover relative z-10"}):(0,Ge.jsxs)("span",{className:"text-white text-4xl font-bold relative z-10",children:[b.firstName.charAt(0),b.lastName.charAt(0)]}),g&&(0,Ge.jsx)("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center rounded-full z-20",children:(0,Ge.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-3 border-white border-t-transparent"})}),(0,Ge.jsx)("button",{onClick:()=>{var e;null===(e=y.current)||void 0===e||e.click()},className:"absolute bottom-0 right-0 w-8 h-8 bg-white rounded-full shadow-lg flex items-center justify-center z-30 hover:bg-gray-100 transition-colors duration-200",children:(0,Ge.jsx)($u,{size:16,className:"text-gray-600"})}),f&&(0,Ge.jsx)("button",{onClick:()=>{p(null),x(null),y.current&&(y.current.value="")},className:"absolute top-0 right-0 w-8 h-8 bg-red-500 rounded-full shadow-lg flex items-center justify-center z-30 hover:bg-red-600 transition-colors duration-200",children:(0,Ge.jsx)(nm,{size:16,className:"text-white"})})]})]})]}),(0,Ge.jsxs)("h3",{className:"text-2xl font-bold text-gray-900 font-montserrat mb-3 bg-gradient-to-r from-blue-600 via-indigo-600 to-purple-600 bg-clip-text text-transparent",children:[b.firstName," ",b.lastName]}),(0,Ge.jsx)("div",{className:"flex items-center justify-center space-x-2 text-sm text-gray-500",children:(0,Ge.jsx)("span",{className:"font-medium capitalize",children:r.role})})]})})})})]})})]}):(0,Ge.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-primary-50 via-accent-50 to-secondary-50 flex items-center justify-center",children:(0,Ge.jsxs)("div",{className:"text-center",children:[(0,Ge.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-primary-600 mx-auto mb-4"}),(0,Ge.jsx)("p",{className:"text-gray-600",children:"Chargement du profil..."})]})})},rm=()=>{const e=Y(),[n,s]=(0,t.useState)({name:"Elise HASSI",email:"elise.hassi@example.com",role:"client",avatar:null}),r=[{icon:(0,Ge.jsx)(ph,{size:24}),title:"AB \xc9pargne",subtitle:"\xc9pargne et investissement",description:"D\xe9couvrez nos solutions d'\xe9pargne et d'investissement personnalis\xe9es pour faire fructifier votre capital",action:()=>e("/ab-epargne"),color:"from-green-500 to-emerald-600",bgColor:"bg-gradient-to-br from-green-50 to-emerald-100",iconBg:"bg-gradient-to-r from-green-500 to-emerald-600"},{icon:(0,Ge.jsx)(ru,{size:24}),title:"AB Logement",subtitle:"Solutions immobili\xe8res",description:"Acc\xe9dez \xe0 nos services de financement immobilier et de gestion locative personnalis\xe9s",action:()=>e("/ab-logement"),color:"from-blue-500 to-indigo-600",bgColor:"bg-gradient-to-br from-blue-50 to-indigo-100",iconBg:"bg-gradient-to-r from-blue-500 to-indigo-600"},{icon:(0,Ge.jsx)(yh,{size:24}),title:"Coaching et Finance Entrepreneuriale",subtitle:"Accompagnement business",description:"D\xe9veloppez votre entreprise avec notre expertise en finance et notre accompagnement personnalis\xe9",action:()=>e("/coaching-finance"),color:"from-purple-500 to-violet-600",bgColor:"bg-gradient-to-br from-purple-50 to-violet-100",iconBg:"bg-gradient-to-r from-purple-500 to-violet-600"},{icon:(0,Ge.jsx)(fh,{size:24}),title:"Score de Fid\xe9lit\xe9",subtitle:"Programme de r\xe9compenses",description:"D\xe9couvrez vos avantages et r\xe9compenses pour votre fid\xe9lit\xe9 \xe0 nos services",action:()=>e("/loyalty-score"),color:"from-yellow-500 to-orange-600",bgColor:"bg-gradient-to-br from-yellow-50 to-orange-100",iconBg:"bg-gradient-to-r from-yellow-500 to-orange-600"}];return(0,Ge.jsx)("div",{className:"bg-gradient-to-br from-primary-50 via-accent-50 to-secondary-50 pt-0",children:(0,Ge.jsxs)("div",{className:"relative overflow-hidden",children:[(0,Ge.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-500 via-purple-600 to-indigo-600 opacity-15"}),(0,Ge.jsx)("div",{className:"relative px-4 lg:px-8 py-8 lg:py-12 backdrop-blur-sm",children:(0,Ge.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,Ge.jsx)("div",{className:"text-center mb-8 lg:mb-12",children:(0,Ge.jsxs)("h1",{className:"text-4xl lg:text-6xl font-bold text-secondary-900 font-montserrat mb-4",children:["Menu"," ",(0,Ge.jsx)("span",{className:"bg-gradient-to-r from-blue-600 via-purple-600 to-indigo-600 bg-clip-text text-transparent",children:"Principal"})]})}),(0,Ge.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:r.map((e,t)=>(0,Ge.jsx)("div",{className:"group cursor-pointer",onClick:e.action,children:(0,Ge.jsxs)("div",{className:"".concat(e.bgColor," p-4 rounded-2xl border border-white/50 shadow-lg hover:shadow-xl transition-all duration-300 relative overflow-hidden"),children:[(0,Ge.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-700"}),(0,Ge.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,Ge.jsxs)("div",{className:"flex-1",children:[(0,Ge.jsx)("h3",{className:"text-lg font-bold bg-gradient-to-r ".concat(e.color," bg-clip-text text-transparent mb-1"),children:e.title}),(0,Ge.jsx)("p",{className:"text-xs text-gray-600 font-medium",children:e.subtitle})]}),(0,Ge.jsx)("div",{className:"p-2 rounded-xl ".concat(e.iconBg," text-white shadow-lg"),children:e.icon})]}),(0,Ge.jsx)("p",{className:"text-xs text-gray-600 leading-relaxed mb-3",children:e.description}),(0,Ge.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Ge.jsx)("div",{className:"w-6 h-6 rounded-full ".concat(e.iconBg," flex items-center justify-center"),children:(0,Ge.jsx)(Fn,{size:12,className:"text-white"})}),(0,Ge.jsx)("div",{className:"text-xs font-medium bg-gradient-to-r ".concat(e.color," bg-clip-text text-transparent"),children:"D\xe9couvrir"})]})]})},t))})]})})]})})},am=()=>{const e=Y();return(0,Ge.jsx)("div",{className:"bg-gradient-to-br from-blue-50 via-indigo-50 to-blue-100 min-h-screen",children:(0,Ge.jsxs)("div",{className:"relative overflow-hidden",children:[(0,Ge.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-500 via-indigo-600 to-blue-600 opacity-10"}),(0,Ge.jsx)("div",{className:"relative px-4 lg:px-8 py-6",children:(0,Ge.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,Ge.jsxs)(Vd.button,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5},onClick:()=>e("/menu"),className:"inline-flex items-center space-x-2 px-4 py-2 bg-white/80 backdrop-blur-sm rounded-full border border-white/50 shadow-lg hover:bg-white/90 transition-all duration-300 mb-8",children:[(0,Ge.jsx)(Qu,{size:16,className:"text-blue-600"}),(0,Ge.jsx)("span",{className:"text-sm font-medium text-blue-700",children:"Retour au menu"})]}),(0,Ge.jsxs)("div",{className:"text-center",children:[(0,Ge.jsx)(Vd.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.8,delay:.2},className:"mb-8",children:(0,Ge.jsx)("div",{className:"inline-flex p-8 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-full text-white shadow-2xl",children:(0,Ge.jsx)(ru,{size:80})})}),(0,Ge.jsxs)(Vd.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.3},className:"text-4xl lg:text-6xl font-bold text-gray-900 mb-6",children:["AB"," ",(0,Ge.jsx)("span",{className:"bg-gradient-to-r from-blue-600 via-indigo-600 to-blue-600 bg-clip-text text-transparent",children:"Logement"})]}),(0,Ge.jsx)(Vd.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.4},className:"mb-8",children:(0,Ge.jsxs)("div",{className:"inline-flex items-center space-x-3 px-6 py-3 bg-yellow-100 border border-yellow-300 rounded-full",children:[(0,Ge.jsx)(Wd,{size:20,className:"text-yellow-600"}),(0,Ge.jsx)("span",{className:"text-lg font-semibold text-yellow-800",children:"Bient\xf4t disponible"})]})}),(0,Ge.jsxs)(Vd.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.5},className:"text-xl lg:text-2xl text-gray-600 mb-12 font-light max-w-2xl mx-auto",children:["Nos solutions immobili\xe8res et de financement logement sont en cours de d\xe9veloppement.",(0,Ge.jsx)("br",{}),(0,Ge.jsx)("span",{className:"text-blue-600 font-medium",children:"Revenez bient\xf4t !"})]}),(0,Ge.jsx)(Vd.button,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.6},onClick:()=>e("/menu"),className:"bg-gradient-to-r from-blue-500 to-indigo-600 text-white px-8 py-4 rounded-2xl shadow-xl hover:shadow-2xl transition-all duration-300 hover:scale-105",children:"Retour au menu principal"})]})]})})]})})},im=Xe("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),om=Xe("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]),lm=e=>{let{planConfig:n}=e;const s=(0,t.useRef)(null),{user:r}=(Y(),Je());(0,t.useEffect)(()=>{const e=document.createElement("script");return e.src="https://cdn.fedapay.com/checkout.js?v=1.1.7",e.async=!0,e.onload=()=>{console.log("[FedaPay] \u2705 Script charg\xe9")},e.onerror=()=>{console.error("[FedaPay] \u274c Erreur chargement script")},document.body.appendChild(e),()=>document.body.removeChild(e)},[]);const a=()=>{console.log("[FedaPay] \ud83d\udd0d D\xe9marrage du polling pour d\xe9tecter la cr\xe9ation du plan...");let e=0;const t=async()=>{try{e++,console.log("[FedaPay] \ud83d\udd0d Tentative ".concat(e,"/").concat(60," - V\xe9rification du plan..."));const n=await fetch("http://localhost:5000/api/savings/plan-status?userId=".concat(null===r||void 0===r?void 0:r.id)),s=await n.json();if(s.success&&s.plan)return console.log("[FedaPay] \u2705 Plan trouv\xe9 ! Redirection vers RetourEpargne..."),void(window.location.href="/ab-epargne/retour?planId=".concat(s.plan.id,"&status=approved"));if(e>=60)return console.log("[FedaPay] \u23f0 Timeout - Aucun plan trouv\xe9 apr\xe8s 2 minutes"),void alert("Le plan n'a pas \xe9t\xe9 cr\xe9\xe9 dans les temps. Veuillez r\xe9essayer.");setTimeout(t,2e3)}catch(n){if(console.error("[FedaPay] \u274c Erreur lors du polling:",n),e++,e>=60)return void alert("Erreur de connexion. Veuillez r\xe9essayer.");setTimeout(t,2e3)}};setTimeout(t,5e3)};return(0,Ge.jsx)("button",{ref:s,onClick:()=>{window.FedaPay?(console.log("[FedaPay] \ud83d\ude80 Initialisation du paiement..."),a(),window.FedaPay.init(s.current,{public_key:"pk_sandbox_ZXhGKFGNXwn853-mYF9pANmi",transaction:{amount:1e3,description:"Cr\xe9ation plan \xe9pargne - ".concat(null===r||void 0===r?void 0:r.email),currency:{iso:"XOF"},callback_url:"".concat(window.location.origin,"/ab-epargne/retour"),custom_metadata:{paymentType:"savings_plan_creation",user_id:null===r||void 0===r?void 0:r.id,fixed_amount:n.montant,frequency_days:n.frequence,duration_months:n.nombreMois}},customer:{email:null===r||void 0===r?void 0:r.email,firstname:(null===r||void 0===r?void 0:r.first_name)||"Client",lastname:(null===r||void 0===r?void 0:r.last_name)||"Campus",phone_number:{number:(null===r||void 0===r?void 0:r.phone)||"97000000",country:"BJ"}},modal:!0})):alert("FedaPay n'est pas encore charg\xe9 !")},className:"w-full bg-gradient-to-r from-blue-500 to-indigo-600 text-white py-4 rounded-xl font-semibold",children:"Payer 1000 F"})},cm=()=>{const e=Y(),{user:n}=Je(),[s,r]=(0,t.useState)("config"),[a,i]=(0,t.useState)({montant:500,frequence:"5",nombreMois:6}),[o,l]=(0,t.useState)(!1),[c,d]=(0,t.useState)(!0);(0,t.useEffect)(()=>{(()=>{const t=new URLSearchParams(window.location.search),n=t.get("reference"),s=t.get("status");if(n&&"approved"===s)console.log("[AB_EPARGNE] \ud83d\udd04 Paiement d\xe9tect\xe9, redirection vers RetourEpargne"),window.history.replaceState({},document.title,window.location.pathname),e("/ab-epargne/retour?reference=".concat(n,"&status=approved"))})()},[e]);const u=()=>{l(!0)},h=()=>{e("/dashboard")};(0,t.useEffect)(()=>{(async()=>{if(!n)return console.log("[AB_EPARGNE] \u23f3 Pas d'utilisateur connect\xe9"),void d(!1);try{d(!0),console.log("[AB_EPARGNE] \ud83d\udd0d Recherche du plan actif pour user:",n.id);const t="".concat(Fe,"/api/savings/plan-status?userId=").concat(n.id);console.log("[AB_EPARGNE] \ud83c\udf10 URL API:",t);const s=await fetch(t);console.log("[AB_EPARGNE] \ud83d\udce1 Status r\xe9ponse:",s.status);const r=await s.json();if(console.log("[AB_EPARGNE] \ud83d\udce1 R\xe9ponse API compl\xe8te:",r),r.success&&r.plan)return console.log("[AB_EPARGNE] \u2705 Plan actif trouv\xe9, redirection vers la page de d\xe9tail:",r.plan),void e("/ab-epargne/plan/".concat(r.plan.id));console.log("[AB_EPARGNE] \u2139\ufe0f Aucun plan actif trouv\xe9, affichage de la config")}catch(t){console.error("[AB_EPARGNE] \u274c Erreur:",t)}finally{d(!1)}})()},[n,e]);const m=()=>(0,Ge.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-4",children:[(0,Ge.jsxs)("div",{className:"flex items-center mb-8 pt-4",children:[(0,Ge.jsx)("button",{onClick:h,className:"flex items-center",children:(0,Ge.jsx)(im,{className:"w-6 h-6 text-gray-600"})}),(0,Ge.jsx)("h1",{className:"text-xl font-semibold text-gray-800 ml-4",children:"Configuration du Plan"})]}),(0,Ge.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-6 mx-auto max-w-md",children:[(0,Ge.jsxs)("div",{className:"text-center mb-8",children:[(0,Ge.jsx)("div",{className:"w-16 h-16 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,Ge.jsx)(uu,{className:"w-8 h-8 text-white"})}),(0,Ge.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"AB \xc9pargne"}),(0,Ge.jsx)("p",{className:"text-gray-600",children:"Configurez votre plan d'\xe9pargne"})]}),(0,Ge.jsxs)("div",{className:"mb-6",children:[(0,Ge.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Montant \xe0 d\xe9poser (minimum 500 F)"}),(0,Ge.jsxs)("div",{className:"flex items-center bg-gray-50 rounded-xl p-4",children:[(0,Ge.jsx)("button",{onClick:()=>i(De(De({},a),{},{montant:Math.max(500,a.montant-100)})),className:"w-10 h-10 bg-white rounded-full shadow flex items-center justify-center",children:(0,Ge.jsx)(om,{className:"w-4 h-4 text-gray-600"})}),(0,Ge.jsxs)("div",{className:"flex-1 text-center",children:[(0,Ge.jsx)("input",{type:"number",min:"500",step:"100",value:a.montant,onChange:e=>{const t=parseInt(e.target.value)||500;i(De(De({},a),{},{montant:Math.max(500,t)}))},onFocus:e=>{e.target.select()},onClick:e=>{e.target.select()},className:"w-full text-2xl font-bold text-gray-800 text-center bg-transparent border-none outline-none focus:outline-none cursor-pointer",style:{width:"".concat(Math.max(a.montant.toString().length+2,6),"ch")},placeholder:"500"}),(0,Ge.jsx)("span",{className:"text-gray-600 ml-1",children:"F"})]}),(0,Ge.jsx)("button",{onClick:()=>i(De(De({},a),{},{montant:a.montant+100})),className:"w-10 h-10 bg-white rounded-full shadow flex items-center justify-center",children:(0,Ge.jsx)(gh,{className:"w-4 h-4 text-gray-600"})})]})]}),(0,Ge.jsxs)("div",{className:"mb-6",children:[(0,Ge.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Fr\xe9quence de d\xe9p\xf4t"}),(0,Ge.jsxs)("div",{className:"flex gap-3",children:[(0,Ge.jsx)("button",{onClick:()=>i(De(De({},a),{},{frequence:"5"})),className:"flex-1 py-3 px-4 rounded-xl font-medium ".concat("5"===a.frequence?"bg-gradient-to-r from-blue-500 to-indigo-600 text-white shadow-md":"bg-gray-50 text-gray-700"),children:"Tous les 5 jours"}),(0,Ge.jsx)("button",{onClick:()=>i(De(De({},a),{},{frequence:"10"})),className:"flex-1 py-3 px-4 rounded-xl font-medium ".concat("10"===a.frequence?"bg-gradient-to-r from-blue-500 to-indigo-600 text-white shadow-md":"bg-gray-50 text-gray-700"),children:"Tous les 10 jours"})]})]}),(0,Ge.jsxs)("div",{className:"mb-8",children:[(0,Ge.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Dur\xe9e (mois)"}),(0,Ge.jsxs)("div",{className:"flex items-center bg-gray-50 rounded-xl p-4",children:[(0,Ge.jsx)("button",{onClick:()=>i(De(De({},a),{},{nombreMois:Math.max(1,a.nombreMois-1)})),className:"w-10 h-10 bg-white rounded-full shadow flex items-center justify-center",children:(0,Ge.jsx)(om,{className:"w-4 h-4 text-gray-600"})}),(0,Ge.jsxs)("div",{className:"flex-1 text-center",children:[(0,Ge.jsx)("span",{className:"text-2xl font-bold text-gray-800",children:a.nombreMois}),(0,Ge.jsx)("span",{className:"text-gray-600 ml-1",children:"mois"})]}),(0,Ge.jsx)("button",{onClick:()=>i(De(De({},a),{},{nombreMois:a.nombreMois+1})),className:"w-10 h-10 bg-white rounded-full shadow flex items-center justify-center",children:(0,Ge.jsx)(gh,{className:"w-4 h-4 text-gray-600"})})]})]}),(0,Ge.jsxs)("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl p-4 mb-6",children:[(0,Ge.jsx)("h3",{className:"font-semibold text-gray-800 mb-2",children:"R\xe9sum\xe9 de votre plan"}),(0,Ge.jsxs)("div",{className:"text-sm text-gray-600 space-y-1",children:[(0,Ge.jsxs)("p",{children:["\u2022 D\xe9p\xf4t : ",a.montant.toLocaleString()," F tous les ",a.frequence," jours"]}),(0,Ge.jsxs)("p",{children:["\u2022 Dur\xe9e : ",a.nombreMois," mois"]}),(0,Ge.jsx)("p",{children:"\u2022 Taux d'int\xe9r\xeats : 5% par mois"}),(0,Ge.jsxs)("p",{children:["\u2022 Total d\xe9pos\xe9 : ",(a.montant*(30/parseInt(a.frequence))*a.nombreMois).toLocaleString()," F"]}),(0,Ge.jsxs)("p",{children:["\u2022 Int\xe9r\xeats estim\xe9s : ",Math.round(a.montant*(30/parseInt(a.frequence))*a.nombreMois*.05*a.nombreMois).toLocaleString()," F"]}),(0,Ge.jsxs)("p",{className:"font-semibold text-blue-600",children:["\u2022 Total avec int\xe9r\xeats : ",Math.round(a.montant*(30/parseInt(a.frequence))*a.nombreMois*(1+.05*a.nombreMois)).toLocaleString()," F"]})]})]}),(0,Ge.jsx)("button",{onClick:u,className:"w-full bg-gradient-to-r from-blue-500 to-indigo-600 text-white py-4 rounded-xl font-semibold shadow-lg hover:shadow-xl transition-all",children:"Continuer"})]}),o&&(0,Ge.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,Ge.jsxs)("div",{className:"bg-white rounded-2xl p-6 max-w-sm w-full",children:[(0,Ge.jsxs)("div",{className:"text-center mb-6",children:[(0,Ge.jsx)(au,{className:"w-12 h-12 text-blue-500 mx-auto mb-3"}),(0,Ge.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Paiement requis"}),(0,Ge.jsx)("p",{className:"text-gray-600 text-sm",children:"Frais de cr\xe9ation du plan d'\xe9pargne"})]}),(0,Ge.jsx)("div",{className:"bg-gray-50 rounded-xl p-4 mb-6 text-center",children:(0,Ge.jsx)("span",{className:"text-2xl font-bold text-gray-800",children:"1 000 F"})}),(0,Ge.jsxs)("div",{className:"flex gap-3",children:[(0,Ge.jsx)("button",{onClick:()=>l(!1),className:"flex-1 py-3 text-gray-600 font-medium",children:"Annuler"}),(0,Ge.jsx)("div",{className:"flex-1",children:(0,Ge.jsx)(lm,{planConfig:a})})]})]})})]}),p=()=>(0,Ge.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-4",children:[(0,Ge.jsx)("div",{className:"flex items-center justify-between mb-8 pt-4",children:(0,Ge.jsxs)("div",{className:"flex items-center",children:[(0,Ge.jsx)("button",{onClick:h,className:"flex items-center",children:(0,Ge.jsx)(im,{className:"w-6 h-6 text-gray-600"})}),(0,Ge.jsx)("h1",{className:"text-xl font-semibold text-gray-800 ml-4",children:"Mon Plan d'\xc9pargne"})]})}),(0,Ge.jsxs)("div",{className:"bg-gradient-to-r from-blue-500 to-indigo-600 rounded-2xl p-6 mb-6 text-white shadow-xl",children:[(0,Ge.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Ge.jsxs)("div",{children:[(0,Ge.jsx)("p",{className:"text-blue-100 text-sm",children:"Solde disponible"}),(0,Ge.jsx)("p",{className:"text-3xl font-bold",children:"0 F"})]}),(0,Ge.jsx)("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center",children:(0,Ge.jsx)(uu,{className:"w-6 h-6"})})]}),(0,Ge.jsxs)("div",{className:"flex justify-between text-sm text-blue-100",children:[(0,Ge.jsx)("span",{children:"Plan actif depuis aujourd'hui"}),(0,Ge.jsxs)("span",{children:["Prochain d\xe9p\xf4t : ",a.frequence," jours"]})]})]}),(0,Ge.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[(0,Ge.jsxs)("div",{className:"bg-white rounded-xl p-4 shadow-md",children:[(0,Ge.jsx)("p",{className:"text-gray-600 text-sm",children:"D\xe9p\xf4t pr\xe9vu"}),(0,Ge.jsxs)("p",{className:"text-lg font-bold text-gray-800",children:[a.montant.toLocaleString()," F"]})]}),(0,Ge.jsxs)("div",{className:"bg-white rounded-xl p-4 shadow-md",children:[(0,Ge.jsx)("p",{className:"text-gray-600 text-sm",children:"Dur\xe9e restante"}),(0,Ge.jsxs)("p",{className:"text-lg font-bold text-gray-800",children:[a.nombreMois," mois"]})]})]}),(0,Ge.jsxs)("div",{className:"space-y-4",children:[(0,Ge.jsxs)("button",{className:"w-full bg-gradient-to-r from-green-500 to-green-600 text-white py-4 rounded-xl font-semibold shadow-lg flex items-center justify-center",children:[(0,Ge.jsx)(gh,{className:"w-5 h-5 mr-2"}),"Effectuer un D\xe9p\xf4t"]}),(0,Ge.jsxs)("button",{className:"w-full bg-gradient-to-r from-orange-500 to-orange-600 text-white py-4 rounded-xl font-semibold shadow-lg flex items-center justify-center",children:[(0,Ge.jsx)(om,{className:"w-5 h-5 mr-2"}),"Effectuer un Retrait"]})]}),(0,Ge.jsxs)("div",{className:"bg-white rounded-xl p-6 mt-6 shadow-md",children:[(0,Ge.jsx)("h3",{className:"font-semibold text-gray-800 mb-4",children:"D\xe9tails du plan"}),(0,Ge.jsxs)("div",{className:"space-y-3 text-sm",children:[(0,Ge.jsxs)("div",{className:"flex justify-between",children:[(0,Ge.jsx)("span",{className:"text-gray-600",children:"Montant par d\xe9p\xf4t"}),(0,Ge.jsxs)("span",{className:"font-medium",children:[a.montant.toLocaleString()," F"]})]}),(0,Ge.jsxs)("div",{className:"flex justify-between",children:[(0,Ge.jsx)("span",{className:"text-gray-600",children:"Fr\xe9quence"}),(0,Ge.jsxs)("span",{className:"font-medium",children:["Tous les ",a.frequence," jours"]})]}),(0,Ge.jsxs)("div",{className:"flex justify-between",children:[(0,Ge.jsx)("span",{className:"text-gray-600",children:"Dur\xe9e totale"}),(0,Ge.jsxs)("span",{className:"font-medium",children:[a.nombreMois," mois"]})]}),(0,Ge.jsxs)("div",{className:"flex justify-between",children:[(0,Ge.jsx)("span",{className:"text-gray-600",children:"Taux d'int\xe9r\xeats"}),(0,Ge.jsx)("span",{className:"font-medium text-green-600",children:"5% par mois"})]}),(0,Ge.jsxs)("div",{className:"flex justify-between",children:[(0,Ge.jsx)("span",{className:"text-gray-600",children:"Total d\xe9pos\xe9"}),(0,Ge.jsxs)("span",{className:"font-medium",children:[(a.montant*(30/parseInt(a.frequence))*a.nombreMois).toLocaleString()," F"]})]}),(0,Ge.jsxs)("div",{className:"flex justify-between",children:[(0,Ge.jsx)("span",{className:"text-gray-600",children:"Int\xe9r\xeats estim\xe9s"}),(0,Ge.jsxs)("span",{className:"font-medium text-green-600",children:[Math.round(a.montant*(30/parseInt(a.frequence))*a.nombreMois*.05*a.nombreMois).toLocaleString()," F"]})]}),(0,Ge.jsxs)("div",{className:"border-t pt-3 flex justify-between",children:[(0,Ge.jsx)("span",{className:"text-gray-600",children:"Objectif d'\xe9pargne"}),(0,Ge.jsxs)("span",{className:"font-semibold text-blue-600",children:[Math.round(a.montant*(30/parseInt(a.frequence))*a.nombreMois*(1+.05*a.nombreMois)).toLocaleString()," F"]})]})]})]})]});return c?(0,Ge.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,Ge.jsxs)("div",{className:"text-center",children:[(0,Ge.jsx)("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,Ge.jsx)("p",{className:"text-gray-600",children:"Chargement de votre plan..."})]})}):(0,Ge.jsx)("div",{className:"max-w-sm mx-auto bg-white min-h-screen",children:"config"===s?(0,Ge.jsx)(m,{}):(0,Ge.jsx)(p,{})})},dm=()=>{const e=Y(),n=$(),{user:s}=Je(),[r,a]=(0,t.useState)("loading"),[i,o]=(0,t.useState)(null),[l,c]=(0,t.useState)(null),[d,u]=(0,t.useState)(0),[h,m]=(0,t.useState)(0),p=Fe;(0,t.useEffect)(()=>{const t=async()=>{try{const r=new URLSearchParams(n.search),i=r.get("planId"),l=r.get("reference"),h=r.get("status");if(!i&&!l||"approved"!==h)return c("Paiement non confirm\xe9"),void a("error");let f;console.log("[RETOUR_EPARGNE] \ud83d\udd0d Polling pour planId:",i,"ou reference:",l),f=i?"".concat(p,"/api/savings/plan-status?planId=").concat(i):l&&l.startsWith("temp_")?"".concat(p,"/api/savings/plan-status?userId=").concat(null===s||void 0===s?void 0:s.id):"".concat(p,"/api/savings/plan-status?reference=").concat(l);const x=await fetch(f),g=await x.json();if(console.log("[RETOUR_EPARGNE] \ud83d\udce1 R\xe9ponse API:",g),g.success&&g.plan)console.log("[RETOUR_EPARGNE] \u2705 Plan trouv\xe9, redirection vers:","/ab-epargne/plan/".concat(g.plan.id)),o(g.plan),a("success"),setTimeout(()=>{console.log("[RETOUR_EPARGNE] \ud83d\ude80 Redirection vers PlanEpargne..."),e("/ab-epargne/plan/".concat(g.plan.id))},2e3);else{const e=d+1;if(console.log("[RETOUR_EPARGNE] \u23f3 Plan pas encore cr\xe9\xe9, tentative:",e),u(e),m(Math.min(e/30*100,100)),e>=30)return c("Le plan n'a pas \xe9t\xe9 cr\xe9\xe9 dans les temps. Veuillez contacter le support."),void a("error");setTimeout(t,1e4)}}catch(l){if(console.error("[RETOUR_EPARGNE] \u274c Erreur lors du polling:",l),u(e=>e+1),d>=30)return c("Erreur de connexion persistante. Veuillez contacter le support."),void a("error");setTimeout(t,1e4)}};t()},[n.search,e]);const f=()=>{a("loading"),c(null),u(0),window.location.reload()},x=()=>{e("/dashboard")};return"loading"===r?(0,Ge.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:(0,Ge.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8 max-w-md w-full text-center",children:[(0,Ge.jsxs)("div",{className:"mb-6",children:[(0,Ge.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 bg-green-100 rounded-full flex items-center justify-center",children:(0,Ge.jsxs)("svg",{className:"w-8 h-8 text-green-600 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[(0,Ge.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,Ge.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}),(0,Ge.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Paiement confirm\xe9 !"}),(0,Ge.jsx)("p",{className:"text-gray-600 mb-4",children:"Cr\xe9ation de votre plan d'\xe9pargne en cours..."}),(0,Ge.jsxs)("div",{className:"text-sm text-gray-500",children:["Tentative ",d+1,"/30 \u2022 ",Math.round(h),"% compl\xe9t\xe9"]})]}),(0,Ge.jsxs)("div",{className:"space-y-2",children:[(0,Ge.jsx)("div",{className:"h-3 bg-gray-200 rounded-full overflow-hidden",children:(0,Ge.jsx)("div",{className:"h-full bg-gradient-to-r from-green-500 to-blue-500 rounded-full transition-all duration-500 ease-out",style:{width:"".concat(h,"%")}})}),(0,Ge.jsx)("div",{className:"text-xs text-gray-400 text-center",children:"V\xe9rification de la cr\xe9ation du plan..."}),(0,Ge.jsx)("p",{className:"text-xs text-gray-500",children:"Veuillez patienter, cela ne prendra que quelques instants..."})]})]})}):"error"===r?(0,Ge.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:(0,Ge.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8 max-w-md w-full text-center",children:[(0,Ge.jsxs)("div",{className:"mb-6",children:[(0,Ge.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 bg-red-100 rounded-full flex items-center justify-center",children:(0,Ge.jsx)("svg",{className:"w-8 h-8 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Ge.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),(0,Ge.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Erreur de cr\xe9ation"}),(0,Ge.jsx)("p",{className:"text-gray-600 mb-4",children:l||"Une erreur est survenue lors de la cr\xe9ation de votre plan."})]}),(0,Ge.jsxs)("div",{className:"space-y-3",children:[(0,Ge.jsx)("button",{onClick:f,className:"w-full bg-blue-600 text-white py-3 px-4 rounded-lg font-medium hover:bg-blue-700 transition-colors",children:"R\xe9essayer"}),(0,Ge.jsx)("button",{onClick:x,className:"w-full bg-gray-200 text-gray-800 py-3 px-4 rounded-lg font-medium hover:bg-gray-300 transition-colors",children:"Retour au tableau de bord"})]})]})}):"success"===r&&i?(0,Ge.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:(0,Ge.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8 max-w-md w-full text-center",children:[(0,Ge.jsxs)("div",{className:"mb-6",children:[(0,Ge.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 bg-green-100 rounded-full flex items-center justify-center",children:(0,Ge.jsx)("svg",{className:"w-8 h-8 text-green-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Ge.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),(0,Ge.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Plan cr\xe9\xe9 avec succ\xe8s !"}),(0,Ge.jsx)("p",{className:"text-gray-600 mb-4",children:"Votre plan d'\xe9pargne est maintenant actif."})]}),(0,Ge.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 mb-6 text-left",children:[(0,Ge.jsx)("h3",{className:"font-semibold text-gray-900 mb-2",children:"D\xe9tails du plan :"}),(0,Ge.jsxs)("div",{className:"space-y-1 text-sm text-gray-600",children:[(0,Ge.jsxs)("div",{className:"flex justify-between",children:[(0,Ge.jsx)("span",{children:"Montant par d\xe9p\xf4t :"}),(0,Ge.jsxs)("span",{className:"font-medium",children:[null===(g=i.fixed_amount)||void 0===g?void 0:g.toLocaleString()," F"]})]}),(0,Ge.jsxs)("div",{className:"flex justify-between",children:[(0,Ge.jsx)("span",{children:"Objectif total :"}),(0,Ge.jsxs)("span",{className:"font-medium",children:[null===(v=i.total_amount_target)||void 0===v?void 0:v.toLocaleString()," F"]})]}),(0,Ge.jsxs)("div",{className:"flex justify-between",children:[(0,Ge.jsx)("span",{children:"Statut :"}),(0,Ge.jsx)("span",{className:"font-medium text-green-600 capitalize",children:i.status})]}),(0,Ge.jsxs)("div",{className:"flex justify-between",children:[(0,Ge.jsx)("span",{children:"Progression :"}),(0,Ge.jsxs)("span",{className:"font-medium",children:[i.completion_percentage||0,"%"]})]})]})]}),(0,Ge.jsx)("div",{className:"text-sm text-gray-500 mb-4",children:"Redirection automatique vers votre plan..."}),(0,Ge.jsx)("button",{onClick:()=>e("/ab-epargne/plan/".concat(i.id)),className:"w-full bg-green-600 text-white py-3 px-4 rounded-lg font-medium hover:bg-green-700 transition-colors",children:"Voir mon plan maintenant"})]})}):null;var g,v},um=e=>{let{plan:n,onSuccess:s}=e;const r=(0,t.useRef)(null),a=(0,t.useRef)(null),{user:i}=Je(),[o,l]=(0,t.useState)(!1);(0,t.useEffect)(()=>{const e=document.createElement("script");return e.src="https://cdn.fedapay.com/checkout.js?v=1.1.7",e.async=!0,e.onload=()=>{console.log("[FedaPay] \u2705 Script charg\xe9 pour d\xe9p\xf4t")},e.onerror=()=>{console.error("[FedaPay] \u274c Erreur chargement script")},document.body.appendChild(e),()=>{document.body.contains(e)&&document.body.removeChild(e)}},[]);return(0,Ge.jsxs)(Ge.Fragment,{children:[(0,Ge.jsx)("button",{ref:a,style:{display:"none"},onClick:()=>{}}),(0,Ge.jsx)("button",{ref:r,onClick:async()=>{if(window.FedaPay)if(i&&n){l(!0);try{const e=Fe,t=await fetch("".concat(e,"/api/create-savings-deposit"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:i.id,plan_id:n.id,amount:n.fixed_amount})}),s=await t.json();console.log("[FedaPay] R\xe9ponse backend:",s),s.success&&s.transactionUrl?window.location.href=s.transactionUrl:(alert("Erreur de connexion. Veuillez r\xe9essayer."),l(!1))}catch(e){console.error("[FedaPay] \u274c Erreur:",e),alert("Erreur de connexion. Veuillez r\xe9essayer."),l(!1)}}else alert("Informations utilisateur ou plan manquantes");else alert("FedaPay n'est pas encore charg\xe9 !")},disabled:o,className:"w-full bg-gradient-to-r from-green-500 to-green-600 text-white py-4 rounded-xl font-semibold shadow-lg flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed",children:o?(0,Ge.jsxs)(Ge.Fragment,{children:[(0,Ge.jsx)("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Traitement..."]}):(0,Ge.jsxs)(Ge.Fragment,{children:[(0,Ge.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Ge.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Effectuer un D\xe9p\xf4t"]})})]})},hm=()=>{var e,n,s;const{id:r}=X(),a=Y(),{user:i}=Je(),[o,l]=(0,t.useState)(null),[c,d]=(0,t.useState)(!0),[u,h]=(0,t.useState)(null);if((0,t.useEffect)(()=>{i&&r&&(async()=>{try{d(!0);const e=Fe,t=await fetch("".concat(e,"/api/savings/plan-status?planId=").concat(r)),n=await t.json();if(!n.success)return console.error("[PLAN_EPARGNE] \u274c Erreur r\xe9cup\xe9ration plan:",n.error),void h("Plan non trouv\xe9 ou acc\xe8s refus\xe9");l(n.plan)}catch(u){console.error("[PLAN_EPARGNE] \u274c Erreur:",u),h("Erreur de chargement du plan")}finally{d(!1)}})()},[i,r]),c)return(0,Ge.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,Ge.jsxs)("div",{className:"text-center",children:[(0,Ge.jsx)("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,Ge.jsx)("p",{className:"text-gray-600",children:"Chargement du plan..."})]})});if(u)return(0,Ge.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:(0,Ge.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-8 max-w-md w-full text-center",children:[(0,Ge.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 bg-red-100 rounded-full flex items-center justify-center",children:(0,Ge.jsx)("svg",{className:"w-8 h-8 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Ge.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,Ge.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Erreur"}),(0,Ge.jsx)("p",{className:"text-gray-600 mb-6",children:u}),(0,Ge.jsx)("button",{onClick:()=>a("/ab-epargne"),className:"w-full bg-blue-600 text-white py-3 rounded-xl font-semibold",children:"Retour \xe0 l'\xe9pargne"})]})});if(!o)return(0,Ge.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:(0,Ge.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-8 max-w-md w-full text-center",children:[(0,Ge.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center",children:(0,Ge.jsx)("svg",{className:"w-8 h-8 text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Ge.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),(0,Ge.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Plan non trouv\xe9"}),(0,Ge.jsx)("p",{className:"text-gray-600 mb-6",children:"Ce plan d'\xe9pargne n'existe pas ou vous n'y avez pas acc\xe8s."}),(0,Ge.jsx)("button",{onClick:()=>a("/ab-epargne"),className:"w-full bg-blue-600 text-white py-3 rounded-xl font-semibold",children:"Retour \xe0 l'\xe9pargne"})]})});const m=e=>e?new Date(e).toLocaleDateString("fr-FR",{day:"numeric",month:"long",year:"numeric"}):"N/A";return(0,Ge.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-4",children:[(0,Ge.jsx)("div",{className:"flex items-center justify-between mb-8 pt-4",children:(0,Ge.jsxs)("div",{className:"flex items-center",children:[(0,Ge.jsx)("button",{onClick:()=>a("/ab-epargne"),className:"flex items-center",children:(0,Ge.jsx)(im,{className:"w-6 h-6 text-gray-600"})}),(0,Ge.jsx)("h1",{className:"text-xl font-semibold text-gray-800 ml-4",children:"Mon Plan d'\xc9pargne"})]})}),(0,Ge.jsxs)("div",{className:"bg-gradient-to-r from-blue-500 to-indigo-600 rounded-2xl p-6 mb-6 text-white shadow-xl",children:[(0,Ge.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Ge.jsxs)("div",{children:[(0,Ge.jsx)("p",{className:"text-blue-100 text-sm",children:"Solde disponible"}),(0,Ge.jsxs)("p",{className:"text-3xl font-bold",children:[(o.current_balance||0).toLocaleString()," F"]})]}),(0,Ge.jsx)("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center",children:(0,Ge.jsx)(uu,{className:"w-6 h-6"})})]}),(0,Ge.jsxs)("div",{className:"flex justify-between text-sm text-blue-100",children:[(0,Ge.jsxs)("span",{children:["Plan actif depuis ",m(o.start_date)]}),(0,Ge.jsxs)("span",{children:["Prochain d\xe9p\xf4t : ",m(o.next_deposit_date)]})]})]}),(0,Ge.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[(0,Ge.jsxs)("div",{className:"bg-white rounded-xl p-4 shadow-md",children:[(0,Ge.jsx)("p",{className:"text-gray-600 text-sm",children:"D\xe9p\xf4t pr\xe9vu"}),(0,Ge.jsxs)("p",{className:"text-lg font-bold text-gray-800",children:[null===(e=o.fixed_amount)||void 0===e?void 0:e.toLocaleString()," F"]})]}),(0,Ge.jsxs)("div",{className:"bg-white rounded-xl p-4 shadow-md",children:[(0,Ge.jsx)("p",{className:"text-gray-600 text-sm",children:"Dur\xe9e restante"}),(0,Ge.jsxs)("p",{className:"text-lg font-bold text-gray-800",children:[(()=>{if(!o.end_date)return 0;const e=new Date(o.end_date)-new Date,t=Math.ceil(e/864e5);return Math.max(0,t)})()," jours"]})]})]}),(0,Ge.jsxs)("div",{className:"space-y-4",children:[(0,Ge.jsx)(um,{plan:o}),(0,Ge.jsxs)("button",{className:"w-full bg-gradient-to-r from-orange-500 to-orange-600 text-white py-4 rounded-xl font-semibold shadow-lg flex items-center justify-center",children:[(0,Ge.jsx)(om,{className:"w-5 h-5 mr-2"}),"Effectuer un Retrait"]})]}),(0,Ge.jsxs)("div",{className:"bg-white rounded-xl p-6 mt-6 shadow-md",children:[(0,Ge.jsx)("h3",{className:"font-semibold text-gray-800 mb-4",children:"D\xe9tails du plan"}),(0,Ge.jsxs)("div",{className:"space-y-3 text-sm",children:[(0,Ge.jsxs)("div",{className:"flex justify-between",children:[(0,Ge.jsx)("span",{className:"text-gray-600",children:"Montant par d\xe9p\xf4t"}),(0,Ge.jsxs)("span",{className:"font-medium",children:[null===(n=o.fixed_amount)||void 0===n?void 0:n.toLocaleString()," F"]})]}),(0,Ge.jsxs)("div",{className:"flex justify-between",children:[(0,Ge.jsx)("span",{className:"text-gray-600",children:"Fr\xe9quence"}),(0,Ge.jsxs)("span",{className:"font-medium",children:["Tous les ",o.frequency_days," jours"]})]}),(0,Ge.jsxs)("div",{className:"flex justify-between",children:[(0,Ge.jsx)("span",{className:"text-gray-600",children:"Dur\xe9e totale"}),(0,Ge.jsxs)("span",{className:"font-medium",children:[o.duration_months," mois"]})]}),(0,Ge.jsxs)("div",{className:"flex justify-between",children:[(0,Ge.jsx)("span",{className:"text-gray-600",children:"Taux d'int\xe9r\xeat"}),(0,Ge.jsxs)("span",{className:"font-medium text-green-600",children:[o.interest_rate||5,"% par mois"]})]}),(0,Ge.jsxs)("div",{className:"flex justify-between",children:[(0,Ge.jsx)("span",{className:"text-gray-600",children:"D\xe9p\xf4ts effectu\xe9s"}),(0,Ge.jsx)("span",{className:"font-medium",children:o.completed_deposits||0})]}),(0,Ge.jsxs)("div",{className:"flex justify-between",children:[(0,Ge.jsx)("span",{className:"text-gray-600",children:"Progression"}),(0,Ge.jsxs)("span",{className:"font-medium text-blue-600",children:[o.completion_percentage||0,"%"]})]}),(0,Ge.jsxs)("div",{className:"border-t pt-3 flex justify-between",children:[(0,Ge.jsx)("span",{className:"text-gray-600",children:"Objectif d'\xe9pargne"}),(0,Ge.jsxs)("span",{className:"font-semibold text-blue-600",children:[null===(s=o.total_amount_target)||void 0===s?void 0:s.toLocaleString()," F"]})]})]})]}),(0,Ge.jsxs)("div",{className:"bg-white rounded-xl p-6 mt-4 shadow-md",children:[(0,Ge.jsx)("h3",{className:"font-semibold text-gray-800 mb-4",children:"Informations importantes"}),(0,Ge.jsxs)("div",{className:"space-y-3 text-sm",children:[(0,Ge.jsxs)("div",{className:"flex justify-between",children:[(0,Ge.jsx)("span",{className:"text-gray-600",children:"Date de d\xe9but"}),(0,Ge.jsx)("span",{className:"font-medium",children:m(o.start_date)})]}),(0,Ge.jsxs)("div",{className:"flex justify-between",children:[(0,Ge.jsx)("span",{className:"text-gray-600",children:"Date de fin pr\xe9vue"}),(0,Ge.jsx)("span",{className:"font-medium",children:m(o.end_date)})]}),(0,Ge.jsxs)("div",{className:"flex justify-between",children:[(0,Ge.jsx)("span",{className:"text-gray-600",children:"Prochain d\xe9p\xf4t"}),(0,Ge.jsx)("span",{className:"font-medium text-blue-600",children:m(o.next_deposit_date)})]}),(0,Ge.jsxs)("div",{className:"flex justify-between",children:[(0,Ge.jsx)("span",{className:"text-gray-600",children:"Total d\xe9pos\xe9"}),(0,Ge.jsxs)("span",{className:"font-medium",children:[(o.total_deposited||0).toLocaleString()," F"]})]})]})]})]})},mm=()=>{const e=$(),n=Y(),[s,r]=(0,t.useState)("loading"),[a,i]=(0,t.useState)("V\xe9rification du d\xe9p\xf4t..."),[o,l]=(0,t.useState)(null);(0,t.useEffect)(()=>{const t=new URLSearchParams(e.search),s=t.get("id")||t.get("reference")||t.get("txId"),a=t.get("status");if(console.log("[DEPOT_RETOUR] Param\xe8tres URL:",{transactionId:s,status:a,allParams:Object.fromEntries(t.entries())}),!s)return r("success"),i("D\xe9p\xf4t confirm\xe9 ! Le solde sera mis \xe0 jour sous peu."),void setTimeout(()=>{n("/ab-epargne")},3e3);"approved"===a||"transferred"===a?c(s):(r("error"),i("D\xe9p\xf4t non approuv\xe9"))},[e.search]);const c=async e=>{try{i("V\xe9rification du d\xe9p\xf4t...");const t="https://ab-pret-back.onrender.com";let s=0;const a=10,o=async()=>{s++,console.log("[DEPOT_RETOUR] Tentative ".concat(s,"/").concat(a," pour r\xe9f\xe9rence: ").concat(e));try{const c=await fetch("".concat(t,"/api/savings/deposit-status?reference=").concat(e)),d=await c.json();if(d.success&&d.plan)return r("success"),i("D\xe9p\xf4t confirm\xe9, solde mis \xe0 jour !"),l(d.plan),void setTimeout(()=>{n("/ab-epargne/plan/".concat(d.plan.id))},3e3);if(s<a)return i("V\xe9rification du d\xe9p\xf4t... (".concat(s,"/").concat(a,")")),void setTimeout(o,2e3);r("success"),i("D\xe9p\xf4t confirm\xe9 ! Le solde sera mis \xe0 jour sous peu."),setTimeout(()=>{n("/ab-epargne")},3e3)}catch(c){console.error("[DEPOT_RETOUR] \u274c Erreur tentative ".concat(s,":"),c),s<a?setTimeout(o,2e3):(r("error"),i("Erreur de connexion"))}};o()}catch(t){console.error("[DEPOT_RETOUR] \u274c Erreur:",t),r("error"),i("Erreur de connexion")}};return(0,Ge.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-green-50 to-emerald-100 flex items-center justify-center p-4",children:(0,Ge.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8 max-w-md w-full text-center",children:["loading"===s&&(0,Ge.jsxs)(Ge.Fragment,{children:[(0,Ge.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 bg-blue-100 rounded-full flex items-center justify-center",children:(0,Ge.jsx)("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"})}),(0,Ge.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"V\xe9rification en cours"}),(0,Ge.jsx)("p",{className:"text-gray-600",children:a})]}),"success"===s&&(0,Ge.jsxs)(Ge.Fragment,{children:[(0,Ge.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 bg-green-100 rounded-full flex items-center justify-center",children:(0,Ge.jsx)(et,{className:"w-8 h-8 text-green-600"})}),(0,Ge.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"D\xe9p\xf4t confirm\xe9 !"}),(0,Ge.jsx)("p",{className:"text-gray-600 mb-6",children:a}),o&&(0,Ge.jsxs)("div",{className:"bg-gray-50 rounded-xl p-4 mb-6",children:[(0,Ge.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,Ge.jsx)("span",{className:"text-gray-600",children:"Nouveau solde"}),(0,Ge.jsxs)("span",{className:"font-bold text-green-600",children:[(o.current_balance||0).toLocaleString()," F"]})]}),(0,Ge.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,Ge.jsx)("span",{className:"text-gray-600",children:"Total d\xe9pos\xe9"}),(0,Ge.jsxs)("span",{className:"font-bold text-gray-900",children:[(o.total_deposited||0).toLocaleString()," F"]})]}),(0,Ge.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Ge.jsx)("span",{className:"text-gray-600",children:"Progression"}),(0,Ge.jsxs)("span",{className:"font-bold text-blue-600",children:[o.completion_percentage||0,"%"]})]})]}),(0,Ge.jsxs)("div",{className:"space-y-3",children:[(0,Ge.jsx)("button",{onClick:()=>{n(o?"/ab-epargne/plan/".concat(o.id):"/ab-epargne")},className:"w-full bg-gradient-to-r from-blue-500 to-blue-600 text-white py-3 rounded-xl font-semibold",children:"Voir mon plan"}),(0,Ge.jsx)("p",{className:"text-sm text-gray-500",children:"Redirection automatique dans 3 secondes..."})]})]}),"error"===s&&(0,Ge.jsxs)(Ge.Fragment,{children:[(0,Ge.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 bg-red-100 rounded-full flex items-center justify-center",children:(0,Ge.jsx)("svg",{className:"w-8 h-8 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Ge.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,Ge.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Erreur"}),(0,Ge.jsx)("p",{className:"text-gray-600 mb-6",children:a}),(0,Ge.jsx)("button",{onClick:()=>n("/ab-epargne"),className:"w-full bg-blue-600 text-white py-3 rounded-xl font-semibold",children:"Retour \xe0 l'\xe9pargne"})]})]})})},pm=()=>{const e=Y(),n=$(),{user:s}=Je(),[r,a]=(0,t.useState)("loading"),[i,o]=(0,t.useState)("V\xe9rification du remboursement...");(0,t.useEffect)(()=>{const t=new URLSearchParams(n.search),s=t.get("id")||t.get("reference")||t.get("txId"),r=t.get("status");if(console.log("[REMBOURSEMENT_RETOUR] Param\xe8tres URL:",{transactionId:s,status:r,allParams:Object.fromEntries(t.entries())}),!s)return a("success"),o("Remboursement confirm\xe9 ! Votre pr\xeat sera mis \xe0 jour sous peu."),void setTimeout(()=>{e("/dashboard")},3e3);"approved"===r||"transferred"===r?l(s):(a("error"),o("Remboursement non approuv\xe9"))},[n.search,e,s]);const l=async t=>{try{o("V\xe9rification du remboursement...");let n=0;const s=10,r=async()=>{n++,console.log("[REMBOURSEMENT_RETOUR] Tentative ".concat(n,"/").concat(s," pour transaction ID: ").concat(t));try{const i=await fetch("".concat("https://ab-pret-back.onrender.com","/api/loans/repayment-status?id=").concat(t)),l=await i.json();if(l.success&&l.loan)return a("success"),o("Remboursement confirm\xe9, pr\xeat mis \xe0 jour !"),void setTimeout(()=>{e("/dashboard")},3e3);if(n<s)return o("V\xe9rification du remboursement... (".concat(n,"/").concat(s,")")),void setTimeout(r,2e3);a("success"),o("Remboursement confirm\xe9 ! Votre pr\xeat sera mis \xe0 jour sous peu."),setTimeout(()=>{e("/dashboard")},3e3)}catch(i){console.error("[REMBOURSEMENT_RETOUR] \u274c Erreur tentative ".concat(n,":"),i),n<s?setTimeout(r,2e3):(a("error"),o("Erreur de connexion"))}};r()}catch(n){console.error("[REMBOURSEMENT_RETOUR] \u274c Erreur:",n),a("error"),o("Erreur de connexion")}};return(0,Ge.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:(0,Ge.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8 max-w-md w-full text-center",children:[(0,Ge.jsxs)("div",{className:"mb-6",children:["loading"===r&&(0,Ge.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 bg-blue-100 rounded-full flex items-center justify-center",children:(0,Ge.jsxs)("svg",{className:"w-8 h-8 text-blue-600 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[(0,Ge.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,Ge.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}),"success"===r&&(0,Ge.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 bg-green-100 rounded-full flex items-center justify-center",children:(0,Ge.jsx)("svg",{className:"w-8 h-8 text-green-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Ge.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),"error"===r&&(0,Ge.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 bg-red-100 rounded-full flex items-center justify-center",children:(0,Ge.jsx)("svg",{className:"w-8 h-8 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Ge.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,Ge.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"success"===r?"Remboursement effectu\xe9 !":"error"===r?"Erreur":"V\xe9rification..."}),(0,Ge.jsx)("p",{className:"text-gray-600 mb-4",children:i})]}),(0,Ge.jsx)("button",{onClick:()=>{e("/dashboard")},className:"bg-blue-600 text-white py-3 px-6 rounded-lg font-medium hover:bg-blue-700 transition-colors",children:"Retour au tableau de bord"})]})})},fm=()=>{const{id:e}=X();return(0,Ge.jsx)("div",{className:"min-h-screen bg-gray-50 p-8",children:(0,Ge.jsxs)("div",{className:"max-w-2xl mx-auto",children:[(0,Ge.jsxs)("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:["Test Plan \xc9pargne - ID: ",e]}),(0,Ge.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[(0,Ge.jsx)("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Plan d'\xe9pargne cr\xe9\xe9 avec succ\xe8s !"}),(0,Ge.jsxs)("div",{className:"space-y-4",children:[(0,Ge.jsx)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:(0,Ge.jsxs)("p",{className:"text-green-800",children:["\u2705 Le plan d'\xe9pargne a \xe9t\xe9 cr\xe9\xe9 avec l'ID: ",(0,Ge.jsx)("strong",{children:e})]})}),(0,Ge.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,Ge.jsx)("p",{className:"text-blue-800",children:"\ud83c\udf89 La redirection fonctionne correctement !"})}),(0,Ge.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:(0,Ge.jsxs)("p",{className:"text-yellow-800",children:["\ud83d\udcdd Cette page de test confirme que le flux complet fonctionne :",(0,Ge.jsx)("br",{}),"1. Paiement FedaPay \u2705",(0,Ge.jsx)("br",{}),"2. Redirection vers RetourEpargne \u2705",(0,Ge.jsx)("br",{}),"3. Polling du backend \u2705",(0,Ge.jsx)("br",{}),"4. Redirection vers PlanEpargne \u2705"]})})]})]})]})})},xm=()=>{const e=Y();return(0,Ge.jsx)("div",{className:"bg-gradient-to-br from-purple-50 via-violet-50 to-indigo-50 min-h-screen",children:(0,Ge.jsxs)("div",{className:"relative overflow-hidden",children:[(0,Ge.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-500 via-violet-600 to-indigo-600 opacity-10"}),(0,Ge.jsx)("div",{className:"relative px-4 lg:px-8 py-6",children:(0,Ge.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,Ge.jsxs)(Vd.button,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5},onClick:()=>e("/menu"),className:"inline-flex items-center space-x-2 px-4 py-2 bg-white/80 backdrop-blur-sm rounded-full border border-white/50 shadow-lg hover:bg-white/90 transition-all duration-300 mb-8",children:[(0,Ge.jsx)(Qu,{size:16,className:"text-purple-600"}),(0,Ge.jsx)("span",{className:"text-sm font-medium text-purple-700",children:"Retour au menu"})]}),(0,Ge.jsxs)("div",{className:"text-center",children:[(0,Ge.jsx)(Vd.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.8,delay:.2},className:"mb-8",children:(0,Ge.jsx)("div",{className:"inline-flex p-8 bg-gradient-to-r from-purple-500 to-violet-600 rounded-full text-white shadow-2xl",children:(0,Ge.jsx)(yh,{size:80})})}),(0,Ge.jsxs)(Vd.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.3},className:"text-4xl lg:text-6xl font-bold text-gray-900 mb-6",children:["Coaching et"," ",(0,Ge.jsx)("span",{className:"bg-gradient-to-r from-purple-600 via-violet-600 to-indigo-600 bg-clip-text text-transparent",children:"Finance Entrepreneuriale"})]}),(0,Ge.jsx)(Vd.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.4},className:"mb-8",children:(0,Ge.jsxs)("div",{className:"inline-flex items-center space-x-3 px-6 py-3 bg-yellow-100 border border-yellow-300 rounded-full",children:[(0,Ge.jsx)(Wd,{size:20,className:"text-yellow-600"}),(0,Ge.jsx)("span",{className:"text-lg font-semibold text-yellow-800",children:"Bient\xf4t disponible"})]})}),(0,Ge.jsxs)(Vd.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.5},className:"text-xl lg:text-2xl text-gray-600 mb-12 font-light max-w-2xl mx-auto",children:["Nos services de coaching et de finance entrepreneuriale sont en cours de d\xe9veloppement.",(0,Ge.jsx)("br",{}),(0,Ge.jsx)("span",{className:"text-purple-600 font-medium",children:"Revenez bient\xf4t !"})]}),(0,Ge.jsx)(Vd.button,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.6},onClick:()=>e("/menu"),className:"bg-gradient-to-r from-purple-500 to-violet-600 text-white px-8 py-4 rounded-2xl shadow-xl hover:shadow-2xl transition-all duration-300 hover:scale-105",children:"Retour au menu principal"})]})]})})]})})},gm=Xe("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]),vm=Xe("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]),ym=Xe("Diamond",[["path",{d:"M2.7 10.3a2.41 2.41 0 0 0 0 3.41l7.59 7.59a2.41 2.41 0 0 0 3.41 0l7.59-7.59a2.41 2.41 0 0 0 0-3.41l-7.59-7.59a2.41 2.41 0 0 0-3.41 0Z",key:"1f1r0c"}]]),bm=Xe("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]),jm=Xe("Gift",[["polyline",{points:"20 12 20 22 4 22 4 12",key:"nda8fc"}],["rect",{width:"20",height:"5",x:"2",y:"7",key:"wkgdzj"}],["line",{x1:"12",x2:"12",y1:"22",y2:"7",key:"1n8zgp"}],["path",{d:"M12 7H7.5a2.5 2.5 0 0 1 0-5C11 2 12 7 12 7z",key:"zighg4"}],["path",{d:"M12 7h4.5a2.5 2.5 0 0 0 0-5C13 2 12 7 12 7z",key:"1pa5tk"}]]),wm=Xe("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]),Nm=Xe("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]),km=()=>{const e=Y(),{user:n}=Je(),{showSuccess:s,showError:r}=it(),[a,i]=(0,t.useState)("overview"),[o,l]=(0,t.useState)(!1),[c,d]=(0,t.useState)(!0),[u,h]=(0,t.useState)({currentScore:0,maxScore:5,level:"Bronze",nextLevel:"Silver",pointsToNextLevel:1,completedLoans:0,loansForNextBonus:1,totalSavings:0,phoneCreditEarned:0,nextReward:"Premier bonus apr\xe8s 1 remboursement",history:[]}),m=[{name:"Bronze",minScore:0,maxScore:1,color:"from-amber-600 to-amber-800",icon:Pu},{name:"Silver",minScore:2,maxScore:2,color:"from-gray-400 to-gray-600",icon:fh},{name:"Gold",minScore:3,maxScore:3,color:"from-yellow-400 to-yellow-600",icon:gm},{name:"Platinum",minScore:4,maxScore:4,color:"from-blue-400 to-blue-600",icon:vm},{name:"Diamond",minScore:5,maxScore:5,color:"from-purple-400 to-purple-600",icon:ym}],p=m.find(e=>u.currentScore>=e.minScore&&u.currentScore<=e.maxScore),f=e=>{const t=m.find(t=>e>=t.minScore&&e<=t.maxScore);return t?t.color:"from-gray-400 to-gray-600"},x=(0,t.useCallback)(async()=>{if(null!==n&&void 0!==n&&n.id)try{d(!0);const[s,r]=await Promise.all([qe(n.id),We(n.id)]);if(s.success&&r.success){var e,t;const n=s.data||[],a=r.data||[],i=new Map(n.map(e=>[e.id,e])),o=a.filter(e=>"completed"===(e.status||"").toLowerCase()),l=new Set,c=new Map;o.forEach(e=>{const t=i.get(e.loan_id);if(!t)return;const n=new Date(t.created_at||new Date),s=parseInt(t.duration_months||t.duration||30,10),r=new Date(n.getTime()+24*s*60*60*1e3),a=new Date(e.payment_date||e.created_at||new Date);if(a.getTime()<=r.getTime()){l.add(e.loan_id);const t=c.get(e.loan_id);(!t||a.getTime()<t.paymentDate.getTime())&&c.set(e.loan_id,{id:e.id,paymentDate:a})}});const d=Math.max(0,Math.min(5,l.size)),u=Array.from(c.entries()).map(e=>{let[t,n]=e;return{id:n.id,date:n.paymentDate.toISOString(),points:1,action:"Remboursement \xe0 temps du pr\xeat #".concat(t)}}),p=n.filter(e=>{const t=(e.status||"").toLowerCase();return"completed"===t||"rembours\xe9"===t}).length,f=m.find(e=>e.minScore>d)||m[m.length-1],x=Math.max(0,(null!==(e=f.minScore)&&void 0!==e?e:d)-d),g=d>=5?"Score maximum atteint":"1 remboursement \xe0 temps = +1 point";h({currentScore:d,maxScore:5,level:(null===(t=m.find(e=>d>=e.minScore&&d<=e.maxScore))||void 0===t?void 0:t.name)||"Bronze",nextLevel:f.name,pointsToNextLevel:x,completedLoans:p,loansForNextBonus:Math.max(0,1),totalSavings:0,phoneCreditEarned:0,nextReward:g,history:u})}}catch(s){console.error("[LOYALTY] Erreur lors du calcul du score:",s),r("Erreur lors du chargement du score de fid\xe9lit\xe9")}finally{d(!1)}else d(!1)},[null===n||void 0===n?void 0:n.id,r]);(0,t.useEffect)(()=>{x()},[x]);const g=[{title:"R\xe9duction de 2% sur les frais",description:"\xc9conomisez sur tous vos pr\xeats futurs",icon:bm,color:"text-green-600",bgColor:"bg-green-100"},{title:"Forfait d'internet",description:"Recevez un forfait internet sur le num\xe9ro de votre choix",icon:Iu,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Traitement prioritaire",description:"Vos demandes sont trait\xe9es en priorit\xe9",icon:_u,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Taux d'int\xe9r\xeat pr\xe9f\xe9rentiels",description:"B\xe9n\xe9ficiez de taux r\xe9duits sur vos pr\xeats",icon:yh,color:"text-orange-600",bgColor:"bg-orange-100"}],v=[{step:1,title:"Remboursez un pr\xeat",description:"Remboursez votre pr\xeat dans les d\xe9lais impartis",icon:Oh,color:"from-blue-500 to-blue-600"},{step:2,title:"Gagnez 1 point",description:"Votre score de fid\xe9lit\xe9 augmente de 1 point",icon:et,color:"from-green-500 to-green-600"},{step:3,title:"Progressez vers le niveau sup\xe9rieur",description:"Atteignez le niveau suivant avec plus de remboursements",icon:yh,color:"from-purple-500 to-purple-600"},{step:4,title:"D\xe9bloquez les avantages",description:"Profitez de r\xe9ductions et de forfaits gratuits",icon:jm,color:"from-orange-500 to-orange-600"}];return(0,Ge.jsxs)("div",{className:"bg-gradient-to-br from-gray-50 to-blue-50",children:[(0,Ge.jsx)("div",{className:"bg-white shadow-sm border-b border-gray-200",children:(0,Ge.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,Ge.jsxs)("div",{className:"flex items-center justify-between h-16",children:[(0,Ge.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,Ge.jsx)(Vu,{variant:"ghost",onClick:()=>e("/dashboard"),className:"p-2 hover:bg-gray-100 rounded-lg",children:(0,Ge.jsx)(Qu,{size:20})}),(0,Ge.jsxs)("div",{children:[(0,Ge.jsx)("h1",{className:"text-xl font-bold text-gray-900 font-montserrat",children:"Score de Fid\xe9lit\xe9"}),(0,Ge.jsx)("p",{className:"text-sm text-gray-600 font-montserrat",children:"Programme de r\xe9compenses et avantages"})]})]}),(0,Ge.jsx)(Vu,{variant:"ghost",onClick:()=>l(!0),className:"p-2 hover:bg-gray-100 rounded-lg",children:(0,Ge.jsx)(nt,{size:20})})]})})}),(0,Ge.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,Ge.jsx)(Vd.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"mb-8",children:c?(0,Ge.jsx)(Ah,{className:"bg-gradient-to-br from-white to-gray-50 border-0 shadow-xl",children:(0,Ge.jsxs)("div",{className:"p-8 text-center",children:[(0,Ge.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,Ge.jsx)("p",{className:"text-gray-600",children:"Chargement du score de fid\xe9lit\xe9..."})]})}):(0,Ge.jsx)(Ah,{className:"bg-gradient-to-br from-white to-gray-50 border-0 shadow-xl",children:(0,Ge.jsxs)("div",{className:"p-8 text-center",children:[(0,Ge.jsx)("div",{className:"flex justify-center mb-6",children:(0,Ge.jsx)("div",{className:"p-6 rounded-full bg-gradient-to-br ".concat(f(u.currentScore)),children:t.createElement((e=>{const t=m.find(t=>e>=t.minScore&&e<=t.maxScore);return t?t.icon:Pu})(u.currentScore),{size:48,className:"text-white"})})}),(0,Ge.jsxs)("h2",{className:"text-4xl font-bold text-gray-900 font-montserrat mb-2",children:[u.currentScore,"/5"]}),(0,Ge.jsxs)("p",{className:"text-xl font-semibold text-gray-700 font-montserrat mb-4",children:["Niveau ",null===p||void 0===p?void 0:p.name]}),(0,Ge.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4 mb-6 max-w-md mx-auto",children:[(0,Ge.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,Ge.jsx)(nt,{size:16,className:"text-blue-600"}),(0,Ge.jsx)("p",{className:"text-sm font-medium text-blue-800",children:"Syst\xe8me mis \xe0 jour"})]}),(0,Ge.jsx)("p",{className:"text-xs text-blue-700",children:"Le syst\xe8me de score de fid\xe9lit\xe9 a \xe9t\xe9 mis \xe0 jour. Tous les comptes commencent maintenant \xe0 0/5 points. Votre progression se fera \xe0 partir de vos prochains remboursements."})]}),(0,Ge.jsxs)("div",{className:"w-full max-w-md mx-auto mb-6",children:[(0,Ge.jsxs)("div",{className:"flex justify-between text-sm text-gray-600 mb-2",children:[(0,Ge.jsxs)("span",{children:["Progression vers ",u.nextLevel]}),(0,Ge.jsxs)("span",{children:[u.pointsToNextLevel," point",u.pointsToNextLevel>1?"s":""," restant",u.pointsToNextLevel>1?"s":""]})]}),(0,Ge.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-3",children:(0,Ge.jsx)(Vd.div,{className:"h-3 rounded-full bg-gradient-to-r ".concat(f(u.currentScore)),initial:{width:0},animate:{width:"".concat(u.currentScore/u.maxScore*100,"%")},transition:{duration:1,delay:.5}})}),(0,Ge.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[Math.round(u.currentScore/u.maxScore*100),"% du score maximum atteint"]})]}),(0,Ge.jsxs)("div",{className:"grid grid-cols-3 gap-4 max-w-md mx-auto",children:[(0,Ge.jsxs)("div",{className:"text-center",children:[(0,Ge.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:u.completedLoans}),(0,Ge.jsx)("p",{className:"text-sm text-gray-600",children:"Pr\xeats termin\xe9s"})]}),(0,Ge.jsxs)("div",{className:"text-center",children:[(0,Ge.jsx)("p",{className:"text-2xl font-bold text-green-600",children:u.loansForNextBonus}),(0,Ge.jsx)("p",{className:"text-sm text-gray-600",children:"Pour le bonus"})]}),(0,Ge.jsxs)("div",{className:"text-center",children:[(0,Ge.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:Yu(u.totalSavings)}),(0,Ge.jsx)("p",{className:"text-sm text-gray-600",children:"\xc9conomies"})]})]})]})})}),(0,Ge.jsx)(Vd.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:"mb-8",children:(0,Ge.jsx)("div",{className:"flex space-x-1 bg-white rounded-xl p-1 shadow-sm",children:[{id:"overview",label:"Vue d'ensemble",icon:Oh},{id:"benefits",label:"Avantages",icon:jm},{id:"how-it-works",label:"Comment \xe7a marche",icon:qh},{id:"history",label:"Historique",icon:Wd}].map(e=>(0,Ge.jsxs)("button",{onClick:()=>i(e.id),className:"flex-1 flex items-center justify-center space-x-2 py-3 px-4 rounded-lg font-medium transition-all duration-200 ".concat(a===e.id?"bg-primary-500 text-white shadow-sm":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"),children:[t.createElement(e.icon,{size:16}),(0,Ge.jsx)("span",{className:"font-montserrat",children:e.label})]},e.id))})}),(0,Ge.jsxs)(Nu,{mode:"wait",children:["overview"===a&&(0,Ge.jsxs)(Vd.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},className:"space-y-4",children:[(0,Ge.jsx)(Ah,{className:"bg-gradient-to-br from-blue-500 to-blue-600 text-white",children:(0,Ge.jsxs)("div",{className:"p-6",children:[(0,Ge.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Ge.jsxs)("div",{children:[(0,Ge.jsx)("h3",{className:"text-xl font-bold font-montserrat mb-2",children:"Prochain objectif"}),(0,Ge.jsx)("p",{className:"text-blue-100",children:"Terminez votre 4\xe8me pr\xeat pour d\xe9bloquer le bonus"})]}),(0,Ge.jsx)("div",{className:"p-3 bg-white/20 rounded-full",children:(0,Ge.jsx)(Oh,{size:24})})]}),(0,Ge.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,Ge.jsxs)("div",{className:"flex-1",children:[(0,Ge.jsxs)("div",{className:"flex justify-between text-sm mb-2",children:[(0,Ge.jsx)("span",{children:"Progression"}),(0,Ge.jsxs)("span",{children:[u.completedLoans,"/4 pr\xeats"]})]}),(0,Ge.jsx)("div",{className:"w-full bg-white/20 rounded-full h-2",children:(0,Ge.jsx)("div",{className:"bg-white h-2 rounded-full transition-all duration-500",style:{width:"".concat(u.completedLoans/4*100,"%")}})})]}),(0,Ge.jsx)(Vu,{variant:"white",onClick:()=>e("/loan-request"),className:"whitespace-nowrap",children:"Demander un pr\xeat"})]})]})}),(0,Ge.jsx)("div",{className:"grid grid-cols-1 gap-6",children:(0,Ge.jsx)(Ah,{className:"bg-gradient-to-br from-purple-500 to-purple-600 text-white",children:(0,Ge.jsxs)("div",{className:"p-6",children:[(0,Ge.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Ge.jsxs)("div",{children:[(0,Ge.jsx)("h3",{className:"text-lg font-bold font-montserrat mb-1",children:"Forfait internet"}),(0,Ge.jsx)("p",{className:"text-purple-100 text-sm",children:"Prochaine r\xe9compense"})]}),(0,Ge.jsx)("div",{className:"p-2 bg-white/20 rounded-full",children:(0,Ge.jsx)(Iu,{size:20})})]}),(0,Ge.jsx)("p",{className:"text-lg font-semibold",children:u.nextReward})]})})})]},"overview"),"benefits"===a&&(0,Ge.jsx)(Vd.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},children:(0,Ge.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:g.map((e,n)=>(0,Ge.jsx)(Vd.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*n},children:(0,Ge.jsx)(Ah,{className:"hover:shadow-lg transition-all duration-200 transform hover:scale-105",children:(0,Ge.jsx)("div",{className:"p-6",children:(0,Ge.jsxs)("div",{className:"flex items-start space-x-4",children:[(0,Ge.jsx)("div",{className:"p-3 rounded-lg ".concat(e.bgColor),children:t.createElement(e.icon,{size:24,className:e.color})}),(0,Ge.jsxs)("div",{className:"flex-1",children:[(0,Ge.jsx)("h3",{className:"text-lg font-semibold text-gray-900 font-montserrat mb-2",children:e.title}),(0,Ge.jsx)("p",{className:"text-gray-600 font-montserrat",children:e.description})]})]})})})},e.title))})},"benefits"),"how-it-works"===a&&(0,Ge.jsx)(Vd.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},children:(0,Ge.jsxs)("div",{className:"space-y-4",children:[(0,Ge.jsx)(Ah,{className:"bg-gradient-to-br from-blue-50 to-indigo-50 border-blue-200",children:(0,Ge.jsxs)("div",{className:"p-6",children:[(0,Ge.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,Ge.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,Ge.jsx)(wm,{size:20,className:"text-blue-600"})}),(0,Ge.jsx)("h3",{className:"text-xl font-bold text-gray-900 font-montserrat",children:"Comment fonctionne le programme de fid\xe9lit\xe9 ?"})]}),(0,Ge.jsx)("p",{className:"text-gray-700 font-montserrat",children:"Notre programme de fid\xe9lit\xe9 r\xe9compense les clients qui remboursent leurs pr\xeats dans les d\xe9lais. Plus vous \xeates fid\xe8le, plus vous b\xe9n\xe9ficiez d'avantages exclusifs."})]})}),(0,Ge.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:v.map((e,n)=>(0,Ge.jsx)(Vd.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*n},children:(0,Ge.jsx)(Ah,{className:"text-center hover:shadow-lg transition-all duration-200",children:(0,Ge.jsxs)("div",{className:"p-6",children:[(0,Ge.jsx)("div",{className:"inline-flex items-center justify-center w-12 h-12 rounded-full bg-gradient-to-br ".concat(e.color," text-white font-bold text-lg mb-4"),children:e.step}),(0,Ge.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-gradient-to-br ".concat(e.color," text-white mb-4"),children:t.createElement(e.icon,{size:24})}),(0,Ge.jsx)("h4",{className:"text-lg font-semibold text-gray-900 font-montserrat mb-2",children:e.title}),(0,Ge.jsx)("p",{className:"text-gray-600 font-montserrat text-sm",children:e.description})]})})},e.step))}),(0,Ge.jsx)(Ah,{className:"bg-gradient-to-br from-green-50 to-emerald-50 border-green-200",children:(0,Ge.jsxs)("div",{className:"p-6",children:[(0,Ge.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,Ge.jsx)("div",{className:"p-2 bg-green-100 rounded-lg",children:(0,Ge.jsx)(Nm,{size:20,className:"text-green-600"})}),(0,Ge.jsx)("h3",{className:"text-lg font-bold text-gray-900 font-montserrat",children:"Avantages cumulatifs"})]}),(0,Ge.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Ge.jsxs)("div",{className:"space-y-2",children:[(0,Ge.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Ge.jsx)(et,{size:16,className:"text-green-600"}),(0,Ge.jsx)("span",{className:"text-sm font-montserrat",children:"Score de fid\xe9lit\xe9 +1 point"})]}),(0,Ge.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Ge.jsx)(et,{size:16,className:"text-green-600"}),(0,Ge.jsx)("span",{className:"text-sm font-montserrat",children:"R\xe9duction de 2% sur les frais"})]})]}),(0,Ge.jsxs)("div",{className:"space-y-2",children:[(0,Ge.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Ge.jsx)(et,{size:16,className:"text-green-600"}),(0,Ge.jsx)("span",{className:"text-sm font-montserrat",children:"Forfait internet gratuit"})]}),(0,Ge.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Ge.jsx)(et,{size:16,className:"text-green-600"}),(0,Ge.jsx)("span",{className:"text-sm font-montserrat",children:"Traitement prioritaire"})]})]})]})]})})]})},"how-it-works"),"history"===a&&(0,Ge.jsx)(Vd.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},children:(0,Ge.jsx)(Ah,{children:(0,Ge.jsxs)("div",{className:"p-6",children:[(0,Ge.jsx)("h3",{className:"text-lg font-semibold text-gray-900 font-montserrat mb-4",children:"Historique des points"}),(0,Ge.jsx)("div",{className:"space-y-4",children:u.history.map((e,t)=>(0,Ge.jsxs)(Vd.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*t},className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[(0,Ge.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Ge.jsx)("div",{className:"p-2 bg-green-100 rounded-full",children:(0,Ge.jsx)(yh,{size:16,className:"text-green-600"})}),(0,Ge.jsxs)("div",{children:[(0,Ge.jsx)("p",{className:"font-medium text-gray-900 font-montserrat",children:e.action}),(0,Ge.jsx)("p",{className:"text-sm text-gray-600 font-montserrat",children:new Date(e.date).toLocaleDateString("fr-FR")})]})]}),(0,Ge.jsx)("div",{className:"text-right",children:(0,Ge.jsxs)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:["+",e.points," points"]})})]},e.id))})]})})},"history")]})]}),(0,Ge.jsx)(Nu,{children:o&&(0,Ge.jsx)(Vd.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:()=>l(!1),children:(0,Ge.jsxs)(Vd.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-2xl p-6 max-w-md w-full max-h-[80vh] overflow-y-auto",onClick:e=>e.stopPropagation(),children:[(0,Ge.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Ge.jsx)("h3",{className:"text-lg font-bold text-gray-900 font-montserrat",children:"\xc0 propos du score de fid\xe9lit\xe9"}),(0,Ge.jsx)("button",{onClick:()=>l(!1),className:"p-1 hover:bg-gray-100 rounded-full",children:(0,Ge.jsx)(st,{size:20})})]}),(0,Ge.jsxs)("div",{className:"space-y-4 text-sm text-gray-700 font-montserrat",children:[(0,Ge.jsx)("p",{children:"Le score de fid\xe9lit\xe9 est un programme de r\xe9compenses qui vous permet de b\xe9n\xe9ficier d'avantages exclusifs en fonction de votre historique de remboursement."}),(0,Ge.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg",children:[(0,Ge.jsx)("h4",{className:"font-semibold text-blue-900 mb-2",children:"Comment gagner des points :"}),(0,Ge.jsxs)("ul",{className:"space-y-1 text-blue-800",children:[(0,Ge.jsx)("li",{children:"\u2022 Rembourser un pr\xeat dans les d\xe9lais impartis"}),(0,Ge.jsx)("li",{children:"\u2022 +1 point par remboursement \xe0 temps"}),(0,Ge.jsx)("li",{children:"\u2022 Score maximum : 5 points"})]})]}),(0,Ge.jsxs)("div",{className:"bg-green-50 p-4 rounded-lg",children:[(0,Ge.jsx)("h4",{className:"font-semibold text-green-900 mb-2",children:"Avantages d\xe9bloqu\xe9s :"}),(0,Ge.jsxs)("ul",{className:"space-y-1 text-green-800",children:[(0,Ge.jsx)("li",{children:"\u2022 R\xe9duction de 2% sur les frais"}),(0,Ge.jsx)("li",{children:"\u2022 Forfait internet gratuit"}),(0,Ge.jsx)("li",{children:"\u2022 Traitement prioritaire"}),(0,Ge.jsx)("li",{children:"\u2022 Taux d'int\xe9r\xeat pr\xe9f\xe9rentiels"})]})]}),(0,Ge.jsx)("p",{className:"text-xs text-gray-500",children:"Les avantages sont cumulatifs et s'appliquent automatiquement une fois les conditions remplies."})]})]})})})]})},Sm=()=>{const[e,n]=(0,t.useState)(""),[s,r]=(0,t.useState)(null),[a,i]=(0,t.useState)(!1),[o,l]=(0,t.useState)("");return(0,Ge.jsx)("div",{className:"min-h-screen bg-gray-50 py-12 px-4",children:(0,Ge.jsx)("div",{className:"max-w-4xl mx-auto",children:(0,Ge.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-8",children:[(0,Ge.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-8 text-center",children:"\ud83d\udd0d Diagnostic des Utilisateurs"}),(0,Ge.jsxs)("div",{className:"space-y-6",children:[(0,Ge.jsxs)("div",{children:[(0,Ge.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Num\xe9ro de t\xe9l\xe9phone \xe0 v\xe9rifier"}),(0,Ge.jsxs)("div",{className:"flex space-x-2",children:[(0,Ge.jsx)("input",{type:"text",value:e,onChange:e=>n(e.target.value),placeholder:"22912345678",className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),(0,Ge.jsx)("button",{onClick:async()=>{if(e.trim()){i(!0),l(""),r(null);try{console.log("[DIAGNOSTIC] V\xe9rification de l'utilisateur:",e);const{data:n,error:s}=await Me.supabase.from("users").select("*").eq("phone_number",e).single();if(s)return console.error("[DIAGNOSTIC] Erreur table users:",s),void l("Utilisateur non trouv\xe9 dans la table users: ".concat(s.message));console.log("[DIAGNOSTIC] Utilisateur trouv\xe9 dans users:",n);let a=null;try{const{data:e,error:t}=await Me.supabase.auth.admin.getUserById(n.id);!t&&e&&(a=e.user,console.log("[DIAGNOSTIC] Utilisateur trouv\xe9 dans auth.users:",a))}catch(t){console.log("[DIAGNOSTIC] Impossible d'acc\xe9der \xe0 auth.users (pas de droits admin)")}const i=e.replace(/[^0-9]/g,""),o=new Date(n.created_at).getTime(),c="user.".concat(i,".").concat(o,"@gmail.com");r({user:n,authUser:a,tempEmail:c,cleanPhone:i})}catch(o){console.error("[DIAGNOSTIC] Erreur:",o),l("Erreur lors de la v\xe9rification: ".concat(o.message))}finally{i(!1)}}else l("Veuillez entrer un num\xe9ro de t\xe9l\xe9phone")},disabled:a,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:a?"V\xe9rification...":"V\xe9rifier"})]})]}),o&&(0,Ge.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:o}),s&&(0,Ge.jsxs)("div",{className:"space-y-6",children:[(0,Ge.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"\ud83d\udccb Informations Utilisateur"}),(0,Ge.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,Ge.jsx)("h3",{className:"font-semibold text-gray-800 mb-3",children:"Table users"}),(0,Ge.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,Ge.jsxs)("div",{children:[(0,Ge.jsx)("strong",{children:"ID:"})," ",s.user.id]}),(0,Ge.jsxs)("div",{children:[(0,Ge.jsx)("strong",{children:"Email:"})," ",s.user.email||"Non d\xe9fini"]}),(0,Ge.jsxs)("div",{children:[(0,Ge.jsx)("strong",{children:"T\xe9l\xe9phone:"})," ",s.user.phone_number]}),(0,Ge.jsxs)("div",{children:[(0,Ge.jsx)("strong",{children:"Pr\xe9nom:"})," ",s.user.first_name]}),(0,Ge.jsxs)("div",{children:[(0,Ge.jsx)("strong",{children:"Nom:"})," ",s.user.last_name]}),(0,Ge.jsxs)("div",{children:[(0,Ge.jsx)("strong",{children:"R\xf4le:"})," ",s.user.role]}),(0,Ge.jsxs)("div",{children:[(0,Ge.jsx)("strong",{children:"Statut:"})," ",s.user.status]}),(0,Ge.jsxs)("div",{children:[(0,Ge.jsx)("strong",{children:"Cr\xe9\xe9 le:"})," ",new Date(s.user.created_at).toLocaleString()]})]})]}),s.authUser?(0,Ge.jsxs)("div",{className:"bg-green-50 rounded-lg p-4",children:[(0,Ge.jsx)("h3",{className:"font-semibold text-green-800 mb-3",children:"\u2705 Table auth.users"}),(0,Ge.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,Ge.jsxs)("div",{children:[(0,Ge.jsx)("strong",{children:"ID:"})," ",s.authUser.id]}),(0,Ge.jsxs)("div",{children:[(0,Ge.jsx)("strong",{children:"Email:"})," ",s.authUser.email]}),(0,Ge.jsxs)("div",{children:[(0,Ge.jsx)("strong",{children:"Email v\xe9rifi\xe9:"})," ",s.authUser.email_confirmed_at?"Oui":"Non"]}),(0,Ge.jsxs)("div",{children:[(0,Ge.jsx)("strong",{children:"Derni\xe8re connexion:"})," ",s.authUser.last_sign_in_at?new Date(s.authUser.last_sign_in_at).toLocaleString():"Jamais"]})]})]}):(0,Ge.jsxs)("div",{className:"bg-yellow-50 rounded-lg p-4",children:[(0,Ge.jsx)("h3",{className:"font-semibold text-yellow-800 mb-3",children:"\u26a0\ufe0f Table auth.users"}),(0,Ge.jsx)("p",{className:"text-yellow-700",children:"Utilisateur non trouv\xe9 dans auth.users. Cela explique pourquoi la connexion \xe9choue."})]}),(0,Ge.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4",children:[(0,Ge.jsx)("h3",{className:"font-semibold text-blue-800 mb-3",children:"\ud83d\udce7 Email temporaire reconstruit"}),(0,Ge.jsxs)("div",{className:"space-y-2",children:[(0,Ge.jsx)("div",{children:(0,Ge.jsx)("strong",{children:"Email utilis\xe9 pour la connexion:"})}),(0,Ge.jsx)("code",{className:"bg-blue-100 px-2 py-1 rounded text-sm",children:s.tempEmail}),(0,Ge.jsx)("div",{className:"text-sm text-blue-600",children:"Cet email est reconstruit \xe0 partir du t\xe9l\xe9phone et de la date de cr\xe9ation."})]})]}),(0,Ge.jsxs)("div",{className:"bg-purple-50 rounded-lg p-4",children:[(0,Ge.jsx)("h3",{className:"font-semibold text-purple-800 mb-3",children:"\ud83d\udca1 Recommandations"}),(0,Ge.jsxs)("ul",{className:"text-sm text-purple-700 space-y-1",children:[!s.authUser&&(0,Ge.jsx)("li",{children:"\u2022 L\\'utilisateur n\\'existe pas dans auth.users - il faut le recr\xe9er avec signUpWithPhone"}),"approved"!==s.user.status&&(0,Ge.jsx)("li",{children:'\u2022 Le statut n\\\'est pas "approved" - mettre \xe0 jour le statut'}),(0,Ge.jsx)("li",{children:"\u2022 V\xe9rifier que le mot de passe correspond \xe0 l\\'email temporaire"}),(0,Ge.jsx)("li",{children:"\u2022 Essayer de se connecter avec l\\'email temporaire directement"})]})]})]})]})]})})})},Em=()=>{const[e,n]=(0,t.useState)(null),[s,r]=(0,t.useState)(!1),[a,i]=(0,t.useState)(null),o=async()=>{r(!0),i(null);try{console.log("\ud83d\udd0d Test de la route /api/health...");const e=await fetch("/api/health");if(console.log("\ud83d\udce1 R\xe9ponse re\xe7ue:",e.status,e.statusText),!e.ok)throw new Error("HTTP ".concat(e.status,": ").concat(e.statusText));const t=e.headers.get("content-type");if(!t||!t.includes("application/json"))throw new Error("Type de contenu invalide: ".concat(t));const s=await e.text();if(console.log("\ud83d\udcc4 Contenu brut:",s),!s||""===s.trim())throw new Error("R\xe9ponse vide du serveur");const r=JSON.parse(s);console.log("\u2705 JSON pars\xe9:",r),n(r)}catch(e){console.error("\u274c Erreur lors du test:",e);let t=e.message;e.message.includes("Failed to fetch")?t="Impossible de se connecter au serveur API. V\xe9rifiez que le serveur est d\xe9marr\xe9 (npm run start:api)":e.message.includes("Unexpected end of JSON input")?t="R\xe9ponse invalide du serveur. Le serveur API pourrait ne pas \xeatre d\xe9marr\xe9.":e.message.includes("HTTP")&&(t="Erreur HTTP: ".concat(e.message)),i(t)}finally{r(!1)}};return(0,t.useEffect)(()=>{o()},[]),(0,Ge.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:(0,Ge.jsxs)("div",{className:"max-w-md w-full bg-white rounded-2xl shadow-xl p-8 text-center",children:[(0,Ge.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-6",children:"Test API Health"}),s&&(0,Ge.jsxs)("div",{className:"mb-4",children:[(0,Ge.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),(0,Ge.jsx)("p",{className:"text-gray-600 mt-2",children:"Test en cours..."})]}),a&&(0,Ge.jsxs)("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:[(0,Ge.jsx)("p",{className:"text-red-700 font-semibold",children:"\u274c Erreur:"}),(0,Ge.jsx)("p",{className:"text-red-600 text-sm",children:a}),(0,Ge.jsxs)("div",{className:"mt-3 text-xs text-red-500",children:[(0,Ge.jsx)("p",{children:"\ud83d\udca1 Solutions possibles:"}),(0,Ge.jsxs)("ul",{className:"list-disc list-inside mt-1 space-y-1",children:[(0,Ge.jsxs)("li",{children:["D\xe9marrer le serveur API: ",(0,Ge.jsx)("code",{children:"npm run start:api"})]}),(0,Ge.jsx)("li",{children:"V\xe9rifier que le port 5000 est libre"}),(0,Ge.jsx)("li",{children:"Red\xe9marrer l'application React"})]})]})]}),e&&(0,Ge.jsxs)("div",{className:"mb-4 p-4 bg-green-50 border border-green-200 rounded-lg",children:[(0,Ge.jsx)("p",{className:"text-green-700 font-semibold",children:"\u2705 API fonctionnelle"}),(0,Ge.jsx)("pre",{className:"text-sm text-green-600 mt-2",children:JSON.stringify(e,null,2)})]}),(0,Ge.jsx)("button",{onClick:o,disabled:s,className:"bg-blue-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:s?"Test en cours...":"Tester \xe0 nouveau"}),(0,Ge.jsxs)("div",{className:"mt-6 text-sm text-gray-500",children:[(0,Ge.jsxs)("p",{children:["Cette page teste la route ",(0,Ge.jsx)("code",{children:"/api/health"})]}),(0,Ge.jsx)("p",{children:"via le proxy de d\xe9veloppement."}),(0,Ge.jsxs)("p",{className:"mt-2 text-xs",children:["Serveur API: localhost:5000",(0,Ge.jsx)("br",{}),"Frontend: localhost:3001"]})]})]})})},_m=Xe("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]),Cm=()=>{const[e]=Ie(),n=Y(),[s,r]=(0,t.useState)("loading"),[a,i]=(0,t.useState)(""),[o,l]=(0,t.useState)("");(0,t.useEffect)(()=>{const t=setTimeout(()=>{r("loading"),i(e.get("amount")||"50000"),l(e.get("transaction_id")||"mock_123")},1e3);return()=>clearTimeout(t)},[e]);const c=async()=>{r("success");try{const t=e.get("loan_id"),s=e.get("user_id");console.log("\ud83d\udd04 Traitement du remboursement simul\xe9...",{loanId:t,userId:s,amount:a,transactionId:o});const r=await fetch("/api/fedapay/webhook",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({transaction:{id:o,status:"approved",amount:parseInt(a),payment_method:"mobile_money",paid_at:(new Date).toISOString(),metadata:{loan_id:t,user_id:s,type:"loan_repayment"}}})}),i=await r.json();console.log("\u2705 Webhook trait\xe9:",i),setTimeout(()=>{const e="/remboursement/success?transaction_id=".concat(o,"&amount=").concat(a,"&loan_id=").concat(t);n(e)},2e3)}catch(t){console.error("\u274c Erreur traitement remboursement:",t),r("failed")}},d=async()=>{r("failed");try{const t=e.get("loan_id"),s=e.get("user_id");console.log("\ud83d\udd04 Traitement de l'\xe9chec de paiement simul\xe9...",{loanId:t,userId:s,amount:a,transactionId:o});const r=await fetch("/api/fedapay/webhook",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({transaction:{id:o,status:"failed",amount:parseInt(a),failure_reason:"Paiement refus\xe9 par l'utilisateur",failed_at:(new Date).toISOString(),metadata:{loan_id:t,user_id:s,type:"loan_repayment"}}})}),i=await r.json();console.log("\u274c Webhook \xe9chec trait\xe9:",i),setTimeout(()=>{const e="/remboursement/failure?transaction_id=".concat(o,"&amount=").concat(a,"&loan_id=").concat(t);n(e)},2e3)}catch(t){console.error("\u274c Erreur traitement \xe9chec:",t)}},u=e=>new Intl.NumberFormat("fr-CI",{style:"currency",currency:"XOF"}).format(e/100);return"loading"===s?(0,Ge.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:(0,Ge.jsxs)(Vd.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"max-w-md w-full bg-white rounded-2xl shadow-xl p-8 text-center",children:[(0,Ge.jsxs)("div",{className:"mb-6",children:[(0,Ge.jsx)("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,Ge.jsx)(au,{className:"w-8 h-8 text-blue-600"})}),(0,Ge.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"FedaPay Simulation"}),(0,Ge.jsx)("p",{className:"text-gray-600",children:"Page de paiement simul\xe9e pour les tests"})]}),(0,Ge.jsx)("div",{className:"bg-gray-50 rounded-xl p-6 mb-6",children:(0,Ge.jsxs)("div",{className:"text-center",children:[(0,Ge.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"Montant \xe0 payer"}),(0,Ge.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:u(a)}),(0,Ge.jsxs)("p",{className:"text-xs text-gray-500 mt-2",children:["Transaction: ",o]})]})}),(0,Ge.jsxs)("div",{className:"space-y-3",children:[(0,Ge.jsxs)("button",{onClick:c,className:"w-full bg-green-600 hover:bg-green-700 text-white font-semibold py-3 px-6 rounded-xl transition-colors flex items-center justify-center space-x-2",children:[(0,Ge.jsx)(et,{className:"w-5 h-5"}),(0,Ge.jsx)("span",{children:"Simuler Paiement R\xe9ussi"})]}),(0,Ge.jsxs)("button",{onClick:d,className:"w-full bg-red-600 hover:bg-red-700 text-white font-semibold py-3 px-6 rounded-xl transition-colors flex items-center justify-center space-x-2",children:[(0,Ge.jsx)(Sh,{className:"w-5 h-5"}),(0,Ge.jsx)("span",{children:"Simuler Paiement \xc9chou\xe9"})]})]}),(0,Ge.jsxs)("div",{className:"mt-6 text-xs text-gray-500",children:[(0,Ge.jsx)("p",{children:"\u26a0\ufe0f Cette page simule FedaPay pour les tests"}),(0,Ge.jsx)("p",{children:"En production, vous seriez redirig\xe9 vers FedaPay r\xe9el"})]})]})}):(0,Ge.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:(0,Ge.jsxs)(Vd.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"max-w-md w-full bg-white rounded-2xl shadow-xl p-8 text-center",children:["success"===s?(0,Ge.jsxs)(Ge.Fragment,{children:[(0,Ge.jsx)("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,Ge.jsx)(et,{className:"w-8 h-8 text-green-600"})}),(0,Ge.jsx)("h2",{className:"text-2xl font-bold text-green-900 mb-2",children:"Paiement R\xe9ussi !"}),(0,Ge.jsx)("p",{className:"text-green-700 mb-4",children:"Redirection en cours..."})]}):(0,Ge.jsxs)(Ge.Fragment,{children:[(0,Ge.jsx)("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,Ge.jsx)(Sh,{className:"w-8 h-8 text-red-600"})}),(0,Ge.jsx)("h2",{className:"text-2xl font-bold text-red-900 mb-2",children:"Paiement \xc9chou\xe9"}),(0,Ge.jsx)("p",{className:"text-red-700 mb-4",children:"Redirection en cours..."})]}),(0,Ge.jsx)("div",{className:"flex items-center justify-center",children:(0,Ge.jsx)(_m,{className:"w-6 h-6 animate-spin text-gray-600"})})]})})},Pm=e=>{let{onUpdate:t}=e;return(0,Ge.jsx)("div",{className:"fixed bottom-4 right-4 bg-blue-600 text-white p-4 rounded-lg shadow-lg z-50 max-w-sm",children:(0,Ge.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Ge.jsx)("div",{className:"flex-shrink-0",children:(0,Ge.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Ge.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),(0,Ge.jsxs)("div",{className:"flex-1",children:[(0,Ge.jsx)("p",{className:"text-sm font-medium",children:"Nouvelle version disponible"}),(0,Ge.jsx)("p",{className:"text-xs opacity-90",children:"Cliquez pour mettre \xe0 jour"})]}),(0,Ge.jsx)("button",{onClick:t,className:"flex-shrink-0 bg-white text-blue-600 px-3 py-1 rounded text-sm font-medium hover:bg-blue-50 transition-colors",children:"Mettre \xe0 jour"})]})})},Tm=()=>(0,Ge.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:(0,Ge.jsxs)("div",{className:"max-w-2xl w-full bg-white rounded-2xl shadow-xl p-8 text-center",children:[(0,Ge.jsxs)("div",{className:"mb-8",children:[(0,Ge.jsx)("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"AB Campus Finance"}),(0,Ge.jsx)("div",{className:"w-24 h-24 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-full mx-auto flex items-center justify-center",children:(0,Ge.jsx)("svg",{className:"w-12 h-12 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Ge.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})})]}),(0,Ge.jsxs)("div",{className:"space-y-6",children:[(0,Ge.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[(0,Ge.jsx)("h3",{className:"text-lg font-semibold text-yellow-800 mb-2",children:"Configuration requise"}),(0,Ge.jsx)("p",{className:"text-yellow-700",children:"L'application n\xe9cessite une configuration Supabase pour fonctionner."})]}),(0,Ge.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 text-left",children:[(0,Ge.jsx)("h4",{className:"font-semibold text-gray-800 mb-2",children:"\xc9tapes de configuration :"}),(0,Ge.jsxs)("ol",{className:"list-decimal list-inside space-y-2 text-gray-600 text-sm",children:[(0,Ge.jsxs)("li",{children:["Cr\xe9ez un projet sur ",(0,Ge.jsx)("a",{href:"https://supabase.com",className:"text-blue-600 hover:underline",target:"_blank",rel:"noopener noreferrer",children:"Supabase.com"})]}),(0,Ge.jsx)("li",{children:"Copiez l'URL et la cl\xe9 anonyme depuis Settings \u2192 API"}),(0,Ge.jsxs)("li",{children:["Cr\xe9ez un fichier ",(0,Ge.jsx)("code",{className:"bg-gray-200 px-1 rounded",children:".env.local"})," \xe0 la racine du projet"]}),(0,Ge.jsx)("li",{children:"Ajoutez vos cl\xe9s Supabase"}),(0,Ge.jsx)("li",{children:"Red\xe9marrez l'application"})]})]}),(0,Ge.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,Ge.jsx)("h4",{className:"font-semibold text-blue-800 mb-2",children:"Exemple de fichier .env.local :"}),(0,Ge.jsx)("pre",{className:"text-xs text-blue-700 bg-blue-100 p-3 rounded overflow-x-auto",children:"REACT_APP_SUPABASE_URL=https://your-project.supabase.co\nREACT_APP_SUPABASE_ANON_KEY=your_anon_key_here\nREACT_APP_BACKEND_URL=http://localhost:5000"})]}),(0,Ge.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[(0,Ge.jsx)("h4",{className:"font-semibold text-red-800 mb-2",children:"Diagnostic de la configuration :"}),(0,Ge.jsxs)("div",{className:"text-sm text-red-700 space-y-1",children:[(0,Ge.jsxs)("p",{children:["\u2022 URL Supabase: ","\u2705 D\xe9finie"]}),(0,Ge.jsxs)("p",{children:["\u2022 Cl\xe9 Supabase: ","\u2705 D\xe9finie"]}),(0,Ge.jsxs)("p",{children:["\u2022 Backend URL: ","\u2705 D\xe9finie"]}),(0,Ge.jsxs)("p",{children:["\u2022 Mode: ","production"]})]}),(0,Ge.jsx)("p",{className:"text-xs text-red-600 mt-2",children:"\ud83d\udca1 Ouvrez la console du navigateur (F12) pour voir les logs d\xe9taill\xe9s"})]}),(0,Ge.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[(0,Ge.jsx)("button",{onClick:()=>{console.log("[CONFIG] Tentative de rechargement..."),console.log("[CONFIG] Variables d'environnement:",{hasUrl:!0,hasKey:!0,url:"D\xe9finie",key:"D\xe9finie"}),window.location.reload()},className:"bg-gradient-to-r from-blue-500 to-indigo-600 text-white px-8 py-3 rounded-lg font-semibold hover:from-blue-600 hover:to-indigo-700 transition-all duration-200 shadow-lg hover:shadow-xl",children:"Recharger apr\xe8s configuration"}),(0,Ge.jsx)("button",{onClick:()=>{console.log("[CONFIG] Test de connexion manuel..."),(async()=>{try{if(console.log("[TEST] V\xe9rification de la connexion Supabase..."),!Me.supabase)return console.warn("[TEST] \u26a0\ufe0f Client Supabase non initialis\xe9 - configuration manquante"),{success:!1,error:"Configuration Supabase manquante"};const t=await(0,Me.LC)();if(!t.success)throw new Error("Connexion Supabase \xe9chou\xe9e: ".concat(t.error));console.log("[TEST] \u2705 Connexion Supabase OK");const n=["users","otp_codes","loans","payments"];for(const s of n)try{const{error:e}=await Me.supabase.from(s).select("count").limit(1);e?console.warn("[TEST] \u26a0\ufe0f Table ".concat(s," non accessible:"),e.message):console.log("[TEST] \u2705 Table ".concat(s," accessible"))}catch(e){console.warn("[TEST] \u26a0\ufe0f Table ".concat(s," non accessible:"),e.message)}return{success:!0,message:"Tous les tests de base sont pass\xe9s"}}catch(e){return console.error("[TEST] \u274c Erreur lors des tests:",e.message),{success:!1,error:e.message}}})().then(e=>{console.log("[CONFIG] R\xe9sultat du test:",e),alert("Test de configuration: ".concat(e.success?"SUCC\xc8S":"\xc9CHEC","\nD\xe9tails: ").concat(e.error||e.message||"Aucun d\xe9tail"))}).catch(e=>{console.error("[CONFIG] Erreur du test:",e),alert("Erreur du test: ".concat(e.message))})},className:"bg-gradient-to-r from-green-500 to-emerald-600 text-white px-8 py-3 rounded-lg font-semibold hover:from-green-600 hover:to-emerald-700 transition-all duration-200 shadow-lg hover:shadow-xl",children:"Tester la configuration"})]})]})]})}),Am=e=>{let{children:t,adminOnly:n=!1}=e;const{isAuthenticated:s,user:r,loading:a}=Je();return a?(0,Ge.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,Ge.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary-600"})}):s?n&&"admin"!==(null===r||void 0===r?void 0:r.role)?(0,Ge.jsx)(pe,{to:"/dashboard",replace:!0}):t:(0,Ge.jsx)(pe,{to:"/login",replace:!0})},Im=()=>{const[e,n]=(0,t.useState)(!1);(0,t.useEffect)(()=>(Ln.startChecking(()=>{n(!0)}),()=>{Ln.stopChecking()}),[]);return(0,Ge.jsxs)(Ge.Fragment,{children:[(0,Ge.jsx)(Ee,{children:(0,Ge.jsxs)(ge,{children:[(0,Ge.jsx)(fe,{path:"/login",element:(0,Ge.jsx)(Uu,{})}),(0,Ge.jsx)(fe,{path:"/register",element:(0,Ge.jsx)(sh,{})}),(0,Ge.jsx)(fe,{path:"/create-account",element:(0,Ge.jsx)(ah,{})}),(0,Ge.jsx)(fe,{path:"/pending-approval",element:(0,Ge.jsx)(ih,{})}),(0,Ge.jsx)(fe,{path:"/forgot-password",element:(0,Ge.jsx)(lh,{})}),(0,Ge.jsx)(fe,{path:"/reset-password",element:(0,Ge.jsx)(ch,{})}),(0,Ge.jsx)(fe,{path:"/dashboard",element:(0,Ge.jsx)(Am,{children:(0,Ge.jsx)(pu,{children:(0,Ge.jsx)(vh,{})})})}),(0,Ge.jsx)(fe,{path:"/admin",element:(0,Ge.jsx)(Am,{adminOnly:!0,children:(0,Ge.jsx)(pu,{children:(0,Ge.jsx)(jh,{})})})}),(0,Ge.jsx)(fe,{path:"/admin/loan-requests",element:(0,Ge.jsx)(Am,{adminOnly:!0,children:(0,Ge.jsx)(pu,{children:(0,Ge.jsx)(Ch,{})})})}),(0,Ge.jsx)(fe,{path:"/admin/users",element:(0,Ge.jsx)(Am,{adminOnly:!0,children:(0,Ge.jsx)(pu,{children:(0,Ge.jsx)(Ih,{})})})}),(0,Ge.jsx)(fe,{path:"/admin/user-management",element:(0,Ge.jsx)(Am,{adminOnly:!0,children:(0,Ge.jsx)(pu,{children:(0,Ge.jsx)(Ih,{})})})}),(0,Ge.jsx)(fe,{path:"/admin/menu",element:(0,Ge.jsx)(Am,{adminOnly:!0,children:(0,Ge.jsx)(pu,{children:(0,Ge.jsx)(zh,{})})})}),(0,Ge.jsx)(fe,{path:"/admin/analytics",element:(0,Ge.jsx)(Am,{adminOnly:!0,children:(0,Ge.jsx)(pu,{children:(0,Ge.jsx)(Lh,{})})})}),(0,Ge.jsx)(fe,{path:"/admin/settings",element:(0,Ge.jsx)(Am,{adminOnly:!0,children:(0,Ge.jsx)(pu,{children:(0,Ge.jsx)(Mh,{})})})}),(0,Ge.jsx)(fe,{path:"/admin/ab-epargne",element:(0,Ge.jsx)(Am,{adminOnly:!0,children:(0,Ge.jsx)(pu,{children:(0,Ge.jsx)(Uh,{})})})}),(0,Ge.jsx)(fe,{path:"/admin/test-notifications",element:(0,Ge.jsx)(Am,{adminOnly:!0,children:(0,Ge.jsx)(pu,{children:(0,Ge.jsx)(Vh,{})})})}),(0,Ge.jsx)(fe,{path:"/loan-request",element:(0,Ge.jsx)(Am,{children:(0,Ge.jsx)(pu,{children:(0,Ge.jsx)(Jh,{})})})}),(0,Ge.jsx)(fe,{path:"/loan-history",element:(0,Ge.jsx)(Am,{children:(0,Ge.jsx)(pu,{children:(0,Ge.jsx)(Zh,{})})})}),(0,Ge.jsx)(fe,{path:"/repayment",element:(0,Ge.jsx)(Am,{children:(0,Ge.jsx)(pu,{children:(0,Ge.jsx)(Qh,{})})})}),(0,Ge.jsx)(fe,{path:"/repayment/success",element:(0,Ge.jsx)(Am,{children:(0,Ge.jsx)(pu,{children:(0,Ge.jsx)(Yh,{})})})}),(0,Ge.jsx)(fe,{path:"/repayment/failure",element:(0,Ge.jsx)(Am,{children:(0,Ge.jsx)(pu,{children:(0,Ge.jsx)(Xh,{})})})}),(0,Ge.jsx)(fe,{path:"/repayment/cancel",element:(0,Ge.jsx)(Am,{children:(0,Ge.jsx)(pu,{children:(0,Ge.jsx)(em,{})})})}),(0,Ge.jsx)(fe,{path:"/profile",element:(0,Ge.jsx)(Am,{children:(0,Ge.jsx)(pu,{children:(0,Ge.jsx)(sm,{})})})}),(0,Ge.jsx)(fe,{path:"/menu",element:(0,Ge.jsx)(Am,{children:(0,Ge.jsx)(pu,{children:(0,Ge.jsx)(rm,{})})})}),(0,Ge.jsx)(fe,{path:"/ab-logement",element:(0,Ge.jsx)(Am,{children:(0,Ge.jsx)(pu,{children:(0,Ge.jsx)(am,{})})})}),(0,Ge.jsx)(fe,{path:"/ab-epargne",element:(0,Ge.jsx)(Am,{children:(0,Ge.jsx)(pu,{children:(0,Ge.jsx)(cm,{})})})}),(0,Ge.jsx)(fe,{path:"/ab-epargne/retour",element:(0,Ge.jsx)(Am,{children:(0,Ge.jsx)(pu,{children:(0,Ge.jsx)(dm,{})})})}),(0,Ge.jsx)(fe,{path:"/ab-epargne/plan/:id",element:(0,Ge.jsx)(Am,{children:(0,Ge.jsx)(pu,{children:(0,Ge.jsx)(hm,{})})})}),(0,Ge.jsx)(fe,{path:"/ab-epargne/depot-retour",element:(0,Ge.jsx)(Am,{children:(0,Ge.jsx)(pu,{children:(0,Ge.jsx)(mm,{})})})}),(0,Ge.jsx)(fe,{path:"/remboursement-retour",element:(0,Ge.jsx)(Am,{children:(0,Ge.jsx)(pu,{children:(0,Ge.jsx)(pm,{})})})}),(0,Ge.jsx)(fe,{path:"/coaching-finance",element:(0,Ge.jsx)(Am,{children:(0,Ge.jsx)(pu,{children:(0,Ge.jsx)(xm,{})})})}),(0,Ge.jsx)(fe,{path:"/loyalty-score",element:(0,Ge.jsx)(Am,{children:(0,Ge.jsx)(pu,{children:(0,Ge.jsx)(km,{})})})}),(0,Ge.jsx)(fe,{path:"/test-otp",element:(0,Ge.jsx)(Sm,{})}),(0,Ge.jsx)(fe,{path:"/test-health",element:(0,Ge.jsx)(Em,{})}),(0,Ge.jsx)(fe,{path:"/test-fedapay",element:(0,Ge.jsx)(Cm,{})}),(0,Ge.jsx)(fe,{path:"/test-plan-epargne/:id",element:(0,Ge.jsx)(fm,{})}),(0,Ge.jsx)(fe,{path:"/",element:(0,Ge.jsx)(pe,{to:"/dashboard",replace:!0})})]})}),e&&(0,Ge.jsx)(Pm,{onUpdate:()=>{Ln.applyUpdate()}})]})},Rm=()=>{const[e,n]=(0,t.useState)(!1),[s,r]=(0,t.useState)(!0);return(0,t.useEffect)(()=>{(()=>{try{console.log("[APP] V\xe9rification des variables d'environnement...");const e=!0,t=!0,s=!0;console.log("[APP] Variables d'environnement:",{hasSupabaseUrl:e,hasSupabaseKey:t,hasBackendUrl:s,url:"D\xe9finie",key:"D\xe9finie",backend:"D\xe9finie"});const r=e&&t&&s;n(r),r?console.log("[APP] \u2705 Configuration d\xe9tect\xe9e, d\xe9marrage de l'application"):console.log("[APP] \u274c Configuration manquante, affichage de la page de configuration")}catch(e){console.error("[APP] Erreur lors de la v\xe9rification de la configuration:",e),n(!1)}finally{r(!1)}})()},[]),s?(0,Ge.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center",children:(0,Ge.jsxs)("div",{className:"text-center",children:[(0,Ge.jsx)("div",{className:"w-16 h-16 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,Ge.jsx)("p",{className:"text-gray-600",children:"V\xe9rification de la configuration..."})]})}):e?(0,Ge.jsx)(Ze,{children:(0,Ge.jsxs)(ot,{children:[(0,Ge.jsx)(Im,{}),(0,Ge.jsx)(ku,{}),(0,Ge.jsx)(Au,{}),(0,Ge.jsx)(On,{position:"top-right"})]})}):(0,Ge.jsx)(Tm,{})},Om=e=>{e&&e instanceof Function&&n.e(453).then(n.bind(n,453)).then(t=>{let{getCLS:n,getFID:s,getFCP:r,getLCP:a,getTTFB:i}=t;n(e),s(e),r(e),a(e),i(e)})};r.createRoot(document.getElementById("root")).render((0,Ge.jsx)(t.StrictMode,{children:(0,Ge.jsx)(Rm,{})})),Om()})()})();
//# sourceMappingURL=main.5f094280.js.map