/*! For license information please see main.49eb3521.js.LICENSE.txt */
(()=>{var e={43:(e,t,r)=>{"use strict";e.exports=r(202)},153:(e,t,r)=>{"use strict";var s=r(43),n=Symbol.for("react.element"),a=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,r){var s,a={},c=null,d=null;for(s in void 0!==r&&(c=""+r),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)i.call(t,s)&&!l.hasOwnProperty(s)&&(a[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps)void 0===a[s]&&(a[s]=t[s]);return{$$typeof:n,type:e,key:c,ref:d,props:a,_owner:o.current}}t.Fragment=a,t.jsx=c,t.jsxs=c},202:(e,t)=>{"use strict";var r=Symbol.for("react.element"),s=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),h=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},f=Object.assign,x={};function g(e,t,r){this.props=e,this.context=t,this.refs=x,this.updater=r||p}function v(){}function b(e,t,r){this.props=e,this.context=t,this.refs=x,this.updater=r||p}g.prototype.isReactComponent={},g.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},g.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=g.prototype;var y=b.prototype=new v;y.constructor=b,f(y,g.prototype),y.isPureReactComponent=!0;var j=Array.isArray,w=Object.prototype.hasOwnProperty,N={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function k(e,t,s){var n,a={},i=null,o=null;if(null!=t)for(n in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(i=""+t.key),t)w.call(t,n)&&!S.hasOwnProperty(n)&&(a[n]=t[n]);var l=arguments.length-2;if(1===l)a.children=s;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];a.children=c}if(e&&e.defaultProps)for(n in l=e.defaultProps)void 0===a[n]&&(a[n]=l[n]);return{$$typeof:r,type:e,key:i,ref:o,props:a,_owner:N.current}}function _(e){return"object"===typeof e&&null!==e&&e.$$typeof===r}var E=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function P(e,t,n,a,i){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l=!1;if(null===e)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case r:case s:l=!0}}if(l)return i=i(l=e),e=""===a?"."+C(l,0):a,j(i)?(n="",null!=e&&(n=e.replace(E,"$&/")+"/"),P(i,t,n,"",function(e){return e})):null!=i&&(_(i)&&(i=function(e,t){return{$$typeof:r,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(i,n+(!i.key||l&&l.key===i.key?"":(""+i.key).replace(E,"$&/")+"/")+e)),t.push(i)),1;if(l=0,a=""===a?".":a+":",j(e))for(var c=0;c<e.length;c++){var d=a+C(o=e[c],c);l+=P(o,t,n,d,i)}else if(d=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=h&&e[h]||e["@@iterator"])?e:null}(e),"function"===typeof d)for(e=d.call(e),c=0;!(o=e.next()).done;)l+=P(o=o.value,t,n,d=a+C(o,c++),i);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function A(e,t,r){if(null==e)return e;var s=[],n=0;return P(e,s,"","",function(e){return t.call(r,e,n++)}),s}function T(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var I={current:null},R={transition:null},O={ReactCurrentDispatcher:I,ReactCurrentBatchConfig:R,ReactCurrentOwner:N};function L(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:A,forEach:function(e,t,r){A(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return A(e,function(){t++}),t},toArray:function(e){return A(e,function(e){return e})||[]},only:function(e){if(!_(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=g,t.Fragment=n,t.Profiler=i,t.PureComponent=b,t.StrictMode=a,t.Suspense=d,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.act=L,t.cloneElement=function(e,t,s){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=f({},e.props),a=e.key,i=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(i=t.ref,o=N.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)w.call(t,c)&&!S.hasOwnProperty(c)&&(n[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)n.children=s;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];n.children=l}return{$$typeof:r,type:e.type,key:a,ref:i,props:n,_owner:o}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=k,t.createFactory=function(e){var t=k.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=_,t.lazy=function(e){return{$$typeof:m,_payload:{_status:-1,_result:e},_init:T}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=R.transition;R.transition={};try{e()}finally{R.transition=t}},t.unstable_act=L,t.useCallback=function(e,t){return I.current.useCallback(e,t)},t.useContext=function(e){return I.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return I.current.useDeferredValue(e)},t.useEffect=function(e,t){return I.current.useEffect(e,t)},t.useId=function(){return I.current.useId()},t.useImperativeHandle=function(e,t,r){return I.current.useImperativeHandle(e,t,r)},t.useInsertionEffect=function(e,t){return I.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return I.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return I.current.useMemo(e,t)},t.useReducer=function(e,t,r){return I.current.useReducer(e,t,r)},t.useRef=function(e){return I.current.useRef(e)},t.useState=function(e){return I.current.useState(e)},t.useSyncExternalStore=function(e,t,r){return I.current.useSyncExternalStore(e,t,r)},t.useTransition=function(){return I.current.useTransition()},t.version="18.3.1"},210:function(e,t,r){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=s(r(829)),a=s(r(736));class i{constructor(e){let{headers:t={},schema:r,fetch:s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.url=e,this.headers=new Headers(t),this.schemaName=r,this.fetch=s}from(e){const t=new URL("".concat(this.url,"/").concat(e));return new n.default(t,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new i(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{head:r=!1,get:s=!1,count:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var i;let o;const l=new URL("".concat(this.url,"/rpc/").concat(e));let c;r||s?(o=r?"HEAD":"GET",Object.entries(t).filter(e=>{let[t,r]=e;return void 0!==r}).map(e=>{let[t,r]=e;return[t,Array.isArray(r)?"{".concat(r.join(","),"}"):"".concat(r)]}).forEach(e=>{let[t,r]=e;l.searchParams.append(t,r)})):(o="POST",c=t);const d=new Headers(this.headers);return n&&d.set("Prefer","count=".concat(n)),new a.default({method:o,url:l,headers:d,schema:this.schemaName,body:c,fetch:null!==(i=this.fetch)&&void 0!==i?i:fetch})}}t.default=i},234:(e,t)=>{"use strict";function r(e,t){var r=e.length;e.push(t);e:for(;0<r;){var s=r-1>>>1,n=e[s];if(!(0<a(n,t)))break e;e[s]=t,e[r]=n,r=s}}function s(e){return 0===e.length?null:e[0]}function n(e){if(0===e.length)return null;var t=e[0],r=e.pop();if(r!==t){e[0]=r;e:for(var s=0,n=e.length,i=n>>>1;s<i;){var o=2*(s+1)-1,l=e[o],c=o+1,d=e[c];if(0>a(l,r))c<n&&0>a(d,l)?(e[s]=d,e[c]=r,s=c):(e[s]=l,e[o]=r,s=o);else{if(!(c<n&&0>a(d,r)))break e;e[s]=d,e[c]=r,s=c}}}return t}function a(e,t){var r=e.sortIndex-t.sortIndex;return 0!==r?r:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],d=[],u=1,m=null,h=3,p=!1,f=!1,x=!1,g="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function y(e){for(var t=s(d);null!==t;){if(null===t.callback)n(d);else{if(!(t.startTime<=e))break;n(d),t.sortIndex=t.expirationTime,r(c,t)}t=s(d)}}function j(e){if(x=!1,y(e),!f)if(null!==s(c))f=!0,R(w);else{var t=s(d);null!==t&&O(j,t.startTime-e)}}function w(e,r){f=!1,x&&(x=!1,v(_),_=-1),p=!0;var a=h;try{for(y(r),m=s(c);null!==m&&(!(m.expirationTime>r)||e&&!P());){var i=m.callback;if("function"===typeof i){m.callback=null,h=m.priorityLevel;var o=i(m.expirationTime<=r);r=t.unstable_now(),"function"===typeof o?m.callback=o:m===s(c)&&n(c),y(r)}else n(c);m=s(c)}if(null!==m)var l=!0;else{var u=s(d);null!==u&&O(j,u.startTime-r),l=!1}return l}finally{m=null,h=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var N,S=!1,k=null,_=-1,E=5,C=-1;function P(){return!(t.unstable_now()-C<E)}function A(){if(null!==k){var e=t.unstable_now();C=e;var r=!0;try{r=k(!0,e)}finally{r?N():(S=!1,k=null)}}else S=!1}if("function"===typeof b)N=function(){b(A)};else if("undefined"!==typeof MessageChannel){var T=new MessageChannel,I=T.port2;T.port1.onmessage=A,N=function(){I.postMessage(null)}}else N=function(){g(A,0)};function R(e){k=e,S||(S=!0,N())}function O(e,r){_=g(function(){e(t.unstable_now())},r)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){f||p||(f=!0,R(w))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return s(c)},t.unstable_next=function(e){switch(h){case 1:case 2:case 3:var t=3;break;default:t=h}var r=h;h=t;try{return e()}finally{h=r}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var r=h;h=e;try{return t()}finally{h=r}},t.unstable_scheduleCallback=function(e,n,a){var i=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?i+a:i:a=i,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:u++,callback:n,priorityLevel:e,startTime:a,expirationTime:o=a+o,sortIndex:-1},a>i?(e.sortIndex=a,r(d,e),null===s(c)&&e===s(d)&&(x?(v(_),_=-1):x=!0,O(j,a-i))):(e.sortIndex=o,r(c,e),f||p||(f=!0,R(w))),e},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(e){var t=h;return function(){var r=h;h=t;try{return e.apply(this,arguments)}finally{h=r}}}},285:e=>{var t,r,s=e.exports={};function n(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function i(e){if(t===setTimeout)return setTimeout(e,0);if((t===n||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(r){try{return t.call(null,e,0)}catch(r){return t.call(this,e,0)}}}!function(){try{t="function"===typeof setTimeout?setTimeout:n}catch(e){t=n}try{r="function"===typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var o,l=[],c=!1,d=-1;function u(){c&&o&&(c=!1,o.length?l=o.concat(l):d=-1,l.length&&m())}function m(){if(!c){var e=i(u);c=!0;for(var t=l.length;t;){for(o=l,l=[];++d<t;)o&&o[d].run();d=-1,t=l.length}o=null,c=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{return r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function p(){}s.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];l.push(new h(e,t)),1!==l.length||c||i(m)},h.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=p,s.addListener=p,s.once=p,s.off=p,s.removeListener=p,s.removeAllListeners=p,s.emit=p,s.prependListener=p,s.prependOnceListener=p,s.listeners=function(e){return[]},s.binding=function(e){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(e){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}},286:function(e,t,r){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=s(r(630)),a=s(r(611));t.default=class{constructor(e){var t,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=null!==(t=e.shouldThrowOnError)&&void 0!==t&&t,this.signal=e.signal,this.isMaybeSingle=null!==(r=e.isMaybeSingle)&&void 0!==r&&r,e.fetch?this.fetch=e.fetch:"undefined"===typeof fetch?this.fetch=n.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),"GET"!==this.method&&"HEAD"!==this.method&&this.headers.set("Content-Type","application/json");let r=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async e=>{var t,r,s,n;let i=null,o=null,l=null,c=e.status,d=e.statusText;if(e.ok){if("HEAD"!==this.method){const r=await e.text();""===r||(o="text/csv"===this.headers.get("Accept")||this.headers.get("Accept")&&(null===(t=this.headers.get("Accept"))||void 0===t?void 0:t.includes("application/vnd.pgrst.plan+text"))?r:JSON.parse(r))}const n=null===(r=this.headers.get("Prefer"))||void 0===r?void 0:r.match(/count=(exact|planned|estimated)/),a=null===(s=e.headers.get("content-range"))||void 0===s?void 0:s.split("/");n&&a&&a.length>1&&(l=parseInt(a[1])),this.isMaybeSingle&&"GET"===this.method&&Array.isArray(o)&&(o.length>1?(i={code:"PGRST116",details:"Results contain ".concat(o.length," rows, application/vnd.pgrst.object+json requires 1 row"),hint:null,message:"JSON object requested, multiple (or no) rows returned"},o=null,l=null,c=406,d="Not Acceptable"):o=1===o.length?o[0]:null)}else{const t=await e.text();try{i=JSON.parse(t),Array.isArray(i)&&404===e.status&&(o=[],i=null,c=200,d="OK")}catch(u){404===e.status&&""===t?(c=204,d="No Content"):i={message:t}}if(i&&this.isMaybeSingle&&(null===(n=null===i||void 0===i?void 0:i.details)||void 0===n?void 0:n.includes("0 rows"))&&(i=null,c=200,d="OK"),i&&this.shouldThrowOnError)throw new a.default(i)}return{error:i,data:o,count:l,status:c,statusText:d}});return this.shouldThrowOnError||(r=r.catch(e=>{var t,r,s;return{error:{message:"".concat(null!==(t=null===e||void 0===e?void 0:e.name)&&void 0!==t?t:"FetchError",": ").concat(null===e||void 0===e?void 0:e.message),details:"".concat(null!==(r=null===e||void 0===e?void 0:e.stack)&&void 0!==r?r:""),hint:"",code:"".concat(null!==(s=null===e||void 0===e?void 0:e.code)&&void 0!==s?s:"")},data:null,count:null,status:0,statusText:""}})),r.then(e,t)}returns(){return this}overrideTypes(){return this}}},374:function(e,t,r){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=s(r(286));class a extends n.default{select(e){let t=!1;const r=(null!==e&&void 0!==e?e:"*").split("").map(e=>/\s/.test(e)&&!t?"":('"'===e&&(t=!t),e)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e){let{ascending:t=!0,nullsFirst:r,foreignTable:s,referencedTable:n=s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const a=n?"".concat(n,".order"):"order",i=this.url.searchParams.get(a);return this.url.searchParams.set(a,"".concat(i?"".concat(i,","):"").concat(e,".").concat(t?"asc":"desc").concat(void 0===r?"":r?".nullsfirst":".nullslast")),this}limit(e){let{foreignTable:t,referencedTable:r=t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s="undefined"===typeof r?"limit":"".concat(r,".limit");return this.url.searchParams.set(s,"".concat(e)),this}range(e,t){let{foreignTable:r,referencedTable:s=r}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const n="undefined"===typeof s?"offset":"".concat(s,".offset"),a="undefined"===typeof s?"limit":"".concat(s,".limit");return this.url.searchParams.set(n,"".concat(e)),this.url.searchParams.set(a,"".concat(t-e+1)),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return"GET"===this.method?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain(){let{analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:s=!1,wal:n=!1,format:a="text"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var i;const o=[e?"analyze":null,t?"verbose":null,r?"settings":null,s?"buffers":null,n?"wal":null].filter(Boolean).join("|"),l=null!==(i=this.headers.get("Accept"))&&void 0!==i?i:"application/json";return this.headers.set("Accept","application/vnd.pgrst.plan+".concat(a,'; for="').concat(l,'"; options=').concat(o,";")),this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer","max-affected=".concat(e)),this}}t.default=a},382:(e,t,r)=>{"use strict";const s=r(445),n=r(900),a="function"===typeof Symbol&&"function"===typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.hp=l,t.IS=50;const i=2147483647;function o(e){if(e>i)throw new RangeError('The value "'+e+'" is invalid for option "size"');const t=new Uint8Array(e);return Object.setPrototypeOf(t,l.prototype),t}function l(e,t,r){if("number"===typeof e){if("string"===typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return u(e)}return c(e,t,r)}function c(e,t,r){if("string"===typeof e)return function(e,t){"string"===typeof t&&""!==t||(t="utf8");if(!l.isEncoding(t))throw new TypeError("Unknown encoding: "+t);const r=0|f(e,t);let s=o(r);const n=s.write(e,t);n!==r&&(s=s.slice(0,n));return s}(e,t);if(ArrayBuffer.isView(e))return function(e){if(Z(e,Uint8Array)){const t=new Uint8Array(e);return h(t.buffer,t.byteOffset,t.byteLength)}return m(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(Z(e,ArrayBuffer)||e&&Z(e.buffer,ArrayBuffer))return h(e,t,r);if("undefined"!==typeof SharedArrayBuffer&&(Z(e,SharedArrayBuffer)||e&&Z(e.buffer,SharedArrayBuffer)))return h(e,t,r);if("number"===typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');const s=e.valueOf&&e.valueOf();if(null!=s&&s!==e)return l.from(s,t,r);const n=function(e){if(l.isBuffer(e)){const t=0|p(e.length),r=o(t);return 0===r.length||e.copy(r,0,0,t),r}if(void 0!==e.length)return"number"!==typeof e.length||$(e.length)?o(0):m(e);if("Buffer"===e.type&&Array.isArray(e.data))return m(e.data)}(e);if(n)return n;if("undefined"!==typeof Symbol&&null!=Symbol.toPrimitive&&"function"===typeof e[Symbol.toPrimitive])return l.from(e[Symbol.toPrimitive]("string"),t,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function d(e){if("number"!==typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function u(e){return d(e),o(e<0?0:0|p(e))}function m(e){const t=e.length<0?0:0|p(e.length),r=o(t);for(let s=0;s<t;s+=1)r[s]=255&e[s];return r}function h(e,t,r){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw new RangeError('"length" is outside of buffer bounds');let s;return s=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),Object.setPrototypeOf(s,l.prototype),s}function p(e){if(e>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return 0|e}function f(e,t){if(l.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||Z(e,ArrayBuffer))return e.byteLength;if("string"!==typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);const r=e.length,s=arguments.length>2&&!0===arguments[2];if(!s&&0===r)return 0;let n=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return G(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return K(e).length;default:if(n)return s?-1:G(e).length;t=(""+t).toLowerCase(),n=!0}}function x(e,t,r){let s=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return A(this,t,r);case"utf8":case"utf-8":return _(this,t,r);case"ascii":return C(this,t,r);case"latin1":case"binary":return P(this,t,r);case"base64":return k(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,t,r);default:if(s)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),s=!0}}function g(e,t,r){const s=e[t];e[t]=e[r],e[r]=s}function v(e,t,r,s,n){if(0===e.length)return-1;if("string"===typeof r?(s=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),$(r=+r)&&(r=n?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(n)return-1;r=e.length-1}else if(r<0){if(!n)return-1;r=0}if("string"===typeof t&&(t=l.from(t,s)),l.isBuffer(t))return 0===t.length?-1:b(e,t,r,s,n);if("number"===typeof t)return t&=255,"function"===typeof Uint8Array.prototype.indexOf?n?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):b(e,[t],r,s,n);throw new TypeError("val must be string, number or Buffer")}function b(e,t,r,s,n){let a,i=1,o=e.length,l=t.length;if(void 0!==s&&("ucs2"===(s=String(s).toLowerCase())||"ucs-2"===s||"utf16le"===s||"utf-16le"===s)){if(e.length<2||t.length<2)return-1;i=2,o/=2,l/=2,r/=2}function c(e,t){return 1===i?e[t]:e.readUInt16BE(t*i)}if(n){let s=-1;for(a=r;a<o;a++)if(c(e,a)===c(t,-1===s?0:a-s)){if(-1===s&&(s=a),a-s+1===l)return s*i}else-1!==s&&(a-=a-s),s=-1}else for(r+l>o&&(r=o-l),a=r;a>=0;a--){let r=!0;for(let s=0;s<l;s++)if(c(e,a+s)!==c(t,s)){r=!1;break}if(r)return a}return-1}function y(e,t,r,s){r=Number(r)||0;const n=e.length-r;s?(s=Number(s))>n&&(s=n):s=n;const a=t.length;let i;for(s>a/2&&(s=a/2),i=0;i<s;++i){const s=parseInt(t.substr(2*i,2),16);if($(s))return i;e[r+i]=s}return i}function j(e,t,r,s){return J(G(t,e.length-r),e,r,s)}function w(e,t,r,s){return J(function(e){const t=[];for(let r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,s)}function N(e,t,r,s){return J(K(t),e,r,s)}function S(e,t,r,s){return J(function(e,t){let r,s,n;const a=[];for(let i=0;i<e.length&&!((t-=2)<0);++i)r=e.charCodeAt(i),s=r>>8,n=r%256,a.push(n),a.push(s);return a}(t,e.length-r),e,r,s)}function k(e,t,r){return 0===t&&r===e.length?s.fromByteArray(e):s.fromByteArray(e.slice(t,r))}function _(e,t,r){r=Math.min(e.length,r);const s=[];let n=t;for(;n<r;){const t=e[n];let a=null,i=t>239?4:t>223?3:t>191?2:1;if(n+i<=r){let r,s,o,l;switch(i){case 1:t<128&&(a=t);break;case 2:r=e[n+1],128===(192&r)&&(l=(31&t)<<6|63&r,l>127&&(a=l));break;case 3:r=e[n+1],s=e[n+2],128===(192&r)&&128===(192&s)&&(l=(15&t)<<12|(63&r)<<6|63&s,l>2047&&(l<55296||l>57343)&&(a=l));break;case 4:r=e[n+1],s=e[n+2],o=e[n+3],128===(192&r)&&128===(192&s)&&128===(192&o)&&(l=(15&t)<<18|(63&r)<<12|(63&s)<<6|63&o,l>65535&&l<1114112&&(a=l))}}null===a?(a=65533,i=1):a>65535&&(a-=65536,s.push(a>>>10&1023|55296),a=56320|1023&a),s.push(a),n+=i}return function(e){const t=e.length;if(t<=E)return String.fromCharCode.apply(String,e);let r="",s=0;for(;s<t;)r+=String.fromCharCode.apply(String,e.slice(s,s+=E));return r}(s)}l.TYPED_ARRAY_SUPPORT=function(){try{const e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),l.TYPED_ARRAY_SUPPORT||"undefined"===typeof console||"function"!==typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(l.prototype,"parent",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.buffer}}),Object.defineProperty(l.prototype,"offset",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.byteOffset}}),l.poolSize=8192,l.from=function(e,t,r){return c(e,t,r)},Object.setPrototypeOf(l.prototype,Uint8Array.prototype),Object.setPrototypeOf(l,Uint8Array),l.alloc=function(e,t,r){return function(e,t,r){return d(e),e<=0?o(e):void 0!==t?"string"===typeof r?o(e).fill(t,r):o(e).fill(t):o(e)}(e,t,r)},l.allocUnsafe=function(e){return u(e)},l.allocUnsafeSlow=function(e){return u(e)},l.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==l.prototype},l.compare=function(e,t){if(Z(e,Uint8Array)&&(e=l.from(e,e.offset,e.byteLength)),Z(t,Uint8Array)&&(t=l.from(t,t.offset,t.byteLength)),!l.isBuffer(e)||!l.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let r=e.length,s=t.length;for(let n=0,a=Math.min(r,s);n<a;++n)if(e[n]!==t[n]){r=e[n],s=t[n];break}return r<s?-1:s<r?1:0},l.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return l.alloc(0);let r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;const s=l.allocUnsafe(t);let n=0;for(r=0;r<e.length;++r){let t=e[r];if(Z(t,Uint8Array))n+t.length>s.length?(l.isBuffer(t)||(t=l.from(t)),t.copy(s,n)):Uint8Array.prototype.set.call(s,t,n);else{if(!l.isBuffer(t))throw new TypeError('"list" argument must be an Array of Buffers');t.copy(s,n)}n+=t.length}return s},l.byteLength=f,l.prototype._isBuffer=!0,l.prototype.swap16=function(){const e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)g(this,t,t+1);return this},l.prototype.swap32=function(){const e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)g(this,t,t+3),g(this,t+1,t+2);return this},l.prototype.swap64=function(){const e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)g(this,t,t+7),g(this,t+1,t+6),g(this,t+2,t+5),g(this,t+3,t+4);return this},l.prototype.toString=function(){const e=this.length;return 0===e?"":0===arguments.length?_(this,0,e):x.apply(this,arguments)},l.prototype.toLocaleString=l.prototype.toString,l.prototype.equals=function(e){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===l.compare(this,e)},l.prototype.inspect=function(){let e="";const r=t.IS;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"},a&&(l.prototype[a]=l.prototype.inspect),l.prototype.compare=function(e,t,r,s,n){if(Z(e,Uint8Array)&&(e=l.from(e,e.offset,e.byteLength)),!l.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===s&&(s=0),void 0===n&&(n=this.length),t<0||r>e.length||s<0||n>this.length)throw new RangeError("out of range index");if(s>=n&&t>=r)return 0;if(s>=n)return-1;if(t>=r)return 1;if(this===e)return 0;let a=(n>>>=0)-(s>>>=0),i=(r>>>=0)-(t>>>=0);const o=Math.min(a,i),c=this.slice(s,n),d=e.slice(t,r);for(let l=0;l<o;++l)if(c[l]!==d[l]){a=c[l],i=d[l];break}return a<i?-1:i<a?1:0},l.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},l.prototype.indexOf=function(e,t,r){return v(this,e,t,r,!0)},l.prototype.lastIndexOf=function(e,t,r){return v(this,e,t,r,!1)},l.prototype.write=function(e,t,r,s){if(void 0===t)s="utf8",r=this.length,t=0;else if(void 0===r&&"string"===typeof t)s=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===s&&(s="utf8")):(s=r,r=void 0)}const n=this.length-t;if((void 0===r||r>n)&&(r=n),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");s||(s="utf8");let a=!1;for(;;)switch(s){case"hex":return y(this,e,t,r);case"utf8":case"utf-8":return j(this,e,t,r);case"ascii":case"latin1":case"binary":return w(this,e,t,r);case"base64":return N(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,e,t,r);default:if(a)throw new TypeError("Unknown encoding: "+s);s=(""+s).toLowerCase(),a=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const E=4096;function C(e,t,r){let s="";r=Math.min(e.length,r);for(let n=t;n<r;++n)s+=String.fromCharCode(127&e[n]);return s}function P(e,t,r){let s="";r=Math.min(e.length,r);for(let n=t;n<r;++n)s+=String.fromCharCode(e[n]);return s}function A(e,t,r){const s=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>s)&&(r=s);let n="";for(let a=t;a<r;++a)n+=Q[e[a]];return n}function T(e,t,r){const s=e.slice(t,r);let n="";for(let a=0;a<s.length-1;a+=2)n+=String.fromCharCode(s[a]+256*s[a+1]);return n}function I(e,t,r){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function R(e,t,r,s,n,a){if(!l.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>n||t<a)throw new RangeError('"value" argument is out of bounds');if(r+s>e.length)throw new RangeError("Index out of range")}function O(e,t,r,s,n){V(t,s,n,e,r,7);let a=Number(t&BigInt(4294967295));e[r++]=a,a>>=8,e[r++]=a,a>>=8,e[r++]=a,a>>=8,e[r++]=a;let i=Number(t>>BigInt(32)&BigInt(4294967295));return e[r++]=i,i>>=8,e[r++]=i,i>>=8,e[r++]=i,i>>=8,e[r++]=i,r}function L(e,t,r,s,n){V(t,s,n,e,r,7);let a=Number(t&BigInt(4294967295));e[r+7]=a,a>>=8,e[r+6]=a,a>>=8,e[r+5]=a,a>>=8,e[r+4]=a;let i=Number(t>>BigInt(32)&BigInt(4294967295));return e[r+3]=i,i>>=8,e[r+2]=i,i>>=8,e[r+1]=i,i>>=8,e[r]=i,r+8}function D(e,t,r,s,n,a){if(r+s>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function z(e,t,r,s,a){return t=+t,r>>>=0,a||D(e,0,r,4),n.write(e,t,r,s,23,4),r+4}function M(e,t,r,s,a){return t=+t,r>>>=0,a||D(e,0,r,8),n.write(e,t,r,s,52,8),r+8}l.prototype.slice=function(e,t){const r=this.length;(e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);const s=this.subarray(e,t);return Object.setPrototypeOf(s,l.prototype),s},l.prototype.readUintLE=l.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||I(e,t,this.length);let s=this[e],n=1,a=0;for(;++a<t&&(n*=256);)s+=this[e+a]*n;return s},l.prototype.readUintBE=l.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||I(e,t,this.length);let s=this[e+--t],n=1;for(;t>0&&(n*=256);)s+=this[e+--t]*n;return s},l.prototype.readUint8=l.prototype.readUInt8=function(e,t){return e>>>=0,t||I(e,1,this.length),this[e]},l.prototype.readUint16LE=l.prototype.readUInt16LE=function(e,t){return e>>>=0,t||I(e,2,this.length),this[e]|this[e+1]<<8},l.prototype.readUint16BE=l.prototype.readUInt16BE=function(e,t){return e>>>=0,t||I(e,2,this.length),this[e]<<8|this[e+1]},l.prototype.readUint32LE=l.prototype.readUInt32LE=function(e,t){return e>>>=0,t||I(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},l.prototype.readUint32BE=l.prototype.readUInt32BE=function(e,t){return e>>>=0,t||I(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},l.prototype.readBigUInt64LE=Y(function(e){q(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||H(e,this.length-8);const s=t+256*this[++e]+65536*this[++e]+this[++e]*2**24,n=this[++e]+256*this[++e]+65536*this[++e]+r*2**24;return BigInt(s)+(BigInt(n)<<BigInt(32))}),l.prototype.readBigUInt64BE=Y(function(e){q(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||H(e,this.length-8);const s=t*2**24+65536*this[++e]+256*this[++e]+this[++e],n=this[++e]*2**24+65536*this[++e]+256*this[++e]+r;return(BigInt(s)<<BigInt(32))+BigInt(n)}),l.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||I(e,t,this.length);let s=this[e],n=1,a=0;for(;++a<t&&(n*=256);)s+=this[e+a]*n;return n*=128,s>=n&&(s-=Math.pow(2,8*t)),s},l.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||I(e,t,this.length);let s=t,n=1,a=this[e+--s];for(;s>0&&(n*=256);)a+=this[e+--s]*n;return n*=128,a>=n&&(a-=Math.pow(2,8*t)),a},l.prototype.readInt8=function(e,t){return e>>>=0,t||I(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},l.prototype.readInt16LE=function(e,t){e>>>=0,t||I(e,2,this.length);const r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},l.prototype.readInt16BE=function(e,t){e>>>=0,t||I(e,2,this.length);const r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},l.prototype.readInt32LE=function(e,t){return e>>>=0,t||I(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},l.prototype.readInt32BE=function(e,t){return e>>>=0,t||I(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},l.prototype.readBigInt64LE=Y(function(e){q(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||H(e,this.length-8);const s=this[e+4]+256*this[e+5]+65536*this[e+6]+(r<<24);return(BigInt(s)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*2**24)}),l.prototype.readBigInt64BE=Y(function(e){q(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||H(e,this.length-8);const s=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(s)<<BigInt(32))+BigInt(this[++e]*2**24+65536*this[++e]+256*this[++e]+r)}),l.prototype.readFloatLE=function(e,t){return e>>>=0,t||I(e,4,this.length),n.read(this,e,!0,23,4)},l.prototype.readFloatBE=function(e,t){return e>>>=0,t||I(e,4,this.length),n.read(this,e,!1,23,4)},l.prototype.readDoubleLE=function(e,t){return e>>>=0,t||I(e,8,this.length),n.read(this,e,!0,52,8)},l.prototype.readDoubleBE=function(e,t){return e>>>=0,t||I(e,8,this.length),n.read(this,e,!1,52,8)},l.prototype.writeUintLE=l.prototype.writeUIntLE=function(e,t,r,s){if(e=+e,t>>>=0,r>>>=0,!s){R(this,e,t,r,Math.pow(2,8*r)-1,0)}let n=1,a=0;for(this[t]=255&e;++a<r&&(n*=256);)this[t+a]=e/n&255;return t+r},l.prototype.writeUintBE=l.prototype.writeUIntBE=function(e,t,r,s){if(e=+e,t>>>=0,r>>>=0,!s){R(this,e,t,r,Math.pow(2,8*r)-1,0)}let n=r-1,a=1;for(this[t+n]=255&e;--n>=0&&(a*=256);)this[t+n]=e/a&255;return t+r},l.prototype.writeUint8=l.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||R(this,e,t,1,255,0),this[t]=255&e,t+1},l.prototype.writeUint16LE=l.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||R(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},l.prototype.writeUint16BE=l.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||R(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},l.prototype.writeUint32LE=l.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||R(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},l.prototype.writeUint32BE=l.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||R(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},l.prototype.writeBigUInt64LE=Y(function(e){return O(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeBigUInt64BE=Y(function(e){return L(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeIntLE=function(e,t,r,s){if(e=+e,t>>>=0,!s){const s=Math.pow(2,8*r-1);R(this,e,t,r,s-1,-s)}let n=0,a=1,i=0;for(this[t]=255&e;++n<r&&(a*=256);)e<0&&0===i&&0!==this[t+n-1]&&(i=1),this[t+n]=(e/a|0)-i&255;return t+r},l.prototype.writeIntBE=function(e,t,r,s){if(e=+e,t>>>=0,!s){const s=Math.pow(2,8*r-1);R(this,e,t,r,s-1,-s)}let n=r-1,a=1,i=0;for(this[t+n]=255&e;--n>=0&&(a*=256);)e<0&&0===i&&0!==this[t+n+1]&&(i=1),this[t+n]=(e/a|0)-i&255;return t+r},l.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||R(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},l.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||R(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},l.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||R(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},l.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||R(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},l.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||R(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},l.prototype.writeBigInt64LE=Y(function(e){return O(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),l.prototype.writeBigInt64BE=Y(function(e){return L(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),l.prototype.writeFloatLE=function(e,t,r){return z(this,e,t,!0,r)},l.prototype.writeFloatBE=function(e,t,r){return z(this,e,t,!1,r)},l.prototype.writeDoubleLE=function(e,t,r){return M(this,e,t,!0,r)},l.prototype.writeDoubleBE=function(e,t,r){return M(this,e,t,!1,r)},l.prototype.copy=function(e,t,r,s){if(!l.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r||(r=0),s||0===s||(s=this.length),t>=e.length&&(t=e.length),t||(t=0),s>0&&s<r&&(s=r),s===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(s<0)throw new RangeError("sourceEnd out of bounds");s>this.length&&(s=this.length),e.length-t<s-r&&(s=e.length-t+r);const n=s-r;return this===e&&"function"===typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,r,s):Uint8Array.prototype.set.call(e,this.subarray(r,s),t),n},l.prototype.fill=function(e,t,r,s){if("string"===typeof e){if("string"===typeof t?(s=t,t=0,r=this.length):"string"===typeof r&&(s=r,r=this.length),void 0!==s&&"string"!==typeof s)throw new TypeError("encoding must be a string");if("string"===typeof s&&!l.isEncoding(s))throw new TypeError("Unknown encoding: "+s);if(1===e.length){const t=e.charCodeAt(0);("utf8"===s&&t<128||"latin1"===s)&&(e=t)}}else"number"===typeof e?e&=255:"boolean"===typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;let n;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"===typeof e)for(n=t;n<r;++n)this[n]=e;else{const a=l.isBuffer(e)?e:l.from(e,s),i=a.length;if(0===i)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(n=0;n<r-t;++n)this[n+t]=a[n%i]}return this};const F={};function U(e,t,r){F[e]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name="".concat(this.name," [").concat(e,"]"),this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return"".concat(this.name," [").concat(e,"]: ").concat(this.message)}}}function B(e){let t="",r=e.length;const s="-"===e[0]?1:0;for(;r>=s+4;r-=3)t="_".concat(e.slice(r-3,r)).concat(t);return"".concat(e.slice(0,r)).concat(t)}function V(e,t,r,s,n,a){if(e>r||e<t){const s="bigint"===typeof t?"n":"";let n;throw n=a>3?0===t||t===BigInt(0)?">= 0".concat(s," and < 2").concat(s," ** ").concat(8*(a+1)).concat(s):">= -(2".concat(s," ** ").concat(8*(a+1)-1).concat(s,") and < 2 ** ")+"".concat(8*(a+1)-1).concat(s):">= ".concat(t).concat(s," and <= ").concat(r).concat(s),new F.ERR_OUT_OF_RANGE("value",n,e)}!function(e,t,r){q(t,"offset"),void 0!==e[t]&&void 0!==e[t+r]||H(t,e.length-(r+1))}(s,n,a)}function q(e,t){if("number"!==typeof e)throw new F.ERR_INVALID_ARG_TYPE(t,"number",e)}function H(e,t,r){if(Math.floor(e)!==e)throw q(e,r),new F.ERR_OUT_OF_RANGE(r||"offset","an integer",e);if(t<0)throw new F.ERR_BUFFER_OUT_OF_BOUNDS;throw new F.ERR_OUT_OF_RANGE(r||"offset",">= ".concat(r?1:0," and <= ").concat(t),e)}U("ERR_BUFFER_OUT_OF_BOUNDS",function(e){return e?"".concat(e," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"},RangeError),U("ERR_INVALID_ARG_TYPE",function(e,t){return'The "'.concat(e,'" argument must be of type number. Received type ').concat(typeof t)},TypeError),U("ERR_OUT_OF_RANGE",function(e,t,r){let s='The value of "'.concat(e,'" is out of range.'),n=r;return Number.isInteger(r)&&Math.abs(r)>2**32?n=B(String(r)):"bigint"===typeof r&&(n=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(n=B(n)),n+="n"),s+=" It must be ".concat(t,". Received ").concat(n),s},RangeError);const W=/[^+/0-9A-Za-z-_]/g;function G(e,t){let r;t=t||1/0;const s=e.length;let n=null;const a=[];for(let i=0;i<s;++i){if(r=e.charCodeAt(i),r>55295&&r<57344){if(!n){if(r>56319){(t-=3)>-1&&a.push(239,191,189);continue}if(i+1===s){(t-=3)>-1&&a.push(239,191,189);continue}n=r;continue}if(r<56320){(t-=3)>-1&&a.push(239,191,189),n=r;continue}r=65536+(n-55296<<10|r-56320)}else n&&(t-=3)>-1&&a.push(239,191,189);if(n=null,r<128){if((t-=1)<0)break;a.push(r)}else if(r<2048){if((t-=2)<0)break;a.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;a.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return a}function K(e){return s.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(W,"")).length<2)return"";for(;e.length%4!==0;)e+="=";return e}(e))}function J(e,t,r,s){let n;for(n=0;n<s&&!(n+r>=t.length||n>=e.length);++n)t[n+r]=e[n];return n}function Z(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function $(e){return e!==e}const Q=function(){const e="0123456789abcdef",t=new Array(256);for(let r=0;r<16;++r){const s=16*r;for(let n=0;n<16;++n)t[s+n]=e[r]+e[n]}return t}();function Y(e){return"undefined"===typeof BigInt?X:e}function X(){throw new Error("BigInt not supported")}},391:(e,t,r)=>{"use strict";var s=r(950);t.createRoot=s.createRoot,t.hydrateRoot=s.hydrateRoot},445:(e,t)=>{"use strict";t.byteLength=function(e){var t=o(e),r=t[0],s=t[1];return 3*(r+s)/4-s},t.toByteArray=function(e){var t,r,a=o(e),i=a[0],l=a[1],c=new n(function(e,t,r){return 3*(t+r)/4-r}(0,i,l)),d=0,u=l>0?i-4:i;for(r=0;r<u;r+=4)t=s[e.charCodeAt(r)]<<18|s[e.charCodeAt(r+1)]<<12|s[e.charCodeAt(r+2)]<<6|s[e.charCodeAt(r+3)],c[d++]=t>>16&255,c[d++]=t>>8&255,c[d++]=255&t;2===l&&(t=s[e.charCodeAt(r)]<<2|s[e.charCodeAt(r+1)]>>4,c[d++]=255&t);1===l&&(t=s[e.charCodeAt(r)]<<10|s[e.charCodeAt(r+1)]<<4|s[e.charCodeAt(r+2)]>>2,c[d++]=t>>8&255,c[d++]=255&t);return c},t.fromByteArray=function(e){for(var t,s=e.length,n=s%3,a=[],i=16383,o=0,l=s-n;o<l;o+=i)a.push(c(e,o,o+i>l?l:o+i));1===n?(t=e[s-1],a.push(r[t>>2]+r[t<<4&63]+"==")):2===n&&(t=(e[s-2]<<8)+e[s-1],a.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"="));return a.join("")};for(var r=[],s=[],n="undefined"!==typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0;i<64;++i)r[i]=a[i],s[a.charCodeAt(i)]=i;function o(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function l(e){return r[e>>18&63]+r[e>>12&63]+r[e>>6&63]+r[63&e]}function c(e,t,r){for(var s,n=[],a=t;a<r;a+=3)s=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),n.push(l(s));return n.join("")}s["-".charCodeAt(0)]=62,s["_".charCodeAt(0)]=63},579:(e,t,r)=>{"use strict";e.exports=r(153)},611:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}}t.default=r},630:(e,t,r)=>{"use strict";r.r(t),r.d(t,{Headers:()=>i,Request:()=>o,Response:()=>l,default:()=>a,fetch:()=>n});var s=function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof r.g)return r.g;throw new Error("unable to locate global object")}();const n=s.fetch,a=s.fetch.bind(s),i=s.Headers,o=s.Request,l=s.Response},730:(e,t,r)=>{"use strict";var s=r(43),n=r(853);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(o[e]=t,e=0;e<t.length;e++)i.add(t[e])}var d=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),u=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h={},p={};function f(e,t,r,s,n,a,i){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=s,this.attributeNamespace=n,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=i}var x={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){x[e]=new f(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];x[t]=new f(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){x[e]=new f(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){x[e]=new f(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){x[e]=new f(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){x[e]=new f(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){x[e]=new f(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){x[e]=new f(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){x[e]=new f(e,5,!1,e.toLowerCase(),null,!1,!1)});var g=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function b(e,t,r,s){var n=x.hasOwnProperty(t)?x[t]:null;(null!==n?0!==n.type:s||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,r,s){if(null===t||"undefined"===typeof t||function(e,t,r,s){if(null!==r&&0===r.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!s&&(null!==r?!r.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,r,s))return!0;if(s)return!1;if(null!==r)switch(r.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,r,n,s)&&(r=null),s||null===n?function(e){return!!u.call(p,e)||!u.call(h,e)&&(m.test(e)?p[e]=!0:(h[e]=!0,!1))}(t)&&(null===r?e.removeAttribute(t):e.setAttribute(t,""+r)):n.mustUseProperty?e[n.propertyName]=null===r?3!==n.type&&"":r:(t=n.attributeName,s=n.attributeNamespace,null===r?e.removeAttribute(t):(r=3===(n=n.type)||4===n&&!0===r?"":""+r,s?e.setAttributeNS(s,t,r):e.setAttribute(t,r))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(g,v);x[t]=new f(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(g,v);x[t]=new f(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(g,v);x[t]=new f(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){x[e]=new f(e,1,!1,e.toLowerCase(),null,!1,!1)}),x.xlinkHref=new f("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){x[e]=new f(e,1,!1,e.toLowerCase(),null,!0,!0)});var y=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,j=Symbol.for("react.element"),w=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),_=Symbol.for("react.provider"),E=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),T=Symbol.for("react.memo"),I=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var R=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var D,z=Object.assign;function M(e){if(void 0===D)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);D=t&&t[1]||""}return"\n"+D+e}var F=!1;function U(e,t){if(!e||F)return"";F=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var s=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){s=c}e.call(t.prototype)}else{try{throw Error()}catch(c){s=c}e()}}catch(c){if(c&&s&&"string"===typeof c.stack){for(var n=c.stack.split("\n"),a=s.stack.split("\n"),i=n.length-1,o=a.length-1;1<=i&&0<=o&&n[i]!==a[o];)o--;for(;1<=i&&0<=o;i--,o--)if(n[i]!==a[o]){if(1!==i||1!==o)do{if(i--,0>--o||n[i]!==a[o]){var l="\n"+n[i].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=i&&0<=o);break}}}finally{F=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?M(e):""}function B(e){switch(e.tag){case 5:return M(e.type);case 16:return M("Lazy");case 13:return M("Suspense");case 19:return M("SuspenseList");case 0:case 2:case 15:return e=U(e.type,!1);case 11:return e=U(e.type.render,!1);case 1:return e=U(e.type,!0);default:return""}}function V(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case N:return"Fragment";case w:return"Portal";case k:return"Profiler";case S:return"StrictMode";case P:return"Suspense";case A:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case E:return(e.displayName||"Context")+".Consumer";case _:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case T:return null!==(t=e.displayName||null)?t:V(e.type)||"Memo";case I:t=e._payload,e=e._init;try{return V(e(t))}catch(r){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return V(t);case 8:return t===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function W(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function G(e){e._valueTracker||(e._valueTracker=function(e){var t=W(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof r&&"function"===typeof r.get&&"function"===typeof r.set){var n=r.get,a=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return n.call(this)},set:function(e){s=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return s},setValue:function(e){s=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function K(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),s="";return e&&(s=W(e)?e.checked?"true":"false":e.value),(e=s)!==r&&(t.setValue(e),!0)}function J(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Z(e,t){var r=t.checked;return z({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=r?r:e._wrapperState.initialChecked})}function $(e,t){var r=null==t.defaultValue?"":t.defaultValue,s=null!=t.checked?t.checked:t.defaultChecked;r=H(null!=t.value?t.value:r),e._wrapperState={initialChecked:s,initialValue:r,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Q(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function Y(e,t){Q(e,t);var r=H(t.value),s=t.type;if(null!=r)"number"===s?(0===r&&""===e.value||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if("submit"===s||"reset"===s)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,r):t.hasOwnProperty("defaultValue")&&ee(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function X(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!("submit"!==s&&"reset"!==s||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}""!==(r=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==r&&(e.name=r)}function ee(e,t,r){"number"===t&&J(e.ownerDocument)===e||(null==r?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var te=Array.isArray;function re(e,t,r,s){if(e=e.options,t){t={};for(var n=0;n<r.length;n++)t["$"+r[n]]=!0;for(r=0;r<e.length;r++)n=t.hasOwnProperty("$"+e[r].value),e[r].selected!==n&&(e[r].selected=n),n&&s&&(e[r].defaultSelected=!0)}else{for(r=""+H(r),t=null,n=0;n<e.length;n++){if(e[n].value===r)return e[n].selected=!0,void(s&&(e[n].defaultSelected=!0));null!==t||e[n].disabled||(t=e[n])}null!==t&&(t.selected=!0)}}function se(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return z({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ne(e,t){var r=t.value;if(null==r){if(r=t.children,t=t.defaultValue,null!=r){if(null!=t)throw Error(a(92));if(te(r)){if(1<r.length)throw Error(a(93));r=r[0]}t=r}null==t&&(t=""),r=t}e._wrapperState={initialValue:H(r)}}function ae(e,t){var r=H(t.value),s=H(t.defaultValue);null!=r&&((r=""+r)!==e.value&&(e.value=r),null==t.defaultValue&&e.defaultValue!==r&&(e.defaultValue=r)),null!=s&&(e.defaultValue=""+s)}function ie(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,de,ue=(de=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,r,s){MSApp.execUnsafeLocalFunction(function(){return de(e,t)})}:de);function me(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&3===r.nodeType)return void(r.nodeValue=t)}e.textContent=t}var he={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function fe(e,t,r){return null==t||"boolean"===typeof t||""===t?"":r||"number"!==typeof t||0===t||he.hasOwnProperty(e)&&he[e]?(""+t).trim():t+"px"}function xe(e,t){for(var r in e=e.style,t)if(t.hasOwnProperty(r)){var s=0===r.indexOf("--"),n=fe(r,t[r],s);"float"===r&&(r="cssFloat"),s?e.setProperty(r,n):e[r]=n}}Object.keys(he).forEach(function(e){pe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),he[t]=he[e]})});var ge=z({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(ge[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ye=null;function je(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var we=null,Ne=null,Se=null;function ke(e){if(e=bn(e)){if("function"!==typeof we)throw Error(a(280));var t=e.stateNode;t&&(t=jn(t),we(e.stateNode,e.type,t))}}function _e(e){Ne?Se?Se.push(e):Se=[e]:Ne=e}function Ee(){if(Ne){var e=Ne,t=Se;if(Se=Ne=null,ke(e),t)for(e=0;e<t.length;e++)ke(t[e])}}function Ce(e,t){return e(t)}function Pe(){}var Ae=!1;function Te(e,t,r){if(Ae)return e(t,r);Ae=!0;try{return Ce(e,t,r)}finally{Ae=!1,(null!==Ne||null!==Se)&&(Pe(),Ee())}}function Ie(e,t){var r=e.stateNode;if(null===r)return null;var s=jn(r);if(null===s)return null;r=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(s=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!s;break e;default:e=!1}if(e)return null;if(r&&"function"!==typeof r)throw Error(a(231,t,typeof r));return r}var Re=!1;if(d)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){Re=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(de){Re=!1}function Le(e,t,r,s,n,a,i,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(r,c)}catch(d){this.onError(d)}}var De=!1,ze=null,Me=!1,Fe=null,Ue={onError:function(e){De=!0,ze=e}};function Be(e,t,r,s,n,a,i,o,l){De=!1,ze=null,Le.apply(Ue,arguments)}function Ve(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(r=t.return),e=t.return}while(e)}return 3===t.tag?r:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function He(e){if(Ve(e)!==e)throw Error(a(188))}function We(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ve(e)))throw Error(a(188));return t!==e?null:e}for(var r=e,s=t;;){var n=r.return;if(null===n)break;var i=n.alternate;if(null===i){if(null!==(s=n.return)){r=s;continue}break}if(n.child===i.child){for(i=n.child;i;){if(i===r)return He(n),e;if(i===s)return He(n),t;i=i.sibling}throw Error(a(188))}if(r.return!==s.return)r=n,s=i;else{for(var o=!1,l=n.child;l;){if(l===r){o=!0,r=n,s=i;break}if(l===s){o=!0,s=n,r=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===r){o=!0,r=i,s=n;break}if(l===s){o=!0,s=i,r=n;break}l=l.sibling}if(!o)throw Error(a(189))}}if(r.alternate!==s)throw Error(a(190))}if(3!==r.tag)throw Error(a(188));return r.stateNode.current===r?e:t}(e))?Ge(e):null}function Ge(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ge(e);if(null!==t)return t;e=e.sibling}return null}var Ke=n.unstable_scheduleCallback,Je=n.unstable_cancelCallback,Ze=n.unstable_shouldYield,$e=n.unstable_requestPaint,Qe=n.unstable_now,Ye=n.unstable_getCurrentPriorityLevel,Xe=n.unstable_ImmediatePriority,et=n.unstable_UserBlockingPriority,tt=n.unstable_NormalPriority,rt=n.unstable_LowPriority,st=n.unstable_IdlePriority,nt=null,at=null;var it=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ot(e)/lt|0)|0},ot=Math.log,lt=Math.LN2;var ct=64,dt=4194304;function ut(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function mt(e,t){var r=e.pendingLanes;if(0===r)return 0;var s=0,n=e.suspendedLanes,a=e.pingedLanes,i=268435455&r;if(0!==i){var o=i&~n;0!==o?s=ut(o):0!==(a&=i)&&(s=ut(a))}else 0!==(i=r&~n)?s=ut(i):0!==a&&(s=ut(a));if(0===s)return 0;if(0!==t&&t!==s&&0===(t&n)&&((n=s&-s)>=(a=t&-t)||16===n&&0!==(4194240&a)))return t;if(0!==(4&s)&&(s|=16&r),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=s;0<t;)n=1<<(r=31-it(t)),s|=e[r],t&=~n;return s}function ht(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function ft(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function xt(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function gt(e,t,r){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-it(t)]=r}function vt(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var s=31-it(r),n=1<<s;n&t|e[s]&t&&(e[s]|=t),r&=~n}}var bt=0;function yt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var jt,wt,Nt,St,kt,_t=!1,Et=[],Ct=null,Pt=null,At=null,Tt=new Map,It=new Map,Rt=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":Pt=null;break;case"mouseover":case"mouseout":At=null;break;case"pointerover":case"pointerout":Tt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":It.delete(t.pointerId)}}function Dt(e,t,r,s,n,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:r,eventSystemFlags:s,nativeEvent:a,targetContainers:[n]},null!==t&&(null!==(t=bn(t))&&wt(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,null!==n&&-1===t.indexOf(n)&&t.push(n),e)}function zt(e){var t=vn(e.target);if(null!==t){var r=Ve(t);if(null!==r)if(13===(t=r.tag)){if(null!==(t=qe(r)))return e.blockedOn=t,void kt(e.priority,function(){Nt(r)})}else if(3===t&&r.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===r.tag?r.stateNode.containerInfo:null)}e.blockedOn=null}function Mt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var r=Zt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==r)return null!==(t=bn(r))&&wt(t),e.blockedOn=r,!1;var s=new(r=e.nativeEvent).constructor(r.type,r);ye=s,r.target.dispatchEvent(s),ye=null,t.shift()}return!0}function Ft(e,t,r){Mt(e)&&r.delete(t)}function Ut(){_t=!1,null!==Ct&&Mt(Ct)&&(Ct=null),null!==Pt&&Mt(Pt)&&(Pt=null),null!==At&&Mt(At)&&(At=null),Tt.forEach(Ft),It.forEach(Ft)}function Bt(e,t){e.blockedOn===t&&(e.blockedOn=null,_t||(_t=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,Ut)))}function Vt(e){function t(t){return Bt(t,e)}if(0<Et.length){Bt(Et[0],e);for(var r=1;r<Et.length;r++){var s=Et[r];s.blockedOn===e&&(s.blockedOn=null)}}for(null!==Ct&&Bt(Ct,e),null!==Pt&&Bt(Pt,e),null!==At&&Bt(At,e),Tt.forEach(t),It.forEach(t),r=0;r<Rt.length;r++)(s=Rt[r]).blockedOn===e&&(s.blockedOn=null);for(;0<Rt.length&&null===(r=Rt[0]).blockedOn;)zt(r),null===r.blockedOn&&Rt.shift()}var qt=y.ReactCurrentBatchConfig,Ht=!0;function Wt(e,t,r,s){var n=bt,a=qt.transition;qt.transition=null;try{bt=1,Kt(e,t,r,s)}finally{bt=n,qt.transition=a}}function Gt(e,t,r,s){var n=bt,a=qt.transition;qt.transition=null;try{bt=4,Kt(e,t,r,s)}finally{bt=n,qt.transition=a}}function Kt(e,t,r,s){if(Ht){var n=Zt(e,t,r,s);if(null===n)qs(e,t,s,Jt,r),Lt(e,s);else if(function(e,t,r,s,n){switch(t){case"focusin":return Ct=Dt(Ct,e,t,r,s,n),!0;case"dragenter":return Pt=Dt(Pt,e,t,r,s,n),!0;case"mouseover":return At=Dt(At,e,t,r,s,n),!0;case"pointerover":var a=n.pointerId;return Tt.set(a,Dt(Tt.get(a)||null,e,t,r,s,n)),!0;case"gotpointercapture":return a=n.pointerId,It.set(a,Dt(It.get(a)||null,e,t,r,s,n)),!0}return!1}(n,e,t,r,s))s.stopPropagation();else if(Lt(e,s),4&t&&-1<Ot.indexOf(e)){for(;null!==n;){var a=bn(n);if(null!==a&&jt(a),null===(a=Zt(e,t,r,s))&&qs(e,t,s,Jt,r),a===n)break;n=a}null!==n&&s.stopPropagation()}else qs(e,t,s,null,r)}}var Jt=null;function Zt(e,t,r,s){if(Jt=null,null!==(e=vn(e=je(s))))if(null===(t=Ve(e)))e=null;else if(13===(r=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===r){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Jt=e,null}function $t(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ye()){case Xe:return 1;case et:return 4;case tt:case rt:return 16;case st:return 536870912;default:return 16}default:return 16}}var Qt=null,Yt=null,Xt=null;function er(){if(Xt)return Xt;var e,t,r=Yt,s=r.length,n="value"in Qt?Qt.value:Qt.textContent,a=n.length;for(e=0;e<s&&r[e]===n[e];e++);var i=s-e;for(t=1;t<=i&&r[s-t]===n[a-t];t++);return Xt=n.slice(e,1<t?1-t:void 0)}function tr(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function rr(){return!0}function sr(){return!1}function nr(e){function t(t,r,s,n,a){for(var i in this._reactName=t,this._targetInst=s,this.type=r,this.nativeEvent=n,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(i)&&(t=e[i],this[i]=t?t(n):n[i]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?rr:sr,this.isPropagationStopped=sr,this}return z(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=rr)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=rr)},persist:function(){},isPersistent:rr}),t}var ar,ir,or,lr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cr=nr(lr),dr=z({},lr,{view:0,detail:0}),ur=nr(dr),mr=z({},dr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sr,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==or&&(or&&"mousemove"===e.type?(ar=e.screenX-or.screenX,ir=e.screenY-or.screenY):ir=ar=0,or=e),ar)},movementY:function(e){return"movementY"in e?e.movementY:ir}}),hr=nr(mr),pr=nr(z({},mr,{dataTransfer:0})),fr=nr(z({},dr,{relatedTarget:0})),xr=nr(z({},lr,{animationName:0,elapsedTime:0,pseudoElement:0})),gr=z({},lr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),vr=nr(gr),br=nr(z({},lr,{data:0})),yr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},jr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Nr(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=wr[e])&&!!t[e]}function Sr(){return Nr}var kr=z({},dr,{key:function(e){if(e.key){var t=yr[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tr(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?jr[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sr,charCode:function(e){return"keypress"===e.type?tr(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tr(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),_r=nr(kr),Er=nr(z({},mr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Cr=nr(z({},dr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sr})),Pr=nr(z({},lr,{propertyName:0,elapsedTime:0,pseudoElement:0})),Ar=z({},mr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Tr=nr(Ar),Ir=[9,13,27,32],Rr=d&&"CompositionEvent"in window,Or=null;d&&"documentMode"in document&&(Or=document.documentMode);var Lr=d&&"TextEvent"in window&&!Or,Dr=d&&(!Rr||Or&&8<Or&&11>=Or),zr=String.fromCharCode(32),Mr=!1;function Fr(e,t){switch(e){case"keyup":return-1!==Ir.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ur(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Br=!1;var Vr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Vr[e.type]:"textarea"===t}function Hr(e,t,r,s){_e(s),0<(t=Ws(t,"onChange")).length&&(r=new cr("onChange","change",null,r,s),e.push({event:r,listeners:t}))}var Wr=null,Gr=null;function Kr(e){zs(e,0)}function Jr(e){if(K(yn(e)))return e}function Zr(e,t){if("change"===e)return t}var $r=!1;if(d){var Qr;if(d){var Yr="oninput"in document;if(!Yr){var Xr=document.createElement("div");Xr.setAttribute("oninput","return;"),Yr="function"===typeof Xr.oninput}Qr=Yr}else Qr=!1;$r=Qr&&(!document.documentMode||9<document.documentMode)}function es(){Wr&&(Wr.detachEvent("onpropertychange",ts),Gr=Wr=null)}function ts(e){if("value"===e.propertyName&&Jr(Gr)){var t=[];Hr(t,Gr,e,je(e)),Te(Kr,t)}}function rs(e,t,r){"focusin"===e?(es(),Gr=r,(Wr=t).attachEvent("onpropertychange",ts)):"focusout"===e&&es()}function ss(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Jr(Gr)}function ns(e,t){if("click"===e)return Jr(t)}function as(e,t){if("input"===e||"change"===e)return Jr(t)}var is="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function os(e,t){if(is(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var r=Object.keys(e),s=Object.keys(t);if(r.length!==s.length)return!1;for(s=0;s<r.length;s++){var n=r[s];if(!u.call(t,n)||!is(e[n],t[n]))return!1}return!0}function ls(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function cs(e,t){var r,s=ls(e);for(e=0;s;){if(3===s.nodeType){if(r=e+s.textContent.length,e<=t&&r>=t)return{node:s,offset:t-e};e=r}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=ls(s)}}function ds(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?ds(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function us(){for(var e=window,t=J();t instanceof e.HTMLIFrameElement;){try{var r="string"===typeof t.contentWindow.location.href}catch(s){r=!1}if(!r)break;t=J((e=t.contentWindow).document)}return t}function ms(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function hs(e){var t=us(),r=e.focusedElem,s=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&ds(r.ownerDocument.documentElement,r)){if(null!==s&&ms(r))if(t=s.start,void 0===(e=s.end)&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if((e=(t=r.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var n=r.textContent.length,a=Math.min(s.start,n);s=void 0===s.end?a:Math.min(s.end,n),!e.extend&&a>s&&(n=s,s=a,a=n),n=cs(r,a);var i=cs(r,s);n&&i&&(1!==e.rangeCount||e.anchorNode!==n.node||e.anchorOffset!==n.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&((t=t.createRange()).setStart(n.node,n.offset),e.removeAllRanges(),a>s?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}for(t=[],e=r;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof r.focus&&r.focus(),r=0;r<t.length;r++)(e=t[r]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var ps=d&&"documentMode"in document&&11>=document.documentMode,fs=null,xs=null,gs=null,vs=!1;function bs(e,t,r){var s=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;vs||null==fs||fs!==J(s)||("selectionStart"in(s=fs)&&ms(s)?s={start:s.selectionStart,end:s.selectionEnd}:s={anchorNode:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset},gs&&os(gs,s)||(gs=s,0<(s=Ws(xs,"onSelect")).length&&(t=new cr("onSelect","select",null,t,r),e.push({event:t,listeners:s}),t.target=fs)))}function ys(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var js={animationend:ys("Animation","AnimationEnd"),animationiteration:ys("Animation","AnimationIteration"),animationstart:ys("Animation","AnimationStart"),transitionend:ys("Transition","TransitionEnd")},ws={},Ns={};function Ss(e){if(ws[e])return ws[e];if(!js[e])return e;var t,r=js[e];for(t in r)if(r.hasOwnProperty(t)&&t in Ns)return ws[e]=r[t];return e}d&&(Ns=document.createElement("div").style,"AnimationEvent"in window||(delete js.animationend.animation,delete js.animationiteration.animation,delete js.animationstart.animation),"TransitionEvent"in window||delete js.transitionend.transition);var ks=Ss("animationend"),_s=Ss("animationiteration"),Es=Ss("animationstart"),Cs=Ss("transitionend"),Ps=new Map,As="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ts(e,t){Ps.set(e,t),l(t,[e])}for(var Is=0;Is<As.length;Is++){var Rs=As[Is];Ts(Rs.toLowerCase(),"on"+(Rs[0].toUpperCase()+Rs.slice(1)))}Ts(ks,"onAnimationEnd"),Ts(_s,"onAnimationIteration"),Ts(Es,"onAnimationStart"),Ts("dblclick","onDoubleClick"),Ts("focusin","onFocus"),Ts("focusout","onBlur"),Ts(Cs,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Os="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ls=new Set("cancel close invalid load scroll toggle".split(" ").concat(Os));function Ds(e,t,r){var s=e.type||"unknown-event";e.currentTarget=r,function(e,t,r,s,n,i,o,l,c){if(Be.apply(this,arguments),De){if(!De)throw Error(a(198));var d=ze;De=!1,ze=null,Me||(Me=!0,Fe=d)}}(s,t,void 0,e),e.currentTarget=null}function zs(e,t){t=0!==(4&t);for(var r=0;r<e.length;r++){var s=e[r],n=s.event;s=s.listeners;e:{var a=void 0;if(t)for(var i=s.length-1;0<=i;i--){var o=s[i],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==a&&n.isPropagationStopped())break e;Ds(n,o,c),a=l}else for(i=0;i<s.length;i++){if(l=(o=s[i]).instance,c=o.currentTarget,o=o.listener,l!==a&&n.isPropagationStopped())break e;Ds(n,o,c),a=l}}}if(Me)throw e=Fe,Me=!1,Fe=null,e}function Ms(e,t){var r=t[fn];void 0===r&&(r=t[fn]=new Set);var s=e+"__bubble";r.has(s)||(Vs(t,e,2,!1),r.add(s))}function Fs(e,t,r){var s=0;t&&(s|=4),Vs(r,e,s,t)}var Us="_reactListening"+Math.random().toString(36).slice(2);function Bs(e){if(!e[Us]){e[Us]=!0,i.forEach(function(t){"selectionchange"!==t&&(Ls.has(t)||Fs(t,!1,e),Fs(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Us]||(t[Us]=!0,Fs("selectionchange",!1,t))}}function Vs(e,t,r,s){switch($t(t)){case 1:var n=Wt;break;case 4:n=Gt;break;default:n=Kt}r=n.bind(null,t,r,e),n=void 0,!Re||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(n=!0),s?void 0!==n?e.addEventListener(t,r,{capture:!0,passive:n}):e.addEventListener(t,r,!0):void 0!==n?e.addEventListener(t,r,{passive:n}):e.addEventListener(t,r,!1)}function qs(e,t,r,s,n){var a=s;if(0===(1&t)&&0===(2&t)&&null!==s)e:for(;;){if(null===s)return;var i=s.tag;if(3===i||4===i){var o=s.stateNode.containerInfo;if(o===n||8===o.nodeType&&o.parentNode===n)break;if(4===i)for(i=s.return;null!==i;){var l=i.tag;if((3===l||4===l)&&((l=i.stateNode.containerInfo)===n||8===l.nodeType&&l.parentNode===n))return;i=i.return}for(;null!==o;){if(null===(i=vn(o)))return;if(5===(l=i.tag)||6===l){s=a=i;continue e}o=o.parentNode}}s=s.return}Te(function(){var s=a,n=je(r),i=[];e:{var o=Ps.get(e);if(void 0!==o){var l=cr,c=e;switch(e){case"keypress":if(0===tr(r))break e;case"keydown":case"keyup":l=_r;break;case"focusin":c="focus",l=fr;break;case"focusout":c="blur",l=fr;break;case"beforeblur":case"afterblur":l=fr;break;case"click":if(2===r.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=hr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=pr;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Cr;break;case ks:case _s:case Es:l=xr;break;case Cs:l=Pr;break;case"scroll":l=ur;break;case"wheel":l=Tr;break;case"copy":case"cut":case"paste":l=vr;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Er}var d=0!==(4&t),u=!d&&"scroll"===e,m=d?null!==o?o+"Capture":null:o;d=[];for(var h,p=s;null!==p;){var f=(h=p).stateNode;if(5===h.tag&&null!==f&&(h=f,null!==m&&(null!=(f=Ie(p,m))&&d.push(Hs(p,f,h)))),u)break;p=p.return}0<d.length&&(o=new l(o,c,null,r,n),i.push({event:o,listeners:d}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||r===ye||!(c=r.relatedTarget||r.fromElement)||!vn(c)&&!c[pn])&&(l||o)&&(o=n.window===n?n:(o=n.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=s,null!==(c=(c=r.relatedTarget||r.toElement)?vn(c):null)&&(c!==(u=Ve(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=s),l!==c)){if(d=hr,f="onMouseLeave",m="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(d=Er,f="onPointerLeave",m="onPointerEnter",p="pointer"),u=null==l?o:yn(l),h=null==c?o:yn(c),(o=new d(f,p+"leave",l,r,n)).target=u,o.relatedTarget=h,f=null,vn(n)===s&&((d=new d(m,p+"enter",c,r,n)).target=h,d.relatedTarget=u,f=d),u=f,l&&c)e:{for(m=c,p=0,h=d=l;h;h=Gs(h))p++;for(h=0,f=m;f;f=Gs(f))h++;for(;0<p-h;)d=Gs(d),p--;for(;0<h-p;)m=Gs(m),h--;for(;p--;){if(d===m||null!==m&&d===m.alternate)break e;d=Gs(d),m=Gs(m)}d=null}else d=null;null!==l&&Ks(i,o,l,d,!1),null!==c&&null!==u&&Ks(i,u,c,d,!0)}if("select"===(l=(o=s?yn(s):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var x=Zr;else if(qr(o))if($r)x=as;else{x=ss;var g=rs}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(x=ns);switch(x&&(x=x(e,s))?Hr(i,x,r,n):(g&&g(e,o,s),"focusout"===e&&(g=o._wrapperState)&&g.controlled&&"number"===o.type&&ee(o,"number",o.value)),g=s?yn(s):window,e){case"focusin":(qr(g)||"true"===g.contentEditable)&&(fs=g,xs=s,gs=null);break;case"focusout":gs=xs=fs=null;break;case"mousedown":vs=!0;break;case"contextmenu":case"mouseup":case"dragend":vs=!1,bs(i,r,n);break;case"selectionchange":if(ps)break;case"keydown":case"keyup":bs(i,r,n)}var v;if(Rr)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Br?Fr(e,r)&&(b="onCompositionEnd"):"keydown"===e&&229===r.keyCode&&(b="onCompositionStart");b&&(Dr&&"ko"!==r.locale&&(Br||"onCompositionStart"!==b?"onCompositionEnd"===b&&Br&&(v=er()):(Yt="value"in(Qt=n)?Qt.value:Qt.textContent,Br=!0)),0<(g=Ws(s,b)).length&&(b=new br(b,e,null,r,n),i.push({event:b,listeners:g}),v?b.data=v:null!==(v=Ur(r))&&(b.data=v))),(v=Lr?function(e,t){switch(e){case"compositionend":return Ur(t);case"keypress":return 32!==t.which?null:(Mr=!0,zr);case"textInput":return(e=t.data)===zr&&Mr?null:e;default:return null}}(e,r):function(e,t){if(Br)return"compositionend"===e||!Rr&&Fr(e,t)?(e=er(),Xt=Yt=Qt=null,Br=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Dr&&"ko"!==t.locale?null:t.data}}(e,r))&&(0<(s=Ws(s,"onBeforeInput")).length&&(n=new br("onBeforeInput","beforeinput",null,r,n),i.push({event:n,listeners:s}),n.data=v))}zs(i,t)})}function Hs(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Ws(e,t){for(var r=t+"Capture",s=[];null!==e;){var n=e,a=n.stateNode;5===n.tag&&null!==a&&(n=a,null!=(a=Ie(e,r))&&s.unshift(Hs(e,a,n)),null!=(a=Ie(e,t))&&s.push(Hs(e,a,n))),e=e.return}return s}function Gs(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Ks(e,t,r,s,n){for(var a=t._reactName,i=[];null!==r&&r!==s;){var o=r,l=o.alternate,c=o.stateNode;if(null!==l&&l===s)break;5===o.tag&&null!==c&&(o=c,n?null!=(l=Ie(r,a))&&i.unshift(Hs(r,l,o)):n||null!=(l=Ie(r,a))&&i.push(Hs(r,l,o))),r=r.return}0!==i.length&&e.push({event:t,listeners:i})}var Js=/\r\n?/g,Zs=/\u0000|\uFFFD/g;function $s(e){return("string"===typeof e?e:""+e).replace(Js,"\n").replace(Zs,"")}function Qs(e,t,r){if(t=$s(t),$s(e)!==t&&r)throw Error(a(425))}function Ys(){}var Xs=null,en=null;function tn(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var rn="function"===typeof setTimeout?setTimeout:void 0,sn="function"===typeof clearTimeout?clearTimeout:void 0,nn="function"===typeof Promise?Promise:void 0,an="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof nn?function(e){return nn.resolve(null).then(e).catch(on)}:rn;function on(e){setTimeout(function(){throw e})}function ln(e,t){var r=t,s=0;do{var n=r.nextSibling;if(e.removeChild(r),n&&8===n.nodeType)if("/$"===(r=n.data)){if(0===s)return e.removeChild(n),void Vt(t);s--}else"$"!==r&&"$?"!==r&&"$!"!==r||s++;r=n}while(r);Vt(t)}function cn(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function dn(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var r=e.data;if("$"===r||"$!"===r||"$?"===r){if(0===t)return e;t--}else"/$"===r&&t++}e=e.previousSibling}return null}var un=Math.random().toString(36).slice(2),mn="__reactFiber$"+un,hn="__reactProps$"+un,pn="__reactContainer$"+un,fn="__reactEvents$"+un,xn="__reactListeners$"+un,gn="__reactHandles$"+un;function vn(e){var t=e[mn];if(t)return t;for(var r=e.parentNode;r;){if(t=r[pn]||r[mn]){if(r=t.alternate,null!==t.child||null!==r&&null!==r.child)for(e=dn(e);null!==e;){if(r=e[mn])return r;e=dn(e)}return t}r=(e=r).parentNode}return null}function bn(e){return!(e=e[mn]||e[pn])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function yn(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function jn(e){return e[hn]||null}var wn=[],Nn=-1;function Sn(e){return{current:e}}function kn(e){0>Nn||(e.current=wn[Nn],wn[Nn]=null,Nn--)}function _n(e,t){Nn++,wn[Nn]=e.current,e.current=t}var En={},Cn=Sn(En),Pn=Sn(!1),An=En;function Tn(e,t){var r=e.type.contextTypes;if(!r)return En;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var n,a={};for(n in r)a[n]=t[n];return s&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function In(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Rn(){kn(Pn),kn(Cn)}function On(e,t,r){if(Cn.current!==En)throw Error(a(168));_n(Cn,t),_n(Pn,r)}function Ln(e,t,r){var s=e.stateNode;if(t=t.childContextTypes,"function"!==typeof s.getChildContext)return r;for(var n in s=s.getChildContext())if(!(n in t))throw Error(a(108,q(e)||"Unknown",n));return z({},r,s)}function Dn(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||En,An=Cn.current,_n(Cn,e),_n(Pn,Pn.current),!0}function zn(e,t,r){var s=e.stateNode;if(!s)throw Error(a(169));r?(e=Ln(e,t,An),s.__reactInternalMemoizedMergedChildContext=e,kn(Pn),kn(Cn),_n(Cn,e)):kn(Pn),_n(Pn,r)}var Mn=null,Fn=!1,Un=!1;function Bn(e){null===Mn?Mn=[e]:Mn.push(e)}function Vn(){if(!Un&&null!==Mn){Un=!0;var e=0,t=bt;try{var r=Mn;for(bt=1;e<r.length;e++){var s=r[e];do{s=s(!0)}while(null!==s)}Mn=null,Fn=!1}catch(n){throw null!==Mn&&(Mn=Mn.slice(e+1)),Ke(Xe,Vn),n}finally{bt=t,Un=!1}}return null}var qn=[],Hn=0,Wn=null,Gn=0,Kn=[],Jn=0,Zn=null,$n=1,Qn="";function Yn(e,t){qn[Hn++]=Gn,qn[Hn++]=Wn,Wn=e,Gn=t}function Xn(e,t,r){Kn[Jn++]=$n,Kn[Jn++]=Qn,Kn[Jn++]=Zn,Zn=e;var s=$n;e=Qn;var n=32-it(s)-1;s&=~(1<<n),r+=1;var a=32-it(t)+n;if(30<a){var i=n-n%5;a=(s&(1<<i)-1).toString(32),s>>=i,n-=i,$n=1<<32-it(t)+n|r<<n|s,Qn=a+e}else $n=1<<a|r<<n|s,Qn=e}function ea(e){null!==e.return&&(Yn(e,1),Xn(e,1,0))}function ta(e){for(;e===Wn;)Wn=qn[--Hn],qn[Hn]=null,Gn=qn[--Hn],qn[Hn]=null;for(;e===Zn;)Zn=Kn[--Jn],Kn[Jn]=null,Qn=Kn[--Jn],Kn[Jn]=null,$n=Kn[--Jn],Kn[Jn]=null}var ra=null,sa=null,na=!1,aa=null;function ia(e,t){var r=Tc(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,null===(t=e.deletions)?(e.deletions=[r],e.flags|=16):t.push(r)}function oa(e,t){switch(e.tag){case 5:var r=e.type;return null!==(t=1!==t.nodeType||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ra=e,sa=cn(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ra=e,sa=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(r=null!==Zn?{id:$n,overflow:Qn}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},(r=Tc(18,null,null,0)).stateNode=t,r.return=e,e.child=r,ra=e,sa=null,!0);default:return!1}}function la(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ca(e){if(na){var t=sa;if(t){var r=t;if(!oa(e,t)){if(la(e))throw Error(a(418));t=cn(r.nextSibling);var s=ra;t&&oa(e,t)?ia(s,r):(e.flags=-4097&e.flags|2,na=!1,ra=e)}}else{if(la(e))throw Error(a(418));e.flags=-4097&e.flags|2,na=!1,ra=e}}}function da(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ra=e}function ua(e){if(e!==ra)return!1;if(!na)return da(e),na=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!tn(e.type,e.memoizedProps)),t&&(t=sa)){if(la(e))throw ma(),Error(a(418));for(;t;)ia(e,t),t=cn(t.nextSibling)}if(da(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var r=e.data;if("/$"===r){if(0===t){sa=cn(e.nextSibling);break e}t--}else"$"!==r&&"$!"!==r&&"$?"!==r||t++}e=e.nextSibling}sa=null}}else sa=ra?cn(e.stateNode.nextSibling):null;return!0}function ma(){for(var e=sa;e;)e=cn(e.nextSibling)}function ha(){sa=ra=null,na=!1}function pa(e){null===aa?aa=[e]:aa.push(e)}var fa=y.ReactCurrentBatchConfig;function xa(e,t,r){if(null!==(e=r.ref)&&"function"!==typeof e&&"object"!==typeof e){if(r._owner){if(r=r._owner){if(1!==r.tag)throw Error(a(309));var s=r.stateNode}if(!s)throw Error(a(147,e));var n=s,i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=n.refs;null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!==typeof e)throw Error(a(284));if(!r._owner)throw Error(a(290,e))}return e}function ga(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function va(e){return(0,e._init)(e._payload)}function ba(e){function t(t,r){if(e){var s=t.deletions;null===s?(t.deletions=[r],t.flags|=16):s.push(r)}}function r(r,s){if(!e)return null;for(;null!==s;)t(r,s),s=s.sibling;return null}function s(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function n(e,t){return(e=Rc(e,t)).index=0,e.sibling=null,e}function i(t,r,s){return t.index=s,e?null!==(s=t.alternate)?(s=s.index)<r?(t.flags|=2,r):s:(t.flags|=2,r):(t.flags|=1048576,r)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,r,s){return null===t||6!==t.tag?((t=zc(r,e.mode,s)).return=e,t):((t=n(t,r)).return=e,t)}function c(e,t,r,s){var a=r.type;return a===N?u(e,t,r.props.children,s,r.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===I&&va(a)===t.type)?((s=n(t,r.props)).ref=xa(e,t,r),s.return=e,s):((s=Oc(r.type,r.key,r.props,null,e.mode,s)).ref=xa(e,t,r),s.return=e,s)}function d(e,t,r,s){return null===t||4!==t.tag||t.stateNode.containerInfo!==r.containerInfo||t.stateNode.implementation!==r.implementation?((t=Mc(r,e.mode,s)).return=e,t):((t=n(t,r.children||[])).return=e,t)}function u(e,t,r,s,a){return null===t||7!==t.tag?((t=Lc(r,e.mode,s,a)).return=e,t):((t=n(t,r)).return=e,t)}function m(e,t,r){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=zc(""+t,e.mode,r)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case j:return(r=Oc(t.type,t.key,t.props,null,e.mode,r)).ref=xa(e,null,t),r.return=e,r;case w:return(t=Mc(t,e.mode,r)).return=e,t;case I:return m(e,(0,t._init)(t._payload),r)}if(te(t)||L(t))return(t=Lc(t,e.mode,r,null)).return=e,t;ga(e,t)}return null}function h(e,t,r,s){var n=null!==t?t.key:null;if("string"===typeof r&&""!==r||"number"===typeof r)return null!==n?null:l(e,t,""+r,s);if("object"===typeof r&&null!==r){switch(r.$$typeof){case j:return r.key===n?c(e,t,r,s):null;case w:return r.key===n?d(e,t,r,s):null;case I:return h(e,t,(n=r._init)(r._payload),s)}if(te(r)||L(r))return null!==n?null:u(e,t,r,s,null);ga(e,r)}return null}function p(e,t,r,s,n){if("string"===typeof s&&""!==s||"number"===typeof s)return l(t,e=e.get(r)||null,""+s,n);if("object"===typeof s&&null!==s){switch(s.$$typeof){case j:return c(t,e=e.get(null===s.key?r:s.key)||null,s,n);case w:return d(t,e=e.get(null===s.key?r:s.key)||null,s,n);case I:return p(e,t,r,(0,s._init)(s._payload),n)}if(te(s)||L(s))return u(t,e=e.get(r)||null,s,n,null);ga(t,s)}return null}function f(n,a,o,l){for(var c=null,d=null,u=a,f=a=0,x=null;null!==u&&f<o.length;f++){u.index>f?(x=u,u=null):x=u.sibling;var g=h(n,u,o[f],l);if(null===g){null===u&&(u=x);break}e&&u&&null===g.alternate&&t(n,u),a=i(g,a,f),null===d?c=g:d.sibling=g,d=g,u=x}if(f===o.length)return r(n,u),na&&Yn(n,f),c;if(null===u){for(;f<o.length;f++)null!==(u=m(n,o[f],l))&&(a=i(u,a,f),null===d?c=u:d.sibling=u,d=u);return na&&Yn(n,f),c}for(u=s(n,u);f<o.length;f++)null!==(x=p(u,n,f,o[f],l))&&(e&&null!==x.alternate&&u.delete(null===x.key?f:x.key),a=i(x,a,f),null===d?c=x:d.sibling=x,d=x);return e&&u.forEach(function(e){return t(n,e)}),na&&Yn(n,f),c}function x(n,o,l,c){var d=L(l);if("function"!==typeof d)throw Error(a(150));if(null==(l=d.call(l)))throw Error(a(151));for(var u=d=null,f=o,x=o=0,g=null,v=l.next();null!==f&&!v.done;x++,v=l.next()){f.index>x?(g=f,f=null):g=f.sibling;var b=h(n,f,v.value,c);if(null===b){null===f&&(f=g);break}e&&f&&null===b.alternate&&t(n,f),o=i(b,o,x),null===u?d=b:u.sibling=b,u=b,f=g}if(v.done)return r(n,f),na&&Yn(n,x),d;if(null===f){for(;!v.done;x++,v=l.next())null!==(v=m(n,v.value,c))&&(o=i(v,o,x),null===u?d=v:u.sibling=v,u=v);return na&&Yn(n,x),d}for(f=s(n,f);!v.done;x++,v=l.next())null!==(v=p(f,n,x,v.value,c))&&(e&&null!==v.alternate&&f.delete(null===v.key?x:v.key),o=i(v,o,x),null===u?d=v:u.sibling=v,u=v);return e&&f.forEach(function(e){return t(n,e)}),na&&Yn(n,x),d}return function e(s,a,i,l){if("object"===typeof i&&null!==i&&i.type===N&&null===i.key&&(i=i.props.children),"object"===typeof i&&null!==i){switch(i.$$typeof){case j:e:{for(var c=i.key,d=a;null!==d;){if(d.key===c){if((c=i.type)===N){if(7===d.tag){r(s,d.sibling),(a=n(d,i.props.children)).return=s,s=a;break e}}else if(d.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===I&&va(c)===d.type){r(s,d.sibling),(a=n(d,i.props)).ref=xa(s,d,i),a.return=s,s=a;break e}r(s,d);break}t(s,d),d=d.sibling}i.type===N?((a=Lc(i.props.children,s.mode,l,i.key)).return=s,s=a):((l=Oc(i.type,i.key,i.props,null,s.mode,l)).ref=xa(s,a,i),l.return=s,s=l)}return o(s);case w:e:{for(d=i.key;null!==a;){if(a.key===d){if(4===a.tag&&a.stateNode.containerInfo===i.containerInfo&&a.stateNode.implementation===i.implementation){r(s,a.sibling),(a=n(a,i.children||[])).return=s,s=a;break e}r(s,a);break}t(s,a),a=a.sibling}(a=Mc(i,s.mode,l)).return=s,s=a}return o(s);case I:return e(s,a,(d=i._init)(i._payload),l)}if(te(i))return f(s,a,i,l);if(L(i))return x(s,a,i,l);ga(s,i)}return"string"===typeof i&&""!==i||"number"===typeof i?(i=""+i,null!==a&&6===a.tag?(r(s,a.sibling),(a=n(a,i)).return=s,s=a):(r(s,a),(a=zc(i,s.mode,l)).return=s,s=a),o(s)):r(s,a)}}var ya=ba(!0),ja=ba(!1),wa=Sn(null),Na=null,Sa=null,ka=null;function _a(){ka=Sa=Na=null}function Ea(e){var t=wa.current;kn(wa),e._currentValue=t}function Ca(e,t,r){for(;null!==e;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==s&&(s.childLanes|=t)):null!==s&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===r)break;e=e.return}}function Pa(e,t){Na=e,ka=Sa=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bo=!0),e.firstContext=null)}function Aa(e){var t=e._currentValue;if(ka!==e)if(e={context:e,memoizedValue:t,next:null},null===Sa){if(null===Na)throw Error(a(308));Sa=e,Na.dependencies={lanes:0,firstContext:e}}else Sa=Sa.next=e;return t}var Ta=null;function Ia(e){null===Ta?Ta=[e]:Ta.push(e)}function Ra(e,t,r,s){var n=t.interleaved;return null===n?(r.next=r,Ia(t)):(r.next=n.next,n.next=r),t.interleaved=r,Oa(e,s)}function Oa(e,t){e.lanes|=t;var r=e.alternate;for(null!==r&&(r.lanes|=t),r=e,e=e.return;null!==e;)e.childLanes|=t,null!==(r=e.alternate)&&(r.childLanes|=t),r=e,e=e.return;return 3===r.tag?r.stateNode:null}var La=!1;function Da(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function za(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ma(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Fa(e,t,r){var s=e.updateQueue;if(null===s)return null;if(s=s.shared,0!==(2&Cl)){var n=s.pending;return null===n?t.next=t:(t.next=n.next,n.next=t),s.pending=t,Oa(e,r)}return null===(n=s.interleaved)?(t.next=t,Ia(s)):(t.next=n.next,n.next=t),s.interleaved=t,Oa(e,r)}function Ua(e,t,r){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&r))){var s=t.lanes;r|=s&=e.pendingLanes,t.lanes=r,vt(e,r)}}function Ba(e,t){var r=e.updateQueue,s=e.alternate;if(null!==s&&r===(s=s.updateQueue)){var n=null,a=null;if(null!==(r=r.firstBaseUpdate)){do{var i={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};null===a?n=a=i:a=a.next=i,r=r.next}while(null!==r);null===a?n=a=t:a=a.next=t}else n=a=t;return r={baseState:s.baseState,firstBaseUpdate:n,lastBaseUpdate:a,shared:s.shared,effects:s.effects},void(e.updateQueue=r)}null===(e=r.lastBaseUpdate)?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Va(e,t,r,s){var n=e.updateQueue;La=!1;var a=n.firstBaseUpdate,i=n.lastBaseUpdate,o=n.shared.pending;if(null!==o){n.shared.pending=null;var l=o,c=l.next;l.next=null,null===i?a=c:i.next=c,i=l;var d=e.alternate;null!==d&&((o=(d=d.updateQueue).lastBaseUpdate)!==i&&(null===o?d.firstBaseUpdate=c:o.next=c,d.lastBaseUpdate=l))}if(null!==a){var u=n.baseState;for(i=0,d=c=l=null,o=a;;){var m=o.lane,h=o.eventTime;if((s&m)===m){null!==d&&(d=d.next={eventTime:h,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,f=o;switch(m=t,h=r,f.tag){case 1:if("function"===typeof(p=f.payload)){u=p.call(h,u,m);break e}u=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(m="function"===typeof(p=f.payload)?p.call(h,u,m):p)||void 0===m)break e;u=z({},u,m);break e;case 2:La=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(m=n.effects)?n.effects=[o]:m.push(o))}else h={eventTime:h,lane:m,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===d?(c=d=h,l=u):d=d.next=h,i|=m;if(null===(o=o.next)){if(null===(o=n.shared.pending))break;o=(m=o).next,m.next=null,n.lastBaseUpdate=m,n.shared.pending=null}}if(null===d&&(l=u),n.baseState=l,n.firstBaseUpdate=c,n.lastBaseUpdate=d,null!==(t=n.shared.interleaved)){n=t;do{i|=n.lane,n=n.next}while(n!==t)}else null===a&&(n.shared.lanes=0);Dl|=i,e.lanes=i,e.memoizedState=u}}function qa(e,t,r){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var s=e[t],n=s.callback;if(null!==n){if(s.callback=null,s=r,"function"!==typeof n)throw Error(a(191,n));n.call(s)}}}var Ha={},Wa=Sn(Ha),Ga=Sn(Ha),Ka=Sn(Ha);function Ja(e){if(e===Ha)throw Error(a(174));return e}function Za(e,t){switch(_n(Ka,t),_n(Ga,e),_n(Wa,Ha),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}kn(Wa),_n(Wa,t)}function $a(){kn(Wa),kn(Ga),kn(Ka)}function Qa(e){Ja(Ka.current);var t=Ja(Wa.current),r=le(t,e.type);t!==r&&(_n(Ga,e),_n(Wa,r))}function Ya(e){Ga.current===e&&(kn(Wa),kn(Ga))}var Xa=Sn(0);function ei(e){for(var t=e;null!==t;){if(13===t.tag){var r=t.memoizedState;if(null!==r&&(null===(r=r.dehydrated)||"$?"===r.data||"$!"===r.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ti=[];function ri(){for(var e=0;e<ti.length;e++)ti[e]._workInProgressVersionPrimary=null;ti.length=0}var si=y.ReactCurrentDispatcher,ni=y.ReactCurrentBatchConfig,ai=0,ii=null,oi=null,li=null,ci=!1,di=!1,ui=0,mi=0;function hi(){throw Error(a(321))}function pi(e,t){if(null===t)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!is(e[r],t[r]))return!1;return!0}function fi(e,t,r,s,n,i){if(ai=i,ii=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,si.current=null===e||null===e.memoizedState?Yi:Xi,e=r(s,n),di){i=0;do{if(di=!1,ui=0,25<=i)throw Error(a(301));i+=1,li=oi=null,t.updateQueue=null,si.current=eo,e=r(s,n)}while(di)}if(si.current=Qi,t=null!==oi&&null!==oi.next,ai=0,li=oi=ii=null,ci=!1,t)throw Error(a(300));return e}function xi(){var e=0!==ui;return ui=0,e}function gi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===li?ii.memoizedState=li=e:li=li.next=e,li}function vi(){if(null===oi){var e=ii.alternate;e=null!==e?e.memoizedState:null}else e=oi.next;var t=null===li?ii.memoizedState:li.next;if(null!==t)li=t,oi=e;else{if(null===e)throw Error(a(310));e={memoizedState:(oi=e).memoizedState,baseState:oi.baseState,baseQueue:oi.baseQueue,queue:oi.queue,next:null},null===li?ii.memoizedState=li=e:li=li.next=e}return li}function bi(e,t){return"function"===typeof t?t(e):t}function yi(e){var t=vi(),r=t.queue;if(null===r)throw Error(a(311));r.lastRenderedReducer=e;var s=oi,n=s.baseQueue,i=r.pending;if(null!==i){if(null!==n){var o=n.next;n.next=i.next,i.next=o}s.baseQueue=n=i,r.pending=null}if(null!==n){i=n.next,s=s.baseState;var l=o=null,c=null,d=i;do{var u=d.lane;if((ai&u)===u)null!==c&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),s=d.hasEagerState?d.eagerState:e(s,d.action);else{var m={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};null===c?(l=c=m,o=s):c=c.next=m,ii.lanes|=u,Dl|=u}d=d.next}while(null!==d&&d!==i);null===c?o=s:c.next=l,is(s,t.memoizedState)||(bo=!0),t.memoizedState=s,t.baseState=o,t.baseQueue=c,r.lastRenderedState=s}if(null!==(e=r.interleaved)){n=e;do{i=n.lane,ii.lanes|=i,Dl|=i,n=n.next}while(n!==e)}else null===n&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function ji(e){var t=vi(),r=t.queue;if(null===r)throw Error(a(311));r.lastRenderedReducer=e;var s=r.dispatch,n=r.pending,i=t.memoizedState;if(null!==n){r.pending=null;var o=n=n.next;do{i=e(i,o.action),o=o.next}while(o!==n);is(i,t.memoizedState)||(bo=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),r.lastRenderedState=i}return[i,s]}function wi(){}function Ni(e,t){var r=ii,s=vi(),n=t(),i=!is(s.memoizedState,n);if(i&&(s.memoizedState=n,bo=!0),s=s.queue,Li(_i.bind(null,r,s,e),[e]),s.getSnapshot!==t||i||null!==li&&1&li.memoizedState.tag){if(r.flags|=2048,Ai(9,ki.bind(null,r,s,n,t),void 0,null),null===Pl)throw Error(a(349));0!==(30&ai)||Si(r,t,n)}return n}function Si(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},null===(t=ii.updateQueue)?(t={lastEffect:null,stores:null},ii.updateQueue=t,t.stores=[e]):null===(r=t.stores)?t.stores=[e]:r.push(e)}function ki(e,t,r,s){t.value=r,t.getSnapshot=s,Ei(t)&&Ci(e)}function _i(e,t,r){return r(function(){Ei(t)&&Ci(e)})}function Ei(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!is(e,r)}catch(s){return!0}}function Ci(e){var t=Oa(e,1);null!==t&&rc(t,e,1,-1)}function Pi(e){var t=gi();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bi,lastRenderedState:e},t.queue=e,e=e.dispatch=Ki.bind(null,ii,e),[t.memoizedState,e]}function Ai(e,t,r,s){return e={tag:e,create:t,destroy:r,deps:s,next:null},null===(t=ii.updateQueue)?(t={lastEffect:null,stores:null},ii.updateQueue=t,t.lastEffect=e.next=e):null===(r=t.lastEffect)?t.lastEffect=e.next=e:(s=r.next,r.next=e,e.next=s,t.lastEffect=e),e}function Ti(){return vi().memoizedState}function Ii(e,t,r,s){var n=gi();ii.flags|=e,n.memoizedState=Ai(1|t,r,void 0,void 0===s?null:s)}function Ri(e,t,r,s){var n=vi();s=void 0===s?null:s;var a=void 0;if(null!==oi){var i=oi.memoizedState;if(a=i.destroy,null!==s&&pi(s,i.deps))return void(n.memoizedState=Ai(t,r,a,s))}ii.flags|=e,n.memoizedState=Ai(1|t,r,a,s)}function Oi(e,t){return Ii(8390656,8,e,t)}function Li(e,t){return Ri(2048,8,e,t)}function Di(e,t){return Ri(4,2,e,t)}function zi(e,t){return Ri(4,4,e,t)}function Mi(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Fi(e,t,r){return r=null!==r&&void 0!==r?r.concat([e]):null,Ri(4,4,Mi.bind(null,t,e),r)}function Ui(){}function Bi(e,t){var r=vi();t=void 0===t?null:t;var s=r.memoizedState;return null!==s&&null!==t&&pi(t,s[1])?s[0]:(r.memoizedState=[e,t],e)}function Vi(e,t){var r=vi();t=void 0===t?null:t;var s=r.memoizedState;return null!==s&&null!==t&&pi(t,s[1])?s[0]:(e=e(),r.memoizedState=[e,t],e)}function qi(e,t,r){return 0===(21&ai)?(e.baseState&&(e.baseState=!1,bo=!0),e.memoizedState=r):(is(r,t)||(r=ft(),ii.lanes|=r,Dl|=r,e.baseState=!0),t)}function Hi(e,t){var r=bt;bt=0!==r&&4>r?r:4,e(!0);var s=ni.transition;ni.transition={};try{e(!1),t()}finally{bt=r,ni.transition=s}}function Wi(){return vi().memoizedState}function Gi(e,t,r){var s=tc(e);if(r={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null},Ji(e))Zi(t,r);else if(null!==(r=Ra(e,t,r,s))){rc(r,e,s,ec()),$i(r,t,s)}}function Ki(e,t,r){var s=tc(e),n={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null};if(Ji(e))Zi(t,n);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var i=t.lastRenderedState,o=a(i,r);if(n.hasEagerState=!0,n.eagerState=o,is(o,i)){var l=t.interleaved;return null===l?(n.next=n,Ia(t)):(n.next=l.next,l.next=n),void(t.interleaved=n)}}catch(c){}null!==(r=Ra(e,t,n,s))&&(rc(r,e,s,n=ec()),$i(r,t,s))}}function Ji(e){var t=e.alternate;return e===ii||null!==t&&t===ii}function Zi(e,t){di=ci=!0;var r=e.pending;null===r?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function $i(e,t,r){if(0!==(4194240&r)){var s=t.lanes;r|=s&=e.pendingLanes,t.lanes=r,vt(e,r)}}var Qi={readContext:Aa,useCallback:hi,useContext:hi,useEffect:hi,useImperativeHandle:hi,useInsertionEffect:hi,useLayoutEffect:hi,useMemo:hi,useReducer:hi,useRef:hi,useState:hi,useDebugValue:hi,useDeferredValue:hi,useTransition:hi,useMutableSource:hi,useSyncExternalStore:hi,useId:hi,unstable_isNewReconciler:!1},Yi={readContext:Aa,useCallback:function(e,t){return gi().memoizedState=[e,void 0===t?null:t],e},useContext:Aa,useEffect:Oi,useImperativeHandle:function(e,t,r){return r=null!==r&&void 0!==r?r.concat([e]):null,Ii(4194308,4,Mi.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Ii(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ii(4,2,e,t)},useMemo:function(e,t){var r=gi();return t=void 0===t?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var s=gi();return t=void 0!==r?r(t):t,s.memoizedState=s.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},s.queue=e,e=e.dispatch=Gi.bind(null,ii,e),[s.memoizedState,e]},useRef:function(e){return e={current:e},gi().memoizedState=e},useState:Pi,useDebugValue:Ui,useDeferredValue:function(e){return gi().memoizedState=e},useTransition:function(){var e=Pi(!1),t=e[0];return e=Hi.bind(null,e[1]),gi().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var s=ii,n=gi();if(na){if(void 0===r)throw Error(a(407));r=r()}else{if(r=t(),null===Pl)throw Error(a(349));0!==(30&ai)||Si(s,t,r)}n.memoizedState=r;var i={value:r,getSnapshot:t};return n.queue=i,Oi(_i.bind(null,s,i,e),[e]),s.flags|=2048,Ai(9,ki.bind(null,s,i,r,t),void 0,null),r},useId:function(){var e=gi(),t=Pl.identifierPrefix;if(na){var r=Qn;t=":"+t+"R"+(r=($n&~(1<<32-it($n)-1)).toString(32)+r),0<(r=ui++)&&(t+="H"+r.toString(32)),t+=":"}else t=":"+t+"r"+(r=mi++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Xi={readContext:Aa,useCallback:Bi,useContext:Aa,useEffect:Li,useImperativeHandle:Fi,useInsertionEffect:Di,useLayoutEffect:zi,useMemo:Vi,useReducer:yi,useRef:Ti,useState:function(){return yi(bi)},useDebugValue:Ui,useDeferredValue:function(e){return qi(vi(),oi.memoizedState,e)},useTransition:function(){return[yi(bi)[0],vi().memoizedState]},useMutableSource:wi,useSyncExternalStore:Ni,useId:Wi,unstable_isNewReconciler:!1},eo={readContext:Aa,useCallback:Bi,useContext:Aa,useEffect:Li,useImperativeHandle:Fi,useInsertionEffect:Di,useLayoutEffect:zi,useMemo:Vi,useReducer:ji,useRef:Ti,useState:function(){return ji(bi)},useDebugValue:Ui,useDeferredValue:function(e){var t=vi();return null===oi?t.memoizedState=e:qi(t,oi.memoizedState,e)},useTransition:function(){return[ji(bi)[0],vi().memoizedState]},useMutableSource:wi,useSyncExternalStore:Ni,useId:Wi,unstable_isNewReconciler:!1};function to(e,t){if(e&&e.defaultProps){for(var r in t=z({},t),e=e.defaultProps)void 0===t[r]&&(t[r]=e[r]);return t}return t}function ro(e,t,r,s){r=null===(r=r(s,t=e.memoizedState))||void 0===r?t:z({},t,r),e.memoizedState=r,0===e.lanes&&(e.updateQueue.baseState=r)}var so={isMounted:function(e){return!!(e=e._reactInternals)&&Ve(e)===e},enqueueSetState:function(e,t,r){e=e._reactInternals;var s=ec(),n=tc(e),a=Ma(s,n);a.payload=t,void 0!==r&&null!==r&&(a.callback=r),null!==(t=Fa(e,a,n))&&(rc(t,e,n,s),Ua(t,e,n))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var s=ec(),n=tc(e),a=Ma(s,n);a.tag=1,a.payload=t,void 0!==r&&null!==r&&(a.callback=r),null!==(t=Fa(e,a,n))&&(rc(t,e,n,s),Ua(t,e,n))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=ec(),s=tc(e),n=Ma(r,s);n.tag=2,void 0!==t&&null!==t&&(n.callback=t),null!==(t=Fa(e,n,s))&&(rc(t,e,s,r),Ua(t,e,s))}};function no(e,t,r,s,n,a,i){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(s,a,i):!t.prototype||!t.prototype.isPureReactComponent||(!os(r,s)||!os(n,a))}function ao(e,t,r){var s=!1,n=En,a=t.contextType;return"object"===typeof a&&null!==a?a=Aa(a):(n=In(t)?An:Cn.current,a=(s=null!==(s=t.contextTypes)&&void 0!==s)?Tn(e,n):En),t=new t(r,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=so,e.stateNode=t,t._reactInternals=e,s&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=a),t}function io(e,t,r,s){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(r,s),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(r,s),t.state!==e&&so.enqueueReplaceState(t,t.state,null)}function oo(e,t,r,s){var n=e.stateNode;n.props=r,n.state=e.memoizedState,n.refs={},Da(e);var a=t.contextType;"object"===typeof a&&null!==a?n.context=Aa(a):(a=In(t)?An:Cn.current,n.context=Tn(e,a)),n.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(ro(e,t,a,r),n.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof n.getSnapshotBeforeUpdate||"function"!==typeof n.UNSAFE_componentWillMount&&"function"!==typeof n.componentWillMount||(t=n.state,"function"===typeof n.componentWillMount&&n.componentWillMount(),"function"===typeof n.UNSAFE_componentWillMount&&n.UNSAFE_componentWillMount(),t!==n.state&&so.enqueueReplaceState(n,n.state,null),Va(e,r,n,s),n.state=e.memoizedState),"function"===typeof n.componentDidMount&&(e.flags|=4194308)}function lo(e,t){try{var r="",s=t;do{r+=B(s),s=s.return}while(s);var n=r}catch(a){n="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:n,digest:null}}function co(e,t,r){return{value:e,source:null,stack:null!=r?r:null,digest:null!=t?t:null}}function uo(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var mo="function"===typeof WeakMap?WeakMap:Map;function ho(e,t,r){(r=Ma(-1,r)).tag=3,r.payload={element:null};var s=t.value;return r.callback=function(){Hl||(Hl=!0,Wl=s),uo(0,t)},r}function po(e,t,r){(r=Ma(-1,r)).tag=3;var s=e.type.getDerivedStateFromError;if("function"===typeof s){var n=t.value;r.payload=function(){return s(n)},r.callback=function(){uo(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(r.callback=function(){uo(0,t),"function"!==typeof s&&(null===Gl?Gl=new Set([this]):Gl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),r}function fo(e,t,r){var s=e.pingCache;if(null===s){s=e.pingCache=new mo;var n=new Set;s.set(t,n)}else void 0===(n=s.get(t))&&(n=new Set,s.set(t,n));n.has(r)||(n.add(r),e=kc.bind(null,e,t,r),t.then(e,e))}function xo(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function go(e,t,r,s,n){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,1===r.tag&&(null===r.alternate?r.tag=17:((t=Ma(-1,1)).tag=2,Fa(r,t,1))),r.lanes|=1),e):(e.flags|=65536,e.lanes=n,e)}var vo=y.ReactCurrentOwner,bo=!1;function yo(e,t,r,s){t.child=null===e?ja(t,null,r,s):ya(t,e.child,r,s)}function jo(e,t,r,s,n){r=r.render;var a=t.ref;return Pa(t,n),s=fi(e,t,r,s,a,n),r=xi(),null===e||bo?(na&&r&&ea(t),t.flags|=1,yo(e,t,s,n),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n,Ho(e,t,n))}function wo(e,t,r,s,n){if(null===e){var a=r.type;return"function"!==typeof a||Ic(a)||void 0!==a.defaultProps||null!==r.compare||void 0!==r.defaultProps?((e=Oc(r.type,null,s,t,t.mode,n)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,No(e,t,a,s,n))}if(a=e.child,0===(e.lanes&n)){var i=a.memoizedProps;if((r=null!==(r=r.compare)?r:os)(i,s)&&e.ref===t.ref)return Ho(e,t,n)}return t.flags|=1,(e=Rc(a,s)).ref=t.ref,e.return=t,t.child=e}function No(e,t,r,s,n){if(null!==e){var a=e.memoizedProps;if(os(a,s)&&e.ref===t.ref){if(bo=!1,t.pendingProps=s=a,0===(e.lanes&n))return t.lanes=e.lanes,Ho(e,t,n);0!==(131072&e.flags)&&(bo=!0)}}return _o(e,t,r,s,n)}function So(e,t,r){var s=t.pendingProps,n=s.children,a=null!==e?e.memoizedState:null;if("hidden"===s.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},_n(Rl,Il),Il|=r;else{if(0===(1073741824&r))return e=null!==a?a.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,_n(Rl,Il),Il|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=null!==a?a.baseLanes:r,_n(Rl,Il),Il|=s}else null!==a?(s=a.baseLanes|r,t.memoizedState=null):s=r,_n(Rl,Il),Il|=s;return yo(e,t,n,r),t.child}function ko(e,t){var r=t.ref;(null===e&&null!==r||null!==e&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function _o(e,t,r,s,n){var a=In(r)?An:Cn.current;return a=Tn(t,a),Pa(t,n),r=fi(e,t,r,s,a,n),s=xi(),null===e||bo?(na&&s&&ea(t),t.flags|=1,yo(e,t,r,n),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n,Ho(e,t,n))}function Eo(e,t,r,s,n){if(In(r)){var a=!0;Dn(t)}else a=!1;if(Pa(t,n),null===t.stateNode)qo(e,t),ao(t,r,s),oo(t,r,s,n),s=!0;else if(null===e){var i=t.stateNode,o=t.memoizedProps;i.props=o;var l=i.context,c=r.contextType;"object"===typeof c&&null!==c?c=Aa(c):c=Tn(t,c=In(r)?An:Cn.current);var d=r.getDerivedStateFromProps,u="function"===typeof d||"function"===typeof i.getSnapshotBeforeUpdate;u||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(o!==s||l!==c)&&io(t,i,s,c),La=!1;var m=t.memoizedState;i.state=m,Va(t,s,i,n),l=t.memoizedState,o!==s||m!==l||Pn.current||La?("function"===typeof d&&(ro(t,r,d,s),l=t.memoizedState),(o=La||no(t,r,o,s,m,l,c))?(u||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||("function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"===typeof i.componentDidMount&&(t.flags|=4194308)):("function"===typeof i.componentDidMount&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=l),i.props=s,i.state=l,i.context=c,s=o):("function"===typeof i.componentDidMount&&(t.flags|=4194308),s=!1)}else{i=t.stateNode,za(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:to(t.type,o),i.props=c,u=t.pendingProps,m=i.context,"object"===typeof(l=r.contextType)&&null!==l?l=Aa(l):l=Tn(t,l=In(r)?An:Cn.current);var h=r.getDerivedStateFromProps;(d="function"===typeof h||"function"===typeof i.getSnapshotBeforeUpdate)||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(o!==u||m!==l)&&io(t,i,s,l),La=!1,m=t.memoizedState,i.state=m,Va(t,s,i,n);var p=t.memoizedState;o!==u||m!==p||Pn.current||La?("function"===typeof h&&(ro(t,r,h,s),p=t.memoizedState),(c=La||no(t,r,c,s,m,p,l)||!1)?(d||"function"!==typeof i.UNSAFE_componentWillUpdate&&"function"!==typeof i.componentWillUpdate||("function"===typeof i.componentWillUpdate&&i.componentWillUpdate(s,p,l),"function"===typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(s,p,l)),"function"===typeof i.componentDidUpdate&&(t.flags|=4),"function"===typeof i.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof i.componentDidUpdate||o===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||o===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=p),i.props=s,i.state=p,i.context=l,s=c):("function"!==typeof i.componentDidUpdate||o===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||o===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),s=!1)}return Co(e,t,r,s,a,n)}function Co(e,t,r,s,n,a){ko(e,t);var i=0!==(128&t.flags);if(!s&&!i)return n&&zn(t,r,!1),Ho(e,t,a);s=t.stateNode,vo.current=t;var o=i&&"function"!==typeof r.getDerivedStateFromError?null:s.render();return t.flags|=1,null!==e&&i?(t.child=ya(t,e.child,null,a),t.child=ya(t,null,o,a)):yo(e,t,o,a),t.memoizedState=s.state,n&&zn(t,r,!0),t.child}function Po(e){var t=e.stateNode;t.pendingContext?On(0,t.pendingContext,t.pendingContext!==t.context):t.context&&On(0,t.context,!1),Za(e,t.containerInfo)}function Ao(e,t,r,s,n){return ha(),pa(n),t.flags|=256,yo(e,t,r,s),t.child}var To,Io,Ro,Oo,Lo={dehydrated:null,treeContext:null,retryLane:0};function Do(e){return{baseLanes:e,cachePool:null,transitions:null}}function zo(e,t,r){var s,n=t.pendingProps,i=Xa.current,o=!1,l=0!==(128&t.flags);if((s=l)||(s=(null===e||null!==e.memoizedState)&&0!==(2&i)),s?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(i|=1),_n(Xa,1&i),null===e)return ca(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=n.children,e=n.fallback,o?(n=t.mode,o=t.child,l={mode:"hidden",children:l},0===(1&n)&&null!==o?(o.childLanes=0,o.pendingProps=l):o=Dc(l,n,0,null),e=Lc(e,n,r,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Do(r),t.memoizedState=Lo,e):Mo(t,l));if(null!==(i=e.memoizedState)&&null!==(s=i.dehydrated))return function(e,t,r,s,n,i,o){if(r)return 256&t.flags?(t.flags&=-257,Fo(e,t,o,s=co(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(i=s.fallback,n=t.mode,s=Dc({mode:"visible",children:s.children},n,0,null),(i=Lc(i,n,o,null)).flags|=2,s.return=t,i.return=t,s.sibling=i,t.child=s,0!==(1&t.mode)&&ya(t,e.child,null,o),t.child.memoizedState=Do(o),t.memoizedState=Lo,i);if(0===(1&t.mode))return Fo(e,t,o,null);if("$!"===n.data){if(s=n.nextSibling&&n.nextSibling.dataset)var l=s.dgst;return s=l,Fo(e,t,o,s=co(i=Error(a(419)),s,void 0))}if(l=0!==(o&e.childLanes),bo||l){if(null!==(s=Pl)){switch(o&-o){case 4:n=2;break;case 16:n=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:n=32;break;case 536870912:n=268435456;break;default:n=0}0!==(n=0!==(n&(s.suspendedLanes|o))?0:n)&&n!==i.retryLane&&(i.retryLane=n,Oa(e,n),rc(s,e,n,-1))}return fc(),Fo(e,t,o,s=co(Error(a(421))))}return"$?"===n.data?(t.flags|=128,t.child=e.child,t=Ec.bind(null,e),n._reactRetry=t,null):(e=i.treeContext,sa=cn(n.nextSibling),ra=t,na=!0,aa=null,null!==e&&(Kn[Jn++]=$n,Kn[Jn++]=Qn,Kn[Jn++]=Zn,$n=e.id,Qn=e.overflow,Zn=t),t=Mo(t,s.children),t.flags|=4096,t)}(e,t,l,n,s,i,r);if(o){o=n.fallback,l=t.mode,s=(i=e.child).sibling;var c={mode:"hidden",children:n.children};return 0===(1&l)&&t.child!==i?((n=t.child).childLanes=0,n.pendingProps=c,t.deletions=null):(n=Rc(i,c)).subtreeFlags=14680064&i.subtreeFlags,null!==s?o=Rc(s,o):(o=Lc(o,l,r,null)).flags|=2,o.return=t,n.return=t,n.sibling=o,t.child=n,n=o,o=t.child,l=null===(l=e.child.memoizedState)?Do(r):{baseLanes:l.baseLanes|r,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~r,t.memoizedState=Lo,n}return e=(o=e.child).sibling,n=Rc(o,{mode:"visible",children:n.children}),0===(1&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function Mo(e,t){return(t=Dc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Fo(e,t,r,s){return null!==s&&pa(s),ya(t,e.child,null,r),(e=Mo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Uo(e,t,r){e.lanes|=t;var s=e.alternate;null!==s&&(s.lanes|=t),Ca(e.return,t,r)}function Bo(e,t,r,s,n){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:r,tailMode:n}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=s,a.tail=r,a.tailMode=n)}function Vo(e,t,r){var s=t.pendingProps,n=s.revealOrder,a=s.tail;if(yo(e,t,s.children,r),0!==(2&(s=Xa.current)))s=1&s|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Uo(e,r,t);else if(19===e.tag)Uo(e,r,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(_n(Xa,s),0===(1&t.mode))t.memoizedState=null;else switch(n){case"forwards":for(r=t.child,n=null;null!==r;)null!==(e=r.alternate)&&null===ei(e)&&(n=r),r=r.sibling;null===(r=n)?(n=t.child,t.child=null):(n=r.sibling,r.sibling=null),Bo(t,!1,n,r,a);break;case"backwards":for(r=null,n=t.child,t.child=null;null!==n;){if(null!==(e=n.alternate)&&null===ei(e)){t.child=n;break}e=n.sibling,n.sibling=r,r=n,n=e}Bo(t,!0,r,null,a);break;case"together":Bo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function qo(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ho(e,t,r){if(null!==e&&(t.dependencies=e.dependencies),Dl|=t.lanes,0===(r&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(r=Rc(e=t.child,e.pendingProps),t.child=r,r.return=t;null!==e.sibling;)e=e.sibling,(r=r.sibling=Rc(e,e.pendingProps)).return=t;r.sibling=null}return t.child}function Wo(e,t){if(!na)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;null!==t;)null!==t.alternate&&(r=t),t=t.sibling;null===r?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var s=null;null!==r;)null!==r.alternate&&(s=r),r=r.sibling;null===s?t||null===e.tail?e.tail=null:e.tail.sibling=null:s.sibling=null}}function Go(e){var t=null!==e.alternate&&e.alternate.child===e.child,r=0,s=0;if(t)for(var n=e.child;null!==n;)r|=n.lanes|n.childLanes,s|=14680064&n.subtreeFlags,s|=14680064&n.flags,n.return=e,n=n.sibling;else for(n=e.child;null!==n;)r|=n.lanes|n.childLanes,s|=n.subtreeFlags,s|=n.flags,n.return=e,n=n.sibling;return e.subtreeFlags|=s,e.childLanes=r,t}function Ko(e,t,r){var s=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Go(t),null;case 1:case 17:return In(t.type)&&Rn(),Go(t),null;case 3:return s=t.stateNode,$a(),kn(Pn),kn(Cn),ri(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),null!==e&&null!==e.child||(ua(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(ic(aa),aa=null))),Io(e,t),Go(t),null;case 5:Ya(t);var n=Ja(Ka.current);if(r=t.type,null!==e&&null!=t.stateNode)Ro(e,t,r,s,n),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(null===t.stateNode)throw Error(a(166));return Go(t),null}if(e=Ja(Wa.current),ua(t)){s=t.stateNode,r=t.type;var i=t.memoizedProps;switch(s[mn]=t,s[hn]=i,e=0!==(1&t.mode),r){case"dialog":Ms("cancel",s),Ms("close",s);break;case"iframe":case"object":case"embed":Ms("load",s);break;case"video":case"audio":for(n=0;n<Os.length;n++)Ms(Os[n],s);break;case"source":Ms("error",s);break;case"img":case"image":case"link":Ms("error",s),Ms("load",s);break;case"details":Ms("toggle",s);break;case"input":$(s,i),Ms("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!i.multiple},Ms("invalid",s);break;case"textarea":ne(s,i),Ms("invalid",s)}for(var l in ve(r,i),n=null,i)if(i.hasOwnProperty(l)){var c=i[l];"children"===l?"string"===typeof c?s.textContent!==c&&(!0!==i.suppressHydrationWarning&&Qs(s.textContent,c,e),n=["children",c]):"number"===typeof c&&s.textContent!==""+c&&(!0!==i.suppressHydrationWarning&&Qs(s.textContent,c,e),n=["children",""+c]):o.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Ms("scroll",s)}switch(r){case"input":G(s),X(s,i,!0);break;case"textarea":G(s),ie(s);break;case"select":case"option":break;default:"function"===typeof i.onClick&&(s.onclick=Ys)}s=n,t.updateQueue=s,null!==s&&(t.flags|=4)}else{l=9===n.nodeType?n:n.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(r)),"http://www.w3.org/1999/xhtml"===e?"script"===r?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof s.is?e=l.createElement(r,{is:s.is}):(e=l.createElement(r),"select"===r&&(l=e,s.multiple?l.multiple=!0:s.size&&(l.size=s.size))):e=l.createElementNS(e,r),e[mn]=t,e[hn]=s,To(e,t,!1,!1),t.stateNode=e;e:{switch(l=be(r,s),r){case"dialog":Ms("cancel",e),Ms("close",e),n=s;break;case"iframe":case"object":case"embed":Ms("load",e),n=s;break;case"video":case"audio":for(n=0;n<Os.length;n++)Ms(Os[n],e);n=s;break;case"source":Ms("error",e),n=s;break;case"img":case"image":case"link":Ms("error",e),Ms("load",e),n=s;break;case"details":Ms("toggle",e),n=s;break;case"input":$(e,s),n=Z(e,s),Ms("invalid",e);break;case"option":default:n=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},n=z({},s,{value:void 0}),Ms("invalid",e);break;case"textarea":ne(e,s),n=se(e,s),Ms("invalid",e)}for(i in ve(r,n),c=n)if(c.hasOwnProperty(i)){var d=c[i];"style"===i?xe(e,d):"dangerouslySetInnerHTML"===i?null!=(d=d?d.__html:void 0)&&ue(e,d):"children"===i?"string"===typeof d?("textarea"!==r||""!==d)&&me(e,d):"number"===typeof d&&me(e,""+d):"suppressContentEditableWarning"!==i&&"suppressHydrationWarning"!==i&&"autoFocus"!==i&&(o.hasOwnProperty(i)?null!=d&&"onScroll"===i&&Ms("scroll",e):null!=d&&b(e,i,d,l))}switch(r){case"input":G(e),X(e,s,!1);break;case"textarea":G(e),ie(e);break;case"option":null!=s.value&&e.setAttribute("value",""+H(s.value));break;case"select":e.multiple=!!s.multiple,null!=(i=s.value)?re(e,!!s.multiple,i,!1):null!=s.defaultValue&&re(e,!!s.multiple,s.defaultValue,!0);break;default:"function"===typeof n.onClick&&(e.onclick=Ys)}switch(r){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Go(t),null;case 6:if(e&&null!=t.stateNode)Oo(e,t,e.memoizedProps,s);else{if("string"!==typeof s&&null===t.stateNode)throw Error(a(166));if(r=Ja(Ka.current),Ja(Wa.current),ua(t)){if(s=t.stateNode,r=t.memoizedProps,s[mn]=t,(i=s.nodeValue!==r)&&null!==(e=ra))switch(e.tag){case 3:Qs(s.nodeValue,r,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Qs(s.nodeValue,r,0!==(1&e.mode))}i&&(t.flags|=4)}else(s=(9===r.nodeType?r:r.ownerDocument).createTextNode(s))[mn]=t,t.stateNode=s}return Go(t),null;case 13:if(kn(Xa),s=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(na&&null!==sa&&0!==(1&t.mode)&&0===(128&t.flags))ma(),ha(),t.flags|=98560,i=!1;else if(i=ua(t),null!==s&&null!==s.dehydrated){if(null===e){if(!i)throw Error(a(318));if(!(i=null!==(i=t.memoizedState)?i.dehydrated:null))throw Error(a(317));i[mn]=t}else ha(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Go(t),i=!1}else null!==aa&&(ic(aa),aa=null),i=!0;if(!i)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=r,t):((s=null!==s)!==(null!==e&&null!==e.memoizedState)&&s&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Xa.current)?0===Ol&&(Ol=3):fc())),null!==t.updateQueue&&(t.flags|=4),Go(t),null);case 4:return $a(),Io(e,t),null===e&&Bs(t.stateNode.containerInfo),Go(t),null;case 10:return Ea(t.type._context),Go(t),null;case 19:if(kn(Xa),null===(i=t.memoizedState))return Go(t),null;if(s=0!==(128&t.flags),null===(l=i.rendering))if(s)Wo(i,!1);else{if(0!==Ol||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ei(e))){for(t.flags|=128,Wo(i,!1),null!==(s=l.updateQueue)&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=r,r=t.child;null!==r;)e=s,(i=r).flags&=14680066,null===(l=i.alternate)?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,e=l.dependencies,i.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return _n(Xa,1&Xa.current|2),t.child}e=e.sibling}null!==i.tail&&Qe()>Vl&&(t.flags|=128,s=!0,Wo(i,!1),t.lanes=4194304)}else{if(!s)if(null!==(e=ei(l))){if(t.flags|=128,s=!0,null!==(r=e.updateQueue)&&(t.updateQueue=r,t.flags|=4),Wo(i,!0),null===i.tail&&"hidden"===i.tailMode&&!l.alternate&&!na)return Go(t),null}else 2*Qe()-i.renderingStartTime>Vl&&1073741824!==r&&(t.flags|=128,s=!0,Wo(i,!1),t.lanes=4194304);i.isBackwards?(l.sibling=t.child,t.child=l):(null!==(r=i.last)?r.sibling=l:t.child=l,i.last=l)}return null!==i.tail?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Qe(),t.sibling=null,r=Xa.current,_n(Xa,s?1&r|2:1&r),t):(Go(t),null);case 22:case 23:return uc(),s=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==s&&(t.flags|=8192),s&&0!==(1&t.mode)?0!==(1073741824&Il)&&(Go(t),6&t.subtreeFlags&&(t.flags|=8192)):Go(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Jo(e,t){switch(ta(t),t.tag){case 1:return In(t.type)&&Rn(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return $a(),kn(Pn),kn(Cn),ri(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Ya(t),null;case 13:if(kn(Xa),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));ha()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return kn(Xa),null;case 4:return $a(),null;case 10:return Ea(t.type._context),null;case 22:case 23:return uc(),null;default:return null}}To=function(e,t){for(var r=t.child;null!==r;){if(5===r.tag||6===r.tag)e.appendChild(r.stateNode);else if(4!==r.tag&&null!==r.child){r.child.return=r,r=r.child;continue}if(r===t)break;for(;null===r.sibling;){if(null===r.return||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}},Io=function(){},Ro=function(e,t,r,s){var n=e.memoizedProps;if(n!==s){e=t.stateNode,Ja(Wa.current);var a,i=null;switch(r){case"input":n=Z(e,n),s=Z(e,s),i=[];break;case"select":n=z({},n,{value:void 0}),s=z({},s,{value:void 0}),i=[];break;case"textarea":n=se(e,n),s=se(e,s),i=[];break;default:"function"!==typeof n.onClick&&"function"===typeof s.onClick&&(e.onclick=Ys)}for(d in ve(r,s),r=null,n)if(!s.hasOwnProperty(d)&&n.hasOwnProperty(d)&&null!=n[d])if("style"===d){var l=n[d];for(a in l)l.hasOwnProperty(a)&&(r||(r={}),r[a]="")}else"dangerouslySetInnerHTML"!==d&&"children"!==d&&"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&"autoFocus"!==d&&(o.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in s){var c=s[d];if(l=null!=n?n[d]:void 0,s.hasOwnProperty(d)&&c!==l&&(null!=c||null!=l))if("style"===d)if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(r||(r={}),r[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(r||(r={}),r[a]=c[a])}else r||(i||(i=[]),i.push(d,r)),r=c;else"dangerouslySetInnerHTML"===d?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(i=i||[]).push(d,c)):"children"===d?"string"!==typeof c&&"number"!==typeof c||(i=i||[]).push(d,""+c):"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&(o.hasOwnProperty(d)?(null!=c&&"onScroll"===d&&Ms("scroll",e),i||l===c||(i=[])):(i=i||[]).push(d,c))}r&&(i=i||[]).push("style",r);var d=i;(t.updateQueue=d)&&(t.flags|=4)}},Oo=function(e,t,r,s){r!==s&&(t.flags|=4)};var Zo=!1,$o=!1,Qo="function"===typeof WeakSet?WeakSet:Set,Yo=null;function Xo(e,t){var r=e.ref;if(null!==r)if("function"===typeof r)try{r(null)}catch(s){Sc(e,t,s)}else r.current=null}function el(e,t,r){try{r()}catch(s){Sc(e,t,s)}}var tl=!1;function rl(e,t,r){var s=t.updateQueue;if(null!==(s=null!==s?s.lastEffect:null)){var n=s=s.next;do{if((n.tag&e)===e){var a=n.destroy;n.destroy=void 0,void 0!==a&&el(t,r,a)}n=n.next}while(n!==s)}}function sl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var r=t=t.next;do{if((r.tag&e)===e){var s=r.create;r.destroy=s()}r=r.next}while(r!==t)}}function nl(e){var t=e.ref;if(null!==t){var r=e.stateNode;e.tag,e=r,"function"===typeof t?t(e):t.current=e}}function al(e){var t=e.alternate;null!==t&&(e.alternate=null,al(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[mn],delete t[hn],delete t[fn],delete t[xn],delete t[gn])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function il(e){return 5===e.tag||3===e.tag||4===e.tag}function ol(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||il(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,r){var s=e.tag;if(5===s||6===s)e=e.stateNode,t?8===r.nodeType?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(8===r.nodeType?(t=r.parentNode).insertBefore(e,r):(t=r).appendChild(e),null!==(r=r._reactRootContainer)&&void 0!==r||null!==t.onclick||(t.onclick=Ys));else if(4!==s&&null!==(e=e.child))for(ll(e,t,r),e=e.sibling;null!==e;)ll(e,t,r),e=e.sibling}function cl(e,t,r){var s=e.tag;if(5===s||6===s)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(4!==s&&null!==(e=e.child))for(cl(e,t,r),e=e.sibling;null!==e;)cl(e,t,r),e=e.sibling}var dl=null,ul=!1;function ml(e,t,r){for(r=r.child;null!==r;)hl(e,t,r),r=r.sibling}function hl(e,t,r){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(nt,r)}catch(o){}switch(r.tag){case 5:$o||Xo(r,t);case 6:var s=dl,n=ul;dl=null,ml(e,t,r),ul=n,null!==(dl=s)&&(ul?(e=dl,r=r.stateNode,8===e.nodeType?e.parentNode.removeChild(r):e.removeChild(r)):dl.removeChild(r.stateNode));break;case 18:null!==dl&&(ul?(e=dl,r=r.stateNode,8===e.nodeType?ln(e.parentNode,r):1===e.nodeType&&ln(e,r),Vt(e)):ln(dl,r.stateNode));break;case 4:s=dl,n=ul,dl=r.stateNode.containerInfo,ul=!0,ml(e,t,r),dl=s,ul=n;break;case 0:case 11:case 14:case 15:if(!$o&&(null!==(s=r.updateQueue)&&null!==(s=s.lastEffect))){n=s=s.next;do{var a=n,i=a.destroy;a=a.tag,void 0!==i&&(0!==(2&a)||0!==(4&a))&&el(r,t,i),n=n.next}while(n!==s)}ml(e,t,r);break;case 1:if(!$o&&(Xo(r,t),"function"===typeof(s=r.stateNode).componentWillUnmount))try{s.props=r.memoizedProps,s.state=r.memoizedState,s.componentWillUnmount()}catch(o){Sc(r,t,o)}ml(e,t,r);break;case 21:ml(e,t,r);break;case 22:1&r.mode?($o=(s=$o)||null!==r.memoizedState,ml(e,t,r),$o=s):ml(e,t,r);break;default:ml(e,t,r)}}function pl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var r=e.stateNode;null===r&&(r=e.stateNode=new Qo),t.forEach(function(t){var s=Cc.bind(null,e,t);r.has(t)||(r.add(t),t.then(s,s))})}}function fl(e,t){var r=t.deletions;if(null!==r)for(var s=0;s<r.length;s++){var n=r[s];try{var i=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 5:dl=l.stateNode,ul=!1;break e;case 3:case 4:dl=l.stateNode.containerInfo,ul=!0;break e}l=l.return}if(null===dl)throw Error(a(160));hl(i,o,n),dl=null,ul=!1;var c=n.alternate;null!==c&&(c.return=null),n.return=null}catch(d){Sc(n,t,d)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)xl(t,e),t=t.sibling}function xl(e,t){var r=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(fl(t,e),gl(e),4&s){try{rl(3,e,e.return),sl(3,e)}catch(x){Sc(e,e.return,x)}try{rl(5,e,e.return)}catch(x){Sc(e,e.return,x)}}break;case 1:fl(t,e),gl(e),512&s&&null!==r&&Xo(r,r.return);break;case 5:if(fl(t,e),gl(e),512&s&&null!==r&&Xo(r,r.return),32&e.flags){var n=e.stateNode;try{me(n,"")}catch(x){Sc(e,e.return,x)}}if(4&s&&null!=(n=e.stateNode)){var i=e.memoizedProps,o=null!==r?r.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===i.type&&null!=i.name&&Q(n,i),be(l,o);var d=be(l,i);for(o=0;o<c.length;o+=2){var u=c[o],m=c[o+1];"style"===u?xe(n,m):"dangerouslySetInnerHTML"===u?ue(n,m):"children"===u?me(n,m):b(n,u,m,d)}switch(l){case"input":Y(n,i);break;case"textarea":ae(n,i);break;case"select":var h=n._wrapperState.wasMultiple;n._wrapperState.wasMultiple=!!i.multiple;var p=i.value;null!=p?re(n,!!i.multiple,p,!1):h!==!!i.multiple&&(null!=i.defaultValue?re(n,!!i.multiple,i.defaultValue,!0):re(n,!!i.multiple,i.multiple?[]:"",!1))}n[hn]=i}catch(x){Sc(e,e.return,x)}}break;case 6:if(fl(t,e),gl(e),4&s){if(null===e.stateNode)throw Error(a(162));n=e.stateNode,i=e.memoizedProps;try{n.nodeValue=i}catch(x){Sc(e,e.return,x)}}break;case 3:if(fl(t,e),gl(e),4&s&&null!==r&&r.memoizedState.isDehydrated)try{Vt(t.containerInfo)}catch(x){Sc(e,e.return,x)}break;case 4:default:fl(t,e),gl(e);break;case 13:fl(t,e),gl(e),8192&(n=e.child).flags&&(i=null!==n.memoizedState,n.stateNode.isHidden=i,!i||null!==n.alternate&&null!==n.alternate.memoizedState||(Bl=Qe())),4&s&&pl(e);break;case 22:if(u=null!==r&&null!==r.memoizedState,1&e.mode?($o=(d=$o)||u,fl(t,e),$o=d):fl(t,e),gl(e),8192&s){if(d=null!==e.memoizedState,(e.stateNode.isHidden=d)&&!u&&0!==(1&e.mode))for(Yo=e,u=e.child;null!==u;){for(m=Yo=u;null!==Yo;){switch(p=(h=Yo).child,h.tag){case 0:case 11:case 14:case 15:rl(4,h,h.return);break;case 1:Xo(h,h.return);var f=h.stateNode;if("function"===typeof f.componentWillUnmount){s=h,r=h.return;try{t=s,f.props=t.memoizedProps,f.state=t.memoizedState,f.componentWillUnmount()}catch(x){Sc(s,r,x)}}break;case 5:Xo(h,h.return);break;case 22:if(null!==h.memoizedState){jl(m);continue}}null!==p?(p.return=h,Yo=p):jl(m)}u=u.sibling}e:for(u=null,m=e;;){if(5===m.tag){if(null===u){u=m;try{n=m.stateNode,d?"function"===typeof(i=n.style).setProperty?i.setProperty("display","none","important"):i.display="none":(l=m.stateNode,o=void 0!==(c=m.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=fe("display",o))}catch(x){Sc(e,e.return,x)}}}else if(6===m.tag){if(null===u)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(x){Sc(e,e.return,x)}}else if((22!==m.tag&&23!==m.tag||null===m.memoizedState||m===e)&&null!==m.child){m.child.return=m,m=m.child;continue}if(m===e)break e;for(;null===m.sibling;){if(null===m.return||m.return===e)break e;u===m&&(u=null),m=m.return}u===m&&(u=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:fl(t,e),gl(e),4&s&&pl(e);case 21:}}function gl(e){var t=e.flags;if(2&t){try{e:{for(var r=e.return;null!==r;){if(il(r)){var s=r;break e}r=r.return}throw Error(a(160))}switch(s.tag){case 5:var n=s.stateNode;32&s.flags&&(me(n,""),s.flags&=-33),cl(e,ol(e),n);break;case 3:case 4:var i=s.stateNode.containerInfo;ll(e,ol(e),i);break;default:throw Error(a(161))}}catch(o){Sc(e,e.return,o)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function vl(e,t,r){Yo=e,bl(e,t,r)}function bl(e,t,r){for(var s=0!==(1&e.mode);null!==Yo;){var n=Yo,a=n.child;if(22===n.tag&&s){var i=null!==n.memoizedState||Zo;if(!i){var o=n.alternate,l=null!==o&&null!==o.memoizedState||$o;o=Zo;var c=$o;if(Zo=i,($o=l)&&!c)for(Yo=n;null!==Yo;)l=(i=Yo).child,22===i.tag&&null!==i.memoizedState?wl(n):null!==l?(l.return=i,Yo=l):wl(n);for(;null!==a;)Yo=a,bl(a,t,r),a=a.sibling;Yo=n,Zo=o,$o=c}yl(e)}else 0!==(8772&n.subtreeFlags)&&null!==a?(a.return=n,Yo=a):yl(e)}}function yl(e){for(;null!==Yo;){var t=Yo;if(0!==(8772&t.flags)){var r=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:$o||sl(5,t);break;case 1:var s=t.stateNode;if(4&t.flags&&!$o)if(null===r)s.componentDidMount();else{var n=t.elementType===t.type?r.memoizedProps:to(t.type,r.memoizedProps);s.componentDidUpdate(n,r.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;null!==i&&qa(t,i,s);break;case 3:var o=t.updateQueue;if(null!==o){if(r=null,null!==t.child)switch(t.child.tag){case 5:case 1:r=t.child.stateNode}qa(t,o,r)}break;case 5:var l=t.stateNode;if(null===r&&4&t.flags){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var d=t.alternate;if(null!==d){var u=d.memoizedState;if(null!==u){var m=u.dehydrated;null!==m&&Vt(m)}}}break;default:throw Error(a(163))}$o||512&t.flags&&nl(t)}catch(h){Sc(t,t.return,h)}}if(t===e){Yo=null;break}if(null!==(r=t.sibling)){r.return=t.return,Yo=r;break}Yo=t.return}}function jl(e){for(;null!==Yo;){var t=Yo;if(t===e){Yo=null;break}var r=t.sibling;if(null!==r){r.return=t.return,Yo=r;break}Yo=t.return}}function wl(e){for(;null!==Yo;){var t=Yo;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{sl(4,t)}catch(l){Sc(t,r,l)}break;case 1:var s=t.stateNode;if("function"===typeof s.componentDidMount){var n=t.return;try{s.componentDidMount()}catch(l){Sc(t,n,l)}}var a=t.return;try{nl(t)}catch(l){Sc(t,a,l)}break;case 5:var i=t.return;try{nl(t)}catch(l){Sc(t,i,l)}}}catch(l){Sc(t,t.return,l)}if(t===e){Yo=null;break}var o=t.sibling;if(null!==o){o.return=t.return,Yo=o;break}Yo=t.return}}var Nl,Sl=Math.ceil,kl=y.ReactCurrentDispatcher,_l=y.ReactCurrentOwner,El=y.ReactCurrentBatchConfig,Cl=0,Pl=null,Al=null,Tl=0,Il=0,Rl=Sn(0),Ol=0,Ll=null,Dl=0,zl=0,Ml=0,Fl=null,Ul=null,Bl=0,Vl=1/0,ql=null,Hl=!1,Wl=null,Gl=null,Kl=!1,Jl=null,Zl=0,$l=0,Ql=null,Yl=-1,Xl=0;function ec(){return 0!==(6&Cl)?Qe():-1!==Yl?Yl:Yl=Qe()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Cl)&&0!==Tl?Tl&-Tl:null!==fa.transition?(0===Xl&&(Xl=ft()),Xl):0!==(e=bt)?e:e=void 0===(e=window.event)?16:$t(e.type)}function rc(e,t,r,s){if(50<$l)throw $l=0,Ql=null,Error(a(185));gt(e,r,s),0!==(2&Cl)&&e===Pl||(e===Pl&&(0===(2&Cl)&&(zl|=r),4===Ol&&oc(e,Tl)),sc(e,s),1===r&&0===Cl&&0===(1&t.mode)&&(Vl=Qe()+500,Fn&&Vn()))}function sc(e,t){var r=e.callbackNode;!function(e,t){for(var r=e.suspendedLanes,s=e.pingedLanes,n=e.expirationTimes,a=e.pendingLanes;0<a;){var i=31-it(a),o=1<<i,l=n[i];-1===l?0!==(o&r)&&0===(o&s)||(n[i]=ht(o,t)):l<=t&&(e.expiredLanes|=o),a&=~o}}(e,t);var s=mt(e,e===Pl?Tl:0);if(0===s)null!==r&&Je(r),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(null!=r&&Je(r),1===t)0===e.tag?function(e){Fn=!0,Bn(e)}(lc.bind(null,e)):Bn(lc.bind(null,e)),an(function(){0===(6&Cl)&&Vn()}),r=null;else{switch(yt(s)){case 1:r=Xe;break;case 4:r=et;break;case 16:default:r=tt;break;case 536870912:r=st}r=Pc(r,nc.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function nc(e,t){if(Yl=-1,Xl=0,0!==(6&Cl))throw Error(a(327));var r=e.callbackNode;if(wc()&&e.callbackNode!==r)return null;var s=mt(e,e===Pl?Tl:0);if(0===s)return null;if(0!==(30&s)||0!==(s&e.expiredLanes)||t)t=xc(e,s);else{t=s;var n=Cl;Cl|=2;var i=pc();for(Pl===e&&Tl===t||(ql=null,Vl=Qe()+500,mc(e,t));;)try{vc();break}catch(l){hc(e,l)}_a(),kl.current=i,Cl=n,null!==Al?t=0:(Pl=null,Tl=0,t=Ol)}if(0!==t){if(2===t&&(0!==(n=pt(e))&&(s=n,t=ac(e,n))),1===t)throw r=Ll,mc(e,0),oc(e,s),sc(e,Qe()),r;if(6===t)oc(e,s);else{if(n=e.current.alternate,0===(30&s)&&!function(e){for(var t=e;;){if(16384&t.flags){var r=t.updateQueue;if(null!==r&&null!==(r=r.stores))for(var s=0;s<r.length;s++){var n=r[s],a=n.getSnapshot;n=n.value;try{if(!is(a(),n))return!1}catch(o){return!1}}}if(r=t.child,16384&t.subtreeFlags&&null!==r)r.return=t,t=r;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(n)&&(2===(t=xc(e,s))&&(0!==(i=pt(e))&&(s=i,t=ac(e,i))),1===t))throw r=Ll,mc(e,0),oc(e,s),sc(e,Qe()),r;switch(e.finishedWork=n,e.finishedLanes=s,t){case 0:case 1:throw Error(a(345));case 2:case 5:jc(e,Ul,ql);break;case 3:if(oc(e,s),(130023424&s)===s&&10<(t=Bl+500-Qe())){if(0!==mt(e,0))break;if(((n=e.suspendedLanes)&s)!==s){ec(),e.pingedLanes|=e.suspendedLanes&n;break}e.timeoutHandle=rn(jc.bind(null,e,Ul,ql),t);break}jc(e,Ul,ql);break;case 4:if(oc(e,s),(4194240&s)===s)break;for(t=e.eventTimes,n=-1;0<s;){var o=31-it(s);i=1<<o,(o=t[o])>n&&(n=o),s&=~i}if(s=n,10<(s=(120>(s=Qe()-s)?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*Sl(s/1960))-s)){e.timeoutHandle=rn(jc.bind(null,e,Ul,ql),s);break}jc(e,Ul,ql);break;default:throw Error(a(329))}}}return sc(e,Qe()),e.callbackNode===r?nc.bind(null,e):null}function ac(e,t){var r=Fl;return e.current.memoizedState.isDehydrated&&(mc(e,t).flags|=256),2!==(e=xc(e,t))&&(t=Ul,Ul=r,null!==t&&ic(t)),e}function ic(e){null===Ul?Ul=e:Ul.push.apply(Ul,e)}function oc(e,t){for(t&=~Ml,t&=~zl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-it(t),s=1<<r;e[r]=-1,t&=~s}}function lc(e){if(0!==(6&Cl))throw Error(a(327));wc();var t=mt(e,0);if(0===(1&t))return sc(e,Qe()),null;var r=xc(e,t);if(0!==e.tag&&2===r){var s=pt(e);0!==s&&(t=s,r=ac(e,s))}if(1===r)throw r=Ll,mc(e,0),oc(e,t),sc(e,Qe()),r;if(6===r)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,jc(e,Ul,ql),sc(e,Qe()),null}function cc(e,t){var r=Cl;Cl|=1;try{return e(t)}finally{0===(Cl=r)&&(Vl=Qe()+500,Fn&&Vn())}}function dc(e){null!==Jl&&0===Jl.tag&&0===(6&Cl)&&wc();var t=Cl;Cl|=1;var r=El.transition,s=bt;try{if(El.transition=null,bt=1,e)return e()}finally{bt=s,El.transition=r,0===(6&(Cl=t))&&Vn()}}function uc(){Il=Rl.current,kn(Rl)}function mc(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(-1!==r&&(e.timeoutHandle=-1,sn(r)),null!==Al)for(r=Al.return;null!==r;){var s=r;switch(ta(s),s.tag){case 1:null!==(s=s.type.childContextTypes)&&void 0!==s&&Rn();break;case 3:$a(),kn(Pn),kn(Cn),ri();break;case 5:Ya(s);break;case 4:$a();break;case 13:case 19:kn(Xa);break;case 10:Ea(s.type._context);break;case 22:case 23:uc()}r=r.return}if(Pl=e,Al=e=Rc(e.current,null),Tl=Il=t,Ol=0,Ll=null,Ml=zl=Dl=0,Ul=Fl=null,null!==Ta){for(t=0;t<Ta.length;t++)if(null!==(s=(r=Ta[t]).interleaved)){r.interleaved=null;var n=s.next,a=r.pending;if(null!==a){var i=a.next;a.next=n,s.next=i}r.pending=s}Ta=null}return e}function hc(e,t){for(;;){var r=Al;try{if(_a(),si.current=Qi,ci){for(var s=ii.memoizedState;null!==s;){var n=s.queue;null!==n&&(n.pending=null),s=s.next}ci=!1}if(ai=0,li=oi=ii=null,di=!1,ui=0,_l.current=null,null===r||null===r.return){Ol=1,Ll=t,Al=null;break}e:{var i=e,o=r.return,l=r,c=t;if(t=Tl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var d=c,u=l,m=u.tag;if(0===(1&u.mode)&&(0===m||11===m||15===m)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=xo(o);if(null!==p){p.flags&=-257,go(p,o,l,0,t),1&p.mode&&fo(i,d,t),c=d;var f=(t=p).updateQueue;if(null===f){var x=new Set;x.add(c),t.updateQueue=x}else f.add(c);break e}if(0===(1&t)){fo(i,d,t),fc();break e}c=Error(a(426))}else if(na&&1&l.mode){var g=xo(o);if(null!==g){0===(65536&g.flags)&&(g.flags|=256),go(g,o,l,0,t),pa(lo(c,l));break e}}i=c=lo(c,l),4!==Ol&&(Ol=2),null===Fl?Fl=[i]:Fl.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t,Ba(i,ho(0,c,t));break e;case 1:l=c;var v=i.type,b=i.stateNode;if(0===(128&i.flags)&&("function"===typeof v.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Gl||!Gl.has(b)))){i.flags|=65536,t&=-t,i.lanes|=t,Ba(i,po(i,l,t));break e}}i=i.return}while(null!==i)}yc(r)}catch(y){t=y,Al===r&&null!==r&&(Al=r=r.return);continue}break}}function pc(){var e=kl.current;return kl.current=Qi,null===e?Qi:e}function fc(){0!==Ol&&3!==Ol&&2!==Ol||(Ol=4),null===Pl||0===(268435455&Dl)&&0===(268435455&zl)||oc(Pl,Tl)}function xc(e,t){var r=Cl;Cl|=2;var s=pc();for(Pl===e&&Tl===t||(ql=null,mc(e,t));;)try{gc();break}catch(n){hc(e,n)}if(_a(),Cl=r,kl.current=s,null!==Al)throw Error(a(261));return Pl=null,Tl=0,Ol}function gc(){for(;null!==Al;)bc(Al)}function vc(){for(;null!==Al&&!Ze();)bc(Al)}function bc(e){var t=Nl(e.alternate,e,Il);e.memoizedProps=e.pendingProps,null===t?yc(e):Al=t,_l.current=null}function yc(e){var t=e;do{var r=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(r=Ko(r,t,Il)))return void(Al=r)}else{if(null!==(r=Jo(r,t)))return r.flags&=32767,void(Al=r);if(null===e)return Ol=6,void(Al=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Al=t);Al=t=e}while(null!==t);0===Ol&&(Ol=5)}function jc(e,t,r){var s=bt,n=El.transition;try{El.transition=null,bt=1,function(e,t,r,s){do{wc()}while(null!==Jl);if(0!==(6&Cl))throw Error(a(327));r=e.finishedWork;var n=e.finishedLanes;if(null===r)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(function(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<r;){var n=31-it(r),a=1<<n;t[n]=0,s[n]=-1,e[n]=-1,r&=~a}}(e,i),e===Pl&&(Al=Pl=null,Tl=0),0===(2064&r.subtreeFlags)&&0===(2064&r.flags)||Kl||(Kl=!0,Pc(tt,function(){return wc(),null})),i=0!==(15990&r.flags),0!==(15990&r.subtreeFlags)||i){i=El.transition,El.transition=null;var o=bt;bt=1;var l=Cl;Cl|=4,_l.current=null,function(e,t){if(Xs=Ht,ms(e=us())){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{var s=(r=(r=e.ownerDocument)&&r.defaultView||window).getSelection&&r.getSelection();if(s&&0!==s.rangeCount){r=s.anchorNode;var n=s.anchorOffset,i=s.focusNode;s=s.focusOffset;try{r.nodeType,i.nodeType}catch(j){r=null;break e}var o=0,l=-1,c=-1,d=0,u=0,m=e,h=null;t:for(;;){for(var p;m!==r||0!==n&&3!==m.nodeType||(l=o+n),m!==i||0!==s&&3!==m.nodeType||(c=o+s),3===m.nodeType&&(o+=m.nodeValue.length),null!==(p=m.firstChild);)h=m,m=p;for(;;){if(m===e)break t;if(h===r&&++d===n&&(l=o),h===i&&++u===s&&(c=o),null!==(p=m.nextSibling))break;h=(m=h).parentNode}m=p}r=-1===l||-1===c?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(en={focusedElem:e,selectionRange:r},Ht=!1,Yo=t;null!==Yo;)if(e=(t=Yo).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Yo=e;else for(;null!==Yo;){t=Yo;try{var f=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==f){var x=f.memoizedProps,g=f.memoizedState,v=t.stateNode,b=v.getSnapshotBeforeUpdate(t.elementType===t.type?x:to(t.type,x),g);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var y=t.stateNode.containerInfo;1===y.nodeType?y.textContent="":9===y.nodeType&&y.documentElement&&y.removeChild(y.documentElement);break;default:throw Error(a(163))}}catch(j){Sc(t,t.return,j)}if(null!==(e=t.sibling)){e.return=t.return,Yo=e;break}Yo=t.return}f=tl,tl=!1}(e,r),xl(r,e),hs(en),Ht=!!Xs,en=Xs=null,e.current=r,vl(r,e,n),$e(),Cl=l,bt=o,El.transition=i}else e.current=r;if(Kl&&(Kl=!1,Jl=e,Zl=n),i=e.pendingLanes,0===i&&(Gl=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(nt,e,void 0,128===(128&e.current.flags))}catch(t){}}(r.stateNode),sc(e,Qe()),null!==t)for(s=e.onRecoverableError,r=0;r<t.length;r++)n=t[r],s(n.value,{componentStack:n.stack,digest:n.digest});if(Hl)throw Hl=!1,e=Wl,Wl=null,e;0!==(1&Zl)&&0!==e.tag&&wc(),i=e.pendingLanes,0!==(1&i)?e===Ql?$l++:($l=0,Ql=e):$l=0,Vn()}(e,t,r,s)}finally{El.transition=n,bt=s}return null}function wc(){if(null!==Jl){var e=yt(Zl),t=El.transition,r=bt;try{if(El.transition=null,bt=16>e?16:e,null===Jl)var s=!1;else{if(e=Jl,Jl=null,Zl=0,0!==(6&Cl))throw Error(a(331));var n=Cl;for(Cl|=4,Yo=e.current;null!==Yo;){var i=Yo,o=i.child;if(0!==(16&Yo.flags)){var l=i.deletions;if(null!==l){for(var c=0;c<l.length;c++){var d=l[c];for(Yo=d;null!==Yo;){var u=Yo;switch(u.tag){case 0:case 11:case 15:rl(8,u,i)}var m=u.child;if(null!==m)m.return=u,Yo=m;else for(;null!==Yo;){var h=(u=Yo).sibling,p=u.return;if(al(u),u===d){Yo=null;break}if(null!==h){h.return=p,Yo=h;break}Yo=p}}}var f=i.alternate;if(null!==f){var x=f.child;if(null!==x){f.child=null;do{var g=x.sibling;x.sibling=null,x=g}while(null!==x)}}Yo=i}}if(0!==(2064&i.subtreeFlags)&&null!==o)o.return=i,Yo=o;else e:for(;null!==Yo;){if(0!==(2048&(i=Yo).flags))switch(i.tag){case 0:case 11:case 15:rl(9,i,i.return)}var v=i.sibling;if(null!==v){v.return=i.return,Yo=v;break e}Yo=i.return}}var b=e.current;for(Yo=b;null!==Yo;){var y=(o=Yo).child;if(0!==(2064&o.subtreeFlags)&&null!==y)y.return=o,Yo=y;else e:for(o=b;null!==Yo;){if(0!==(2048&(l=Yo).flags))try{switch(l.tag){case 0:case 11:case 15:sl(9,l)}}catch(w){Sc(l,l.return,w)}if(l===o){Yo=null;break e}var j=l.sibling;if(null!==j){j.return=l.return,Yo=j;break e}Yo=l.return}}if(Cl=n,Vn(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(nt,e)}catch(w){}s=!0}return s}finally{bt=r,El.transition=t}}return!1}function Nc(e,t,r){e=Fa(e,t=ho(0,t=lo(r,t),1),1),t=ec(),null!==e&&(gt(e,1,t),sc(e,t))}function Sc(e,t,r){if(3===e.tag)Nc(e,e,r);else for(;null!==t;){if(3===t.tag){Nc(t,e,r);break}if(1===t.tag){var s=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof s.componentDidCatch&&(null===Gl||!Gl.has(s))){t=Fa(t,e=po(t,e=lo(r,e),1),1),e=ec(),null!==t&&(gt(t,1,e),sc(t,e));break}}t=t.return}}function kc(e,t,r){var s=e.pingCache;null!==s&&s.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&r,Pl===e&&(Tl&r)===r&&(4===Ol||3===Ol&&(130023424&Tl)===Tl&&500>Qe()-Bl?mc(e,0):Ml|=r),sc(e,t)}function _c(e,t){0===t&&(0===(1&e.mode)?t=1:(t=dt,0===(130023424&(dt<<=1))&&(dt=4194304)));var r=ec();null!==(e=Oa(e,t))&&(gt(e,t,r),sc(e,r))}function Ec(e){var t=e.memoizedState,r=0;null!==t&&(r=t.retryLane),_c(e,r)}function Cc(e,t){var r=0;switch(e.tag){case 13:var s=e.stateNode,n=e.memoizedState;null!==n&&(r=n.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(a(314))}null!==s&&s.delete(t),_c(e,r)}function Pc(e,t){return Ke(e,t)}function Ac(e,t,r,s){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Tc(e,t,r,s){return new Ac(e,t,r,s)}function Ic(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Rc(e,t){var r=e.alternate;return null===r?((r=Tc(e.tag,t,e.key,e.mode)).elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=14680064&e.flags,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Oc(e,t,r,s,n,i){var o=2;if(s=e,"function"===typeof e)Ic(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case N:return Lc(r.children,n,i,t);case S:o=8,n|=8;break;case k:return(e=Tc(12,r,t,2|n)).elementType=k,e.lanes=i,e;case P:return(e=Tc(13,r,t,n)).elementType=P,e.lanes=i,e;case A:return(e=Tc(19,r,t,n)).elementType=A,e.lanes=i,e;case R:return Dc(r,n,i,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case _:o=10;break e;case E:o=9;break e;case C:o=11;break e;case T:o=14;break e;case I:o=16,s=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Tc(o,r,t,n)).elementType=e,t.type=s,t.lanes=i,t}function Lc(e,t,r,s){return(e=Tc(7,e,s,t)).lanes=r,e}function Dc(e,t,r,s){return(e=Tc(22,e,s,t)).elementType=R,e.lanes=r,e.stateNode={isHidden:!1},e}function zc(e,t,r){return(e=Tc(6,e,null,t)).lanes=r,e}function Mc(e,t,r){return(t=Tc(4,null!==e.children?e.children:[],e.key,t)).lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Fc(e,t,r,s,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=xt(0),this.expirationTimes=xt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=xt(0),this.identifierPrefix=s,this.onRecoverableError=n,this.mutableSourceEagerHydrationData=null}function Uc(e,t,r,s,n,a,i,o,l){return e=new Fc(e,t,r,o,l),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Tc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:s,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Da(a),e}function Bc(e){if(!e)return En;e:{if(Ve(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(In(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var r=e.type;if(In(r))return Ln(e,r,t)}return t}function Vc(e,t,r,s,n,a,i,o,l){return(e=Uc(r,s,!0,e,0,a,0,o,l)).context=Bc(null),r=e.current,(a=Ma(s=ec(),n=tc(r))).callback=void 0!==t&&null!==t?t:null,Fa(r,a,n),e.current.lanes=n,gt(e,n,s),sc(e,s),e}function qc(e,t,r,s){var n=t.current,a=ec(),i=tc(n);return r=Bc(r),null===t.context?t.context=r:t.pendingContext=r,(t=Ma(a,i)).payload={element:e},null!==(s=void 0===s?null:s)&&(t.callback=s),null!==(e=Fa(n,t,i))&&(rc(e,n,i,a),Ua(e,n,i)),i}function Hc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Wc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var r=e.retryLane;e.retryLane=0!==r&&r<t?r:t}}function Gc(e,t){Wc(e,t),(e=e.alternate)&&Wc(e,t)}Nl=function(e,t,r){if(null!==e)if(e.memoizedProps!==t.pendingProps||Pn.current)bo=!0;else{if(0===(e.lanes&r)&&0===(128&t.flags))return bo=!1,function(e,t,r){switch(t.tag){case 3:Po(t),ha();break;case 5:Qa(t);break;case 1:In(t.type)&&Dn(t);break;case 4:Za(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,n=t.memoizedProps.value;_n(wa,s._currentValue),s._currentValue=n;break;case 13:if(null!==(s=t.memoizedState))return null!==s.dehydrated?(_n(Xa,1&Xa.current),t.flags|=128,null):0!==(r&t.child.childLanes)?zo(e,t,r):(_n(Xa,1&Xa.current),null!==(e=Ho(e,t,r))?e.sibling:null);_n(Xa,1&Xa.current);break;case 19:if(s=0!==(r&t.childLanes),0!==(128&e.flags)){if(s)return Vo(e,t,r);t.flags|=128}if(null!==(n=t.memoizedState)&&(n.rendering=null,n.tail=null,n.lastEffect=null),_n(Xa,Xa.current),s)break;return null;case 22:case 23:return t.lanes=0,So(e,t,r)}return Ho(e,t,r)}(e,t,r);bo=0!==(131072&e.flags)}else bo=!1,na&&0!==(1048576&t.flags)&&Xn(t,Gn,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;qo(e,t),e=t.pendingProps;var n=Tn(t,Cn.current);Pa(t,r),n=fi(null,t,s,e,n,r);var i=xi();return t.flags|=1,"object"===typeof n&&null!==n&&"function"===typeof n.render&&void 0===n.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,In(s)?(i=!0,Dn(t)):i=!1,t.memoizedState=null!==n.state&&void 0!==n.state?n.state:null,Da(t),n.updater=so,t.stateNode=n,n._reactInternals=t,oo(t,s,e,r),t=Co(null,t,s,!0,i,r)):(t.tag=0,na&&i&&ea(t),yo(null,t,n,r),t=t.child),t;case 16:s=t.elementType;e:{switch(qo(e,t),e=t.pendingProps,s=(n=s._init)(s._payload),t.type=s,n=t.tag=function(e){if("function"===typeof e)return Ic(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===T)return 14}return 2}(s),e=to(s,e),n){case 0:t=_o(null,t,s,e,r);break e;case 1:t=Eo(null,t,s,e,r);break e;case 11:t=jo(null,t,s,e,r);break e;case 14:t=wo(null,t,s,to(s.type,e),r);break e}throw Error(a(306,s,""))}return t;case 0:return s=t.type,n=t.pendingProps,_o(e,t,s,n=t.elementType===s?n:to(s,n),r);case 1:return s=t.type,n=t.pendingProps,Eo(e,t,s,n=t.elementType===s?n:to(s,n),r);case 3:e:{if(Po(t),null===e)throw Error(a(387));s=t.pendingProps,n=(i=t.memoizedState).element,za(e,t),Va(t,s,null,r);var o=t.memoizedState;if(s=o.element,i.isDehydrated){if(i={element:s,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,256&t.flags){t=Ao(e,t,s,r,n=lo(Error(a(423)),t));break e}if(s!==n){t=Ao(e,t,s,r,n=lo(Error(a(424)),t));break e}for(sa=cn(t.stateNode.containerInfo.firstChild),ra=t,na=!0,aa=null,r=ja(t,null,s,r),t.child=r;r;)r.flags=-3&r.flags|4096,r=r.sibling}else{if(ha(),s===n){t=Ho(e,t,r);break e}yo(e,t,s,r)}t=t.child}return t;case 5:return Qa(t),null===e&&ca(t),s=t.type,n=t.pendingProps,i=null!==e?e.memoizedProps:null,o=n.children,tn(s,n)?o=null:null!==i&&tn(s,i)&&(t.flags|=32),ko(e,t),yo(e,t,o,r),t.child;case 6:return null===e&&ca(t),null;case 13:return zo(e,t,r);case 4:return Za(t,t.stateNode.containerInfo),s=t.pendingProps,null===e?t.child=ya(t,null,s,r):yo(e,t,s,r),t.child;case 11:return s=t.type,n=t.pendingProps,jo(e,t,s,n=t.elementType===s?n:to(s,n),r);case 7:return yo(e,t,t.pendingProps,r),t.child;case 8:case 12:return yo(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(s=t.type._context,n=t.pendingProps,i=t.memoizedProps,o=n.value,_n(wa,s._currentValue),s._currentValue=o,null!==i)if(is(i.value,o)){if(i.children===n.children&&!Pn.current){t=Ho(e,t,r);break e}}else for(null!==(i=t.child)&&(i.return=t);null!==i;){var l=i.dependencies;if(null!==l){o=i.child;for(var c=l.firstContext;null!==c;){if(c.context===s){if(1===i.tag){(c=Ma(-1,r&-r)).tag=2;var d=i.updateQueue;if(null!==d){var u=(d=d.shared).pending;null===u?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}i.lanes|=r,null!==(c=i.alternate)&&(c.lanes|=r),Ca(i.return,r,t),l.lanes|=r;break}c=c.next}}else if(10===i.tag)o=i.type===t.type?null:i.child;else if(18===i.tag){if(null===(o=i.return))throw Error(a(341));o.lanes|=r,null!==(l=o.alternate)&&(l.lanes|=r),Ca(o,r,t),o=i.sibling}else o=i.child;if(null!==o)o.return=i;else for(o=i;null!==o;){if(o===t){o=null;break}if(null!==(i=o.sibling)){i.return=o.return,o=i;break}o=o.return}i=o}yo(e,t,n.children,r),t=t.child}return t;case 9:return n=t.type,s=t.pendingProps.children,Pa(t,r),s=s(n=Aa(n)),t.flags|=1,yo(e,t,s,r),t.child;case 14:return n=to(s=t.type,t.pendingProps),wo(e,t,s,n=to(s.type,n),r);case 15:return No(e,t,t.type,t.pendingProps,r);case 17:return s=t.type,n=t.pendingProps,n=t.elementType===s?n:to(s,n),qo(e,t),t.tag=1,In(s)?(e=!0,Dn(t)):e=!1,Pa(t,r),ao(t,s,n),oo(t,s,n,r),Co(null,t,s,!0,e,r);case 19:return Vo(e,t,r);case 22:return So(e,t,r)}throw Error(a(156,t.tag))};var Kc="function"===typeof reportError?reportError:function(e){console.error(e)};function Jc(e){this._internalRoot=e}function Zc(e){this._internalRoot=e}function $c(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Qc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Yc(){}function Xc(e,t,r,s,n){var a=r._reactRootContainer;if(a){var i=a;if("function"===typeof n){var o=n;n=function(){var e=Hc(i);o.call(e)}}qc(t,i,e,n)}else i=function(e,t,r,s,n){if(n){if("function"===typeof s){var a=s;s=function(){var e=Hc(i);a.call(e)}}var i=Vc(t,s,e,0,null,!1,0,"",Yc);return e._reactRootContainer=i,e[pn]=i.current,Bs(8===e.nodeType?e.parentNode:e),dc(),i}for(;n=e.lastChild;)e.removeChild(n);if("function"===typeof s){var o=s;s=function(){var e=Hc(l);o.call(e)}}var l=Uc(e,0,!1,null,0,!1,0,"",Yc);return e._reactRootContainer=l,e[pn]=l.current,Bs(8===e.nodeType?e.parentNode:e),dc(function(){qc(t,l,r,s)}),l}(r,t,e,n,s);return Hc(i)}Zc.prototype.render=Jc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));qc(e,t,null,null)},Zc.prototype.unmount=Jc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;dc(function(){qc(null,e,null,null)}),t[pn]=null}},Zc.prototype.unstable_scheduleHydration=function(e){if(e){var t=St();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Rt.length&&0!==t&&t<Rt[r].priority;r++);Rt.splice(r,0,e),0===r&&zt(e)}},jt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=ut(t.pendingLanes);0!==r&&(vt(t,1|r),sc(t,Qe()),0===(6&Cl)&&(Vl=Qe()+500,Vn()))}break;case 13:dc(function(){var t=Oa(e,1);if(null!==t){var r=ec();rc(t,e,1,r)}}),Gc(e,1)}},wt=function(e){if(13===e.tag){var t=Oa(e,134217728);if(null!==t)rc(t,e,134217728,ec());Gc(e,134217728)}},Nt=function(e){if(13===e.tag){var t=tc(e),r=Oa(e,t);if(null!==r)rc(r,e,t,ec());Gc(e,t)}},St=function(){return bt},kt=function(e,t){var r=bt;try{return bt=e,t()}finally{bt=r}},we=function(e,t,r){switch(t){case"input":if(Y(e,r),t=r.name,"radio"===r.type&&null!=t){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var s=r[t];if(s!==e&&s.form===e.form){var n=jn(s);if(!n)throw Error(a(90));K(s),Y(s,n)}}}break;case"textarea":ae(e,r);break;case"select":null!=(t=r.value)&&re(e,!!r.multiple,t,!1)}},Ce=cc,Pe=dc;var ed={usingClientEntryPoint:!1,Events:[bn,yn,jn,_e,Ee,cc]},td={findFiberByHostInstance:vn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},rd={bundleType:td.bundleType,version:td.version,rendererPackageName:td.rendererPackageName,rendererConfig:td.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:y.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=We(e))?null:e.stateNode},findFiberByHostInstance:td.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var sd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sd.isDisabled&&sd.supportsFiber)try{nt=sd.inject(rd),at=sd}catch(de){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ed,t.createPortal=function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!$c(t))throw Error(a(200));return function(e,t,r){var s=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:w,key:null==s?null:""+s,children:e,containerInfo:t,implementation:r}}(e,t,null,r)},t.createRoot=function(e,t){if(!$c(e))throw Error(a(299));var r=!1,s="",n=Kc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(r=!0),void 0!==t.identifierPrefix&&(s=t.identifierPrefix),void 0!==t.onRecoverableError&&(n=t.onRecoverableError)),t=Uc(e,1,!1,null,0,r,0,s,n),e[pn]=t.current,Bs(8===e.nodeType?e.parentNode:e),new Jc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=We(t))?null:e.stateNode},t.flushSync=function(e){return dc(e)},t.hydrate=function(e,t,r){if(!Qc(t))throw Error(a(200));return Xc(null,e,t,!0,r)},t.hydrateRoot=function(e,t,r){if(!$c(e))throw Error(a(405));var s=null!=r&&r.hydratedSources||null,n=!1,i="",o=Kc;if(null!==r&&void 0!==r&&(!0===r.unstable_strictMode&&(n=!0),void 0!==r.identifierPrefix&&(i=r.identifierPrefix),void 0!==r.onRecoverableError&&(o=r.onRecoverableError)),t=Vc(t,null,e,1,null!=r?r:null,n,0,i,o),e[pn]=t.current,Bs(e),s)for(e=0;e<s.length;e++)n=(n=(r=s[e])._getVersion)(r._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[r,n]:t.mutableSourceEagerHydrationData.push(r,n);return new Zc(t)},t.render=function(e,t,r){if(!Qc(t))throw Error(a(200));return Xc(null,e,t,!1,r)},t.unmountComponentAtNode=function(e){if(!Qc(e))throw Error(a(40));return!!e._reactRootContainer&&(dc(function(){Xc(null,null,e,!1,function(){e._reactRootContainer=null,e[pn]=null})}),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,r,s){if(!Qc(r))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return Xc(e,t,r,!1,s)},t.version="18.3.1-next-f1338f8080-20240426"},736:function(e,t,r){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=s(r(374));class a extends n.default{eq(e,t){return this.url.searchParams.append(e,"eq.".concat(t)),this}neq(e,t){return this.url.searchParams.append(e,"neq.".concat(t)),this}gt(e,t){return this.url.searchParams.append(e,"gt.".concat(t)),this}gte(e,t){return this.url.searchParams.append(e,"gte.".concat(t)),this}lt(e,t){return this.url.searchParams.append(e,"lt.".concat(t)),this}lte(e,t){return this.url.searchParams.append(e,"lte.".concat(t)),this}like(e,t){return this.url.searchParams.append(e,"like.".concat(t)),this}likeAllOf(e,t){return this.url.searchParams.append(e,"like(all).{".concat(t.join(","),"}")),this}likeAnyOf(e,t){return this.url.searchParams.append(e,"like(any).{".concat(t.join(","),"}")),this}ilike(e,t){return this.url.searchParams.append(e,"ilike.".concat(t)),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,"ilike(all).{".concat(t.join(","),"}")),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,"ilike(any).{".concat(t.join(","),"}")),this}is(e,t){return this.url.searchParams.append(e,"is.".concat(t)),this}in(e,t){const r=Array.from(new Set(t)).map(e=>"string"===typeof e&&new RegExp("[,()]").test(e)?'"'.concat(e,'"'):"".concat(e)).join(",");return this.url.searchParams.append(e,"in.(".concat(r,")")),this}contains(e,t){return"string"===typeof t?this.url.searchParams.append(e,"cs.".concat(t)):Array.isArray(t)?this.url.searchParams.append(e,"cs.{".concat(t.join(","),"}")):this.url.searchParams.append(e,"cs.".concat(JSON.stringify(t))),this}containedBy(e,t){return"string"===typeof t?this.url.searchParams.append(e,"cd.".concat(t)):Array.isArray(t)?this.url.searchParams.append(e,"cd.{".concat(t.join(","),"}")):this.url.searchParams.append(e,"cd.".concat(JSON.stringify(t))),this}rangeGt(e,t){return this.url.searchParams.append(e,"sr.".concat(t)),this}rangeGte(e,t){return this.url.searchParams.append(e,"nxl.".concat(t)),this}rangeLt(e,t){return this.url.searchParams.append(e,"sl.".concat(t)),this}rangeLte(e,t){return this.url.searchParams.append(e,"nxr.".concat(t)),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,"adj.".concat(t)),this}overlaps(e,t){return"string"===typeof t?this.url.searchParams.append(e,"ov.".concat(t)):this.url.searchParams.append(e,"ov.{".concat(t.join(","),"}")),this}textSearch(e,t){let{config:r,type:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n="";"plain"===s?n="pl":"phrase"===s?n="ph":"websearch"===s&&(n="w");const a=void 0===r?"":"(".concat(r,")");return this.url.searchParams.append(e,"".concat(n,"fts").concat(a,".").concat(t)),this}match(e){return Object.entries(e).forEach(e=>{let[t,r]=e;this.url.searchParams.append(t,"eq.".concat(r))}),this}not(e,t,r){return this.url.searchParams.append(e,"not.".concat(t,".").concat(r)),this}or(e){let{foreignTable:t,referencedTable:r=t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=r?"".concat(r,".or"):"or";return this.url.searchParams.append(s,"(".concat(e,")")),this}filter(e,t,r){return this.url.searchParams.append(e,"".concat(t,".").concat(r)),this}}t.default=a},829:function(e,t,r){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=s(r(736));t.default=class{constructor(e,t){let{headers:r={},schema:s,fetch:n}=t;this.url=e,this.headers=new Headers(r),this.schema=s,this.fetch=n}select(e){let{head:t=!1,count:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=t?"HEAD":"GET";let a=!1;const i=(null!==e&&void 0!==e?e:"*").split("").map(e=>/\s/.test(e)&&!a?"":('"'===e&&(a=!a),e)).join("");return this.url.searchParams.set("select",i),r&&this.headers.append("Prefer","count=".concat(r)),new n.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e){let{count:t,defaultToNull:r=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var s;if(t&&this.headers.append("Prefer","count=".concat(t)),r||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){const e=[...new Set(t)].map(e=>'"'.concat(e,'"'));this.url.searchParams.set("columns",e.join(","))}}return new n.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!==(s=this.fetch)&&void 0!==s?s:fetch})}upsert(e){let{onConflict:t,ignoreDuplicates:r=!1,count:s,defaultToNull:a=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var i;if(this.headers.append("Prefer","resolution=".concat(r?"ignore":"merge","-duplicates")),void 0!==t&&this.url.searchParams.set("on_conflict",t),s&&this.headers.append("Prefer","count=".concat(s)),a||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){const e=[...new Set(t)].map(e=>'"'.concat(e,'"'));this.url.searchParams.set("columns",e.join(","))}}return new n.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!==(i=this.fetch)&&void 0!==i?i:fetch})}update(e){let{count:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var r;return t&&this.headers.append("Prefer","count=".concat(t)),new n.default({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!==(r=this.fetch)&&void 0!==r?r:fetch})}delete(){let{count:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t;return e&&this.headers.append("Prefer","count=".concat(e)),new n.default({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:null!==(t=this.fetch)&&void 0!==t?t:fetch})}}},853:(e,t,r)=>{"use strict";e.exports=r(234)},900:(e,t)=>{t.read=function(e,t,r,s,n){var a,i,o=8*n-s-1,l=(1<<o)-1,c=l>>1,d=-7,u=r?n-1:0,m=r?-1:1,h=e[t+u];for(u+=m,a=h&(1<<-d)-1,h>>=-d,d+=o;d>0;a=256*a+e[t+u],u+=m,d-=8);for(i=a&(1<<-d)-1,a>>=-d,d+=s;d>0;i=256*i+e[t+u],u+=m,d-=8);if(0===a)a=1-c;else{if(a===l)return i?NaN:1/0*(h?-1:1);i+=Math.pow(2,s),a-=c}return(h?-1:1)*i*Math.pow(2,a-s)},t.write=function(e,t,r,s,n,a){var i,o,l,c=8*a-n-1,d=(1<<c)-1,u=d>>1,m=23===n?Math.pow(2,-24)-Math.pow(2,-77):0,h=s?0:a-1,p=s?1:-1,f=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(o=isNaN(t)?1:0,i=d):(i=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-i))<1&&(i--,l*=2),(t+=i+u>=1?m/l:m*Math.pow(2,1-u))*l>=2&&(i++,l/=2),i+u>=d?(o=0,i=d):i+u>=1?(o=(t*l-1)*Math.pow(2,n),i+=u):(o=t*Math.pow(2,u-1)*Math.pow(2,n),i=0));n>=8;e[r+h]=255&o,h+=p,o/=256,n-=8);for(i=i<<n|o,c+=n;c>0;e[r+h]=255&i,h+=p,i/=256,c-=8);e[r+h-p]|=128*f}},950:(e,t,r)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=r(730)},980:function(e,t,r){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.PostgrestError=t.PostgrestBuilder=t.PostgrestTransformBuilder=t.PostgrestFilterBuilder=t.PostgrestQueryBuilder=t.PostgrestClient=void 0;const n=s(r(210));t.PostgrestClient=n.default;const a=s(r(829));t.PostgrestQueryBuilder=a.default;const i=s(r(736));t.PostgrestFilterBuilder=i.default;const o=s(r(374));t.PostgrestTransformBuilder=o.default;const l=s(r(286));t.PostgrestBuilder=l.default;const c=s(r(611));t.PostgrestError=c.default,t.default={PostgrestClient:n.default,PostgrestQueryBuilder:a.default,PostgrestFilterBuilder:i.default,PostgrestTransformBuilder:o.default,PostgrestBuilder:l.default,PostgrestError:c.default}}},t={};function r(s){var n=t[s];if(void 0!==n)return n.exports;var a=t[s]={exports:{}};return e[s].call(a.exports,a,a.exports,r),a.exports}r.m=e,(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;r.t=function(s,n){if(1&n&&(s=this(s)),8&n)return s;if("object"===typeof s&&s){if(4&n&&s.__esModule)return s;if(16&n&&"function"===typeof s.then)return s}var a=Object.create(null);r.r(a);var i={};e=e||[null,t({}),t([]),t(t)];for(var o=2&n&&s;("object"==typeof o||"function"==typeof o)&&!~e.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach(e=>i[e]=()=>s[e]);return i.default=()=>s,r.d(a,i),a}})(),r.d=(e,t)=>{for(var s in t)r.o(t,s)&&!r.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},r.f={},r.e=e=>Promise.all(Object.keys(r.f).reduce((t,s)=>(r.f[s](e,t),t),[])),r.u=e=>"static/js/"+e+".79000009.chunk.js",r.miniCssF=e=>{},r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="ab-campus-finance-frontend:";r.l=(s,n,a,i)=>{if(e[s])e[s].push(n);else{var o,l;if(void 0!==a)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var u=c[d];if(u.getAttribute("src")==s||u.getAttribute("data-webpack")==t+a){o=u;break}}o||(l=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,r.nc&&o.setAttribute("nonce",r.nc),o.setAttribute("data-webpack",t+a),o.src=s),e[s]=[n];var m=(t,r)=>{o.onerror=o.onload=null,clearTimeout(h);var n=e[s];if(delete e[s],o.parentNode&&o.parentNode.removeChild(o),n&&n.forEach(e=>e(r)),t)return t(r)},h=setTimeout(m.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=m.bind(null,o.onerror),o.onload=m.bind(null,o.onload),l&&document.head.appendChild(o)}}})(),r.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.p="/",(()=>{var e={792:0};r.f.j=(t,s)=>{var n=r.o(e,t)?e[t]:void 0;if(0!==n)if(n)s.push(n[2]);else{var a=new Promise((r,s)=>n=e[t]=[r,s]);s.push(n[2]=a);var i=r.p+r.u(t),o=new Error;r.l(i,s=>{if(r.o(e,t)&&(0!==(n=e[t])&&(e[t]=void 0),n)){var a=s&&("load"===s.type?"missing":s.type),i=s&&s.target&&s.target.src;o.message="Loading chunk "+t+" failed.\n("+a+": "+i+")",o.name="ChunkLoadError",o.type=a,o.request=i,n[1](o)}},"chunk-"+t,t)}};var t=(t,s)=>{var n,a,i=s[0],o=s[1],l=s[2],c=0;if(i.some(t=>0!==e[t])){for(n in o)r.o(o,n)&&(r.m[n]=o[n]);if(l)l(r)}for(t&&t(s);c<i.length;c++)a=i[c],r.o(e,a)&&e[a]&&e[a][0](),e[a]=0},s=self.webpackChunkab_campus_finance_frontend=self.webpackChunkab_campus_finance_frontend||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))})(),(()=>{"use strict";var e,t=r(43),s=r.t(t,2),n=r(391);function a(){return a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},a.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(e||(e={}));const i="popstate";function o(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function l(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(wn){}}}function c(e,t){return{usr:e.state,key:e.key,idx:t}}function d(e,t,r,s){return void 0===r&&(r=null),a({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?m(t):t,{state:r,key:t&&t.key||s||Math.random().toString(36).substr(2,8)})}function u(e){let{pathname:t="/",search:r="",hash:s=""}=e;return r&&"?"!==r&&(t+="?"===r.charAt(0)?r:"?"+r),s&&"#"!==s&&(t+="#"===s.charAt(0)?s:"#"+s),t}function m(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let s=e.indexOf("?");s>=0&&(t.search=e.substr(s),e=e.substr(0,s)),e&&(t.pathname=e)}return t}function h(t,r,s,n){void 0===n&&(n={});let{window:l=document.defaultView,v5Compat:m=!1}=n,h=l.history,p=e.Pop,f=null,x=g();function g(){return(h.state||{idx:null}).idx}function v(){p=e.Pop;let t=g(),r=null==t?null:t-x;x=t,f&&f({action:p,location:y.location,delta:r})}function b(e){let t="null"!==l.location.origin?l.location.origin:l.location.href,r="string"===typeof e?e:u(e);return r=r.replace(/ $/,"%20"),o(t,"No window.location.(origin|href) available to create URL for href: "+r),new URL(r,t)}null==x&&(x=0,h.replaceState(a({},h.state,{idx:x}),""));let y={get action(){return p},get location(){return t(l,h)},listen(e){if(f)throw new Error("A history only accepts one active listener");return l.addEventListener(i,v),f=e,()=>{l.removeEventListener(i,v),f=null}},createHref:e=>r(l,e),createURL:b,encodeLocation(e){let t=b(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(t,r){p=e.Push;let n=d(y.location,t,r);s&&s(n,t),x=g()+1;let a=c(n,x),i=y.createHref(n);try{h.pushState(a,"",i)}catch(o){if(o instanceof DOMException&&"DataCloneError"===o.name)throw o;l.location.assign(i)}m&&f&&f({action:p,location:y.location,delta:1})},replace:function(t,r){p=e.Replace;let n=d(y.location,t,r);s&&s(n,t),x=g();let a=c(n,x),i=y.createHref(n);h.replaceState(a,"",i),m&&f&&f({action:p,location:y.location,delta:0})},go:e=>h.go(e)};return y}var p;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(p||(p={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function f(e,t,r){return void 0===r&&(r="/"),x(e,t,r,!1)}function x(e,t,r,s){let n=A(("string"===typeof t?m(t):t).pathname||"/",r);if(null==n)return null;let a=g(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let r=e.length===t.length&&e.slice(0,-1).every((e,r)=>e===t[r]);return r?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(a);let i=null;for(let o=0;null==i&&o<a.length;++o){let e=P(n);i=E(a[o],e,s)}return i}function g(e,t,r,s){void 0===t&&(t=[]),void 0===r&&(r=[]),void 0===s&&(s="");let n=(e,n,a)=>{let i={relativePath:void 0===a?e.path||"":a,caseSensitive:!0===e.caseSensitive,childrenIndex:n,route:e};i.relativePath.startsWith("/")&&(o(i.relativePath.startsWith(s),'Absolute route path "'+i.relativePath+'" nested under path "'+s+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),i.relativePath=i.relativePath.slice(s.length));let l=L([s,i.relativePath]),c=r.concat(i);e.children&&e.children.length>0&&(o(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+l+'".'),g(e.children,t,c,l)),(null!=e.path||e.index)&&t.push({path:l,score:_(l,e.index),routesMeta:c})};return e.forEach((e,t)=>{var r;if(""!==e.path&&null!=(r=e.path)&&r.includes("?"))for(let s of v(e.path))n(e,t,s);else n(e,t)}),t}function v(e){let t=e.split("/");if(0===t.length)return[];let[r,...s]=t,n=r.endsWith("?"),a=r.replace(/\?$/,"");if(0===s.length)return n?[a,""]:[a];let i=v(s.join("/")),o=[];return o.push(...i.map(e=>""===e?a:[a,e].join("/"))),n&&o.push(...i),o.map(t=>e.startsWith("/")&&""===t?"/":t)}const b=/^:[\w-]+$/,y=3,j=2,w=1,N=10,S=-2,k=e=>"*"===e;function _(e,t){let r=e.split("/"),s=r.length;return r.some(k)&&(s+=S),t&&(s+=j),r.filter(e=>!k(e)).reduce((e,t)=>e+(b.test(t)?y:""===t?w:N),s)}function E(e,t,r){void 0===r&&(r=!1);let{routesMeta:s}=e,n={},a="/",i=[];for(let o=0;o<s.length;++o){let e=s[o],l=o===s.length-1,c="/"===a?t:t.slice(a.length)||"/",d=C({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),u=e.route;if(!d&&l&&r&&!s[s.length-1].route.index&&(d=C({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!d)return null;Object.assign(n,d.params),i.push({params:n,pathname:L([a,d.pathname]),pathnameBase:D(L([a,d.pathnameBase])),route:u}),"/"!==d.pathnameBase&&(a=L([a,d.pathnameBase]))}return i}function C(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[r,s]=function(e,t,r){void 0===t&&(t=!1);void 0===r&&(r=!0);l("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let s=[],n="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,r)=>(s.push({paramName:t,isOptional:null!=r}),r?"/?([^\\/]+)?":"/([^\\/]+)"));e.endsWith("*")?(s.push({paramName:"*"}),n+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?n+="\\/*$":""!==e&&"/"!==e&&(n+="(?:(?=\\/|$))");let a=new RegExp(n,t?void 0:"i");return[a,s]}(e.path,e.caseSensitive,e.end),n=t.match(r);if(!n)return null;let a=n[0],i=a.replace(/(.)\/+$/,"$1"),o=n.slice(1),c=s.reduce((e,t,r)=>{let{paramName:s,isOptional:n}=t;if("*"===s){let e=o[r]||"";i=a.slice(0,a.length-e.length).replace(/(.)\/+$/,"$1")}const l=o[r];return e[s]=n&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{});return{params:c,pathname:a,pathnameBase:i,pattern:e}}function P(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return l(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function A(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,s=e.charAt(r);return s&&"/"!==s?null:e.slice(r)||"/"}function T(e,t,r,s){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(s)+"].  Please separate it out to the `to."+r+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function I(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function R(e,t){let r=I(e);return t?r.map((e,t)=>t===r.length-1?e.pathname:e.pathnameBase):r.map(e=>e.pathnameBase)}function O(e,t,r,s){let n;void 0===s&&(s=!1),"string"===typeof e?n=m(e):(n=a({},e),o(!n.pathname||!n.pathname.includes("?"),T("?","pathname","search",n)),o(!n.pathname||!n.pathname.includes("#"),T("#","pathname","hash",n)),o(!n.search||!n.search.includes("#"),T("#","search","hash",n)));let i,l=""===e||""===n.pathname,c=l?"/":n.pathname;if(null==c)i=r;else{let e=t.length-1;if(!s&&c.startsWith("..")){let t=c.split("/");for(;".."===t[0];)t.shift(),e-=1;n.pathname=t.join("/")}i=e>=0?t[e]:"/"}let d=function(e,t){void 0===t&&(t="/");let{pathname:r,search:s="",hash:n=""}="string"===typeof e?m(e):e,a=r?r.startsWith("/")?r:function(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?r.length>1&&r.pop():"."!==e&&r.push(e)}),r.length>1?r.join("/"):"/"}(r,t):t;return{pathname:a,search:z(s),hash:M(n)}}(n,i),u=c&&"/"!==c&&c.endsWith("/"),h=(l||"."===c)&&r.endsWith("/");return d.pathname.endsWith("/")||!u&&!h||(d.pathname+="/"),d}const L=e=>e.join("/").replace(/\/\/+/g,"/"),D=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),z=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",M=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function F(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const U=["post","put","patch","delete"],B=(new Set(U),["get",...U]);new Set(B),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function V(){return V=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},V.apply(this,arguments)}const q=t.createContext(null);const H=t.createContext(null);const W=t.createContext(null);const G=t.createContext(null);const K=t.createContext({outlet:null,matches:[],isDataRoute:!1});const J=t.createContext(null);function Z(){return null!=t.useContext(G)}function $(){return Z()||o(!1),t.useContext(G).location}function Q(e){t.useContext(W).static||t.useLayoutEffect(e)}function Y(){let{isDataRoute:e}=t.useContext(K);return e?function(){let{router:e}=ce(oe.UseNavigateStable),r=ue(le.UseNavigateStable),s=t.useRef(!1);Q(()=>{s.current=!0});let n=t.useCallback(function(t,n){void 0===n&&(n={}),s.current&&("number"===typeof t?e.navigate(t):e.navigate(t,V({fromRouteId:r},n)))},[e,r]);return n}():function(){Z()||o(!1);let e=t.useContext(q),{basename:r,future:s,navigator:n}=t.useContext(W),{matches:a}=t.useContext(K),{pathname:i}=$(),l=JSON.stringify(R(a,s.v7_relativeSplatPath)),c=t.useRef(!1);return Q(()=>{c.current=!0}),t.useCallback(function(t,s){if(void 0===s&&(s={}),!c.current)return;if("number"===typeof t)return void n.go(t);let a=O(t,JSON.parse(l),i,"path"===s.relative);null==e&&"/"!==r&&(a.pathname="/"===a.pathname?r:L([r,a.pathname])),(s.replace?n.replace:n.push)(a,s.state,s)},[r,n,l,i,e])}()}function X(){let{matches:e}=t.useContext(K),r=e[e.length-1];return r?r.params:{}}function ee(e,r){let{relative:s}=void 0===r?{}:r,{future:n}=t.useContext(W),{matches:a}=t.useContext(K),{pathname:i}=$(),o=JSON.stringify(R(a,n.v7_relativeSplatPath));return t.useMemo(()=>O(e,JSON.parse(o),i,"path"===s),[e,o,i,s])}function te(r,s,n,a){Z()||o(!1);let{navigator:i}=t.useContext(W),{matches:l}=t.useContext(K),c=l[l.length-1],d=c?c.params:{},u=(c&&c.pathname,c?c.pathnameBase:"/");c&&c.route;let h,p=$();if(s){var x;let e="string"===typeof s?m(s):s;"/"===u||(null==(x=e.pathname)?void 0:x.startsWith(u))||o(!1),h=e}else h=p;let g=h.pathname||"/",v=g;if("/"!==u){let e=u.replace(/^\//,"").split("/");v="/"+g.replace(/^\//,"").split("/").slice(e.length).join("/")}let b=f(r,{pathname:v});let y=ie(b&&b.map(e=>Object.assign({},e,{params:Object.assign({},d,e.params),pathname:L([u,i.encodeLocation?i.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?u:L([u,i.encodeLocation?i.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),l,n,a);return s&&y?t.createElement(G.Provider,{value:{location:V({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:e.Pop}},y):y}function re(){let e=function(){var e;let r=t.useContext(J),s=de(le.UseRouteError),n=ue(le.UseRouteError);if(void 0!==r)return r;return null==(e=s.errors)?void 0:e[n]}(),r=F(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),s=e instanceof Error?e.stack:null,n="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:n};return t.createElement(t.Fragment,null,t.createElement("h2",null,"Unexpected Application Error!"),t.createElement("h3",{style:{fontStyle:"italic"}},r),s?t.createElement("pre",{style:a},s):null,null)}const se=t.createElement(re,null);class ne extends t.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?t.createElement(K.Provider,{value:this.props.routeContext},t.createElement(J.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ae(e){let{routeContext:r,match:s,children:n}=e,a=t.useContext(q);return a&&a.static&&a.staticContext&&(s.route.errorElement||s.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=s.route.id),t.createElement(K.Provider,{value:r},n)}function ie(e,r,s,n){var a;if(void 0===r&&(r=[]),void 0===s&&(s=null),void 0===n&&(n=null),null==e){var i;if(!s)return null;if(s.errors)e=s.matches;else{if(!(null!=(i=n)&&i.v7_partialHydration&&0===r.length&&!s.initialized&&s.matches.length>0))return null;e=s.matches}}let l=e,c=null==(a=s)?void 0:a.errors;if(null!=c){let e=l.findIndex(e=>e.route.id&&void 0!==(null==c?void 0:c[e.route.id]));e>=0||o(!1),l=l.slice(0,Math.min(l.length,e+1))}let d=!1,u=-1;if(s&&n&&n.v7_partialHydration)for(let t=0;t<l.length;t++){let e=l[t];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(u=t),e.route.id){let{loaderData:t,errors:r}=s,n=e.route.loader&&void 0===t[e.route.id]&&(!r||void 0===r[e.route.id]);if(e.route.lazy||n){d=!0,l=u>=0?l.slice(0,u+1):[l[0]];break}}}return l.reduceRight((e,n,a)=>{let i,o=!1,m=null,h=null;var p;s&&(i=c&&n.route.id?c[n.route.id]:void 0,m=n.route.errorElement||se,d&&(u<0&&0===a?(p="route-fallback",!1||me[p]||(me[p]=!0),o=!0,h=null):u===a&&(o=!0,h=n.route.hydrateFallbackElement||null)));let f=r.concat(l.slice(0,a+1)),x=()=>{let r;return r=i?m:o?h:n.route.Component?t.createElement(n.route.Component,null):n.route.element?n.route.element:e,t.createElement(ae,{match:n,routeContext:{outlet:e,matches:f,isDataRoute:null!=s},children:r})};return s&&(n.route.ErrorBoundary||n.route.errorElement||0===a)?t.createElement(ne,{location:s.location,revalidation:s.revalidation,component:m,error:i,children:x(),routeContext:{outlet:null,matches:f,isDataRoute:!0}}):x()},null)}var oe=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(oe||{}),le=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(le||{});function ce(e){let r=t.useContext(q);return r||o(!1),r}function de(e){let r=t.useContext(H);return r||o(!1),r}function ue(e){let r=function(){let e=t.useContext(K);return e||o(!1),e}(),s=r.matches[r.matches.length-1];return s.route.id||o(!1),s.route.id}const me={};function he(e,t){null==e||e.v7_startTransition,void 0===(null==e?void 0:e.v7_relativeSplatPath)&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}s.startTransition;function pe(e){let{to:r,replace:s,state:n,relative:a}=e;Z()||o(!1);let{future:i,static:l}=t.useContext(W),{matches:c}=t.useContext(K),{pathname:d}=$(),u=Y(),m=O(r,R(c,i.v7_relativeSplatPath),d,"path"===a),h=JSON.stringify(m);return t.useEffect(()=>u(JSON.parse(h),{replace:s,state:n,relative:a}),[u,h,a,s,n]),null}function fe(e){o(!1)}function xe(r){let{basename:s="/",children:n=null,location:a,navigationType:i=e.Pop,navigator:l,static:c=!1,future:d}=r;Z()&&o(!1);let u=s.replace(/^\/*/,"/"),h=t.useMemo(()=>({basename:u,navigator:l,static:c,future:V({v7_relativeSplatPath:!1},d)}),[u,d,l,c]);"string"===typeof a&&(a=m(a));let{pathname:p="/",search:f="",hash:x="",state:g=null,key:v="default"}=a,b=t.useMemo(()=>{let e=A(p,u);return null==e?null:{location:{pathname:e,search:f,hash:x,state:g,key:v},navigationType:i}},[u,p,f,x,g,v,i]);return null==b?null:t.createElement(W.Provider,{value:h},t.createElement(G.Provider,{children:n,value:b}))}function ge(e){let{children:t,location:r}=e;return te(ve(t),r)}new Promise(()=>{});t.Component;function ve(e,r){void 0===r&&(r=[]);let s=[];return t.Children.forEach(e,(e,n)=>{if(!t.isValidElement(e))return;let a=[...r,n];if(e.type===t.Fragment)return void s.push.apply(s,ve(e.props.children,a));e.type!==fe&&o(!1),e.props.index&&e.props.children&&o(!1);let i={id:e.props.id||a.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(i.children=ve(e.props.children,a)),s.push(i)}),s}var be=r(950),ye=r.t(be,2);function je(){return je=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},je.apply(this,arguments)}function we(e,t){if(null==e)return{};var r,s,n={},a=Object.keys(e);for(s=0;s<a.length;s++)r=a[s],t.indexOf(r)>=0||(n[r]=e[r]);return n}function Ne(e){return void 0===e&&(e=""),new URLSearchParams("string"===typeof e||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let s=e[r];return t.concat(Array.isArray(s)?s.map(e=>[r,e]):[[r,s]])},[]))}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const Se=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"];try{window.__reactRouterVersion="6"}catch(wn){}new Map;const ke=s.startTransition;ye.flushSync,s.useId;function _e(e){let{basename:r,children:s,future:n,window:a}=e,i=t.useRef();var o;null==i.current&&(i.current=(void 0===(o={window:a,v5Compat:!0})&&(o={}),h(function(e,t){let{pathname:r,search:s,hash:n}=e.location;return d("",{pathname:r,search:s,hash:n},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"===typeof t?t:u(t)},null,o)));let l=i.current,[c,m]=t.useState({action:l.action,location:l.location}),{v7_startTransition:p}=n||{},f=t.useCallback(e=>{p&&ke?ke(()=>m(e)):m(e)},[m,p]);return t.useLayoutEffect(()=>l.listen(f),[l,f]),t.useEffect(()=>he(n),[n]),t.createElement(xe,{basename:r,children:s,location:c.location,navigationType:c.action,navigator:l,future:n})}const Ee="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,Ce=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Pe=t.forwardRef(function(e,r){let s,{onClick:n,relative:a,reloadDocument:i,replace:l,state:c,target:d,to:m,preventScrollReset:h,viewTransition:p}=e,f=we(e,Se),{basename:x}=t.useContext(W),g=!1;if("string"===typeof m&&Ce.test(m)&&(s=m,Ee))try{let e=new URL(window.location.href),t=m.startsWith("//")?new URL(e.protocol+m):new URL(m),r=A(t.pathname,x);t.origin===e.origin&&null!=r?m=r+t.search+t.hash:g=!0}catch(wn){}let v=function(e,r){let{relative:s}=void 0===r?{}:r;Z()||o(!1);let{basename:n,navigator:a}=t.useContext(W),{hash:i,pathname:l,search:c}=ee(e,{relative:s}),d=l;return"/"!==n&&(d="/"===l?n:L([n,l])),a.createHref({pathname:d,search:c,hash:i})}(m,{relative:a}),b=function(e,r){let{target:s,replace:n,state:a,preventScrollReset:i,relative:o,viewTransition:l}=void 0===r?{}:r,c=Y(),d=$(),m=ee(e,{relative:o});return t.useCallback(t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,s)){t.preventDefault();let r=void 0!==n?n:u(d)===u(m);c(e,{replace:r,state:a,preventScrollReset:i,relative:o,viewTransition:l})}},[d,c,m,n,a,s,e,i,o,l])}(m,{replace:l,state:c,target:d,preventScrollReset:h,relative:a,viewTransition:p});return t.createElement("a",je({},f,{href:s||v,onClick:g||i?n:function(e){n&&n(e),e.defaultPrevented||b(e)},ref:r,target:d}))});var Ae,Te;function Ie(e){let r=t.useRef(Ne(e)),s=t.useRef(!1),n=$(),a=t.useMemo(()=>function(e,t){let r=Ne(e);return t&&t.forEach((e,s)=>{r.has(s)||t.getAll(s).forEach(e=>{r.append(s,e)})}),r}(n.search,s.current?null:r.current),[n.search]),i=Y(),o=t.useCallback((e,t)=>{const r=Ne("function"===typeof e?e(a):e);s.current=!0,i("?"+r,t)},[i,a]);return[a,o]}(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Ae||(Ae={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Te||(Te={}));function Re(e){return Re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Re(e)}function Oe(e){var t=function(e,t){if("object"!=Re(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,t||"default");if("object"!=Re(s))return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Re(t)?t:t+""}function Le(e,t,r){return(t=Oe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function De(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function ze(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?De(Object(r),!0).forEach(function(t){Le(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):De(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}class Me extends Error{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"FunctionsError",r=arguments.length>2?arguments[2]:void 0;super(e),this.name=t,this.context=r}}class Fe extends Me{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Ue extends Me{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Be extends Me{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Ve;!function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"}(Ve||(Ve={}));var qe=function(e,t,r,s){return new(r||(r=Promise))(function(n,a){function i(e){try{l(s.next(e))}catch(wn){a(wn)}}function o(e){try{l(s.throw(e))}catch(wn){a(wn)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(i,o)}l((s=s.apply(e,t||[])).next())})};class He{constructor(e){let{headers:t={},customFetch:s,region:n=Ve.Any}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.url=e,this.headers=t,this.region=n,this.fetch=(e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return Promise.resolve().then(r.bind(r,630)).then(e=>{let{default:r}=e;return r(...t)})}:fetch),function(){return t(...arguments)}})(s)}setAuth(e){this.headers.Authorization="Bearer ".concat(e)}invoke(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var r;return qe(this,void 0,void 0,function*(){try{const{headers:s,method:n,body:a}=t;let i={},{region:o}=t;o||(o=this.region);const l=new URL("".concat(this.url,"/").concat(e));let c;o&&"any"!==o&&(i["x-region"]=o,l.searchParams.set("forceFunctionRegion",o)),a&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&("undefined"!==typeof Blob&&a instanceof Blob||a instanceof ArrayBuffer?(i["Content-Type"]="application/octet-stream",c=a):"string"===typeof a?(i["Content-Type"]="text/plain",c=a):"undefined"!==typeof FormData&&a instanceof FormData?c=a:(i["Content-Type"]="application/json",c=JSON.stringify(a)));const d=yield this.fetch(l.toString(),{method:n||"POST",headers:Object.assign(Object.assign(Object.assign({},i),this.headers),s),body:c}).catch(e=>{throw new Fe(e)}),u=d.headers.get("x-relay-error");if(u&&"true"===u)throw new Ue(d);if(!d.ok)throw new Be(d);let m,h=(null!==(r=d.headers.get("Content-Type"))&&void 0!==r?r:"text/plain").split(";")[0].trim();return m="application/json"===h?yield d.json():"application/octet-stream"===h?yield d.blob():"text/event-stream"===h?d:"multipart/form-data"===h?yield d.formData():yield d.text(),{data:m,error:null,response:d}}catch(s){return{data:null,error:s,response:s instanceof Be||s instanceof Ue?s.context:void 0}}})}}var We=r(980);const{PostgrestClient:Ge,PostgrestQueryBuilder:Ke,PostgrestFilterBuilder:Je,PostgrestTransformBuilder:Ze,PostgrestBuilder:$e,PostgrestError:Qe}=We;var Ye=r(285);const Xe=class{static detectEnvironment(){var e;if("undefined"!==typeof WebSocket)return{type:"native",constructor:WebSocket};if("undefined"!==typeof globalThis&&"undefined"!==typeof globalThis.WebSocket)return{type:"native",constructor:globalThis.WebSocket};if("undefined"!==typeof r.g&&"undefined"!==typeof r.g.WebSocket)return{type:"native",constructor:r.g.WebSocket};if("undefined"!==typeof globalThis&&"undefined"!==typeof globalThis.WebSocketPair&&"undefined"===typeof globalThis.WebSocket)return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if("undefined"!==typeof globalThis&&globalThis.EdgeRuntime||"undefined"!==typeof navigator&&(null===(e=navigator.userAgent)||void 0===e?void 0:e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if("undefined"!==typeof Ye){const e=Ye.versions;if(e&&e.node){const t=e.node,r=parseInt(t.replace(/^v/,"").split(".")[0]);return r>=22?"undefined"!==typeof globalThis.WebSocket?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:"Node.js ".concat(r," detected but native WebSocket not found."),workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:"Node.js ".concat(r," detected without native WebSocket support."),workaround:'For Node.js < 22, install "ws" package and provide it via the transport option:\nimport ws from "ws"\nnew RealtimeClient(url, { transport: ws })'}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+="\n\nSuggested solution: ".concat(e.workaround)),new Error(t)}static createWebSocket(e,t){return new(this.getWebSocketConstructor())(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return"native"===e.type||"ws"===e.type}catch(e){return!1}}},et="realtime-js/".concat("2.15.5"),tt=1e4;var rt,st,nt,at,it,ot;!function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"}(rt||(rt={})),function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"}(st||(st={})),function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"}(nt||(nt={})),function(e){e.websocket="websocket"}(at||(at={})),function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"}(it||(it={}));class lt{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t("string"===typeof e?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,t,r)}_decodeBroadcast(e,t,r){const s=t.getUint8(1),n=t.getUint8(2);let a=this.HEADER_LENGTH+2;const i=r.decode(e.slice(a,a+s));a+=s;const o=r.decode(e.slice(a,a+n));a+=n;return{ref:null,topic:i,event:o,payload:JSON.parse(r.decode(e.slice(a,e.byteLength)))}}}class ct{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}!function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"}(ot||(ot={}));const dt=function(e,t){var r;const s=null!==(r=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).skipTypes)&&void 0!==r?r:[];return Object.keys(t).reduce((r,n)=>(r[n]=ut(n,e,t,s),r),{})},ut=(e,t,r,s)=>{const n=t.find(t=>t.name===e),a=null===n||void 0===n?void 0:n.type,i=r[e];return a&&!s.includes(a)?mt(a,i):ht(i)},mt=(e,t)=>{if("_"===e.charAt(0)){const r=e.slice(1,e.length);return gt(t,r)}switch(e){case ot.bool:return pt(t);case ot.float4:case ot.float8:case ot.int2:case ot.int4:case ot.int8:case ot.numeric:case ot.oid:return ft(t);case ot.json:case ot.jsonb:return xt(t);case ot.timestamp:return vt(t);case ot.abstime:case ot.date:case ot.daterange:case ot.int4range:case ot.int8range:case ot.money:case ot.reltime:case ot.text:case ot.time:case ot.timestamptz:case ot.timetz:case ot.tsrange:case ot.tstzrange:default:return ht(t)}},ht=e=>e,pt=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},ft=e=>{if("string"===typeof e){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},xt=e=>{if("string"===typeof e)try{return JSON.parse(e)}catch(t){return console.log("JSON parse error: ".concat(t)),e}return e},gt=(e,t)=>{if("string"!==typeof e)return e;const r=e.length-1,s=e[r];if("{"===e[0]&&"}"===s){let s;const n=e.slice(1,r);try{s=JSON.parse("["+n+"]")}catch(la){s=n?n.split(","):[]}return s.map(e=>mt(t,e))}return e},vt=e=>"string"===typeof e?e.replace(" ","T"):e,bt=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class yt{constructor(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:tt;this.channel=e,this.event=t,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t(null===(r=this.receivedResp)||void 0===r?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);this.channel._on(this.refEvent,{},e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)}),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive(e){let{status:t,response:r}=e;this.recHooks.filter(e=>e.status===t).forEach(e=>e.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var jt,wt,Nt,St;!function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"}(jt||(jt={}));class kt{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(null===t||void 0===t?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},e=>{const{onJoin:t,onLeave:r,onSync:s}=this.caller;this.joinRef=this.channel._joinRef(),this.state=kt.syncState(this.state,e,t,r),this.pendingDiffs.forEach(e=>{this.state=kt.syncDiff(this.state,e,t,r)}),this.pendingDiffs=[],s()}),this.channel._on(r.diff,{},e=>{const{onJoin:t,onLeave:r,onSync:s}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(e):(this.state=kt.syncDiff(this.state,e,t,r),s())}),this.onJoin((e,t,r)=>{this.channel._trigger("presence",{event:"join",key:e,currentPresences:t,newPresences:r})}),this.onLeave((e,t,r)=>{this.channel._trigger("presence",{event:"leave",key:e,currentPresences:t,leftPresences:r})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,s){const n=this.cloneDeep(e),a=this.transformState(t),i={},o={};return this.map(n,(e,t)=>{a[e]||(o[e]=t)}),this.map(a,(e,t)=>{const r=n[e];if(r){const s=t.map(e=>e.presence_ref),n=r.map(e=>e.presence_ref),a=t.filter(e=>n.indexOf(e.presence_ref)<0),l=r.filter(e=>s.indexOf(e.presence_ref)<0);a.length>0&&(i[e]=a),l.length>0&&(o[e]=l)}else i[e]=t}),this.syncDiff(n,{joins:i,leaves:o},r,s)}static syncDiff(e,t,r,s){const{joins:n,leaves:a}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(n,(t,s)=>{var n;const a=null!==(n=e[t])&&void 0!==n?n:[];if(e[t]=this.cloneDeep(s),a.length>0){const r=e[t].map(e=>e.presence_ref),s=a.filter(e=>r.indexOf(e.presence_ref)<0);e[t].unshift(...s)}r(t,a,s)}),this.map(a,(t,r)=>{let n=e[t];if(!n)return;const a=r.map(e=>e.presence_ref);n=n.filter(e=>a.indexOf(e.presence_ref)<0),e[t]=n,s(t,n,r),0===n.length&&delete e[t]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{const s=e[r];return t[r]="metas"in s?s.metas.map(e=>(e.presence_ref=e.phx_ref,delete e.phx_ref,delete e.phx_ref_prev,e)):s,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}!function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"}(wt||(wt={})),function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"}(Nt||(Nt={})),function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"}(St||(St={}));class _t{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}},r=arguments.length>2?arguments[2]:void 0;this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=st.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new yt(this,nt.join,this.params,this.timeout),this.rejoinTimer=new ct(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=st.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(e=>e.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel","close ".concat(this.topic," ").concat(this._joinRef())),this.state=st.closed,this.socket._remove(this)}),this._onError(e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel","error ".concat(this.topic),e),this.state=st.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel","timeout ".concat(this.topic),this.joinPush.timeout),this.state=st.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel","error ".concat(this.topic),e),this.state=st.errored,this.rejoinTimer.scheduleTimeout())}),this._on(nt.reply,{},(e,t)=>{this._trigger(this._replyEventName(t),e)}),this.presence=new kt(this),this.broadcastEndpointURL=bt(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.timeout;var r,s,n;if(this.socket.isConnected()||this.socket.connect(),this.state==st.closed){const{config:{broadcast:a,presence:i,private:o}}=this.params,l=null!==(s=null===(r=this.bindings.postgres_changes)||void 0===r?void 0:r.map(e=>e.filter))&&void 0!==s?s:[],c=!!this.bindings[Nt.PRESENCE]&&this.bindings[Nt.PRESENCE].length>0||!0===(null===(n=this.params.config.presence)||void 0===n?void 0:n.enabled),d={},u={broadcast:a,presence:Object.assign(Object.assign({},i),{enabled:c}),postgres_changes:l,private:o};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this._onError(t=>null===e||void 0===e?void 0:e(St.CHANNEL_ERROR,t)),this._onClose(()=>null===e||void 0===e?void 0:e(St.CLOSED)),this.updateJoinPayload(Object.assign({config:u},d)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async t=>{let{postgres_changes:r}=t;var s;if(this.socket.setAuth(),void 0!==r){const t=this.bindings.postgres_changes,n=null!==(s=null===t||void 0===t?void 0:t.length)&&void 0!==s?s:0,a=[];for(let s=0;s<n;s++){const n=t[s],{filter:{event:i,schema:o,table:l,filter:c}}=n,d=r&&r[s];if(!d||d.event!==i||d.schema!==o||d.table!==l||d.filter!==c)return this.unsubscribe(),this.state=st.errored,void(null===e||void 0===e||e(St.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes")));a.push(Object.assign(Object.assign({},n),{id:d.id}))}return this.bindings.postgres_changes=a,void(e&&e(St.SUBSCRIBED))}null===e||void 0===e||e(St.SUBSCRIBED)}).receive("error",t=>{this.state=st.errored,null===e||void 0===e||e(St.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(t).join(", ")||"error")))}).receive("timeout",()=>{null===e||void 0===e||e(St.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return await this.send({type:"presence",event:"untrack"},e)}on(e,t,r){return this.state===st.joined&&e===Nt.PRESENCE&&(this.socket.log("channel","resubscribe to ".concat(this.topic," due to change in presence callbacks on joined channel")),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,r)}async send(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var r,s;if(this._canPush()||"broadcast"!==e.type)return new Promise(r=>{var s,n,a;const i=this._push(e.type,e,t.timeout||this.timeout);"broadcast"!==e.type||(null===(a=null===(n=null===(s=this.params)||void 0===s?void 0:s.config)||void 0===n?void 0:n.broadcast)||void 0===a?void 0:a.ack)||r("ok"),i.receive("ok",()=>r("ok")),i.receive("error",()=>r("error")),i.receive("timeout",()=>r("timed out"))});{const{event:a,payload:i}=e,o={method:"POST",headers:{Authorization:this.socket.accessTokenValue?"Bearer ".concat(this.socket.accessTokenValue):"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:i,private:this.private}]})};try{const e=await this._fetchWithTimeout(this.broadcastEndpointURL,o,null!==(r=t.timeout)&&void 0!==r?r:this.timeout);return await(null===(s=e.body)||void 0===s?void 0:s.cancel()),e.ok?"ok":"error"}catch(n){return"AbortError"===n.name?"timed out":"error"}}}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this.state=st.leaving;const t=()=>{this.socket.log("channel","leave ".concat(this.topic)),this._trigger(nt.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new yt(this,nt.leave,{},e),r.receive("ok",()=>{t(),s("ok")}).receive("timeout",()=>{t(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{null===r||void 0===r||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=st.closed,this.bindings={}}async _fetchWithTimeout(e,t,r){const s=new AbortController,n=setTimeout(()=>s.abort(),r),a=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:s.signal}));return clearTimeout(n),a}_push(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.timeout;if(!this.joinedOnce)throw"tried to push '".concat(e,"' to '").concat(this.topic,"' before joining. Use channel.subscribe() before pushing events");let s=new yt(this,e,t,r);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>100){const e=this.pushBuffer.shift();e&&(e.destroy(),this.socket.log("channel","discarded push due to buffer overflow: ".concat(e.event),e.payload))}}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var s,n;const a=e.toLocaleLowerCase(),{close:i,error:o,leave:l,join:c}=nt;if(r&&[i,o,l,c].indexOf(a)>=0&&r!==this._joinRef())return;let d=this._onMessage(a,t,r);if(t&&!d)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?null===(s=this.bindings.postgres_changes)||void 0===s||s.filter(e=>{var t,r,s;return"*"===(null===(t=e.filter)||void 0===t?void 0:t.event)||(null===(s=null===(r=e.filter)||void 0===r?void 0:r.event)||void 0===s?void 0:s.toLocaleLowerCase())===a}).map(e=>e.callback(d,r)):null===(n=this.bindings[a])||void 0===n||n.filter(e=>{var r,s,n,i,o,l;if(["broadcast","presence","postgres_changes"].includes(a)){if("id"in e){const a=e.id,i=null===(r=e.filter)||void 0===r?void 0:r.event;return a&&(null===(s=t.ids)||void 0===s?void 0:s.includes(a))&&("*"===i||(null===i||void 0===i?void 0:i.toLocaleLowerCase())===(null===(n=t.data)||void 0===n?void 0:n.type.toLocaleLowerCase()))}{const r=null===(o=null===(i=null===e||void 0===e?void 0:e.filter)||void 0===i?void 0:i.event)||void 0===o?void 0:o.toLocaleLowerCase();return"*"===r||r===(null===(l=null===t||void 0===t?void 0:t.event)||void 0===l?void 0:l.toLocaleLowerCase())}}return e.type.toLocaleLowerCase()===a}).map(e=>{if("object"===typeof d&&"ids"in d){const e=d.data,{schema:t,table:r,commit_timestamp:s,type:n,errors:a}=e,i={schema:t,table:r,commit_timestamp:s,eventType:n,new:{},old:{},errors:a};d=Object.assign(Object.assign({},i),this._getPayloadRecords(e))}e.callback(d,r)})}_isClosed(){return this.state===st.closed}_isJoined(){return this.state===st.joined}_isJoining(){return this.state===st.joining}_isLeaving(){return this.state===st.leaving}_replyEventName(e){return"chan_reply_".concat(e)}_on(e,t,r){const s=e.toLocaleLowerCase(),n={type:s,filter:t,callback:r};return this.bindings[s]?this.bindings[s].push(n):this.bindings[s]=[n],this}_off(e,t){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(e=>{var s;return!((null===(s=e.type)||void 0===s?void 0:s.toLocaleLowerCase())===r&&_t.isEqual(e.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(nt.close,{},e)}_onError(e){this._on(nt.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=st.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return"INSERT"!==e.type&&"UPDATE"!==e.type||(t.new=dt(e.columns,e.record)),"UPDATE"!==e.type&&"DELETE"!==e.type||(t.old=dt(e.columns,e.old_record)),t}}const Et=()=>{},Ct=25e3,Pt=10,At=100,Tt=[1e3,2e3,5e3,1e4];class It{constructor(e,t){var s;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=tt,this.transport=null,this.heartbeatIntervalMs=Ct,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Et,this.ref=0,this.reconnectTimer=null,this.logger=Et,this.conn=null,this.sendBuffer=[],this.serializer=new lt,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return Promise.resolve().then(r.bind(r,630)).then(e=>{let{default:r}=e;return r(...t)}).catch(e=>{throw new Error("Failed to load @supabase/node-fetch: ".concat(e.message,". ")+"This is required for HTTP requests in Node.js environments without native fetch.")})}:fetch),function(){return t(...arguments)}},!(null===(s=null===t||void 0===t?void 0:t.params)||void 0===s?void 0:s.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint="".concat(e,"/").concat(at.websocket),this.httpEndpoint=bt(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(null===t||void 0===t?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||null!==this.conn&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Xe.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;if(t.includes("Node.js"))throw new Error("".concat(t,"\n\n")+'To use Realtime in Node.js, you need to provide a WebSocket implementation:\n\nOption 1: Use Node.js 22+ which has native WebSocket support\nOption 2: Install and provide the "ws" package:\n\n  npm install ws\n\n  import ws from "ws"\n  const client = new RealtimeClient(url, {\n    ...options,\n    transport: ws\n  })');throw new Error("WebSocket not available: ".concat(t))}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:"1.0.0"}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},e?this.conn.close(e,null!==t&&void 0!==t?t:""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return 0===this.channels.length&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(e=>e.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case rt.connecting:return it.Connecting;case rt.open:return it.Open;case rt.closing:return it.Closing;default:return it.Closed}}isConnected(){return this.connectionState()===it.Open}isConnecting(){return"connecting"===this._connectionState}isDisconnecting(){return"disconnecting"===this._connectionState}channel(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}};const r="realtime:".concat(e),s=this.getChannels().find(e=>e.topic===r);if(s)return s;{const r=new _t("realtime:".concat(e),t,this);return this.channels.push(r),r}}push(e){const{topic:t,event:r,payload:s,ref:n}=e,a=()=>{this.encode(e,e=>{var t;null===(t=this.conn)||void 0===t||t.send(e)})};this.log("push","".concat(t," ").concat(r," (").concat(n,")"),s),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(wn){this.log("error","error in heartbeat callback",wn)}return this._wasManualDisconnect=!1,null===(e=this.conn)||void 0===e||e.close(1e3,"heartbeat timeout"),void setTimeout(()=>{var e;this.isConnected()||null===(e=this.reconnectTimer)||void 0===e||e.scheduleTimeout()},At)}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(wn){this.log("error","error in heartbeat callback",wn)}this._setAuthSafely("heartbeat")}else try{this.heartbeatCallback("disconnected")}catch(wn){this.log("error","error in heartbeat callback",wn)}}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(t=>t.topic===e&&(t._isJoined()||t._isJoining()));t&&(this.log("transport",'leaving duplicate topic "'.concat(e,'"')),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,e=>{if("phoenix"===e.topic&&"phx_reply"===e.event)try{this.heartbeatCallback("ok"===e.payload.status?"ok":"error")}catch(wn){this.log("error","error in heartbeat callback",wn)}e.ref&&e.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:t,event:r,payload:s,ref:n}=e,a=n?"(".concat(n,")"):"",i=s.status||"";this.log("receive","".concat(i," ").concat(t," ").concat(r," ").concat(a).trim(),s),this.channels.filter(e=>e._isMember(t)).forEach(e=>e._trigger(r,s,n)),this._triggerStateCallbacks("message",e)})}_clearTimer(e){var t;"heartbeat"===e&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):"reconnect"===e&&(null===(t=this.reconnectTimer)||void 0===t||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport","connected to ".concat(this.endpointURL())),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker","starting worker for from ".concat(this.workerUrl)):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this.workerRef.terminate()},this.workerRef.onmessage=e=>{"keepAlive"===e.data.event&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||null===(t=this.reconnectTimer)||void 0===t||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport","".concat(e)),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(nt.error))}_appendParams(e,t){if(0===Object.keys(t).length)return e;const r=e.match(/\?/)?"&":"?",s=new URLSearchParams(t);return"".concat(e).concat(r).concat(s)}_workerObjectUrl(e){let t;if(e)t=e;else{const e=new Blob(['\n  addEventListener("message", (e) => {\n    if (e.data.event === "start") {\n      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);\n    }\n  });'],{type:"application/javascript"});t=URL.createObjectURL(e)}return t}_setConnectionState(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._connectionState=e,"connecting"===e?this._wasManualDisconnect=!1:"disconnecting"===e&&(this._wasManualDisconnect=t)}async _performAuth(){let e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e=t||(this.accessToken?await this.accessToken():this.accessTokenValue),this.accessTokenValue!=e&&(this.accessTokenValue=e,this.channels.forEach(t=>{const r={access_token:e,version:et};e&&t.updateJoinPayload(r),t.joinedOnce&&t._isJoined()&&t._push(nt.access_token,{access_token:e})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"general";this.setAuth().catch(t=>{this.log("error","error setting auth in ".concat(e),t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(t)}catch(wn){this.log("error","error in ".concat(e," callback"),wn)}})}catch(wn){this.log("error","error triggering ".concat(e," callbacks"),wn)}}_setupReconnectionTimer(){this.reconnectTimer=new ct(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Pt)},this.reconnectAfterMs)}_initializeOptions(e){var t,r,s,n,a,i,o,l,c;if(this.transport=null!==(t=null===e||void 0===e?void 0:e.transport)&&void 0!==t?t:null,this.timeout=null!==(r=null===e||void 0===e?void 0:e.timeout)&&void 0!==r?r:tt,this.heartbeatIntervalMs=null!==(s=null===e||void 0===e?void 0:e.heartbeatIntervalMs)&&void 0!==s?s:Ct,this.worker=null!==(n=null===e||void 0===e?void 0:e.worker)&&void 0!==n&&n,this.accessToken=null!==(a=null===e||void 0===e?void 0:e.accessToken)&&void 0!==a?a:null,this.heartbeatCallback=null!==(i=null===e||void 0===e?void 0:e.heartbeatCallback)&&void 0!==i?i:Et,(null===e||void 0===e?void 0:e.params)&&(this.params=e.params),(null===e||void 0===e?void 0:e.logger)&&(this.logger=e.logger),((null===e||void 0===e?void 0:e.logLevel)||(null===e||void 0===e?void 0:e.log_level))&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=null!==(o=null===e||void 0===e?void 0:e.reconnectAfterMs)&&void 0!==o?o:e=>Tt[e-1]||1e4,this.encode=null!==(l=null===e||void 0===e?void 0:e.encode)&&void 0!==l?l:(e,t)=>t(JSON.stringify(e)),this.decode=null!==(c=null===e||void 0===e?void 0:e.decode)&&void 0!==c?c:this.serializer.decode.bind(this.serializer),this.worker){if("undefined"!==typeof window&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=null===e||void 0===e?void 0:e.workerUrl}}}class Rt extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Ot(e){return"object"===typeof e&&null!==e&&"__isStorageError"in e}class Lt extends Rt{constructor(e,t,r){super(e),this.name="StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Dt extends Rt{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var zt=function(e,t,r,s){return new(r||(r=Promise))(function(n,a){function i(e){try{l(s.next(e))}catch(wn){a(wn)}}function o(e){try{l(s.throw(e))}catch(wn){a(wn)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(i,o)}l((s=s.apply(e,t||[])).next())})};const Mt=e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return Promise.resolve().then(r.bind(r,630)).then(e=>{let{default:r}=e;return r(...t)})}:fetch),function(){return t(...arguments)}},Ft=e=>{if(Array.isArray(e))return e.map(e=>Ft(e));if("function"===typeof e||e!==Object(e))return e;const t={};return Object.entries(e).forEach(e=>{let[r,s]=e;const n=r.replace(/([-_][a-z])/gi,e=>e.toUpperCase().replace(/[-_]/g,""));t[n]=Ft(s)}),t};var Ut=function(e,t,r,s){return new(r||(r=Promise))(function(n,a){function i(e){try{l(s.next(e))}catch(wn){a(wn)}}function o(e){try{l(s.throw(e))}catch(wn){a(wn)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(i,o)}l((s=s.apply(e,t||[])).next())})};const Bt=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Vt=(e,t,s)=>Ut(void 0,void 0,void 0,function*(){const n=yield zt(void 0,void 0,void 0,function*(){return"undefined"===typeof Response?(yield Promise.resolve().then(r.bind(r,630))).Response:Response});e instanceof n&&!(null===s||void 0===s?void 0:s.noResolveJson)?e.json().then(r=>{const s=e.status||500,n=(null===r||void 0===r?void 0:r.statusCode)||s+"";t(new Lt(Bt(r),s,n))}).catch(e=>{t(new Dt(Bt(e),e))}):t(new Dt(Bt(e),e))}),qt=(e,t,r,s)=>{const n={method:e,headers:(null===t||void 0===t?void 0:t.headers)||{}};return"GET"!==e&&s?((e=>{if("object"!==typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)})(s)?(n.headers=Object.assign({"Content-Type":"application/json"},null===t||void 0===t?void 0:t.headers),n.body=JSON.stringify(s)):n.body=s,(null===t||void 0===t?void 0:t.duplex)&&(n.duplex=t.duplex),Object.assign(Object.assign({},n),r)):n};function Ht(e,t,r,s,n,a){return Ut(this,void 0,void 0,function*(){return new Promise((i,o)=>{e(r,qt(t,s,n,a)).then(e=>{if(!e.ok)throw e;return(null===s||void 0===s?void 0:s.noResolveJson)?e:e.json()}).then(e=>i(e)).catch(e=>Vt(e,o,s))})})}function Wt(e,t,r,s){return Ut(this,void 0,void 0,function*(){return Ht(e,"GET",t,r,s)})}function Gt(e,t,r,s,n){return Ut(this,void 0,void 0,function*(){return Ht(e,"POST",t,s,n,r)})}function Kt(e,t,r,s,n){return Ut(this,void 0,void 0,function*(){return Ht(e,"PUT",t,s,n,r)})}function Jt(e,t,r,s,n){return Ut(this,void 0,void 0,function*(){return Ht(e,"DELETE",t,s,n,r)})}var Zt=r(382).hp,$t=function(e,t,r,s){return new(r||(r=Promise))(function(n,a){function i(e){try{l(s.next(e))}catch(wn){a(wn)}}function o(e){try{l(s.throw(e))}catch(wn){a(wn)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(i,o)}l((s=s.apply(e,t||[])).next())})};const Qt={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Yt={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Xt{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0;this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=r,this.fetch=Mt(s)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,t,r,s){return $t(this,void 0,void 0,function*(){try{let n;const a=Object.assign(Object.assign({},Yt),s);let i=Object.assign(Object.assign({},this.headers),"POST"===e&&{"x-upsert":String(a.upsert)});const o=a.metadata;"undefined"!==typeof Blob&&r instanceof Blob?(n=new FormData,n.append("cacheControl",a.cacheControl),o&&n.append("metadata",this.encodeMetadata(o)),n.append("",r)):"undefined"!==typeof FormData&&r instanceof FormData?(n=r,n.append("cacheControl",a.cacheControl),o&&n.append("metadata",this.encodeMetadata(o))):(n=r,i["cache-control"]="max-age=".concat(a.cacheControl),i["content-type"]=a.contentType,o&&(i["x-metadata"]=this.toBase64(this.encodeMetadata(o)))),(null===s||void 0===s?void 0:s.headers)&&(i=Object.assign(Object.assign({},i),s.headers));const l=this._removeEmptyFolders(t),c=this._getFinalPath(l),d=yield("PUT"==e?Kt:Gt)(this.fetch,"".concat(this.url,"/object/").concat(c),n,Object.assign({headers:i},(null===a||void 0===a?void 0:a.duplex)?{duplex:a.duplex}:{}));return{data:{path:l,id:d.Id,fullPath:d.Key},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ot(n))return{data:null,error:n};throw n}})}upload(e,t,r){return $t(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,r)})}uploadToSignedUrl(e,t,r,s){return $t(this,void 0,void 0,function*(){const n=this._removeEmptyFolders(e),a=this._getFinalPath(n),i=new URL(this.url+"/object/upload/sign/".concat(a));i.searchParams.set("token",t);try{let e;const t=Object.assign({upsert:Yt.upsert},s),a=Object.assign(Object.assign({},this.headers),{"x-upsert":String(t.upsert)});"undefined"!==typeof Blob&&r instanceof Blob?(e=new FormData,e.append("cacheControl",t.cacheControl),e.append("",r)):"undefined"!==typeof FormData&&r instanceof FormData?(e=r,e.append("cacheControl",t.cacheControl)):(e=r,a["cache-control"]="max-age=".concat(t.cacheControl),a["content-type"]=t.contentType);return{data:{path:n,fullPath:(yield Kt(this.fetch,i.toString(),e,{headers:a})).Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Ot(o))return{data:null,error:o};throw o}})}createSignedUploadUrl(e,t){return $t(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const s=Object.assign({},this.headers);(null===t||void 0===t?void 0:t.upsert)&&(s["x-upsert"]="true");const n=yield Gt(this.fetch,"".concat(this.url,"/object/upload/sign/").concat(r),{},{headers:s}),a=new URL(this.url+n.url),i=a.searchParams.get("token");if(!i)throw new Rt("No token returned by API");return{data:{signedUrl:a.toString(),path:e,token:i},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ot(r))return{data:null,error:r};throw r}})}update(e,t,r){return $t(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,r)})}move(e,t,r){return $t(this,void 0,void 0,function*(){try{return{data:yield Gt(this.fetch,"".concat(this.url,"/object/move"),{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null===r||void 0===r?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ot(s))return{data:null,error:s};throw s}})}copy(e,t,r){return $t(this,void 0,void 0,function*(){try{return{data:{path:(yield Gt(this.fetch,"".concat(this.url,"/object/copy"),{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null===r||void 0===r?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ot(s))return{data:null,error:s};throw s}})}createSignedUrl(e,t,r){return $t(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),n=yield Gt(this.fetch,"".concat(this.url,"/object/sign/").concat(s),Object.assign({expiresIn:t},(null===r||void 0===r?void 0:r.transform)?{transform:r.transform}:{}),{headers:this.headers});const a=(null===r||void 0===r?void 0:r.download)?"&download=".concat(!0===r.download?"":r.download):"";return n={signedUrl:encodeURI("".concat(this.url).concat(n.signedURL).concat(a))},{data:n,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ot(s))return{data:null,error:s};throw s}})}createSignedUrls(e,t,r){return $t(this,void 0,void 0,function*(){try{const s=yield Gt(this.fetch,"".concat(this.url,"/object/sign/").concat(this.bucketId),{expiresIn:t,paths:e},{headers:this.headers}),n=(null===r||void 0===r?void 0:r.download)?"&download=".concat(!0===r.download?"":r.download):"";return{data:s.map(e=>Object.assign(Object.assign({},e),{signedUrl:e.signedURL?encodeURI("".concat(this.url).concat(e.signedURL).concat(n)):null})),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ot(s))return{data:null,error:s};throw s}})}download(e,t){return $t(this,void 0,void 0,function*(){const r="undefined"!==typeof(null===t||void 0===t?void 0:t.transform)?"render/image/authenticated":"object",s=this.transformOptsToQueryString((null===t||void 0===t?void 0:t.transform)||{}),n=s?"?".concat(s):"";try{const t=this._getFinalPath(e),s=yield Wt(this.fetch,"".concat(this.url,"/").concat(r,"/").concat(t).concat(n),{headers:this.headers,noResolveJson:!0});return{data:yield s.blob(),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Ot(a))return{data:null,error:a};throw a}})}info(e){return $t(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const e=yield Wt(this.fetch,"".concat(this.url,"/object/info/").concat(t),{headers:this.headers});return{data:Ft(e),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ot(r))return{data:null,error:r};throw r}})}exists(e){return $t(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield function(e,t,r,s){return Ut(this,void 0,void 0,function*(){return Ht(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),s)})}(this.fetch,"".concat(this.url,"/object/").concat(t),{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ot(r)&&r instanceof Dt){const e=r.originalError;if([400,404].includes(null===e||void 0===e?void 0:e.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,t){const r=this._getFinalPath(e),s=[],n=(null===t||void 0===t?void 0:t.download)?"download=".concat(!0===t.download?"":t.download):"";""!==n&&s.push(n);const a="undefined"!==typeof(null===t||void 0===t?void 0:t.transform)?"render/image":"object",i=this.transformOptsToQueryString((null===t||void 0===t?void 0:t.transform)||{});""!==i&&s.push(i);let o=s.join("&");return""!==o&&(o="?".concat(o)),{data:{publicUrl:encodeURI("".concat(this.url,"/").concat(a,"/public/").concat(r).concat(o))}}}remove(e){return $t(this,void 0,void 0,function*(){try{return{data:yield Jt(this.fetch,"".concat(this.url,"/object/").concat(this.bucketId),{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ot(t))return{data:null,error:t};throw t}})}list(e,t,r){return $t(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},Qt),t),{prefix:e||""});return{data:yield Gt(this.fetch,"".concat(this.url,"/object/list/").concat(this.bucketId),s,{headers:this.headers},r),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ot(s))return{data:null,error:s};throw s}})}listV2(e,t){return $t(this,void 0,void 0,function*(){try{const r=Object.assign({},e);return{data:yield Gt(this.fetch,"".concat(this.url,"/object/list-v2/").concat(this.bucketId),r,{headers:this.headers},t),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ot(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return"undefined"!==typeof Zt?Zt.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return"".concat(this.bucketId,"/").concat(e.replace(/^\/+/,""))}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push("width=".concat(e.width)),e.height&&t.push("height=".concat(e.height)),e.resize&&t.push("resize=".concat(e.resize)),e.format&&t.push("format=".concat(e.format)),e.quality&&t.push("quality=".concat(e.quality)),t.join("&")}}const er={"X-Client-Info":"storage-js/".concat("2.12.1")};var tr=function(e,t,r,s){return new(r||(r=Promise))(function(n,a){function i(e){try{l(s.next(e))}catch(wn){a(wn)}}function o(e){try{l(s.throw(e))}catch(wn){a(wn)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(i,o)}l((s=s.apply(e,t||[])).next())})};class rr{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0;this.shouldThrowOnError=!1;const n=new URL(e);if(null===s||void 0===s?void 0:s.useNewHostname){/supabase\.(co|in|red)$/.test(n.hostname)&&!n.hostname.includes("storage.supabase.")&&(n.hostname=n.hostname.replace("supabase.","storage.supabase."))}this.url=n.href,this.headers=Object.assign(Object.assign({},er),t),this.fetch=Mt(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return tr(this,void 0,void 0,function*(){try{return{data:yield Wt(this.fetch,"".concat(this.url,"/bucket"),{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Ot(e))return{data:null,error:e};throw e}})}getBucket(e){return tr(this,void 0,void 0,function*(){try{return{data:yield Wt(this.fetch,"".concat(this.url,"/bucket/").concat(e),{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ot(t))return{data:null,error:t};throw t}})}createBucket(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{public:!1};return tr(this,void 0,void 0,function*(){try{return{data:yield Gt(this.fetch,"".concat(this.url,"/bucket"),{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ot(r))return{data:null,error:r};throw r}})}updateBucket(e,t){return tr(this,void 0,void 0,function*(){try{return{data:yield Kt(this.fetch,"".concat(this.url,"/bucket/").concat(e),{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ot(r))return{data:null,error:r};throw r}})}emptyBucket(e){return tr(this,void 0,void 0,function*(){try{return{data:yield Gt(this.fetch,"".concat(this.url,"/bucket/").concat(e,"/empty"),{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ot(t))return{data:null,error:t};throw t}})}deleteBucket(e){return tr(this,void 0,void 0,function*(){try{return{data:yield Jt(this.fetch,"".concat(this.url,"/bucket/").concat(e),{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ot(t))return{data:null,error:t};throw t}})}}class sr extends rr{constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},arguments.length>2?arguments[2]:void 0,arguments.length>3?arguments[3]:void 0)}from(e){return new Xt(this.url,this.headers,e,this.fetch)}}let nr="";nr="undefined"!==typeof Deno?"deno":"undefined"!==typeof document?"web":"undefined"!==typeof navigator&&"ReactNative"===navigator.product?"react-native":"node";const ar={headers:{"X-Client-Info":"supabase-js-".concat(nr,"/").concat("2.57.4")}},ir={schema:"public"},or={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},lr={};var cr=r(630),dr=function(e,t,r,s){return new(r||(r=Promise))(function(n,a){function i(e){try{l(s.next(e))}catch(wn){a(wn)}}function o(e){try{l(s.throw(e))}catch(wn){a(wn)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(i,o)}l((s=s.apply(e,t||[])).next())})};const ur=e=>{let t;return t=e||("undefined"===typeof fetch?cr.default:fetch),function(){return t(...arguments)}},mr=(e,t,r)=>{const s=ur(r),n="undefined"===typeof Headers?cr.Headers:Headers;return(r,a)=>dr(void 0,void 0,void 0,function*(){var i;const o=null!==(i=yield t())&&void 0!==i?i:e;let l=new n(null===a||void 0===a?void 0:a.headers);return l.has("apikey")||l.set("apikey",e),l.has("Authorization")||l.set("Authorization","Bearer ".concat(o)),s(r,Object.assign(Object.assign({},a),{headers:l}))})};var hr=function(e,t,r,s){return new(r||(r=Promise))(function(n,a){function i(e){try{l(s.next(e))}catch(wn){a(wn)}}function o(e){try{l(s.throw(e))}catch(wn){a(wn)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(i,o)}l((s=s.apply(e,t||[])).next())})};const pr="2.71.1",fr=3e4,xr=9e4,gr={"X-Client-Info":"gotrue-js/".concat(pr)},vr="X-Supabase-Api-Version",br={timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"},yr=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i;class jr extends Error{constructor(e,t,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=r}}function wr(e){return"object"===typeof e&&null!==e&&"__isAuthError"in e}class Nr extends jr{constructor(e,t,r){super(e,t,r),this.name="AuthApiError",this.status=t,this.code=r}}class Sr extends jr{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class kr extends jr{constructor(e,t,r,s){super(e,r,s),this.name=t,this.status=r}}class _r extends kr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class Er extends kr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Cr extends kr{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Pr extends kr{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Ar extends kr{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Tr extends kr{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Ir(e){return wr(e)&&"AuthRetryableFetchError"===e.name}class Rr extends kr{constructor(e,t,r){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=r}}class Or extends kr{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Lr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Dr=" \t\n\r=".split(""),zr=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Dr.length;t+=1)e[Dr[t].charCodeAt(0)]=-2;for(let t=0;t<Lr.length;t+=1)e[Lr[t].charCodeAt(0)]=t;return e})();function Mr(e,t,r){if(null!==e)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;r(Lr[e]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;r(Lr[e]),t.queuedBits-=6}}function Fr(e,t,r){const s=zr[e];if(!(s>-1)){if(-2===s)return;throw new Error('Invalid Base64-URL character "'.concat(String.fromCharCode(e),'"'))}for(t.queue=t.queue<<6|s,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8}function Ur(e){const t=[],r=e=>{t.push(String.fromCodePoint(e))},s={utf8seq:0,codepoint:0},n={queue:0,queuedBits:0},a=e=>{!function(e,t,r){if(0===t.utf8seq){if(e<=127)return void r(e);for(let r=1;r<6;r+=1)if(0===(e>>7-r&1)){t.utf8seq=r;break}if(2===t.utf8seq)t.codepoint=31&e;else if(3===t.utf8seq)t.codepoint=15&e;else{if(4!==t.utf8seq)throw new Error("Invalid UTF-8 sequence");t.codepoint=7&e}t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|63&e,t.utf8seq-=1,0===t.utf8seq&&r(t.codepoint)}}(e,s,r)};for(let i=0;i<e.length;i+=1)Fr(e.charCodeAt(i),n,a);return t.join("")}function Br(e,t){if(!(e<=127)){if(e<=2047)return t(192|e>>6),void t(128|63&e);if(e<=65535)return t(224|e>>12),t(128|e>>6&63),void t(128|63&e);if(e<=1114111)return t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),void t(128|63&e);throw new Error("Unrecognized Unicode codepoint: ".concat(e.toString(16)))}t(e)}function Vr(e,t){for(let r=0;r<e.length;r+=1){let s=e.charCodeAt(r);if(s>55295&&s<=56319){const t=1024*(s-55296)&65535;s=65536+(e.charCodeAt(r+1)-56320&65535|t),r+=1}Br(s,t)}}function qr(e){const t=[],r={queue:0,queuedBits:0},s=e=>{t.push(e)};for(let n=0;n<e.length;n+=1)Fr(e.charCodeAt(n),r,s);return new Uint8Array(t)}function Hr(e){const t=[],r={queue:0,queuedBits:0},s=e=>{t.push(e)};return e.forEach(e=>Mr(e,r,s)),Mr(null,r,s),t.join("")}const Wr=()=>"undefined"!==typeof window&&"undefined"!==typeof document,Gr={tested:!1,writable:!1},Kr=()=>{if(!Wr())return!1;try{if("object"!==typeof globalThis.localStorage)return!1}catch(wn){return!1}if(Gr.tested)return Gr.writable;const e="lswt-".concat(Math.random()).concat(Math.random());try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Gr.tested=!0,Gr.writable=!0}catch(wn){Gr.tested=!0,Gr.writable=!1}return Gr.writable};const Jr=e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return Promise.resolve().then(r.bind(r,630)).then(e=>{let{default:r}=e;return r(...t)})}:fetch),function(){return t(...arguments)}},Zr=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},$r=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch(s){return r}},Qr=async(e,t)=>{await e.removeItem(t)};class Yr{constructor(){this.promise=new Yr.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}function Xr(e){const t=e.split(".");if(3!==t.length)throw new Or("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!yr.test(t[r]))throw new Or("JWT not in base64url format");return{header:JSON.parse(Ur(t[0])),payload:JSON.parse(Ur(t[1])),signature:qr(t[2]),raw:{header:t[0],payload:t[1]}}}function es(e){return("0"+e.toString(16)).substr(-2)}async function ts(e){if(!("undefined"!==typeof crypto&&"undefined"!==typeof crypto.subtle&&"undefined"!==typeof TextEncoder))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const t=await async function(e){const t=(new TextEncoder).encode(e),r=await crypto.subtle.digest("SHA-256",t),s=new Uint8Array(r);return Array.from(s).map(e=>String.fromCharCode(e)).join("")}(e);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function rs(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const s=function(){const e=new Uint32Array(56);if("undefined"===typeof crypto){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",t=e.length;let r="";for(let s=0;s<56;s++)r+=e.charAt(Math.floor(Math.random()*t));return r}return crypto.getRandomValues(e),Array.from(e,es).join("")}();let n=s;r&&(n+="/PASSWORD_RECOVERY"),await Zr(e,"".concat(t,"-code-verifier"),n);const a=await ts(s);return[a,s===a?"plain":"s256"]}Yr.promiseConstructor=Promise;const ss=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;const ns=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function as(e){if(!ns.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function is(){return new Proxy({},{get:(e,t)=>{if("__isUserNotAvailableProxy"===t)return!0;if("symbol"===typeof t){const e=t.toString();if("Symbol(Symbol.toPrimitive)"===e||"Symbol(Symbol.toStringTag)"===e||"Symbol(util.inspect.custom)"===e)return}throw new Error('@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "'.concat(t,'" property of the session object is not supported. Please use getUser() instead.'))},set:(e,t)=>{throw new Error('@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "'.concat(t,'" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.'))},deleteProperty:(e,t)=>{throw new Error('@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "'.concat(t,'" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.'))}})}function os(e){return JSON.parse(JSON.stringify(e))}var ls=function(e,t){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(r[s[n]]=e[s[n]])}return r};const cs=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),ds=[502,503,504];async function us(e){var t,r;if(!("object"===typeof(r=e)&&null!==r&&"status"in r&&"ok"in r&&"json"in r&&"function"===typeof r.json))throw new Tr(cs(e),0);if(ds.includes(e.status))throw new Tr(cs(e),e.status);let s,n;try{s=await e.json()}catch(wn){throw new Sr(cs(wn),wn)}const a=function(e){const t=e.headers.get(vr);if(!t)return null;if(!t.match(ss))return null;try{return new Date("".concat(t,"T00:00:00.0Z"))}catch(wn){return null}}(e);if(a&&a.getTime()>=br.timestamp&&"object"===typeof s&&s&&"string"===typeof s.code?n=s.code:"object"===typeof s&&s&&"string"===typeof s.error_code&&(n=s.error_code),n){if("weak_password"===n)throw new Rr(cs(s),e.status,(null===(t=s.weak_password)||void 0===t?void 0:t.reasons)||[]);if("session_not_found"===n)throw new _r}else if("object"===typeof s&&s&&"object"===typeof s.weak_password&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((e,t)=>e&&"string"===typeof t,!0))throw new Rr(cs(s),e.status,s.weak_password.reasons);throw new Nr(cs(s),e.status||500,n)}async function ms(e,t,r,s){var n;const a=Object.assign({},null===s||void 0===s?void 0:s.headers);a[vr]||(a[vr]=br.name),(null===s||void 0===s?void 0:s.jwt)&&(a.Authorization="Bearer ".concat(s.jwt));const i=null!==(n=null===s||void 0===s?void 0:s.query)&&void 0!==n?n:{};(null===s||void 0===s?void 0:s.redirectTo)&&(i.redirect_to=s.redirectTo);const o=Object.keys(i).length?"?"+new URLSearchParams(i).toString():"",l=await async function(e,t,r,s,n,a){const i=((e,t,r,s)=>{const n={method:e,headers:(null===t||void 0===t?void 0:t.headers)||{}};return"GET"===e?n:(n.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},null===t||void 0===t?void 0:t.headers),n.body=JSON.stringify(s),Object.assign(Object.assign({},n),r))})(t,s,n,a);let o;try{o=await e(r,Object.assign({},i))}catch(wn){throw console.error(wn),new Tr(cs(wn),0)}o.ok||await us(o);if(null===s||void 0===s?void 0:s.noResolveJson)return o;try{return await o.json()}catch(wn){await us(wn)}}(e,t,r+o,{headers:a,noResolveJson:null===s||void 0===s?void 0:s.noResolveJson},{},null===s||void 0===s?void 0:s.body);return(null===s||void 0===s?void 0:s.xform)?null===s||void 0===s?void 0:s.xform(l):{data:Object.assign({},l),error:null}}function hs(e){var t;let r=null;var s;(function(e){return e.access_token&&e.refresh_token&&e.expires_in})(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=(s=e.expires_in,Math.round(Date.now()/1e3)+s)));return{data:{session:r,user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function ps(e){const t=hs(e);return!t.error&&e.weak_password&&"object"===typeof e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&"string"===typeof e.weak_password.message&&e.weak_password.reasons.reduce((e,t)=>e&&"string"===typeof t,!0)&&(t.data.weak_password=e.weak_password),t}function fs(e){var t;return{data:{user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function xs(e){return{data:e,error:null}}function gs(e){const{action_link:t,email_otp:r,hashed_token:s,redirect_to:n,verification_type:a}=e,i=ls(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]);return{data:{properties:{action_link:t,email_otp:r,hashed_token:s,redirect_to:n,verification_type:a},user:Object.assign({},i)},error:null}}function vs(e){return e}const bs=["global","local","others"];var ys=function(e,t){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(r[s[n]]=e[s[n]])}return r};class js{constructor(e){let{url:t="",headers:r={},fetch:s}=e;this.url=t,this.headers=r,this.fetch=Jr(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:bs[0];if(bs.indexOf(t)<0)throw new Error("@supabase/auth-js: Parameter scope must be one of ".concat(bs.join(", ")));try{return await ms(this.fetch,"POST","".concat(this.url,"/logout?scope=").concat(t),{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(wr(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{return await ms(this.fetch,"POST","".concat(this.url,"/invite"),{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:fs})}catch(r){if(wr(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:t}=e,r=ys(e,["options"]),s=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(s.new_email=null===r||void 0===r?void 0:r.newEmail,delete s.newEmail),await ms(this.fetch,"POST","".concat(this.url,"/admin/generate_link"),{body:s,headers:this.headers,xform:gs,redirectTo:null===t||void 0===t?void 0:t.redirectTo})}catch(t){if(wr(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await ms(this.fetch,"POST","".concat(this.url,"/admin/users"),{body:e,headers:this.headers,xform:fs})}catch(t){if(wr(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,r,s,n,a,i,o;try{const l={nextPage:null,lastPage:0,total:0},c=await ms(this.fetch,"GET","".concat(this.url,"/admin/users"),{headers:this.headers,noResolveJson:!0,query:{page:null!==(r=null===(t=null===e||void 0===e?void 0:e.page)||void 0===t?void 0:t.toString())&&void 0!==r?r:"",per_page:null!==(n=null===(s=null===e||void 0===e?void 0:e.perPage)||void 0===s?void 0:s.toString())&&void 0!==n?n:""},xform:vs});if(c.error)throw c.error;const d=await c.json(),u=null!==(a=c.headers.get("x-total-count"))&&void 0!==a?a:0,m=null!==(o=null===(i=c.headers.get("link"))||void 0===i?void 0:i.split(","))&&void 0!==o?o:[];return m.length>0&&(m.forEach(e=>{const t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),r=JSON.parse(e.split(";")[1].split("=")[1]);l["".concat(r,"Page")]=t}),l.total=parseInt(u)),{data:Object.assign(Object.assign({},d),l),error:null}}catch(l){if(wr(l))return{data:{users:[]},error:l};throw l}}async getUserById(e){as(e);try{return await ms(this.fetch,"GET","".concat(this.url,"/admin/users/").concat(e),{headers:this.headers,xform:fs})}catch(t){if(wr(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){as(e);try{return await ms(this.fetch,"PUT","".concat(this.url,"/admin/users/").concat(e),{body:t,headers:this.headers,xform:fs})}catch(r){if(wr(r))return{data:{user:null},error:r};throw r}}async deleteUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];as(e);try{return await ms(this.fetch,"DELETE","".concat(this.url,"/admin/users/").concat(e),{headers:this.headers,body:{should_soft_delete:t},xform:fs})}catch(r){if(wr(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){as(e.userId);try{const{data:t,error:r}=await ms(this.fetch,"GET","".concat(this.url,"/admin/users/").concat(e.userId,"/factors"),{headers:this.headers,xform:e=>({data:{factors:e},error:null})});return{data:t,error:r}}catch(t){if(wr(t))return{data:null,error:t};throw t}}async _deleteFactor(e){as(e.userId),as(e.id);try{return{data:await ms(this.fetch,"DELETE","".concat(this.url,"/admin/users/").concat(e.userId,"/factors/").concat(e.id),{headers:this.headers}),error:null}}catch(t){if(wr(t))return{data:null,error:t};throw t}}}function ws(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const Ns=!!(globalThis&&Kr()&&globalThis.localStorage&&"true"===globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug"));class Ss extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class ks extends Ss{}async function _s(e,t,r){Ns&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const s=new globalThis.AbortController;return t>0&&setTimeout(()=>{s.abort(),Ns&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,0===t?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async s=>{if(!s){if(0===t)throw Ns&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new ks('Acquiring an exclusive Navigator LockManager lock "'.concat(e,'" immediately failed'));if(Ns)try{const e=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(e,null,"  "))}catch(wn){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",wn)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}Ns&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await r()}finally{Ns&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}))}!function(){if("object"!==typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(wn){"undefined"!==typeof self&&(self.globalThis=self)}}();const Es={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:gr,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Cs(e,t,r){return await r()}const Ps={};class As{constructor(e){var t,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=As.nextInstanceID,As.nextInstanceID+=1,this.instanceID>0&&Wr()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},Es),e);if(this.logDebugMessages=!!s.debug,"function"===typeof s.debug&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new js({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=Jr(s.fetch),this.lock=s.lock||Cs,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:Wr()&&(null===(t=null===globalThis||void 0===globalThis?void 0:globalThis.navigator)||void 0===t?void 0:t.locks)?this.lock=_s:this.lock=Cs,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:Kr()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=ws(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=ws(this.memoryStorage)),Wr()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(wn){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",wn)}null===(r=this.broadcastChannel)||void 0===r||r.addEventListener("message",async e=>{this._debug("received broadcast notification from other tab or client",e),await this._notifyAllSubscribers(e.data.event,e.data.session,!1)})}this.initialize()}get jwks(){var e,t;return null!==(t=null===(e=Ps[this.storageKey])||void 0===e?void 0:e.jwks)&&void 0!==t?t:{keys:[]}}set jwks(e){Ps[this.storageKey]=Object.assign(Object.assign({},Ps[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return null!==(t=null===(e=Ps[this.storageKey])||void 0===e?void 0:e.cachedAt)&&void 0!==t?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Ps[this.storageKey]=Object.assign(Object.assign({},Ps[this.storageKey]),{cachedAt:e})}_debug(){if(this.logDebugMessages){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger("GoTrueClient@".concat(this.instanceID," (").concat(pr,") ").concat((new Date).toISOString()),...t)}return this}async initialize(){return this.initializePromise||(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))()),await this.initializePromise}async _initialize(){var e;try{const t=function(e){const t={},r=new URL(e);if(r.hash&&"#"===r.hash[0])try{new URLSearchParams(r.hash.substring(1)).forEach((e,r)=>{t[r]=e})}catch(wn){}return r.searchParams.forEach((e,r)=>{t[r]=e}),t}(window.location.href);let r="none";if(this._isImplicitGrantCallback(t)?r="implicit":await this._isPKCECallback(t)&&(r="pkce"),Wr()&&this.detectSessionInUrl&&"none"!==r){const{data:s,error:n}=await this._getSessionFromURL(t,r);if(n){if(this._debug("#_initialize()","error detecting session from URL",n),function(e){return wr(e)&&"AuthImplicitGrantRedirectError"===e.name}(n)){const t=null===(e=n.details)||void 0===e?void 0:e.code;if("identity_already_exists"===t||"identity_not_found"===t||"single_identity_not_deletable"===t)return{error:n}}return await this._removeSession(),{error:n}}const{session:a,redirectType:i}=s;return this._debug("#_initialize()","detected session in URL",a,"redirect type",i),await this._saveSession(a),setTimeout(async()=>{"recovery"===i?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return wr(t)?{error:t}:{error:new Sr("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,r,s;try{const n=await ms(this.fetch,"POST","".concat(this.url,"/signup"),{headers:this.headers,body:{data:null!==(r=null===(t=null===e||void 0===e?void 0:e.options)||void 0===t?void 0:t.data)&&void 0!==r?r:{},gotrue_meta_security:{captcha_token:null===(s=null===e||void 0===e?void 0:e.options)||void 0===s?void 0:s.captchaToken}},xform:hs}),{data:a,error:i}=n;if(i||!a)return{data:{user:null,session:null},error:i};const o=a.session,l=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:l,session:o},error:null}}catch(n){if(wr(n))return{data:{user:null,session:null},error:n};throw n}}async signUp(e){var t,r,s;try{let n;if("email"in e){const{email:r,password:s,options:a}=e;let i=null,o=null;"pkce"===this.flowType&&([i,o]=await rs(this.storage,this.storageKey)),n=await ms(this.fetch,"POST","".concat(this.url,"/signup"),{headers:this.headers,redirectTo:null===a||void 0===a?void 0:a.emailRedirectTo,body:{email:r,password:s,data:null!==(t=null===a||void 0===a?void 0:a.data)&&void 0!==t?t:{},gotrue_meta_security:{captcha_token:null===a||void 0===a?void 0:a.captchaToken},code_challenge:i,code_challenge_method:o},xform:hs})}else{if(!("phone"in e))throw new Cr("You must provide either an email or phone number and a password");{const{phone:t,password:a,options:i}=e;n=await ms(this.fetch,"POST","".concat(this.url,"/signup"),{headers:this.headers,body:{phone:t,password:a,data:null!==(r=null===i||void 0===i?void 0:i.data)&&void 0!==r?r:{},channel:null!==(s=null===i||void 0===i?void 0:i.channel)&&void 0!==s?s:"sms",gotrue_meta_security:{captcha_token:null===i||void 0===i?void 0:i.captchaToken}},xform:hs})}}const{data:a,error:i}=n;if(i||!a)return{data:{user:null,session:null},error:i};const o=a.session,l=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:l,session:o},error:null}}catch(n){if(wr(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithPassword(e){try{let t;if("email"in e){const{email:r,password:s,options:n}=e;t=await ms(this.fetch,"POST","".concat(this.url,"/token?grant_type=password"),{headers:this.headers,body:{email:r,password:s,gotrue_meta_security:{captcha_token:null===n||void 0===n?void 0:n.captchaToken}},xform:ps})}else{if(!("phone"in e))throw new Cr("You must provide either an email or phone number and a password");{const{phone:r,password:s,options:n}=e;t=await ms(this.fetch,"POST","".concat(this.url,"/token?grant_type=password"),{headers:this.headers,body:{phone:r,password:s,gotrue_meta_security:{captcha_token:null===n||void 0===n?void 0:n.captchaToken}},xform:ps})}}const{data:r,error:s}=t;return s?{data:{user:null,session:null},error:s}:r&&r.session&&r.user?(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s}):{data:{user:null,session:null},error:new Er}}catch(t){if(wr(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,r,s,n;return await this._handleProviderSignIn(e.provider,{redirectTo:null===(t=e.options)||void 0===t?void 0:t.redirectTo,scopes:null===(r=e.options)||void 0===r?void 0:r.scopes,queryParams:null===(s=e.options)||void 0===s?void 0:s.queryParams,skipBrowserRedirect:null===(n=e.options)||void 0===n?void 0:n.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;if("solana"===t)return await this.signInWithSolana(e);throw new Error('@supabase/auth-js: Unsupported chain "'.concat(t,'"'))}async signInWithSolana(e){var t,r,s,n,a,i,o,l,c,d,u,m;let h,p;if("message"in e)h=e.message,p=e.signature;else{const{chain:u,wallet:m,statement:f,options:x}=e;let g;if(Wr())if("object"===typeof m)g=m;else{const e=window;if(!("solana"in e)||"object"!==typeof e.solana||!("signIn"in e.solana&&"function"===typeof e.solana.signIn||"signMessage"in e.solana&&"function"===typeof e.solana.signMessage))throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.");g=e.solana}else{if("object"!==typeof m||!(null===x||void 0===x?void 0:x.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");g=m}const v=new URL(null!==(t=null===x||void 0===x?void 0:x.url)&&void 0!==t?t:window.location.href);if("signIn"in g&&g.signIn){const e=await g.signIn(Object.assign(Object.assign(Object.assign({issuedAt:(new Date).toISOString()},null===x||void 0===x?void 0:x.signInWithSolana),{version:"1",domain:v.host,uri:v.href}),f?{statement:f}:null));let t;if(Array.isArray(e)&&e[0]&&"object"===typeof e[0])t=e[0];else{if(!(e&&"object"===typeof e&&"signedMessage"in e&&"signature"in e))throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");t=e}if(!("signedMessage"in t&&"signature"in t&&("string"===typeof t.signedMessage||t.signedMessage instanceof Uint8Array)&&t.signature instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields");h="string"===typeof t.signedMessage?t.signedMessage:(new TextDecoder).decode(t.signedMessage),p=t.signature}else{if(!("signMessage"in g)||"function"!==typeof g.signMessage||!("publicKey"in g)||"object"!==typeof g||!g.publicKey||!("toBase58"in g.publicKey)||"function"!==typeof g.publicKey.toBase58)throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");h=["".concat(v.host," wants you to sign in with your Solana account:"),g.publicKey.toBase58(),...f?["",f,""]:[""],"Version: 1","URI: ".concat(v.href),"Issued At: ".concat(null!==(s=null===(r=null===x||void 0===x?void 0:x.signInWithSolana)||void 0===r?void 0:r.issuedAt)&&void 0!==s?s:(new Date).toISOString()),...(null===(n=null===x||void 0===x?void 0:x.signInWithSolana)||void 0===n?void 0:n.notBefore)?["Not Before: ".concat(x.signInWithSolana.notBefore)]:[],...(null===(a=null===x||void 0===x?void 0:x.signInWithSolana)||void 0===a?void 0:a.expirationTime)?["Expiration Time: ".concat(x.signInWithSolana.expirationTime)]:[],...(null===(i=null===x||void 0===x?void 0:x.signInWithSolana)||void 0===i?void 0:i.chainId)?["Chain ID: ".concat(x.signInWithSolana.chainId)]:[],...(null===(o=null===x||void 0===x?void 0:x.signInWithSolana)||void 0===o?void 0:o.nonce)?["Nonce: ".concat(x.signInWithSolana.nonce)]:[],...(null===(l=null===x||void 0===x?void 0:x.signInWithSolana)||void 0===l?void 0:l.requestId)?["Request ID: ".concat(x.signInWithSolana.requestId)]:[],...(null===(d=null===(c=null===x||void 0===x?void 0:x.signInWithSolana)||void 0===c?void 0:c.resources)||void 0===d?void 0:d.length)?["Resources",...x.signInWithSolana.resources.map(e=>"- ".concat(e))]:[]].join("\n");const e=await g.signMessage((new TextEncoder).encode(h),"utf8");if(!e||!(e instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");p=e}}try{const{data:t,error:r}=await ms(this.fetch,"POST","".concat(this.url,"/token?grant_type=web3"),{headers:this.headers,body:Object.assign({chain:"solana",message:h,signature:Hr(p)},(null===(u=e.options)||void 0===u?void 0:u.captchaToken)?{gotrue_meta_security:{captcha_token:null===(m=e.options)||void 0===m?void 0:m.captchaToken}}:null),xform:hs});if(r)throw r;return t&&t.session&&t.user?(t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign({},t),error:r}):{data:{user:null,session:null},error:new Er}}catch(f){if(wr(f))return{data:{user:null,session:null},error:f};throw f}}async _exchangeCodeForSession(e){const t=await $r(this.storage,"".concat(this.storageKey,"-code-verifier")),[r,s]=(null!==t&&void 0!==t?t:"").split("/");try{const{data:t,error:n}=await ms(this.fetch,"POST","".concat(this.url,"/token?grant_type=pkce"),{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:hs});if(await Qr(this.storage,"".concat(this.storageKey,"-code-verifier")),n)throw n;return t&&t.session&&t.user?(t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign(Object.assign({},t),{redirectType:null!==s&&void 0!==s?s:null}),error:n}):{data:{user:null,session:null,redirectType:null},error:new Er}}catch(n){if(wr(n))return{data:{user:null,session:null,redirectType:null},error:n};throw n}}async signInWithIdToken(e){try{const{options:t,provider:r,token:s,access_token:n,nonce:a}=e,i=await ms(this.fetch,"POST","".concat(this.url,"/token?grant_type=id_token"),{headers:this.headers,body:{provider:r,id_token:s,access_token:n,nonce:a,gotrue_meta_security:{captcha_token:null===t||void 0===t?void 0:t.captchaToken}},xform:hs}),{data:o,error:l}=i;return l?{data:{user:null,session:null},error:l}:o&&o.session&&o.user?(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:o,error:l}):{data:{user:null,session:null},error:new Er}}catch(t){if(wr(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,r,s,n,a;try{if("email"in e){const{email:s,options:n}=e;let a=null,i=null;"pkce"===this.flowType&&([a,i]=await rs(this.storage,this.storageKey));const{error:o}=await ms(this.fetch,"POST","".concat(this.url,"/otp"),{headers:this.headers,body:{email:s,data:null!==(t=null===n||void 0===n?void 0:n.data)&&void 0!==t?t:{},create_user:null===(r=null===n||void 0===n?void 0:n.shouldCreateUser)||void 0===r||r,gotrue_meta_security:{captcha_token:null===n||void 0===n?void 0:n.captchaToken},code_challenge:a,code_challenge_method:i},redirectTo:null===n||void 0===n?void 0:n.emailRedirectTo});return{data:{user:null,session:null},error:o}}if("phone"in e){const{phone:t,options:r}=e,{data:i,error:o}=await ms(this.fetch,"POST","".concat(this.url,"/otp"),{headers:this.headers,body:{phone:t,data:null!==(s=null===r||void 0===r?void 0:r.data)&&void 0!==s?s:{},create_user:null===(n=null===r||void 0===r?void 0:r.shouldCreateUser)||void 0===n||n,gotrue_meta_security:{captcha_token:null===r||void 0===r?void 0:r.captchaToken},channel:null!==(a=null===r||void 0===r?void 0:r.channel)&&void 0!==a?a:"sms"}});return{data:{user:null,session:null,messageId:null===i||void 0===i?void 0:i.message_id},error:o}}throw new Cr("You must provide either an email or phone number.")}catch(i){if(wr(i))return{data:{user:null,session:null},error:i};throw i}}async verifyOtp(e){var t,r;try{let s,n;"options"in e&&(s=null===(t=e.options)||void 0===t?void 0:t.redirectTo,n=null===(r=e.options)||void 0===r?void 0:r.captchaToken);const{data:a,error:i}=await ms(this.fetch,"POST","".concat(this.url,"/verify"),{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:n}}),redirectTo:s,xform:hs});if(i)throw i;if(!a)throw new Error("An error occurred on token verification.");const o=a.session,l=a.user;return(null===o||void 0===o?void 0:o.access_token)&&(await this._saveSession(o),await this._notifyAllSubscribers("recovery"==e.type?"PASSWORD_RECOVERY":"SIGNED_IN",o)),{data:{user:l,session:o},error:null}}catch(s){if(wr(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var t,r,s;try{let n=null,a=null;return"pkce"===this.flowType&&([n,a]=await rs(this.storage,this.storageKey)),await ms(this.fetch,"POST","".concat(this.url,"/sso"),{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:null!==(r=null===(t=e.options)||void 0===t?void 0:t.redirectTo)&&void 0!==r?r:void 0}),(null===(s=null===e||void 0===e?void 0:e.options)||void 0===s?void 0:s.captchaToken)?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:n,code_challenge_method:a}),headers:this.headers,xform:xs})}catch(n){if(wr(n))return{data:null,error:n};throw n}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:r}=e;if(r)throw r;if(!t)throw new _r;const{error:s}=await ms(this.fetch,"GET","".concat(this.url,"/reauthenticate"),{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(wr(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t="".concat(this.url,"/resend");if("email"in e){const{email:r,type:s,options:n}=e,{error:a}=await ms(this.fetch,"POST",t,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:null===n||void 0===n?void 0:n.captchaToken}},redirectTo:null===n||void 0===n?void 0:n.emailRedirectTo});return{data:{user:null,session:null},error:a}}if("phone"in e){const{phone:r,type:s,options:n}=e,{data:a,error:i}=await ms(this.fetch,"POST",t,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:null===n||void 0===n?void 0:n.captchaToken}}});return{data:{user:null,session:null,messageId:null===a||void 0===a?void 0:a.message_id},error:i}}throw new Cr("You must provide either an email or phone number and a type")}catch(t){if(wr(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){await this.initializePromise;return await this._acquireLock(-1,async()=>this._useSession(async e=>e))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const e=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),r=(async()=>(await e,await t()))();return this.pendingInLock.push((async()=>{try{await r}catch(wn){}})()),r}return await this.lock("lock:".concat(this.storageKey),e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const e=t();for(this.pendingInLock.push((async()=>{try{await e}catch(wn){}})()),await e;this.pendingInLock.length;){const e=[...this.pendingInLock];await Promise.all(e),this.pendingInLock.splice(0,e.length)}return await e}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",(new Error).stack);try{let e=null;const t=await $r(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),null!==t&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=!!e.expires_at&&1e3*e.expires_at-Date.now()<xr;if(this._debug("#__loadSession()","session has".concat(r?"":" not"," expired"),"expires_at",e.expires_at),!r){if(this.userStorage){const t=await $r(this.userStorage,this.storageKey+"-user");(null===t||void 0===t?void 0:t.user)?e.user=t.user:e.user=is()}if(this.storage.isServer&&e.user){let t=this.suppressGetSessionWarning;e=new Proxy(e,{get:(e,r,s)=>(t||"user"!==r||(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t=!0,this.suppressGetSessionWarning=!0),Reflect.get(e,r,s))})}return{data:{session:e},error:null}}const{session:s,error:n}=await this._callRefreshToken(e.refresh_token);return n?{data:{session:null},error:n}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;return await this._acquireLock(-1,async()=>await this._getUser())}async _getUser(e){try{return e?await ms(this.fetch,"GET","".concat(this.url,"/user"),{headers:this.headers,jwt:e,xform:fs}):await this._useSession(async e=>{var t,r,s;const{data:n,error:a}=e;if(a)throw a;return(null===(t=n.session)||void 0===t?void 0:t.access_token)||this.hasCustomAuthorizationHeader?await ms(this.fetch,"GET","".concat(this.url,"/user"),{headers:this.headers,jwt:null!==(s=null===(r=n.session)||void 0===r?void 0:r.access_token)&&void 0!==s?s:void 0,xform:fs}):{data:{user:null},error:new _r}})}catch(t){if(wr(t))return function(e){return wr(e)&&"AuthSessionMissingError"===e.name}(t)&&(await this._removeSession(),await Qr(this.storage,"".concat(this.storageKey,"-code-verifier"))),{data:{user:null},error:t};throw t}}async updateUser(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{return await this._useSession(async r=>{const{data:s,error:n}=r;if(n)throw n;if(!s.session)throw new _r;const a=s.session;let i=null,o=null;"pkce"===this.flowType&&null!=e.email&&([i,o]=await rs(this.storage,this.storageKey));const{data:l,error:c}=await ms(this.fetch,"PUT","".concat(this.url,"/user"),{headers:this.headers,redirectTo:null===t||void 0===t?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:i,code_challenge_method:o}),jwt:a.access_token,xform:fs});if(c)throw c;return a.user=l.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(r){if(wr(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new _r;const t=Date.now()/1e3;let r=t,s=!0,n=null;const{payload:a}=Xr(e.access_token);if(a.exp&&(r=a.exp,s=r<=t),s){const{session:t,error:r}=await this._callRefreshToken(e.refresh_token);if(r)return{data:{user:null,session:null},error:r};if(!t)return{data:{user:null,session:null},error:null};n=t}else{const{data:s,error:a}=await this._getUser(e.access_token);if(a)throw a;n={access_token:e.access_token,refresh_token:e.refresh_token,user:s.user,token_type:"bearer",expires_in:r-t,expires_at:r},await this._saveSession(n),await this._notifyAllSubscribers("SIGNED_IN",n)}return{data:{user:n.user,session:n},error:null}}catch(t){if(wr(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var r;if(!e){const{data:s,error:n}=t;if(n)throw n;e=null!==(r=s.session)&&void 0!==r?r:void 0}if(!(null===e||void 0===e?void 0:e.refresh_token))throw new _r;const{session:s,error:n}=await this._callRefreshToken(e.refresh_token);return n?{data:{user:null,session:null},error:n}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(wr(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!Wr())throw new Pr("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Pr(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if("pkce"===this.flowType)throw new Ar("Not a valid PKCE flow url.");break;case"pkce":if("implicit"===this.flowType)throw new Pr("Not a valid implicit grant flow url.")}if("pkce"===t){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Ar("No code detected.");const{data:t,error:r}=await this._exchangeCodeForSession(e.code);if(r)throw r;const s=new URL(window.location.href);return s.searchParams.delete("code"),window.history.replaceState(window.history.state,"",s.toString()),{data:{session:t.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:n,refresh_token:a,expires_in:i,expires_at:o,token_type:l}=e;if(!n||!i||!a||!l)throw new Pr("No session defined in URL");const c=Math.round(Date.now()/1e3),d=parseInt(i);let u=c+d;o&&(u=parseInt(o));const m=u-c;1e3*m<=fr&&console.warn("@supabase/gotrue-js: Session as retrieved from URL expires in ".concat(m,"s, should have been closer to ").concat(d,"s"));const h=u-d;c-h>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",h,u,c):c-h<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",h,u,c);const{data:p,error:f}=await this._getUser(n);if(f)throw f;const x={provider_token:r,provider_refresh_token:s,access_token:n,expires_in:d,expires_at:u,refresh_token:a,token_type:l,user:p.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:x,redirectType:e.type},error:null}}catch(r){if(wr(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return Boolean(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await $r(this.storage,"".concat(this.storageKey,"-code-verifier"));return!(!e.code||!t)}async signOut(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{scope:"global"};return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut(){let{scope:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{scope:"global"};return await this._useSession(async t=>{var r;const{data:s,error:n}=t;if(n)return{error:n};const a=null===(r=s.session)||void 0===r?void 0:r.access_token;if(a){const{error:t}=await this.admin.signOut(a,e);if(t&&(!function(e){return wr(e)&&"AuthApiError"===e.name}(t)||404!==t.status&&401!==t.status&&403!==t.status))return{error:t}}return"others"!==e&&(await this._removeSession(),await Qr(this.storage,"".concat(this.storageKey,"-code-verifier"))),{error:null}})}onAuthStateChange(e){const t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}),r={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,r),(async()=>{await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})})(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async t=>{var r,s;try{const{data:{session:s},error:n}=t;if(n)throw n;await(null===(r=this.stateChangeEmitters.get(e))||void 0===r?void 0:r.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(n){await(null===(s=this.stateChangeEmitters.get(e))||void 0===s?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",n),console.error(n)}})}async resetPasswordForEmail(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=null,s=null;"pkce"===this.flowType&&([r,s]=await rs(this.storage,this.storageKey,!0));try{return await ms(this.fetch,"POST","".concat(this.url,"/recover"),{body:{email:e,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(n){if(wr(n))return{data:null,error:n};throw n}}async getUserIdentities(){var e;try{const{data:t,error:r}=await this.getUser();if(r)throw r;return{data:{identities:null!==(e=t.user.identities)&&void 0!==e?e:[]},error:null}}catch(t){if(wr(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:r,error:s}=await this._useSession(async t=>{var r,s,n,a,i;const{data:o,error:l}=t;if(l)throw l;const c=await this._getUrlForProvider("".concat(this.url,"/user/identities/authorize"),e.provider,{redirectTo:null===(r=e.options)||void 0===r?void 0:r.redirectTo,scopes:null===(s=e.options)||void 0===s?void 0:s.scopes,queryParams:null===(n=e.options)||void 0===n?void 0:n.queryParams,skipBrowserRedirect:!0});return await ms(this.fetch,"GET",c,{headers:this.headers,jwt:null!==(i=null===(a=o.session)||void 0===a?void 0:a.access_token)&&void 0!==i?i:void 0})});if(s)throw s;return Wr()&&!(null===(t=e.options)||void 0===t?void 0:t.skipBrowserRedirect)&&window.location.assign(null===r||void 0===r?void 0:r.url),{data:{provider:e.provider,url:null===r||void 0===r?void 0:r.url},error:null}}catch(r){if(wr(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var r,s;const{data:n,error:a}=t;if(a)throw a;return await ms(this.fetch,"DELETE","".concat(this.url,"/user/identities/").concat(e.identity_id),{headers:this.headers,jwt:null!==(s=null===(r=n.session)||void 0===r?void 0:r.access_token)&&void 0!==s?s:void 0})})}catch(t){if(wr(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t="#_refreshAccessToken(".concat(e.substring(0,5),"...)");this._debug(t,"begin");try{const r=Date.now();return await function(e,t){const r=new Promise((r,s)=>{(async()=>{for(let n=0;n<1/0;n++)try{const s=await e(n);if(!t(n,null,s))return void r(s)}catch(wn){if(!t(n,wn))return void s(wn)}})()});return r}(async r=>(r>0&&await async function(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}(200*Math.pow(2,r-1)),this._debug(t,"refreshing attempt",r),await ms(this.fetch,"POST","".concat(this.url,"/token?grant_type=refresh_token"),{body:{refresh_token:e},headers:this.headers,xform:hs})),(e,t)=>{const s=200*Math.pow(2,e);return t&&Ir(t)&&Date.now()+s-r<fr})}catch(r){if(this._debug(t,"error",r),wr(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(t,"end")}}_isValidSession(e){return"object"===typeof e&&null!==e&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const r=await this._getUrlForProvider("".concat(this.url,"/authorize"),e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",r),Wr()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,t;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const n=await $r(this.storage,this.storageKey);if(n&&this.userStorage){let t=await $r(this.userStorage,this.storageKey+"-user");this.storage.isServer||!Object.is(this.storage,this.userStorage)||t||(t={user:n.user},await Zr(this.userStorage,this.storageKey+"-user",t)),n.user=null!==(e=null===t||void 0===t?void 0:t.user)&&void 0!==e?e:is()}else if(n&&!n.user&&!n.user){const e=await $r(this.storage,this.storageKey+"-user");e&&(null===e||void 0===e?void 0:e.user)?(n.user=e.user,await Qr(this.storage,this.storageKey+"-user"),await Zr(this.storage,this.storageKey,n)):n.user=is()}if(this._debug(r,"session from storage",n),!this._isValidSession(n))return this._debug(r,"session is not valid"),void(null!==n&&await this._removeSession());const a=1e3*(null!==(t=n.expires_at)&&void 0!==t?t:1/0)-Date.now()<xr;if(this._debug(r,"session has".concat(a?"":" not"," expired with margin of ").concat(xr,"s")),a){if(this.autoRefreshToken&&n.refresh_token){const{error:e}=await this._callRefreshToken(n.refresh_token);e&&(console.error(e),Ir(e)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",e),await this._removeSession()))}}else if(n.user&&!0===n.user.__isUserNotAvailableProxy)try{const{data:e,error:t}=await this._getUser(n.access_token);!t&&(null===e||void 0===e?void 0:e.user)?(n.user=e.user,await this._saveSession(n),await this._notifyAllSubscribers("SIGNED_IN",n)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(s){console.error("Error getting user data:",s),this._debug(r,"error getting user data, skipping SIGNED_IN notification",s)}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){return this._debug(r,"error",n),void console.error(n)}finally{this._debug(r,"end")}}async _callRefreshToken(e){var t,r;if(!e)throw new _r;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s="#_callRefreshToken(".concat(e.substring(0,5),"...)");this._debug(s,"begin");try{this.refreshingDeferred=new Yr;const{data:t,error:r}=await this._refreshAccessToken(e);if(r)throw r;if(!t.session)throw new _r;await this._saveSession(t.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",t.session);const s={session:t.session,error:null};return this.refreshingDeferred.resolve(s),s}catch(n){if(this._debug(s,"error",n),wr(n)){const e={session:null,error:n};return Ir(n)||await this._removeSession(),null===(t=this.refreshingDeferred)||void 0===t||t.resolve(e),e}throw null===(r=this.refreshingDeferred)||void 0===r||r.reject(n),n}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,t){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const s="#_notifyAllSubscribers(".concat(e,")");this._debug(s,"begin",t,"broadcast = ".concat(r));try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t});const s=[],n=Array.from(this.stateChangeEmitters.values()).map(async r=>{try{await r.callback(e,t)}catch(wn){s.push(wn)}});if(await Promise.all(n),s.length>0){for(let e=0;e<s.length;e+=1)console.error(s[e]);throw s[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),r=t.user&&!0===t.user.__isUserNotAvailableProxy;if(this.userStorage){!r&&t.user&&await Zr(this.userStorage,this.storageKey+"-user",{user:t.user});const e=Object.assign({},t);delete e.user;const s=os(e);await Zr(this.storage,this.storageKey,s)}else{const e=os(t);await Zr(this.storage,this.storageKey,e)}}async _removeSession(){this._debug("#_removeSession()"),await Qr(this.storage,this.storageKey),await Qr(this.storage,this.storageKey+"-code-verifier"),await Qr(this.storage,this.storageKey+"-user"),this.userStorage&&await Qr(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Wr()&&(null===window||void 0===window?void 0:window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(wn){console.error("removing visibilitychange callback failed",wn)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),fr);this.autoRefreshTicker=e,e&&"object"===typeof e&&"function"===typeof e.unref?e.unref():"undefined"!==typeof Deno&&"function"===typeof Deno.unrefTimer&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:r}}=t;if(!r||!r.refresh_token||!r.expires_at)return void this._debug("#_autoRefreshTokenTick()","no session");const s=Math.floor((1e3*r.expires_at-e)/fr);this._debug("#_autoRefreshTokenTick()","access token expires in ".concat(s," ticks, a tick lasts ").concat(fr,"ms, refresh threshold is ").concat(3," ticks")),s<=3&&await this._callRefreshToken(r.refresh_token)})}catch(wn){console.error("Auto refresh tick failed with error. This is likely a transient error.",wn)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(wn){if(!(wn.isAcquireTimeout||wn instanceof Ss))throw wn;this._debug("auto refresh token tick lock not available")}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Wr()||!(null===window||void 0===window?void 0:window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),null===window||void 0===window||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t="#_onVisibilityChanged(".concat(e,")");this._debug(t,"visibilityState",document.visibilityState),"visible"===document.visibilityState?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{"visible"===document.visibilityState?await this._recoverAndRefresh():this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting")}))):"hidden"===document.visibilityState&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,r){const s=["provider=".concat(encodeURIComponent(t))];if((null===r||void 0===r?void 0:r.redirectTo)&&s.push("redirect_to=".concat(encodeURIComponent(r.redirectTo))),(null===r||void 0===r?void 0:r.scopes)&&s.push("scopes=".concat(encodeURIComponent(r.scopes))),"pkce"===this.flowType){const[e,t]=await rs(this.storage,this.storageKey),r=new URLSearchParams({code_challenge:"".concat(encodeURIComponent(e)),code_challenge_method:"".concat(encodeURIComponent(t))});s.push(r.toString())}if(null===r||void 0===r?void 0:r.queryParams){const e=new URLSearchParams(r.queryParams);s.push(e.toString())}return(null===r||void 0===r?void 0:r.skipBrowserRedirect)&&s.push("skip_http_redirect=".concat(r.skipBrowserRedirect)),"".concat(e,"?").concat(s.join("&"))}async _unenroll(e){try{return await this._useSession(async t=>{var r;const{data:s,error:n}=t;return n?{data:null,error:n}:await ms(this.fetch,"DELETE","".concat(this.url,"/factors/").concat(e.factorId),{headers:this.headers,jwt:null===(r=null===s||void 0===s?void 0:s.session)||void 0===r?void 0:r.access_token})})}catch(t){if(wr(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var r,s;const{data:n,error:a}=t;if(a)return{data:null,error:a};const i=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},"phone"===e.factorType?{phone:e.phone}:{issuer:e.issuer}),{data:o,error:l}=await ms(this.fetch,"POST","".concat(this.url,"/factors"),{body:i,headers:this.headers,jwt:null===(r=null===n||void 0===n?void 0:n.session)||void 0===r?void 0:r.access_token});return l?{data:null,error:l}:("totp"===e.factorType&&(null===(s=null===o||void 0===o?void 0:o.totp)||void 0===s?void 0:s.qr_code)&&(o.totp.qr_code="data:image/svg+xml;utf-8,".concat(o.totp.qr_code)),{data:o,error:null})})}catch(t){if(wr(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:s,error:n}=t;if(n)return{data:null,error:n};const{data:a,error:i}=await ms(this.fetch,"POST","".concat(this.url,"/factors/").concat(e.factorId,"/verify"),{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:null===(r=null===s||void 0===s?void 0:s.session)||void 0===r?void 0:r.access_token});return i?{data:null,error:i}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:i})})}catch(t){if(wr(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:s,error:n}=t;return n?{data:null,error:n}:await ms(this.fetch,"POST","".concat(this.url,"/factors/").concat(e.factorId,"/challenge"),{body:{channel:e.channel},headers:this.headers,jwt:null===(r=null===s||void 0===s?void 0:s.session)||void 0===r?void 0:r.access_token})})}catch(t){if(wr(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const r=(null===e||void 0===e?void 0:e.factors)||[],s=r.filter(e=>"totp"===e.factor_type&&"verified"===e.status),n=r.filter(e=>"phone"===e.factor_type&&"verified"===e.status);return{data:{all:r,totp:s,phone:n},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,r;const{data:{session:s},error:n}=e;if(n)return{data:null,error:n};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=Xr(s.access_token);let i=null;a.aal&&(i=a.aal);let o=i;(null!==(r=null===(t=s.user.factors)||void 0===t?void 0:t.filter(e=>"verified"===e.status))&&void 0!==r?r:[]).length>0&&(o="aal2");return{data:{currentLevel:i,nextLevel:o,currentAuthenticationMethods:a.amr||[]},error:null}}))}async fetchJwk(e){let t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{keys:[]}).keys.find(t=>t.kid===e);if(t)return t;const r=Date.now();if(t=this.jwks.keys.find(t=>t.kid===e),t&&this.jwks_cached_at+6e5>r)return t;const{data:s,error:n}=await ms(this.fetch,"GET","".concat(this.url,"/.well-known/jwks.json"),{headers:this.headers});if(n)throw n;return s.keys&&0!==s.keys.length?(this.jwks=s,this.jwks_cached_at=r,t=s.keys.find(t=>t.kid===e),t||null):null}async getClaims(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{let r=e;if(!r){const{data:e,error:t}=await this.getSession();if(t||!e.session)return{data:null,error:t};r=e.session.access_token}const{header:s,payload:n,signature:a,raw:{header:i,payload:o}}=Xr(r);(null===t||void 0===t?void 0:t.allowExpired)||function(e){if(!e)throw new Error("Missing exp claim");if(e<=Math.floor(Date.now()/1e3))throw new Error("JWT has expired")}(n.exp);const l=s.alg&&!s.alg.startsWith("HS")&&s.kid&&"crypto"in globalThis&&"subtle"in globalThis.crypto?await this.fetchJwk(s.kid,(null===t||void 0===t?void 0:t.keys)?{keys:t.keys}:null===t||void 0===t?void 0:t.jwks):null;if(!l){const{error:e}=await this.getUser(r);if(e)throw e;return{data:{claims:n,header:s,signature:a},error:null}}const c=function(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}(s.alg),d=await crypto.subtle.importKey("jwk",l,c,!0,["verify"]);if(!await crypto.subtle.verify(c,d,a,function(e){const t=[];return Vr(e,e=>t.push(e)),new Uint8Array(t)}("".concat(i,".").concat(o))))throw new Or("Invalid JWT signature");return{data:{claims:n,header:s,signature:a},error:null}}catch(r){if(wr(r))return{data:null,error:r};throw r}}}As.nextInstanceID=0;const Ts=As;class Is extends Ts{constructor(e){super(e)}}var Rs=function(e,t,r,s){return new(r||(r=Promise))(function(n,a){function i(e){try{l(s.next(e))}catch(wn){a(wn)}}function o(e){try{l(s.throw(e))}catch(wn){a(wn)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(i,o)}l((s=s.apply(e,t||[])).next())})};class Os{constructor(e,t,r){var s,n,a;this.supabaseUrl=e,this.supabaseKey=t;const i=function(e){const t=null===e||void 0===e?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL((r=t).endsWith("/")?r:r+"/")}catch(s){throw Error("Invalid supabaseUrl: Provided URL is malformed.")}var r}(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",i),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",i),this.storageUrl=new URL("storage/v1",i),this.functionsUrl=new URL("functions/v1",i);const o="sb-".concat(i.hostname.split(".")[0],"-auth-token"),l=function(e,t){var r,s;const{db:n,auth:a,realtime:i,global:o}=e,{db:l,auth:c,realtime:d,global:u}=t,m={db:Object.assign(Object.assign({},l),n),auth:Object.assign(Object.assign({},c),a),realtime:Object.assign(Object.assign({},d),i),storage:{},global:Object.assign(Object.assign(Object.assign({},u),o),{headers:Object.assign(Object.assign({},null!==(r=null===u||void 0===u?void 0:u.headers)&&void 0!==r?r:{}),null!==(s=null===o||void 0===o?void 0:o.headers)&&void 0!==s?s:{})}),accessToken:()=>hr(this,void 0,void 0,function*(){return""})};return e.accessToken?m.accessToken=e.accessToken:delete m.accessToken,m}(null!==r&&void 0!==r?r:{},{db:ir,realtime:lr,auth:Object.assign(Object.assign({},or),{storageKey:o}),global:ar});this.storageKey=null!==(s=l.auth.storageKey)&&void 0!==s?s:"",this.headers=null!==(n=l.global.headers)&&void 0!==n?n:{},l.accessToken?(this.accessToken=l.accessToken,this.auth=new Proxy({},{get:(e,t)=>{throw new Error("@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.".concat(String(t)," is not possible"))}})):this.auth=this._initSupabaseAuthClient(null!==(a=l.auth)&&void 0!==a?a:{},this.headers,l.global.fetch),this.fetch=mr(t,this._getAccessToken.bind(this),l.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},l.realtime)),this.rest=new Ge(new URL("rest/v1",i).href,{headers:this.headers,schema:l.db.schema,fetch:this.fetch}),this.storage=new sr(this.storageUrl.href,this.headers,this.fetch,null===r||void 0===r?void 0:r.storage),l.accessToken||this._listenForAuthEvents()}get functions(){return new He(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.rest.rpc(e,t,r)}channel(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}};return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return Rs(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return null!==(t=null===(e=r.session)||void 0===e?void 0:e.access_token)&&void 0!==t?t:this.supabaseKey})}_initSupabaseAuthClient(e,t,r){let{autoRefreshToken:s,persistSession:n,detectSessionInUrl:a,storage:i,userStorage:o,storageKey:l,flowType:c,lock:d,debug:u}=e;const m={Authorization:"Bearer ".concat(this.supabaseKey),apikey:"".concat(this.supabaseKey)};return new Is({url:this.authUrl.href,headers:Object.assign(Object.assign({},m),t),storageKey:l,autoRefreshToken:s,persistSession:n,detectSessionInUrl:a,storage:i,userStorage:o,flowType:c,lock:d,debug:u,fetch:r,hasCustomAuthorizationHeader:Object.keys(this.headers).some(e=>"authorization"===e.toLowerCase())})}_initRealtimeClient(e){return new It(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},null===e||void 0===e?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",null===t||void 0===t?void 0:t.access_token)})}_handleTokenChanged(e,t,r){"TOKEN_REFRESHED"!==e&&"SIGNED_IN"!==e||this.changedAccessToken===r?"SIGNED_OUT"===e&&(this.realtime.setAuth(),"STORAGE"==t&&this.auth.signOut(),this.changedAccessToken=void 0):this.changedAccessToken=r}}var Ls=r(285);(function(){if("undefined"!==typeof window)return!1;if("undefined"===typeof Ls)return!1;const e=Ls.version;if(void 0===e||null===e)return!1;const t=e.match(/^v(\d+)\./);return!!t&&parseInt(t[1],10)<=18})()&&console.warn("\u26a0\ufe0f  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Ds="https://dlgfhgcczqefbuhcyazh.supabase.co",zs="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRsZ2ZoZ2NjenFlZmJ1aGN5YXpoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ2MDM3NjQsImV4cCI6MjA3MDE3OTc2NH0.ILqv7fUAP8KAr0GzkqeqaRqDcbKcPhcHtIQR7PYFIgY";const Ms=Ds&&zs?((e,t,r)=>new Os(e,t,r))(Ds,zs):null,Fs="https://ab-pret-back.onrender.com";console.log("[CONFIG] Backend URL:",Fs),console.log("[CONFIG] Environment:","production");const Us=async()=>{try{if(console.log("[TEST] V\xe9rification de la connexion Supabase..."),!Ms)return console.warn("[TEST] \u26a0\ufe0f Client Supabase non initialis\xe9 - configuration manquante"),{success:!1,error:"Configuration Supabase manquante"};const t=await(async()=>{if(!Ms)return console.error("[SUPABASE] Client non initialis\xe9 - configuration manquante"),{success:!1,error:"Configuration Supabase manquante"};try{const{data:e,error:t}=await Ms.from("users").select("count").limit(1);return t?(console.error("[SUPABASE] Erreur de connexion:",t.message),{success:!1,error:t.message}):(console.log("[SUPABASE] Connexion r\xe9ussie"),{success:!0})}catch(e){return console.error("[SUPABASE] Erreur de connexion:",e.message),{success:!1,error:e.message}}})();if(!t.success)throw new Error("Connexion Supabase \xe9chou\xe9e: ".concat(t.error));console.log("[TEST] \u2705 Connexion Supabase OK");const r=["users","otp_codes","loans","payments"];for(const s of r)try{const{error:e}=await Ms.from(s).select("count").limit(1);e?console.warn("[TEST] \u26a0\ufe0f Table ".concat(s," non accessible:"),e.message):console.log("[TEST] \u2705 Table ".concat(s," accessible"))}catch(e){console.warn("[TEST] \u26a0\ufe0f Table ".concat(s," non accessible:"),e.message)}return{success:!0,message:"Tous les tests de base sont pass\xe9s"}}catch(e){return console.error("[TEST] \u274c Erreur lors des tests:",e.message),{success:!1,error:e.message}}},Bs=e=>{const t=e.message||e,r=e.details||"",s=e.hint||"",n="".concat(t," ").concat(r," ").concat(s).toLowerCase();return n.includes("phone_number")&&(n.includes("duplicate")||n.includes("unique"))?"Ce num\xe9ro de t\xe9l\xe9phone est d\xe9j\xe0 utilis\xe9 pour cr\xe9er un compte. Veuillez utiliser un autre num\xe9ro de t\xe9l\xe9phone.":n.includes("email")&&(n.includes("duplicate")||n.includes("unique"))?"Cette adresse email est d\xe9j\xe0 utilis\xe9e. Veuillez utiliser une autre adresse email.":n.includes("password")?n.includes("weak")?"Le mot de passe est trop faible. Il doit contenir au moins 6 caract\xe8res.":"Erreur avec le mot de passe. Veuillez v\xe9rifier votre saisie.":n.includes("invalid")?n.includes("email")?"Adresse email invalide. Veuillez v\xe9rifier votre saisie.":n.includes("phone")?"Num\xe9ro de t\xe9l\xe9phone invalide. Veuillez v\xe9rifier votre saisie.":"Donn\xe9es invalides. Veuillez v\xe9rifier vos informations.":n.includes("network")||n.includes("fetch")?"Erreur de connexion. Veuillez v\xe9rifier votre connexion internet et r\xe9essayer.":n.includes("server")||n.includes("500")?"Erreur du serveur. Veuillez r\xe9essayer dans quelques minutes.":n.includes("quota")||n.includes("limit")?"Limite de tentatives atteinte. Veuillez r\xe9essayer plus tard.":n.includes("already registered")?n.includes("phone")?"Un compte existe d\xe9j\xe0 avec ce num\xe9ro de t\xe9l\xe9phone.":n.includes("email")?"Un compte existe d\xe9j\xe0 avec cette adresse email.":"Un compte existe d\xe9j\xe0 avec ces informations.":n.includes("user already registered")?n.includes("phone")?"Un utilisateur existe d\xe9j\xe0 avec ce num\xe9ro de t\xe9l\xe9phone.":n.includes("email")?"Un utilisateur existe d\xe9j\xe0 avec cette adresse email.":"Un utilisateur avec ces informations existe d\xe9j\xe0.":t},Vs=async()=>{try{const{data:e,error:t}=await Ms.from("users").select("*").order("created_at",{ascending:!1});if(t)throw t;const{data:r,error:s}=await Ms.from("loans").select("id, user_id, status, amount").order("created_at",{ascending:!1});if(s)throw s;return{success:!0,data:e.map(e=>{const t=r.filter(t=>t.user_id===e.id),s=t.length,n=t.filter(e=>"approved"===e.status||"active"===e.status).length,a=t.reduce((e,t)=>e+(t.amount||0),0);return ze(ze({},e),{},{totalLoans:s,activeLoans:n,totalAmount:a})})}}catch(e){return console.error("[SUPABASE] Erreur lors de la r\xe9cup\xe9ration des utilisateurs:",e.message),{success:!1,error:e.message}}},qs=async(e,t)=>{try{const{data:r,error:s}=await Ms.from("users").update({status:t,updated_at:(new Date).toISOString()}).eq("id",e).select().single();if(s)throw s;return{success:!0,data:r}}catch(r){return console.error("[SUPABASE] Erreur lors de la mise \xe0 jour du statut utilisateur:",r.message),{success:!1,error:r.message}}},Hs=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;try{let t=Ms.from("loans").select("\n        *,\n        users (\n          id,\n          first_name,\n          last_name,\n          email,\n          phone_number,\n          filiere,\n          annee_etude,\n          entite,\n          address,\n          facebook_name,\n          temoin_name,\n          temoin_quartier,\n          temoin_phone,\n          temoin_email,\n          emergency_name,\n          emergency_relation,\n          emergency_phone,\n          emergency_email,\n          emergency_address,\n          user_identity_card_name,\n          temoin_identity_card_name,\n          student_card_name,\n          user_identity_card_url,\n          temoin_identity_card_url,\n          student_card_url\n        )\n      ").order("created_at",{ascending:!1});e&&(t=t.eq("user_id",e));const{data:r,error:s}=await t;if(s)throw s;return{success:!0,data:r}}catch(t){return console.error("[SUPABASE] Erreur lors de la r\xe9cup\xe9ration des pr\xeats:",t.message),{success:!1,error:t.message}}},Ws=async function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;try{const n={status:t};"approved"===t&&(n.status="active",n.approved_by=r,n.approved_at=(new Date).toISOString());const{data:a,error:i}=await Ms.from("loans").update(n).eq("id",e).select("\n        *,\n        users!inner(id, first_name, last_name)\n      ").single();if(i)throw i;if(a&&("approved"===t||"rejected"===t))try{const e="approved"===t,r=e?"approbation":"refus";console.log("[LOAN_".concat(r.toUpperCase(),"] Envoi notification de ").concat(r,"..."));const{error:s}=await Ms.from("notifications").insert({user_id:a.user_id,title:e?"Pr\xeat approuv\xe9 ! \ud83c\udf89":"Demande de pr\xeat refus\xe9e",message:"Votre demande de pr\xeat de ".concat(parseInt(a.amount).toLocaleString(),e?" FCFA a \xe9t\xe9 approuv\xe9e. Vous pouvez maintenant effectuer votre premier remboursement.":" FCFA a \xe9t\xe9 refus\xe9e. Contactez l'administration pour plus d'informations."),type:"loan_status",data:{loan_id:a.id,loan_amount:a.amount,status:e?"approved":"rejected",action:e?"approved":"rejected"},read:!1});s?console.error("[LOAN_".concat(r.toUpperCase(),"] Erreur cr\xe9ation notification DB:"),s):console.log("[LOAN_".concat(r.toUpperCase(),"] \u2705 Notification cr\xe9\xe9e dans la base de donn\xe9es"));const n=await fetch("".concat(Fs,"/api/notify-loan-").concat(r),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:a.user_id,loanAmount:a.amount,loanId:a.id,status:e?"approved":"rejected"})});n.ok?console.log("[LOAN_".concat(r.toUpperCase(),"] \u2705 Notification push envoy\xe9e avec succ\xe8s")):console.error("[LOAN_".concat(r.toUpperCase(),"] \u274c Erreur envoi notification push:"),await n.text())}catch(s){console.error("[LOAN_NOTIFICATION] \u274c Erreur lors de l'envoi de la notification:",s)}return{success:!0,data:a}}catch(n){return console.error("[SUPABASE] Erreur lors de la mise \xe0 jour du pr\xeat:",n.message),{success:!1,error:n.message}}},Gs=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;try{let t=Ms.from("payments").select("\n        *,\n        loans (\n          id,\n          amount,\n          purpose\n        )\n      ").order("created_at",{ascending:!1});e&&(t=t.eq("user_id",e));const{data:r,error:s}=await t;if(s)throw s;return{success:!0,data:r}}catch(t){return console.error("[SUPABASE] Erreur lors de la r\xe9cup\xe9ration des paiements:",t.message),{success:!1,error:t.message}}};var Ks=r(579);const Js=(0,t.createContext)(),Zs=()=>{const e=(0,t.useContext)(Js);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e},$s=e=>{let{children:r}=e;const[s,n]=(0,t.useState)(null),[a,i]=(0,t.useState)(!0);(0,t.useEffect)(()=>{console.log("[AUTH] Initialisation du contexte d'authentification...");try{const e=localStorage.getItem("ab_user_cache");if(e){JSON.parse(e);const t=localStorage.getItem("ab_user_cache_time");if(t){Date.now()-parseInt(t)>864e5&&(console.log("[AUTH] Cache obsol\xe8te d\xe9tect\xe9, nettoyage..."),localStorage.removeItem("ab_user_cache"),localStorage.removeItem("ab_user_cache_time"))}}}catch(s){console.warn("[AUTH] Erreur v\xe9rification cache:",s),localStorage.removeItem("ab_user_cache"),localStorage.removeItem("ab_user_cache_time")}const e=setTimeout(()=>{console.log("[AUTH] \u26a0\ufe0f Timeout de s\xe9curit\xe9 - arr\xeat du loader"),i(!1)},3e3);if(!Ms)return console.warn("[AUTH] Supabase non initialis\xe9 - skip auth subscription"),void i(!1);let t,r=!1;return(async()=>{try{console.log("[AUTH] V\xe9rification de la session actuelle...");const{data:{session:e}}=await Ms.auth.getSession();if(null!==e&&void 0!==e&&e.user){var a,o,l,c;console.log("[AUTH] Session trouv\xe9e:",e.user.email);let t=(null===(a=e.user)||void 0===a||null===(o=a.user_metadata)||void 0===o?void 0:o.role)||(null===(l=e.user)||void 0===l||null===(c=l.app_metadata)||void 0===c?void 0:c.role)||"client";try{const{data:r,error:s}=await Ms.from("users").select("role, first_name, last_name").eq("id",e.user.id).single();if(!s&&r){var d,u;console.log("[AUTH] R\xf4le r\xe9cup\xe9r\xe9 depuis la DB:",r.role),t=r.role||t;const s=ze(ze({},e.user),{},{role:t,firstName:r.first_name||(null===(d=e.user.user_metadata)||void 0===d?void 0:d.first_name),lastName:r.last_name||(null===(u=e.user.user_metadata)||void 0===u?void 0:u.last_name)});n(s),localStorage.setItem("ab_user_cache",JSON.stringify({id:s.id,email:s.email,role:t,first_name:r.first_name||"",last_name:r.last_name||""})),localStorage.setItem("ab_user_cache_time",Date.now().toString())}else{var m,h;console.warn("[AUTH] Impossible de r\xe9cup\xe9rer le r\xf4le depuis la DB, utilisation JWT");const r=ze(ze({},e.user),{},{role:t});n(r),localStorage.setItem("ab_user_cache",JSON.stringify({id:r.id,email:r.email,role:t,first_name:(null===(m=r.user_metadata)||void 0===m?void 0:m.first_name)||"",last_name:(null===(h=r.user_metadata)||void 0===h?void 0:h.last_name)||""})),localStorage.setItem("ab_user_cache_time",Date.now().toString())}}catch(x){var p,f;console.error("[AUTH] Erreur r\xe9cup\xe9ration r\xf4le DB:",x);const r=ze(ze({},e.user),{},{role:t});n(r),localStorage.setItem("ab_user_cache",JSON.stringify({id:r.id,email:r.email,role:t,first_name:(null===(p=r.user_metadata)||void 0===p?void 0:p.first_name)||"",last_name:(null===(f=r.user_metadata)||void 0===f?void 0:f.last_name)||""})),localStorage.setItem("ab_user_cache_time",Date.now().toString())}}else{console.log("[AUTH] Aucune session active");try{const e=localStorage.getItem("ab_user_cache");if(e){const t=JSON.parse(e);t&&t.id&&(console.log("[AUTH] Utilisateur r\xe9cup\xe9r\xe9 depuis le cache"),n(t))}}catch(s){console.warn("[AUTH] Erreur lecture cache:",s)}}console.log("[AUTH] Configuration de l'\xe9couteur d'\xe9v\xe9nements...");const i=Ms.auth.onAuthStateChange(async(e,t)=>{var r;if(console.log("[AUTH] \xc9v\xe9nement auth:",e,null===t||void 0===t||null===(r=t.user)||void 0===r?void 0:r.email),"SIGNED_IN"===e&&t){var a,i,o,l;let e=(null===(a=t.user)||void 0===a||null===(i=a.user_metadata)||void 0===i?void 0:i.role)||(null===(o=t.user)||void 0===o||null===(l=o.app_metadata)||void 0===l?void 0:l.role)||"client";try{const{data:r,error:s}=await Ms.from("users").select("role, first_name, last_name").eq("id",t.user.id).single();if(!s&&r){var c,d;console.log("[AUTH] SIGNED_IN - R\xf4le DB:",r.role),e=r.role||e;const s=ze(ze({},t.user),{},{role:e,firstName:r.first_name||(null===(c=t.user.user_metadata)||void 0===c?void 0:c.first_name),lastName:r.last_name||(null===(d=t.user.user_metadata)||void 0===d?void 0:d.last_name)});n(s),localStorage.setItem("ab_user_cache",JSON.stringify({id:s.id,email:s.email,role:e,first_name:r.first_name||"",last_name:r.last_name||""}))}else{var u,m;const r=ze(ze({},t.user),{},{role:e});n(r),localStorage.setItem("ab_user_cache",JSON.stringify({id:r.id,email:r.email,role:e,first_name:(null===(u=r.user_metadata)||void 0===u?void 0:u.first_name)||"",last_name:(null===(m=r.user_metadata)||void 0===m?void 0:m.last_name)||""}))}}catch(x){var h,p;console.error("[AUTH] Erreur r\xe9cup\xe9ration r\xf4le DB (SIGNED_IN):",x);const s=ze(ze({},t.user),{},{role:e});n(s),localStorage.setItem("ab_user_cache",JSON.stringify({id:s.id,email:s.email,role:e,first_name:(null===(h=s.user_metadata)||void 0===h?void 0:h.first_name)||"",last_name:(null===(p=s.user_metadata)||void 0===p?void 0:p.last_name)||""}))}}else if("SIGNED_OUT"===e){console.log("[AUTH] Utilisateur d\xe9connect\xe9"),n(null);try{localStorage.removeItem("ab_user_cache")}catch(s){console.warn("[AUTH] Erreur suppression cache:",s)}}else if("TOKEN_REFRESHED"===e&&t){var f,g,v,b;console.log("[AUTH] Token rafra\xeechi");let e=(null===(f=t.user)||void 0===f||null===(g=f.user_metadata)||void 0===g?void 0:g.role)||(null===(v=t.user)||void 0===v||null===(b=v.app_metadata)||void 0===b?void 0:b.role)||"client";try{const{data:r,error:s}=await Ms.from("users").select("role, first_name, last_name").eq("id",t.user.id).single();if(!s&&r){var y,j;e=r.role||e;const s=ze(ze({},t.user),{},{role:e,firstName:r.first_name||(null===(y=t.user.user_metadata)||void 0===y?void 0:y.first_name),lastName:r.last_name||(null===(j=t.user.user_metadata)||void 0===j?void 0:j.last_name)});n(s)}else{const r=ze(ze({},t.user),{},{role:e});n(r)}}catch(x){console.error("[AUTH] Erreur r\xe9cup\xe9ration r\xf4le DB (TOKEN_REFRESHED):",x);const s=ze(ze({},t.user),{},{role:e});n(s)}}});t=i.data.subscription,r=!0,console.log("[AUTH] \u2705 Contexte d'authentification initialis\xe9")}catch(g){console.error("[AUTH] \u274c Erreur lors de l'initialisation:",g.message)}finally{clearTimeout(e),i(!1)}})(),()=>{clearTimeout(e),t&&t.unsubscribe()}},[]);const o={user:s,loading:a,isAuthenticated:!!s,signUp:async(e,t,r)=>{if(!Ms)return console.error("[AUTH] Supabase non configur\xe9 - impossible de s'inscrire"),{success:!1,error:"Configuration Supabase manquante. V\xe9rifiez vos variables d'environnement."};try{const s=await(async(e,t,r)=>{if(!Ms)return console.error("[SUPABASE] Client non initialis\xe9 - configuration manquante"),{success:!1,error:"Configuration Supabase manquante"};try{const{data:s,error:n}=await Ms.auth.signUp({email:e,password:t,options:{data:{first_name:r.firstName,last_name:r.lastName,phone_number:r.phoneNumber||"",role:"client"}}});if(n)throw console.error("[SUPABASE] Erreur Auth:",n),new Error(Bs(n));const{error:a}=await Ms.from("users").insert([{id:s.user.id,email:e,phone_number:r.phoneNumber||"",first_name:r.firstName,last_name:r.lastName,role:"client",status:"approved"}]);if(a)throw console.error("[SUPABASE] Erreur insertion utilisateur:",a),new Error(Bs(a));return r.phoneNumber&&console.log("[SUPABASE] \u2705 Utilisateur cr\xe9\xe9: ".concat(r.firstName," ").concat(r.lastName," (").concat(r.phoneNumber,")")),{success:!0,user:s.user}}catch(s){return console.error("[SUPABASE] Erreur lors de l'inscription:",s.message),{success:!1,error:Bs(s)}}})(e,t,r);return s}catch(s){return console.error("[AUTH] Erreur lors de l'inscription:",s.message),{success:!1,error:s.message}}},signIn:async(e,t)=>{if(!Ms)return console.error("[AUTH] Supabase non configur\xe9 - impossible de se connecter"),{success:!1,error:"Configuration Supabase manquante. V\xe9rifiez vos variables d'environnement."};try{console.log("[AUTH] Tentative de connexion avec Supabase...");const r=await(async(e,t)=>{if(!Ms)return console.error("[SUPABASE] Client non initialis\xe9 - configuration manquante"),{success:!1,error:"Configuration Supabase manquante"};try{var r,s,n;console.log("[SUPABASE] Tentative de connexion avec email:",e);const{data:l,error:c}=await Ms.auth.signInWithPassword({email:e,password:t});if(c)throw console.error("[SUPABASE] Erreur d'authentification:",c.message),new Error(Bs(c));if(!l.user)throw new Error("Aucun utilisateur retourn\xe9 apr\xe8s authentification");console.log("[SUPABASE] Authentification r\xe9ussie pour:",l.user.email);const{data:d,error:u}=await Ms.from("users").select("*").eq("id",l.user.id).single();var a,i,o;if(u)return console.warn("[SUPABASE] Utilisateur non trouv\xe9 dans la table users:",u.message),{success:!0,user:ze(ze({},l.user),{},{role:(null===(a=l.user.user_metadata)||void 0===a?void 0:a.role)||"client",first_name:(null===(i=l.user.user_metadata)||void 0===i?void 0:i.first_name)||"",last_name:(null===(o=l.user.user_metadata)||void 0===o?void 0:o.last_name)||""})};const m=ze(ze({},l.user),{},{role:d.role||(null===(r=l.user.user_metadata)||void 0===r?void 0:r.role)||"client",first_name:d.first_name||(null===(s=l.user.user_metadata)||void 0===s?void 0:s.first_name)||"",last_name:d.last_name||(null===(n=l.user.user_metadata)||void 0===n?void 0:n.last_name)||"",phone_number:d.phone_number||"",status:d.status||"approved"});return console.log("[SUPABASE] Utilisateur complet r\xe9cup\xe9r\xe9:",{id:m.id,email:m.email,role:m.role,status:m.status}),{success:!0,user:m}}catch(l){return console.error("[SUPABASE] Erreur lors de la connexion:",l.message),{success:!1,error:l.message}}})(e,t);return console.log("[AUTH] R\xe9sultat Supabase:",r),r}catch(r){return console.error("[AUTH] Erreur lors de la connexion:",r.message),{success:!1,error:r.message}}},signInWithPhoneNumber:async(e,t)=>{if(!Ms)return{success:!1,error:"Supabase non configur\xe9"};try{const r=await(async(e,t)=>{if(!Ms)return console.error("[SUPABASE] Client non initialis\xe9 - configuration manquante"),{success:!1,error:"Configuration Supabase manquante"};try{console.log("[SUPABASE] Tentative de connexion avec t\xe9l\xe9phone:",e);const{data:r,error:s}=await Ms.from("users").select("*").eq("phone_number",e).single();if(s||!r)return console.error("[SUPABASE] Utilisateur non trouv\xe9 pour le t\xe9l\xe9phone:",e,s),{success:!1,error:"Aucun utilisateur trouv\xe9 avec ce num\xe9ro de t\xe9l\xe9phone"};if(console.log("[SUPABASE] Utilisateur trouv\xe9 dans la table users:",{id:r.id,email:r.email,phone_number:r.phone_number,role:r.role,status:r.status}),"approved"!==r.status)return console.error("[SUPABASE] Utilisateur non approuv\xe9, statut:",r.status),{success:!1,error:"Votre compte n'est pas encore approuv\xe9"};if(!r.email)return console.error("[SUPABASE] Utilisateur sans email"),{success:!1,error:"Votre compte n'a pas d'email configur\xe9. Contactez l'administrateur."};console.log("[SUPABASE] Tentative de connexion avec email:",r.email);const{data:n,error:a}=await Ms.auth.signInWithPassword({email:r.email,password:t});if(a){if(console.error("[SUPABASE] Erreur d'authentification:",a.message),a.message.includes("Invalid login credentials"))return{success:!1,error:"Identifiants incorrects. V\xe9rifiez votre num\xe9ro de t\xe9l\xe9phone et mot de passe."};throw new Error(Bs(a))}if(!n.user)throw new Error("Aucun utilisateur retourn\xe9 apr\xe8s authentification");return console.log("[SUPABASE] \u2705 Connexion r\xe9ussie"),{success:!0,user:ze(ze({},n.user),{},{role:r.role||"client",first_name:r.first_name||"",last_name:r.last_name||"",phone_number:r.phone_number||"",status:r.status||"approved"})}}catch(r){return console.error("[SUPABASE] Erreur lors de la connexion (t\xe9l\xe9phone):",r.message),{success:!1,error:Bs(r)}}})(e,t);return r}catch(r){return console.error("[AUTH] Erreur lors de la connexion par t\xe9l\xe9phone:",r.message),{success:!1,error:r.message}}},logout:async()=>{if(!Ms){n(null);try{localStorage.removeItem("ab_user_cache")}catch(e){console.warn("[AUTH] Erreur lors de la suppression du cache:",e)}return{success:!0}}try{const t=await(async()=>{try{const{error:e}=await Ms.auth.signOut();if(e)throw new Error(Bs(e));return{success:!0}}catch(e){return console.error("[SUPABASE] Erreur lors de la d\xe9connexion:",e.message),{success:!1,error:Bs(e)}}})();if(t.success){n(null);try{localStorage.removeItem("ab_user_cache")}catch(e){console.warn("[AUTH] Erreur lors de la suppression du cache:",e)}}return t}catch(e){return console.error("[AUTH] Erreur lors de la d\xe9connexion:",e.message),{success:!1,error:e.message}}},refreshUser:async()=>{if(!Ms)return{success:!1,error:"Supabase non configur\xe9"};try{const e=await(async()=>{try{var e,t;const{data:{user:s},error:n}=await Ms.auth.getUser();if(n)throw n;if(!s)return{success:!1,error:"Utilisateur non connect\xe9"};let a=null;try{const{data:e,error:t}=await Ms.from("users").select("*").eq("id",s.id).single();if(t)throw t;a=e}catch(r){console.warn("[SUPABASE] Lecture de public.users indisponible pour cet utilisateur:",r.message)}return{success:!0,user:ze(ze(ze({},s),a||{}),{},{role:a&&a.role||(null===s||void 0===s||null===(e=s.user_metadata)||void 0===e?void 0:e.role)||(null===s||void 0===s||null===(t=s.app_metadata)||void 0===t?void 0:t.role)||"client"})}}catch(s){return console.error("[SUPABASE] Erreur lors de la r\xe9cup\xe9ration utilisateur:",s.message),{success:!1,error:s.message}}})();return e.success&&e.user&&n(e.user),e}catch(e){return console.error("[AUTH] Erreur lors du rafra\xeechissement:",e.message),{success:!1,error:e.message}}},forceRefreshRole:async()=>{if(!Ms||!s)return{success:!1,error:"Utilisateur non connect\xe9"};try{console.log("[AUTH] \ud83d\udd04 For\xe7age de la r\xe9cup\xe9ration du r\xf4le depuis la DB...");const{data:e,error:t}=await Ms.from("users").select("role, first_name, last_name").eq("id",s.id).single();if(t||!e)return console.error("[AUTH] Erreur r\xe9cup\xe9ration r\xf4le DB:",t),{success:!1,error:"Impossible de r\xe9cup\xe9rer le r\xf4le"};console.log("[AUTH] \u2705 R\xf4le r\xe9cup\xe9r\xe9 depuis la DB:",e.role);const r=ze(ze({},s),{},{role:e.role,firstName:e.first_name,lastName:e.last_name});return n(r),localStorage.setItem("ab_user_cache",JSON.stringify({id:r.id,email:r.email,role:e.role,first_name:e.first_name||"",last_name:e.last_name||""})),localStorage.setItem("ab_user_cache_time",Date.now().toString()),console.log("[AUTH] \u2705 R\xf4le mis \xe0 jour:",e.role),{success:!0,role:e.role}}catch(e){return console.error("[AUTH] Erreur lors du for\xe7age du r\xf4le:",e),{success:!1,error:e.message}}},setUser:n};return(0,Ks.jsx)(Js.Provider,{value:o,children:r})};function Qs(e,t){if(null==e)return{};var r,s,n=function(e,t){if(null==e)return{};var r={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(-1!==t.indexOf(s))continue;r[s]=e[s]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(s=0;s<a.length;s++)r=a[s],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var Ys={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Xs=["color","size","strokeWidth","absoluteStrokeWidth","children"];var en=(e,r)=>{const s=(0,t.forwardRef)((s,n)=>{let{color:a="currentColor",size:i=24,strokeWidth:o=2,absoluteStrokeWidth:l,children:c}=s,d=Qs(s,Xs);return(0,t.createElement)("svg",ze(ze({ref:n},Ys),{},{width:i,height:i,stroke:a,strokeWidth:l?24*Number(o)/Number(i):o,className:"lucide lucide-".concat((u=e,u.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()))},d),[...r.map(e=>{let[r,s]=e;return(0,t.createElement)(r,s)}),...(Array.isArray(c)?c:[c])||[]]);var u});return s.displayName="".concat(e),s};const tn=en("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]]),rn=en("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),sn=en("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),nn=en("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),an=e=>{let{message:r,type:s="info",duration:n=5e3,onClose:a}=e;(0,t.useEffect)(()=>{const e=setTimeout(()=>{a()},n);return()=>clearTimeout(e)},[n,a]);return(0,Ks.jsxs)("div",{className:"fixed top-4 right-4 z-50 max-w-sm w-full ".concat((()=>{switch(s){case"success":return"bg-green-50 border-green-200";case"error":return"bg-red-50 border-red-200";case"warning":return"bg-yellow-50 border-yellow-200";default:return"bg-blue-50 border-blue-200"}})()," border rounded-2xl shadow-2xl backdrop-blur-xl"),children:[(0,Ks.jsxs)("div",{className:"flex items-start p-4",children:[(0,Ks.jsx)("div",{className:"flex-shrink-0 mr-3 mt-0.5",children:(()=>{switch(s){case"success":return(0,Ks.jsx)(tn,{size:20,className:"text-green-600"});case"error":return(0,Ks.jsx)(rn,{size:20,className:"text-red-600"});case"warning":return(0,Ks.jsx)(rn,{size:20,className:"text-yellow-600"});default:return(0,Ks.jsx)(sn,{size:20,className:"text-blue-600"})}})()}),(0,Ks.jsx)("div",{className:"flex-1 min-w-0",children:(0,Ks.jsx)("p",{className:"text-sm font-medium text-gray-900",children:r})}),(0,Ks.jsx)("div",{className:"flex-shrink-0 ml-3",children:(0,Ks.jsx)("button",{onClick:a,className:"inline-flex text-gray-400 hover:text-gray-600 transition-colors duration-200",children:(0,Ks.jsx)(nn,{size:16})})})]}),(0,Ks.jsx)("div",{className:"h-1 bg-gray-200 rounded-b-2xl overflow-hidden",children:(0,Ks.jsx)("div",{className:"h-full ".concat("success"===s?"bg-green-500":"error"===s?"bg-red-500":"warning"===s?"bg-yellow-500":"bg-blue-500")})})]})},on=(0,t.createContext)(),ln=()=>{const e=(0,t.useContext)(on);if(!e)throw new Error("useNotifications must be used within a NotificationProvider");return e},cn=e=>{let{children:r}=e;const[s,n]=(0,t.useState)([]),[a,i]=(0,t.useState)(0),[o,l]=(0,t.useState)([]);(0,t.useEffect)(()=>{const e=s.filter(e=>!e.read).length;i(e)},[s]);const c=(0,t.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;try{if(!Ms)return void console.log("[NOTIFICATIONS] Supabase non configur\xe9 - skip chargement");let t=Ms.from("notifications").select("*").order("created_at",{ascending:!1}).limit(50);e&&(t=t.eq("user_id",e));const{data:r,error:s}=await t;if(s)return void console.error("[NOTIFICATIONS] Erreur lors du chargement:",s);if(r){const e=r.map(e=>({id:e.id,title:e.title,message:e.message,type:e.type||"info",priority:e.priority||"medium",read:e.read||!1,timestamp:e.created_at,data:e.data||{},action:e.action||null}));n(e)}}catch(t){console.error("[NOTIFICATIONS] Erreur lors du chargement:",t)}},[]),d=(0,t.useCallback)(async e=>{try{if(!Ms){console.log("[NOTIFICATIONS] Supabase non configur\xe9 - notification locale seulement");const t={id:Date.now()+Math.random(),title:e.title,message:e.message,type:e.type||"info",priority:e.priority||"medium",read:!1,data:e.data||{},action:e.action||null,user_id:e.userId||null,created_at:(new Date).toISOString(),timestamp:(new Date).toISOString()};return void n(r=>r.some(t=>t.title===e.title&&t.message===e.message&&Date.now()-new Date(t.timestamp).getTime()<6e4)?r:[t,...r.slice(0,49)])}const t={title:e.title,message:e.message,type:e.type||"info",priority:e.priority||"medium",read:!1,data:e.data||{},action:e.action||null,user_id:e.userId||null,created_at:(new Date).toISOString()},{data:r,error:s}=await Ms.from("notifications").insert([t]).select().single();if(s)return void console.error("[NOTIFICATIONS] Erreur lors de la sauvegarde:",s);const a=ze(ze({id:r.id},t),{},{timestamp:r.created_at});n(t=>t.some(t=>t.title===e.title&&t.message===e.message&&Date.now()-new Date(t.timestamp).getTime()<6e4)?t:[a,...t.slice(0,49)])}catch(t){console.error("[NOTIFICATIONS] Erreur lors de l'ajout:",t)}},[]),u=(0,t.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;await c(e)},[c]),m=(0,t.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5e3;const s=Date.now()+Math.random(),n={id:s,message:e,type:t,duration:r};l(e=>[...e,n]),setTimeout(()=>{g(s)},r)},[]),h=(0,t.useCallback)(e=>{m(e,"success")},[m]),p=(0,t.useCallback)(e=>{m(e,"error")},[m]),f=(0,t.useCallback)(e=>{m(e,"warning")},[m]),x=(0,t.useCallback)(e=>{m(e,"info")},[m]),g=(0,t.useCallback)(e=>{l(t=>t.filter(t=>t.id!==e))},[]),v={notifications:s,unreadCount:a,addNotification:d,markAsRead:async e=>{try{if(!Ms)return void n(t=>t.map(t=>t.id===e?ze(ze({},t),{},{read:!0}):t));const{error:t}=await Ms.from("notifications").update({read:!0}).eq("id",e);if(t)return void console.error("[NOTIFICATIONS] Erreur lors de la mise \xe0 jour:",t);n(t=>t.map(t=>t.id===e?ze(ze({},t),{},{read:!0}):t))}catch(t){console.error("[NOTIFICATIONS] Erreur lors de la mise \xe0 jour:",t)}},markAllAsRead:async()=>{try{if(!Ms)return void n(e=>e.map(e=>ze(ze({},e),{},{read:!0})));const{error:e}=await Ms.from("notifications").update({read:!0}).eq("read",!1);if(e)return void console.error("[NOTIFICATIONS] Erreur lors de la mise \xe0 jour globale:",e);n(e=>e.map(e=>ze(ze({},e),{},{read:!0})))}catch(e){console.error("[NOTIFICATIONS] Erreur lors de la mise \xe0 jour globale:",e)}},removeNotification:async e=>{try{if(!Ms)return void n(t=>t.filter(t=>t.id!==e));const{error:t}=await Ms.from("notifications").delete().eq("id",e);if(t)return void console.error("[NOTIFICATIONS] Erreur lors de la suppression:",t);n(t=>t.filter(t=>t.id!==e))}catch(t){console.error("[NOTIFICATIONS] Erreur lors de la suppression:",t)}},clearAllNotifications:async()=>{try{if(!Ms)return void n([]);const{error:e}=await Ms.from("notifications").delete().neq("id",0);if(e)return void console.error("[NOTIFICATIONS] Erreur lors de la suppression globale:",e);n([])}catch(e){console.error("[NOTIFICATIONS] Erreur lors de la suppression globale:",e)}},refreshNotifications:u,showToast:m,showSuccess:h,showError:p,showWarning:f,showInfo:x};return(0,Ks.jsxs)(on.Provider,{value:v,children:[r,(0,Ks.jsx)("div",{className:"fixed top-4 right-4 z-50 space-y-2",children:o.map(e=>(0,Ks.jsx)(an,{message:e.message,type:e.type,duration:e.duration,onClose:()=>g(e.id)},e.id))})]})},dn=()=>{console.log("\ud83d\udd0d Test de la configuration PWA..."),"serviceWorker"in navigator?console.log("\u2705 Service Worker support\xe9"):console.log("\u274c Service Worker non support\xe9"),"beforeinstallprompt"in window?console.log("\u2705 API d'installation PWA disponible"):console.log("\u274c API d'installation PWA non disponible"),window.matchMedia("(display-mode: standalone)").matches?console.log("\u2705 App en mode standalone (install\xe9e)"):console.log("\u2139\ufe0f App en mode navigateur");const e=document.querySelector('link[rel="manifest"]');e?console.log("\u2705 Manifest.json trouv\xe9:",e.href):console.log("\u274c Manifest.json non trouv\xe9");const t=document.querySelector('meta[name="theme-color"]');t?console.log("\u2705 Theme color d\xe9fini:",t.content):console.log("\u274c Theme color non d\xe9fini");const r=document.querySelector('link[rel="apple-touch-icon"]');r?console.log("\u2705 Apple touch icon d\xe9fini:",r.href):console.log("\u274c Apple touch icon non d\xe9fini"),"caches"in window?(console.log("\u2705 Cache API disponible"),caches.keys().then(e=>{console.log("\ud83d\udce6 Caches disponibles:",e)})):console.log("\u274c Cache API non disponible"),console.log("\ud83c\udfaf Test PWA termin\xe9")},un=()=>{console.log("\ud83d\udd27 For\xe7age de l'affichage du prompt d'installation...");const e=new Event("beforeinstallprompt");e.preventDefault=()=>{},e.prompt=()=>Promise.resolve({outcome:"accepted"}),e.userChoice=Promise.resolve({outcome:"accepted"}),window.dispatchEvent(e),console.log("\u2705 \xc9v\xe9nement beforeinstallprompt simul\xe9")},mn=()=>{const e=window.matchMedia("(display-mode: standalone)").matches||!0===window.navigator.standalone,t=localStorage.getItem("pwa-install-prompt-seen"),r=localStorage.getItem("pwa-install-accepted"),s=localStorage.getItem("pwa-install-declined");return console.log("\ud83d\udcca \xc9tat d'installation:",{isInstalled:e,hasSeenPrompt:!!t,hasAccepted:!!r,hasDeclined:!!s}),{isInstalled:e,hasSeenPrompt:!!t,hasAccepted:!!r,hasDeclined:!!s}},hn=()=>{console.log("\ud83d\udd04 R\xe9initialisation de l'\xe9tat d'installation..."),localStorage.removeItem("pwa-install-prompt-seen"),localStorage.removeItem("pwa-install-prompt-last-seen"),localStorage.removeItem("pwa-install-accepted"),localStorage.removeItem("pwa-install-declined"),localStorage.removeItem("pwa-install-declined-date"),localStorage.removeItem("pwa-installed"),localStorage.removeItem("pwa-install-date"),console.log("\u2705 \xc9tat d'installation r\xe9initialis\xe9")};"undefined"!==typeof window&&(window.testPWA={testConfiguration:dn,forceInstallPrompt:un,checkInstallationStatus:mn,resetInstallationState:hn},console.log("\ud83d\udee0\ufe0f Fonctions de test PWA disponibles dans window.testPWA"));const pn=()=>{localStorage.removeItem("notification-prompt-seen"),localStorage.removeItem("notification-prompt-last-seen"),console.log("\ud83e\uddea [TEST] Prompt de notification r\xe9initialis\xe9 pour les tests")},fn=()=>{pn(),console.log("\ud83e\uddea [TEST] Simulation d'un utilisateur non abonn\xe9")},xn=()=>{const e=localStorage.getItem("notification-prompt-seen"),t=localStorage.getItem("notification-prompt-last-seen");if(console.log("\ud83e\uddea [TEST] \xc9tat du prompt:"),console.log("   - A vu le prompt:",e),console.log("   - Derni\xe8re fois vu:",t?new Date(parseInt(t)).toLocaleString():"Jamais"),t){const e=(Date.now()-parseInt(t))/864e5;console.log("   - Jours depuis la derni\xe8re fois:",Math.round(e))}return{hasSeenPrompt:!!e,lastSeen:t?parseInt(t):null,daysSinceLastSeen:t?(Date.now()-parseInt(t))/864e5:null}},gn=()=>{console.log("\ud83e\uddea [TEST] Test des conditions d'affichage du prompt:");const e="serviceWorker"in navigator&&"PushManager"in window,t=Notification.permission;console.log("   - Notifications support\xe9es:",e),console.log("   - Permission actuelle:",t),console.log("   - Service Worker disponible:","serviceWorker"in navigator),console.log("   - PushManager disponible:","PushManager"in window);const r=xn(),s=e&&"denied"!==t&&(!r.hasSeenPrompt||r.daysSinceLastSeen&&r.daysSinceLastSeen>=3);return console.log("   - Devrait afficher le prompt:",s),{isSupported:e,permission:t,shouldShow:s,promptState:r}},vn=()=>{pn(),console.log("\ud83e\uddea [TEST] Prompt forc\xe9 pour les tests - rechargez la page")},bn=()=>{pn(),console.log("\ud83e\uddea [TEST] Simulation d'un utilisateur qui a refus\xe9"),console.log("   - Pour tester, refusez manuellement les notifications dans votre navigateur")},yn=async()=>{console.log("\ud83e\uddea [TEST] Test du cycle complet de notifications..."),console.log("\n1. \xc9tat initial:");const e=gn();console.log("\n2. R\xe9initialisation pour le test:"),pn(),console.log("\n3. \xc9tat apr\xe8s r\xe9initialisation:");const t=gn();return console.log("\n\u2705 Test termin\xe9. Rechargez la page pour voir le prompt."),{initialState:e,resetState:t}};function jn(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}"undefined"!==typeof window&&(window.testNotificationPrompt={resetNotificationPromptForTesting:pn,simulateUnsubscribedUser:fn,checkPromptState:xn,testPromptConditions:gn,forceShowPromptForTesting:vn,simulateDeniedUser:bn,testCompleteNotificationFlow:yn},console.log("\ud83e\uddea [TEST] Utilitaires de test charg\xe9s. Utilisez:"),console.log("   - testNotificationPrompt.testCompleteNotificationFlow()"),console.log("   - testNotificationPrompt.checkPromptState()"),console.log("   - testNotificationPrompt.forceShowPromptForTesting()"));let wn={data:""},Nn=e=>"object"==typeof window?((e?e.querySelector("#_goober"):window._goober)||Object.assign((e||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:e||wn,Sn=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,kn=/\/\*[^]*?\*\/|  +/g,_n=/\n+/g,En=(e,t)=>{let r="",s="",n="";for(let a in e){let i=e[a];"@"==a[0]?"i"==a[1]?r=a+" "+i+";":s+="f"==a[1]?En(i,a):a+"{"+En(i,"k"==a[1]?"":t)+"}":"object"==typeof i?s+=En(i,t?t.replace(/([^,])+/g,e=>a.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,t=>/&/.test(t)?t.replace(/&/g,e):e?e+" "+t:t)):a):null!=i&&(a=/^--/.test(a)?a:a.replace(/[A-Z]/g,"-$&").toLowerCase(),n+=En.p?En.p(a,i):a+":"+i+";")}return r+(t&&n?t+"{"+n+"}":n)+s},Cn={},Pn=e=>{if("object"==typeof e){let t="";for(let r in e)t+=r+Pn(e[r]);return t}return e},An=(e,t,r,s,n)=>{let a=Pn(e),i=Cn[a]||(Cn[a]=(e=>{let t=0,r=11;for(;t<e.length;)r=101*r+e.charCodeAt(t++)>>>0;return"go"+r})(a));if(!Cn[i]){let t=a!==e?e:(e=>{let t,r,s=[{}];for(;t=Sn.exec(e.replace(kn,""));)t[4]?s.shift():t[3]?(r=t[3].replace(_n," ").trim(),s.unshift(s[0][r]=s[0][r]||{})):s[0][t[1]]=t[2].replace(_n," ").trim();return s[0]})(e);Cn[i]=En(n?{["@keyframes "+i]:t}:t,r?"":"."+i)}let o=r&&Cn.g?Cn.g:null;return r&&(Cn.g=Cn[i]),((e,t,r,s)=>{s?t.data=t.data.replace(s,e):-1===t.data.indexOf(e)&&(t.data=r?e+t.data:t.data+e)})(Cn[i],t,s,o),i};function Tn(e){let t=this||{},r=e.call?e(t.p):e;return An(r.unshift?r.raw?((e,t,r)=>e.reduce((e,s,n)=>{let a=t[n];if(a&&a.call){let e=a(r),t=e&&e.props&&e.props.className||/^go/.test(e)&&e;a=t?"."+t:e&&"object"==typeof e?e.props?"":En(e,""):!1===e?"":e}return e+s+(null==a?"":a)},""))(r,[].slice.call(arguments,1),t.p):r.reduce((e,r)=>Object.assign(e,r&&r.call?r(t.p):r),{}):r,Nn(t.target),t.g,t.o,t.k)}Tn.bind({g:1});let In,Rn,On,Ln=Tn.bind({k:1});function Dn(e,t){let r=this||{};return function(){let s=arguments;function n(a,i){let o=Object.assign({},a),l=o.className||n.className;r.p=Object.assign({theme:Rn&&Rn()},o),r.o=/ *go\d+/.test(l),o.className=Tn.apply(r,s)+(l?" "+l:""),t&&(o.ref=i);let c=e;return e[0]&&(c=o.as||e,delete o.as),On&&c[0]&&On(o),In(c,o)}return t?t(n):n}}var zn,Mn,Fn,Un,Bn,Vn,qn,Hn,Wn,Gn,Kn,Jn,Zn,$n,Qn,Yn,Xn=(e,t)=>(e=>"function"==typeof e)(e)?e(t):e,ea=(()=>{let e=0;return()=>(++e).toString()})(),ta=(()=>{let e;return()=>{if(void 0===e&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),ra="default",sa=(e,t)=>{let{toastLimit:r}=e.settings;switch(t.type){case 0:return ze(ze({},e),{},{toasts:[t.toast,...e.toasts].slice(0,r)});case 1:return ze(ze({},e),{},{toasts:e.toasts.map(e=>e.id===t.toast.id?ze(ze({},e),t.toast):e)});case 2:let{toast:s}=t;return sa(e,{type:e.toasts.find(e=>e.id===s.id)?1:0,toast:s});case 3:let{toastId:n}=t;return ze(ze({},e),{},{toasts:e.toasts.map(e=>e.id===n||void 0===n?ze(ze({},e),{},{dismissed:!0,visible:!1}):e)});case 4:return void 0===t.toastId?ze(ze({},e),{},{toasts:[]}):ze(ze({},e),{},{toasts:e.toasts.filter(e=>e.id!==t.toastId)});case 5:return ze(ze({},e),{},{pausedAt:t.time});case 6:let a=t.time-(e.pausedAt||0);return ze(ze({},e),{},{pausedAt:void 0,toasts:e.toasts.map(e=>ze(ze({},e),{},{pauseDuration:e.pauseDuration+a}))})}},na=[],aa={toasts:[],pausedAt:void 0,settings:{toastLimit:20}},ia={},oa=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ra;ia[t]=sa(ia[t]||aa,e),na.forEach(e=>{let[r,s]=e;r===t&&s(ia[t])})},la=e=>Object.keys(ia).forEach(t=>oa(e,t)),ca=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ra;return t=>{oa(t,e)}},da={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},ua=e=>(t,r)=>{let s=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"blank",r=arguments.length>2?arguments[2]:void 0;return ze(ze({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0},r),{},{id:(null==r?void 0:r.id)||ea()})}(t,e,r);return ca(s.toasterId||(e=>Object.keys(ia).find(t=>ia[t].toasts.some(t=>t.id===e)))(s.id))({type:2,toast:s}),s.id},ma=(e,t)=>ua("blank")(e,t);ma.error=ua("error"),ma.success=ua("success"),ma.loading=ua("loading"),ma.custom=ua("custom"),ma.dismiss=(e,t)=>{let r={type:3,toastId:e};t?ca(t)(r):la(r)},ma.dismissAll=e=>ma.dismiss(void 0,e),ma.remove=(e,t)=>{let r={type:4,toastId:e};t?ca(t)(r):la(r)},ma.removeAll=e=>ma.remove(void 0,e),ma.promise=(e,t,r)=>{let s=ma.loading(t.loading,ze(ze({},r),null==r?void 0:r.loading));return"function"==typeof e&&(e=e()),e.then(e=>{let n=t.success?Xn(t.success,e):void 0;return n?ma.success(n,ze(ze({id:s},r),null==r?void 0:r.success)):ma.dismiss(s),e}).catch(e=>{let n=t.error?Xn(t.error,e):void 0;n?ma.error(n,ze(ze({id:s},r),null==r?void 0:r.error)):ma.dismiss(s)}),e};var ha=function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",{toasts:s,pausedAt:n}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ra,[s,n]=(0,t.useState)(ia[r]||aa),a=(0,t.useRef)(ia[r]);(0,t.useEffect)(()=>(a.current!==ia[r]&&n(ia[r]),na.push([r,n]),()=>{let e=na.findIndex(e=>{let[t]=e;return t===r});e>-1&&na.splice(e,1)}),[r]);let i=s.toasts.map(t=>{var r,s,n;return ze(ze(ze(ze({},e),e[t.type]),t),{},{removeDelay:t.removeDelay||(null==(r=e[t.type])?void 0:r.removeDelay)||(null==e?void 0:e.removeDelay),duration:t.duration||(null==(s=e[t.type])?void 0:s.duration)||(null==e?void 0:e.duration)||da[t.type],style:ze(ze(ze({},e.style),null==(n=e[t.type])?void 0:n.style),t.style)})});return ze(ze({},s),{},{toasts:i})}(e,r),a=(0,t.useRef)(new Map).current,i=(0,t.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;if(a.has(e))return;let r=setTimeout(()=>{a.delete(e),o({type:4,toastId:e})},t);a.set(e,r)},[]);(0,t.useEffect)(()=>{if(n)return;let e=Date.now(),t=s.map(t=>{if(t.duration===1/0)return;let s=(t.duration||0)+t.pauseDuration-(e-t.createdAt);if(!(s<0))return setTimeout(()=>ma.dismiss(t.id,r),s);t.visible&&ma.dismiss(t.id)});return()=>{t.forEach(e=>e&&clearTimeout(e))}},[s,n,r]);let o=(0,t.useCallback)(ca(r),[r]),l=(0,t.useCallback)(()=>{o({type:5,time:Date.now()})},[o]),c=(0,t.useCallback)((e,t)=>{o({type:1,toast:{id:e,height:t}})},[o]),d=(0,t.useCallback)(()=>{n&&o({type:6,time:Date.now()})},[n,o]),u=(0,t.useCallback)((e,t)=>{let{reverseOrder:r=!1,gutter:n=8,defaultPosition:a}=t||{},i=s.filter(t=>(t.position||a)===(e.position||a)&&t.height),o=i.findIndex(t=>t.id===e.id),l=i.filter((e,t)=>t<o&&e.visible).length;return i.filter(e=>e.visible).slice(...r?[l+1]:[0,l]).reduce((e,t)=>e+(t.height||0)+n,0)},[s]);return(0,t.useEffect)(()=>{s.forEach(e=>{if(e.dismissed)i(e.id,e.removeDelay);else{let t=a.get(e.id);t&&(clearTimeout(t),a.delete(e.id))}})},[s,i]),{toasts:s,handlers:{updateHeight:c,startPause:l,endPause:d,calculateOffset:u}}},pa=Ln(zn||(zn=jn(["\nfrom {\n  transform: scale(0) rotate(45deg);\n\topacity: 0;\n}\nto {\n transform: scale(1) rotate(45deg);\n  opacity: 1;\n}"]))),fa=Ln(Mn||(Mn=jn(["\nfrom {\n  transform: scale(0);\n  opacity: 0;\n}\nto {\n  transform: scale(1);\n  opacity: 1;\n}"]))),xa=Ln(Fn||(Fn=jn(["\nfrom {\n  transform: scale(0) rotate(90deg);\n\topacity: 0;\n}\nto {\n  transform: scale(1) rotate(90deg);\n\topacity: 1;\n}"]))),ga=Dn("div")(Un||(Un=jn(["\n  width: 20px;\n  opacity: 0;\n  height: 20px;\n  border-radius: 10px;\n  background: ",";\n  position: relative;\n  transform: rotate(45deg);\n\n  animation: "," 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)\n    forwards;\n  animation-delay: 100ms;\n\n  &:after,\n  &:before {\n    content: '';\n    animation: "," 0.15s ease-out forwards;\n    animation-delay: 150ms;\n    position: absolute;\n    border-radius: 3px;\n    opacity: 0;\n    background: ",";\n    bottom: 9px;\n    left: 4px;\n    height: 2px;\n    width: 12px;\n  }\n\n  &:before {\n    animation: "," 0.15s ease-out forwards;\n    animation-delay: 180ms;\n    transform: rotate(90deg);\n  }\n"])),e=>e.primary||"#ff4b4b",pa,fa,e=>e.secondary||"#fff",xa),va=Ln(Bn||(Bn=jn(["\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n"]))),ba=Dn("div")(Vn||(Vn=jn(["\n  width: 12px;\n  height: 12px;\n  box-sizing: border-box;\n  border: 2px solid;\n  border-radius: 100%;\n  border-color: ",";\n  border-right-color: ",";\n  animation: "," 1s linear infinite;\n"])),e=>e.secondary||"#e0e0e0",e=>e.primary||"#616161",va),ya=Ln(qn||(qn=jn(["\nfrom {\n  transform: scale(0) rotate(45deg);\n\topacity: 0;\n}\nto {\n  transform: scale(1) rotate(45deg);\n\topacity: 1;\n}"]))),ja=Ln(Hn||(Hn=jn(["\n0% {\n\theight: 0;\n\twidth: 0;\n\topacity: 0;\n}\n40% {\n  height: 0;\n\twidth: 6px;\n\topacity: 1;\n}\n100% {\n  opacity: 1;\n  height: 10px;\n}"]))),wa=Dn("div")(Wn||(Wn=jn(["\n  width: 20px;\n  opacity: 0;\n  height: 20px;\n  border-radius: 10px;\n  background: ",";\n  position: relative;\n  transform: rotate(45deg);\n\n  animation: "," 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)\n    forwards;\n  animation-delay: 100ms;\n  &:after {\n    content: '';\n    box-sizing: border-box;\n    animation: "," 0.2s ease-out forwards;\n    opacity: 0;\n    animation-delay: 200ms;\n    position: absolute;\n    border-right: 2px solid;\n    border-bottom: 2px solid;\n    border-color: ",";\n    bottom: 6px;\n    left: 6px;\n    height: 10px;\n    width: 6px;\n  }\n"])),e=>e.primary||"#61d345",ya,ja,e=>e.secondary||"#fff"),Na=Dn("div")(Gn||(Gn=jn(["\n  position: absolute;\n"]))),Sa=Dn("div")(Kn||(Kn=jn(["\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  min-width: 20px;\n  min-height: 20px;\n"]))),ka=Ln(Jn||(Jn=jn(["\nfrom {\n  transform: scale(0.6);\n  opacity: 0.4;\n}\nto {\n  transform: scale(1);\n  opacity: 1;\n}"]))),_a=Dn("div")(Zn||(Zn=jn(["\n  position: relative;\n  transform: scale(0.6);\n  opacity: 0.4;\n  min-width: 20px;\n  animation: "," 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)\n    forwards;\n"])),ka),Ea=e=>{let{toast:r}=e,{icon:s,type:n,iconTheme:a}=r;return void 0!==s?"string"==typeof s?t.createElement(_a,null,s):s:"blank"===n?null:t.createElement(Sa,null,t.createElement(ba,ze({},a)),"loading"!==n&&t.createElement(Na,null,"error"===n?t.createElement(ga,ze({},a)):t.createElement(wa,ze({},a))))},Ca=e=>"\n0% {transform: translate3d(0,".concat(-200*e,"%,0) scale(.6); opacity:.5;}\n100% {transform: translate3d(0,0,0) scale(1); opacity:1;}\n"),Pa=e=>"\n0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}\n100% {transform: translate3d(0,".concat(-150*e,"%,-1px) scale(.6); opacity:0;}\n"),Aa=Dn("div")($n||($n=jn(["\n  display: flex;\n  align-items: center;\n  background: #fff;\n  color: #363636;\n  line-height: 1.3;\n  will-change: transform;\n  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);\n  max-width: 350px;\n  pointer-events: auto;\n  padding: 8px 10px;\n  border-radius: 8px;\n"]))),Ta=Dn("div")(Qn||(Qn=jn(["\n  display: flex;\n  justify-content: center;\n  margin: 4px 10px;\n  color: inherit;\n  flex: 1 1 auto;\n  white-space: pre-line;\n"]))),Ia=t.memo(e=>{let{toast:r,position:s,style:n,children:a}=e,i=r.height?((e,t)=>{let r=e.includes("top")?1:-1,[s,n]=ta()?["0%{opacity:0;} 100%{opacity:1;}","0%{opacity:1;} 100%{opacity:0;}"]:[Ca(r),Pa(r)];return{animation:t?"".concat(Ln(s)," 0.35s cubic-bezier(.21,1.02,.73,1) forwards"):"".concat(Ln(n)," 0.4s forwards cubic-bezier(.06,.71,.55,1)")}})(r.position||s||"top-center",r.visible):{opacity:0},o=t.createElement(Ea,{toast:r}),l=t.createElement(Ta,ze({},r.ariaProps),Xn(r.message,r));return t.createElement(Aa,{className:r.className,style:ze(ze(ze({},i),n),r.style)},"function"==typeof a?a({icon:o,message:l}):t.createElement(t.Fragment,null,o,l))});!function(e,t,r,s){En.p=t,In=e,Rn=r,On=s}(t.createElement);var Ra=e=>{let{id:r,className:s,style:n,onHeightUpdate:a,children:i}=e,o=t.useCallback(e=>{if(e){let t=()=>{let t=e.getBoundingClientRect().height;a(r,t)};t(),new MutationObserver(t).observe(e,{subtree:!0,childList:!0,characterData:!0})}},[r,a]);return t.createElement("div",{ref:o,className:s,style:n},i)},Oa=Tn(Yn||(Yn=jn(["\n  z-index: 9999;\n  > * {\n    pointer-events: auto;\n  }\n"]))),La=e=>{let{reverseOrder:r,position:s="top-center",toastOptions:n,gutter:a,children:i,toasterId:o,containerStyle:l,containerClassName:c}=e,{toasts:d,handlers:u}=ha(n,o);return t.createElement("div",{"data-rht-toaster":o||"",style:ze({position:"fixed",zIndex:9999,top:16,left:16,right:16,bottom:16,pointerEvents:"none"},l),className:c,onMouseEnter:u.startPause,onMouseLeave:u.endPause},d.map(e=>{let n=e.position||s,o=((e,t)=>{let r=e.includes("top"),s=r?{top:0}:{bottom:0},n=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return ze(ze({left:0,right:0,display:"flex",position:"absolute",transition:ta()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:"translateY(".concat(t*(r?1:-1),"px)")},s),n)})(n,u.calculateOffset(e,{reverseOrder:r,gutter:a,defaultPosition:s}));return t.createElement(Ra,{id:e.id,key:e.id,onHeightUpdate:u.updateHeight,className:e.visible?Oa:"",style:o},"custom"===e.type?Xn(e.message,e):i?i(e):t.createElement(Ia,{toast:e,position:n}))}))},Da=ma;const za=new class{constructor(){this.updateAvailable=!1,this.updateCallback=null,this.checkInterval=null}startChecking(e){this.updateCallback=e,this.checkInterval=setInterval(()=>{this.checkForUpdates()},3e5),this.checkForUpdates()}checkForUpdates(){"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(e=>{e.update()}),fetch("/index.html",{cache:"no-cache"}).then(e=>e.text()).then(e=>{const t=this.getHash(e),r=localStorage.getItem("app-version-hash");r&&r!==t&&(this.updateAvailable=!0,this.updateCallback&&this.updateCallback()),localStorage.setItem("app-version-hash",t)}).catch(e=>{console.log("Erreur lors de la v\xe9rification des mises \xe0 jour:",e)})}getHash(e){let t=0;for(let r=0;r<e.length;r++){t=(t<<5)-t+e.charCodeAt(r),t&=t}return t.toString()}applyUpdate(){this.updateAvailable&&window.location.reload()}stopChecking(){this.checkInterval&&(clearInterval(this.checkInterval),this.checkInterval=null)}showUpdateNotification(){this.updateAvailable&&this.updateCallback&&this.updateCallback()}},Ma="2.0.0",Fa="ab_app_version",Ua=()=>{try{const e=localStorage.getItem(Fa);return e!==Ma&&(console.log("[CACHE] Nouvelle version d\xe9tect\xe9e:",Ma,"(ancienne:",e,")"),localStorage.setItem(Fa,Ma),Ba(),console.log("[CACHE] Cache nettoy\xe9 pour la version",Ma),!0)}catch(e){return console.error("[CACHE] Erreur lors de la v\xe9rification de version:",e),!1}},Ba=async()=>{try{const e=["ab_user_cache","supabase.auth.token"];if(Object.keys(localStorage).forEach(t=>{e.some(e=>t.includes(e))||localStorage.removeItem(t)}),console.log("[CACHE] localStorage nettoy\xe9 (sauf donn\xe9es essentielles)"),sessionStorage.clear(),console.log("[CACHE] sessionStorage nettoy\xe9"),"caches"in window){const e=await caches.keys();await Promise.all(e.map(e=>(console.log("[CACHE] Suppression du cache:",e),caches.delete(e)))),console.log("[CACHE] Cache Service Worker nettoy\xe9")}if("serviceWorker"in navigator){const e=await navigator.serviceWorker.getRegistrations();for(let t of e)await t.unregister(),console.log("[CACHE] Service Worker d\xe9sinscrit")}return!0}catch(e){return console.error("[CACHE] Erreur lors du nettoyage du cache:",e),!1}},Va=()=>Ua()?(console.log("[CACHE] \u2705 Application mise \xe0 jour vers la version",Ma),!0):(console.log("[CACHE] Application \xe0 jour (version",Ma,")"),!1),qa=()=>(console.log("\ud83d\udd04 R\xe9initialisation de tous les prompts utilisateur..."),localStorage.removeItem("pwa-install-prompt-seen"),localStorage.removeItem("pwa-install-prompt-dismissed"),localStorage.removeItem("pwa-install-prompt-last-seen"),localStorage.removeItem("notification-prompt-seen"),localStorage.removeItem("notification-prompt-declined"),localStorage.removeItem("notification-prompt-last-seen"),console.log("\u2705 Tous les prompts ont \xe9t\xe9 r\xe9initialis\xe9s"),!0),Ha=()=>(console.log("\ud83d\udd04 R\xe9initialisation des prompts PWA..."),localStorage.removeItem("pwa-install-prompt-seen"),localStorage.removeItem("pwa-install-prompt-dismissed"),localStorage.removeItem("pwa-install-prompt-last-seen"),console.log("\u2705 Prompts PWA r\xe9initialis\xe9s"),!0),Wa=()=>(console.log("\ud83d\udd04 R\xe9initialisation des prompts de notifications..."),localStorage.removeItem("notification-prompt-seen"),localStorage.removeItem("notification-prompt-declined"),localStorage.removeItem("notification-prompt-last-seen"),console.log("\u2705 Prompts de notifications r\xe9initialis\xe9s"),!0),Ga=()=>{const e={pwa:{seen:"true"===localStorage.getItem("pwa-install-prompt-seen"),dismissed:"true"===localStorage.getItem("pwa-install-prompt-dismissed"),lastSeen:localStorage.getItem("pwa-install-prompt-last-seen")},notifications:{seen:"true"===localStorage.getItem("notification-prompt-seen"),declined:"true"===localStorage.getItem("notification-prompt-declined"),lastSeen:localStorage.getItem("notification-prompt-last-seen")}};return console.log("\ud83d\udcca \xc9tat des prompts:",e),e},Ka=()=>{console.log("\ud83d\udd27 For\xe7age de l'affichage des prompts..."),qa(),window.location.reload()};"undefined"!==typeof window&&(window.resetAllUserPrompts=qa,window.resetPWAPrompts=Ha,window.resetNotificationPrompts=Wa,window.checkPromptStatus=Ga,window.forceShowPrompts=Ka,console.log("\n\ud83d\udd27 Utilitaires de prompts disponibles dans la console :\n\n\u2022 resetAllUserPrompts() - R\xe9initialise tous les prompts\n\u2022 resetPWAPrompts() - R\xe9initialise seulement les prompts PWA\n\u2022 resetNotificationPrompts() - R\xe9initialise seulement les prompts de notifications\n\u2022 checkPromptStatus() - V\xe9rifie l'\xe9tat actuel des prompts\n\u2022 forceShowPrompts() - Force l'affichage des prompts (recharge la page)\n\n\ud83d\udca1 Utilisez ces fonctions pour tester ou r\xe9initialiser les prompts utilisateur.\n  "));const Ja=en("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]),Za=en("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),$a=en("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),Qa=en("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),Ya=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Xa=(()=>new Set(Ya))(),ei=e=>180*e/Math.PI,ti=e=>{const t=ei(Math.atan2(e[1],e[0]));return si(t)},ri={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:ti,rotateZ:ti,skewX:e=>ei(Math.atan(e[1])),skewY:e=>ei(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},si=e=>((e%=360)<0&&(e+=360),e),ni=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),ai=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),ii={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:ni,scaleY:ai,scale:e=>(ni(e)+ai(e))/2,rotateX:e=>si(ei(Math.atan2(e[6],e[5]))),rotateY:e=>si(ei(Math.atan2(-e[2],e[0]))),rotateZ:ti,rotate:ti,skewX:e=>ei(Math.atan(e[4])),skewY:e=>ei(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function oi(e){return e.includes("scale")?1:0}function li(e,t){if(!e||"none"===e)return oi(t);const r=e.match(/^matrix3d\(([\t-\r ,-\.0-9e\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+)\)$/);let s,n;if(r)s=ii,n=r;else{const t=e.match(/^matrix\(([\t-\r ,-\.0-9e\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+)\)$/);s=ri,n=t}if(!n)return oi(t);const a=s[t],i=n[1].split(",").map(ci);return"function"===typeof a?a(i):i[a]}function ci(e){return parseFloat(e.trim())}const di=e=>t=>"string"===typeof t&&t.startsWith(e),ui=di("--"),mi=di("var(--"),hi=e=>!!mi(e)&&pi.test(e.split("/*")[0].trim()),pi=/var\(--(?:[\x2D0-9A-Z_a-z\u017F\u212A]+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*|[\x2D0-9A-Z_a-z\u017F\u212A]+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*,(?:[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(?:(?![\t-\r \(\)\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uD800-\uDFFF\uFEFF])[^]|[\uD800-\uDBFF][\uDC00-\uDFFF])|[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*\((?:(?:(?![\(\)\uD800-\uDFFF])[^]|[\uD800-\uDBFF][\uDC00-\uDFFF])|\((?:(?![\(\)\uD800-\uDFFF])[^]|[\uD800-\uDBFF][\uDC00-\uDFFF])*\))*\))+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*)\)$/i;function fi(e){let{top:t,left:r,right:s,bottom:n}=e;return{x:{min:r,max:s},y:{min:t,max:n}}}const xi=(e,t,r)=>e+(t-e)*r;function gi(e){return void 0===e||1===e}function vi(e){let{scale:t,scaleX:r,scaleY:s}=e;return!gi(t)||!gi(r)||!gi(s)}function bi(e){return vi(e)||yi(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function yi(e){return ji(e.x)||ji(e.y)}function ji(e){return e&&"0%"!==e}function wi(e,t,r){return r+t*(e-r)}function Ni(e,t,r,s,n){return void 0!==n&&(e=wi(e,n,s)),wi(e,r,s)+t}function Si(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,s=arguments.length>3?arguments[3]:void 0,n=arguments.length>4?arguments[4]:void 0;e.min=Ni(e.min,t,r,s,n),e.max=Ni(e.max,t,r,s,n)}function ki(e,t){let{x:r,y:s}=t;Si(e.x,r.translate,r.scale,r.originPoint),Si(e.y,s.translate,s.scale,s.originPoint)}const _i=.999999999999,Ei=1.0000000000001;function Ci(e,t){e.min=e.min+t,e.max=e.max+t}function Pi(e,t,r,s){let n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.5;Si(e,t,r,xi(e.min,e.max,n),s)}function Ai(e,t){Pi(e.x,t.x,t.scaleX,t.scale,t.originX),Pi(e.y,t.y,t.scaleY,t.scale,t.originY)}function Ti(e,t){return fi(function(e,t){if(!t)return e;const r=t({x:e.left,y:e.top}),s=t({x:e.right,y:e.bottom});return{top:r.y,left:r.x,bottom:s.y,right:s.x}}(e.getBoundingClientRect(),t))}const Ii=new Set(["width","height","top","left","right","bottom",...Ya]),Ri=(e,t,r)=>r>t?t:r<e?e:r,Oi={test:e=>"number"===typeof e,parse:parseFloat,transform:e=>e},Li=ze(ze({},Oi),{},{transform:e=>Ri(0,1,e)}),Di=ze(ze({},Oi),{},{default:1}),zi=e=>({test:t=>"string"===typeof t&&t.endsWith(e)&&1===t.split(" ").length,parse:parseFloat,transform:t=>"".concat(t).concat(e)}),Mi=zi("deg"),Fi=zi("%"),Ui=zi("px"),Bi=zi("vh"),Vi=zi("vw"),qi=(()=>ze(ze({},Fi),{},{parse:e=>Fi.parse(e)/100,transform:e=>Fi.transform(100*e)}))(),Hi=e=>t=>t.test(e),Wi=[Oi,Ui,Fi,Mi,Vi,Bi,{test:e=>"auto"===e,parse:e=>e}],Gi=e=>Wi.find(Hi(e));const Ki=e=>/^-?(?:[0-9]+(?:\.[0-9]+)?|\.[0-9]+)$/.test(e),Ji=/^var\(--(?:([\x2D0-9A-Z_a-z]+)|([\x2D0-9A-Z_a-z]+), ?([ #%\(\),-\.0-9A-Za-z]+))\)/;function Zi(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;'Max CSS variable fallback depth detected in property "'.concat(e,'". This may indicate a circular fallback dependency.');const[s,n]=function(e){const t=Ji.exec(e);if(!t)return[,];const[,r,s,n]=t;return["--".concat(null!==r&&void 0!==r?r:s),n]}(e);if(!s)return;const a=window.getComputedStyle(t).getPropertyValue(s);if(a){const e=a.trim();return Ki(e)?parseFloat(e):e}return hi(n)?Zi(n,t,r+1):n}const $i=e=>e===Oi||e===Ui,Qi=new Set(["x","y","z"]),Yi=Ya.filter(e=>!Qi.has(e));const Xi={width:(e,t)=>{let{x:r}=e,{paddingLeft:s="0",paddingRight:n="0"}=t;return r.max-r.min-parseFloat(s)-parseFloat(n)},height:(e,t)=>{let{y:r}=e,{paddingTop:s="0",paddingBottom:n="0"}=t;return r.max-r.min-parseFloat(s)-parseFloat(n)},top:(e,t)=>{let{top:r}=t;return parseFloat(r)},left:(e,t)=>{let{left:r}=t;return parseFloat(r)},bottom:(e,t)=>{let{y:r}=e,{top:s}=t;return parseFloat(s)+(r.max-r.min)},right:(e,t)=>{let{x:r}=e,{left:s}=t;return parseFloat(s)+(r.max-r.min)},x:(e,t)=>{let{transform:r}=t;return li(r,"x")},y:(e,t)=>{let{transform:r}=t;return li(r,"y")}};Xi.translateX=Xi.x,Xi.translateY=Xi.y;const eo=e=>e,to={},ro=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],so={value:null,addProjectionMetrics:null};function no(e,t){let r=!1,s=!0;const n={delta:0,timestamp:0,isProcessing:!1},a=()=>r=!0,i=ro.reduce((e,r)=>(e[r]=function(e,t){let r=new Set,s=new Set,n=!1,a=!1;const i=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1},l=0;function c(t){i.has(t)&&(d.schedule(t),e()),l++,t(o)}const d={schedule:function(e){const t=arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&n?r:s;return arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&i.add(e),t.has(e)||t.add(e),e},cancel:e=>{s.delete(e),i.delete(e)},process:e=>{o=e,n?a=!0:(n=!0,[r,s]=[s,r],r.forEach(c),t&&so.value&&so.value.frameloop[t].push(l),l=0,r.clear(),n=!1,a&&(a=!1,d.process(e)))}};return d}(a,t?r:void 0),e),{}),{setup:o,read:l,resolveKeyframes:c,preUpdate:d,update:u,preRender:m,render:h,postRender:p}=i,f=()=>{const a=to.useManualTiming?n.timestamp:performance.now();r=!1,to.useManualTiming||(n.delta=s?1e3/60:Math.max(Math.min(a-n.timestamp,40),1)),n.timestamp=a,n.isProcessing=!0,o.process(n),l.process(n),c.process(n),d.process(n),u.process(n),m.process(n),h.process(n),p.process(n),n.isProcessing=!1,r&&t&&(s=!1,e(f))},x=ro.reduce((t,a)=>{const o=i[a];return t[a]=function(t){let a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return r||(r=!0,s=!0,n.isProcessing||e(f)),o.schedule(t,a,i)},t},{});return{schedule:x,cancel:e=>{for(let t=0;t<ro.length;t++)i[ro[t]].cancel(e)},state:n,steps:i}}const{schedule:ao,cancel:io,state:oo,steps:lo}=no("undefined"!==typeof requestAnimationFrame?requestAnimationFrame:eo,!0),co=new Set;let uo=!1,mo=!1,ho=!1;function po(){if(mo){const e=Array.from(co).filter(e=>e.needsMeasurement),t=new Set(e.map(e=>e.element)),r=new Map;t.forEach(e=>{const t=function(e){const t=[];return Yi.forEach(r=>{const s=e.getValue(r);void 0!==s&&(t.push([r,s.get()]),s.set(r.startsWith("scale")?1:0))}),t}(e);t.length&&(r.set(e,t),e.render())}),e.forEach(e=>e.measureInitialState()),t.forEach(e=>{e.render();const t=r.get(e);t&&t.forEach(t=>{var r;let[s,n]=t;null===(r=e.getValue(s))||void 0===r||r.set(n)})}),e.forEach(e=>e.measureEndState()),e.forEach(e=>{void 0!==e.suspendedScrollY&&window.scrollTo(0,e.suspendedScrollY)})}mo=!1,uo=!1,co.forEach(e=>e.complete(ho)),co.clear()}function fo(){co.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(mo=!0)})}class xo{constructor(e,t,r,s,n){let a=arguments.length>5&&void 0!==arguments[5]&&arguments[5];this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=r,this.motionValue=s,this.element=n,this.isAsync=a}scheduleResolve(){this.state="scheduled",this.isAsync?(co.add(this),uo||(uo=!0,ao.read(fo),ao.resolveKeyframes(po))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:r,motionValue:s}=this;if(null===e[0]){const n=null===s||void 0===s?void 0:s.get(),a=e[e.length-1];if(void 0!==n)e[0]=n;else if(r&&t){const s=r.readValue(t,a);void 0!==s&&null!==s&&(e[0]=s)}void 0===e[0]&&(e[0]=a),s&&void 0===n&&s.set(e[0])}!function(e){for(let r=1;r<e.length;r++){var t;null!==(t=e[r])&&void 0!==t||(e[r]=e[r-1])}}(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),co.delete(this)}cancel(){"scheduled"===this.state&&(co.delete(this),this.state="pending")}resume(){"pending"===this.state&&this.scheduleResolve()}}const go=e=>/^0(?:[\0-\x08\x0E-\x1F!-\x2D\/-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+$/.test(e);function vo(e){return"number"===typeof e?0===e:null===e||("none"===e||"0"===e||go(e))}const bo=e=>Math.round(1e5*e)/1e5,yo=/-?(?:[0-9]+(?:\.[0-9]+)?|\.[0-9]+)/g;const jo=/^(?:#[0-9a-f]{3,8}|(?:rgb|h[s\u017F]l)a?\((?:-?[\.0-9]+%?[\t-\r ,\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+){2}-?[\.0-9]+%?[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(?:[,\/][\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*)?(?:\b[0-9]+(?:\.[0-9]+)?|\.[0-9]+)?%?\))$/i,wo=(e,t)=>r=>Boolean("string"===typeof r&&jo.test(r)&&r.startsWith(e)||t&&!function(e){return null==e}(r)&&Object.prototype.hasOwnProperty.call(r,t)),No=(e,t,r)=>s=>{if("string"!==typeof s)return s;const[n,a,i,o]=s.match(yo);return{[e]:parseFloat(n),[t]:parseFloat(a),[r]:parseFloat(i),alpha:void 0!==o?parseFloat(o):1}},So=ze(ze({},Oi),{},{transform:e=>Math.round((e=>Ri(0,255,e))(e))}),ko={test:wo("rgb","red"),parse:No("red","green","blue"),transform:e=>{let{red:t,green:r,blue:s,alpha:n=1}=e;return"rgba("+So.transform(t)+", "+So.transform(r)+", "+So.transform(s)+", "+bo(Li.transform(n))+")"}};const _o={test:wo("#"),parse:function(e){let t="",r="",s="",n="";return e.length>5?(t=e.substring(1,3),r=e.substring(3,5),s=e.substring(5,7),n=e.substring(7,9)):(t=e.substring(1,2),r=e.substring(2,3),s=e.substring(3,4),n=e.substring(4,5),t+=t,r+=r,s+=s,n+=n),{red:parseInt(t,16),green:parseInt(r,16),blue:parseInt(s,16),alpha:n?parseInt(n,16)/255:1}},transform:ko.transform},Eo={test:wo("hsl","hue"),parse:No("hue","saturation","lightness"),transform:e=>{let{hue:t,saturation:r,lightness:s,alpha:n=1}=e;return"hsla("+Math.round(t)+", "+Fi.transform(bo(r))+", "+Fi.transform(bo(s))+", "+bo(Li.transform(n))+")"}},Co={test:e=>ko.test(e)||_o.test(e)||Eo.test(e),parse:e=>ko.test(e)?ko.parse(e):Eo.test(e)?Eo.parse(e):_o.parse(e),transform:e=>"string"===typeof e?e:e.hasOwnProperty("red")?ko.transform(e):Eo.transform(e),getAnimatableNone:e=>{const t=Co.parse(e);return t.alpha=0,Co.transform(t)}},Po=/(?:#[0-9a-f]{3,8}|(?:rgb|h[s\u017F]l)a?\((?:-?[\.0-9]+%?[\t-\r ,\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+){2}-?[\.0-9]+%?[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(?:[,\/][\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*)?(?:\b[0-9]+(?:\.[0-9]+)?|\.[0-9]+)?%?\))/gi;const Ao="number",To="color",Io=/var[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*\([\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*--(?:[\x2D0-9A-Z_a-z\u017F\u212A]+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*|[\x2D0-9A-Z_a-z\u017F\u212A]+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*,(?:[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(?:(?![\t-\r \(\)\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uD800-\uDFFF\uFEFF])[^]|[\uD800-\uDBFF][\uDC00-\uDFFF])|[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*\((?:(?:(?![\(\)\uD800-\uDFFF])[^]|[\uD800-\uDBFF][\uDC00-\uDFFF])|\((?:(?![\(\)\uD800-\uDFFF])[^]|[\uD800-\uDBFF][\uDC00-\uDFFF])*\))*\))+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*)\)|#[0-9a-f]{3,8}|(?:rgb|h[s\u017F]l)a?\((?:-?[\.0-9]+%?[\t-\r ,\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+){2}-?[\.0-9]+%?[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(?:[,\/][\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*)?(?:\b[0-9]+(?:\.[0-9]+)?|\.[0-9]+)?%?\)|-?(?:[0-9]+(?:\.[0-9]+)?|\.[0-9]+)/gi;function Ro(e){const t=e.toString(),r=[],s={color:[],number:[],var:[]},n=[];let a=0;const i=t.replace(Io,e=>(Co.test(e)?(s.color.push(a),n.push(To),r.push(Co.parse(e))):e.startsWith("var(")?(s.var.push(a),n.push("var"),r.push(e)):(s.number.push(a),n.push(Ao),r.push(parseFloat(e))),++a,"${}")).split("${}");return{values:r,split:i,indexes:s,types:n}}function Oo(e){return Ro(e).values}function Lo(e){const{split:t,types:r}=Ro(e),s=t.length;return e=>{let n="";for(let a=0;a<s;a++)if(n+=t[a],void 0!==e[a]){const t=r[a];n+=t===Ao?bo(e[a]):t===To?Co.transform(e[a]):e[a]}return n}}const Do=e=>"number"===typeof e?0:Co.test(e)?Co.getAnimatableNone(e):e;const zo={test:function(e){var t,r;return isNaN(e)&&"string"===typeof e&&((null===(t=e.match(yo))||void 0===t?void 0:t.length)||0)+((null===(r=e.match(Po))||void 0===r?void 0:r.length)||0)>0},parse:Oo,createTransformer:Lo,getAnimatableNone:function(e){const t=Oo(e);return Lo(e)(t.map(Do))}},Mo=new Set(["brightness","contrast","saturate","opacity"]);function Fo(e){const[t,r]=e.slice(0,-1).split("(");if("drop-shadow"===t)return e;const[s]=r.match(yo)||[];if(!s)return e;const n=r.replace(s,"");let a=Mo.has(t)?1:0;return s!==r&&(a*=100),t+"("+a+n+")"}const Uo=/\b([\x2Da-z]*)\((?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?\)/g,Bo=ze(ze({},zo),{},{getAnimatableNone:e=>{const t=e.match(Uo);return t?t.map(Fo).join(" "):e}}),Vo=ze(ze({},Oi),{},{transform:Math.round}),qo=ze(ze({borderWidth:Ui,borderTopWidth:Ui,borderRightWidth:Ui,borderBottomWidth:Ui,borderLeftWidth:Ui,borderRadius:Ui,radius:Ui,borderTopLeftRadius:Ui,borderTopRightRadius:Ui,borderBottomRightRadius:Ui,borderBottomLeftRadius:Ui,width:Ui,maxWidth:Ui,height:Ui,maxHeight:Ui,top:Ui,right:Ui,bottom:Ui,left:Ui,padding:Ui,paddingTop:Ui,paddingRight:Ui,paddingBottom:Ui,paddingLeft:Ui,margin:Ui,marginTop:Ui,marginRight:Ui,marginBottom:Ui,marginLeft:Ui,backgroundPositionX:Ui,backgroundPositionY:Ui},{rotate:Mi,rotateX:Mi,rotateY:Mi,rotateZ:Mi,scale:Di,scaleX:Di,scaleY:Di,scaleZ:Di,skew:Mi,skewX:Mi,skewY:Mi,distance:Ui,translateX:Ui,translateY:Ui,translateZ:Ui,x:Ui,y:Ui,z:Ui,perspective:Ui,transformPerspective:Ui,opacity:Li,originX:qi,originY:qi,originZ:Ui}),{},{zIndex:Vo,fillOpacity:Li,strokeOpacity:Li,numOctaves:Vo}),Ho=ze(ze({},qo),{},{color:Co,backgroundColor:Co,outlineColor:Co,fill:Co,stroke:Co,borderColor:Co,borderTopColor:Co,borderRightColor:Co,borderBottomColor:Co,borderLeftColor:Co,filter:Bo,WebkitFilter:Bo}),Wo=e=>Ho[e];function Go(e,t){let r=Wo(e);return r!==Bo&&(r=zo),r.getAnimatableNone?r.getAnimatableNone(t):void 0}const Ko=new Set(["auto","none","0"]);class Jo extends xo{constructor(e,t,r,s,n){super(e,t,r,s,n,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:r}=this;if(!t||!t.current)return;super.readKeyframes();for(let o=0;o<e.length;o++){let r=e[o];if("string"===typeof r&&(r=r.trim(),hi(r))){const s=Zi(r,t.current);void 0!==s&&(e[o]=s),o===e.length-1&&(this.finalKeyframe=r)}}if(this.resolveNoneKeyframes(),!Ii.has(r)||2!==e.length)return;const[s,n]=e,a=Gi(s),i=Gi(n);if(a!==i)if($i(a)&&$i(i))for(let o=0;o<e.length;o++){const t=e[o];"string"===typeof t&&(e[o]=parseFloat(t))}else Xi[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,r=[];for(let s=0;s<e.length;s++)(null===e[s]||vo(e[s]))&&r.push(s);r.length&&function(e,t,r){let s,n=0;for(;n<e.length&&!s;){const t=e[n];"string"===typeof t&&!Ko.has(t)&&Ro(t).values.length&&(s=e[n]),n++}if(s&&r)for(const a of t)e[a]=Go(r,s)}(e,r,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:r}=this;if(!e||!e.current)return;"height"===r&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Xi[r](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const s=t[t.length-1];void 0!==s&&e.getValue(r,s).jump(s,!1)}measureEndState(){var e;const{element:t,name:r,unresolvedKeyframes:s}=this;if(!t||!t.current)return;const n=t.getValue(r);n&&n.jump(this.measuredOrigin,!1);const a=s.length-1,i=s[a];s[a]=Xi[r](t.measureViewportBox(),window.getComputedStyle(t.current)),null!==i&&void 0===this.finalKeyframe&&(this.finalKeyframe=i),null!==(e=this.removedTransforms)&&void 0!==e&&e.length&&this.removedTransforms.forEach(e=>{let[r,s]=e;t.getValue(r).set(s)}),this.resolveNoneKeyframes()}}const Zo=e=>Boolean(e&&e.getVelocity);let $o;function Qo(){$o=void 0}const Yo={now:()=>(void 0===$o&&Yo.set(oo.isProcessing||to.useManualTiming?oo.timestamp:performance.now()),$o),set:e=>{$o=e,queueMicrotask(Qo)}};function Xo(e,t){-1===e.indexOf(t)&&e.push(t)}function el(e,t){const r=e.indexOf(t);r>-1&&e.splice(r,1)}class tl{constructor(){this.subscriptions=[]}add(e){return Xo(this.subscriptions,e),()=>el(this.subscriptions,e)}notify(e,t,r){const s=this.subscriptions.length;if(s)if(1===s)this.subscriptions[0](e,t,r);else for(let n=0;n<s;n++){const s=this.subscriptions[n];s&&s(e,t,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function rl(e,t){return t?e*(1e3/t):0}const sl={current:void 0};class nl{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.canTrackVelocity=null,this.events={},this.updateAndNotify=e=>{const t=Yo.now();var r;if((this.updatedAt!==t&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(e),this.current!==this.prev)&&(null===(r=this.events.change)||void 0===r||r.notify(this.current),this.dependents))for(const s of this.dependents)s.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){var t;this.current=e,this.updatedAt=Yo.now(),null===this.canTrackVelocity&&void 0!==e&&(this.canTrackVelocity=(t=this.current,!isNaN(parseFloat(t))))}setPrevFrameValue(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.current;this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new tl);const r=this.events[e].add(t);return"change"===e?()=>{r(),ao.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,t,r){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;null===(e=this.events.change)||void 0===e||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return sl.current&&sl.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const e=Yo.now();if(!this.canTrackVelocity||void 0===this.prevFrameValue||e-this.updatedAt>30)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,30);return rl(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,t;null===(e=this.dependents)||void 0===e||e.clear(),null===(t=this.events.destroy)||void 0===t||t.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function al(e,t){return new nl(e,t)}const il=[...Wi,Co,zo],{schedule:ol,cancel:ll}=no(queueMicrotask,!1),cl={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},dl={};for(const r in cl)dl[r]={isEnabled:e=>cl[r].some(t=>!!e[t])};const ul=()=>({x:{min:0,max:0},y:{min:0,max:0}}),ml="undefined"!==typeof window,hl={current:null},pl={current:!1};const fl=new WeakMap;function xl(e){return null!==e&&"object"===typeof e&&"function"===typeof e.start}function gl(e){return"string"===typeof e||Array.isArray(e)}const vl=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],bl=["initial",...vl];function yl(e){return xl(e.animate)||bl.some(t=>gl(e[t]))}function jl(e){return Boolean(yl(e)||e.variants)}function wl(e){const t=[{},{}];return null===e||void 0===e||e.values.forEach((e,r)=>{t[0][r]=e.get(),t[1][r]=e.getVelocity()}),t}function Nl(e,t,r,s){if("function"===typeof t){const[n,a]=wl(s);t=t(void 0!==r?r:e.custom,n,a)}if("string"===typeof t&&(t=e.variants&&e.variants[t]),"function"===typeof t){const[n,a]=wl(s);t=t(void 0!==r?r:e.custom,n,a)}return t}const Sl=["willChange"],kl=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class _l{scrapeMotionValuesFromProps(e,t,r){return{}}constructor(e){let{parent:t,props:r,presenceContext:s,reducedMotionConfig:n,blockInitialAnimation:a,visualState:i}=e,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=xo,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const e=Yo.now();this.renderScheduledAt<e&&(this.renderScheduledAt=e,ao.render(this.render,!1,!0))};const{latestValues:l,renderState:c}=i;this.latestValues=l,this.baseTarget=ze({},l),this.initialValues=r.initial?ze({},l):{},this.renderState=c,this.parent=t,this.props=r,this.presenceContext=s,this.depth=t?t.depth+1:0,this.reducedMotionConfig=n,this.options=o,this.blockInitialAnimation=Boolean(a),this.isControllingVariants=yl(r),this.isVariantNode=jl(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=Boolean(t&&t.current);const d=this.scrapeMotionValuesFromProps(r,{},this),{willChange:u}=d,m=Qs(d,Sl);for(const h in m){const e=m[h];void 0!==l[h]&&Zo(e)&&e.set(l[h])}}mount(e){var t;this.current=e,fl.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((e,t)=>this.bindToMotionValue(t,e)),pl.current||function(){if(pl.current=!0,ml)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>hl.current=e.matches;e.addEventListener("change",t),t()}else hl.current=!1}(),this.shouldReduceMotion="never"!==this.reducedMotionConfig&&("always"===this.reducedMotionConfig||hl.current),null===(t=this.parent)||void 0===t||t.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var e;this.projection&&this.projection.unmount(),io(this.notifyUpdate),io(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),null===(e=this.parent)||void 0===e||e.removeChild(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const e=this.features[t];e&&(e.unmount(),e.isMounted=!1)}this.current=null}addChild(e){var t;this.children.add(e),null!==(t=this.enteringChildren)&&void 0!==t||(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Xa.has(e);r&&this.onBindTransform&&this.onBindTransform();const s=t.on("change",t=>{this.latestValues[e]=t,this.props.onUpdate&&ao.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let n;window.MotionCheckAppearSync&&(n=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{s(),n&&n(),t.owner&&t.stop()})}sortNodePosition(e){return this.current&&this.sortInstanceNodePosition&&this.type===e.type?this.sortInstanceNodePosition(this.current,e.current):0}updateFeatures(){let e="animation";for(e in dl){const t=dl[e];if(!t)continue;const{isEnabled:r,Feature:s}=t;if(!this.features[e]&&s&&r(this.props)&&(this.features[e]=new s(this)),this.features[e]){const t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):{x:{min:0,max:0},y:{min:0,max:0}}}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let r=0;r<kl.length;r++){const t=kl[r];this.propEventSubscriptions[t]&&(this.propEventSubscriptions[t](),delete this.propEventSubscriptions[t]);const s=e["on"+t];s&&(this.propEventSubscriptions[t]=this.on(t,s))}this.prevMotionValues=function(e,t,r){for(const s in t){const n=t[s],a=r[s];if(Zo(n))e.addValue(s,n);else if(Zo(a))e.addValue(s,al(n,{owner:e}));else if(a!==n)if(e.hasValue(s)){const t=e.getValue(s);!0===t.liveStyle?t.jump(n):t.hasAnimated||t.set(n)}else{const t=e.getStaticValue(s);e.addValue(s,al(void 0!==t?t:n,{owner:e}))}}for(const s in r)void 0===t[s]&&e.removeValue(s);return t}(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const r=this.values.get(e);t!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return void 0===r&&void 0!==t&&(r=al(null===t?void 0:t,{owner:this}),this.addValue(e,r)),r}readValue(e,t){var r;let s=void 0===this.latestValues[e]&&this.current?null!==(r=this.getBaseTargetFromProps(this.props,e))&&void 0!==r?r:this.readValueFromInstance(this.current,e,this.options):this.latestValues[e];return void 0!==s&&null!==s&&("string"===typeof s&&(Ki(s)||go(s))?s=parseFloat(s):!(e=>il.find(Hi(e)))(s)&&zo.test(t)&&(s=Go(e,t)),this.setBaseTarget(e,Zo(s)?s.get():s)),Zo(s)?s.get():s}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){const{initial:t}=this.props;let r;if("string"===typeof t||"object"===typeof t){var s;const n=Nl(this.props,t,null===(s=this.presenceContext)||void 0===s?void 0:s.custom);n&&(r=n[e])}if(t&&void 0!==r)return r;const n=this.getBaseTargetFromProps(this.props,e);return void 0===n||Zo(n)?void 0!==this.initialValues[e]&&void 0===r?void 0:this.baseTarget[e]:n}on(e,t){return this.events[e]||(this.events[e]=new tl),this.events[e].add(t)}notify(e){if(this.events[e]){for(var t=arguments.length,r=new Array(t>1?t-1:0),s=1;s<t;s++)r[s-1]=arguments[s];this.events[e].notify(...r)}}scheduleRenderMicrotask(){ol.render(this.render)}}class El extends _l{constructor(){super(...arguments),this.KeyframeResolver=Jo}sortInstanceNodePosition(e,t){return 2&e.compareDocumentPosition(t)?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,t){let{vars:r,style:s}=t;delete r[e],delete s[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Zo(e)&&(this.childSubscription=e.on("change",e=>{this.current&&(this.current.textContent="".concat(e))}))}}const Cl=(e,t)=>t&&"number"===typeof e?t.transform(e):e,Pl={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Al=Ya.length;function Tl(e,t,r){const{style:s,vars:n,transformOrigin:a}=e;let i=!1,o=!1;for(const l in t){const e=t[l];if(Xa.has(l))i=!0;else if(ui(l))n[l]=e;else{const t=Cl(e,qo[l]);l.startsWith("origin")?(o=!0,a[l]=t):s[l]=t}}if(t.transform||(i||r?s.transform=function(e,t,r){let s="",n=!0;for(let a=0;a<Al;a++){const i=Ya[a],o=e[i];if(void 0===o)continue;let l=!0;if(l="number"===typeof o?o===(i.startsWith("scale")?1:0):0===parseFloat(o),!l||r){const e=Cl(o,qo[i]);l||(n=!1,s+="".concat(Pl[i]||i,"(").concat(e,") ")),r&&(t[i]=e)}}return s=s.trim(),r?s=r(t,n?"":s):n&&(s="none"),s}(t,e.transform,r):s.transform&&(s.transform="none")),o){const{originX:e="50%",originY:t="50%",originZ:r=0}=a;s.transformOrigin="".concat(e," ").concat(t," ").concat(r)}}function Il(e,t,r,s){let{style:n,vars:a}=t;const i=e.style;let o;for(o in n)i[o]=n[o];for(o in null===s||void 0===s||s.applyProjectionStyles(i,r),a)i.setProperty(o,a[o])}const Rl={};function Ol(e,t){let{layout:r,layoutId:s}=t;return Xa.has(e)||e.startsWith("origin")||(r||void 0!==s)&&(!!Rl[e]||"opacity"===e)}function Ll(e,t,r){const{style:s}=e,n={};for(const i in s){var a;(Zo(s[i])||t.style&&Zo(t.style[i])||Ol(i,e)||void 0!==(null===r||void 0===r||null===(a=r.getValue(i))||void 0===a?void 0:a.liveStyle))&&(n[i]=s[i])}return n}class Dl extends El{constructor(){super(...arguments),this.type="html",this.renderInstance=Il}readValueFromInstance(e,t){var r,s;if(Xa.has(t))return null!==(r=this.projection)&&void 0!==r&&r.isProjecting?oi(t):((e,t)=>{const{transform:r="none"}=getComputedStyle(e);return li(r,t)})(e,t);{const r=(s=e,window.getComputedStyle(s)),n=(ui(t)?r.getPropertyValue(t):r[t])||0;return"string"===typeof n?n.trim():n}}measureInstanceViewportBox(e,t){let{transformPagePoint:r}=t;return Ti(e,r)}build(e,t,r){Tl(e,t,r.transformTemplate)}scrapeMotionValuesFromProps(e,t,r){return Ll(e,t,r)}}const zl=e=>e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),Ml={offset:"stroke-dashoffset",array:"stroke-dasharray"},Fl={offset:"strokeDashoffset",array:"strokeDasharray"};const Ul=["attrX","attrY","attrScale","pathLength","pathSpacing","pathOffset"];function Bl(e,t,r,s,n){let{attrX:a,attrY:i,attrScale:o,pathLength:l,pathSpacing:c=1,pathOffset:d=0}=t;if(Tl(e,Qs(t,Ul),s),r)return void(e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox));e.attrs=e.style,e.style={};const{attrs:u,style:m}=e;var h,p;(u.transform&&(m.transform=u.transform,delete u.transform),m.transform||u.transformOrigin)&&(m.transformOrigin=null!==(h=u.transformOrigin)&&void 0!==h?h:"50% 50%",delete u.transformOrigin);m.transform&&(m.transformBox=null!==(p=null===n||void 0===n?void 0:n.transformBox)&&void 0!==p?p:"fill-box",delete u.transformBox);void 0!==a&&(u.x=a),void 0!==i&&(u.y=i),void 0!==o&&(u.scale=o),void 0!==l&&function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,n=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];e.pathLength=1;const a=n?Ml:Fl;e[a.offset]=Ui.transform(-s);const i=Ui.transform(t),o=Ui.transform(r);e[a.array]="".concat(i," ").concat(o)}(u,l,c,d,!1)}const Vl=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]),ql=e=>"string"===typeof e&&"svg"===e.toLowerCase();function Hl(e,t,r){const s=Ll(e,t,r);for(const n in e)if(Zo(e[n])||Zo(t[n])){s[-1!==Ya.indexOf(n)?"attr"+n.charAt(0).toUpperCase()+n.substring(1):n]=e[n]}return s}class Wl extends El{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=ul}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(Xa.has(t)){const e=Wo(t);return e&&e.default||0}return t=Vl.has(t)?t:zl(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,r){return Hl(e,t,r)}build(e,t,r){Bl(e,t,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,t,r,s){!function(e,t,r,s){Il(e,t,void 0,s);for(const n in t.attrs)e.setAttribute(Vl.has(n)?n:zl(n),t.attrs[n])}(e,t,0,s)}mount(e){this.isSVGTag=ql(e.tagName),super.mount(e)}}const Gl=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Kl(e){return"string"===typeof e&&!e.includes("-")&&!!(Gl.indexOf(e)>-1||/[A-Z]/.test(e))}const Jl=(e,r)=>Kl(e)?new Wl(r):new Dl(r,{allowProjection:e!==t.Fragment}),Zl=(0,t.createContext)({}),$l=(0,t.createContext)({strict:!1}),Ql=(0,t.createContext)({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),Yl=(0,t.createContext)({});function Xl(e){const{initial:r,animate:s}=function(e,t){if(yl(e)){const{initial:t,animate:r}=e;return{initial:!1===t||gl(t)?t:void 0,animate:gl(r)?r:void 0}}return!1!==e.inherit?t:{}}(e,(0,t.useContext)(Yl));return(0,t.useMemo)(()=>({initial:r,animate:s}),[ec(r),ec(s)])}function ec(e){return Array.isArray(e)?e.join(" "):e}const tc=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function rc(e,t,r){for(const s in t)Zo(t[s])||Ol(s,r)||(e[s]=t[s])}function sc(e,r){const s={};return rc(s,e.style||{},e),Object.assign(s,function(e,r){let{transformTemplate:s}=e;return(0,t.useMemo)(()=>{const e={style:{},transform:{},transformOrigin:{},vars:{}};return Tl(e,r,s),Object.assign({},e.vars,e.style)},[r])}(e,r)),s}function nc(e,t){const r={},s=sc(e,t);return e.drag&&!1!==e.dragListener&&(r.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=!0===e.drag?"none":"pan-".concat("x"===e.drag?"y":"x")),void 0===e.tabIndex&&(e.onTap||e.onTapStart||e.whileTap)&&(r.tabIndex=0),r.style=s,r}const ac=()=>ze(ze({},{style:{},transform:{},transformOrigin:{},vars:{}}),{},{attrs:{}});function ic(e,r,s,n){const a=(0,t.useMemo)(()=>{const t=ac();return Bl(t,r,ql(n),e.transformTemplate,e.style),ze(ze({},t.attrs),{},{style:ze({},t.style)})},[r]);if(e.style){const t={};rc(t,e.style,e),a.style=ze(ze({},t),a.style)}return a}const oc=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function lc(e){return e.startsWith("while")||e.startsWith("drag")&&"draggable"!==e||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||oc.has(e)}let cc=e=>!lc(e);try{"function"===typeof(dc=require("@emotion/is-prop-valid").default)&&(cc=e=>e.startsWith("on")?!lc(e):dc(e))}catch(eg){}var dc;function uc(e,r,s,n,a){let{latestValues:i}=n,o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];const l=(Kl(e)?ic:nc)(r,i,a,e),c=function(e,t,r){const s={};for(const n in e)"values"===n&&"object"===typeof e.values||(cc(n)||!0===r&&lc(n)||!t&&!lc(n)||e.draggable&&n.startsWith("onDrag"))&&(s[n]=e[n]);return s}(r,"string"===typeof e,o),d=e!==t.Fragment?ze(ze(ze({},c),l),{},{ref:s}):{},{children:u}=r,m=(0,t.useMemo)(()=>Zo(u)?u.get():u,[u]);return(0,t.createElement)(e,ze(ze({},d),{},{children:m}))}const mc=(0,t.createContext)(null);function hc(e){const r=(0,t.useRef)(null);return null===r.current&&(r.current=e()),r.current}function pc(e){return Zo(e)?e.get():e}const fc=["transitionEnd","transition"];function xc(e,t,r,s){const n={},a=s(e,{});for(const m in a)n[m]=pc(a[m]);let{initial:i,animate:o}=e;const l=yl(e),c=jl(e);t&&c&&!l&&!1!==e.inherit&&(void 0===i&&(i=t.initial),void 0===o&&(o=t.animate));let d=!!r&&!1===r.initial;d=d||!1===i;const u=d?o:i;if(u&&"boolean"!==typeof u&&!xl(u)){const t=Array.isArray(u)?u:[u];for(let r=0;r<t.length;r++){const s=Nl(e,t[r]);if(s){const{transitionEnd:e,transition:t}=s,r=Qs(s,fc);for(const s in r){let e=r[s];if(Array.isArray(e)){e=e[d?e.length-1:0]}null!==e&&(n[s]=e)}for(const s in e)n[s]=e[s]}}}return n}const gc=e=>(r,s)=>{const n=(0,t.useContext)(Yl),a=(0,t.useContext)(mc),i=()=>function(e,t,r,s){let{scrapeMotionValuesFromProps:n,createRenderState:a}=e;return{latestValues:xc(t,r,s,n),renderState:a()}}(e,r,n,a);return s?i():hc(i)},vc=gc({scrapeMotionValuesFromProps:Ll,createRenderState:tc}),bc=gc({scrapeMotionValuesFromProps:Hl,createRenderState:ac});const yc=Symbol.for("motionComponentSymbol");function jc(e){return e&&"object"===typeof e&&Object.prototype.hasOwnProperty.call(e,"current")}function wc(e,r,s){return(0,t.useCallback)(t=>{t&&e.onMount&&e.onMount(t),r&&(t?r.mount(t):r.unmount()),s&&("function"===typeof s?s(t):jc(s)&&(s.current=t))},[r])}const Nc="data-"+zl("framerAppearId"),Sc=(0,t.createContext)({}),kc=ml?t.useLayoutEffect:t.useEffect;function _c(e,r,s,n,a){var i,o,l,c;const{visualElement:d}=(0,t.useContext)(Yl),u=(0,t.useContext)($l),m=(0,t.useContext)(mc),h=(0,t.useContext)(Ql).reducedMotion,p=(0,t.useRef)(null);n=n||u.renderer,!p.current&&n&&(p.current=n(e,{visualState:r,parent:d,props:s,presenceContext:m,blockInitialAnimation:!!m&&!1===m.initial,reducedMotionConfig:h}));const f=p.current,x=(0,t.useContext)(Sc);!f||f.projection||!a||"html"!==f.type&&"svg"!==f.type||function(e,t,r,s){const{layoutId:n,layout:a,drag:i,dragConstraints:o,layoutScroll:l,layoutRoot:c,layoutCrossfade:d}=t;e.projection=new r(e.latestValues,t["data-framer-portal-id"]?void 0:Ec(e.parent)),e.projection.setOptions({layoutId:n,layout:a,alwaysMeasureLayout:Boolean(i)||o&&jc(o),visualElement:e,animationType:"string"===typeof a?a:"both",initialPromotionConfig:s,crossfade:d,layoutScroll:l,layoutRoot:c})}(p.current,s,a,x);const g=(0,t.useRef)(!1);(0,t.useInsertionEffect)(()=>{f&&g.current&&f.update(s,m)});const v=s[Nc],b=(0,t.useRef)(Boolean(v)&&!(null!==(i=(o=window).MotionHandoffIsComplete)&&void 0!==i&&i.call(o,v))&&(null===(l=(c=window).MotionHasOptimisedAnimation)||void 0===l?void 0:l.call(c,v)));return kc(()=>{f&&(g.current=!0,window.MotionIsMounted=!0,f.updateFeatures(),f.scheduleRenderMicrotask(),b.current&&f.animationState&&f.animationState.animateChanges())}),(0,t.useEffect)(()=>{f&&(!b.current&&f.animationState&&f.animationState.animateChanges(),b.current&&(queueMicrotask(()=>{var e,t;null===(e=(t=window).MotionHandoffMarkAsComplete)||void 0===e||e.call(t,v)}),b.current=!1),f.enteringChildren=void 0)}),f}function Ec(e){if(e)return!1!==e.options.allowProjection?e.projection:Ec(e.parent)}function Cc(e){var r,s;let{forwardMotionProps:n=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;a&&function(e){for(const t in e)dl[t]=ze(ze({},dl[t]),e[t])}(a);const o=Kl(e)?bc:vc;function l(r,s){let a;const l=ze(ze(ze({},(0,t.useContext)(Ql)),r),{},{layoutId:Pc(r)}),{isStatic:c}=l,d=Xl(r),u=o(r,c);if(!c&&ml){!function(){(0,t.useContext)($l).strict;0}();const r=function(e){const{drag:t,layout:r}=dl;if(!t&&!r)return{};const s=ze(ze({},t),r);return{MeasureLayout:null!==t&&void 0!==t&&t.isEnabled(e)||null!==r&&void 0!==r&&r.isEnabled(e)?s.MeasureLayout:void 0,ProjectionNode:s.ProjectionNode}}(l);a=r.MeasureLayout,d.visualElement=_c(e,u,l,i,r.ProjectionNode)}return(0,Ks.jsxs)(Yl.Provider,{value:d,children:[a&&d.visualElement?(0,Ks.jsx)(a,ze({visualElement:d.visualElement},l)):null,uc(e,r,wc(u,d.visualElement,s),u,c,n)]})}l.displayName="motion.".concat("string"===typeof e?e:"create(".concat(null!==(r=null!==(s=e.displayName)&&void 0!==s?s:e.name)&&void 0!==r?r:"",")"));const c=(0,t.forwardRef)(l);return c[yc]=e,c}function Pc(e){let{layoutId:r}=e;const s=(0,t.useContext)(Zl).id;return s&&void 0!==r?s+"-"+r:r}function Ac(e,t){if("undefined"===typeof Proxy)return Cc;const r=new Map,s=(r,s)=>Cc(r,s,e,t);return new Proxy((e,t)=>s(e,t),{get:(n,a)=>"create"===a?s:(r.has(a)||r.set(a,Cc(a,void 0,e,t)),r.get(a))})}function Tc(e,t,r){const s=e.getProps();return Nl(s,t,void 0!==r?r:s.custom,e)}function Ic(e,t){var r,s;return null!==(r=null!==(s=null===e||void 0===e?void 0:e[t])&&void 0!==s?s:null===e||void 0===e?void 0:e.default)&&void 0!==r?r:e}const Rc=e=>Array.isArray(e),Oc=["transitionEnd","transition"];function Lc(e,t,r){e.hasValue(t)?e.getValue(t).set(r):e.addValue(t,al(r))}function Dc(e){return Rc(e)?e[e.length-1]||0:e}function zc(e,t){const r=e.getValue("willChange");if(s=r,Boolean(Zo(s)&&s.add))return r.add(t);if(!r&&to.WillChange){const r=new to.WillChange("auto");e.addValue("willChange",r),r.add(t)}var s}function Mc(e){return e.props[Nc]}function Fc(e){e.duration=0,e.type}const Uc=(e,t)=>r=>t(e(r)),Bc=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.reduce(Uc)},Vc=e=>1e3*e,qc=e=>e/1e3,Hc={layout:0,mainThread:0,waapi:0};function Wc(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+6*(t-e)*r:r<.5?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function Gc(e,t){return r=>r>0?t:e}const Kc=(e,t,r)=>{const s=e*e,n=r*(t*t-s)+s;return n<0?0:Math.sqrt(n)},Jc=[_o,ko,Eo];function Zc(e){const t=(e=>Jc.find(t=>t.test(e)))(e);if(Boolean(t),"'".concat(e,"' is not an animatable color. Use the equivalent color code instead."),!Boolean(t))return!1;let r=t.parse(e);return t===Eo&&(r=function(e){let{hue:t,saturation:r,lightness:s,alpha:n}=e;t/=360,r/=100,s/=100;let a=0,i=0,o=0;if(r){const e=s<.5?s*(1+r):s+r-s*r,n=2*s-e;a=Wc(n,e,t+1/3),i=Wc(n,e,t),o=Wc(n,e,t-1/3)}else a=i=o=s;return{red:Math.round(255*a),green:Math.round(255*i),blue:Math.round(255*o),alpha:n}}(r)),r}const $c=(e,t)=>{const r=Zc(e),s=Zc(t);if(!r||!s)return Gc(e,t);const n=ze({},r);return e=>(n.red=Kc(r.red,s.red,e),n.green=Kc(r.green,s.green,e),n.blue=Kc(r.blue,s.blue,e),n.alpha=xi(r.alpha,s.alpha,e),ko.transform(n))},Qc=new Set(["none","hidden"]);function Yc(e,t){return r=>xi(e,t,r)}function Xc(e){return"number"===typeof e?Yc:"string"===typeof e?hi(e)?Gc:Co.test(e)?$c:rd:Array.isArray(e)?ed:"object"===typeof e?Co.test(e)?$c:td:Gc}function ed(e,t){const r=[...e],s=r.length,n=e.map((e,r)=>Xc(e)(e,t[r]));return e=>{for(let t=0;t<s;t++)r[t]=n[t](e);return r}}function td(e,t){const r=ze(ze({},e),t),s={};for(const n in r)void 0!==e[n]&&void 0!==t[n]&&(s[n]=Xc(e[n])(e[n],t[n]));return e=>{for(const t in s)r[t]=s[t](e);return r}}const rd=(e,t)=>{const r=zo.createTransformer(t),s=Ro(e),n=Ro(t);return s.indexes.var.length===n.indexes.var.length&&s.indexes.color.length===n.indexes.color.length&&s.indexes.number.length>=n.indexes.number.length?Qc.has(e)&&!n.values.length||Qc.has(t)&&!s.values.length?function(e,t){return Qc.has(e)?r=>r<=0?e:t:r=>r>=1?t:e}(e,t):Bc(ed(function(e,t){const r=[],s={color:0,var:0,number:0};for(let a=0;a<t.values.length;a++){var n;const i=t.types[a],o=e.indexes[i][s[i]],l=null!==(n=e.values[o])&&void 0!==n?n:0;r[a]=l,s[i]++}return r}(s,n),n.values),r):("Complex values '".concat(e,"' and '").concat(t,"' too different to mix. Ensure all colors are of the same type, and that each contains the same quantity of number and color values. Falling back to instant transition."),Gc(e,t))};function sd(e,t,r){if("number"===typeof e&&"number"===typeof t&&"number"===typeof r)return xi(e,t,r);return Xc(e)(e,t)}const nd=e=>{const t=t=>{let{timestamp:r}=t;return e(r)};return{start:function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return ao.update(t,e)},stop:()=>io(t),now:()=>oo.isProcessing?oo.timestamp:Yo.now()}},ad=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,s="";const n=Math.max(Math.round(t/r),2);for(let a=0;a<n;a++)s+=Math.round(1e4*e(a/(n-1)))/1e4+", ";return"linear(".concat(s.substring(0,s.length-2),")")},id=2e4;function od(e){let t=0;let r=e.next(t);for(;!r.done&&t<id;)t+=50,r=e.next(t);return t>=id?1/0:t}function ld(e,t,r){const s=Math.max(t-5,0);return rl(r-e(s),t-s)}const cd={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},dd=.001;function ud(e){let t,r,{duration:s=cd.duration,bounce:n=cd.bounce,velocity:a=cd.velocity,mass:i=cd.mass}=e;Vc(cd.maxDuration);let o=1-n;o=Ri(cd.minDamping,cd.maxDamping,o),s=Ri(cd.minDuration,cd.maxDuration,qc(s)),o<1?(t=e=>{const t=e*o,r=t*s,n=t-a,i=hd(e,o),l=Math.exp(-r);return dd-n/i*l},r=e=>{const r=e*o*s,n=r*a+a,i=Math.pow(o,2)*Math.pow(e,2)*s,l=Math.exp(-r),c=hd(Math.pow(e,2),o);return(-t(e)+dd>0?-1:1)*((n-i)*l)/c}):(t=e=>Math.exp(-e*s)*((e-a)*s+1)-.001,r=e=>Math.exp(-e*s)*(s*s*(a-e)));const l=function(e,t,r){let s=r;for(let n=1;n<md;n++)s-=e(s)/t(s);return s}(t,r,5/s);if(s=Vc(s),isNaN(l))return{stiffness:cd.stiffness,damping:cd.damping,duration:s};{const e=Math.pow(l,2)*i;return{stiffness:e,damping:2*o*Math.sqrt(i*e),duration:s}}}const md=12;function hd(e,t){return e*Math.sqrt(1-t*t)}const pd=["duration","bounce"],fd=["stiffness","damping","mass"];function xd(e,t){return t.some(t=>void 0!==e[t])}function gd(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:cd.visualDuration,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:cd.bounce;const r="object"!==typeof e?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:s,restDelta:n}=r;const a=r.keyframes[0],i=r.keyframes[r.keyframes.length-1],o={done:!1,value:a},{stiffness:l,damping:c,mass:d,duration:u,velocity:m,isResolvedFromDuration:h}=function(e){let t=ze({velocity:cd.velocity,stiffness:cd.stiffness,damping:cd.damping,mass:cd.mass,isResolvedFromDuration:!1},e);if(!xd(e,fd)&&xd(e,pd))if(e.visualDuration){const r=e.visualDuration,s=2*Math.PI/(1.2*r),n=s*s,a=2*Ri(.05,1,1-(e.bounce||0))*Math.sqrt(n);t=ze(ze({},t),{},{mass:cd.mass,stiffness:n,damping:a})}else{const r=ud(e);t=ze(ze(ze({},t),r),{},{mass:cd.mass}),t.isResolvedFromDuration=!0}return t}(ze(ze({},r),{},{velocity:-qc(r.velocity||0)})),p=m||0,f=c/(2*Math.sqrt(l*d)),x=i-a,g=qc(Math.sqrt(l/d)),v=Math.abs(x)<5;let b;if(s||(s=v?cd.restSpeed.granular:cd.restSpeed.default),n||(n=v?cd.restDelta.granular:cd.restDelta.default),f<1){const e=hd(g,f);b=t=>{const r=Math.exp(-f*g*t);return i-r*((p+f*g*x)/e*Math.sin(e*t)+x*Math.cos(e*t))}}else if(1===f)b=e=>i-Math.exp(-g*e)*(x+(p+g*x)*e);else{const e=g*Math.sqrt(f*f-1);b=t=>{const r=Math.exp(-f*g*t),s=Math.min(e*t,300);return i-r*((p+f*g*x)*Math.sinh(s)+e*x*Math.cosh(s))/e}}const y={calculatedDuration:h&&u||null,next:e=>{const t=b(e);if(h)o.done=e>=u;else{let r=0===e?p:0;f<1&&(r=0===e?Vc(p):ld(b,e,t));const a=Math.abs(r)<=s,l=Math.abs(i-t)<=n;o.done=a&&l}return o.value=o.done?i:t,o},toString:()=>{const e=Math.min(od(y),id),t=ad(t=>y.next(e*t).value,e,30);return e+"ms "+t},toTransition:()=>{}};return y}function vd(e){let{keyframes:t,velocity:r=0,power:s=.8,timeConstant:n=325,bounceDamping:a=10,bounceStiffness:i=500,modifyTarget:o,min:l,max:c,restDelta:d=.5,restSpeed:u}=e;const m=t[0],h={done:!1,value:m},p=e=>void 0===l?c:void 0===c||Math.abs(l-e)<Math.abs(c-e)?l:c;let f=s*r;const x=m+f,g=void 0===o?x:o(x);g!==x&&(f=g-m);const v=e=>-f*Math.exp(-e/n),b=e=>g+v(e),y=e=>{const t=v(e),r=b(e);h.done=Math.abs(t)<=d,h.value=h.done?g:r};let j,w;const N=e=>{(e=>void 0!==l&&e<l||void 0!==c&&e>c)(h.value)&&(j=e,w=gd({keyframes:[h.value,p(h.value)],velocity:ld(b,e,h.value),damping:a,stiffness:i,restDelta:d,restSpeed:u}))};return N(0),{calculatedDuration:null,next:e=>{let t=!1;return w||void 0!==j||(t=!0,y(e),N(e)),void 0!==j&&e>=j?w.next(e-j):(!t&&y(e),h)}}}gd.applyToOptions=e=>{const t=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;const r=(arguments.length>2?arguments[2]:void 0)(ze(ze({},e),{},{keyframes:[0,t]})),s=Math.min(od(r),id);return{type:"keyframes",ease:e=>r.next(s*e).value/t,duration:qc(s)}}(e,100,gd);return e.ease=t.ease,e.duration=Vc(t.duration),e.type="keyframes",e};const bd=(e,t,r)=>(((1-3*r+3*t)*e+(3*r-6*t))*e+3*t)*e;function yd(e,t,r,s){if(e===t&&r===s)return eo;const n=t=>function(e,t,r,s,n){let a,i,o=0;do{i=t+(r-t)/2,a=bd(i,s,n)-e,a>0?r=i:t=i}while(Math.abs(a)>1e-7&&++o<12);return i}(t,0,1,e,r);return e=>0===e||1===e?e:bd(n(e),t,s)}const jd=yd(.42,0,1,1),wd=yd(0,0,.58,1),Nd=yd(.42,0,.58,1),Sd=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,kd=e=>t=>1-e(1-t),_d=yd(.33,1.53,.69,.99),Ed=kd(_d),Cd=Sd(Ed),Pd=e=>(e*=2)<1?.5*Ed(e):.5*(2-Math.pow(2,-10*(e-1))),Ad=e=>1-Math.sin(Math.acos(e)),Td=kd(Ad),Id=Sd(Ad),Rd=e=>Array.isArray(e)&&"number"===typeof e[0],Od={linear:eo,easeIn:jd,easeInOut:Nd,easeOut:wd,circIn:Ad,circInOut:Id,circOut:Td,backIn:Ed,backInOut:Cd,backOut:_d,anticipate:Pd},Ld=e=>{if(Rd(e)){e.length;const[t,r,s,n]=e;return yd(t,r,s,n)}return"string"===typeof e?("Invalid easing type '".concat(e,"'"),Od[e]):e},Dd=(e,t,r)=>{const s=t-e;return 0===s?1:(r-e)/s};function zd(e,t){let{clamp:r=!0,ease:s,mixer:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=e.length;if(t.length,1===a)return()=>t[0];if(2===a&&t[0]===t[1])return()=>t[1];const i=e[0]===e[1];e[0]>e[a-1]&&(e=[...e].reverse(),t=[...t].reverse());const o=function(e,t,r){const s=[],n=r||to.mix||sd,a=e.length-1;for(let i=0;i<a;i++){let r=n(e[i],e[i+1]);if(t){const e=Array.isArray(t)?t[i]||eo:t;r=Bc(e,r)}s.push(r)}return s}(t,s,n),l=o.length,c=r=>{if(i&&r<e[0])return t[0];let s=0;if(l>1)for(;s<e.length-2&&!(r<e[s+1]);s++);const n=Dd(e[s],e[s+1],r);return o[s](n)};return r?t=>c(Ri(e[0],e[a-1],t)):c}function Md(e){const t=[0];return function(e,t){const r=e[e.length-1];for(let s=1;s<=t;s++){const n=Dd(0,t,s);e.push(xi(r,1,n))}}(t,e.length-1),t}function Fd(e){let{duration:t=300,keyframes:r,times:s,ease:n="easeInOut"}=e;const a=(e=>Array.isArray(e)&&"number"!==typeof e[0])(n)?n.map(Ld):Ld(n),i={done:!1,value:r[0]},o=function(e,t){return e.map(e=>e*t)}(s&&s.length===r.length?s:Md(r),t),l=zd(o,r,{ease:Array.isArray(a)?a:(c=r,d=a,c.map(()=>d||Nd).splice(0,c.length-1))});var c,d;return{calculatedDuration:t,next:e=>(i.value=l(e),i.done=e>=t,i)}}const Ud=e=>null!==e;function Bd(e,t,r){let{repeat:s,repeatType:n="loop"}=t,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;const i=e.filter(Ud),o=a<0||s&&"loop"!==n&&s%2===1?0:i.length-1;return o&&void 0!==r?r:i[o]}const Vd={decay:vd,inertia:vd,tween:Fd,keyframes:Fd,spring:gd};function qd(e){"string"===typeof e.type&&(e.type=Vd[e.type])}class Hd{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const Wd=e=>e/100;class Gd extends Hd{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var e,t;const{motionValue:r}=this.options;r&&r.updatedAt!==Yo.now()&&this.tick(Yo.now()),this.isStopped=!0,"idle"!==this.state&&(this.teardown(),null===(e=(t=this.options).onStop)||void 0===e||e.call(t))},Hc.mainThread++,this.options=e,this.initAnimation(),this.play(),!1===e.autoplay&&this.pause()}initAnimation(){const{options:e}=this;qd(e);const{type:t=Fd,repeat:r=0,repeatDelay:s=0,repeatType:n,velocity:a=0}=e;let{keyframes:i}=e;const o=t||Fd;o!==Fd&&"number"!==typeof i[0]&&(this.mixKeyframes=Bc(Wd,sd(i[0],i[1])),i=[0,100]);const l=o(ze(ze({},e),{},{keyframes:i}));"mirror"===n&&(this.mirroredGenerator=o(ze(ze({},e),{},{keyframes:[...i].reverse(),velocity:-a}))),null===l.calculatedDuration&&(l.calculatedDuration=od(l));const{calculatedDuration:c}=l;this.calculatedDuration=c,this.resolvedDuration=c+s,this.totalDuration=this.resolvedDuration*(r+1)-s,this.generator=l}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;null!==this.holdTime?this.currentTime=this.holdTime:this.currentTime=t}tick(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{generator:r,totalDuration:s,mixKeyframes:n,mirroredGenerator:a,resolvedDuration:i,calculatedDuration:o}=this;if(null===this.startTime)return r.next(0);const{delay:l=0,keyframes:c,repeat:d,repeatType:u,repeatDelay:m,type:h,onUpdate:p,finalKeyframe:f}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-s/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const x=this.currentTime-l*(this.playbackSpeed>=0?1:-1),g=this.playbackSpeed>=0?x<0:x>s;this.currentTime=Math.max(x,0),"finished"===this.state&&null===this.holdTime&&(this.currentTime=s);let v=this.currentTime,b=r;if(d){const e=Math.min(this.currentTime,s)/i;let t=Math.floor(e),r=e%1;!r&&e>=1&&(r=1),1===r&&t--,t=Math.min(t,d+1);Boolean(t%2)&&("reverse"===u?(r=1-r,m&&(r-=m/i)):"mirror"===u&&(b=a)),v=Ri(0,1,r)*i}const y=g?{done:!1,value:c[0]}:b.next(v);n&&(y.value=n(y.value));let{done:j}=y;g||null===o||(j=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const w=null===this.holdTime&&("finished"===this.state||"running"===this.state&&j);return w&&h!==vd&&(y.value=Bd(c,this.options,f,this.speed)),p&&p(y.value),w&&this.finish(),y}then(e,t){return this.finished.then(e,t)}get duration(){return qc(this.calculatedDuration)}get time(){return qc(this.currentTime)}set time(e){var t;e=Vc(e),this.currentTime=e,null===this.startTime||null!==this.holdTime||0===this.playbackSpeed?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),null===(t=this.driver)||void 0===t||t.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Yo.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=qc(this.currentTime))}play(){var e,t;if(this.isStopped)return;const{driver:r=nd,startTime:s}=this.options;this.driver||(this.driver=r(e=>this.tick(e))),null===(e=(t=this.options).onPlay)||void 0===e||e.call(t);const n=this.driver.now();"finished"===this.state?(this.updateFinished(),this.startTime=n):null!==this.holdTime?this.startTime=n-this.holdTime:this.startTime||(this.startTime=null!==s&&void 0!==s?s:n),"finished"===this.state&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Yo.now()),this.holdTime=this.currentTime}complete(){"running"!==this.state&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,t;this.notifyFinished(),this.teardown(),this.state="finished",null===(e=(t=this.options).onComplete)||void 0===e||e.call(t)}cancel(){var e,t;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),null===(e=(t=this.options).onCancel)||void 0===e||e.call(t)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null,Hc.mainThread--}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var t;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),null===(t=this.driver)||void 0===t||t.stop(),e.observe(this)}}function Kd(e){let t;return()=>(void 0===t&&(t=e()),t)}const Jd=Kd(()=>void 0!==window.ScrollTimeline),Zd={};function $d(e,t){const r=Kd(e);return()=>{var e;return null!==(e=Zd[t])&&void 0!==e?e:r()}}const Qd=$d(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch(wn){return!1}return!0},"linearEasing"),Yd=e=>{let[t,r,s,n]=e;return"cubic-bezier(".concat(t,", ").concat(r,", ").concat(s,", ").concat(n,")")},Xd={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Yd([0,.65,.55,1]),circOut:Yd([.55,0,1,.45]),backIn:Yd([.31,.01,.66,-.59]),backOut:Yd([.33,1.53,.69,.99])};function eu(e,t){return e?"function"===typeof e?Qd()?ad(e,t):"ease-out":Rd(e)?Yd(e):Array.isArray(e)?e.map(e=>eu(e,t)||Xd.easeOut):Xd[e]:void 0}function tu(e,t,r){let{delay:s=0,duration:n=300,repeat:a=0,repeatType:i="loop",ease:o="easeOut",times:l}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0;const d={[t]:r};l&&(d.offset=l);const u=eu(o,n);Array.isArray(u)&&(d.easing=u),so.value&&Hc.waapi++;const m={delay:s,duration:n,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:a+1,direction:"reverse"===i?"alternate":"normal"};c&&(m.pseudoElement=c);const h=e.animate(d,m);return so.value&&h.finished.finally(()=>{Hc.waapi--}),h}function ru(e){return"function"===typeof e&&"applyToOptions"in e}const su=["type"];class nu extends Hd{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:t,name:r,keyframes:s,pseudoElement:n,allowFlatten:a=!1,finalKeyframe:i,onComplete:o}=e;this.isPseudoElement=Boolean(n),this.allowFlatten=a,this.options=e,e.type;const l=function(e){let{type:t}=e,r=Qs(e,su);return ru(t)&&Qd()?t.applyToOptions(r):(null!==(s=r.duration)&&void 0!==s||(r.duration=300),null!==(n=r.ease)&&void 0!==n||(r.ease="easeOut"),r);var s,n}(e);this.animation=tu(t,r,s,l,n),!1===l.autoplay&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!n){const e=Bd(s,this.options,i,this.speed);this.updateMotionValue?this.updateMotionValue(e):function(e,t,r){(e=>e.startsWith("--"))(t)?e.style.setProperty(t,r):e.style[t]=r}(t,r,e),this.animation.cancel()}null===o||void 0===o||o(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),"finished"===this.state&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,t;null===(e=(t=this.animation).finish)||void 0===e||e.call(t)}cancel(){try{this.animation.cancel()}catch(wn){}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;"idle"!==e&&"finished"!==e&&(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,t;this.isPseudoElement||(null===(e=(t=this.animation).commitStyles)||void 0===e||e.call(t))}get duration(){var e,t;const r=(null===(e=this.animation.effect)||void 0===e||null===(t=e.getComputedTiming)||void 0===t?void 0:t.call(e).duration)||0;return qc(Number(r))}get time(){return qc(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=Vc(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return null!==this.finishedTime?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline(e){let{timeline:t,observe:r}=e;var s;this.allowFlatten&&(null===(s=this.animation.effect)||void 0===s||s.updateTiming({easing:"linear"}));return this.animation.onfinish=null,t&&Jd()?(this.animation.timeline=t,eo):r(this)}}const au={anticipate:Pd,backInOut:Cd,circInOut:Id};function iu(e){"string"===typeof e.ease&&e.ease in au&&(e.ease=au[e.ease])}const ou=["motionValue","onUpdate","onComplete","element"];class lu extends nu{constructor(e){iu(e),qd(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){var t;const r=this.options,{motionValue:s,onUpdate:n,onComplete:a,element:i}=r,o=Qs(r,ou);if(!s)return;if(void 0!==e)return void s.set(e);const l=new Gd(ze(ze({},o),{},{autoplay:!1})),c=Vc(null!==(t=this.finishedTime)&&void 0!==t?t:this.time);s.setWithVelocity(l.sample(c-10).value,l.sample(c).value,10),l.stop()}}const cu=(e,t)=>"zIndex"!==t&&(!("number"!==typeof e&&!Array.isArray(e))||!("string"!==typeof e||!zo.test(e)&&"0"!==e||e.startsWith("url(")));const du=new Set(["opacity","clipPath","filter","transform"]),uu=Kd(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));const mu=["autoplay","delay","type","repeat","repeatDelay","repeatType","keyframes","name","motionValue","element"];class hu extends Hd{constructor(e){var t;let{autoplay:r=!0,delay:s=0,type:n="keyframes",repeat:a=0,repeatDelay:i=0,repeatType:o="loop",keyframes:l,name:c,motionValue:d,element:u}=e,m=Qs(e,mu);super(),this.stop=()=>{var e,t;this._animation&&(this._animation.stop(),null===(t=this.stopTimeline)||void 0===t||t.call(this));null===(e=this.keyframeResolver)||void 0===e||e.cancel()},this.createdAt=Yo.now();const h=ze({autoplay:r,delay:s,type:n,repeat:a,repeatDelay:i,repeatType:o,name:c,motionValue:d,element:u},m),p=(null===u||void 0===u?void 0:u.KeyframeResolver)||xo;this.keyframeResolver=new p(l,(e,t,r)=>this.onKeyframesResolved(e,t,h,!r),c,d,u),null===(t=this.keyframeResolver)||void 0===t||t.scheduleResolve()}onKeyframesResolved(e,t,r,s){this.keyframeResolver=void 0;const{name:n,type:a,velocity:i,delay:o,isHandoff:l,onUpdate:c}=r;this.resolvedAt=Yo.now(),function(e,t,r,s){const n=e[0];if(null===n)return!1;if("display"===t||"visibility"===t)return!0;const a=e[e.length-1],i=cu(n,t),o=cu(a,t);return"You are trying to animate ".concat(t,' from "').concat(n,'" to "').concat(a,'". "').concat(i?a:n,'" is not an animatable value.'),!(!i||!o)&&(function(e){const t=e[0];if(1===e.length)return!0;for(let r=0;r<e.length;r++)if(e[r]!==t)return!0}(e)||("spring"===r||ru(r))&&s)}(e,n,a,i)||(!to.instantAnimations&&o||null===c||void 0===c||c(Bd(e,r,t)),e[0]=e[e.length-1],Fc(r),r.repeat=0);const d=ze(ze({startTime:s?this.resolvedAt&&this.resolvedAt-this.createdAt>40?this.resolvedAt:this.createdAt:void 0,finalKeyframe:t},r),{},{keyframes:e}),u=!l&&function(e){var t;const{motionValue:r,name:s,repeatDelay:n,repeatType:a,damping:i,type:o}=e;if(!((null===r||void 0===r||null===(t=r.owner)||void 0===t?void 0:t.current)instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:c}=r.owner.getProps();return uu()&&s&&du.has(s)&&("transform"!==s||!c)&&!l&&!n&&"mirror"!==a&&0!==i&&"inertia"!==o}(d)?new lu(ze(ze({},d),{},{element:d.motionValue.owner.current})):new Gd(d);u.finished.then(()=>this.notifyFinished()).catch(eo),this.pendingTimeline&&(this.stopTimeline=u.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=u}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){var e;this._animation||(null===(e=this.keyframeResolver)||void 0===e||e.resume(),ho=!0,fo(),po(),ho=!1);return this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),null===(e=this.keyframeResolver)||void 0===e||e.cancel()}}const pu=e=>null!==e;const fu={type:"spring",stiffness:500,damping:25,restSpeed:10},xu={type:"keyframes",duration:.8},gu={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},vu=(e,t)=>{let{keyframes:r}=t;return r.length>2?xu:Xa.has(e)?e.startsWith("scale")?{type:"spring",stiffness:550,damping:0===r[1]?2*Math.sqrt(550):30,restSpeed:10}:fu:gu},bu=["when","delay","delayChildren","staggerChildren","staggerDirection","repeat","repeatType","repeatDelay","from","elapsed"];const yu=function(e,t,r){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4?arguments[4]:void 0,a=arguments.length>5?arguments[5]:void 0;return i=>{const o=Ic(s,e)||{},l=o.delay||s.delay||0;let{elapsed:c=0}=s;c-=Vc(l);const d=ze(ze({keyframes:Array.isArray(r)?r:[null,r],ease:"easeOut",velocity:t.getVelocity()},o),{},{delay:-c,onUpdate:e=>{t.set(e),o.onUpdate&&o.onUpdate(e)},onComplete:()=>{i(),o.onComplete&&o.onComplete()},name:e,motionValue:t,element:a?void 0:n});(function(e){let{when:t,delay:r,delayChildren:s,staggerChildren:n,staggerDirection:a,repeat:i,repeatType:o,repeatDelay:l,from:c,elapsed:d}=e,u=Qs(e,bu);return!!Object.keys(u).length})(o)||Object.assign(d,vu(e,d)),d.duration&&(d.duration=Vc(d.duration)),d.repeatDelay&&(d.repeatDelay=Vc(d.repeatDelay)),void 0!==d.from&&(d.keyframes[0]=d.from);let u=!1;if((!1===d.type||0===d.duration&&!d.repeatDelay)&&(Fc(d),0===d.delay&&(u=!0)),(to.instantAnimations||to.skipAnimations)&&(u=!0,Fc(d),d.delay=0),d.allowFlatten=!o.type&&!o.ease,u&&!a&&void 0!==t.get()){const e=function(e,t,r){let{repeat:s,repeatType:n="loop"}=t;const a=e.filter(pu),i=s&&"loop"!==n&&s%2===1?0:a.length-1;return i&&void 0!==r?r:a[i]}(d.keyframes,o);if(void 0!==e)return void ao.update(()=>{d.onUpdate(e),d.onComplete()})}return o.isSync?new Gd(d):new hu(d)}},ju=["transition","transitionEnd"];function wu(e,t){let{protectedKeys:r,needsAnimating:s}=e;const n=r.hasOwnProperty(t)&&!0!==s[t];return s[t]=!1,n}function Nu(e,t){let{delay:r=0,transitionOverride:s,type:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{transition:a=e.getDefaultTransition(),transitionEnd:i}=t,o=Qs(t,ju);s&&(a=s);const l=[],c=n&&e.animationState&&e.animationState.getState()[n];for(const u in o){var d;const t=e.getValue(u,null!==(d=e.latestValues[u])&&void 0!==d?d:null),s=o[u];if(void 0===s||c&&wu(c,u))continue;const n=ze({delay:r},Ic(a||{},u)),i=t.get();if(void 0!==i&&!t.isAnimating&&!Array.isArray(s)&&s===i&&!n.velocity)continue;let m=!1;if(window.MotionHandoffAnimation){const t=Mc(e);if(t){const e=window.MotionHandoffAnimation(t,u,ao);null!==e&&(n.startTime=e,m=!0)}}zc(e,u),t.start(yu(u,t,s,e.shouldReduceMotion&&Ii.has(u)?{type:!1}:n,e,m));const h=t.animation;h&&l.push(h)}return i&&Promise.all(l).then(()=>{ao.update(()=>{i&&function(e,t){let r=Tc(e,t)||{},{transitionEnd:s={},transition:n={}}=r,a=Qs(r,Oc);a=ze(ze({},a),s);for(const i in a)Lc(e,i,Dc(a[i]))}(e,i)})}),l}function Su(e,t,r){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;const a=Array.from(e).sort((e,t)=>e.sortNodePosition(t)).indexOf(t),i=e.size,o=(i-1)*s;return"function"===typeof r?r(a,i):1===n?a*s:o-a*s}function ku(e,t){var r;let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const n=Tc(e,t,"exit"===s.type?null===(r=e.presenceContext)||void 0===r?void 0:r.custom:void 0);let{transition:a=e.getDefaultTransition()||{}}=n||{};s.transitionOverride&&(a=s.transitionOverride);const i=n?()=>Promise.all(Nu(e,n,s)):()=>Promise.resolve(),o=e.variantChildren&&e.variantChildren.size?function(){let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const{delayChildren:n=0,staggerChildren:i,staggerDirection:o}=a;return function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,i=arguments.length>6?arguments[6]:void 0;const o=[];for(const l of e.variantChildren)l.notify("AnimationStart",t),o.push(ku(l,t,ze(ze({},i),{},{delay:r+("function"===typeof s?0:s)+Su(e.variantChildren,l,s,n,a)})).then(()=>l.notify("AnimationComplete",t)));return Promise.all(o)}(e,t,r,n,i,o,s)}:()=>Promise.resolve(),{when:l}=a;if(l){const[e,t]="beforeChildren"===l?[i,o]:[o,i];return e().then(()=>t())}return Promise.all([i(),o(s.delay)])}function _u(e,t){if(!Array.isArray(t))return!1;const r=t.length;if(r!==e.length)return!1;for(let s=0;s<r;s++)if(t[s]!==e[s])return!1;return!0}const Eu=bl.length;function Cu(e){if(!e)return;if(!e.isControllingVariants){const t=e.parent&&Cu(e.parent)||{};return void 0!==e.props.initial&&(t.initial=e.props.initial),t}const t={};for(let r=0;r<Eu;r++){const s=bl[r],n=e.props[s];(gl(n)||!1===n)&&(t[s]=n)}return t}const Pu=["transition","transitionEnd"],Au=[...vl].reverse(),Tu=vl.length;function Iu(e){return t=>Promise.all(t.map(t=>{let{animation:r,options:s}=t;return function(e,t){let r,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e.notify("AnimationStart",t),Array.isArray(t)){const n=t.map(t=>ku(e,t,s));r=Promise.all(n)}else if("string"===typeof t)r=ku(e,t,s);else{const n="function"===typeof t?Tc(e,t,s.custom):t;r=Promise.all(Nu(e,n,s))}return r.then(()=>{e.notify("AnimationComplete",t)})}(e,r,s)}))}function Ru(e){let t=Iu(e),r=Du(),s=!0;const n=t=>(r,s)=>{var n;const a=Tc(e,s,"exit"===t?null===(n=e.presenceContext)||void 0===n?void 0:n.custom:void 0);if(a){const{transition:e,transitionEnd:t}=a,s=Qs(a,Pu);r=ze(ze(ze({},r),s),t)}return r};function a(a){const{props:i}=e,o=Cu(e.parent)||{},l=[],c=new Set;let d={},u=1/0;for(let t=0;t<Tu;t++){const m=Au[t],h=r[m],p=void 0!==i[m]?i[m]:o[m],f=gl(p),x=m===a?h.isActive:null;!1===x&&(u=t);let g=p===o[m]&&p!==i[m]&&f;if(g&&s&&e.manuallyAnimateOnMount&&(g=!1),h.protectedKeys=ze({},d),!h.isActive&&null===x||!p&&!h.prevProp||xl(p)||"boolean"===typeof p)continue;const v=Ou(h.prevProp,p);let b=v||m===a&&h.isActive&&!g&&f||t>u&&f,y=!1;const j=Array.isArray(p)?p:[p];let w=j.reduce(n(m),{});!1===x&&(w={});const{prevResolvedValues:N={}}=h,S=ze(ze({},N),w),k=t=>{b=!0,c.has(t)&&(y=!0,c.delete(t)),h.needsAnimating[t]=!0;const r=e.getValue(t);r&&(r.liveStyle=!1)};for(const e in S){const t=w[e],r=N[e];if(d.hasOwnProperty(e))continue;let s=!1;s=Rc(t)&&Rc(r)?!_u(t,r):t!==r,s?void 0!==t&&null!==t?k(e):c.add(e):void 0!==t&&c.has(e)?k(e):h.protectedKeys[e]=!0}h.prevProp=p,h.prevResolvedValues=w,h.isActive&&(d=ze(ze({},d),w)),s&&e.blockInitialAnimation&&(b=!1);const _=g&&v;b&&(!_||y)&&l.push(...j.map(t=>{const r={type:m};if("string"===typeof t&&s&&!_&&e.manuallyAnimateOnMount&&e.parent){const{parent:s}=e,n=Tc(s,t);if(s.enteringChildren&&n){const{delayChildren:t}=n.transition||{};r.delay=Su(s.enteringChildren,e,t)}}return{animation:t,options:r}}))}if(c.size){const t={};if("boolean"!==typeof i.initial){const r=Tc(e,Array.isArray(i.initial)?i.initial[0]:i.initial);r&&r.transition&&(t.transition=r.transition)}c.forEach(r=>{const s=e.getBaseTarget(r),n=e.getValue(r);n&&(n.liveStyle=!0),t[r]=null!==s&&void 0!==s?s:null}),l.push({animation:t})}let m=Boolean(l.length);return!s||!1!==i.initial&&i.initial!==i.animate||e.manuallyAnimateOnMount||(m=!1),s=!1,m?t(l):Promise.resolve()}return{animateChanges:a,setActive:function(t,s){var n;if(r[t].isActive===s)return Promise.resolve();null===(n=e.variantChildren)||void 0===n||n.forEach(e=>{var r;return null===(r=e.animationState)||void 0===r?void 0:r.setActive(t,s)}),r[t].isActive=s;const i=a(t);for(const e in r)r[e].protectedKeys={};return i},setAnimateFunction:function(r){t=r(e)},getState:()=>r,reset:()=>{r=Du(),s=!0}}}function Ou(e,t){return"string"===typeof t?t!==e:!!Array.isArray(t)&&!_u(t,e)}function Lu(){return{isActive:arguments.length>0&&void 0!==arguments[0]&&arguments[0],protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Du(){return{animate:Lu(!0),whileInView:Lu(),whileHover:Lu(),whileTap:Lu(),whileDrag:Lu(),whileFocus:Lu(),exit:Lu()}}class zu{constructor(e){this.isMounted=!1,this.node=e}update(){}}let Mu=0;const Fu={animation:{Feature:class extends zu{constructor(e){super(e),e.animationState||(e.animationState=Ru(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();xl(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),null===(e=this.unmountControls)||void 0===e||e.call(this)}}},exit:{Feature:class extends zu{constructor(){super(...arguments),this.id=Mu++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const s=this.node.animationState.setActive("exit",!e);t&&!e&&s.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}}},Uu={x:!1,y:!1};function Bu(){return Uu.x||Uu.y}function Vu(e,t,r){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{passive:!0};return e.addEventListener(t,r,s),()=>e.removeEventListener(t,r)}const qu=e=>"mouse"===e.pointerType?"number"!==typeof e.button||e.button<=0:!1!==e.isPrimary;function Hu(e){return{point:{x:e.pageX,y:e.pageY}}}function Wu(e,t,r,s){return Vu(e,t,(e=>t=>qu(t)&&e(t,Hu(t)))(r),s)}function Gu(e){return e.max-e.min}function Ku(e,t,r){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;e.origin=s,e.originPoint=xi(t.min,t.max,e.origin),e.scale=Gu(r)/Gu(t),e.translate=xi(r.min,r.max,e.origin)-e.originPoint,(e.scale>=.9999&&e.scale<=1.0001||isNaN(e.scale))&&(e.scale=1),(e.translate>=-.01&&e.translate<=.01||isNaN(e.translate))&&(e.translate=0)}function Ju(e,t,r,s){Ku(e.x,t.x,r.x,s?s.originX:void 0),Ku(e.y,t.y,r.y,s?s.originY:void 0)}function Zu(e,t,r){e.min=r.min+t.min,e.max=e.min+Gu(t)}function $u(e,t,r){e.min=t.min-r.min,e.max=e.min+Gu(t)}function Qu(e,t,r){$u(e.x,t.x,r.x),$u(e.y,t.y,r.y)}function Yu(e){return[e("x"),e("y")]}const Xu=e=>{let{current:t}=e;return t?t.ownerDocument.defaultView:null},em=(e,t)=>Math.abs(e-t);class tm{constructor(e,t){let{transformPagePoint:r,contextWindow:s=window,dragSnapToOrigin:n=!1,distanceThreshold:a=3}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!this.lastMoveEvent||!this.lastMoveEventInfo)return;const e=nm(this.lastMoveEventInfo,this.history),t=null!==this.startEvent,r=function(e,t){const r=em(e.x,t.x),s=em(e.y,t.y);return Math.sqrt(r**2+s**2)}(e.offset,{x:0,y:0})>=this.distanceThreshold;if(!t&&!r)return;const{point:s}=e,{timestamp:n}=oo;this.history.push(ze(ze({},s),{},{timestamp:n}));const{onStart:a,onMove:i}=this.handlers;t||(a&&a(this.lastMoveEvent,e),this.startEvent=this.lastMoveEvent),i&&i(this.lastMoveEvent,e)},this.handlePointerMove=(e,t)=>{this.lastMoveEvent=e,this.lastMoveEventInfo=rm(t,this.transformPagePoint),ao.update(this.updatePoint,!0)},this.handlePointerUp=(e,t)=>{this.end();const{onEnd:r,onSessionEnd:s,resumeAnimation:n}=this.handlers;if(this.dragSnapToOrigin&&n&&n(),!this.lastMoveEvent||!this.lastMoveEventInfo)return;const a=nm("pointercancel"===e.type?this.lastMoveEventInfo:rm(t,this.transformPagePoint),this.history);this.startEvent&&r&&r(e,a),s&&s(e,a)},!qu(e))return;this.dragSnapToOrigin=n,this.handlers=t,this.transformPagePoint=r,this.distanceThreshold=a,this.contextWindow=s||window;const i=rm(Hu(e),this.transformPagePoint),{point:o}=i,{timestamp:l}=oo;this.history=[ze(ze({},o),{},{timestamp:l})];const{onSessionStart:c}=t;c&&c(e,nm(i,this.history)),this.removeListeners=Bc(Wu(this.contextWindow,"pointermove",this.handlePointerMove),Wu(this.contextWindow,"pointerup",this.handlePointerUp),Wu(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),io(this.updatePoint)}}function rm(e,t){return t?{point:t(e.point)}:e}function sm(e,t){return{x:e.x-t.x,y:e.y-t.y}}function nm(e,t){let{point:r}=e;return{point:r,delta:sm(r,im(t)),offset:sm(r,am(t)),velocity:om(t,.1)}}function am(e){return e[0]}function im(e){return e[e.length-1]}function om(e,t){if(e.length<2)return{x:0,y:0};let r=e.length-1,s=null;const n=im(e);for(;r>=0&&(s=e[r],!(n.timestamp-s.timestamp>Vc(t)));)r--;if(!s)return{x:0,y:0};const a=qc(n.timestamp-s.timestamp);if(0===a)return{x:0,y:0};const i={x:(n.x-s.x)/a,y:(n.y-s.y)/a};return i.x===1/0&&(i.x=0),i.y===1/0&&(i.y=0),i}function lm(e,t,r){return{min:void 0!==t?e.min+t:void 0,max:void 0!==r?e.max+r-(e.max-e.min):void 0}}function cm(e,t){let r=t.min-e.min,s=t.max-e.max;return t.max-t.min<e.max-e.min&&([r,s]=[s,r]),{min:r,max:s}}const dm=.35;function um(e,t,r){return{min:mm(e,t),max:mm(e,r)}}function mm(e,t){return"number"===typeof e?e:e[t]||0}const hm=new WeakMap;class pm{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic={x:{min:0,max:0},y:{min:0,max:0}},this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e){let{snapToCursor:t=!1,distanceThreshold:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{presenceContext:s}=this.visualElement;if(s&&!1===s.isPresent)return;const{dragSnapToOrigin:n}=this.getProps();this.panSession=new tm(e,{onSessionStart:e=>{const{dragSnapToOrigin:r}=this.getProps();r?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(Hu(e).point)},onStart:(e,t)=>{const{drag:r,dragPropagation:s,onDragStart:n}=this.getProps();if(r&&!s&&(this.openDragLock&&this.openDragLock(),this.openDragLock="x"===(a=r)||"y"===a?Uu[a]?null:(Uu[a]=!0,()=>{Uu[a]=!1}):Uu.x||Uu.y?null:(Uu.x=Uu.y=!0,()=>{Uu.x=Uu.y=!1}),!this.openDragLock))return;var a;this.latestPointerEvent=e,this.latestPanInfo=t,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Yu(e=>{let t=this.getAxisMotionValue(e).get()||0;if(Fi.test(t)){const{projection:r}=this.visualElement;if(r&&r.layout){const s=r.layout.layoutBox[e];if(s){t=Gu(s)*(parseFloat(t)/100)}}}this.originPoint[e]=t}),n&&ao.postRender(()=>n(e,t)),zc(this.visualElement,"transform");const{animationState:i}=this.visualElement;i&&i.setActive("whileDrag",!0)},onMove:(e,t)=>{this.latestPointerEvent=e,this.latestPanInfo=t;const{dragPropagation:r,dragDirectionLock:s,onDirectionLock:n,onDrag:a}=this.getProps();if(!r&&!this.openDragLock)return;const{offset:i}=t;if(s&&null===this.currentDirection)return this.currentDirection=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,r=null;Math.abs(e.y)>t?r="y":Math.abs(e.x)>t&&(r="x");return r}(i),void(null!==this.currentDirection&&n&&n(this.currentDirection));this.updateAxis("x",t.point,i),this.updateAxis("y",t.point,i),this.visualElement.render(),a&&a(e,t)},onSessionEnd:(e,t)=>{this.latestPointerEvent=e,this.latestPanInfo=t,this.stop(e,t),this.latestPointerEvent=null,this.latestPanInfo=null},resumeAnimation:()=>Yu(e=>{var t;return"paused"===this.getAnimationState(e)&&(null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.play())})},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:n,distanceThreshold:r,contextWindow:Xu(this.visualElement)})}stop(e,t){const r=e||this.latestPointerEvent,s=t||this.latestPanInfo,n=this.isDragging;if(this.cancel(),!n||!s||!r)return;const{velocity:a}=s;this.startAnimation(a);const{onDragEnd:i}=this.getProps();i&&ao.postRender(()=>i(r,s))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,r){const{drag:s}=this.getProps();if(!r||!fm(e,s,this.currentDirection))return;const n=this.getAxisMotionValue(e);let a=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(a=function(e,t,r){let{min:s,max:n}=t;return void 0!==s&&e<s?e=r?xi(s,e,r.min):Math.max(e,s):void 0!==n&&e>n&&(e=r?xi(n,e,r.max):Math.min(e,n)),e}(a,this.constraints[e],this.elastic[e])),n.set(a)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:r}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):null===(e=this.visualElement.projection)||void 0===e?void 0:e.layout,n=this.constraints;t&&jc(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):this.constraints=!(!t||!s)&&function(e,t){let{top:r,left:s,bottom:n,right:a}=t;return{x:lm(e.x,s,a),y:lm(e.y,r,n)}}(s.layoutBox,t),this.elastic=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dm;return!1===e?e=0:!0===e&&(e=dm),{x:um(e,"left","right"),y:um(e,"top","bottom")}}(r),n!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&Yu(e=>{!1!==this.constraints&&this.getAxisMotionValue(e)&&(this.constraints[e]=function(e,t){const r={};return void 0!==t.min&&(r.min=t.min-e.min),void 0!==t.max&&(r.max=t.max-e.min),r}(s.layoutBox[e],this.constraints[e]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!jc(e))return!1;const r=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const n=function(e,t,r){const s=Ti(e,r),{scroll:n}=t;return n&&(Ci(s.x,n.offset.x),Ci(s.y,n.offset.y)),s}(r,s.root,this.visualElement.getTransformPagePoint());let a=function(e,t){return{x:cm(e.x,t.x),y:cm(e.y,t.y)}}(s.layout.layoutBox,n);if(t){const e=t(function(e){let{x:t,y:r}=e;return{top:r.min,right:t.max,bottom:r.max,left:t.min}}(a));this.hasMutatedConstraints=!!e,e&&(a=fi(e))}return a}startAnimation(e){const{drag:t,dragMomentum:r,dragElastic:s,dragTransition:n,dragSnapToOrigin:a,onDragTransitionEnd:i}=this.getProps(),o=this.constraints||{},l=Yu(i=>{if(!fm(i,t,this.currentDirection))return;let l=o&&o[i]||{};a&&(l={min:0,max:0});const c=s?200:1e6,d=s?40:1e7,u=ze(ze({type:"inertia",velocity:r?e[i]:0,bounceStiffness:c,bounceDamping:d,timeConstant:750,restDelta:1,restSpeed:10},n),l);return this.startAxisValueAnimation(i,u)});return Promise.all(l).then(i)}startAxisValueAnimation(e,t){const r=this.getAxisMotionValue(e);return zc(this.visualElement,e),r.start(yu(e,r,0,t,this.visualElement,!1))}stopAnimation(){Yu(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Yu(e=>{var t;return null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.pause()})}getAnimationState(e){var t;return null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.state}getAxisMotionValue(e){const t="_drag".concat(e.toUpperCase()),r=this.visualElement.getProps(),s=r[t];return s||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Yu(t=>{const{drag:r}=this.getProps();if(!fm(t,r,this.currentDirection))return;const{projection:s}=this.visualElement,n=this.getAxisMotionValue(t);if(s&&s.layout){const{min:r,max:a}=s.layout.layoutBox[t];n.set(e[t]-xi(r,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:r}=this.visualElement;if(!jc(t)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};Yu(e=>{const t=this.getAxisMotionValue(e);if(t&&!1!==this.constraints){const r=t.get();s[e]=function(e,t){let r=.5;const s=Gu(e),n=Gu(t);return n>s?r=Dd(t.min,t.max-s,e.min):s>n&&(r=Dd(e.min,e.max-n,t.min)),Ri(0,1,r)}({min:r,max:r},this.constraints[e])}});const{transformTemplate:n}=this.visualElement.getProps();this.visualElement.current.style.transform=n?n({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Yu(t=>{if(!fm(t,e,null))return;const r=this.getAxisMotionValue(t),{min:n,max:a}=this.constraints[t];r.set(xi(n,a,s[t]))})}addListeners(){if(!this.visualElement.current)return;hm.set(this.visualElement,this);const e=Wu(this.visualElement.current,"pointerdown",e=>{const{drag:t,dragListener:r=!0}=this.getProps();t&&r&&this.start(e)}),t=()=>{const{dragConstraints:e}=this.getProps();jc(e)&&e.current&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,s=r.addEventListener("measure",t);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),ao.read(t);const n=Vu(window,"resize",()=>this.scalePositionWithinConstraints()),a=r.addEventListener("didUpdate",e=>{let{delta:t,hasLayoutChanged:r}=e;this.isDragging&&r&&(Yu(e=>{const r=this.getAxisMotionValue(e);r&&(this.originPoint[e]+=t[e].translate,r.set(r.get()+t[e].translate))}),this.visualElement.render())});return()=>{n(),e(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:n=!1,dragElastic:a=dm,dragMomentum:i=!0}=e;return ze(ze({},e),{},{drag:t,dragDirectionLock:r,dragPropagation:s,dragConstraints:n,dragElastic:a,dragMomentum:i})}}function fm(e,t,r){return(!0===t||t===e)&&(null===r||r===e)}const xm=e=>(t,r)=>{e&&ao.postRender(()=>e(t,r))};function gm(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const r=(0,t.useContext)(mc);if(null===r)return[!0,null];const{isPresent:s,onExitComplete:n,register:a}=r,i=(0,t.useId)();(0,t.useEffect)(()=>{if(e)return a(i)},[e]);const o=(0,t.useCallback)(()=>e&&n&&n(i),[i,n,e]);return!s&&n?[!1,o]:[!0]}const vm={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function bm(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const ym={correct:(e,t)=>{if(!t.target)return e;if("string"===typeof e){if(!Ui.test(e))return e;e=parseFloat(e)}const r=bm(e,t.target.x),s=bm(e,t.target.y);return"".concat(r,"% ").concat(s,"%")}},jm={correct:(e,t)=>{let{treeScale:r,projectionDelta:s}=t;const n=e,a=zo.parse(e);if(a.length>5)return n;const i=zo.createTransformer(e),o="number"!==typeof a[0]?1:0,l=s.x.scale*r.x,c=s.y.scale*r.y;a[0+o]/=l,a[1+o]/=c;const d=xi(l,c,.5);return"number"===typeof a[2+o]&&(a[2+o]/=d),"number"===typeof a[3+o]&&(a[3+o]/=d),i(a)}};let wm=!1;class Nm extends t.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r,layoutId:s}=this.props,{projection:n}=e;!function(e){for(const t in e)Rl[t]=e[t],ui(t)&&(Rl[t].isCSSVariable=!0)}(km),n&&(t.group&&t.group.add(n),r&&r.register&&s&&r.register(n),wm&&n.root.didUpdate(),n.addEventListener("animationComplete",()=>{this.safeToRemove()}),n.setOptions(ze(ze({},n.options),{},{onExitComplete:()=>this.safeToRemove()}))),vm.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:r,drag:s,isPresent:n}=this.props,{projection:a}=r;return a?(a.isPresent=n,wm=!0,s||e.layoutDependency!==t||void 0===t||e.isPresent!==n?a.willUpdate():this.safeToRemove(),e.isPresent!==n&&(n?a.promote():a.relegate()||ao.postRender(()=>{const e=a.getStack();e&&e.members.length||this.safeToRemove()})),null):null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),ol.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r}=this.props,{projection:s}=e;wm=!0,s&&(s.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function Sm(e){const[r,s]=gm(),n=(0,t.useContext)(Zl);return(0,Ks.jsx)(Nm,ze(ze({},e),{},{layoutGroup:n,switchLayoutGroup:(0,t.useContext)(Sc),isPresent:r,safeToRemove:s}))}const km={borderRadius:ze(ze({},ym),{},{applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]}),borderTopLeftRadius:ym,borderTopRightRadius:ym,borderBottomLeftRadius:ym,borderBottomRightRadius:ym,boxShadow:jm};function _m(e){return"object"===typeof e&&null!==e}function Em(e){return _m(e)&&"ownerSVGElement"in e}const Cm=(e,t)=>e.depth-t.depth;class Pm{constructor(){this.children=[],this.isDirty=!1}add(e){Xo(this.children,e),this.isDirty=!0}remove(e){el(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(Cm),this.isDirty=!1,this.children.forEach(e)}}function Am(e,t){const r=Yo.now(),s=n=>{let{timestamp:a}=n;const i=a-r;i>=t&&(io(s),e(i-t))};return ao.setup(s,!0),()=>io(s)}const Tm=["TopLeft","TopRight","BottomLeft","BottomRight"],Im=Tm.length,Rm=e=>"string"===typeof e?parseFloat(e):e,Om=e=>"number"===typeof e||Ui.test(e);function Lm(e,t){return void 0!==e[t]?e[t]:e.borderRadius}const Dm=Mm(0,.5,Td),zm=Mm(.5,.95,eo);function Mm(e,t,r){return s=>s<e?0:s>t?1:r(Dd(e,t,s))}function Fm(e,t){e.min=t.min,e.max=t.max}function Um(e,t){Fm(e.x,t.x),Fm(e.y,t.y)}function Bm(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function Vm(e,t,r,s,n){return e=wi(e-=t,1/r,s),void 0!==n&&(e=wi(e,1/n,s)),e}function qm(e,t,r,s,n){let[a,i,o]=r;!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,n=arguments.length>4?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:e,i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:e;Fi.test(t)&&(t=parseFloat(t),t=xi(i.min,i.max,t/100)-i.min);if("number"!==typeof t)return;let o=xi(a.min,a.max,s);e===a&&(o-=t),e.min=Vm(e.min,t,r,o,n),e.max=Vm(e.max,t,r,o,n)}(e,t[a],t[i],t[o],t.scale,s,n)}const Hm=["x","scaleX","originX"],Wm=["y","scaleY","originY"];function Gm(e,t,r,s){qm(e.x,t,Hm,r?r.x:void 0,s?s.x:void 0),qm(e.y,t,Wm,r?r.y:void 0,s?s.y:void 0)}function Km(e){return 0===e.translate&&1===e.scale}function Jm(e){return Km(e.x)&&Km(e.y)}function Zm(e,t){return e.min===t.min&&e.max===t.max}function $m(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function Qm(e,t){return $m(e.x,t.x)&&$m(e.y,t.y)}function Ym(e){return Gu(e.x)/Gu(e.y)}function Xm(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class eh{constructor(){this.members=[]}add(e){Xo(this.members,e),e.scheduleRender()}remove(e){if(el(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(e){const t=this.members.findIndex(t=>e===t);if(0===t)return!1;let r;for(let s=t;s>=0;s--){const e=this.members[s];if(!1!==e.isPresent){r=e;break}}return!!r&&(this.promote(r),!0)}promote(e,t){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,t&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;!1===s&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:r}=e;t.onExitComplete&&t.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const th={nodes:0,calculatedTargetDeltas:0,calculatedProjections:0},rh=["","X","Y","Z"];let sh=0;function nh(e,t,r,s){const{latestValues:n}=t;n[e]&&(r[e]=n[e],t.setStaticValue(e,0),s&&(s[e]=0))}function ah(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const r=Mc(t);if(window.MotionHasOptimisedAnimation(r,"transform")){const{layout:t,layoutId:s}=e.options;window.MotionCancelOptimisedAnimation(r,"transform",ao,!(t||s))}const{parent:s}=e;s&&!s.hasCheckedOptimisedAppear&&ah(s)}function ih(e){let{attachResizeListener:t,defaultParent:r,measureScroll:s,checkIsScrollRoot:n,resetTransform:a}=e;return class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null===r||void 0===r?void 0:r();this.id=sh++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,so.value&&(th.nodes=th.calculatedTargetDeltas=th.calculatedProjections=0),this.nodes.forEach(ch),this.nodes.forEach(xh),this.nodes.forEach(gh),this.nodes.forEach(dh),so.addProjectionMetrics&&so.addProjectionMetrics(th)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=e,this.root=t?t.root||t:this,this.path=t?[...t.path,t]:[],this.parent=t,this.depth=t?t.depth+1:0;for(let r=0;r<this.path.length;r++)this.path[r].shouldResetTransform=!0;this.root===this&&(this.nodes=new Pm)}addEventListener(e,t){return this.eventHandlers.has(e)||this.eventHandlers.set(e,new tl),this.eventHandlers.get(e).add(t)}notifyListeners(e){const t=this.eventHandlers.get(e);for(var r=arguments.length,s=new Array(r>1?r-1:0),n=1;n<r;n++)s[n-1]=arguments[n];t&&t.notify(...s)}hasListeners(e){return this.eventHandlers.has(e)}mount(e){if(this.instance)return;var r;this.isSVG=Em(e)&&!(Em(r=e)&&"svg"===r.tagName),this.instance=e;const{layoutId:s,layout:n,visualElement:a}=this.options;if(a&&!a.current&&a.mount(e),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(n||s)&&(this.isLayoutDirty=!0),t){let r,s=0;const n=()=>this.root.updateBlockedByResize=!1;ao.read(()=>{s=window.innerWidth}),t(e,()=>{const e=window.innerWidth;e!==s&&(s=e,this.root.updateBlockedByResize=!0,r&&r(),r=Am(n,250),vm.hasAnimatedSinceResize&&(vm.hasAnimatedSinceResize=!1,this.nodes.forEach(fh)))})}s&&this.root.registerSharedNode(s,this),!1!==this.options.animate&&a&&(s||n)&&this.addEventListener("didUpdate",e=>{let{delta:t,hasLayoutChanged:r,hasRelativeLayoutChanged:s,layout:n}=e;if(this.isTreeAnimationBlocked())return this.target=void 0,void(this.relativeTarget=void 0);const i=this.options.transition||a.getDefaultTransition()||Nh,{onLayoutAnimationStart:o,onLayoutAnimationComplete:l}=a.getProps(),c=!this.targetLayout||!Qm(this.targetLayout,n),d=!r&&s;if(this.options.layoutRoot||this.resumeFrom||d||r&&(c||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const e=ze(ze({},Ic(i,"layout")),{},{onPlay:o,onComplete:l});(a.shouldReduceMotion||this.options.layoutRoot)&&(e.delay=0,e.type=!1),this.startAnimation(e),this.setAnimationOrigin(t,d)}else r||fh(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=n})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const e=this.getStack();e&&e.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),io(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(vh),this.animationId++)}getTransformTemplate(){const{visualElement:e}=this.options;return e&&e.getProps().transformTemplate}willUpdate(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked())return void(this.options.onExitComplete&&this.options.onExitComplete());if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&ah(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let n=0;n<this.path.length;n++){const e=this.path[n];e.shouldResetTransform=!0,e.updateScroll("snapshot"),e.options.layoutRoot&&e.willUpdate(!1)}const{layoutId:t,layout:r}=this.options;if(void 0===t&&!r)return;const s=this.getTransformTemplate();this.prevTransformTemplateValue=s?s(this.latestValues,""):void 0,this.updateSnapshot(),e&&this.notifyListeners("willUpdate")}update(){this.updateScheduled=!1;if(this.isUpdateBlocked())return this.unblockUpdate(),this.clearAllSnapshots(),void this.nodes.forEach(mh);if(this.animationId<=this.animationCommitId)return void this.nodes.forEach(hh);this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(ph),this.nodes.forEach(oh),this.nodes.forEach(lh)):this.nodes.forEach(hh),this.clearAllSnapshots();const e=Yo.now();oo.delta=Ri(0,1e3/60,e-oo.timestamp),oo.timestamp=e,oo.isProcessing=!0,lo.update.process(oo),lo.preRender.process(oo),lo.render.process(oo),oo.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,ol.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(uh),this.sharedNodes.forEach(bh)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ao.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ao.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){!this.snapshot&&this.instance&&(this.snapshot=this.measure(),!this.snapshot||Gu(this.snapshot.measuredBox.x)||Gu(this.snapshot.measuredBox.y)||(this.snapshot=void 0))}updateLayout(){if(!this.instance)return;if(this.updateScroll(),(!this.options.alwaysMeasureLayout||!this.isLead())&&!this.isLayoutDirty)return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let r=0;r<this.path.length;r++){this.path[r].updateScroll()}const e=this.layout;this.layout=this.measure(!1),this.layoutCorrected={x:{min:0,max:0},y:{min:0,max:0}},this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:t}=this.options;t&&t.notify("LayoutMeasure",this.layout.layoutBox,e?e.layoutBox:void 0)}updateScroll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"measure",t=Boolean(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===e&&(t=!1),t&&this.instance){const t=n(this.instance);this.scroll={animationId:this.root.animationId,phase:e,isRoot:t,offset:s(this.instance),wasRoot:this.scroll?this.scroll.isRoot:t}}}resetTransform(){if(!a)return;const e=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,t=this.projectionDelta&&!Jm(this.projectionDelta),r=this.getTransformTemplate(),s=r?r(this.latestValues,""):void 0,n=s!==this.prevTransformTemplateValue;e&&this.instance&&(t||bi(this.latestValues)||n)&&(a(this.instance,s),this.shouldResetTransform=!1,this.scheduleRender())}measure(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=this.measurePageBox();let r=this.removeElementScroll(t);var s;return e&&(r=this.removeTransform(r)),_h((s=r).x),_h(s.y),{animationId:this.root.animationId,measuredBox:t,layoutBox:r,latestValues:{},source:this.id}}measurePageBox(){var e;const{visualElement:t}=this.options;if(!t)return{x:{min:0,max:0},y:{min:0,max:0}};const r=t.measureViewportBox();if(!((null===(e=this.scroll)||void 0===e?void 0:e.wasRoot)||this.path.some(Ch))){const{scroll:e}=this.root;e&&(Ci(r.x,e.offset.x),Ci(r.y,e.offset.y))}return r}removeElementScroll(e){var t;const r={x:{min:0,max:0},y:{min:0,max:0}};if(Um(r,e),null!==(t=this.scroll)&&void 0!==t&&t.wasRoot)return r;for(let s=0;s<this.path.length;s++){const t=this.path[s],{scroll:n,options:a}=t;t!==this.root&&n&&a.layoutScroll&&(n.wasRoot&&Um(r,e),Ci(r.x,n.offset.x),Ci(r.y,n.offset.y))}return r}applyTransform(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r={x:{min:0,max:0},y:{min:0,max:0}};Um(r,e);for(let s=0;s<this.path.length;s++){const e=this.path[s];!t&&e.options.layoutScroll&&e.scroll&&e!==e.root&&Ai(r,{x:-e.scroll.offset.x,y:-e.scroll.offset.y}),bi(e.latestValues)&&Ai(r,e.latestValues)}return bi(this.latestValues)&&Ai(r,this.latestValues),r}removeTransform(e){const t={x:{min:0,max:0},y:{min:0,max:0}};Um(t,e);for(let r=0;r<this.path.length;r++){const e=this.path[r];if(!e.instance)continue;if(!bi(e.latestValues))continue;vi(e.latestValues)&&e.updateSnapshot();const s=ul();Um(s,e.measurePageBox()),Gm(t,e.latestValues,e.snapshot?e.snapshot.layoutBox:void 0,s)}return bi(this.latestValues)&&Gm(t,this.latestValues),t}setTargetDelta(e){this.targetDelta=e,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(e){this.options=ze(ze(ze({},this.options),e),{},{crossfade:void 0===e.crossfade||e.crossfade})}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==oo.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(){var e;let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const r=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=r.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=r.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=r.isSharedProjectionDirty);const s=Boolean(this.resumingFrom)||this!==r;if(!(t||s&&this.isSharedProjectionDirty||this.isProjectionDirty||null!==(e=this.parent)&&void 0!==e&&e.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:n,layoutId:a}=this.options;if(this.layout&&(n||a)){if(this.resolvedRelativeTargetAt=oo.timestamp,!this.targetDelta&&!this.relativeTarget){const e=this.getClosestProjectingParent();e&&e.layout&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},Qu(this.relativeTargetOrigin,this.layout.layoutBox,e.layout.layoutBox),Um(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(this.relativeTarget||this.targetDelta){var i,o,l;if(this.target||(this.target={x:{min:0,max:0},y:{min:0,max:0}},this.targetWithTransforms={x:{min:0,max:0},y:{min:0,max:0}}),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),i=this.target,o=this.relativeTarget,l=this.relativeParent.target,Zu(i.x,o.x,l.x),Zu(i.y,o.y,l.y)):this.targetDelta?(Boolean(this.resumingFrom)?this.target=this.applyTransform(this.layout.layoutBox):Um(this.target,this.layout.layoutBox),ki(this.target,this.targetDelta)):Um(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const e=this.getClosestProjectingParent();e&&Boolean(e.resumingFrom)===Boolean(this.resumingFrom)&&!e.options.layoutScroll&&e.target&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},Qu(this.relativeTargetOrigin,this.target,e.target),Um(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}so.value&&th.calculatedTargetDeltas++}}}getClosestProjectingParent(){if(this.parent&&!vi(this.parent.latestValues)&&!yi(this.parent.latestValues))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return Boolean((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var e;const t=this.getLead(),r=Boolean(this.resumingFrom)||this!==t;let s=!0;if((this.isProjectionDirty||null!==(e=this.parent)&&void 0!==e&&e.isProjectionDirty)&&(s=!1),r&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(s=!1),this.resolvedRelativeTargetAt===oo.timestamp&&(s=!1),s)return;const{layout:n,layoutId:a}=this.options;if(this.isTreeAnimating=Boolean(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!n&&!a)return;Um(this.layoutCorrected,this.layout.layoutBox);const i=this.treeScale.x,o=this.treeScale.y;!function(e,t,r){let s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const n=r.length;if(!n)return;let a,i;t.x=t.y=1;for(let o=0;o<n;o++){a=r[o],i=a.projectionDelta;const{visualElement:n}=a.options;n&&n.props.style&&"contents"===n.props.style.display||(s&&a.options.layoutScroll&&a.scroll&&a!==a.root&&Ai(e,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),i&&(t.x*=i.x.scale,t.y*=i.y.scale,ki(e,i)),s&&bi(a.latestValues)&&Ai(e,a.latestValues))}t.x<Ei&&t.x>_i&&(t.x=1),t.y<Ei&&t.y>_i&&(t.y=1)}(this.layoutCorrected,this.treeScale,this.path,r),!t.layout||t.target||1===this.treeScale.x&&1===this.treeScale.y||(t.target=t.layout.layoutBox,t.targetWithTransforms={x:{min:0,max:0},y:{min:0,max:0}});const{target:l}=t;l?(this.projectionDelta&&this.prevProjectionDelta?(Bm(this.prevProjectionDelta.x,this.projectionDelta.x),Bm(this.prevProjectionDelta.y,this.projectionDelta.y)):this.createProjectionDeltas(),Ju(this.projectionDelta,this.layoutCorrected,l,this.latestValues),this.treeScale.x===i&&this.treeScale.y===o&&Xm(this.projectionDelta.x,this.prevProjectionDelta.x)&&Xm(this.projectionDelta.y,this.prevProjectionDelta.y)||(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",l)),so.value&&th.calculatedProjections++):this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender())}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(){var e;let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(null===(e=this.options.visualElement)||void 0===e||e.scheduleRender(),t){const e=this.getStack();e&&e.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionDeltaWithTransform={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}}}setAnimationOrigin(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r=this.snapshot,s=r?r.latestValues:{},n=ze({},this.latestValues),a={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};this.relativeParent&&this.relativeParent.options.layoutRoot||(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!t;const i={x:{min:0,max:0},y:{min:0,max:0}},o=(r?r.source:void 0)!==(this.layout?this.layout.source:void 0),l=this.getStack(),c=!l||l.members.length<=1,d=Boolean(o&&!c&&!0===this.options.crossfade&&!this.path.some(wh));let u;this.animationProgress=0,this.mixTargetDelta=t=>{const r=t/1e3;yh(a.x,e.x,r),yh(a.y,e.y,r),this.setTargetDelta(a),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Qu(i,this.layout.layoutBox,this.relativeParent.layout.layoutBox),function(e,t,r,s){jh(e.x,t.x,r.x,s),jh(e.y,t.y,r.y,s)}(this.relativeTarget,this.relativeTargetOrigin,i,r),u&&function(e,t){return Zm(e.x,t.x)&&Zm(e.y,t.y)}(this.relativeTarget,u)&&(this.isProjectionDirty=!1),u||(u={x:{min:0,max:0},y:{min:0,max:0}}),Um(u,this.relativeTarget)),o&&(this.animationValues=n,function(e,t,r,s,n,a){var i,o;if(n)e.opacity=xi(0,null!==(i=r.opacity)&&void 0!==i?i:1,Dm(s)),e.opacityExit=xi(null!==(o=t.opacity)&&void 0!==o?o:1,0,zm(s));else if(a){var l,c;e.opacity=xi(null!==(l=t.opacity)&&void 0!==l?l:1,null!==(c=r.opacity)&&void 0!==c?c:1,s)}for(let d=0;d<Im;d++){const n="border".concat(Tm[d],"Radius");let a=Lm(t,n),i=Lm(r,n);void 0===a&&void 0===i||(a||(a=0),i||(i=0),0===a||0===i||Om(a)===Om(i)?(e[n]=Math.max(xi(Rm(a),Rm(i),s),0),(Fi.test(i)||Fi.test(a))&&(e[n]+="%")):e[n]=i)}(t.rotate||r.rotate)&&(e.rotate=xi(t.rotate||0,r.rotate||0,s))}(n,s,this.latestValues,r,d,c)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=r},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(e){var t,r;this.notifyListeners("animationStart"),null===(t=this.currentAnimation)||void 0===t||t.stop(),null===(r=this.resumingFrom)||void 0===r||null===(r=r.currentAnimation)||void 0===r||r.stop(),this.pendingAnimation&&(io(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ao.update(()=>{vm.hasAnimatedSinceResize=!0,Hc.layout++,this.motionValue||(this.motionValue=al(0)),this.currentAnimation=function(e,t,r){const s=Zo(e)?e:al(e);return s.start(yu("",s,t,r)),s.animation}(this.motionValue,[0,1e3],ze(ze({},e),{},{velocity:0,isSync:!0,onUpdate:t=>{this.mixTargetDelta(t),e.onUpdate&&e.onUpdate(t)},onStop:()=>{Hc.layout--},onComplete:()=>{Hc.layout--,e.onComplete&&e.onComplete(),this.completeAnimation()}})),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const e=this.getStack();e&&e.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(1e3),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const e=this.getLead();let{targetWithTransforms:t,target:r,layout:s,latestValues:n}=e;if(t&&r&&s){if(this!==e&&this.layout&&s&&Eh(this.options.animationType,this.layout.layoutBox,s.layoutBox)){r=this.target||{x:{min:0,max:0},y:{min:0,max:0}};const t=Gu(this.layout.layoutBox.x);r.x.min=e.target.x.min,r.x.max=r.x.min+t;const s=Gu(this.layout.layoutBox.y);r.y.min=e.target.y.min,r.y.max=r.y.min+s}Um(t,r),Ai(t,n),Ju(this.projectionDeltaWithTransform,this.layoutCorrected,t,n)}}registerSharedNode(e,t){this.sharedNodes.has(e)||this.sharedNodes.set(e,new eh);this.sharedNodes.get(e).add(t);const r=t.options.initialPromotionConfig;t.promote({transition:r?r.transition:void 0,preserveFollowOpacity:r&&r.shouldPreserveFollowOpacity?r.shouldPreserveFollowOpacity(t):void 0})}isLead(){const e=this.getStack();return!e||e.lead===this}getLead(){var e;const{layoutId:t}=this.options;return t&&(null===(e=this.getStack())||void 0===e?void 0:e.lead)||this}getPrevLead(){var e;const{layoutId:t}=this.options;return t?null===(e=this.getStack())||void 0===e?void 0:e.prevLead:void 0}getStack(){const{layoutId:e}=this.options;if(e)return this.root.sharedNodes.get(e)}promote(){let{needsReset:e,transition:t,preserveFollowOpacity:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const s=this.getStack();s&&s.promote(this,r),e&&(this.projectionDelta=void 0,this.needsReset=!0),t&&this.setOptions({transition:t})}relegate(){const e=this.getStack();return!!e&&e.relegate(this)}resetSkewAndRotation(){const{visualElement:e}=this.options;if(!e)return;let t=!1;const{latestValues:r}=e;if((r.z||r.rotate||r.rotateX||r.rotateY||r.rotateZ||r.skewX||r.skewY)&&(t=!0),!t)return;const s={};r.z&&nh("z",e,s,this.animationValues);for(let n=0;n<rh.length;n++)nh("rotate".concat(rh[n]),e,s,this.animationValues),nh("skew".concat(rh[n]),e,s,this.animationValues);e.render();for(const n in s)e.setStaticValue(n,s[n]),this.animationValues&&(this.animationValues[n]=s[n]);e.scheduleRender()}applyProjectionStyles(e,t){if(!this.instance||this.isSVG)return;if(!this.isVisible)return void(e.visibility="hidden");const r=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,e.visibility="",e.opacity="",e.pointerEvents=pc(null===t||void 0===t?void 0:t.pointerEvents)||"",void(e.transform=r?r(this.latestValues,""):"none");const s=this.getLead();if(!this.projectionDelta||!this.layout||!s.target)return this.options.layoutId&&(e.opacity=void 0!==this.latestValues.opacity?this.latestValues.opacity:1,e.pointerEvents=pc(null===t||void 0===t?void 0:t.pointerEvents)||""),void(this.hasProjected&&!bi(this.latestValues)&&(e.transform=r?r({},""):"none",this.hasProjected=!1));e.visibility="";const n=s.animationValues||s.latestValues;this.applyTransformsToTarget();let a=function(e,t,r){let s="";const n=e.x.translate/t.x,a=e.y.translate/t.y,i=(null===r||void 0===r?void 0:r.z)||0;if((n||a||i)&&(s="translate3d(".concat(n,"px, ").concat(a,"px, ").concat(i,"px) ")),1===t.x&&1===t.y||(s+="scale(".concat(1/t.x,", ").concat(1/t.y,") ")),r){const{transformPerspective:e,rotate:t,rotateX:n,rotateY:a,skewX:i,skewY:o}=r;e&&(s="perspective(".concat(e,"px) ").concat(s)),t&&(s+="rotate(".concat(t,"deg) ")),n&&(s+="rotateX(".concat(n,"deg) ")),a&&(s+="rotateY(".concat(a,"deg) ")),i&&(s+="skewX(".concat(i,"deg) ")),o&&(s+="skewY(".concat(o,"deg) "))}const o=e.x.scale*t.x,l=e.y.scale*t.y;return 1===o&&1===l||(s+="scale(".concat(o,", ").concat(l,")")),s||"none"}(this.projectionDeltaWithTransform,this.treeScale,n);r&&(a=r(n,a)),e.transform=a;const{x:i,y:o}=this.projectionDelta;var l,c;(e.transformOrigin="".concat(100*i.origin,"% ").concat(100*o.origin,"% 0"),s.animationValues)?e.opacity=s===this?null!==(l=null!==(c=n.opacity)&&void 0!==c?c:this.latestValues.opacity)&&void 0!==l?l:1:this.preserveOpacity?this.latestValues.opacity:n.opacityExit:e.opacity=s===this?void 0!==n.opacity?n.opacity:"":void 0!==n.opacityExit?n.opacityExit:0;for(const d in Rl){if(void 0===n[d])continue;const{correct:t,applyTo:r,isCSSVariable:i}=Rl[d],o="none"===a?n[d]:t(n[d],s);if(r){const t=r.length;for(let s=0;s<t;s++)e[r[s]]=o}else i?this.options.visualElement.renderState.vars[d]=o:e[d]=o}this.options.layoutId&&(e.pointerEvents=s===this?pc(null===t||void 0===t?void 0:t.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(e=>{var t;return null===(t=e.currentAnimation)||void 0===t?void 0:t.stop()}),this.root.nodes.forEach(mh),this.root.sharedNodes.clear()}}}function oh(e){e.updateLayout()}function lh(e){var t;const r=(null===(t=e.resumeFrom)||void 0===t?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&r&&e.hasListeners("didUpdate")){const{layoutBox:t,measuredBox:s}=e.layout,{animationType:n}=e.options,a=r.source!==e.layout.source;"size"===n?Yu(e=>{const s=a?r.measuredBox[e]:r.layoutBox[e],n=Gu(s);s.min=t[e].min,s.max=s.min+n}):Eh(n,r.layoutBox,t)&&Yu(s=>{const n=a?r.measuredBox[s]:r.layoutBox[s],i=Gu(t[s]);n.max=n.min+i,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[s].max=e.relativeTarget[s].min+i)});const i={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};Ju(i,t,r.layoutBox);const o={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};a?Ju(o,e.applyTransform(s,!0),r.measuredBox):Ju(o,t,r.layoutBox);const l=!Jm(i);let c=!1;if(!e.resumeFrom){const s=e.getClosestProjectingParent();if(s&&!s.resumeFrom){const{snapshot:n,layout:a}=s;if(n&&a){const i={x:{min:0,max:0},y:{min:0,max:0}};Qu(i,r.layoutBox,n.layoutBox);const o={x:{min:0,max:0},y:{min:0,max:0}};Qu(o,t,a.layoutBox),Qm(i,o)||(c=!0),s.options.layoutRoot&&(e.relativeTarget=o,e.relativeTargetOrigin=i,e.relativeParent=s)}}}e.notifyListeners("didUpdate",{layout:t,snapshot:r,delta:o,layoutDelta:i,hasLayoutChanged:l,hasRelativeLayoutChanged:c})}else if(e.isLead()){const{onExitComplete:t}=e.options;t&&t()}e.options.transition=void 0}function ch(e){so.value&&th.nodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=Boolean(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function dh(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function uh(e){e.clearSnapshot()}function mh(e){e.clearMeasurements()}function hh(e){e.isLayoutDirty=!1}function ph(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function fh(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function xh(e){e.resolveTargetDelta()}function gh(e){e.calcProjection()}function vh(e){e.resetSkewAndRotation()}function bh(e){e.removeLeadSnapshot()}function yh(e,t,r){e.translate=xi(t.translate,0,r),e.scale=xi(t.scale,1,r),e.origin=t.origin,e.originPoint=t.originPoint}function jh(e,t,r,s){e.min=xi(t.min,r.min,s),e.max=xi(t.max,r.max,s)}function wh(e){return e.animationValues&&void 0!==e.animationValues.opacityExit}const Nh={duration:.45,ease:[.4,0,.1,1]},Sh=e=>"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),kh=Sh("applewebkit/")&&!Sh("chrome/")?Math.round:eo;function _h(e){e.min=kh(e.min),e.max=kh(e.max)}function Eh(e,t,r){return"position"===e||"preserve-aspect"===e&&(s=Ym(t),n=Ym(r),a=.2,!(Math.abs(s-n)<=a));var s,n,a}function Ch(e){var t;return e!==e.root&&(null===(t=e.scroll)||void 0===t?void 0:t.wasRoot)}const Ph=ih({attachResizeListener:(e,t)=>Vu(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Ah={current:void 0},Th=ih({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!Ah.current){const e=new Ph({});e.mount(window),e.setOptions({layoutScroll:!0}),Ah.current=e}return Ah.current},resetTransform:(e,t)=>{e.style.transform=void 0!==t?t:"none"},checkIsScrollRoot:e=>Boolean("fixed"===window.getComputedStyle(e).position)}),Ih={pan:{Feature:class extends zu{constructor(){super(...arguments),this.removePointerDownListener=eo}onPointerDown(e){this.session=new tm(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Xu(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:xm(e),onStart:xm(t),onMove:r,onEnd:(e,t)=>{delete this.session,s&&ao.postRender(()=>s(e,t))}}}mount(){this.removePointerDownListener=Wu(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}},drag:{Feature:class extends zu{constructor(e){super(e),this.removeGroupControls=eo,this.removeListeners=eo,this.controls=new pm(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||eo}unmount(){this.removeGroupControls(),this.removeListeners()}},ProjectionNode:Th,MeasureLayout:Sm}};function Rh(e,t){const r=function(e,t,r){if(e instanceof EventTarget)return[e];if("string"===typeof e){var s;let n=document;t&&(n=t.current);const a=null!==(s=null===r||void 0===r?void 0:r[e])&&void 0!==s?s:n.querySelectorAll(e);return a?Array.from(a):[]}return Array.from(e)}(e),s=new AbortController;return[r,ze(ze({passive:!0},t),{},{signal:s.signal}),()=>s.abort()]}function Oh(e){return!("touch"===e.pointerType||Bu())}function Lh(e,t,r){const{props:s}=e;e.animationState&&s.whileHover&&e.animationState.setActive("whileHover","Start"===r);const n=s["onHover"+r];n&&ao.postRender(()=>n(t,Hu(t)))}function Dh(e){return _m(e)&&"offsetHeight"in e}const zh=(e,t)=>!!t&&(e===t||zh(e,t.parentElement)),Mh=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);const Fh=new WeakSet;function Uh(e){return t=>{"Enter"===t.key&&e(t)}}function Bh(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}function Vh(e){return qu(e)&&!Bu()}function qh(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const[s,n,a]=Rh(e,r),i=e=>{const s=e.currentTarget;if(!Vh(e))return;Fh.add(s);const a=t(s,e),i=(e,t)=>{window.removeEventListener("pointerup",o),window.removeEventListener("pointercancel",l),Fh.has(s)&&Fh.delete(s),Vh(e)&&"function"===typeof a&&a(e,{success:t})},o=e=>{i(e,s===window||s===document||r.useGlobalTarget||zh(s,e.target))},l=e=>{i(e,!1)};window.addEventListener("pointerup",o,n),window.addEventListener("pointercancel",l,n)};return s.forEach(e=>{var t;(r.useGlobalTarget?window:e).addEventListener("pointerdown",i,n),Dh(e)&&(e.addEventListener("focus",e=>((e,t)=>{const r=e.currentTarget;if(!r)return;const s=Uh(()=>{if(Fh.has(r))return;Bh(r,"down");const e=Uh(()=>{Bh(r,"up")});r.addEventListener("keyup",e,t),r.addEventListener("blur",()=>Bh(r,"cancel"),t)});r.addEventListener("keydown",s,t),r.addEventListener("blur",()=>r.removeEventListener("keydown",s),t)})(e,n)),t=e,Mh.has(t.tagName)||-1!==t.tabIndex||e.hasAttribute("tabindex")||(e.tabIndex=0))}),a}function Hh(e,t,r){const{props:s}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&s.whileTap&&e.animationState.setActive("whileTap","Start"===r);const n=s["onTap"+("End"===r?"":r)];n&&ao.postRender(()=>n(t,Hu(t)))}const Wh=["root"],Gh=new WeakMap,Kh=new WeakMap,Jh=e=>{const t=Gh.get(e.target);t&&t(e)},Zh=e=>{e.forEach(Jh)};function $h(e,t,r){const s=function(e){let{root:t}=e,r=Qs(e,Wh);const s=t||document;Kh.has(s)||Kh.set(s,{});const n=Kh.get(s),a=JSON.stringify(r);return n[a]||(n[a]=new IntersectionObserver(Zh,ze({root:t},r))),n[a]}(t);return Gh.set(e,r),s.observe(e),()=>{Gh.delete(e),s.unobserve(e)}}const Qh={some:0,all:1};const Yh={inView:{Feature:class extends zu{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:r,amount:s="some",once:n}=e,a={root:t?t.current:void 0,rootMargin:r,threshold:"number"===typeof s?s:Qh[s]};return $h(this.node.current,a,e=>{const{isIntersecting:t}=e;if(this.isInView===t)return;if(this.isInView=t,n&&!t&&this.hasEnteredView)return;t&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",t);const{onViewportEnter:r,onViewportLeave:s}=this.node.getProps(),a=t?r:s;a&&a(e)})}mount(){this.startObserver()}update(){if("undefined"===typeof IntersectionObserver)return;const{props:e,prevProps:t}=this.node,r=["amount","margin","root"].some(function(e){let{viewport:t={}}=e,{viewport:r={}}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e=>t[e]!==r[e]}(e,t));r&&this.startObserver()}unmount(){}}},tap:{Feature:class extends zu{mount(){const{current:e}=this.node;e&&(this.unmount=qh(e,(e,t)=>(Hh(this.node,t,"Start"),(e,t)=>{let{success:r}=t;return Hh(this.node,e,r?"End":"Cancel")}),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}},focus:{Feature:class extends zu{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch(wn){e=!0}e&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){this.isActive&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Bc(Vu(this.node.current,"focus",()=>this.onFocus()),Vu(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}},hover:{Feature:class extends zu{mount(){const{current:e}=this.node;e&&(this.unmount=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const[s,n,a]=Rh(e,r),i=e=>{if(!Oh(e))return;const{target:r}=e,s=t(r,e);if("function"!==typeof s||!r)return;const a=e=>{Oh(e)&&(s(e),r.removeEventListener("pointerleave",a))};r.addEventListener("pointerleave",a,n)};return s.forEach(e=>{e.addEventListener("pointerenter",i,n)}),a}(e,(e,t)=>(Lh(this.node,t,"Start"),e=>Lh(this.node,e,"End"))))}unmount(){}}}},Xh={layout:{ProjectionNode:Th,MeasureLayout:Sm}},ep=Ac(ze(ze(ze(ze({},Fu),Yh),Ih),Xh),Jl),tp=e=>{let{text:r="",delay:s=200,className:n="",animateBy:a="words",direction:i="top",threshold:o=.1,rootMargin:l="0px",animationFrom:c,animationTo:d,easing:u=e=>e,onAnimationComplete:m,stepDuration:h=.35}=e;const p="words"===a?r.split(" "):r.split(""),[f,x]=(0,t.useState)(!1),g=(0,t.useRef)(null);(0,t.useEffect)(()=>{if(!g.current)return;const e=new IntersectionObserver(t=>{let[r]=t;r.isIntersecting&&(x(!0),g.current&&e.unobserve(g.current))},{threshold:o,rootMargin:l});return e.observe(g.current),()=>e.disconnect()},[o,l]);const v=(0,t.useMemo)(()=>"top"===i?{filter:"blur(10px)",opacity:0,y:-50}:{filter:"blur(10px)",opacity:0,y:50},[i]),b=(0,t.useMemo)(()=>[{filter:"blur(5px)",opacity:.5,y:"top"===i?5:-5},{filter:"blur(0px)",opacity:1,y:0}],[i]),y=null!==c&&void 0!==c?c:v,j=null!==d&&void 0!==d?d:b,w=j.length+1,N=h*(w-1),S=Array.from({length:w},(e,t)=>1===w?0:t/(w-1));return(0,Ks.jsx)("p",{ref:g,className:"blur-text ".concat(n," flex flex-wrap"),children:p.map((e,t)=>{const r=((e,t)=>{const r=new Set([...Object.keys(e),...t.flatMap(e=>Object.keys(e))]),s={};return r.forEach(r=>{s[r]=[e[r],...t.map(e=>e[r])]}),s})(y,j),n={duration:N,times:S,delay:t*s/1e3};return n.ease=u,(0,Ks.jsxs)(ep.span,{className:"inline-block will-change-[transform,filter,opacity]",initial:y,animate:f?r:y,transition:n,onAnimationComplete:t===p.length-1?m:void 0,children:[" "===e?"\xa0":e,"words"===a&&t<p.length-1&&"\xa0"]},t)})})},rp=e=>{let{className:t="",size:r="md",showText:s=!0}=e;return(0,Ks.jsxs)("div",{className:"flex items-center space-x-3 ".concat(t),children:[(0,Ks.jsx)("div",{className:"".concat({sm:"w-8 h-8",md:"w-12 h-12",lg:"w-16 h-16",xl:"w-20 h-20"}[r]," flex-shrink-0"),children:(0,Ks.jsx)("img",{src:"/logo-campus-finance.png",alt:"AB CAMPUS FINANCE Logo",className:"w-full h-full object-contain"})}),s&&(0,Ks.jsxs)("div",{className:"flex flex-col",children:[(0,Ks.jsx)(tp,{text:"AB CAMPUS FINANCE",delay:150,className:"font-semibold text-secondary-900 font-montserrat ".concat({sm:"text-xs",md:"text-sm",lg:"text-base",xl:"text-lg"}[r]),animateBy:"letters",direction:"top",onAnimationComplete:()=>{console.log("[UI] Animation logo termin\xe9e")}}),(0,Ks.jsx)("p",{className:"text-xs text-neutral-600 font-montserrat",children:"Votre succ\xe8s, notre mission"})]})]})},sp=en("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),np=en("Wifi",[["path",{d:"M5 13a10 10 0 0 1 14 0",key:"6v8j51"}],["path",{d:"M8.5 16.5a5 5 0 0 1 7 0",key:"sej527"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["line",{x1:"12",x2:"12.01",y1:"20",y2:"20",key:"of4bc4"}]]),ap=en("WifiOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M8.5 16.5a5 5 0 0 1 7 0",key:"sej527"}],["path",{d:"M2 8.82a15 15 0 0 1 4.17-2.65",key:"11utq1"}],["path",{d:"M10.66 5c4.01-.36 8.14.9 11.34 3.76",key:"hxefdu"}],["path",{d:"M16.85 11.25a10 10 0 0 1 2.22 1.68",key:"q734kn"}],["path",{d:"M5 13a10 10 0 0 1 5.24-2.76",key:"piq4yl"}],["line",{x1:"12",x2:"12.01",y1:"20",y2:"20",key:"of4bc4"}]]),ip=!0,op="/serviceWorker.js",lp={scope:"/",updateViaCache:"none"};function cp(e){const t=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),r=window.atob(t);return Uint8Array.from([...r].map(e=>e.charCodeAt(0)))}const dp=()=>{const{user:e}=Zs(),[r,s]=(0,t.useState)(!1),[n,a]=(0,t.useState)(!1),[i,o]=(0,t.useState)(null),[l,c]=(0,t.useState)(null),[d,u]=(0,t.useState)(!1);(0,t.useEffect)(()=>{(async()=>{try{const e=await fetch("".concat(Fs,"/api/push/vapid-public-key")),t=await e.json();c(t.publicKey)}catch(e){console.error("Erreur lors de la r\xe9cup\xe9ration de la cl\xe9 VAPID:",e)}})()},[]),(0,t.useEffect)(()=>{(()=>{const e="serviceWorker"in navigator&&"PushManager"in window;s(e)})()},[]),(0,t.useEffect)(()=>{(async()=>{if(console.log("[PUSH HOOK] V\xe9rification et renouvellement de l'abonnement...",{isSupported:r,vapidPublicKey:!!l,user:!!e}),!r||!l)return console.log("[PUSH HOOK] Notifications non support\xe9es ou cl\xe9 VAPID manquante"),void u(!0);if("true"===localStorage.getItem("notification-prompt-declined"))return console.log("[PUSH HOOK] L'utilisateur a d\xe9finitivement refus\xe9 les notifications - pas d'affichage"),void u(!0);try{const e=await navigator.serviceWorker.ready;let t=await e.pushManager.getSubscription();if(console.log("[PUSH HOOK] Subscription existante:",!!t),t)console.log("[PUSH HOOK] Mode production - abonnement consid\xe9r\xe9 comme valide"),o(t),a(!0),u(!0);else{"true"===localStorage.getItem("notification-prompt-declined")?(console.log("[PUSH HOOK] L'utilisateur a refus\xe9 les notifications - pas d'affichage"),u(!0)):(console.log("[PUSH HOOK] Pas d'abonnement - prompt peut s'afficher"),u(!0))}}catch(t){console.error("Erreur lors de la v\xe9rification de l'abonnement:",t),u(!0)}})()},[r,l,e]),(0,t.useEffect)(()=>{const e=async()=>{console.log("[PUSH HOOK] V\xe9rification quotidienne de l'abonnement...");try{const e=await navigator.serviceWorker.ready,t=await e.pushManager.getSubscription();t?(console.log("[PUSH HOOK] \u2705 Abonnement actif"),a(!0),o(t),localStorage.setItem("subscription-active","true"),localStorage.setItem("subscription-last-check",Date.now().toString()),localStorage.removeItem("subscription-inactive")):(console.log("[PUSH HOOK] \u26a0\ufe0f Abonnement inactif ou perdu"),a(!1),o(null),localStorage.setItem("subscription-inactive","true"),localStorage.setItem("subscription-last-check",Date.now().toString()),localStorage.removeItem("notification-prompt-seen"),console.log("[PUSH HOOK] Prompt de notification peut s'afficher - abonnement inactif"))}catch(e){console.error("[PUSH HOOK] Erreur v\xe9rification quotidienne:",e),a(!1),o(null),localStorage.setItem("subscription-inactive","true")}};e();const t=setInterval(e,864e5);return()=>clearInterval(t)},[e]);return{isSupported:r,isSubscribed:n,subscription:i,vapidPublicKey:l,hasAskedPermission:d,subscribeUser:async()=>{if(console.log("[PUSH HOOK] D\xe9but de subscribeUser...",{isSupported:r,vapidPublicKey:!!l,user:!!e,userId:null===e||void 0===e?void 0:e.id}),!r||!l)return console.log("[PUSH HOOK] Notifications push non support\xe9es ou cl\xe9 VAPID manquante"),!1;try{console.log("[PUSH HOOK] Enregistrement du service worker...");const t=await(async()=>{if(!ip)return console.log("[SW_CONFIG] Service Worker d\xe9sactiv\xe9 en d\xe9veloppement"),null;if(!("serviceWorker"in navigator))return console.log("[SW_CONFIG] Service Worker non support\xe9 par ce navigateur"),null;try{console.log("[SW_CONFIG] Enregistrement du Service Worker...");const e=await navigator.serviceWorker.register(op,lp);return console.log("[SW_CONFIG] Service Worker enregistr\xe9 avec succ\xe8s:",e.scope),e.addEventListener("updatefound",()=>{const t=e.installing;t&&t.addEventListener("statechange",()=>{"installed"===t.state&&navigator.serviceWorker.controller&&console.log("[SW_CONFIG] Nouvelle version du Service Worker disponible")})}),e}catch(e){return console.warn("[SW_CONFIG] \xc9chec de l'enregistrement du Service Worker:",e),null}})();t||console.log("[PUSH HOOK] Service worker non disponible, continuation sans..."),console.log("[PUSH HOOK] Demande de permission...");const r=await Notification.requestPermission();if(console.log("[PUSH HOOK] Permission:",r),"granted"!==r)return console.log("[PUSH HOOK] Permission refus\xe9e"),!1;console.log("[PUSH HOOK] V\xe9rification de l'abonnement existant...");const s=await t.pushManager.getSubscription();if(s)return o(s),a(!0),console.log("[PUSH HOOK] \u2705 D\xe9j\xe0 abonn\xe9 aux notifications"),!0;console.log("[PUSH HOOK] Cr\xe9ation d'un nouvel abonnement...");const n=await t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:cp(l)});console.log("[PUSH HOOK] \u2705 Nouvelle subscription cr\xe9\xe9e:",n),console.log("[PUSH HOOK] Envoi au backend...",{url:"".concat(Fs,"/api/save-subscription"),userId:null===e||void 0===e?void 0:e.id});const i=await fetch("".concat(Fs,"/api/save-subscription"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({subscription:n,userId:null===e||void 0===e?void 0:e.id})});if(console.log("[PUSH HOOK] R\xe9ponse du backend:",i.status,i.ok),i.ok)return o(n),a(!0),console.log("[PUSH HOOK] \u2705 Abonnement enregistr\xe9 avec succ\xe8s !"),!0;{const e=await i.text();return console.error("[PUSH HOOK] Erreur lors de l'enregistrement de l'abonnement:",e),!1}}catch(t){return console.error("[PUSH HOOK] Erreur abonnement:",t),!1}},unsubscribeUser:async()=>{if(!i)return!1;try{await navigator.serviceWorker.ready;if(await i.unsubscribe())return o(null),a(!1),console.log("D\xe9sabonnement r\xe9ussi"),!0}catch(e){console.error("Erreur lors du d\xe9sabonnement:",e)}return!1}}},up=e=>{let{notifications:r=[],onNotificationClick:s,className:n="",fixed:a=!1}=e;const[i,o]=(0,t.useState)(!1),l=(0,t.useRef)(null),{unreadCount:c,markAllAsRead:d}=ln(),{pendingRequests:u}=(()=>{const{user:e}=Zs(),[r,s]=(0,t.useState)({total:0,pending:0,approved:0,rejected:0,active:0,completed:0}),[n,a]=(0,t.useState)(0),i=async()=>{if(null!==e&&void 0!==e&&e.id)try{let t=Ms.from("loans").select("status, amount");"admin"!==e.role&&(t=t.eq("user_id",e.id));const{data:r,error:n}=await t;if(n)return void console.error("Erreur lors du chargement des compteurs:",n);const i={total:0,pending:0,approved:0,rejected:0,active:0,completed:0};if(null===r||void 0===r||r.forEach(e=>{i.total++,i[e.status]++}),s(i),"admin"===e.role){const{data:e,error:t}=await Ms.from("loans").select("id").eq("status","pending");!t&&e&&a(e.length)}}catch(t){console.error("Erreur lors du chargement des compteurs:",t)}};return(0,t.useEffect)(()=>{if(null===e||void 0===e||!e.id)return;i();const t=Ms.channel("loan_counters").on("postgres_changes",{event:"*",schema:"public",table:"loans"},e=>{console.log("[COUNTERS] Changement d\xe9tect\xe9:",e),setTimeout(()=>{i()},100)}).subscribe(e=>{console.log("[COUNTERS] Statut de la connexion:",e)});return()=>{t.unsubscribe()}},[null===e||void 0===e?void 0:e.id,null===e||void 0===e?void 0:e.role]),{counters:r,pendingRequests:"admin"!==(null===e||void 0===e?void 0:e.role)?0:n,totalLoans:r.total,getCountByStatus:e=>r[e]||0,getAllCounters:()=>r,refresh:i}})(),{isSupported:m,isSubscribed:h,subscribeUser:p,unsubscribeUser:f}=dp();(0,t.useEffect)(()=>{const e=e=>{l.current&&!l.current.contains(e.target)&&x()};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);const x=()=>{o(!1),c>0&&d()},g=c+u;return(0,Ks.jsxs)("div",{className:"relative ".concat(a?"fixed top-24 right-4 z-[9999] sm:top-4":"z-[9999]"," ").concat(n),ref:l,children:[(0,Ks.jsxs)("button",{onClick:()=>o(!i),className:"relative p-2 bg-white/80 backdrop-blur-sm rounded-full shadow-lg hover:shadow-xl transition-all duration-200 border border-gray-200/50",children:[(0,Ks.jsx)(Ja,{size:20,className:"text-gray-700 w-5 h-5 sm:w-5 sm:h-5"}),g>0&&(0,Ks.jsx)("div",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center font-medium",children:g>99?"99+":g})]}),i&&(0,Ks.jsxs)("div",{className:"absolute right-0 mt-2 w-80 max-w-[calc(100vw-2rem)] sm:w-80 bg-white/95 backdrop-blur-sm rounded-xl shadow-2xl border border-gray-200/50 overflow-hidden",children:[(0,Ks.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-200/50 bg-gradient-to-r from-gray-50/50 to-white/50",children:[(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("h3",{className:"font-semibold text-gray-900",children:"Notifications"}),u>0&&(0,Ks.jsxs)("p",{className:"text-sm text-orange-600 font-medium",children:[u," demande",u>1?"s":""," en attente"]})]}),(0,Ks.jsx)("button",{onClick:x,className:"p-1 rounded-full hover:bg-gray-100 transition-colors duration-200",children:(0,Ks.jsx)(nn,{size:16,className:"text-gray-500"})})]}),(0,Ks.jsx)("div",{className:"max-h-96 overflow-y-auto",children:0===r.length?(0,Ks.jsxs)("div",{className:"p-8 text-center text-gray-500",children:[(0,Ks.jsx)(Ja,{size:48,className:"mx-auto mb-4 text-gray-300"}),(0,Ks.jsx)("p",{className:"text-sm",children:"Aucune notification"}),u>0&&(0,Ks.jsxs)("p",{className:"text-xs text-orange-600 mt-2",children:[u," demande",u>1?"s":""," en attente de validation"]})]}):(0,Ks.jsx)("div",{className:"p-2",children:r.map((e,t)=>(0,Ks.jsx)("div",{onClick:()=>(e=>{null===s||void 0===s||s(e),x()})(e),className:"p-3 rounded-lg cursor-pointer transition-all duration-200 hover:bg-gray-50/80 ".concat(e.read?"bg-white":"bg-blue-50/50 border-l-4 border-blue-400"),children:(0,Ks.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,Ks.jsxs)("div",{className:"flex-shrink-0 mt-1",children:["success"===e.type&&(0,Ks.jsx)(tn,{size:16,className:"text-green-500"}),"error"===e.type&&(0,Ks.jsx)(rn,{size:16,className:"text-red-500"}),"info"===e.type&&(0,Ks.jsx)(sn,{size:16,className:"text-blue-500"}),"warning"===e.type&&(0,Ks.jsx)(sp,{size:16,className:"text-yellow-500"})]}),(0,Ks.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Ks.jsx)("p",{className:"text-sm font-medium text-gray-900 leading-5",children:e.title}),(0,Ks.jsx)("p",{className:"text-sm text-gray-600 leading-5 mt-1",children:e.message}),e.action&&(0,Ks.jsxs)("p",{className:"text-xs text-blue-600 font-medium mt-2",children:[e.action," \u2192"]})]})]})},e.id))})}),(0,Ks.jsxs)("div",{className:"p-3 border-t border-gray-200/50 bg-gray-50/30",children:[m&&(0,Ks.jsx)("div",{className:"mb-3",children:(0,Ks.jsx)("button",{onClick:async()=>{h?await f():await p()},className:"w-full flex items-center justify-center space-x-2 px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200 ".concat(h?"bg-green-100 text-green-700 hover:bg-green-200":"bg-blue-100 text-blue-700 hover:bg-blue-200"),children:h?(0,Ks.jsxs)(Ks.Fragment,{children:[(0,Ks.jsx)(np,{size:16}),(0,Ks.jsx)("span",{children:"Notifications activ\xe9es"})]}):(0,Ks.jsxs)(Ks.Fragment,{children:[(0,Ks.jsx)(ap,{size:16}),(0,Ks.jsx)("span",{children:"Activer les notifications"})]})})}),r.length>0&&(0,Ks.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[(0,Ks.jsxs)("span",{children:[c," non lue",c>1?"s":""]}),u>0&&(0,Ks.jsxs)("span",{className:"text-orange-600 font-medium",children:[u," en attente"]})]})]})]})]})},mp=()=>{const{user:e,logout:r}=Zs(),s=Y(),n=$(),{showInfo:a,notifications:i,markAsRead:o,refreshNotifications:l}=ln(),[c,d]=(0,t.useState)(!1),[u,m]=(0,t.useState)(0);(0,t.useEffect)(()=>{null!==e&&void 0!==e&&e.id&&l(e.id)},[null===e||void 0===e?void 0:e.id,l]),(0,t.useEffect)(()=>{if("admin"===(null===e||void 0===e?void 0:e.role)){const e=()=>{const e=JSON.parse(localStorage.getItem("adminNotifications")||"[]").filter(e=>!e.read&&new Date(e.timestamp)>new Date(Date.now()-3e5));if(e.length>0){m(e.length);const t=e[0];"new_registration"===t.type&&a("Nouvelle inscription : ".concat(t.user.firstName," ").concat(t.user.lastName))}},t=setInterval(e,3e4);return e(),()=>clearInterval(t)}},[null===e||void 0===e?void 0:e.role,a]);const h=async()=>{try{console.log("[HEADER] Tentative de d\xe9connexion..."),await r(),console.log("[HEADER] \u2705 D\xe9connexion r\xe9ussie, redirection vers login"),s("/login")}catch(e){console.error("[HEADER] \u274c Erreur lors de la d\xe9connexion:",e);try{localStorage.removeItem("ab_user_cache")}catch(la){}s("/login")}},p=()=>null!==e&&void 0!==e&&e.firstName&&null!==e&&void 0!==e&&e.lastName?"".concat(e.firstName," ").concat(e.lastName):(null===e||void 0===e?void 0:e.email)||"Utilisateur";return(0,Ks.jsx)("header",{className:"fixed top-0 left-0 right-0 bg-white shadow-soft border-b border-accent-200 w-full z-50",children:(0,Ks.jsxs)("div",{className:"w-full",children:[(0,Ks.jsxs)("div",{className:"flex justify-between items-center py-4 w-full px-4 lg:px-8",children:[(0,Ks.jsx)("button",{onClick:()=>{"admin"===(null===e||void 0===e?void 0:e.role)&&n.pathname.startsWith("/admin")||"admin"===(null===e||void 0===e?void 0:e.role)?s("/admin"):s("/dashboard")},className:"flex items-center space-x-3 hover:opacity-80 transition-opacity duration-200",children:(0,Ks.jsx)(rp,{size:"md"})}),(0,Ks.jsx)("div",{className:"lg:hidden",children:(0,Ks.jsx)(up,{notifications:i,onNotificationClick:e=>{o(e.id),"payment"===e.type?s("/repayment"):"loan"===e.type&&s("/loan-history")}})}),(0,Ks.jsxs)("nav",{className:"hidden lg:flex items-center space-x-6",children:[(0,Ks.jsx)("a",{href:"/dashboard",className:"text-neutral-600 hover:text-secondary-900 font-montserrat transition-colors duration-200",children:"Accueil"}),"admin"===(null===e||void 0===e?void 0:e.role)?(0,Ks.jsxs)(Ks.Fragment,{children:[(0,Ks.jsx)("a",{href:"/admin/loan-requests",className:"text-neutral-600 hover:text-secondary-900 font-montserrat transition-colors duration-200",children:"Demandes de pr\xeat"}),(0,Ks.jsx)("a",{href:"/admin/user-management",className:"text-neutral-600 hover:text-secondary-900 font-montserrat transition-colors duration-200",children:"Gestion utilisateur"}),(0,Ks.jsx)("a",{href:"/admin/analytics",className:"text-neutral-600 hover:text-secondary-900 font-montserrat transition-colors duration-200",children:"Analytiques"})]}):(0,Ks.jsxs)(Ks.Fragment,{children:[(0,Ks.jsx)("a",{href:"/loan-request",className:"text-neutral-600 hover:text-secondary-900 font-montserrat transition-colors duration-200",children:"Demander un pr\xeat"}),(0,Ks.jsx)("a",{href:"/loan-history",className:"text-neutral-600 hover:text-secondary-900 font-montserrat transition-colors duration-200",children:"Historique"}),(0,Ks.jsx)("a",{href:"/repayment",className:"text-neutral-600 hover:text-secondary-900 font-montserrat transition-colors duration-200",children:"Remboursement"})]})]}),(0,Ks.jsxs)("div",{className:"hidden lg:flex items-center space-x-4",children:[(0,Ks.jsx)(up,{notifications:i,onNotificationClick:e=>{o(e.id),"payment"===e.type?s("/repayment"):"loan"===e.type&&s("/loan-history")}}),"admin"===(null===e||void 0===e?void 0:e.role)&&u>0&&(0,Ks.jsxs)("button",{className:"relative p-2 text-neutral-400 hover:text-neutral-600 transition-colors duration-200",children:[(0,Ks.jsx)(Ja,{size:20}),(0,Ks.jsx)("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:u})]}),(0,Ks.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Ks.jsx)("div",{className:"w-8 h-8 bg-primary-100 rounded-full flex items-center justify-center",children:(0,Ks.jsx)(Za,{size:16,className:"text-primary-600"})}),(0,Ks.jsxs)("div",{className:"flex flex-col",children:[(0,Ks.jsx)("span",{className:"text-sm font-medium text-secondary-900 font-montserrat",children:p()}),(0,Ks.jsx)("span",{className:"text-xs text-neutral-600 font-montserrat",children:"admin"===(null===e||void 0===e?void 0:e.role)?"Administrateur":"Client AB CAMPUS FINANCE"})]}),(0,Ks.jsx)("button",{onClick:h,className:"p-2 text-neutral-400 hover:text-neutral-600 transition-colors duration-200",children:(0,Ks.jsx)($a,{size:20})})]})]}),(0,Ks.jsx)("button",{onClick:()=>d(!c),className:"lg:hidden relative p-3 rounded-xl bg-white/80 backdrop-blur-sm border border-gray-200/50 hover:bg-white/90 transition-all duration-200 shadow-sm hover:shadow-md",children:(0,Ks.jsxs)("div",{className:"flex flex-col space-y-1.5",children:[(0,Ks.jsx)("span",{className:"w-6 h-0.5 bg-gray-700 rounded-full"}),(0,Ks.jsx)("span",{className:"w-6 h-0.5 bg-gray-700 rounded-full"}),(0,Ks.jsx)("span",{className:"w-6 h-0.5 bg-gray-700 rounded-full"})]})})]}),c&&(0,Ks.jsxs)("div",{className:"lg:hidden border-t border-accent-200 py-4 w-full overflow-hidden",children:[(0,Ks.jsx)("div",{className:"px-4 mb-4",children:(0,Ks.jsx)("h3",{className:"text-lg font-semibold text-secondary-900 font-montserrat mb-4",children:"Nous contacter"})}),(0,Ks.jsx)("div",{className:"px-4",children:(0,Ks.jsxs)("div",{className:"space-y-2",children:[(0,Ks.jsxs)("a",{href:"https://wa.me/22953463606",target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-3 px-4 py-3 rounded-xl hover:bg-green-50 transition-all duration-200 group",onClick:()=>d(!1),children:[(0,Ks.jsx)("div",{className:"w-8 h-8 bg-green-500 rounded-full flex items-center justify-center flex-shrink-0",children:(0,Ks.jsx)("svg",{className:"w-4 h-4 text-white",fill:"currentColor",viewBox:"0 0 24 24",children:(0,Ks.jsx)("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893A11.821 11.821 0 0020.885 3.488"})})}),(0,Ks.jsxs)("div",{className:"flex-1",children:[(0,Ks.jsx)("p",{className:"text-sm font-medium text-secondary-900 font-montserrat group-hover:text-green-600 transition-colors",children:"WhatsApp"}),(0,Ks.jsx)("p",{className:"text-xs text-neutral-600 font-montserrat",children:"+229 53 46 36 06"})]}),(0,Ks.jsx)(Qa,{size:16,className:"text-neutral-400 group-hover:text-green-600 transition-colors"})]}),(0,Ks.jsxs)("a",{href:"mailto:abpret51@gmail.com",className:"flex items-center space-x-3 px-4 py-3 rounded-xl hover:bg-blue-50 transition-all duration-200 group",onClick:()=>d(!1),children:[(0,Ks.jsx)("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center flex-shrink-0",children:(0,Ks.jsx)("svg",{className:"w-4 h-4 text-white",fill:"currentColor",viewBox:"0 0 24 24",children:(0,Ks.jsx)("path",{d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"})})}),(0,Ks.jsxs)("div",{className:"flex-1",children:[(0,Ks.jsx)("p",{className:"text-sm font-medium text-secondary-900 font-montserrat group-hover:text-blue-600 transition-colors",children:"Email"}),(0,Ks.jsx)("p",{className:"text-xs text-neutral-600 font-montserrat",children:"abpret51@gmail.com"})]}),(0,Ks.jsx)(Qa,{size:16,className:"text-neutral-400 group-hover:text-blue-600 transition-colors"})]}),(0,Ks.jsxs)("a",{href:"https://www.facebook.com/abpret.2024",target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-3 px-4 py-3 rounded-xl hover:bg-blue-50 transition-all duration-200 group",onClick:()=>d(!1),children:[(0,Ks.jsx)("div",{className:"w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center flex-shrink-0",children:(0,Ks.jsx)("svg",{className:"w-4 h-4 text-white",fill:"currentColor",viewBox:"0 0 24 24",children:(0,Ks.jsx)("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})})}),(0,Ks.jsxs)("div",{className:"flex-1",children:[(0,Ks.jsx)("p",{className:"text-sm font-medium text-secondary-900 font-montserrat group-hover:text-blue-600 transition-colors",children:"Facebook"}),(0,Ks.jsx)("p",{className:"text-xs text-neutral-600 font-montserrat",children:"AB Campus Finance"})]}),(0,Ks.jsx)(Qa,{size:16,className:"text-neutral-400 group-hover:text-blue-600 transition-colors"})]})]})}),(0,Ks.jsx)("div",{className:"mt-6 pt-6 border-t border-accent-200",children:(0,Ks.jsxs)("div",{className:"flex items-center justify-between px-4",children:[(0,Ks.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Ks.jsx)("div",{className:"w-8 h-8 bg-primary-100 rounded-full flex items-center justify-center",children:(0,Ks.jsx)(Za,{size:16,className:"text-primary-600"})}),(0,Ks.jsxs)("div",{className:"flex flex-col",children:[(0,Ks.jsx)("span",{className:"text-sm font-medium text-secondary-900 font-montserrat",children:p()}),(0,Ks.jsx)("span",{className:"text-xs text-neutral-600 font-montserrat",children:"admin"===(null===e||void 0===e?void 0:e.role)?"Administrateur":"Client"})]})]}),(0,Ks.jsx)("button",{onClick:h,className:"p-2 text-neutral-400 hover:text-neutral-600 transition-colors duration-200",children:(0,Ks.jsx)($a,{size:20})})]})})]})]})})},hp=en("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]),pp=en("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]),fp=e=>{let{size:t=16,className:r=""}=e;return(0,Ks.jsx)("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"currentColor",className:r,children:(0,Ks.jsx)("path",{d:"M12.031 6.172c-3.181 0-5.767 2.586-5.768 5.766-.001 1.298.38 2.27 1.019 3.287l-.582 2.128 2.182-.573c.978.58 1.911.928 3.145.929 3.178 0 5.767-2.587 5.768-5.766.001-3.187-2.575-5.771-5.764-5.771zm3.392 8.244c-.144.405-.837.774-1.17.824-.299.045-.677.063-1.092-.069-.252-.08-.575-.187-.988-.365-1.739-.751-2.874-2.502-2.961-2.617-.087-.116-.708-.94-.708-1.793s.448-1.273.607-1.446c.159-.173.346-.217.462-.217l.332.006c.106.005.249-.04.39.298.144.347.491 1.2.534 1.287.043.087.072.188.014.304-.058.116-.087.188-.173.289l-.26.304c-.087.086-.177.18-.076.354.101.174.449.741.964 1.201.662.591 1.221.774 1.394.86s.274.072.376-.043c.101-.116.433-.506.549-.68.116-.173.231-.145.39-.087s1.011.477 1.184.564.289.13.332.202c.045.072.045.419-.1.824zm-3.423-14.416c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm.029 18.88c-1.161 0-2.305-.292-3.318-.844l-3.677.964.984-3.595c-.607-1.052-.927-2.246-.926-3.468.001-3.825 3.113-6.937 6.937-6.937 1.856 0 3.598.723 4.907 2.034 1.31 1.311 2.031 3.054 2.03 4.908-.001 3.825-3.113 6.938-6.937 6.938z"})})},xp=e=>{let{size:t=16,className:r=""}=e;return(0,Ks.jsx)("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"currentColor",className:r,children:(0,Ks.jsx)("path",{d:"M24 5.457v13.909c0 .904-.732 1.636-1.636 1.636h-3.819V11.73L12 16.64l-6.545-4.91v9.273H1.636A1.636 1.636 0 0 1 0 19.366V5.457c0-.904.732-1.636 1.636-1.636h.819L12 10.91l9.545-7.089h.819A1.636 1.636 0 0 1 24 5.457z"})})},gp=()=>{const e=()=>{window.open("mailto:abpret51@gmail.com","_blank")},t=()=>{const e="https://wa.me/".concat("+22953463606","?text=").concat(encodeURIComponent("Bonjour, je souhaite avoir plus d'informations sur vos services de pr\xeat."));window.open(e,"_blank")},r=()=>{window.open("https://www.facebook.com/abpret.2024","_blank")};return(0,Ks.jsx)("footer",{className:"bg-white/80 backdrop-blur-sm border-t border-accent-200",children:(0,Ks.jsxs)("div",{className:"max-w-7xl mx-auto px-4 pt-2 pb-4",children:[(0,Ks.jsxs)("div",{className:"lg:hidden",children:[(0,Ks.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Ks.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Ks.jsx)("div",{className:"w-8 h-8 bg-primary-100 rounded-full flex items-center justify-center",children:(0,Ks.jsx)("span",{className:"text-primary-600 font-bold text-sm",children:"AB"})}),(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("p",{className:"text-xs font-medium text-secondary-900 font-montserrat",children:"AB CAMPUS FINANCE"}),(0,Ks.jsx)("p",{className:"text-xs text-neutral-600 font-montserrat",children:"Cotonou, B\xe9nin"})]})]}),(0,Ks.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Ks.jsx)("button",{onClick:e,className:"p-2 bg-red-100 rounded-full hover:bg-red-200 transition-colors duration-200",title:"Envoyer un email",children:(0,Ks.jsx)(xp,{size:14,className:"text-red-600"})}),(0,Ks.jsx)("button",{onClick:t,className:"p-2 bg-green-100 rounded-full hover:bg-green-200 transition-colors duration-200",title:"Contacter sur WhatsApp",children:(0,Ks.jsx)(fp,{size:14,className:"text-green-600"})}),(0,Ks.jsx)("button",{onClick:r,className:"p-2 bg-blue-100 rounded-full hover:bg-blue-200 transition-colors duration-200",title:"Suivre sur Facebook",children:(0,Ks.jsx)(hp,{size:14,className:"text-blue-600"})})]})]}),(0,Ks.jsx)("div",{className:"mt-3 pt-3 border-t border-accent-200",children:(0,Ks.jsxs)("div",{className:"flex items-center justify-between text-xs text-neutral-600 font-montserrat",children:[(0,Ks.jsx)("span",{children:"\xa9 2025 AB CAMPUS FINANCE"}),(0,Ks.jsx)("span",{className:"text-primary-600 font-semibold",children:"Made in B\xe9nin \ud83c\udde7\ud83c\uddef"})]})})]}),(0,Ks.jsx)("div",{className:"hidden lg:block",children:(0,Ks.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Ks.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,Ks.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Ks.jsx)("div",{className:"w-10 h-10 bg-primary-100 rounded-full flex items-center justify-center",children:(0,Ks.jsx)("span",{className:"text-primary-600 font-bold",children:"AB"})}),(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("p",{className:"font-semibold text-secondary-900 font-montserrat",children:"AB CAMPUS FINANCE"}),(0,Ks.jsx)("p",{className:"text-sm text-neutral-600 font-montserrat",children:"Votre succ\xe8s, notre mission"})]})]}),(0,Ks.jsxs)("div",{className:"flex items-center space-x-4 text-sm",children:[(0,Ks.jsxs)("button",{onClick:e,className:"flex items-center space-x-2 text-neutral-600 hover:text-red-600 transition-colors duration-200 font-montserrat",children:[(0,Ks.jsx)(xp,{size:16}),(0,Ks.jsx)("span",{children:"abpret51@gmail.com"}),(0,Ks.jsx)(pp,{size:12})]}),(0,Ks.jsxs)("button",{onClick:t,className:"flex items-center space-x-2 text-neutral-600 hover:text-green-600 transition-colors duration-200 font-montserrat",children:[(0,Ks.jsx)(fp,{size:16}),(0,Ks.jsx)("span",{children:"+229 53463606"}),(0,Ks.jsx)(pp,{size:12})]}),(0,Ks.jsxs)("button",{onClick:r,className:"flex items-center space-x-2 text-neutral-600 hover:text-blue-600 transition-colors duration-200 font-montserrat",children:[(0,Ks.jsx)(hp,{size:16}),(0,Ks.jsx)("span",{children:"Suivre sur Facebook"}),(0,Ks.jsx)(pp,{size:12})]})]})]}),(0,Ks.jsxs)("div",{className:"text-sm text-neutral-600 font-montserrat",children:["\xa9 2025 AB CAMPUS FINANCE. Tous droits r\xe9serv\xe9s. ",(0,Ks.jsx)("span",{className:"text-primary-600 font-semibold ml-2",children:"Made in B\xe9nin \ud83c\udde7\ud83c\uddef"})]})]})})]})})},vp=e=>{let{items:r,panelHeight:s=68,baseItemSize:n=50,magnification:a=70,className:i=""}=e;const[o,l]=(0,t.useState)(null),c=Y(),d=$();return(0,Ks.jsxs)(ep.div,{className:"fixed bottom-4 left-4 right-4 z-50 ".concat(i),initial:{y:0,opacity:1},animate:{y:0,opacity:1},transition:{type:"spring",stiffness:300,damping:30,duration:.3},children:[(0,Ks.jsx)("div",{className:"absolute inset-0 bg-white border border-accent-200 rounded-3xl shadow-2xl"}),(0,Ks.jsx)("div",{className:"relative flex items-center justify-center px-6 py-3",style:{height:s},children:(0,Ks.jsx)("div",{className:"flex items-center space-x-3",children:r.map((e,t)=>{const r=o===t,s=d.pathname===e.path,i=r?n+a:n;return(0,Ks.jsxs)(ep.div,{className:"relative",onHoverStart:()=>l(t),onHoverEnd:()=>l(null),onClick:()=>(e=>{e.path&&e.path!==d.pathname&&c(e.path)})(e),whileTap:{scale:.92},transition:{type:"spring",stiffness:400,damping:17},children:[(0,Ks.jsxs)(ep.div,{className:"\n                    flex flex-col items-center justify-center rounded-2xl cursor-pointer\n                    ".concat(s?"bg-primary-100 shadow-lg":r?"bg-accent-100 shadow-lg":"bg-transparent hover:bg-accent-50","\n                    transition-all duration-300 ease-out\n                  "),style:{width:i,height:i,minWidth:i,minHeight:i},animate:{scale:r?1.15:1,y:r?-12:0},transition:{type:"spring",stiffness:400,damping:17},children:[(0,Ks.jsx)(ep.div,{className:"\n                      transition-colors duration-200\n                      ".concat(s||r?"text-primary-600":"text-secondary-600","\n                    "),animate:{scale:r?1.1:1},transition:{duration:.2},children:e.icon}),(0,Ks.jsx)(ep.span,{className:"text-xs font-medium mt-1 transition-colors duration-200 ".concat(s||r?"text-primary-600":"text-secondary-600"),style:{fontSize:"10px"},animate:{scale:r?1.05:1},transition:{duration:.2},children:e.label})]}),r&&(0,Ks.jsx)(ep.div,{className:"absolute inset-0 rounded-2xl bg-primary-200/40 blur-2xl -z-10",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1.3},exit:{opacity:0,scale:.8},transition:{duration:.3}})]},t)})})}),(0,Ks.jsx)("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 w-32 h-1 bg-gradient-to-r from-transparent via-primary-200/50 to-transparent rounded-full"})]})},bp=en("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),yp=en("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),jp=en("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),wp=en("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),Np=en("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Sp=en("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),kp=en("Grid",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["line",{x1:"3",x2:"21",y1:"9",y2:"9",key:"1vqk6q"}],["line",{x1:"3",x2:"21",y1:"15",y2:"15",key:"o2sbyz"}],["line",{x1:"9",x2:"9",y1:"3",y2:"21",key:"13tij5"}],["line",{x1:"15",x2:"15",y1:"3",y2:"21",key:"1hpv9i"}]]),_p=en("Wallet",[["path",{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4",key:"195gfw"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h16v-5",key:"195n9w"}],["path",{d:"M18 12a2 2 0 0 0 0 4h4v-4Z",key:"vllfpd"}]]),Ep=(0,t.createContext)(),Cp=e=>{let{children:t}=e;const{user:r}=Zs(),s="admin"===(null===r||void 0===r?void 0:r.role)?[{icon:(0,Ks.jsx)(bp,{size:20}),label:"Accueil",path:"/admin"},{icon:(0,Ks.jsx)(yp,{size:20}),label:"Demandes",path:"/admin/loan-requests"},{icon:(0,Ks.jsx)(jp,{size:20}),label:"Menu",path:"/admin/menu"},{icon:(0,Ks.jsx)(wp,{size:20}),label:"Analytics",path:"/admin/analytics"},{icon:(0,Ks.jsx)(Np,{size:20}),label:"Param\xe8tres",path:"/admin/settings"}]:[{icon:(0,Ks.jsx)(bp,{size:20}),label:"Accueil",path:"/dashboard"},{icon:(0,Ks.jsx)(Sp,{size:20}),label:"Demandes",path:"/loan-request"},{icon:(0,Ks.jsx)(kp,{size:20}),label:"Menu",path:"/menu"},{icon:(0,Ks.jsx)(_p,{size:20}),label:"Rembourser",path:"/repayment"},{icon:(0,Ks.jsx)(Za,{size:20}),label:"Profil",path:"/profile"}];return(0,Ks.jsxs)(Ep.Provider,{value:{dockItems:s},children:[t,(0,Ks.jsx)(vp,{items:s,panelHeight:80,baseItemSize:60,magnification:80})]})},Pp=e=>{let{children:t}=e;return(0,Ks.jsx)(Cp,{children:(0,Ks.jsxs)("div",{className:"bg-gray-50 w-full overflow-x-hidden",children:[(0,Ks.jsx)(mp,{}),(0,Ks.jsx)("main",{className:"w-full overflow-x-hidden pt-20",children:t}),(0,Ks.jsx)(gp,{})]})})};function Ap(e,t){if("function"===typeof e)return e(t);null!==e&&void 0!==e&&(e.current=t)}function Tp(){for(var e=arguments.length,r=new Array(e),s=0;s<e;s++)r[s]=arguments[s];return t.useCallback(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return e=>{let r=!1;const s=t.map(t=>{const s=Ap(t,e);return r||"function"!==typeof s||(r=!0),s});if(r)return()=>{for(let e=0;e<s.length;e++){const r=s[e];"function"===typeof r?r():Ap(t[e],null)}}}}(...r),r)}class Ip extends t.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const e=t.offsetParent,r=Dh(e)&&e.offsetWidth||0,s=this.props.sizeRef.current;s.height=t.offsetHeight||0,s.width=t.offsetWidth||0,s.top=t.offsetTop,s.left=t.offsetLeft,s.right=r-s.width-s.left}return null}componentDidUpdate(){}render(){return this.props.children}}function Rp(e){let{children:r,isPresent:s,anchorX:n,root:a}=e;const i=(0,t.useId)(),o=(0,t.useRef)(null),l=(0,t.useRef)({width:0,height:0,top:0,left:0,right:0}),{nonce:c}=(0,t.useContext)(Ql),d=Tp(o,null===r||void 0===r?void 0:r.ref);return(0,t.useInsertionEffect)(()=>{const{width:e,height:t,top:r,left:d,right:u}=l.current;if(s||!o.current||!e||!t)return;const m="left"===n?"left: ".concat(d):"right: ".concat(u);o.current.dataset.motionPopId=i;const h=document.createElement("style");c&&(h.nonce=c);const p=null!==a&&void 0!==a?a:document.head;return p.appendChild(h),h.sheet&&h.sheet.insertRule('\n          [data-motion-pop-id="'.concat(i,'"] {\n            position: absolute !important;\n            width: ').concat(e,"px !important;\n            height: ").concat(t,"px !important;\n            ").concat(m,"px !important;\n            top: ").concat(r,"px !important;\n          }\n        ")),()=>{p.contains(h)&&p.removeChild(h)}},[s]),(0,Ks.jsx)(Ip,{isPresent:s,childRef:o,sizeRef:l,children:t.cloneElement(r,{ref:d})})}const Op=e=>{let{children:r,initial:s,isPresent:n,onExitComplete:a,custom:i,presenceAffectsLayout:o,mode:l,anchorX:c,root:d}=e;const u=hc(Lp),m=(0,t.useId)();let h=!0,p=(0,t.useMemo)(()=>(h=!1,{id:m,initial:s,isPresent:n,custom:i,onExitComplete:e=>{u.set(e,!0);for(const t of u.values())if(!t)return;a&&a()},register:e=>(u.set(e,!1),()=>u.delete(e))}),[n,u,a]);return o&&h&&(p=ze({},p)),(0,t.useMemo)(()=>{u.forEach((e,t)=>u.set(t,!1))},[n]),t.useEffect(()=>{!n&&!u.size&&a&&a()},[n]),"popLayout"===l&&(r=(0,Ks.jsx)(Rp,{isPresent:n,anchorX:c,root:d,children:r})),(0,Ks.jsx)(mc.Provider,{value:p,children:r})};function Lp(){return new Map}const Dp=e=>e.key||"";function zp(e){const r=[];return t.Children.forEach(e,e=>{(0,t.isValidElement)(e)&&r.push(e)}),r}const Mp=e=>{let{children:r,custom:s,initial:n=!0,onExitComplete:a,presenceAffectsLayout:i=!0,mode:o="sync",propagate:l=!1,anchorX:c="left",root:d}=e;const[u,m]=gm(l),h=(0,t.useMemo)(()=>zp(r),[r]),p=l&&!u?[]:h.map(Dp),f=(0,t.useRef)(!0),x=(0,t.useRef)(h),g=hc(()=>new Map),[v,b]=(0,t.useState)(h),[y,j]=(0,t.useState)(h);kc(()=>{f.current=!1,x.current=h;for(let e=0;e<y.length;e++){const t=Dp(y[e]);p.includes(t)?g.delete(t):!0!==g.get(t)&&g.set(t,!1)}},[y,p.length,p.join("-")]);const w=[];if(h!==v){let e=[...h];for(let t=0;t<y.length;t++){const r=y[t],s=Dp(r);p.includes(s)||(e.splice(t,0,r),w.push(r))}return"wait"===o&&w.length&&(e=w),j(zp(e)),b(h),null}const{forceRender:N}=(0,t.useContext)(Zl);return(0,Ks.jsx)(Ks.Fragment,{children:y.map(e=>{const t=Dp(e),r=!(l&&!u)&&(h===y||p.includes(t));return(0,Ks.jsx)(Op,{isPresent:r,initial:!(f.current&&!n)&&void 0,custom:s,presenceAffectsLayout:i,mode:o,root:d,onExitComplete:r?void 0:()=>{if(!g.has(t))return;g.set(t,!0);let e=!0;g.forEach(t=>{t||(e=!1)}),e&&(null===N||void 0===N||N(),j(x.current),l&&(null===m||void 0===m||m()),a&&a())},anchorX:c,children:e},t)})})},Fp=()=>{const[e,r]=(0,t.useState)(!1),[s,n]=(0,t.useState)(!1),{isSupported:a,isSubscribed:i,hasAskedPermission:o,subscribeUser:l}=dp();console.log("[PUSH PROMPT] Composant rendu"),(0,t.useEffect)(()=>{if("true"===localStorage.getItem("notification-prompt-declined"))return void console.log("[PUSH PROMPT] L'utilisateur a d\xe9finitivement refus\xe9 les notifications - pas d'affichage");if(i)return void console.log("[PUSH PROMPT] L'utilisateur est d\xe9j\xe0 abonn\xe9 - pas d'affichage");if("true"!==localStorage.getItem("subscription-inactive"))return void console.log("[PUSH PROMPT] L'abonnement n'est pas marqu\xe9 comme inactif - pas d'affichage");if("true"===localStorage.getItem("notification-prompt-seen")){const e=localStorage.getItem("notification-prompt-last-seen");if(e){const t=(Date.now()-parseInt(e))/36e5;if(t<24)return void console.log("[PUSH PROMPT] L'utilisateur a vu le prompt r\xe9cemment (il y a",Math.round(t),"heures) - pas d'affichage")}}if(console.log("[PUSH PROMPT] \xc9tats:",{isSupported:a,hasAskedPermission:o,isSubscribed:i,permission:Notification.permission}),a&&o&&!i&&"denied"!==Notification.permission){console.log("[PUSH PROMPT] \u2705 Affichage du prompt dans 3 secondes...");const e=setTimeout(()=>{console.log("[PUSH PROMPT] \ud83c\udfaf Affichage du prompt maintenant !"),r(!0)},3e3);return()=>clearTimeout(e)}console.log("[PUSH PROMPT] Conditions non remplies pour afficher le prompt:",{isSupported:a,hasAskedPermission:o,isSubscribed:i,permission:Notification.permission})},[a,o,i]);return e?(0,Ks.jsx)(Mp,{children:(0,Ks.jsx)(ep.div,{initial:{opacity:0,y:-50,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-50,scale:.9},transition:{duration:.3,ease:"easeOut"},className:"fixed top-4 right-4 z-[10000] max-w-sm",children:(0,Ks.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl border border-gray-200/50 p-4 backdrop-blur-sm",children:[(0,Ks.jsxs)("div",{className:"flex items-start space-x-3 mb-3",children:[(0,Ks.jsx)("div",{className:"flex-shrink-0",children:(0,Ks.jsx)("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:(0,Ks.jsx)(Ja,{size:20,className:"text-blue-600"})})}),(0,Ks.jsxs)("div",{className:"flex-1",children:[(0,Ks.jsx)("h3",{className:"font-semibold text-gray-900 text-sm",children:"Notifications requises"}),(0,Ks.jsx)("p",{className:"text-xs text-gray-600 mt-1",children:"Activez les notifications pour recevoir les alertes importantes sur les nouveaut\xe9s et avantages"})]})]}),(0,Ks.jsx)("div",{className:"flex space-x-2",children:(0,Ks.jsx)("button",{onClick:async()=>{console.log("[PUSH PROMPT] D\xe9but de l'activation des notifications..."),n(!0);try{const e=await l();console.log("[PUSH PROMPT] R\xe9sultat de l'abonnement:",e),localStorage.setItem("notification-prompt-seen","true"),localStorage.setItem("notification-prompt-last-seen",Date.now().toString()),console.log("[PUSH PROMPT] Prompt marqu\xe9 comme vu dans localStorage"),e?(console.log("[PUSH PROMPT] Abonnement r\xe9ussi, fermeture du prompt"),localStorage.setItem("subscription-active","true"),localStorage.removeItem("subscription-inactive"),r(!1)):(console.log("[PUSH PROMPT] \xc9chec de l'abonnement, fermeture du prompt quand m\xeame"),r(!1))}catch(e){console.error("[PUSH PROMPT] Erreur lors de l'abonnement:",e),localStorage.setItem("notification-prompt-seen","true"),localStorage.setItem("notification-prompt-last-seen",Date.now().toString()),r(!1)}finally{n(!1)}},disabled:s,className:"w-full px-4 py-3 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 transition-colors duration-200 disabled:opacity-50 flex items-center justify-center space-x-2",children:s?(0,Ks.jsxs)(Ks.Fragment,{children:[(0,Ks.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),(0,Ks.jsx)("span",{children:"Activation en cours..."})]}):(0,Ks.jsxs)(Ks.Fragment,{children:[(0,Ks.jsx)(tn,{size:16}),(0,Ks.jsx)("span",{children:"Activer les notifications maintenant"})]})})}),(0,Ks.jsx)("div",{className:"mt-3 pt-3 border-t border-gray-100",children:(0,Ks.jsxs)("div",{className:"flex items-center space-x-2 text-xs text-gray-500",children:[(0,Ks.jsx)(rn,{size:12}),(0,Ks.jsx)("span",{children:"Les notifications sont essentielles pour votre exp\xe9rience utilisateur"})]})})]})})}):null},Up=en("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),Bp=en("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]),Vp=en("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),qp=en("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",key:"3xmgem"}]]),Hp=en("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]),Wp=()=>{const[e,r]=(0,t.useState)(null),[s,n]=(0,t.useState)(!1),[a,i]=(0,t.useState)(!1),[o,l]=(0,t.useState)(!1);(0,t.useEffect)(()=>{const e=localStorage.getItem("pwa-install-prompt-seen"),t=localStorage.getItem("pwa-install-prompt-dismissed");if("true"===localStorage.getItem("pwa-install-accepted"))return console.log("[PWA_INSTALL] App d\xe9j\xe0 accept\xe9e par l'utilisateur"),void i(!0);if("true"===e&&"true"===t)return void console.log("[PWA_INSTALL] Prompt d\xe9j\xe0 rejet\xe9 par l'utilisateur, pas d'affichage");if((window.matchMedia("(display-mode: standalone)").matches||!0===window.navigator.standalone)&&(i(!0),1))return void console.log("[PWA_INSTALL] App d\xe9j\xe0 install\xe9e");const s=e=>{console.log("[PWA_INSTALL] beforeinstallprompt d\xe9clench\xe9"),e.preventDefault();const t=localStorage.getItem("pwa-install-prompt-seen"),s=localStorage.getItem("pwa-install-prompt-dismissed");"true"===localStorage.getItem("pwa-install-accepted")||"true"===t&&"true"===s?console.log("[PWA_INSTALL] Prompt d\xe9j\xe0 g\xe9r\xe9 par l'utilisateur - pas d'affichage"):(r(e),n(!0),setTimeout(()=>{l(!0)},3e3))},a=()=>{console.log("[PWA_INSTALL] App install\xe9e avec succ\xe8s"),i(!0),n(!1),l(!1),r(null),localStorage.setItem("pwa-installed","true"),localStorage.setItem("pwa-install-date",Date.now().toString())};return window.addEventListener("beforeinstallprompt",s),window.addEventListener("appinstalled",a),()=>{window.removeEventListener("beforeinstallprompt",s),window.removeEventListener("appinstalled",a)}},[]);return{isInstallable:s,isInstalled:a,showInstallPrompt:o,canInstall:s&&!a&&null!==e,installApp:async()=>{if(!e)return console.log("[PWA_INSTALL] Pas de prompt d'installation disponible"),!1;try{console.log("[PWA_INSTALL] D\xe9clenchement de l'installation..."),e.prompt();const{outcome:t}=await e.userChoice;return console.log("[PWA_INSTALL] R\xe9sultat de l'installation:",t),"accepted"===t?(console.log("[PWA_INSTALL] \u2705 Installation accept\xe9e"),i(!0),l(!1),localStorage.setItem("pwa-install-accepted","true"),localStorage.setItem("pwa-install-date",Date.now().toString())):(console.log("[PWA_INSTALL] \u274c Installation refus\xe9e"),localStorage.setItem("pwa-install-declined","true"),localStorage.setItem("pwa-install-declined-date",Date.now().toString())),r(null),n(!1),"accepted"===t}catch(t){return console.error("[PWA_INSTALL] Erreur lors de l'installation:",t),!1}},dismissInstallPrompt:()=>{console.log("[PWA_INSTALL] Prompt d'installation ferm\xe9"),l(!1),localStorage.setItem("pwa-install-prompt-seen","true"),localStorage.setItem("pwa-install-prompt-dismissed","true"),console.log("[PWA_INSTALL] Prompt d'installation rejet\xe9 par l'utilisateur")}}},Gp=()=>{const{showInstallPrompt:e,canInstall:t,installApp:r,dismissInstallPrompt:s}=Wp();if(!e||!t)return null;return(0,Ks.jsx)(Mp,{children:(0,Ks.jsx)(ep.div,{initial:{opacity:0,y:50,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:50,scale:.9},transition:{duration:.3,ease:"easeOut"},className:"fixed bottom-4 left-4 right-4 z-50 max-w-sm mx-auto",children:(0,Ks.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl border border-gray-200 overflow-hidden",children:[(0,Ks.jsx)("div",{className:"bg-gradient-to-r from-primary-500 to-secondary-500 p-4 text-white",children:(0,Ks.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Ks.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Ks.jsx)("div",{className:"p-2 bg-white/20 rounded-lg",children:(0,Ks.jsx)(Up,{size:20})}),(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("h3",{className:"font-bold text-lg",children:"Installer l'app"}),(0,Ks.jsx)("p",{className:"text-primary-100 text-sm",children:"Acc\xe8s rapide depuis votre \xe9cran d'accueil"})]})]}),(0,Ks.jsx)("button",{onClick:s,className:"p-1 hover:bg-white/20 rounded-lg transition-colors",children:(0,Ks.jsx)(nn,{size:20})})]})}),(0,Ks.jsxs)("div",{className:"p-4",children:[(0,Ks.jsxs)("div",{className:"space-y-3 mb-4",children:[(0,Ks.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Ks.jsx)("div",{className:"p-2 bg-green-100 rounded-lg",children:(0,Ks.jsx)(Bp,{size:16,className:"text-green-600"})}),(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("p",{className:"font-medium text-gray-900 text-sm",children:"Acc\xe8s instantan\xe9"}),(0,Ks.jsx)("p",{className:"text-gray-500 text-xs",children:"Ouvrez l'app directement depuis votre \xe9cran d'accueil"})]})]}),(0,Ks.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Ks.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,Ks.jsx)(Vp,{size:16,className:"text-blue-600"})}),(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("p",{className:"font-medium text-gray-900 text-sm",children:"Plus rapide"}),(0,Ks.jsx)("p",{className:"text-gray-500 text-xs",children:"Chargement plus rapide et navigation fluide"})]})]}),(0,Ks.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Ks.jsx)("div",{className:"p-2 bg-purple-100 rounded-lg",children:(0,Ks.jsx)(qp,{size:16,className:"text-purple-600"})}),(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("p",{className:"font-medium text-gray-900 text-sm",children:"S\xe9curis\xe9"}),(0,Ks.jsx)("p",{className:"text-gray-500 text-xs",children:"Vos donn\xe9es sont prot\xe9g\xe9es et synchronis\xe9es"})]})]})]}),(0,Ks.jsxs)("div",{className:"flex space-x-3",children:[(0,Ks.jsxs)("button",{onClick:async()=>{await r()&&console.log("[PWA_INSTALL_PROMPT] Installation r\xe9ussie")},className:"flex-1 bg-gradient-to-r from-primary-500 to-secondary-500 text-white font-semibold py-3 px-4 rounded-xl hover:from-primary-600 hover:to-secondary-600 transition-all duration-200 transform hover:scale-105 flex items-center justify-center space-x-2",children:[(0,Ks.jsx)(Up,{size:18}),(0,Ks.jsx)("span",{children:"Installer"})]}),(0,Ks.jsx)("button",{onClick:s,className:"px-4 py-3 text-gray-600 font-medium hover:bg-gray-100 rounded-xl transition-colors",children:"Plus tard"})]}),(0,Ks.jsx)("div",{className:"mt-3 p-3 bg-blue-50 rounded-lg",children:(0,Ks.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,Ks.jsx)(Hp,{size:16,className:"text-blue-600 mt-0.5 flex-shrink-0"}),(0,Ks.jsxs)("p",{className:"text-blue-800 text-xs",children:[(0,Ks.jsx)("strong",{children:"Conseil :"})," Une fois install\xe9e, l'app appara\xeetra sur votre \xe9cran d'accueil comme une application native. Vous pourrez y acc\xe9der m\xeame sans connexion internet !"]})]})})]})]})})})},Kp=en("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),Jp=en("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),Zp=en("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),$p=en("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),Qp=en("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Yp=en("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]),Xp=en("KeyRound",[["path",{d:"M2 18v3c0 .6.4 1 1 1h4v-3h3v-3h2l1.4-1.4a6.5 6.5 0 1 0-4-4Z",key:"167ctg"}],["circle",{cx:"16.5",cy:"7.5",r:".5",key:"1kog09"}]]),ef=en("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),tf=()=>{const[e,r]=(0,t.useState)({identifier:"",password:""}),[s,n]=(0,t.useState)(!1),[a,i]=(0,t.useState)(!1),[o,l]=(0,t.useState)(""),{signIn:c,signInWithPhoneNumber:d}=Zs(),u=Y(),m=e=>{const t=e.replace(/[^0-9]/g,"");return t.length>=8&&t.length<=15},h=t=>{r(ze(ze({},e),{},{[t.target.name]:t.target.value})),l("")};return(0,Ks.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-yellow-50 to-slate-100 flex items-center justify-center p-4",children:(0,Ks.jsxs)("div",{className:"w-full max-w-md",children:[(0,Ks.jsxs)("div",{className:"bg-white rounded-3xl shadow-2xl border border-gray-100 overflow-hidden",children:[(0,Ks.jsxs)("div",{className:"bg-gradient-to-r from-slate-700 to-slate-800 p-8 text-center",children:[(0,Ks.jsx)("div",{className:"w-24 h-24 bg-white rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg p-2",children:(0,Ks.jsx)("img",{src:"/logo-campus-finance.png",alt:"AB Campus Finance",className:"w-full h-full object-contain"})}),(0,Ks.jsx)("h1",{className:"text-3xl font-bold text-white font-montserrat mb-2",children:"Bienvenue"}),(0,Ks.jsx)("p",{className:"text-slate-300 font-montserrat",children:"Connectez-vous \xe0 votre compte"})]}),(0,Ks.jsx)("div",{className:"p-8",children:(0,Ks.jsxs)("form",{onSubmit:async t=>{t.preventDefault(),i(!0),l("");try{const t=e.identifier.trim(),r=m(t);let s;console.log("[LOGIN] Tentative de connexion avec:",{identifier:t,type:r?"t\xe9l\xe9phone":"email"}),s=r?await d(t,e.password):await c(t,e.password),console.log("[LOGIN] R\xe9sultat:",s),s.success?s.user&&"admin"===s.user.role?u("/admin"):u("/dashboard"):l(s.error||"Identifiants incorrects")}catch(r){console.error("[LOGIN] Erreur:",r),l("Erreur de connexion")}finally{i(!1)}},className:"space-y-6",children:[o&&(0,Ks.jsx)("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 rounded-lg",children:(0,Ks.jsx)("p",{className:"text-sm text-red-700 font-medium",children:o})}),(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email ou T\xe9l\xe9phone"}),(0,Ks.jsxs)("div",{className:"relative",children:[m(e.identifier)?(0,Ks.jsx)(Kp,{size:18,className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400"}):(0,Ks.jsx)(Jp,{size:18,className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,Ks.jsx)("input",{type:"text",name:"identifier",value:e.identifier,onChange:h,placeholder:"Entrez votre email ou t\xe9l\xe9phone",required:!0,className:"w-full pl-12 pr-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-yellow-500 focus:border-transparent transition-all"})]})]}),(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Mot de passe"}),(0,Ks.jsxs)("div",{className:"relative",children:[(0,Ks.jsx)(Zp,{size:18,className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,Ks.jsx)("input",{type:s?"text":"password",name:"password",value:e.password,onChange:h,placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",required:!0,className:"w-full pl-12 pr-12 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-yellow-500 focus:border-transparent transition-all"}),(0,Ks.jsx)("button",{type:"button",onClick:()=>n(!s),className:"absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors",children:s?(0,Ks.jsx)($p,{size:18}):(0,Ks.jsx)(Qp,{size:18})})]})]}),(0,Ks.jsxs)("button",{type:"submit",disabled:a,className:"w-full flex items-center justify-center gap-2 py-3 bg-gradient-to-r from-yellow-500 to-yellow-600 hover:from-yellow-600 hover:to-yellow-700 text-slate-900 rounded-xl font-bold transition-all duration-200 shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,Ks.jsx)(Yp,{size:20}),(0,Ks.jsx)("span",{children:a?"Connexion en cours...":"Se connecter"})]}),(0,Ks.jsxs)("div",{className:"space-y-3",children:[(0,Ks.jsx)("div",{className:"text-center",children:(0,Ks.jsxs)(Pe,{to:"/forgot-password",className:"inline-flex items-center gap-2 text-sm text-gray-600 hover:text-yellow-600 font-medium transition-colors",children:[(0,Ks.jsx)(Xp,{size:16}),"Mot de passe oubli\xe9 ?"]})}),(0,Ks.jsxs)("div",{className:"relative",children:[(0,Ks.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,Ks.jsx)("div",{className:"w-full border-t border-gray-200"})}),(0,Ks.jsx)("div",{className:"relative flex justify-center text-sm",children:(0,Ks.jsx)("span",{className:"px-4 bg-white text-gray-500",children:"ou"})})]}),(0,Ks.jsxs)(Pe,{to:"/create-account",className:"w-full flex items-center justify-center gap-2 py-3 bg-slate-50 hover:bg-slate-100 text-slate-700 rounded-xl font-medium transition-all duration-200 border border-slate-200",children:[(0,Ks.jsx)(ef,{size:20}),(0,Ks.jsx)("span",{children:"Cr\xe9er un compte"})]})]})]})})]}),(0,Ks.jsxs)("div",{className:"text-center mt-6",children:[(0,Ks.jsx)("p",{className:"text-sm text-gray-600",children:"\xa9 2025 AB Campus Finance. Tous droits r\xe9serv\xe9s."}),(0,Ks.jsx)("p",{className:"text-sm text-primary-600 font-semibold mt-1",children:"Made in B\xe9nin \ud83c\udde7\ud83c\uddef"})]})]})})},rf=["children","variant","size","disabled","loading","onClick","type","className"],sf=e=>{let{children:t,variant:r="primary",size:s="md",disabled:n=!1,loading:a=!1,onClick:i,type:o="button",className:l=""}=e,c=Qs(e,rf);const d="".concat("font-medium rounded-xl transition-colors duration-200 flex items-center justify-center font-montserrat"," ").concat({primary:"bg-primary-500 text-white hover:bg-primary-600 disabled:bg-primary-300",secondary:"bg-secondary-900 text-white hover:bg-secondary-800 disabled:bg-secondary-300",outline:"border-2 border-primary-500 text-primary-600 hover:bg-primary-50 disabled:border-primary-300",danger:"bg-red-600 text-white hover:bg-red-700 disabled:bg-red-300",accent:"bg-accent-400 text-secondary-900 hover:bg-accent-500 disabled:bg-accent-300"}[r]," ").concat({sm:"px-3 py-2 text-sm",md:"px-6 py-3 text-base",lg:"px-8 py-4 text-lg"}[s]," ").concat(l);return(0,Ks.jsxs)("button",ze(ze({type:o,disabled:n||a,onClick:i,className:d},c),{},{children:[a&&(0,Ks.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",fill:"none",viewBox:"0 0 24 24",children:[(0,Ks.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,Ks.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),t]}))},nf=["label","type","placeholder","value","onChange","error","required","disabled","className","children"],af=e=>{let{label:t,type:r="text",placeholder:s,value:n,onChange:a,error:i,required:o=!1,disabled:l=!1,className:c="",children:d}=e,u=Qs(e,nf);const m="\n    w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-colors duration-200 font-montserrat\n    ".concat(i?"border-red-500":"border-accent-300","\n    ").concat(l?"bg-accent-100 cursor-not-allowed":"bg-white","\n    ").concat(c,"\n  ");return(0,Ks.jsxs)("div",{className:"mb-4",children:[t&&(0,Ks.jsxs)("label",{className:"block text-sm font-medium text-secondary-900 mb-2 font-montserrat",children:[t,o&&(0,Ks.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]}),(()=>{switch(r){case"select":return(0,Ks.jsx)("select",ze(ze({value:n,onChange:a,disabled:l,className:m},u),{},{children:d}));case"textarea":return(0,Ks.jsx)("textarea",ze({placeholder:s,value:n,onChange:a,disabled:l,className:"".concat(m," resize-vertical min-h-[100px]")},u));default:return(0,Ks.jsx)("input",ze({type:r,placeholder:s,value:n,onChange:a,disabled:l,className:m},u))}})(),i&&(0,Ks.jsx)("p",{className:"mt-1 text-sm text-red-500 font-montserrat",children:i})]})},of=["as","className","color","speed","thickness","children"],lf=e=>{let{as:t="button",className:r="",color:s="white",speed:n="6s",thickness:a=1,children:i}=e,o=Qs(e,of);return(0,Ks.jsxs)(t,ze(ze({className:"star-border-container ".concat(r),style:ze({padding:"".concat(a,"px 0")},o.style)},o),{},{children:[(0,Ks.jsx)("div",{className:"border-gradient-bottom",style:{background:"radial-gradient(circle, ".concat(s,", transparent 10%)"),animationDuration:n}}),(0,Ks.jsx)("div",{className:"border-gradient-top",style:{background:"radial-gradient(circle, ".concat(s,", transparent 10%)"),animationDuration:n}}),(0,Ks.jsx)("div",{className:"inner-content",children:i})]}))},cf=en("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),df=en("GraduationCap",[["path",{d:"M22 10v6M2 10l10-5 10 5-10 5z",key:"1ef52a"}],["path",{d:"M6 12v5c3 3 9 3 12 0v-5",key:"1f75yj"}]]),uf=en("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]),mf=en("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),hf=en("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),pf=e=>new Intl.NumberFormat("fr-BJ",{style:"currency",currency:"XOF",minimumFractionDigits:0}).format(e),ff=e=>new Intl.DateTimeFormat("fr-BJ",{year:"numeric",month:"long",day:"numeric"}).format(new Date(e)),xf=e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e),gf=e=>/^(\+229|229)?[0-9]{8}$/.test(e.replace(/\s/g,"")),vf=async function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"user";const s=Date.now(),n="".concat(r,"_identity_").concat(t,"_").concat(s,".").concat(e.name.split(".").pop()),a="identity-cards/".concat(t,"/").concat(n);return await(async(e,t,r)=>{try{console.log("[UPLOAD] D\xe9but upload:",{fileName:e.name,bucket:t,path:r});const s=5242880;if(e.size>s)throw new Error("Le fichier est trop volumineux (max 5MB)");if(!["image/jpeg","image/png","image/jpg"].includes(e.type))throw new Error("Type de fichier non autoris\xe9 (JPG, PNG uniquement)");const{data:n,error:a}=await Ms.storage.from(t).upload(r,e,{cacheControl:"3600",upsert:!1});if(a)throw console.error("[UPLOAD] Erreur upload:",a),a;const{data:i}=Ms.storage.from(t).getPublicUrl(r);return console.log("[UPLOAD] \u2705 Upload r\xe9ussi:",i.publicUrl),{success:!0,url:i.publicUrl,path:r}}catch(s){return console.error("[UPLOAD] \u274c Erreur upload:",s.message),{success:!1,error:s.message}}})(e,"documents",a)},bf=()=>{const e=Y(),r=$(),{basicInfo:s,fromCreateAccount:n}=r.state||{};console.log("[REGISTER] Donn\xe9es re\xe7ues:",{basicInfo:s,fromCreateAccount:n}),console.log("[REGISTER] Location state:",r.state),console.log("[REGISTER] basicInfo.firstName:",null===s||void 0===s?void 0:s.firstName),console.log("[REGISTER] basicInfo.lastName:",null===s||void 0===s?void 0:s.lastName),console.log("[REGISTER] basicInfo.phoneNumber:",null===s||void 0===s?void 0:s.phoneNumber);const[a,i]=(0,t.useState)(5),[o,l]=(0,t.useState)({firstName:"",lastName:"",email:"",phone:"",password:"",confirmPassword:"",address:"",facebookName:"",filiere:"",anneeEtude:"",entite:"",userIdentityCard:null,temoinIdentityCard:null,studentCard:null,temoinName:"",temoinQuartier:"",temoinPhone:"",temoinEmail:"",emergencyName:"",emergencyRelation:"",emergencyPhone:"",emergencyEmail:"",emergencyAddress:""}),[c,d]=(0,t.useState)(!1),[u,m]=(0,t.useState)(!1),[h,p]=(0,t.useState)({}),{showSuccess:f,showError:x}=ln();(0,t.useEffect)(()=>{s&&n&&(console.log("[REGISTER] Pr\xe9-remplissage du formulaire avec:",s),l(e=>ze(ze({},e),{},{firstName:s.firstName||"",lastName:s.lastName||"",email:s.email||"",phone:s.phoneNumber||"",password:s.password||"",confirmPassword:s.confirmPassword||"",address:s.address||"",facebookName:s.facebookName||""})))},[s,n]);const g=[{id:5,title:"Informations personnelles",icon:Za},{id:6,title:"Informations du t\xe9moin",icon:qp},{id:7,title:"Contact d'urgence",icon:Kp},{id:8,title:"Validation",icon:tn}],v=e=>{l(ze(ze({},o),{},{[e.target.name]:e.target.value})),h[e.target.name]&&p(ze(ze({},h),{},{[e.target.name]:""}))},b=(e,t)=>{const r=e.target.files[0];r&&l(ze(ze({},o),{},{[t]:r}))},y=()=>{const e={};switch(a){case 5:o.firstName.trim()||(e.firstName="Le pr\xe9nom est requis"),o.lastName.trim()||(e.lastName="Le nom est requis"),o.address.trim()||(e.address="L'adresse est requise"),o.facebookName.trim()||(e.facebookName="Le nom du profil Facebook est requis"),o.filiere.trim()||(e.filiere="La fili\xe8re est requise"),o.anneeEtude.trim()||(e.anneeEtude="L'ann\xe9e d'\xe9tude est requise"),o.entite.trim()||(e.entite="L'entit\xe9 est requise"),o.email.trim()||(e.email="L'adresse email est requise"),o.email&&!xf(o.email)&&(e.email="Email invalide"),gf(o.phone)||(e.phone="Num\xe9ro de t\xe9l\xe9phone invalide"),o.password.length<6&&(e.password="Le mot de passe doit contenir au moins 6 caract\xe8res"),o.password!==o.confirmPassword&&(e.confirmPassword="Les mots de passe ne correspondent pas"),o.userIdentityCard||(e.userIdentityCard="La photo de votre carte d'identit\xe9 est requise"),o.studentCard||(e.studentCard="La photo de votre carte d'\xe9tudiant est requise");break;case 6:o.temoinName.trim()||(e.temoinName="Le nom du t\xe9moin est requis"),o.temoinQuartier.trim()||(e.temoinQuartier="Le quartier du t\xe9moin est requis"),gf(o.temoinPhone)||(e.temoinPhone="Num\xe9ro de t\xe9l\xe9phone invalide"),xf(o.temoinEmail)||(e.temoinEmail="Email invalide"),o.temoinIdentityCard||(e.temoinIdentityCard="La photo de la carte d'identit\xe9 du t\xe9moin est requise");break;case 7:o.emergencyName.trim()||(e.emergencyName="Le nom du contact d'urgence est requis"),o.emergencyRelation.trim()||(e.emergencyRelation="La relation est requise"),gf(o.emergencyPhone)||(e.emergencyPhone="Num\xe9ro de t\xe9l\xe9phone invalide"),xf(o.emergencyEmail)||(e.emergencyEmail="Email invalide"),o.emergencyAddress.trim()||(e.emergencyAddress="L'adresse est requise")}return p(e),0===Object.keys(e).length},j=()=>{a>5&&i(a-1)};return(0,Ks.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8 relative overflow-hidden",children:[(0,Ks.jsxs)("div",{className:"absolute inset-0 overflow-hidden",children:[(0,Ks.jsx)("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-gradient-to-br from-primary-400/20 to-secondary-400/20 rounded-full blur-3xl"}),(0,Ks.jsx)("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-gradient-to-tr from-accent-400/20 to-primary-400/20 rounded-full blur-3xl"})]}),(0,Ks.jsxs)("div",{className:"max-w-4xl w-full space-y-8 relative z-10",children:[(0,Ks.jsxs)("div",{className:"text-center mb-8 animate-fade-in-up",children:[(0,Ks.jsx)("div",{className:"flex justify-center mb-6",children:(0,Ks.jsx)("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-soft",children:(0,Ks.jsx)(rp,{size:"xl",showText:!0})})}),(0,Ks.jsx)("h1",{className:"text-4xl font-bold text-secondary-900 font-montserrat mb-3 bg-gradient-to-r from-primary-600 to-secondary-600 bg-clip-text text-transparent",children:"Cr\xe9er votre compte \xe9tudiant"}),(0,Ks.jsx)("p",{className:"text-lg text-neutral-600 font-montserrat max-w-2xl mx-auto",children:"Rejoignez la communaut\xe9 AB CAMPUS FINANCE et acc\xe9dez \xe0 nos services de pr\xeat \xe9tudiant"})]}),(0,Ks.jsx)("div",{className:"flex justify-center mb-8",children:(0,Ks.jsx)("div",{className:"flex items-center space-x-4 bg-white/80 backdrop-blur-sm rounded-2xl p-4 shadow-soft",children:g.map((e,t)=>(0,Ks.jsxs)("div",{className:"flex items-center",children:[(0,Ks.jsx)("div",{className:"flex items-center justify-center w-10 h-10 rounded-full border-2 transition-all duration-300 ".concat(a>=e.id?"bg-primary-500 border-primary-500 text-white":"bg-white border-accent-300 text-neutral-400"),children:a>e.id?(0,Ks.jsx)(tn,{size:20,className:"text-white"}):(0,Ks.jsx)(e.icon,{size:20})}),t<g.length-1&&(0,Ks.jsx)("div",{className:"w-8 h-0.5 mx-2 transition-all duration-300 ".concat(a>e.id?"bg-primary-500":"bg-accent-300")})]},e.id))})}),(0,Ks.jsxs)("div",{className:"bg-white/90 backdrop-blur-sm rounded-3xl shadow-2xl border border-white/20 p-8 lg:p-12",children:[(0,Ks.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),y()){m(!0);try{var r,s,n,a;console.log("[REGISTER] Donn\xe9es pour inscription:",{phone:o.phone,firstName:o.firstName,lastName:o.lastName,email:o.email,address:o.address,facebookName:o.facebookName,filiere:o.filiere,anneeEtude:o.anneeEtude,entite:o.entite});const t=await(async(e,t,r)=>{if(!Ms)return console.error("[SUPABASE] Client non initialis\xe9 - configuration manquante"),{success:!1,error:"Configuration Supabase manquante"};try{const s=e.replace(/[^0-9]/g,"");if(s.length<8)throw new Error("Num\xe9ro de t\xe9l\xe9phone invalide");let n;if(console.log("[SUPABASE] userData re\xe7u:",r),console.log("[SUPABASE] Email fourni:",r.email),r.email&&r.email.trim())n=r.email.trim(),console.log("[SUPABASE] \u2705 Utilisation email fourni: ".concat(n));else{const e=Date.now();n="user.".concat(s,".").concat(e,"@gmail.com"),console.log("[SUPABASE] \u26a0\ufe0f Cr\xe9ation email temporaire: ".concat(n))}console.log("[SUPABASE] Cr\xe9ation utilisateur avec email: ".concat(n));const{data:a,error:i}=await Ms.auth.signUp({email:n,password:t,options:{data:{first_name:r.firstName,last_name:r.lastName,phone_number:e,role:"client"}}});if(i)throw console.error("[SUPABASE] Erreur Auth:",i),new Error(Bs(i));const{error:o}=await Ms.from("users").insert([{id:a.user.id,phone_number:e,email:n,first_name:r.firstName,last_name:r.lastName,role:"client",status:"approved"}]);if(o)throw console.error("[SUPABASE] Erreur insertion utilisateur:",o),new Error(Bs(o));return console.log("[SUPABASE] \u2705 Utilisateur cr\xe9\xe9: ".concat(r.firstName," ").concat(r.lastName," (").concat(e,")")),{success:!0,user:a.user}}catch(s){return console.error("[SUPABASE] Erreur lors de l'inscription:",s.message),{success:!1,error:Bs(s)}}})(o.phone,o.password,{firstName:o.firstName,lastName:o.lastName,email:o.email});if(console.log("[REGISTER] R\xe9sultat signUp:",t),!t.success||null===(r=t.user)||void 0===r||!r.id)throw console.error("[REGISTER] Erreur signUp:",t.error),new Error(t.error||"Cr\xe9ation du compte \xe9chou\xe9e");let i=null,l=null,c=null;if(o.userIdentityCard){console.log("[REGISTER] Upload carte d'identit\xe9 utilisateur...");const e=await vf(o.userIdentityCard,t.user.id,"user");e.success?(i=e.url,console.log("[REGISTER] \u2705 Carte d'identit\xe9 utilisateur upload\xe9e")):console.error("[REGISTER] \u274c Erreur upload carte d'identit\xe9 utilisateur:",e.error)}if(o.temoinIdentityCard){console.log("[REGISTER] Upload carte d'identit\xe9 t\xe9moin...");const e=await vf(o.temoinIdentityCard,t.user.id,"temoin");e.success?(l=e.url,console.log("[REGISTER] \u2705 Carte d'identit\xe9 t\xe9moin upload\xe9e")):console.error("[REGISTER] \u274c Erreur upload carte d'identit\xe9 t\xe9moin:",e.error)}if(o.studentCard){console.log("[REGISTER] Upload carte d'\xe9tudiant...");const e=await vf(o.studentCard,t.user.id,"student");e.success?(c=e.url,console.log("[REGISTER] \u2705 Carte d'\xe9tudiant upload\xe9e")):console.error("[REGISTER] \u274c Erreur upload carte d'\xe9tudiant:",e.error)}console.log("[REGISTER] Mise \xe0 jour du profil avec les donn\xe9es:",{address:o.address,filiere:o.filiere,annee_etude:o.anneeEtude,entite:o.entite,facebook_name:o.facebookName});const d=await(async(e,t)=>{try{console.log("[PROFILE] Mise \xe0 jour du profil utilisateur:",e,t);const r={updated_at:(new Date).toISOString()};t.firstName&&(r.first_name=t.firstName),t.lastName&&(r.last_name=t.lastName),t.phone&&(r.phone_number=t.phone),t.email&&(r.email=t.email),t.filiere&&(r.filiere=t.filiere),t.annee_etude&&(r.annee_etude=t.annee_etude),t.entite&&(r.entite=t.entite),t.facebook_name&&(r.facebook_name=t.facebook_name),t.temoin_name&&(r.temoin_name=t.temoin_name),t.temoin_quartier&&(r.temoin_quartier=t.temoin_quartier),t.temoin_phone&&(r.temoin_phone=t.temoin_phone),t.temoin_email&&(r.temoin_email=t.temoin_email),t.emergency_name&&(r.emergency_name=t.emergency_name),t.emergency_relation&&(r.emergency_relation=t.emergency_relation),t.emergency_phone&&(r.emergency_phone=t.emergency_phone),t.emergency_email&&(r.emergency_email=t.emergency_email),t.emergency_address&&(r.emergency_address=t.emergency_address),t.user_identity_card_name&&(r.user_identity_card_name=t.user_identity_card_name),t.temoin_identity_card_name&&(r.temoin_identity_card_name=t.temoin_identity_card_name),t.student_card_name&&(r.student_card_name=t.student_card_name),t.user_identity_card_url&&(r.user_identity_card_url=t.user_identity_card_url),t.temoin_identity_card_url&&(r.temoin_identity_card_url=t.temoin_identity_card_url),t.student_card_url&&(r.student_card_url=t.student_card_url);const{error:s}=await Ms.from("users").update(r).eq("id",e);if(s)throw console.error("[PROFILE] Erreur mise \xe0 jour table users:",s),s;if(t.firstName||t.lastName||t.phone){const e={};t.firstName&&(e.first_name=t.firstName),t.lastName&&(e.last_name=t.lastName),t.phone&&(e.phone_number=t.phone);const{error:r}=await Ms.auth.updateUser({data:e});if(r)throw console.error("[PROFILE] Erreur mise \xe0 jour m\xe9tadonn\xe9es auth:",r),r}return console.log("[PROFILE] \u2705 Profil mis \xe0 jour avec succ\xe8s"),{success:!0}}catch(r){return console.error("[PROFILE] \u274c Erreur lors de la mise \xe0 jour du profil:",r.message),{success:!1,error:r.message}}})(t.user.id,{address:o.address,filiere:o.filiere,annee_etude:o.anneeEtude,entite:o.entite,facebook_name:o.facebookName,temoin_name:o.temoinName,temoin_quartier:o.temoinQuartier,temoin_phone:o.temoinPhone,temoin_email:o.temoinEmail,emergency_name:o.emergencyName,emergency_relation:o.emergencyRelation,emergency_phone:o.emergencyPhone,emergency_email:o.emergencyEmail,emergency_address:o.emergencyAddress,user_identity_card_url:i,temoin_identity_card_url:l,student_card_url:c,user_identity_card_name:(null===(s=o.userIdentityCard)||void 0===s?void 0:s.name)||null,temoin_identity_card_name:(null===(n=o.temoinIdentityCard)||void 0===n?void 0:n.name)||null,student_card_name:(null===(a=o.studentCard)||void 0===a?void 0:a.name)||null});if(console.log("[REGISTER] R\xe9sultat mise \xe0 jour profil:",d),!d.success)throw console.error("[REGISTER] Erreur mise \xe0 jour profil:",d.error),new Error("Erreur mise \xe0 jour profil: ".concat(d.error));f("Inscription compl\xe9t\xe9e ! Votre compte a \xe9t\xe9 cr\xe9\xe9 avec succ\xe8s."),e("/dashboard")}catch(i){console.error("[REGISTER] Erreur d\xe9taill\xe9e lors de l'inscription:",{message:i.message,stack:i.stack,error:i}),p({general:"Erreur lors de l'inscription: ".concat(i.message)}),x("Inscription \xe9chou\xe9e","Une erreur est survenue: ".concat(i.message))}finally{m(!1)}}},className:"space-y-8",children:[h.general&&(0,Ks.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-6 py-4 rounded-2xl font-montserrat animate-fade-in-up",children:h.general}),(()=>{switch(a){case 5:return(0,Ks.jsxs)("div",{className:"space-y-6 animate-fade-in-up",children:[n&&(0,Ks.jsx)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-6",children:(0,Ks.jsxs)("div",{className:"flex items-center",children:[(0,Ks.jsx)(tn,{size:20,className:"text-green-600 mr-3"}),(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("h4",{className:"text-sm font-medium text-green-800",children:"Informations pr\xe9-remplies"}),(0,Ks.jsx)("p",{className:"text-sm text-green-700 mt-1",children:"Vos informations de base ont \xe9t\xe9 automatiquement remplies depuis la cr\xe9ation de votre compte."})]})]})}),(0,Ks.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[(0,Ks.jsx)("div",{className:"w-10 h-10 bg-primary-100 rounded-xl flex items-center justify-center",children:(0,Ks.jsx)(Za,{size:20,className:"text-primary-600"})}),(0,Ks.jsx)("h3",{className:"text-xl font-semibold text-secondary-900 font-montserrat",children:"Informations personnelles"})]}),(0,Ks.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,Ks.jsx)("div",{className:"relative group",children:(0,Ks.jsx)(af,{label:"Pr\xe9nom",type:"text",name:"firstName",value:o.firstName,onChange:v,placeholder:"Votre pr\xe9nom",error:h.firstName,required:!0,readOnly:n,className:"group-hover:shadow-md transition-all duration-300 ".concat(n?"bg-gray-50 cursor-not-allowed":"")})}),(0,Ks.jsx)("div",{className:"relative group",children:(0,Ks.jsx)(af,{label:"Nom",type:"text",name:"lastName",value:o.lastName,onChange:v,placeholder:"Votre nom",error:h.lastName,required:!0,readOnly:n,className:"group-hover:shadow-md transition-all duration-300 ".concat(n?"bg-gray-50 cursor-not-allowed":"")})})]}),(0,Ks.jsx)("div",{className:"relative group",children:(0,Ks.jsx)(af,{label:"Nom du profil Facebook",type:"text",name:"facebookName",value:o.facebookName,onChange:v,placeholder:"Votre nom de profil Facebook",error:h.facebookName,required:!0,readOnly:n,className:"group-hover:shadow-md transition-all duration-300 ".concat(n?"bg-gray-50 cursor-not-allowed":"")})}),(0,Ks.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:(0,Ks.jsxs)("div",{className:"relative group",children:[(0,Ks.jsx)(af,{label:"Adresse",type:"text",name:"address",value:o.address,onChange:v,placeholder:"Votre adresse compl\xe8te",error:h.address,required:!0,readOnly:n,className:"group-hover:shadow-md transition-all duration-300 ".concat(n?"bg-gray-50 cursor-not-allowed":"")}),(0,Ks.jsx)(cf,{size:20,className:"absolute right-4 top-12 text-neutral-400 group-hover:text-primary-500 transition-colors duration-300"})]})}),(0,Ks.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,Ks.jsxs)("div",{className:"relative group",children:[(0,Ks.jsx)(af,{label:"Fili\xe8re",type:"text",name:"filiere",value:o.filiere,onChange:v,placeholder:"Ex: Informatique",error:h.filiere,required:!0,className:"group-hover:shadow-md transition-all duration-300"}),(0,Ks.jsx)(df,{size:20,className:"absolute right-4 top-12 text-neutral-400 group-hover:text-primary-500 transition-colors duration-300"})]}),(0,Ks.jsx)("div",{className:"relative group",children:(0,Ks.jsx)(af,{label:"Ann\xe9e d'\xe9tude",type:"text",name:"anneeEtude",value:o.anneeEtude,onChange:v,placeholder:"Ex: 2\xe8me ann\xe9e",error:h.anneeEtude,required:!0,className:"group-hover:shadow-md transition-all duration-300"})}),(0,Ks.jsxs)("div",{className:"relative group",children:[(0,Ks.jsxs)("select",{name:"entite",value:o.entite,onChange:v,className:"w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-transparent font-montserrat transition-all duration-300 group-hover:shadow-md ".concat(h.entite?"border-red-300":"border-accent-200"),required:!0,children:[(0,Ks.jsx)("option",{value:"",children:"S\xe9lectionner une entit\xe9"}),(0,Ks.jsx)("option",{value:"INSTI",children:"INSTI"}),(0,Ks.jsx)("option",{value:"ENSET",children:"ENSET"})]}),(0,Ks.jsx)(uf,{size:20,className:"absolute right-4 top-12 text-neutral-400 group-hover:text-primary-500 transition-colors duration-300"}),h.entite&&(0,Ks.jsx)("p",{className:"text-red-500 text-sm mt-1 font-montserrat",children:h.entite})]})]}),(0,Ks.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,Ks.jsxs)("div",{className:"relative group",children:[(0,Ks.jsx)(af,{label:"Adresse email (optionnel)",type:"email",name:"email",value:o.email,onChange:v,placeholder:"votre@email.com (optionnel)",error:h.email,className:"group-hover:shadow-md transition-all duration-300"}),(0,Ks.jsx)(Jp,{size:20,className:"absolute right-4 top-12 text-neutral-400 group-hover:text-primary-500 transition-colors duration-300"})]}),(0,Ks.jsxs)("div",{className:"relative group",children:[(0,Ks.jsx)(af,{label:"Num\xe9ro de t\xe9l\xe9phone",type:"tel",name:"phone",value:o.phone,onChange:v,placeholder:"+229 12345678",error:h.phone,required:!0,className:"group-hover:shadow-md transition-all duration-300"}),(0,Ks.jsx)(Kp,{size:20,className:"absolute right-4 top-12 text-neutral-400 group-hover:text-primary-500 transition-colors duration-300"})]})]}),(0,Ks.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,Ks.jsxs)("div",{className:"relative group",children:[(0,Ks.jsx)(af,{label:"Mot de passe",type:c?"text":"password",name:"password",value:o.password,onChange:v,placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",error:h.password,required:!0,className:"group-hover:shadow-md transition-all duration-300"}),(0,Ks.jsx)("button",{type:"button",onClick:()=>d(!c),className:"absolute right-4 top-12 text-neutral-400 hover:text-primary-500 transition-colors duration-300",children:c?(0,Ks.jsx)($p,{size:20}):(0,Ks.jsx)(Qp,{size:20})})]}),(0,Ks.jsxs)("div",{className:"relative group",children:[(0,Ks.jsx)(af,{label:"Confirmer le mot de passe",type:"password",name:"confirmPassword",value:o.confirmPassword,onChange:v,placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",error:h.confirmPassword,required:!0,className:"group-hover:shadow-md transition-all duration-300"}),(0,Ks.jsx)(Zp,{size:20,className:"absolute right-4 top-12 text-neutral-400 group-hover:text-primary-500 transition-colors duration-300"})]})]}),(0,Ks.jsxs)("div",{className:"group",children:[(0,Ks.jsx)("label",{className:"block text-sm font-medium text-secondary-900 font-montserrat mb-3",children:"Photo de votre carte d'identit\xe9 *"}),(0,Ks.jsxs)("div",{className:"relative",children:[(0,Ks.jsx)("input",{type:"file",accept:"image/*",onChange:e=>b(e,"userIdentityCard"),className:"hidden",id:"userIdentityCard",required:!0}),(0,Ks.jsx)("label",{htmlFor:"userIdentityCard",className:"flex items-center justify-center w-full px-6 py-8 border-2 border-dashed border-accent-300 rounded-2xl cursor-pointer hover:border-primary-500 hover:bg-primary-50/50 transition-all duration-300 group-hover:shadow-md",children:(0,Ks.jsxs)("div",{className:"text-center",children:[(0,Ks.jsx)(mf,{size:32,className:"text-neutral-400 group-hover:text-primary-500 transition-colors duration-300 mx-auto mb-2"}),(0,Ks.jsx)("span",{className:"text-neutral-600 font-montserrat block",children:o.userIdentityCard?o.userIdentityCard.name:"Choisir une photo"}),(0,Ks.jsx)("span",{className:"text-sm text-neutral-400 font-montserrat",children:o.userIdentityCard?"Fichier s\xe9lectionn\xe9":"Cliquez pour s\xe9lectionner"})]})})]}),h.userIdentityCard&&(0,Ks.jsx)("p",{className:"text-red-500 text-sm mt-2 font-montserrat",children:h.userIdentityCard})]}),(0,Ks.jsxs)("div",{className:"group",children:[(0,Ks.jsx)("label",{className:"block text-sm font-medium text-secondary-900 font-montserrat mb-3",children:"Photo de votre carte d'\xe9tudiant *"}),(0,Ks.jsxs)("div",{className:"relative",children:[(0,Ks.jsx)("input",{type:"file",accept:"image/*",onChange:e=>b(e,"studentCard"),className:"hidden",id:"studentCard",required:!0}),(0,Ks.jsx)("label",{htmlFor:"studentCard",className:"flex items-center justify-center w-full px-6 py-8 border-2 border-dashed border-accent-300 rounded-2xl cursor-pointer hover:border-primary-500 hover:bg-primary-50/50 transition-all duration-300 group-hover:shadow-md",children:(0,Ks.jsxs)("div",{className:"text-center",children:[(0,Ks.jsx)(mf,{size:32,className:"text-neutral-400 group-hover:text-primary-500 transition-colors duration-300 mx-auto mb-2"}),(0,Ks.jsx)("span",{className:"text-neutral-600 font-montserrat block",children:o.studentCard?o.studentCard.name:"Choisir une photo"}),(0,Ks.jsx)("span",{className:"text-sm text-neutral-400 font-montserrat",children:o.studentCard?"Fichier s\xe9lectionn\xe9":"Cliquez pour s\xe9lectionner"})]})})]}),h.studentCard&&(0,Ks.jsx)("p",{className:"text-red-500 text-sm mt-2 font-montserrat",children:h.studentCard})]})]});case 6:return(0,Ks.jsxs)("div",{className:"space-y-6 animate-fade-in-up",children:[(0,Ks.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[(0,Ks.jsx)("div",{className:"w-10 h-10 bg-secondary-100 rounded-xl flex items-center justify-center",children:(0,Ks.jsx)(qp,{size:20,className:"text-secondary-600"})}),(0,Ks.jsx)("h3",{className:"text-xl font-semibold text-secondary-900 font-montserrat",children:"Informations du t\xe9moin"})]}),(0,Ks.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,Ks.jsx)("div",{className:"relative group",children:(0,Ks.jsx)(af,{label:"Nom complet du t\xe9moin",type:"text",name:"temoinName",value:o.temoinName,onChange:v,placeholder:"Nom et pr\xe9nom du t\xe9moin",error:h.temoinName,required:!0,className:"group-hover:shadow-md transition-all duration-300"})}),(0,Ks.jsx)("div",{className:"relative group",children:(0,Ks.jsx)(af,{label:"Quartier du t\xe9moin",type:"text",name:"temoinQuartier",value:o.temoinQuartier,onChange:v,placeholder:"Ex: Akpakpa, Cotonou",error:h.temoinQuartier,required:!0,className:"group-hover:shadow-md transition-all duration-300"})})]}),(0,Ks.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,Ks.jsxs)("div",{className:"relative group",children:[(0,Ks.jsx)(af,{label:"T\xe9l\xe9phone du t\xe9moin",type:"tel",name:"temoinPhone",value:o.temoinPhone,onChange:v,placeholder:"+229 12345678",error:h.temoinPhone,required:!0,className:"group-hover:shadow-md transition-all duration-300"}),(0,Ks.jsx)(Kp,{size:20,className:"absolute right-4 top-12 text-neutral-400 group-hover:text-primary-500 transition-colors duration-300"})]}),(0,Ks.jsxs)("div",{className:"relative group",children:[(0,Ks.jsx)(af,{label:"Email du t\xe9moin",type:"email",name:"temoinEmail",value:o.temoinEmail,onChange:v,placeholder:"temoins@email.com",error:h.temoinEmail,required:!0,className:"group-hover:shadow-md transition-all duration-300"}),(0,Ks.jsx)(Jp,{size:20,className:"absolute right-4 top-12 text-neutral-400 group-hover:text-primary-500 transition-colors duration-300"})]})]}),(0,Ks.jsxs)("div",{className:"group",children:[(0,Ks.jsx)("label",{className:"block text-sm font-medium text-secondary-900 font-montserrat mb-3",children:"Photo de la carte d'identit\xe9 du t\xe9moin *"}),(0,Ks.jsxs)("div",{className:"relative",children:[(0,Ks.jsx)("input",{type:"file",accept:"image/*",onChange:e=>b(e,"temoinIdentityCard"),className:"hidden",id:"temoinIdentityCard",required:!0}),(0,Ks.jsx)("label",{htmlFor:"temoinIdentityCard",className:"flex items-center justify-center w-full px-6 py-8 border-2 border-dashed border-accent-300 rounded-2xl cursor-pointer hover:border-primary-500 hover:bg-primary-50/50 transition-all duration-300 group-hover:shadow-md",children:(0,Ks.jsxs)("div",{className:"text-center",children:[(0,Ks.jsx)(mf,{size:32,className:"text-neutral-400 group-hover:text-primary-500 transition-colors duration-300 mx-auto mb-2"}),(0,Ks.jsx)("span",{className:"text-neutral-600 font-montserrat block",children:o.temoinIdentityCard?o.temoinIdentityCard.name:"Choisir une photo"}),(0,Ks.jsx)("span",{className:"text-sm text-neutral-400 font-montserrat",children:o.temoinIdentityCard?"Fichier s\xe9lectionn\xe9":"Cliquez pour s\xe9lectionner"})]})})]}),h.temoinIdentityCard&&(0,Ks.jsx)("p",{className:"text-red-500 text-sm mt-2 font-montserrat",children:h.temoinIdentityCard})]})]});case 7:return(0,Ks.jsxs)("div",{className:"space-y-6 animate-fade-in-up",children:[(0,Ks.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[(0,Ks.jsx)("div",{className:"w-10 h-10 bg-accent-100 rounded-xl flex items-center justify-center",children:(0,Ks.jsx)(Kp,{size:20,className:"text-accent-600"})}),(0,Ks.jsx)("h3",{className:"text-xl font-semibold text-secondary-900 font-montserrat",children:"Contact d'urgence"})]}),(0,Ks.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,Ks.jsx)("div",{className:"relative group",children:(0,Ks.jsx)(af,{label:"Nom complet du contact",type:"text",name:"emergencyName",value:o.emergencyName,onChange:v,placeholder:"Nom et pr\xe9nom",error:h.emergencyName,required:!0,className:"group-hover:shadow-md transition-all duration-300"})}),(0,Ks.jsx)("div",{className:"relative group",children:(0,Ks.jsx)(af,{label:"Relation avec vous",type:"text",name:"emergencyRelation",value:o.emergencyRelation,onChange:v,placeholder:"Ex: Parent, Fr\xe8re, S\u0153ur",error:h.emergencyRelation,required:!0,className:"group-hover:shadow-md transition-all duration-300"})})]}),(0,Ks.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,Ks.jsxs)("div",{className:"relative group",children:[(0,Ks.jsx)(af,{label:"T\xe9l\xe9phone d'urgence",type:"tel",name:"emergencyPhone",value:o.emergencyPhone,onChange:v,placeholder:"+229 12345678",error:h.emergencyPhone,required:!0,className:"group-hover:shadow-md transition-all duration-300"}),(0,Ks.jsx)(Kp,{size:20,className:"absolute right-4 top-12 text-neutral-400 group-hover:text-primary-500 transition-colors duration-300"})]}),(0,Ks.jsxs)("div",{className:"relative group",children:[(0,Ks.jsx)(af,{label:"Email d'urgence",type:"email",name:"emergencyEmail",value:o.emergencyEmail,onChange:v,placeholder:"contact@email.com",error:h.emergencyEmail,required:!0,className:"group-hover:shadow-md transition-all duration-300"}),(0,Ks.jsx)(Jp,{size:20,className:"absolute right-4 top-12 text-neutral-400 group-hover:text-primary-500 transition-colors duration-300"})]})]}),(0,Ks.jsx)("div",{className:"relative group",children:(0,Ks.jsx)(af,{label:"Adresse compl\xe8te",type:"textarea",name:"emergencyAddress",value:o.emergencyAddress,onChange:v,placeholder:"Adresse compl\xe8te du contact d'urgence",error:h.emergencyAddress,required:!0,className:"group-hover:shadow-md transition-all duration-300"})})]});case 8:return(0,Ks.jsxs)("div",{className:"space-y-6 animate-fade-in-up",children:[(0,Ks.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[(0,Ks.jsx)("div",{className:"w-10 h-10 bg-green-100 rounded-xl flex items-center justify-center",children:(0,Ks.jsx)(tn,{size:20,className:"text-green-600"})}),(0,Ks.jsx)("h3",{className:"text-xl font-semibold text-secondary-900 font-montserrat",children:"Validation et cr\xe9ation du compte"})]}),(0,Ks.jsxs)("div",{className:"bg-accent-50 rounded-2xl p-6 space-y-4",children:[(0,Ks.jsx)("h4",{className:"font-semibold text-secondary-900 font-montserrat",children:"R\xe9capitulatif de vos informations :"}),(0,Ks.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("p",{className:"font-medium text-secondary-900",children:"Informations personnelles :"}),(0,Ks.jsxs)("p",{className:"text-neutral-600",children:[o.firstName," ",o.lastName]}),(0,Ks.jsxs)("p",{className:"text-neutral-600",children:["Facebook: ",o.facebookName]}),(0,Ks.jsxs)("p",{className:"text-neutral-600",children:[o.filiere," - ",o.anneeEtude]}),(0,Ks.jsx)("p",{className:"text-neutral-600",children:o.entite})]}),(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("p",{className:"font-medium text-secondary-900",children:"Contact :"}),(0,Ks.jsx)("p",{className:"text-neutral-600",children:o.email}),(0,Ks.jsx)("p",{className:"text-neutral-600",children:o.phone})]}),(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("p",{className:"font-medium text-secondary-900",children:"T\xe9moin :"}),(0,Ks.jsx)("p",{className:"text-neutral-600",children:o.temoinName}),(0,Ks.jsx)("p",{className:"text-neutral-600",children:o.temoinQuartier})]}),(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("p",{className:"font-medium text-secondary-900",children:"Contact d'urgence :"}),(0,Ks.jsx)("p",{className:"text-neutral-600",children:o.emergencyName}),(0,Ks.jsx)("p",{className:"text-neutral-600",children:o.emergencyRelation})]})]})]}),(0,Ks.jsx)("div",{className:"bg-blue-50 rounded-2xl p-6",children:(0,Ks.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,Ks.jsx)("div",{className:"w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:(0,Ks.jsx)("span",{className:"text-white text-xs font-bold",children:"i"})}),(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("p",{className:"font-medium text-blue-900 font-montserrat",children:"Important :"}),(0,Ks.jsx)("p",{className:"text-blue-700 text-sm font-montserrat",children:"Apr\xe8s la cr\xe9ation de votre compte, vous recevrez un code OTP par email pour finaliser l'inscription."})]})]})})]});default:return null}})(),(0,Ks.jsx)("div",{className:"flex justify-between pt-6",children:a<8?(0,Ks.jsxs)(Ks.Fragment,{children:[a>5&&(0,Ks.jsxs)(sf,{type:"button",onClick:j,className:"flex items-center space-x-2 bg-neutral-100 hover:bg-neutral-200 text-neutral-700 font-montserrat px-6 py-3 rounded-xl transition-all duration-300",children:[(0,Ks.jsx)(hf,{size:20}),(0,Ks.jsx)("span",{children:"Pr\xe9c\xe9dent"})]}),(0,Ks.jsx)("div",{className:"flex-1"}),(0,Ks.jsxs)(sf,{type:"button",onClick:()=>{y()&&i(a+1)},className:"flex items-center space-x-2 bg-gradient-to-r from-primary-500 to-primary-600 hover:from-primary-600 hover:to-primary-700 text-white font-montserrat px-6 py-3 rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-[1.02]",children:[(0,Ks.jsx)("span",{children:"Suivant"}),(0,Ks.jsx)(Qa,{size:20})]})]}):(0,Ks.jsxs)("div",{className:"flex items-center space-x-4 w-full",children:[(0,Ks.jsxs)(sf,{type:"button",onClick:j,className:"flex items-center space-x-2 bg-neutral-100 hover:bg-neutral-200 text-neutral-700 font-montserrat px-6 py-3 rounded-xl transition-all duration-300 text-sm",children:[(0,Ks.jsx)(hf,{size:18}),(0,Ks.jsx)("span",{children:"Pr\xe9c\xe9dent"})]}),(0,Ks.jsx)("div",{className:"flex-1"}),(0,Ks.jsx)(lf,{color:"#FF6B35",speed:"2s",thickness:3,className:"w-auto",children:(0,Ks.jsx)(sf,{type:"submit",loading:u,className:"bg-gradient-to-r from-primary-500 to-primary-600 hover:from-primary-600 hover:to-primary-700 text-white font-montserrat px-6 py-3 rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-[1.02] text-sm",children:u?"Cr\xe9ation...":"Cr\xe9er mon compte"})})]})})]}),(0,Ks.jsx)("div",{className:"mt-8 text-center pt-6 border-t border-accent-200",children:(0,Ks.jsxs)("p",{className:"text-neutral-600 font-montserrat",children:["D\xe9j\xe0 un compte ?"," ",(0,Ks.jsx)(Pe,{to:"/login",className:"text-primary-600 hover:text-primary-700 font-semibold transition-colors duration-300",children:"Se connecter"})]})})]})]})]})},yf=e=>{let t=e;if(!e.startsWith("+229")){const r=e.replace(/[\s\-\(\)]/g,"");if(r.startsWith("0"))t="+229"+r.substring(1);else if(r.startsWith("229"))t="+"+r;else{if(8!==r.length)return{valid:!1,error:"Format de num\xe9ro invalide"};t="+229"+r}}return/^\+229[0-9]{8}$/.test(t)?{valid:!0,formattedNumber:t}:{valid:!1,error:"Num\xe9ro de t\xe9l\xe9phone b\xe9ninois invalide"}},jf=()=>{const e=Y(),{showSuccess:r,showError:s}=ln(),[n,a]=(0,t.useState)(1),[i,o]=(0,t.useState)(!1),[l,c]=(0,t.useState)(!1),[d,u]=(0,t.useState)({}),[m,h]=(0,t.useState)({firstName:"",lastName:"",email:"",facebookName:"",phoneNumber:"",address:"",password:"",confirmPassword:""}),[p,f]=(0,t.useState)(!1),x=[{id:1,title:"Informations de base",icon:Za},{id:2,title:"Confirmation",icon:tn},{id:3,title:"Inscription compl\xe8te",icon:Kp}],g=e=>{const{name:t,value:r}=e.target;h(e=>ze(ze({},e),{},{[t]:r})),d[t]&&u(e=>ze(ze({},e),{},{[t]:""}))};return(0,Ks.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-primary-50 via-accent-50 to-secondary-50 flex items-center justify-center p-4",children:(0,Ks.jsxs)("div",{className:"w-full max-w-md",children:[(0,Ks.jsx)("div",{className:"text-center mb-8",children:(0,Ks.jsx)(rp,{})}),(0,Ks.jsxs)("div",{className:"mb-8",children:[(0,Ks.jsx)("div",{className:"flex items-center justify-between mb-4",children:x.map((e,t)=>(0,Ks.jsxs)("div",{className:"flex items-center",children:[(0,Ks.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ".concat(n>=e.id?"bg-primary-500 text-white":"bg-gray-200 text-gray-600"),children:n>e.id?(0,Ks.jsx)(tn,{size:16}):e.id}),t<x.length-1&&(0,Ks.jsx)("div",{className:"flex-1 h-1 mx-2 ".concat(n>e.id?"bg-primary-500":"bg-gray-200")})]},e.id))}),(0,Ks.jsxs)("p",{className:"text-sm text-gray-600",children:["\xc9tape ",n," sur ",x.length," : ",x[n-1].title]})]}),(0,Ks.jsx)("div",{className:"bg-white rounded-2xl shadow-soft p-6 mb-6",children:(0,Ks.jsx)(Mp,{mode:"wait",children:(()=>{switch(n){case 1:return(0,Ks.jsxs)(ep.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-6",children:[(0,Ks.jsxs)("div",{className:"text-center mb-8",children:[(0,Ks.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Cr\xe9er votre compte"}),(0,Ks.jsx)("p",{className:"text-gray-600",children:"Commen\xe7ons par vos informations de base"})]}),(0,Ks.jsxs)("div",{className:"space-y-4",children:[(0,Ks.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,Ks.jsx)(af,{label:"Pr\xe9nom",name:"firstName",value:m.firstName,onChange:g,error:d.firstName,icon:Za}),(0,Ks.jsx)(af,{label:"Nom",name:"lastName",value:m.lastName,onChange:g,error:d.lastName,icon:Za})]}),(0,Ks.jsx)(af,{label:"Adresse email",type:"email",name:"email",value:m.email,onChange:g,error:d.email,icon:Jp,placeholder:"votre@email.com"}),(0,Ks.jsx)(af,{label:"Nom du profil Facebook",name:"facebookName",value:m.facebookName,onChange:g,error:d.facebookName,icon:Za,placeholder:"Votre nom de profil Facebook"}),(0,Ks.jsx)(af,{label:"Num\xe9ro de t\xe9l\xe9phone",type:"tel",name:"phoneNumber",value:m.phoneNumber,onChange:g,error:d.phoneNumber,icon:Kp,placeholder:"Ex: 53448573"}),(0,Ks.jsx)(af,{label:"Adresse",name:"address",value:m.address,onChange:g,error:d.address,icon:cf,placeholder:"Votre adresse compl\xe8te"}),(0,Ks.jsx)(af,{label:"Mot de passe",type:l?"text":"password",name:"password",value:m.password,onChange:g,error:d.password,icon:l?$p:Qp,onIconClick:()=>c(!l)}),(0,Ks.jsx)(af,{label:"Confirmer le mot de passe",type:l?"text":"password",name:"confirmPassword",value:m.confirmPassword,onChange:g,error:d.confirmPassword,icon:l?$p:Qp,onIconClick:()=>c(!l)})]})]});case 2:return(0,Ks.jsxs)(ep.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-6",children:[(0,Ks.jsxs)("div",{className:"text-center mb-8",children:[(0,Ks.jsx)("div",{className:"w-16 h-16 bg-primary-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,Ks.jsx)(tn,{size:24,className:"text-primary-600"})}),(0,Ks.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Confirmation"}),(0,Ks.jsx)("p",{className:"text-gray-600",children:"V\xe9rifiez vos informations avant de continuer"})]}),(0,Ks.jsxs)("div",{className:"space-y-4",children:[(0,Ks.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,Ks.jsx)("h3",{className:"font-semibold text-gray-900 mb-3",children:"Informations personnelles"}),(0,Ks.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,Ks.jsxs)("p",{children:[(0,Ks.jsx)("span",{className:"font-medium",children:"Nom complet:"})," ",m.firstName," ",m.lastName]}),(0,Ks.jsxs)("p",{children:[(0,Ks.jsx)("span",{className:"font-medium",children:"Email:"})," ",m.email]}),(0,Ks.jsxs)("p",{children:[(0,Ks.jsx)("span",{className:"font-medium",children:"Nom Facebook:"})," ",m.facebookName]}),(0,Ks.jsxs)("p",{children:[(0,Ks.jsx)("span",{className:"font-medium",children:"T\xe9l\xe9phone:"})," ",m.phoneNumber]}),(0,Ks.jsxs)("p",{children:[(0,Ks.jsx)("span",{className:"font-medium",children:"Adresse:"})," ",m.address]})]})]}),(0,Ks.jsx)("div",{className:"text-center",children:(0,Ks.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"En continuant, vous acceptez nos conditions d'utilisation et notre politique de confidentialit\xe9."})})]})]});case 3:return(0,Ks.jsxs)(ep.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"text-center space-y-6",children:[(0,Ks.jsx)(ep.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring",stiffness:200},className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto",children:(0,Ks.jsx)(tn,{size:32,className:"text-green-600"})}),(0,Ks.jsx)("div",{children:(0,Ks.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Compte cr\xe9\xe9 avec succ\xe8s !"})})]});default:return null}})()})}),(0,Ks.jsxs)("div",{className:"flex items-center justify-between",children:[n>1&&(0,Ks.jsxs)(sf,{onClick:()=>{n>1&&a(n-1)},variant:"outline",className:"flex items-center space-x-2",children:[(0,Ks.jsx)(hf,{size:16}),(0,Ks.jsx)("span",{children:"Pr\xe9c\xe9dent"})]}),n<=x.length&&(0,Ks.jsxs)(sf,{onClick:()=>{1===n?(()=>{const e={};m.firstName.trim()||(e.firstName="Le pr\xe9nom est requis"),m.lastName.trim()||(e.lastName="Le nom est requis"),m.address.trim()||(e.address="L'adresse est requise"),m.email.trim()?xf(m.email)||(e.email="Email invalide"):e.email="L'adresse email est requise",m.facebookName.trim()||(e.facebookName="Le nom du profil Facebook est requis");const t=yf(m.phoneNumber);return t.valid||(e.phoneNumber=t.error),m.password.length<6&&(e.password="Le mot de passe doit contenir au moins 6 caract\xe8res"),m.password!==m.confirmPassword&&(e.confirmPassword="Les mots de passe ne correspondent pas"),u(e),0===Object.keys(e).length})()&&a(2):2===n?(f(!0),setTimeout(()=>{a(3)},2e3)):3===n&&setTimeout(()=>{console.log("[CREATEACCOUNT] Donn\xe9es transmises:",m),e("/register",{state:{basicInfo:{firstName:m.firstName,lastName:m.lastName,email:m.email,facebookName:m.facebookName,phoneNumber:m.phoneNumber,address:m.address,password:m.password,confirmPassword:m.confirmPassword},fromCreateAccount:!0}})},3e3)},disabled:i,className:"flex items-center space-x-2 ml-auto",children:[(0,Ks.jsx)("span",{children:1===n||2===n?"Continuer":3===n?"Continuer vers l'inscription compl\xe8te":"Suivant"}),(0,Ks.jsx)(Qa,{size:16})]})]}),(0,Ks.jsx)("div",{className:"text-center mt-6",children:(0,Ks.jsxs)("p",{className:"text-sm text-gray-600",children:["D\xe9j\xe0 un compte ?"," ",(0,Ks.jsx)("button",{onClick:()=>e("/login"),className:"text-primary-600 hover:text-primary-700 font-medium",children:"Se connecter"})]})})]})})},wf=()=>(0,Ks.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-primary-50 to-secondary-50 flex items-center justify-center p-4",children:(0,Ks.jsxs)(ep.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"w-full max-w-md",children:[(0,Ks.jsx)("div",{className:"text-center mb-8",children:(0,Ks.jsx)(rp,{className:"mx-auto mb-4"})}),(0,Ks.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8 border border-gray-100",children:[(0,Ks.jsxs)("div",{className:"text-center mb-6",children:[(0,Ks.jsx)("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,Ks.jsx)(tn,{className:"w-8 h-8 text-green-600"})}),(0,Ks.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Inscription r\xe9ussie !"}),(0,Ks.jsx)("p",{className:"text-gray-600",children:"Votre compte a \xe9t\xe9 cr\xe9\xe9 avec succ\xe8s"})]}),(0,Ks.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-xl p-4 mb-6",children:(0,Ks.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Ks.jsx)(sp,{className:"w-5 h-5 text-yellow-600"}),(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("h3",{className:"font-semibold text-yellow-800",children:"En attente d'approbation"}),(0,Ks.jsx)("p",{className:"text-sm text-yellow-700",children:"Votre compte sera activ\xe9 sous 24-48h"})]})]})}),(0,Ks.jsxs)("div",{className:"space-y-4 mb-6",children:[(0,Ks.jsx)("h3",{className:"font-semibold text-gray-900 mb-3",children:"Prochaines \xe9tapes :"}),(0,Ks.jsxs)("div",{className:"space-y-3",children:[(0,Ks.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,Ks.jsx)("div",{className:"w-6 h-6 bg-primary-100 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:(0,Ks.jsx)("span",{className:"text-xs font-semibold text-primary-600",children:"1"})}),(0,Ks.jsx)("div",{children:(0,Ks.jsxs)("p",{className:"text-sm text-gray-700",children:[(0,Ks.jsx)("strong",{children:"V\xe9rification des documents"})," - Nous v\xe9rifions vos informations"]})})]}),(0,Ks.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,Ks.jsx)("div",{className:"w-6 h-6 bg-primary-100 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:(0,Ks.jsx)("span",{className:"text-xs font-semibold text-primary-600",children:"2"})}),(0,Ks.jsx)("div",{children:(0,Ks.jsxs)("p",{className:"text-sm text-gray-700",children:[(0,Ks.jsx)("strong",{children:"Notification par SMS/Email"})," - Vous recevrez une confirmation"]})})]}),(0,Ks.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,Ks.jsx)("div",{className:"w-6 h-6 bg-primary-100 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:(0,Ks.jsx)("span",{className:"text-xs font-semibold text-primary-600",children:"3"})}),(0,Ks.jsx)("div",{children:(0,Ks.jsxs)("p",{className:"text-sm text-gray-700",children:[(0,Ks.jsx)("strong",{children:"Acc\xe8s \xe0 votre compte"})," - Vous pourrez vous connecter"]})})]})]})]}),(0,Ks.jsxs)("div",{className:"bg-gray-50 rounded-xl p-4 mb-6",children:[(0,Ks.jsx)("h3",{className:"font-semibold text-gray-900 mb-3",children:"Besoin d'aide ?"}),(0,Ks.jsxs)("div",{className:"space-y-2",children:[(0,Ks.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Ks.jsx)(Kp,{className:"w-4 h-4 text-gray-500"}),(0,Ks.jsx)("span",{className:"text-sm text-gray-600",children:"+229 90 00 00 00"})]}),(0,Ks.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Ks.jsx)(Jp,{className:"w-4 h-4 text-gray-500"}),(0,Ks.jsx)("span",{className:"text-sm text-gray-600",children:"support@abpret.com"})]})]})]}),(0,Ks.jsxs)("div",{className:"space-y-3",children:[(0,Ks.jsx)(sf,{onClick:()=>window.location.href="/",className:"w-full",variant:"primary",children:"Retour \xe0 l'accueil"}),(0,Ks.jsx)(Pe,{to:"/login",children:(0,Ks.jsxs)(sf,{className:"w-full",variant:"outline",children:[(0,Ks.jsx)(hf,{className:"w-4 h-4 mr-2"}),"Aller \xe0 la connexion"]})})]})]}),(0,Ks.jsxs)("div",{className:"text-center mt-6",children:[(0,Ks.jsx)("p",{className:"text-sm text-gray-500",children:"\xa9 2025 AB CAMPUS FINANCE. Tous droits r\xe9serv\xe9s."}),(0,Ks.jsx)("p",{className:"text-sm text-primary-600 font-semibold mt-1",children:"Made in B\xe9nin \ud83c\udde7\ud83c\uddef"})]})]})}),Nf=en("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),Sf=()=>{const[e,r]=(0,t.useState)(""),[s,n]=(0,t.useState)("idle"),[a,i]=(0,t.useState)(""),o=Y(),l=async t=>{if(t.preventDefault(),!e)return i("Veuillez entrer votre adresse email"),void n("error");if(!e.includes("@"))return i("Veuillez entrer une adresse email valide"),void n("error");n("loading"),i("");try{const{error:t}=await Ms.auth.resetPasswordForEmail(e,{redirectTo:"".concat(window.location.origin,"/reset-password")});if(t)return console.error("[FORGOT_PASSWORD] Erreur Supabase:",t),n("error"),void i("Une erreur est survenue. Veuillez r\xe9essayer.");n("success")}catch(r){console.error("[FORGOT_PASSWORD] Erreur g\xe9n\xe9rale:",r),n("error"),i("Une erreur est survenue. Veuillez r\xe9essayer.")}},c=()=>{o("/login")};return"success"===s?(0,Ks.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-100 to-blue-50 flex items-center justify-center p-4",children:[(0,Ks.jsx)("div",{className:"absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZGVmcz48cGF0dGVybiBpZD0iZ3JpZCIgd2lkdGg9IjQwIiBoZWlnaHQ9IjQwIiBwYXR0ZXJuVW5pdHM9InVzZXJTcGFjZU9uVXNlIj48cGF0aCBkPSJNIDQwIDAgTCAwIDAgMCA0MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJyZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMDMpIiBzdHJva2Utd2lkdGg9IjEiLz48L3BhdHRlcm4+PC9kZWZzPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9InVybCgjZ3JpZCkiLz48L3N2Zz4=')] opacity-30"}),(0,Ks.jsx)("div",{className:"relative max-w-md w-full",children:(0,Ks.jsx)("div",{className:"bg-white/80 backdrop-blur-xl rounded-3xl p-8 border border-blue-200/50 shadow-2xl animate-in fade-in-0 zoom-in-95 duration-500",children:(0,Ks.jsxs)("div",{className:"text-center",children:[(0,Ks.jsx)("div",{className:"mx-auto w-16 h-16 bg-gradient-to-r from-green-500 to-emerald-600 rounded-full flex items-center justify-center mb-6",children:(0,Ks.jsx)(tn,{className:"w-8 h-8 text-white"})}),(0,Ks.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Email envoy\xe9 !"}),(0,Ks.jsxs)("p",{className:"text-gray-600 mb-8 leading-relaxed",children:["Nous avons envoy\xe9 un lien de r\xe9initialisation \xe0"," ",(0,Ks.jsx)("span",{className:"font-semibold text-blue-600",children:e}),(0,Ks.jsx)("br",{}),"V\xe9rifiez votre bo\xeete mail et suivez les instructions."]}),(0,Ks.jsxs)("button",{onClick:c,className:"group flex items-center justify-center w-full bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white font-semibold py-4 px-6 rounded-xl transition-all duration-300 transform hover:scale-105 hover:shadow-lg",children:[(0,Ks.jsx)(hf,{className:"w-5 h-5 mr-2 transition-transform group-hover:-translate-x-1"}),"Retour \xe0 la connexion"]})]})})})]}):(0,Ks.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-100 to-blue-50 flex items-center justify-center p-4",children:[(0,Ks.jsx)("div",{className:"absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZGVmcz48cGF0dGVybiBpZD0iZ3JpZCIgd2lkdGg9IjQwIiBoZWlnaHQ9IjQwIiBwYXR0ZXJuVW5pdHM9InVzZXJTcGFjZU9uVXNlIj48cGF0aCBkPSJNIDQwIDAgTCAwIDAgMCA0MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJyZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMDMpIiBzdHJva2Utd2lkdGg9IjEiLz48L3BhdHRlcm4+PC9kZWZzPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9InVybCgjZ3JpZCkiLz48L3N2Zz4=')] opacity-30"}),(0,Ks.jsx)("div",{className:"absolute top-20 left-20 w-32 h-32 bg-blue-500/20 rounded-full blur-xl animate-pulse"}),(0,Ks.jsx)("div",{className:"absolute bottom-20 right-20 w-40 h-40 bg-indigo-500/20 rounded-full blur-xl animate-pulse delay-1000"}),(0,Ks.jsx)("div",{className:"absolute top-1/2 left-10 w-24 h-24 bg-cyan-500/20 rounded-full blur-xl animate-pulse delay-500"}),(0,Ks.jsxs)("div",{className:"relative max-w-md w-full",children:[(0,Ks.jsxs)("div",{className:"bg-white/80 backdrop-blur-xl rounded-3xl p-8 border border-blue-200/50 shadow-2xl animate-in fade-in-0 slide-in-from-bottom-4 duration-700",children:[(0,Ks.jsxs)("div",{className:"text-center mb-8",children:[(0,Ks.jsx)("div",{className:"mx-auto w-16 h-16 bg-gradient-to-r from-blue-600 to-indigo-600 rounded-full flex items-center justify-center mb-6 animate-pulse",children:(0,Ks.jsx)(Jp,{className:"w-8 h-8 text-white"})}),(0,Ks.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Mot de passe oubli\xe9 ?"}),(0,Ks.jsx)("p",{className:"text-gray-600 leading-relaxed",children:"Pas de souci ! Entrez votre adresse email et nous vous enverrons un lien pour r\xe9initialiser votre mot de passe."})]}),(0,Ks.jsxs)("div",{className:"space-y-6",children:[(0,Ks.jsxs)("div",{className:"space-y-2",children:[(0,Ks.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Adresse email"}),(0,Ks.jsxs)("div",{className:"relative",children:[(0,Ks.jsx)("input",{id:"email",type:"email",value:e,onChange:e=>{r(e.target.value),"error"===s&&(n("idle"),i(""))},className:"w-full px-4 py-4 pl-12 bg-white/50 border border-blue-200/50 rounded-xl text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300 backdrop-blur-sm",placeholder:"votre@email.com",disabled:"loading"===s}),(0,Ks.jsx)(Jp,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-500 w-5 h-5"})]})]}),"error"===s&&(0,Ks.jsxs)("div",{className:"flex items-center space-x-3 p-4 bg-red-50 border border-red-200 rounded-xl animate-in fade-in-0 slide-in-from-top-2 duration-300",children:[(0,Ks.jsx)(rn,{className:"w-5 h-5 text-red-500 flex-shrink-0"}),(0,Ks.jsx)("p",{className:"text-red-700 text-sm",children:a})]}),(0,Ks.jsxs)("button",{onClick:l,disabled:"loading"===s,className:"group relative w-full bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 disabled:from-gray-400 disabled:to-gray-500 text-white font-semibold py-4 px-6 rounded-xl transition-all duration-300 transform hover:scale-105 hover:shadow-lg disabled:scale-100 disabled:shadow-none overflow-hidden",children:[(0,Ks.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-white/0 via-white/20 to-white/0 transform -skew-x-12 -translate-x-full group-hover:translate-x-full transition-transform duration-1000"}),(0,Ks.jsx)("div",{className:"relative flex items-center justify-center",children:"loading"===s?(0,Ks.jsxs)(Ks.Fragment,{children:[(0,Ks.jsx)(Nf,{className:"w-5 h-5 mr-2 animate-spin"}),"Envoi en cours..."]}):"Envoyer le lien de r\xe9initialisation"})]}),(0,Ks.jsx)("div",{className:"text-center pt-4",children:(0,Ks.jsxs)("button",{onClick:c,className:"group text-gray-600 hover:text-blue-600 font-medium transition-colors duration-200 flex items-center justify-center mx-auto",children:[(0,Ks.jsx)(hf,{className:"w-4 h-4 mr-2 transition-transform group-hover:-translate-x-1"}),"Retour \xe0 la connexion"]})})]})]}),(0,Ks.jsx)("div",{className:"text-center mt-6",children:(0,Ks.jsxs)("p",{className:"text-gray-500 text-sm",children:["Vous n'avez pas re\xe7u l'email ? V\xe9rifiez vos spams ou"," ",(0,Ks.jsx)("button",{onClick:()=>{e&&"loading"!==s&&l({preventDefault:()=>{}})},className:"text-blue-600 hover:text-blue-700 font-medium transition-colors duration-200",children:"renvoyez-le"})]})})]})]})},kf=()=>{const[e,r]=(0,t.useState)(""),[s,n]=(0,t.useState)(""),[a,i]=(0,t.useState)(!1),[o,l]=(0,t.useState)(!1),[c,d]=(0,t.useState)("idle"),[u,m]=(0,t.useState)(""),[h]=Ie(),p=Y();(0,t.useEffect)(()=>{const e=h.get("access_token"),t=h.get("refresh_token");e&&t||(d("error"),m("Lien de r\xe9initialisation invalide ou expir\xe9."))},[h]);return"success"===c?(0,Ks.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-100 to-blue-50 flex items-center justify-center p-4",children:[(0,Ks.jsx)("div",{className:"absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZGVmcz48cGF0dGVybiBpZD0iZ3JpZCIgd2lkdGg9IjQwIiBoZWlnaHQ9IjQwIiBwYXR0ZXJuVW5pdHM9InVzZXJTcGFjZU9uVXNlIj48cGF0aCBkPSJNIDQwIDAgTCAwIDAgMCA0MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJyZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMDMpIiBzdHJva2Utd2lkdGg9IjEiLz48L3BhdHRlcm4+PC9kZWZzPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9InVybCgjZ3JpZCkiLz48L3N2Zz4=')] opacity-30"}),(0,Ks.jsx)("div",{className:"relative max-w-md w-full",children:(0,Ks.jsx)("div",{className:"bg-white/80 backdrop-blur-xl rounded-3xl p-8 border border-blue-200/50 shadow-2xl animate-in fade-in-0 zoom-in-95 duration-500",children:(0,Ks.jsxs)("div",{className:"text-center",children:[(0,Ks.jsx)("div",{className:"mx-auto w-16 h-16 bg-gradient-to-r from-green-500 to-emerald-600 rounded-full flex items-center justify-center mb-6",children:(0,Ks.jsx)(tn,{className:"w-8 h-8 text-white"})}),(0,Ks.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Mot de passe mis \xe0 jour !"}),(0,Ks.jsxs)("p",{className:"text-gray-600 mb-8 leading-relaxed",children:["Votre mot de passe a \xe9t\xe9 r\xe9initialis\xe9 avec succ\xe8s.",(0,Ks.jsx)("br",{}),"Vous allez \xeatre redirig\xe9 vers la page de connexion..."]}),(0,Ks.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2 mb-4",children:(0,Ks.jsx)("div",{className:"bg-gradient-to-r from-green-500 to-emerald-600 h-2 rounded-full animate-pulse",style:{width:"100%"}})})]})})})]}):(0,Ks.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-100 to-blue-50 flex items-center justify-center p-4",children:[(0,Ks.jsx)("div",{className:"absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZGVmcz48cGF0dGVybiBpZD0iZ3JpZCIgd2lkdGg9IjQwIiBoZWlnaHQ9IjQwIiBwYXR0ZXJuVW5pdHM9InVzZXJTcGFjZU9uVXNlIj48cGF0aCBkPSJNIDQwIDAgTCAwIDAgMCA0MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJyZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMDMpIiBzdHJva2Utd2lkdGg9IjEiLz48L3BhdHRlcm4+PC9kZWZzPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9InVybCgjZ3JpZCkiLz48L3N2Zz4=')] opacity-30"}),(0,Ks.jsx)("div",{className:"absolute top-20 left-20 w-32 h-32 bg-blue-500/20 rounded-full blur-xl animate-pulse"}),(0,Ks.jsx)("div",{className:"absolute bottom-20 right-20 w-40 h-40 bg-indigo-500/20 rounded-full blur-xl animate-pulse delay-1000"}),(0,Ks.jsx)("div",{className:"absolute top-1/2 left-10 w-24 h-24 bg-cyan-500/20 rounded-full blur-xl animate-pulse delay-500"}),(0,Ks.jsx)("div",{className:"relative max-w-md w-full",children:(0,Ks.jsxs)("div",{className:"bg-white/80 backdrop-blur-xl rounded-3xl p-8 border border-blue-200/50 shadow-2xl animate-in fade-in-0 slide-in-from-bottom-4 duration-700",children:[(0,Ks.jsxs)("div",{className:"text-center mb-8",children:[(0,Ks.jsx)("div",{className:"mx-auto w-16 h-16 bg-gradient-to-r from-blue-600 to-indigo-600 rounded-full flex items-center justify-center mb-6 animate-pulse",children:(0,Ks.jsx)(Zp,{className:"w-8 h-8 text-white"})}),(0,Ks.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Nouveau mot de passe"}),(0,Ks.jsx)("p",{className:"text-gray-600 leading-relaxed",children:"Entrez votre nouveau mot de passe pour finaliser la r\xe9initialisation."})]}),(0,Ks.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),!e)return m("Veuillez entrer un mot de passe"),void d("error");if(!s)return m("Veuillez confirmer votre mot de passe"),void d("error");if(e!==s)return m("Les mots de passe ne correspondent pas"),void d("error");const r=(e=>e.length<6?"Le mot de passe doit contenir au moins 6 caract\xe8res":null)(e);if(r)return m(r),void d("error");d("loading"),m("");try{const{error:t}=await Ms.auth.updateUser({password:e});if(t)return console.error("[RESET_PASSWORD] Erreur Supabase:",t),d("error"),void m("Une erreur est survenue. Veuillez r\xe9essayer.");d("success"),setTimeout(()=>{p("/login")},3e3)}catch(n){console.error("[RESET_PASSWORD] Erreur g\xe9n\xe9rale:",n),d("error"),m("Une erreur est survenue. Veuillez r\xe9essayer.")}},className:"space-y-6",children:[(0,Ks.jsxs)("div",{className:"space-y-2",children:[(0,Ks.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Nouveau mot de passe"}),(0,Ks.jsxs)("div",{className:"relative",children:[(0,Ks.jsx)("input",{id:"password",type:a?"text":"password",value:e,onChange:e=>{r(e.target.value),"error"===c&&(d("idle"),m(""))},className:"w-full px-4 py-4 pl-12 pr-12 bg-white/50 border border-blue-200/50 rounded-xl text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300 backdrop-blur-sm",placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",disabled:"loading"===c,required:!0}),(0,Ks.jsx)(Zp,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-500 w-5 h-5"}),(0,Ks.jsx)("button",{type:"button",onClick:()=>i(!a),className:"absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700 transition-colors",children:a?(0,Ks.jsx)($p,{size:20}):(0,Ks.jsx)(Qp,{size:20})})]})]}),(0,Ks.jsxs)("div",{className:"space-y-2",children:[(0,Ks.jsx)("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700",children:"Confirmer le mot de passe"}),(0,Ks.jsxs)("div",{className:"relative",children:[(0,Ks.jsx)("input",{id:"confirmPassword",type:o?"text":"password",value:s,onChange:e=>{n(e.target.value),"error"===c&&(d("idle"),m(""))},className:"w-full px-4 py-4 pl-12 pr-12 bg-white/50 border border-blue-200/50 rounded-xl text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300 backdrop-blur-sm",placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",disabled:"loading"===c,required:!0}),(0,Ks.jsx)(Zp,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-500 w-5 h-5"}),(0,Ks.jsx)("button",{type:"button",onClick:()=>l(!o),className:"absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700 transition-colors",children:o?(0,Ks.jsx)($p,{size:20}):(0,Ks.jsx)(Qp,{size:20})})]})]}),"error"===c&&(0,Ks.jsxs)("div",{className:"flex items-center space-x-3 p-4 bg-red-50 border border-red-200 rounded-xl animate-in fade-in-0 slide-in-from-top-2 duration-300",children:[(0,Ks.jsx)(rn,{className:"w-5 h-5 text-red-500 flex-shrink-0"}),(0,Ks.jsx)("p",{className:"text-red-700 text-sm",children:u})]}),(0,Ks.jsxs)("button",{type:"submit",disabled:"loading"===c,className:"group relative w-full bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 disabled:from-gray-400 disabled:to-gray-500 text-white font-semibold py-4 px-6 rounded-xl transition-all duration-300 transform hover:scale-105 hover:shadow-lg disabled:scale-100 disabled:shadow-none overflow-hidden",children:[(0,Ks.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-white/0 via-white/20 to-white/0 transform -skew-x-12 -translate-x-full group-hover:translate-x-full transition-transform duration-1000"}),(0,Ks.jsx)("div",{className:"relative flex items-center justify-center",children:"loading"===c?(0,Ks.jsxs)(Ks.Fragment,{children:[(0,Ks.jsx)(Nf,{className:"w-5 h-5 mr-2 animate-spin"}),"Mise \xe0 jour en cours..."]}):"Mettre \xe0 jour le mot de passe"})]})]})]})})]})},_f=en("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]]),Ef=()=>{const[e,r]=(0,t.useState)(!1),s=[{name:"WhatsApp",icon:(0,Ks.jsx)("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24",children:(0,Ks.jsx)("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"})}),url:"https://wa.me/22953463606",color:"bg-green-500 hover:bg-green-600",description:"+229 53 46 36 06"},{name:"Facebook",icon:(0,Ks.jsx)("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24",children:(0,Ks.jsx)("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})}),url:"https://www.facebook.com/abpret.2024",color:"bg-blue-600 hover:bg-blue-700",description:"AB Campus Finance"},{name:"Email",icon:(0,Ks.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Ks.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),url:"mailto:abpret51@gmail.com",color:"bg-gray-600 hover:bg-gray-700",description:"abpret51@gmail.com"}];return(0,Ks.jsxs)(Ks.Fragment,{children:[(0,Ks.jsx)("button",{onClick:()=>r(!e),className:"fixed bottom-28 right-6 z-40 p-4 bg-primary-500 hover:bg-primary-600 text-white rounded-full shadow-lg transition-all duration-300 transform hover:scale-110 focus:outline-none focus:ring-4 focus:ring-primary-300","aria-label":"Nous contacter",children:e?(0,Ks.jsx)(nn,{size:24}):(0,Ks.jsx)(_f,{size:24})}),e&&(0,Ks.jsxs)(Ks.Fragment,{children:[(0,Ks.jsx)("div",{className:"fixed inset-0 z-30",onClick:()=>r(!1)}),(0,Ks.jsxs)("div",{className:"fixed bottom-44 right-6 z-40 w-80 bg-white rounded-2xl shadow-2xl border border-gray-200 overflow-hidden animate-slide-up",children:[(0,Ks.jsx)("div",{className:"bg-gradient-to-r from-primary-500 to-primary-600 p-4 text-white",children:(0,Ks.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("h3",{className:"text-lg font-bold font-montserrat",children:"Nous contacter"}),(0,Ks.jsx)("p",{className:"text-sm text-primary-100",children:"Choisissez votre canal pr\xe9f\xe9r\xe9"})]}),(0,Ks.jsx)("button",{onClick:()=>r(!1),className:"p-1 hover:bg-white/20 rounded-full transition-colors",children:(0,Ks.jsx)(nn,{size:20})})]})}),(0,Ks.jsx)("div",{className:"p-4 space-y-3",children:s.map(e=>(0,Ks.jsxs)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",onClick:()=>r(!1),className:"flex items-center space-x-4 p-4 rounded-xl ".concat(e.color," text-white transition-all duration-200 transform hover:scale-105 hover:shadow-lg"),children:[(0,Ks.jsx)("div",{className:"flex-shrink-0",children:e.icon}),(0,Ks.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Ks.jsx)("p",{className:"font-semibold font-montserrat",children:e.name}),(0,Ks.jsx)("p",{className:"text-sm opacity-90 truncate",children:e.description})]}),(0,Ks.jsx)("svg",{className:"w-5 h-5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Ks.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]},e.name))}),(0,Ks.jsx)("div",{className:"bg-gray-50 px-4 py-3 border-t border-gray-200",children:(0,Ks.jsx)("p",{className:"text-xs text-gray-600 text-center font-montserrat",children:"Nous sommes disponibles pour vous aider"})})]})]}),(0,Ks.jsx)("style",{jsx:!0,children:"\n        @keyframes slide-up {\n          from {\n            opacity: 0;\n            transform: translateY(20px);\n          }\n          to {\n            opacity: 1;\n            transform: translateY(0);\n          }\n        }\n\n        .animate-slide-up {\n          animation: slide-up 0.3s ease-out;\n        }\n      "})]})},Cf=en("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]),Pf=en("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),Af=en("PiggyBank",[["path",{d:"M19 5c-1.5 0-2.8 1.4-3 2-3.5-1.5-11-.3-11 5 0 1.8 0 3 2 4.5V20h4v-2h3v2h4v-4c1-.5 1.7-1 2-2h2v-4h-2c0-1-.5-1.5-1-2h0V5z",key:"uf6l00"}],["path",{d:"M2 9v1c0 1.1.9 2 2 2h1",key:"nm575m"}],["path",{d:"M16 11h0",key:"k2aug8"}]]),Tf=en("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]),If=en("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),Rf=()=>{var e;const r=Y(),{user:s}=Zs(),[n,a]=(0,t.useState)({totalLoaned:0,totalRepaid:0,amountToRepay:0,activeLoans:0,nextPayment:0,daysUntilNextPayment:0,dueDate:null,loyaltyScore:0,savingsBalance:0}),[i,o]=(0,t.useState)(!0),[l,c]=(0,t.useState)(null);(0,t.useEffect)(()=>{d()},[null===s||void 0===s?void 0:s.id]);const d=async()=>{if(null!==s&&void 0!==s&&s.id)try{o(!0),c(null);const e=await Hs(s.id),t=await Gs(s.id),{data:r,error:n}=await Ms.from("savings_plans").select("current_balance").eq("user_id",s.id).eq("status","active").order("current_balance",{ascending:!1}),i=r&&r.length>0?Math.max(...r.map(e=>e.current_balance||0)):0;if(e.success&&t.success){const r=e.data||[],s=t.data||[],n=r.reduce((e,t)=>e+(t.amount||0),0),o=s.reduce((e,t)=>e+(t.amount||0),0),l=r.filter(e=>"active"===e.status).length,c=n-o;let d=0,u=0,m=null;const h=r.find(e=>"active"===e.status);if(h){const e=parseFloat(h.amount)||0,t=parseFloat(h.interest_rate)||0;if(e>0){d=Math.round(e*(1+t/100))}const r=new Date(h.created_at),s=parseInt(h.duration_months||h.duration,10)||30;m=new Date(r),m.setDate(m.getDate()+s);const n=new Date;n.setHours(0,0,0,0),m.setHours(0,0,0,0);const a=m.getTime()-n.getTime();u=Math.floor(a/864e5)}const p=new Map(r.map(e=>[e.id,e])),f=s.filter(e=>"completed"===(e.status||"").toLowerCase()),x=new Set;f.forEach(e=>{const t=p.get(e.loan_id);if(!t)return;const r=new Date(t.created_at||new Date),s=parseInt(t.duration_months||t.duration||30,10),n=new Date(r.getTime()+24*s*60*60*1e3);n.setHours(23,59,59,999);const a=new Date(e.payment_date||e.created_at||new Date),i=new Date(a);i.setHours(0,0,0,0);i.getTime()<=n.getTime()&&x.add(e.loan_id)}),r.forEach(e=>{const t=(e.status||"").toLowerCase();"completed"!==t&&"rembours\xe9"!==t||x.has(e.id)||x.add(e.id)});const g=Math.max(0,Math.min(5,x.size));a({totalLoaned:n,totalRepaid:o,amountToRepay:c,activeLoans:l,nextPayment:d,daysUntilNextPayment:u,dueDate:m,loyaltyScore:g,savingsBalance:i})}}catch(l){console.error("[DASHBOARD] Erreur:",l),c("Erreur lors du chargement des donn\xe9es")}finally{o(!1)}else o(!1)};if(i)return(0,Ks.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 flex items-center justify-center",children:(0,Ks.jsxs)("div",{className:"text-center",children:[(0,Ks.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-blue-500 border-t-transparent mx-auto mb-4"}),(0,Ks.jsx)("p",{className:"text-gray-600 font-medium",children:"Chargement..."})]})});if(l)return(0,Ks.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 flex items-center justify-center p-4",children:(0,Ks.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8 max-w-md w-full text-center",children:[(0,Ks.jsx)("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,Ks.jsx)(Cf,{size:32,className:"text-red-600"})}),(0,Ks.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Erreur"}),(0,Ks.jsx)("p",{className:"text-gray-600 mb-6",children:l}),(0,Ks.jsxs)("button",{onClick:d,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl transition-colors",children:[(0,Ks.jsx)(Pf,{size:18}),"R\xe9essayer"]})]})});const u=[{id:"ab-pret",title:"AB Pr\xeat",description:"Demander un pr\xeat rapide",icon:yp,color:"from-blue-500 to-purple-600",iconBg:"bg-blue-100",iconColor:"text-blue-600",path:"/loan-request",badge:n.activeLoans>0?"".concat(n.activeLoans," actif").concat(n.activeLoans>1?"s":""):null},{id:"ab-epargne",title:"AB \xc9pargne",description:"\xc9pargner intelligemment",icon:Af,color:"from-green-500 to-emerald-600",iconBg:"bg-green-100",iconColor:"text-green-600",path:"/ab-epargne"},{id:"ab-logement",title:"AB Logement",description:"Votre maison de r\xeave",icon:bp,color:"from-purple-500 to-indigo-600",iconBg:"bg-purple-100",iconColor:"text-purple-600",path:"/ab-logement"},{id:"coaching",title:"Coaching Finance",description:"D\xe9veloppez votre business",icon:df,color:"from-orange-500 to-red-600",iconBg:"bg-orange-100",iconColor:"text-orange-600",path:"/coaching-finance"}];return(0,Ks.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 pb-24",children:[(0,Ks.jsx)("div",{className:"bg-white/80 backdrop-blur-lg shadow-lg border-b border-white/50 sticky top-0 z-30",children:(0,Ks.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:(0,Ks.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Ks.jsxs)("div",{className:"flex items-center gap-4",children:[(0,Ks.jsx)("div",{className:"p-3 bg-gradient-to-br from-blue-500 to-purple-600 rounded-2xl shadow-lg",children:(0,Ks.jsx)(bp,{size:32,className:"text-white"})}),(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900 font-montserrat",children:"Tableau de bord"}),(0,Ks.jsxs)("p",{className:"text-sm sm:text-base text-gray-600 font-montserrat",children:["Bonjour ",(null===s||void 0===s?void 0:s.first_name)||(null===s||void 0===s||null===(e=s.user_metadata)||void 0===e?void 0:e.first_name)||"Utilisateur"," \ud83d\udc4b"]})]})]}),(0,Ks.jsxs)("button",{onClick:d,disabled:i,className:"flex items-center gap-2 px-3 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-xl transition-colors text-sm",children:[(0,Ks.jsx)(Pf,{size:16,className:i?"animate-spin":""}),(0,Ks.jsx)("span",{className:"hidden sm:inline",children:"Actualiser"})]})]})})}),(0,Ks.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,Ks.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6 mb-8",children:[(0,Ks.jsxs)("div",{className:"bg-gradient-to-br from-yellow-500 to-orange-600 text-white rounded-2xl shadow-lg border border-yellow-400/50 p-4 sm:p-6 flex flex-col justify-between hover:shadow-xl transition-all duration-300",children:[(0,Ks.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,Ks.jsx)("div",{className:"p-2 sm:p-3 bg-white/20 rounded-xl",children:(0,Ks.jsx)(Tf,{size:20})}),(0,Ks.jsx)("span",{className:"text-xs font-medium text-yellow-100",children:"Score"})]}),(0,Ks.jsx)("p",{className:"text-2xl sm:text-3xl font-bold font-montserrat mb-1",children:n.loyaltyScore}),(0,Ks.jsx)("p",{className:"text-sm text-yellow-100 font-montserrat",children:"/ 5 points"}),(0,Ks.jsx)("div",{className:"flex mt-2",children:[...Array(5)].map((e,t)=>(0,Ks.jsx)(Hp,{className:"w-3 h-3 sm:w-4 sm:h-4 ".concat(t<n.loyaltyScore?"text-white fill-current":"text-yellow-300/30")},t))})]}),(0,Ks.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 p-4 sm:p-6 flex flex-col justify-between hover:shadow-xl transition-all duration-300",children:[(0,Ks.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,Ks.jsx)("div",{className:"p-2 sm:p-3 bg-blue-100 rounded-xl",children:(0,Ks.jsx)(yp,{size:20,className:"text-blue-600"})}),(0,Ks.jsx)("span",{className:"text-xs font-medium text-gray-500",children:"Actifs"})]}),(0,Ks.jsx)("p",{className:"text-2xl sm:text-3xl font-bold text-gray-900 font-montserrat mb-1",children:n.activeLoans}),(0,Ks.jsxs)("p",{className:"text-sm text-gray-600 font-montserrat",children:["Pr\xeat",n.activeLoans>1?"s":""," en cours"]})]}),(0,Ks.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 p-4 sm:p-6 flex flex-col justify-between hover:shadow-xl transition-all duration-300",children:[(0,Ks.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,Ks.jsx)("div",{className:"p-2 sm:p-3 bg-green-100 rounded-xl",children:(0,Ks.jsx)(Af,{size:20,className:"text-green-600"})}),(0,Ks.jsx)("span",{className:"text-xs font-medium text-gray-500",children:"Compte \xc9pargne"})]}),(0,Ks.jsx)("p",{className:"text-2xl sm:text-3xl font-bold text-gray-900 font-montserrat mb-1",children:pf(n.savingsBalance)}),(0,Ks.jsx)("p",{className:"text-sm text-gray-600 font-montserrat",children:"Solde disponible"})]}),(0,Ks.jsxs)("div",{className:"bg-gradient-to-br from-orange-500 to-red-600 text-white rounded-2xl shadow-lg border border-orange-400/50 p-4 sm:p-6 flex flex-col justify-between hover:shadow-xl transition-all duration-300",children:[(0,Ks.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,Ks.jsx)("div",{className:"p-2 sm:p-3 bg-white/20 rounded-xl",children:(0,Ks.jsx)(sp,{size:20})}),(0,Ks.jsx)("span",{className:"text-xs font-medium text-orange-100",children:n.daysUntilNextPayment<0?"Retard":0===n.daysUntilNextPayment?"Aujourd'hui":"".concat(n.daysUntilNextPayment,"j")})]}),(0,Ks.jsx)("p",{className:"text-2xl sm:text-3xl font-bold font-montserrat mb-1",children:pf(n.nextPayment)}),(0,Ks.jsx)("p",{className:"text-sm text-orange-100 font-montserrat",children:"Prochain paiement"})]})]}),(0,Ks.jsx)("h2",{className:"text-xl font-bold text-gray-900 font-montserrat mb-4",children:"Nos Services"}),(0,Ks.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6 mb-8",children:u.map(e=>(0,Ks.jsxs)("button",{onClick:()=>r(e.path),className:"relative flex flex-col items-start p-6 bg-white rounded-2xl shadow-lg border border-gray-100 hover:shadow-xl transition-all duration-300 group overflow-hidden text-left",children:[(0,Ks.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br ".concat(e.color," opacity-0 group-hover:opacity-10 transition-opacity duration-300")}),(0,Ks.jsxs)("div",{className:"relative z-10 flex items-center justify-between w-full mb-4",children:[(0,Ks.jsx)("div",{className:"p-3 ".concat(e.iconBg," rounded-xl group-hover:scale-110 transition-transform duration-300"),children:(0,Ks.jsx)(e.icon,{size:24,className:e.iconColor})}),e.badge&&(0,Ks.jsx)("span",{className:"px-3 py-1 bg-blue-500 text-white text-xs font-bold rounded-full shadow-sm",children:e.badge})]}),(0,Ks.jsx)("h3",{className:"relative z-10 text-lg font-bold text-gray-900 font-montserrat mb-1",children:e.title}),(0,Ks.jsx)("p",{className:"relative z-10 text-sm text-gray-600 font-montserrat mb-4",children:e.description}),(0,Ks.jsx)(Qa,{size:20,className:"absolute bottom-6 right-6 text-gray-400 group-hover:text-blue-600 transition-all duration-300 group-hover:translate-x-1"})]},e.id))}),(0,Ks.jsx)("div",{className:"flex justify-center",children:(0,Ks.jsxs)("button",{onClick:()=>r("/loan-request"),className:"flex items-center gap-3 px-8 py-4 bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white rounded-2xl font-bold text-lg shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105",children:[(0,Ks.jsx)(If,{size:24}),(0,Ks.jsx)("span",{children:"Nouvelle demande de pr\xeat"})]})})]}),(0,Ks.jsx)(Ef,{})]})},Of=en("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),Lf=en("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),Df=()=>{const{user:e}=Zs(),r=Y(),{isConnected:s}=(()=>{const{addNotification:e}=ln(),{user:r}=Zs(),[s,n]=(0,t.useState)(!1),[a]=(0,t.useState)(new Set);return(0,t.useEffect)(()=>{if(!r)return;const t="admin"===(null===r||void 0===r?void 0:r.role),s=null===r||void 0===r?void 0:r.id;console.log("[REALTIME] ".concat(t?"Admin":"Utilisateur"," connect\xe9, ID: ").concat(s));const i=Ms.channel("loans_changes").on("postgres_changes",{event:"INSERT",schema:"public",table:"loans"},r=>{console.log("[REALTIME] Nouvelle demande de pr\xeat:",r.new),a.has(r.new.id)||(a.add(r.new.id),t&&e({title:"\ud83d\udea8 Nouvelle demande de pr\xeat",message:"Demande de ".concat(new Intl.NumberFormat("fr-FR",{style:"currency",currency:"XOF"}).format(r.new.amount)," - ").concat(r.new.purpose||"Objectif non sp\xe9cifi\xe9"),type:"info",priority:"high",forAdmin:!0,data:{loan_id:r.new.id,amount:r.new.amount,purpose:r.new.purpose,status:r.new.status,created_at:r.new.created_at},action:"Voir la demande"}))}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"loans"},r=>{if(console.log("[REALTIME] Mise \xe0 jour de pr\xeat:",r.new),r.old.status!==r.new.status){let n="",a="info",i="";switch(r.new.status){case"approved":n="Pr\xeat approuv\xe9 pour ".concat(new Intl.NumberFormat("fr-FR",{style:"currency",currency:"XOF"}).format(r.new.amount)," FCFA"),a="success",i="\u2705 Pr\xeat approuv\xe9";break;case"rejected":n="Pr\xeat rejet\xe9 pour ".concat(new Intl.NumberFormat("fr-FR",{style:"currency",currency:"XOF"}).format(r.new.amount)," FCFA"),a="error",i="\u274c Pr\xeat rejet\xe9";break;case"active":n="Pr\xeat activ\xe9 pour ".concat(new Intl.NumberFormat("fr-FR",{style:"currency",currency:"XOF"}).format(r.new.amount)," FCFA"),a="success",i="\ud83d\ude80 Pr\xeat activ\xe9";break;default:return}t&&e({title:"Statut de pr\xeat mis \xe0 jour",message:"".concat(n," - Utilisateur: ").concat(r.new.user_id),type:a,priority:"medium",forAdmin:!0,data:r.new}),t||r.new.user_id!==s||e({title:i,message:n,type:a,priority:"high",forUser:!0,userId:s,data:r.new,action:"Voir les d\xe9tails"})}}).subscribe(e=>{console.log("[REALTIME] Statut de la connexion loans:",e),n("SUBSCRIBED"===e)});if(t){const t=Ms.channel("users_changes").on("postgres_changes",{event:"INSERT",schema:"public",table:"users"},t=>{console.log("[REALTIME] Nouvel utilisateur (admin):",t.new),a.has(t.new.id)||(a.add(t.new.id),e({title:"\ud83d\udc64 Nouvel utilisateur inscrit",message:"".concat(t.new.first_name," ").concat(t.new.last_name," - ").concat(t.new.phone_number),type:"info",priority:"medium",forAdmin:!0,data:{user_id:t.new.id,first_name:t.new.first_name,last_name:t.new.last_name,phone_number:t.new.phone_number,status:t.new.status,created_at:t.new.created_at},action:"Voir le profil"}))}).subscribe(e=>{console.log("[REALTIME] Statut de la connexion users (admin):",e)});return()=>{console.log("[REALTIME] Nettoyage des abonnements (admin)"),i.unsubscribe(),t.unsubscribe()}}return()=>{console.log("[REALTIME] Nettoyage des abonnements (utilisateur)"),i.unsubscribe()}},[e,null===r||void 0===r?void 0:r.role,null===r||void 0===r?void 0:r.id]),{isConnected:s}})(),[n,a]=(0,t.useState)(!0),[i,o]=(0,t.useState)(null),[l,c]=(0,t.useState)({totalUsers:0,totalLoans:0,totalAmount:0,pendingRequests:0,activeLoans:0,completedLoans:0,totalSavings:0,activeSavingsPlans:0}),[d,u]=(0,t.useState)([]);(0,t.useEffect)(()=>{m()},[]);const m=async()=>{try{a(!0),o(null),console.log("[ADMIN_DASHBOARD] \ud83d\udce5 Chargement des donn\xe9es...");const[e,t,r]=await Promise.all([Vs(),Hs(),Ms.from("savings_plans").select("*")]);console.log("[ADMIN_DASHBOARD] \u2705 Donn\xe9es charg\xe9es");const s=e.success?e.data.length:0;let n=0,i=0,l=0,d=0,m=0,h=[];if(t.success){const e=t.data||[];n=e.length,i=e.reduce((e,t)=>e+(t.amount||0),0),l=e.filter(e=>"pending"===e.status).length,d=e.filter(e=>"active"===e.status||"approved"===e.status).length,m=e.filter(e=>"completed"===e.status).length,h=e.slice(0,5).map(e=>{var t,r;return{id:e.id,type:"loan",status:e.status,user:{firstName:(null===(t=e.users)||void 0===t?void 0:t.first_name)||"Utilisateur",lastName:(null===(r=e.users)||void 0===r?void 0:r.last_name)||"Inconnu"},amount:e.amount||0,date:e.created_at,description:e.purpose||"Pr\xeat"}})}let p=0,f=0,x=[];if(r.data){const e=r.data||[];p=e.reduce((e,t)=>e+(t.current_balance||0),0),f=e.filter(e=>"active"===e.status).length,x=e.slice(0,3).map(e=>({id:e.id,type:"savings",status:e.status,amount:e.current_balance||0,target:e.total_amount_target||0,date:e.created_at,description:"Plan d'\xe9pargne"}))}const g=[...h,...x].sort((e,t)=>new Date(t.date)-new Date(e.date)).slice(0,8);c({totalUsers:s,totalLoans:n,totalAmount:i,pendingRequests:l,activeLoans:d,completedLoans:m,totalSavings:p,activeSavingsPlans:f}),u(g)}catch(i){console.error("[ADMIN_DASHBOARD] \u274c Erreur:",i),o(i.message||"Une erreur est survenue")}finally{a(!1)}},h=e=>{if("loan"===e.type){if("pending"===e.status)return(0,Ks.jsx)(sp,{size:16,className:"text-yellow-600"});if("active"===e.status||"approved"===e.status)return(0,Ks.jsx)(Cf,{size:16,className:"text-blue-600"});if("completed"===e.status)return(0,Ks.jsx)(tn,{size:16,className:"text-green-600"})}return"savings"===e.type?(0,Ks.jsx)(Af,{size:16,className:"text-purple-600"}):(0,Ks.jsx)(yp,{size:16,className:"text-gray-600"})},p=e=>{if("loan"===e.type){if("pending"===e.status)return(0,Ks.jsx)("span",{className:"px-2 py-0.5 bg-yellow-100 text-yellow-700 rounded-full text-[10px] font-semibold",children:"En attente"});if("active"===e.status||"approved"===e.status)return(0,Ks.jsx)("span",{className:"px-2 py-0.5 bg-blue-100 text-blue-700 rounded-full text-[10px] font-semibold",children:"Actif"});if("completed"===e.status)return(0,Ks.jsx)("span",{className:"px-2 py-0.5 bg-green-100 text-green-700 rounded-full text-[10px] font-semibold",children:"Rembours\xe9"})}return"savings"===e.type?(0,Ks.jsx)("span",{className:"px-2 py-0.5 bg-purple-100 text-purple-700 rounded-full text-[10px] font-semibold",children:"\xc9pargne"}):null},f=[{title:"AB Pret",description:"G\xe9rer les demandes de pr\xeats",icon:yp,color:"from-blue-500 to-purple-600",iconBg:"bg-blue-100",iconColor:"text-blue-600",path:"/admin/loan-requests",badge:l.pendingRequests>0?"".concat(l.pendingRequests," en attente"):null},{title:"AB Epargne",description:"G\xe9rer les comptes d'\xe9pargne",icon:Af,color:"from-green-500 to-emerald-600",iconBg:"bg-green-100",iconColor:"text-green-600",path:"/admin/ab-epargne",badge:l.activeSavingsPlans>0?"".concat(l.activeSavingsPlans," actifs"):null},{title:"Analytics",description:"Voir les statistiques",icon:Of,color:"from-orange-500 to-red-600",iconBg:"bg-orange-100",iconColor:"text-orange-600",path:"/admin/analytics"},{title:"Utilisateurs",description:"G\xe9rer les clients",icon:Lf,color:"from-purple-500 to-pink-600",iconBg:"bg-purple-100",iconColor:"text-purple-600",path:"/admin/user-management"}];return n?(0,Ks.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 flex items-center justify-center",children:(0,Ks.jsxs)("div",{className:"text-center",children:[(0,Ks.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-blue-500 border-t-transparent mx-auto mb-4"}),(0,Ks.jsx)("p",{className:"text-gray-600 font-medium",children:"Chargement du tableau de bord..."})]})}):i?(0,Ks.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 flex items-center justify-center p-4",children:(0,Ks.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8 max-w-md w-full text-center",children:[(0,Ks.jsx)("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,Ks.jsx)(rn,{size:32,className:"text-red-600"})}),(0,Ks.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Erreur de chargement"}),(0,Ks.jsx)("p",{className:"text-gray-600 mb-6",children:i}),(0,Ks.jsxs)("button",{onClick:m,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl transition-colors",children:[(0,Ks.jsx)(Pf,{size:18}),"R\xe9essayer"]})]})}):(0,Ks.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 pb-24",children:[(0,Ks.jsx)("div",{className:"bg-white/80 backdrop-blur-lg shadow-lg border-b border-white/50 sticky top-0 z-30",children:(0,Ks.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:(0,Ks.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Ks.jsxs)("div",{className:"flex items-center gap-4",children:[(0,Ks.jsx)("div",{className:"p-3 bg-gradient-to-br from-blue-500 to-purple-600 rounded-2xl shadow-lg",children:(0,Ks.jsx)(bp,{size:32,className:"text-white"})}),(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900 font-montserrat",children:"Tableau de bord"}),(0,Ks.jsxs)("p",{className:"text-sm sm:text-base text-gray-600 font-montserrat",children:["Bonjour ",(null===e||void 0===e?void 0:e.first_name)||"Admin"]})]})]}),(0,Ks.jsxs)("div",{className:"flex items-center gap-3",children:[s&&(0,Ks.jsxs)("div",{className:"hidden sm:flex items-center gap-2 px-3 py-1.5 bg-green-100 rounded-full",children:[(0,Ks.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),(0,Ks.jsx)("span",{className:"text-xs font-medium text-green-700",children:"En ligne"})]}),(0,Ks.jsxs)("button",{onClick:m,className:"flex items-center gap-2 px-3 sm:px-4 py-2 bg-white hover:bg-gray-50 border border-gray-200 rounded-xl transition-all duration-200 shadow-sm hover:shadow",children:[(0,Ks.jsx)(Pf,{size:18,className:"text-gray-600"}),(0,Ks.jsx)("span",{className:"hidden sm:inline text-sm font-medium text-gray-700",children:"Actualiser"})]})]})]})})}),(0,Ks.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,Ks.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6 mb-8",children:[(0,Ks.jsxs)("div",{className:"bg-white rounded-2xl p-4 sm:p-6 shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-100 group",children:[(0,Ks.jsx)("div",{className:"flex items-start justify-between mb-3 sm:mb-4",children:(0,Ks.jsx)("div",{className:"p-2 sm:p-3 bg-purple-100 rounded-xl group-hover:scale-110 transition-transform duration-300",children:(0,Ks.jsx)(Lf,{size:20,className:"sm:w-6 sm:h-6 text-purple-600"})})}),(0,Ks.jsx)("p",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:l.totalUsers}),(0,Ks.jsx)("p",{className:"text-xs sm:text-sm text-gray-600 mt-1",children:"Utilisateurs"})]}),(0,Ks.jsxs)("div",{className:"bg-gradient-to-br from-blue-500 to-purple-600 rounded-2xl p-4 sm:p-6 shadow-lg hover:shadow-xl transition-all duration-300 text-white group",children:[(0,Ks.jsx)("div",{className:"flex items-start justify-between mb-3 sm:mb-4",children:(0,Ks.jsx)("div",{className:"p-2 sm:p-3 bg-white/20 rounded-xl group-hover:scale-110 transition-transform duration-300",children:(0,Ks.jsx)(Cf,{size:20,className:"sm:w-6 sm:h-6 text-white"})})}),(0,Ks.jsx)("p",{className:"text-2xl sm:text-3xl font-bold",children:l.activeLoans}),(0,Ks.jsx)("p",{className:"text-xs sm:text-sm text-blue-100 mt-1",children:"Pr\xeats actifs"})]}),(0,Ks.jsxs)("div",{className:"bg-white rounded-2xl p-4 sm:p-6 shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-100 group",children:[(0,Ks.jsx)("div",{className:"flex items-start justify-between mb-3 sm:mb-4",children:(0,Ks.jsx)("div",{className:"p-2 sm:p-3 bg-green-100 rounded-xl group-hover:scale-110 transition-transform duration-300",children:(0,Ks.jsx)(_p,{size:20,className:"sm:w-6 sm:h-6 text-green-600"})})}),(0,Ks.jsx)("p",{className:"text-lg sm:text-xl font-bold text-gray-900",children:pf(l.totalAmount)}),(0,Ks.jsx)("p",{className:"text-xs sm:text-sm text-gray-600 mt-1",children:"Pr\xeats total"})]}),(0,Ks.jsxs)("div",{className:"bg-white rounded-2xl p-4 sm:p-6 shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-100 group",children:[(0,Ks.jsx)("div",{className:"flex items-start justify-between mb-3 sm:mb-4",children:(0,Ks.jsx)("div",{className:"p-2 sm:p-3 bg-yellow-100 rounded-xl group-hover:scale-110 transition-transform duration-300",children:(0,Ks.jsx)(sp,{size:20,className:"sm:w-6 sm:h-6 text-yellow-600"})})}),(0,Ks.jsx)("p",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:l.pendingRequests}),(0,Ks.jsx)("p",{className:"text-xs sm:text-sm text-gray-600 mt-1",children:"En attente"})]})]}),(0,Ks.jsxs)("div",{className:"mb-8",children:[(0,Ks.jsx)("h2",{className:"text-xl font-bold text-gray-900 font-montserrat mb-4",children:"Actions rapides"}),(0,Ks.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:f.map((e,t)=>(0,Ks.jsxs)("button",{onClick:()=>r(e.path),className:"group relative bg-white rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-100 overflow-hidden text-left",children:[(0,Ks.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br ".concat(e.color," opacity-0 group-hover:opacity-5 transition-opacity duration-300")}),(0,Ks.jsxs)("div",{className:"relative",children:[(0,Ks.jsx)("div",{className:"inline-flex p-3 rounded-xl ".concat(e.iconBg," mb-4 group-hover:scale-110 transition-transform duration-300"),children:(0,Ks.jsx)(e.icon,{size:24,className:e.iconColor})}),e.badge&&(0,Ks.jsx)("span",{className:"absolute top-0 right-0 px-2 py-1 bg-red-500 text-white text-[10px] font-bold rounded-full",children:e.badge}),(0,Ks.jsx)("h3",{className:"text-lg font-bold text-gray-900 font-montserrat mb-2",children:e.title}),(0,Ks.jsx)("p",{className:"text-sm text-gray-600 font-montserrat mb-4",children:e.description}),(0,Ks.jsxs)("div",{className:"flex items-center text-primary-600 font-semibold font-montserrat group-hover:translate-x-2 transition-transform duration-300",children:[(0,Ks.jsx)("span",{className:"text-sm",children:"Acc\xe9der"}),(0,Ks.jsx)(Qa,{size:16,className:"ml-2"})]})]})]},t))})]}),(0,Ks.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden",children:[(0,Ks.jsx)("div",{className:"p-4 sm:p-6 border-b border-gray-100",children:(0,Ks.jsx)("h2",{className:"text-xl font-bold text-gray-900 font-montserrat",children:"Activit\xe9s r\xe9centes"})}),(0,Ks.jsx)("div",{className:"divide-y divide-gray-100",children:0===d.length?(0,Ks.jsxs)("div",{className:"p-8 sm:p-12 text-center",children:[(0,Ks.jsx)(Cf,{size:48,className:"mx-auto text-gray-300 mb-4"}),(0,Ks.jsx)("p",{className:"text-gray-500 font-medium",children:"Aucune activit\xe9 r\xe9cente"})]}):d.map((e,t)=>{var s,n;return(0,Ks.jsx)("div",{className:"p-4 sm:p-6 hover:bg-gray-50 transition-colors cursor-pointer",onClick:()=>{"loan"===e.type&&r("/admin/loan-requests"),"savings"===e.type&&r("/admin/ab-epargne")},children:(0,Ks.jsxs)("div",{className:"flex items-start gap-3 sm:gap-4",children:[(0,Ks.jsx)("div",{className:"flex-shrink-0 w-10 h-10 bg-gray-100 rounded-full flex items-center justify-center",children:h(e)}),(0,Ks.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Ks.jsxs)("div",{className:"flex items-start justify-between gap-2 mb-1",children:[(0,Ks.jsx)("p",{className:"text-sm sm:text-base font-semibold text-gray-900 truncate",children:"loan"===e.type?"".concat(null===(s=e.user)||void 0===s?void 0:s.firstName," ").concat(null===(n=e.user)||void 0===n?void 0:n.lastName):e.description}),p(e)]}),(0,Ks.jsx)("p",{className:"text-xs sm:text-sm text-gray-600 mb-2",children:"loan"===e.type?e.description:"".concat(pf(e.amount)," / ").concat(pf(e.target))}),(0,Ks.jsxs)("div",{className:"flex items-center gap-3 text-xs text-gray-500",children:[(0,Ks.jsx)("span",{className:"font-bold text-gray-900",children:pf(e.amount)}),(0,Ks.jsx)("span",{children:"\u2022"}),(0,Ks.jsx)("span",{children:new Date(e.date).toLocaleDateString("fr-FR")})]})]}),(0,Ks.jsx)(Qa,{size:16,className:"flex-shrink-0 text-gray-400 group-hover:text-gray-600 transition-colors"})]})},t)})})]})]})]})},zf=en("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),Mf=en("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),Ff=en("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),Uf=en("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),Bf=en("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]),Vf=en("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]),qf=()=>{var e,r;Y();const{showSuccess:s,showError:n}=ln(),[a,i]=(0,t.useState)([]),[o,l]=(0,t.useState)(!0),[c,d]=(0,t.useState)(null),[u,m]=(0,t.useState)(""),[h,p]=(0,t.useState)("all"),[f,x]=(0,t.useState)(null),[g,v]=(0,t.useState)({totalRequests:0,pending:0,active:0,completed:0,totalAmount:0});(0,t.useEffect)(()=>{b()},[]);const b=async()=>{try{l(!0),d(null),console.log("[ADMIN_LOANS] \ud83d\udce5 Chargement des demandes de pr\xeats...");const[e,t]=await Promise.all([Hs(),Gs()]);if(e.success&&t.success){const r=e.data||[],s=t.data||[];console.log("[ADMIN_LOANS] \u2705 Pr\xeats charg\xe9s:",r.length),console.log("[ADMIN_LOANS] \u2705 Paiements charg\xe9s:",s.length);const n=r.map(e=>{var t,r,n,a,i,o,l,c,d,u,m,h,p,f,x,g,v,b,y;const j=s.filter(t=>t.loan_id===e.id).reduce((e,t)=>e+(t.amount||0),0),w=e.amount?e.amount*(1+(e.interest_rate||0)/100):0,N=w-j,S=new Date(e.created_at||new Date),k=e.duration_months||30,_=new Date(S.getTime()+24*k*60*60*1e3);return{id:e.id,userId:e.user_id,user:{id:e.user_id,firstName:(null===(t=e.users)||void 0===t?void 0:t.first_name)||"Utilisateur",lastName:(null===(r=e.users)||void 0===r?void 0:r.last_name)||"Inconnu",email:(null===(n=e.users)||void 0===n?void 0:n.email)||"email@inconnu.com",phone:(null===(a=e.users)||void 0===a?void 0:a.phone_number)||"Non sp\xe9cifi\xe9",dateOfBirth:null===(i=e.users)||void 0===i?void 0:i.date_of_birth,gender:null===(o=e.users)||void 0===o?void 0:o.gender,address:null===(l=e.users)||void 0===l?void 0:l.address,city:null===(c=e.users)||void 0===c?void 0:c.city,university:null===(d=e.users)||void 0===d?void 0:d.university,studentId:null===(u=e.users)||void 0===u?void 0:u.student_id,temoinName:null===(m=e.users)||void 0===m?void 0:m.temoin_name,temoinPhone:null===(h=e.users)||void 0===h?void 0:h.temoin_phone,temoinQuartier:null===(p=e.users)||void 0===p?void 0:p.temoin_quartier,identityCardUrl:null===(f=e.users)||void 0===f?void 0:f.identity_card_url,studentCardUrl:null===(x=e.users)||void 0===x?void 0:x.student_card_url,temoinIdentityCardUrl:null===(g=e.users)||void 0===g?void 0:g.temoin_identity_card_url,profileImageUrl:null===(v=e.users)||void 0===v?void 0:v.profile_image_url,status:null===(b=e.users)||void 0===b?void 0:b.status,createdAt:null===(y=e.users)||void 0===y?void 0:y.created_at},amount:e.amount||0,totalAmount:Math.round(w),paidAmount:Math.round(j),remainingAmount:Math.round(N),duration:e.duration_months||0,purpose:e.purpose||"Non sp\xe9cifi\xe9",status:e.status||"pending",requestDate:e.created_at||(new Date).toISOString(),dueDate:_.toISOString(),guarantee:e.guarantee||"Non sp\xe9cifi\xe9e",employment_status:e.employment_status||"Non sp\xe9cifi\xe9",momoNumber:e.momo_number||"Non sp\xe9cifi\xe9",momoNetwork:e.momo_network||"Non sp\xe9cifi\xe9",momoName:e.momo_name||"Non sp\xe9cifi\xe9",interest_rate:e.interest_rate||0,monthly_payment:e.monthly_payment||0,approved_by:e.approved_by,approved_at:e.approved_at}});i(n);const a=n.filter(e=>"pending"===e.status).length,o=n.filter(e=>"active"===e.status||"approved"===e.status).length,l=n.filter(e=>"completed"===e.status).length,c=n.reduce((e,t)=>e+t.amount,0);v({totalRequests:n.length,pending:a,active:o,completed:l,totalAmount:c})}else console.error("[ADMIN_LOANS] \u274c Erreur:",{loans:e.error,payments:t.error}),d("Erreur lors du chargement des demandes")}catch(c){console.error("[ADMIN_LOANS] \u274c Erreur:",c),d(c.message||"Une erreur est survenue")}finally{l(!1)}},y=a.reduce((e,t)=>{const r=t.userId;return e[r]||(e[r]={user:t.user,loans:[],stats:{newRequests:0,activeLoans:0,completedLoans:0,totalBorrowed:0,totalPaid:0}}),e[r].loans.push(t),"pending"===t.status&&e[r].stats.newRequests++,"active"!==t.status&&"approved"!==t.status||e[r].stats.activeLoans++,"completed"===t.status&&e[r].stats.completedLoans++,e[r].stats.totalBorrowed+=t.amount,e[r].stats.totalPaid+=t.paidAmount,e},{}),j=Object.values(y).filter(e=>{const t=!u||((t,r,s,n)=>{const a=u.toLowerCase();return(null===(t=e.user.firstName)||void 0===t?void 0:t.toLowerCase().includes(a))||(null===(r=e.user.lastName)||void 0===r?void 0:r.toLowerCase().includes(a))||(null===(s=e.user.email)||void 0===s?void 0:s.toLowerCase().includes(a))||(null===(n=e.user.phone)||void 0===n?void 0:n.includes(a))})(),r="all"===h||("pending"===h?e.stats.newRequests>0:"active"===h?e.stats.activeLoans>0:"completed"!==h||e.stats.completedLoans>0&&0===e.stats.newRequests&&0===e.stats.activeLoans);return t&&r}),w=e=>e.newRequests>0?(0,Ks.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 sm:px-3 py-1 rounded-full text-[10px] sm:text-xs font-semibold bg-yellow-100 text-yellow-700 whitespace-nowrap",children:[(0,Ks.jsx)(sp,{size:12,className:"sm:w-3.5 sm:h-3.5 flex-shrink-0"}),(0,Ks.jsxs)("span",{className:"hidden sm:inline",children:[e.newRequests," Nouvelle",e.newRequests>1?"s":""," demande",e.newRequests>1?"s":""]}),(0,Ks.jsxs)("span",{className:"sm:hidden",children:[e.newRequests," Nouv."]})]}):e.activeLoans>0?(0,Ks.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 sm:px-3 py-1 rounded-full text-[10px] sm:text-xs font-semibold bg-blue-100 text-blue-700 whitespace-nowrap",children:[(0,Ks.jsx)(Cf,{size:12,className:"sm:w-3.5 sm:h-3.5 flex-shrink-0"}),(0,Ks.jsxs)("span",{className:"hidden sm:inline",children:[e.activeLoans," Pr\xeat",e.activeLoans>1?"s":""," en cours"]}),(0,Ks.jsxs)("span",{className:"sm:hidden",children:[e.activeLoans," Actif",e.activeLoans>1?"s":""]})]}):e.completedLoans>0?(0,Ks.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 sm:px-3 py-1 rounded-full text-[10px] sm:text-xs font-semibold bg-green-100 text-green-700 whitespace-nowrap",children:[(0,Ks.jsx)(tn,{size:12,className:"sm:w-3.5 sm:h-3.5 flex-shrink-0"}),(0,Ks.jsxs)("span",{className:"hidden sm:inline",children:[e.completedLoans," Pr\xeat",e.completedLoans>1?"s":""," rembours\xe9",e.completedLoans>1?"s":""]}),(0,Ks.jsxs)("span",{className:"sm:hidden",children:[e.completedLoans," OK"]})]}):null;return o?(0,Ks.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 flex items-center justify-center",children:(0,Ks.jsxs)("div",{className:"text-center",children:[(0,Ks.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-blue-500 border-t-transparent mx-auto mb-4"}),(0,Ks.jsx)("p",{className:"text-gray-600 font-medium",children:"Chargement des demandes..."})]})}):c?(0,Ks.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 flex items-center justify-center p-4",children:(0,Ks.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8 max-w-md w-full text-center",children:[(0,Ks.jsx)("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,Ks.jsx)(zf,{size:32,className:"text-red-600"})}),(0,Ks.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Erreur de chargement"}),(0,Ks.jsx)("p",{className:"text-gray-600 mb-6",children:c}),(0,Ks.jsxs)("button",{onClick:b,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl transition-colors",children:[(0,Ks.jsx)(Pf,{size:18}),"R\xe9essayer"]})]})}):(0,Ks.jsxs)(Ks.Fragment,{children:[(0,Ks.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 pb-24",children:[(0,Ks.jsx)("div",{className:"bg-white/80 backdrop-blur-lg shadow-lg border-b border-white/50 sticky top-0 z-30",children:(0,Ks.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:(0,Ks.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Ks.jsxs)("div",{className:"flex items-center gap-4",children:[(0,Ks.jsx)("div",{className:"p-3 bg-gradient-to-br from-blue-500 to-purple-600 rounded-2xl shadow-lg",children:(0,Ks.jsx)(yp,{size:32,className:"text-white"})}),(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("h1",{className:"text-3xl font-bold text-gray-900 font-montserrat",children:"AB Pret"}),(0,Ks.jsx)("p",{className:"text-gray-600 font-montserrat",children:"Gestion des demandes de pr\xeats"})]})]}),(0,Ks.jsxs)("button",{onClick:b,className:"flex items-center gap-2 px-4 py-2 bg-white hover:bg-gray-50 border border-gray-200 rounded-xl transition-all duration-200 shadow-sm hover:shadow",children:[(0,Ks.jsx)(Pf,{size:18,className:"text-gray-600"}),(0,Ks.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Actualiser"})]})]})})}),(0,Ks.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,Ks.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[(0,Ks.jsxs)("div",{className:"bg-white rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-100 group",children:[(0,Ks.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,Ks.jsx)("div",{className:"p-3 bg-yellow-100 rounded-xl group-hover:scale-110 transition-transform duration-300",children:(0,Ks.jsx)(sp,{size:24,className:"text-yellow-600"})}),(0,Ks.jsxs)("div",{className:"text-right",children:[(0,Ks.jsx)("p",{className:"text-sm text-gray-600 font-medium",children:"En attente"}),(0,Ks.jsx)("p",{className:"text-3xl font-bold text-gray-900 mt-1",children:g.pending})]})]}),(0,Ks.jsx)("div",{className:"pt-4 border-t border-gray-100",children:(0,Ks.jsx)("span",{className:"text-xs text-gray-500",children:"Nouvelles demandes"})})]}),(0,Ks.jsxs)("div",{className:"bg-gradient-to-br from-blue-500 to-purple-600 rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 text-white group",children:[(0,Ks.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,Ks.jsx)("div",{className:"p-3 bg-white/20 rounded-xl group-hover:scale-110 transition-transform duration-300",children:(0,Ks.jsx)(Cf,{size:24,className:"text-white"})}),(0,Ks.jsxs)("div",{className:"text-right",children:[(0,Ks.jsx)("p",{className:"text-sm text-blue-100 font-medium",children:"Pr\xeats actifs"}),(0,Ks.jsx)("p",{className:"text-3xl font-bold mt-1",children:g.active})]})]}),(0,Ks.jsxs)("div",{className:"flex items-center gap-2 pt-4 border-t border-white/20",children:[(0,Ks.jsx)(Of,{size:16,className:"text-blue-200"}),(0,Ks.jsx)("span",{className:"text-sm text-blue-100",children:"En cours de remboursement"})]})]}),(0,Ks.jsxs)("div",{className:"bg-white rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-100 group",children:[(0,Ks.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,Ks.jsx)("div",{className:"p-3 bg-green-100 rounded-xl group-hover:scale-110 transition-transform duration-300",children:(0,Ks.jsx)(tn,{size:24,className:"text-green-600"})}),(0,Ks.jsxs)("div",{className:"text-right",children:[(0,Ks.jsx)("p",{className:"text-sm text-gray-600 font-medium",children:"Rembours\xe9s"}),(0,Ks.jsx)("p",{className:"text-3xl font-bold text-gray-900 mt-1",children:g.completed})]})]}),(0,Ks.jsx)("div",{className:"pt-4 border-t border-gray-100",children:(0,Ks.jsx)("span",{className:"text-xs text-gray-500",children:"Pr\xeats termin\xe9s"})})]}),(0,Ks.jsxs)("div",{className:"bg-white rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-100 group",children:[(0,Ks.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,Ks.jsx)("div",{className:"p-3 bg-purple-100 rounded-xl group-hover:scale-110 transition-transform duration-300",children:(0,Ks.jsx)(_p,{size:24,className:"text-purple-600"})}),(0,Ks.jsxs)("div",{className:"text-right",children:[(0,Ks.jsx)("p",{className:"text-sm text-gray-600 font-medium",children:"Montant total"}),(0,Ks.jsx)("p",{className:"text-xl font-bold text-gray-900 mt-1",children:pf(g.totalAmount)})]})]}),(0,Ks.jsx)("div",{className:"pt-4 border-t border-gray-100",children:(0,Ks.jsx)("span",{className:"text-xs text-gray-500",children:"Tous les pr\xeats"})})]})]}),(0,Ks.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 p-4 mb-6",children:[(0,Ks.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,Ks.jsxs)("div",{className:"flex-1 relative",children:[(0,Ks.jsx)(Mf,{size:20,className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,Ks.jsx)("input",{type:"text",placeholder:"Rechercher par nom, email ou t\xe9l\xe9phone...",value:u,onChange:e=>m(e.target.value),className:"w-full pl-12 pr-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent font-montserrat"})]}),(0,Ks.jsxs)("div",{className:"flex items-center gap-2 sm:min-w-[250px]",children:[(0,Ks.jsx)(Ff,{size:20,className:"text-gray-400 flex-shrink-0"}),(0,Ks.jsxs)("select",{value:h,onChange:e=>p(e.target.value),className:"flex-1 px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent font-montserrat bg-white cursor-pointer",children:[(0,Ks.jsx)("option",{value:"all",children:"Tous les statuts"}),(0,Ks.jsx)("option",{value:"pending",children:"\ud83d\udfe1 Demandes en attente"}),(0,Ks.jsx)("option",{value:"active",children:"\ud83d\udd35 Pr\xeats en cours"}),(0,Ks.jsx)("option",{value:"completed",children:"\ud83d\udfe2 Pr\xeats rembours\xe9s"})]})]})]}),(u||"all"!==h)&&(0,Ks.jsxs)("div",{className:"flex items-center gap-2 mt-3 pt-3 border-t border-gray-100",children:[(0,Ks.jsx)("span",{className:"text-sm text-gray-600",children:"Filtres actifs:"}),u&&(0,Ks.jsxs)("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-xs font-medium",children:['Recherche: "',u,'"',(0,Ks.jsx)("button",{onClick:()=>m(""),className:"hover:bg-blue-200 rounded-full p-0.5 transition-colors",children:(0,Ks.jsx)(nn,{size:12})})]}),"all"!==h&&(0,Ks.jsxs)("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-purple-100 text-purple-700 rounded-full text-xs font-medium",children:["Statut: ","pending"===h?"En attente":"active"===h?"En cours":"Rembours\xe9s",(0,Ks.jsx)("button",{onClick:()=>p("all"),className:"hover:bg-purple-200 rounded-full p-0.5 transition-colors",children:(0,Ks.jsx)(nn,{size:12})})]}),(0,Ks.jsx)("button",{onClick:()=>{m(""),p("all")},className:"ml-auto text-xs text-gray-500 hover:text-gray-700 font-medium",children:"R\xe9initialiser tout"})]})]}),(0,Ks.jsxs)("div",{className:"space-y-4",children:[(0,Ks.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,Ks.jsxs)("h2",{className:"text-xl font-bold text-gray-900 font-montserrat",children:["Clients (",j.length,")"]})}),0===j.length?(0,Ks.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 p-12 text-center",children:[(0,Ks.jsx)(Za,{size:64,className:"mx-auto text-gray-300 mb-4"}),(0,Ks.jsx)("p",{className:"text-gray-500 font-medium",children:"Aucun client trouv\xe9"}),u&&(0,Ks.jsx)("button",{onClick:()=>m(""),className:"mt-4 text-blue-600 hover:text-blue-700 font-medium",children:"Effacer la recherche"})]}):(0,Ks.jsx)("div",{className:"grid grid-cols-1 gap-4",children:j.map(e=>{var t,r;return(0,Ks.jsx)("div",{className:"bg-white rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-100 overflow-hidden group cursor-pointer",onClick:()=>x(e),children:(0,Ks.jsxs)("div",{className:"p-4 sm:p-6",children:[(0,Ks.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-3 mb-4",children:[(0,Ks.jsxs)("div",{className:"flex items-start gap-3 min-w-0 flex-1",children:[(0,Ks.jsxs)("div",{className:"w-12 h-12 sm:w-14 sm:h-14 bg-gradient-to-br from-blue-400 to-purple-500 rounded-full flex items-center justify-center text-white font-bold text-lg sm:text-xl shadow-lg flex-shrink-0",children:[(null===(t=e.user.firstName)||void 0===t?void 0:t[0])||"?",(null===(r=e.user.lastName)||void 0===r?void 0:r[0])||""]}),(0,Ks.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,Ks.jsxs)("h3",{className:"text-base sm:text-lg font-bold text-gray-900 font-montserrat truncate",children:[e.user.firstName," ",e.user.lastName]}),(0,Ks.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-3 mt-1",children:[(0,Ks.jsxs)("div",{className:"flex items-center gap-1 text-xs sm:text-sm text-gray-500 min-w-0",children:[(0,Ks.jsx)(Jp,{size:12,className:"flex-shrink-0"}),(0,Ks.jsx)("span",{className:"truncate",children:e.user.email})]}),e.user.phone&&(0,Ks.jsxs)("div",{className:"flex items-center gap-1 text-xs sm:text-sm text-gray-500",children:[(0,Ks.jsx)(Kp,{size:12,className:"flex-shrink-0"}),(0,Ks.jsx)("span",{children:e.user.phone})]})]})]})]}),(0,Ks.jsx)("div",{className:"flex-shrink-0",children:w(e.stats)})]}),(0,Ks.jsxs)("div",{className:"grid grid-cols-3 gap-2 sm:gap-4 mb-4",children:[(0,Ks.jsxs)("div",{className:"bg-yellow-50 rounded-xl p-2 sm:p-3 text-center",children:[(0,Ks.jsx)("p",{className:"text-xl sm:text-2xl font-bold text-yellow-700",children:e.stats.newRequests}),(0,Ks.jsx)("p",{className:"text-[10px] sm:text-xs text-gray-600 mt-1",children:"Nouvelles"})]}),(0,Ks.jsxs)("div",{className:"bg-blue-50 rounded-xl p-2 sm:p-3 text-center",children:[(0,Ks.jsx)("p",{className:"text-xl sm:text-2xl font-bold text-blue-700",children:e.stats.activeLoans}),(0,Ks.jsx)("p",{className:"text-[10px] sm:text-xs text-gray-600 mt-1",children:"En cours"})]}),(0,Ks.jsxs)("div",{className:"bg-green-50 rounded-xl p-2 sm:p-3 text-center",children:[(0,Ks.jsx)("p",{className:"text-xl sm:text-2xl font-bold text-green-700",children:e.stats.completedLoans}),(0,Ks.jsx)("p",{className:"text-[10px] sm:text-xs text-gray-600 mt-1",children:"Rembours\xe9s"})]})]}),(0,Ks.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 pt-4 border-t border-gray-100",children:[(0,Ks.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-4 text-xs sm:text-sm text-gray-600",children:[(0,Ks.jsxs)("span",{className:"truncate",children:["Total emprunt\xe9: ",(0,Ks.jsx)("span",{className:"font-bold text-gray-900",children:pf(e.stats.totalBorrowed)})]}),(0,Ks.jsxs)("span",{className:"truncate",children:["Total pay\xe9: ",(0,Ks.jsx)("span",{className:"font-bold text-green-600",children:pf(e.stats.totalPaid)})]})]}),(0,Ks.jsxs)("button",{className:"flex items-center justify-center gap-2 px-3 sm:px-4 py-2 bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white rounded-xl transition-all duration-200 shadow-md hover:shadow-lg w-full sm:w-auto",children:[(0,Ks.jsx)(Qp,{size:16}),(0,Ks.jsx)("span",{className:"text-sm font-medium",children:"Voir le profil"})]})]})]})},e.user.id)})})]})]})]}),f&&(0,Ks.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md z-50 flex items-center justify-center p-4 overflow-y-auto",children:(0,Ks.jsxs)("div",{className:"bg-white rounded-3xl shadow-2xl max-w-6xl w-full my-8 max-h-[95vh] overflow-hidden",children:[(0,Ks.jsx)("div",{className:"sticky top-0 bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-600 text-white p-6 rounded-t-3xl z-10",children:(0,Ks.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Ks.jsxs)("div",{className:"flex items-center gap-4",children:[(0,Ks.jsxs)("div",{className:"w-16 h-16 bg-white/20 backdrop-blur-sm rounded-2xl flex items-center justify-center text-white font-bold text-2xl shadow-lg",children:[null===(e=f.user.firstName)||void 0===e?void 0:e[0],null===(r=f.user.lastName)||void 0===r?void 0:r[0]]}),(0,Ks.jsxs)("div",{children:[(0,Ks.jsxs)("h3",{className:"text-2xl font-bold",children:[f.user.firstName," ",f.user.lastName]}),(0,Ks.jsxs)("p",{className:"text-indigo-100 flex items-center gap-2",children:[(0,Ks.jsx)(Za,{size:16}),f.loans.length," demande",f.loans.length>1?"s":""," de pr\xeat"]})]})]}),(0,Ks.jsx)("button",{onClick:()=>x(null),className:"p-3 hover:bg-white/20 rounded-2xl transition-all duration-200 hover:scale-105",children:(0,Ks.jsx)(nn,{size:24})})]})}),(0,Ks.jsxs)("div",{className:"p-6 pb-32 space-y-8 max-h-[calc(95vh-200px)] overflow-y-auto",children:[(0,Ks.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-2xl p-6 border border-blue-100",children:[(0,Ks.jsxs)("h4",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center gap-3",children:[(0,Ks.jsx)("div",{className:"p-2 bg-blue-100 rounded-xl",children:(0,Ks.jsx)(Za,{size:20,className:"text-blue-600"})}),"Informations Personnelles"]}),(0,Ks.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[(0,Ks.jsxs)("div",{className:"space-y-4",children:[(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("label",{className:"text-sm font-medium text-gray-600",children:"Nom complet"}),(0,Ks.jsxs)("p",{className:"text-lg font-semibold text-gray-900",children:[f.user.firstName," ",f.user.lastName]})]}),(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("label",{className:"text-sm font-medium text-gray-600",children:"Email"}),(0,Ks.jsx)("p",{className:"text-gray-900",children:f.user.email})]}),(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("label",{className:"text-sm font-medium text-gray-600",children:"T\xe9l\xe9phone"}),(0,Ks.jsx)("p",{className:"text-gray-900",children:f.user.phone})]}),f.user.dateOfBirth&&(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("label",{className:"text-sm font-medium text-gray-600",children:"Date de naissance"}),(0,Ks.jsx)("p",{className:"text-gray-900",children:new Date(f.user.dateOfBirth).toLocaleDateString("fr-FR")})]})]}),(0,Ks.jsxs)("div",{className:"space-y-4",children:[f.user.university&&(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("label",{className:"text-sm font-medium text-gray-600",children:"Universit\xe9"}),(0,Ks.jsx)("p",{className:"text-gray-900",children:f.user.university})]}),f.user.studentId&&(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("label",{className:"text-sm font-medium text-gray-600",children:"Num\xe9ro \xe9tudiant"}),(0,Ks.jsx)("p",{className:"text-gray-900",children:f.user.studentId})]}),f.user.address&&(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("label",{className:"text-sm font-medium text-gray-600",children:"Adresse"}),(0,Ks.jsx)("p",{className:"text-gray-900",children:f.user.address})]}),f.user.city&&(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("label",{className:"text-sm font-medium text-gray-600",children:"Ville"}),(0,Ks.jsx)("p",{className:"text-gray-900",children:f.user.city})]})]}),(0,Ks.jsxs)("div",{className:"space-y-4",children:[f.user.temoinName&&(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("label",{className:"text-sm font-medium text-gray-600",children:"T\xe9moin"}),(0,Ks.jsx)("p",{className:"text-gray-900",children:f.user.temoinName})]}),f.user.temoinPhone&&(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("label",{className:"text-sm font-medium text-gray-600",children:"T\xe9l\xe9phone t\xe9moin"}),(0,Ks.jsx)("p",{className:"text-gray-900",children:f.user.temoinPhone})]}),f.user.temoinQuartier&&(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("label",{className:"text-sm font-medium text-gray-600",children:"Quartier t\xe9moin"}),(0,Ks.jsx)("p",{className:"text-gray-900",children:f.user.temoinQuartier})]})]})]})]}),(0,Ks.jsxs)("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 rounded-2xl p-6 border border-green-100",children:[(0,Ks.jsxs)("h4",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center gap-3",children:[(0,Ks.jsx)("div",{className:"p-2 bg-green-100 rounded-xl",children:(0,Ks.jsx)(Sp,{size:20,className:"text-green-600"})}),"Documents Fournis"]}),(0,Ks.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[f.user.identityCardUrl&&(0,Ks.jsxs)("div",{className:"bg-white rounded-xl p-4 border border-green-200",children:[(0,Ks.jsx)("h5",{className:"font-semibold text-gray-900 mb-2",children:"Carte d'identit\xe9"}),(0,Ks.jsxs)("a",{href:f.user.identityCardUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 text-green-600 hover:text-green-700 font-medium",children:[(0,Ks.jsx)(Qp,{size:16}),"Voir le document"]})]}),f.user.studentCardUrl&&(0,Ks.jsxs)("div",{className:"bg-white rounded-xl p-4 border border-green-200",children:[(0,Ks.jsx)("h5",{className:"font-semibold text-gray-900 mb-2",children:"Carte \xe9tudiante"}),(0,Ks.jsxs)("a",{href:f.user.studentCardUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 text-green-600 hover:text-green-700 font-medium",children:[(0,Ks.jsx)(Qp,{size:16}),"Voir le document"]})]}),f.user.temoinIdentityCardUrl&&(0,Ks.jsxs)("div",{className:"bg-white rounded-xl p-4 border border-green-200",children:[(0,Ks.jsx)("h5",{className:"font-semibold text-gray-900 mb-2",children:"Carte d'identit\xe9 t\xe9moin"}),(0,Ks.jsxs)("a",{href:f.user.temoinIdentityCardUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 text-green-600 hover:text-green-700 font-medium",children:[(0,Ks.jsx)(Qp,{size:16}),"Voir le document"]})]})]})]}),(0,Ks.jsxs)("div",{className:"space-y-6",children:[(0,Ks.jsxs)("h4",{className:"text-xl font-bold text-gray-900 flex items-center gap-3",children:[(0,Ks.jsx)("div",{className:"p-2 bg-purple-100 rounded-xl",children:(0,Ks.jsx)(yp,{size:20,className:"text-purple-600"})}),"Demandes de Pr\xeat"]}),(0,Ks.jsx)("div",{className:"space-y-6",children:f.loans.map(e=>(0,Ks.jsxs)("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100 rounded-2xl p-6 border border-gray-200 shadow-sm",children:[(0,Ks.jsx)("div",{className:"flex items-start justify-between mb-6",children:(0,Ks.jsxs)("div",{className:"flex-1",children:[(0,Ks.jsxs)("div",{className:"flex items-center gap-4 mb-3",children:[(0,Ks.jsx)("div",{className:"text-3xl font-bold text-gray-900",children:pf(e.amount)}),(0,Ks.jsxs)("span",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full text-sm font-semibold ".concat("pending"===e.status?"bg-yellow-100 text-yellow-700 border border-yellow-200":"active"===e.status||"approved"===e.status?"bg-blue-100 text-blue-700 border border-blue-200":"completed"===e.status?"bg-green-100 text-green-700 border border-green-200":"bg-red-100 text-red-700 border border-red-200"),children:["pending"===e.status&&(0,Ks.jsx)(sp,{size:16}),("active"===e.status||"approved"===e.status)&&(0,Ks.jsx)(Cf,{size:16}),"completed"===e.status&&(0,Ks.jsx)(tn,{size:16}),"rejected"===e.status&&(0,Ks.jsx)(Uf,{size:16}),"pending"===e.status?"En attente":"active"===e.status||"approved"===e.status?"En cours":"completed"===e.status?"Rembours\xe9":"Rejet\xe9"]})]}),(0,Ks.jsx)("p",{className:"text-gray-600 text-lg",children:e.purpose})]})}),(0,Ks.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[(0,Ks.jsxs)("div",{className:"bg-white rounded-xl p-4 border border-gray-200",children:[(0,Ks.jsx)("h5",{className:"font-semibold text-gray-900 mb-2",children:"Dur\xe9e"}),(0,Ks.jsxs)("p",{className:"text-2xl font-bold text-blue-600",children:[e.duration," jours"]})]}),(0,Ks.jsxs)("div",{className:"bg-white rounded-xl p-4 border border-gray-200",children:[(0,Ks.jsx)("h5",{className:"font-semibold text-gray-900 mb-2",children:"Taux d'int\xe9r\xeat"}),(0,Ks.jsxs)("p",{className:"text-2xl font-bold text-purple-600",children:[e.interest_rate,"%"]})]}),(0,Ks.jsxs)("div",{className:"bg-white rounded-xl p-4 border border-gray-200",children:[(0,Ks.jsx)("h5",{className:"font-semibold text-gray-900 mb-2",children:"Montant total"}),(0,Ks.jsx)("p",{className:"text-2xl font-bold text-green-600",children:pf(e.totalAmount)})]}),(0,Ks.jsxs)("div",{className:"bg-white rounded-xl p-4 border border-gray-200",children:[(0,Ks.jsx)("h5",{className:"font-semibold text-gray-900 mb-2",children:"Pay\xe9"}),(0,Ks.jsx)("p",{className:"text-2xl font-bold text-emerald-600",children:pf(e.paidAmount)})]})]}),e.momoNumber&&"Non sp\xe9cifi\xe9"!==e.momoNumber&&(0,Ks.jsxs)("div",{className:"bg-blue-50 rounded-xl p-4 mb-6 border border-blue-200",children:[(0,Ks.jsxs)("h5",{className:"font-semibold text-blue-900 mb-4 flex items-center gap-2",children:[(0,Ks.jsx)(yp,{size:18}),"Informations MoMo"]}),(0,Ks.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("label",{className:"text-sm font-medium text-blue-700",children:"Num\xe9ro"}),(0,Ks.jsx)("p",{className:"text-lg font-bold text-blue-900",children:e.momoNumber})]}),(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("label",{className:"text-sm font-medium text-blue-700",children:"R\xe9seau"}),(0,Ks.jsx)("p",{className:"text-lg font-bold text-blue-900",children:e.momoNetwork})]}),(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("label",{className:"text-sm font-medium text-blue-700",children:"Nom sur le compte"}),(0,Ks.jsx)("p",{className:"text-lg font-bold text-blue-900",children:e.momoName})]})]})]}),e.guarantee&&"Non sp\xe9cifi\xe9e"!==e.guarantee&&(0,Ks.jsxs)("div",{className:"bg-orange-50 rounded-xl p-4 mb-6 border border-orange-200",children:[(0,Ks.jsxs)("h5",{className:"font-semibold text-orange-900 mb-2 flex items-center gap-2",children:[(0,Ks.jsx)(qp,{size:18}),"Garanties"]}),(0,Ks.jsx)("p",{className:"text-orange-900",children:e.guarantee})]}),(0,Ks.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[(0,Ks.jsxs)("div",{className:"bg-white rounded-xl p-4 border border-gray-200",children:[(0,Ks.jsx)("h5",{className:"font-semibold text-gray-900 mb-2",children:"Date de demande"}),(0,Ks.jsx)("p",{className:"text-gray-600",children:new Date(e.requestDate).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),(0,Ks.jsxs)("div",{className:"bg-white rounded-xl p-4 border border-gray-200",children:[(0,Ks.jsx)("h5",{className:"font-semibold text-gray-900 mb-2",children:"Date d'\xe9ch\xe9ance"}),(0,Ks.jsx)("p",{className:"text-gray-600",children:new Date(e.dueDate).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric"})})]})]}),"pending"===e.status&&(0,Ks.jsxs)("div",{className:"flex gap-4 pt-6 border-t border-gray-200",children:[(0,Ks.jsxs)("button",{onClick:t=>{t.stopPropagation(),(async e=>{try{(await Ws(e,"approved")).success?(i(t=>t.map(t=>t.id===e?ze(ze({},t),{},{status:"approved"}):t)),s("Demande approuv\xe9e avec succ\xe8s"),b()):n("Erreur lors de l'approbation")}catch(c){console.error("[ADMIN_LOANS] Erreur approbation:",c),n("Erreur lors de l'approbation")}})(e.id)},className:"flex-1 flex items-center justify-center gap-3 px-6 py-4 bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white rounded-xl transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105 font-semibold",children:[(0,Ks.jsx)(Bf,{size:20}),"Approuver la demande"]}),(0,Ks.jsxs)("button",{onClick:t=>{t.stopPropagation(),(async e=>{try{(await Ws(e,"rejected")).success?(i(t=>t.map(t=>t.id===e?ze(ze({},t),{},{status:"rejected"}):t)),s("Demande rejet\xe9e"),b()):n("Erreur lors du rejet")}catch(c){console.error("[ADMIN_LOANS] Erreur rejet:",c),n("Erreur lors du rejet")}})(e.id)},className:"flex-1 flex items-center justify-center gap-3 px-6 py-4 bg-gradient-to-r from-red-500 to-pink-600 hover:from-red-600 hover:to-pink-700 text-white rounded-xl transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105 font-semibold",children:[(0,Ks.jsx)(Vf,{size:20}),"Rejeter la demande"]})]})]},e.id))})]})]})]})})]})},Hf=en("FileImage",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["circle",{cx:"10",cy:"13",r:"2",key:"6v46hv"}],["path",{d:"m20 17-1.09-1.09a2 2 0 0 0-2.82 0L10 22",key:"17vly1"}]]),Wf=()=>{const e=Y(),{showSuccess:r,showError:s}=ln(),[n,a]=(0,t.useState)([]),[i,o]=(0,t.useState)(!0),[l,c]=(0,t.useState)(""),[d,u]=(0,t.useState)("all"),[m,h]=(0,t.useState)(null),[p,f]=(0,t.useState)(!1),[x,g]=(0,t.useState)(!1),[v,b]=(0,t.useState)({url:"",title:""});(0,t.useEffect)(()=>{y()},[]);const y=async()=>{try{o(!0);const e=await Vs();if(e.success){const t=e.data.map(e=>({id:e.id,firstName:e.first_name||"Utilisateur",lastName:e.last_name||"Inconnu",email:e.email||"email@inconnu.com",phone:e.phone_number||"Non renseign\xe9",status:e.status||"pending",registrationDate:e.created_at||(new Date).toISOString(),totalLoans:e.totalLoans||0,activeLoans:e.activeLoans||0,totalAmount:e.totalAmount||0,verified:"approved"===e.status,filiere:e.filiere||"Non sp\xe9cifi\xe9e",anneeEtude:e.annee_etude||"Non sp\xe9cifi\xe9e",entite:e.entite||"Non sp\xe9cifi\xe9e",address:e.address||"Non sp\xe9cifi\xe9e",facebookName:e.facebook_name||"Non sp\xe9cifi\xe9",temoinName:e.temoin_name||"Non sp\xe9cifi\xe9",temoinQuartier:e.temoin_quartier||"Non sp\xe9cifi\xe9",temoinPhone:e.temoin_phone||"Non sp\xe9cifi\xe9",temoinEmail:e.temoin_email||"Non sp\xe9cifi\xe9",emergencyName:e.emergency_name||"Non sp\xe9cifi\xe9",emergencyRelation:e.emergency_relation||"Non sp\xe9cifi\xe9",emergencyPhone:e.emergency_phone||"Non sp\xe9cifi\xe9",emergencyEmail:e.emergency_email||"Non sp\xe9cifi\xe9",emergencyAddress:e.emergency_address||"Non sp\xe9cifi\xe9",userIdentityCard:e.user_identity_card_name||"Non sp\xe9cifi\xe9",temoinIdentityCard:e.temoin_identity_card_name||"Non sp\xe9cifi\xe9",studentCard:e.student_card_name||"Non sp\xe9cifi\xe9",userIdentityCardUrl:e.user_identity_card_url||null,temoinIdentityCardUrl:e.temoin_identity_card_url||null,studentCardUrl:e.student_card_url||null}));a(t)}else s("Erreur lors du chargement des utilisateurs")}catch(e){console.error("[ADMIN] Erreur:",e),s("Erreur lors du chargement des utilisateurs")}finally{o(!1)}},j=(e,t)=>{e&&(b({url:e,title:t}),g(!0))},w=e=>{const t={approved:{bg:"bg-green-100",text:"text-green-700",label:"Approuv\xe9",icon:tn},pending:{bg:"bg-yellow-100",text:"text-yellow-700",label:"En attente",icon:zf},rejected:{bg:"bg-red-100",text:"text-red-700",label:"Rejet\xe9",icon:Uf}},r=t[e]||t.pending,s=r.icon;return(0,Ks.jsxs)("span",{className:"inline-flex items-center gap-1.5 px-3 py-1 rounded-full text-xs font-medium ".concat(r.bg," ").concat(r.text),children:[(0,Ks.jsx)(s,{size:14}),r.label]})},N=n.filter(e=>{const t=e.firstName.toLowerCase().includes(l.toLowerCase())||e.lastName.toLowerCase().includes(l.toLowerCase())||e.email.toLowerCase().includes(l.toLowerCase())||e.phone.includes(l),r="all"===d||e.status===d;return t&&r}),S={total:n.length,approved:n.filter(e=>"approved"===e.status).length,pending:n.filter(e=>"pending"===e.status).length,rejected:n.filter(e=>"rejected"===e.status).length};return i?(0,Ks.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 flex items-center justify-center",children:(0,Ks.jsxs)("div",{className:"text-center",children:[(0,Ks.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-purple-500 border-t-transparent mx-auto mb-4"}),(0,Ks.jsx)("p",{className:"text-gray-600 font-medium",children:"Chargement des utilisateurs..."})]})}):(0,Ks.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-yellow-50 to-slate-100 pb-24",children:[(0,Ks.jsx)("div",{className:"bg-white/80 backdrop-blur-lg shadow-lg border-b border-white/50 sticky top-0 z-30",children:(0,Ks.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,Ks.jsxs)("div",{className:"flex items-center justify-between py-6",children:[(0,Ks.jsxs)("div",{className:"flex items-center gap-4",children:[(0,Ks.jsx)("button",{onClick:()=>e("/admin/menu"),className:"p-2 hover:bg-gray-100 rounded-xl transition-colors",children:(0,Ks.jsx)(hf,{size:24,className:"text-gray-600"})}),(0,Ks.jsxs)("div",{children:[(0,Ks.jsxs)("h1",{className:"text-3xl font-bold text-secondary-900 font-montserrat flex items-center gap-3",children:[(0,Ks.jsx)(Lf,{className:"text-primary-600",size:32}),"Gestion des Utilisateurs"]}),(0,Ks.jsxs)("p",{className:"text-gray-600 font-montserrat mt-1",children:[N.length," utilisateur",N.length>1?"s":""]})]})]}),(0,Ks.jsxs)("button",{onClick:y,className:"flex items-center gap-2 px-4 py-2 bg-primary-500 hover:bg-primary-600 text-white rounded-xl font-medium transition-all duration-200",children:[(0,Ks.jsx)(Pf,{size:18}),(0,Ks.jsx)("span",{className:"hidden sm:inline",children:"Actualiser"})]})]})})}),(0,Ks.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,Ks.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[(0,Ks.jsx)("div",{className:"bg-white rounded-2xl p-6 shadow-lg border border-gray-100",children:(0,Ks.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,Ks.jsx)("div",{className:"p-3 bg-secondary-100 rounded-xl",children:(0,Ks.jsx)(Lf,{size:24,className:"text-secondary-700"})}),(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("p",{className:"text-sm text-gray-600 font-medium",children:"Total"}),(0,Ks.jsx)("p",{className:"text-2xl font-bold text-secondary-900",children:S.total})]})]})}),(0,Ks.jsx)("div",{className:"bg-white rounded-2xl p-6 shadow-lg border border-gray-100",children:(0,Ks.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,Ks.jsx)("div",{className:"p-3 bg-green-100 rounded-xl",children:(0,Ks.jsx)(tn,{size:24,className:"text-green-600"})}),(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("p",{className:"text-sm text-gray-600 font-medium",children:"Approuv\xe9s"}),(0,Ks.jsx)("p",{className:"text-2xl font-bold text-secondary-900",children:S.approved})]})]})}),(0,Ks.jsx)("div",{className:"bg-white rounded-2xl p-6 shadow-lg border border-gray-100",children:(0,Ks.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,Ks.jsx)("div",{className:"p-3 bg-primary-100 rounded-xl",children:(0,Ks.jsx)(zf,{size:24,className:"text-primary-700"})}),(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("p",{className:"text-sm text-gray-600 font-medium",children:"En attente"}),(0,Ks.jsx)("p",{className:"text-2xl font-bold text-secondary-900",children:S.pending})]})]})}),(0,Ks.jsx)("div",{className:"bg-white rounded-2xl p-6 shadow-lg border border-gray-100",children:(0,Ks.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,Ks.jsx)("div",{className:"p-3 bg-red-100 rounded-xl",children:(0,Ks.jsx)(Uf,{size:24,className:"text-red-600"})}),(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("p",{className:"text-sm text-gray-600 font-medium",children:"Rejet\xe9s"}),(0,Ks.jsx)("p",{className:"text-2xl font-bold text-secondary-900",children:S.rejected})]})]})})]}),(0,Ks.jsx)("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 p-6 mb-8",children:(0,Ks.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,Ks.jsxs)("div",{className:"flex-1 relative",children:[(0,Ks.jsx)(Mf,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),(0,Ks.jsx)("input",{type:"text",placeholder:"Rechercher par nom, email ou t\xe9l\xe9phone...",value:l,onChange:e=>c(e.target.value),className:"w-full pl-12 pr-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all"})]}),(0,Ks.jsxs)("div",{className:"relative",children:[(0,Ks.jsx)(Ff,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),(0,Ks.jsxs)("select",{value:d,onChange:e=>u(e.target.value),className:"pl-12 pr-8 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all appearance-none bg-white cursor-pointer min-w-[200px]",children:[(0,Ks.jsx)("option",{value:"all",children:"Tous les statuts"}),(0,Ks.jsx)("option",{value:"approved",children:"Approuv\xe9s"}),(0,Ks.jsx)("option",{value:"pending",children:"En attente"}),(0,Ks.jsx)("option",{value:"rejected",children:"Rejet\xe9s"})]})]})]})}),(0,Ks.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:N.map(e=>(0,Ks.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden hover:shadow-xl transition-all duration-300",children:[(0,Ks.jsx)("div",{className:"bg-gradient-to-r from-secondary-800 to-secondary-900 p-6",children:(0,Ks.jsxs)("div",{className:"flex items-center gap-4",children:[(0,Ks.jsx)("div",{className:"w-16 h-16 bg-white rounded-full flex items-center justify-center shadow-lg",children:(0,Ks.jsx)(Za,{size:32,className:"text-primary-600"})}),(0,Ks.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Ks.jsxs)("h3",{className:"text-lg font-bold text-white truncate",children:[e.firstName," ",e.lastName]}),(0,Ks.jsx)("p",{className:"text-gray-200 text-sm truncate",children:e.email})]})]})}),(0,Ks.jsxs)("div",{className:"p-6 space-y-4",children:[(0,Ks.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[(0,Ks.jsx)(Kp,{size:16,className:"text-gray-400"}),(0,Ks.jsx)("span",{children:e.phone})]}),(0,Ks.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[(0,Ks.jsx)(yp,{size:16,className:"text-gray-400"}),(0,Ks.jsxs)("span",{children:[e.activeLoans," pr\xeat",e.activeLoans>1?"s":""," actif",e.activeLoans>1?"s":""]})]}),(0,Ks.jsxs)("div",{className:"flex items-center justify-between pt-4 border-t border-gray-100",children:[w(e.status),(0,Ks.jsxs)("button",{onClick:()=>{h(e),f(!0)},className:"flex items-center gap-2 px-4 py-2 bg-primary-500 hover:bg-primary-600 text-white rounded-xl font-medium transition-all duration-200 text-sm",children:[(0,Ks.jsx)(Qp,{size:16}),"D\xe9tails"]})]})]})]},e.id))}),0===N.length&&(0,Ks.jsxs)("div",{className:"text-center py-12",children:[(0,Ks.jsx)(Lf,{size:64,className:"text-gray-300 mx-auto mb-4"}),(0,Ks.jsx)("p",{className:"text-gray-500 text-lg font-medium",children:"Aucun utilisateur trouv\xe9"}),(0,Ks.jsx)("p",{className:"text-gray-400 text-sm mt-2",children:"Essayez de modifier vos crit\xe8res de recherche"})]})]}),p&&m&&(0,Ks.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4 overflow-y-auto",children:(0,Ks.jsxs)("div",{className:"bg-white rounded-3xl shadow-2xl max-w-4xl w-full my-8",children:[(0,Ks.jsxs)("div",{className:"sticky top-0 bg-gradient-to-r from-secondary-800 to-secondary-900 p-6 flex items-center justify-between z-10",children:[(0,Ks.jsxs)("div",{className:"flex items-center gap-4",children:[(0,Ks.jsx)("div",{className:"w-16 h-16 bg-white rounded-full flex items-center justify-center shadow-lg",children:(0,Ks.jsx)(Za,{size:32,className:"text-primary-600"})}),(0,Ks.jsxs)("div",{children:[(0,Ks.jsxs)("h2",{className:"text-2xl font-bold text-white",children:[m.firstName," ",m.lastName]}),(0,Ks.jsx)("p",{className:"text-gray-200",children:m.email})]})]}),(0,Ks.jsx)("button",{onClick:()=>f(!1),className:"p-2 hover:bg-white/20 rounded-xl transition-colors",children:(0,Ks.jsx)(nn,{size:24,className:"text-white"})})]}),(0,Ks.jsxs)("div",{className:"p-6 pb-32 overflow-y-auto max-h-[calc(90vh-200px)] space-y-6",children:[(0,Ks.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-2xl p-6 border border-blue-200",children:[(0,Ks.jsxs)("h3",{className:"text-lg font-semibold text-blue-900 font-montserrat mb-4 flex items-center",children:[(0,Ks.jsx)(Jp,{className:"w-5 h-5 mr-2"}),"Informations de Contact"]}),(0,Ks.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("p",{className:"text-sm text-blue-700 font-medium",children:"T\xe9l\xe9phone"}),(0,Ks.jsx)("p",{className:"text-blue-900 font-semibold",children:m.phone})]}),(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("p",{className:"text-sm text-blue-700 font-medium",children:"Email"}),(0,Ks.jsx)("p",{className:"text-blue-900 font-semibold break-all",children:m.email})]}),(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("p",{className:"text-sm text-blue-700 font-medium",children:"Adresse"}),(0,Ks.jsx)("p",{className:"text-blue-900",children:m.address})]}),(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("p",{className:"text-sm text-blue-700 font-medium",children:"Facebook"}),(0,Ks.jsx)("p",{className:"text-blue-900",children:m.facebookName})]})]})]}),(0,Ks.jsxs)("div",{className:"bg-gradient-to-br from-primary-50 to-primary-100 rounded-2xl p-6 border border-primary-200",children:[(0,Ks.jsxs)("h3",{className:"text-lg font-semibold text-primary-900 font-montserrat mb-4 flex items-center",children:[(0,Ks.jsx)(df,{className:"w-5 h-5 mr-2"}),"Informations Acad\xe9miques"]}),(0,Ks.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("p",{className:"text-sm text-primary-800 font-medium",children:"Fili\xe8re"}),(0,Ks.jsx)("p",{className:"text-secondary-900 font-semibold",children:m.filiere})]}),(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("p",{className:"text-sm text-primary-800 font-medium",children:"Ann\xe9e d'\xe9tude"}),(0,Ks.jsx)("p",{className:"text-secondary-900 font-semibold",children:m.anneeEtude})]}),(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("p",{className:"text-sm text-primary-800 font-medium",children:"Entit\xe9"}),(0,Ks.jsx)("p",{className:"text-secondary-900 font-semibold",children:m.entite})]})]})]}),(0,Ks.jsxs)("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-2xl p-6 border border-green-200",children:[(0,Ks.jsxs)("h3",{className:"text-lg font-semibold text-green-900 font-montserrat mb-4 flex items-center",children:[(0,Ks.jsx)(qp,{className:"w-5 h-5 mr-2"}),"Informations du T\xe9moin"]}),(0,Ks.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("p",{className:"text-sm text-green-700 font-medium",children:"Nom"}),(0,Ks.jsx)("p",{className:"text-green-900 font-semibold",children:m.temoinName})]}),(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("p",{className:"text-sm text-green-700 font-medium",children:"T\xe9l\xe9phone"}),(0,Ks.jsx)("p",{className:"text-green-900",children:m.temoinPhone})]}),(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("p",{className:"text-sm text-green-700 font-medium",children:"Email"}),(0,Ks.jsx)("p",{className:"text-green-900 break-all",children:m.temoinEmail})]}),(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("p",{className:"text-sm text-green-700 font-medium",children:"Quartier"}),(0,Ks.jsx)("p",{className:"text-green-900",children:m.temoinQuartier})]})]})]}),(0,Ks.jsxs)("div",{className:"bg-gradient-to-br from-red-50 to-red-100 rounded-2xl p-6 border border-red-200",children:[(0,Ks.jsxs)("h3",{className:"text-lg font-semibold text-red-900 font-montserrat mb-4 flex items-center",children:[(0,Ks.jsx)(zf,{className:"w-5 h-5 mr-2"}),"Contact d'Urgence"]}),(0,Ks.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("p",{className:"text-sm text-red-700 font-medium",children:"Nom"}),(0,Ks.jsx)("p",{className:"text-red-900 font-semibold",children:m.emergencyName})]}),(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("p",{className:"text-sm text-red-700 font-medium",children:"Relation"}),(0,Ks.jsx)("p",{className:"text-red-900",children:m.emergencyRelation})]}),(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("p",{className:"text-sm text-red-700 font-medium",children:"T\xe9l\xe9phone"}),(0,Ks.jsx)("p",{className:"text-red-900",children:m.emergencyPhone})]}),(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("p",{className:"text-sm text-red-700 font-medium",children:"Email"}),(0,Ks.jsx)("p",{className:"text-red-900 break-all",children:m.emergencyEmail})]}),(0,Ks.jsxs)("div",{className:"md:col-span-2",children:[(0,Ks.jsx)("p",{className:"text-sm text-red-700 font-medium",children:"Adresse"}),(0,Ks.jsx)("p",{className:"text-red-900",children:m.emergencyAddress})]})]})]}),(0,Ks.jsxs)("div",{className:"bg-gradient-to-br from-secondary-50 to-secondary-100 rounded-2xl p-6 border border-secondary-200",children:[(0,Ks.jsxs)("h3",{className:"text-lg font-semibold text-secondary-900 font-montserrat mb-4 flex items-center",children:[(0,Ks.jsx)(Hf,{className:"w-5 h-5 mr-2"}),"Documents"]}),(0,Ks.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("p",{className:"text-sm text-secondary-700 font-medium mb-2",children:"Carte d'identit\xe9"}),(0,Ks.jsx)("button",{onClick:()=>j(m.userIdentityCardUrl,"Carte d'identit\xe9"),disabled:!m.userIdentityCardUrl,className:"w-full px-4 py-3 rounded-xl font-medium transition-all ".concat(m.userIdentityCardUrl?"bg-primary-500 hover:bg-primary-600 text-white cursor-pointer":"bg-gray-100 text-gray-400 cursor-not-allowed"),children:m.userIdentityCardUrl?"Voir":"Non disponible"})]}),(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("p",{className:"text-sm text-secondary-700 font-medium mb-2",children:"Carte t\xe9moin"}),(0,Ks.jsx)("button",{onClick:()=>j(m.temoinIdentityCardUrl,"Carte d'identit\xe9 t\xe9moin"),disabled:!m.temoinIdentityCardUrl,className:"w-full px-4 py-3 rounded-xl font-medium transition-all ".concat(m.temoinIdentityCardUrl?"bg-primary-500 hover:bg-primary-600 text-white cursor-pointer":"bg-gray-100 text-gray-400 cursor-not-allowed"),children:m.temoinIdentityCardUrl?"Voir":"Non disponible"})]}),(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("p",{className:"text-sm text-secondary-700 font-medium mb-2",children:"Carte \xe9tudiant"}),(0,Ks.jsx)("button",{onClick:()=>j(m.studentCardUrl,"Carte d'\xe9tudiant"),disabled:!m.studentCardUrl,className:"w-full px-4 py-3 rounded-xl font-medium transition-all ".concat(m.studentCardUrl?"bg-primary-500 hover:bg-primary-600 text-white cursor-pointer":"bg-gray-100 text-gray-400 cursor-not-allowed"),children:m.studentCardUrl?"Voir":"Non disponible"})]})]})]}),(0,Ks.jsxs)("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 rounded-2xl p-6 border border-orange-200",children:[(0,Ks.jsxs)("h3",{className:"text-lg font-semibold text-orange-900 font-montserrat mb-4 flex items-center",children:[(0,Ks.jsx)(yp,{className:"w-5 h-5 mr-2"}),"Informations du Compte"]}),(0,Ks.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("p",{className:"text-sm text-orange-700 font-medium",children:"Pr\xeats actifs"}),(0,Ks.jsx)("p",{className:"text-2xl font-bold text-orange-900",children:m.activeLoans})]}),(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("p",{className:"text-sm text-orange-700 font-medium",children:"Total pr\xeats"}),(0,Ks.jsx)("p",{className:"text-2xl font-bold text-orange-900",children:m.totalLoans})]}),(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("p",{className:"text-sm text-orange-700 font-medium",children:"Statut"}),(0,Ks.jsx)("div",{className:"mt-2",children:w(m.status)})]})]})]})]}),(0,Ks.jsxs)("div",{className:"p-6 bg-gray-50 border-t border-gray-200 flex gap-4",children:["pending"===m.status&&(0,Ks.jsxs)(Ks.Fragment,{children:[(0,Ks.jsxs)("button",{onClick:()=>(async e=>{try{(await qs(e,"approved")).success?(r("Utilisateur approuv\xe9 avec succ\xe8s"),y(),f(!1)):s("Erreur lors de l'approbation")}catch(t){s("Erreur lors de l'approbation")}})(m.id),className:"flex-1 flex items-center justify-center gap-2 px-6 py-3 bg-green-600 hover:bg-green-700 text-white rounded-xl font-medium transition-all duration-200",children:[(0,Ks.jsx)(Bf,{size:20}),"Approuver"]}),(0,Ks.jsxs)("button",{onClick:()=>(async e=>{try{(await qs(e,"rejected")).success?(r("Utilisateur rejet\xe9"),y(),f(!1)):s("Erreur lors du rejet")}catch(t){s("Erreur lors du rejet")}})(m.id),className:"flex-1 flex items-center justify-center gap-2 px-6 py-3 bg-red-600 hover:bg-red-700 text-white rounded-xl font-medium transition-all duration-200",children:[(0,Ks.jsx)(Vf,{size:20}),"Rejeter"]})]}),"pending"!==m.status&&(0,Ks.jsx)("button",{onClick:()=>f(!1),className:"flex-1 px-6 py-3 bg-gray-600 hover:bg-gray-700 text-white rounded-xl font-medium transition-all duration-200",children:"Fermer"})]})]})}),x&&v.url&&(0,Ks.jsx)("div",{className:"fixed inset-0 bg-black/90 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:(0,Ks.jsxs)("div",{className:"relative max-w-4xl w-full",children:[(0,Ks.jsx)("button",{onClick:()=>g(!1),className:"absolute -top-12 right-0 p-2 bg-white/10 hover:bg-white/20 rounded-xl transition-colors",children:(0,Ks.jsx)(nn,{size:24,className:"text-white"})}),(0,Ks.jsxs)("div",{className:"bg-white rounded-3xl p-4",children:[(0,Ks.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-4 text-center",children:v.title}),(0,Ks.jsx)("img",{src:v.url,alt:v.title,className:"w-full h-auto rounded-2xl"})]})]})})]})},Gf=en("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),Kf=en("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]),Jf=en("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),Zf=()=>{Y();const[e,r]=(0,t.useState)(!0),[s,n]=(0,t.useState)(null),[a,i]=(0,t.useState)({totalLoans:0,activeLoans:0,completedLoans:0,pendingLoans:0,totalLoanAmount:0,totalPaidAmount:0,totalRemainingAmount:0,totalSavingsPlans:0,activeSavingsPlans:0,completedSavingsPlans:0,totalSavingsAmount:0,totalUsers:0,activeUsers:0,pendingUsers:0,averageLoanAmount:0,averageRepaymentRate:0,topBorrowers:[]});(0,t.useEffect)(()=>{o()},[]);const o=async()=>{try{r(!0),n(null),console.log("[ANALYTICS] \ud83d\udcca Chargement des analytics...");const[e,t,s,a]=await Promise.all([Vs(),Hs(),Gs(),Ms.from("savings_plans").select("*")]);console.log("[ANALYTICS] \u2705 Donn\xe9es charg\xe9es");const o=e.success?e.data:[],l=o.length,c=o.filter(e=>"approved"===e.status).length,d=o.filter(e=>"pending"===e.status).length,u=t.success?t.data:[],m=s.success?s.data:[],h=u.length,p=u.filter(e=>"active"===e.status||"approved"===e.status).length,f=u.filter(e=>"completed"===e.status).length,x=u.filter(e=>"pending"===e.status).length,g=u.reduce((e,t)=>e+(t.amount||0),0),v=m.reduce((e,t)=>e+(t.amount||0),0),b=g-v,y=g>0?Math.round(v/g*100):0,j=h>0?Math.round(g/h):0,w={};u.forEach(e=>{const t=e.user_id;var r,s;w[t]||(w[t]={userId:t,userName:"".concat((null===(r=e.users)||void 0===r?void 0:r.first_name)||"Utilisateur"," ").concat((null===(s=e.users)||void 0===s?void 0:s.last_name)||"Inconnu"),totalBorrowed:0,loansCount:0,completedLoans:0});w[t].totalBorrowed+=e.amount||0,w[t].loansCount++,"completed"===e.status&&w[t].completedLoans++});const N=Object.values(w).sort((e,t)=>t.totalBorrowed-e.totalBorrowed).slice(0,5),S=a.data||[],k=S.length,_=S.filter(e=>"active"===e.status).length,E=S.filter(e=>"completed"===e.status).length,C=S.reduce((e,t)=>e+(t.current_balance||0),0);i({totalLoans:h,activeLoans:p,completedLoans:f,pendingLoans:x,totalLoanAmount:g,totalPaidAmount:v,totalRemainingAmount:b,totalSavingsPlans:k,activeSavingsPlans:_,completedSavingsPlans:E,totalSavingsAmount:C,totalUsers:l,activeUsers:c,pendingUsers:d,averageLoanAmount:j,averageRepaymentRate:y,topBorrowers:N})}catch(s){console.error("[ANALYTICS] \u274c Erreur:",s),n(s.message||"Une erreur est survenue")}finally{r(!1)}};return e?(0,Ks.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 via-red-50 to-pink-50 flex items-center justify-center",children:(0,Ks.jsxs)("div",{className:"text-center",children:[(0,Ks.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-orange-500 border-t-transparent mx-auto mb-4"}),(0,Ks.jsx)("p",{className:"text-gray-600 font-medium",children:"Chargement des analytics..."})]})}):s?(0,Ks.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 via-red-50 to-pink-50 flex items-center justify-center p-4",children:(0,Ks.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8 max-w-md w-full text-center",children:[(0,Ks.jsx)("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,Ks.jsx)(rn,{size:32,className:"text-red-600"})}),(0,Ks.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Erreur de chargement"}),(0,Ks.jsx)("p",{className:"text-gray-600 mb-6",children:s}),(0,Ks.jsxs)("button",{onClick:o,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-orange-600 hover:bg-orange-700 text-white rounded-xl transition-colors",children:[(0,Ks.jsx)(Pf,{size:18}),"R\xe9essayer"]})]})}):(0,Ks.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 via-red-50 to-pink-50 pb-24",children:[(0,Ks.jsx)("div",{className:"bg-white/80 backdrop-blur-lg shadow-lg border-b border-white/50 sticky top-0 z-30",children:(0,Ks.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:(0,Ks.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Ks.jsxs)("div",{className:"flex items-center gap-4",children:[(0,Ks.jsx)("div",{className:"p-3 bg-gradient-to-br from-orange-500 to-red-600 rounded-2xl shadow-lg",children:(0,Ks.jsx)(wp,{size:32,className:"text-white"})}),(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900 font-montserrat",children:"Analytics"}),(0,Ks.jsx)("p",{className:"text-sm sm:text-base text-gray-600 font-montserrat",children:"Vue d'ensemble des performances"})]})]}),(0,Ks.jsxs)("button",{onClick:o,className:"flex items-center gap-2 px-3 sm:px-4 py-2 bg-white hover:bg-gray-50 border border-gray-200 rounded-xl transition-all duration-200 shadow-sm hover:shadow",children:[(0,Ks.jsx)(Pf,{size:18,className:"text-gray-600"}),(0,Ks.jsx)("span",{className:"hidden sm:inline text-sm font-medium text-gray-700",children:"Actualiser"})]})]})})}),(0,Ks.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,Ks.jsxs)("div",{className:"mb-6",children:[(0,Ks.jsx)("h2",{className:"text-xl font-bold text-gray-900 font-montserrat mb-4",children:"\ud83d\udcca Pr\xeats"}),(0,Ks.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6",children:[(0,Ks.jsxs)("div",{className:"bg-white rounded-2xl p-4 sm:p-6 shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-100 group",children:[(0,Ks.jsx)("div",{className:"flex items-start justify-between mb-3 sm:mb-4",children:(0,Ks.jsx)("div",{className:"p-2 sm:p-3 bg-blue-100 rounded-xl group-hover:scale-110 transition-transform duration-300",children:(0,Ks.jsx)(yp,{size:20,className:"sm:w-6 sm:h-6 text-blue-600"})})}),(0,Ks.jsx)("p",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:a.totalLoans}),(0,Ks.jsx)("p",{className:"text-xs sm:text-sm text-gray-600 mt-1",children:"Total pr\xeats"})]}),(0,Ks.jsxs)("div",{className:"bg-gradient-to-br from-blue-500 to-purple-600 rounded-2xl p-4 sm:p-6 shadow-lg hover:shadow-xl transition-all duration-300 text-white group",children:[(0,Ks.jsx)("div",{className:"flex items-start justify-between mb-3 sm:mb-4",children:(0,Ks.jsx)("div",{className:"p-2 sm:p-3 bg-white/20 rounded-xl group-hover:scale-110 transition-transform duration-300",children:(0,Ks.jsx)(Cf,{size:20,className:"sm:w-6 sm:h-6 text-white"})})}),(0,Ks.jsx)("p",{className:"text-2xl sm:text-3xl font-bold",children:a.activeLoans}),(0,Ks.jsx)("p",{className:"text-xs sm:text-sm text-blue-100 mt-1",children:"Actifs"})]}),(0,Ks.jsxs)("div",{className:"bg-white rounded-2xl p-4 sm:p-6 shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-100 group",children:[(0,Ks.jsx)("div",{className:"flex items-start justify-between mb-3 sm:mb-4",children:(0,Ks.jsx)("div",{className:"p-2 sm:p-3 bg-green-100 rounded-xl group-hover:scale-110 transition-transform duration-300",children:(0,Ks.jsx)(tn,{size:20,className:"sm:w-6 sm:h-6 text-green-600"})})}),(0,Ks.jsx)("p",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:a.completedLoans}),(0,Ks.jsx)("p",{className:"text-xs sm:text-sm text-gray-600 mt-1",children:"Rembours\xe9s"})]}),(0,Ks.jsxs)("div",{className:"bg-white rounded-2xl p-4 sm:p-6 shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-100 group",children:[(0,Ks.jsx)("div",{className:"flex items-start justify-between mb-3 sm:mb-4",children:(0,Ks.jsx)("div",{className:"p-2 sm:p-3 bg-yellow-100 rounded-xl group-hover:scale-110 transition-transform duration-300",children:(0,Ks.jsx)(sp,{size:20,className:"sm:w-6 sm:h-6 text-yellow-600"})})}),(0,Ks.jsx)("p",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:a.pendingLoans}),(0,Ks.jsx)("p",{className:"text-xs sm:text-sm text-gray-600 mt-1",children:"En attente"})]})]})]}),(0,Ks.jsxs)("div",{className:"mb-6",children:[(0,Ks.jsx)("h2",{className:"text-xl font-bold text-gray-900 font-montserrat mb-4",children:"\ud83d\udcb0 Montants"}),(0,Ks.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6",children:[(0,Ks.jsxs)("div",{className:"bg-white rounded-2xl p-4 sm:p-6 shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-100",children:[(0,Ks.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,Ks.jsx)("div",{className:"p-2 bg-purple-100 rounded-lg",children:(0,Ks.jsx)(Gf,{size:18,className:"text-purple-600"})}),(0,Ks.jsx)("p",{className:"text-xs sm:text-sm text-gray-600 font-medium",children:"Total pr\xeat\xe9"})]}),(0,Ks.jsx)("p",{className:"text-lg sm:text-xl font-bold text-gray-900",children:pf(a.totalLoanAmount)})]}),(0,Ks.jsxs)("div",{className:"bg-white rounded-2xl p-4 sm:p-6 shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-100",children:[(0,Ks.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,Ks.jsx)("div",{className:"p-2 bg-green-100 rounded-lg",children:(0,Ks.jsx)(tn,{size:18,className:"text-green-600"})}),(0,Ks.jsx)("p",{className:"text-xs sm:text-sm text-gray-600 font-medium",children:"Total pay\xe9"})]}),(0,Ks.jsx)("p",{className:"text-lg sm:text-xl font-bold text-green-600",children:pf(a.totalPaidAmount)})]}),(0,Ks.jsxs)("div",{className:"bg-white rounded-2xl p-4 sm:p-6 shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-100",children:[(0,Ks.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,Ks.jsx)("div",{className:"p-2 bg-orange-100 rounded-lg",children:(0,Ks.jsx)(Kf,{size:18,className:"text-orange-600"})}),(0,Ks.jsx)("p",{className:"text-xs sm:text-sm text-gray-600 font-medium",children:"Restant"})]}),(0,Ks.jsx)("p",{className:"text-lg sm:text-xl font-bold text-orange-600",children:pf(a.totalRemainingAmount)})]}),(0,Ks.jsxs)("div",{className:"bg-gradient-to-br from-green-500 to-emerald-600 rounded-2xl p-4 sm:p-6 shadow-lg hover:shadow-xl transition-all duration-300 text-white",children:[(0,Ks.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,Ks.jsx)("div",{className:"p-2 bg-white/20 rounded-lg",children:(0,Ks.jsx)(Jf,{size:18,className:"text-white"})}),(0,Ks.jsx)("p",{className:"text-xs sm:text-sm text-green-100 font-medium",children:"Taux remboursement"})]}),(0,Ks.jsxs)("p",{className:"text-2xl sm:text-3xl font-bold",children:[a.averageRepaymentRate,"%"]})]})]})]}),(0,Ks.jsxs)("div",{className:"mb-6",children:[(0,Ks.jsx)("h2",{className:"text-xl font-bold text-gray-900 font-montserrat mb-4",children:"\ud83c\udfe6 \xc9pargne"}),(0,Ks.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6",children:[(0,Ks.jsxs)("div",{className:"bg-white rounded-2xl p-4 sm:p-6 shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-100 group",children:[(0,Ks.jsx)("div",{className:"flex items-start justify-between mb-3 sm:mb-4",children:(0,Ks.jsx)("div",{className:"p-2 sm:p-3 bg-purple-100 rounded-xl group-hover:scale-110 transition-transform duration-300",children:(0,Ks.jsx)(Af,{size:20,className:"sm:w-6 sm:h-6 text-purple-600"})})}),(0,Ks.jsx)("p",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:a.totalSavingsPlans}),(0,Ks.jsx)("p",{className:"text-xs sm:text-sm text-gray-600 mt-1",children:"Plans total"})]}),(0,Ks.jsxs)("div",{className:"bg-white rounded-2xl p-4 sm:p-6 shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-100 group",children:[(0,Ks.jsx)("div",{className:"flex items-start justify-between mb-3 sm:mb-4",children:(0,Ks.jsx)("div",{className:"p-2 sm:p-3 bg-green-100 rounded-xl group-hover:scale-110 transition-transform duration-300",children:(0,Ks.jsx)(Cf,{size:20,className:"sm:w-6 sm:h-6 text-green-600"})})}),(0,Ks.jsx)("p",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:a.activeSavingsPlans}),(0,Ks.jsx)("p",{className:"text-xs sm:text-sm text-gray-600 mt-1",children:"Actifs"})]}),(0,Ks.jsxs)("div",{className:"bg-white rounded-2xl p-4 sm:p-6 shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-100 group",children:[(0,Ks.jsx)("div",{className:"flex items-start justify-between mb-3 sm:mb-4",children:(0,Ks.jsx)("div",{className:"p-2 sm:p-3 bg-blue-100 rounded-xl group-hover:scale-110 transition-transform duration-300",children:(0,Ks.jsx)(tn,{size:20,className:"sm:w-6 sm:h-6 text-blue-600"})})}),(0,Ks.jsx)("p",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:a.completedSavingsPlans}),(0,Ks.jsx)("p",{className:"text-xs sm:text-sm text-gray-600 mt-1",children:"Termin\xe9s"})]}),(0,Ks.jsxs)("div",{className:"bg-gradient-to-br from-purple-500 to-pink-600 rounded-2xl p-4 sm:p-6 shadow-lg hover:shadow-xl transition-all duration-300 text-white group",children:[(0,Ks.jsx)("div",{className:"flex items-start justify-between mb-3 sm:mb-4",children:(0,Ks.jsx)("div",{className:"p-2 sm:p-3 bg-white/20 rounded-xl group-hover:scale-110 transition-transform duration-300",children:(0,Ks.jsx)(_p,{size:20,className:"sm:w-6 sm:h-6 text-white"})})}),(0,Ks.jsx)("p",{className:"text-lg sm:text-xl font-bold",children:pf(a.totalSavingsAmount)}),(0,Ks.jsx)("p",{className:"text-xs sm:text-sm text-purple-100 mt-1",children:"Total \xe9pargn\xe9"})]})]})]}),(0,Ks.jsxs)("div",{className:"mb-6",children:[(0,Ks.jsx)("h2",{className:"text-xl font-bold text-gray-900 font-montserrat mb-4",children:"\ud83d\udc65 Utilisateurs"}),(0,Ks.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 sm:gap-6",children:[(0,Ks.jsxs)("div",{className:"bg-white rounded-2xl p-4 sm:p-6 shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-100",children:[(0,Ks.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,Ks.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,Ks.jsx)(Lf,{size:18,className:"text-blue-600"})}),(0,Ks.jsx)("p",{className:"text-xs sm:text-sm text-gray-600 font-medium",children:"Total"})]}),(0,Ks.jsx)("p",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:a.totalUsers})]}),(0,Ks.jsxs)("div",{className:"bg-white rounded-2xl p-4 sm:p-6 shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-100",children:[(0,Ks.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,Ks.jsx)("div",{className:"p-2 bg-green-100 rounded-lg",children:(0,Ks.jsx)(tn,{size:18,className:"text-green-600"})}),(0,Ks.jsx)("p",{className:"text-xs sm:text-sm text-gray-600 font-medium",children:"Actifs"})]}),(0,Ks.jsx)("p",{className:"text-2xl sm:text-3xl font-bold text-green-600",children:a.activeUsers})]}),(0,Ks.jsxs)("div",{className:"bg-white rounded-2xl p-4 sm:p-6 shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-100",children:[(0,Ks.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,Ks.jsx)("div",{className:"p-2 bg-yellow-100 rounded-lg",children:(0,Ks.jsx)(sp,{size:18,className:"text-yellow-600"})}),(0,Ks.jsx)("p",{className:"text-xs sm:text-sm text-gray-600 font-medium",children:"En attente"})]}),(0,Ks.jsx)("p",{className:"text-2xl sm:text-3xl font-bold text-yellow-600",children:a.pendingUsers})]})]})]}),a.topBorrowers.length>0&&(0,Ks.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden",children:[(0,Ks.jsx)("div",{className:"p-4 sm:p-6 border-b border-gray-100",children:(0,Ks.jsxs)("h2",{className:"text-xl font-bold text-gray-900 font-montserrat flex items-center gap-2",children:[(0,Ks.jsx)(Tf,{size:24,className:"text-orange-600"}),"Top 5 Emprunteurs"]})}),(0,Ks.jsx)("div",{className:"divide-y divide-gray-100",children:a.topBorrowers.map((e,t)=>(0,Ks.jsx)("div",{className:"p-4 sm:p-6 hover:bg-gray-50 transition-colors",children:(0,Ks.jsxs)("div",{className:"flex items-center gap-3 sm:gap-4",children:[(0,Ks.jsx)("div",{className:"flex-shrink-0 w-10 h-10 sm:w-12 sm:h-12 rounded-full flex items-center justify-center font-bold text-lg ".concat(0===t?"bg-yellow-100 text-yellow-700":1===t?"bg-gray-100 text-gray-700":2===t?"bg-orange-100 text-orange-700":"bg-blue-100 text-blue-700"),children:t+1}),(0,Ks.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Ks.jsx)("p",{className:"text-sm sm:text-base font-bold text-gray-900 truncate",children:e.userName}),(0,Ks.jsxs)("p",{className:"text-xs sm:text-sm text-gray-600",children:[e.loansCount," pr\xeat",e.loansCount>1?"s":""," \u2022 ",e.completedLoans," rembours\xe9",e.completedLoans>1?"s":""]})]}),(0,Ks.jsxs)("div",{className:"text-right",children:[(0,Ks.jsx)("p",{className:"text-sm sm:text-base font-bold text-gray-900",children:pf(e.totalBorrowed)}),(0,Ks.jsx)("p",{className:"text-xs text-gray-500",children:"Total"})]})]})},t))})]})]})]})},$f=()=>{const e=Y(),t=[{id:"ab-epargne",title:"AB Epargne",description:"Gestion des comptes d'\xe9pargne et des plans",icon:Af,color:"from-green-500 to-emerald-600",bgColor:"bg-green-50",iconColor:"text-green-600",path:"/admin/ab-epargne"},{id:"ab-pret",title:"AB Pret",description:"Gestion des demandes de pr\xeats et remboursements",icon:yp,color:"from-blue-500 to-indigo-600",bgColor:"bg-blue-50",iconColor:"text-blue-600",path:"/admin/loan-requests"},{id:"utilisateurs",title:"Utilisateurs",description:"G\xe9rer les clients et voir leurs informations",icon:Lf,color:"from-purple-500 to-pink-600",bgColor:"bg-purple-50",iconColor:"text-purple-600",path:"/admin/user-management"}];return(0,Ks.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-blue-50 pb-24",children:[(0,Ks.jsx)("div",{className:"bg-white shadow-sm border-b border-gray-200",children:(0,Ks.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,Ks.jsxs)("div",{className:"py-6",children:[(0,Ks.jsx)("h1",{className:"text-3xl font-bold text-gray-900 font-montserrat",children:"Menu Admin"}),(0,Ks.jsx)("p",{className:"text-gray-600 font-montserrat mt-2",children:"S\xe9lectionnez une section pour g\xe9rer"})]})})}),(0,Ks.jsx)("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:(0,Ks.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(t=>(0,Ks.jsxs)("button",{onClick:()=>e(t.path),className:"group relative bg-white rounded-3xl p-8 shadow-lg hover:shadow-2xl transition-all duration-300 transform hover:scale-105 border border-gray-100 overflow-hidden",children:[(0,Ks.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br ".concat(t.color," opacity-0 group-hover:opacity-5 transition-opacity duration-300")}),(0,Ks.jsxs)("div",{className:"relative",children:[(0,Ks.jsx)("div",{className:"inline-flex p-4 rounded-2xl ".concat(t.bgColor," mb-6 group-hover:scale-110 transition-transform duration-300"),children:(0,Ks.jsx)(t.icon,{size:40,className:t.iconColor})}),(0,Ks.jsx)("h2",{className:"text-2xl font-bold text-gray-900 font-montserrat mb-3",children:t.title}),(0,Ks.jsx)("p",{className:"text-gray-600 font-montserrat mb-6",children:t.description}),(0,Ks.jsxs)("div",{className:"flex items-center text-primary-600 font-semibold font-montserrat group-hover:translate-x-2 transition-transform duration-300",children:[(0,Ks.jsx)("span",{children:"Acc\xe9der"}),(0,Ks.jsx)(Qa,{size:20,className:"ml-2"})]})]}),(0,Ks.jsx)("div",{className:"absolute -right-8 -bottom-8 w-32 h-32 rounded-full bg-gradient-to-br ".concat(t.color," opacity-10 group-hover:opacity-20 transition-opacity duration-300")})]},t.id))})})]})},Qf=en("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),Yf=()=>{const{user:e,forceRefreshRole:r}=Zs(),[s,n]=(0,t.useState)(!1),[a,i]=(0,t.useState)(!1),[o,l]=(0,t.useState)(null),[c,d]=(0,t.useState)(null);return e?(0,Ks.jsxs)("div",{className:"bg-white rounded-lg shadow-lg border border-gray-200 p-4 max-w-sm mx-auto",children:[(0,Ks.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,Ks.jsx)(Za,{size:20,className:"text-blue-600"}),(0,Ks.jsx)("h3",{className:"font-semibold text-gray-900",children:"Debug R\xf4le"})]}),(0,Ks.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,Ks.jsxs)("div",{className:"flex justify-between",children:[(0,Ks.jsx)("span",{className:"text-gray-600",children:"R\xf4le actuel:"}),(0,Ks.jsx)("span",{className:"font-semibold ".concat("admin"===e.role?"text-green-600":"text-orange-600"),children:e.role||"Non d\xe9fini"})]}),(0,Ks.jsxs)("div",{className:"flex justify-between",children:[(0,Ks.jsx)("span",{className:"text-gray-600",children:"Email:"}),(0,Ks.jsx)("span",{className:"text-gray-900",children:e.email})]}),o&&(0,Ks.jsxs)("div",{className:"flex justify-between",children:[(0,Ks.jsx)("span",{className:"text-gray-600",children:"Dernier refresh:"}),(0,Ks.jsx)("span",{className:"text-gray-900",children:o})]}),c&&(0,Ks.jsxs)("div",{className:"flex justify-between",children:[(0,Ks.jsx)("span",{className:"text-gray-600",children:"Coh\xe9rence:"}),(0,Ks.jsx)("span",{className:"font-semibold ".concat(c.consistent?"text-green-600":"text-red-600"),children:c.consistent?"OK":"INCOH\xc9RENT"})]})]}),(0,Ks.jsxs)("div",{className:"mt-4 space-y-2",children:[(0,Ks.jsxs)("button",{onClick:async()=>{n(!0);try{const e=await r();l((new Date).toLocaleTimeString()),e.success?console.log("[ROLE_DEBUGGER] \u2705 R\xf4le mis \xe0 jour:",e.role):console.error("[ROLE_DEBUGGER] \u274c Erreur:",e.error)}catch(e){console.error("[ROLE_DEBUGGER] \u274c Erreur:",e)}finally{n(!1)}},disabled:s,className:"w-full flex items-center justify-center gap-2 px-3 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white rounded-lg transition-colors text-sm",children:[(0,Ks.jsx)(Pf,{size:16,className:s?"animate-spin":""}),s?"Actualisation...":"Forcer Refresh R\xf4le"]}),(0,Ks.jsxs)("button",{onClick:async()=>{i(!0);try{const t=await(async()=>{try{console.log("[FORCE_ROLE_REFRESH] \ud83d\udd04 D\xe9but du rafra\xeechissement forc\xe9 du r\xf4le..."),console.log("[FORCE_ROLE_REFRESH] \ud83e\uddf9 Nettoyage du cache..."),localStorage.removeItem("ab_user_cache"),localStorage.removeItem("ab_user_cache_time"),sessionStorage.clear();const{data:{session:e},error:t}=await Ms.auth.getSession();if(t)return console.error("[FORCE_ROLE_REFRESH] \u274c Erreur session:",t),{success:!1,error:t.message};if(null===e||void 0===e||!e.user)return console.log("[FORCE_ROLE_REFRESH] \u26a0\ufe0f Aucune session active"),{success:!1,error:"Aucune session active"};console.log("[FORCE_ROLE_REFRESH] \ud83d\udc64 Session trouv\xe9e:",e.user.email),console.log("[FORCE_ROLE_REFRESH] \ud83d\uddc4\ufe0f R\xe9cup\xe9ration du r\xf4le depuis la DB...");const{data:r,error:s}=await Ms.from("users").select("role, first_name, last_name, email").eq("id",e.user.id).single();if(s)return console.error("[FORCE_ROLE_REFRESH] \u274c Erreur DB:",s),{success:!1,error:s.message};if(!r)return console.error("[FORCE_ROLE_REFRESH] \u274c Utilisateur non trouv\xe9 en DB"),{success:!1,error:"Utilisateur non trouv\xe9"};console.log("[FORCE_ROLE_REFRESH] \u2705 R\xf4le r\xe9cup\xe9r\xe9:",r.role);const n={id:e.user.id,email:e.user.email,role:r.role,first_name:r.first_name||"",last_name:r.last_name||"",firstName:r.first_name,lastName:r.last_name};return localStorage.setItem("ab_user_cache",JSON.stringify(n)),localStorage.setItem("ab_user_cache_time",Date.now().toString()),console.log("[FORCE_ROLE_REFRESH] \u2705 Cache mis \xe0 jour avec le r\xf4le:",r.role),console.log("[FORCE_ROLE_REFRESH] \ud83d\udd04 Rechargement de la page..."),window.location.reload(),{success:!0,role:r.role,user:n}}catch(e){return console.error("[FORCE_ROLE_REFRESH] \u274c Erreur g\xe9n\xe9rale:",e),{success:!1,error:e.message}}})(e.id);t.success?console.log("[ROLE_DEBUGGER] \u2705 R\xf4le forc\xe9 mis \xe0 jour:",t.role):(console.error("[ROLE_DEBUGGER] \u274c Erreur force refresh:",t.error),alert("Erreur: ".concat(t.error)))}catch(t){console.error("[ROLE_DEBUGGER] \u274c Erreur force refresh:",t),alert("Erreur: ".concat(t.message))}finally{i(!1)}},disabled:a,className:"w-full flex items-center justify-center gap-2 px-3 py-2 bg-red-600 hover:bg-red-700 disabled:bg-red-400 text-white rounded-lg transition-colors text-sm",children:[(0,Ks.jsx)(Vp,{size:16,className:a?"animate-pulse":""}),a?"Force Refresh...":"Force Refresh + Reload"]}),(0,Ks.jsxs)("button",{onClick:async()=>{try{const e=await(async()=>{try{const e=localStorage.getItem("ab_user_cache");if(!e)return{consistent:!1,reason:"Aucun cache trouv\xe9"};const t=JSON.parse(e),{data:{session:r}}=await Ms.auth.getSession();if(null===r||void 0===r||!r.user)return{consistent:!1,reason:"Aucune session active"};const{data:s,error:n}=await Ms.from("users").select("role").eq("id",r.user.id).single();if(n||!s)return{consistent:!1,reason:"Impossible de r\xe9cup\xe9rer le r\xf4le depuis la DB"};const a=t.role===s.role;return{consistent:a,cachedRole:t.role,dbRole:s.role,reason:a?"R\xf4les coh\xe9rents":"R\xf4les incoh\xe9rents"}}catch(e){return console.error("[CHECK_ROLE_CONSISTENCY] \u274c Erreur:",e),{consistent:!1,reason:e.message}}})();d(e),console.log("[ROLE_DEBUGGER] Coh\xe9rence des r\xf4les:",e)}catch(e){console.error("[ROLE_DEBUGGER] \u274c Erreur v\xe9rification:",e)}},className:"w-full flex items-center justify-center gap-2 px-3 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-lg transition-colors text-sm",children:[(0,Ks.jsx)(tn,{size:16}),"V\xe9rifier Coh\xe9rence"]}),(0,Ks.jsxs)("button",{onClick:()=>{window.confirm("\u26a0\ufe0f ATTENTION: Cette action va nettoyer TOUS les caches et recharger la page. Continuer ?")&&(console.log("[ROLE_DEBUGGER] \ud83e\uddf9 Nettoyage complet du cache..."),(()=>{console.log("[CLEAR_ALL_CACHE] \ud83e\uddf9 D\xe9but du nettoyage complet...");try{const e=["push_subscription"],t=ze({},localStorage);for(const r in t)e.includes(r)||(localStorage.removeItem(r),console.log("[CLEAR_ALL_CACHE] \ud83d\uddd1\ufe0f Supprim\xe9 localStorage: ".concat(r)));sessionStorage.clear(),console.log("[CLEAR_ALL_CACHE] \ud83d\uddd1\ufe0f sessionStorage nettoy\xe9"),"caches"in window&&caches.keys().then(e=>{e.forEach(e=>{caches.delete(e),console.log("[CLEAR_ALL_CACHE] \ud83d\uddd1\ufe0f Cache supprim\xe9: ".concat(e))})}),console.log("[CLEAR_ALL_CACHE] \ud83d\udd04 Rechargement de la page..."),window.location.reload(!0)}catch(e){console.error("[CLEAR_ALL_CACHE] \u274c Erreur lors du nettoyage:",e),window.location.reload(!0)}})())},className:"w-full flex items-center justify-center gap-2 px-3 py-2 bg-red-800 hover:bg-red-900 text-white rounded-lg transition-colors text-sm",children:[(0,Ks.jsx)(Qf,{size:16}),"Nettoyer Tout + Reload"]}),(0,Ks.jsxs)("button",{onClick:async()=>{if(window.confirm("\u26a0\ufe0f ATTENTION: Cette action va nettoyer TOUS les Service Workers. Continuer ?")){console.log("[ROLE_DEBUGGER] \ud83e\uddf9 Nettoyage des Service Workers...");await(async()=>{if("serviceWorker"in navigator)try{console.log("[CLEAR_SW] \ud83e\uddf9 Nettoyage des Service Workers...");const e=await navigator.serviceWorker.getRegistrations();if(console.log("[CLEAR_SW] ".concat(e.length," Service Worker(s) trouv\xe9(s)")),await Promise.all(e.map(e=>(console.log("[CLEAR_SW] D\xe9senregistrement: ".concat(e.scope)),e.unregister()))),console.log("[CLEAR_SW] \u2705 Tous les Service Workers ont \xe9t\xe9 d\xe9senregistr\xe9s"),"caches"in window){const e=await caches.keys();console.log("[CLEAR_SW] ".concat(e.length," cache(s) trouv\xe9(s)")),await Promise.all(e.map(e=>(console.log("[CLEAR_SW] Suppression du cache: ".concat(e)),caches.delete(e)))),console.log("[CLEAR_SW] \u2705 Tous les caches ont \xe9t\xe9 supprim\xe9s")}return!0}catch(e){return console.error("[CLEAR_SW] \u274c Erreur lors du nettoyage:",e),!1}else console.log("[CLEAR_SW] Service Worker non support\xe9")})()?alert("\u2705 Service Workers nettoy\xe9s avec succ\xe8s !"):alert("\u274c Erreur lors du nettoyage des Service Workers")}},className:"w-full flex items-center justify-center gap-2 px-3 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg transition-colors text-sm",children:[(0,Ks.jsx)(np,{size:16}),"Nettoyer Service Workers"]}),"admin"!==e.role&&(0,Ks.jsxs)("div",{className:"flex items-center gap-2 p-2 bg-orange-50 border border-orange-200 rounded-lg",children:[(0,Ks.jsx)(zf,{size:16,className:"text-orange-600"}),(0,Ks.jsx)("span",{className:"text-orange-800 text-xs",children:'R\xf4le incorrect d\xe9tect\xe9. Cliquez sur "Forcer Refresh R\xf4le".'})]}),"admin"===e.role&&(0,Ks.jsxs)("div",{className:"flex items-center gap-2 p-2 bg-green-50 border border-green-200 rounded-lg",children:[(0,Ks.jsx)(tn,{size:16,className:"text-green-600"}),(0,Ks.jsx)("span",{className:"text-green-800 text-xs",children:"R\xf4le admin correctement charg\xe9."})]})]})]}):null},Xf=en("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),ex=en("Bug",[["rect",{width:"8",height:"14",x:"8",y:"6",rx:"4",key:"hq8nra"}],["path",{d:"m19 7-3 2",key:"fmg8ec"}],["path",{d:"m5 7 3 2",key:"dkxqes"}],["path",{d:"m19 19-3-2",key:"1hbhi4"}],["path",{d:"m5 19 3-2",key:"dvt2ee"}],["path",{d:"M20 13h-4",key:"1agfp2"}],["path",{d:"M4 13h4",key:"1bwh8b"}],["path",{d:"m10 4 1 2",key:"1pot59"}],["path",{d:"m14 4-1 2",key:"m8sn0o"}]]),tx=()=>{Y();const{user:e}=Zs(),{showSuccess:r,showError:s}=ln(),[n,a]=(0,t.useState)(!1),[i,o]=(0,t.useState)(null),[l,c]=(0,t.useState)(!1),[d,u]=(0,t.useState)(!1),[m,h]=(0,t.useState)({firstName:(null===e||void 0===e?void 0:e.first_name)||"",lastName:(null===e||void 0===e?void 0:e.last_name)||"",email:(null===e||void 0===e?void 0:e.email)||"",phone:(null===e||void 0===e?void 0:e.phone_number)||""}),[p,f]=(0,t.useState)({currentPassword:"",newPassword:"",confirmPassword:""}),[x,g]=(0,t.useState)({emailNotifications:!0,loanAlerts:!0,savingsAlerts:!0,systemAlerts:!1});return(0,Ks.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50 pb-24",children:[(0,Ks.jsx)("div",{className:"bg-white/80 backdrop-blur-lg shadow-lg border-b border-white/50 sticky top-0 z-30",children:(0,Ks.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:(0,Ks.jsx)("div",{className:"flex items-center justify-between",children:(0,Ks.jsxs)("div",{className:"flex items-center gap-4",children:[(0,Ks.jsx)("div",{className:"p-3 bg-gradient-to-br from-purple-500 to-pink-600 rounded-2xl shadow-lg",children:(0,Ks.jsx)(Np,{size:32,className:"text-white"})}),(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900 font-montserrat",children:"Param\xe8tres"}),(0,Ks.jsx)("p",{className:"text-sm sm:text-base text-gray-600 font-montserrat",children:"Configuration de votre compte"})]})]})})})}),(0,Ks.jsxs)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,Ks.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden mb-6",children:[(0,Ks.jsx)("div",{className:"p-4 sm:p-6 bg-gradient-to-r from-blue-500 to-purple-600 text-white",children:(0,Ks.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Ks.jsx)("div",{className:"p-2 bg-white/20 rounded-xl",children:(0,Ks.jsx)(Za,{size:24})}),(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("h2",{className:"text-xl font-bold font-montserrat",children:"Informations du profil"}),(0,Ks.jsx)("p",{className:"text-sm text-blue-100",children:"G\xe9rez vos informations personnelles"})]})]})}),(0,Ks.jsxs)("div",{className:"p-4 sm:p-6",children:[(0,Ks.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-6",children:[(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Pr\xe9nom"}),(0,Ks.jsx)("input",{type:"text",value:m.firstName,onChange:e=>h(ze(ze({},m),{},{firstName:e.target.value})),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nom"}),(0,Ks.jsx)("input",{type:"text",value:m.lastName,onChange:e=>h(ze(ze({},m),{},{lastName:e.target.value})),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),(0,Ks.jsxs)("div",{className:"relative",children:[(0,Ks.jsx)(Jp,{size:18,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,Ks.jsx)("input",{type:"email",value:m.email,onChange:e=>h(ze(ze({},m),{},{email:e.target.value})),className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"T\xe9l\xe9phone"}),(0,Ks.jsxs)("div",{className:"relative",children:[(0,Ks.jsx)(Kp,{size:18,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,Ks.jsx)("input",{type:"tel",value:m.phone,onChange:e=>h(ze(ze({},m),{},{phone:e.target.value})),className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})]}),(0,Ks.jsxs)("button",{onClick:async()=>{try{a(!0),await new Promise(e=>setTimeout(e,1e3)),r("Profil mis \xe0 jour avec succ\xe8s")}catch(i){console.error("[SETTINGS] Erreur:",i),s("Erreur lors de la mise \xe0 jour")}finally{a(!1)}},disabled:n,className:"flex items-center justify-center gap-2 px-6 py-3 bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white rounded-xl transition-all duration-200 shadow-md hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,Ks.jsx)(Xf,{size:18}),(0,Ks.jsx)("span",{className:"font-medium",children:n?"Enregistrement...":"Enregistrer les modifications"})]})]})]}),(0,Ks.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden mb-6",children:[(0,Ks.jsx)("div",{className:"p-4 sm:p-6 bg-gradient-to-r from-red-500 to-orange-600 text-white",children:(0,Ks.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Ks.jsx)("div",{className:"p-2 bg-white/20 rounded-xl",children:(0,Ks.jsx)(qp,{size:24})}),(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("h2",{className:"text-xl font-bold font-montserrat",children:"S\xe9curit\xe9"}),(0,Ks.jsx)("p",{className:"text-sm text-red-100",children:"Changez votre mot de passe"})]})]})}),(0,Ks.jsxs)("div",{className:"p-4 sm:p-6",children:[(0,Ks.jsxs)("div",{className:"space-y-4 mb-6",children:[(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Mot de passe actuel"}),(0,Ks.jsxs)("div",{className:"relative",children:[(0,Ks.jsx)(Zp,{size:18,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,Ks.jsx)("input",{type:l?"text":"password",value:p.currentPassword,onChange:e=>f(ze(ze({},p),{},{currentPassword:e.target.value})),className:"w-full pl-10 pr-12 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-red-500 focus:border-transparent"}),(0,Ks.jsx)("button",{type:"button",onClick:()=>c(!l),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:l?(0,Ks.jsx)($p,{size:18}):(0,Ks.jsx)(Qp,{size:18})})]})]}),(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nouveau mot de passe"}),(0,Ks.jsxs)("div",{className:"relative",children:[(0,Ks.jsx)(Zp,{size:18,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,Ks.jsx)("input",{type:l?"text":"password",value:p.newPassword,onChange:e=>f(ze(ze({},p),{},{newPassword:e.target.value})),className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-red-500 focus:border-transparent"})]})]}),(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirmer le nouveau mot de passe"}),(0,Ks.jsxs)("div",{className:"relative",children:[(0,Ks.jsx)(Zp,{size:18,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,Ks.jsx)("input",{type:l?"text":"password",value:p.confirmPassword,onChange:e=>f(ze(ze({},p),{},{confirmPassword:e.target.value})),className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-red-500 focus:border-transparent"})]})]})]}),(0,Ks.jsxs)("button",{onClick:async()=>{try{if(p.newPassword!==p.confirmPassword)return void s("Les mots de passe ne correspondent pas");if(p.newPassword.length<6)return void s("Le mot de passe doit contenir au moins 6 caract\xe8res");a(!0),await new Promise(e=>setTimeout(e,1e3)),r("Mot de passe mis \xe0 jour avec succ\xe8s"),f({currentPassword:"",newPassword:"",confirmPassword:""})}catch(i){console.error("[SETTINGS] Erreur:",i),s("Erreur lors de la mise \xe0 jour")}finally{a(!1)}},disabled:n,className:"flex items-center justify-center gap-2 px-6 py-3 bg-gradient-to-r from-red-500 to-orange-600 hover:from-red-600 hover:to-orange-700 text-white rounded-xl transition-all duration-200 shadow-md hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,Ks.jsx)(qp,{size:18}),(0,Ks.jsx)("span",{className:"font-medium",children:n?"Mise \xe0 jour...":"Changer le mot de passe"})]})]})]}),(0,Ks.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden",children:[(0,Ks.jsx)("div",{className:"p-4 sm:p-6 bg-gradient-to-r from-green-500 to-emerald-600 text-white",children:(0,Ks.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Ks.jsx)("div",{className:"p-2 bg-white/20 rounded-xl",children:(0,Ks.jsx)(Ja,{size:24})}),(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("h2",{className:"text-xl font-bold font-montserrat",children:"Notifications"}),(0,Ks.jsx)("p",{className:"text-sm text-green-100",children:"G\xe9rez vos pr\xe9f\xe9rences de notification"})]})]})}),(0,Ks.jsxs)("div",{className:"p-4 sm:p-6",children:[(0,Ks.jsxs)("div",{className:"space-y-4 mb-6",children:[(0,Ks.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-xl",children:[(0,Ks.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Ks.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,Ks.jsx)(Jp,{size:18,className:"text-blue-600"})}),(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("p",{className:"font-medium text-gray-900",children:"Notifications par email"}),(0,Ks.jsx)("p",{className:"text-sm text-gray-600",children:"Recevoir les notifications importantes par email"})]})]}),(0,Ks.jsx)("button",{onClick:()=>g(ze(ze({},x),{},{emailNotifications:!x.emailNotifications})),className:"relative w-12 h-6 rounded-full transition-colors ".concat(x.emailNotifications?"bg-green-500":"bg-gray-300"),children:(0,Ks.jsx)("div",{className:"absolute top-1 w-4 h-4 bg-white rounded-full transition-transform ".concat(x.emailNotifications?"translate-x-7":"translate-x-1")})})]}),(0,Ks.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-xl",children:[(0,Ks.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Ks.jsx)("div",{className:"p-2 bg-purple-100 rounded-lg",children:(0,Ks.jsx)(Cf,{size:18,className:"text-purple-600"})}),(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("p",{className:"font-medium text-gray-900",children:"Alertes de pr\xeats"}),(0,Ks.jsx)("p",{className:"text-sm text-gray-600",children:"Notifications pour les nouvelles demandes de pr\xeat"})]})]}),(0,Ks.jsx)("button",{onClick:()=>g(ze(ze({},x),{},{loanAlerts:!x.loanAlerts})),className:"relative w-12 h-6 rounded-full transition-colors ".concat(x.loanAlerts?"bg-green-500":"bg-gray-300"),children:(0,Ks.jsx)("div",{className:"absolute top-1 w-4 h-4 bg-white rounded-full transition-transform ".concat(x.loanAlerts?"translate-x-7":"translate-x-1")})})]}),(0,Ks.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-xl",children:[(0,Ks.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Ks.jsx)("div",{className:"p-2 bg-green-100 rounded-lg",children:(0,Ks.jsx)(tn,{size:18,className:"text-green-600"})}),(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("p",{className:"font-medium text-gray-900",children:"Alertes d'\xe9pargne"}),(0,Ks.jsx)("p",{className:"text-sm text-gray-600",children:"Notifications pour les nouveaux plans d'\xe9pargne"})]})]}),(0,Ks.jsx)("button",{onClick:()=>g(ze(ze({},x),{},{savingsAlerts:!x.savingsAlerts})),className:"relative w-12 h-6 rounded-full transition-colors ".concat(x.savingsAlerts?"bg-green-500":"bg-gray-300"),children:(0,Ks.jsx)("div",{className:"absolute top-1 w-4 h-4 bg-white rounded-full transition-transform ".concat(x.savingsAlerts?"translate-x-7":"translate-x-1")})})]}),(0,Ks.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-xl",children:[(0,Ks.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Ks.jsx)("div",{className:"p-2 bg-orange-100 rounded-lg",children:(0,Ks.jsx)(rn,{size:18,className:"text-orange-600"})}),(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("p",{className:"font-medium text-gray-900",children:"Alertes syst\xe8me"}),(0,Ks.jsx)("p",{className:"text-sm text-gray-600",children:"Notifications pour les mises \xe0 jour syst\xe8me"})]})]}),(0,Ks.jsx)("button",{onClick:()=>g(ze(ze({},x),{},{systemAlerts:!x.systemAlerts})),className:"relative w-12 h-6 rounded-full transition-colors ".concat(x.systemAlerts?"bg-green-500":"bg-gray-300"),children:(0,Ks.jsx)("div",{className:"absolute top-1 w-4 h-4 bg-white rounded-full transition-transform ".concat(x.systemAlerts?"translate-x-7":"translate-x-1")})})]})]}),(0,Ks.jsxs)("button",{onClick:async()=>{try{a(!0),await new Promise(e=>setTimeout(e,1e3)),r("Pr\xe9f\xe9rences de notification mises \xe0 jour")}catch(i){console.error("[SETTINGS] Erreur:",i),s("Erreur lors de la mise \xe0 jour")}finally{a(!1)}},disabled:n,className:"flex items-center justify-center gap-2 px-6 py-3 bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white rounded-xl transition-all duration-200 shadow-md hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,Ks.jsx)(Ja,{size:18}),(0,Ks.jsx)("span",{className:"font-medium",children:n?"Enregistrement...":"Enregistrer les pr\xe9f\xe9rences"})]})]})]}),(0,Ks.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden mb-6",children:[(0,Ks.jsx)("div",{className:"p-4 sm:p-6 bg-gradient-to-r from-orange-500 to-red-600 text-white",children:(0,Ks.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Ks.jsx)("div",{className:"p-2 bg-white/20 rounded-xl",children:(0,Ks.jsx)(ex,{size:24})}),(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("h2",{className:"text-xl font-bold font-montserrat",children:"Outils de d\xe9veloppement"}),(0,Ks.jsx)("p",{className:"text-sm text-orange-100",children:"Outils de debug et diagnostic"})]})]})}),(0,Ks.jsxs)("div",{className:"p-4 sm:p-6",children:[(0,Ks.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-xl p-4 mb-4",children:(0,Ks.jsxs)("div",{className:"flex items-start gap-3",children:[(0,Ks.jsx)(rn,{size:20,className:"text-yellow-600 mt-0.5"}),(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("h3",{className:"font-semibold text-yellow-800 mb-1",children:"\u26a0\ufe0f Outils de Debug"}),(0,Ks.jsx)("p",{className:"text-sm text-yellow-700",children:"Ces outils sont destin\xe9s aux d\xe9veloppeurs et administrateurs techniques. Utilisez-les uniquement en cas de probl\xe8me avec les r\xf4les ou les notifications."})]})]})}),(0,Ks.jsxs)("button",{onClick:()=>u(!d),className:"flex items-center justify-center gap-2 px-6 py-3 bg-gradient-to-r from-orange-500 to-red-600 hover:from-orange-600 hover:to-red-700 text-white rounded-xl transition-all duration-200 shadow-md hover:shadow-lg",children:[(0,Ks.jsx)(ex,{size:18}),(0,Ks.jsx)("span",{className:"font-medium",children:d?"Masquer le panneau de debug":"Afficher le panneau de debug"})]})]})]})]}),d&&(0,Ks.jsx)(Yf,{})]})},rx=en("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),sx=()=>{var e,r,s,n,a,i;const o=Y(),[l,c]=(0,t.useState)(!0),[d,u]=(0,t.useState)(null),[m,h]=(0,t.useState)([]),[p,f]=(0,t.useState)({totalPlans:0,totalSaved:0,activePlans:0,completedPlans:0,suspendedPlans:0,averageProgress:0}),[x,g]=(0,t.useState)(""),[v,b]=(0,t.useState)(null),[y,j]=(0,t.useState)([]),[w,N]=(0,t.useState)(null),[S,k]=(0,t.useState)("plans");(0,t.useEffect)(()=>{_(),E()},[]);const _=async()=>{try{c(!0),u(null),console.log("[ADMIN_AB_EPARGNE] \ud83d\udce5 Chargement des plans d'\xe9pargne...");const{data:e,error:t}=await Ms.from("savings_plans").select("*").order("created_at",{ascending:!1});if(t)throw console.error("[ADMIN_AB_EPARGNE] \u274c Erreur plans:",t),u(t.message||"Erreur lors du chargement des plans"),t;console.log("[ADMIN_AB_EPARGNE] \u2705 Plans charg\xe9s:",e),console.log("[ADMIN_AB_EPARGNE] \ud83d\udcca Nombre de plans:",(null===e||void 0===e?void 0:e.length)||0);const r=[...new Set(e.map(e=>e.user_id).filter(Boolean))];console.log("[ADMIN_AB_EPARGNE] \ud83d\udc65 IDs utilisateurs:",r);const{data:s,error:n}=await Ms.from("users").select("id, first_name, last_name, email, phone_number").in("id",r);n&&console.error("[ADMIN_AB_EPARGNE] \u26a0\ufe0f Erreur utilisateurs:",n),console.log("[ADMIN_AB_EPARGNE] \u2705 Utilisateurs charg\xe9s:",(null===s||void 0===s?void 0:s.length)||0);const a={};(s||[]).forEach(e=>{a[e.id]=e});const i=e.map(e=>ze(ze({},e),{},{users:a[e.user_id]||null}));console.log("[ADMIN_AB_EPARGNE] \u2705 Plans avec utilisateurs:",i);const o=(i||[]).map(e=>{const t=e.total_amount_target||e.target_amount||0,r=e.current_balance||0,s=t>0?Math.round(r/t*100):0;return ze(ze({},e),{},{user:e.users,target_amount:t,current_balance:r,monthly_amount:e.fixed_amount||e.monthly_amount||0,progress:Math.min(s,100),daysActive:Math.floor((new Date-new Date(e.created_at))/864e5),isOverdue:e.is_overdue||!1,isSuspended:e.is_suspended||!1})});console.log("[ADMIN_AB_EPARGNE] \ud83d\udccb Plans format\xe9s:",o),h(o);const l=o.filter(e=>"active"===e.status).length,d=o.filter(e=>"completed"===e.status).length,m=o.filter(e=>e.is_suspended).length,p=o.reduce((e,t)=>e+(t.current_balance||0),0),x=o.length>0?Math.round(o.reduce((e,t)=>e+t.progress,0)/o.length):0;f({totalPlans:o.length,totalSaved:p,activePlans:l,completedPlans:d,suspendedPlans:m,averageProgress:x})}catch(d){console.error("[ADMIN_AB_EPARGNE] \u274c Erreur lors du chargement:",d),u(d.message||"Une erreur est survenue"),h([]),f({totalPlans:0,totalSaved:0,activePlans:0,completedPlans:0,suspendedPlans:0,averageProgress:0})}finally{c(!1)}},E=async()=>{try{console.log("[ADMIN_AB_EPARGNE] \ud83d\udce5 Chargement des demandes de retrait...");const{data:e,error:t}=await Ms.from("withdrawal_requests").select("*").order("created_at",{ascending:!1});if(t)throw console.error("[ADMIN_AB_EPARGNE] \u274c Erreur demandes:",t),t;console.log("[ADMIN_AB_EPARGNE] \u2705 Demandes charg\xe9es:",e);const r=[...new Set(e.map(e=>e.user_id).filter(Boolean))],s=[...new Set(e.map(e=>e.savings_plan_id).filter(Boolean))],{data:n}=await Ms.from("users").select("id, first_name, last_name, email, phone_number").in("id",r),{data:a}=await Ms.from("savings_plans").select("id, target_amount, current_balance").in("id",s),i={};(n||[]).forEach(e=>{i[e.id]=e});const o={};(a||[]).forEach(e=>{o[e.id]=e});const l=e.map(e=>ze(ze({},e),{},{user:i[e.user_id]||null,plan:o[e.savings_plan_id]||null}));j(l),console.log("[ADMIN_AB_EPARGNE] \u2705 Demandes format\xe9es:",l)}catch(d){console.error("[ADMIN_AB_EPARGNE] \u274c Erreur chargement demandes:",d)}},C=e=>e.is_suspended?(0,Ks.jsxs)("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-semibold bg-red-100 text-red-700",children:[(0,Ks.jsx)(Uf,{size:14}),"Suspendu"]}):e.is_overdue?(0,Ks.jsxs)("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-semibold bg-orange-100 text-orange-700",children:[(0,Ks.jsx)(rn,{size:14}),"En retard"]}):"completed"===e.status?(0,Ks.jsxs)("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-semibold bg-green-100 text-green-700",children:[(0,Ks.jsx)(tn,{size:14}),"Termin\xe9"]}):"active"===e.status?(0,Ks.jsxs)("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-semibold bg-blue-100 text-blue-700",children:[(0,Ks.jsx)(Cf,{size:14}),"Actif"]}):(0,Ks.jsxs)("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-semibold bg-gray-100 text-gray-700",children:[(0,Ks.jsx)(sp,{size:14}),e.status]}),P=m.filter(e=>{var t,r,s,n,a,i,o,l;if(!x)return!0;const c=x.toLowerCase();return(null===(t=e.user)||void 0===t||null===(r=t.first_name)||void 0===r?void 0:r.toLowerCase().includes(c))||(null===(s=e.user)||void 0===s||null===(n=s.last_name)||void 0===n?void 0:n.toLowerCase().includes(c))||(null===(a=e.user)||void 0===a||null===(i=a.email)||void 0===i?void 0:i.toLowerCase().includes(c))||(null===(o=e.user)||void 0===o||null===(l=o.phone_number)||void 0===l?void 0:l.includes(c))});return l?(0,Ks.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-green-50 via-blue-50 to-purple-50 flex items-center justify-center",children:(0,Ks.jsxs)("div",{className:"text-center",children:[(0,Ks.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-green-500 border-t-transparent mx-auto mb-4"}),(0,Ks.jsx)("p",{className:"text-gray-600 font-medium",children:"Chargement des donn\xe9es..."})]})}):d?(0,Ks.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-green-50 via-blue-50 to-purple-50 flex items-center justify-center p-4",children:(0,Ks.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8 max-w-md w-full text-center",children:[(0,Ks.jsx)("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,Ks.jsx)(rn,{size:32,className:"text-red-600"})}),(0,Ks.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Erreur de chargement"}),(0,Ks.jsx)("p",{className:"text-gray-600 mb-6",children:d}),(0,Ks.jsxs)("div",{className:"space-y-3",children:[(0,Ks.jsxs)("button",{onClick:_,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-green-600 hover:bg-green-700 text-white rounded-xl transition-colors",children:[(0,Ks.jsx)(Pf,{size:18}),"R\xe9essayer"]}),(0,Ks.jsx)("button",{onClick:()=>o("/admin"),className:"w-full px-4 py-3 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-xl transition-colors",children:"Retour au dashboard"})]}),(0,Ks.jsx)("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg text-left",children:(0,Ks.jsx)("p",{className:"text-xs text-gray-500 font-mono break-all",children:d})})]})}):(0,Ks.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-green-50 via-blue-50 to-purple-50 pb-24",children:[(0,Ks.jsx)("div",{className:"bg-white/80 backdrop-blur-lg shadow-lg border-b border-white/50 sticky top-0 z-30",children:(0,Ks.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:(0,Ks.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Ks.jsxs)("div",{className:"flex items-center gap-4",children:[(0,Ks.jsx)("div",{className:"p-3 bg-gradient-to-br from-green-500 to-emerald-600 rounded-2xl shadow-lg",children:(0,Ks.jsx)(Af,{size:32,className:"text-white"})}),(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("h1",{className:"text-3xl font-bold text-gray-900 font-montserrat",children:"AB Epargne"}),(0,Ks.jsx)("p",{className:"text-gray-600 font-montserrat",children:"Gestion des comptes d'\xe9pargne"})]})]}),(0,Ks.jsxs)("button",{onClick:_,className:"flex items-center gap-2 px-4 py-2 bg-white hover:bg-gray-50 border border-gray-200 rounded-xl transition-all duration-200 shadow-sm hover:shadow",children:[(0,Ks.jsx)(Pf,{size:18,className:"text-gray-600"}),(0,Ks.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Actualiser"})]})]})})}),(0,Ks.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,Ks.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:[(0,Ks.jsxs)("div",{className:"bg-white rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-100 group",children:[(0,Ks.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,Ks.jsx)("div",{className:"p-3 bg-blue-100 rounded-xl group-hover:scale-110 transition-transform duration-300",children:(0,Ks.jsx)(Cf,{size:24,className:"text-blue-600"})}),(0,Ks.jsxs)("div",{className:"text-right",children:[(0,Ks.jsx)("p",{className:"text-sm text-gray-600 font-medium",children:"Plans Actifs"}),(0,Ks.jsx)("p",{className:"text-3xl font-bold text-gray-900 mt-1",children:p.activePlans})]})]}),(0,Ks.jsxs)("div",{className:"flex items-center justify-between pt-4 border-t border-gray-100",children:[(0,Ks.jsx)("span",{className:"text-xs text-gray-500",children:"Total plans"}),(0,Ks.jsx)("span",{className:"text-sm font-semibold text-gray-700",children:p.totalPlans})]})]}),(0,Ks.jsxs)("div",{className:"bg-gradient-to-br from-green-500 to-emerald-600 rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 text-white group",children:[(0,Ks.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,Ks.jsx)("div",{className:"p-3 bg-white/20 rounded-xl group-hover:scale-110 transition-transform duration-300",children:(0,Ks.jsx)(_p,{size:24,className:"text-white"})}),(0,Ks.jsxs)("div",{className:"text-right",children:[(0,Ks.jsx)("p",{className:"text-sm text-green-100 font-medium",children:"Total \xc9pargn\xe9"}),(0,Ks.jsx)("p",{className:"text-2xl font-bold mt-1",children:pf(p.totalSaved)})]})]}),(0,Ks.jsxs)("div",{className:"flex items-center gap-2 pt-4 border-t border-white/20",children:[(0,Ks.jsx)(Of,{size:16,className:"text-green-200"}),(0,Ks.jsxs)("span",{className:"text-sm text-green-100",children:["Progression moyenne: ",p.averageProgress,"%"]})]})]}),(0,Ks.jsx)("div",{className:"bg-white rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-100",children:(0,Ks.jsxs)("div",{className:"space-y-3",children:[(0,Ks.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Ks.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Ks.jsx)(tn,{size:18,className:"text-green-600"}),(0,Ks.jsx)("span",{className:"text-sm text-gray-600",children:"Termin\xe9s"})]}),(0,Ks.jsx)("span",{className:"text-lg font-bold text-gray-900",children:p.completedPlans})]}),(0,Ks.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Ks.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Ks.jsx)(Uf,{size:18,className:"text-red-600"}),(0,Ks.jsx)("span",{className:"text-sm text-gray-600",children:"Suspendus"})]}),(0,Ks.jsx)("span",{className:"text-lg font-bold text-gray-900",children:p.suspendedPlans})]}),(0,Ks.jsxs)("div",{className:"flex items-center justify-between pt-3 border-t border-gray-100",children:[(0,Ks.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Ks.jsx)(Tf,{size:18,className:"text-purple-600"}),(0,Ks.jsx)("span",{className:"text-sm text-gray-600",children:"Taux de r\xe9ussite"})]}),(0,Ks.jsxs)("span",{className:"text-lg font-bold text-purple-600",children:[p.totalPlans>0?Math.round(p.completedPlans/p.totalPlans*100):0,"%"]})]})]})})]}),(0,Ks.jsx)("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 p-2 mb-6",children:(0,Ks.jsxs)("div",{className:"flex gap-2",children:[(0,Ks.jsxs)("button",{onClick:()=>k("plans"),className:"flex-1 flex items-center justify-center gap-2 px-6 py-3 rounded-xl font-semibold transition-all duration-200 ".concat("plans"===S?"bg-gradient-to-r from-green-500 to-emerald-600 text-white shadow-lg":"bg-gray-50 text-gray-600 hover:bg-gray-100"),children:[(0,Ks.jsx)(Af,{size:20}),(0,Ks.jsx)("span",{children:"Plans d'\xe9pargne"}),(0,Ks.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-bold ".concat("plans"===S?"bg-white/20":"bg-gray-200 text-gray-700"),children:m.length})]}),(0,Ks.jsxs)("button",{onClick:()=>k("withdrawals"),className:"flex-1 flex items-center justify-center gap-2 px-6 py-3 rounded-xl font-semibold transition-all duration-200 ".concat("withdrawals"===S?"bg-gradient-to-r from-green-500 to-emerald-600 text-white shadow-lg":"bg-gray-50 text-gray-600 hover:bg-gray-100"),children:[(0,Ks.jsx)(yp,{size:20}),(0,Ks.jsx)("span",{children:"Demandes de retrait"}),(0,Ks.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-bold ".concat("withdrawals"===S?"bg-white/20":"bg-gray-200 text-gray-700"),children:y.filter(e=>"pending"===e.status).length})]})]})}),"plans"===S&&(0,Ks.jsx)("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 p-4 mb-6",children:(0,Ks.jsxs)("div",{className:"relative",children:[(0,Ks.jsx)(Mf,{size:20,className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,Ks.jsx)("input",{type:"text",placeholder:"Rechercher par nom, email ou t\xe9l\xe9phone...",value:x,onChange:e=>g(e.target.value),className:"w-full pl-12 pr-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-transparent font-montserrat"})]})}),"plans"===S&&(0,Ks.jsxs)("div",{className:"space-y-4",children:[(0,Ks.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,Ks.jsxs)("h2",{className:"text-xl font-bold text-gray-900 font-montserrat",children:["Plans d'\xe9pargne (",P.length,")"]})}),0===P.length?(0,Ks.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 p-12 text-center",children:[(0,Ks.jsx)(Af,{size:64,className:"mx-auto text-gray-300 mb-4"}),(0,Ks.jsx)("p",{className:"text-gray-500 font-medium",children:"Aucun plan d'\xe9pargne trouv\xe9"}),x&&(0,Ks.jsx)("button",{onClick:()=>g(""),className:"mt-4 text-green-600 hover:text-green-700 font-medium",children:"Effacer la recherche"})]}):(0,Ks.jsx)("div",{className:"grid grid-cols-1 gap-4",children:P.map(e=>{var t,r,s,n,a,i,o,l;return(0,Ks.jsx)("div",{className:"bg-white rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-100 overflow-hidden group",children:(0,Ks.jsxs)("div",{className:"p-6",children:[(0,Ks.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,Ks.jsxs)("div",{className:"flex items-center gap-4",children:[(0,Ks.jsxs)("div",{className:"w-12 h-12 bg-gradient-to-br from-green-400 to-blue-500 rounded-full flex items-center justify-center text-white font-bold text-lg shadow-lg",children:[(null===(t=e.user)||void 0===t||null===(r=t.first_name)||void 0===r?void 0:r[0])||"?",(null===(s=e.user)||void 0===s||null===(n=s.last_name)||void 0===n?void 0:n[0])||""]}),(0,Ks.jsxs)("div",{children:[(0,Ks.jsxs)("h3",{className:"text-lg font-bold text-gray-900 font-montserrat",children:[(null===(a=e.user)||void 0===a?void 0:a.first_name)||"Inconnu"," ",(null===(i=e.user)||void 0===i?void 0:i.last_name)||""]}),(0,Ks.jsxs)("div",{className:"flex items-center gap-3 mt-1",children:[(0,Ks.jsxs)("div",{className:"flex items-center gap-1 text-sm text-gray-500",children:[(0,Ks.jsx)(Jp,{size:14}),(null===(o=e.user)||void 0===o?void 0:o.email)||"N/A"]}),(null===(l=e.user)||void 0===l?void 0:l.phone_number)&&(0,Ks.jsxs)("div",{className:"flex items-center gap-1 text-sm text-gray-500",children:[(0,Ks.jsx)(Kp,{size:14}),e.user.phone_number]})]})]})]}),C(e)]}),(0,Ks.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[(0,Ks.jsxs)("div",{className:"bg-gray-50 rounded-xl p-3",children:[(0,Ks.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,Ks.jsx)(Jf,{size:16,className:"text-blue-600"}),(0,Ks.jsx)("p",{className:"text-xs text-gray-600 font-medium",children:"Objectif"})]}),(0,Ks.jsx)("p",{className:"text-lg font-bold text-gray-900",children:pf(e.target_amount)})]}),(0,Ks.jsxs)("div",{className:"bg-green-50 rounded-xl p-3",children:[(0,Ks.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,Ks.jsx)(_p,{size:16,className:"text-green-600"}),(0,Ks.jsx)("p",{className:"text-xs text-gray-600 font-medium",children:"\xc9pargn\xe9"})]}),(0,Ks.jsx)("p",{className:"text-lg font-bold text-green-700",children:pf(e.current_balance||0)})]}),(0,Ks.jsxs)("div",{className:"bg-purple-50 rounded-xl p-3",children:[(0,Ks.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,Ks.jsx)(Gf,{size:16,className:"text-purple-600"}),(0,Ks.jsx)("p",{className:"text-xs text-gray-600 font-medium",children:"Mensualit\xe9"})]}),(0,Ks.jsx)("p",{className:"text-lg font-bold text-purple-700",children:pf(e.monthly_amount||0)})]}),(0,Ks.jsxs)("div",{className:"bg-orange-50 rounded-xl p-3",children:[(0,Ks.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,Ks.jsx)(rx,{size:16,className:"text-orange-600"}),(0,Ks.jsx)("p",{className:"text-xs text-gray-600 font-medium",children:"Prochain d\xe9p\xf4t"})]}),(0,Ks.jsx)("p",{className:"text-sm font-bold text-orange-700",children:e.next_deposit_date?new Date(e.next_deposit_date).toLocaleDateString("fr-FR",{day:"2-digit",month:"short"}):"N/A"})]})]}),(0,Ks.jsxs)("div",{className:"mb-4",children:[(0,Ks.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,Ks.jsx)("span",{className:"text-sm font-medium text-gray-600",children:"Progression"}),(0,Ks.jsxs)("span",{className:"text-sm font-bold text-green-600",children:[e.progress,"%"]})]}),(0,Ks.jsx)("div",{className:"relative w-full h-3 bg-gray-200 rounded-full overflow-hidden",children:(0,Ks.jsx)("div",{className:"absolute top-0 left-0 h-full bg-gradient-to-r from-green-500 to-emerald-600 rounded-full transition-all duration-500",style:{width:"".concat(e.progress,"%")},children:(0,Ks.jsx)("div",{className:"absolute inset-0 bg-white/20 animate-pulse"})})})]}),(0,Ks.jsxs)("div",{className:"flex items-center justify-between pt-4 border-t border-gray-100",children:[(0,Ks.jsxs)("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[(0,Ks.jsxs)("span",{children:["Cr\xe9\xe9 il y a ",e.daysActive," jours"]}),e.is_overdue&&e.days_overdue>0&&(0,Ks.jsxs)("span",{className:"text-orange-600 font-medium",children:["\u26a0\ufe0f ",e.days_overdue," jour(s) de retard"]})]}),(0,Ks.jsxs)("button",{onClick:()=>b(e),className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white rounded-xl transition-all duration-200 shadow-md hover:shadow-lg group",children:[(0,Ks.jsx)(Qp,{size:16}),(0,Ks.jsx)("span",{className:"text-sm font-medium",children:"D\xe9tails"})]})]})]})},e.id)})})]}),"withdrawals"===S&&(0,Ks.jsxs)("div",{className:"space-y-4",children:[(0,Ks.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,Ks.jsxs)("h2",{className:"text-xl font-bold text-gray-900 font-montserrat",children:["Demandes de retrait (",y.length,")"]})}),0===y.length?(0,Ks.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 p-12 text-center",children:[(0,Ks.jsx)(yp,{size:64,className:"mx-auto text-gray-300 mb-4"}),(0,Ks.jsx)("p",{className:"text-gray-500 font-medium",children:"Aucune demande de retrait"})]}):(0,Ks.jsx)("div",{className:"grid gap-4",children:y.map(e=>{var t,r,s,n,a,i,o;return(0,Ks.jsx)("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 hover:shadow-xl transition-all duration-300 overflow-hidden",children:(0,Ks.jsxs)("div",{className:"p-6",children:[(0,Ks.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,Ks.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Ks.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-green-100 to-emerald-100 rounded-xl flex items-center justify-center",children:(0,Ks.jsxs)("span",{className:"text-xl font-bold text-green-700",children:[null===(t=e.user)||void 0===t||null===(r=t.first_name)||void 0===r?void 0:r[0],null===(s=e.user)||void 0===s||null===(n=s.last_name)||void 0===n?void 0:n[0]]})}),(0,Ks.jsxs)("div",{children:[(0,Ks.jsxs)("h3",{className:"text-lg font-bold text-gray-900",children:[null===(a=e.user)||void 0===a?void 0:a.first_name," ",null===(i=e.user)||void 0===i?void 0:i.last_name]}),(0,Ks.jsx)("p",{className:"text-sm text-gray-500",children:null===(o=e.user)||void 0===o?void 0:o.email})]})]}),(0,Ks.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-semibold ".concat("pending"===e.status?"bg-orange-100 text-orange-700":"approved"===e.status?"bg-green-100 text-green-700":"bg-red-100 text-red-700"),children:"pending"===e.status?"\u23f3 En attente":"approved"===e.status?"\u2705 Approuv\xe9":"\u274c Refus\xe9"})]}),(0,Ks.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[(0,Ks.jsxs)("div",{className:"bg-blue-50 rounded-xl p-3",children:[(0,Ks.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,Ks.jsx)(_p,{size:16,className:"text-blue-600"}),(0,Ks.jsx)("p",{className:"text-xs text-gray-600 font-medium",children:"Montant"})]}),(0,Ks.jsx)("p",{className:"text-lg font-bold text-blue-700",children:pf(e.amount||0)})]}),(0,Ks.jsxs)("div",{className:"bg-purple-50 rounded-xl p-3",children:[(0,Ks.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,Ks.jsx)(Kp,{size:16,className:"text-purple-600"}),(0,Ks.jsx)("p",{className:"text-xs text-gray-600 font-medium",children:"Num\xe9ro"})]}),(0,Ks.jsx)("p",{className:"text-sm font-bold text-purple-700",children:e.recipient_phone})]}),(0,Ks.jsxs)("div",{className:"bg-green-50 rounded-xl p-3",children:[(0,Ks.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,Ks.jsx)(Lf,{size:16,className:"text-green-600"}),(0,Ks.jsx)("p",{className:"text-xs text-gray-600 font-medium",children:"Nom"})]}),(0,Ks.jsx)("p",{className:"text-sm font-bold text-green-700",children:e.recipient_name})]}),(0,Ks.jsxs)("div",{className:"bg-orange-50 rounded-xl p-3",children:[(0,Ks.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,Ks.jsx)(rx,{size:16,className:"text-orange-600"}),(0,Ks.jsx)("p",{className:"text-xs text-gray-600 font-medium",children:"Date"})]}),(0,Ks.jsx)("p",{className:"text-xs font-bold text-orange-700",children:new Date(e.created_at).toLocaleDateString("fr-FR",{day:"2-digit",month:"short",year:"numeric"})})]})]}),"pending"===e.status&&(0,Ks.jsxs)("div",{className:"flex items-center gap-3 pt-4 border-t border-gray-100",children:[(0,Ks.jsxs)("button",{onClick:()=>(async e=>{try{var t;console.log("[ADMIN_AB_EPARGNE] \u2705 Approbation retrait:",e.id);const{error:r}=await Ms.from("withdrawal_requests").update({status:"approved",processed_at:(new Date).toISOString(),processed_by:null===(t=(await Ms.auth.getUser()).data.user)||void 0===t?void 0:t.id}).eq("id",e.id);if(r)throw r;const{error:s}=await Ms.from("savings_plans").update({current_balance:0,target_amount:0,status:"completed",updated_at:(new Date).toISOString()}).eq("id",e.savings_plan_id);if(s)throw s;await Ms.from("notifications").insert([{user_id:e.user_id,title:"Retrait approuv\xe9",message:"Votre retrait de ".concat(pf(e.amount)," a \xe9t\xe9 approuv\xe9 et transf\xe9r\xe9."),type:"withdrawal_approved",data:{withdrawal_id:e.id,amount:e.amount}}]),Da.success("Retrait approuv\xe9 avec succ\xe8s !"),N(null),E(),_()}catch(d){console.error("[ADMIN_AB_EPARGNE] \u274c Erreur approbation:",d),Da.error("Erreur lors de l'approbation du retrait")}})(e),className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white rounded-xl transition-all duration-200 shadow-md hover:shadow-lg font-semibold",children:[(0,Ks.jsx)(tn,{size:18}),(0,Ks.jsx)("span",{children:"Approuver"})]}),(0,Ks.jsxs)("button",{onClick:()=>N(e),className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 bg-red-500 hover:bg-red-600 text-white rounded-xl transition-all duration-200 shadow-md hover:shadow-lg font-semibold",children:[(0,Ks.jsx)(Uf,{size:18}),(0,Ks.jsx)("span",{children:"Refuser"})]})]}),"pending"!==e.status&&e.processed_at&&(0,Ks.jsxs)("div",{className:"pt-4 border-t border-gray-100",children:[(0,Ks.jsxs)("p",{className:"text-xs text-gray-500",children:["Trait\xe9 le ",new Date(e.processed_at).toLocaleDateString("fr-FR",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})]}),e.notes&&(0,Ks.jsxs)("p",{className:"text-sm text-gray-600 mt-2",children:[(0,Ks.jsx)("span",{className:"font-semibold",children:"Note:"})," ",e.notes]})]})]})},e.id)})})]})]}),w&&(0,Ks.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:(0,Ks.jsxs)("div",{className:"bg-white rounded-3xl shadow-2xl max-w-md w-full",children:[(0,Ks.jsx)("div",{className:"bg-gradient-to-r from-red-500 to-red-600 text-white p-6 rounded-t-3xl",children:(0,Ks.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Ks.jsx)("h3",{className:"text-2xl font-bold",children:"Refuser la demande"}),(0,Ks.jsx)("button",{onClick:()=>N(null),className:"p-2 hover:bg-white/20 rounded-full transition-colors",children:(0,Ks.jsx)(Uf,{size:24})})]})}),(0,Ks.jsxs)("div",{className:"p-6",children:[(0,Ks.jsxs)("p",{className:"text-gray-600 mb-4",children:["\xcates-vous s\xfbr de vouloir refuser la demande de retrait de ",(0,Ks.jsxs)("span",{className:"font-bold",children:[null===(e=w.user)||void 0===e?void 0:e.first_name," ",null===(r=w.user)||void 0===r?void 0:r.last_name]})," ?"]}),(0,Ks.jsxs)("div",{className:"mb-6",children:[(0,Ks.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Raison du refus"}),(0,Ks.jsx)("textarea",{id:"rejection-reason",rows:"3",className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"Expliquez pourquoi vous refusez cette demande..."})]}),(0,Ks.jsxs)("div",{className:"flex gap-3",children:[(0,Ks.jsx)("button",{onClick:()=>N(null),className:"flex-1 px-4 py-3 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-xl transition-colors font-semibold",children:"Annuler"}),(0,Ks.jsx)("button",{onClick:()=>{const e=document.getElementById("rejection-reason").value;e.trim()?(async(e,t)=>{try{var r;console.log("[ADMIN_AB_EPARGNE] \u274c Rejet retrait:",e.id);const{error:s}=await Ms.from("withdrawal_requests").update({status:"rejected",processed_at:(new Date).toISOString(),processed_by:null===(r=(await Ms.auth.getUser()).data.user)||void 0===r?void 0:r.id,notes:t}).eq("id",e.id);if(s)throw s;const{error:n}=await Ms.from("savings_plans").update({status:"active",updated_at:(new Date).toISOString()}).eq("id",e.savings_plan_id);if(n)throw n;await Ms.from("notifications").insert([{user_id:e.user_id,title:"Retrait refus\xe9",message:"Votre demande de retrait a \xe9t\xe9 refus\xe9e. Raison: ".concat(t),type:"withdrawal_rejected",data:{withdrawal_id:e.id,reason:t}}]),Da.success("Demande rejet\xe9e"),N(null),E(),_()}catch(d){console.error("[ADMIN_AB_EPARGNE] \u274c Erreur rejet:",d),Da.error("Erreur lors du rejet de la demande")}})(w,e):Da.error("Veuillez indiquer une raison")},className:"flex-1 px-4 py-3 bg-red-500 hover:bg-red-600 text-white rounded-xl transition-colors font-semibold",children:"Confirmer le refus"})]})]})]})}),v&&(0,Ks.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4 overflow-y-auto",children:(0,Ks.jsxs)("div",{className:"bg-white rounded-3xl shadow-2xl max-w-2xl w-full my-8",children:[(0,Ks.jsx)("div",{className:"sticky top-0 bg-gradient-to-r from-green-500 to-emerald-600 text-white p-6 rounded-t-3xl z-10",children:(0,Ks.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Ks.jsx)("h3",{className:"text-2xl font-bold",children:"D\xe9tails du plan"}),(0,Ks.jsx)("button",{onClick:()=>b(null),className:"p-2 hover:bg-white/20 rounded-full transition-colors",children:(0,Ks.jsx)(Uf,{size:24})})]})}),(0,Ks.jsxs)("div",{className:"p-6 pb-32 space-y-6 max-h-[calc(90vh-80px)] overflow-y-auto",children:[(0,Ks.jsxs)("div",{className:"bg-gray-50 rounded-2xl p-4",children:[(0,Ks.jsxs)("h4",{className:"font-bold text-gray-900 mb-3 flex items-center gap-2",children:[(0,Ks.jsx)(Lf,{size:18}),"Informations client"]}),(0,Ks.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,Ks.jsxs)("p",{children:[(0,Ks.jsx)("span",{className:"font-medium",children:"Nom:"})," ",null===(s=v.user)||void 0===s?void 0:s.first_name," ",null===(n=v.user)||void 0===n?void 0:n.last_name]}),(0,Ks.jsxs)("p",{children:[(0,Ks.jsx)("span",{className:"font-medium",children:"Email:"})," ",null===(a=v.user)||void 0===a?void 0:a.email]}),(0,Ks.jsxs)("p",{children:[(0,Ks.jsx)("span",{className:"font-medium",children:"T\xe9l\xe9phone:"})," ",(null===(i=v.user)||void 0===i?void 0:i.phone_number)||"N/A"]})]})]}),(0,Ks.jsxs)("div",{className:"bg-green-50 rounded-2xl p-4",children:[(0,Ks.jsxs)("h4",{className:"font-bold text-gray-900 mb-3 flex items-center gap-2",children:[(0,Ks.jsx)(Gf,{size:18}),"D\xe9tails financiers"]}),(0,Ks.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("p",{className:"text-gray-600",children:"Objectif"}),(0,Ks.jsx)("p",{className:"font-bold text-lg",children:pf(v.target_amount)})]}),(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("p",{className:"text-gray-600",children:"\xc9pargn\xe9"}),(0,Ks.jsx)("p",{className:"font-bold text-lg text-green-600",children:pf(v.current_balance||0)})]}),(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("p",{className:"text-gray-600",children:"Mensualit\xe9"}),(0,Ks.jsx)("p",{className:"font-bold",children:pf(v.monthly_amount||0)})]}),(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("p",{className:"text-gray-600",children:"Fr\xe9quence"}),(0,Ks.jsx)("p",{className:"font-bold capitalize",children:v.deposit_frequency||"N/A"})]}),(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("p",{className:"text-gray-600",children:"Taux d'int\xe9r\xeat"}),(0,Ks.jsxs)("p",{className:"font-bold",children:[v.interest_rate||0,"%"]})]}),(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("p",{className:"text-gray-600",children:"Int\xe9r\xeats accumul\xe9s"}),(0,Ks.jsx)("p",{className:"font-bold text-purple-600",children:pf(v.accumulated_interest||0)})]})]})]}),(0,Ks.jsxs)("div",{className:"bg-blue-50 rounded-2xl p-4",children:[(0,Ks.jsxs)("h4",{className:"font-bold text-gray-900 mb-3 flex items-center gap-2",children:[(0,Ks.jsx)(rx,{size:18}),"Dates importantes"]}),(0,Ks.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,Ks.jsxs)("p",{children:[(0,Ks.jsx)("span",{className:"font-medium",children:"Cr\xe9\xe9 le:"})," ",new Date(v.created_at).toLocaleDateString("fr-FR")]}),(0,Ks.jsxs)("p",{children:[(0,Ks.jsx)("span",{className:"font-medium",children:"Prochain d\xe9p\xf4t:"})," ",v.next_deposit_date?new Date(v.next_deposit_date).toLocaleDateString("fr-FR"):"N/A"]}),v.is_overdue&&(0,Ks.jsxs)("p",{className:"text-orange-600 font-medium",children:["\u26a0\ufe0f En retard depuis ",v.days_overdue," jour(s)"]})]})]}),(0,Ks.jsxs)("div",{className:"bg-purple-50 rounded-2xl p-4",children:[(0,Ks.jsx)("h4",{className:"font-bold text-gray-900 mb-3",children:"Progression"}),(0,Ks.jsx)("div",{className:"relative w-full h-4 bg-gray-200 rounded-full overflow-hidden mb-2",children:(0,Ks.jsx)("div",{className:"absolute top-0 left-0 h-full bg-gradient-to-r from-green-500 to-emerald-600 rounded-full",style:{width:"".concat(v.progress,"%")}})}),(0,Ks.jsxs)("p",{className:"text-center font-bold text-2xl text-green-600",children:[v.progress,"%"]})]})]})]})})]})},nx=en("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),ax=["children","className","title"],ix=e=>{let{children:t,className:r="",title:s}=e,n=Qs(e,ax);return(0,Ks.jsxs)("div",ze(ze({className:"bg-white rounded-xl shadow-soft border border-accent-200 ".concat(r)},n),{},{children:[s&&(0,Ks.jsx)("div",{className:"px-6 py-4 border-b border-accent-200",children:(0,Ks.jsx)("h3",{className:"text-lg font-semibold text-secondary-900 font-montserrat",children:s})}),(0,Ks.jsx)("div",{className:"p-6",children:t})]}))},ox=()=>{const[e,r]=(0,t.useState)([]),[s,n]=(0,t.useState)(""),[a,i]=(0,t.useState)("approval"),[o,l]=(0,t.useState)(!1),[c,d]=(0,t.useState)(null),[u,m]=(0,t.useState)(!0);(0,t.useEffect)(()=>{h()},[]);const h=async()=>{try{m(!0);const e=await Vs();if(e.success){const t=e.data.filter(e=>"approved"===e.status);r(t),console.log("[TEST_NOTIFICATIONS] Utilisateurs charg\xe9s:",t.length)}else console.error("[TEST_NOTIFICATIONS] Erreur chargement utilisateurs:",e.error)}catch(e){console.error("[TEST_NOTIFICATIONS] Erreur:",e)}finally{m(!1)}},p=e.find(e=>e.id===s);return(0,Ks.jsxs)("div",{className:"space-y-6",children:[(0,Ks.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Test des Notifications"}),(0,Ks.jsx)("p",{className:"text-gray-600",children:"Envoyer des notifications de test aux utilisateurs"})]}),(0,Ks.jsxs)(sf,{onClick:h,variant:"outline",size:"sm",className:"flex items-center space-x-2",disabled:u,children:[(0,Ks.jsx)(Pf,{size:16,className:u?"animate-spin":""}),(0,Ks.jsx)("span",{children:"Actualiser"})]})]}),(0,Ks.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,Ks.jsx)(ix,{children:(0,Ks.jsxs)("div",{className:"p-6",children:[(0,Ks.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center space-x-2",children:[(0,Ks.jsx)(Ja,{size:20,className:"text-primary-600"}),(0,Ks.jsx)("span",{children:"Configuration du test"})]}),(0,Ks.jsxs)("div",{className:"space-y-4",children:[(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Utilisateur cible"}),u?(0,Ks.jsxs)("div",{className:"flex items-center space-x-2 text-gray-500",children:[(0,Ks.jsx)(Nf,{size:16,className:"animate-spin"}),(0,Ks.jsx)("span",{children:"Chargement des utilisateurs..."})]}):(0,Ks.jsxs)("select",{value:s,onChange:e=>n(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[(0,Ks.jsx)("option",{value:"",children:"S\xe9lectionner un utilisateur"}),e.map(e=>(0,Ks.jsxs)("option",{value:e.id,children:[e.first_name," ",e.last_name," (",e.email,")"]},e.id))]}),p&&(0,Ks.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:[p.first_name," ",p.last_name," - ",p.email]})]}),(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Type de notification"}),(0,Ks.jsx)("div",{className:"space-y-2",children:["approval","reminder","overdue"].map(e=>{const t=(e=>{const t={approval:{icon:(0,Ks.jsx)(tn,{size:20,className:"text-green-600"}),title:"Pr\xeat approuv\xe9",description:"Notification de validation de pr\xeat",color:"text-green-600 bg-green-100"},reminder:{icon:(0,Ks.jsx)(sp,{size:20,className:"text-blue-600"}),title:"Rappel de remboursement",description:"Notification de rappel avant \xe9ch\xe9ance",color:"text-blue-600 bg-blue-100"},overdue:{icon:(0,Ks.jsx)(zf,{size:20,className:"text-red-600"}),title:"Pr\xeat en retard",description:"Notification de pr\xeat en retard avec p\xe9nalit\xe9s",color:"text-red-600 bg-red-100"}};return t[e]||t.approval})(e);return(0,Ks.jsxs)("label",{className:"flex items-center space-x-3 p-3 border rounded-lg cursor-pointer hover:bg-gray-50",children:[(0,Ks.jsx)("input",{type:"radio",name:"testType",value:e,checked:a===e,onChange:e=>i(e.target.value),className:"text-primary-600 focus:ring-primary-500"}),(0,Ks.jsx)("div",{className:"p-2 rounded-lg ".concat(t.color),children:t.icon}),(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("p",{className:"font-medium text-gray-900",children:t.title}),(0,Ks.jsx)("p",{className:"text-sm text-gray-500",children:t.description})]})]},e)})})]}),(0,Ks.jsx)(sf,{onClick:async()=>{if(s)try{l(!0),d(null);const e=(()=>"https://ab-pret-back.onrender.com")();console.log("[TEST_NOTIFICATIONS] Envoi notification de test...",{userId:s,testType:a,backendUrl:e});const t=await fetch("".concat(e,"/api/test-loan-notification"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:s,testType:a})}),r=await t.json();r.success?(d({type:"success",message:"Notification envoy\xe9e avec succ\xe8s !",details:r.details}),console.log("[TEST_NOTIFICATIONS] \u2705 Notification envoy\xe9e:",r.details)):(d({type:"error",message:r.error||"Erreur lors de l'envoi de la notification",details:null}),console.error("[TEST_NOTIFICATIONS] \u274c Erreur:",r.error))}catch(e){console.error("[TEST_NOTIFICATIONS] Erreur r\xe9seau:",e),d({type:"error",message:"Erreur de connexion au serveur",details:null})}finally{l(!1)}else alert("Veuillez s\xe9lectionner un utilisateur")},disabled:!s||o,className:"w-full flex items-center justify-center space-x-2",children:o?(0,Ks.jsxs)(Ks.Fragment,{children:[(0,Ks.jsx)(Nf,{size:16,className:"animate-spin"}),(0,Ks.jsx)("span",{children:"Envoi en cours..."})]}):(0,Ks.jsxs)(Ks.Fragment,{children:[(0,Ks.jsx)(nx,{size:16}),(0,Ks.jsx)("span",{children:"Envoyer la notification de test"})]})})]})]})}),(0,Ks.jsx)(ix,{children:(0,Ks.jsxs)("div",{className:"p-6",children:[(0,Ks.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center space-x-2",children:[(0,Ks.jsx)(yp,{size:20,className:"text-primary-600"}),(0,Ks.jsx)("span",{children:"R\xe9sultat du test"})]}),c?(0,Ks.jsx)(ep.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"p-4 rounded-lg ".concat("success"===c.type?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"),children:(0,Ks.jsxs)("div",{className:"flex items-start space-x-3",children:["success"===c.type?(0,Ks.jsx)(tn,{size:20,className:"text-green-600 mt-0.5"}):(0,Ks.jsx)(rn,{size:20,className:"text-red-600 mt-0.5"}),(0,Ks.jsxs)("div",{className:"flex-1",children:[(0,Ks.jsx)("p",{className:"font-medium ".concat("success"===c.type?"text-green-800":"text-red-800"),children:c.message}),c.details&&(0,Ks.jsxs)("div",{className:"mt-3 space-y-2 text-sm",children:[(0,Ks.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("span",{className:"font-medium text-gray-700",children:"Utilisateur:"}),(0,Ks.jsx)("p",{className:"text-gray-600",children:c.details.user})]}),(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("span",{className:"font-medium text-gray-700",children:"Email:"}),(0,Ks.jsx)("p",{className:"text-gray-600",children:c.details.email})]}),(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("span",{className:"font-medium text-gray-700",children:"Type:"}),(0,Ks.jsx)("p",{className:"text-gray-600",children:c.details.testType})]}),(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("span",{className:"font-medium text-gray-700",children:"Abonnements:"}),(0,Ks.jsx)("p",{className:"text-gray-600",children:c.details.subscriptionsFound})]}),(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("span",{className:"font-medium text-gray-700",children:"Envoy\xe9es:"}),(0,Ks.jsx)("p",{className:"text-gray-600",children:c.details.notificationsSent})]}),(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("span",{className:"font-medium text-gray-700",children:"Erreurs:"}),(0,Ks.jsx)("p",{className:"text-gray-600",children:c.details.errors})]})]}),c.details.notificationData&&(0,Ks.jsxs)("div",{className:"mt-3 p-3 bg-gray-100 rounded-lg",children:[(0,Ks.jsx)("p",{className:"font-medium text-gray-700 mb-1",children:"Contenu de la notification:"}),(0,Ks.jsxs)("p",{className:"text-sm text-gray-600",children:[(0,Ks.jsx)("strong",{children:"Titre:"})," ",c.details.notificationData.title]}),(0,Ks.jsxs)("p",{className:"text-sm text-gray-600",children:[(0,Ks.jsx)("strong",{children:"Message:"})," ",c.details.notificationData.body]})]})]})]})]})}):(0,Ks.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,Ks.jsx)(Ja,{size:48,className:"mx-auto mb-4 opacity-50"}),(0,Ks.jsx)("p",{children:"Aucun test effectu\xe9"}),(0,Ks.jsx)("p",{className:"text-sm",children:"S\xe9lectionnez un utilisateur et envoyez une notification de test"})]})]})})]}),(0,Ks.jsx)(ix,{children:(0,Ks.jsxs)("div",{className:"p-6",children:[(0,Ks.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Informations sur l'environnement"}),(0,Ks.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("span",{className:"font-medium text-gray-700",children:"Environnement:"}),(0,Ks.jsx)("p",{className:"text-gray-600",children:"production"})]}),(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("span",{className:"font-medium text-gray-700",children:"Backend URL:"}),(0,Ks.jsx)("p",{className:"text-gray-600",children:"https://ab-pret-back.onrender.com"})]}),(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("span",{className:"font-medium text-gray-700",children:"Utilisateurs disponibles:"}),(0,Ks.jsxs)("p",{className:"text-gray-600",children:[e.length," utilisateurs approuv\xe9s"]})]})]})]})})]})},lx=en("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]),cx=en("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]),dx=en("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]),ux=en("Check",[["polyline",{points:"20 6 9 17 4 12",key:"10jjfj"}]]),mx={durations:[{value:5,label:"5 jours",days:5},{value:10,label:"10 jours",days:10},{value:15,label:"15 jours",days:15},{value:25,label:"25 jours",days:25},{value:30,label:"30 jours",days:30}],interestRates:{5:6,10:10,15:15,25:25,30:25},amounts:{min:1e3,max:5e5},monthlyIncome:{min:1e4,max:2e6},getInterestRate:function(e){return 25===e?25:30===e?(arguments.length>1&&void 0!==arguments[1]?arguments[1]:0)>=2e4?25:30:mx.interestRates[e]||25},calculateInterest:(e,t)=>e*mx.getInterestRate(t,e)/100,calculateTotalAmount:(e,t)=>e+mx.calculateInterest(e,t),calculatePaymentAmount:(e,t)=>e,validateLoan:(e,t)=>{const r=[];e<mx.amounts.min&&r.push("Le montant minimum est de ".concat(mx.amounts.min.toLocaleString()," FCFA")),e>mx.amounts.max&&r.push("Le montant maximum est de ".concat(mx.amounts.max.toLocaleString()," FCFA"));const s=mx.durations.map(e=>e.days);return s.includes(t)||r.push("Dur\xe9e de pr\xeat non valide"),{isValid:0===r.length,errors:r}},validateMonthlyIncome:e=>{const t=[];return e<mx.monthlyIncome.min&&t.push("Le revenu mensuel minimum est de ".concat(mx.monthlyIncome.min.toLocaleString()," FCFA")),e>mx.monthlyIncome.max&&t.push("Le revenu mensuel maximum est de ".concat(mx.monthlyIncome.max.toLocaleString()," FCFA")),{isValid:0===t.length,errors:t}}},hx=()=>{const{user:e}=Zs(),{showSuccess:r,showError:s}=ln(),n=Y(),[a,i]=(0,t.useState)(1),[o,l]=(0,t.useState)({amount:"",duration:5,purpose:"",employmentStatus:"student",guarantee:"",momoNumber:"",momoNetwork:"",momoName:"",category:""}),[c,d]=(0,t.useState)(!1),[u,m]=(0,t.useState)(!1),[h,p]=(0,t.useState)(null),[f,x]=(0,t.useState)(!1),[g,v]=(0,t.useState)(!1),[b,y]=(0,t.useState)({}),[j,w]=(0,t.useState)(null),[N,S]=(0,t.useState)(!1),[k,_]=(0,t.useState)(!0);(0,t.useEffect)(()=>{E()},[null===e||void 0===e?void 0:e.id]);const E=async()=>{try{_(!0);const t=await Hs(e.id);if(t.success){const e=(t.data||[]).find(e=>"active"===e.status||"approved"===e.status||"overdue"===e.status);S(!!e),e&&("overdue"===e.status?s("Vous ne pouvez pas demander un nouveau pr\xeat tant que votre pr\xeat en retard n'est pas rembours\xe9."):s("Vous avez d\xe9j\xe0 un pr\xeat en cours. Vous devez le rembourser avant de faire une nouvelle demande."))}}catch(t){console.error("[LOAN_REQUEST] Erreur:",t)}finally{_(!1)}};(0,t.useEffect)(()=>{o.amount&&o.duration&&C()},[o.amount,o.duration]);const C=()=>{const e=parseFloat(o.amount),t=parseInt(o.duration);if(!e||e<mx.amounts.min||e>mx.amounts.max)return void w(null);const r=mx.getInterestRate(t,e),s=Math.round(mx.calculateInterest(e,t)),n=Math.round(mx.calculateTotalAmount(e,t));w({principal:e,interest:s,totalAmount:n,interestRate:r,duration:t})},P=[{id:"education",name:"\xc9ducation",icon:lx,color:"from-blue-500 to-blue-600",bgColor:"bg-blue-50",iconColor:"text-blue-600"},{id:"business",name:"Entreprise",icon:cx,color:"from-green-500 to-green-600",bgColor:"bg-green-50",iconColor:"text-green-600"},{id:"housing",name:"Logement",icon:bp,color:"from-orange-500 to-orange-600",bgColor:"bg-orange-50",iconColor:"text-orange-600"},{id:"personal",name:"Personnel",icon:Za,color:"from-purple-500 to-purple-600",bgColor:"bg-purple-50",iconColor:"text-purple-600"},{id:"health",name:"Sant\xe9",icon:dx,color:"from-pink-500 to-pink-600",bgColor:"bg-pink-50",iconColor:"text-pink-600"}],A=e=>{const{name:t,value:r}=e.target;l(ze(ze({},o),{},{[t]:r})),b[t]&&y(ze(ze({},b),{},{[t]:""}))},T=e=>{const t={};if(1===e&&(o.category||(t.category="Veuillez s\xe9lectionner une cat\xe9gorie")),2===e){const e=parseFloat(o.amount);!e||e<mx.amounts.min?t.amount="Le montant minimum est ".concat(pf(mx.amounts.min)):e>mx.amounts.max&&(t.amount="Le montant maximum est ".concat(pf(mx.amounts.max)))}return 3===e&&((!o.purpose||o.purpose.trim().length<10)&&(t.purpose="Veuillez d\xe9crire l'utilisation du pr\xeat (min. 10 caract\xe8res)"),o.guarantee||(t.guarantee="Veuillez s\xe9lectionner une garantie")),4===e&&((!o.momoNumber||o.momoNumber.trim().length<8)&&(t.momoNumber="Num\xe9ro Mobile Money invalide"),o.momoNetwork||(t.momoNetwork="Veuillez s\xe9lectionner votre op\xe9rateur"),(!o.momoName||o.momoName.trim().length<3)&&(t.momoName="Veuillez entrer le nom du compte Mobile Money")),y(t),0===Object.keys(t).length},I=async()=>{if(h)try{const e=await fetch("".concat(Fs,"/api/generate-pdf/").concat(h));if(!e.ok)throw new Error("Erreur lors de la g\xe9n\xe9ration du PDF");const t=await e.blob(),s=window.URL.createObjectURL(t),n=document.createElement("a");n.href=s,n.download="engagement-pret-".concat(h,".pdf"),document.body.appendChild(n),n.click(),window.URL.revokeObjectURL(s),document.body.removeChild(n),x(!0),r("PDF t\xe9l\xe9charg\xe9 avec succ\xe8s !")}catch(e){console.error("[PDF] Erreur:",e),s("Erreur lors du t\xe9l\xe9chargement du PDF")}else s("ID de pr\xeat manquant")};if(k)return(0,Ks.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 flex items-center justify-center",children:(0,Ks.jsxs)("div",{className:"text-center",children:[(0,Ks.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-blue-500 border-t-transparent mx-auto mb-4"}),(0,Ks.jsx)("p",{className:"text-gray-600 font-medium",children:"V\xe9rification..."})]})});if(u)return(0,Ks.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 flex items-center justify-center p-4",children:(0,Ks.jsxs)("div",{className:"bg-white rounded-3xl shadow-2xl p-8 max-w-md w-full text-center",children:[(0,Ks.jsx)("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,Ks.jsx)(tn,{size:40,className:"text-green-600"})}),(0,Ks.jsx)("h2",{className:"text-3xl font-bold text-gray-900 mb-4 font-montserrat",children:"Demande envoy\xe9e !"}),(0,Ks.jsx)("p",{className:"text-gray-600 mb-6 font-montserrat",children:"Votre demande de pr\xeat a \xe9t\xe9 soumise avec succ\xe8s. Nous l'examinerons dans les plus brefs d\xe9lais."}),!f&&(0,Ks.jsx)("div",{className:"bg-blue-50 border-l-4 border-blue-500 p-4 rounded-lg mb-6 text-left",children:(0,Ks.jsxs)("div",{className:"flex items-start gap-3",children:[(0,Ks.jsx)(Sp,{size:24,className:"text-blue-600 flex-shrink-0 mt-0.5"}),(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("h3",{className:"font-bold text-blue-900 mb-1",children:"Document d'engagement"}),(0,Ks.jsx)("p",{className:"text-sm text-blue-700 mb-3",children:"Veuillez t\xe9l\xe9charger et signer votre document d'engagement de pr\xeat."}),(0,Ks.jsxs)("button",{onClick:I,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-all duration-200 text-sm",children:[(0,Ks.jsx)(Sp,{size:18}),(0,Ks.jsx)("span",{children:"T\xe9l\xe9charger le PDF"})]})]})]})}),f&&(0,Ks.jsx)("div",{className:"bg-green-50 border-l-4 border-green-500 p-4 rounded-lg mb-6 text-left",children:(0,Ks.jsxs)("div",{className:"flex items-start gap-3",children:[(0,Ks.jsx)(tn,{size:24,className:"text-green-600 flex-shrink-0 mt-0.5"}),(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("h3",{className:"font-bold text-green-900 mb-1",children:"PDF t\xe9l\xe9charg\xe9"}),(0,Ks.jsx)("p",{className:"text-sm text-green-700",children:"Veuillez signer le document et le conserver pr\xe9cieusement."})]})]})}),(0,Ks.jsxs)("button",{onClick:()=>n("/dashboard"),className:"w-full flex items-center justify-center gap-2 px-6 py-3 bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white rounded-xl font-medium transition-all duration-200",children:[(0,Ks.jsx)(hf,{size:20}),(0,Ks.jsx)("span",{children:"Retour au tableau de bord"})]})]})});const R=[{number:1,title:"Cat\xe9gorie",icon:Sp},{number:2,title:"Montant",icon:Gf},{number:3,title:"D\xe9tails",icon:Sp},{number:4,title:"Paiement",icon:yp}];return(0,Ks.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 pb-24",children:[(0,Ks.jsx)("div",{className:"bg-white/80 backdrop-blur-lg shadow-lg border-b border-white/50 sticky top-0 z-30",children:(0,Ks.jsxs)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[(0,Ks.jsx)("div",{className:"flex items-center justify-between",children:(0,Ks.jsxs)("div",{className:"flex items-center gap-4",children:[(0,Ks.jsx)("button",{onClick:()=>n("/dashboard"),className:"p-2 hover:bg-gray-100 rounded-xl transition-colors",children:(0,Ks.jsx)(hf,{size:24,className:"text-gray-700"})}),(0,Ks.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Ks.jsx)("div",{className:"p-3 bg-gradient-to-br from-blue-500 to-purple-600 rounded-2xl shadow-lg",children:(0,Ks.jsx)(yp,{size:32,className:"text-white"})}),(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900 font-montserrat",children:"Demande de pr\xeat"}),(0,Ks.jsxs)("p",{className:"text-sm text-gray-600 font-montserrat",children:["\xc9tape ",a," sur ",4]})]})]})]})}),(0,Ks.jsx)("div",{className:"mt-6",children:(0,Ks.jsx)("div",{className:"flex items-center justify-between",children:R.map((e,r)=>(0,Ks.jsxs)(t.Fragment,{children:[(0,Ks.jsxs)("div",{className:"flex flex-col items-center",children:[(0,Ks.jsx)("div",{className:"w-12 h-12 rounded-full flex items-center justify-center transition-all duration-300 ".concat(a>e.number?"bg-green-500 text-white":a===e.number?"bg-gradient-to-br from-blue-500 to-purple-600 text-white":"bg-gray-200 text-gray-500"),children:a>e.number?(0,Ks.jsx)(ux,{size:24}):(0,Ks.jsx)(e.icon,{size:24})}),(0,Ks.jsx)("p",{className:"text-xs mt-2 font-medium ".concat(a>=e.number?"text-gray-900":"text-gray-500"),children:e.title})]}),r<R.length-1&&(0,Ks.jsx)("div",{className:"flex-1 h-1 mx-2 transition-all duration-300 ".concat(a>e.number?"bg-green-500":"bg-gray-200")})]},e.number))})})]})}),(0,Ks.jsxs)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[N&&(0,Ks.jsx)("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 rounded-lg mb-6",children:(0,Ks.jsxs)("div",{className:"flex items-start gap-3",children:[(0,Ks.jsx)(rn,{size:24,className:"text-red-600 flex-shrink-0 mt-0.5"}),(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("h3",{className:"font-bold text-red-900 mb-1",children:"Pr\xeat actif d\xe9tect\xe9"}),(0,Ks.jsx)("p",{className:"text-sm text-red-700",children:"Vous avez d\xe9j\xe0 un pr\xeat en cours. Vous devez le rembourser avant de faire une nouvelle demande."})]})]})}),(0,Ks.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),f)if(T(a))if(N)s("Vous avez d\xe9j\xe0 un pr\xeat en cours");else{d(!0);try{const t=parseFloat(o.amount),s=parseInt(o.duration),n=mx.getInterestRate(s,t),a={user_id:e.id,amount:t,duration:s,duration_months:s,interest_rate:n,purpose:o.purpose,employment_status:o.employmentStatus,guarantee:o.guarantee,momo_number:o.momoNumber,momo_network:o.momoNetwork,momo_name:o.momoName,status:"pending"};console.log("[LOAN_REQUEST] Cr\xe9ation du pr\xeat via Supabase"),console.log("[LOAN_REQUEST] Donn\xe9es:",a);const i=await(async e=>{try{console.log("[SUPABASE] Tentative de cr\xe9ation du pr\xeat avec:",e);const{data:r,error:s}=await Ms.from("loans").insert([e]).select("\n        *,\n        users!inner(id, first_name, last_name)\n      ").single();if(s)throw console.error("[SUPABASE] Erreur Supabase:",s),s;if(console.log("[SUPABASE] Pr\xeat cr\xe9\xe9 avec succ\xe8s:",r),r&&r.users)try{console.log("[ADMIN_NOTIFICATION] Envoi notification \xe0 l'admin...");const e="".concat(r.users.first_name," ").concat(r.users.last_name),t=await fetch("".concat(Fs,"/api/notify-admin-new-loan"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({loanAmount:r.amount,clientName:e,loanId:r.id})});t.ok?console.log("[ADMIN_NOTIFICATION] \u2705 Notification envoy\xe9e \xe0 l'admin avec succ\xe8s"):console.error("[ADMIN_NOTIFICATION] \u274c Erreur envoi notification:",await t.text())}catch(t){console.error("[ADMIN_NOTIFICATION] \u274c Erreur lors de l'envoi de la notification:",t)}return{success:!0,data:r}}catch(r){return console.error("[SUPABASE] Erreur lors de la cr\xe9ation du pr\xeat:",r),console.error("[SUPABASE] D\xe9tails de l'erreur:",{message:r.message,details:r.details,hint:r.hint,code:r.code}),{success:!1,error:r.message}}})(a);if(console.log("[LOAN_REQUEST] R\xe9sultat:",i),!i.success||!i.data)throw new Error(i.error||"Erreur lors de la soumission");p(i.data.id),m(!0),r("Demande de pr\xeat soumise avec succ\xe8s !")}catch(n){console.error("[LOAN_REQUEST] Erreur:",n),s(n.message||"Erreur lors de la soumission de la demande")}finally{d(!1)}}else s("Veuillez corriger les erreurs dans le formulaire");else s("Veuillez t\xe9l\xe9charger le PDF d'engagement avant de soumettre")},children:[1===a&&(0,Ks.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 p-6",children:[(0,Ks.jsxs)("h2",{className:"text-xl font-bold text-gray-900 mb-4 font-montserrat flex items-center gap-2",children:[(0,Ks.jsx)(Sp,{size:24,className:"text-blue-600"}),"S\xe9lectionnez la cat\xe9gorie de votre pr\xeat"]}),(0,Ks.jsx)("p",{className:"text-gray-600 mb-6",children:"Choisissez la cat\xe9gorie qui correspond le mieux \xe0 votre besoin"}),(0,Ks.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-5 gap-4",children:P.map(e=>(0,Ks.jsxs)("button",{type:"button",onClick:()=>{return t=e.id,l(e=>ze(ze({},e),{},{category:t})),void y(e=>ze(ze({},e),{},{category:""}));var t},className:"p-6 rounded-xl border-2 transition-all duration-200 ".concat(o.category===e.id?"border-blue-500 bg-blue-50 shadow-md scale-105":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"),children:[(0,Ks.jsx)("div",{className:"w-16 h-16 ".concat(e.bgColor," rounded-xl flex items-center justify-center mx-auto mb-3"),children:(0,Ks.jsx)(e.icon,{size:32,className:e.iconColor})}),(0,Ks.jsx)("p",{className:"text-sm font-medium text-gray-900 text-center",children:e.name})]},e.id))}),b.category&&(0,Ks.jsx)("p",{className:"text-red-500 text-sm mt-4",children:b.category})]}),2===a&&(0,Ks.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 p-6",children:[(0,Ks.jsxs)("h2",{className:"text-xl font-bold text-gray-900 mb-4 font-montserrat flex items-center gap-2",children:[(0,Ks.jsx)(Gf,{size:24,className:"text-green-600"}),"Montant et dur\xe9e du pr\xeat"]}),(0,Ks.jsx)("p",{className:"text-gray-600 mb-6",children:"Indiquez le montant souhait\xe9 et la dur\xe9e de remboursement"}),(0,Ks.jsxs)("div",{className:"space-y-6",children:[(0,Ks.jsxs)("div",{children:[(0,Ks.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Montant souhait\xe9 ",(0,Ks.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Ks.jsxs)("div",{className:"relative",children:[(0,Ks.jsx)(Gf,{size:18,className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,Ks.jsx)("input",{type:"number",name:"amount",value:o.amount,onChange:A,placeholder:"Ex: 50000",min:mx.amounts.min,max:mx.amounts.max,className:"w-full pl-12 pr-4 py-3 border rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all ".concat(b.amount?"border-red-500 bg-red-50":"border-gray-200")})]}),b.amount&&(0,Ks.jsx)("p",{className:"text-red-500 text-sm mt-1",children:b.amount}),(0,Ks.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Min: ",pf(mx.amounts.min)," - Max: ",pf(mx.amounts.max)]})]}),(0,Ks.jsxs)("div",{children:[(0,Ks.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Dur\xe9e ",(0,Ks.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Ks.jsxs)("div",{className:"relative",children:[(0,Ks.jsx)(rx,{size:18,className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,Ks.jsx)("select",{name:"duration",value:o.duration,onChange:A,className:"w-full pl-12 pr-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all appearance-none bg-white",children:mx.durations.map(e=>(0,Ks.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,Ks.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Choisissez la dur\xe9e de remboursement"})]}),j&&(0,Ks.jsxs)("div",{className:"mt-6 p-6 bg-gradient-to-r from-blue-50 to-purple-50 rounded-xl border border-blue-200",children:[(0,Ks.jsx)("h3",{className:"font-bold text-gray-900 mb-4",children:"R\xe9capitulatif"}),(0,Ks.jsxs)("div",{className:"space-y-3",children:[(0,Ks.jsxs)("div",{className:"flex justify-between",children:[(0,Ks.jsx)("span",{className:"text-gray-600",children:"Montant demand\xe9"}),(0,Ks.jsx)("span",{className:"font-bold text-gray-900",children:pf(j.principal)})]}),(0,Ks.jsxs)("div",{className:"flex justify-between",children:[(0,Ks.jsxs)("span",{className:"text-gray-600",children:["Int\xe9r\xeats (",j.interestRate,"%)"]}),(0,Ks.jsx)("span",{className:"font-bold text-orange-600",children:pf(j.interest)})]}),(0,Ks.jsxs)("div",{className:"border-t border-gray-300 pt-3 flex justify-between",children:[(0,Ks.jsx)("span",{className:"font-bold text-gray-900",children:"Montant total \xe0 rembourser"}),(0,Ks.jsx)("span",{className:"font-bold text-2xl text-blue-600",children:pf(j.totalAmount)})]}),(0,Ks.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,Ks.jsx)("span",{className:"text-gray-600",children:"Dur\xe9e"}),(0,Ks.jsxs)("span",{className:"font-medium text-gray-900",children:[j.duration," jours"]})]})]})]})]})]}),3===a&&(0,Ks.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 p-6",children:[(0,Ks.jsxs)("h2",{className:"text-xl font-bold text-gray-900 mb-4 font-montserrat flex items-center gap-2",children:[(0,Ks.jsx)(Sp,{size:24,className:"text-purple-600"}),"D\xe9tails de la demande"]}),(0,Ks.jsx)("p",{className:"text-gray-600 mb-6",children:"Fournissez plus d'informations sur votre demande"}),(0,Ks.jsxs)("div",{className:"space-y-6",children:[(0,Ks.jsxs)("div",{children:[(0,Ks.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Utilisation du pr\xeat ",(0,Ks.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Ks.jsx)("textarea",{name:"purpose",value:o.purpose,onChange:A,placeholder:"D\xe9crivez pr\xe9cis\xe9ment l'utilisation du pr\xeat...",rows:"4",className:"w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all ".concat(b.purpose?"border-red-500 bg-red-50":"border-gray-200")}),b.purpose&&(0,Ks.jsx)("p",{className:"text-red-500 text-sm mt-1",children:b.purpose})]}),(0,Ks.jsxs)("div",{children:[(0,Ks.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Statut professionnel ",(0,Ks.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Ks.jsxs)("select",{name:"employmentStatus",value:o.employmentStatus,onChange:A,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",children:[(0,Ks.jsx)("option",{value:"student",children:"\xc9tudiant"}),(0,Ks.jsx)("option",{value:"self-employed",children:"Ind\xe9pendant"}),(0,Ks.jsx)("option",{value:"employed",children:"Salari\xe9"}),(0,Ks.jsx)("option",{value:"unemployed",children:"Sans emploi"})]})]}),(0,Ks.jsxs)("div",{children:[(0,Ks.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Garantie ",(0,Ks.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Ks.jsxs)("select",{name:"guarantee",value:o.guarantee,onChange:A,className:"w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all ".concat(b.guarantee?"border-red-500 bg-red-50":"border-gray-200"),children:[(0,Ks.jsx)("option",{value:"",children:"S\xe9lectionnez votre garantie"}),(0,Ks.jsx)("option",{value:"\ud83d\udcf1 T\xe9l\xe9phone portable",children:"\ud83d\udcf1 T\xe9l\xe9phone portable"}),(0,Ks.jsx)("option",{value:"\ud83d\udcbb Ordinateur portable",children:"\ud83d\udcbb Ordinateur portable"}),(0,Ks.jsx)("option",{value:"\ud83d\udd25 Bouteille de gaz",children:"\ud83d\udd25 Bouteille de gaz"}),(0,Ks.jsx)("option",{value:"\ud83e\ude99 Montre connect\xe9e ou classique de valeur",children:"\ud83e\ude99 Montre connect\xe9e ou classique de valeur"}),(0,Ks.jsx)("option",{value:"\ud83d\udcf7 Tablette",children:"\ud83d\udcf7 Tablette"}),(0,Ks.jsx)("option",{value:"\ud83c\udfa7 \xc9couteurs ou casque Bluetooth",children:"\ud83c\udfa7 \xc9couteurs ou casque Bluetooth"}),(0,Ks.jsx)("option",{value:"\ud83e\uddf3 Petit ventilateur ou cuisini\xe8re \xe9lectrique",children:"\ud83e\uddf3 Petit ventilateur ou cuisini\xe8re \xe9lectrique"}),(0,Ks.jsx)("option",{value:"\ud83d\udcbe Disque dur externe ou cl\xe9 USB haut de gamme",children:"\ud83d\udcbe Disque dur externe ou cl\xe9 USB haut de gamme"}),(0,Ks.jsx)("option",{value:"\ud83e\ude91 Petit appareil \xe9lectrom\xe9nager (fer \xe0 repasser, mixeur, etc.)",children:"\ud83e\ude91 Petit appareil \xe9lectrom\xe9nager (fer \xe0 repasser, mixeur, etc.)"})]}),b.guarantee&&(0,Ks.jsx)("p",{className:"text-red-500 text-sm mt-1",children:b.guarantee})]})]})]}),4===a&&(0,Ks.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 p-6",children:[(0,Ks.jsxs)("h2",{className:"text-xl font-bold text-gray-900 mb-4 font-montserrat flex items-center gap-2",children:[(0,Ks.jsx)(yp,{size:24,className:"text-green-600"}),"Informations Mobile Money"]}),(0,Ks.jsx)("p",{className:"text-gray-600 mb-6",children:"Indiquez vos coordonn\xe9es de paiement Mobile Money"}),(0,Ks.jsxs)("div",{className:"space-y-6",children:[(0,Ks.jsxs)("div",{children:[(0,Ks.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Op\xe9rateur ",(0,Ks.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Ks.jsxs)("select",{name:"momoNetwork",value:o.momoNetwork,onChange:A,className:"w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all ".concat(b.momoNetwork?"border-red-500 bg-red-50":"border-gray-200"),children:[(0,Ks.jsx)("option",{value:"",children:"S\xe9lectionnez votre op\xe9rateur"}),(0,Ks.jsx)("option",{value:"MTN",children:"MTN Mobile Money"}),(0,Ks.jsx)("option",{value:"Moov",children:"Moov Money"}),(0,Ks.jsx)("option",{value:"Celtiis",children:"Celtiis Cash"})]}),b.momoNetwork&&(0,Ks.jsx)("p",{className:"text-red-500 text-sm mt-1",children:b.momoNetwork})]}),(0,Ks.jsxs)("div",{children:[(0,Ks.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Num\xe9ro Mobile Money ",(0,Ks.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Ks.jsx)("input",{type:"tel",name:"momoNumber",value:o.momoNumber,onChange:A,placeholder:"Ex: 97123456",className:"w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all ".concat(b.momoNumber?"border-red-500 bg-red-50":"border-gray-200")}),b.momoNumber&&(0,Ks.jsx)("p",{className:"text-red-500 text-sm mt-1",children:b.momoNumber})]}),(0,Ks.jsxs)("div",{children:[(0,Ks.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Nom du compte ",(0,Ks.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Ks.jsx)("input",{type:"text",name:"momoName",value:o.momoName,onChange:A,placeholder:"Nom complet du titulaire",className:"w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all ".concat(b.momoName?"border-red-500 bg-red-50":"border-gray-200")}),b.momoName&&(0,Ks.jsx)("p",{className:"text-red-500 text-sm mt-1",children:b.momoName})]})]}),!f&&(0,Ks.jsx)("div",{className:"mt-6 bg-blue-50 border-l-4 border-blue-500 p-4 rounded-lg",children:(0,Ks.jsxs)("div",{className:"flex items-start gap-3",children:[(0,Ks.jsx)(Sp,{size:24,className:"text-blue-600 flex-shrink-0 mt-0.5"}),(0,Ks.jsxs)("div",{className:"flex-1",children:[(0,Ks.jsx)("h3",{className:"font-bold text-blue-900 mb-1",children:"Document d'engagement requis"}),(0,Ks.jsx)("p",{className:"text-sm text-blue-700 mb-3",children:"Avant de soumettre votre demande, vous devez t\xe9l\xe9charger et signer le document d'engagement de pr\xeat."}),(0,Ks.jsx)("button",{type:"button",onClick:async()=>{try{var t,n;if(d(!0),!Ms)throw new Error("Connexion \xe0 la base de donn\xe9es non disponible");const{data:s,error:a}=await Ms.from("users").select("*").eq("id",e.id).single();if(a)throw console.error("[PDF] Erreur r\xe9cup\xe9ration utilisateur:",a),new Error("Impossible de r\xe9cup\xe9rer vos informations");console.log("[PDF] Donn\xe9es utilisateur r\xe9cup\xe9r\xe9es:",{id:s.id,name:"".concat(s.first_name," ").concat(s.last_name),hasTemoinName:!!s.temoin_name,hasTemoinPhone:!!s.temoin_phone,hasTemoinQuartier:!!s.temoin_quartier});const i=parseFloat(o.amount),l=parseInt(o.duration),c=mx.getInterestRate(l,i),u=Math.round(mx.calculateInterest(i,l)),m=Math.round(mx.calculateTotalAmount(i,l)),h={user:{first_name:s.first_name||(null===(t=e.user_metadata)||void 0===t?void 0:t.first_name),last_name:s.last_name||(null===(n=e.user_metadata)||void 0===n?void 0:n.last_name),email:s.email||e.email,phone_number:s.phone_number||e.phone,temoin_name:s.temoin_name,temoin_phone:s.temoin_phone,temoin_quartier:s.temoin_quartier,temoin_email:s.temoin_email},loan:{amount:i,duration:l,interest_rate:c,purpose:o.purpose,guarantee:o.guarantee,category:o.category},calculation:{interest:u,totalAmount:m}};console.log("[PDF] Envoi des donn\xe9es:",h);const p=await fetch("".concat(Fs,"/api/generate-preview-pdf"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(h)});if(console.log("[PDF] Response status:",p.status),!p.ok){const e=await p.text();throw console.error("[PDF] Erreur serveur:",e),new Error("Erreur lors de la g\xe9n\xe9ration du PDF: ".concat(p.status," - ").concat(e))}const f=await p.blob(),g=window.URL.createObjectURL(f),v=document.createElement("a");v.href=g,v.download="engagement-pret-preview.pdf",document.body.appendChild(v),v.click(),window.URL.revokeObjectURL(g),document.body.removeChild(v),x(!0),r("PDF t\xe9l\xe9charg\xe9 avec succ\xe8s ! Vous pouvez maintenant soumettre votre demande.")}catch(a){console.error("[PDF] Erreur compl\xe8te:",a),console.error("[PDF] Message:",a.message),console.error("[PDF] Stack:",a.stack),s(a.message||"Erreur lors de la g\xe9n\xe9ration du PDF")}finally{d(!1)}},disabled:c,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-all duration-200 text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:c?(0,Ks.jsxs)(Ks.Fragment,{children:[(0,Ks.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"}),(0,Ks.jsx)("span",{children:"G\xe9n\xe9ration..."})]}):(0,Ks.jsxs)(Ks.Fragment,{children:[(0,Ks.jsx)(Sp,{size:18}),(0,Ks.jsx)("span",{children:"T\xe9l\xe9charger le PDF d'engagement"})]})})]})]})}),f&&(0,Ks.jsx)("div",{className:"mt-6 bg-green-50 border-l-4 border-green-500 p-4 rounded-lg",children:(0,Ks.jsxs)("div",{className:"flex items-start gap-3",children:[(0,Ks.jsx)(tn,{size:24,className:"text-green-600 flex-shrink-0 mt-0.5"}),(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("h3",{className:"font-bold text-green-900 mb-1",children:"PDF t\xe9l\xe9charg\xe9 \u2713"}),(0,Ks.jsx)("p",{className:"text-sm text-green-700",children:"Vous pouvez maintenant soumettre votre demande. Veuillez signer le document et le conserver pr\xe9cieusement."})]})]})})]}),(0,Ks.jsxs)("div",{className:"flex justify-between items-center mt-8",children:[(0,Ks.jsxs)("button",{type:"button",onClick:()=>{i(e=>Math.max(e-1,1))},disabled:1===a,className:"flex items-center gap-2 px-6 py-3 rounded-xl font-medium transition-all duration-200 ".concat(1===a?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:[(0,Ks.jsx)(hf,{size:20}),(0,Ks.jsx)("span",{children:"Pr\xe9c\xe9dent"})]}),a<4?(0,Ks.jsxs)("button",{type:"button",onClick:()=>{T(a)?i(e=>Math.min(e+1,4)):s("Veuillez corriger les erreurs avant de continuer")},className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white rounded-xl font-medium transition-all duration-200 shadow-lg hover:shadow-xl",children:[(0,Ks.jsx)("span",{children:"Suivant"}),(0,Ks.jsx)(Qa,{size:20})]}):(0,Ks.jsx)("button",{type:"submit",disabled:c||N,className:"flex items-center gap-2 px-8 py-3 bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white rounded-xl font-bold transition-all duration-200 shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed",children:c?(0,Ks.jsxs)(Ks.Fragment,{children:[(0,Ks.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-white border-t-transparent"}),(0,Ks.jsx)("span",{children:"Envoi en cours..."})]}):(0,Ks.jsxs)(Ks.Fragment,{children:[(0,Ks.jsx)(nx,{size:20}),(0,Ks.jsx)("span",{children:"Soumettre la demande"})]})})]})]})]})]})},px=()=>{const{notifications:e,markAsRead:r}=ln(),{user:s}=Zs(),n=Y(),[a,i]=(0,t.useState)([]),[o,l]=(0,t.useState)(!0),[c,d]=(0,t.useState)(""),[u,m]=(0,t.useState)("all"),[h,p]=(0,t.useState)({totalLoans:0,totalBorrowed:0,totalRepaid:0,activeLoans:0,completedLoans:0,pendingLoans:0,rejectedLoans:0});(0,t.useEffect)(()=>{(async()=>{if(null!==s&&void 0!==s&&s.id)try{l(!0);const[e,t]=await Promise.all([Hs(s.id),Gs(s.id)]);if(e.success&&t.success){const r=e.data||[],s=t.data||[],n=r.map(e=>{const t=s.filter(t=>t.loan_id===e.id).reduce((e,t)=>e+(t.amount||0),0),r=e.amount?e.amount*(1+(e.interest_rate||0)/100):0;let n=null;if("active"===e.status||"completed"===e.status){const t=new Date(e.created_at),r=e.duration||12;n=new Date(t.getTime()+30*r*24*60*60*1e3)}return{id:e.id,amount:e.amount||0,status:e.status||"pending",requestDate:e.created_at,dueDate:n?n.toISOString().split("T")[0]:null,totalAmount:Math.round(r),paidAmount:Math.round(t),purpose:e.purpose||"Non sp\xe9cifi\xe9",category:e.loan_type||"other",interest_rate:e.interest_rate||0,duration:e.duration||12,monthly_payment:e.monthly_payment||0}});i(n);const a=n.reduce((e,t)=>e+t.amount,0),o=n.reduce((e,t)=>e+t.paidAmount,0),l=n.filter(e=>"active"===e.status).length,c=n.filter(e=>"completed"===e.status).length,d=n.filter(e=>"pending"===e.status).length,u=n.filter(e=>"rejected"===e.status).length;p({totalLoans:n.length,totalBorrowed:a,totalRepaid:o,activeLoans:l,completedLoans:c,pendingLoans:d,rejectedLoans:u})}else console.error("[LOAN HISTORY] Erreur lors du chargement des donn\xe9es:",{loans:e.error,payments:t.error})}catch(e){console.error("[LOAN HISTORY] Erreur lors du chargement de l'historique:",e.message)}finally{l(!1)}else l(!1)})()},[null===s||void 0===s?void 0:s.id]);const f=e=>{switch(e){case"active":return"text-blue-600 bg-blue-100";case"completed":return"text-green-600 bg-green-100";case"pending":return"text-yellow-600 bg-yellow-100";case"rejected":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}},x=e=>{switch(e){case"active":return"Actif";case"completed":return"Rembours\xe9";case"pending":return"En attente";case"rejected":return"Rejet\xe9";default:return"Inconnu"}},g=e=>{switch(e){case"education":return(0,Ks.jsx)(lx,{size:16});case"business":return(0,Ks.jsx)(Of,{size:16});case"health":return(0,Ks.jsx)(rn,{size:16});case"transport":return(0,Ks.jsx)(Kf,{size:16});default:return(0,Ks.jsx)(Sp,{size:16})}},v=e=>{switch(e){case"education":return"text-blue-600 bg-blue-100";case"business":return"text-green-600 bg-green-100";case"health":return"text-pink-600 bg-pink-100";case"transport":return"text-orange-600 bg-orange-100";default:return"text-gray-600 bg-gray-100"}},b=e=>{switch(e){case"education":return"\xc9ducation";case"business":return"Entreprise";case"health":return"Sant\xe9";case"transport":return"Transport";default:return"Autre"}},y=a.filter(e=>{const t=e.id.toString().includes(c)||pf(e.amount).includes(c)||e.purpose&&e.purpose.toLowerCase().includes(c.toLowerCase()),r="all"===u||e.status===u;return t&&r});return o?(0,Ks.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,Ks.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary-600"})}):(0,Ks.jsxs)("div",{className:"bg-gradient-to-br from-primary-50 via-accent-50 to-secondary-50",children:[(0,Ks.jsx)("style",{children:"\n    @keyframes gradient {\n      0% { background-position: 0% 50%; }\n      50% { background-position: 100% 50%; }\n      100% { background-position: 0% 50%; }\n    }\n    @keyframes pulse-glow {\n      0%, 100% { opacity: 0.3; transform: scale(1); }\n      50% { opacity: 0.6; transform: scale(1.05); }\n    }\n    @keyframes slide-in-right {\n      from { transform: translateX(100%); opacity: 0; }\n      to { transform: translateX(0); opacity: 1; }\n    }\n    @keyframes bounce-in {\n      0% { transform: scale(0.3); opacity: 0; }\n      50% { transform: scale(1.05); }\n      70% { transform: scale(0.9); }\n      100% { transform: scale(1); opacity: 1; }\n    }\n    @keyframes float {\n      0%, 100% { transform: translateY(0px); }\n      50% { transform: translateY(-10px); }\n    }\n    @keyframes shine {\n      0% { transform: translateX(-100%); }\n      100% { transform: translateX(100%); }\n    }\n    .animate-gradient {\n      background-size: 200% 200%;\n      animation: gradient 8s ease infinite;\n    }\n    .animate-pulse-glow {\n      animation: pulse-glow 2s ease-in-out infinite;\n    }\n    .animate-slide-in-right {\n      animation: slide-in-right 0.6s ease-out;\n    }\n    .animate-bounce-in {\n      animation: bounce-in 0.8s ease-out;\n    }\n    .animate-float {\n      animation: float 3s ease-in-out infinite;\n    }\n    .animate-shine {\n      animation: shine 2s ease-in-out infinite;\n    }\n  "}),(0,Ks.jsxs)("div",{className:"relative overflow-hidden",children:[(0,Ks.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-500 via-purple-600 to-indigo-600 opacity-15 animate-gradient"}),(0,Ks.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-white/20 via-transparent to-transparent"}),(0,Ks.jsxs)("div",{className:"absolute inset-0 opacity-8",children:[(0,Ks.jsx)("div",{animate:{scale:[1,1.2,1],rotate:[0,180,360],opacity:[.3,.6,.3]},transition:{duration:8,repeat:1/0,ease:"easeInOut"},className:"absolute top-0 left-0 w-72 h-72 bg-blue-400 rounded-full mix-blend-multiply filter blur-xl"}),(0,Ks.jsx)("div",{animate:{scale:[1.2,1,1.2],rotate:[360,180,0],opacity:[.6,.3,.6]},transition:{duration:10,repeat:1/0,ease:"easeInOut",delay:2},className:"absolute top-0 right-0 w-72 h-72 bg-purple-400 rounded-full mix-blend-multiply filter blur-xl"}),(0,Ks.jsx)("div",{animate:{scale:[1,1.3,1],rotate:[180,360,180],opacity:[.4,.7,.4]},transition:{duration:12,repeat:1/0,ease:"easeInOut",delay:4},className:"absolute -bottom-8 left-20 w-72 h-72 bg-indigo-400 rounded-full mix-blend-multiply filter blur-xl"}),(0,Ks.jsx)("div",{animate:{y:[0,-20,0],opacity:[.2,.6,.2]},transition:{duration:4,repeat:1/0,ease:"easeInOut"},className:"absolute top-1/4 left-1/4 w-4 h-4 bg-blue-300 rounded-full"}),(0,Ks.jsx)("div",{animate:{y:[0,15,0],opacity:[.3,.7,.3]},transition:{duration:5,repeat:1/0,ease:"easeInOut",delay:1},className:"absolute top-3/4 right-1/3 w-3 h-3 bg-purple-300 rounded-full"}),(0,Ks.jsx)("div",{animate:{x:[0,10,0],opacity:[.4,.8,.4]},transition:{duration:6,repeat:1/0,ease:"easeInOut",delay:2},className:"absolute bottom-1/4 left-1/2 w-2 h-2 bg-indigo-300 rounded-full"}),(0,Ks.jsx)("div",{animate:{x:[0,-15,0],y:[0,-10,0],opacity:[.3,.8,.3]},transition:{duration:7,repeat:1/0,ease:"easeInOut",delay:.5},className:"absolute top-1/3 right-1/4 w-2 h-2 bg-green-300 rounded-full"}),(0,Ks.jsx)("div",{animate:{x:[0,12,0],y:[0,-8,0],opacity:[.2,.7,.2]},transition:{duration:8,repeat:1/0,ease:"easeInOut",delay:1.5},className:"absolute bottom-1/3 right-1/3 w-3 h-3 bg-pink-300 rounded-full"}),(0,Ks.jsx)("div",{animate:{x:[0,-8,0],y:[0,12,0],opacity:[.4,.9,.4]},transition:{duration:9,repeat:1/0,ease:"easeInOut",delay:2.5},className:"absolute top-2/3 left-1/3 w-1 h-1 bg-yellow-300 rounded-full"})]}),(0,Ks.jsx)("div",{className:"relative px-4 lg:px-8 py-8 lg:py-12 backdrop-blur-sm",children:(0,Ks.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,Ks.jsxs)("div",{className:"text-center mb-8 lg:mb-12",children:[(0,Ks.jsxs)("h1",{className:"text-4xl lg:text-6xl font-bold text-secondary-900 font-montserrat mb-4",children:["Historique des"," ",(0,Ks.jsx)("span",{className:"bg-gradient-to-r from-blue-600 via-purple-600 to-indigo-600 bg-clip-text text-transparent",children:"Pr\xeat"})," ",(0,Ks.jsx)("span",{className:"inline-block",children:"\ud83d\udcc8"})]}),(0,Ks.jsx)("p",{className:"text-lg lg:text-xl text-neutral-600 font-montserrat max-w-3xl mx-auto leading-relaxed",children:"Consultez l'historique de votre pr\xeat et paiements"}),(0,Ks.jsxs)("div",{className:"flex items-center justify-center space-x-6 mt-6",children:[(0,Ks.jsxs)("div",{animate:{y:[0,-5,0],rotate:[0,5,0]},transition:{duration:3,repeat:1/0,ease:"easeInOut"},className:"flex items-center space-x-2 text-sm text-neutral-500",children:[(0,Ks.jsx)(Sp,{size:16,className:"text-green-500"}),(0,Ks.jsx)("span",{children:"Suivi complet"})]}),(0,Ks.jsxs)("div",{animate:{y:[0,-5,0],rotate:[0,-5,0]},transition:{duration:3,repeat:1/0,ease:"easeInOut",delay:1},className:"flex items-center space-x-2 text-sm text-neutral-500",children:[(0,Ks.jsx)(qp,{size:16,className:"text-blue-500"}),(0,Ks.jsx)("span",{children:"Donn\xe9es s\xe9curis\xe9es"})]}),(0,Ks.jsxs)("div",{animate:{y:[0,-5,0],rotate:[0,5,0]},transition:{duration:3,repeat:1/0,ease:"easeInOut",delay:2},className:"flex items-center space-x-2 text-sm text-neutral-500",children:[(0,Ks.jsx)(Cf,{size:16,className:"text-purple-500"}),(0,Ks.jsx)("span",{children:"Analyses d\xe9taill\xe9es"})]})]})]}),(0,Ks.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[(0,Ks.jsxs)("div",{whileHover:{scale:1.05,y:-5,boxShadow:"0 20px 40px rgba(0,0,0,0.1)"},className:"bg-white/80 backdrop-blur-sm rounded-2xl p-4 border border-white/50 shadow-soft relative overflow-hidden",children:[(0,Ks.jsx)("div",{animate:{x:["-100%","100%"]},transition:{duration:3,repeat:1/0,ease:"linear",delay:.5},className:"absolute inset-0 bg-gradient-to-r from-transparent via-blue-200/20 to-transparent"}),(0,Ks.jsxs)("div",{className:"text-center",children:[(0,Ks.jsx)("div",{animate:{scale:[1,1.1,1],rotate:[0,5,0]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},className:"flex items-center justify-center mb-2",children:(0,Ks.jsx)(wp,{size:20,className:"text-primary-600"})}),(0,Ks.jsx)("p",{className:"text-lg sm:text-xl font-bold text-secondary-900",children:h.totalLoans}),(0,Ks.jsx)("p",{className:"text-xs sm:text-sm text-secondary-600",children:"Total pr\xeat"})]})]}),(0,Ks.jsxs)("div",{whileHover:{scale:1.05,y:-5,boxShadow:"0 20px 40px rgba(0,0,0,0.1)"},className:"bg-white/80 backdrop-blur-sm rounded-2xl p-4 border border-white/50 shadow-soft relative overflow-hidden",children:[(0,Ks.jsx)("div",{animate:{x:["-100%","100%"]},transition:{duration:3,repeat:1/0,ease:"linear",delay:1},className:"absolute inset-0 bg-gradient-to-r from-transparent via-green-200/20 to-transparent"}),(0,Ks.jsxs)("div",{className:"text-center",children:[(0,Ks.jsx)("div",{animate:{scale:[1,1.1,1],rotate:[0,-5,0]},transition:{duration:2,repeat:1/0,ease:"easeInOut",delay:.5},className:"flex items-center justify-center mb-2",children:(0,Ks.jsx)(Of,{size:20,className:"text-green-600"})}),(0,Ks.jsx)("p",{className:"text-lg sm:text-xl font-bold text-secondary-900 break-words leading-tight",children:pf(h.totalBorrowed)}),(0,Ks.jsx)("p",{className:"text-xs sm:text-sm text-secondary-600",children:"Total emprunt\xe9"})]})]}),(0,Ks.jsxs)("div",{whileHover:{scale:1.05,y:-5,boxShadow:"0 20px 40px rgba(0,0,0,0.1)"},className:"bg-white/80 backdrop-blur-sm rounded-2xl p-4 border border-white/50 shadow-soft relative overflow-hidden",children:[(0,Ks.jsx)("div",{animate:{x:["-100%","100%"]},transition:{duration:3,repeat:1/0,ease:"linear",delay:1.5},className:"absolute inset-0 bg-gradient-to-r from-transparent via-blue-200/20 to-transparent"}),(0,Ks.jsxs)("div",{className:"text-center",children:[(0,Ks.jsx)("div",{animate:{scale:[1,1.1,1],rotate:[0,5,0]},transition:{duration:2,repeat:1/0,ease:"easeInOut",delay:1},className:"flex items-center justify-center mb-2",children:(0,Ks.jsx)(tn,{size:20,className:"text-blue-600"})}),(0,Ks.jsx)("p",{className:"text-lg sm:text-xl font-bold text-secondary-900 break-words leading-tight",children:pf(h.totalRepaid)}),(0,Ks.jsx)("p",{className:"text-xs sm:text-sm text-secondary-600",children:"Total rembours\xe9"})]})]}),(0,Ks.jsxs)("div",{whileHover:{scale:1.05,y:-5,boxShadow:"0 20px 40px rgba(0,0,0,0.1)"},className:"bg-white/80 backdrop-blur-sm rounded-2xl p-4 border border-white/50 shadow-soft relative overflow-hidden",children:[(0,Ks.jsx)("div",{animate:{x:["-100%","100%"]},transition:{duration:3,repeat:1/0,ease:"linear",delay:2},className:"absolute inset-0 bg-gradient-to-r from-transparent via-orange-200/20 to-transparent"}),(0,Ks.jsxs)("div",{className:"text-center",children:[(0,Ks.jsx)("div",{animate:{scale:[1,1.1,1],rotate:[0,-5,0]},transition:{duration:2,repeat:1/0,ease:"easeInOut",delay:1.5},className:"flex items-center justify-center mb-2",children:(0,Ks.jsx)(sp,{size:20,className:"text-orange-600"})}),(0,Ks.jsx)("p",{className:"text-lg sm:text-xl font-bold text-secondary-900",children:h.activeLoans}),(0,Ks.jsx)("p",{className:"text-xs sm:text-sm text-secondary-600",children:"Pr\xeat actif"})]})]})]})]})})]}),(0,Ks.jsxs)("div",{className:"max-w-6xl mx-auto px-4 pb-8",children:[(0,Ks.jsx)("div",{className:"mb-8",children:(0,Ks.jsx)(ix,{className:"bg-white/90 backdrop-blur-sm border-white/20",children:(0,Ks.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,Ks.jsxs)("div",{className:"flex-1 relative",children:[(0,Ks.jsx)(Mf,{size:20,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,Ks.jsx)("input",{type:"text",placeholder:"Rechercher par ID, montant ou objet...",value:c,onChange:e=>d(e.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-2xl focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white/80 backdrop-blur-sm"})]}),(0,Ks.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Ks.jsx)(Ff,{size:20,className:"text-gray-400"}),(0,Ks.jsxs)("select",{value:u,onChange:e=>m(e.target.value),className:"px-4 py-3 border border-gray-200 rounded-2xl focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white/80 backdrop-blur-sm",children:[(0,Ks.jsx)("option",{value:"all",children:"Tous les statuts"}),(0,Ks.jsx)("option",{value:"active",children:"Actifs"}),(0,Ks.jsx)("option",{value:"completed",children:"Rembours\xe9s"}),(0,Ks.jsx)("option",{value:"pending",children:"En attente"}),(0,Ks.jsx)("option",{value:"rejected",children:"Rejet\xe9s"})]})]})]})})}),(0,Ks.jsx)("div",{children:(0,Ks.jsx)(ix,{className:"bg-white/90 backdrop-blur-sm border-white/20",children:y.length>0?(0,Ks.jsx)("div",{className:"space-y-4",children:y.map((e,t)=>(0,Ks.jsx)("div",{className:"border border-gray-200/50 rounded-2xl p-6 hover:shadow-lg transition-all duration-300 bg-white/60 backdrop-blur-sm",children:(0,Ks.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0",children:[(0,Ks.jsxs)("div",{className:"flex-1",children:[(0,Ks.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-3 mb-4",children:[(0,Ks.jsxs)("h3",{className:"text-lg sm:text-xl font-semibold text-gray-900 font-montserrat",children:["Pr\xeat #",e.id]}),(0,Ks.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-medium ".concat(f(e.status)),children:x(e.status)}),e.category&&(0,Ks.jsxs)("span",{className:"px-2 py-1 rounded-full text-xs font-medium flex items-center space-x-1 ".concat(v(e.category)),children:[g(e.category),(0,Ks.jsx)("span",{className:"hidden sm:inline",children:b(e.category)})]})]}),e.purpose&&(0,Ks.jsxs)("div",{className:"mb-4 p-3 bg-gray-50/80 rounded-xl",children:[(0,Ks.jsx)("span",{className:"text-gray-600 text-xs uppercase tracking-wide",children:"Objet du pr\xeat"}),(0,Ks.jsx)("p",{className:"font-medium text-gray-900",children:e.purpose})]}),(0,Ks.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 sm:gap-6 text-sm",children:[(0,Ks.jsxs)("div",{className:"p-3 bg-accent-50/50 rounded-xl",children:[(0,Ks.jsx)("span",{className:"text-gray-600 text-xs uppercase tracking-wide",children:"Montant demand\xe9"}),(0,Ks.jsx)("p",{className:"font-semibold text-base sm:text-lg text-gray-900 break-words leading-tight",children:pf(e.amount)})]}),(0,Ks.jsxs)("div",{className:"p-3 bg-accent-50/50 rounded-xl",children:[(0,Ks.jsx)("span",{className:"text-gray-600 text-xs uppercase tracking-wide",children:"Date de demande"}),(0,Ks.jsx)("p",{className:"font-semibold text-base sm:text-lg text-gray-900",children:ff(e.requestDate)})]}),e.dueDate&&(0,Ks.jsxs)("div",{className:"p-3 bg-accent-50/50 rounded-xl",children:[(0,Ks.jsx)("span",{className:"text-gray-600 text-xs uppercase tracking-wide",children:"\xc9ch\xe9ance"}),(0,Ks.jsx)("p",{className:"font-semibold text-base sm:text-lg text-gray-900",children:ff(e.dueDate)})]})]}),"active"===e.status&&(0,Ks.jsxs)("div",{className:"mt-6 p-6 bg-blue-50/80 rounded-2xl border border-blue-200/50",children:[(0,Ks.jsxs)("h4",{className:"font-semibold text-blue-900 mb-4 flex items-center space-x-2",children:[(0,Ks.jsx)(Gf,{size:18,className:"sm:w-5 sm:h-5"}),(0,Ks.jsx)("span",{className:"text-sm sm:text-base",children:"D\xe9tails du pr\xeat"})]}),(0,Ks.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 sm:gap-6 text-sm",children:[(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("span",{className:"text-blue-700 text-xs uppercase tracking-wide",children:"Montant total"}),(0,Ks.jsx)("p",{className:"font-semibold text-base sm:text-lg text-blue-900 break-words leading-tight",children:pf(e.totalAmount)})]}),(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("span",{className:"text-blue-700 text-xs uppercase tracking-wide",children:"Montant rembours\xe9"}),(0,Ks.jsx)("p",{className:"font-semibold text-base sm:text-lg text-blue-900 break-words leading-tight",children:pf(e.paidAmount)})]}),(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("span",{className:"text-blue-700 text-xs uppercase tracking-wide",children:"Statut"}),(0,Ks.jsx)("p",{className:"font-semibold text-base sm:text-lg text-blue-900 break-words leading-tight",children:e.paidAmount>=e.totalAmount?"Rembours\xe9":"En cours"})]})]})]}),"completed"===e.status&&(0,Ks.jsx)("div",{className:"mt-6 p-6 bg-green-50/80 rounded-2xl border border-green-200/50",children:(0,Ks.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:[(0,Ks.jsxs)("span",{className:"text-green-800 font-semibold text-base sm:text-lg flex items-center space-x-2",children:[(0,Ks.jsx)(tn,{size:18,className:"sm:w-5 sm:h-5"}),(0,Ks.jsx)("span",{children:"Pr\xeat enti\xe8rement rembours\xe9"})]}),(0,Ks.jsx)("span",{className:"text-green-600 font-bold text-base sm:text-lg break-words leading-tight",children:pf(e.paidAmount)})]})}),"pending"===e.status&&(0,Ks.jsx)("div",{className:"mt-6 p-6 bg-yellow-50/80 rounded-2xl border border-yellow-200/50",children:(0,Ks.jsx)("div",{className:"flex items-center",children:(0,Ks.jsxs)("span",{className:"text-yellow-800 font-semibold text-base sm:text-lg flex items-center space-x-2",children:[(0,Ks.jsx)(sp,{size:18,className:"sm:w-5 sm:h-5"}),(0,Ks.jsx)("span",{children:"En attente d'approbation"})]})})}),"rejected"===e.status&&(0,Ks.jsx)("div",{className:"mt-6 p-6 bg-red-50/80 rounded-2xl border border-red-200/50",children:(0,Ks.jsx)("div",{className:"flex items-center",children:(0,Ks.jsxs)("span",{className:"text-red-800 font-semibold text-base sm:text-lg flex items-center space-x-2",children:[(0,Ks.jsx)(Uf,{size:18,className:"sm:w-5 sm:h-5"}),(0,Ks.jsx)("span",{children:"Demande rejet\xe9e"})]})})})]}),(0,Ks.jsxs)("div",{className:"flex flex-col space-y-3",children:[(0,Ks.jsxs)(sf,{variant:"outline",size:"sm",onClick:()=>n("/loan-details/".concat(e.id)),className:"px-6 py-3 rounded-2xl font-medium flex items-center space-x-2",children:[(0,Ks.jsx)(Qp,{size:16}),(0,Ks.jsx)("span",{children:"Voir d\xe9tails"})]}),"active"===e.status&&(0,Ks.jsxs)(sf,{size:"sm",onClick:()=>n("/repayment",{state:{loanId:e.id}}),className:"px-6 py-3 rounded-2xl font-medium bg-primary-500 hover:bg-primary-600 flex items-center space-x-2",children:[(0,Ks.jsx)(Gf,{size:16}),(0,Ks.jsx)("span",{children:"Rembourser"})]})]})]})},e.id))}):(0,Ks.jsxs)("div",{className:"text-center py-16",children:[(0,Ks.jsx)("div",{className:"text-gray-400 mb-6",children:(0,Ks.jsx)(Mf,{size:80,className:"mx-auto"})}),(0,Ks.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-3 font-montserrat",children:"Aucun pr\xeat trouv\xe9"}),(0,Ks.jsx)("p",{className:"text-gray-500 mb-6 text-lg",children:c||"all"!==u?"Aucun pr\xeat ne correspond \xe0 vos crit\xe8res de recherche":"Vous n'avez pas encore de pr\xeat"}),!c&&"all"===u&&(0,Ks.jsx)(sf,{onClick:()=>n("/loan-request"),className:"px-8 py-4 text-lg rounded-2xl bg-primary-500 hover:bg-primary-600",children:"Faire une demande"})]})})}),(0,Ks.jsx)("div",{className:"fixed bottom-24 right-6 z-10",children:(0,Ks.jsxs)(sf,{variant:"outline",onClick:()=>{const e="data:text/csv;charset=utf-8,ID,Montant,Statut,Date de demande,\xc9ch\xe9ance,Montant total,Statut remboursement\n"+y.map(e=>"".concat(e.id,",").concat(e.amount,",").concat(x(e.status),",").concat(ff(e.requestDate),",").concat(e.dueDate?ff(e.dueDate):"N/A",",").concat(e.totalAmount||"N/A",",").concat(e.paidAmount>=(e.totalAmount||0)?"Rembours\xe9":"En cours")).join("\n"),t=encodeURI(e),r=document.createElement("a");r.setAttribute("href",t),r.setAttribute("download","historique_prets.csv"),document.body.appendChild(r),r.click(),document.body.removeChild(r)},className:"flex items-center space-x-2 px-4 py-3 rounded-full bg-white/90 backdrop-blur-sm border-white/50 shadow-lg hover:shadow-xl",children:[(0,Ks.jsx)(Up,{size:20}),(0,Ks.jsx)("span",{className:"hidden sm:inline",children:"Exporter"})]})})]})]})},fx=e=>{let{loan:r,onSuccess:s}=e;const n=(0,t.useRef)(null),{user:a}=Zs(),[i,o]=(0,t.useState)(!1);(0,t.useEffect)(()=>{const e=document.createElement("script");return e.src="https://cdn.fedapay.com/checkout.js?v=1.1.7",e.async=!0,e.onload=()=>{console.log("[FedaPay] \u2705 Script charg\xe9 pour remboursement")},e.onerror=()=>{console.error("[FedaPay] \u274c Erreur chargement script")},document.body.appendChild(e),()=>{document.body.contains(e)&&document.body.removeChild(e)}},[]);return(0,Ks.jsxs)("button",{ref:n,onClick:async()=>{if(window.FedaPay)if(a&&r){o(!0);try{const e=Fs,t=await fetch("".concat(e,"/api/create-loan-repayment"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:null===a||void 0===a?void 0:a.id,loan_id:r.id,amount:r.remainingAmount})}),s=await t.json();console.log("[FedaPayRemboursementButton] R\xe9ponse backend:",s),console.log("[FedaPayRemboursementButton] Status HTTP:",t.status),s.success&&s.transactionUrl?window.location.href=s.transactionUrl:(console.error("[FedaPayRemboursementButton] \u274c Erreur d\xe9taill\xe9e:",s),alert("Erreur lors de la cr\xe9ation de la transaction de remboursement: ".concat(s.error||"Erreur inconnue")))}catch(e){console.error("[FedaPayRemboursementButton] \u274c Erreur:",e),alert("Erreur de connexion. Veuillez r\xe9essayer.")}finally{o(!1)}}else alert("Informations utilisateur ou pr\xeat manquantes");else alert("FedaPay n'est pas encore charg\xe9 !")},disabled:i,className:"w-full bg-gradient-to-r from-blue-500 to-blue-600 text-white py-4 rounded-xl font-semibold shadow-lg flex items-center justify-center",children:[i?(0,Ks.jsx)("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}):(0,Ks.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Ks.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})}),"Rembourser mon pr\xeat"]})},xx=()=>{const{showSuccess:e,showError:r}=ln(),{user:s}=Zs(),n=Y(),[a,i]=(0,t.useState)(null),[o,l]=(0,t.useState)(!1),c=async()=>{if(null!==s&&void 0!==s&&s.id)try{l(!0);const[e,t]=await Promise.all([Hs(s.id),Gs(s.id)]);if(e.success&&t.success){const r=e.data||[],s=t.data||[];console.log("[REPAYMENT] Tous les pr\xeats:",r.map(e=>({id:e.id,status:e.status})));const n=r.find(e=>"active"===e.status||"approved"===e.status);if(console.log("[REPAYMENT] Pr\xeat actif trouv\xe9:",n?{id:n.id,status:n.status}:"Aucun"),n){const e=s.filter(e=>e.loan_id===n.id).reduce((e,t)=>e+(t.amount||0),0),t=parseFloat(n.amount),r=t*(n.interest_rate||0)/100,a=t+r,o=parseFloat(n.total_penalty_amount||0),l=a+o,c=Math.max(0,l-e);console.log("[REPAYMENT] Calculs d\xe9taill\xe9s:",{principalAmount:t,interestAmount:r,totalOriginalAmount:a,penaltyAmount:o,totalAmountWithPenalty:l,paidAmount:e,remainingAmount:c,remainingAmountRounded:Math.round(c),loanStatus:n.status});const d=new Date(n.created_at),u=n.duration||30,m=new Date(d.getTime()+24*u*60*60*1e3),h=new Date,p=Math.floor((h-d)/864e5),f=30,x=p+f-p%f,g=new Date(d.getTime()+24*x*60*60*1e3);console.log("[REPAYMENT] Calcul du montant \xe0 rembourser:",{loanId:n.id,originalAmount:n.amount,interestRate:n.interest_rate||0,totalOriginalAmount:a,paidAmount:e,remainingAmount:c,calculation:"".concat(n.amount," * (1 + ").concat(n.interest_rate||0,"/100) = ").concat(a)});const v={id:n.id,amount:n.amount,monthlyPayment:n.monthly_payment||Math.round(a/u),totalAmount:Math.round(a),paidAmount:Math.round(e),remainingAmount:Math.round(c),penaltyAmount:Math.round(o),totalAmountWithPenalty:Math.round(l),dueDate:m.toISOString().split("T")[0],nextPaymentDate:g.toISOString().split("T")[0],interest_rate:n.interest_rate||0,duration:n.duration||30,purpose:n.purpose||"Non sp\xe9cifi\xe9",status:n.status};i(v)}else i(null)}else console.error("[REPAYMENT] Erreur lors du chargement des donn\xe9es:",{loans:e.error,payments:t.error})}catch(e){console.error("[REPAYMENT] Erreur lors du chargement du pr\xeat actif:",e.message)}finally{l(!1)}};(0,t.useEffect)(()=>{c()},[null===s||void 0===s?void 0:s.id]);return(0,Ks.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-yellow-50 to-slate-100 pb-24",children:[(0,Ks.jsx)("div",{className:"bg-white/80 backdrop-blur-lg shadow-lg border-b border-white/50 sticky top-0 z-30",children:(0,Ks.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,Ks.jsxs)("div",{className:"flex items-center justify-between py-6",children:[(0,Ks.jsx)("button",{onClick:()=>n("/dashboard"),className:"p-2 hover:bg-gray-100 rounded-xl transition-colors",children:(0,Ks.jsx)(hf,{size:24,className:"text-gray-600"})}),(0,Ks.jsx)("div",{className:"text-center flex-1",children:(0,Ks.jsxs)("h1",{className:"text-3xl font-bold text-secondary-900 font-montserrat flex items-center justify-center gap-3",children:[(0,Ks.jsx)(yp,{className:"text-primary-600",size:32}),"Remboursement de Pr\xeat"]})}),(0,Ks.jsx)("div",{className:"w-10"})]})})}),(0,Ks.jsx)("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:o?(0,Ks.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,Ks.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-primary-600 border-t-transparent"})}):a?(0,Ks.jsx)("div",{className:"space-y-6",children:(0,Ks.jsxs)("div",{className:"bg-white rounded-3xl shadow-xl border border-gray-100 overflow-hidden",children:[(0,Ks.jsxs)("div",{className:"bg-gradient-to-r from-secondary-800 to-secondary-900 p-8",children:[(0,Ks.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Ks.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Ks.jsx)("div",{className:"p-3 bg-white rounded-xl",children:(0,Ks.jsx)(_p,{size:28,className:"text-primary-600"})}),(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Pr\xeat Actif"}),(0,Ks.jsxs)("p",{className:"text-gray-300 text-sm",children:["ID: #",a.id.substring(0,8)]})]})]}),(0,Ks.jsxs)("div",{className:"text-right",children:[(0,Ks.jsx)("p",{className:"text-gray-300 text-sm",children:"Objet du pr\xeat"}),(0,Ks.jsx)("p",{className:"text-white font-semibold",children:a.purpose})]})]}),(0,Ks.jsxs)("div",{className:"bg-white/10 backdrop-blur-sm rounded-2xl p-6 border border-white/20",children:[(0,Ks.jsx)("p",{className:"text-gray-200 text-sm mb-2",children:"Montant restant \xe0 rembourser"}),(0,Ks.jsx)("p",{className:"text-5xl font-bold text-white",children:pf(a.remainingAmount)})]})]}),(0,Ks.jsxs)("div",{className:"p-8",children:[(0,Ks.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[(0,Ks.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-2xl p-5 border border-blue-200",children:[(0,Ks.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,Ks.jsx)("div",{className:"p-2 bg-blue-200 rounded-lg",children:(0,Ks.jsx)(Gf,{size:20,className:"text-blue-700"})}),(0,Ks.jsx)("p",{className:"text-blue-900 font-medium text-sm",children:"Montant initial"})]}),(0,Ks.jsx)("p",{className:"text-2xl font-bold text-blue-900",children:pf(a.amount)})]}),(0,Ks.jsxs)("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-2xl p-5 border border-green-200",children:[(0,Ks.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,Ks.jsx)("div",{className:"p-2 bg-green-200 rounded-lg",children:(0,Ks.jsx)(tn,{size:20,className:"text-green-700"})}),(0,Ks.jsx)("p",{className:"text-green-900 font-medium text-sm",children:"D\xe9j\xe0 rembours\xe9"})]}),(0,Ks.jsx)("p",{className:"text-2xl font-bold text-green-900",children:pf(a.paidAmount)})]}),(0,Ks.jsxs)("div",{className:"bg-gradient-to-br from-primary-50 to-primary-100 rounded-2xl p-5 border border-primary-200",children:[(0,Ks.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,Ks.jsx)("div",{className:"p-2 bg-primary-200 rounded-lg",children:(0,Ks.jsx)(Of,{size:20,className:"text-primary-700"})}),(0,Ks.jsx)("p",{className:"text-primary-900 font-medium text-sm",children:"Total avec int\xe9r\xeats"})]}),(0,Ks.jsx)("p",{className:"text-2xl font-bold text-primary-900",children:pf(a.totalAmount)}),(0,Ks.jsxs)("p",{className:"text-xs text-primary-700 mt-1",children:["Taux: ",a.interest_rate,"%"]})]}),(0,Ks.jsxs)("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-2xl p-5 border border-purple-200",children:[(0,Ks.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,Ks.jsx)("div",{className:"p-2 bg-purple-200 rounded-lg",children:(0,Ks.jsx)(rx,{size:20,className:"text-purple-700"})}),(0,Ks.jsx)("p",{className:"text-purple-900 font-medium text-sm",children:"Date d'\xe9ch\xe9ance"})]}),(0,Ks.jsx)("p",{className:"text-lg font-bold text-purple-900",children:new Date(a.dueDate).toLocaleDateString("fr-FR",{day:"numeric",month:"long",year:"numeric"})}),(0,Ks.jsxs)("p",{className:"text-xs text-purple-700 mt-1",children:["Dur\xe9e: ",a.duration," jours"]})]})]}),a.penaltyAmount>0&&(0,Ks.jsx)("div",{className:"bg-gradient-to-r from-red-50 to-orange-50 border-l-4 border-red-500 rounded-xl p-6 mb-6",children:(0,Ks.jsxs)("div",{className:"flex items-start gap-4",children:[(0,Ks.jsx)("div",{className:"p-3 bg-red-100 rounded-xl",children:(0,Ks.jsx)(zf,{size:24,className:"text-red-600"})}),(0,Ks.jsxs)("div",{className:"flex-1",children:[(0,Ks.jsx)("h3",{className:"font-bold text-red-900 text-lg mb-2",children:"\u26a0\ufe0f Pr\xeat en retard"}),(0,Ks.jsxs)("p",{className:"text-red-800 mb-3",children:["Votre pr\xeat a d\xe9pass\xe9 la date d'\xe9ch\xe9ance. Des p\xe9nalit\xe9s de ",(0,Ks.jsx)("strong",{children:"2% par jour"})," sont appliqu\xe9es."]}),(0,Ks.jsx)("div",{className:"bg-white/50 rounded-xl p-4 border border-red-200",children:(0,Ks.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Ks.jsx)("span",{className:"text-red-900 font-medium",children:"P\xe9nalit\xe9s accumul\xe9es"}),(0,Ks.jsx)("span",{className:"text-2xl font-bold text-red-700",children:pf(a.penaltyAmount)})]})})]})]})}),(0,Ks.jsx)("div",{className:"bg-gradient-to-r from-blue-50 to-cyan-50 rounded-2xl p-6 border border-blue-200 mb-6",children:(0,Ks.jsxs)("div",{className:"flex items-start gap-4",children:[(0,Ks.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,Ks.jsx)(sn,{size:20,className:"text-blue-600"})}),(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("h3",{className:"font-semibold text-blue-900 mb-2",children:"Informations importantes"}),(0,Ks.jsxs)("ul",{className:"text-blue-800 text-sm space-y-1",children:[(0,Ks.jsx)("li",{children:"\u2022 Le remboursement se fait via Mobile Money (MTN, Moov)"}),(0,Ks.jsx)("li",{children:"\u2022 Vous pouvez rembourser partiellement ou totalement"}),(0,Ks.jsx)("li",{children:"\u2022 Le remboursement est instantan\xe9 et s\xe9curis\xe9"}),(0,Ks.jsx)("li",{children:"\u2022 \xc9vitez les p\xe9nalit\xe9s en remboursant avant l'\xe9ch\xe9ance"})]})]})]})}),(0,Ks.jsxs)("div",{className:"bg-gradient-to-br from-primary-50 to-yellow-50 rounded-2xl p-6 border-2 border-primary-300",children:[(0,Ks.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,Ks.jsx)("div",{className:"p-3 bg-primary-500 rounded-xl",children:(0,Ks.jsx)(yp,{size:24,className:"text-white"})}),(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("h3",{className:"font-bold text-secondary-900 text-lg",children:"Effectuer un remboursement"}),(0,Ks.jsx)("p",{className:"text-gray-600 text-sm",children:"Paiement s\xe9curis\xe9 via FedaPay"})]})]}),(0,Ks.jsx)(fx,{loan:a,onSuccess:t=>{e(t),setTimeout(()=>{c()},1e3)}})]})]})]})}):(0,Ks.jsx)("div",{className:"bg-white rounded-3xl shadow-xl border border-gray-100 overflow-hidden",children:(0,Ks.jsxs)("div",{className:"p-16 text-center",children:[(0,Ks.jsx)("div",{className:"w-32 h-32 bg-gradient-to-br from-gray-100 to-gray-200 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,Ks.jsx)(_p,{size:64,className:"text-gray-400"})}),(0,Ks.jsx)("h2",{className:"text-3xl font-bold text-gray-900 mb-4 font-montserrat",children:"Aucun pr\xeat en cours"}),(0,Ks.jsx)("p",{className:"text-gray-600 mb-2 max-w-md mx-auto",children:"Vous n'avez actuellement aucun pr\xeat actif \xe0 rembourser."}),(0,Ks.jsx)("p",{className:"text-gray-500 text-sm mb-8",children:"Un seul pr\xeat peut \xeatre actif \xe0 la fois"}),(0,Ks.jsxs)("button",{onClick:()=>n("/loan-request"),className:"inline-flex items-center gap-2 px-8 py-4 bg-primary-500 hover:bg-primary-600 text-white font-semibold rounded-xl transition-all duration-200 shadow-lg hover:shadow-xl",children:[(0,Ks.jsx)(yp,{size:20}),"Demander un nouveau pr\xeat"]})]})})})]})},gx=()=>{const e=$(),r=Y(),{user:s}=Zs(),{showSuccess:n,showError:a,addNotification:i}=ln(),[o,l]=(0,t.useState)(null),[c,d]=(0,t.useState)(!1);(0,t.useEffect)(()=>{const t=new URLSearchParams(e.search),r=t.get("transaction_id"),s=t.get("amount"),n=t.get("loan_id");if(r&&s&&n){const e={transactionId:r,amount:parseInt(s),loanId:n};l(e),u(e)}},[e]);const u=async e=>{if(!c)try{d(!0),console.log("[REPAYMENT_SUCCESS] Traitement du remboursement:",e);const t={loan_id:e.loanId,user_id:s.id,amount:e.amount,payment_method:"fedapay",fedapay_transaction_id:e.transactionId,status:"completed",payment_date:(new Date).toISOString(),description:"Remboursement complet du pr\xeat #".concat(e.loanId),metadata:{fedapay_data:{transaction_id:e.transactionId,amount:e.amount,payment_date:(new Date).toISOString()},payment_type:"loan_repayment",app_source:"ab_pret_web"}},r=await(async e=>{try{const{data:t,error:r}=await Ms.from("payments").insert([e]).select().single();if(r)throw r;return{success:!0,data:t}}catch(t){return console.error("[SUPABASE] Erreur lors de la cr\xe9ation du paiement:",t.message),{success:!1,error:t.message}}})(t);if(!r.success)throw new Error("Erreur lors de la cr\xe9ation du paiement: "+r.error);console.log("[REPAYMENT_SUCCESS] Paiement cr\xe9\xe9:",r.data);const a=await Ws(e.loanId,"completed");if(!a.success)throw new Error("Erreur lors de la mise \xe0 jour du pr\xeat: "+a.error);console.log("[REPAYMENT_SUCCESS] Pr\xeat mis \xe0 jour:",a.data);const o={title:"Remboursement de pr\xeat effectu\xe9",message:"Le client ".concat(s.first_name||s.fullName," a rembours\xe9 son pr\xeat #").concat(e.loanId," d'un montant de ").concat(e.amount," FCFA"),type:"success",priority:"high",data:{loanId:e.loanId,userId:s.id,amount:e.amount,transactionId:e.transactionId,action:"view_loan_details"}};i(o),n("Remboursement trait\xe9 avec succ\xe8s ! Le pr\xeat a \xe9t\xe9 marqu\xe9 comme rembours\xe9.")}catch(t){console.error("[REPAYMENT_SUCCESS] Erreur lors du traitement:",t),a("Erreur lors du traitement du remboursement: "+t.message)}finally{d(!1)}};return(0,Ks.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-green-50 to-blue-50 flex items-center justify-center p-4",children:(0,Ks.jsxs)("div",{className:"max-w-md w-full",children:[(0,Ks.jsxs)("div",{className:"bg-white rounded-3xl shadow-xl p-8 text-center",children:[(0,Ks.jsx)("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,Ks.jsx)(tn,{className:"w-12 h-12 text-green-600"})}),(0,Ks.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Remboursement r\xe9ussi !"}),(0,Ks.jsx)("p",{className:"text-gray-600 mb-6",children:"Votre pr\xeat a \xe9t\xe9 rembours\xe9 avec succ\xe8s via FedaPay."}),o&&(0,Ks.jsx)("div",{className:"bg-gray-50 rounded-2xl p-6 mb-6",children:(0,Ks.jsxs)("div",{className:"space-y-3",children:[(0,Ks.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Ks.jsx)("span",{className:"text-gray-600",children:"Montant rembours\xe9 :"}),(0,Ks.jsx)("span",{className:"font-semibold text-gray-900",children:(m=o.amount,new Intl.NumberFormat("fr-CI",{style:"currency",currency:"XOF"}).format(m/100))})]}),(0,Ks.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Ks.jsx)("span",{className:"text-gray-600",children:"ID Transaction :"}),(0,Ks.jsxs)("span",{className:"font-mono text-sm text-gray-500",children:[o.transactionId.substring(0,12),"..."]})]}),(0,Ks.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Ks.jsx)("span",{className:"text-gray-600",children:"Pr\xeat # :"}),(0,Ks.jsx)("span",{className:"font-semibold text-gray-900",children:o.loanId})]})]})}),(0,Ks.jsx)("div",{className:"bg-green-50 border border-green-200 rounded-xl p-4 mb-6",children:(0,Ks.jsxs)("p",{className:"text-green-800 text-sm",children:[(0,Ks.jsx)("strong",{children:"Confirmation :"}),c?"Traitement du remboursement en cours...":"Votre pr\xeat a \xe9t\xe9 marqu\xe9 comme rembours\xe9 dans notre syst\xe8me. Vous recevrez bient\xf4t un email de confirmation."]})}),(0,Ks.jsxs)("div",{className:"space-y-3",children:[(0,Ks.jsxs)("button",{onClick:()=>{r("/loan-history")},className:"w-full bg-primary-500 hover:bg-primary-600 text-white font-semibold py-3 px-6 rounded-xl transition-colors flex items-center justify-center space-x-2",children:[(0,Ks.jsx)(hf,{className:"w-5 h-5"}),(0,Ks.jsx)("span",{children:"Voir l'historique des pr\xeats"})]}),(0,Ks.jsxs)("button",{onClick:()=>{r("/dashboard")},className:"w-full bg-gray-100 hover:bg-gray-200 text-gray-700 font-semibold py-3 px-6 rounded-xl transition-colors flex items-center justify-center space-x-2",children:[(0,Ks.jsx)(bp,{className:"w-5 h-5"}),(0,Ks.jsx)("span",{children:"Retour au tableau de bord"})]})]})]}),(0,Ks.jsx)("div",{className:"mt-6 text-center",children:(0,Ks.jsx)("p",{className:"text-sm text-gray-500",children:"Si vous avez des questions, contactez notre support client."})})]})});var m},vx=()=>{const{showError:e}=ln(),{user:r}=Zs(),s=Y(),[n]=Ie(),[a,i]=(0,t.useState)(!1),o=n.get("transaction_id"),l=n.get("amount"),c=n.get("loan_id"),d=n.get("user_id");(0,t.useEffect)(()=>{e("Le paiement a \xe9chou\xe9. Veuillez r\xe9essayer.")},[e]);return(0,Ks.jsxs)("div",{className:"bg-gradient-to-br from-red-50 via-orange-50 to-yellow-50 min-h-screen",children:[(0,Ks.jsxs)("div",{className:"relative overflow-hidden",children:[(0,Ks.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-red-500 via-orange-600 to-yellow-500 opacity-10 animate-gradient"}),(0,Ks.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-white/20 via-transparent to-transparent"}),(0,Ks.jsx)("div",{className:"relative px-4 lg:px-8 py-8 lg:py-12 backdrop-blur-sm",children:(0,Ks.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,Ks.jsx)("div",{className:"flex items-center justify-between mb-8",children:(0,Ks.jsxs)(sf,{variant:"outline",onClick:()=>s("/dashboard"),className:"flex items-center space-x-2 px-4 py-2 bg-white/20 backdrop-blur-sm border-white/30",children:[(0,Ks.jsx)(hf,{size:20}),(0,Ks.jsx)("span",{children:"Retour au Dashboard"})]})}),(0,Ks.jsx)("div",{className:"text-center mb-8 lg:mb-12",children:(0,Ks.jsxs)("h1",{className:"text-4xl lg:text-6xl font-bold text-red-900 font-montserrat mb-4",children:["Paiement \xc9chou\xe9"," ",(0,Ks.jsx)("span",{className:"inline-block",children:"\u274c"})]})})]})})]}),(0,Ks.jsx)("div",{className:"max-w-2xl mx-auto px-4 pb-8",children:(0,Ks.jsx)(ix,{title:"D\xe9tails de l'\xe9chec",className:"bg-white/90 backdrop-blur-sm border-white/20",children:(0,Ks.jsxs)("div",{className:"text-center py-8",children:[(0,Ks.jsx)("div",{className:"w-24 h-24 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,Ks.jsx)(Uf,{className:"w-12 h-12 text-red-600"})}),(0,Ks.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Le paiement n'a pas pu \xeatre trait\xe9"}),(0,Ks.jsxs)("p",{className:"text-gray-600 mb-6 text-lg",children:["Nous n'avons pas pu traiter votre paiement de"," ",(0,Ks.jsx)("strong",{children:l?pf(parseInt(l)):"N/A"}),"."]}),(0,Ks.jsxs)("div",{className:"bg-gray-50 rounded-xl p-4 mb-6 text-left",children:[(0,Ks.jsx)("h3",{className:"font-semibold text-gray-900 mb-2",children:"D\xe9tails techniques :"}),(0,Ks.jsxs)("div",{className:"space-y-1 text-sm text-gray-600",children:[(0,Ks.jsxs)("p",{children:[(0,Ks.jsx)("strong",{children:"Transaction ID :"})," ",o||"N/A"]}),(0,Ks.jsxs)("p",{children:[(0,Ks.jsx)("strong",{children:"Pr\xeat ID :"})," ",c||"N/A"]}),(0,Ks.jsxs)("p",{children:[(0,Ks.jsx)("strong",{children:"Utilisateur ID :"})," ",d||"N/A"]}),(0,Ks.jsxs)("p",{children:[(0,Ks.jsx)("strong",{children:"Montant :"})," ",l?pf(parseInt(l)):"N/A"]})]})]}),(0,Ks.jsxs)("div",{className:"space-y-4",children:[(0,Ks.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4",children:[(0,Ks.jsx)("h3",{className:"font-semibold text-blue-900 mb-2",children:"Que pouvez-vous faire ?"}),(0,Ks.jsxs)("ul",{className:"text-sm text-blue-800 space-y-1",children:[(0,Ks.jsx)("li",{children:"\u2022 V\xe9rifiez que votre compte Mobile Money a suffisamment de fonds"}),(0,Ks.jsx)("li",{children:"\u2022 Assurez-vous que votre num\xe9ro de t\xe9l\xe9phone est correct"}),(0,Ks.jsx)("li",{children:'\u2022 R\xe9essayez le paiement en cliquant sur "R\xe9essayer"'}),(0,Ks.jsx)("li",{children:"\u2022 Contactez le support si le probl\xe8me persiste"})]})]}),(0,Ks.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 pt-4",children:[(0,Ks.jsx)(sf,{onClick:()=>{i(!0),setTimeout(()=>{s("/remboursement"),i(!1)},1e3)},disabled:a,className:"flex-1 bg-primary-500 hover:bg-primary-600 text-white font-semibold py-3 px-6 rounded-xl transition-colors flex items-center justify-center space-x-2",children:a?(0,Ks.jsxs)(Ks.Fragment,{children:[(0,Ks.jsx)(Pf,{className:"w-5 h-5 animate-spin"}),(0,Ks.jsx)("span",{children:"Redirection..."})]}):(0,Ks.jsxs)(Ks.Fragment,{children:[(0,Ks.jsx)(Pf,{className:"w-5 h-5"}),(0,Ks.jsx)("span",{children:"R\xe9essayer le paiement"})]})}),(0,Ks.jsx)(sf,{onClick:()=>{s("/dashboard")},variant:"outline",className:"flex-1 border-gray-300 text-gray-700 hover:bg-gray-50 font-semibold py-3 px-6 rounded-xl transition-colors",children:"Retour au Dashboard"})]})]}),(0,Ks.jsxs)("div",{className:"mt-8 pt-6 border-t border-gray-200",children:[(0,Ks.jsx)("p",{className:"text-sm text-gray-500 mb-2",children:"Besoin d'aide ? Contactez notre support :"}),(0,Ks.jsxs)("div",{className:"flex justify-center space-x-4 text-sm",children:[(0,Ks.jsx)("a",{href:"mailto:support@campusfinance.com",className:"text-primary-600 hover:text-primary-700",children:"support@campusfinance.com"}),(0,Ks.jsx)("span",{className:"text-gray-400",children:"|"}),(0,Ks.jsx)("a",{href:"tel:+2250700000000",className:"text-primary-600 hover:text-primary-700",children:"+225 07 00 00 00 00"})]})]})]})})})]})},bx=()=>{const{showError:e}=ln(),{user:r}=Zs(),s=Y(),[n]=Ie(),[a,i]=(0,t.useState)(!1),o=n.get("transaction_id"),l=n.get("amount"),c=n.get("loan_id"),d=n.get("user_id");(0,t.useEffect)(()=>{e("Le paiement a \xe9t\xe9 annul\xe9.")},[e]);return(0,Ks.jsxs)("div",{className:"bg-gradient-to-br from-yellow-50 via-orange-50 to-red-50 min-h-screen",children:[(0,Ks.jsxs)("div",{className:"relative overflow-hidden",children:[(0,Ks.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-yellow-500 via-orange-600 to-red-500 opacity-10 animate-gradient"}),(0,Ks.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-white/20 via-transparent to-transparent"}),(0,Ks.jsx)("div",{className:"relative px-4 lg:px-8 py-8 lg:py-12 backdrop-blur-sm",children:(0,Ks.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,Ks.jsx)("div",{className:"flex items-center justify-between mb-8",children:(0,Ks.jsxs)(sf,{variant:"outline",onClick:()=>s("/dashboard"),className:"flex items-center space-x-2 px-4 py-2 bg-white/20 backdrop-blur-sm border-white/30",children:[(0,Ks.jsx)(hf,{size:20}),(0,Ks.jsx)("span",{children:"Retour au Dashboard"})]})}),(0,Ks.jsx)("div",{className:"text-center mb-8 lg:mb-12",children:(0,Ks.jsxs)("h1",{className:"text-4xl lg:text-6xl font-bold text-orange-900 font-montserrat mb-4",children:["Paiement Annul\xe9"," ",(0,Ks.jsx)("span",{className:"inline-block",children:"\u26a0\ufe0f"})]})})]})})]}),(0,Ks.jsx)("div",{className:"max-w-2xl mx-auto px-4 pb-8",children:(0,Ks.jsx)(ix,{title:"D\xe9tails de l'annulation",className:"bg-white/90 backdrop-blur-sm border-white/20",children:(0,Ks.jsxs)("div",{className:"text-center py-8",children:[(0,Ks.jsx)("div",{className:"w-24 h-24 bg-orange-100 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,Ks.jsx)(nn,{className:"w-12 h-12 text-orange-600"})}),(0,Ks.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Le paiement a \xe9t\xe9 annul\xe9"}),(0,Ks.jsxs)("p",{className:"text-gray-600 mb-6 text-lg",children:["Votre paiement de"," ",(0,Ks.jsx)("strong",{children:l?pf(parseInt(l)):"N/A"})," a \xe9t\xe9 annul\xe9. Aucun montant n'a \xe9t\xe9 d\xe9bit\xe9 de votre compte."]}),(0,Ks.jsxs)("div",{className:"bg-gray-50 rounded-xl p-4 mb-6 text-left",children:[(0,Ks.jsx)("h3",{className:"font-semibold text-gray-900 mb-2",children:"D\xe9tails techniques :"}),(0,Ks.jsxs)("div",{className:"space-y-1 text-sm text-gray-600",children:[(0,Ks.jsxs)("p",{children:[(0,Ks.jsx)("strong",{children:"Transaction ID :"})," ",o||"N/A"]}),(0,Ks.jsxs)("p",{children:[(0,Ks.jsx)("strong",{children:"Pr\xeat ID :"})," ",c||"N/A"]}),(0,Ks.jsxs)("p",{children:[(0,Ks.jsx)("strong",{children:"Utilisateur ID :"})," ",d||"N/A"]}),(0,Ks.jsxs)("p",{children:[(0,Ks.jsx)("strong",{children:"Montant :"})," ",l?pf(parseInt(l)):"N/A"]}),(0,Ks.jsxs)("p",{children:[(0,Ks.jsx)("strong",{children:"Statut :"})," ",(0,Ks.jsx)("span",{className:"text-orange-600 font-medium",children:"Annul\xe9"})]})]})]}),(0,Ks.jsxs)("div",{className:"space-y-4",children:[(0,Ks.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4",children:[(0,Ks.jsx)("h3",{className:"font-semibold text-blue-900 mb-2",children:"Que pouvez-vous faire ?"}),(0,Ks.jsxs)("ul",{className:"text-sm text-blue-800 space-y-1",children:[(0,Ks.jsx)("li",{children:"\u2022 R\xe9essayer le paiement maintenant"}),(0,Ks.jsx)("li",{children:"\u2022 Retourner au dashboard pour plus tard"}),(0,Ks.jsx)("li",{children:"\u2022 V\xe9rifier les informations de votre compte Mobile Money"}),(0,Ks.jsx)("li",{children:"\u2022 Contacter le support si vous avez des questions"})]})]}),(0,Ks.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 pt-4",children:[(0,Ks.jsx)(sf,{onClick:()=>{i(!0),setTimeout(()=>{s("/remboursement"),i(!1)},1e3)},disabled:a,className:"flex-1 bg-primary-500 hover:bg-primary-600 text-white font-semibold py-3 px-6 rounded-xl transition-colors flex items-center justify-center space-x-2",children:a?(0,Ks.jsxs)(Ks.Fragment,{children:[(0,Ks.jsx)(Pf,{className:"w-5 h-5 animate-spin"}),(0,Ks.jsx)("span",{children:"Redirection..."})]}):(0,Ks.jsxs)(Ks.Fragment,{children:[(0,Ks.jsx)(Pf,{className:"w-5 h-5"}),(0,Ks.jsx)("span",{children:"R\xe9essayer le paiement"})]})}),(0,Ks.jsx)(sf,{onClick:()=>{s("/dashboard")},variant:"outline",className:"flex-1 border-gray-300 text-gray-700 hover:bg-gray-50 font-semibold py-3 px-6 rounded-xl transition-colors",children:"Retour au Dashboard"})]})]}),(0,Ks.jsxs)("div",{className:"mt-6 bg-green-50 border border-green-200 rounded-xl p-4",children:[(0,Ks.jsx)("h3",{className:"font-semibold text-green-900 mb-2",children:"Information importante :"}),(0,Ks.jsx)("p",{className:"text-sm text-green-800",children:"Aucun montant n'a \xe9t\xe9 d\xe9bit\xe9 de votre compte. Vous pouvez r\xe9essayer le paiement \xe0 tout moment sans aucun frais suppl\xe9mentaire."})]}),(0,Ks.jsxs)("div",{className:"mt-8 pt-6 border-t border-gray-200",children:[(0,Ks.jsx)("p",{className:"text-sm text-gray-500 mb-2",children:"Besoin d'aide ? Contactez notre support :"}),(0,Ks.jsxs)("div",{className:"flex justify-center space-x-4 text-sm",children:[(0,Ks.jsx)("a",{href:"mailto:support@campusfinance.com",className:"text-primary-600 hover:text-primary-700",children:"support@campusfinance.com"}),(0,Ks.jsx)("span",{className:"text-gray-400",children:"|"}),(0,Ks.jsx)("a",{href:"tel:+2250700000000",className:"text-primary-600 hover:text-primary-700",children:"+225 07 00 00 00 00"})]})]})]})})})]})},yx=en("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]),jx=()=>{var e,r,s;const{user:n,logout:a}=Zs(),i=Y(),{notifications:o,markAsRead:l}=ln(),[c,d]=(0,t.useState)(!1),[u,m]=(0,t.useState)(!1),[h,p]=(0,t.useState)(null),[f,x]=(0,t.useState)(null),[g,v]=(0,t.useState)(!1),b=(0,t.useRef)(null),[y,j]=(0,t.useState)({firstName:(null===n||void 0===n?void 0:n.first_name)||(null===n||void 0===n||null===(e=n.user_metadata)||void 0===e?void 0:e.first_name)||"",lastName:(null===n||void 0===n?void 0:n.last_name)||(null===n||void 0===n||null===(r=n.user_metadata)||void 0===r?void 0:r.last_name)||"",email:(null===n||void 0===n?void 0:n.email)||"",phone:(null===n||void 0===n?void 0:n.phone_number)||(null===n||void 0===n||null===(s=n.user_metadata)||void 0===s?void 0:s.phone_number)||""});return n?(0,Ks.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-primary-50 via-accent-50 to-secondary-50",children:[(0,Ks.jsx)("div",{className:"bg-white/80 backdrop-blur-sm border-b border-white/20 sticky top-0 z-10",children:(0,Ks.jsx)("div",{className:"max-w-7xl mx-auto px-4 py-4",children:(0,Ks.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Ks.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,Ks.jsx)("button",{onClick:()=>i("/menu"),className:"text-gray-600 hover:text-gray-900 transition-colors",children:"\u2190 Retour au menu"}),(0,Ks.jsx)("h1",{className:"text-2xl font-bold text-gray-900 font-montserrat",children:"Mon Profil"})]}),(0,Ks.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,Ks.jsx)(up,{notifications:o,onMarkAsRead:l}),(0,Ks.jsxs)(sf,{onClick:async()=>{try{await a(),i("/login")}catch(e){console.error("Erreur lors de la d\xe9connexion:",e)}},variant:"outline",className:"flex items-center space-x-2 text-red-600 border-red-200 hover:bg-red-50",children:[(0,Ks.jsx)($a,{size:16}),(0,Ks.jsx)("span",{children:"D\xe9connexion"})]})]})]})})}),(0,Ks.jsx)("div",{className:"max-w-7xl mx-auto px-4 py-8",children:(0,Ks.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,Ks.jsx)("div",{className:"lg:col-span-2 space-y-6",children:(0,Ks.jsxs)(ix,{className:"bg-white/90 backdrop-blur-sm border-white/20",children:[(0,Ks.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,Ks.jsx)("h2",{className:"text-2xl font-bold text-gray-900 font-montserrat",children:"Informations personnelles"}),c?(0,Ks.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Ks.jsxs)(sf,{onClick:async()=>{m(!0);try{console.log("[PROFILE] Sauvegarde du profil en cours...");y.firstName,y.lastName,y.email,y.phone;try{const e=ze(ze({},JSON.parse(localStorage.getItem("ab_user_cache")||"{}")),{},{first_name:y.firstName,last_name:y.lastName,email:y.email});localStorage.setItem("ab_user_cache",JSON.stringify(e)),console.log("[PROFILE] \u2705 Cache local mis \xe0 jour")}catch(e){console.warn("[PROFILE] Erreur lors de la mise \xe0 jour du cache:",e)}d(!1),console.log("[PROFILE] \u2705 Profil mis \xe0 jour avec succ\xe8s")}catch(t){console.error("[PROFILE] \u274c Erreur exceptionnelle:",t)}finally{m(!1)}},disabled:u,className:"flex items-center space-x-2 bg-green-600 hover:bg-green-700",children:[(0,Ks.jsx)(Xf,{size:16}),(0,Ks.jsx)("span",{children:u?"Sauvegarde...":"Sauvegarder"})]}),(0,Ks.jsxs)(sf,{onClick:()=>{var e,t,r;j({firstName:(null===n||void 0===n?void 0:n.first_name)||(null===n||void 0===n||null===(e=n.user_metadata)||void 0===e?void 0:e.first_name)||"",lastName:(null===n||void 0===n?void 0:n.last_name)||(null===n||void 0===n||null===(t=n.user_metadata)||void 0===t?void 0:t.last_name)||"",email:(null===n||void 0===n?void 0:n.email)||"",phone:(null===n||void 0===n?void 0:n.phone_number)||(null===n||void 0===n||null===(r=n.user_metadata)||void 0===r?void 0:r.phone_number)||""}),d(!1)},variant:"outline",className:"flex items-center space-x-2",children:[(0,Ks.jsx)(nn,{size:16}),(0,Ks.jsx)("span",{children:"Annuler"})]})]}):(0,Ks.jsxs)(sf,{onClick:()=>{d(!0)},className:"flex items-center space-x-2 bg-primary-600 hover:bg-primary-700",children:[(0,Ks.jsx)(yx,{size:16}),(0,Ks.jsx)("span",{children:"Modifier"})]})]}),(0,Ks.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Pr\xe9nom"}),(0,Ks.jsx)(af,{type:"text",value:y.firstName,onChange:e=>j(t=>ze(ze({},t),{},{firstName:e.target.value})),disabled:!c,className:"w-full"})]}),(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nom"}),(0,Ks.jsx)(af,{type:"text",value:y.lastName,onChange:e=>j(t=>ze(ze({},t),{},{lastName:e.target.value})),disabled:!c,className:"w-full"})]}),(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),(0,Ks.jsx)(af,{type:"email",value:y.email,onChange:e=>j(t=>ze(ze({},t),{},{email:e.target.value})),disabled:!c,className:"w-full"})]}),(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"T\xe9l\xe9phone"}),(0,Ks.jsx)(af,{type:"tel",value:y.phone,onChange:e=>j(t=>ze(ze({},t),{},{phone:e.target.value})),disabled:!c,className:"w-full"})]})]})]})}),(0,Ks.jsx)("div",{className:"space-y-4",children:(0,Ks.jsx)("div",{children:(0,Ks.jsx)(ix,{className:"bg-white/90 backdrop-blur-sm border-white/20",children:(0,Ks.jsxs)("div",{className:"text-center",children:[(0,Ks.jsxs)("div",{className:"relative mx-auto mb-6",children:[(0,Ks.jsx)("input",{ref:b,type:"file",accept:"image/*",onChange:e=>{const t=e.target.files[0];if(t){p(t);const e=new FileReader;e.onload=e=>{x(e.target.result)},e.readAsDataURL(t)}},className:"hidden"}),(0,Ks.jsxs)("div",{className:"relative mx-auto w-28 h-28",children:[(0,Ks.jsx)("div",{className:"absolute inset-0 rounded-full bg-gradient-to-r from-blue-500 via-indigo-500 to-purple-500 p-1"}),(0,Ks.jsxs)("div",{className:"w-full h-full bg-gradient-to-br from-blue-400 via-indigo-500 to-purple-600 rounded-full flex items-center justify-center shadow-2xl overflow-hidden relative",children:[f?(0,Ks.jsx)("img",{src:f,alt:"Photo de profil",className:"w-full h-full object-cover relative z-10"}):(0,Ks.jsxs)("span",{className:"text-white text-4xl font-bold relative z-10",children:[y.firstName.charAt(0),y.lastName.charAt(0)]}),g&&(0,Ks.jsx)("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center rounded-full z-20",children:(0,Ks.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-3 border-white border-t-transparent"})}),(0,Ks.jsx)("button",{onClick:()=>{var e;null===(e=b.current)||void 0===e||e.click()},className:"absolute bottom-0 right-0 w-8 h-8 bg-white rounded-full shadow-lg flex items-center justify-center z-30 hover:bg-gray-100 transition-colors duration-200",children:(0,Ks.jsx)(mf,{size:16,className:"text-gray-600"})}),f&&(0,Ks.jsx)("button",{onClick:()=>{p(null),x(null),b.current&&(b.current.value="")},className:"absolute top-0 right-0 w-8 h-8 bg-red-500 rounded-full shadow-lg flex items-center justify-center z-30 hover:bg-red-600 transition-colors duration-200",children:(0,Ks.jsx)(Qf,{size:16,className:"text-white"})})]})]})]}),(0,Ks.jsxs)("h3",{className:"text-2xl font-bold text-gray-900 font-montserrat mb-3 bg-gradient-to-r from-blue-600 via-indigo-600 to-purple-600 bg-clip-text text-transparent",children:[y.firstName," ",y.lastName]}),(0,Ks.jsx)("div",{className:"flex items-center justify-center space-x-2 text-sm text-gray-500",children:(0,Ks.jsx)("span",{className:"font-medium capitalize",children:n.role})})]})})})})]})})]}):(0,Ks.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-primary-50 via-accent-50 to-secondary-50 flex items-center justify-center",children:(0,Ks.jsxs)("div",{className:"text-center",children:[(0,Ks.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-primary-600 mx-auto mb-4"}),(0,Ks.jsx)("p",{className:"text-gray-600",children:"Chargement du profil..."})]})})},wx=()=>{const e=Y(),[r,s]=(0,t.useState)({name:"Elise HASSI",email:"elise.hassi@example.com",role:"client",avatar:null}),n=[{icon:(0,Ks.jsx)(Af,{size:24}),title:"AB \xc9pargne",subtitle:"\xc9pargne et investissement",description:"D\xe9couvrez nos solutions d'\xe9pargne et d'investissement personnalis\xe9es pour faire fructifier votre capital",action:()=>e("/ab-epargne"),color:"from-green-500 to-emerald-600",bgColor:"bg-gradient-to-br from-green-50 to-emerald-100",iconBg:"bg-gradient-to-r from-green-500 to-emerald-600"},{icon:(0,Ks.jsx)(bp,{size:24}),title:"AB Logement",subtitle:"Solutions immobili\xe8res",description:"Acc\xe9dez \xe0 nos services de financement immobilier et de gestion locative personnalis\xe9s",action:()=>e("/ab-logement"),color:"from-blue-500 to-indigo-600",bgColor:"bg-gradient-to-br from-blue-50 to-indigo-100",iconBg:"bg-gradient-to-r from-blue-500 to-indigo-600"},{icon:(0,Ks.jsx)(Of,{size:24}),title:"Coaching et Finance Entrepreneuriale",subtitle:"Accompagnement business",description:"D\xe9veloppez votre entreprise avec notre expertise en finance et notre accompagnement personnalis\xe9",action:()=>e("/coaching-finance"),color:"from-purple-500 to-violet-600",bgColor:"bg-gradient-to-br from-purple-50 to-violet-100",iconBg:"bg-gradient-to-r from-purple-500 to-violet-600"},{icon:(0,Ks.jsx)(Tf,{size:24}),title:"Score de Fid\xe9lit\xe9",subtitle:"Programme de r\xe9compenses",description:"D\xe9couvrez vos avantages et r\xe9compenses pour votre fid\xe9lit\xe9 \xe0 nos services",action:()=>e("/loyalty-score"),color:"from-yellow-500 to-orange-600",bgColor:"bg-gradient-to-br from-yellow-50 to-orange-100",iconBg:"bg-gradient-to-r from-yellow-500 to-orange-600"}];return(0,Ks.jsx)("div",{className:"bg-gradient-to-br from-primary-50 via-accent-50 to-secondary-50 pt-0",children:(0,Ks.jsxs)("div",{className:"relative overflow-hidden",children:[(0,Ks.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-500 via-purple-600 to-indigo-600 opacity-15"}),(0,Ks.jsx)("div",{className:"relative px-4 lg:px-8 py-8 lg:py-12 backdrop-blur-sm",children:(0,Ks.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,Ks.jsx)("div",{className:"text-center mb-8 lg:mb-12",children:(0,Ks.jsxs)("h1",{className:"text-4xl lg:text-6xl font-bold text-secondary-900 font-montserrat mb-4",children:["Menu"," ",(0,Ks.jsx)("span",{className:"bg-gradient-to-r from-blue-600 via-purple-600 to-indigo-600 bg-clip-text text-transparent",children:"Principal"})]})}),(0,Ks.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:n.map((e,t)=>(0,Ks.jsx)("div",{className:"group cursor-pointer",onClick:e.action,children:(0,Ks.jsxs)("div",{className:"".concat(e.bgColor," p-4 rounded-2xl border border-white/50 shadow-lg hover:shadow-xl transition-all duration-300 relative overflow-hidden"),children:[(0,Ks.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-700"}),(0,Ks.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,Ks.jsxs)("div",{className:"flex-1",children:[(0,Ks.jsx)("h3",{className:"text-lg font-bold bg-gradient-to-r ".concat(e.color," bg-clip-text text-transparent mb-1"),children:e.title}),(0,Ks.jsx)("p",{className:"text-xs text-gray-600 font-medium",children:e.subtitle})]}),(0,Ks.jsx)("div",{className:"p-2 rounded-xl ".concat(e.iconBg," text-white shadow-lg"),children:e.icon})]}),(0,Ks.jsx)("p",{className:"text-xs text-gray-600 leading-relaxed mb-3",children:e.description}),(0,Ks.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Ks.jsx)("div",{className:"w-6 h-6 rounded-full ".concat(e.iconBg," flex items-center justify-center"),children:(0,Ks.jsx)(Qa,{size:12,className:"text-white"})}),(0,Ks.jsx)("div",{className:"text-xs font-medium bg-gradient-to-r ".concat(e.color," bg-clip-text text-transparent"),children:"D\xe9couvrir"})]})]})},t))})]})})]})})},Nx=()=>{const e=Y();return(0,Ks.jsx)("div",{className:"bg-gradient-to-br from-blue-50 via-indigo-50 to-blue-100 min-h-screen",children:(0,Ks.jsxs)("div",{className:"relative overflow-hidden",children:[(0,Ks.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-500 via-indigo-600 to-blue-600 opacity-10"}),(0,Ks.jsx)("div",{className:"relative px-4 lg:px-8 py-6",children:(0,Ks.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,Ks.jsxs)(ep.button,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5},onClick:()=>e("/menu"),className:"inline-flex items-center space-x-2 px-4 py-2 bg-white/80 backdrop-blur-sm rounded-full border border-white/50 shadow-lg hover:bg-white/90 transition-all duration-300 mb-8",children:[(0,Ks.jsx)(hf,{size:16,className:"text-blue-600"}),(0,Ks.jsx)("span",{className:"text-sm font-medium text-blue-700",children:"Retour au menu"})]}),(0,Ks.jsxs)("div",{className:"text-center",children:[(0,Ks.jsx)(ep.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.8,delay:.2},className:"mb-8",children:(0,Ks.jsx)("div",{className:"inline-flex p-8 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-full text-white shadow-2xl",children:(0,Ks.jsx)(bp,{size:80})})}),(0,Ks.jsxs)(ep.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.3},className:"text-4xl lg:text-6xl font-bold text-gray-900 mb-6",children:["AB"," ",(0,Ks.jsx)("span",{className:"bg-gradient-to-r from-blue-600 via-indigo-600 to-blue-600 bg-clip-text text-transparent",children:"Logement"})]}),(0,Ks.jsx)(ep.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.4},className:"mb-8",children:(0,Ks.jsxs)("div",{className:"inline-flex items-center space-x-3 px-6 py-3 bg-yellow-100 border border-yellow-300 rounded-full",children:[(0,Ks.jsx)(sp,{size:20,className:"text-yellow-600"}),(0,Ks.jsx)("span",{className:"text-lg font-semibold text-yellow-800",children:"Bient\xf4t disponible"})]})}),(0,Ks.jsxs)(ep.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.5},className:"text-xl lg:text-2xl text-gray-600 mb-12 font-light max-w-2xl mx-auto",children:["Nos solutions immobili\xe8res et de financement logement sont en cours de d\xe9veloppement.",(0,Ks.jsx)("br",{}),(0,Ks.jsx)("span",{className:"text-blue-600 font-medium",children:"Revenez bient\xf4t !"})]}),(0,Ks.jsx)(ep.button,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.6},onClick:()=>e("/menu"),className:"bg-gradient-to-r from-blue-500 to-indigo-600 text-white px-8 py-4 rounded-2xl shadow-xl hover:shadow-2xl transition-all duration-300 hover:scale-105",children:"Retour au menu principal"})]})]})})]})})},Sx=en("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),kx=en("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]),_x=e=>{let{planConfig:r}=e;const s=(0,t.useRef)(null),{user:n}=(Y(),Zs());(0,t.useEffect)(()=>{const e=document.createElement("script");return e.src="https://cdn.fedapay.com/checkout.js?v=1.1.7",e.async=!0,e.onload=()=>{console.log("[FedaPay] \u2705 Script charg\xe9")},e.onerror=()=>{console.error("[FedaPay] \u274c Erreur chargement script")},document.body.appendChild(e),()=>document.body.removeChild(e)},[]);const a=()=>{console.log("[FedaPay] \ud83d\udd0d D\xe9marrage du polling pour d\xe9tecter la cr\xe9ation du plan...");let e=0;const t=async()=>{try{e++,console.log("[FedaPay] \ud83d\udd0d Tentative ".concat(e,"/").concat(60," - V\xe9rification du plan..."));const r=await fetch("http://localhost:5000/api/savings/plan-status?userId=".concat(null===n||void 0===n?void 0:n.id)),s=await r.json();if(s.success&&s.plan)return console.log("[FedaPay] \u2705 Plan trouv\xe9 ! Redirection vers RetourEpargne..."),void(window.location.href="/ab-epargne/retour?planId=".concat(s.plan.id,"&status=approved"));if(e>=60)return console.log("[FedaPay] \u23f0 Timeout - Aucun plan trouv\xe9 apr\xe8s 2 minutes"),void alert("Le plan n'a pas \xe9t\xe9 cr\xe9\xe9 dans les temps. Veuillez r\xe9essayer.");setTimeout(t,2e3)}catch(r){if(console.error("[FedaPay] \u274c Erreur lors du polling:",r),e++,e>=60)return void alert("Erreur de connexion. Veuillez r\xe9essayer.");setTimeout(t,2e3)}};setTimeout(t,5e3)};return(0,Ks.jsx)("button",{ref:s,onClick:()=>{window.FedaPay?(console.log("[FedaPay] \ud83d\ude80 Initialisation du paiement..."),a(),window.FedaPay.init(s.current,{public_key:"pk_live_u0sqkP5Irt1BvqvnU5gh4FOC",transaction:{amount:1e3,description:"Cr\xe9ation plan \xe9pargne - ".concat(null===n||void 0===n?void 0:n.email),currency:{iso:"XOF"},callback_url:"".concat(window.location.origin,"/ab-epargne/retour"),custom_metadata:{paymentType:"savings_plan_creation",user_id:null===n||void 0===n?void 0:n.id,fixed_amount:r.montant,frequency_days:r.frequence,duration_months:r.nombreMois}},customer:{email:null===n||void 0===n?void 0:n.email,firstname:(null===n||void 0===n?void 0:n.first_name)||"Client",lastname:(null===n||void 0===n?void 0:n.last_name)||"Campus",phone_number:{number:(null===n||void 0===n?void 0:n.phone)||"97000000",country:"BJ"}},modal:!0})):alert("FedaPay n'est pas encore charg\xe9 !")},className:"w-full bg-gradient-to-r from-blue-500 to-indigo-600 text-white py-4 rounded-xl font-semibold",children:"Payer 1000 F"})},Ex=()=>{const e=Y(),{user:r}=Zs(),[s,n]=(0,t.useState)("config"),[a,i]=(0,t.useState)({montant:500,frequence:"5",nombreMois:6}),[o,l]=(0,t.useState)(!1),[c,d]=(0,t.useState)(!0);(0,t.useEffect)(()=>{(()=>{const t=new URLSearchParams(window.location.search),r=t.get("reference"),s=t.get("status");if(r&&"approved"===s)console.log("[AB_EPARGNE] \ud83d\udd04 Paiement d\xe9tect\xe9, redirection vers RetourEpargne"),window.history.replaceState({},document.title,window.location.pathname),e("/ab-epargne/retour?reference=".concat(r,"&status=approved"))})()},[e]);const u=()=>{l(!0)},m=()=>{e("/dashboard")};(0,t.useEffect)(()=>{(async()=>{if(!r)return console.log("[AB_EPARGNE] \u23f3 Pas d'utilisateur connect\xe9"),void d(!1);try{d(!0),console.log("[AB_EPARGNE] \ud83d\udd0d Recherche du plan actif pour user:",r.id);const t="".concat(Fs,"/api/savings/plan-status?userId=").concat(r.id);console.log("[AB_EPARGNE] \ud83c\udf10 URL API:",t);const s=await fetch(t);console.log("[AB_EPARGNE] \ud83d\udce1 Status r\xe9ponse:",s.status);const n=await s.json();if(console.log("[AB_EPARGNE] \ud83d\udce1 R\xe9ponse API compl\xe8te:",n),n.success&&n.plan)return console.log("[AB_EPARGNE] \u2705 Plan actif trouv\xe9, redirection vers la page de d\xe9tail:",n.plan),void e("/ab-epargne/plan/".concat(n.plan.id));console.log("[AB_EPARGNE] \u2139\ufe0f Aucun plan actif trouv\xe9, affichage de la config")}catch(t){console.error("[AB_EPARGNE] \u274c Erreur:",t)}finally{d(!1)}})()},[r,e]);const h=()=>(0,Ks.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-4",children:[(0,Ks.jsxs)("div",{className:"flex items-center mb-8 pt-4",children:[(0,Ks.jsx)("button",{onClick:m,className:"flex items-center",children:(0,Ks.jsx)(Sx,{className:"w-6 h-6 text-gray-600"})}),(0,Ks.jsx)("h1",{className:"text-xl font-semibold text-gray-800 ml-4",children:"Configuration du Plan"})]}),(0,Ks.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-6 mx-auto max-w-md",children:[(0,Ks.jsxs)("div",{className:"text-center mb-8",children:[(0,Ks.jsx)("div",{className:"w-16 h-16 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,Ks.jsx)(_p,{className:"w-8 h-8 text-white"})}),(0,Ks.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"AB \xc9pargne"}),(0,Ks.jsx)("p",{className:"text-gray-600",children:"Configurez votre plan d'\xe9pargne"})]}),(0,Ks.jsxs)("div",{className:"mb-6",children:[(0,Ks.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Montant \xe0 d\xe9poser (minimum 500 F)"}),(0,Ks.jsxs)("div",{className:"flex items-center bg-gray-50 rounded-xl p-4",children:[(0,Ks.jsx)("button",{onClick:()=>i(ze(ze({},a),{},{montant:Math.max(500,a.montant-100)})),className:"w-10 h-10 bg-white rounded-full shadow flex items-center justify-center",children:(0,Ks.jsx)(kx,{className:"w-4 h-4 text-gray-600"})}),(0,Ks.jsxs)("div",{className:"flex-1 text-center",children:[(0,Ks.jsx)("input",{type:"number",min:"500",step:"100",value:a.montant,onChange:e=>{const t=parseInt(e.target.value)||500;i(ze(ze({},a),{},{montant:Math.max(500,t)}))},onFocus:e=>{e.target.select()},onClick:e=>{e.target.select()},className:"w-full text-2xl font-bold text-gray-800 text-center bg-transparent border-none outline-none focus:outline-none cursor-pointer",style:{width:"".concat(Math.max(a.montant.toString().length+2,6),"ch")},placeholder:"500"}),(0,Ks.jsx)("span",{className:"text-gray-600 ml-1",children:"F"})]}),(0,Ks.jsx)("button",{onClick:()=>i(ze(ze({},a),{},{montant:a.montant+100})),className:"w-10 h-10 bg-white rounded-full shadow flex items-center justify-center",children:(0,Ks.jsx)(If,{className:"w-4 h-4 text-gray-600"})})]})]}),(0,Ks.jsxs)("div",{className:"mb-6",children:[(0,Ks.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Fr\xe9quence de d\xe9p\xf4t"}),(0,Ks.jsxs)("div",{className:"flex gap-3",children:[(0,Ks.jsx)("button",{onClick:()=>i(ze(ze({},a),{},{frequence:"5"})),className:"flex-1 py-3 px-4 rounded-xl font-medium ".concat("5"===a.frequence?"bg-gradient-to-r from-blue-500 to-indigo-600 text-white shadow-md":"bg-gray-50 text-gray-700"),children:"Tous les 5 jours"}),(0,Ks.jsx)("button",{onClick:()=>i(ze(ze({},a),{},{frequence:"10"})),className:"flex-1 py-3 px-4 rounded-xl font-medium ".concat("10"===a.frequence?"bg-gradient-to-r from-blue-500 to-indigo-600 text-white shadow-md":"bg-gray-50 text-gray-700"),children:"Tous les 10 jours"})]})]}),(0,Ks.jsxs)("div",{className:"mb-8",children:[(0,Ks.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Dur\xe9e (mois)"}),(0,Ks.jsxs)("div",{className:"flex items-center bg-gray-50 rounded-xl p-4",children:[(0,Ks.jsx)("button",{onClick:()=>i(ze(ze({},a),{},{nombreMois:Math.max(1,a.nombreMois-1)})),className:"w-10 h-10 bg-white rounded-full shadow flex items-center justify-center",children:(0,Ks.jsx)(kx,{className:"w-4 h-4 text-gray-600"})}),(0,Ks.jsxs)("div",{className:"flex-1 text-center",children:[(0,Ks.jsx)("span",{className:"text-2xl font-bold text-gray-800",children:a.nombreMois}),(0,Ks.jsx)("span",{className:"text-gray-600 ml-1",children:"mois"})]}),(0,Ks.jsx)("button",{onClick:()=>i(ze(ze({},a),{},{nombreMois:a.nombreMois+1})),className:"w-10 h-10 bg-white rounded-full shadow flex items-center justify-center",children:(0,Ks.jsx)(If,{className:"w-4 h-4 text-gray-600"})})]})]}),(0,Ks.jsxs)("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl p-4 mb-6",children:[(0,Ks.jsx)("h3",{className:"font-semibold text-gray-800 mb-2",children:"R\xe9sum\xe9 de votre plan"}),(0,Ks.jsxs)("div",{className:"text-sm text-gray-600 space-y-1",children:[(0,Ks.jsxs)("p",{children:["\u2022 D\xe9p\xf4t : ",a.montant.toLocaleString()," F tous les ",a.frequence," jours"]}),(0,Ks.jsxs)("p",{children:["\u2022 Dur\xe9e : ",a.nombreMois," mois"]}),(0,Ks.jsx)("p",{children:"\u2022 Taux d'int\xe9r\xeats : 5% par mois"}),(0,Ks.jsxs)("p",{children:["\u2022 Total d\xe9pos\xe9 : ",(a.montant*(30/parseInt(a.frequence))*a.nombreMois).toLocaleString()," F"]}),(0,Ks.jsxs)("p",{children:["\u2022 Int\xe9r\xeats estim\xe9s : ",Math.round(a.montant*(30/parseInt(a.frequence))*a.nombreMois*.05*a.nombreMois).toLocaleString()," F"]}),(0,Ks.jsxs)("p",{className:"font-semibold text-blue-600",children:["\u2022 Total avec int\xe9r\xeats : ",Math.round(a.montant*(30/parseInt(a.frequence))*a.nombreMois*(1+.05*a.nombreMois)).toLocaleString()," F"]})]})]}),(0,Ks.jsx)("button",{onClick:u,className:"w-full bg-gradient-to-r from-blue-500 to-indigo-600 text-white py-4 rounded-xl font-semibold shadow-lg hover:shadow-xl transition-all",children:"Continuer"})]}),o&&(0,Ks.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,Ks.jsxs)("div",{className:"bg-white rounded-2xl p-6 max-w-sm w-full",children:[(0,Ks.jsxs)("div",{className:"text-center mb-6",children:[(0,Ks.jsx)(yp,{className:"w-12 h-12 text-blue-500 mx-auto mb-3"}),(0,Ks.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Paiement requis"}),(0,Ks.jsx)("p",{className:"text-gray-600 text-sm",children:"Frais de cr\xe9ation du plan d'\xe9pargne"})]}),(0,Ks.jsx)("div",{className:"bg-gray-50 rounded-xl p-4 mb-6 text-center",children:(0,Ks.jsx)("span",{className:"text-2xl font-bold text-gray-800",children:"1 000 F"})}),(0,Ks.jsxs)("div",{className:"flex gap-3",children:[(0,Ks.jsx)("button",{onClick:()=>l(!1),className:"flex-1 py-3 text-gray-600 font-medium",children:"Annuler"}),(0,Ks.jsx)("div",{className:"flex-1",children:(0,Ks.jsx)(_x,{planConfig:a})})]})]})})]}),p=()=>(0,Ks.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-4",children:[(0,Ks.jsx)("div",{className:"flex items-center justify-between mb-8 pt-4",children:(0,Ks.jsxs)("div",{className:"flex items-center",children:[(0,Ks.jsx)("button",{onClick:m,className:"flex items-center",children:(0,Ks.jsx)(Sx,{className:"w-6 h-6 text-gray-600"})}),(0,Ks.jsx)("h1",{className:"text-xl font-semibold text-gray-800 ml-4",children:"Mon Plan d'\xc9pargne"})]})}),(0,Ks.jsxs)("div",{className:"bg-gradient-to-r from-blue-500 to-indigo-600 rounded-2xl p-6 mb-6 text-white shadow-xl",children:[(0,Ks.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("p",{className:"text-blue-100 text-sm",children:"Solde disponible"}),(0,Ks.jsx)("p",{className:"text-3xl font-bold",children:"0 F"})]}),(0,Ks.jsx)("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center",children:(0,Ks.jsx)(_p,{className:"w-6 h-6"})})]}),(0,Ks.jsxs)("div",{className:"flex justify-between text-sm text-blue-100",children:[(0,Ks.jsx)("span",{children:"Plan actif depuis aujourd'hui"}),(0,Ks.jsxs)("span",{children:["Prochain d\xe9p\xf4t : ",a.frequence," jours"]})]})]}),(0,Ks.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[(0,Ks.jsxs)("div",{className:"bg-white rounded-xl p-4 shadow-md",children:[(0,Ks.jsx)("p",{className:"text-gray-600 text-sm",children:"D\xe9p\xf4t pr\xe9vu"}),(0,Ks.jsxs)("p",{className:"text-lg font-bold text-gray-800",children:[a.montant.toLocaleString()," F"]})]}),(0,Ks.jsxs)("div",{className:"bg-white rounded-xl p-4 shadow-md",children:[(0,Ks.jsx)("p",{className:"text-gray-600 text-sm",children:"Dur\xe9e restante"}),(0,Ks.jsxs)("p",{className:"text-lg font-bold text-gray-800",children:[a.nombreMois," mois"]})]})]}),(0,Ks.jsxs)("div",{className:"space-y-4",children:[(0,Ks.jsxs)("button",{className:"w-full bg-gradient-to-r from-green-500 to-green-600 text-white py-4 rounded-xl font-semibold shadow-lg flex items-center justify-center",children:[(0,Ks.jsx)(If,{className:"w-5 h-5 mr-2"}),"Effectuer un D\xe9p\xf4t"]}),(0,Ks.jsxs)("button",{className:"w-full bg-gradient-to-r from-orange-500 to-orange-600 text-white py-4 rounded-xl font-semibold shadow-lg flex items-center justify-center",children:[(0,Ks.jsx)(kx,{className:"w-5 h-5 mr-2"}),"Effectuer un Retrait"]})]}),(0,Ks.jsxs)("div",{className:"bg-white rounded-xl p-6 mt-6 shadow-md",children:[(0,Ks.jsx)("h3",{className:"font-semibold text-gray-800 mb-4",children:"D\xe9tails du plan"}),(0,Ks.jsxs)("div",{className:"space-y-3 text-sm",children:[(0,Ks.jsxs)("div",{className:"flex justify-between",children:[(0,Ks.jsx)("span",{className:"text-gray-600",children:"Montant par d\xe9p\xf4t"}),(0,Ks.jsxs)("span",{className:"font-medium",children:[a.montant.toLocaleString()," F"]})]}),(0,Ks.jsxs)("div",{className:"flex justify-between",children:[(0,Ks.jsx)("span",{className:"text-gray-600",children:"Fr\xe9quence"}),(0,Ks.jsxs)("span",{className:"font-medium",children:["Tous les ",a.frequence," jours"]})]}),(0,Ks.jsxs)("div",{className:"flex justify-between",children:[(0,Ks.jsx)("span",{className:"text-gray-600",children:"Dur\xe9e totale"}),(0,Ks.jsxs)("span",{className:"font-medium",children:[a.nombreMois," mois"]})]}),(0,Ks.jsxs)("div",{className:"flex justify-between",children:[(0,Ks.jsx)("span",{className:"text-gray-600",children:"Taux d'int\xe9r\xeats"}),(0,Ks.jsx)("span",{className:"font-medium text-green-600",children:"5% par mois"})]}),(0,Ks.jsxs)("div",{className:"flex justify-between",children:[(0,Ks.jsx)("span",{className:"text-gray-600",children:"Total d\xe9pos\xe9"}),(0,Ks.jsxs)("span",{className:"font-medium",children:[(a.montant*(30/parseInt(a.frequence))*a.nombreMois).toLocaleString()," F"]})]}),(0,Ks.jsxs)("div",{className:"flex justify-between",children:[(0,Ks.jsx)("span",{className:"text-gray-600",children:"Int\xe9r\xeats estim\xe9s"}),(0,Ks.jsxs)("span",{className:"font-medium text-green-600",children:[Math.round(a.montant*(30/parseInt(a.frequence))*a.nombreMois*.05*a.nombreMois).toLocaleString()," F"]})]}),(0,Ks.jsxs)("div",{className:"border-t pt-3 flex justify-between",children:[(0,Ks.jsx)("span",{className:"text-gray-600",children:"Objectif d'\xe9pargne"}),(0,Ks.jsxs)("span",{className:"font-semibold text-blue-600",children:[Math.round(a.montant*(30/parseInt(a.frequence))*a.nombreMois*(1+.05*a.nombreMois)).toLocaleString()," F"]})]})]})]})]});return c?(0,Ks.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,Ks.jsxs)("div",{className:"text-center",children:[(0,Ks.jsx)("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,Ks.jsx)("p",{className:"text-gray-600",children:"Chargement de votre plan..."})]})}):(0,Ks.jsx)("div",{className:"max-w-sm mx-auto bg-white min-h-screen",children:"config"===s?(0,Ks.jsx)(h,{}):(0,Ks.jsx)(p,{})})},Cx=()=>{const e=Y(),r=$(),{user:s}=Zs(),[n,a]=(0,t.useState)("loading"),[i,o]=(0,t.useState)(null),[l,c]=(0,t.useState)(null),[d,u]=(0,t.useState)(0),[m,h]=(0,t.useState)(0),p=Fs;(0,t.useEffect)(()=>{const t=async()=>{try{const n=new URLSearchParams(r.search),i=n.get("planId"),l=n.get("reference"),m=n.get("status");if(!i&&!l||"approved"!==m)return c("Paiement non confirm\xe9"),void a("error");let f;console.log("[RETOUR_EPARGNE] \ud83d\udd0d Polling pour planId:",i,"ou reference:",l),f=i?"".concat(p,"/api/savings/plan-status?planId=").concat(i):l&&l.startsWith("temp_")?"".concat(p,"/api/savings/plan-status?userId=").concat(null===s||void 0===s?void 0:s.id):"".concat(p,"/api/savings/plan-status?reference=").concat(l);const x=await fetch(f),g=await x.json();if(console.log("[RETOUR_EPARGNE] \ud83d\udce1 R\xe9ponse API:",g),g.success&&g.plan)console.log("[RETOUR_EPARGNE] \u2705 Plan trouv\xe9, redirection vers:","/ab-epargne/plan/".concat(g.plan.id)),o(g.plan),a("success"),setTimeout(()=>{console.log("[RETOUR_EPARGNE] \ud83d\ude80 Redirection vers PlanEpargne..."),e("/ab-epargne/plan/".concat(g.plan.id))},2e3);else{const e=d+1;if(console.log("[RETOUR_EPARGNE] \u23f3 Plan pas encore cr\xe9\xe9, tentative:",e),u(e),h(Math.min(e/30*100,100)),e>=30)return c("Le plan n'a pas \xe9t\xe9 cr\xe9\xe9 dans les temps. Veuillez contacter le support."),void a("error");setTimeout(t,1e4)}}catch(l){if(console.error("[RETOUR_EPARGNE] \u274c Erreur lors du polling:",l),u(e=>e+1),d>=30)return c("Erreur de connexion persistante. Veuillez contacter le support."),void a("error");setTimeout(t,1e4)}};t()},[r.search,e]);const f=()=>{a("loading"),c(null),u(0),window.location.reload()},x=()=>{e("/dashboard")};return"loading"===n?(0,Ks.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:(0,Ks.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8 max-w-md w-full text-center",children:[(0,Ks.jsxs)("div",{className:"mb-6",children:[(0,Ks.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 bg-green-100 rounded-full flex items-center justify-center",children:(0,Ks.jsxs)("svg",{className:"w-8 h-8 text-green-600 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[(0,Ks.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,Ks.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}),(0,Ks.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Paiement confirm\xe9 !"}),(0,Ks.jsx)("p",{className:"text-gray-600 mb-4",children:"Cr\xe9ation de votre plan d'\xe9pargne en cours..."}),(0,Ks.jsxs)("div",{className:"text-sm text-gray-500",children:["Tentative ",d+1,"/30 \u2022 ",Math.round(m),"% compl\xe9t\xe9"]})]}),(0,Ks.jsxs)("div",{className:"space-y-2",children:[(0,Ks.jsx)("div",{className:"h-3 bg-gray-200 rounded-full overflow-hidden",children:(0,Ks.jsx)("div",{className:"h-full bg-gradient-to-r from-green-500 to-blue-500 rounded-full transition-all duration-500 ease-out",style:{width:"".concat(m,"%")}})}),(0,Ks.jsx)("div",{className:"text-xs text-gray-400 text-center",children:"V\xe9rification de la cr\xe9ation du plan..."}),(0,Ks.jsx)("p",{className:"text-xs text-gray-500",children:"Veuillez patienter, cela ne prendra que quelques instants..."})]})]})}):"error"===n?(0,Ks.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:(0,Ks.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8 max-w-md w-full text-center",children:[(0,Ks.jsxs)("div",{className:"mb-6",children:[(0,Ks.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 bg-red-100 rounded-full flex items-center justify-center",children:(0,Ks.jsx)("svg",{className:"w-8 h-8 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Ks.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),(0,Ks.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Erreur de cr\xe9ation"}),(0,Ks.jsx)("p",{className:"text-gray-600 mb-4",children:l||"Une erreur est survenue lors de la cr\xe9ation de votre plan."})]}),(0,Ks.jsxs)("div",{className:"space-y-3",children:[(0,Ks.jsx)("button",{onClick:f,className:"w-full bg-blue-600 text-white py-3 px-4 rounded-lg font-medium hover:bg-blue-700 transition-colors",children:"R\xe9essayer"}),(0,Ks.jsx)("button",{onClick:x,className:"w-full bg-gray-200 text-gray-800 py-3 px-4 rounded-lg font-medium hover:bg-gray-300 transition-colors",children:"Retour au tableau de bord"})]})]})}):"success"===n&&i?(0,Ks.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:(0,Ks.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8 max-w-md w-full text-center",children:[(0,Ks.jsxs)("div",{className:"mb-6",children:[(0,Ks.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 bg-green-100 rounded-full flex items-center justify-center",children:(0,Ks.jsx)("svg",{className:"w-8 h-8 text-green-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Ks.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),(0,Ks.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Plan cr\xe9\xe9 avec succ\xe8s !"}),(0,Ks.jsx)("p",{className:"text-gray-600 mb-4",children:"Votre plan d'\xe9pargne est maintenant actif."})]}),(0,Ks.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 mb-6 text-left",children:[(0,Ks.jsx)("h3",{className:"font-semibold text-gray-900 mb-2",children:"D\xe9tails du plan :"}),(0,Ks.jsxs)("div",{className:"space-y-1 text-sm text-gray-600",children:[(0,Ks.jsxs)("div",{className:"flex justify-between",children:[(0,Ks.jsx)("span",{children:"Montant par d\xe9p\xf4t :"}),(0,Ks.jsxs)("span",{className:"font-medium",children:[null===(g=i.fixed_amount)||void 0===g?void 0:g.toLocaleString()," F"]})]}),(0,Ks.jsxs)("div",{className:"flex justify-between",children:[(0,Ks.jsx)("span",{children:"Objectif total :"}),(0,Ks.jsxs)("span",{className:"font-medium",children:[null===(v=i.total_amount_target)||void 0===v?void 0:v.toLocaleString()," F"]})]}),(0,Ks.jsxs)("div",{className:"flex justify-between",children:[(0,Ks.jsx)("span",{children:"Statut :"}),(0,Ks.jsx)("span",{className:"font-medium text-green-600 capitalize",children:i.status})]}),(0,Ks.jsxs)("div",{className:"flex justify-between",children:[(0,Ks.jsx)("span",{children:"Progression :"}),(0,Ks.jsxs)("span",{className:"font-medium",children:[i.completion_percentage||0,"%"]})]})]})]}),(0,Ks.jsx)("div",{className:"text-sm text-gray-500 mb-4",children:"Redirection automatique vers votre plan..."}),(0,Ks.jsx)("button",{onClick:()=>e("/ab-epargne/plan/".concat(i.id)),className:"w-full bg-green-600 text-white py-3 px-4 rounded-lg font-medium hover:bg-green-700 transition-colors",children:"Voir mon plan maintenant"})]})}):null;var g,v},Px=e=>{let{plan:r,onSuccess:s}=e;const n=(0,t.useRef)(null),a=(0,t.useRef)(null),{user:i}=Zs(),[o,l]=(0,t.useState)(!1);(0,t.useEffect)(()=>{const e=document.createElement("script");return e.src="https://cdn.fedapay.com/checkout.js?v=1.1.7",e.async=!0,e.onload=()=>{console.log("[FedaPay] \u2705 Script charg\xe9 pour d\xe9p\xf4t")},e.onerror=()=>{console.error("[FedaPay] \u274c Erreur chargement script")},document.body.appendChild(e),()=>{document.body.contains(e)&&document.body.removeChild(e)}},[]);return(0,Ks.jsxs)(Ks.Fragment,{children:[(0,Ks.jsx)("button",{ref:a,style:{display:"none"},onClick:()=>{}}),(0,Ks.jsx)("button",{ref:n,onClick:async()=>{if(window.FedaPay)if(i&&r){l(!0);try{const e=Fs,t=await fetch("".concat(e,"/api/create-savings-deposit"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:i.id,plan_id:r.id,amount:r.fixed_amount})}),s=await t.json();console.log("[FedaPay] R\xe9ponse backend:",s),s.success&&s.transactionUrl?window.location.href=s.transactionUrl:(alert("Erreur de connexion. Veuillez r\xe9essayer."),l(!1))}catch(e){console.error("[FedaPay] \u274c Erreur:",e),alert("Erreur de connexion. Veuillez r\xe9essayer."),l(!1)}}else alert("Informations utilisateur ou plan manquantes");else alert("FedaPay n'est pas encore charg\xe9 !")},disabled:o,className:"w-full bg-gradient-to-r from-green-500 to-green-600 text-white py-4 rounded-xl font-semibold shadow-lg flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed",children:o?(0,Ks.jsxs)(Ks.Fragment,{children:[(0,Ks.jsx)("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Traitement..."]}):(0,Ks.jsxs)(Ks.Fragment,{children:[(0,Ks.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Ks.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Effectuer un D\xe9p\xf4t"]})})]})},Ax=e=>{let{plan:r,onClose:s,onSuccess:n}=e;const[a,i]=(0,t.useState)(1),[o,l]=(0,t.useState)(!1),[c,d]=(0,t.useState)(""),[u,m]=(0,t.useState)({phoneNumber:"",recipientName:""}),h=e=>{m(ze(ze({},u),{},{[e.target.name]:e.target.value})),d("")};return(0,Ks.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:(0,Ks.jsxs)("div",{className:"bg-white rounded-3xl shadow-2xl max-w-md w-full overflow-hidden",children:[(0,Ks.jsxs)("div",{className:"bg-gradient-to-r from-green-500 to-emerald-600 text-white p-6",children:[(0,Ks.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,Ks.jsx)("h3",{className:"text-2xl font-bold",children:"Demande de retrait"}),(0,Ks.jsx)("button",{onClick:s,className:"p-2 hover:bg-white/20 rounded-full transition-colors",children:(0,Ks.jsx)(nn,{size:24})})]}),(0,Ks.jsx)("p",{className:"text-green-100 text-sm",children:1===a?"\xc9tape 1/2 : Informations de transfert":"\xc9tape 2/2 : Confirmation"})]}),(0,Ks.jsx)("div",{className:"p-6",children:1===a?(0,Ks.jsxs)("div",{className:"space-y-6",children:[(0,Ks.jsxs)("div",{className:"bg-green-50 rounded-2xl p-4 border border-green-200",children:[(0,Ks.jsx)("p",{className:"text-sm text-green-800 mb-2",children:"Montant disponible"}),(0,Ks.jsx)("p",{className:"text-3xl font-bold text-green-600",children:pf(r.current_balance)})]}),(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:(0,Ks.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Ks.jsx)(yp,{size:18}),"Num\xe9ro de t\xe9l\xe9phone Mobile Money"]})}),(0,Ks.jsx)("input",{type:"tel",name:"phoneNumber",value:u.phoneNumber,onChange:h,placeholder:"+229 XX XX XX XX",className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all"}),(0,Ks.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Le num\xe9ro qui recevra le transfert"})]}),(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:(0,Ks.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Ks.jsx)(Za,{size:18}),"Nom sur le num\xe9ro"]})}),(0,Ks.jsx)("input",{type:"text",name:"recipientName",value:u.recipientName,onChange:h,placeholder:"Nom complet du b\xe9n\xe9ficiaire",className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all"}),(0,Ks.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Le nom associ\xe9 au num\xe9ro Mobile Money"})]}),c&&(0,Ks.jsx)("div",{className:"bg-red-50 border-l-4 border-red-500 rounded-lg p-4",children:(0,Ks.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Ks.jsx)(rn,{size:20,className:"text-red-600"}),(0,Ks.jsx)("p",{className:"text-sm text-red-800",children:c})]})}),(0,Ks.jsx)("button",{onClick:()=>{if(!u.phoneNumber||!u.recipientName)return void d("Veuillez remplir tous les champs");/^[\d\s\+\-\(\)]+$/.test(u.phoneNumber)?i(2):d("Num\xe9ro de t\xe9l\xe9phone invalide")},className:"w-full py-3 bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white font-semibold rounded-xl transition-all duration-200 shadow-lg hover:shadow-xl",children:"Suivant"})]}):(0,Ks.jsxs)("div",{className:"space-y-6",children:[(0,Ks.jsxs)("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 rounded-2xl p-6 border-2 border-green-200",children:[(0,Ks.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,Ks.jsx)("div",{className:"p-3 bg-green-500 rounded-xl",children:(0,Ks.jsx)(tn,{size:24,className:"text-white"})}),(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("h4",{className:"font-bold text-gray-900",children:"R\xe9capitulatif"}),(0,Ks.jsx)("p",{className:"text-sm text-gray-600",children:"V\xe9rifiez les informations"})]})]}),(0,Ks.jsxs)("div",{className:"space-y-3",children:[(0,Ks.jsxs)("div",{className:"flex justify-between items-center py-2 border-b border-green-200",children:[(0,Ks.jsx)("span",{className:"text-sm text-gray-600",children:"Montant"}),(0,Ks.jsx)("span",{className:"text-lg font-bold text-green-600",children:pf(r.current_balance)})]}),(0,Ks.jsxs)("div",{className:"flex justify-between items-center py-2 border-b border-green-200",children:[(0,Ks.jsx)("span",{className:"text-sm text-gray-600",children:"Num\xe9ro"}),(0,Ks.jsx)("span",{className:"font-semibold text-gray-900",children:u.phoneNumber})]}),(0,Ks.jsxs)("div",{className:"flex justify-between items-center py-2",children:[(0,Ks.jsx)("span",{className:"text-sm text-gray-600",children:"B\xe9n\xe9ficiaire"}),(0,Ks.jsx)("span",{className:"font-semibold text-gray-900",children:u.recipientName})]})]})]}),(0,Ks.jsx)("div",{className:"bg-blue-50 rounded-xl p-4 border border-blue-200",children:(0,Ks.jsx)("p",{className:"text-sm text-blue-800",children:"\u2139\ufe0f Votre demande sera trait\xe9e par un administrateur. Vous recevrez une notification une fois le transfert effectu\xe9."})}),c&&(0,Ks.jsx)("div",{className:"bg-red-50 border-l-4 border-red-500 rounded-lg p-4",children:(0,Ks.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Ks.jsx)(rn,{size:20,className:"text-red-600"}),(0,Ks.jsx)("p",{className:"text-sm text-red-800",children:c})]})}),(0,Ks.jsxs)("div",{className:"flex gap-3",children:[(0,Ks.jsx)("button",{onClick:()=>i(1),disabled:o,className:"flex-1 py-3 bg-gray-100 hover:bg-gray-200 text-gray-700 font-semibold rounded-xl transition-all duration-200 disabled:opacity-50",children:"Retour"}),(0,Ks.jsx)("button",{onClick:async()=>{try{l(!0),d(""),console.log("[WITHDRAWAL] Cr\xe9ation de la demande de retrait...");const{data:c,error:m}=await Ms.from("withdrawal_requests").insert([{user_id:r.user_id,savings_plan_id:r.id,amount:r.current_balance,phone_number:u.phoneNumber,recipient_name:u.recipientName,status:"pending"}]).select().single();if(m)throw console.error("[WITHDRAWAL] Erreur cr\xe9ation demande:",m),new Error("Erreur lors de la cr\xe9ation de la demande");console.log("[WITHDRAWAL] Demande cr\xe9\xe9e:",c);const{error:h}=await Ms.from("savings_plans").update({status:"withdrawal_pending",updated_at:(new Date).toISOString()}).eq("id",r.id);h&&console.error("[WITHDRAWAL] Erreur mise \xe0 jour plan:",h);const{data:p}=await Ms.from("users").select("id").eq("role","admin").single();if(p){var e,t;await Ms.from("notifications").insert([{user_id:p.id,title:"Nouvelle demande de retrait",message:"".concat(null===(e=r.user)||void 0===e?void 0:e.first_name," ").concat(null===(t=r.user)||void 0===t?void 0:t.last_name," demande un retrait de ").concat(pf(r.current_balance)),type:"withdrawal_request",data:{withdrawal_id:c.id,plan_id:r.id,user_id:r.user_id,amount:r.current_balance}}]);try{var a,i;const e="http://localhost:5000",t=await fetch("".concat(e,"/api/notify-admin-withdrawal"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({withdrawalId:c.id,clientName:"".concat(null===(a=r.user)||void 0===a?void 0:a.first_name," ").concat(null===(i=r.user)||void 0===i?void 0:i.last_name),amount:r.current_balance,userId:r.user_id})});t.ok?console.log("[WITHDRAWAL] \u2705 Notification push envoy\xe9e \xe0 l'admin"):console.error("[WITHDRAWAL] \u26a0\ufe0f Erreur notification push:",await t.text())}catch(o){console.error("[WITHDRAWAL] \u26a0\ufe0f Erreur envoi notification push:",o)}}console.log("[WITHDRAWAL] \u2705 Demande de retrait envoy\xe9e avec succ\xe8s"),n&&n("Demande de retrait envoy\xe9e avec succ\xe8s !"),s()}catch(c){console.error("[WITHDRAWAL] Erreur:",c),d(c.message||"Erreur lors de l'envoi de la demande")}finally{l(!1)}},disabled:o,className:"flex-1 py-3 bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white font-semibold rounded-xl transition-all duration-200 shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed",children:o?(0,Ks.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,Ks.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-white border-t-transparent"}),(0,Ks.jsx)("span",{children:"Envoi..."})]}):"Confirmer le retrait"})]})]})})]})})},Tx=()=>{var e,r,s,n;const{id:a}=X(),i=Y(),{user:o}=Zs(),[l,c]=(0,t.useState)(null),[d,u]=(0,t.useState)(!0),[m,h]=(0,t.useState)(null),[p,f]=(0,t.useState)(!1);if((0,t.useEffect)(()=>{o&&a&&(async()=>{try{u(!0);const e=Fs,t=await fetch("".concat(e,"/api/savings/plan-status?planId=").concat(a)),r=await t.json();if(!r.success)return console.error("[PLAN_EPARGNE] \u274c Erreur r\xe9cup\xe9ration plan:",r.error),void h("Plan non trouv\xe9 ou acc\xe8s refus\xe9");c(r.plan)}catch(m){console.error("[PLAN_EPARGNE] \u274c Erreur:",m),h("Erreur de chargement du plan")}finally{u(!1)}})()},[o,a]),d)return(0,Ks.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,Ks.jsxs)("div",{className:"text-center",children:[(0,Ks.jsx)("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,Ks.jsx)("p",{className:"text-gray-600",children:"Chargement du plan..."})]})});if(m)return(0,Ks.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:(0,Ks.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-8 max-w-md w-full text-center",children:[(0,Ks.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 bg-red-100 rounded-full flex items-center justify-center",children:(0,Ks.jsx)("svg",{className:"w-8 h-8 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Ks.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,Ks.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Erreur"}),(0,Ks.jsx)("p",{className:"text-gray-600 mb-6",children:m}),(0,Ks.jsx)("button",{onClick:()=>i("/ab-epargne"),className:"w-full bg-blue-600 text-white py-3 rounded-xl font-semibold",children:"Retour \xe0 l'\xe9pargne"})]})});if(!l)return(0,Ks.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:(0,Ks.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-8 max-w-md w-full text-center",children:[(0,Ks.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center",children:(0,Ks.jsx)("svg",{className:"w-8 h-8 text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Ks.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),(0,Ks.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Plan non trouv\xe9"}),(0,Ks.jsx)("p",{className:"text-gray-600 mb-6",children:"Ce plan d'\xe9pargne n'existe pas ou vous n'y avez pas acc\xe8s."}),(0,Ks.jsx)("button",{onClick:()=>i("/ab-epargne"),className:"w-full bg-blue-600 text-white py-3 rounded-xl font-semibold",children:"Retour \xe0 l'\xe9pargne"})]})});const x=e=>e?new Date(e).toLocaleDateString("fr-FR",{day:"numeric",month:"long",year:"numeric"}):"N/A",g=()=>{if(!l)return!1;const e="active"===l.status,t=l.current_balance>=l.target_amount,r=!l.is_overdue,s="withdrawal_pending"!==l.status;return e&&t&&r&&s};return(0,Ks.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-4",children:[(0,Ks.jsx)("div",{className:"flex items-center justify-between mb-8 pt-4",children:(0,Ks.jsxs)("div",{className:"flex items-center",children:[(0,Ks.jsx)("button",{onClick:()=>i("/ab-epargne"),className:"flex items-center",children:(0,Ks.jsx)(Sx,{className:"w-6 h-6 text-gray-600"})}),(0,Ks.jsx)("h1",{className:"text-xl font-semibold text-gray-800 ml-4",children:"Mon Plan d'\xc9pargne"})]})}),(0,Ks.jsxs)("div",{className:"bg-gradient-to-r from-blue-500 to-indigo-600 rounded-2xl p-6 mb-6 text-white shadow-xl",children:[(0,Ks.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("p",{className:"text-blue-100 text-sm",children:"Solde disponible"}),(0,Ks.jsxs)("p",{className:"text-3xl font-bold",children:[(l.current_balance||0).toLocaleString()," F"]})]}),(0,Ks.jsx)("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center",children:(0,Ks.jsx)(_p,{className:"w-6 h-6"})})]}),(0,Ks.jsxs)("div",{className:"flex justify-between text-sm text-blue-100",children:[(0,Ks.jsxs)("span",{children:["Plan actif depuis ",x(l.start_date)]}),(0,Ks.jsxs)("span",{children:["Prochain d\xe9p\xf4t : ",x(l.next_deposit_date)]})]})]}),(0,Ks.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[(0,Ks.jsxs)("div",{className:"bg-white rounded-xl p-4 shadow-md",children:[(0,Ks.jsx)("p",{className:"text-gray-600 text-sm",children:"D\xe9p\xf4t pr\xe9vu"}),(0,Ks.jsxs)("p",{className:"text-lg font-bold text-gray-800",children:[null===(e=l.fixed_amount)||void 0===e?void 0:e.toLocaleString()," F"]})]}),(0,Ks.jsxs)("div",{className:"bg-white rounded-xl p-4 shadow-md",children:[(0,Ks.jsx)("p",{className:"text-gray-600 text-sm",children:"Dur\xe9e restante"}),(0,Ks.jsxs)("p",{className:"text-lg font-bold text-gray-800",children:[(()=>{if(!l.end_date)return 0;const e=new Date(l.end_date)-new Date,t=Math.ceil(e/864e5);return Math.max(0,t)})()," jours"]})]})]}),(0,Ks.jsxs)("div",{className:"space-y-4",children:[(0,Ks.jsx)(Px,{plan:l}),(0,Ks.jsxs)("button",{onClick:()=>{g()?f(!0):"withdrawal_pending"===l.status?Da.info("Votre demande de retrait est en cours de traitement"):l.is_overdue?Da.error("Vous ne pouvez pas effectuer de retrait car vous avez des retards de d\xe9p\xf4t"):l.current_balance<l.target_amount?Da.error("Vous devez atteindre votre objectif d'\xe9pargne avant de pouvoir retirer"):Da.error("Retrait non disponible pour ce plan")},disabled:!g(),className:"w-full py-4 rounded-xl font-semibold shadow-lg flex items-center justify-center transition-all duration-200 ".concat(g()?"bg-gradient-to-r from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700 text-white cursor-pointer":"bg-gray-300 text-gray-500 cursor-not-allowed"),children:[(0,Ks.jsx)(kx,{className:"w-5 h-5 mr-2"}),"withdrawal_pending"===l.status?"Retrait en cours...":"Effectuer un Retrait"]}),!g()&&l.current_balance<l.target_amount&&(0,Ks.jsxs)("p",{className:"text-xs text-center text-gray-600",children:["Atteignez votre objectif de ",null===(r=l.target_amount)||void 0===r?void 0:r.toLocaleString()," F pour pouvoir retirer"]})]}),(0,Ks.jsxs)("div",{className:"bg-white rounded-xl p-6 mt-6 shadow-md",children:[(0,Ks.jsx)("h3",{className:"font-semibold text-gray-800 mb-4",children:"D\xe9tails du plan"}),(0,Ks.jsxs)("div",{className:"space-y-3 text-sm",children:[(0,Ks.jsxs)("div",{className:"flex justify-between",children:[(0,Ks.jsx)("span",{className:"text-gray-600",children:"Montant par d\xe9p\xf4t"}),(0,Ks.jsxs)("span",{className:"font-medium",children:[null===(s=l.fixed_amount)||void 0===s?void 0:s.toLocaleString()," F"]})]}),(0,Ks.jsxs)("div",{className:"flex justify-between",children:[(0,Ks.jsx)("span",{className:"text-gray-600",children:"Fr\xe9quence"}),(0,Ks.jsxs)("span",{className:"font-medium",children:["Tous les ",l.frequency_days," jours"]})]}),(0,Ks.jsxs)("div",{className:"flex justify-between",children:[(0,Ks.jsx)("span",{className:"text-gray-600",children:"Dur\xe9e totale"}),(0,Ks.jsxs)("span",{className:"font-medium",children:[l.duration_months," mois"]})]}),(0,Ks.jsxs)("div",{className:"flex justify-between",children:[(0,Ks.jsx)("span",{className:"text-gray-600",children:"Taux d'int\xe9r\xeat"}),(0,Ks.jsxs)("span",{className:"font-medium text-green-600",children:[l.interest_rate||5,"% par mois"]})]}),(0,Ks.jsxs)("div",{className:"flex justify-between",children:[(0,Ks.jsx)("span",{className:"text-gray-600",children:"D\xe9p\xf4ts effectu\xe9s"}),(0,Ks.jsx)("span",{className:"font-medium",children:l.completed_deposits||0})]}),(0,Ks.jsxs)("div",{className:"flex justify-between",children:[(0,Ks.jsx)("span",{className:"text-gray-600",children:"Progression"}),(0,Ks.jsxs)("span",{className:"font-medium text-blue-600",children:[l.completion_percentage||0,"%"]})]}),(0,Ks.jsxs)("div",{className:"border-t pt-3 flex justify-between",children:[(0,Ks.jsx)("span",{className:"text-gray-600",children:"Objectif d'\xe9pargne"}),(0,Ks.jsxs)("span",{className:"font-semibold text-blue-600",children:[null===(n=l.total_amount_target)||void 0===n?void 0:n.toLocaleString()," F"]})]})]})]}),(0,Ks.jsxs)("div",{className:"bg-white rounded-xl p-6 mt-4 shadow-md",children:[(0,Ks.jsx)("h3",{className:"font-semibold text-gray-800 mb-4",children:"Informations importantes"}),(0,Ks.jsxs)("div",{className:"space-y-3 text-sm",children:[(0,Ks.jsxs)("div",{className:"flex justify-between",children:[(0,Ks.jsx)("span",{className:"text-gray-600",children:"Date de d\xe9but"}),(0,Ks.jsx)("span",{className:"font-medium",children:x(l.start_date)})]}),(0,Ks.jsxs)("div",{className:"flex justify-between",children:[(0,Ks.jsx)("span",{className:"text-gray-600",children:"Date de fin pr\xe9vue"}),(0,Ks.jsx)("span",{className:"font-medium",children:x(l.end_date)})]}),(0,Ks.jsxs)("div",{className:"flex justify-between",children:[(0,Ks.jsx)("span",{className:"text-gray-600",children:"Prochain d\xe9p\xf4t"}),(0,Ks.jsx)("span",{className:"font-medium text-blue-600",children:x(l.next_deposit_date)})]}),(0,Ks.jsxs)("div",{className:"flex justify-between",children:[(0,Ks.jsx)("span",{className:"text-gray-600",children:"Total d\xe9pos\xe9"}),(0,Ks.jsxs)("span",{className:"font-medium",children:[(l.total_deposited||0).toLocaleString()," F"]})]})]})]}),p&&(0,Ks.jsx)(Ax,{plan:l,onClose:()=>f(!1),onSuccess:e=>{Da.success(e),f(!1),setTimeout(()=>{window.location.reload()},1500)}})]})},Ix=()=>{const e=$(),r=Y(),[s,n]=(0,t.useState)("loading"),[a,i]=(0,t.useState)("V\xe9rification du d\xe9p\xf4t..."),[o,l]=(0,t.useState)(null);(0,t.useEffect)(()=>{const t=new URLSearchParams(e.search),s=t.get("id")||t.get("reference")||t.get("txId"),a=t.get("status");if(console.log("[DEPOT_RETOUR] Param\xe8tres URL:",{transactionId:s,status:a,allParams:Object.fromEntries(t.entries())}),!s)return n("success"),i("D\xe9p\xf4t confirm\xe9 ! Le solde sera mis \xe0 jour sous peu."),void setTimeout(()=>{r("/ab-epargne")},3e3);"approved"===a||"transferred"===a?c(s):(n("error"),i("D\xe9p\xf4t non approuv\xe9"))},[e.search]);const c=async e=>{try{i("V\xe9rification du d\xe9p\xf4t...");const t="https://ab-pret-back.onrender.com";let s=0;const a=10,o=async()=>{s++,console.log("[DEPOT_RETOUR] Tentative ".concat(s,"/").concat(a," pour r\xe9f\xe9rence: ").concat(e));try{const c=await fetch("".concat(t,"/api/savings/deposit-status?reference=").concat(e)),d=await c.json();if(d.success&&d.plan)return n("success"),i("D\xe9p\xf4t confirm\xe9, solde mis \xe0 jour !"),l(d.plan),void setTimeout(()=>{r("/ab-epargne/plan/".concat(d.plan.id))},3e3);if(s<a)return i("V\xe9rification du d\xe9p\xf4t... (".concat(s,"/").concat(a,")")),void setTimeout(o,2e3);n("success"),i("D\xe9p\xf4t confirm\xe9 ! Le solde sera mis \xe0 jour sous peu."),setTimeout(()=>{r("/ab-epargne")},3e3)}catch(c){console.error("[DEPOT_RETOUR] \u274c Erreur tentative ".concat(s,":"),c),s<a?setTimeout(o,2e3):(n("error"),i("Erreur de connexion"))}};o()}catch(t){console.error("[DEPOT_RETOUR] \u274c Erreur:",t),n("error"),i("Erreur de connexion")}};return(0,Ks.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-green-50 to-emerald-100 flex items-center justify-center p-4",children:(0,Ks.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8 max-w-md w-full text-center",children:["loading"===s&&(0,Ks.jsxs)(Ks.Fragment,{children:[(0,Ks.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 bg-blue-100 rounded-full flex items-center justify-center",children:(0,Ks.jsx)("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"})}),(0,Ks.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"V\xe9rification en cours"}),(0,Ks.jsx)("p",{className:"text-gray-600",children:a})]}),"success"===s&&(0,Ks.jsxs)(Ks.Fragment,{children:[(0,Ks.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 bg-green-100 rounded-full flex items-center justify-center",children:(0,Ks.jsx)(tn,{className:"w-8 h-8 text-green-600"})}),(0,Ks.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"D\xe9p\xf4t confirm\xe9 !"}),(0,Ks.jsx)("p",{className:"text-gray-600 mb-6",children:a}),o&&(0,Ks.jsxs)("div",{className:"bg-gray-50 rounded-xl p-4 mb-6",children:[(0,Ks.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,Ks.jsx)("span",{className:"text-gray-600",children:"Nouveau solde"}),(0,Ks.jsxs)("span",{className:"font-bold text-green-600",children:[(o.current_balance||0).toLocaleString()," F"]})]}),(0,Ks.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,Ks.jsx)("span",{className:"text-gray-600",children:"Total d\xe9pos\xe9"}),(0,Ks.jsxs)("span",{className:"font-bold text-gray-900",children:[(o.total_deposited||0).toLocaleString()," F"]})]}),(0,Ks.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Ks.jsx)("span",{className:"text-gray-600",children:"Progression"}),(0,Ks.jsxs)("span",{className:"font-bold text-blue-600",children:[o.completion_percentage||0,"%"]})]})]}),(0,Ks.jsxs)("div",{className:"space-y-3",children:[(0,Ks.jsx)("button",{onClick:()=>{r(o?"/ab-epargne/plan/".concat(o.id):"/ab-epargne")},className:"w-full bg-gradient-to-r from-blue-500 to-blue-600 text-white py-3 rounded-xl font-semibold",children:"Voir mon plan"}),(0,Ks.jsx)("p",{className:"text-sm text-gray-500",children:"Redirection automatique dans 3 secondes..."})]})]}),"error"===s&&(0,Ks.jsxs)(Ks.Fragment,{children:[(0,Ks.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 bg-red-100 rounded-full flex items-center justify-center",children:(0,Ks.jsx)("svg",{className:"w-8 h-8 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Ks.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,Ks.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Erreur"}),(0,Ks.jsx)("p",{className:"text-gray-600 mb-6",children:a}),(0,Ks.jsx)("button",{onClick:()=>r("/ab-epargne"),className:"w-full bg-blue-600 text-white py-3 rounded-xl font-semibold",children:"Retour \xe0 l'\xe9pargne"})]})]})})},Rx=()=>{const e=Y(),r=$(),{user:s}=Zs(),[n,a]=(0,t.useState)("loading"),[i,o]=(0,t.useState)("V\xe9rification du remboursement...");(0,t.useEffect)(()=>{const t=new URLSearchParams(r.search),s=t.get("id")||t.get("reference")||t.get("txId"),n=t.get("status");if(console.log("[REMBOURSEMENT_RETOUR] Param\xe8tres URL:",{transactionId:s,status:n,allParams:Object.fromEntries(t.entries())}),!s)return a("success"),o("Remboursement confirm\xe9 ! Votre pr\xeat sera mis \xe0 jour sous peu."),void setTimeout(()=>{e("/dashboard")},3e3);"approved"===n||"transferred"===n?l(s):(a("error"),o("Remboursement non approuv\xe9"))},[r.search,e,s]);const l=async t=>{try{o("V\xe9rification du remboursement...");let r=0;const s=10,n=async()=>{r++,console.log("[REMBOURSEMENT_RETOUR] Tentative ".concat(r,"/").concat(s," pour transaction ID: ").concat(t));try{const i=await fetch("".concat("https://ab-pret-back.onrender.com","/api/loans/repayment-status?id=").concat(t)),l=await i.json();if(l.success&&l.loan)return a("success"),o("Remboursement confirm\xe9, pr\xeat mis \xe0 jour !"),void setTimeout(()=>{e("/dashboard")},3e3);if(r<s)return o("V\xe9rification du remboursement... (".concat(r,"/").concat(s,")")),void setTimeout(n,2e3);a("success"),o("Remboursement confirm\xe9 ! Votre pr\xeat sera mis \xe0 jour sous peu."),setTimeout(()=>{e("/dashboard")},3e3)}catch(i){console.error("[REMBOURSEMENT_RETOUR] \u274c Erreur tentative ".concat(r,":"),i),r<s?setTimeout(n,2e3):(a("error"),o("Erreur de connexion"))}};n()}catch(r){console.error("[REMBOURSEMENT_RETOUR] \u274c Erreur:",r),a("error"),o("Erreur de connexion")}};return(0,Ks.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:(0,Ks.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8 max-w-md w-full text-center",children:[(0,Ks.jsxs)("div",{className:"mb-6",children:["loading"===n&&(0,Ks.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 bg-blue-100 rounded-full flex items-center justify-center",children:(0,Ks.jsxs)("svg",{className:"w-8 h-8 text-blue-600 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[(0,Ks.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,Ks.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}),"success"===n&&(0,Ks.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 bg-green-100 rounded-full flex items-center justify-center",children:(0,Ks.jsx)("svg",{className:"w-8 h-8 text-green-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Ks.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),"error"===n&&(0,Ks.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 bg-red-100 rounded-full flex items-center justify-center",children:(0,Ks.jsx)("svg",{className:"w-8 h-8 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Ks.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,Ks.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"success"===n?"Remboursement effectu\xe9 !":"error"===n?"Erreur":"V\xe9rification..."}),(0,Ks.jsx)("p",{className:"text-gray-600 mb-4",children:i})]}),(0,Ks.jsx)("button",{onClick:()=>{e("/dashboard")},className:"bg-blue-600 text-white py-3 px-6 rounded-lg font-medium hover:bg-blue-700 transition-colors",children:"Retour au tableau de bord"})]})})},Ox=()=>{const{id:e}=X();return(0,Ks.jsx)("div",{className:"min-h-screen bg-gray-50 p-8",children:(0,Ks.jsxs)("div",{className:"max-w-2xl mx-auto",children:[(0,Ks.jsxs)("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:["Test Plan \xc9pargne - ID: ",e]}),(0,Ks.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[(0,Ks.jsx)("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Plan d'\xe9pargne cr\xe9\xe9 avec succ\xe8s !"}),(0,Ks.jsxs)("div",{className:"space-y-4",children:[(0,Ks.jsx)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:(0,Ks.jsxs)("p",{className:"text-green-800",children:["\u2705 Le plan d'\xe9pargne a \xe9t\xe9 cr\xe9\xe9 avec l'ID: ",(0,Ks.jsx)("strong",{children:e})]})}),(0,Ks.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,Ks.jsx)("p",{className:"text-blue-800",children:"\ud83c\udf89 La redirection fonctionne correctement !"})}),(0,Ks.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:(0,Ks.jsxs)("p",{className:"text-yellow-800",children:["\ud83d\udcdd Cette page de test confirme que le flux complet fonctionne :",(0,Ks.jsx)("br",{}),"1. Paiement FedaPay \u2705",(0,Ks.jsx)("br",{}),"2. Redirection vers RetourEpargne \u2705",(0,Ks.jsx)("br",{}),"3. Polling du backend \u2705",(0,Ks.jsx)("br",{}),"4. Redirection vers PlanEpargne \u2705"]})})]})]})]})})},Lx=()=>{const e=Y();return(0,Ks.jsx)("div",{className:"bg-gradient-to-br from-purple-50 via-violet-50 to-indigo-50 min-h-screen",children:(0,Ks.jsxs)("div",{className:"relative overflow-hidden",children:[(0,Ks.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-500 via-violet-600 to-indigo-600 opacity-10"}),(0,Ks.jsx)("div",{className:"relative px-4 lg:px-8 py-6",children:(0,Ks.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,Ks.jsxs)(ep.button,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5},onClick:()=>e("/menu"),className:"inline-flex items-center space-x-2 px-4 py-2 bg-white/80 backdrop-blur-sm rounded-full border border-white/50 shadow-lg hover:bg-white/90 transition-all duration-300 mb-8",children:[(0,Ks.jsx)(hf,{size:16,className:"text-purple-600"}),(0,Ks.jsx)("span",{className:"text-sm font-medium text-purple-700",children:"Retour au menu"})]}),(0,Ks.jsxs)("div",{className:"text-center",children:[(0,Ks.jsx)(ep.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.8,delay:.2},className:"mb-8",children:(0,Ks.jsx)("div",{className:"inline-flex p-8 bg-gradient-to-r from-purple-500 to-violet-600 rounded-full text-white shadow-2xl",children:(0,Ks.jsx)(Of,{size:80})})}),(0,Ks.jsxs)(ep.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.3},className:"text-4xl lg:text-6xl font-bold text-gray-900 mb-6",children:["Coaching et"," ",(0,Ks.jsx)("span",{className:"bg-gradient-to-r from-purple-600 via-violet-600 to-indigo-600 bg-clip-text text-transparent",children:"Finance Entrepreneuriale"})]}),(0,Ks.jsx)(ep.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.4},className:"mb-8",children:(0,Ks.jsxs)("div",{className:"inline-flex items-center space-x-3 px-6 py-3 bg-yellow-100 border border-yellow-300 rounded-full",children:[(0,Ks.jsx)(sp,{size:20,className:"text-yellow-600"}),(0,Ks.jsx)("span",{className:"text-lg font-semibold text-yellow-800",children:"Bient\xf4t disponible"})]})}),(0,Ks.jsxs)(ep.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.5},className:"text-xl lg:text-2xl text-gray-600 mb-12 font-light max-w-2xl mx-auto",children:["Nos services de coaching et de finance entrepreneuriale sont en cours de d\xe9veloppement.",(0,Ks.jsx)("br",{}),(0,Ks.jsx)("span",{className:"text-purple-600 font-medium",children:"Revenez bient\xf4t !"})]}),(0,Ks.jsx)(ep.button,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.6},onClick:()=>e("/menu"),className:"bg-gradient-to-r from-purple-500 to-violet-600 text-white px-8 py-4 rounded-2xl shadow-xl hover:shadow-2xl transition-all duration-300 hover:scale-105",children:"Retour au menu principal"})]})]})})]})})},Dx=en("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]),zx=en("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]),Mx=en("Diamond",[["path",{d:"M2.7 10.3a2.41 2.41 0 0 0 0 3.41l7.59 7.59a2.41 2.41 0 0 0 3.41 0l7.59-7.59a2.41 2.41 0 0 0 0-3.41l-7.59-7.59a2.41 2.41 0 0 0-3.41 0Z",key:"1f1r0c"}]]),Fx=en("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]),Ux=en("Gift",[["polyline",{points:"20 12 20 22 4 22 4 12",key:"nda8fc"}],["rect",{width:"20",height:"5",x:"2",y:"7",key:"wkgdzj"}],["line",{x1:"12",x2:"12",y1:"22",y2:"7",key:"1n8zgp"}],["path",{d:"M12 7H7.5a2.5 2.5 0 0 1 0-5C11 2 12 7 12 7z",key:"zighg4"}],["path",{d:"M12 7h4.5a2.5 2.5 0 0 0 0-5C13 2 12 7 12 7z",key:"1pa5tk"}]]),Bx=en("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]),Vx=en("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]),qx=()=>{const e=Y(),{user:r}=Zs(),{showSuccess:s,showError:n}=ln(),[a,i]=(0,t.useState)("overview"),[o,l]=(0,t.useState)(!1),[c,d]=(0,t.useState)(!0),[u,m]=(0,t.useState)({currentScore:0,maxScore:5,level:"Bronze",nextLevel:"Silver",pointsToNextLevel:1,completedLoans:0,loansForNextBonus:1,totalSavings:0,phoneCreditEarned:0,nextReward:"Premier bonus apr\xe8s 1 remboursement",history:[]}),h=[{name:"Bronze",minScore:0,maxScore:1,color:"from-amber-600 to-amber-800",icon:Hp},{name:"Silver",minScore:2,maxScore:2,color:"from-gray-400 to-gray-600",icon:Tf},{name:"Gold",minScore:3,maxScore:3,color:"from-yellow-400 to-yellow-600",icon:Dx},{name:"Platinum",minScore:4,maxScore:4,color:"from-blue-400 to-blue-600",icon:zx},{name:"Diamond",minScore:5,maxScore:5,color:"from-purple-400 to-purple-600",icon:Mx}],p=h.find(e=>u.currentScore>=e.minScore&&u.currentScore<=e.maxScore),f=e=>{const t=h.find(t=>e>=t.minScore&&e<=t.maxScore);return t?t.color:"from-gray-400 to-gray-600"},x=(0,t.useCallback)(async()=>{if(null!==r&&void 0!==r&&r.id)try{d(!0);const[s,n]=await Promise.all([Hs(r.id),Gs(r.id)]);if(s.success&&n.success){var e,t;const r=s.data||[],a=n.data||[],i=new Map(r.map(e=>[e.id,e])),o=a.filter(e=>"completed"===(e.status||"").toLowerCase()),l=new Set,c=new Map;o.forEach(e=>{const t=i.get(e.loan_id);if(!t)return;const r=new Date(t.created_at||new Date),s=parseInt(t.duration_months||t.duration||30,10),n=new Date(r.getTime()+24*s*60*60*1e3),a=new Date(e.payment_date||e.created_at||new Date);if(a.getTime()<=n.getTime()){l.add(e.loan_id);const t=c.get(e.loan_id);(!t||a.getTime()<t.paymentDate.getTime())&&c.set(e.loan_id,{id:e.id,paymentDate:a})}});const d=Math.max(0,Math.min(5,l.size)),u=Array.from(c.entries()).map(e=>{let[t,r]=e;return{id:r.id,date:r.paymentDate.toISOString(),points:1,action:"Remboursement \xe0 temps du pr\xeat #".concat(t)}}),p=r.filter(e=>{const t=(e.status||"").toLowerCase();return"completed"===t||"rembours\xe9"===t}).length,f=h.find(e=>e.minScore>d)||h[h.length-1],x=Math.max(0,(null!==(e=f.minScore)&&void 0!==e?e:d)-d),g=d>=5?"Score maximum atteint":"1 remboursement \xe0 temps = +1 point";m({currentScore:d,maxScore:5,level:(null===(t=h.find(e=>d>=e.minScore&&d<=e.maxScore))||void 0===t?void 0:t.name)||"Bronze",nextLevel:f.name,pointsToNextLevel:x,completedLoans:p,loansForNextBonus:Math.max(0,1),totalSavings:0,phoneCreditEarned:0,nextReward:g,history:u})}}catch(s){console.error("[LOYALTY] Erreur lors du calcul du score:",s),n("Erreur lors du chargement du score de fid\xe9lit\xe9")}finally{d(!1)}else d(!1)},[null===r||void 0===r?void 0:r.id,n]);(0,t.useEffect)(()=>{x()},[x]);const g=[{title:"R\xe9duction de 2% sur les frais",description:"\xc9conomisez sur tous vos pr\xeats futurs",icon:Fx,color:"text-green-600",bgColor:"bg-green-100"},{title:"Forfait d'internet",description:"Recevez un forfait internet sur le num\xe9ro de votre choix",icon:Kp,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Traitement prioritaire",description:"Vos demandes sont trait\xe9es en priorit\xe9",icon:Vp,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Taux d'int\xe9r\xeat pr\xe9f\xe9rentiels",description:"B\xe9n\xe9ficiez de taux r\xe9duits sur vos pr\xeats",icon:Of,color:"text-orange-600",bgColor:"bg-orange-100"}],v=[{step:1,title:"Remboursez un pr\xeat",description:"Remboursez votre pr\xeat dans les d\xe9lais impartis",icon:Jf,color:"from-blue-500 to-blue-600"},{step:2,title:"Gagnez 1 point",description:"Votre score de fid\xe9lit\xe9 augmente de 1 point",icon:tn,color:"from-green-500 to-green-600"},{step:3,title:"Progressez vers le niveau sup\xe9rieur",description:"Atteignez le niveau suivant avec plus de remboursements",icon:Of,color:"from-purple-500 to-purple-600"},{step:4,title:"D\xe9bloquez les avantages",description:"Profitez de r\xe9ductions et de forfaits gratuits",icon:Ux,color:"from-orange-500 to-orange-600"}];return(0,Ks.jsxs)("div",{className:"bg-gradient-to-br from-gray-50 to-blue-50",children:[(0,Ks.jsx)("div",{className:"bg-white shadow-sm border-b border-gray-200",children:(0,Ks.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,Ks.jsxs)("div",{className:"flex items-center justify-between h-16",children:[(0,Ks.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,Ks.jsx)(sf,{variant:"ghost",onClick:()=>e("/dashboard"),className:"p-2 hover:bg-gray-100 rounded-lg",children:(0,Ks.jsx)(hf,{size:20})}),(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("h1",{className:"text-xl font-bold text-gray-900 font-montserrat",children:"Score de Fid\xe9lit\xe9"}),(0,Ks.jsx)("p",{className:"text-sm text-gray-600 font-montserrat",children:"Programme de r\xe9compenses et avantages"})]})]}),(0,Ks.jsx)(sf,{variant:"ghost",onClick:()=>l(!0),className:"p-2 hover:bg-gray-100 rounded-lg",children:(0,Ks.jsx)(sn,{size:20})})]})})}),(0,Ks.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,Ks.jsx)(ep.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"mb-8",children:c?(0,Ks.jsx)(ix,{className:"bg-gradient-to-br from-white to-gray-50 border-0 shadow-xl",children:(0,Ks.jsxs)("div",{className:"p-8 text-center",children:[(0,Ks.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,Ks.jsx)("p",{className:"text-gray-600",children:"Chargement du score de fid\xe9lit\xe9..."})]})}):(0,Ks.jsx)(ix,{className:"bg-gradient-to-br from-white to-gray-50 border-0 shadow-xl",children:(0,Ks.jsxs)("div",{className:"p-8 text-center",children:[(0,Ks.jsx)("div",{className:"flex justify-center mb-6",children:(0,Ks.jsx)("div",{className:"p-6 rounded-full bg-gradient-to-br ".concat(f(u.currentScore)),children:t.createElement((e=>{const t=h.find(t=>e>=t.minScore&&e<=t.maxScore);return t?t.icon:Hp})(u.currentScore),{size:48,className:"text-white"})})}),(0,Ks.jsxs)("h2",{className:"text-4xl font-bold text-gray-900 font-montserrat mb-2",children:[u.currentScore,"/5"]}),(0,Ks.jsxs)("p",{className:"text-xl font-semibold text-gray-700 font-montserrat mb-4",children:["Niveau ",null===p||void 0===p?void 0:p.name]}),(0,Ks.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4 mb-6 max-w-md mx-auto",children:[(0,Ks.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,Ks.jsx)(sn,{size:16,className:"text-blue-600"}),(0,Ks.jsx)("p",{className:"text-sm font-medium text-blue-800",children:"Syst\xe8me mis \xe0 jour"})]}),(0,Ks.jsx)("p",{className:"text-xs text-blue-700",children:"Le syst\xe8me de score de fid\xe9lit\xe9 a \xe9t\xe9 mis \xe0 jour. Tous les comptes commencent maintenant \xe0 0/5 points. Votre progression se fera \xe0 partir de vos prochains remboursements."})]}),(0,Ks.jsxs)("div",{className:"w-full max-w-md mx-auto mb-6",children:[(0,Ks.jsxs)("div",{className:"flex justify-between text-sm text-gray-600 mb-2",children:[(0,Ks.jsxs)("span",{children:["Progression vers ",u.nextLevel]}),(0,Ks.jsxs)("span",{children:[u.pointsToNextLevel," point",u.pointsToNextLevel>1?"s":""," restant",u.pointsToNextLevel>1?"s":""]})]}),(0,Ks.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-3",children:(0,Ks.jsx)(ep.div,{className:"h-3 rounded-full bg-gradient-to-r ".concat(f(u.currentScore)),initial:{width:0},animate:{width:"".concat(u.currentScore/u.maxScore*100,"%")},transition:{duration:1,delay:.5}})}),(0,Ks.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[Math.round(u.currentScore/u.maxScore*100),"% du score maximum atteint"]})]}),(0,Ks.jsxs)("div",{className:"grid grid-cols-3 gap-4 max-w-md mx-auto",children:[(0,Ks.jsxs)("div",{className:"text-center",children:[(0,Ks.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:u.completedLoans}),(0,Ks.jsx)("p",{className:"text-sm text-gray-600",children:"Pr\xeats termin\xe9s"})]}),(0,Ks.jsxs)("div",{className:"text-center",children:[(0,Ks.jsx)("p",{className:"text-2xl font-bold text-green-600",children:u.loansForNextBonus}),(0,Ks.jsx)("p",{className:"text-sm text-gray-600",children:"Pour le bonus"})]}),(0,Ks.jsxs)("div",{className:"text-center",children:[(0,Ks.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:pf(u.totalSavings)}),(0,Ks.jsx)("p",{className:"text-sm text-gray-600",children:"\xc9conomies"})]})]})]})})}),(0,Ks.jsx)(ep.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:"mb-8",children:(0,Ks.jsx)("div",{className:"flex space-x-1 bg-white rounded-xl p-1 shadow-sm",children:[{id:"overview",label:"Vue d'ensemble",icon:Jf},{id:"benefits",label:"Avantages",icon:Ux},{id:"how-it-works",label:"Comment \xe7a marche",icon:lx},{id:"history",label:"Historique",icon:sp}].map(e=>(0,Ks.jsxs)("button",{onClick:()=>i(e.id),className:"flex-1 flex items-center justify-center space-x-2 py-3 px-4 rounded-lg font-medium transition-all duration-200 ".concat(a===e.id?"bg-primary-500 text-white shadow-sm":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"),children:[t.createElement(e.icon,{size:16}),(0,Ks.jsx)("span",{className:"font-montserrat",children:e.label})]},e.id))})}),(0,Ks.jsxs)(Mp,{mode:"wait",children:["overview"===a&&(0,Ks.jsxs)(ep.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},className:"space-y-4",children:[(0,Ks.jsx)(ix,{className:"bg-gradient-to-br from-blue-500 to-blue-600 text-white",children:(0,Ks.jsxs)("div",{className:"p-6",children:[(0,Ks.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("h3",{className:"text-xl font-bold font-montserrat mb-2",children:"Prochain objectif"}),(0,Ks.jsx)("p",{className:"text-blue-100",children:"Terminez votre 4\xe8me pr\xeat pour d\xe9bloquer le bonus"})]}),(0,Ks.jsx)("div",{className:"p-3 bg-white/20 rounded-full",children:(0,Ks.jsx)(Jf,{size:24})})]}),(0,Ks.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,Ks.jsxs)("div",{className:"flex-1",children:[(0,Ks.jsxs)("div",{className:"flex justify-between text-sm mb-2",children:[(0,Ks.jsx)("span",{children:"Progression"}),(0,Ks.jsxs)("span",{children:[u.completedLoans,"/4 pr\xeats"]})]}),(0,Ks.jsx)("div",{className:"w-full bg-white/20 rounded-full h-2",children:(0,Ks.jsx)("div",{className:"bg-white h-2 rounded-full transition-all duration-500",style:{width:"".concat(u.completedLoans/4*100,"%")}})})]}),(0,Ks.jsx)(sf,{variant:"white",onClick:()=>e("/loan-request"),className:"whitespace-nowrap",children:"Demander un pr\xeat"})]})]})}),(0,Ks.jsx)("div",{className:"grid grid-cols-1 gap-6",children:(0,Ks.jsx)(ix,{className:"bg-gradient-to-br from-purple-500 to-purple-600 text-white",children:(0,Ks.jsxs)("div",{className:"p-6",children:[(0,Ks.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("h3",{className:"text-lg font-bold font-montserrat mb-1",children:"Forfait internet"}),(0,Ks.jsx)("p",{className:"text-purple-100 text-sm",children:"Prochaine r\xe9compense"})]}),(0,Ks.jsx)("div",{className:"p-2 bg-white/20 rounded-full",children:(0,Ks.jsx)(Kp,{size:20})})]}),(0,Ks.jsx)("p",{className:"text-lg font-semibold",children:u.nextReward})]})})})]},"overview"),"benefits"===a&&(0,Ks.jsx)(ep.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},children:(0,Ks.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:g.map((e,r)=>(0,Ks.jsx)(ep.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*r},children:(0,Ks.jsx)(ix,{className:"hover:shadow-lg transition-all duration-200 transform hover:scale-105",children:(0,Ks.jsx)("div",{className:"p-6",children:(0,Ks.jsxs)("div",{className:"flex items-start space-x-4",children:[(0,Ks.jsx)("div",{className:"p-3 rounded-lg ".concat(e.bgColor),children:t.createElement(e.icon,{size:24,className:e.color})}),(0,Ks.jsxs)("div",{className:"flex-1",children:[(0,Ks.jsx)("h3",{className:"text-lg font-semibold text-gray-900 font-montserrat mb-2",children:e.title}),(0,Ks.jsx)("p",{className:"text-gray-600 font-montserrat",children:e.description})]})]})})})},e.title))})},"benefits"),"how-it-works"===a&&(0,Ks.jsx)(ep.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},children:(0,Ks.jsxs)("div",{className:"space-y-4",children:[(0,Ks.jsx)(ix,{className:"bg-gradient-to-br from-blue-50 to-indigo-50 border-blue-200",children:(0,Ks.jsxs)("div",{className:"p-6",children:[(0,Ks.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,Ks.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,Ks.jsx)(Bx,{size:20,className:"text-blue-600"})}),(0,Ks.jsx)("h3",{className:"text-xl font-bold text-gray-900 font-montserrat",children:"Comment fonctionne le programme de fid\xe9lit\xe9 ?"})]}),(0,Ks.jsx)("p",{className:"text-gray-700 font-montserrat",children:"Notre programme de fid\xe9lit\xe9 r\xe9compense les clients qui remboursent leurs pr\xeats dans les d\xe9lais. Plus vous \xeates fid\xe8le, plus vous b\xe9n\xe9ficiez d'avantages exclusifs."})]})}),(0,Ks.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:v.map((e,r)=>(0,Ks.jsx)(ep.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*r},children:(0,Ks.jsx)(ix,{className:"text-center hover:shadow-lg transition-all duration-200",children:(0,Ks.jsxs)("div",{className:"p-6",children:[(0,Ks.jsx)("div",{className:"inline-flex items-center justify-center w-12 h-12 rounded-full bg-gradient-to-br ".concat(e.color," text-white font-bold text-lg mb-4"),children:e.step}),(0,Ks.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-gradient-to-br ".concat(e.color," text-white mb-4"),children:t.createElement(e.icon,{size:24})}),(0,Ks.jsx)("h4",{className:"text-lg font-semibold text-gray-900 font-montserrat mb-2",children:e.title}),(0,Ks.jsx)("p",{className:"text-gray-600 font-montserrat text-sm",children:e.description})]})})},e.step))}),(0,Ks.jsx)(ix,{className:"bg-gradient-to-br from-green-50 to-emerald-50 border-green-200",children:(0,Ks.jsxs)("div",{className:"p-6",children:[(0,Ks.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,Ks.jsx)("div",{className:"p-2 bg-green-100 rounded-lg",children:(0,Ks.jsx)(Vx,{size:20,className:"text-green-600"})}),(0,Ks.jsx)("h3",{className:"text-lg font-bold text-gray-900 font-montserrat",children:"Avantages cumulatifs"})]}),(0,Ks.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Ks.jsxs)("div",{className:"space-y-2",children:[(0,Ks.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Ks.jsx)(tn,{size:16,className:"text-green-600"}),(0,Ks.jsx)("span",{className:"text-sm font-montserrat",children:"Score de fid\xe9lit\xe9 +1 point"})]}),(0,Ks.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Ks.jsx)(tn,{size:16,className:"text-green-600"}),(0,Ks.jsx)("span",{className:"text-sm font-montserrat",children:"R\xe9duction de 2% sur les frais"})]})]}),(0,Ks.jsxs)("div",{className:"space-y-2",children:[(0,Ks.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Ks.jsx)(tn,{size:16,className:"text-green-600"}),(0,Ks.jsx)("span",{className:"text-sm font-montserrat",children:"Forfait internet gratuit"})]}),(0,Ks.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Ks.jsx)(tn,{size:16,className:"text-green-600"}),(0,Ks.jsx)("span",{className:"text-sm font-montserrat",children:"Traitement prioritaire"})]})]})]})]})})]})},"how-it-works"),"history"===a&&(0,Ks.jsx)(ep.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},children:(0,Ks.jsx)(ix,{children:(0,Ks.jsxs)("div",{className:"p-6",children:[(0,Ks.jsx)("h3",{className:"text-lg font-semibold text-gray-900 font-montserrat mb-4",children:"Historique des points"}),(0,Ks.jsx)("div",{className:"space-y-4",children:u.history.map((e,t)=>(0,Ks.jsxs)(ep.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*t},className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[(0,Ks.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Ks.jsx)("div",{className:"p-2 bg-green-100 rounded-full",children:(0,Ks.jsx)(Of,{size:16,className:"text-green-600"})}),(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("p",{className:"font-medium text-gray-900 font-montserrat",children:e.action}),(0,Ks.jsx)("p",{className:"text-sm text-gray-600 font-montserrat",children:new Date(e.date).toLocaleDateString("fr-FR")})]})]}),(0,Ks.jsx)("div",{className:"text-right",children:(0,Ks.jsxs)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:["+",e.points," points"]})})]},e.id))})]})})},"history")]})]}),(0,Ks.jsx)(Mp,{children:o&&(0,Ks.jsx)(ep.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:()=>l(!1),children:(0,Ks.jsxs)(ep.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-2xl p-6 max-w-md w-full max-h-[80vh] overflow-y-auto",onClick:e=>e.stopPropagation(),children:[(0,Ks.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Ks.jsx)("h3",{className:"text-lg font-bold text-gray-900 font-montserrat",children:"\xc0 propos du score de fid\xe9lit\xe9"}),(0,Ks.jsx)("button",{onClick:()=>l(!1),className:"p-1 hover:bg-gray-100 rounded-full",children:(0,Ks.jsx)(nn,{size:20})})]}),(0,Ks.jsxs)("div",{className:"space-y-4 text-sm text-gray-700 font-montserrat",children:[(0,Ks.jsx)("p",{children:"Le score de fid\xe9lit\xe9 est un programme de r\xe9compenses qui vous permet de b\xe9n\xe9ficier d'avantages exclusifs en fonction de votre historique de remboursement."}),(0,Ks.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg",children:[(0,Ks.jsx)("h4",{className:"font-semibold text-blue-900 mb-2",children:"Comment gagner des points :"}),(0,Ks.jsxs)("ul",{className:"space-y-1 text-blue-800",children:[(0,Ks.jsx)("li",{children:"\u2022 Rembourser un pr\xeat dans les d\xe9lais impartis"}),(0,Ks.jsx)("li",{children:"\u2022 +1 point par remboursement \xe0 temps"}),(0,Ks.jsx)("li",{children:"\u2022 Score maximum : 5 points"})]})]}),(0,Ks.jsxs)("div",{className:"bg-green-50 p-4 rounded-lg",children:[(0,Ks.jsx)("h4",{className:"font-semibold text-green-900 mb-2",children:"Avantages d\xe9bloqu\xe9s :"}),(0,Ks.jsxs)("ul",{className:"space-y-1 text-green-800",children:[(0,Ks.jsx)("li",{children:"\u2022 R\xe9duction de 2% sur les frais"}),(0,Ks.jsx)("li",{children:"\u2022 Forfait internet gratuit"}),(0,Ks.jsx)("li",{children:"\u2022 Traitement prioritaire"}),(0,Ks.jsx)("li",{children:"\u2022 Taux d'int\xe9r\xeat pr\xe9f\xe9rentiels"})]})]}),(0,Ks.jsx)("p",{className:"text-xs text-gray-500",children:"Les avantages sont cumulatifs et s'appliquent automatiquement une fois les conditions remplies."})]})]})})})]})},Hx=()=>{const[e,r]=(0,t.useState)(""),[s,n]=(0,t.useState)(null),[a,i]=(0,t.useState)(!1),[o,l]=(0,t.useState)("");return(0,Ks.jsx)("div",{className:"min-h-screen bg-gray-50 py-12 px-4",children:(0,Ks.jsx)("div",{className:"max-w-4xl mx-auto",children:(0,Ks.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-8",children:[(0,Ks.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-8 text-center",children:"\ud83d\udd0d Diagnostic des Utilisateurs"}),(0,Ks.jsxs)("div",{className:"space-y-6",children:[(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Num\xe9ro de t\xe9l\xe9phone \xe0 v\xe9rifier"}),(0,Ks.jsxs)("div",{className:"flex space-x-2",children:[(0,Ks.jsx)("input",{type:"text",value:e,onChange:e=>r(e.target.value),placeholder:"22912345678",className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),(0,Ks.jsx)("button",{onClick:async()=>{if(e.trim()){i(!0),l(""),n(null);try{console.log("[DIAGNOSTIC] V\xe9rification de l'utilisateur:",e);const{data:r,error:s}=await Ms.from("users").select("*").eq("phone_number",e).single();if(s)return console.error("[DIAGNOSTIC] Erreur table users:",s),void l("Utilisateur non trouv\xe9 dans la table users: ".concat(s.message));console.log("[DIAGNOSTIC] Utilisateur trouv\xe9 dans users:",r);let a=null;try{const{data:e,error:t}=await Ms.auth.admin.getUserById(r.id);!t&&e&&(a=e.user,console.log("[DIAGNOSTIC] Utilisateur trouv\xe9 dans auth.users:",a))}catch(t){console.log("[DIAGNOSTIC] Impossible d'acc\xe9der \xe0 auth.users (pas de droits admin)")}const i=e.replace(/[^0-9]/g,""),o=new Date(r.created_at).getTime(),c="user.".concat(i,".").concat(o,"@gmail.com");n({user:r,authUser:a,tempEmail:c,cleanPhone:i})}catch(o){console.error("[DIAGNOSTIC] Erreur:",o),l("Erreur lors de la v\xe9rification: ".concat(o.message))}finally{i(!1)}}else l("Veuillez entrer un num\xe9ro de t\xe9l\xe9phone")},disabled:a,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:a?"V\xe9rification...":"V\xe9rifier"})]})]}),o&&(0,Ks.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:o}),s&&(0,Ks.jsxs)("div",{className:"space-y-6",children:[(0,Ks.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"\ud83d\udccb Informations Utilisateur"}),(0,Ks.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,Ks.jsx)("h3",{className:"font-semibold text-gray-800 mb-3",children:"Table users"}),(0,Ks.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("strong",{children:"ID:"})," ",s.user.id]}),(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("strong",{children:"Email:"})," ",s.user.email||"Non d\xe9fini"]}),(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("strong",{children:"T\xe9l\xe9phone:"})," ",s.user.phone_number]}),(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("strong",{children:"Pr\xe9nom:"})," ",s.user.first_name]}),(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("strong",{children:"Nom:"})," ",s.user.last_name]}),(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("strong",{children:"R\xf4le:"})," ",s.user.role]}),(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("strong",{children:"Statut:"})," ",s.user.status]}),(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("strong",{children:"Cr\xe9\xe9 le:"})," ",new Date(s.user.created_at).toLocaleString()]})]})]}),s.authUser?(0,Ks.jsxs)("div",{className:"bg-green-50 rounded-lg p-4",children:[(0,Ks.jsx)("h3",{className:"font-semibold text-green-800 mb-3",children:"\u2705 Table auth.users"}),(0,Ks.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("strong",{children:"ID:"})," ",s.authUser.id]}),(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("strong",{children:"Email:"})," ",s.authUser.email]}),(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("strong",{children:"Email v\xe9rifi\xe9:"})," ",s.authUser.email_confirmed_at?"Oui":"Non"]}),(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("strong",{children:"Derni\xe8re connexion:"})," ",s.authUser.last_sign_in_at?new Date(s.authUser.last_sign_in_at).toLocaleString():"Jamais"]})]})]}):(0,Ks.jsxs)("div",{className:"bg-yellow-50 rounded-lg p-4",children:[(0,Ks.jsx)("h3",{className:"font-semibold text-yellow-800 mb-3",children:"\u26a0\ufe0f Table auth.users"}),(0,Ks.jsx)("p",{className:"text-yellow-700",children:"Utilisateur non trouv\xe9 dans auth.users. Cela explique pourquoi la connexion \xe9choue."})]}),(0,Ks.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4",children:[(0,Ks.jsx)("h3",{className:"font-semibold text-blue-800 mb-3",children:"\ud83d\udce7 Email temporaire reconstruit"}),(0,Ks.jsxs)("div",{className:"space-y-2",children:[(0,Ks.jsx)("div",{children:(0,Ks.jsx)("strong",{children:"Email utilis\xe9 pour la connexion:"})}),(0,Ks.jsx)("code",{className:"bg-blue-100 px-2 py-1 rounded text-sm",children:s.tempEmail}),(0,Ks.jsx)("div",{className:"text-sm text-blue-600",children:"Cet email est reconstruit \xe0 partir du t\xe9l\xe9phone et de la date de cr\xe9ation."})]})]}),(0,Ks.jsxs)("div",{className:"bg-purple-50 rounded-lg p-4",children:[(0,Ks.jsx)("h3",{className:"font-semibold text-purple-800 mb-3",children:"\ud83d\udca1 Recommandations"}),(0,Ks.jsxs)("ul",{className:"text-sm text-purple-700 space-y-1",children:[!s.authUser&&(0,Ks.jsx)("li",{children:"\u2022 L\\'utilisateur n\\'existe pas dans auth.users - il faut le recr\xe9er avec signUpWithPhone"}),"approved"!==s.user.status&&(0,Ks.jsx)("li",{children:'\u2022 Le statut n\\\'est pas "approved" - mettre \xe0 jour le statut'}),(0,Ks.jsx)("li",{children:"\u2022 V\xe9rifier que le mot de passe correspond \xe0 l\\'email temporaire"}),(0,Ks.jsx)("li",{children:"\u2022 Essayer de se connecter avec l\\'email temporaire directement"})]})]})]})]})]})})})},Wx=()=>{const[e,r]=(0,t.useState)(null),[s,n]=(0,t.useState)(!1),[a,i]=(0,t.useState)(null),o=async()=>{n(!0),i(null);try{console.log("\ud83d\udd0d Test de la route /api/health...");const e=await fetch("/api/health");if(console.log("\ud83d\udce1 R\xe9ponse re\xe7ue:",e.status,e.statusText),!e.ok)throw new Error("HTTP ".concat(e.status,": ").concat(e.statusText));const t=e.headers.get("content-type");if(!t||!t.includes("application/json"))throw new Error("Type de contenu invalide: ".concat(t));const s=await e.text();if(console.log("\ud83d\udcc4 Contenu brut:",s),!s||""===s.trim())throw new Error("R\xe9ponse vide du serveur");const n=JSON.parse(s);console.log("\u2705 JSON pars\xe9:",n),r(n)}catch(e){console.error("\u274c Erreur lors du test:",e);let t=e.message;e.message.includes("Failed to fetch")?t="Impossible de se connecter au serveur API. V\xe9rifiez que le serveur est d\xe9marr\xe9 (npm run start:api)":e.message.includes("Unexpected end of JSON input")?t="R\xe9ponse invalide du serveur. Le serveur API pourrait ne pas \xeatre d\xe9marr\xe9.":e.message.includes("HTTP")&&(t="Erreur HTTP: ".concat(e.message)),i(t)}finally{n(!1)}};return(0,t.useEffect)(()=>{o()},[]),(0,Ks.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:(0,Ks.jsxs)("div",{className:"max-w-md w-full bg-white rounded-2xl shadow-xl p-8 text-center",children:[(0,Ks.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-6",children:"Test API Health"}),s&&(0,Ks.jsxs)("div",{className:"mb-4",children:[(0,Ks.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),(0,Ks.jsx)("p",{className:"text-gray-600 mt-2",children:"Test en cours..."})]}),a&&(0,Ks.jsxs)("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:[(0,Ks.jsx)("p",{className:"text-red-700 font-semibold",children:"\u274c Erreur:"}),(0,Ks.jsx)("p",{className:"text-red-600 text-sm",children:a}),(0,Ks.jsxs)("div",{className:"mt-3 text-xs text-red-500",children:[(0,Ks.jsx)("p",{children:"\ud83d\udca1 Solutions possibles:"}),(0,Ks.jsxs)("ul",{className:"list-disc list-inside mt-1 space-y-1",children:[(0,Ks.jsxs)("li",{children:["D\xe9marrer le serveur API: ",(0,Ks.jsx)("code",{children:"npm run start:api"})]}),(0,Ks.jsx)("li",{children:"V\xe9rifier que le port 5000 est libre"}),(0,Ks.jsx)("li",{children:"Red\xe9marrer l'application React"})]})]})]}),e&&(0,Ks.jsxs)("div",{className:"mb-4 p-4 bg-green-50 border border-green-200 rounded-lg",children:[(0,Ks.jsx)("p",{className:"text-green-700 font-semibold",children:"\u2705 API fonctionnelle"}),(0,Ks.jsx)("pre",{className:"text-sm text-green-600 mt-2",children:JSON.stringify(e,null,2)})]}),(0,Ks.jsx)("button",{onClick:o,disabled:s,className:"bg-blue-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:s?"Test en cours...":"Tester \xe0 nouveau"}),(0,Ks.jsxs)("div",{className:"mt-6 text-sm text-gray-500",children:[(0,Ks.jsxs)("p",{children:["Cette page teste la route ",(0,Ks.jsx)("code",{children:"/api/health"})]}),(0,Ks.jsx)("p",{children:"via le proxy de d\xe9veloppement."}),(0,Ks.jsxs)("p",{className:"mt-2 text-xs",children:["Serveur API: localhost:5000",(0,Ks.jsx)("br",{}),"Frontend: localhost:3001"]})]})]})})},Gx=en("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]),Kx=()=>{const[e]=Ie(),r=Y(),[s,n]=(0,t.useState)("loading"),[a,i]=(0,t.useState)(""),[o,l]=(0,t.useState)("");(0,t.useEffect)(()=>{const t=setTimeout(()=>{n("loading"),i(e.get("amount")||"50000"),l(e.get("transaction_id")||"mock_123")},1e3);return()=>clearTimeout(t)},[e]);const c=async()=>{n("success");try{const t=e.get("loan_id"),s=e.get("user_id");console.log("\ud83d\udd04 Traitement du remboursement simul\xe9...",{loanId:t,userId:s,amount:a,transactionId:o});const n=await fetch("/api/fedapay/webhook",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({transaction:{id:o,status:"approved",amount:parseInt(a),payment_method:"mobile_money",paid_at:(new Date).toISOString(),metadata:{loan_id:t,user_id:s,type:"loan_repayment"}}})}),i=await n.json();console.log("\u2705 Webhook trait\xe9:",i),setTimeout(()=>{const e="/remboursement/success?transaction_id=".concat(o,"&amount=").concat(a,"&loan_id=").concat(t);r(e)},2e3)}catch(t){console.error("\u274c Erreur traitement remboursement:",t),n("failed")}},d=async()=>{n("failed");try{const t=e.get("loan_id"),s=e.get("user_id");console.log("\ud83d\udd04 Traitement de l'\xe9chec de paiement simul\xe9...",{loanId:t,userId:s,amount:a,transactionId:o});const n=await fetch("/api/fedapay/webhook",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({transaction:{id:o,status:"failed",amount:parseInt(a),failure_reason:"Paiement refus\xe9 par l'utilisateur",failed_at:(new Date).toISOString(),metadata:{loan_id:t,user_id:s,type:"loan_repayment"}}})}),i=await n.json();console.log("\u274c Webhook \xe9chec trait\xe9:",i),setTimeout(()=>{const e="/remboursement/failure?transaction_id=".concat(o,"&amount=").concat(a,"&loan_id=").concat(t);r(e)},2e3)}catch(t){console.error("\u274c Erreur traitement \xe9chec:",t)}},u=e=>new Intl.NumberFormat("fr-CI",{style:"currency",currency:"XOF"}).format(e/100);return"loading"===s?(0,Ks.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:(0,Ks.jsxs)(ep.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"max-w-md w-full bg-white rounded-2xl shadow-xl p-8 text-center",children:[(0,Ks.jsxs)("div",{className:"mb-6",children:[(0,Ks.jsx)("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,Ks.jsx)(yp,{className:"w-8 h-8 text-blue-600"})}),(0,Ks.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"FedaPay Simulation"}),(0,Ks.jsx)("p",{className:"text-gray-600",children:"Page de paiement simul\xe9e pour les tests"})]}),(0,Ks.jsx)("div",{className:"bg-gray-50 rounded-xl p-6 mb-6",children:(0,Ks.jsxs)("div",{className:"text-center",children:[(0,Ks.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"Montant \xe0 payer"}),(0,Ks.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:u(a)}),(0,Ks.jsxs)("p",{className:"text-xs text-gray-500 mt-2",children:["Transaction: ",o]})]})}),(0,Ks.jsxs)("div",{className:"space-y-3",children:[(0,Ks.jsxs)("button",{onClick:c,className:"w-full bg-green-600 hover:bg-green-700 text-white font-semibold py-3 px-6 rounded-xl transition-colors flex items-center justify-center space-x-2",children:[(0,Ks.jsx)(tn,{className:"w-5 h-5"}),(0,Ks.jsx)("span",{children:"Simuler Paiement R\xe9ussi"})]}),(0,Ks.jsxs)("button",{onClick:d,className:"w-full bg-red-600 hover:bg-red-700 text-white font-semibold py-3 px-6 rounded-xl transition-colors flex items-center justify-center space-x-2",children:[(0,Ks.jsx)(Uf,{className:"w-5 h-5"}),(0,Ks.jsx)("span",{children:"Simuler Paiement \xc9chou\xe9"})]})]}),(0,Ks.jsxs)("div",{className:"mt-6 text-xs text-gray-500",children:[(0,Ks.jsx)("p",{children:"\u26a0\ufe0f Cette page simule FedaPay pour les tests"}),(0,Ks.jsx)("p",{children:"En production, vous seriez redirig\xe9 vers FedaPay r\xe9el"})]})]})}):(0,Ks.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:(0,Ks.jsxs)(ep.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"max-w-md w-full bg-white rounded-2xl shadow-xl p-8 text-center",children:["success"===s?(0,Ks.jsxs)(Ks.Fragment,{children:[(0,Ks.jsx)("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,Ks.jsx)(tn,{className:"w-8 h-8 text-green-600"})}),(0,Ks.jsx)("h2",{className:"text-2xl font-bold text-green-900 mb-2",children:"Paiement R\xe9ussi !"}),(0,Ks.jsx)("p",{className:"text-green-700 mb-4",children:"Redirection en cours..."})]}):(0,Ks.jsxs)(Ks.Fragment,{children:[(0,Ks.jsx)("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,Ks.jsx)(Uf,{className:"w-8 h-8 text-red-600"})}),(0,Ks.jsx)("h2",{className:"text-2xl font-bold text-red-900 mb-2",children:"Paiement \xc9chou\xe9"}),(0,Ks.jsx)("p",{className:"text-red-700 mb-4",children:"Redirection en cours..."})]}),(0,Ks.jsx)("div",{className:"flex items-center justify-center",children:(0,Ks.jsx)(Gx,{className:"w-6 h-6 animate-spin text-gray-600"})})]})})},Jx=e=>{let{onUpdate:t}=e;return(0,Ks.jsx)("div",{className:"fixed bottom-4 right-4 bg-blue-600 text-white p-4 rounded-lg shadow-lg z-50 max-w-sm",children:(0,Ks.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Ks.jsx)("div",{className:"flex-shrink-0",children:(0,Ks.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Ks.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),(0,Ks.jsxs)("div",{className:"flex-1",children:[(0,Ks.jsx)("p",{className:"text-sm font-medium",children:"Nouvelle version disponible"}),(0,Ks.jsx)("p",{className:"text-xs opacity-90",children:"Cliquez pour mettre \xe0 jour"})]}),(0,Ks.jsx)("button",{onClick:t,className:"flex-shrink-0 bg-white text-blue-600 px-3 py-1 rounded text-sm font-medium hover:bg-blue-50 transition-colors",children:"Mettre \xe0 jour"})]})})},Zx=()=>(0,Ks.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:(0,Ks.jsxs)("div",{className:"max-w-2xl w-full bg-white rounded-2xl shadow-xl p-8 text-center",children:[(0,Ks.jsxs)("div",{className:"mb-8",children:[(0,Ks.jsx)("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"AB Campus Finance"}),(0,Ks.jsx)("div",{className:"w-24 h-24 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-full mx-auto flex items-center justify-center",children:(0,Ks.jsx)("svg",{className:"w-12 h-12 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Ks.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})})]}),(0,Ks.jsxs)("div",{className:"space-y-6",children:[(0,Ks.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[(0,Ks.jsx)("h3",{className:"text-lg font-semibold text-yellow-800 mb-2",children:"Configuration requise"}),(0,Ks.jsx)("p",{className:"text-yellow-700",children:"L'application n\xe9cessite une configuration Supabase pour fonctionner."})]}),(0,Ks.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 text-left",children:[(0,Ks.jsx)("h4",{className:"font-semibold text-gray-800 mb-2",children:"\xc9tapes de configuration :"}),(0,Ks.jsxs)("ol",{className:"list-decimal list-inside space-y-2 text-gray-600 text-sm",children:[(0,Ks.jsxs)("li",{children:["Cr\xe9ez un projet sur ",(0,Ks.jsx)("a",{href:"https://supabase.com",className:"text-blue-600 hover:underline",target:"_blank",rel:"noopener noreferrer",children:"Supabase.com"})]}),(0,Ks.jsx)("li",{children:"Copiez l'URL et la cl\xe9 anonyme depuis Settings \u2192 API"}),(0,Ks.jsxs)("li",{children:["Cr\xe9ez un fichier ",(0,Ks.jsx)("code",{className:"bg-gray-200 px-1 rounded",children:".env.local"})," \xe0 la racine du projet"]}),(0,Ks.jsx)("li",{children:"Ajoutez vos cl\xe9s Supabase"}),(0,Ks.jsx)("li",{children:"Red\xe9marrez l'application"})]})]}),(0,Ks.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,Ks.jsx)("h4",{className:"font-semibold text-blue-800 mb-2",children:"Exemple de fichier .env.local :"}),(0,Ks.jsx)("pre",{className:"text-xs text-blue-700 bg-blue-100 p-3 rounded overflow-x-auto",children:"REACT_APP_SUPABASE_URL=https://your-project.supabase.co\nREACT_APP_SUPABASE_ANON_KEY=your_anon_key_here\nREACT_APP_BACKEND_URL=http://localhost:5000"})]}),(0,Ks.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[(0,Ks.jsx)("h4",{className:"font-semibold text-red-800 mb-2",children:"Diagnostic de la configuration :"}),(0,Ks.jsxs)("div",{className:"text-sm text-red-700 space-y-1",children:[(0,Ks.jsxs)("p",{children:["\u2022 URL Supabase: ","\u2705 D\xe9finie"]}),(0,Ks.jsxs)("p",{children:["\u2022 Cl\xe9 Supabase: ","\u2705 D\xe9finie"]}),(0,Ks.jsxs)("p",{children:["\u2022 Backend URL: ","\u2705 D\xe9finie"]}),(0,Ks.jsxs)("p",{children:["\u2022 Mode: ","production"]})]}),(0,Ks.jsx)("p",{className:"text-xs text-red-600 mt-2",children:"\ud83d\udca1 Ouvrez la console du navigateur (F12) pour voir les logs d\xe9taill\xe9s"})]}),(0,Ks.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[(0,Ks.jsx)("button",{onClick:()=>{console.log("[CONFIG] Tentative de rechargement..."),console.log("[CONFIG] Variables d'environnement:",{hasUrl:!0,hasKey:!0,url:"D\xe9finie",key:"D\xe9finie"}),window.location.reload()},className:"bg-gradient-to-r from-blue-500 to-indigo-600 text-white px-8 py-3 rounded-lg font-semibold hover:from-blue-600 hover:to-indigo-700 transition-all duration-200 shadow-lg hover:shadow-xl",children:"Recharger apr\xe8s configuration"}),(0,Ks.jsx)("button",{onClick:()=>{console.log("[CONFIG] Test de connexion manuel..."),Us().then(e=>{console.log("[CONFIG] R\xe9sultat du test:",e),alert("Test de configuration: ".concat(e.success?"SUCC\xc8S":"\xc9CHEC","\nD\xe9tails: ").concat(e.error||e.message||"Aucun d\xe9tail"))}).catch(e=>{console.error("[CONFIG] Erreur du test:",e),alert("Erreur du test: ".concat(e.message))})},className:"bg-gradient-to-r from-green-500 to-emerald-600 text-white px-8 py-3 rounded-lg font-semibold hover:from-green-600 hover:to-emerald-700 transition-all duration-200 shadow-lg hover:shadow-xl",children:"Tester la configuration"})]})]})]})}),$x=e=>{let{children:t,adminOnly:r=!1}=e;const{isAuthenticated:s,user:n,loading:a}=Zs();return a?(0,Ks.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,Ks.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary-600"})}):s?r&&"admin"!==(null===n||void 0===n?void 0:n.role)?(0,Ks.jsx)(pe,{to:"/dashboard",replace:!0}):t:(0,Ks.jsx)(pe,{to:"/login",replace:!0})},Qx=()=>{const[e,r]=(0,t.useState)(!1);(0,t.useEffect)(()=>(za.startChecking(()=>{r(!0)}),()=>{za.stopChecking()}),[]);return(0,Ks.jsxs)(Ks.Fragment,{children:[(0,Ks.jsx)(_e,{children:(0,Ks.jsxs)(ge,{children:[(0,Ks.jsx)(fe,{path:"/login",element:(0,Ks.jsx)(tf,{})}),(0,Ks.jsx)(fe,{path:"/register",element:(0,Ks.jsx)(bf,{})}),(0,Ks.jsx)(fe,{path:"/create-account",element:(0,Ks.jsx)(jf,{})}),(0,Ks.jsx)(fe,{path:"/pending-approval",element:(0,Ks.jsx)(wf,{})}),(0,Ks.jsx)(fe,{path:"/forgot-password",element:(0,Ks.jsx)(Sf,{})}),(0,Ks.jsx)(fe,{path:"/reset-password",element:(0,Ks.jsx)(kf,{})}),(0,Ks.jsx)(fe,{path:"/dashboard",element:(0,Ks.jsx)($x,{children:(0,Ks.jsx)(Pp,{children:(0,Ks.jsx)(Rf,{})})})}),(0,Ks.jsx)(fe,{path:"/admin",element:(0,Ks.jsx)($x,{adminOnly:!0,children:(0,Ks.jsx)(Pp,{children:(0,Ks.jsx)(Df,{})})})}),(0,Ks.jsx)(fe,{path:"/admin/loan-requests",element:(0,Ks.jsx)($x,{adminOnly:!0,children:(0,Ks.jsx)(Pp,{children:(0,Ks.jsx)(qf,{})})})}),(0,Ks.jsx)(fe,{path:"/admin/users",element:(0,Ks.jsx)($x,{adminOnly:!0,children:(0,Ks.jsx)(Pp,{children:(0,Ks.jsx)(Wf,{})})})}),(0,Ks.jsx)(fe,{path:"/admin/user-management",element:(0,Ks.jsx)($x,{adminOnly:!0,children:(0,Ks.jsx)(Pp,{children:(0,Ks.jsx)(Wf,{})})})}),(0,Ks.jsx)(fe,{path:"/admin/menu",element:(0,Ks.jsx)($x,{adminOnly:!0,children:(0,Ks.jsx)(Pp,{children:(0,Ks.jsx)($f,{})})})}),(0,Ks.jsx)(fe,{path:"/admin/analytics",element:(0,Ks.jsx)($x,{adminOnly:!0,children:(0,Ks.jsx)(Pp,{children:(0,Ks.jsx)(Zf,{})})})}),(0,Ks.jsx)(fe,{path:"/admin/settings",element:(0,Ks.jsx)($x,{adminOnly:!0,children:(0,Ks.jsx)(Pp,{children:(0,Ks.jsx)(tx,{})})})}),(0,Ks.jsx)(fe,{path:"/admin/ab-epargne",element:(0,Ks.jsx)($x,{adminOnly:!0,children:(0,Ks.jsx)(Pp,{children:(0,Ks.jsx)(sx,{})})})}),(0,Ks.jsx)(fe,{path:"/admin/test-notifications",element:(0,Ks.jsx)($x,{adminOnly:!0,children:(0,Ks.jsx)(Pp,{children:(0,Ks.jsx)(ox,{})})})}),(0,Ks.jsx)(fe,{path:"/loan-request",element:(0,Ks.jsx)($x,{children:(0,Ks.jsx)(Pp,{children:(0,Ks.jsx)(hx,{})})})}),(0,Ks.jsx)(fe,{path:"/loan-history",element:(0,Ks.jsx)($x,{children:(0,Ks.jsx)(Pp,{children:(0,Ks.jsx)(px,{})})})}),(0,Ks.jsx)(fe,{path:"/repayment",element:(0,Ks.jsx)($x,{children:(0,Ks.jsx)(Pp,{children:(0,Ks.jsx)(xx,{})})})}),(0,Ks.jsx)(fe,{path:"/repayment/success",element:(0,Ks.jsx)($x,{children:(0,Ks.jsx)(Pp,{children:(0,Ks.jsx)(gx,{})})})}),(0,Ks.jsx)(fe,{path:"/repayment/failure",element:(0,Ks.jsx)($x,{children:(0,Ks.jsx)(Pp,{children:(0,Ks.jsx)(vx,{})})})}),(0,Ks.jsx)(fe,{path:"/repayment/cancel",element:(0,Ks.jsx)($x,{children:(0,Ks.jsx)(Pp,{children:(0,Ks.jsx)(bx,{})})})}),(0,Ks.jsx)(fe,{path:"/profile",element:(0,Ks.jsx)($x,{children:(0,Ks.jsx)(Pp,{children:(0,Ks.jsx)(jx,{})})})}),(0,Ks.jsx)(fe,{path:"/menu",element:(0,Ks.jsx)($x,{children:(0,Ks.jsx)(Pp,{children:(0,Ks.jsx)(wx,{})})})}),(0,Ks.jsx)(fe,{path:"/ab-logement",element:(0,Ks.jsx)($x,{children:(0,Ks.jsx)(Pp,{children:(0,Ks.jsx)(Nx,{})})})}),(0,Ks.jsx)(fe,{path:"/ab-epargne",element:(0,Ks.jsx)($x,{children:(0,Ks.jsx)(Pp,{children:(0,Ks.jsx)(Ex,{})})})}),(0,Ks.jsx)(fe,{path:"/ab-epargne/retour",element:(0,Ks.jsx)($x,{children:(0,Ks.jsx)(Pp,{children:(0,Ks.jsx)(Cx,{})})})}),(0,Ks.jsx)(fe,{path:"/ab-epargne/plan/:id",element:(0,Ks.jsx)($x,{children:(0,Ks.jsx)(Pp,{children:(0,Ks.jsx)(Tx,{})})})}),(0,Ks.jsx)(fe,{path:"/ab-epargne/depot-retour",element:(0,Ks.jsx)($x,{children:(0,Ks.jsx)(Pp,{children:(0,Ks.jsx)(Ix,{})})})}),(0,Ks.jsx)(fe,{path:"/remboursement-retour",element:(0,Ks.jsx)($x,{children:(0,Ks.jsx)(Pp,{children:(0,Ks.jsx)(Rx,{})})})}),(0,Ks.jsx)(fe,{path:"/coaching-finance",element:(0,Ks.jsx)($x,{children:(0,Ks.jsx)(Pp,{children:(0,Ks.jsx)(Lx,{})})})}),(0,Ks.jsx)(fe,{path:"/loyalty-score",element:(0,Ks.jsx)($x,{children:(0,Ks.jsx)(Pp,{children:(0,Ks.jsx)(qx,{})})})}),(0,Ks.jsx)(fe,{path:"/test-otp",element:(0,Ks.jsx)(Hx,{})}),(0,Ks.jsx)(fe,{path:"/test-health",element:(0,Ks.jsx)(Wx,{})}),(0,Ks.jsx)(fe,{path:"/test-fedapay",element:(0,Ks.jsx)(Kx,{})}),(0,Ks.jsx)(fe,{path:"/test-plan-epargne/:id",element:(0,Ks.jsx)(Ox,{})}),(0,Ks.jsx)(fe,{path:"/",element:(0,Ks.jsx)(pe,{to:"/dashboard",replace:!0})})]})}),e&&(0,Ks.jsx)(Jx,{onUpdate:()=>{za.applyUpdate()}})]})},Yx=()=>{const[e,r]=(0,t.useState)(!1),[s,n]=(0,t.useState)(!0);return(0,t.useEffect)(()=>{(()=>{try{console.log("[APP] V\xe9rification des variables d'environnement...");const e=!0,t=!0,s=!0;console.log("[APP] Variables d'environnement:",{hasSupabaseUrl:e,hasSupabaseKey:t,hasBackendUrl:s,url:"D\xe9finie",key:"D\xe9finie",backend:"D\xe9finie"});const n=e&&t&&s;r(n),n?console.log("[APP] \u2705 Configuration d\xe9tect\xe9e, d\xe9marrage de l'application"):console.log("[APP] \u274c Configuration manquante, affichage de la page de configuration")}catch(e){console.error("[APP] Erreur lors de la v\xe9rification de la configuration:",e),r(!1)}finally{n(!1)}})(),console.log("[APP] Initialisation de la gestion du cache..."),Va()},[]),s?(0,Ks.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center",children:(0,Ks.jsxs)("div",{className:"text-center",children:[(0,Ks.jsx)("div",{className:"w-16 h-16 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,Ks.jsx)("p",{className:"text-gray-600",children:"V\xe9rification de la configuration..."})]})}):e?(0,Ks.jsx)($s,{children:(0,Ks.jsxs)(cn,{children:[(0,Ks.jsx)(Qx,{}),(0,Ks.jsx)(Fp,{}),(0,Ks.jsx)(Gp,{}),(0,Ks.jsx)(La,{position:"top-right"})]})}):(0,Ks.jsx)(Zx,{})},Xx=e=>{e&&e instanceof Function&&r.e(453).then(r.bind(r,453)).then(t=>{let{getCLS:r,getFID:s,getFCP:n,getLCP:a,getTTFB:i}=t;r(e),s(e),n(e),a(e),i(e)})};n.createRoot(document.getElementById("root")).render((0,Ks.jsx)(t.StrictMode,{children:(0,Ks.jsx)(Yx,{})})),Xx()})()})();
//# sourceMappingURL=main.49eb3521.js.map