{"version":3,"file":"static/js/407.bf80f8fa.chunk.js","mappings":"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","sources":["components/Admin/AdminDetailedStatistics.jsx"],"sourcesContent":["import React, { useState, useEffect, useMemo } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { getLoans, getPayments } from '../../utils/supabaseAPI';\r\nimport {\r\n  BarChart3,\r\n  ArrowLeft,\r\n  Calendar,\r\n  TrendingUp,\r\n  CreditCard,\r\n  CheckCircle,\r\n  DollarSign,\r\n  Activity,\r\n  RefreshCw,\r\n  Target\r\n} from 'lucide-react';\r\nimport {\r\n  BarChart,\r\n  Bar,\r\n  XAxis,\r\n  YAxis,\r\n  CartesianGrid,\r\n  Tooltip,\r\n  ResponsiveContainer,\r\n  PieChart,\r\n  Pie,\r\n  Cell,\r\n  Legend,\r\n  AreaChart,\r\n  Area\r\n} from 'recharts';\r\nimport { formatCurrency } from '../../utils/helpers';\r\n\r\nconst PERIODS = [\r\n  { id: 'day', label: 'Aujourd\\'hui' },\r\n  { id: 'week', label: 'Cette semaine' },\r\n  { id: 'month', label: 'Ce mois' },\r\n  { id: 'quarter', label: 'Ce trimestre' },\r\n  { id: 'year', label: 'Cette année' }\r\n];\r\n\r\nfunction getPeriodRange(periodId) {\r\n  const now = new Date();\r\n  const end = new Date(now);\r\n  end.setHours(23, 59, 59, 999);\r\n  let start = new Date(now);\r\n\r\n  switch (periodId) {\r\n    case 'day':\r\n      start.setHours(0, 0, 0, 0);\r\n      break;\r\n    case 'week':\r\n      start.setDate(start.getDate() - 6);\r\n      start.setHours(0, 0, 0, 0);\r\n      break;\r\n    case 'month':\r\n      start.setDate(1);\r\n      start.setHours(0, 0, 0, 0);\r\n      break;\r\n    case 'quarter':\r\n      const q = Math.floor(now.getMonth() / 3) + 1;\r\n      start.setMonth((q - 1) * 3, 1);\r\n      start.setHours(0, 0, 0, 0);\r\n      break;\r\n    case 'year':\r\n      start.setMonth(0, 1);\r\n      start.setHours(0, 0, 0, 0);\r\n      break;\r\n    default:\r\n      start.setMonth(start.getMonth() - 1);\r\n  }\r\n  return { start, end };\r\n}\r\n\r\nfunction isInRange(dateStr, start, end) {\r\n  const d = new Date(dateStr);\r\n  return d >= start && d <= end;\r\n}\r\n\r\nconst formatDateForInput = (d) => d.toISOString().slice(0, 10);\r\n\r\nconst AdminDetailedStatistics = () => {\r\n  const navigate = useNavigate();\r\n  const [period, setPeriod] = useState('month');\r\n  const [loading, setLoading] = useState(true);\r\n  const [loans, setLoans] = useState([]);\r\n  const [payments, setPayments] = useState([]);\r\n  const now = useMemo(() => new Date(), []);\r\n  const [customStartDate, setCustomStartDate] = useState(() => {\r\n    const d = new Date(now);\r\n    d.setMonth(d.getMonth() - 1);\r\n    return formatDateForInput(d);\r\n  });\r\n  const [customEndDate, setCustomEndDate] = useState(() => formatDateForInput(now));\r\n\r\n  const range = useMemo(() => {\r\n    if (period === 'custom' && customStartDate && customEndDate) {\r\n      const start = new Date(customStartDate);\r\n      start.setHours(0, 0, 0, 0);\r\n      const end = new Date(customEndDate);\r\n      end.setHours(23, 59, 59, 999);\r\n      return { start, end };\r\n    }\r\n    return getPeriodRange(period);\r\n  }, [period, customStartDate, customEndDate]);\r\n\r\n  useEffect(() => {\r\n    let cancelled = false;\r\n    async function load() {\r\n      setLoading(true);\r\n      try {\r\n        const [loansRes, paymentsRes] = await Promise.all([\r\n          getLoans(),\r\n          getPayments()\r\n        ]);\r\n        if (!cancelled) {\r\n          setLoans(loansRes.success ? loansRes.data || [] : []);\r\n          setPayments(paymentsRes.success ? paymentsRes.data || [] : []);\r\n        }\r\n      } finally {\r\n        if (!cancelled) setLoading(false);\r\n      }\r\n    }\r\n    load();\r\n    return () => { cancelled = true; };\r\n  }, []);\r\n\r\n  const stats = useMemo(() => {\r\n    const { start, end } = range;\r\n    const validated = (l) => l.approved_at && l.status !== 'pending' && l.status !== 'rejected';\r\n    const completedLoans = loans.filter(l => l.status === 'completed' && l.approved_at);\r\n\r\n    const loansCreatedInPeriod = loans.filter(l => isInRange(l.created_at, start, end));\r\n    const loansValidatedInPeriod = loans.filter(l => l.approved_at && isInRange(l.approved_at, start, end));\r\n    const paymentsInPeriod = payments.filter(p => isInRange(p.payment_date || p.created_at, start, end));\r\n\r\n    const totalPaidInPeriod = paymentsInPeriod.reduce((s, p) => s + (p.amount || 0), 0);\r\n    const principalValidatedInPeriod = loansValidatedInPeriod.reduce((s, l) => s + (l.amount || 0), 0);\r\n    const interestValidatedInPeriod = loansValidatedInPeriod.reduce((s, l) => {\r\n      return s + Math.round((l.amount || 0) * ((l.interest_rate || 0) / 100));\r\n    }, 0);\r\n\r\n    const completedInPeriod = completedLoans.filter(l => {\r\n      const loanPayments = payments.filter(p => p.loan_id === l.id);\r\n      const lastDate = loanPayments.length ? Math.max(...loanPayments.map(p => new Date(p.payment_date || p.created_at).getTime())) : new Date(l.updated_at || l.approved_at).getTime();\r\n      return lastDate >= start.getTime() && lastDate <= end.getTime();\r\n    });\r\n    const interestCollectedInPeriod = completedInPeriod.reduce((s, l) => {\r\n      return s + Math.round((l.amount || 0) * ((l.interest_rate || 0) / 100));\r\n    }, 0);\r\n\r\n    const totalPrincipalValidated = loans.filter(validated).reduce((s, l) => s + (l.amount || 0), 0);\r\n    const totalPaidAll = payments.reduce((s, p) => s + (p.amount || 0), 0);\r\n    const repaymentRate = totalPrincipalValidated > 0 ? Math.round((totalPaidAll / totalPrincipalValidated) * 100) : 0;\r\n\r\n    return {\r\n      loansCreatedInPeriod: loansCreatedInPeriod.length,\r\n      loansValidatedInPeriod: loansValidatedInPeriod.length,\r\n      principalValidatedInPeriod,\r\n      interestCollectedInPeriod,\r\n      totalPaidInPeriod,\r\n      interestValidatedInPeriod,\r\n      repaymentRate,\r\n      byDay: groupRequestsForChart(loansCreatedInPeriod, start, end, period === 'custom' ? 'day' : period),\r\n      byStatus: getStatusDistribution(loans),\r\n      interestByMonth: getInterestByMonth(loans, payments)\r\n    };\r\n  }, [loans, payments, range, period]);\r\n\r\n  function groupRequestsForChart(loanList, start, end, periodId) {\r\n    if (periodId === 'year') {\r\n      const byMonth = {};\r\n      for (let m = 0; m < 12; m++) {\r\n        const key = `${start.getFullYear()}-${String(m + 1).padStart(2, '0')}`;\r\n        byMonth[key] = { date: key, demandes: 0, label: new Date(start.getFullYear(), m, 1).toLocaleDateString('fr-FR', { month: 'short', year: '2-digit' }) };\r\n      }\r\n      loanList.forEach(l => {\r\n        const key = new Date(l.created_at).toISOString().slice(0, 7);\r\n        if (byMonth[key]) byMonth[key].demandes += 1;\r\n      });\r\n      return Object.values(byMonth).sort((a, b) => a.date.localeCompare(b.date));\r\n    }\r\n    if (periodId === 'quarter') {\r\n      const buckets = {};\r\n      const d = new Date(start);\r\n      while (d <= end) {\r\n        const weekStart = new Date(d);\r\n        weekStart.setDate(d.getDate() - d.getDay());\r\n        const weekKey = weekStart.toISOString().slice(0, 10);\r\n        if (!buckets[weekKey]) buckets[weekKey] = { date: weekKey, demandes: 0, label: `S. ${weekStart.getMonth() + 1}/${String(weekStart.getDate()).padStart(2, '0')}` };\r\n        d.setDate(d.getDate() + 1);\r\n      }\r\n      loanList.forEach(l => {\r\n        const dt = new Date(l.created_at);\r\n        const weekStart = new Date(dt);\r\n        weekStart.setDate(dt.getDate() - dt.getDay());\r\n        const weekKey = weekStart.toISOString().slice(0, 10);\r\n        if (buckets[weekKey]) buckets[weekKey].demandes += 1;\r\n      });\r\n      return Object.values(buckets).sort((a, b) => a.date.localeCompare(b.date));\r\n    }\r\n    const map = {};\r\n    const d = new Date(start);\r\n    while (d <= end) {\r\n      const key = d.toISOString().slice(0, 10);\r\n      map[key] = { date: key, demandes: 0, label: d.toLocaleDateString('fr-FR', { day: 'numeric', month: 'short' }) };\r\n      d.setDate(d.getDate() + 1);\r\n    }\r\n    loanList.forEach(l => {\r\n      const key = new Date(l.created_at).toISOString().slice(0, 10);\r\n      if (map[key]) map[key].demandes += 1;\r\n    });\r\n    return Object.values(map).sort((a, b) => a.date.localeCompare(b.date));\r\n  }\r\n\r\n  function getStatusDistribution(loanList) {\r\n    const statuses = { pending: 0, active: 0, approved: 0, completed: 0, rejected: 0 };\r\n    loanList.forEach(l => {\r\n      const s = l.status || 'pending';\r\n      if (statuses[s] !== undefined) statuses[s] += 1;\r\n    });\r\n    return [\r\n      { name: 'En attente', value: statuses.pending, color: '#eab308' },\r\n      { name: 'Actifs', value: statuses.active + statuses.approved, color: '#3b82f6' },\r\n      { name: 'Remboursés', value: statuses.completed, color: '#22c55e' },\r\n      { name: 'Rejetés', value: statuses.rejected, color: '#ef4444' }\r\n    ].filter(d => d.value > 0);\r\n  }\r\n\r\n  function getInterestByMonth(loanList, paymentList) {\r\n    const completed = loanList.filter(l => l.status === 'completed' && l.approved_at);\r\n    const byMonth = {};\r\n    completed.forEach(l => {\r\n      const loanPays = paymentList.filter(p => p.loan_id === l.id);\r\n      const lastDate = loanPays.length\r\n        ? new Date(Math.max(...loanPays.map(p => new Date(p.payment_date || p.created_at).getTime())))\r\n        : new Date(l.updated_at || l.approved_at);\r\n      const key = `${lastDate.getFullYear()}-${String(lastDate.getMonth() + 1).padStart(2, '0')}`;\r\n      const interest = Math.round((l.amount || 0) * ((l.interest_rate || 0) / 100));\r\n      byMonth[key] = (byMonth[key] || 0) + interest;\r\n    });\r\n    return Object.entries(byMonth)\r\n      .map(([month, value]) => ({ month, value, label: month }))\r\n      .sort((a, b) => a.month.localeCompare(b.month))\r\n      .slice(-12);\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gradient-to-br from-green-50 via-white to-emerald-50/30 pb-24\">\r\n      <div className=\"bg-white/80 backdrop-blur-lg shadow-sm border-b border-gray-100 sticky top-0 z-30\">\r\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4\">\r\n          <div className=\"flex items-center justify-between gap-4\">\r\n            <div className=\"flex items-center gap-3\">\r\n              <button\r\n                type=\"button\"\r\n                onClick={() => navigate('/admin/analytics')}\r\n                className=\"p-2 rounded-xl bg-green-100 text-green-700 hover:bg-green-200 transition-colors\"\r\n                aria-label=\"Retour\"\r\n              >\r\n                <ArrowLeft size={20} />\r\n              </button>\r\n              <div className=\"p-2.5 bg-green-100 rounded-xl\">\r\n                <BarChart3 size={24} className=\"text-green-600\" />\r\n              </div>\r\n              <div>\r\n                <h1 className=\"text-xl sm:text-2xl font-bold text-gray-900 font-montserrat\">Statistiques détaillées</h1>\r\n                <p className=\"text-sm text-gray-500\">Graphiques et filtres par période</p>\r\n              </div>\r\n            </div>\r\n            <button\r\n              type=\"button\"\r\n              onClick={() => window.location.reload()}\r\n              className=\"flex items-center gap-2 px-3 py-2 bg-white border border-gray-200 rounded-xl text-gray-700 hover:bg-gray-50 transition-colors shadow-sm\"\r\n            >\r\n              <RefreshCw size={18} />\r\n              <span className=\"hidden sm:inline text-sm font-medium\">Actualiser</span>\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6\">\r\n        {loading ? (\r\n          <div className=\"flex flex-col items-center justify-center py-16 gap-4\">\r\n            <div className=\"animate-spin rounded-full h-10 w-10 border-2 border-green-500 border-t-transparent\" />\r\n            <p className=\"text-gray-500 text-sm\">Chargement des données...</p>\r\n          </div>\r\n        ) : (\r\n          <>\r\n            {/* Filtre période */}\r\n            <div className=\"mb-6\">\r\n              <p className=\"text-sm font-medium text-gray-700 mb-2 flex items-center gap-2\">\r\n                <Calendar size={16} className=\"text-green-600\" />\r\n                Période\r\n              </p>\r\n              <div className=\"flex flex-wrap gap-2 mb-4\">\r\n                {PERIODS.map((p) => (\r\n                  <button\r\n                    key={p.id}\r\n                    type=\"button\"\r\n                    onClick={() => setPeriod(p.id)}\r\n                    className={`px-4 py-2.5 rounded-xl text-sm font-medium transition-all ${\r\n                      period === p.id && period !== 'custom'\r\n                        ? 'bg-green-500 text-white shadow-md'\r\n                        : 'bg-white text-gray-600 border border-gray-200 hover:bg-green-50 hover:border-green-200'\r\n                    }`}\r\n                  >\r\n                    {p.label}\r\n                  </button>\r\n                ))}\r\n              </div>\r\n              {/* Sélection de dates précises */}\r\n              <div className=\"flex flex-wrap items-center gap-3 p-4 bg-white rounded-2xl border border-gray-100 shadow-sm\">\r\n                <div className=\"flex items-center gap-2 text-gray-600\">\r\n                  <Calendar size={20} className=\"text-green-600 flex-shrink-0\" />\r\n                  <span className=\"text-sm font-medium\">Dates personnalisées</span>\r\n                </div>\r\n                <div className=\"flex flex-wrap items-center gap-2 sm:gap-4\">\r\n                  <label className=\"flex items-center gap-2 text-sm\">\r\n                    <span className=\"text-gray-500 whitespace-nowrap\">Du</span>\r\n                    <input\r\n                      type=\"date\"\r\n                      value={customStartDate}\r\n                      onChange={(e) => {\r\n                        setCustomStartDate(e.target.value);\r\n                        setPeriod('custom');\r\n                        if (e.target.value > customEndDate) setCustomEndDate(e.target.value);\r\n                      }}\r\n                      className=\"px-3 py-2 rounded-xl border border-gray-200 focus:border-green-500 focus:ring-2 focus:ring-green-500/20 outline-none text-gray-900\"\r\n                    />\r\n                  </label>\r\n                  <label className=\"flex items-center gap-2 text-sm\">\r\n                    <span className=\"text-gray-500 whitespace-nowrap\">au</span>\r\n                    <input\r\n                      type=\"date\"\r\n                      value={customEndDate}\r\n                      min={customStartDate}\r\n                      onChange={(e) => {\r\n                        setCustomEndDate(e.target.value);\r\n                        setPeriod('custom');\r\n                        if (e.target.value < customStartDate) setCustomStartDate(e.target.value);\r\n                      }}\r\n                      className=\"px-3 py-2 rounded-xl border border-gray-200 focus:border-green-500 focus:ring-2 focus:ring-green-500/20 outline-none text-gray-900\"\r\n                    />\r\n                  </label>\r\n                  {period === 'custom' && (\r\n                    <span className=\"text-xs text-green-600 font-medium bg-green-50 px-2 py-1 rounded-lg\">Personnalisé</span>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Cartes stats période */}\r\n            <div className=\"grid grid-cols-2 lg:grid-cols-4 gap-4 mb-8\">\r\n              <div className=\"bg-white rounded-2xl p-4 sm:p-5 shadow-lg border border-gray-100\">\r\n                <div className=\"flex items-center gap-2 mb-2\">\r\n                  <div className=\"p-2 bg-blue-100 rounded-lg\">\r\n                    <CreditCard size={18} className=\"text-blue-600\" />\r\n                  </div>\r\n                  <span className=\"text-xs font-medium text-gray-500\">Demandes reçues</span>\r\n                </div>\r\n                <p className=\"text-2xl font-bold text-gray-900\">{stats.loansCreatedInPeriod}</p>\r\n              </div>\r\n              <div className=\"bg-white rounded-2xl p-4 sm:p-5 shadow-lg border border-gray-100\">\r\n                <div className=\"flex items-center gap-2 mb-2\">\r\n                  <div className=\"p-2 bg-green-100 rounded-lg\">\r\n                    <CheckCircle size={18} className=\"text-green-600\" />\r\n                  </div>\r\n                  <span className=\"text-xs font-medium text-gray-500\">Prêts validés</span>\r\n                </div>\r\n                <p className=\"text-2xl font-bold text-gray-900\">{stats.loansValidatedInPeriod}</p>\r\n              </div>\r\n              <div className=\"bg-white rounded-2xl p-4 sm:p-5 shadow-lg border border-gray-100\">\r\n                <div className=\"flex items-center gap-2 mb-2\">\r\n                  <div className=\"p-2 bg-emerald-100 rounded-lg\">\r\n                    <DollarSign size={18} className=\"text-emerald-600\" />\r\n                  </div>\r\n                  <span className=\"text-xs font-medium text-gray-500\">Intérêts collectés (période)</span>\r\n                </div>\r\n                <p className=\"text-lg font-bold text-gray-900\">{formatCurrency(stats.interestCollectedInPeriod)}</p>\r\n              </div>\r\n              <div className=\"bg-white rounded-2xl p-4 sm:p-5 shadow-lg border border-gray-100\">\r\n                <div className=\"flex items-center gap-2 mb-2\">\r\n                  <div className=\"p-2 bg-amber-100 rounded-lg\">\r\n                    <Target size={18} className=\"text-amber-600\" />\r\n                  </div>\r\n                  <span className=\"text-xs font-medium text-gray-500\">Taux remboursement</span>\r\n                </div>\r\n                <p className=\"text-2xl font-bold text-gray-900\">{stats.repaymentRate}%</p>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Montant prêté & Paiements période */}\r\n            <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-8\">\r\n              <div className=\"bg-white rounded-2xl p-5 shadow-lg border border-gray-100\">\r\n                <p className=\"text-sm font-medium text-gray-500 mb-1\">Principal prêté (période)</p>\r\n                <p className=\"text-xl font-bold text-green-700\">{formatCurrency(stats.principalValidatedInPeriod)}</p>\r\n              </div>\r\n              <div className=\"bg-white rounded-2xl p-5 shadow-lg border border-gray-100\">\r\n                <p className=\"text-sm font-medium text-gray-500 mb-1\">Paiements reçus (période)</p>\r\n                <p className=\"text-xl font-bold text-blue-600\">{formatCurrency(stats.totalPaidInPeriod)}</p>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Graphique demandes */}\r\n            <div className=\"bg-white rounded-2xl p-4 sm:p-6 shadow-lg border border-gray-100 mb-6\">\r\n              <h3 className=\"text-lg font-bold text-gray-900 mb-4 flex items-center gap-2\">\r\n                <Activity size={20} className=\"text-green-600\" />\r\n                Demandes de prêts (période)\r\n              </h3>\r\n              <div className=\"h-64 sm:h-72\">\r\n                <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n                  <BarChart data={stats.byDay} margin={{ top: 8, right: 8, left: 0, bottom: 0 }}>\r\n                    <CartesianGrid strokeDasharray=\"3 3\" stroke=\"#f0f0f0\" />\r\n                    <XAxis dataKey=\"label\" tick={{ fontSize: 11 }} stroke=\"#94a3b8\" />\r\n                    <YAxis tick={{ fontSize: 11 }} stroke=\"#94a3b8\" allowDecimals={false} />\r\n                    <Tooltip\r\n                      contentStyle={{ borderRadius: '12px', border: '1px solid #e2e8f0' }}\r\n                      formatter={(value) => [value, 'Demandes']}\r\n                      labelFormatter={(label) => `Jour: ${label}`}\r\n                    />\r\n                    <Bar dataKey=\"demandes\" fill=\"#22c55e\" radius={[6, 6, 0, 0]} name=\"Demandes\" />\r\n                  </BarChart>\r\n                </ResponsiveContainer>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Intérêts par mois + Répartition statuts */}\r\n            <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6\">\r\n              <div className=\"bg-white rounded-2xl p-4 sm:p-6 shadow-lg border border-gray-100\">\r\n                <h3 className=\"text-lg font-bold text-gray-900 mb-4 flex items-center gap-2\">\r\n                  <TrendingUp size={20} className=\"text-green-600\" />\r\n                  Intérêts collectés (par mois)\r\n                </h3>\r\n                <div className=\"h-64\">\r\n                  {stats.interestByMonth.length > 0 ? (\r\n                    <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n                      <AreaChart data={stats.interestByMonth} margin={{ top: 8, right: 8, left: 0, bottom: 0 }}>\r\n                        <defs>\r\n                          <linearGradient id=\"colorInterest\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\r\n                            <stop offset=\"5%\" stopColor=\"#22c55e\" stopOpacity={0.4} />\r\n                            <stop offset=\"95%\" stopColor=\"#22c55e\" stopOpacity={0} />\r\n                          </linearGradient>\r\n                        </defs>\r\n                        <CartesianGrid strokeDasharray=\"3 3\" stroke=\"#f0f0f0\" />\r\n                        <XAxis dataKey=\"label\" tick={{ fontSize: 10 }} stroke=\"#94a3b8\" />\r\n                        <YAxis tick={{ fontSize: 10 }} stroke=\"#94a3b8\" tickFormatter={(v) => `${v / 1000}k`} />\r\n                        <Tooltip\r\n                          contentStyle={{ borderRadius: '12px', border: '1px solid #e2e8f0' }}\r\n                          formatter={(value) => [formatCurrency(value), 'Intérêts']}\r\n                        />\r\n                        <Area type=\"monotone\" dataKey=\"value\" stroke=\"#22c55e\" strokeWidth={2} fill=\"url(#colorInterest)\" name=\"Intérêts\" />\r\n                      </AreaChart>\r\n                    </ResponsiveContainer>\r\n                  ) : (\r\n                    <div className=\"h-full flex items-center justify-center text-gray-400 text-sm\">Aucune donnée sur les intérêts par mois</div>\r\n                  )}\r\n                </div>\r\n              </div>\r\n              <div className=\"bg-white rounded-2xl p-4 sm:p-6 shadow-lg border border-gray-100\">\r\n                <h3 className=\"text-lg font-bold text-gray-900 mb-4\">Répartition des prêts</h3>\r\n                <div className=\"h-64 flex items-center justify-center\">\r\n                  {stats.byStatus.length > 0 ? (\r\n                    <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n                      <PieChart>\r\n                        <Pie\r\n                          data={stats.byStatus}\r\n                          cx=\"50%\"\r\n                          cy=\"50%\"\r\n                          innerRadius={60}\r\n                          outerRadius={90}\r\n                          paddingAngle={2}\r\n                          dataKey=\"value\"\r\n                          nameKey=\"name\"\r\n                          label={({ name, value }) => `${name}: ${value}`}\r\n                        >\r\n                          {stats.byStatus.map((entry, index) => (\r\n                            <Cell key={entry.name} fill={entry.color} />\r\n                          ))}\r\n                        </Pie>\r\n                        <Tooltip formatter={(value) => [value, 'Prêts']} contentStyle={{ borderRadius: '12px', border: '1px solid #e2e8f0' }} />\r\n                        <Legend />\r\n                      </PieChart>\r\n                    </ResponsiveContainer>\r\n                  ) : (\r\n                    <p className=\"text-gray-400 text-sm\">Aucun prêt</p>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AdminDetailedStatistics;\r\n"],"names":["PERIODS","id","label","isInRange","dateStr","start","end","d","Date","formatDateForInput","toISOString","slice","AdminDetailedStatistics","navigate","useNavigate","period","setPeriod","useState","loading","setLoading","loans","setLoans","payments","setPayments","now","useMemo","customStartDate","setCustomStartDate","setMonth","getMonth","customEndDate","setCustomEndDate","range","setHours","periodId","setDate","getDate","q","Math","floor","getPeriodRange","useEffect","cancelled","async","loansRes","paymentsRes","Promise","all","getLoans","getPayments","success","data","load","stats","completedLoans","filter","l","status","approved_at","loansCreatedInPeriod","created_at","loansValidatedInPeriod","totalPaidInPeriod","p","payment_date","reduce","s","amount","principalValidatedInPeriod","interestValidatedInPeriod","round","interest_rate","interestCollectedInPeriod","loanPayments","loan_id","lastDate","length","max","map","getTime","updated_at","totalPrincipalValidated","totalPaidAll","repaymentRate","byDay","groupRequestsForChart","byStatus","getStatusDistribution","interestByMonth","getInterestByMonth","loanList","byMonth","m","key","concat","getFullYear","String","padStart","date","demandes","toLocaleDateString","month","year","forEach","Object","values","sort","a","b","localeCompare","buckets","weekStart","getDay","weekKey","dt","day","statuses","pending","active","approved","completed","rejected","undefined","name","value","color","paymentList","loanPays","interest","entries","_ref","_jsxs","className","children","_jsx","type","onClick","ArrowLeft","size","BarChart3","window","location","reload","RefreshCw","_Fragment","Calendar","onChange","e","target","min","CreditCard","CheckCircle","DollarSign","formatCurrency","Target","Activity","ResponsiveContainer","width","height","BarChart","margin","top","right","left","bottom","CartesianGrid","strokeDasharray","stroke","XAxis","dataKey","tick","fontSize","YAxis","allowDecimals","Tooltip","contentStyle","borderRadius","border","formatter","labelFormatter","Bar","fill","radius","TrendingUp","AreaChart","x1","y1","x2","y2","offset","stopColor","stopOpacity","tickFormatter","v","Area","strokeWidth","PieChart","Pie","cx","cy","innerRadius","outerRadius","paddingAngle","nameKey","_ref2","entry","index","Cell","Legend"],"sourceRoot":""}